import{C as Oe,D as Ge,E as _e,F as $e,G as at,H as Ze,K as Pe,L as st,M as ft,N as lt,P as ct}from"./chunk-DDQYIG3R.js";import{M as it,R as ot,c as qe,g as tt,i as rt,k as nt,w as Ce}from"./chunk-GVCJ4KOK.js";import{a as xe,b as Te,g as ge}from"./chunk-7QOE2ANW.js";function Rt(_,Q){return Q.forEach(function(C){C&&typeof C!="string"&&!Array.isArray(C)&&Object.keys(C).forEach(function(o){if(o!=="default"&&!(o in _)){var e=Object.getOwnPropertyDescriptor(C,o);Object.defineProperty(_,o,e.get?e:{enumerable:!0,get:function(){return C[o]}})}})}),Object.freeze(_)}function ht(_,Q){return new Promise(function(C,o){let e;return Ct(_).then(function(t){try{return e=t,C(new Blob([Q.slice(0,2),e,Q.slice(2)],{type:"image/jpeg"}))}catch(l){return o(l)}},o)})}var Ct=_=>new Promise((Q,C)=>{let o=new FileReader;o.addEventListener("load",({target:{result:e}})=>{let t=new DataView(e),l=0;if(t.getUint16(l)!==65496)return C("not a valid JPEG");for(l+=2;;){let s=t.getUint16(l);if(s===65498)break;let g=t.getUint16(l+2);if(s===65505&&t.getUint32(l+4)===1165519206){let y=l+10,n;switch(t.getUint16(y)){case 18761:n=!0;break;case 19789:n=!1;break;default:return C("TIFF header contains invalid endian")}if(t.getUint16(y+2,n)!==42)return C("TIFF header contains invalid version");let i=t.getUint32(y+4,n),r=y+i+2+12*t.getUint16(y+i,n);for(let f=y+i+2;f<r;f+=12)if(t.getUint16(f,n)==274){if(t.getUint16(f+2,n)!==3)return C("Orientation data type is invalid");if(t.getUint32(f+4,n)!==1)return C("Orientation data count is invalid");t.setUint16(f+8,1,n);break}return Q(e.slice(l,l+2+g))}l+=2+g}return Q(new Blob)}),o.readAsArrayBuffer(_)}),De={},Bt={get exports(){return De},set exports(_){De=_}};(function(_){var Q,C,o={};Bt.exports=o,o.parse=function(e,t){for(var l=o.bin.readUshort,s=o.bin.readUint,g=0,y={},n=new Uint8Array(e),i=n.length-4;s(n,i)!=101010256;)i--;g=i,g+=4;var r=l(n,g+=4);l(n,g+=2);var f=s(n,g+=2),d=s(n,g+=4);g+=4,g=d;for(var E=0;E<r;E++){s(n,g),g+=4,g+=4,g+=4,s(n,g+=4),f=s(n,g+=4);var I=s(n,g+=4),b=l(n,g+=4),O=l(n,g+2),T=l(n,g+4);g+=6;var B=s(n,g+=8);g+=4,g+=b+O+T,o._readLocal(n,B,y,f,I,t)}return y},o._readLocal=function(e,t,l,s,g,y){var n=o.bin.readUshort,i=o.bin.readUint;i(e,t),n(e,t+=4),n(e,t+=2);var r=n(e,t+=2);i(e,t+=2),i(e,t+=4),t+=4;var f=n(e,t+=8),d=n(e,t+=2);t+=2;var E=o.bin.readUTF8(e,t,f);if(t+=f,t+=d,y)l[E]={size:g,csize:s};else{var I=new Uint8Array(e.buffer,t);if(r==0)l[E]=new Uint8Array(I.buffer.slice(t,t+s));else{if(r!=8)throw"unknown compression method: "+r;var b=new Uint8Array(g);o.inflateRaw(I,b),l[E]=b}}},o.inflateRaw=function(e,t){return o.F.inflate(e,t)},o.inflate=function(e,t){return e[0],e[1],o.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),t)},o.deflate=function(e,t){t==null&&(t={level:6});var l=0,s=new Uint8Array(50+Math.floor(1.1*e.length));s[l]=120,s[l+1]=156,l+=2,l=o.F.deflateRaw(e,s,l,t.level);var g=o.adler(e,0,e.length);return s[l+0]=g>>>24&255,s[l+1]=g>>>16&255,s[l+2]=g>>>8&255,s[l+3]=g>>>0&255,new Uint8Array(s.buffer,0,l+4)},o.deflateRaw=function(e,t){t==null&&(t={level:6});var l=new Uint8Array(50+Math.floor(1.1*e.length)),s=o.F.deflateRaw(e,l,s,t.level);return new Uint8Array(l.buffer,0,s)},o.encode=function(e,t){t==null&&(t=!1);var l=0,s=o.bin.writeUint,g=o.bin.writeUshort,y={};for(var n in e){var i=!o._noNeed(n)&&!t,r=e[n],f=o.crc.crc(r,0,r.length);y[n]={cpr:i,usize:r.length,crc:f,file:i?o.deflateRaw(r):r}}for(var n in y)l+=y[n].file.length+30+46+2*o.bin.sizeUTF8(n);l+=22;var d=new Uint8Array(l),E=0,I=[];for(var n in y){var b=y[n];I.push(E),E=o._writeHeader(d,E,n,b,0)}var O=0,T=E;for(var n in y)b=y[n],I.push(E),E=o._writeHeader(d,E,n,b,1,I[O++]);var B=E-T;return s(d,E,101010256),E+=4,g(d,E+=4,O),g(d,E+=2,O),s(d,E+=2,B),s(d,E+=4,T),E+=4,E+=2,d.buffer},o._noNeed=function(e){var t=e.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(t)!=-1},o._writeHeader=function(e,t,l,s,g,y){var n=o.bin.writeUint,i=o.bin.writeUshort,r=s.file;return n(e,t,g==0?67324752:33639248),t+=4,g==1&&(t+=2),i(e,t,20),i(e,t+=2,0),i(e,t+=2,s.cpr?8:0),n(e,t+=2,0),n(e,t+=4,s.crc),n(e,t+=4,r.length),n(e,t+=4,s.usize),i(e,t+=4,o.bin.sizeUTF8(l)),i(e,t+=2,0),t+=2,g==1&&(t+=2,t+=2,n(e,t+=6,y),t+=4),t+=o.bin.writeUTF8(e,t,l),g==0&&(e.set(r,t),t+=r.length),t},o.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var l=t,s=0;s<8;s++)1&l?l=3988292384^l>>>1:l>>>=1;e[t]=l}return e}(),update:function(e,t,l,s){for(var g=0;g<s;g++)e=o.crc.table[255&(e^t[l+g])]^e>>>8;return e},crc:function(e,t,l){return 4294967295^o.crc.update(4294967295,e,t,l)}},o.adler=function(e,t,l){for(var s=1,g=0,y=t,n=t+l;y<n;){for(var i=Math.min(y+5552,n);y<i;)g+=s+=e[y++];s%=65521,g%=65521}return g<<16|s},o.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,l){e[t]=255&l,e[t+1]=l>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,l){e[t]=255&l,e[t+1]=l>>8&255,e[t+2]=l>>16&255,e[t+3]=l>>24&255},readASCII:function(e,t,l){for(var s="",g=0;g<l;g++)s+=String.fromCharCode(e[t+g]);return s},writeASCII:function(e,t,l){for(var s=0;s<l.length;s++)e[t+s]=l.charCodeAt(s)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,l){for(var s,g="",y=0;y<l;y++)g+="%"+o.bin.pad(e[t+y].toString(16));try{s=decodeURIComponent(g)}catch{return o.bin.readASCII(e,t,l)}return s},writeUTF8:function(e,t,l){for(var s=l.length,g=0,y=0;y<s;y++){var n=l.charCodeAt(y);if(!(4294967168&n))e[t+g]=n,g++;else if(!(4294965248&n))e[t+g]=192|n>>6,e[t+g+1]=128|n>>0&63,g+=2;else if(!(4294901760&n))e[t+g]=224|n>>12,e[t+g+1]=128|n>>6&63,e[t+g+2]=128|n>>0&63,g+=3;else{if(4292870144&n)throw"e";e[t+g]=240|n>>18,e[t+g+1]=128|n>>12&63,e[t+g+2]=128|n>>6&63,e[t+g+3]=128|n>>0&63,g+=4}}return g},sizeUTF8:function(e){for(var t=e.length,l=0,s=0;s<t;s++){var g=e.charCodeAt(s);if(!(4294967168&g))l++;else if(!(4294965248&g))l+=2;else if(!(4294901760&g))l+=3;else{if(4292870144&g)throw"e";l+=4}}return l}},o.F={},o.F.deflateRaw=function(e,t,l,s){var g=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][s],y=o.F.U,n=o.F._goodIndex;o.F._hash;var i=o.F._putsE,r=0,f=l<<3,d=0,E=e.length;if(s==0){for(;r<E;)i(t,f,r+(w=Math.min(65535,E-r))==E?1:0),f=o.F._copyExact(e,r,w,t,f+8),r+=w;return f>>>3}var I=y.lits,b=y.strt,O=y.prev,T=0,B=0,P=0,A=0,S=0,u=0;for(E>2&&(b[u=o.F._hash(e,0)]=0),r=0;r<E;r++){if(S=u,r+1<E-2){u=o.F._hash(e,r+1);var c=r+1&32767;O[c]=b[u],b[u]=c}if(d<=r){(T>14e3||B>26697)&&E-r>100&&(d<r&&(I[T]=r-d,T+=2,d=r),f=o.F._writeBlock(r==E-1||d==E?1:0,I,T,A,e,P,r-P,t,f),T=B=A=0,P=r);var m=0;r<E-2&&(m=o.F._bestMatch(e,r,O,S,Math.min(g[2],E-r),g[3]));var w=m>>>16,v=65535&m;if(m!=0){v=65535&m;var U=n(w=m>>>16,y.of0);y.lhst[257+U]++;var p=n(v,y.df0);y.dhst[p]++,A+=y.exb[U]+y.dxb[p],I[T]=w<<23|r-d,I[T+1]=v<<16|U<<8|p,T+=2,d=r+w}else y.lhst[e[r]]++;B++}}for(P==r&&e.length!=0||(d<r&&(I[T]=r-d,T+=2,d=r),f=o.F._writeBlock(1,I,T,A,e,P,r-P,t,f),T=0,B=0,T=B=A=0,P=r);7&f;)f++;return f>>>3},o.F._bestMatch=function(e,t,l,s,g,y){var n=32767&t,i=l[n],r=n-i+32768&32767;if(i==n||s!=o.F._hash(e,t-r))return 0;for(var f=0,d=0,E=Math.min(32767,t);r<=E&&--y!=0&&i!=n;){if(f==0||e[t+f]==e[t+f-r]){var I=o.F._howLong(e,t,r);if(I>f){if(d=r,(f=I)>=g)break;r+2<I&&(I=r+2);for(var b=0,O=0;O<I-2;O++){var T=t-r+O+32768&32767,B=T-l[T]+32768&32767;B>b&&(b=B,i=T)}}}r+=(n=i)-(i=l[n])+32768&32767}return f<<16|d},o.F._howLong=function(e,t,l){if(e[t]!=e[t-l]||e[t+1]!=e[t+1-l]||e[t+2]!=e[t+2-l])return 0;var s=t,g=Math.min(e.length,t+258);for(t+=3;t<g&&e[t]==e[t-l];)t++;return t-s},o.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},o.saved=0,o.F._writeBlock=function(e,t,l,s,g,y,n,i,r){var f,d,E,I,b,O,T,B,P,A=o.F.U,S=o.F._putsF,u=o.F._putsE;A.lhst[256]++,d=(f=o.F.getTrees())[0],E=f[1],I=f[2],b=f[3],O=f[4],T=f[5],B=f[6],P=f[7];var c=32+(r+3&7?8-(r+3&7):0)+(n<<3),m=s+o.F.contSize(A.fltree,A.lhst)+o.F.contSize(A.fdtree,A.dhst),w=s+o.F.contSize(A.ltree,A.lhst)+o.F.contSize(A.dtree,A.dhst);w+=14+3*T+o.F.contSize(A.itree,A.ihst)+(2*A.ihst[16]+3*A.ihst[17]+7*A.ihst[18]);for(var v=0;v<286;v++)A.lhst[v]=0;for(v=0;v<30;v++)A.dhst[v]=0;for(v=0;v<19;v++)A.ihst[v]=0;var U=c<m&&c<w?0:m<w?1:2;if(S(i,r,e),S(i,r+1,U),r+=3,U==0){for(;7&r;)r++;r=o.F._copyExact(g,y,n,i,r)}else{var p,F;if(U==1&&(p=A.fltree,F=A.fdtree),U==2){o.F.makeCodes(A.ltree,d),o.F.revCodes(A.ltree,d),o.F.makeCodes(A.dtree,E),o.F.revCodes(A.dtree,E),o.F.makeCodes(A.itree,I),o.F.revCodes(A.itree,I),p=A.ltree,F=A.dtree,u(i,r,b-257),u(i,r+=5,O-1),u(i,r+=5,T-4),r+=4;for(var h=0;h<T;h++)u(i,r+3*h,A.itree[1+(A.ordr[h]<<1)]);r+=3*T,r=o.F._codeTiny(B,A.itree,i,r),r=o.F._codeTiny(P,A.itree,i,r)}for(var a=y,k=0;k<l;k+=2){for(var R=t[k],M=R>>>23,z=a+(8388607&R);a<z;)r=o.F._writeLit(g[a++],p,i,r);if(M!=0){var D=t[k+1],H=D>>16,L=D>>8&255,x=255&D;u(i,r=o.F._writeLit(257+L,p,i,r),M-A.of0[L]),r+=A.exb[L],S(i,r=o.F._writeLit(x,F,i,r),H-A.df0[x]),r+=A.dxb[x],a+=M}}r=o.F._writeLit(256,p,i,r)}return r},o.F._copyExact=function(e,t,l,s,g){var y=g>>>3;return s[y]=l,s[y+1]=l>>>8,s[y+2]=255-s[y],s[y+3]=255-s[y+1],y+=4,s.set(new Uint8Array(e.buffer,t,l),y),g+(l+4<<3)},o.F.getTrees=function(){for(var e=o.F.U,t=o.F._hufTree(e.lhst,e.ltree,15),l=o.F._hufTree(e.dhst,e.dtree,15),s=[],g=o.F._lenCodes(e.ltree,s),y=[],n=o.F._lenCodes(e.dtree,y),i=0;i<s.length;i+=2)e.ihst[s[i]]++;for(i=0;i<y.length;i+=2)e.ihst[y[i]]++;for(var r=o.F._hufTree(e.ihst,e.itree,7),f=19;f>4&&e.itree[1+(e.ordr[f-1]<<1)]==0;)f--;return[t,l,r,g,n,f,s,y]},o.F.getSecond=function(e){for(var t=[],l=0;l<e.length;l+=2)t.push(e[l+1]);return t},o.F.nonZero=function(e){for(var t="",l=0;l<e.length;l+=2)e[l+1]!=0&&(t+=(l>>1)+",");return t},o.F.contSize=function(e,t){for(var l=0,s=0;s<t.length;s++)l+=t[s]*e[1+(s<<1)];return l},o.F._codeTiny=function(e,t,l,s){for(var g=0;g<e.length;g+=2){var y=e[g],n=e[g+1];s=o.F._writeLit(y,t,l,s);var i=y==16?2:y==17?3:7;y>15&&(o.F._putsE(l,s,n,i),s+=i)}return s},o.F._lenCodes=function(e,t){for(var l=e.length;l!=2&&e[l-1]==0;)l-=2;for(var s=0;s<l;s+=2){var g=e[s+1],y=s+3<l?e[s+3]:-1,n=s+5<l?e[s+5]:-1,i=s==0?-1:e[s-1];if(g==0&&y==g&&n==g){for(var r=s+5;r+2<l&&e[r+2]==g;)r+=2;(f=Math.min(r+1-s>>>1,138))<11?t.push(17,f-3):t.push(18,f-11),s+=2*f-2}else if(g==i&&y==g&&n==g){for(r=s+5;r+2<l&&e[r+2]==g;)r+=2;var f=Math.min(r+1-s>>>1,6);t.push(16,f-3),s+=2*f-2}else t.push(g,0)}return l>>>1},o.F._hufTree=function(e,t,l){var s=[],g=e.length,y=t.length,n=0;for(n=0;n<y;n+=2)t[n]=0,t[n+1]=0;for(n=0;n<g;n++)e[n]!=0&&s.push({lit:n,f:e[n]});var i=s.length,r=s.slice(0);if(i==0)return 0;if(i==1){var f=s[0].lit;return r=f==0?1:0,t[1+(f<<1)]=1,t[1+(r<<1)]=1,1}s.sort(function(B,P){return B.f-P.f});var d=s[0],E=s[1],I=0,b=1,O=2;for(s[0]={lit:-1,f:d.f+E.f,l:d,r:E,d:0};b!=i-1;)d=I!=b&&(O==i||s[I].f<s[O].f)?s[I++]:s[O++],E=I!=b&&(O==i||s[I].f<s[O].f)?s[I++]:s[O++],s[b++]={lit:-1,f:d.f+E.f,l:d,r:E};var T=o.F.setDepth(s[b-1],0);for(T>l&&(o.F.restrictDepth(r,l,T),T=l),n=0;n<i;n++)t[1+(r[n].lit<<1)]=r[n].d;return T},o.F.setDepth=function(e,t){return e.lit!=-1?(e.d=t,t):Math.max(o.F.setDepth(e.l,t+1),o.F.setDepth(e.r,t+1))},o.F.restrictDepth=function(e,t,l){var s=0,g=1<<l-t,y=0;for(e.sort(function(i,r){return r.d==i.d?i.f-r.f:r.d-i.d}),s=0;s<e.length&&e[s].d>t;s++){var n=e[s].d;e[s].d=t,y+=g-(1<<l-n)}for(y>>>=l-t;y>0;)(n=e[s].d)<t?(e[s].d++,y-=1<<t-n-1):s++;for(;s>=0;s--)e[s].d==t&&y<0&&(e[s].d--,y++);y!=0&&console.log("debt left")},o.F._goodIndex=function(e,t){var l=0;return t[16|l]<=e&&(l|=16),t[8|l]<=e&&(l|=8),t[4|l]<=e&&(l|=4),t[2|l]<=e&&(l|=2),t[1|l]<=e&&(l|=1),l},o.F._writeLit=function(e,t,l,s){return o.F._putsF(l,s,t[e<<1]),s+t[1+(e<<1)]},o.F.inflate=function(e,t){var l=Uint8Array;if(e[0]==3&&e[1]==0)return t||new l(0);var s=o.F,g=s._bitsF,y=s._bitsE,n=s._decodeTiny,i=s.makeCodes,r=s.codes2map,f=s._get17,d=s.U,E=t==null;E&&(t=new l(e.length>>>2<<3));for(var I,b,O=0,T=0,B=0,P=0,A=0,S=0,u=0,c=0,m=0;O==0;)if(O=g(e,m,1),T=g(e,m+1,2),m+=3,T!=0){if(E&&(t=o.F._check(t,c+(1<<17))),T==1&&(I=d.flmap,b=d.fdmap,S=511,u=31),T==2){B=y(e,m,5)+257,P=y(e,m+5,5)+1,A=y(e,m+10,4)+4,m+=14;for(var w=0;w<38;w+=2)d.itree[w]=0,d.itree[w+1]=0;var v=1;for(w=0;w<A;w++){var U=y(e,m+3*w,3);d.itree[1+(d.ordr[w]<<1)]=U,U>v&&(v=U)}m+=3*A,i(d.itree,v),r(d.itree,v,d.imap),I=d.lmap,b=d.dmap,m=n(d.imap,(1<<v)-1,B+P,e,m,d.ttree);var p=s._copyOut(d.ttree,0,B,d.ltree);S=(1<<p)-1;var F=s._copyOut(d.ttree,B,P,d.dtree);u=(1<<F)-1,i(d.ltree,p),r(d.ltree,p,I),i(d.dtree,F),r(d.dtree,F,b)}for(;;){var h=I[f(e,m)&S];m+=15&h;var a=h>>>4;if(!(a>>>8))t[c++]=a;else{if(a==256)break;var k=c+a-254;if(a>264){var R=d.ldef[a-257];k=c+(R>>>3)+y(e,m,7&R),m+=7&R}var M=b[f(e,m)&u];m+=15&M;var z=M>>>4,D=d.ddef[z],H=(D>>>4)+g(e,m,15&D);for(m+=15&D,E&&(t=o.F._check(t,c+(1<<17)));c<k;)t[c]=t[c++-H],t[c]=t[c++-H],t[c]=t[c++-H],t[c]=t[c++-H];c=k}}}else{7&m&&(m+=8-(7&m));var L=4+(m>>>3),x=e[L-4]|e[L-3]<<8;E&&(t=o.F._check(t,c+x)),t.set(new l(e.buffer,e.byteOffset+L,x),c),m=L+x<<3,c+=x}return t.length==c?t:t.slice(0,c)},o.F._check=function(e,t){var l=e.length;if(t<=l)return e;var s=new Uint8Array(Math.max(l<<1,t));return s.set(e,0),s},o.F._decodeTiny=function(e,t,l,s,g,y){for(var n=o.F._bitsE,i=o.F._get17,r=0;r<l;){var f=e[i(s,g)&t];g+=15&f;var d=f>>>4;if(d<=15)y[r]=d,r++;else{var E=0,I=0;d==16?(I=3+n(s,g,2),g+=2,E=y[r-1]):d==17?(I=3+n(s,g,3),g+=3):d==18&&(I=11+n(s,g,7),g+=7);for(var b=r+I;r<b;)y[r]=E,r++}}return g},o.F._copyOut=function(e,t,l,s){for(var g=0,y=0,n=s.length>>>1;y<l;){var i=e[y+t];s[y<<1]=0,s[1+(y<<1)]=i,i>g&&(g=i),y++}for(;y<n;)s[y<<1]=0,s[1+(y<<1)]=0,y++;return g},o.F.makeCodes=function(e,t){for(var l,s,g,y,n=o.F.U,i=e.length,r=n.bl_count,f=0;f<=t;f++)r[f]=0;for(f=1;f<i;f+=2)r[e[f]]++;var d=n.next_code;for(l=0,r[0]=0,s=1;s<=t;s++)l=l+r[s-1]<<1,d[s]=l;for(g=0;g<i;g+=2)(y=e[g+1])!=0&&(e[g]=d[y],d[y]++)},o.F.codes2map=function(e,t,l){for(var s=e.length,g=o.F.U.rev15,y=0;y<s;y+=2)if(e[y+1]!=0)for(var n=y>>1,i=e[y+1],r=n<<4|i,f=t-i,d=e[y]<<f,E=d+(1<<f);d!=E;)l[g[d]>>>15-t]=r,d++},o.F.revCodes=function(e,t){for(var l=o.F.U.rev15,s=15-t,g=0;g<e.length;g+=2){var y=e[g]<<t-e[g+1];e[g]=l[y]>>>s}},o.F._putsE=function(e,t,l){l<<=7&t;var s=t>>>3;e[s]|=l,e[s+1]|=l>>>8},o.F._putsF=function(e,t,l){l<<=7&t;var s=t>>>3;e[s]|=l,e[s+1]|=l>>>8,e[s+2]|=l>>>16},o.F._bitsE=function(e,t,l){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<l)-1},o.F._bitsF=function(e,t,l){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<l)-1},o.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},o.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},o.F.U=(Q=Uint16Array,C=Uint32Array,{next_code:new Q(16),bl_count:new Q(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new Q(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new C(32),flmap:new Q(512),fltree:[],fdmap:new Q(32),fdtree:[],lmap:new Q(32768),ltree:[],ttree:[],dmap:new Q(32768),dtree:[],imap:new Q(512),itree:[],rev15:new Q(32768),lhst:new C(286),dhst:new C(30),ihst:new C(19),lits:new C(15e3),strt:new Q(65536),prev:new Q(32768)}),function(){for(var e=o.F.U,t=0;t<32768;t++){var l=t;l=(4278255360&(l=(4042322160&(l=(3435973836&(l=(2863311530&l)>>>1|(1431655765&l)<<1))>>>2|(858993459&l)<<2))>>>4|(252645135&l)<<4))>>>8|(16711935&l)<<8,e.rev15[t]=(l>>>16|l<<16)>>>17}function s(g,y,n){for(;y--!=0;)g.push(0,n)}for(t=0;t<32;t++)e.ldef[t]=e.of0[t]<<3|e.exb[t],e.ddef[t]=e.df0[t]<<4|e.dxb[t];s(e.fltree,144,8),s(e.fltree,112,9),s(e.fltree,24,7),s(e.fltree,8,8),o.F.makeCodes(e.fltree,9),o.F.codes2map(e.fltree,9,e.flmap),o.F.revCodes(e.fltree,9),s(e.fdtree,32,5),o.F.makeCodes(e.fdtree,5),o.F.codes2map(e.fdtree,5,e.fdmap),o.F.revCodes(e.fdtree,5),s(e.itree,19,0),s(e.ltree,286,0),s(e.dtree,30,0),s(e.ttree,320,0)}()})();var It=Rt({__proto__:null,default:De},[De]),he=function(){var _={nextZero(n,i){for(;n[i]!=0;)i++;return i},readUshort:(n,i)=>n[i]<<8|n[i+1],writeUshort(n,i,r){n[i]=r>>8&255,n[i+1]=255&r},readUint:(n,i)=>16777216*n[i]+(n[i+1]<<16|n[i+2]<<8|n[i+3]),writeUint(n,i,r){n[i]=r>>24&255,n[i+1]=r>>16&255,n[i+2]=r>>8&255,n[i+3]=255&r},readASCII(n,i,r){let f="";for(let d=0;d<r;d++)f+=String.fromCharCode(n[i+d]);return f},writeASCII(n,i,r){for(let f=0;f<r.length;f++)n[i+f]=r.charCodeAt(f)},readBytes(n,i,r){let f=[];for(let d=0;d<r;d++)f.push(n[i+d]);return f},pad:n=>n.length<2?`0${n}`:n,readUTF8(n,i,r){let f,d="";for(let E=0;E<r;E++)d+=`%${_.pad(n[i+E].toString(16))}`;try{f=decodeURIComponent(d)}catch{return _.readASCII(n,i,r)}return f}};function Q(n,i,r,f){let d=i*r,E=t(f),I=Math.ceil(i*E/8),b=new Uint8Array(4*d),O=new Uint32Array(b.buffer),{ctype:T}=f,{depth:B}=f,P=_.readUshort;if(T==6){let R=d<<2;if(B==8)for(var A=0;A<R;A+=4)b[A]=n[A],b[A+1]=n[A+1],b[A+2]=n[A+2],b[A+3]=n[A+3];if(B==16)for(A=0;A<R;A++)b[A]=n[A<<1]}else if(T==2){let R=f.tabs.tRNS;if(R==null){if(B==8)for(A=0;A<d;A++){var S=3*A;O[A]=255<<24|n[S+2]<<16|n[S+1]<<8|n[S]}if(B==16)for(A=0;A<d;A++)S=6*A,O[A]=255<<24|n[S+4]<<16|n[S+2]<<8|n[S]}else{var u=R[0];let M=R[1],z=R[2];if(B==8)for(A=0;A<d;A++){var c=A<<2;S=3*A,O[A]=255<<24|n[S+2]<<16|n[S+1]<<8|n[S],n[S]==u&&n[S+1]==M&&n[S+2]==z&&(b[c+3]=0)}if(B==16)for(A=0;A<d;A++)c=A<<2,S=6*A,O[A]=255<<24|n[S+4]<<16|n[S+2]<<8|n[S],P(n,S)==u&&P(n,S+2)==M&&P(n,S+4)==z&&(b[c+3]=0)}}else if(T==3){let R=f.tabs.PLTE,M=f.tabs.tRNS,z=M?M.length:0;if(B==1)for(var m=0;m<r;m++){var w=m*I,v=m*i;for(A=0;A<i;A++){c=v+A<<2;var U=3*(p=n[w+(A>>3)]>>7-((7&A)<<0)&1);b[c]=R[U],b[c+1]=R[U+1],b[c+2]=R[U+2],b[c+3]=p<z?M[p]:255}}if(B==2)for(m=0;m<r;m++)for(w=m*I,v=m*i,A=0;A<i;A++)c=v+A<<2,U=3*(p=n[w+(A>>2)]>>6-((3&A)<<1)&3),b[c]=R[U],b[c+1]=R[U+1],b[c+2]=R[U+2],b[c+3]=p<z?M[p]:255;if(B==4)for(m=0;m<r;m++)for(w=m*I,v=m*i,A=0;A<i;A++)c=v+A<<2,U=3*(p=n[w+(A>>1)]>>4-((1&A)<<2)&15),b[c]=R[U],b[c+1]=R[U+1],b[c+2]=R[U+2],b[c+3]=p<z?M[p]:255;if(B==8)for(A=0;A<d;A++){var p;c=A<<2,U=3*(p=n[A]),b[c]=R[U],b[c+1]=R[U+1],b[c+2]=R[U+2],b[c+3]=p<z?M[p]:255}}else if(T==4){if(B==8)for(A=0;A<d;A++){c=A<<2;var F=n[h=A<<1];b[c]=F,b[c+1]=F,b[c+2]=F,b[c+3]=n[h+1]}if(B==16)for(A=0;A<d;A++){var h;c=A<<2,F=n[h=A<<2],b[c]=F,b[c+1]=F,b[c+2]=F,b[c+3]=n[h+2]}}else if(T==0)for(u=f.tabs.tRNS?f.tabs.tRNS:-1,m=0;m<r;m++){let R=m*I,M=m*i;if(B==1)for(var a=0;a<i;a++){var k=(F=255*(n[R+(a>>>3)]>>>7-(7&a)&1))==255*u?0:255;O[M+a]=k<<24|F<<16|F<<8|F}else if(B==2)for(a=0;a<i;a++)k=(F=85*(n[R+(a>>>2)]>>>6-((3&a)<<1)&3))==85*u?0:255,O[M+a]=k<<24|F<<16|F<<8|F;else if(B==4)for(a=0;a<i;a++)k=(F=17*(n[R+(a>>>1)]>>>4-((1&a)<<2)&15))==17*u?0:255,O[M+a]=k<<24|F<<16|F<<8|F;else if(B==8)for(a=0;a<i;a++)k=(F=n[R+a])==u?0:255,O[M+a]=k<<24|F<<16|F<<8|F;else if(B==16)for(a=0;a<i;a++)F=n[R+(a<<1)],k=P(n,R+(a<<1))==u?0:255,O[M+a]=k<<24|F<<16|F<<8|F}return b}function C(n,i,r,f){let d=t(n),E=Math.ceil(r*d/8),I=new Uint8Array((E+1+n.interlace)*f);return i=n.tabs.CgBI?e(i,I):o(i,I),n.interlace==0?i=l(i,n,0,r,f):n.interlace==1&&(i=function(O,T){let B=T.width,P=T.height,A=t(T),S=A>>3,u=Math.ceil(B*A/8),c=new Uint8Array(P*u),m=0,w=[0,0,4,0,2,0,1],v=[0,4,0,2,0,1,0],U=[8,8,8,4,4,2,2],p=[8,8,4,4,2,2,1],F=0;for(;F<7;){let a=U[F],k=p[F],R=0,M=0,z=w[F];for(;z<P;)z+=a,M++;let D=v[F];for(;D<B;)D+=k,R++;let H=Math.ceil(R*A/8);l(O,T,m,R,M);let L=0,x=w[F];for(;x<P;){let N=v[F],$=m+L*H<<3;for(;N<B;){var h;if(A==1&&(h=(h=O[$>>3])>>7-(7&$)&1,c[x*u+(N>>3)]|=h<<7-((7&N)<<0)),A==2&&(h=(h=O[$>>3])>>6-(7&$)&3,c[x*u+(N>>2)]|=h<<6-((3&N)<<1)),A==4&&(h=(h=O[$>>3])>>4-(7&$)&15,c[x*u+(N>>1)]|=h<<4-((1&N)<<2)),A>=8){let W=x*u+N*S;for(let j=0;j<S;j++)c[W+j]=O[($>>3)+j]}$+=A,N+=k}L++,x+=a}R*M!=0&&(m+=M*(1+H)),F+=1}return c}(i,n)),i}function o(n,i){return e(new Uint8Array(n.buffer,2,n.length-6),i)}var e=function(){let n={H:{}};return n.H.N=function(i,r){let f=Uint8Array,d,E,I=0,b=0,O=0,T=0,B=0,P=0,A=0,S=0,u=0;if(i[0]==3&&i[1]==0)return r||new f(0);let c=n.H,m=c.b,w=c.e,v=c.R,U=c.n,p=c.A,F=c.Z,h=c.m,a=r==null;for(a&&(r=new f(i.length>>>2<<5));I==0;)if(I=m(i,u,1),b=m(i,u+1,2),u+=3,b!=0){if(a&&(r=n.H.W(r,S+(1<<17))),b==1&&(d=h.J,E=h.h,P=511,A=31),b==2){O=w(i,u,5)+257,T=w(i,u+5,5)+1,B=w(i,u+10,4)+4,u+=14;let R=1;for(var k=0;k<38;k+=2)h.Q[k]=0,h.Q[k+1]=0;for(k=0;k<B;k++){let D=w(i,u+3*k,3);h.Q[1+(h.X[k]<<1)]=D,D>R&&(R=D)}u+=3*B,U(h.Q,R),p(h.Q,R,h.u),d=h.w,E=h.d,u=v(h.u,(1<<R)-1,O+T,i,u,h.v);let M=c.V(h.v,0,O,h.C);P=(1<<M)-1;let z=c.V(h.v,O,T,h.D);A=(1<<z)-1,U(h.C,M),p(h.C,M,d),U(h.D,z),p(h.D,z,E)}for(;;){let R=d[F(i,u)&P];u+=15&R;let M=R>>>4;if(!(M>>>8))r[S++]=M;else{if(M==256)break;{let z=S+M-254;if(M>264){let N=h.q[M-257];z=S+(N>>>3)+w(i,u,7&N),u+=7&N}let D=E[F(i,u)&A];u+=15&D;let H=D>>>4,L=h.c[H],x=(L>>>4)+m(i,u,15&L);for(u+=15&L;S<z;)r[S]=r[S++-x],r[S]=r[S++-x],r[S]=r[S++-x],r[S]=r[S++-x];S=z}}}}else{7&u&&(u+=8-(7&u));let R=4+(u>>>3),M=i[R-4]|i[R-3]<<8;a&&(r=n.H.W(r,S+M)),r.set(new f(i.buffer,i.byteOffset+R,M),S),u=R+M<<3,S+=M}return r.length==S?r:r.slice(0,S)},n.H.W=function(i,r){let f=i.length;if(r<=f)return i;let d=new Uint8Array(f<<1);return d.set(i,0),d},n.H.R=function(i,r,f,d,E,I){let b=n.H.e,O=n.H.Z,T=0;for(;T<f;){let B=i[O(d,E)&r];E+=15&B;let P=B>>>4;if(P<=15)I[T]=P,T++;else{let A=0,S=0;P==16?(S=3+b(d,E,2),E+=2,A=I[T-1]):P==17?(S=3+b(d,E,3),E+=3):P==18&&(S=11+b(d,E,7),E+=7);let u=T+S;for(;T<u;)I[T]=A,T++}}return E},n.H.V=function(i,r,f,d){let E=0,I=0,b=d.length>>>1;for(;I<f;){let O=i[I+r];d[I<<1]=0,d[1+(I<<1)]=O,O>E&&(E=O),I++}for(;I<b;)d[I<<1]=0,d[1+(I<<1)]=0,I++;return E},n.H.n=function(i,r){let f=n.H.m,d=i.length,E,I,b,O,T=f.j;for(var B=0;B<=r;B++)T[B]=0;for(B=1;B<d;B+=2)T[i[B]]++;let P=f.K;for(E=0,T[0]=0,I=1;I<=r;I++)E=E+T[I-1]<<1,P[I]=E;for(b=0;b<d;b+=2)O=i[b+1],O!=0&&(i[b]=P[O],P[O]++)},n.H.A=function(i,r,f){let d=i.length,E=n.H.m.r;for(let I=0;I<d;I+=2)if(i[I+1]!=0){let b=I>>1,O=i[I+1],T=b<<4|O,B=r-O,P=i[I]<<B,A=P+(1<<B);for(;P!=A;)f[E[P]>>>15-r]=T,P++}},n.H.l=function(i,r){let f=n.H.m.r,d=15-r;for(let E=0;E<i.length;E+=2){let I=i[E]<<r-i[E+1];i[E]=f[I]>>>d}},n.H.M=function(i,r,f){f<<=7&r;let d=r>>>3;i[d]|=f,i[d+1]|=f>>>8},n.H.I=function(i,r,f){f<<=7&r;let d=r>>>3;i[d]|=f,i[d+1]|=f>>>8,i[d+2]|=f>>>16},n.H.e=function(i,r,f){return(i[r>>>3]|i[1+(r>>>3)]<<8)>>>(7&r)&(1<<f)-1},n.H.b=function(i,r,f){return(i[r>>>3]|i[1+(r>>>3)]<<8|i[2+(r>>>3)]<<16)>>>(7&r)&(1<<f)-1},n.H.Z=function(i,r){return(i[r>>>3]|i[1+(r>>>3)]<<8|i[2+(r>>>3)]<<16)>>>(7&r)},n.H.i=function(i,r){return(i[r>>>3]|i[1+(r>>>3)]<<8|i[2+(r>>>3)]<<16|i[3+(r>>>3)]<<24)>>>(7&r)},n.H.m=function(){let i=Uint16Array,r=Uint32Array;return{K:new i(16),j:new i(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new i(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new r(32),J:new i(512),_:[],h:new i(32),$:[],w:new i(32768),C:[],v:[],d:new i(32768),D:[],u:new i(512),Q:[],r:new i(32768),s:new r(286),Y:new r(30),a:new r(19),t:new r(15e3),k:new i(65536),g:new i(32768)}}(),function(){let i=n.H.m;for(var r=0;r<32768;r++){let d=r;d=(2863311530&d)>>>1|(1431655765&d)<<1,d=(3435973836&d)>>>2|(858993459&d)<<2,d=(4042322160&d)>>>4|(252645135&d)<<4,d=(4278255360&d)>>>8|(16711935&d)<<8,i.r[r]=(d>>>16|d<<16)>>>17}function f(d,E,I){for(;E--!=0;)d.push(0,I)}for(r=0;r<32;r++)i.q[r]=i.S[r]<<3|i.T[r],i.c[r]=i.p[r]<<4|i.z[r];f(i._,144,8),f(i._,112,9),f(i._,24,7),f(i._,8,8),n.H.n(i._,9),n.H.A(i._,9,i.J),n.H.l(i._,9),f(i.$,32,5),n.H.n(i.$,5),n.H.A(i.$,5,i.h),n.H.l(i.$,5),f(i.Q,19,0),f(i.C,286,0),f(i.D,30,0),f(i.v,320,0)}(),n.H.N}();function t(n){return[1,null,3,1,2,null,4][n.ctype]*n.depth}function l(n,i,r,f,d){let E=t(i),I=Math.ceil(f*E/8),b,O;E=Math.ceil(E/8);let T=n[r],B=0;if(T>1&&(n[r]=[0,0,1][T-2]),T==3)for(B=E;B<I;B++)n[B+1]=n[B+1]+(n[B+1-E]>>>1)&255;for(let P=0;P<d;P++)if(b=r+P*I,O=b+P+1,T=n[O-1],B=0,T==0)for(;B<I;B++)n[b+B]=n[O+B];else if(T==1){for(;B<E;B++)n[b+B]=n[O+B];for(;B<I;B++)n[b+B]=n[O+B]+n[b+B-E]}else if(T==2)for(;B<I;B++)n[b+B]=n[O+B]+n[b+B-I];else if(T==3){for(;B<E;B++)n[b+B]=n[O+B]+(n[b+B-I]>>>1);for(;B<I;B++)n[b+B]=n[O+B]+(n[b+B-I]+n[b+B-E]>>>1)}else{for(;B<E;B++)n[b+B]=n[O+B]+s(0,n[b+B-I],0);for(;B<I;B++)n[b+B]=n[O+B]+s(n[b+B-E],n[b+B-I],n[b+B-E-I])}return n}function s(n,i,r){let f=n+i-r,d=f-n,E=f-i,I=f-r;return d*d<=E*E&&d*d<=I*I?n:E*E<=I*I?i:r}function g(n,i,r){r.width=_.readUint(n,i),i+=4,r.height=_.readUint(n,i),i+=4,r.depth=n[i],i++,r.ctype=n[i],i++,r.compress=n[i],i++,r.filter=n[i],i++,r.interlace=n[i],i++}function y(n,i,r,f,d,E,I,b,O){let T=Math.min(i,d),B=Math.min(r,E),P=0,A=0;for(let F=0;F<B;F++)for(let h=0;h<T;h++)if(I>=0&&b>=0?(P=F*i+h<<2,A=(b+F)*d+I+h<<2):(P=(-b+F)*i-I+h<<2,A=F*d+h<<2),O==0)f[A]=n[P],f[A+1]=n[P+1],f[A+2]=n[P+2],f[A+3]=n[P+3];else if(O==1){var S=n[P+3]*.00392156862745098,u=n[P]*S,c=n[P+1]*S,m=n[P+2]*S,w=f[A+3]*(1/255),v=f[A]*w,U=f[A+1]*w,p=f[A+2]*w;let a=1-S,k=S+w*a,R=k==0?0:1/k;f[A+3]=255*k,f[A+0]=(u+v*a)*R,f[A+1]=(c+U*a)*R,f[A+2]=(m+p*a)*R}else if(O==2)S=n[P+3],u=n[P],c=n[P+1],m=n[P+2],w=f[A+3],v=f[A],U=f[A+1],p=f[A+2],S==w&&u==v&&c==U&&m==p?(f[A]=0,f[A+1]=0,f[A+2]=0,f[A+3]=0):(f[A]=u,f[A+1]=c,f[A+2]=m,f[A+3]=S);else if(O==3){if(S=n[P+3],u=n[P],c=n[P+1],m=n[P+2],w=f[A+3],v=f[A],U=f[A+1],p=f[A+2],S==w&&u==v&&c==U&&m==p)continue;if(S<220&&w>20)return!1}return!0}return{decode:function(i){let r=new Uint8Array(i),f=8,d=_,E=d.readUshort,I=d.readUint,b={tabs:{},frames:[]},O=new Uint8Array(r.length),T,B=0,P=0,A=[137,80,78,71,13,10,26,10];for(var S=0;S<8;S++)if(r[S]!=A[S])throw"The input is not a PNG file!";for(;f<r.length;){let F=d.readUint(r,f);f+=4;let h=d.readASCII(r,f,4);if(f+=4,h=="IHDR")g(r,f,b);else if(h=="iCCP"){for(var u=f;r[u]!=0;)u++;d.readASCII(r,f,u-f),r[u+1];let a=r.slice(u+2,f+F),k=null;try{k=o(a)}catch{k=e(a)}b.tabs[h]=k}else if(h=="CgBI")b.tabs[h]=r.slice(f,f+4);else if(h=="IDAT"){for(S=0;S<F;S++)O[B+S]=r[f+S];B+=F}else if(h=="acTL")b.tabs[h]={num_frames:I(r,f),num_plays:I(r,f+4)},T=new Uint8Array(r.length);else if(h=="fcTL"){P!=0&&((p=b.frames[b.frames.length-1]).data=C(b,T.slice(0,P),p.rect.width,p.rect.height),P=0);let a={x:I(r,f+12),y:I(r,f+16),width:I(r,f+4),height:I(r,f+8)},k=E(r,f+22);k=E(r,f+20)/(k==0?100:k);let R={rect:a,delay:Math.round(1e3*k),dispose:r[f+24],blend:r[f+25]};b.frames.push(R)}else if(h=="fdAT"){for(S=0;S<F-4;S++)T[P+S]=r[f+S+4];P+=F-4}else if(h=="pHYs")b.tabs[h]=[d.readUint(r,f),d.readUint(r,f+4),r[f+8]];else if(h=="cHRM")for(b.tabs[h]=[],S=0;S<8;S++)b.tabs[h].push(d.readUint(r,f+4*S));else if(h=="tEXt"||h=="zTXt"){b.tabs[h]==null&&(b.tabs[h]={});var c=d.nextZero(r,f),m=d.readASCII(r,f,c-f),w=f+F-c-1;if(h=="tEXt")U=d.readASCII(r,c+1,w);else{var v=o(r.slice(c+2,c+2+w));U=d.readUTF8(v,0,v.length)}b.tabs[h][m]=U}else if(h=="iTXt"){b.tabs[h]==null&&(b.tabs[h]={}),c=0,u=f,c=d.nextZero(r,u),m=d.readASCII(r,u,c-u);let a=r[u=c+1];var U;r[u+1],u+=2,c=d.nextZero(r,u),d.readASCII(r,u,c-u),u=c+1,c=d.nextZero(r,u),d.readUTF8(r,u,c-u),w=F-((u=c+1)-f),a==0?U=d.readUTF8(r,u,w):(v=o(r.slice(u,u+w)),U=d.readUTF8(v,0,v.length)),b.tabs[h][m]=U}else if(h=="PLTE")b.tabs[h]=d.readBytes(r,f,F);else if(h=="hIST"){let a=b.tabs.PLTE.length/3;for(b.tabs[h]=[],S=0;S<a;S++)b.tabs[h].push(E(r,f+2*S))}else if(h=="tRNS")b.ctype==3?b.tabs[h]=d.readBytes(r,f,F):b.ctype==0?b.tabs[h]=E(r,f):b.ctype==2&&(b.tabs[h]=[E(r,f),E(r,f+2),E(r,f+4)]);else if(h=="gAMA")b.tabs[h]=d.readUint(r,f)/1e5;else if(h=="sRGB")b.tabs[h]=r[f];else if(h=="bKGD")b.ctype==0||b.ctype==4?b.tabs[h]=[E(r,f)]:b.ctype==2||b.ctype==6?b.tabs[h]=[E(r,f),E(r,f+2),E(r,f+4)]:b.ctype==3&&(b.tabs[h]=r[f]);else if(h=="IEND")break;f+=F,d.readUint(r,f),f+=4}var p;return P!=0&&((p=b.frames[b.frames.length-1]).data=C(b,T.slice(0,P),p.rect.width,p.rect.height)),b.data=C(b,O,b.width,b.height),delete b.compress,delete b.interlace,delete b.filter,b},toRGBA8:function(i){let r=i.width,f=i.height;if(i.tabs.acTL==null)return[Q(i.data,r,f,i).buffer];let d=[];i.frames[0].data==null&&(i.frames[0].data=i.data);let E=r*f*4,I=new Uint8Array(E),b=new Uint8Array(E),O=new Uint8Array(E);for(let B=0;B<i.frames.length;B++){let P=i.frames[B],A=P.rect.x,S=P.rect.y,u=P.rect.width,c=P.rect.height,m=Q(P.data,u,c,i);if(B!=0)for(var T=0;T<E;T++)O[T]=I[T];if(P.blend==0?y(m,u,c,I,r,f,A,S,0):P.blend==1&&y(m,u,c,I,r,f,A,S,1),d.push(I.buffer.slice(0)),P.dispose!=0){if(P.dispose==1)y(b,u,c,I,r,f,A,S,0);else if(P.dispose==2)for(T=0;T<E;T++)I[T]=O[T]}}return d},_paeth:s,_copyTile:y,_bin:_}}();(function(){let{_copyTile:_}=he,{_bin:Q}=he,C=he._paeth;var o={table:function(){let u=new Uint32Array(256);for(let c=0;c<256;c++){let m=c;for(let w=0;w<8;w++)1&m?m=3988292384^m>>>1:m>>>=1;u[c]=m}return u}(),update(u,c,m,w){for(let v=0;v<w;v++)u=o.table[255&(u^c[m+v])]^u>>>8;return u},crc:(u,c,m)=>4294967295^o.update(4294967295,u,c,m)};function e(u,c,m,w){c[m]+=u[0]*w>>4,c[m+1]+=u[1]*w>>4,c[m+2]+=u[2]*w>>4,c[m+3]+=u[3]*w>>4}function t(u){return Math.max(0,Math.min(255,u))}function l(u,c){let m=u[0]-c[0],w=u[1]-c[1],v=u[2]-c[2],U=u[3]-c[3];return m*m+w*w+v*v+U*U}function s(u,c,m,w,v,U,p){p==null&&(p=1);let F=w.length,h=[];for(var a=0;a<F;a++){let x=w[a];h.push([x>>>0&255,x>>>8&255,x>>>16&255,x>>>24&255])}for(a=0;a<F;a++){let x=4294967295;for(var k=0,R=0;R<F;R++){var M=l(h[a],h[R]);R!=a&&M<x&&(x=M,k=R)}}let z=new Uint32Array(v.buffer),D=new Int16Array(c*m*4),H=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(a=0;a<H.length;a++)H[a]=255*((H[a]+.5)/16-.5);for(let x=0;x<m;x++)for(let N=0;N<c;N++){var L;a=4*(x*c+N),p!=2?L=[t(u[a]+D[a]),t(u[a+1]+D[a+1]),t(u[a+2]+D[a+2]),t(u[a+3]+D[a+3])]:(M=H[4*(3&x)+(3&N)],L=[t(u[a]+M),t(u[a+1]+M),t(u[a+2]+M),t(u[a+3]+M)]),k=0;let $=16777215;for(R=0;R<F;R++){let K=l(L,h[R]);K<$&&($=K,k=R)}let W=h[k],j=[L[0]-W[0],L[1]-W[1],L[2]-W[2],L[3]-W[3]];p==1&&(N!=c-1&&e(j,D,a+4,7),x!=m-1&&(N!=0&&e(j,D,a+4*c-4,3),e(j,D,a+4*c,5),N!=c-1&&e(j,D,a+4*c+4,1))),U[a>>2]=k,z[a>>2]=w[k]}}function g(u,c,m,w,v){v==null&&(v={});let{crc:U}=o,p=Q.writeUint,F=Q.writeUshort,h=Q.writeASCII,a=8,k=u.frames.length>1,R,M=!1,z=33+(k?20:0);if(v.sRGB!=null&&(z+=13),v.pHYs!=null&&(z+=21),v.iCCP!=null&&(R=pako.deflate(v.iCCP),z+=21+R.length+4),u.ctype==3){for(var D=u.plte.length,H=0;H<D;H++)u.plte[H]>>>24!=255&&(M=!0);z+=8+3*D+4+(M?8+1*D+4:0)}for(var L=0;L<u.frames.length;L++)k&&(z+=38),z+=(W=u.frames[L]).cimg.length+12,L!=0&&(z+=4);z+=12;let x=new Uint8Array(z),N=[137,80,78,71,13,10,26,10];for(H=0;H<8;H++)x[H]=N[H];if(p(x,a,13),a+=4,h(x,a,"IHDR"),a+=4,p(x,a,c),a+=4,p(x,a,m),a+=4,x[a]=u.depth,a++,x[a]=u.ctype,a++,x[a]=0,a++,x[a]=0,a++,x[a]=0,a++,p(x,a,U(x,a-17,17)),a+=4,v.sRGB!=null&&(p(x,a,1),a+=4,h(x,a,"sRGB"),a+=4,x[a]=v.sRGB,a++,p(x,a,U(x,a-5,5)),a+=4),v.iCCP!=null){let j=13+R.length;p(x,a,j),a+=4,h(x,a,"iCCP"),a+=4,h(x,a,"ICC profile"),a+=11,a+=2,x.set(R,a),a+=R.length,p(x,a,U(x,a-(j+4),j+4)),a+=4}if(v.pHYs!=null&&(p(x,a,9),a+=4,h(x,a,"pHYs"),a+=4,p(x,a,v.pHYs[0]),a+=4,p(x,a,v.pHYs[1]),a+=4,x[a]=v.pHYs[2],a++,p(x,a,U(x,a-13,13)),a+=4),k&&(p(x,a,8),a+=4,h(x,a,"acTL"),a+=4,p(x,a,u.frames.length),a+=4,p(x,a,v.loop!=null?v.loop:0),a+=4,p(x,a,U(x,a-12,12)),a+=4),u.ctype==3){for(p(x,a,3*(D=u.plte.length)),a+=4,h(x,a,"PLTE"),a+=4,H=0;H<D;H++){let j=3*H,K=u.plte[H],X=255&K,ee=K>>>8&255,ye=K>>>16&255;x[a+j+0]=X,x[a+j+1]=ee,x[a+j+2]=ye}if(a+=3*D,p(x,a,U(x,a-3*D-4,3*D+4)),a+=4,M){for(p(x,a,D),a+=4,h(x,a,"tRNS"),a+=4,H=0;H<D;H++)x[a+H]=u.plte[H]>>>24&255;a+=D,p(x,a,U(x,a-D-4,D+4)),a+=4}}let $=0;for(L=0;L<u.frames.length;L++){var W=u.frames[L];k&&(p(x,a,26),a+=4,h(x,a,"fcTL"),a+=4,p(x,a,$++),a+=4,p(x,a,W.rect.width),a+=4,p(x,a,W.rect.height),a+=4,p(x,a,W.rect.x),a+=4,p(x,a,W.rect.y),a+=4,F(x,a,w[L]),a+=2,F(x,a,1e3),a+=2,x[a]=W.dispose,a++,x[a]=W.blend,a++,p(x,a,U(x,a-30,30)),a+=4);let j=W.cimg;p(x,a,(D=j.length)+(L==0?0:4)),a+=4;let K=a;h(x,a,L==0?"IDAT":"fdAT"),a+=4,L!=0&&(p(x,a,$++),a+=4),x.set(j,a),a+=D,p(x,a,U(x,K,a-K)),a+=4}return p(x,a,0),a+=4,h(x,a,"IEND"),a+=4,p(x,a,U(x,a-4,4)),a+=4,x.buffer}function y(u,c,m){for(let w=0;w<u.frames.length;w++){let v=u.frames[w];v.rect.width;let U=v.rect.height,p=new Uint8Array(U*v.bpl+U);v.cimg=f(v.img,U,v.bpp,v.bpl,p,c,m)}}function n(u,c,m,w,v){let U=v[0],p=v[1],F=v[2],h=v[3],a=v[4],k=v[5],R=6,M=8,z=255;for(var D=0;D<u.length;D++){let ne=new Uint8Array(u[D]);for(var H=ne.length,L=0;L<H;L+=4)z&=ne[L+3]}let x=z!=255,N=function(Z,q,te,oe,Y,fe){let J=[];for(var G=0;G<Z.length;G++){let ae=new Uint8Array(Z[G]),ue=new Uint32Array(ae.buffer);var le;let ce=0,me=0,Ae=q,Ue=te,We=oe?1:0;if(G!=0){let Ut=fe||oe||G==1||J[G-2].dispose!=0?1:2,Ke=0,Je=1e9;for(let Me=0;Me<Ut;Me++){var be=new Uint8Array(Z[G-1-Me]);let Ft=new Uint32Array(Z[G-1-Me]),ve=q,we=te,Ie=-1,Qe=-1;for(let Fe=0;Fe<te;Fe++)for(let Re=0;Re<q;Re++)ue[ie=Fe*q+Re]!=Ft[ie]&&(Re<ve&&(ve=Re),Re>Ie&&(Ie=Re),Fe<we&&(we=Fe),Fe>Qe&&(Qe=Fe));Ie==-1&&(ve=we=Ie=Qe=0),Y&&((1&ve)==1&&ve--,(1&we)==1&&we--);let et=(Ie-ve+1)*(Qe-we+1);et<Je&&(Je=et,Ke=Me,ce=ve,me=we,Ae=Ie-ve+1,Ue=Qe-we+1)}be=new Uint8Array(Z[G-1-Ke]),Ke==1&&(J[G-1].dispose=2),le=new Uint8Array(Ae*Ue*4),_(be,q,te,le,Ae,Ue,-ce,-me,0),We=_(ae,q,te,le,Ae,Ue,-ce,-me,3)?1:0,We==1?r(ae,q,te,le,{x:ce,y:me,width:Ae,height:Ue}):_(ae,q,te,le,Ae,Ue,-ce,-me,0)}else le=ae.slice(0);J.push({rect:{x:ce,y:me,width:Ae,height:Ue},img:le,blend:We,dispose:0})}if(oe)for(G=0;G<J.length;G++){if((Ee=J[G]).blend==1)continue;let ae=Ee.rect,ue=J[G-1].rect,ce=Math.min(ae.x,ue.x),me=Math.min(ae.y,ue.y),Ae={x:ce,y:me,width:Math.max(ae.x+ae.width,ue.x+ue.width)-ce,height:Math.max(ae.y+ae.height,ue.y+ue.height)-me};J[G-1].dispose=1,G-1!=0&&i(Z,q,te,J,G-1,Ae,Y),i(Z,q,te,J,G,Ae,Y)}let ke=0;if(Z.length!=1)for(var ie=0;ie<J.length;ie++){var Ee;ke+=(Ee=J[ie]).rect.width*Ee.rect.height}return J}(u,c,m,U,p,F),$={},W=[],j=[];if(w!=0){let ne=[];for(L=0;L<N.length;L++)ne.push(N[L].img.buffer);let Z=function(Y){let fe=0;for(var J=0;J<Y.length;J++)fe+=Y[J].byteLength;let G=new Uint8Array(fe),le=0;for(J=0;J<Y.length;J++){let be=new Uint8Array(Y[J]),ke=be.length;for(let ie=0;ie<ke;ie+=4){let Ee=be[ie],ae=be[ie+1],ue=be[ie+2],ce=be[ie+3];ce==0&&(Ee=ae=ue=0),G[le+ie]=Ee,G[le+ie+1]=ae,G[le+ie+2]=ue,G[le+ie+3]=ce}le+=ke}return G.buffer}(ne),q=E(Z,w);for(L=0;L<q.plte.length;L++)W.push(q.plte[L].est.rgba);let te=0;for(L=0;L<N.length;L++){let oe=(X=N[L]).img.length;var K=new Uint8Array(q.inds.buffer,te>>2,oe>>2);j.push(K);let Y=new Uint8Array(q.abuf,te,oe);k&&s(X.img,X.rect.width,X.rect.height,W,Y,K),X.img.set(Y),te+=oe}}else for(D=0;D<N.length;D++){var X=N[D];let ne=new Uint32Array(X.img.buffer);var ee=X.rect.width;for(H=ne.length,K=new Uint8Array(H),j.push(K),L=0;L<H;L++){let Z=ne[L];if(L!=0&&Z==ne[L-1])K[L]=K[L-1];else if(L>ee&&Z==ne[L-ee])K[L]=K[L-ee];else{let q=$[Z];if(q==null&&($[Z]=q=W.length,W.push(Z),W.length>=300))break;K[L]=q}}}let ye=W.length;for(ye<=256&&a==0&&(M=ye<=2?1:ye<=4?2:ye<=16?4:8,M=Math.max(M,h)),D=0;D<N.length;D++){(X=N[D]).rect.x,X.rect.y,ee=X.rect.width;let ne=X.rect.height,Z=X.img;new Uint32Array(Z.buffer);let q=4*ee,te=4;if(ye<=256&&a==0){q=Math.ceil(M*ee/8);var de=new Uint8Array(q*ne);let oe=j[D];for(let Y=0;Y<ne;Y++){L=Y*q;let fe=Y*ee;if(M==8)for(var V=0;V<ee;V++)de[L+V]=oe[fe+V];else if(M==4)for(V=0;V<ee;V++)de[L+(V>>1)]|=oe[fe+V]<<4-4*(1&V);else if(M==2)for(V=0;V<ee;V++)de[L+(V>>2)]|=oe[fe+V]<<6-2*(3&V);else if(M==1)for(V=0;V<ee;V++)de[L+(V>>3)]|=oe[fe+V]<<7-1*(7&V)}Z=de,R=3,te=1}else if(x==0&&N.length==1){de=new Uint8Array(ee*ne*3);let oe=ee*ne;for(L=0;L<oe;L++){let Y=3*L,fe=4*L;de[Y]=Z[fe],de[Y+1]=Z[fe+1],de[Y+2]=Z[fe+2]}Z=de,R=2,te=3,q=3*ee}X.img=Z,X.bpl=q,X.bpp=te}return{ctype:R,depth:M,plte:W,frames:N}}function i(u,c,m,w,v,U,p){let F=Uint8Array,h=Uint32Array,a=new F(u[v-1]),k=new h(u[v-1]),R=v+1<u.length?new F(u[v+1]):null,M=new F(u[v]),z=new h(M.buffer),D=c,H=m,L=-1,x=-1;for(let $=0;$<U.height;$++)for(let W=0;W<U.width;W++){let j=U.x+W,K=U.y+$,X=K*c+j,ee=z[X];ee==0||w[v-1].dispose==0&&k[X]==ee&&(R==null||R[4*X+3]!=0)||(j<D&&(D=j),j>L&&(L=j),K<H&&(H=K),K>x&&(x=K))}L==-1&&(D=H=L=x=0),p&&((1&D)==1&&D--,(1&H)==1&&H--),U={x:D,y:H,width:L-D+1,height:x-H+1};let N=w[v];N.rect=U,N.blend=1,N.img=new Uint8Array(U.width*U.height*4),w[v-1].dispose==0?(_(a,c,m,N.img,U.width,U.height,-U.x,-U.y,0),r(M,c,m,N.img,U)):_(M,c,m,N.img,U.width,U.height,-U.x,-U.y,0)}function r(u,c,m,w,v){_(u,c,m,w,v.width,v.height,-v.x,-v.y,2)}function f(u,c,m,w,v,U,p){let F=[],h,a=[0,1,2,3,4];U!=-1?a=[U]:(c*w>5e5||m==1)&&(a=[0]),p&&(h={level:0});let k=It;for(var R=0;R<a.length;R++){for(let D=0;D<c;D++)d(v,u,D,w,m,a[R]);F.push(k.deflate(v,h))}let M,z=1e9;for(R=0;R<F.length;R++)F[R].length<z&&(M=R,z=F[R].length);return F[M]}function d(u,c,m,w,v,U){let p=m*w,F=p+m;if(u[F]=U,F++,U==0)if(w<500)for(var h=0;h<w;h++)u[F+h]=c[p+h];else u.set(new Uint8Array(c.buffer,p,w),F);else if(U==1){for(h=0;h<v;h++)u[F+h]=c[p+h];for(h=v;h<w;h++)u[F+h]=c[p+h]-c[p+h-v]+256&255}else if(m==0){for(h=0;h<v;h++)u[F+h]=c[p+h];if(U==2)for(h=v;h<w;h++)u[F+h]=c[p+h];if(U==3)for(h=v;h<w;h++)u[F+h]=c[p+h]-(c[p+h-v]>>1)+256&255;if(U==4)for(h=v;h<w;h++)u[F+h]=c[p+h]-C(c[p+h-v],0,0)+256&255}else{if(U==2)for(h=0;h<w;h++)u[F+h]=c[p+h]+256-c[p+h-w]&255;if(U==3){for(h=0;h<v;h++)u[F+h]=c[p+h]+256-(c[p+h-w]>>1)&255;for(h=v;h<w;h++)u[F+h]=c[p+h]+256-(c[p+h-w]+c[p+h-v]>>1)&255}if(U==4){for(h=0;h<v;h++)u[F+h]=c[p+h]+256-C(0,c[p+h-w],0)&255;for(h=v;h<w;h++)u[F+h]=c[p+h]+256-C(c[p+h-v],c[p+h-w],c[p+h-v-w])&255}}}function E(u,c){let m=new Uint8Array(u),w=m.slice(0),v=new Uint32Array(w.buffer),U=I(w,c),p=U[0],F=U[1],h=m.length,a=new Uint8Array(h>>2),k;if(m.length<2e7)for(var R=0;R<h;R+=4)k=b(p,M=m[R]*(1/255),z=m[R+1]*(1/255),D=m[R+2]*(1/255),H=m[R+3]*(1/255)),a[R>>2]=k.ind,v[R>>2]=k.est.rgba;else for(R=0;R<h;R+=4){var M=m[R]*.00392156862745098,z=m[R+1]*(1/255),D=m[R+2]*(1/255),H=m[R+3]*(1/255);for(k=p;k.left;)k=O(k.est,M,z,D,H)<=0?k.left:k.right;a[R>>2]=k.ind,v[R>>2]=k.est.rgba}return{abuf:w.buffer,inds:a,plte:F}}function I(u,c,m){m==null&&(m=1e-4);let w=new Uint32Array(u.buffer),v={i0:0,i1:u.length,bst:null,est:null,tdst:0,left:null,right:null};v.bst=P(u,v.i0,v.i1),v.est=A(v.bst);let U=[v];for(;U.length<c;){let F=0,h=0;for(var p=0;p<U.length;p++)U[p].est.L>F&&(F=U[p].est.L,h=p);if(F<m)break;let a=U[h],k=T(u,w,a.i0,a.i1,a.est.e,a.est.eMq255);if(a.i0>=k||a.i1<=k){a.est.L=0;continue}let R={i0:a.i0,i1:k,bst:null,est:null,tdst:0,left:null,right:null};R.bst=P(u,R.i0,R.i1),R.est=A(R.bst);let M={i0:k,i1:a.i1,bst:null,est:null,tdst:0,left:null,right:null};for(M.bst={R:[],m:[],N:a.bst.N-R.bst.N},p=0;p<16;p++)M.bst.R[p]=a.bst.R[p]-R.bst.R[p];for(p=0;p<4;p++)M.bst.m[p]=a.bst.m[p]-R.bst.m[p];M.est=A(M.bst),a.left=R,a.right=M,U[h]=R,U.push(M)}for(U.sort((F,h)=>h.bst.N-F.bst.N),p=0;p<U.length;p++)U[p].ind=p;return[v,U]}function b(u,c,m,w,v){if(u.left==null)return u.tdst=function(R,M,z,D,H){let L=M-R[0],x=z-R[1],N=D-R[2],$=H-R[3];return L*L+x*x+N*N+$*$}(u.est.q,c,m,w,v),u;let U=O(u.est,c,m,w,v),p=u.left,F=u.right;U>0&&(p=u.right,F=u.left);let h=b(p,c,m,w,v);if(h.tdst<=U*U)return h;let a=b(F,c,m,w,v);return a.tdst<h.tdst?a:h}function O(u,c,m,w,v){let{e:U}=u;return U[0]*c+U[1]*m+U[2]*w+U[3]*v-u.eMq}function T(u,c,m,w,v,U){for(w-=4;m<w;){for(;B(u,m,v)<=U;)m+=4;for(;B(u,w,v)>U;)w-=4;if(m>=w)break;let p=c[m>>2];c[m>>2]=c[w>>2],c[w>>2]=p,m+=4,w-=4}for(;B(u,m,v)>U;)m-=4;return m+4}function B(u,c,m){return u[c]*m[0]+u[c+1]*m[1]+u[c+2]*m[2]+u[c+3]*m[3]}function P(u,c,m){let w=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],v=[0,0,0,0],U=m-c>>2;for(let p=c;p<m;p+=4){let F=u[p]*.00392156862745098,h=u[p+1]*(1/255),a=u[p+2]*(1/255),k=u[p+3]*(1/255);v[0]+=F,v[1]+=h,v[2]+=a,v[3]+=k,w[0]+=F*F,w[1]+=F*h,w[2]+=F*a,w[3]+=F*k,w[5]+=h*h,w[6]+=h*a,w[7]+=h*k,w[10]+=a*a,w[11]+=a*k,w[15]+=k*k}return w[4]=w[1],w[8]=w[2],w[9]=w[6],w[12]=w[3],w[13]=w[7],w[14]=w[11],{R:w,m:v,N:U}}function A(u){let{R:c}=u,{m}=u,{N:w}=u,v=m[0],U=m[1],p=m[2],F=m[3],h=w==0?0:1/w,a=[c[0]-v*v*h,c[1]-v*U*h,c[2]-v*p*h,c[3]-v*F*h,c[4]-U*v*h,c[5]-U*U*h,c[6]-U*p*h,c[7]-U*F*h,c[8]-p*v*h,c[9]-p*U*h,c[10]-p*p*h,c[11]-p*F*h,c[12]-F*v*h,c[13]-F*U*h,c[14]-F*p*h,c[15]-F*F*h],k=a,R=S,M=[Math.random(),Math.random(),Math.random(),Math.random()],z=0,D=0;if(w!=0)for(let L=0;L<16&&(M=R.multVec(k,M),D=Math.sqrt(R.dot(M,M)),M=R.sml(1/D,M),!(L!=0&&Math.abs(D-z)<1e-9));L++)z=D;let H=[v*h,U*h,p*h,F*h];return{Cov:a,q:H,e:M,L:z,eMq255:R.dot(R.sml(255,H),M),eMq:R.dot(M,H),rgba:(Math.round(255*H[3])<<24|Math.round(255*H[2])<<16|Math.round(255*H[1])<<8|Math.round(255*H[0])<<0)>>>0}}var S={multVec:(u,c)=>[u[0]*c[0]+u[1]*c[1]+u[2]*c[2]+u[3]*c[3],u[4]*c[0]+u[5]*c[1]+u[6]*c[2]+u[7]*c[3],u[8]*c[0]+u[9]*c[1]+u[10]*c[2]+u[11]*c[3],u[12]*c[0]+u[13]*c[1]+u[14]*c[2]+u[15]*c[3]],dot:(u,c)=>u[0]*c[0]+u[1]*c[1]+u[2]*c[2]+u[3]*c[3],sml:(u,c)=>[u*c[0],u*c[1],u*c[2],u*c[3]]};he.encode=function(c,m,w,v,U,p,F){v==null&&(v=0),F==null&&(F=!1);let h=n(c,m,w,v,[!1,!1,!1,0,F,!1]);return y(h,-1),g(h,m,w,U,p)},he.encodeLL=function(c,m,w,v,U,p,F,h){let a={ctype:0+(v==1?0:2)+(U==0?0:4),depth:p,frames:[]},k=(v+U)*p,R=k*m;for(let M=0;M<c.length;M++)a.frames.push({rect:{x:0,y:0,width:m,height:w},img:new Uint8Array(c[M]),blend:0,dispose:1,bpp:Math.ceil(k/8),bpl:Math.ceil(R/8)});return y(a,0,!0),g(a,m,w,F,h)},he.encode.compress=n,he.encode.dither=s,he.quantize=E,he.quantize.getKDtree=I,he.quantize.getNearest=b})();var dt={toArrayBuffer(_,Q){let C=_.width,o=_.height,e=C<<2,t=_.getContext("2d").getImageData(0,0,C,o),l=new Uint32Array(t.data.buffer),s=(32*C+31)/32<<2,g=s*o,y=122+g,n=new ArrayBuffer(y),i=new DataView(n),r=1<<20,f,d,E,I,b=r,O=0,T=0,B=0;function P(u){i.setUint16(T,u,!0),T+=2}function A(u){i.setUint32(T,u,!0),T+=4}function S(u){T+=u}P(19778),A(y),S(4),A(122),A(108),A(C),A(-o>>>0),P(1),P(32),A(3),A(g),A(2835),A(2835),S(8),A(16711680),A(65280),A(255),A(4278190080),A(1466527264),function u(){for(;O<o&&b>0;){for(I=122+O*s,f=0;f<e;)b--,d=l[B++],E=d>>>24,i.setUint32(I+f,d<<8|E),f+=4;O++}B<l.length?(b=r,setTimeout(u,dt._dly)):Q(n)}()},toBlob(_,Q){this.toArrayBuffer(_,C=>{Q(new Blob([C],{type:"image/bmp"}))})},_dly:9},se={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},xt={[se.CHROME]:16384,[se.FIREFOX]:11180,[se.DESKTOP_SAFARI]:16384,[se.IE]:8192,[se.IOS]:4096,[se.ETC]:8192},Xe=typeof window<"u",At=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,He=Xe&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),_t=(Xe||At)&&(He&&He.getOriginalSymbol(window,"File")||typeof File<"u"&&File),gt=(Xe||At)&&(He&&He.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Ye(_,Q,C=Date.now()){return new Promise(o=>{let e=_.split(","),t=e[0].match(/:(.*?);/)[1],l=globalThis.atob(e[1]),s=l.length,g=new Uint8Array(s);for(;s--;)g[s]=l.charCodeAt(s);let y=new Blob([g],{type:t});y.name=Q,y.lastModified=C,o(y)})}function pt(_){return new Promise((Q,C)=>{let o=new gt;o.onload=()=>Q(o.result),o.onerror=e=>C(e),o.readAsDataURL(_)})}function mt(_){return new Promise((Q,C)=>{let o=new Image;o.onload=()=>Q(o),o.onerror=e=>C(e),o.src=_})}function Be(){if(Be.cachedResult!==void 0)return Be.cachedResult;let _=se.ETC,{userAgent:Q}=navigator;return/Chrom(e|ium)/i.test(Q)?_=se.CHROME:/iP(ad|od|hone)/i.test(Q)&&/WebKit/i.test(Q)?_=se.IOS:/Safari/i.test(Q)?_=se.DESKTOP_SAFARI:/Firefox/i.test(Q)?_=se.FIREFOX:(/MSIE/i.test(Q)||document.documentMode)&&(_=se.IE),Be.cachedResult=_,Be.cachedResult}function bt(_,Q){let C=Be(),o=xt[C],e=_,t=Q,l=e*t,s=e>t?t/e:e/t;for(;l>o*o;){let g=(o+e)/2,y=(o+t)/2;g<y?(t=y,e=y*s):(t=g*s,e=g),l=e*t}return{width:e,height:t}}function je(_,Q){let C,o;try{if(C=new OffscreenCanvas(_,Q),o=C.getContext("2d"),o===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{C=document.createElement("canvas"),o=C.getContext("2d")}return C.width=_,C.height=Q,[C,o]}function vt(_,Q){let{width:C,height:o}=bt(_.width,_.height),[e,t]=je(C,o);return Q&&/jpe?g/.test(Q)&&(t.fillStyle="white",t.fillRect(0,0,e.width,e.height)),t.drawImage(_,0,0,e.width,e.height),e}function Le(){return Le.cachedResult!==void 0||(Le.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Le.cachedResult}function ze(_,Q={}){return new Promise(function(C,o){let e,t;var l=function(){try{return t=vt(e,Q.fileType||_.type),C([e,t])}catch(g){return o(g)}},s=function(g){try{var y=function(n){try{throw n}catch(i){return o(i)}};try{let n;return pt(_).then(function(i){try{return n=i,mt(n).then(function(r){try{return e=r,function(){try{return l()}catch(f){return o(f)}}()}catch(f){return y(f)}},y)}catch(r){return y(r)}},y)}catch(n){y(n)}}catch(n){return o(n)}};try{if(Le()||[se.DESKTOP_SAFARI,se.MOBILE_SAFARI].includes(Be()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(_).then(function(g){try{return e=g,l()}catch{return s()}},s)}catch{s()}})}function Ne(_,Q,C,o,e=1){return new Promise(function(t,l){let s;if(Q==="image/png"){let i,r,f;return i=_.getContext("2d"),{data:r}=i.getImageData(0,0,_.width,_.height),f=he.encode([r.buffer],_.width,_.height,4096*e),s=new Blob([f],{type:Q}),s.name=C,s.lastModified=o,g.call(this)}{let i=function(){return g.call(this)};var y=i;if(Q==="image/bmp")return new Promise(r=>dt.toBlob(_,r)).then(function(r){try{return s=r,s.name=C,s.lastModified=o,i.call(this)}catch(f){return l(f)}}.bind(this),l);{let r=function(){return i.call(this)};var n=r;if(typeof OffscreenCanvas=="function"&&_ instanceof OffscreenCanvas)return _.convertToBlob({type:Q,quality:e}).then(function(f){try{return s=f,s.name=C,s.lastModified=o,r.call(this)}catch(d){return l(d)}}.bind(this),l);{let f;return f=_.toDataURL(Q,e),Ye(f,C,o).then(function(d){try{return s=d,r.call(this)}catch(E){return l(E)}}.bind(this),l)}}}function g(){return t(s)}})}function pe(_){_.width=0,_.height=0}function Se(){return new Promise(function(_,Q){let C,o,e,t,l;return Se.cachedResult!==void 0?_(Se.cachedResult):(C="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==",Ye("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(s){try{return o=s,ze(o).then(function(g){try{return e=g[1],Ne(e,o.type,o.name,o.lastModified).then(function(y){try{return t=y,pe(e),ze(t).then(function(n){try{return l=n[0],Se.cachedResult=l.width===1&&l.height===2,_(Se.cachedResult)}catch(i){return Q(i)}},Q)}catch(n){return Q(n)}},Q)}catch(y){return Q(y)}},Q)}catch(g){return Q(g)}},Q))})}function wt(_){return new Promise((Q,C)=>{let o=new gt;o.onload=e=>{let t=new DataView(e.target.result);if(t.getUint16(0,!1)!=65496)return Q(-2);let l=t.byteLength,s=2;for(;s<l;){if(t.getUint16(s+2,!1)<=8)return Q(-1);let g=t.getUint16(s,!1);if(s+=2,g==65505){if(t.getUint32(s+=2,!1)!=1165519206)return Q(-1);let y=t.getUint16(s+=6,!1)==18761;s+=t.getUint32(s+4,y);let n=t.getUint16(s,y);s+=2;for(let i=0;i<n;i++)if(t.getUint16(s+12*i,y)==274)return Q(t.getUint16(s+12*i+8,y))}else{if((65280&g)!=65280)break;s+=t.getUint16(s,!1)}}return Q(-1)},o.onerror=e=>C(e),o.readAsArrayBuffer(_)})}function yt(_,Q){let{width:C}=_,{height:o}=_,{maxWidthOrHeight:e}=Q,t,l=_;return isFinite(e)&&(C>e||o>e)&&([l,t]=je(C,o),C>o?(l.width=e,l.height=o/C*e):(l.width=C/o*e,l.height=e),t.drawImage(_,0,0,l.width,l.height),pe(_)),l}function Et(_,Q){let{width:C}=_,{height:o}=_,[e,t]=je(C,o);switch(Q>4&&Q<9?(e.width=o,e.height=C):(e.width=C,e.height=o),Q){case 2:t.transform(-1,0,0,1,C,0);break;case 3:t.transform(-1,0,0,-1,C,o);break;case 4:t.transform(1,0,0,-1,0,o);break;case 5:t.transform(0,1,1,0,0,0);break;case 6:t.transform(0,1,-1,0,o,0);break;case 7:t.transform(0,-1,-1,0,o,C);break;case 8:t.transform(0,-1,1,0,0,C)}return t.drawImage(_,0,0,C,o),pe(_),e}function ut(_,Q,C=0){return new Promise(function(o,e){let t,l,s,g,y,n,i,r,f,d,E,I,b,O,T,B,P,A,S,u;function c(w=5){if(Q.signal&&Q.signal.aborted)throw Q.signal.reason;t+=w,Q.onProgress(Math.min(t,100))}function m(w){if(Q.signal&&Q.signal.aborted)throw Q.signal.reason;t=Math.min(Math.max(w,t),100),Q.onProgress(t)}return t=C,l=Q.maxIteration||10,s=1024*Q.maxSizeMB*1024,c(),ze(_,Q).then(function(w){try{return[,g]=w,c(),y=yt(g,Q),c(),new Promise(function(v,U){var p;if(!(p=Q.exifOrientation))return wt(_).then(function(h){try{return p=h,F.call(this)}catch(a){return U(a)}}.bind(this),U);function F(){return v(p)}return F.call(this)}).then(function(v){try{return n=v,c(),Se().then(function(U){try{return i=U?y:Et(y,n),c(),r=Q.initialQuality||1,f=Q.fileType||_.type,Ne(i,f,_.name,_.lastModified,r).then(function(p){try{{let k=function(){if(l--&&(T>s||T>b)){let M,z;return M=u?.95*S.width:S.width,z=u?.95*S.height:S.height,[P,A]=je(M,z),A.drawImage(S,0,0,M,z),r*=f==="image/png"?.85:.95,Ne(P,f,_.name,_.lastModified,r).then(function(D){try{return B=D,pe(S),S=P,T=B.size,m(Math.min(99,Math.floor((O-T)/(O-s)*100))),k}catch(H){return e(H)}},e)}return[1]},R=function(){return pe(S),pe(P),pe(y),pe(i),pe(g),m(100),o(B)};var h=k,a=R;if(d=p,c(),E=d.size>s,I=d.size>_.size,!E&&!I)return m(100),o(d);var F;return b=_.size,O=d.size,T=O,S=i,u=!Q.alwaysKeepResolution&&E,(F=function(M){for(;M;){if(M.then)return void M.then(F,e);try{if(M.pop){if(M.length)return M.pop()?R.call(this):M;M=k}else M=M.call(this)}catch(z){return e(z)}}}.bind(this))(k)}}catch(k){return e(k)}}.bind(this),e)}catch(p){return e(p)}}.bind(this),e)}catch(U){return e(U)}}.bind(this),e)}catch(v){return e(v)}}.bind(this),e)})}var St=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`,Ve;function Mt(_,Q){return new Promise((C,o)=>{Ve||(Ve=function(l){let s=[];return typeof l=="function"?s.push(`(${l})()`):s.push(l),URL.createObjectURL(new Blob(s))}(St));let e=new Worker(Ve);e.addEventListener("message",function(l){if(Q.signal&&Q.signal.aborted)e.terminate();else if(l.data.progress===void 0){if(l.data.error)return o(new Error(l.data.error)),void e.terminate();C(l.data.file),e.terminate()}else Q.onProgress(l.data.progress)}),e.addEventListener("error",o),Q.signal&&Q.signal.addEventListener("abort",()=>{o(Q.signal.reason),e.terminate()}),e.postMessage({file:_,imageCompressionLibUrl:Q.libURL,options:Te(xe({},Q),{onProgress:void 0,signal:void 0})})})}function re(_,Q){return new Promise(function(C,o){let e,t,l,s,g,y;if(e=xe({},Q),l=0,{onProgress:s}=e,e.maxSizeMB=e.maxSizeMB||Number.POSITIVE_INFINITY,g=typeof e.useWebWorker!="boolean"||e.useWebWorker,delete e.useWebWorker,e.onProgress=f=>{l=f,typeof s=="function"&&s(l)},!(_ instanceof Blob||_ instanceof _t))return o(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(_.type))return o(new Error("The file given is not an image"));if(y=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!g||typeof Worker!="function"||y)return ut(_,e).then(function(f){try{return t=f,r.call(this)}catch(d){return o(d)}}.bind(this),o);var n=function(){try{return r.call(this)}catch(f){return o(f)}}.bind(this),i=function(f){try{return ut(_,e).then(function(d){try{return t=d,n()}catch(E){return o(E)}},o)}catch(d){return o(d)}};try{return e.libURL=e.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",Mt(_,e).then(function(f){try{return t=f,n()}catch{return i()}},i)}catch{i()}function r(){try{t.name=_.name,t.lastModified=_.lastModified}catch{}try{e.preserveExif&&_.type==="image/jpeg"&&(!e.fileType||e.fileType&&e.fileType===_.type)&&(t=ht(_,t))}catch{}return C(t)}})}re.getDataUrlFromFile=pt,re.getFilefromDataUrl=Ye,re.loadImage=mt,re.drawImageInCanvas=vt,re.drawFileInCanvas=ze,re.canvasToFile=Ne,re.getExifOrientation=wt,re.handleMaxWidthOrHeight=yt,re.followExifOrientation=Et,re.cleanupCanvasMemory=pe,re.isAutoOrientationInBrowser=Se,re.approximateBelowMaximumCanvasSizeOfBrowser=bt,re.copyExifWithoutOrientation=ht,re.getBrowserName=Be,re.version="2.0.2";var zt=(()=>{class _{constructor(C){this.firebaseService=C,this.adsSubject=new tt([]),this.ads$=this.adsSubject.asObservable(),this.unsubscribe=null,this.handleError=o=>(console.error("AdsService error:",o),nt(()=>o)),this.db=this.firebaseService.db,this.testFirestoreConnection()}testFirestoreConnection(){return ge(this,null,function*(){try{console.log("\u2705 Firestore connection OK")}catch(C){console.error("\u274C Firestore connection failed:",C)}})}startListening(C){let o=Ge(this.db,"ads"),e=$e(o,Ze("uploadDate","desc"));C&&(e=$e(o,at("createdBy","==",C),Ze("uploadDate","desc"))),this.unsubscribe=lt(e,t=>{let l=t.docs.map(s=>{let g=s.data();return Te(xe({id:s.id},g),{uploadDate:g.uploadDate?.toDate()||new Date,updatedAt:g.updatedAt?.toDate()})});this.adsSubject.next(l)})}stopListening(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)}getAds(){return this.ads$}fromPromise(C){return rt(C())}fileToBase64(C){return new qe(o=>{let e=new FileReader;return e.onload=()=>{let t=e.result;o.next(t),o.complete()},e.onerror=t=>{o.error(t)},C.type.startsWith("image/")?ge(this,null,function*(){try{let t=yield this.compressFile(C);e.readAsDataURL(t)}catch(t){o.error(t)}}):e.readAsDataURL(C),()=>{}})}createAd(C,o){return this.fromPromise(()=>ge(this,null,function*(){let e="",t="";C.mediaFile&&(e=(yield this.fileToBase64(C.mediaFile).toPromise())??""),C.thumbnailFile?t=(yield this.fileToBase64(C.thumbnailFile).toPromise())??"":t=C.type==="image"?e:"";let l=9e5,s=e.length+t.length;if(s>l){let i=(s/1024/1024).toFixed(2);throw new Error(`File too large (${i}MB). Please use an image under 500KB or a shorter video. For larger files, consider using an external image hosting service.`)}let g=this.getResolutionFromAspectRatio(C.aspectRatio),y={title:C.title,type:C.type,status:C.status||"draft",thumbnailBase64:t,mediaBase64:e,aspectRatio:C.aspectRatio,resolution:g,description:C.description||"",targetUrl:C.targetUrl||"",uploadDate:Oe.now(),createdBy:o,views:0,impressions:0,clicks:0,ctr:0};return(yield ft(Ge(this.db,"ads"),y)).id})).pipe(Ce(this.handleError))}updateAd(C,o){return this.fromPromise(()=>ge(this,null,function*(){let e=_e(this.db,"ads",C),t=Te(xe({},o),{updatedAt:Oe.now()});o.mediaFile&&(t.mediaBase64=yield this.fileToBase64(o.mediaFile).toPromise(),delete t.mediaFile),o.thumbnailFile&&(t.thumbnailBase64=yield this.fileToBase64(o.thumbnailFile).toPromise(),delete t.thumbnailFile),o.aspectRatio&&(t.resolution=this.getResolutionFromAspectRatio(o.aspectRatio)),yield Pe(e,t)})).pipe(Ce(this.handleError))}deleteAd(C){return this.fromPromise(()=>ge(this,null,function*(){let o=_e(this.db,"ads",C);yield st(o)})).pipe(Ce(this.handleError))}updateAdStatus(C,o){return this.fromPromise(()=>ge(this,null,function*(){let e=_e(this.db,"ads",C);yield Pe(e,{status:o,updatedAt:Oe.now()})})).pipe(Ce(this.handleError))}incrementViews(C){return this.fromPromise(()=>ge(this,null,function*(){let o=this.adsSubject.value.find(e=>e.id===C);if(o){let e=_e(this.db,"ads",C);yield Pe(e,{views:(o.views||0)+1})}})).pipe(Ce(this.handleError))}incrementClicks(C){return this.fromPromise(()=>ge(this,null,function*(){let o=this.adsSubject.value.find(e=>e.id===C);if(o){let e=(o.clicks||0)+1,t=o.impressions||1,l=e/t*100,s=_e(this.db,"ads",C);yield Pe(s,{clicks:e,ctr:parseFloat(l.toFixed(2))})}})).pipe(Ce(this.handleError))}compressFile(C){return ge(this,null,function*(){if(C.type.startsWith("video/"))return console.warn("\u26A0\uFE0F Videos cannot be compressed. Large videos may exceed Firestore limits."),C;let o={maxSizeMB:.5,maxWidthOrHeight:1280,useWebWorker:!0,initialQuality:.7};try{let e=yield re(C,o);return console.log(`\u2705 Compressed: ${(C.size/1024).toFixed(1)}KB \u2192 ${(e.size/1024).toFixed(1)}KB`),e}catch(e){return console.error("Compression error:",e),C}})}getResolutionFromAspectRatio(C){return{"16:9":"1920x1080","9:16":"1080x1920","1:1":"1080x1080","4:5":"1080x1350","4:3":"1024x768","21:9":"2560x1080"}[C]||"1920x1080"}getVideoDuration(C){return new qe(o=>{let e=document.createElement("video");e.preload="metadata",e.onloadedmetadata=()=>{window.URL.revokeObjectURL(e.src);let t=Math.floor(e.duration),l=Math.floor(t/60),s=t%60;o.next(`${l.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`),o.complete()},e.onerror=()=>{o.error(new Error("Failed to load video metadata"))},e.src=URL.createObjectURL(C)})}static{this.\u0275fac=function(o){return new(o||_)(ot(ct))}}static{this.\u0275prov=it({token:_,factory:_.\u0275fac,providedIn:"root"})}}return _})();export{zt as a};
