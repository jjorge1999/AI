import{a as re,b as Re,f as Y_,g as R}from"./chunk-7QOE2ANW.js";function H(t){return typeof t=="function"}function Si(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Qa=Si(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Tr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Le=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(H(r))try{r()}catch(o){e=o instanceof Qa?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{J_(o)}catch(s){e=e??[],s instanceof Qa?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Qa(e)}}add(e){var n;if(e&&e!==this)if(this.closed)J_(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Tr(n,e)}remove(e){let{_finalizers:n}=this;n&&Tr(n,e),e instanceof t&&e._removeParent(this)}};Le.EMPTY=(()=>{let t=new Le;return t.closed=!0,t})();var Jd=Le.EMPTY;function Ya(t){return t instanceof Le||t&&"closed"in t&&H(t.remove)&&H(t.add)&&H(t.unsubscribe)}function J_(t){H(t)?t():t.unsubscribe()}var dn=Si(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});var Vt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ai={setTimeout(t,e,...n){let{delegate:r}=Ai;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Ai;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Ja(t){Ai.setTimeout(()=>{let{onUnhandledError:e}=Vt;if(e)e(t);else throw t})}function cs(){}var Z_=Zd("C",void 0,void 0);function X_(t){return Zd("E",void 0,t)}function ev(t){return Zd("N",t,void 0)}function Zd(t,e,n){return{kind:t,value:e,error:n}}var Cr=null;function xi(t){if(Vt.useDeprecatedSynchronousErrorHandling){let e=!Cr;if(e&&(Cr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Cr;if(Cr=null,n)throw r}}else t()}function tv(t){Vt.useDeprecatedSynchronousErrorHandling&&Cr&&(Cr.errorThrown=!0,Cr.error=t)}var Sr=class extends Le{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ya(e)&&e.add(this)):this.destination=KC}static create(e,n,r){return new Ln(e,n,r)}next(e){this.isStopped?ef(ev(e),this):this._next(e)}error(e){this.isStopped?ef(X_(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ef(Z_,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},GC=Function.prototype.bind;function Xd(t,e){return GC.call(t,e)}var tf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Za(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Za(r)}else Za(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Za(n)}}},Ln=class extends Sr{constructor(e,n,r){super();let i;if(H(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Vt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Xd(e.next,o),error:e.error&&Xd(e.error,o),complete:e.complete&&Xd(e.complete,o)}):i=e}this.destination=new tf(i)}};function Za(t){Vt.useDeprecatedSynchronousErrorHandling?tv(t):Ja(t)}function WC(t){throw t}function ef(t,e){let{onStoppedNotification:n}=Vt;n&&Ai.setTimeout(()=>n(t,e))}var KC={closed:!0,next:cs,error:WC,complete:cs};function QC(t,e){let n=typeof e=="object";return new Promise((r,i)=>{let o=new Ln({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{n?r(e.defaultValue):i(new dn)}});t.subscribe(o)})}function nf(t){return H(t?.lift)}function ne(t){return e=>{if(nf(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function X(t,e,n,r,i){return new rf(t,e,n,r,i)}var rf=class extends Sr{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Et(t,e){return ne((n,r)=>{let i=0;n.subscribe(X(r,o=>{r.next(t.call(e,o,i++))}))})}var Mi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ot(t){return t}function YC(...t){return of(t)}function of(t){return t.length===0?ot:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ce=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=ZC(n)?n:new Ln(n,r,i);return xi(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=nv(r),new r((i,o)=>{let s=new Ln({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Mi](){return this}pipe(...n){return of(n)(this)}toPromise(n){return n=nv(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function nv(t){var e;return(e=t??Vt.Promise)!==null&&e!==void 0?e:Promise}function JC(t){return t&&H(t.next)&&H(t.error)&&H(t.complete)}function ZC(t){return t&&t instanceof Sr||JC(t)&&Ya(t)}var{isArray:XC}=Array,{getPrototypeOf:eS,prototype:tS,keys:nS}=Object;function Xa(t){if(t.length===1){let e=t[0];if(XC(e))return{args:e,keys:null};if(rS(e)){let n=nS(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function rS(t){return t&&typeof t=="object"&&eS(t)===tS}function iv(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(f){try{l(r.next(f))}catch(p){s(p)}}function u(f){try{l(r.throw(f))}catch(p){s(p)}}function l(f){f.done?o(f.value):i(f.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function rv(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ar(t){return this instanceof Ar?(this.v=t,this):new Ar(t)}function ov(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(T){return Promise.resolve(T).then(y,p)}}function a(y,T){r[y]&&(i[y]=function(M){return new Promise(function(N,V){o.push([y,M,N,V])>1||u(y,M)})},T&&(i[y]=T(i[y])))}function u(y,T){try{l(r[y](T))}catch(M){m(o[0][3],M)}}function l(y){y.value instanceof Ar?Promise.resolve(y.value.v).then(f,p):m(o[0][2],y)}function f(y){u("next",y)}function p(y){u("throw",y)}function m(y,T){y(T),o.shift(),o.length&&u(o[0][0],o[0][1])}}function sv(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof rv=="function"?rv(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Ni=t=>t&&typeof t.length=="number"&&typeof t!="function";function ec(t){return H(t?.then)}function tc(t){return H(t[Mi])}function nc(t){return Symbol.asyncIterator&&H(t?.[Symbol.asyncIterator])}function rc(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function iS(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ic=iS();function oc(t){return H(t?.[ic])}function sc(t){return ov(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Ar(n.read());if(i)return yield Ar(void 0);yield yield Ar(r)}}finally{n.releaseLock()}})}function ac(t){return H(t?.getReader)}function xe(t){if(t instanceof ce)return t;if(t!=null){if(tc(t))return oS(t);if(Ni(t))return sS(t);if(ec(t))return aS(t);if(nc(t))return av(t);if(oc(t))return cS(t);if(ac(t))return uS(t)}throw rc(t)}function oS(t){return new ce(e=>{let n=t[Mi]();if(H(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function sS(t){return new ce(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function aS(t){return new ce(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Ja)})}function cS(t){return new ce(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function av(t){return new ce(e=>{lS(t,e).catch(n=>e.error(n))})}function uS(t){return av(sc(t))}function lS(t,e){var n,r,i,o;return iv(this,void 0,void 0,function*(){try{for(n=sv(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function gt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function cc(t,e=0){return ne((n,r)=>{n.subscribe(X(r,i=>gt(r,t,()=>r.next(i),e),()=>gt(r,t,()=>r.complete(),e),i=>gt(r,t,()=>r.error(i),e)))})}function uc(t,e=0){return ne((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function cv(t,e){return xe(t).pipe(uc(e),cc(e))}function uv(t,e){return xe(t).pipe(uc(e),cc(e))}function lv(t,e){return new ce(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function dv(t,e){return new ce(n=>{let r;return gt(n,e,()=>{r=t[ic](),gt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>H(r?.return)&&r.return()})}function lc(t,e){if(!t)throw new Error("Iterable cannot be null");return new ce(n=>{gt(n,e,()=>{let r=t[Symbol.asyncIterator]();gt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function fv(t,e){return lc(sc(t),e)}function hv(t,e){if(t!=null){if(tc(t))return cv(t,e);if(Ni(t))return lv(t,e);if(ec(t))return uv(t,e);if(nc(t))return lc(t,e);if(oc(t))return dv(t,e);if(ac(t))return fv(t,e)}throw rc(t)}function Dt(t,e){return e?hv(t,e):xe(t)}var{isArray:dS}=Array;function fS(t,e){return dS(e)?t(...e):t(e)}function Ri(t){return Et(e=>fS(t,e))}function pv(t){return t&&H(t.schedule)}function gv(t){return t[t.length-1]}function dc(t){return H(gv(t))?t.pop():void 0}function jn(t){return pv(gv(t))?t.pop():void 0}function fc(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function hS(...t){let e=jn(t),n=dc(t),{args:r,keys:i}=Xa(t);if(r.length===0)return Dt([],e);let o=new ce(pS(r,e,i?s=>fc(i,s):ot));return n?o.pipe(Ri(n)):o}function pS(t,e,n=ot){return r=>{mv(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)mv(e,()=>{let l=Dt(t[u],e),f=!1;l.subscribe(X(r,p=>{o[u]=p,f||(f=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function mv(t,e,n){t?gt(n,t,e):e()}function gS(...t){let e=dc(t),{args:n,keys:r}=Xa(t),i=new ce(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let f=0;f<s;f++){let p=!1;xe(n[f]).subscribe(X(o,m=>{p||(p=!0,l--),a[f]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?fc(r,a):a),o.complete())}))}});return e?i.pipe(Ri(e)):i}var us=new ce(t=>t.complete());function hc(t){return t<=0?()=>us:ne((e,n)=>{let r=0;e.subscribe(X(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function sf(){return ne((t,e)=>{let n=null;t._refCount++;let r=X(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var af=class extends ce{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,nf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Le;let n=this.getSubject();e.add(this.source.subscribe(X(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Le.EMPTY)}return e}refCount(){return sf()(this)}};var yv=Si(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Bn=(()=>{class t extends ce{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new pc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new yv}next(n){xi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){xi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){xi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Jd:(this.currentObservers=null,o.push(n),new Le(()=>{this.currentObservers=null,Tr(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new ce;return n.source=this,n}}return t.create=(e,n)=>new pc(e,n),t})(),pc=class extends Bn{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Jd}};var Un=class extends Bn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var cf={now(){return(cf.delegate||Date).now()},delegate:void 0};var gc=class extends Le{constructor(e,n){super()}schedule(e,n=0){return this}};var ls={setInterval(t,e,...n){let{delegate:r}=ls;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=ls;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var mc=class extends gc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return ls.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&ls.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Tr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Pi=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Pi.now=cf.now;var yc=class extends Pi{constructor(e,n=Pi.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var _v=new yc(mc);function uf(...t){let e=jn(t);return Dt(t,e)}function ds(t,e){let n=H(t)?t:()=>t,r=i=>i.error(n());return new ce(e?i=>e.schedule(r,0,i):r)}function mS(t){return!!t&&(t instanceof ce||H(t.lift)&&H(t.subscribe))}function vv(t,e,n,r,i,o,s,a){let u=[],l=0,f=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=M=>l<r?T(M):u.push(M),T=M=>{o&&e.next(M),l++;let N=!1;xe(n(M,f++)).subscribe(X(e,V=>{i?.(V),o?y(V):e.next(V)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;u.length&&l<r;){let V=u.shift();s?gt(e,s,()=>T(V)):T(V)}m()}catch(V){e.error(V)}}))};return t.subscribe(X(e,y,()=>{p=!0,m()})),()=>{a?.()}}function fn(t,e,n=1/0){return H(e)?fn((r,i)=>Et((o,s)=>e(r,o,i,s))(xe(t(r,i))),n):(typeof e=="number"&&(n=e),ne((r,i)=>vv(r,i,t,n)))}function lf(t=1/0){return fn(ot,t)}function wv(){return lf(1)}function _c(...t){return wv()(Dt(t,jn(t)))}function yS(t){return new ce(e=>{xe(t()).subscribe(e)})}var _S=["addListener","removeListener"],vS=["addEventListener","removeEventListener"],wS=["on","off"];function df(t,e,n,r){if(H(n)&&(r=n,n=void 0),r)return df(t,e,n).pipe(Ri(r));let[i,o]=DS(t)?vS.map(s=>a=>t[s](e,a,n)):IS(t)?_S.map(Iv(t,e)):ES(t)?wS.map(Iv(t,e)):[];if(!i&&Ni(t))return fn(s=>df(s,e,n))(xe(t));if(!i)throw new TypeError("Invalid event target");return new ce(s=>{let a=(...u)=>s.next(1<u.length?u:u[0]);return i(a),()=>o(a)})}function Iv(t,e){return n=>r=>t[n](e,r)}function IS(t){return H(t.addListener)&&H(t.removeListener)}function ES(t){return H(t.on)&&H(t.off)}function DS(t){return H(t.addEventListener)&&H(t.removeEventListener)}function fs(t,e){return ne((n,r)=>{let i=0;n.subscribe(X(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Oi(t){return ne((e,n)=>{let r=null,i=!1,o;r=e.subscribe(X(n,void 0,void 0,s=>{o=xe(t(s,Oi(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Ev(t,e,n,r,i){return(o,s)=>{let a=n,u=e,l=0;o.subscribe(X(s,f=>{let p=l++;u=a?t(u,f,p):(a=!0,f),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function bS(t,e){return H(e)?fn(t,e,1):fn(t,1)}function TS(t,e=_v){return ne((n,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function u(){let l=s+t,f=e.now();if(f<l){i=this.schedule(void 0,l-f),r.add(i);return}a()}n.subscribe(X(r,l=>{o=l,s=e.now(),i||(i=e.schedule(u,t),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function hs(t){return ne((e,n)=>{let r=!1;e.subscribe(X(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function CS(t){return Et(()=>t)}function SS(t,e=ot){return t=t??AS,ne((n,r)=>{let i,o=!0;n.subscribe(X(r,s=>{let a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function AS(t,e){return t===e}function vc(t=xS){return ne((e,n)=>{let r=!1;e.subscribe(X(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function xS(){return new dn}function MS(t){return ne((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Dv(t,e){let n=arguments.length>=2;return r=>r.pipe(t?fs((i,o)=>t(i,o,r)):ot,hc(1),n?hs(e):vc(()=>new dn))}function ff(t){return t<=0?()=>us:ne((e,n)=>{let r=[];e.subscribe(X(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function NS(t,e){let n=arguments.length>=2;return r=>r.pipe(t?fs((i,o)=>t(i,o,r)):ot,ff(1),n?hs(e):vc(()=>new dn))}function RS(t,e){return ne(Ev(t,e,arguments.length>=2,!0))}function PS(...t){let e=jn(t);return ne((n,r)=>{(e?_c(t,n,e):_c(t,n)).subscribe(r)})}function OS(t,e){return ne((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(X(r,u=>{i?.unsubscribe();let l=0,f=o++;xe(t(u,f)).subscribe(i=X(r,p=>r.next(e?e(u,p,f,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function kS(t){return ne((e,n)=>{xe(t).subscribe(X(n,()=>n.complete(),cs)),!n.closed&&e.subscribe(n)})}function ki(t,e,n){let r=H(t)||e||n?{next:t,error:e,complete:n}:t;return r?ne((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(X(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):ot}function bv(t,e){return Object.is(t,e)}var Ge=null,ps=!1,wc=1,Zt=Symbol("SIGNAL");function ue(t){let e=Ge;return Ge=t,e}function FS(){return ps}var ms={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function mf(t){if(ps)throw new Error("");if(Ge===null)return;Ge.consumerOnSignalRead(t);let e=Ge.nextProducerIndex++;if(Fi(Ge),e<Ge.producerNode.length&&Ge.producerNode[e]!==t&&gs(Ge)){let n=Ge.producerNode[e];Tc(n,Ge.producerIndexOfThis[e])}Ge.producerNode[e]!==t&&(Ge.producerNode[e]=t,Ge.producerIndexOfThis[e]=gs(Ge)?xv(t,Ge,e):0),Ge.producerLastReadVersion[e]=t.version}function VS(){wc++}function Tv(t){if(!(gs(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===wc)){if(!t.producerMustRecompute(t)&&!bc(t)){t.dirty=!1,t.lastCleanEpoch=wc;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=wc}}function Cv(t){if(t.liveConsumerNode===void 0)return;let e=ps;ps=!0;try{for(let n of t.liveConsumerNode)n.dirty||Av(n)}finally{ps=e}}function Sv(){return Ge?.consumerAllowSignalWrites!==!1}function Av(t){t.dirty=!0,Cv(t),t.consumerMarkedDirty?.(t)}function Ec(t){return t&&(t.nextProducerIndex=0),ue(t)}function Dc(t,e){if(ue(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(gs(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Tc(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function bc(t){Fi(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(Tv(n),r!==n.version))return!0}return!1}function yf(t){if(Fi(t),gs(t))for(let e=0;e<t.producerNode.length;e++)Tc(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function xv(t,e,n){if(Mv(t),Fi(t),t.liveConsumerNode.length===0)for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=xv(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Tc(t,e){if(Mv(t),Fi(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Tc(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Fi(i),i.producerIndexOfThis[r]=e}}function gs(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Fi(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function Mv(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function Nv(t){let e=Object.create(LS);e.computation=t;let n=()=>{if(Tv(e),mf(e),e.value===Ic)throw e.error;return e.value};return n[Zt]=e,n}var hf=Symbol("UNSET"),pf=Symbol("COMPUTING"),Ic=Symbol("ERRORED"),LS=Re(re({},ms),{value:hf,dirty:!0,error:null,equal:bv,producerMustRecompute(t){return t.value===hf||t.value===pf},producerRecomputeValue(t){if(t.value===pf)throw new Error("Detected cycle in computations.");let e=t.value;t.value=pf;let n=Ec(t),r;try{r=t.computation()}catch(i){r=Ic,t.error=i}finally{Dc(t,n)}if(e!==hf&&e!==Ic&&r!==Ic&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function jS(){throw new Error}var Rv=jS;function Pv(){Rv()}function Ov(t){Rv=t}var BS=null;function kv(t){let e=Object.create(Vv);e.value=t;let n=()=>(mf(e),e.value);return n[Zt]=e,n}function _f(t,e){Sv()||Pv(),t.equal(t.value,e)||(t.value=e,US(t))}function Fv(t,e){Sv()||Pv(),_f(t,e(t.value))}var Vv=Re(re({},ms),{equal:bv,value:void 0});function US(t){t.version++,VS(),Cv(t),BS?.()}function Lv(t,e,n){let r=Object.create($S);n&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=e;let i=u=>{r.cleanupFn=u};function o(u){return u.fn===null&&u.schedule===null}function s(u){o(u)||(yf(u),u.cleanupFn(),u.fn=null,u.schedule=null,u.cleanupFn=gf)}let a=()=>{if(r.fn===null)return;if(FS())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!bc(r))return;r.hasRun=!0;let u=Ec(r);try{r.cleanupFn(),r.cleanupFn=gf,r.fn(i)}finally{Dc(r,u)}};return r.ref={notify:()=>Av(r),run:a,cleanup:()=>r.cleanupFn(),destroy:()=>s(r),[Zt]:r},r.ref}var gf=()=>{},$S=Re(re({},ms),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule!==null&&t.schedule(t.ref)},hasRun:!1,cleanupFn:gf});var Cw="https://g.co/ng/security#xss",le=class extends Error{constructor(e,n){super(Sw(e,n)),this.code=e}};function Sw(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function As(t){return{toString:t}.toString()}var Cc="__parameters__";function HS(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function Aw(t,e,n){return As(()=>{let r=HS(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,f){let p=u.hasOwnProperty(Cc)?u[Cc]:Object.defineProperty(u,Cc,{value:[]})[Cc];for(;p.length<=f;)p.push(null);return(p[f]=p[f]||[]).push(s),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Mt=globalThis;function ve(t){for(let e in t)if(t[e]===ve)return e;throw Error("Could not find renamed property on target object.")}function qS(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function at(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(at).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Of(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var zS=ve({__forward_ref__:ve});function xw(t){return t.__forward_ref__=xw,t.toString=function(){return at(this())},t}function st(t){return Mw(t)?t():t}function Mw(t){return typeof t=="function"&&t.hasOwnProperty(zS)&&t.__forward_ref__===xw}function we(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Nw(t){return{providers:t.providers||[],imports:t.imports||[]}}function uu(t){return jv(t,Rw)||jv(t,Pw)}function s$(t){return uu(t)!==null}function jv(t,e){return t.hasOwnProperty(e)?t[e]:null}function GS(t){let e=t&&(t[Rw]||t[Pw]);return e||null}function Bv(t){return t&&(t.hasOwnProperty(Uv)||t.hasOwnProperty(WS))?t[Uv]:null}var Rw=ve({\u0275prov:ve}),Uv=ve({\u0275inj:ve}),Pw=ve({ngInjectableDef:ve}),WS=ve({ngInjectorDef:ve}),me=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=we({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Ow(t){return t&&!!t.\u0275providers}var KS=ve({\u0275cmp:ve}),QS=ve({\u0275dir:ve}),YS=ve({\u0275pipe:ve}),JS=ve({\u0275mod:ve}),jc=ve({\u0275fac:ve}),ys=ve({__NG_ELEMENT_ID__:ve}),$v=ve({__NG_ENV_ID__:ve});function tn(t){return typeof t=="string"?t:t==null?"":String(t)}function ZS(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():tn(t)}function XS(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new le(-200,t)}function kh(t,e){throw new le(-201,!1)}var oe=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(oe||{}),kf;function kw(){return kf}function mt(t){let e=kf;return kf=t,e}function Fw(t,e,n){let r=uu(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&oe.Optional)return null;if(e!==void 0)return e;kh(t,"Injector")}var eA={},_s=eA,Ff="__NG_DI_FLAG__",Bc="ngTempTokenPath",tA="ngTokenPath",nA=/\n/gm,rA="\u0275",Hv="__source",Ui;function iA(){return Ui}function $n(t){let e=Ui;return Ui=t,e}function oA(t,e=oe.Default){if(Ui===void 0)throw new le(-203,!1);return Ui===null?Fw(t,void 0,e):Ui.get(t,e&oe.Optional?null:void 0,e)}function We(t,e=oe.Default){return(kw()||oA)(st(t),e)}function de(t,e=oe.Default){return We(t,lu(e))}function lu(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Vf(t){let e=[];for(let n=0;n<t.length;n++){let r=st(t[n]);if(Array.isArray(r)){if(r.length===0)throw new le(900,!1);let i,o=oe.Default;for(let s=0;s<r.length;s++){let a=r[s],u=sA(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(We(i,o))}else e.push(We(r))}return e}function Vw(t,e){return t[Ff]=e,t.prototype[Ff]=e,t}function sA(t){return t[Ff]}function aA(t,e,n,r){let i=t[Bc];throw e[Hv]&&i.unshift(e[Hv]),t.message=cA(`
`+t.message,i,n,r),t[tA]=i,t[Bc]=null,t}function cA(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==rA?t.slice(2):t;let i=at(e);if(Array.isArray(e))i=e.map(at).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):at(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(nA,`
  `)}`}var uA=Vw(Aw("Optional"),8);var lA=Vw(Aw("SkipSelf"),4);function Pr(t,e){let n=t.hasOwnProperty(jc);return n?t[jc]:null}function dA(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function fA(t){return t.flat(Number.POSITIVE_INFINITY)}function Fh(t,e){t.forEach(n=>Array.isArray(n)?Fh(n,e):e(n))}function Lw(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Uc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function hA(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function du(t,e,n){let r=xs(t,e);return r>=0?t[r|1]=n:(r=~r,hA(t,r,e,n)),r}function vf(t,e){let n=xs(t,e);if(n>=0)return t[n|1]}function xs(t,e){return pA(t,e,1)}function pA(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Hi={},yt=[],$c=new me(""),jw=new me("",-1),Bw=new me(""),Hc=class{get(e,n=_s){if(n===_s){let r=new Error(`NullInjectorError: No provider for ${at(e)}!`);throw r.name="NullInjectorError",r}return n}},Uw=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Uw||{}),vs=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(vs||{}),qn=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(qn||{});function gA(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Lf(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];mA(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function $w(t){return t===3||t===4||t===6}function mA(t){return t.charCodeAt(0)===64}function ws(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?qv(t,n,i,null,e[++r]):qv(t,n,i,null,null))}}return t}function qv(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var Hw="ng-template";function yA(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&gA(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Vh(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Vh(t){return t.type===4&&t.value!==Hw}function _A(t,e,n){let r=t.type===4&&!n?Hw:t.value;return e===r}function vA(t,e,n){let r=4,i=t.attrs,o=i!==null?EA(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Lt(r)&&!Lt(u))return!1;if(s&&Lt(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!_A(t,u,n)||u===""&&e.length===1){if(Lt(r))return!1;s=!0}}else if(r&8){if(i===null||!yA(t,i,u,n)){if(Lt(r))return!1;s=!0}}else{let l=e[++a],f=wA(u,i,Vh(t),n);if(f===-1){if(Lt(r))return!1;s=!0;continue}if(l!==""){let p;if(f>o?p="":p=i[f+1].toLowerCase(),r&2&&l!==p){if(Lt(r))return!1;s=!0}}}}return Lt(r)||s}function Lt(t){return(t&1)===0}function wA(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return DA(e,t)}function IA(t,e,n=!1){for(let r=0;r<e.length;r++)if(vA(t,e[r],n))return!0;return!1}function EA(t){for(let e=0;e<t.length;e++){let n=t[e];if($w(n))return e}return t.length}function DA(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function zv(t,e){return t?":not("+e.trim()+")":e}function bA(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Lt(s)&&(e+=zv(o,i),i=""),r=s,o=o||!Lt(r);n++}return i!==""&&(e+=zv(o,i)),e}function TA(t){return t.map(bA).join(",")}function CA(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Lt(i))break;i=o}r++}return{attrs:e,classes:n}}function a$(t){return As(()=>{let e=Kw(t),n=Re(re({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Uw.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||vs.Emulated,styles:t.styles||yt,_:null,schemas:t.schemas||null,tView:null,id:""});Qw(n);let r=t.dependencies;return n.directiveDefs=Wv(r,!1),n.pipeDefs=Wv(r,!0),n.id=MA(n),n})}function SA(t){return zn(t)||zw(t)}function AA(t){return t!==null}function qw(t){return As(()=>({type:t.type,bootstrap:t.bootstrap||yt,declarations:t.declarations||yt,imports:t.imports||yt,exports:t.exports||yt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Gv(t,e){if(t==null)return Hi;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=qn.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==qn.None?[r,a]:r,e[o]=s):n[o]=r}return n}function fu(t){return As(()=>{let e=Kw(t);return Qw(e),e})}function $r(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function zn(t){return t[KS]||null}function zw(t){return t[QS]||null}function Gw(t){return t[YS]||null}function xA(t){let e=zn(t)||zw(t)||Gw(t);return e!==null?e.standalone:!1}function Ww(t,e){let n=t[JS]||null;if(!n&&e===!0)throw new Error(`Type ${at(t)} does not have '\u0275mod' property.`);return n}function Kw(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Hi,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||yt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Gv(t.inputs,e),outputs:Gv(t.outputs),debugInfo:null}}function Qw(t){t.features?.forEach(e=>e(t))}function Wv(t,e){if(!t)return null;let n=e?Gw:SA;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(AA)}function MA(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function NA(t){return{\u0275providers:t}}function RA(...t){return{\u0275providers:Yw(!0,t),\u0275fromNgModule:!0}}function Yw(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Fh(e,s=>{let a=s;jf(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Jw(i,o),n}function Jw(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Lh(i,o=>{e(o,r)})}}function jf(t,e,n,r){if(t=st(t),!t)return!1;let i=null,o=Bv(t),s=!o&&zn(t);if(!o&&!s){let u=t.ngModule;if(o=Bv(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)jf(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Fh(o.imports,f=>{jf(f,e,n,r)&&(l||=[],l.push(f))})}finally{}l!==void 0&&Jw(l,e)}if(!a){let l=Pr(i)||(()=>new i);e({provide:i,useFactory:l,deps:yt},i),e({provide:Bw,useValue:i,multi:!0},i),e({provide:$c,useValue:()=>We(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;Lh(u,f=>{e(f,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Lh(t,e){for(let n of t)Ow(n)&&(n=n.\u0275providers),Array.isArray(n)?Lh(n,e):e(n)}var PA=ve({provide:String,useValue:ve});function Zw(t){return t!==null&&typeof t=="object"&&PA in t}function OA(t){return!!(t&&t.useExisting)}function kA(t){return!!(t&&t.useFactory)}function qi(t){return typeof t=="function"}function FA(t){return!!t.useClass}var Xw=new me(""),Rc={},VA={},wf;function jh(){return wf===void 0&&(wf=new Hc),wf}var Gn=class{},Is=class extends Gn{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Uf(e,s=>this.processProvider(s)),this.records.set(jw,Vi(void 0,this)),i.has("environment")&&this.records.set(Gn,Vi(void 0,this));let o=this.records.get(Xw);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Bw,yt,oe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ue(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ue(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=$n(this),r=mt(void 0),i;try{return e()}finally{$n(n),mt(r)}}get(e,n=_s,r=oe.Default){if(this.assertNotDestroyed(),e.hasOwnProperty($v))return e[$v](this);r=lu(r);let i,o=$n(this),s=mt(void 0);try{if(!(r&oe.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=$A(e)&&uu(e);l&&this.injectableDefInScope(l)?u=Vi(Bf(e),Rc):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&oe.Self?jh():this.parent;return n=r&oe.Optional&&n===_s?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Bc]=a[Bc]||[]).unshift(at(e)),o)throw a;return aA(a,e,"R3InjectorError",this.source)}else throw a}finally{mt(s),$n(o)}}resolveInjectorInitializers(){let e=ue(null),n=$n(this),r=mt(void 0),i;try{let o=this.get($c,yt,oe.Self);for(let s of o)s()}finally{$n(n),mt(r),ue(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(at(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new le(205,!1)}processProvider(e){e=st(e);let n=qi(e)?e:st(e&&e.provide),r=jA(e);if(!qi(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Vi(void 0,Rc,!0),i.factory=()=>Vf(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=ue(null);try{return n.value===Rc&&(n.value=VA,n.value=n.factory()),typeof n.value=="object"&&n.value&&UA(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ue(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=st(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Bf(t){let e=uu(t),n=e!==null?e.factory:Pr(t);if(n!==null)return n;if(t instanceof me)throw new le(204,!1);if(t instanceof Function)return LA(t);throw new le(204,!1)}function LA(t){if(t.length>0)throw new le(204,!1);let n=GS(t);return n!==null?()=>n.factory(t):()=>new t}function jA(t){if(Zw(t))return Vi(void 0,t.useValue);{let e=eI(t);return Vi(e,Rc)}}function eI(t,e,n){let r;if(qi(t)){let i=st(t);return Pr(i)||Bf(i)}else if(Zw(t))r=()=>st(t.useValue);else if(kA(t))r=()=>t.useFactory(...Vf(t.deps||[]));else if(OA(t))r=()=>We(st(t.useExisting));else{let i=st(t&&(t.useClass||t.provide));if(BA(t))r=()=>new i(...Vf(t.deps));else return Pr(i)||Bf(i)}return r}function Vi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function BA(t){return!!t.deps}function UA(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function $A(t){return typeof t=="function"||typeof t=="object"&&t instanceof me}function Uf(t,e){for(let n of t)Array.isArray(n)?Uf(n,e):n&&Ow(n)?Uf(n.\u0275providers,e):e(n)}function HA(t,e){t instanceof Is&&t.assertNotDestroyed();let n,r=$n(t),i=mt(void 0);try{return e()}finally{$n(r),mt(i)}}function tI(){return kw()!==void 0||iA()!=null}function nI(t){if(!tI())throw new le(-203,!1)}function qA(t){return typeof t=="function"}var pn=0,ee=1,q=2,Qe=3,Bt=4,Ht=5,qc=6,Es=7,Ut=8,zi=9,$t=10,Me=11,Ds=12,Kv=13,Yi=14,nn=15,Ms=16,Li=17,hn=18,hu=19,rI=20,Hn=21,Pc=22,Or=23,_t=25,iI=1;var kr=7,zc=8,Gi=9,bt=10,Bh=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Bh||{});function Nr(t){return Array.isArray(t)&&typeof t[iI]=="object"}function gn(t){return Array.isArray(t)&&t[iI]===!0}function Uh(t){return(t.flags&4)!==0}function pu(t){return t.componentOffset>-1}function gu(t){return(t.flags&1)===1}function Wn(t){return!!t.template}function zA(t){return(t[q]&512)!==0}var $f=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function oI(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function sI(){return aI}function aI(t){return t.type.prototype.ngOnChanges&&(t.setInput=WA),GA}sI.ngInherit=!0;function GA(){let t=uI(this),e=t?.current;if(e){let n=t.previous;if(n===Hi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function WA(t,e,n,r,i){let o=this.declaredInputs[r],s=uI(t)||KA(t,{previous:Hi,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new $f(l&&l.currentValue,n,u===Hi),oI(t,e,i,n)}var cI="__ngSimpleChanges__";function uI(t){return t[cI]||null}function KA(t,e){return t[cI]=e}var Qv=null;var Xt=function(t,e,n){Qv?.(t,e,n)},lI="svg",QA="math",YA=!1;function JA(){return YA}function rn(t){for(;Array.isArray(t);)t=t[pn];return t}function dI(t,e){return rn(e[t])}function Rt(t,e){return rn(e[t.index])}function fI(t,e){return t.data[e]}function mu(t,e){return t[e]}function Jn(t,e){let n=e[t];return Nr(n)?n:n[pn]}function ZA(t){return(t[q]&4)===4}function $h(t){return(t[q]&128)===128}function XA(t){return gn(t[Qe])}function Wi(t,e){return e==null?null:t[e]}function hI(t){t[Li]=0}function ex(t){t[q]&1024||(t[q]|=1024,$h(t)&&bs(t))}function tx(t,e){for(;t>0;)e=e[Yi],t--;return e}function Hh(t){return!!(t[q]&9216||t[Or]?.dirty)}function Hf(t){t[$t].changeDetectionScheduler?.notify(1),Hh(t)?bs(t):t[q]&64&&(JA()?(t[q]|=1024,bs(t)):t[$t].changeDetectionScheduler?.notify())}function bs(t){t[$t].changeDetectionScheduler?.notify();let e=Ts(t);for(;e!==null&&!(e[q]&8192||(e[q]|=8192,!$h(e)));)e=Ts(e)}function pI(t,e){if((t[q]&256)===256)throw new le(911,!1);t[Hn]===null&&(t[Hn]=[]),t[Hn].push(e)}function nx(t,e){if(t[Hn]===null)return;let n=t[Hn].indexOf(e);n!==-1&&t[Hn].splice(n,1)}function Ts(t){let e=t[Qe];return gn(e)?e[Qe]:e}var Y={lFrame:EI(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function rx(){return Y.lFrame.elementDepthCount}function ix(){Y.lFrame.elementDepthCount++}function ox(){Y.lFrame.elementDepthCount--}function gI(){return Y.bindingsEnabled}function sx(){return Y.skipHydrationRootTNode!==null}function ax(t){return Y.skipHydrationRootTNode===t}function cx(){Y.skipHydrationRootTNode=null}function K(){return Y.lFrame.lView}function Ne(){return Y.lFrame.tView}function c$(t){return Y.lFrame.contextLView=t,t[Ut]}function u$(t){return Y.lFrame.contextLView=null,t}function Xe(){let t=mI();for(;t!==null&&t.type===64;)t=t.parent;return t}function mI(){return Y.lFrame.currentTNode}function ux(){let t=Y.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Hr(t,e){let n=Y.lFrame;n.currentTNode=t,n.isParent=e}function qh(){return Y.lFrame.isParent}function yI(){Y.lFrame.isParent=!1}function lx(){return Y.lFrame.contextLView}function Zn(){let t=Y.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function _I(){return Y.lFrame.bindingIndex}function dx(t){return Y.lFrame.bindingIndex=t}function yu(){return Y.lFrame.bindingIndex++}function _u(t){let e=Y.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function fx(){return Y.lFrame.inI18n}function hx(t,e){let n=Y.lFrame;n.bindingIndex=n.bindingRootIndex=t,qf(e)}function px(){return Y.lFrame.currentDirectiveIndex}function qf(t){Y.lFrame.currentDirectiveIndex=t}function gx(t){let e=Y.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function vI(){return Y.lFrame.currentQueryIndex}function zh(t){Y.lFrame.currentQueryIndex=t}function mx(t){let e=t[ee];return e.type===2?e.declTNode:e.type===1?t[Ht]:null}function wI(t,e,n){if(n&oe.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&oe.Host);)if(i=mx(o),i===null||(o=o[Yi],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=Y.lFrame=II();return r.currentTNode=e,r.lView=t,!0}function Gh(t){let e=II(),n=t[ee];Y.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function II(){let t=Y.lFrame,e=t===null?null:t.child;return e===null?EI(t):e}function EI(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function DI(){let t=Y.lFrame;return Y.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var bI=DI;function Wh(){let t=DI();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function yx(t){return(Y.lFrame.contextLView=tx(t,Y.lFrame.contextLView))[Ut]}function mn(){return Y.lFrame.selectedIndex}function Fr(t){Y.lFrame.selectedIndex=t}function vu(){let t=Y.lFrame;return fI(t.tView,t.selectedIndex)}function l$(){Y.lFrame.currentNamespace=lI}function d$(){_x()}function _x(){Y.lFrame.currentNamespace=null}function vx(){return Y.lFrame.currentNamespace}var TI=!0;function wu(){return TI}function Iu(t){TI=t}function wx(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=aI(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Eu(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:f}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),f!=null&&(t.destroyHooks??=[]).push(n,f)}}function Oc(t,e,n){CI(t,e,3,n)}function kc(t,e,n,r){(t[q]&3)===n&&CI(t,e,n,r)}function If(t,e){let n=t[q];(n&3)===e&&(n&=16383,n+=1,t[q]=n)}function CI(t,e,n,r){let i=r!==void 0?t[Li]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[Li]+=65536),(a<o||o==-1)&&(Ix(t,n,e,u),t[Li]=(t[Li]&4294901760)+u+2),u++}function Yv(t,e){Xt(4,t,e);let n=ue(null);try{e.call(t)}finally{ue(n),Xt(5,t,e)}}function Ix(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[q]>>14<t[Li]>>16&&(t[q]&3)===e&&(t[q]+=16384,Yv(a,o)):Yv(a,o)}var $i=-1,Vr=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function Ex(t){return t instanceof Vr}function Dx(t){return(t.flags&8)!==0}function bx(t){return(t.flags&16)!==0}function SI(t){return t!==$i}function Gc(t){return t&32767}function Tx(t){return t>>16}function Wc(t,e){let n=Tx(t),r=e;for(;n>0;)r=r[Yi],n--;return r}var zf=!0;function Kc(t){let e=zf;return zf=t,e}var Cx=256,AI=Cx-1,xI=5,Sx=0,en={};function Ax(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(ys)&&(r=n[ys]),r==null&&(r=n[ys]=Sx++);let i=r&AI,o=1<<i;e.data[t+(i>>xI)]|=o}function Qc(t,e){let n=MI(t,e);if(n!==-1)return n;let r=e[ee];r.firstCreatePass&&(t.injectorIndex=e.length,Ef(r.data,t),Ef(e,null),Ef(r.blueprint,null));let i=Kh(t,e),o=t.injectorIndex;if(SI(i)){let s=Gc(i),a=Wc(i,e),u=a[ee].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Ef(t,e){t.push(0,0,0,0,0,0,0,0,e)}function MI(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Kh(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=kI(i),r===null)return $i;if(n++,i=i[Yi],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return $i}function Gf(t,e,n){Ax(t,e,n)}function xx(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if($w(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function NI(t,e,n){if(n&oe.Optional||t!==void 0)return t;kh(e,"NodeInjector")}function RI(t,e,n,r){if(n&oe.Optional&&r===void 0&&(r=null),!(n&(oe.Self|oe.Host))){let i=t[zi],o=mt(void 0);try{return i?i.get(e,r,n&oe.Optional):Fw(e,r,n&oe.Optional)}finally{mt(o)}}return NI(r,e,n)}function PI(t,e,n,r=oe.Default,i){if(t!==null){if(e[q]&2048&&!(r&oe.Self)){let s=Px(t,e,n,r,en);if(s!==en)return s}let o=OI(t,e,n,r,en);if(o!==en)return o}return RI(e,n,r,i)}function OI(t,e,n,r,i){let o=Nx(n);if(typeof o=="function"){if(!wI(e,t,r))return r&oe.Host?NI(i,n,r):RI(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&oe.Optional))kh(n);else return s}finally{bI()}}else if(typeof o=="number"){let s=null,a=MI(t,e),u=$i,l=r&oe.Host?e[nn][Ht]:null;for((a===-1||r&oe.SkipSelf)&&(u=a===-1?Kh(t,e):e[a+8],u===$i||!Zv(r,!1)?a=-1:(s=e[ee],a=Gc(u),e=Wc(u,e)));a!==-1;){let f=e[ee];if(Jv(o,a,f.data)){let p=Mx(a,e,n,s,r,l);if(p!==en)return p}u=e[a+8],u!==$i&&Zv(r,e[ee].data[a+8]===l)&&Jv(o,a,e)?(s=f,a=Gc(u),e=Wc(u,e)):a=-1}}return i}function Mx(t,e,n,r,i,o){let s=e[ee],a=s.data[t+8],u=r==null?pu(a)&&zf:r!=s&&(a.type&3)!==0,l=i&oe.Host&&o===a,f=Fc(a,s,n,u,l);return f!==null?Lr(e,s,f,a):en}function Fc(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,f=o>>20,p=r?a:a+f,m=i?a+f:l;for(let y=p;y<m;y++){let T=s[y];if(y<u&&n===T||y>=u&&T.type===n)return y}if(i){let y=s[u];if(y&&Wn(y)&&y.type===n)return u}return null}function Lr(t,e,n,r){let i=t[n],o=e.data;if(Ex(i)){let s=i;s.resolving&&XS(ZS(o[n]));let a=Kc(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?mt(s.injectImpl):null,f=wI(t,r,oe.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&wx(n,o[n],e)}finally{l!==null&&mt(l),Kc(a),s.resolving=!1,bI()}}return i}function Nx(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(ys)?t[ys]:void 0;return typeof e=="number"?e>=0?e&AI:Rx:e}function Jv(t,e,n){let r=1<<t;return!!(n[e+(t>>xI)]&r)}function Zv(t,e){return!(t&oe.Self)&&!(t&oe.Host&&e)}var Rr=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return PI(this._tNode,this._lView,e,lu(r),n)}};function Rx(){return new Rr(Xe(),K())}function f$(t){return As(()=>{let e=t.prototype.constructor,n=e[jc]||Wf(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[jc]||Wf(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Wf(t){return Mw(t)?()=>{let e=Wf(st(t));return e&&e()}:Pr(t)}function Px(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[q]&2048&&!(s[q]&512);){let a=OI(o,s,n,r|oe.Self,en);if(a!==en)return a;let u=o.parent;if(!u){let l=s[rI];if(l){let f=l.get(n,en,r);if(f!==en)return f}u=kI(s),s=s[Yi]}o=u}return i}function kI(t){let e=t[ee],n=e.type;return n===2?e.declTNode:n===1?t[Ht]:null}function Ox(t){return xx(Xe(),t)}function Xv(t,e=null,n=null,r){let i=FI(t,e,n,r);return i.resolveInjectorInitializers(),i}function FI(t,e=null,n=null,r,i=new Set){let o=[n||yt,RA(t)];return r=r||(typeof t=="object"?void 0:at(t)),new Is(o,e||jh(),r||null,i)}var Ji=(()=>{class t{static{this.THROW_IF_NOT_FOUND=_s}static{this.NULL=new Hc}static create(n,r){if(Array.isArray(n))return Xv({name:""},r,n,"");{let i=n.name??"";return Xv({name:i},n.parent,n.providers,i)}}static{this.\u0275prov=we({token:t,providedIn:"any",factory:()=>We(jw)})}static{this.__NG_ELEMENT_ID__=-1}}return t})();var kx="ngOriginalError";function Df(t){return t[kx]}var Kn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Df(e);for(;n&&Df(n);)n=Df(n);return n||null}},VI=new me("",{providedIn:"root",factory:()=>de(Kn).handleError.bind(void 0)}),Du=(()=>{class t{static{this.__NG_ELEMENT_ID__=Fx}static{this.__NG_ENV_ID__=n=>n}}return t})(),Kf=class extends Du{constructor(e){super(),this._lView=e}onDestroy(e){return pI(this._lView,e),()=>nx(this._lView,e)}};function Fx(){return new Kf(K())}function Vx(){return Zi(Xe(),K())}function Zi(t,e){return new qr(Rt(t,e))}var qr=(()=>{class t{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=Vx}}return t})();function Lx(t){return t instanceof qr?t.nativeElement:t}var Qf=class extends Bn{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,tI()&&(this.destroyRef=de(Du,{optional:!0})??void 0)}emit(e){let n=ue(null);try{super.next(e)}finally{ue(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=bf(o),i&&(i=bf(i)),s&&(s=bf(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Le&&e.add(a),a}};function bf(t){return e=>{setTimeout(t,void 0,e)}}var Mr=Qf;function jx(){return this._results[Symbol.iterator]()}var Yf=class t{get changes(){return this._changes??=new Mr}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=jx)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=fA(e);(this._changesDetected=!dA(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function LI(t){return(t.flags&128)===128}var jI=new Map,Bx=0;function Ux(){return Bx++}function $x(t){jI.set(t[hu],t)}function Hx(t){jI.delete(t[hu])}var ew="__ngContext__";function Qn(t,e){Nr(e)?(t[ew]=e[hu],$x(e)):t[ew]=e}function BI(t){return $I(t[Ds])}function UI(t){return $I(t[Bt])}function $I(t){for(;t!==null&&!gn(t);)t=t[Bt];return t}var Jf;function h$(t){Jf=t}function HI(){if(Jf!==void 0)return Jf;if(typeof document<"u")return document;throw new le(210,!1)}var p$=new me("",{providedIn:"root",factory:()=>qx}),qx="ng",zx=new me(""),Qh=new me("",{providedIn:"platform",factory:()=>"unknown"});var g$=new me(""),m$=new me("",{providedIn:"root",factory:()=>HI().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Gx="h",Wx="b";var Kx=()=>null;function Yh(t,e,n=!1){return Kx(t,e,n)}var qI=!1,Qx=new me("",{providedIn:"root",factory:()=>qI});var Sc;function Yx(){if(Sc===void 0&&(Sc=null,Mt.trustedTypes))try{Sc=Mt.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Sc}function bu(t){return Yx()?.createHTML(t)||t}var Ac;function zI(){if(Ac===void 0&&(Ac=null,Mt.trustedTypes))try{Ac=Mt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Ac}function tw(t){return zI()?.createHTML(t)||t}function nw(t){return zI()?.createScriptURL(t)||t}var Yc=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Cw})`}};function Xi(t){return t instanceof Yc?t.changingThisBreaksApplicationSecurity:t}function Jh(t,e){let n=Jx(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Cw})`)}return n===e}function Jx(t){return t instanceof Yc&&t.getTypeName()||null}function Zx(t){let e=new Xf(t);return Xx()?new Zf(e):e}var Zf=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let n=new window.DOMParser().parseFromString(bu(e),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}},Xf=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let n=this.inertDocument.createElement("template");return n.innerHTML=bu(e),n}};function Xx(){try{return!!new window.DOMParser().parseFromString(bu(""),"text/html")}catch{return!1}}var eM=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function GI(t){return t=String(t),t.match(eM)?t:"unsafe:"+t}function yn(t){let e={};for(let n of t.split(","))e[n]=!0;return e}function Ns(...t){let e={};for(let n of t)for(let r in n)n.hasOwnProperty(r)&&(e[r]=!0);return e}var WI=yn("area,br,col,hr,img,wbr"),KI=yn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),QI=yn("rp,rt"),tM=Ns(QI,KI),nM=Ns(KI,yn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),rM=Ns(QI,yn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),rw=Ns(WI,nM,rM,tM),YI=yn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),iM=yn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),oM=yn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),sM=Ns(YI,iM,oM),aM=yn("script,style,template"),eh=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,r=!0,i=[];for(;n;){if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild){i.push(n),n=lM(n);continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let o=uM(n);if(o){n=o;break}n=i.pop()}}return this.buf.join("")}startElement(e){let n=iw(e).toLowerCase();if(!rw.hasOwnProperty(n))return this.sanitizedSomething=!0,!aM.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let r=e.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),s=o.name,a=s.toLowerCase();if(!sM.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let u=o.value;YI[a]&&(u=GI(u)),this.buf.push(" ",s,'="',ow(u),'"')}return this.buf.push(">"),!0}endElement(e){let n=iw(e).toLowerCase();rw.hasOwnProperty(n)&&!WI.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(ow(e))}};function cM(t,e){return(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function uM(t){let e=t.nextSibling;if(e&&t!==e.previousSibling)throw JI(e);return e}function lM(t){let e=t.firstChild;if(e&&cM(t,e))throw JI(e);return e}function iw(t){let e=t.nodeName;return typeof e=="string"?e:"FORM"}function JI(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}var dM=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,fM=/([^\#-~ |!])/g;function ow(t){return t.replace(/&/g,"&amp;").replace(dM,function(e){let n=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((n-55296)*1024+(r-56320)+65536)+";"}).replace(fM,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var xc;function hM(t,e){let n=null;try{xc=xc||Zx(t);let r=e?String(e):"";n=xc.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=xc.getInertBodyElement(r)}while(r!==o);let a=new eh().sanitizeChildren(sw(n)||n);return bu(a)}finally{if(n){let r=sw(n)||n;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function sw(t){return"content"in t&&pM(t)?t.content:null}function pM(t){return t.nodeType===Node.ELEMENT_NODE&&t.nodeName==="TEMPLATE"}var Tu=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Tu||{});function y$(t){let e=Zh();return e?tw(e.sanitize(Tu.HTML,t)||""):Jh(t,"HTML")?tw(Xi(t)):hM(HI(),tn(t))}function gM(t){let e=Zh();return e?e.sanitize(Tu.URL,t)||"":Jh(t,"URL")?Xi(t):GI(tn(t))}function mM(t){let e=Zh();if(e)return nw(e.sanitize(Tu.RESOURCE_URL,t)||"");if(Jh(t,"ResourceURL"))return nw(Xi(t));throw new le(904,!1)}function yM(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?mM:gM}function _$(t,e,n){return yM(e,n)(t)}function Zh(){let t=K();return t&&t[$t].sanitizer}var _M=/^>|^->|<!--|-->|--!>|<!-$/g,vM=/(<|>)/g,wM="\u200B$1\u200B";function IM(t){return t.replace(_M,e=>e.replace(vM,wM))}function v$(t){return t.ownerDocument.defaultView}function w$(t){return t.ownerDocument}function ZI(t){return t instanceof Function?t():t}function EM(t){return(t??de(Ji)).get(Qh)==="browser"}var Jc=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Jc||{}),DM;function Xh(t,e){return DM(t,e)}function ji(t,e,n,r,i){if(r!=null){let o,s=!1;gn(r)?o=r:Nr(r)&&(s=!0,r=r[pn]);let a=rn(r);t===0&&n!==null?i==null?rE(e,n,a):Zc(e,n,a,i||null,!0):t===1&&n!==null?Zc(e,n,a,i||null,!0):t===2?UM(e,a,s):t===3&&e.destroyNode(a),o!=null&&HM(e,t,o,n,i)}}function bM(t,e){return t.createText(e)}function TM(t,e,n){t.setValue(e,n)}function CM(t,e){return t.createComment(IM(e))}function XI(t,e,n){return t.createElement(e,n)}function SM(t,e){eE(t,e),e[pn]=null,e[Ht]=null}function AM(t,e,n,r,i,o){r[pn]=i,r[Ht]=e,Su(t,r,n,1,i,o)}function eE(t,e){e[$t].changeDetectionScheduler?.notify(1),Su(t,e,e[Me],2,null,null)}function xM(t){let e=t[Ds];if(!e)return Tf(t[ee],t);for(;e;){let n=null;if(Nr(e))n=e[Ds];else{let r=e[bt];r&&(n=r)}if(!n){for(;e&&!e[Bt]&&e!==t;)Nr(e)&&Tf(e[ee],e),e=e[Qe];e===null&&(e=t),Nr(e)&&Tf(e[ee],e),n=e&&e[Bt]}e=n}}function MM(t,e,n,r){let i=bt+r,o=n.length;r>0&&(n[i-1][Bt]=e),r<o-bt?(e[Bt]=n[i],Lw(n,bt+r,e)):(n.push(e),e[Bt]=null),e[Qe]=n;let s=e[Ms];s!==null&&n!==s&&NM(s,e);let a=e[hn];a!==null&&a.insertView(t),Hf(e),e[q]|=128}function NM(t,e){let n=t[Gi],i=e[Qe][Qe][nn];e[nn]!==i&&(t[q]|=Bh.HasTransplantedViews),n===null?t[Gi]=[e]:n.push(e)}function tE(t,e){let n=t[Gi],r=n.indexOf(e);n.splice(r,1)}function th(t,e){if(t.length<=bt)return;let n=bt+e,r=t[n];if(r){let i=r[Ms];i!==null&&i!==t&&tE(i,r),e>0&&(t[n-1][Bt]=r[Bt]);let o=Uc(t,bt+e);SM(r[ee],r);let s=o[hn];s!==null&&s.detachView(o[ee]),r[Qe]=null,r[Bt]=null,r[q]&=-129}return r}function nE(t,e){if(!(e[q]&256)){let n=e[Me];n.destroyNode&&Su(t,e,n,3,null,null),xM(e)}}function Tf(t,e){if(e[q]&256)return;let n=ue(null);try{e[q]&=-129,e[q]|=256,e[Or]&&yf(e[Or]),PM(t,e),RM(t,e),e[ee].type===1&&e[Me].destroy();let r=e[Ms];if(r!==null&&gn(e[Qe])){r!==e[Qe]&&tE(r,e);let i=e[hn];i!==null&&i.detachView(t)}Hx(e)}finally{ue(n)}}function RM(t,e){let n=t.cleanup,r=e[Es];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[Es]=null);let i=e[Hn];if(i!==null){e[Hn]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function PM(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Vr)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Xt(4,a,u);try{u.call(a)}finally{Xt(5,a,u)}}else{Xt(4,i,o);try{o.call(i)}finally{Xt(5,i,o)}}}}}function OM(t,e,n){return kM(t,e.parent,n)}function kM(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[pn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===vs.None||o===vs.Emulated)return null}return Rt(r,n)}}function Zc(t,e,n,r,i){t.insertBefore(e,n,r,i)}function rE(t,e,n){t.appendChild(e,n)}function aw(t,e,n,r,i){r!==null?Zc(t,e,n,r,i):rE(t,e,n)}function FM(t,e,n,r){t.removeChild(e,n,r)}function ep(t,e){return t.parentNode(e)}function VM(t,e){return t.nextSibling(e)}function LM(t,e,n){return BM(t,e,n)}function jM(t,e,n){return t.type&40?Rt(t,n):null}var BM=jM,cw;function Cu(t,e,n,r){let i=OM(t,r,e),o=e[Me],s=r.parent||e[Ht],a=LM(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)aw(o,i,n[u],a,!1);else aw(o,i,n,a,!1);cw!==void 0&&cw(o,r,e,n,i)}function Vc(t,e){if(e!==null){let n=e.type;if(n&3)return Rt(e,t);if(n&4)return nh(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Vc(t,r);{let i=t[e.index];return gn(i)?nh(-1,i):rn(i)}}else{if(n&32)return Xh(e,t)()||rn(t[e.index]);{let r=iE(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ts(t[nn]);return Vc(i,r)}else return Vc(t,e.next)}}}return null}function iE(t,e){if(e!==null){let r=t[nn][Ht],i=e.projection;return r.projection[i]}return null}function nh(t,e){let n=bt+t+1;if(n<e.length){let r=e[n],i=r[ee].firstChild;if(i!==null)return Vc(r,i)}return e[kr]}function UM(t,e,n){let r=ep(t,e);r&&FM(t,r,e,n)}function tp(t,e,n,r,i,o,s){for(;n!=null;){let a=r[n.index],u=n.type;if(s&&e===0&&(a&&Qn(rn(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)tp(t,e,n.child,r,i,o,!1),ji(e,t,i,a,o);else if(u&32){let l=Xh(n,r),f;for(;f=l();)ji(e,t,i,f,o);ji(e,t,i,a,o)}else u&16?$M(t,e,r,n,i,o):ji(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Su(t,e,n,r,i,o){tp(n,r,t.firstChild,e,i,o,!1)}function $M(t,e,n,r,i,o){let s=n[nn],u=s[Ht].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let f=u[l];ji(e,t,i,f,o)}else{let l=u,f=s[Qe];LI(r)&&(l.flags|=128),tp(t,e,l,f,i,o,!0)}}function HM(t,e,n,r,i){let o=n[kr],s=rn(n);o!==s&&ji(e,t,r,o,i);for(let a=bt;a<n.length;a++){let u=n[a];Su(u[ee],u,t,e,r,o)}}function qM(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Jc.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Jc.Important),t.setStyle(n,r,i,o))}}function zM(t,e,n){t.setAttribute(e,"style",n)}function oE(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function sE(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Lf(t,e,r),i!==null&&oE(t,e,i),o!==null&&zM(t,e,o)}var ct={};function I$(t=1){aE(Ne(),K(),mn()+t,!1)}function aE(t,e,n,r){if(!r)if((e[q]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Oc(e,o,n)}else{let o=t.preOrderHooks;o!==null&&kc(e,o,0,n)}Fr(n)}function je(t,e=oe.Default){let n=K();if(n===null)return We(t,e);let r=Xe();return PI(r,n,st(t),e)}function E$(){let t="invalid";throw new Error(t)}function cE(t,e,n,r,i,o){let s=ue(null);try{let a=null;i&qn.SignalBased&&(a=e[r][Zt]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&qn.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):oI(e,a,r,o)}finally{ue(s)}}function GM(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Fr(~i);else{let o=i,s=n[++r],a=n[++r];hx(s,o);let u=e[o];a(2,u)}}}finally{Fr(-1)}}function Au(t,e,n,r,i,o,s,a,u,l,f){let p=e.blueprint.slice();return p[pn]=i,p[q]=r|4|128|8|64,(l!==null||t&&t[q]&2048)&&(p[q]|=2048),hI(p),p[Qe]=p[Yi]=t,p[Ut]=n,p[$t]=s||t&&t[$t],p[Me]=a||t&&t[Me],p[zi]=u||t&&t[zi]||null,p[Ht]=o,p[hu]=Ux(),p[qc]=f,p[rI]=l,p[nn]=e.type==2?t[nn]:p,p}function Rs(t,e,n,r,i){let o=t.data[e];if(o===null)o=WM(t,e,n,r,i),fx()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=ux();o.injectorIndex=s===null?-1:s.injectorIndex}return Hr(o,!0),o}function WM(t,e,n,r,i){let o=mI(),s=qh(),a=s?o:o&&o.parent,u=t.data[e]=XM(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function uE(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function lE(t,e,n,r,i){let o=mn(),s=r&2;try{Fr(-1),s&&e.length>_t&&aE(t,e,_t,!1),Xt(s?2:0,i),n(r,i)}finally{Fr(o),Xt(s?3:1,i)}}function np(t,e,n){if(Uh(e)){let r=ue(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{ue(r)}}}function rp(t,e,n){gI()&&(oN(t,e,n,Rt(n,e)),(n.flags&64)===64&&hE(t,e,n))}function ip(t,e,n=Rt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function dE(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=op(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function op(t,e,n,r,i,o,s,a,u,l,f){let p=_t+r,m=p+i,y=KM(p,m),T=typeof l=="function"?l():l;return y[ee]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:T,incompleteFirstPass:!1,ssrId:f}}function KM(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:ct);return n}function QM(t,e,n,r){let o=r.get(Qx,qI)||n===vs.ShadowDom,s=t.selectRootElement(e,o);return YM(s),s}function YM(t){JM(t)}var JM=()=>null;function ZM(t,e,n,r){let i=mE(e);i.push(n),t.firstCreatePass&&yE(t).push(r,i.length-1)}function XM(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return sx()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function uw(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=qn.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}t===0?lw(r,n,l,a,u):lw(r,n,l,a)}return r}function lw(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function eN(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],u=null,l=null;for(let f=r;f<i;f++){let p=o[f],m=n?n.get(p):null,y=m?m.inputs:null,T=m?m.outputs:null;u=uw(0,p.inputs,f,u,y),l=uw(1,p.outputs,f,l,T);let M=u!==null&&s!==null&&!Vh(e)?mN(u,f,s):null;a.push(M)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function tN(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function sp(t,e,n,r,i,o,s,a){let u=Rt(e,n),l=e.inputs,f;!a&&l!=null&&(f=l[r])?(cp(t,n,f,r,i),pu(e)&&nN(n,e.index)):e.type&3?(r=tN(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function nN(t,e){let n=Jn(e,t);n[q]&16||(n[q]|=64)}function ap(t,e,n,r){if(gI()){let i=r===null?null:{"":-1},o=aN(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&fE(t,e,n,s,i,a),i&&cN(n,r,i)}n.mergedAttrs=ws(n.mergedAttrs,n.attrs)}function fE(t,e,n,r,i,o){for(let l=0;l<r.length;l++)Gf(Qc(n,e),t,r[l].type);lN(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let f=r[l];f.providersResolver&&f.providersResolver(f)}let s=!1,a=!1,u=uE(t,e,r.length,null);for(let l=0;l<r.length;l++){let f=r[l];n.mergedAttrs=ws(n.mergedAttrs,f.hostAttrs),dN(t,n,e,u,f),uN(u,f,i),f.contentQueries!==null&&(n.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(n.flags|=64);let p=f.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}eN(t,n,o)}function rN(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;iN(s)!=a&&s.push(a),s.push(n,r,o)}}function iN(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function oN(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;pu(n)&&fN(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Qc(n,e),Qn(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let u=t.data[a],l=Lr(e,t,a,n);if(Qn(l,e),s!==null&&gN(e,a-i,l,u,n,s),Wn(u)){let f=Jn(n.index,e);f[Ut]=Lr(e,t,a,n)}}}function hE(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=px();try{Fr(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];qf(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&sN(u,l)}}finally{Fr(-1),qf(s)}}function sN(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function aN(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(IA(e,s.selectors,!1))if(r||(r=[]),Wn(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;rh(t,e,u)}else r.unshift(s),rh(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function rh(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function cN(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new le(-301,!1);r.push(e[i],o)}}}function uN(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Wn(e)&&(n[""]=t)}}function lN(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function dN(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Pr(i.type,!0)),s=new Vr(o,Wn(i),je);t.blueprint[r]=s,n[r]=s,rN(t,e,r,uE(t,n,i.hostVars,ct),i)}function fN(t,e,n){let r=Rt(e,t),i=dE(n),o=t[$t].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=xu(t,Au(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function hN(t,e,n,r,i,o){let s=Rt(t,e);pN(e[Me],s,o,t.value,n,r,i)}function pN(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?tn(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function gN(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],f=s[a++],p=s[a++];cE(r,n,u,l,f,p)}}function mN(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function pE(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function gE(t,e){let n=t.contentQueries;if(n!==null){let r=ue(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];zh(o),a.contentQueries(2,e[s],s)}}}finally{ue(r)}}}function xu(t,e){return t[Ds]?t[Kv][Bt]=e:t[Ds]=e,t[Kv]=e,e}function ih(t,e,n){zh(0);let r=ue(null);try{e(t,n)}finally{ue(r)}}function mE(t){return t[Es]||(t[Es]=[])}function yE(t){return t.cleanup||(t.cleanup=[])}function _E(t,e){let n=t[zi],r=n?n.get(Kn,null):null;r&&r.handleError(e)}function cp(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],u=n[o++],l=e[s],f=t.data[s];cE(f,l,r,a,u,i)}}function up(t,e,n){let r=dI(e,t);TM(t[Me],r,n)}function yN(t,e){let n=Jn(e,t),r=n[ee];_N(r,n);let i=n[pn];i!==null&&n[qc]===null&&(n[qc]=Yh(i,n[zi])),lp(r,n,n[Ut])}function _N(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function lp(t,e,n){Gh(e);try{let r=t.viewQuery;r!==null&&ih(1,r,n);let i=t.template;i!==null&&lE(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[hn]?.finishViewCreation(t),t.staticContentQueries&&gE(t,e),t.staticViewQueries&&ih(2,t.viewQuery,n);let o=t.components;o!==null&&vN(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[q]&=-5,Wh()}}function vN(t,e){for(let n=0;n<e.length;n++)yN(t,e[n])}function wN(t,e,n,r){let i=ue(null);try{let o=e.tView,a=t[q]&4096?4096:16,u=Au(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Ms]=l;let f=t[hn];return f!==null&&(u[hn]=f.createEmbeddedView(o)),lp(o,u,n),u}finally{ue(i)}}function dw(t,e){return!e||e.firstChild===null||LI(t)}function IN(t,e,n,r=!0){let i=e[ee];if(MM(i,e,t,n),r){let s=nh(n,t),a=e[Me],u=ep(a,t[kr]);u!==null&&AM(i,t[Ht],a,e,u,s)}let o=e[qc];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Xc(t,e,n,r,i=!1){for(;n!==null;){let o=e[n.index];o!==null&&r.push(rn(o)),gn(o)&&EN(o,r);let s=n.type;if(s&8)Xc(t,e,n.child,r);else if(s&32){let a=Xh(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=iE(e,n);if(Array.isArray(a))r.push(...a);else{let u=Ts(e[nn]);Xc(u[ee],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function EN(t,e){for(let n=bt;n<t.length;n++){let r=t[n],i=r[ee].firstChild;i!==null&&Xc(r[ee],r,i,e)}t[kr]!==t[pn]&&e.push(t[kr])}var vE=[];function DN(t){return t[Or]??bN(t)}function bN(t){let e=vE.pop()??Object.create(CN);return e.lView=t,e}function TN(t){t.lView[Or]!==t&&(t.lView=null,vE.push(t))}var CN=Re(re({},ms),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{bs(t.lView)},consumerOnSignalRead(){this.lView[Or]=this}}),wE=100;function IE(t,e=!0,n=0){let r=t[$t],i=r.rendererFactory,o=!1;o||i.begin?.();try{SN(t,n)}catch(s){throw e&&_E(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function SN(t,e){oh(t,e);let n=0;for(;Hh(t);){if(n===wE)throw new le(103,!1);n++,oh(t,1)}}function AN(t,e,n,r){let i=e[q];if((i&256)===256)return;let o=!1;!o&&e[$t].inlineEffectRunner?.flush(),Gh(e);let s=null,a=null;!o&&xN(t)&&(a=DN(e),s=Ec(a));try{hI(e),dx(t.bindingStartIndex),n!==null&&lE(t,e,n,2,r);let u=(i&3)===3;if(!o)if(u){let p=t.preOrderCheckHooks;p!==null&&Oc(e,p,null)}else{let p=t.preOrderHooks;p!==null&&kc(e,p,0,null),If(e,0)}if(MN(e),EE(e,0),t.contentQueries!==null&&gE(t,e),!o)if(u){let p=t.contentCheckHooks;p!==null&&Oc(e,p)}else{let p=t.contentHooks;p!==null&&kc(e,p,1),If(e,1)}GM(t,e);let l=t.components;l!==null&&bE(e,l,0);let f=t.viewQuery;if(f!==null&&ih(2,f,r),!o)if(u){let p=t.viewCheckHooks;p!==null&&Oc(e,p)}else{let p=t.viewHooks;p!==null&&kc(e,p,2),If(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Pc]){for(let p of e[Pc])p();e[Pc]=null}o||(e[q]&=-73)}catch(u){throw bs(e),u}finally{a!==null&&(Dc(a,s),TN(a)),Wh()}}function xN(t){return t.type!==2}function EE(t,e){for(let n=BI(t);n!==null;n=UI(n))for(let r=bt;r<n.length;r++){let i=n[r];DE(i,e)}}function MN(t){for(let e=BI(t);e!==null;e=UI(e)){if(!(e[q]&Bh.HasTransplantedViews))continue;let n=e[Gi];for(let r=0;r<n.length;r++){let i=n[r],o=i[Qe];ex(i)}}}function NN(t,e,n){let r=Jn(e,t);DE(r,n)}function DE(t,e){$h(t)&&oh(t,e)}function oh(t,e){let r=t[ee],i=t[q],o=t[Or],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&bc(o)),o&&(o.dirty=!1),t[q]&=-9217,s)AN(r,t,r.template,t[Ut]);else if(i&8192){EE(t,1);let a=r.components;a!==null&&bE(t,a,1)}}function bE(t,e,n){for(let r=0;r<e.length;r++)NN(t,e[r],n)}function dp(t){for(t[$t].changeDetectionScheduler?.notify();t;){t[q]|=64;let e=Ts(t);if(zA(t)&&!e)return t;t=e}return null}var jr=class{get rootNodes(){let e=this._lView,n=e[ee];return Xc(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ut]}set context(e){this._lView[Ut]=e}get destroyed(){return(this._lView[q]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Qe];if(gn(e)){let n=e[zc],r=n?n.indexOf(this):-1;r>-1&&(th(e,r),Uc(n,r))}this._attachedToViewContainer=!1}nE(this._lView[ee],this._lView)}onDestroy(e){pI(this._lView,e)}markForCheck(){dp(this._cdRefInjectingView||this._lView)}detach(){this._lView[q]&=-129}reattach(){Hf(this._lView),this._lView[q]|=128}detectChanges(){this._lView[q]|=1024,IE(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new le(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,eE(this._lView[ee],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new le(902,!1);this._appRef=e,Hf(this._lView)}},Br=(()=>{class t{static{this.__NG_ELEMENT_ID__=ON}}return t})(),RN=Br,PN=class extends RN{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=wN(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new jr(i)}};function ON(){return Mu(Xe(),K())}function Mu(t,e){return t.type&4?new PN(e,t,Zi(t,e)):null}var b$=new RegExp(`^(\\d+)*(${Wx}|${Gx})*(.*)`);var kN=()=>null;function fw(t,e){return kN(t,e)}var eu=class{},sh=class{},tu=class{};function FN(t){let e=Error(`No component factory found for ${at(t)}.`);return e[VN]=t,e}var VN="ngComponent";var ah=class{resolveComponentFactory(e){throw FN(e)}},Nu=(()=>{class t{static{this.NULL=new ah}}return t})(),ch=class{},fp=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>LN()}}return t})();function LN(){let t=K(),e=Xe(),n=Jn(e.index,t);return(Nr(n)?n:t)[Me]}var jN=(()=>{class t{static{this.\u0275prov=we({token:t,providedIn:"root",factory:()=>null})}}return t})(),Cf={};var hw=new Set;function eo(t){hw.has(t)||(hw.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function pw(...t){}function BN(){let t=typeof Mt.requestAnimationFrame=="function",e=Mt[t?"requestAnimationFrame":"setTimeout"],n=Mt[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var Nt=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Mr(!1),this.onMicrotaskEmpty=new Mr(!1),this.onStable=new Mr(!1),this.onError=new Mr(!1),typeof Zone>"u")throw new le(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=BN().nativeRequestAnimationFrame,HN(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new le(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new le(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,UN,pw,pw);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},UN={};function hp(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function $N(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Mt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,uh(t),t.isCheckStableRunning=!0,hp(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),uh(t))}function HN(t){let e=()=>{$N(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(qN(a))return n.invokeTask(i,o,s,a);try{return gw(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),mw(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return gw(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),mw(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,uh(t),hp(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function uh(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function gw(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function mw(t){t._nesting--,hp(t)}function qN(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var Bi=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Bi||{}),zN={destroy(){}};function GN(t,e){!e&&nI(GN);let n=e?.injector??de(Ji);if(!EM(n))return zN;eo("NgAfterNextRender");let r=n.get(pp),i=r.handler??=new dh,o=e?.phase??Bi.MixedReadWrite,s=()=>{i.unregister(u),a()},a=n.get(Du).onDestroy(s),u=HA(n,()=>new lh(o,()=>{s(),t()}));return i.register(u),{destroy:s}}var lh=class{constructor(e,n){this.phase=e,this.callbackFn=n,this.zone=de(Nt),this.errorHandler=de(Kn,{optional:!0}),de(eu,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},dh=class{constructor(){this.executingCallbacks=!1,this.buckets={[Bi.EarlyRead]:new Set,[Bi.Write]:new Set,[Bi.MixedReadWrite]:new Set,[Bi.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},pp=(()=>{class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let n=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of n)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=we({token:t,providedIn:"root",factory:()=>new t})}}return t})();function nu(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Of(i,a);else if(o==2){let u=a,l=e[++s];r=Of(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var ru=class extends Nu{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=zn(e);return new Ki(n,this.ngModule)}};function yw(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function WN(t){let e=t.toLowerCase();return e==="svg"?lI:e==="math"?QA:null}var fh=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=lu(r);let i=this.injector.get(e,Cf,r);return i!==Cf||n===Cf?i:this.parentInjector.get(e,n,r)}},Ki=class extends tu{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=yw(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return yw(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=TA(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=ue(null);try{i=i||this.ngModule;let s=i instanceof Gn?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new fh(e,s):e,u=a.get(ch,null);if(u===null)throw new le(407,!1);let l=a.get(jN,null),f=a.get(pp,null),p=a.get(eu,null),m={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:f,changeDetectionScheduler:p},y=u.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",M=r?QM(y,r,this.componentDef.encapsulation,a):XI(y,T,WN(T)),N=512;this.componentDef.signals?N|=4096:this.componentDef.onPush||(N|=16);let V=null;M!==null&&(V=Yh(M,a,!0));let B=op(0,null,null,1,0,null,null,null,null,null,null),L=Au(null,B,null,N,null,null,m,y,a,null,V);Gh(L);let Q,J;try{let G=this.componentDef,I,_=null;G.findHostDirectiveDefs?(I=[],_=new Map,G.findHostDirectiveDefs(G,I,_),I.push(G)):I=[G];let w=KN(L,M),D=QN(w,M,G,I,L,m,y);J=fI(B,_t),M&&ZN(y,G,M,r),n!==void 0&&XN(J,this.ngContentSelectors,n),Q=JN(D,G,I,_,L,[e1]),lp(B,L,null)}finally{Wh()}return new hh(this.componentType,Q,Zi(J,L),L,J)}finally{ue(o)}}},hh=class extends sh{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new jr(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;cp(o[ee],o,i,e,n),this.previousInputValues.set(e,n);let s=Jn(this._tNode.index,o);dp(s)}}get injector(){return new Rr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function KN(t,e){let n=t[ee],r=_t;return t[r]=e,Rs(n,r,2,"#host",null)}function QN(t,e,n,r,i,o,s){let a=i[ee];YN(r,t,e,s);let u=null;e!==null&&(u=Yh(e,i[zi]));let l=o.rendererFactory.createRenderer(e,n),f=16;n.signals?f=4096:n.onPush&&(f=64);let p=Au(i,dE(n),null,f,i[t.index],t,o,l,null,null,u);return a.firstCreatePass&&rh(a,t,r.length-1),xu(i,p),i[t.index]=p}function YN(t,e,n,r){for(let i of t)e.mergedAttrs=ws(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(nu(e,e.mergedAttrs,!0),n!==null&&sE(r,n,e))}function JN(t,e,n,r,i,o){let s=Xe(),a=i[ee],u=Rt(s,i);fE(a,i,s,n,null,r);for(let f=0;f<n.length;f++){let p=s.directiveStart+f,m=Lr(i,a,p,s);Qn(m,i)}hE(a,i,s),u&&Qn(u,i);let l=Lr(i,a,s.directiveStart+s.componentOffset,s);if(t[Ut]=i[Ut]=l,o!==null)for(let f of o)f(l,e);return np(a,s,i),l}function ZN(t,e,n,r){if(r)Lf(t,n,["ng-version","17.3.12"]);else{let{attrs:i,classes:o}=CA(e.selectors[0]);i&&Lf(t,n,i),o&&o.length>0&&oE(t,n,o.join(" "))}}function XN(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function e1(){let t=Xe();Eu(K()[ee],t)}var to=(()=>{class t{static{this.__NG_ELEMENT_ID__=t1}}return t})();function t1(){let t=Xe();return CE(t,K())}var n1=to,TE=class extends n1{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Zi(this._hostTNode,this._hostLView)}get injector(){return new Rr(this._hostTNode,this._hostLView)}get parentInjector(){let e=Kh(this._hostTNode,this._hostLView);if(SI(e)){let n=Wc(e,this._hostLView),r=Gc(e),i=n[ee].data[r+8];return new Rr(i,n)}else return new Rr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=_w(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-bt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=fw(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,dw(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!qA(e),a;if(s)a=n;else{let T=n||{};a=T.index,r=T.injector,i=T.projectableNodes,o=T.environmentInjector||T.ngModuleRef}let u=s?e:new Ki(zn(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let M=(s?l:this.parentInjector).get(Gn,null);M&&(o=M)}let f=zn(u.componentType??{}),p=fw(this._lContainer,f?.id??null),m=p?.firstChild??null,y=u.create(l,i,m,o);return this.insertImpl(y.hostView,a,dw(this._hostTNode,p)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(XA(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Qe],l=new TE(u,u[Ht],u[Qe]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return IN(s,i,o,r),e.attachToViewContainerRef(),Lw(Sf(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=_w(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=th(this._lContainer,n);r&&(Uc(Sf(this._lContainer),n),nE(r[ee],r))}detach(e){let n=this._adjustIndex(e,-1),r=th(this._lContainer,n);return r&&Uc(Sf(this._lContainer),n)!=null?new jr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function _w(t){return t[zc]}function Sf(t){return t[zc]||(t[zc]=[])}function CE(t,e){let n,r=e[t.index];return gn(r)?n=r:(n=pE(r,e,null,t),e[t.index]=n,xu(e,n)),i1(n,e,t,r),new TE(n,t,e)}function r1(t,e){let n=t[Me],r=n.createComment(""),i=Rt(e,t),o=ep(n,i);return Zc(n,o,r,VM(n,i),!1),r}var i1=a1,o1=()=>!1;function s1(t,e,n){return o1(t,e,n)}function a1(t,e,n,r){if(t[kr])return;let i;n.type&8?i=rn(r):i=r1(e,n),t[kr]=i}var ph=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},gh=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)gp(e,n).matches!==null&&this.queries[n].setDirty()}},iu=class{constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=g1(e):this.predicate=e}},mh=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},yh=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,c1(n,o)),this.matchTNodeWithReadOption(e,n,Fc(n,e,o,!1,!1))}else r===Br?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Fc(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===qr||i===to||i===Br&&n.type&4)this.addMatch(n.index,-2);else{let o=Fc(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function c1(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function u1(t,e){return t.type&11?Zi(t,e):t.type&4?Mu(t,e):null}function l1(t,e,n,r){return n===-1?u1(e,t):n===-2?d1(t,e,r):Lr(t,t[ee],n,e)}function d1(t,e,n){if(n===qr)return Zi(e,t);if(n===Br)return Mu(e,t);if(n===to)return CE(e,t)}function SE(t,e,n,r){let i=e[hn].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let f=o[l];a.push(l1(e,f,s[u+1],n.metadata.read))}}i.matches=a}return i.matches}function _h(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=SE(t,e,i,n);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],f=e[-u];for(let p=bt;p<f.length;p++){let m=f[p];m[Ms]===m[Qe]&&_h(m[ee],m,l,r)}if(f[Gi]!==null){let p=f[Gi];for(let m=0;m<p.length;m++){let y=p[m];_h(y[ee],y,l,r)}}}}}return r}function f1(t,e){return t[hn].queries[e].queryList}function AE(t,e,n){let r=new Yf((n&4)===4);return ZM(t,e,r,r.destroy),(e[hn]??=new gh).queries.push(new ph(r))-1}function h1(t,e,n){let r=Ne();return r.firstCreatePass&&(xE(r,new iu(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),AE(r,K(),e)}function p1(t,e,n,r){let i=Ne();if(i.firstCreatePass){let o=Xe();xE(i,new iu(e,n,r),o.index),m1(i,t),(n&2)===2&&(i.staticContentQueries=!0)}return AE(i,K(),n)}function g1(t){return t.split(",").map(e=>e.trim())}function xE(t,e,n){t.queries===null&&(t.queries=new mh),t.queries.track(new yh(e,n))}function m1(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function gp(t,e){return t.queries.getByIndex(e)}function y1(t,e){let n=t[ee],r=gp(n,e);return r.crossesNgTemplate?_h(n,t,e,[]):SE(n,t,r,e)}function _1(t){return typeof t=="function"&&t[Zt]!==void 0}function mp(t,e){eo("NgSignals");let n=kv(t),r=n[Zt];return e?.equal&&(r.equal=e.equal),n.set=i=>_f(r,i),n.update=i=>Fv(r,i),n.asReadonly=v1.bind(n),n}function v1(){let t=this[Zt];if(t.readonlyFn===void 0){let e=()=>this();e[Zt]=t,t.readonlyFn=e}return t.readonlyFn}function ME(t){return _1(t)&&typeof t.set=="function"}function w1(t){return Object.getPrototypeOf(t.prototype).constructor}function I1(t){let e=w1(t.type),n=!0,r=[t];for(;e;){let i;if(Wn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new le(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Mc(t.inputs),s.inputTransforms=Mc(t.inputTransforms),s.declaredInputs=Mc(t.declaredInputs),s.outputs=Mc(t.outputs);let a=i.hostBindings;a&&C1(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&b1(t,u),l&&T1(t,l),E1(t,i),qS(t.outputs,i.outputs),Wn(i)&&i.data.animation){let f=t.data;f.animation=(f.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===I1&&(n=!1)}}e=Object.getPrototypeOf(e)}D1(r)}function E1(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function D1(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ws(i.hostAttrs,n=ws(n,i.hostAttrs))}}function Mc(t){return t===Hi?{}:t===yt?[]:t}function b1(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function T1(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function C1(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function S1(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var Yn=class{},vh=class{};var wh=class extends Yn{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ru(this);let i=Ww(e);this._bootstrapComponents=ZI(i.bootstrap),this._r3Injector=FI(e,n,[{provide:Yn,useValue:this},{provide:Nu,useValue:this.componentFactoryResolver},...r],at(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Ih=class extends vh{constructor(e){super(),this.moduleType=e}create(e){return new wh(this.moduleType,e,[])}};var ou=class extends Yn{constructor(e){super(),this.componentFactoryResolver=new ru(this),this.instance=null;let n=new Is([...e.providers,{provide:Yn,useValue:this},{provide:Nu,useValue:this.componentFactoryResolver}],e.parent||jh(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function A1(t,e,n=null){return new ou({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var yp=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Un(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function NE(t){return M1(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function x1(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function M1(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function Ps(t,e,n){return t[e]=n}function N1(t,e){return t[e]}function on(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Cs(t,e,n,r){let i=on(t,e,n);return on(t,e+1,r)||i}function RE(t,e,n,r,i){let o=Cs(t,e,n,r);return on(t,e+2,i)||o}function R1(t,e,n,r,i,o){let s=Cs(t,e,n,r);return Cs(t,e+2,i,o)||s}function P1(t){return(t.flags&32)===32}function O1(t,e,n,r,i,o,s,a,u){let l=e.consts,f=Rs(e,t,4,s||null,Wi(l,a));ap(e,n,f,Wi(l,u)),Eu(e,f);let p=f.tView=op(2,f,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,f),p.queries=e.queries.embeddedTView(f)),f}function k1(t,e,n,r,i,o,s,a){let u=K(),l=Ne(),f=t+_t,p=l.firstCreatePass?O1(f,l,u,e,n,r,i,o,s):l.data[f];Hr(p,!1);let m=F1(l,u,p,t);wu()&&Cu(l,u,m,p),Qn(m,u);let y=pE(m,u,m,p);return u[f]=y,xu(u,y),s1(y,p,u),gu(p)&&rp(l,u,p),s!=null&&ip(u,p,a),k1}var F1=V1;function V1(t,e,n,r){return Iu(!0),e[Me].createComment("")}function L1(t,e,n,r){let i=K(),o=yu();if(on(i,o,e)){let s=Ne(),a=vu();hN(a,i,t,e,n,r)}return L1}function _p(t,e,n,r){return on(t,yu(),n)?e+tn(n)+r:ct}function j1(t,e,n,r,i,o){let s=_I(),a=Cs(t,s,n,i);return _u(2),a?e+tn(n)+r+tn(i)+o:ct}function B1(t,e,n,r,i,o,s,a){let u=_I(),l=RE(t,u,n,i,s);return _u(3),l?e+tn(n)+r+tn(i)+o+tn(s)+a:ct}function Nc(t,e){return t<<17|e<<2}function Ur(t){return t>>17&32767}function U1(t){return(t&2)==2}function $1(t,e){return t&131071|e<<17}function Eh(t){return t|2}function Qi(t){return(t&131068)>>2}function Af(t,e){return t&-131069|e<<2}function H1(t){return(t&1)===1}function Dh(t){return t|1}function q1(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ur(s),u=Qi(s);t[r]=n;let l=!1,f;if(Array.isArray(n)){let p=n;f=p[1],(f===null||xs(p,f)>0)&&(l=!0)}else f=n;if(i)if(u!==0){let m=Ur(t[a+1]);t[r+1]=Nc(m,a),m!==0&&(t[m+1]=Af(t[m+1],r)),t[a+1]=$1(t[a+1],r)}else t[r+1]=Nc(a,0),a!==0&&(t[a+1]=Af(t[a+1],r)),a=r;else t[r+1]=Nc(u,0),a===0?a=r:t[u+1]=Af(t[u+1],r),u=r;l&&(t[r+1]=Eh(t[r+1])),vw(t,f,r,!0),vw(t,f,r,!1),z1(e,f,t,r,o),s=Nc(a,u),o?e.classBindings=s:e.styleBindings=s}function z1(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&xs(o,e)>=0&&(n[r+1]=Dh(n[r+1]))}function vw(t,e,n,r){let i=t[n+1],o=e===null,s=r?Ur(i):Qi(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];G1(u,e)&&(a=!0,t[s+1]=r?Dh(l):Eh(l)),s=r?Ur(l):Qi(l)}a&&(t[n+1]=r?Eh(i):Dh(i))}function G1(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?xs(t,e)>=0:!1}var jt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function W1(t){return t.substring(jt.key,jt.keyEnd)}function K1(t){return Q1(t),PE(t,OE(t,0,jt.textEnd))}function PE(t,e){let n=jt.textEnd;return n===e?-1:(e=jt.keyEnd=Y1(t,jt.key=e,n),OE(t,e,n))}function Q1(t){jt.key=0,jt.keyEnd=0,jt.value=0,jt.valueEnd=0,jt.textEnd=t.length}function OE(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function Y1(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function J1(t,e,n){let r=K(),i=yu();if(on(r,i,e)){let o=Ne(),s=vu();sp(o,s,r,t,e,r[Me],n,!1)}return J1}function bh(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";cp(t,n,o[s],s,r)}function kE(t,e,n){return VE(t,e,n,!1),kE}function Z1(t,e){return VE(t,e,null,!0),Z1}function C$(t){LE(iR,FE,t,!0)}function FE(t,e){for(let n=K1(e);n>=0;n=PE(e,n))du(t,W1(e),!0)}function VE(t,e,n,r){let i=K(),o=Ne(),s=_u(2);if(o.firstUpdatePass&&BE(o,t,s,r),e!==ct&&on(i,s,e)){let a=o.data[mn()];UE(o,a,i,i[Me],t,i[s+1]=sR(e,n),r,s)}}function LE(t,e,n,r){let i=Ne(),o=_u(2);i.firstUpdatePass&&BE(i,null,o,r);let s=K();if(n!==ct&&on(s,o,n)){let a=i.data[mn()];if($E(a,r)&&!jE(i,o)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(n=Of(u,n||"")),bh(i,a,s,n,r)}else oR(i,a,s,s[Me],s[o+1],s[o+1]=rR(t,e,n),r,o)}}function jE(t,e){return e>=t.expandoStartIndex}function BE(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[mn()],s=jE(t,n);$E(o,r)&&e===null&&!s&&(e=!1),e=X1(i,o,e,r),q1(i,o,e,n,s,r)}}function X1(t,e,n,r){let i=gx(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=xf(null,t,e,n,r),n=Ss(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=xf(i,t,e,n,r),o===null){let u=eR(t,e,r);u!==void 0&&Array.isArray(u)&&(u=xf(null,t,e,u[1],r),u=Ss(u,e.attrs,r),tR(t,e,r,u))}else o=nR(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function eR(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Qi(r)!==0)return t[Ur(r)]}function tR(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Ur(i)]=r}function nR(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Ss(r,s,n)}return Ss(r,e.attrs,n)}function xf(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Ss(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Ss(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),du(t,s,n?!0:e[++o]))}return t===void 0?null:t}function rR(t,e,n){if(n==null||n==="")return yt;let r=[],i=Xi(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function iR(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&du(t,r,n)}function oR(t,e,n,r,i,o,s,a){i===ct&&(i=yt);let u=0,l=0,f=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;f!==null||p!==null;){let m=u<i.length?i[u+1]:void 0,y=l<o.length?o[l+1]:void 0,T=null,M;f===p?(u+=2,l+=2,m!==y&&(T=p,M=y)):p===null||f!==null&&f<p?(u+=2,T=f):(l+=2,T=p,M=y),T!==null&&UE(t,e,n,r,T,M,s,a),f=u<i.length?i[u]:null,p=l<o.length?o[l]:null}}function UE(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],f=H1(l)?ww(u,e,n,i,Qi(l),s):void 0;if(!su(f)){su(o)||U1(l)&&(o=ww(u,null,n,i,a,s));let p=dI(mn(),n);qM(r,s,p,i,o)}}function ww(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),f=l?u[1]:u,p=f===null,m=n[i+1];m===ct&&(m=p?yt:void 0);let y=p?vf(m,r):f===r?m:void 0;if(l&&!su(y)&&(y=vf(u,r)),su(y)&&(a=y,s))return a;let T=t[i+1];i=s?Ur(T):Qi(T)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=vf(u,r))}return a}function su(t){return t!==void 0}function sR(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=at(Xi(t)))),t}function $E(t,e){return(t.flags&(e?8:16))!==0}function S$(t,e,n){let r=K(),i=_p(r,t,e,n);LE(du,FE,i,!0)}function aR(t,e,n,r,i,o){let s=e.consts,a=Wi(s,i),u=Rs(e,t,2,r,a);return ap(e,n,u,Wi(s,o)),u.attrs!==null&&nu(u,u.attrs,!1),u.mergedAttrs!==null&&nu(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function HE(t,e,n,r){let i=K(),o=Ne(),s=_t+t,a=i[Me],u=o.firstCreatePass?aR(s,o,i,e,n,r):o.data[s],l=uR(o,i,u,a,e,t);i[s]=l;let f=gu(u);return Hr(u,!0),sE(a,l,u),!P1(u)&&wu()&&Cu(o,i,l,u),rx()===0&&Qn(l,i),ix(),f&&(rp(o,i,u),np(o,u,i)),r!==null&&ip(i,u),HE}function qE(){let t=Xe();qh()?yI():(t=t.parent,Hr(t,!1));let e=t;ax(e)&&cx(),ox();let n=Ne();return n.firstCreatePass&&(Eu(n,t),Uh(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&Dx(e)&&bh(n,e,K(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&bx(e)&&bh(n,e,K(),e.stylesWithoutHost,!1),qE}function cR(t,e,n,r){return HE(t,e,n,r),qE(),cR}var uR=(t,e,n,r,i,o)=>(Iu(!0),XI(r,i,vx()));function lR(t,e,n,r,i){let o=e.consts,s=Wi(o,r),a=Rs(e,t,8,"ng-container",s);s!==null&&nu(a,s,!0);let u=Wi(o,i);return ap(e,n,a,u),e.queries!==null&&e.queries.elementStart(e,a),a}function dR(t,e,n){let r=K(),i=Ne(),o=t+_t,s=i.firstCreatePass?lR(o,i,r,e,n):i.data[o];Hr(s,!0);let a=hR(i,r,s,t);return r[o]=a,wu()&&Cu(i,r,a,s),Qn(a,r),gu(s)&&(rp(i,r,s),np(i,s,r)),n!=null&&ip(r,s),dR}function fR(){let t=Xe(),e=Ne();return qh()?yI():(t=t.parent,Hr(t,!1)),e.firstCreatePass&&(Eu(e,t),Uh(t)&&e.queries.elementEnd(t)),fR}var hR=(t,e,n,r)=>(Iu(!0),CM(e[Me],""));function A$(){return K()}var xr=void 0;function pR(t){let e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var gR=["en",[["a","p"],["AM","PM"],xr],[["AM","PM"],xr,xr],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],xr,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],xr,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",xr,"{1} 'at' {0}",xr],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",pR],Mf={};function vt(t){let e=mR(t),n=Iw(e);if(n)return n;let r=e.split("-")[0];if(n=Iw(r),n)return n;if(r==="en")return gR;throw new le(701,!1)}function Iw(t){return t in Mf||(Mf[t]=Mt.ng&&Mt.ng.common&&Mt.ng.common.locales&&Mt.ng.common.locales[t]),Mf[t]}var Ce=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Ce||{});function mR(t){return t.toLowerCase().replace(/_/g,"-")}var au="en-US",yR="USD";var _R=au;function vR(t){typeof t=="string"&&(_R=t.toLowerCase().replace(/_/g,"-"))}function wR(t,e,n,r){let i=K(),o=Ne(),s=Xe();return zE(o,i,i[Me],s,t,e,r),wR}function IR(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Es],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function zE(t,e,n,r,i,o,s){let a=gu(r),l=t.firstCreatePass&&yE(t),f=e[Ut],p=mE(e),m=!0;if(r.type&3||s){let M=Rt(r,e),N=s?s(M):M,V=p.length,B=s?Q=>s(rn(Q[r.index])):r.index,L=null;if(!s&&a&&(L=IR(t,e,i,r.index)),L!==null){let Q=L.__ngLastListenerFn__||L;Q.__ngNextListenerFn__=o,L.__ngLastListenerFn__=o,m=!1}else{o=Dw(r,e,f,o,!1);let Q=n.listen(N,i,o);p.push(o,Q),l&&l.push(i,B,V,V+1)}}else o=Dw(r,e,f,o,!1);let y=r.outputs,T;if(m&&y!==null&&(T=y[i])){let M=T.length;if(M)for(let N=0;N<M;N+=2){let V=T[N],B=T[N+1],J=e[V][B].subscribe(o),G=p.length;p.push(o,J),l&&l.push(i,r.index,G,-(G+1))}}}function Ew(t,e,n,r){let i=ue(null);try{return Xt(6,e,n),n(r)!==!1}catch(o){return _E(t,o),!1}finally{Xt(7,e,n),ue(i)}}function Dw(t,e,n,r,i){return function o(s){if(s===Function)return r;let a=t.componentOffset>-1?Jn(t.index,e):e;dp(a);let u=Ew(e,n,r,s),l=o.__ngNextListenerFn__;for(;l;)u=Ew(e,n,l,s)&&u,l=l.__ngNextListenerFn__;return i&&u===!1&&s.preventDefault(),u}}function x$(t=1){return yx(t)}function ER(t,e,n){return GE(t,"",e,"",n),ER}function GE(t,e,n,r,i){let o=K(),s=_p(o,e,n,r);if(s!==ct){let a=Ne(),u=vu();sp(a,u,o,t,s,o[Me],i,!1)}return GE}function M$(t,e,n,r){p1(t,e,n,r)}function N$(t,e,n){h1(t,e,n)}function R$(t){let e=K(),n=Ne(),r=vI();zh(r+1);let i=gp(n,r);if(t.dirty&&ZA(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=y1(e,r);t.reset(o,Lx),t.notifyOnChanges()}return!0}return!1}function P$(){return f1(K(),vI())}function DR(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function O$(t){let e=lx();return mu(e,_t+t)}function k$(t,e=""){let n=K(),r=Ne(),i=t+_t,o=r.firstCreatePass?Rs(r,i,1,e,null):r.data[i],s=bR(r,n,o,e,t);n[i]=s,wu()&&Cu(r,n,s,o),Hr(o,!1)}var bR=(t,e,n,r,i)=>(Iu(!0),bM(e[Me],r));function TR(t){return WE("",t,""),TR}function WE(t,e,n){let r=K(),i=_p(r,t,e,n);return i!==ct&&up(r,mn(),i),WE}function CR(t,e,n,r,i){let o=K(),s=j1(o,t,e,n,r,i);return s!==ct&&up(o,mn(),s),CR}function SR(t,e,n,r,i,o,s){let a=K(),u=B1(a,t,e,n,r,i,o,s);return u!==ct&&up(a,mn(),u),SR}function AR(t,e,n){ME(e)&&(e=e());let r=K(),i=yu();if(on(r,i,e)){let o=Ne(),s=vu();sp(o,s,r,t,e,r[Me],n,!1)}return AR}function F$(t,e){let n=ME(t);return n&&t.set(e),n}function xR(t,e){let n=K(),r=Ne(),i=Xe();return zE(r,n,n[Me],i,t,e),xR}function MR(t,e,n){let r=Ne();if(r.firstCreatePass){let i=Wn(t);Th(n,r.data,r.blueprint,i,!0),Th(e,r.data,r.blueprint,i,!1)}}function Th(t,e,n,r,i){if(t=st(t),Array.isArray(t))for(let o=0;o<t.length;o++)Th(t[o],e,n,r,i);else{let o=Ne(),s=K(),a=Xe(),u=qi(t)?t:st(t.provide),l=eI(t),f=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(qi(t)||!t.multi){let y=new Vr(l,i,je),T=Rf(u,e,i?f:f+m,p);T===-1?(Gf(Qc(a,s),o,u),Nf(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[T]=y,s[T]=y)}else{let y=Rf(u,e,f+m,p),T=Rf(u,e,f,f+m),M=y>=0&&n[y],N=T>=0&&n[T];if(i&&!N||!i&&!M){Gf(Qc(a,s),o,u);let V=PR(i?RR:NR,n.length,i,r,l);!i&&N&&(n[T].providerFactory=V),Nf(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(V),s.push(V)}else{let V=KE(n[i?T:y],l,!i&&r);Nf(o,t,y>-1?y:T,V)}!i&&r&&N&&n[T].componentProviders++}}}function Nf(t,e,n,r){let i=qi(e),o=FA(e);if(i||o){let u=(o?st(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let f=l.indexOf(n);f===-1?l.push(n,[r,u]):l[f+1].push(r,u)}else l.push(n,u)}}}function KE(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Rf(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function NR(t,e,n,r){return Ch(this.multi,[])}function RR(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Lr(n,n[ee],this.providerFactory.index,r);o=a.slice(0,s),Ch(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],Ch(i,o);return o}function Ch(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function PR(t,e,n,r,i){let o=new Vr(t,n,je);return o.multi=[],o.index=e,o.componentProviders=0,KE(o,i,r&&!n),o}function V$(t,e=[]){return n=>{n.providersResolver=(r,i)=>MR(r,i?i(t):t,e)}}var OR=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Yw(!1,n.type),i=r.length>0?A1([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=we({token:t,providedIn:"environment",factory:()=>new t(We(Gn))})}}return t})();function L$(t){eo("NgStandalone"),t.getStandaloneInjector=e=>e.get(OR).getOrCreateStandaloneInjector(t)}function j$(t,e,n){let r=Zn()+t,i=K();return i[r]===ct?Ps(i,r,n?e.call(n):e()):N1(i,r)}function B$(t,e,n,r){return QE(K(),Zn(),t,e,n,r)}function U$(t,e,n,r,i){return YE(K(),Zn(),t,e,n,r,i)}function $$(t,e,n,r,i,o){return JE(K(),Zn(),t,e,n,r,i,o)}function H$(t,e,n,r,i,o,s){return kR(K(),Zn(),t,e,n,r,i,o,s)}function Ru(t,e){let n=t[e];return n===ct?void 0:n}function QE(t,e,n,r,i,o){let s=e+n;return on(t,s,i)?Ps(t,s+1,o?r.call(o,i):r(i)):Ru(t,s+1)}function YE(t,e,n,r,i,o,s){let a=e+n;return Cs(t,a,i,o)?Ps(t,a+2,s?r.call(s,i,o):r(i,o)):Ru(t,a+2)}function JE(t,e,n,r,i,o,s,a){let u=e+n;return RE(t,u,i,o,s)?Ps(t,u+3,a?r.call(a,i,o,s):r(i,o,s)):Ru(t,u+3)}function kR(t,e,n,r,i,o,s,a,u){let l=e+n;return R1(t,l,i,o,s,a)?Ps(t,l+4,u?r.call(u,i,o,s,a):r(i,o,s,a)):Ru(t,l+4)}function q$(t,e){let n=Ne(),r,i=t+_t;n.firstCreatePass?(r=FR(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=Pr(r.type,!0)),s,a=mt(je);try{let u=Kc(!1),l=o();return Kc(u),DR(n,K(),i,l),l}finally{mt(a)}}function FR(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function z$(t,e,n){let r=t+_t,i=K(),o=mu(i,r);return vp(i,r)?QE(i,Zn(),e,o.transform,n,o):o.transform(n)}function G$(t,e,n,r){let i=t+_t,o=K(),s=mu(o,i);return vp(o,i)?YE(o,Zn(),e,s.transform,n,r,s):s.transform(n,r)}function W$(t,e,n,r,i){let o=t+_t,s=K(),a=mu(s,o);return vp(s,o)?JE(s,Zn(),e,a.transform,n,r,i,a):a.transform(n,r,i)}function vp(t,e){return t[ee].data[e].pure}function K$(t,e){return Mu(t,e)}var Q$=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();var VR=new me("");function Pu(t){return!!t&&typeof t.then=="function"}function wp(t){return!!t&&typeof t.subscribe=="function"}var LR=new me(""),ZE=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=de(LR,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=i();if(Pu(o))n.push(o);else if(wp(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),jR=new me("");function BR(){Ov(()=>{throw new le(600,!1)})}function UR(t){return t.isBoundToModule}function $R(t,e,n){try{let r=n();return Pu(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var XE=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=de(VI),this.afterRenderEffectManager=de(pp),this.externalTestViews=new Set,this.beforeRender=new Bn,this.afterTick=new Bn,this.componentTypes=[],this.components=[],this.isStable=de(yp).hasPendingTasks.pipe(Et(n=>!n)),this._injector=de(Gn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof tu;if(!this._injector.get(ZE).done){let m=!i&&xA(n),y=!1;throw new le(405,y)}let s;i?s=n:s=this._injector.get(Nu).resolveComponentFactory(n),this.componentTypes.push(s.componentType);let a=UR(s)?void 0:this._injector.get(Yn),u=r||s.selector,l=s.create(Ji.NULL,[],u,a),f=l.location.nativeElement,p=l.injector.get(VR,null);return p?.registerApplication(f),l.onDestroy(()=>{this.detachView(l.hostView),Pf(this.components,l),p?.unregisterApplication(f)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(n){if(this._runningTick)throw new le(101,!1);let r=ue(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(n)}catch(i){this.internalErrorHandler(i)}finally{this.afterTick.next(),this._runningTick=!1,ue(r)}}detectChangesInAttachedViews(n){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===wE)throw new le(103,!1);if(n){let o=r===0;this.beforeRender.next(o);for(let{_lView:s,notifyErrorHandler:a}of this._views)HR(s,o,a)}if(r++,i.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Sh(o))&&(i.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Sh(o))))break}}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Pf(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(jR,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Pf(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new le(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Pf(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function HR(t,e,n){!e&&!Sh(t)||qR(t,n,e)}function Sh(t){return Hh(t)}function qR(t,e,n){let r;n?(r=0,t[q]|=1024):t[q]&64?r=0:r=1,IE(t,e,r)}var Ah=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Y$=(()=>{class t{compileModuleSync(n){return new Ih(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Ww(n),o=ZI(i.declarations).reduce((s,a)=>{let u=zn(a);return u&&s.push(new Ki(u)),s},[]);return new Ah(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var zR=(()=>{class t{constructor(){this.zone=de(Nt),this.applicationRef=de(XE)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function GR(t){return[{provide:Nt,useFactory:t},{provide:$c,multi:!0,useFactory:()=>{let e=de(zR,{optional:!0});return()=>e.initialize()}},{provide:$c,multi:!0,useFactory:()=>{let e=de(YR);return()=>{e.initialize()}}},{provide:VI,useFactory:WR}]}function WR(){let t=de(Nt),e=de(Kn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function KR(t){let e=GR(()=>new Nt(QR(t)));return NA([[],e])}function QR(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var YR=(()=>{class t{constructor(){this.subscription=new Le,this.initialized=!1,this.zone=de(Nt),this.pendingTasks=de(yp)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Nt.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Nt.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function JR(){return typeof $localize<"u"&&$localize.locale||au}var no=new me("",{providedIn:"root",factory:()=>de(no,oe.Optional|oe.SkipSelf)||JR()}),eD=new me("",{providedIn:"root",factory:()=>yR});var tD=new me("");var Lc=null;function ZR(t=[],e){return Ji.create({name:e,providers:[{provide:Xw,useValue:"platform"},{provide:tD,useValue:new Set([()=>Lc=null])},...t]})}function XR(t=[]){if(Lc)return Lc;let e=ZR(t);return Lc=e,BR(),eP(e),e}function eP(t){t.get(zx,null)?.forEach(n=>n())}var Ou=(()=>{class t{static{this.__NG_ELEMENT_ID__=tP}}return t})();function tP(t){return nP(Xe(),K(),(t&16)===16)}function nP(t,e,n){if(pu(t)&&!n){let r=Jn(t.index,e);return new jr(r,r)}else if(t.type&47){let r=e[nn];return new jr(r,e)}return null}var xh=class{constructor(){}supports(e){return NE(e)}create(e){return new Mh(e)}},rP=(t,e)=>e,Mh=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||rP}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<bw(r,i,o)?n:r,a=bw(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,f=u-i;if(l!=f){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,T=y+m;f<=T&&T<l&&(o[m]=y+1)}let p=s.previousIndex;o[p]=f-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!NE(e))throw new le(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,x1(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new Nh(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new cu),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new cu),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Nh=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Rh=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},cu=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Rh,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function bw(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function Tw(){return new Ip([new xh])}var Ip=(()=>{class t{static{this.\u0275prov=we({token:t,providedIn:"root",factory:Tw})}constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||Tw()),deps:[[t,new lA,new uA]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new le(901,!1)}}return t})();function J$(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=XR(r),o=[KR(),...n||[]],a=new ou({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,u=a.get(Nt);return u.run(()=>{a.resolveInjectorInitializers();let l=a.get(Kn,null),f;u.runOutsideAngular(()=>{f=u.onError.subscribe({next:y=>{l.handleError(y)}})});let p=()=>a.destroy(),m=i.get(tD);return m.add(p),a.onDestroy(()=>{f.unsubscribe(),m.delete(p)}),$R(l,u,()=>{let y=a.get(ZE);return y.runInitializers(),y.donePromise.then(()=>{let T=a.get(no,au);vR(T||au);let M=a.get(XE);return e!==void 0&&M.bootstrap(e),M})})})}catch(e){return Promise.reject(e)}}function iP(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function Z$(t,e){eo("NgSignals");let n=Nv(t);return e?.equal&&(n[Zt].equal=e.equal),n}function Ep(t){let e=ue(null);try{return t()}finally{ue(e)}}var oP=new me("",{providedIn:"root",factory:()=>de(sP)}),sP=(()=>{class t{static{this.\u0275prov=we({token:t,providedIn:"root",factory:()=>new Ph})}}return t})(),Ph=class{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=de(yp),this.taskId=null}scheduleEffect(e){if(this.enqueue(e),this.taskId===null){let n=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(n),this.taskId=null})}}enqueue(e){let n=e.creationZone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,n]of this.queues)e===null?this.flushQueue(n):e.run(()=>this.flushQueue(n))}flushQueue(e){for(let n of e)e.delete(n),this.queuedEffectCount--,n.run()}},Oh=class{constructor(e,n,r,i,o,s){this.scheduler=e,this.effectFn=n,this.creationZone=r,this.injector=o,this.watcher=Lv(a=>this.runEffect(a),()=>this.schedule(),s),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(n){this.injector.get(Kn,null,{optional:!0})?.handleError(n)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function aP(t,e){eo("NgSignals"),!e?.injector&&nI(aP);let n=e?.injector??de(Ji),r=e?.manualCleanup!==!0?n.get(Du):null,i=new Oh(n.get(oP),t,typeof Zone>"u"?null:Zone.current,r,n,e?.allowSignalWrites??!1),o=n.get(Ou,null,{optional:!0});return!o||!(o._lView[q]&8)?i.watcher.notify():(o._lView[Pc]??=[]).push(i.watcher.notify),i}function X$(t){let e=zn(t);if(!e)return null;let n=new Ki(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var fD=null;function bp(){return fD}function w6(t){fD??=t}var nD=class{};var Vp=new me(""),Lp=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=we({token:t,factory:()=>de(cP),providedIn:"platform"})}}return t})(),I6=new me(""),cP=(()=>{class t extends Lp{constructor(){super(),this._doc=de(Vp),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return bp().getBaseHref(this._doc)}onPopState(n){let r=bp().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=bp().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=we({token:t,factory:()=>new t,providedIn:"platform"})}}return t})();function jp(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function rD(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function vn(t){return t&&t[0]!=="?"?"?"+t:t}var zu=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=we({token:t,factory:()=>de(uP),providedIn:"root"})}}return t})(),hD=new me(""),uP=(()=>{class t extends zu{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??de(Vp).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return jp(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+vn(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+vn(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+vn(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(We(Lp),We(hD,8))}}static{this.\u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),E6=(()=>{class t extends zu{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=jp(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+vn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+vn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(We(Lp),We(hD,8))}}static{this.\u0275prov=we({token:t,factory:t.\u0275fac})}}return t})(),lP=(()=>{class t{constructor(n){this._subject=new Mr,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=hP(rD(iD(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+vn(r))}normalize(n){return t.stripTrailingSlash(fP(this._basePath,iD(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+vn(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+vn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=vn}static{this.joinWithSlash=jp}static{this.stripTrailingSlash=rD}static{this.\u0275fac=function(r){return new(r||t)(We(zu))}}static{this.\u0275prov=we({token:t,factory:()=>dP(),providedIn:"root"})}}return t})();function dP(){return new lP(We(zu))}function fP(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function iD(t){return t.replace(/\/index.html$/,"")}function hP(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var pD={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},Bp=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(Bp||{});var ut=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(ut||{}),Ie=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(Ie||{}),Tt=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(Tt||{}),et={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function pP(t){return vt(t)[Ce.LocaleId]}function gP(t,e,n){let r=vt(t),i=[r[Ce.DayPeriodsFormat],r[Ce.DayPeriodsStandalone]],o=Pt(i,e);return Pt(o,n)}function mP(t,e,n){let r=vt(t),i=[r[Ce.DaysFormat],r[Ce.DaysStandalone]],o=Pt(i,e);return Pt(o,n)}function yP(t,e,n){let r=vt(t),i=[r[Ce.MonthsFormat],r[Ce.MonthsStandalone]],o=Pt(i,e);return Pt(o,n)}function _P(t,e){let r=vt(t)[Ce.Eras];return Pt(r,e)}function ku(t,e){let n=vt(t);return Pt(n[Ce.DateFormat],e)}function Fu(t,e){let n=vt(t);return Pt(n[Ce.TimeFormat],e)}function Vu(t,e){let r=vt(t)[Ce.DateTimeFormat];return Pt(r,e)}function sn(t,e){let n=vt(t),r=n[Ce.NumberSymbols][e];if(typeof r>"u"){if(e===et.CurrencyDecimal)return n[Ce.NumberSymbols][et.Decimal];if(e===et.CurrencyGroup)return n[Ce.NumberSymbols][et.Group]}return r}function gD(t,e){return vt(t)[Ce.NumberFormats][e]}function vP(t){return vt(t)[Ce.Currencies]}function mD(t){if(!t[Ce.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[Ce.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function wP(t){let e=vt(t);return mD(e),(e[Ce.ExtraData][2]||[]).map(r=>typeof r=="string"?Tp(r):[Tp(r[0]),Tp(r[1])])}function IP(t,e,n){let r=vt(t);mD(r);let i=[r[Ce.ExtraData][0],r[Ce.ExtraData][1]],o=Pt(i,e)||[];return Pt(o,n)||[]}function Pt(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function Tp(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}function EP(t,e,n="en"){let r=vP(n)[t]||pD[t]||[],i=r[1];return e==="narrow"&&typeof i=="string"?i:r[0]||t}var DP=2;function bP(t){let e,n=pD[t];return n&&(e=n[2]),typeof e=="number"?e:DP}var TP=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Lu={},CP=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,wn=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(wn||{}),he=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(he||{}),fe=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(fe||{});function SP(t,e,n,r){let i=FP(t);e=_n(n,e)||e;let s=[],a;for(;e;)if(a=CP.exec(e),a){s=s.concat(a.slice(1));let f=s.pop();if(!f)break;e=f}else{s.push(e);break}let u=i.getTimezoneOffset();r&&(u=_D(r,u),i=kP(i,r,!0));let l="";return s.forEach(f=>{let p=PP(f);l+=p?p(i,n,u):f==="''"?"'":f.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Hu(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function _n(t,e){let n=pP(t);if(Lu[n]??={},Lu[n][e])return Lu[n][e];let r="";switch(e){case"shortDate":r=ku(t,Tt.Short);break;case"mediumDate":r=ku(t,Tt.Medium);break;case"longDate":r=ku(t,Tt.Long);break;case"fullDate":r=ku(t,Tt.Full);break;case"shortTime":r=Fu(t,Tt.Short);break;case"mediumTime":r=Fu(t,Tt.Medium);break;case"longTime":r=Fu(t,Tt.Long);break;case"fullTime":r=Fu(t,Tt.Full);break;case"short":let i=_n(t,"shortTime"),o=_n(t,"shortDate");r=ju(Vu(t,Tt.Short),[i,o]);break;case"medium":let s=_n(t,"mediumTime"),a=_n(t,"mediumDate");r=ju(Vu(t,Tt.Medium),[s,a]);break;case"long":let u=_n(t,"longTime"),l=_n(t,"longDate");r=ju(Vu(t,Tt.Long),[u,l]);break;case"full":let f=_n(t,"fullTime"),p=_n(t,"fullDate");r=ju(Vu(t,Tt.Full),[f,p]);break}return r&&(Lu[n][e]=r),r}function ju(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function qt(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function AP(t,e){return qt(t,3).substring(0,e)}function Pe(t,e,n=0,r=!1,i=!1){return function(o,s){let a=xP(t,o);if((n>0||a>-n)&&(a+=n),t===he.Hours)a===0&&n===-12&&(a=12);else if(t===he.FractionalSeconds)return AP(a,e);let u=sn(s,et.MinusSign);return qt(a,e,u,r,i)}}function xP(t,e){switch(t){case he.FullYear:return e.getFullYear();case he.Month:return e.getMonth();case he.Date:return e.getDate();case he.Hours:return e.getHours();case he.Minutes:return e.getMinutes();case he.Seconds:return e.getSeconds();case he.FractionalSeconds:return e.getMilliseconds();case he.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}function Ee(t,e,n=ut.Format,r=!1){return function(i,o){return MP(i,o,t,e,n,r)}}function MP(t,e,n,r,i,o){switch(n){case fe.Months:return yP(e,i,r)[t.getMonth()];case fe.Days:return mP(e,i,r)[t.getDay()];case fe.DayPeriods:let s=t.getHours(),a=t.getMinutes();if(o){let l=wP(e),f=IP(e,i,r),p=l.findIndex(m=>{if(Array.isArray(m)){let[y,T]=m,M=s>=y.hours&&a>=y.minutes,N=s<T.hours||s===T.hours&&a<T.minutes;if(y.hours<T.hours){if(M&&N)return!0}else if(M||N)return!0}else if(m.hours===s&&m.minutes===a)return!0;return!1});if(p!==-1)return f[p]}return gP(e,i,r)[s<12?0:1];case fe.Eras:return _P(e,r)[t.getFullYear()<=0?0:1];default:let u=n;throw new Error(`unexpected translation type ${u}`)}}function Bu(t){return function(e,n,r){let i=-1*r,o=sn(n,et.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case wn.Short:return(i>=0?"+":"")+qt(s,2,o)+qt(Math.abs(i%60),2,o);case wn.ShortGMT:return"GMT"+(i>=0?"+":"")+qt(s,1,o);case wn.Long:return"GMT"+(i>=0?"+":"")+qt(s,2,o)+":"+qt(Math.abs(i%60),2,o);case wn.Extended:return r===0?"Z":(i>=0?"+":"")+qt(s,2,o)+":"+qt(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${t}"`)}}}var NP=0,$u=4;function RP(t){let e=Hu(t,NP,1).getDay();return Hu(t,0,1+(e<=$u?$u:$u+7)-e)}function yD(t){let e=t.getDay(),n=e===0?-3:$u-e;return Hu(t.getFullYear(),t.getMonth(),t.getDate()+n)}function Cp(t,e=!1){return function(n,r){let i;if(e){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+o)/7)}else{let o=yD(n),s=RP(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return qt(i,t,sn(r,et.MinusSign))}}function Uu(t,e=!1){return function(n,r){let o=yD(n).getFullYear();return qt(o,t,sn(r,et.MinusSign),e)}}var Sp={};function PP(t){if(Sp[t])return Sp[t];let e;switch(t){case"G":case"GG":case"GGG":e=Ee(fe.Eras,Ie.Abbreviated);break;case"GGGG":e=Ee(fe.Eras,Ie.Wide);break;case"GGGGG":e=Ee(fe.Eras,Ie.Narrow);break;case"y":e=Pe(he.FullYear,1,0,!1,!0);break;case"yy":e=Pe(he.FullYear,2,0,!0,!0);break;case"yyy":e=Pe(he.FullYear,3,0,!1,!0);break;case"yyyy":e=Pe(he.FullYear,4,0,!1,!0);break;case"Y":e=Uu(1);break;case"YY":e=Uu(2,!0);break;case"YYY":e=Uu(3);break;case"YYYY":e=Uu(4);break;case"M":case"L":e=Pe(he.Month,1,1);break;case"MM":case"LL":e=Pe(he.Month,2,1);break;case"MMM":e=Ee(fe.Months,Ie.Abbreviated);break;case"MMMM":e=Ee(fe.Months,Ie.Wide);break;case"MMMMM":e=Ee(fe.Months,Ie.Narrow);break;case"LLL":e=Ee(fe.Months,Ie.Abbreviated,ut.Standalone);break;case"LLLL":e=Ee(fe.Months,Ie.Wide,ut.Standalone);break;case"LLLLL":e=Ee(fe.Months,Ie.Narrow,ut.Standalone);break;case"w":e=Cp(1);break;case"ww":e=Cp(2);break;case"W":e=Cp(1,!0);break;case"d":e=Pe(he.Date,1);break;case"dd":e=Pe(he.Date,2);break;case"c":case"cc":e=Pe(he.Day,1);break;case"ccc":e=Ee(fe.Days,Ie.Abbreviated,ut.Standalone);break;case"cccc":e=Ee(fe.Days,Ie.Wide,ut.Standalone);break;case"ccccc":e=Ee(fe.Days,Ie.Narrow,ut.Standalone);break;case"cccccc":e=Ee(fe.Days,Ie.Short,ut.Standalone);break;case"E":case"EE":case"EEE":e=Ee(fe.Days,Ie.Abbreviated);break;case"EEEE":e=Ee(fe.Days,Ie.Wide);break;case"EEEEE":e=Ee(fe.Days,Ie.Narrow);break;case"EEEEEE":e=Ee(fe.Days,Ie.Short);break;case"a":case"aa":case"aaa":e=Ee(fe.DayPeriods,Ie.Abbreviated);break;case"aaaa":e=Ee(fe.DayPeriods,Ie.Wide);break;case"aaaaa":e=Ee(fe.DayPeriods,Ie.Narrow);break;case"b":case"bb":case"bbb":e=Ee(fe.DayPeriods,Ie.Abbreviated,ut.Standalone,!0);break;case"bbbb":e=Ee(fe.DayPeriods,Ie.Wide,ut.Standalone,!0);break;case"bbbbb":e=Ee(fe.DayPeriods,Ie.Narrow,ut.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ee(fe.DayPeriods,Ie.Abbreviated,ut.Format,!0);break;case"BBBB":e=Ee(fe.DayPeriods,Ie.Wide,ut.Format,!0);break;case"BBBBB":e=Ee(fe.DayPeriods,Ie.Narrow,ut.Format,!0);break;case"h":e=Pe(he.Hours,1,-12);break;case"hh":e=Pe(he.Hours,2,-12);break;case"H":e=Pe(he.Hours,1);break;case"HH":e=Pe(he.Hours,2);break;case"m":e=Pe(he.Minutes,1);break;case"mm":e=Pe(he.Minutes,2);break;case"s":e=Pe(he.Seconds,1);break;case"ss":e=Pe(he.Seconds,2);break;case"S":e=Pe(he.FractionalSeconds,1);break;case"SS":e=Pe(he.FractionalSeconds,2);break;case"SSS":e=Pe(he.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Bu(wn.Short);break;case"ZZZZZ":e=Bu(wn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Bu(wn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Bu(wn.Long);break;default:return null}return Sp[t]=e,e}function _D(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function OP(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function kP(t,e,n){let r=n?-1:1,i=t.getTimezoneOffset(),o=_D(e,i);return OP(t,r*(o-i))}function FP(t){if(oD(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,o=1,s=1]=t.split("-").map(a=>+a);return Hu(i,o-1,s)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(TP))return VP(r)}let e=new Date(t);if(!oD(e))throw new Error(`Unable to convert "${t}" into a date`);return e}function VP(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return o.call(e,s,a,u,l),e}function oD(t){return t instanceof Date&&!isNaN(t.valueOf())}var LP=/^(\d+)?\.((\d+)(-(\d+))?)?$/,sD=22,qu=".",Os="0",jP=";",BP=",",Ap="#",aD="\xA4";function vD(t,e,n,r,i,o,s=!1){let a="",u=!1;if(!isFinite(t))a=sn(n,et.Infinity);else{let l=qP(t);s&&(l=HP(l));let f=e.minInt,p=e.minFrac,m=e.maxFrac;if(o){let B=o.match(LP);if(B===null)throw new Error(`${o} is not a valid digit info`);let L=B[1],Q=B[3],J=B[5];L!=null&&(f=xp(L)),Q!=null&&(p=xp(Q)),J!=null?m=xp(J):Q!=null&&p>m&&(m=p)}zP(l,p,m);let y=l.digits,T=l.integerLen,M=l.exponent,N=[];for(u=y.every(B=>!B);T<f;T++)y.unshift(0);for(;T<0;T++)y.unshift(0);T>0?N=y.splice(T,y.length):(N=y,y=[0]);let V=[];for(y.length>=e.lgSize&&V.unshift(y.splice(-e.lgSize,y.length).join(""));y.length>e.gSize;)V.unshift(y.splice(-e.gSize,y.length).join(""));y.length&&V.unshift(y.join("")),a=V.join(sn(n,r)),N.length&&(a+=sn(n,i)+N.join("")),M&&(a+=sn(n,et.Exponential)+"+"+M)}return t<0&&!u?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function UP(t,e,n,r,i){let o=gD(e,Bp.Currency),s=wD(o,sn(e,et.MinusSign));return s.minFrac=bP(r),s.maxFrac=s.minFrac,vD(t,s,e,et.CurrencyGroup,et.CurrencyDecimal,i).replace(aD,n).replace(aD,"").trim()}function $P(t,e,n){let r=gD(e,Bp.Decimal),i=wD(r,sn(e,et.MinusSign));return vD(t,i,e,et.Group,et.Decimal,n)}function wD(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(jP),i=r[0],o=r[1],s=i.indexOf(qu)!==-1?i.split(qu):[i.substring(0,i.lastIndexOf(Os)+1),i.substring(i.lastIndexOf(Os)+1)],a=s[0],u=s[1]||"";n.posPre=a.substring(0,a.indexOf(Ap));for(let f=0;f<u.length;f++){let p=u.charAt(f);p===Os?n.minFrac=n.maxFrac=f+1:p===Ap?n.maxFrac=f+1:n.posSuf+=p}let l=a.split(BP);if(n.gSize=l[1]?l[1].length:0,n.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){let f=i.length-n.posPre.length-n.posSuf.length,p=o.indexOf(Ap);n.negPre=o.substring(0,p).replace(/'/g,""),n.negSuf=o.slice(p+f).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function HP(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function qP(t){let e=Math.abs(t)+"",n=0,r,i,o,s,a;for((i=e.indexOf(qu))>-1&&(e=e.replace(qu,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===Os;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===Os;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>sD&&(r=r.splice(0,sD-1),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}function zP(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen,o=Math.min(Math.max(e,i),n),s=o+t.integerLen,a=r[s];if(s>0){r.splice(Math.max(t.integerLen,s));for(let p=s;p<r.length;p++)r[p]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let p=1;p<s;p++)r[p]=0}if(a>=5)if(s-1<0){for(let p=0;p>s;p--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let u=o!==0,l=e+t.integerLen,f=r.reduceRight(function(p,m,y,T){return m=m+p,T[y]=m<10?m:m-10,u&&(T[y]===0&&y>=l?T.pop():u=!1),m>=10?1:0},0);f&&(r.unshift(f),t.integerLen++)}function xp(t){let e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}function D6(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Mp=/\s+/,cD=[],b6=(()=>{class t{constructor(n,r){this._ngEl=n,this._renderer=r,this.initialClasses=cD,this.stateMap=new Map}set klass(n){this.initialClasses=n!=null?n.trim().split(Mp):cD}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(Mp):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(Mp).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||t)(je(qr),je(fp))}}static{this.\u0275dir=fu({type:t,selectors:[["","ngClass",""]],inputs:{klass:[qn.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return t})();var Np=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},T6=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;if(!this._differ&&n)if(0)try{}catch{}else this._differ=this._differs.find(n).create(this.ngForTrackBy)}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Np(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),uD(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);uD(o,i)})}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(je(to),je(Br),je(Ip))}}static{this.\u0275dir=fu({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return t})();function uD(t,e){t.context.$implicit=e.item}var C6=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new Rp,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){lD("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){lD("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(je(to),je(Br))}}static{this.\u0275dir=fu({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return t})(),Rp=class{constructor(){this.$implicit=null,this.ngIf=null}};function lD(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${at(e)}'.`)}function ro(t,e){return new le(2100,!1)}var Pp=class{createSubscription(e,n){return Ep(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){Ep(()=>e.unsubscribe())}},Op=class{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}},GP=new Op,WP=new Pp,S6=(()=>{class t{constructor(n){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r))}_selectStrategy(n){if(Pu(n))return GP;if(wp(n))return WP;throw ro(t,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(r){return new(r||t)(je(Ou,16))}}static{this.\u0275pipe=$r({name:"async",type:t,pure:!1,standalone:!0})}}return t})();var KP=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,A6=(()=>{class t{transform(n){if(n==null)return null;if(typeof n!="string")throw ro(t,n);return n.replace(KP,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275pipe=$r({name:"titlecase",type:t,pure:!0,standalone:!0})}}return t})();var QP="mediumDate",YP=new me(""),JP=new me(""),x6=(()=>{class t{constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,o){if(n==null||n===""||n!==n)return null;try{let s=r??this.defaultOptions?.dateFormat??QP,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return SP(n,s,o||this.locale,a)}catch(s){throw ro(t,s.message)}}static{this.\u0275fac=function(r){return new(r||t)(je(no,16),je(YP,24),je(JP,24))}}static{this.\u0275pipe=$r({name:"date",type:t,pure:!0,standalone:!0})}}return t})();var M6=(()=>{class t{constructor(n){this._locale=n}transform(n,r,i){if(!ID(n))return null;i||=this._locale;try{let o=ED(n);return $P(o,i,r)}catch(o){throw ro(t,o.message)}}static{this.\u0275fac=function(r){return new(r||t)(je(no,16))}}static{this.\u0275pipe=$r({name:"number",type:t,pure:!0,standalone:!0})}}return t})();var N6=(()=>{class t{constructor(n,r="USD"){this._locale=n,this._defaultCurrencyCode=r}transform(n,r=this._defaultCurrencyCode,i="symbol",o,s){if(!ID(n))return null;s||=this._locale,typeof i=="boolean"&&(i=i?"symbol":"code");let a=r||this._defaultCurrencyCode;i!=="code"&&(i==="symbol"||i==="symbol-narrow"?a=EP(a,i==="symbol"?"wide":"narrow",s):a=i);try{let u=ED(n);return UP(u,s,a,r,o)}catch(u){throw ro(t,u.message)}}static{this.\u0275fac=function(r){return new(r||t)(je(no,16),je(eD,16))}}static{this.\u0275pipe=$r({name:"currency",type:t,pure:!0,standalone:!0})}}return t})();function ID(t){return!(t==null||t===""||t!==t)}function ED(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new Error(`${t} is not a number`);return t}var R6=(()=>{class t{transform(n,r,i){if(n==null)return null;if(!this.supports(n))throw ro(t,n);return n.slice(r,i)}supports(n){return typeof n=="string"||Array.isArray(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275pipe=$r({name:"slice",type:t,pure:!1,standalone:!0})}}return t})();var P6=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=qw({type:t})}static{this.\u0275inj=Nw({})}}return t})(),ZP="browser",XP="server";function eO(t){return t===ZP}function O6(t){return t===XP}var k6=(()=>{class t{static{this.\u0275prov=we({token:t,providedIn:"root",factory:()=>eO(de(Qh))?new kp(de(Vp),window):new Fp})}}return t})(),kp=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=tO(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function tO(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Fp=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},dD=class{};var DD=()=>{};var CD=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},nO=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},SD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,f=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(n[f],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(CD(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):nO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new $p;let m=o<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let T=l<<6&192|p;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},$p=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},rO=function(t){let e=CD(t);return SD.encodeByteArray(e,!0)},Fs=function(t){return rO(t).replace(/\./g,"")},AD=function(t){try{return SD.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function qp(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var iO=()=>qp().__FIREBASE_DEFAULTS__,oO=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},sO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&AD(t[1]);return e&&JSON.parse(e)},Wu=()=>{try{return DD()||iO()||oO()||sO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},aO=t=>Wu()?.emulatorHosts?.[t],xD=t=>{let e=aO(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},zp=()=>Wu()?.config,B6=t=>Wu()?.[`_${t}`];var Gu=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Ku(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function MD(t){return R(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function ND(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=re({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Fs(JSON.stringify(n)),Fs(JSON.stringify(s)),""].join(".")}var ks={};function cO(){let t={prod:[],emulator:[]};for(let e of Object.keys(ks))ks[e]?t.emulator.push(e):t.prod.push(e);return t}function uO(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var bD=!1;function RD(t,e){if(typeof window>"u"||typeof document>"u"||!Ku(window.location.host)||ks[t]===e||ks[t]||bD)return;ks[t]=e;function n(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=cO().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{bD=!0,s()},m}function f(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=uO(r),y=n("text"),T=document.getElementById(y)||document.createElement("span"),M=n("learnmore"),N=document.getElementById(M)||document.createElement("a"),V=n("preprendIcon"),B=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let L=m.element;a(L),f(N,M);let Q=l();u(B,V),L.append(B,T,N,Q),document.body.appendChild(L)}o?(T.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function zr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function U6(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zr())}function PD(){let t=Wu()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $6(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function H6(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function q6(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function z6(){let t=zr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Gp(){return!PD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Wp(){return!PD()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Qu(){try{return typeof indexedDB=="object"}catch{return!1}}function OD(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}function G6(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var lO="FirebaseError",In=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=lO,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vs.prototype.create)}},Vs=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?dO(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new In(i,a,r)}};function dO(t,e){return t.replace(fO,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var fO=/\{\$([^}]+)}/g;function W6(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Gr(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(TD(o)&&TD(s)){if(!Gr(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function TD(t){return t!==null&&typeof t=="object"}function K6(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Q6(t,e){let n=new Hp(t,e);return n.subscribe.bind(n)}var Hp=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");hO(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Up),i.error===void 0&&(i.error=Up),i.complete===void 0&&(i.complete=Up);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function hO(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Up(){}var Y6=4*60*60*1e3;function Ct(t){return t&&t._delegate?t._delegate:t}var En=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Wr="[DEFAULT]";var Kp=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Gu;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){let n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gO(e))try{this.getOrInitializeService({instanceIdentifier:Wr})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Wr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return R(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Wr){return this.instances.has(e)}getOptions(e=Wr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){let r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:pO(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Wr){return this.component?this.component.multipleInstances?e:Wr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function pO(t){return t===Wr?void 0:t}function gO(t){return t.instantiationMode==="EAGER"}var Yu=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Kp(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var mO=[],se=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(se||{}),yO={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},_O=se.INFO,vO={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},wO=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=vO[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},io=class{constructor(e){this.name=e,this._logLevel=_O,this._logHandler=wO,this._userLogHandler=null,mO.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...e),this._logHandler(this,se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...e),this._logHandler(this,se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,se.INFO,...e),this._logHandler(this,se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,se.WARN,...e),this._logHandler(this,se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...e),this._logHandler(this,se.ERROR,...e)}};var IO=(t,e)=>e.some(n=>t instanceof n),kD,FD;function EO(){return kD||(kD=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DO(){return FD||(FD=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var VD=new WeakMap,Yp=new WeakMap,LD=new WeakMap,Qp=new WeakMap,Zp=new WeakMap;function bO(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(zt(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&VD.set(n,t)}).catch(()=>{}),Zp.set(e,t),e}function TO(t){if(Yp.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Yp.set(t,e)}var Jp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Yp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||LD.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function jD(t){Jp=t(Jp)}function CO(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Ju(this),e,...n);return LD.set(r,e.sort?e.sort():[e]),zt(r)}:DO().includes(t)?function(...e){return t.apply(Ju(this),e),zt(VD.get(this))}:function(...e){return zt(t.apply(Ju(this),e))}}function SO(t){return typeof t=="function"?CO(t):(t instanceof IDBTransaction&&TO(t),IO(t,EO())?new Proxy(t,Jp):t)}function zt(t){if(t instanceof IDBRequest)return bO(t);if(Qp.has(t))return Qp.get(t);let e=SO(t);return e!==t&&(Qp.set(t,e),Zp.set(e,t)),e}var Ju=t=>Zp.get(t);function UD(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=zt(s);return r&&s.addEventListener("upgradeneeded",u=>{r(zt(s.result),u.oldVersion,u.newVersion,zt(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}function o3(t,{blocked:e}={}){let n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),zt(n).then(()=>{})}var AO=["get","getKey","getAll","getAllKeys","count"],xO=["put","add","delete","clear"],Xp=new Map;function BD(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xp.get(e))return Xp.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=xO.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||AO.includes(n)))return;let o=function(s,...a){return R(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return Xp.set(e,o),o}jD(t=>Re(re({},t),{get:(e,n,r)=>BD(e,n)||t.get(e,n,r),has:(e,n)=>!!BD(e,n)||t.has(e,n)}));var tg=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(MO(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function MO(t){return t.getComponent()?.type==="VERSION"}var ng="@firebase/app",$D="0.14.6";var Dn=new io("@firebase/app"),NO="@firebase/app-compat",RO="@firebase/analytics-compat",PO="@firebase/analytics",OO="@firebase/app-check-compat",kO="@firebase/app-check",FO="@firebase/auth",VO="@firebase/auth-compat",LO="@firebase/database",jO="@firebase/data-connect",BO="@firebase/database-compat",UO="@firebase/functions",$O="@firebase/functions-compat",HO="@firebase/installations",qO="@firebase/installations-compat",zO="@firebase/messaging",GO="@firebase/messaging-compat",WO="@firebase/performance",KO="@firebase/performance-compat",QO="@firebase/remote-config",YO="@firebase/remote-config-compat",JO="@firebase/storage",ZO="@firebase/storage-compat",XO="@firebase/firestore",ek="@firebase/ai",tk="@firebase/firestore-compat",nk="firebase",rk="12.6.0";var rg="[DEFAULT]",ik={[ng]:"fire-core",[NO]:"fire-core-compat",[PO]:"fire-analytics",[RO]:"fire-analytics-compat",[kO]:"fire-app-check",[OO]:"fire-app-check-compat",[FO]:"fire-auth",[VO]:"fire-auth-compat",[LO]:"fire-rtdb",[jO]:"fire-data-connect",[BO]:"fire-rtdb-compat",[UO]:"fire-fn",[$O]:"fire-fn-compat",[HO]:"fire-iid",[qO]:"fire-iid-compat",[zO]:"fire-fcm",[GO]:"fire-fcm-compat",[WO]:"fire-perf",[KO]:"fire-perf-compat",[QO]:"fire-rc",[YO]:"fire-rc-compat",[JO]:"fire-gcs",[ZO]:"fire-gcs-compat",[XO]:"fire-fst",[tk]:"fire-fst-compat",[ek]:"fire-vertex","fire-js":"fire-js",[nk]:"fire-js-all"};var Zu=new Map,ok=new Map,ig=new Map;function HD(t,e){try{t.container.addComponent(e)}catch(n){Dn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ls(t){let e=t.name;if(ig.has(e))return Dn.debug(`There were multiple attempts to register component ${e}.`),!1;ig.set(e,t);for(let n of Zu.values())HD(n,t);for(let n of ok.values())HD(n,t);return!0}function WD(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function KD(t){return t==null?!1:t.settings!==void 0}var sk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xn=new Vs("app","Firebase",sk);var og=class{constructor(e,n,r){this._isDeleted=!1,this._options=re({},e),this._config=re({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new En("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xn.create("app-deleted",{appName:this._name})}};var QD=rk;function ak(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=re({name:rg,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Xn.create("bad-app-name",{appName:String(i)});if(n||(n=zp()),!n)throw Xn.create("no-options");let o=Zu.get(i);if(o){if(Gr(n,o.options)&&Gr(r,o.config))return o;throw Xn.create("duplicate-app",{appName:i})}let s=new Yu(i);for(let u of ig.values())s.addComponent(u);let a=new og(n,r,s);return Zu.set(i,a),a}function Xu(t=rg){let e=Zu.get(t);if(!e&&t===rg&&zp())return ak();if(!e)throw Xn.create("no-app",{appName:t});return e}function er(t,e,n){let r=ik[t]??t;n&&(r+=`-${n}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Dn.warn(s.join(" "));return}Ls(new En(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var ck="firebase-heartbeat-database",uk=1,js="firebase-heartbeat-store",eg=null;function YD(){return eg||(eg=UD(ck,uk,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(js)}catch(n){console.warn(n)}}}}).catch(t=>{throw Xn.create("idb-open",{originalErrorMessage:t.message})})),eg}function lk(t){return R(this,null,function*(){try{let n=(yield YD()).transaction(js),r=yield n.objectStore(js).get(JD(t));return yield n.done,r}catch(e){if(e instanceof In)Dn.warn(e.message);else{let n=Xn.create("idb-get",{originalErrorMessage:e?.message});Dn.warn(n.message)}}})}function qD(t,e){return R(this,null,function*(){try{let r=(yield YD()).transaction(js,"readwrite");yield r.objectStore(js).put(e,JD(t)),yield r.done}catch(n){if(n instanceof In)Dn.warn(n.message);else{let r=Xn.create("idb-set",{originalErrorMessage:n?.message});Dn.warn(r.message)}}})}function JD(t){return`${t.name}!${t.options.appId}`}var dk=1024,fk=30,sg=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new ag(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return R(this,null,function*(){try{let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=zD();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>fk){let i=pk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Dn.warn(e)}})}getHeartbeatsHeader(){return R(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=zD(),{heartbeatsToSend:n,unsentEntries:r}=hk(this._heartbeatsCache.heartbeats),i=Fs(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Dn.warn(e),""}})}};function zD(){return new Date().toISOString().substring(0,10)}function hk(t,e=dk){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),GD(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),GD(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var ag=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return R(this,null,function*(){return Qu()?OD().then(()=>!0).catch(()=>!1):!1})}read(){return R(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield lk(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return R(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return qD(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return R(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return qD(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function GD(t){return Fs(JSON.stringify({version:2,heartbeats:t})).length}function pk(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function gk(t){Ls(new En("platform-logger",e=>new tg(e),"PRIVATE")),Ls(new En("heartbeat",e=>new sg(e),"PRIVATE")),er(ng,$D,t),er(ng,$D,"esm2020"),er("fire-js","")}gk("");var ZD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},XD={};var bn,cg;(function(){var t;function e(I,_){function w(){}w.prototype=_.prototype,I.F=_.prototype,I.prototype=new w,I.prototype.constructor=I,I.D=function(D,E,C){for(var v=Array(arguments.length-2),pt=2;pt<arguments.length;pt++)v[pt-2]=arguments[pt];return _.prototype[E].apply(D,v)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,_,w){w||(w=0);let D=Array(16);if(typeof _=="string")for(var E=0;E<16;++E)D[E]=_.charCodeAt(w++)|_.charCodeAt(w++)<<8|_.charCodeAt(w++)<<16|_.charCodeAt(w++)<<24;else for(E=0;E<16;++E)D[E]=_[w++]|_[w++]<<8|_[w++]<<16|_[w++]<<24;_=I.g[0],w=I.g[1],E=I.g[2];let C=I.g[3],v;v=_+(C^w&(E^C))+D[0]+3614090360&4294967295,_=w+(v<<7&4294967295|v>>>25),v=C+(E^_&(w^E))+D[1]+3905402710&4294967295,C=_+(v<<12&4294967295|v>>>20),v=E+(w^C&(_^w))+D[2]+606105819&4294967295,E=C+(v<<17&4294967295|v>>>15),v=w+(_^E&(C^_))+D[3]+3250441966&4294967295,w=E+(v<<22&4294967295|v>>>10),v=_+(C^w&(E^C))+D[4]+4118548399&4294967295,_=w+(v<<7&4294967295|v>>>25),v=C+(E^_&(w^E))+D[5]+1200080426&4294967295,C=_+(v<<12&4294967295|v>>>20),v=E+(w^C&(_^w))+D[6]+2821735955&4294967295,E=C+(v<<17&4294967295|v>>>15),v=w+(_^E&(C^_))+D[7]+4249261313&4294967295,w=E+(v<<22&4294967295|v>>>10),v=_+(C^w&(E^C))+D[8]+1770035416&4294967295,_=w+(v<<7&4294967295|v>>>25),v=C+(E^_&(w^E))+D[9]+2336552879&4294967295,C=_+(v<<12&4294967295|v>>>20),v=E+(w^C&(_^w))+D[10]+4294925233&4294967295,E=C+(v<<17&4294967295|v>>>15),v=w+(_^E&(C^_))+D[11]+2304563134&4294967295,w=E+(v<<22&4294967295|v>>>10),v=_+(C^w&(E^C))+D[12]+1804603682&4294967295,_=w+(v<<7&4294967295|v>>>25),v=C+(E^_&(w^E))+D[13]+4254626195&4294967295,C=_+(v<<12&4294967295|v>>>20),v=E+(w^C&(_^w))+D[14]+2792965006&4294967295,E=C+(v<<17&4294967295|v>>>15),v=w+(_^E&(C^_))+D[15]+1236535329&4294967295,w=E+(v<<22&4294967295|v>>>10),v=_+(E^C&(w^E))+D[1]+4129170786&4294967295,_=w+(v<<5&4294967295|v>>>27),v=C+(w^E&(_^w))+D[6]+3225465664&4294967295,C=_+(v<<9&4294967295|v>>>23),v=E+(_^w&(C^_))+D[11]+643717713&4294967295,E=C+(v<<14&4294967295|v>>>18),v=w+(C^_&(E^C))+D[0]+3921069994&4294967295,w=E+(v<<20&4294967295|v>>>12),v=_+(E^C&(w^E))+D[5]+3593408605&4294967295,_=w+(v<<5&4294967295|v>>>27),v=C+(w^E&(_^w))+D[10]+38016083&4294967295,C=_+(v<<9&4294967295|v>>>23),v=E+(_^w&(C^_))+D[15]+3634488961&4294967295,E=C+(v<<14&4294967295|v>>>18),v=w+(C^_&(E^C))+D[4]+3889429448&4294967295,w=E+(v<<20&4294967295|v>>>12),v=_+(E^C&(w^E))+D[9]+568446438&4294967295,_=w+(v<<5&4294967295|v>>>27),v=C+(w^E&(_^w))+D[14]+3275163606&4294967295,C=_+(v<<9&4294967295|v>>>23),v=E+(_^w&(C^_))+D[3]+4107603335&4294967295,E=C+(v<<14&4294967295|v>>>18),v=w+(C^_&(E^C))+D[8]+1163531501&4294967295,w=E+(v<<20&4294967295|v>>>12),v=_+(E^C&(w^E))+D[13]+2850285829&4294967295,_=w+(v<<5&4294967295|v>>>27),v=C+(w^E&(_^w))+D[2]+4243563512&4294967295,C=_+(v<<9&4294967295|v>>>23),v=E+(_^w&(C^_))+D[7]+1735328473&4294967295,E=C+(v<<14&4294967295|v>>>18),v=w+(C^_&(E^C))+D[12]+2368359562&4294967295,w=E+(v<<20&4294967295|v>>>12),v=_+(w^E^C)+D[5]+4294588738&4294967295,_=w+(v<<4&4294967295|v>>>28),v=C+(_^w^E)+D[8]+2272392833&4294967295,C=_+(v<<11&4294967295|v>>>21),v=E+(C^_^w)+D[11]+1839030562&4294967295,E=C+(v<<16&4294967295|v>>>16),v=w+(E^C^_)+D[14]+4259657740&4294967295,w=E+(v<<23&4294967295|v>>>9),v=_+(w^E^C)+D[1]+2763975236&4294967295,_=w+(v<<4&4294967295|v>>>28),v=C+(_^w^E)+D[4]+1272893353&4294967295,C=_+(v<<11&4294967295|v>>>21),v=E+(C^_^w)+D[7]+4139469664&4294967295,E=C+(v<<16&4294967295|v>>>16),v=w+(E^C^_)+D[10]+3200236656&4294967295,w=E+(v<<23&4294967295|v>>>9),v=_+(w^E^C)+D[13]+681279174&4294967295,_=w+(v<<4&4294967295|v>>>28),v=C+(_^w^E)+D[0]+3936430074&4294967295,C=_+(v<<11&4294967295|v>>>21),v=E+(C^_^w)+D[3]+3572445317&4294967295,E=C+(v<<16&4294967295|v>>>16),v=w+(E^C^_)+D[6]+76029189&4294967295,w=E+(v<<23&4294967295|v>>>9),v=_+(w^E^C)+D[9]+3654602809&4294967295,_=w+(v<<4&4294967295|v>>>28),v=C+(_^w^E)+D[12]+3873151461&4294967295,C=_+(v<<11&4294967295|v>>>21),v=E+(C^_^w)+D[15]+530742520&4294967295,E=C+(v<<16&4294967295|v>>>16),v=w+(E^C^_)+D[2]+3299628645&4294967295,w=E+(v<<23&4294967295|v>>>9),v=_+(E^(w|~C))+D[0]+4096336452&4294967295,_=w+(v<<6&4294967295|v>>>26),v=C+(w^(_|~E))+D[7]+1126891415&4294967295,C=_+(v<<10&4294967295|v>>>22),v=E+(_^(C|~w))+D[14]+2878612391&4294967295,E=C+(v<<15&4294967295|v>>>17),v=w+(C^(E|~_))+D[5]+4237533241&4294967295,w=E+(v<<21&4294967295|v>>>11),v=_+(E^(w|~C))+D[12]+1700485571&4294967295,_=w+(v<<6&4294967295|v>>>26),v=C+(w^(_|~E))+D[3]+2399980690&4294967295,C=_+(v<<10&4294967295|v>>>22),v=E+(_^(C|~w))+D[10]+4293915773&4294967295,E=C+(v<<15&4294967295|v>>>17),v=w+(C^(E|~_))+D[1]+2240044497&4294967295,w=E+(v<<21&4294967295|v>>>11),v=_+(E^(w|~C))+D[8]+1873313359&4294967295,_=w+(v<<6&4294967295|v>>>26),v=C+(w^(_|~E))+D[15]+4264355552&4294967295,C=_+(v<<10&4294967295|v>>>22),v=E+(_^(C|~w))+D[6]+2734768916&4294967295,E=C+(v<<15&4294967295|v>>>17),v=w+(C^(E|~_))+D[13]+1309151649&4294967295,w=E+(v<<21&4294967295|v>>>11),v=_+(E^(w|~C))+D[4]+4149444226&4294967295,_=w+(v<<6&4294967295|v>>>26),v=C+(w^(_|~E))+D[11]+3174756917&4294967295,C=_+(v<<10&4294967295|v>>>22),v=E+(_^(C|~w))+D[2]+718787259&4294967295,E=C+(v<<15&4294967295|v>>>17),v=w+(C^(E|~_))+D[9]+3951481745&4294967295,I.g[0]=I.g[0]+_&4294967295,I.g[1]=I.g[1]+(E+(v<<21&4294967295|v>>>11))&4294967295,I.g[2]=I.g[2]+E&4294967295,I.g[3]=I.g[3]+C&4294967295}r.prototype.v=function(I,_){_===void 0&&(_=I.length);let w=_-this.blockSize,D=this.C,E=this.h,C=0;for(;C<_;){if(E==0)for(;C<=w;)i(this,I,C),C+=this.blockSize;if(typeof I=="string"){for(;C<_;)if(D[E++]=I.charCodeAt(C++),E==this.blockSize){i(this,D),E=0;break}}else for(;C<_;)if(D[E++]=I[C++],E==this.blockSize){i(this,D),E=0;break}}this.h=E,this.o+=_},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var _=1;_<I.length-8;++_)I[_]=0;_=this.o*8;for(var w=I.length-8;w<I.length;++w)I[w]=_&255,_/=256;for(this.v(I),I=Array(16),_=0,w=0;w<4;++w)for(let D=0;D<32;D+=8)I[_++]=this.g[w]>>>D&255;return I};function o(I,_){var w=a;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=_(I)}function s(I,_){this.h=_;let w=[],D=!0;for(let E=I.length-1;E>=0;E--){let C=I[E]|0;D&&C==_||(w[E]=C,D=!1)}this.g=w}var a={};function u(I){return-128<=I&&I<128?o(I,function(_){return new s([_|0],_<0?-1:0)}):new s([I|0],I<0?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return p;if(I<0)return N(l(-I));let _=[],w=1;for(let D=0;I>=w;D++)_[D]=I/w|0,w*=4294967296;return new s(_,0)}function f(I,_){if(I.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(I.charAt(0)=="-")return N(f(I.substring(1),_));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');let w=l(Math.pow(_,8)),D=p;for(let C=0;C<I.length;C+=8){var E=Math.min(8,I.length-C);let v=parseInt(I.substring(C,C+E),_);E<8?(E=l(Math.pow(_,E)),D=D.j(E).add(l(v))):(D=D.j(w),D=D.add(l(v)))}return D}var p=u(0),m=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(M(this))return-N(this).m();let I=0,_=1;for(let w=0;w<this.g.length;w++){let D=this.i(w);I+=(D>=0?D:4294967296+D)*_,_*=4294967296}return I},t.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(T(this))return"0";if(M(this))return"-"+N(this).toString(I);let _=l(Math.pow(I,6));var w=this;let D="";for(;;){let E=Q(w,_).g;w=V(w,E.j(_));let C=((w.g.length>0?w.g[0]:w.h)>>>0).toString(I);if(w=E,T(w))return C+D;for(;C.length<6;)C="0"+C;D=C+D}},t.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function T(I){if(I.h!=0)return!1;for(let _=0;_<I.g.length;_++)if(I.g[_]!=0)return!1;return!0}function M(I){return I.h==-1}t.l=function(I){return I=V(this,I),M(I)?-1:T(I)?0:1};function N(I){let _=I.g.length,w=[];for(let D=0;D<_;D++)w[D]=~I.g[D];return new s(w,~I.h).add(m)}t.abs=function(){return M(this)?N(this):this},t.add=function(I){let _=Math.max(this.g.length,I.g.length),w=[],D=0;for(let E=0;E<=_;E++){let C=D+(this.i(E)&65535)+(I.i(E)&65535),v=(C>>>16)+(this.i(E)>>>16)+(I.i(E)>>>16);D=v>>>16,C&=65535,v&=65535,w[E]=v<<16|C}return new s(w,w[w.length-1]&-2147483648?-1:0)};function V(I,_){return I.add(N(_))}t.j=function(I){if(T(this)||T(I))return p;if(M(this))return M(I)?N(this).j(N(I)):N(N(this).j(I));if(M(I))return N(this.j(N(I)));if(this.l(y)<0&&I.l(y)<0)return l(this.m()*I.m());let _=this.g.length+I.g.length,w=[];for(var D=0;D<2*_;D++)w[D]=0;for(D=0;D<this.g.length;D++)for(let E=0;E<I.g.length;E++){let C=this.i(D)>>>16,v=this.i(D)&65535,pt=I.i(E)>>>16,Nn=I.i(E)&65535;w[2*D+2*E]+=v*Nn,B(w,2*D+2*E),w[2*D+2*E+1]+=C*Nn,B(w,2*D+2*E+1),w[2*D+2*E+1]+=v*pt,B(w,2*D+2*E+1),w[2*D+2*E+2]+=C*pt,B(w,2*D+2*E+2)}for(I=0;I<_;I++)w[I]=w[2*I+1]<<16|w[2*I];for(I=_;I<2*_;I++)w[I]=0;return new s(w,0)};function B(I,_){for(;(I[_]&65535)!=I[_];)I[_+1]+=I[_]>>>16,I[_]&=65535,_++}function L(I,_){this.g=I,this.h=_}function Q(I,_){if(T(_))throw Error("division by zero");if(T(I))return new L(p,p);if(M(I))return _=Q(N(I),_),new L(N(_.g),N(_.h));if(M(_))return _=Q(I,N(_)),new L(N(_.g),_.h);if(I.g.length>30){if(M(I)||M(_))throw Error("slowDivide_ only works with positive integers.");for(var w=m,D=_;D.l(I)<=0;)w=J(w),D=J(D);var E=G(w,1),C=G(D,1);for(D=G(D,2),w=G(w,2);!T(D);){var v=C.add(D);v.l(I)<=0&&(E=E.add(w),C=v),D=G(D,1),w=G(w,1)}return _=V(I,E.j(_)),new L(E,_)}for(E=p;I.l(_)>=0;){for(w=Math.max(1,Math.floor(I.m()/_.m())),D=Math.ceil(Math.log(w)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),C=l(w),v=C.j(_);M(v)||v.l(I)>0;)w-=D,C=l(w),v=C.j(_);T(C)&&(C=m),E=E.add(C),I=V(I,v)}return new L(E,I)}t.B=function(I){return Q(this,I).h},t.and=function(I){let _=Math.max(this.g.length,I.g.length),w=[];for(let D=0;D<_;D++)w[D]=this.i(D)&I.i(D);return new s(w,this.h&I.h)},t.or=function(I){let _=Math.max(this.g.length,I.g.length),w=[];for(let D=0;D<_;D++)w[D]=this.i(D)|I.i(D);return new s(w,this.h|I.h)},t.xor=function(I){let _=Math.max(this.g.length,I.g.length),w=[];for(let D=0;D<_;D++)w[D]=this.i(D)^I.i(D);return new s(w,this.h^I.h)};function J(I){let _=I.g.length+1,w=[];for(let D=0;D<_;D++)w[D]=I.i(D)<<1|I.i(D-1)>>>31;return new s(w,I.h)}function G(I,_){let w=_>>5;_%=32;let D=I.g.length-w,E=[];for(let C=0;C<D;C++)E[C]=_>0?I.i(C+w)>>>_|I.i(C+w+1)<<32-_:I.i(C+w);return new s(E,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,cg=XD.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=f,bn=XD.Integer=s}).apply(typeof ZD<"u"?ZD:typeof self<"u"?self:typeof window<"u"?window:{});var el=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Tn={};var ug,mk,oo,lg,Bs,tl,dg,fg,hg;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof el=="object"&&el];for(var d=0;d<c.length;++d){var h=c[d];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var h=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var b=c[g];if(!(b in h))break e;h=h[b]}c=c[c.length-1],g=h[c],d=d(g),d!=g&&d!=null&&e(h,c,{configurable:!0,writable:!0,value:d})}}i("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(c){return c||function(d){var h=[],g;for(g in d)Object.prototype.hasOwnProperty.call(d,g)&&h.push([g,d[g]]);return h}});var o=o||{},s=this||self;function a(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function u(c,d,h){return c.call.apply(c.bind,arguments)}function l(c,d,h){return l=u,l.apply(null,arguments)}function f(c,d){var h=Array.prototype.slice.call(arguments,1);return function(){var g=h.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function p(c,d){function h(){}h.prototype=d.prototype,c.Z=d.prototype,c.prototype=new h,c.prototype.constructor=c,c.Ob=function(g,b,A){for(var k=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)k[Z-2]=arguments[Z];return d.prototype[b].apply(g,k)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function y(c){let d=c.length;if(d>0){let h=Array(d);for(let g=0;g<d;g++)h[g]=c[g];return h}return[]}function T(c,d){for(let g=1;g<arguments.length;g++){let b=arguments[g];var h=typeof b;if(h=h!="object"?h:b?Array.isArray(b)?"array":h:"null",h=="array"||h=="object"&&typeof b.length=="number"){h=c.length||0;let A=b.length||0;c.length=h+A;for(let k=0;k<A;k++)c[h+k]=b[k]}else c.push(b)}}class M{constructor(d,h){this.i=d,this.j=h,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function N(c){s.setTimeout(()=>{throw c},0)}function V(){var c=I;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class B{constructor(){this.h=this.g=null}add(d,h){let g=L.get();g.set(d,h),this.h?this.h.next=g:this.g=g,this.h=g}}var L=new M(()=>new Q,c=>c.reset());class Q{constructor(){this.next=this.g=this.h=null}set(d,h){this.h=d,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let J,G=!1,I=new B,_=()=>{let c=Promise.resolve(void 0);J=()=>{c.then(w)}};function w(){for(var c;c=V();){try{c.h.call(c.g)}catch(h){N(h)}var d=L;d.j(c),d.h<100&&(d.h++,c.next=d.g,d.g=c)}G=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function E(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}E.prototype.h=function(){this.defaultPrevented=!0};var C=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let h=()=>{};s.addEventListener("test",h,d),s.removeEventListener("test",h,d)}catch{}return c}();function v(c){return/^[\s\xa0]*$/.test(c)}function pt(c,d){E.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,d)}p(pt,E),pt.prototype.init=function(c,d){let h=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget,d||(h=="mouseover"?d=c.fromElement:h=="mouseout"&&(d=c.toElement)),this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&pt.Z.h.call(this)},pt.prototype.h=function(){pt.Z.h.call(this);let c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Nn="closure_listenable_"+(Math.random()*1e6|0),gC=0;function mC(c,d,h,g,b){this.listener=c,this.proxy=null,this.src=d,this.type=h,this.capture=!!g,this.ha=b,this.key=++gC,this.da=this.fa=!1}function Pa(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Oa(c,d,h){for(let g in c)d.call(h,c[g],g,c)}function yC(c,d){for(let h in c)d.call(void 0,c[h],h,c)}function Ky(c){let d={};for(let h in c)d[h]=c[h];return d}let Qy="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Yy(c,d){let h,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(h in g)c[h]=g[h];for(let A=0;A<Qy.length;A++)h=Qy[A],Object.prototype.hasOwnProperty.call(g,h)&&(c[h]=g[h])}}function ka(c){this.src=c,this.g={},this.h=0}ka.prototype.add=function(c,d,h,g,b){let A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);let k=Ad(c,d,g,b);return k>-1?(d=c[k],h||(d.fa=!1)):(d=new mC(d,this.src,A,!!g,b),d.fa=h,c.push(d)),d};function Sd(c,d){let h=d.type;if(h in c.g){var g=c.g[h],b=Array.prototype.indexOf.call(g,d,void 0),A;(A=b>=0)&&Array.prototype.splice.call(g,b,1),A&&(Pa(d),c.g[h].length==0&&(delete c.g[h],c.h--))}}function Ad(c,d,h,g){for(let b=0;b<c.length;++b){let A=c[b];if(!A.da&&A.listener==d&&A.capture==!!h&&A.ha==g)return b}return-1}var xd="closure_lm_"+(Math.random()*1e6|0),Md={};function Jy(c,d,h,g,b){if(g&&g.once)return Xy(c,d,h,g,b);if(Array.isArray(d)){for(let A=0;A<d.length;A++)Jy(c,d[A],h,g,b);return null}return h=Od(h),c&&c[Nn]?c.J(d,h,a(g)?!!g.capture:!!g,b):Zy(c,d,h,!1,g,b)}function Zy(c,d,h,g,b,A){if(!d)throw Error("Invalid event type");let k=a(b)?!!b.capture:!!b,Z=Rd(c);if(Z||(c[xd]=Z=new ka(c)),h=Z.add(d,h,g,k,A),h.proxy)return h;if(g=_C(),h.proxy=g,g.src=c,g.listener=h,c.addEventListener)C||(b=k),b===void 0&&(b=!1),c.addEventListener(d.toString(),g,b);else if(c.attachEvent)c.attachEvent(t_(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return h}function _C(){function c(h){return d.call(c.src,c.listener,h)}let d=vC;return c}function Xy(c,d,h,g,b){if(Array.isArray(d)){for(let A=0;A<d.length;A++)Xy(c,d[A],h,g,b);return null}return h=Od(h),c&&c[Nn]?c.K(d,h,a(g)?!!g.capture:!!g,b):Zy(c,d,h,!0,g,b)}function e_(c,d,h,g,b){if(Array.isArray(d))for(var A=0;A<d.length;A++)e_(c,d[A],h,g,b);else g=a(g)?!!g.capture:!!g,h=Od(h),c&&c[Nn]?(c=c.i,A=String(d).toString(),A in c.g&&(d=c.g[A],h=Ad(d,h,g,b),h>-1&&(Pa(d[h]),Array.prototype.splice.call(d,h,1),d.length==0&&(delete c.g[A],c.h--)))):c&&(c=Rd(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Ad(d,h,g,b)),(h=c>-1?d[c]:null)&&Nd(h))}function Nd(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Nn])Sd(d.i,c);else{var h=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(h,g,c.capture):d.detachEvent?d.detachEvent(t_(h),g):d.addListener&&d.removeListener&&d.removeListener(g),(h=Rd(d))?(Sd(h,c),h.h==0&&(h.src=null,d[xd]=null)):Pa(c)}}}function t_(c){return c in Md?Md[c]:Md[c]="on"+c}function vC(c,d){if(c.da)c=!0;else{d=new pt(d,this);let h=c.listener,g=c.ha||c.src;c.fa&&Nd(c),c=h.call(g,d)}return c}function Rd(c){return c=c[xd],c instanceof ka?c:null}var Pd="__closure_events_fn_"+(Math.random()*1e9>>>0);function Od(c){return typeof c=="function"?c:(c[Pd]||(c[Pd]=function(d){return c.handleEvent(d)}),c[Pd])}function Ze(){D.call(this),this.i=new ka(this),this.M=this,this.G=null}p(Ze,D),Ze.prototype[Nn]=!0,Ze.prototype.removeEventListener=function(c,d,h,g){e_(this,c,d,h,g)};function rt(c,d){var h,g=c.G;if(g)for(h=[];g;g=g.G)h.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new E(d,c);else if(d instanceof E)d.target=d.target||c;else{var b=d;d=new E(g,c),Yy(d,b)}b=!0;let A,k;if(h)for(k=h.length-1;k>=0;k--)A=d.g=h[k],b=Fa(A,g,!0,d)&&b;if(A=d.g=c,b=Fa(A,g,!0,d)&&b,b=Fa(A,g,!1,d)&&b,h)for(k=0;k<h.length;k++)A=d.g=h[k],b=Fa(A,g,!1,d)&&b}Ze.prototype.N=function(){if(Ze.Z.N.call(this),this.i){var c=this.i;for(let d in c.g){let h=c.g[d];for(let g=0;g<h.length;g++)Pa(h[g]);delete c.g[d],c.h--}}this.G=null},Ze.prototype.J=function(c,d,h,g){return this.i.add(String(c),d,!1,h,g)},Ze.prototype.K=function(c,d,h,g){return this.i.add(String(c),d,!0,h,g)};function Fa(c,d,h,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();let b=!0;for(let A=0;A<d.length;++A){let k=d[A];if(k&&!k.da&&k.capture==h){let Z=k.listener,Ve=k.ha||k.src;k.fa&&Sd(c.i,k),b=Z.call(Ve,g)!==!1&&b}}return b&&!g.defaultPrevented}function wC(c,d){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=l(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:s.setTimeout(c,d||0)}function n_(c){c.g=wC(()=>{c.g=null,c.i&&(c.i=!1,n_(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class IC extends D{constructor(d,h){super(),this.m=d,this.l=h,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:n_(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Go(c){D.call(this),this.h=c,this.g={}}p(Go,D);var r_=[];function i_(c){Oa(c.g,function(d,h){this.g.hasOwnProperty(h)&&Nd(d)},c),c.g={}}Go.prototype.N=function(){Go.Z.N.call(this),i_(this)},Go.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var kd=s.JSON.stringify,EC=s.JSON.parse,DC=class{stringify(c){return s.JSON.stringify(c,void 0)}parse(c){return s.JSON.parse(c,void 0)}};function o_(){}function s_(){}var Wo={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Fd(){E.call(this,"d")}p(Fd,E);function Vd(){E.call(this,"c")}p(Vd,E);var wr={},a_=null;function Va(){return a_=a_||new Ze}wr.Ia="serverreachability";function c_(c){E.call(this,wr.Ia,c)}p(c_,E);function Ko(c){let d=Va();rt(d,new c_(d))}wr.STAT_EVENT="statevent";function u_(c,d){E.call(this,wr.STAT_EVENT,c),this.stat=d}p(u_,E);function it(c){let d=Va();rt(d,new u_(d,c))}wr.Ja="timingevent";function l_(c,d){E.call(this,wr.Ja,c),this.size=d}p(l_,E);function Qo(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){c()},d)}function Yo(){this.g=!0}Yo.prototype.ua=function(){this.g=!1};function bC(c,d,h,g,b,A){c.info(function(){if(c.g)if(A){var k="",Z=A.split("&");for(let _e=0;_e<Z.length;_e++){var Ve=Z[_e].split("=");if(Ve.length>1){let ze=Ve[0];Ve=Ve[1];let Jt=ze.split("_");k=Jt.length>=2&&Jt[1]=="type"?k+(ze+"="+Ve+"&"):k+(ze+"=redacted&")}}}else k=null;else k=A;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+h+`
`+k})}function TC(c,d,h,g,b,A,k){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+h+`
`+A+" "+k})}function bi(c,d,h,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+SC(c,h)+(g?" "+g:"")})}function CC(c,d){c.info(function(){return"TIMEOUT: "+d})}Yo.prototype.info=function(){};function SC(c,d){if(!c.g)return d;if(!d)return null;try{let A=JSON.parse(d);if(A){for(c=0;c<A.length;c++)if(Array.isArray(A[c])){var h=A[c];if(!(h.length<2)){var g=h[1];if(Array.isArray(g)&&!(g.length<1)){var b=g[0];if(b!="noop"&&b!="stop"&&b!="close")for(let k=1;k<g.length;k++)g[k]=""}}}}return kd(A)}catch{return d}}var La={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},d_={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},f_;function Ld(){}p(Ld,o_),Ld.prototype.g=function(){return new XMLHttpRequest},f_=new Ld;function Jo(c){return encodeURIComponent(String(c))}function AC(c){var d=1;c=c.split(":");let h=[];for(;d>0&&c.length;)h.push(c.shift()),d--;return c.length&&h.push(c.join(":")),h}function Rn(c,d,h,g){this.j=c,this.i=d,this.l=h,this.S=g||1,this.V=new Go(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new h_}function h_(){this.i=null,this.g="",this.h=!1}var p_={},jd={};function Bd(c,d,h){c.M=1,c.A=Ba(Yt(d)),c.u=h,c.R=!0,g_(c,null)}function g_(c,d){c.F=Date.now(),ja(c),c.B=Yt(c.A);var h=c.B,g=c.S;Array.isArray(g)||(g=[String(g)]),A_(h.i,"t",g),c.C=0,h=c.j.L,c.h=new h_,c.g=G_(c.j,h?d:null,!c.u),c.P>0&&(c.O=new IC(l(c.Y,c,c.g),c.P)),d=c.V,h=c.g,g=c.ba;var b="readystatechange";Array.isArray(b)||(b&&(r_[0]=b.toString()),b=r_);for(let A=0;A<b.length;A++){let k=Jy(h,b[A],g||d.handleEvent,!1,d.h||d);if(!k)break;d.g[k.key]=k}d=c.J?Ky(c.J):{},c.u?(c.v||(c.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,d)):(c.v="GET",c.g.ea(c.B,c.v,null,d)),Ko(),bC(c.i,c.v,c.B,c.l,c.S,c.u)}Rn.prototype.ba=function(c){c=c.target;let d=this.O;d&&kn(c)==3?d.j():this.Y(c)},Rn.prototype.Y=function(c){try{if(c==this.g)e:{let Z=kn(this.g),Ve=this.g.ya(),_e=this.g.ca();if(!(Z<3)&&(Z!=3||this.g&&(this.h.h||this.g.la()||k_(this.g)))){this.K||Z!=4||Ve==7||(Ve==8||_e<=0?Ko(3):Ko(2)),Ud(this);var d=this.g.ca();this.X=d;var h=xC(this);if(this.o=d==200,TC(this.i,this.v,this.B,this.l,this.S,Z,d),this.o){if(this.U&&!this.L){t:{if(this.g){var g,b=this.g;if((g=b.g?b.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(g)){var A=g;break t}}A=null}if(c=A)bi(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,$d(this,c);else{this.o=!1,this.m=3,it(12),Ir(this),Zo(this);break e}}if(this.R){c=!0;let ze;for(;!this.K&&this.C<h.length;)if(ze=MC(this,h),ze==jd){Z==4&&(this.m=4,it(14),c=!1),bi(this.i,this.l,null,"[Incomplete Response]");break}else if(ze==p_){this.m=4,it(15),bi(this.i,this.l,h,"[Invalid Chunk]"),c=!1;break}else bi(this.i,this.l,ze,null),$d(this,ze);if(m_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Z!=4||h.length!=0||this.h.h||(this.m=1,it(16),c=!1),this.o=this.o&&c,!c)bi(this.i,this.l,h,"[Invalid Chunked Response]"),Ir(this),Zo(this);else if(h.length>0&&!this.W){this.W=!0;var k=this.j;k.g==this&&k.aa&&!k.P&&(k.j.info("Great, no buffering proxy detected. Bytes received: "+h.length),Qd(k),k.P=!0,it(11))}}else bi(this.i,this.l,h,null),$d(this,h);Z==4&&Ir(this),this.o&&!this.K&&(Z==4?$_(this.j,this):(this.o=!1,ja(this)))}else qC(this.g),d==400&&h.indexOf("Unknown SID")>0?(this.m=3,it(12)):(this.m=0,it(13)),Ir(this),Zo(this)}}}catch{}finally{}};function xC(c){if(!m_(c))return c.g.la();let d=k_(c.g);if(d==="")return"";let h="",g=d.length,b=kn(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Ir(c),Zo(c),"";c.h.i=new s.TextDecoder}for(let A=0;A<g;A++)c.h.h=!0,h+=c.h.i.decode(d[A],{stream:!(b&&A==g-1)});return d.length=0,c.h.g+=h,c.C=0,c.h.g}function m_(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function MC(c,d){var h=c.C,g=d.indexOf(`
`,h);return g==-1?jd:(h=Number(d.substring(h,g)),isNaN(h)?p_:(g+=1,g+h>d.length?jd:(d=d.slice(g,g+h),c.C=g+h,d)))}Rn.prototype.cancel=function(){this.K=!0,Ir(this)};function ja(c){c.T=Date.now()+c.H,y_(c,c.H)}function y_(c,d){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Qo(l(c.aa,c),d)}function Ud(c){c.D&&(s.clearTimeout(c.D),c.D=null)}Rn.prototype.aa=function(){this.D=null;let c=Date.now();c-this.T>=0?(CC(this.i,this.B),this.M!=2&&(Ko(),it(17)),Ir(this),this.m=2,Zo(this)):y_(this,this.T-c)};function Zo(c){c.j.I==0||c.K||$_(c.j,c)}function Ir(c){Ud(c);var d=c.O;d&&typeof d.dispose=="function"&&d.dispose(),c.O=null,i_(c.V),c.g&&(d=c.g,c.g=null,d.abort(),d.dispose())}function $d(c,d){try{var h=c.j;if(h.I!=0&&(h.g==c||Hd(h.h,c))){if(!c.L&&Hd(h.h,c)&&h.I==3){try{var g=h.Ba.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!h.v){if(h.g)if(h.g.F+3e3<c.F)Ga(h),qa(h);else break e;Kd(h),it(18)}}else h.xa=b[1],0<h.xa-h.K&&b[2]<37500&&h.F&&h.A==0&&!h.C&&(h.C=Qo(l(h.Va,h),6e3));w_(h.h)<=1&&h.ta&&(h.ta=void 0)}else Dr(h,11)}else if((c.L||h.g==c)&&Ga(h),!v(d))for(b=h.Ba.g.parse(d),d=0;d<b.length;d++){let _e=b[d],ze=_e[0];if(!(ze<=h.K))if(h.K=ze,_e=_e[1],h.I==2)if(_e[0]=="c"){h.M=_e[1],h.ba=_e[2];let Jt=_e[3];Jt!=null&&(h.ka=Jt,h.j.info("VER="+h.ka));let br=_e[4];br!=null&&(h.za=br,h.j.info("SVER="+h.za));let Fn=_e[5];Fn!=null&&typeof Fn=="number"&&Fn>0&&(g=1.5*Fn,h.O=g,h.j.info("backChannelRequestTimeoutMs_="+g)),g=h;let Vn=c.g;if(Vn){let Ka=Vn.g?Vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ka){var A=g.h;A.g||Ka.indexOf("spdy")==-1&&Ka.indexOf("quic")==-1&&Ka.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(qd(A,A.h),A.h=null))}if(g.G){let Yd=Vn.g?Vn.g.getResponseHeader("X-HTTP-Session-Id"):null;Yd&&(g.wa=Yd,De(g.J,g.G,Yd))}}h.I=3,h.l&&h.l.ra(),h.aa&&(h.T=Date.now()-c.F,h.j.info("Handshake RTT: "+h.T+"ms")),g=h;var k=c;if(g.na=z_(g,g.L?g.ba:null,g.W),k.L){I_(g.h,k);var Z=k,Ve=g.O;Ve&&(Z.H=Ve),Z.D&&(Ud(Z),ja(Z)),g.g=k}else B_(g);h.i.length>0&&za(h)}else _e[0]!="stop"&&_e[0]!="close"||Dr(h,7);else h.I==3&&(_e[0]=="stop"||_e[0]=="close"?_e[0]=="stop"?Dr(h,7):Wd(h):_e[0]!="noop"&&h.l&&h.l.qa(_e),h.A=0)}}Ko(4)}catch{}}var NC=class{constructor(c,d){this.g=c,this.map=d}};function __(c){this.l=c||10,s.PerformanceNavigationTiming?(c=s.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function v_(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function w_(c){return c.h?1:c.g?c.g.size:0}function Hd(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function qd(c,d){c.g?c.g.add(d):c.h=d}function I_(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}__.prototype.cancel=function(){if(this.i=E_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function E_(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let h of c.g.values())d=d.concat(h.G);return d}return y(c.i)}var D_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function RC(c,d){if(c){c=c.split("&");for(let h=0;h<c.length;h++){let g=c[h].indexOf("="),b,A=null;g>=0?(b=c[h].substring(0,g),A=c[h].substring(g+1)):b=c[h],d(b,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function Pn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;c instanceof Pn?(this.l=c.l,Xo(this,c.j),this.o=c.o,this.g=c.g,es(this,c.u),this.h=c.h,zd(this,x_(c.i)),this.m=c.m):c&&(d=String(c).match(D_))?(this.l=!1,Xo(this,d[1]||"",!0),this.o=ts(d[2]||""),this.g=ts(d[3]||"",!0),es(this,d[4]),this.h=ts(d[5]||"",!0),zd(this,d[6]||"",!0),this.m=ts(d[7]||"")):(this.l=!1,this.i=new rs(null,this.l))}Pn.prototype.toString=function(){let c=[];var d=this.j;d&&c.push(ns(d,b_,!0),":");var h=this.g;return(h||d=="file")&&(c.push("//"),(d=this.o)&&c.push(ns(d,b_,!0),"@"),c.push(Jo(h).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.u,h!=null&&c.push(":",String(h))),(h=this.h)&&(this.g&&h.charAt(0)!="/"&&c.push("/"),c.push(ns(h,h.charAt(0)=="/"?kC:OC,!0))),(h=this.i.toString())&&c.push("?",h),(h=this.m)&&c.push("#",ns(h,VC)),c.join("")},Pn.prototype.resolve=function(c){let d=Yt(this),h=!!c.j;h?Xo(d,c.j):h=!!c.o,h?d.o=c.o:h=!!c.g,h?d.g=c.g:h=c.u!=null;var g=c.h;if(h)es(d,c.u);else if(h=!!c.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var b=d.h.lastIndexOf("/");b!=-1&&(g=d.h.slice(0,b+1)+g)}if(b=g,b==".."||b==".")g="";else if(b.indexOf("./")!=-1||b.indexOf("/.")!=-1){g=b.lastIndexOf("/",0)==0,b=b.split("/");let A=[];for(let k=0;k<b.length;){let Z=b[k++];Z=="."?g&&k==b.length&&A.push(""):Z==".."?((A.length>1||A.length==1&&A[0]!="")&&A.pop(),g&&k==b.length&&A.push("")):(A.push(Z),g=!0)}g=A.join("/")}else g=b}return h?d.h=g:h=c.i.toString()!=="",h?zd(d,x_(c.i)):h=!!c.m,h&&(d.m=c.m),d};function Yt(c){return new Pn(c)}function Xo(c,d,h){c.j=h?ts(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function es(c,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);c.u=d}else c.u=null}function zd(c,d,h){d instanceof rs?(c.i=d,LC(c.i,c.l)):(h||(d=ns(d,FC)),c.i=new rs(d,c.l))}function De(c,d,h){c.i.set(d,h)}function Ba(c){return De(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function ts(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ns(c,d,h){return typeof c=="string"?(c=encodeURI(c).replace(d,PC),h&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function PC(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var b_=/[#\/\?@]/g,OC=/[#\?:]/g,kC=/[#\?]/g,FC=/[#\?@]/g,VC=/#/g;function rs(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Er(c){c.g||(c.g=new Map,c.h=0,c.i&&RC(c.i,function(d,h){c.add(decodeURIComponent(d.replace(/\+/g," ")),h)}))}t=rs.prototype,t.add=function(c,d){Er(this),this.i=null,c=Ti(this,c);let h=this.g.get(c);return h||this.g.set(c,h=[]),h.push(d),this.h+=1,this};function T_(c,d){Er(c),d=Ti(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function C_(c,d){return Er(c),d=Ti(c,d),c.g.has(d)}t.forEach=function(c,d){Er(this),this.g.forEach(function(h,g){h.forEach(function(b){c.call(d,b,g,this)},this)},this)};function S_(c,d){Er(c);let h=[];if(typeof d=="string")C_(c,d)&&(h=h.concat(c.g.get(Ti(c,d))));else for(c=Array.from(c.g.values()),d=0;d<c.length;d++)h=h.concat(c[d]);return h}t.set=function(c,d){return Er(this),this.i=null,c=Ti(this,c),C_(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=S_(this,c),c.length>0?String(c[0]):d):d};function A_(c,d,h){T_(c,d),h.length>0&&(c.i=null,c.g.set(Ti(c,d),y(h)),c.h+=h.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(let g=0;g<d.length;g++){var h=d[g];let b=Jo(h);h=S_(this,h);for(let A=0;A<h.length;A++){let k=b;h[A]!==""&&(k+="="+Jo(h[A])),c.push(k)}}return this.i=c.join("&")};function x_(c){let d=new rs;return d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),d}function Ti(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function LC(c,d){d&&!c.j&&(Er(c),c.i=null,c.g.forEach(function(h,g){let b=g.toLowerCase();g!=b&&(T_(this,g),A_(this,b,h))},c)),c.j=d}function jC(c,d){let h=new Yo;if(s.Image){let g=new Image;g.onload=f(On,h,"TestLoadImage: loaded",!0,d,g),g.onerror=f(On,h,"TestLoadImage: error",!1,d,g),g.onabort=f(On,h,"TestLoadImage: abort",!1,d,g),g.ontimeout=f(On,h,"TestLoadImage: timeout",!1,d,g),s.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function BC(c,d){let h=new Yo,g=new AbortController,b=setTimeout(()=>{g.abort(),On(h,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(b),A.ok?On(h,"TestPingServer: ok",!0,d):On(h,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),On(h,"TestPingServer: error",!1,d)})}function On(c,d,h,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(h)}catch{}}function UC(){this.g=new DC}function Ua(c){this.i=c.Sb||null,this.h=c.ab||!1}p(Ua,o_),Ua.prototype.g=function(){return new $a(this.i,this.h)};function $a(c,d){Ze.call(this),this.H=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p($a,Ze),t=$a.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=d,this.readyState=1,os(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(d.body=c),(this.H||s).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,is(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,os(this)),this.g&&(this.readyState=3,os(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;M_(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function M_(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?is(this):os(this),this.readyState==3&&M_(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,is(this))},t.Na=function(c){this.g&&(this.response=c,is(this))},t.ga=function(){this.g&&is(this)};function is(c){c.readyState=4,c.l=null,c.j=null,c.B=null,os(c)}t.setRequestHeader=function(c,d){this.A.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var h=d.next();!h.done;)h=h.value,c.push(h[0]+": "+h[1]),h=d.next();return c.join(`\r
`)};function os(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty($a.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function N_(c){let d="";return Oa(c,function(h,g){d+=g,d+=":",d+=h,d+=`\r
`}),d}function Gd(c,d,h){e:{for(g in h){var g=!1;break e}g=!0}g||(h=N_(h),typeof c=="string"?h!=null&&Jo(h):De(c,d,h))}function Ae(c){Ze.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Ae,Ze);var $C=/^https?$/i,HC=["POST","PUT"];t=Ae.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,d,h,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():f_.g(),this.g.onreadystatechange=m(l(this.Ca,this));try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){R_(this,A);return}if(c=h||"",h=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)h.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())h.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(h.keys()).find(A=>A.toLowerCase()=="content-type"),b=s.FormData&&c instanceof s.FormData,!(Array.prototype.indexOf.call(HC,d,void 0)>=0)||g||b||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,k]of h)this.g.setRequestHeader(A,k);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(A){R_(this,A)}};function R_(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.o=5,P_(c),Ha(c)}function P_(c){c.A||(c.A=!0,rt(c,"complete"),rt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,rt(this,"complete"),rt(this,"abort"),Ha(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ha(this,!0)),Ae.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?O_(this):this.Xa())},t.Xa=function(){O_(this)};function O_(c){if(c.h&&typeof o<"u"){if(c.v&&kn(c)==4)setTimeout(c.Ca.bind(c),0);else if(rt(c,"readystatechange"),kn(c)==4){c.h=!1;try{let A=c.ca();e:switch(A){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var h;if(!(h=d)){var g;if(g=A===0){let k=String(c.D).match(D_)[1]||null;!k&&s.self&&s.self.location&&(k=s.self.location.protocol.slice(0,-1)),g=!$C.test(k?k.toLowerCase():"")}h=g}if(h)rt(c,"complete"),rt(c,"success");else{c.o=6;try{var b=kn(c)>2?c.g.statusText:""}catch{b=""}c.l=b+" ["+c.ca()+"]",P_(c)}}finally{Ha(c)}}}}function Ha(c,d){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);let h=c.g;c.g=null,d||rt(c,"ready");try{h.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function kn(c){return c.g?c.g.readyState:0}t.ca=function(){try{return kn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),EC(d)}};function k_(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function qC(c){let d={};c=(c.g&&kn(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(v(c[g]))continue;var h=AC(c[g]);let b=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let A=d[b]||[];d[b]=A,A.push(h)}yC(d,function(g){return g.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ss(c,d,h){return h&&h.internalChannelParams&&h.internalChannelParams[c]||d}function F_(c){this.za=0,this.i=[],this.j=new Yo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ss("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ss("baseRetryDelayMs",5e3,c),this.Za=ss("retryDelaySeedMs",1e4,c),this.Ta=ss("forwardChannelMaxRetries",2,c),this.va=ss("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new __(c&&c.concurrentRequestLimit),this.Ba=new UC,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=F_.prototype,t.ka=8,t.I=1,t.connect=function(c,d,h,g){it(0),this.W=c,this.H=d||{},h&&g!==void 0&&(this.H.OSID=h,this.H.OAID=g),this.F=this.X,this.J=z_(this,null,this.W),za(this)};function Wd(c){if(V_(c),c.I==3){var d=c.V++,h=Yt(c.J);if(De(h,"SID",c.M),De(h,"RID",d),De(h,"TYPE","terminate"),as(c,h),d=new Rn(c,c.j,d),d.M=2,d.A=Ba(Yt(h)),h=!1,s.navigator&&s.navigator.sendBeacon)try{h=s.navigator.sendBeacon(d.A.toString(),"")}catch{}!h&&s.Image&&(new Image().src=d.A,h=!0),h||(d.g=G_(d.j,null),d.g.ea(d.A)),d.F=Date.now(),ja(d)}q_(c)}function qa(c){c.g&&(Qd(c),c.g.cancel(),c.g=null)}function V_(c){qa(c),c.v&&(s.clearTimeout(c.v),c.v=null),Ga(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&s.clearTimeout(c.m),c.m=null)}function za(c){if(!v_(c.h)&&!c.m){c.m=!0;var d=c.Ea;J||_(),G||(J(),G=!0),I.add(d,c),c.D=0}}function zC(c,d){return w_(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=d.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Qo(l(c.Ea,c,d),H_(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;let b=new Rn(this,this.j,c),A=this.o;if(this.U&&(A?(A=Ky(A),Yy(A,this.U)):A=this.U),this.u!==null||this.R||(b.J=A,A=null),this.S)e:{for(var d=0,h=0;h<this.i.length;h++){t:{var g=this.i[h];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,d>4096){d=h;break e}if(d===4096||h===this.i.length-1){d=h+1;break e}}d=1e3}else d=1e3;d=j_(this,b,d),h=Yt(this.J),De(h,"RID",c),De(h,"CVER",22),this.G&&De(h,"X-HTTP-Session-Id",this.G),as(this,h),A&&(this.R?d="headers="+Jo(N_(A))+"&"+d:this.u&&Gd(h,this.u,A)),qd(this.h,b),this.Ra&&De(h,"TYPE","init"),this.S?(De(h,"$req",d),De(h,"SID","null"),b.U=!0,Bd(b,h,null)):Bd(b,h,d),this.I=2}}else this.I==3&&(c?L_(this,c):this.i.length==0||v_(this.h)||L_(this))};function L_(c,d){var h;d?h=d.l:h=c.V++;let g=Yt(c.J);De(g,"SID",c.M),De(g,"RID",h),De(g,"AID",c.K),as(c,g),c.u&&c.o&&Gd(g,c.u,c.o),h=new Rn(c,c.j,h,c.D+1),c.u===null&&(h.J=c.o),d&&(c.i=d.G.concat(c.i)),d=j_(c,h,1e3),h.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),qd(c.h,h),Bd(h,g,d)}function as(c,d){c.H&&Oa(c.H,function(h,g){De(d,g,h)}),c.l&&Oa({},function(h,g){De(d,g,h)})}function j_(c,d,h){h=Math.min(c.i.length,h);let g=c.l?l(c.l.Ka,c.l,c):null;e:{var b=c.i;let Z=-1;for(;;){let Ve=["count="+h];Z==-1?h>0?(Z=b[0].g,Ve.push("ofs="+Z)):Z=0:Ve.push("ofs="+Z);let _e=!0;for(let ze=0;ze<h;ze++){var A=b[ze].g;let Jt=b[ze].map;if(A-=Z,A<0)Z=Math.max(0,b[ze].g-100),_e=!1;else try{A="req"+A+"_"||"";try{var k=Jt instanceof Map?Jt:Object.entries(Jt);for(let[br,Fn]of k){let Vn=Fn;a(Fn)&&(Vn=kd(Fn)),Ve.push(A+br+"="+encodeURIComponent(Vn))}}catch(br){throw Ve.push(A+"type="+encodeURIComponent("_badmap")),br}}catch{g&&g(Jt)}}if(_e){k=Ve.join("&");break e}}k=void 0}return c=c.i.splice(0,h),d.G=c,k}function B_(c){if(!c.g&&!c.v){c.Y=1;var d=c.Da;J||_(),G||(J(),G=!0),I.add(d,c),c.A=0}}function Kd(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Qo(l(c.Da,c),H_(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,U_(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Qo(l(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,it(10),qa(this),U_(this))};function Qd(c){c.B!=null&&(s.clearTimeout(c.B),c.B=null)}function U_(c){c.g=new Rn(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var d=Yt(c.na);De(d,"RID","rpc"),De(d,"SID",c.M),De(d,"AID",c.K),De(d,"CI",c.F?"0":"1"),!c.F&&c.ia&&De(d,"TO",c.ia),De(d,"TYPE","xmlhttp"),as(c,d),c.u&&c.o&&Gd(d,c.u,c.o),c.O&&(c.g.H=c.O);var h=c.g;c=c.ba,h.M=1,h.A=Ba(Yt(d)),h.u=null,h.R=!0,g_(h,c)}t.Va=function(){this.C!=null&&(this.C=null,qa(this),Kd(this),it(19))};function Ga(c){c.C!=null&&(s.clearTimeout(c.C),c.C=null)}function $_(c,d){var h=null;if(c.g==d){Ga(c),Qd(c),c.g=null;var g=2}else if(Hd(c.h,d))h=d.G,I_(c.h,d),g=1;else return;if(c.I!=0){if(d.o)if(g==1){h=d.u?d.u.length:0,d=Date.now()-d.F;var b=c.D;g=Va(),rt(g,new l_(g,h)),za(c)}else B_(c);else if(b=d.m,b==3||b==0&&d.X>0||!(g==1&&zC(c,d)||g==2&&Kd(c)))switch(h&&h.length>0&&(d=c.h,d.i=d.i.concat(h)),b){case 1:Dr(c,5);break;case 4:Dr(c,10);break;case 3:Dr(c,6);break;default:Dr(c,2)}}}function H_(c,d){let h=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(h*=2),h*d}function Dr(c,d){if(c.j.info("Error code "+d),d==2){var h=l(c.bb,c),g=c.Ua;let b=!g;g=new Pn(g||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Xo(g,"https"),Ba(g),b?jC(g.toString(),h):BC(g.toString(),h)}else it(2);c.I=0,c.l&&c.l.pa(d),q_(c),V_(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),it(2)):(this.j.info("Failed to ping google.com"),it(1))};function q_(c){if(c.I=0,c.ja=[],c.l){let d=E_(c.h);(d.length!=0||c.i.length!=0)&&(T(c.ja,d),T(c.ja,c.i),c.h.i.length=0,y(c.i),c.i.length=0),c.l.oa()}}function z_(c,d,h){var g=h instanceof Pn?Yt(h):new Pn(h);if(g.g!="")d&&(g.g=d+"."+g.g),es(g,g.u);else{var b=s.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;let A=new Pn(null);g&&Xo(A,g),d&&(A.g=d),b&&es(A,b),h&&(A.h=h),g=A}return h=c.G,d=c.wa,h&&d&&De(g,h,d),De(g,"VER",c.ka),as(c,g),g}function G_(c,d,h){if(d&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Aa&&!c.ma?new Ae(new Ua({ab:h})):new Ae(c.ma),d.Fa(c.L),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function W_(){}t=W_.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Wa(){}Wa.prototype.g=function(c,d){return new It(c,d)};function It(c,d){Ze.call(this),this.g=new F_(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(c?c["X-WebChannel-Client-Profile"]=d.sa:c={"X-WebChannel-Client-Profile":d.sa}),this.g.U=c,(c=d&&d.Qb)&&!v(c)&&(this.g.u=c),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!v(d)&&(this.g.G=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Ci(this)}p(It,Ze),It.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},It.prototype.close=function(){Wd(this.g)},It.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var h={};h.__data__=c,c=h}else this.v&&(h={},h.__data__=kd(c),c=h);d.i.push(new NC(d.Ya++,c)),d.I==3&&za(d)},It.prototype.N=function(){this.g.l=null,delete this.j,Wd(this.g),delete this.g,It.Z.N.call(this)};function K_(c){Fd.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let h in d){c=h;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}p(K_,Fd);function Q_(){Vd.call(this),this.status=1}p(Q_,Vd);function Ci(c){this.g=c}p(Ci,W_),Ci.prototype.ra=function(){rt(this.g,"a")},Ci.prototype.qa=function(c){rt(this.g,new K_(c))},Ci.prototype.pa=function(c){rt(this.g,new Q_)},Ci.prototype.oa=function(){rt(this.g,"b")},Wa.prototype.createWebChannel=Wa.prototype.g,It.prototype.send=It.prototype.o,It.prototype.open=It.prototype.m,It.prototype.close=It.prototype.close,hg=Tn.createWebChannelTransport=function(){return new Wa},fg=Tn.getStatEventTarget=function(){return Va()},dg=Tn.Event=wr,tl=Tn.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},La.NO_ERROR=0,La.TIMEOUT=8,La.HTTP_ERROR=6,Bs=Tn.ErrorCode=La,d_.COMPLETE="complete",lg=Tn.EventType=d_,s_.EventType=Wo,Wo.OPEN="a",Wo.CLOSE="b",Wo.ERROR="c",Wo.MESSAGE="d",Ze.prototype.listen=Ze.prototype.J,oo=Tn.WebChannel=s_,mk=Tn.FetchXmlHttpFactory=Ua,Ae.prototype.listenOnce=Ae.prototype.K,Ae.prototype.getLastError=Ae.prototype.Ha,Ae.prototype.getLastErrorCode=Ae.prototype.ya,Ae.prototype.getStatus=Ae.prototype.ca,Ae.prototype.getResponseJson=Ae.prototype.La,Ae.prototype.getResponseText=Ae.prototype.la,Ae.prototype.send=Ae.prototype.ea,Ae.prototype.setWithCredentials=Ae.prototype.Fa,ug=Tn.XhrIo=Ae}).apply(typeof el<"u"?el:typeof self<"u"?self:typeof window<"u"?window:{});var eb="@firebase/firestore",tb="4.9.2";var Be=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Be.UNAUTHENTICATED=new Be(null),Be.GOOGLE_CREDENTIALS=new Be("google-credentials-uid"),Be.FIRST_PARTY=new Be("first-party-uid"),Be.MOCK_USER=new Be("mock-user");var Uo="12.3.0";var li=new io("@firebase/firestore");function ho(){return li.logLevel}function P(t,...e){if(li.logLevel<=se.DEBUG){let n=e.map(yy);li.debug(`Firestore (${Uo}): ${t}`,...n)}}function lt(t,...e){if(li.logLevel<=se.ERROR){let n=e.map(yy);li.error(`Firestore (${Uo}): ${t}`,...n)}}function di(t,...e){if(li.logLevel<=se.WARN){let n=e.map(yy);li.warn(`Firestore (${Uo}): ${t}`,...n)}}function yy(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function j(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,hT(t,r,n)}function hT(t,e,n){let r=`FIRESTORE (${Uo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw lt(r),new Error(r)}function U(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||hT(e,i,r)}function z(t,e){return t}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},O=class extends In{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ot=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var gl=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Eg=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Be.UNAUTHENTICATED))}shutdown(){}},Dg=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},bg=class{constructor(e){this.t=e,this.currentUser=Be.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){U(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new Ot;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ot,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>R(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{P("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(P("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ot)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(P("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(U(typeof r.accessToken=="string",31837,{l:r}),new gl(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return U(e===null||typeof e=="string",2055,{h:e}),new Be(e)}},Tg=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Be.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},Cg=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Tg(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Be.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ml=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Sg=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,KD(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){U(this.o===void 0,3512);let r=o=>{o.error!=null&&P("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,P("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{P("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):P("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ml(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(U(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ml(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function yk(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var ea=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=yk(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function W(t,e){return t<e?-1:t>e?1:0}function Ag(t,e){let n=Math.min(t.length,e.length);for(let r=0;r<n;r++){let i=t.charAt(r),o=e.charAt(r);if(i!==o)return pg(i)===pg(o)?W(i,o):pg(i)?1:-1}return W(t.length,e.length)}var _k=55296,vk=57343;function pg(t){let e=t.charCodeAt(0);return e>=_k&&e<=vk}function Eo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function pT(t){return t+"\0"}var nb="__name__",yl=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&j(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&j(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return W(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):Ag(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return bn.fromString(e.substring(4,e.length-2))}},pe=class t extends yl{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new O(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},wk=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ue=class t extends yl{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return wk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===nb}static keyField(){return new t([nb])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new O(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new O(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new O(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new O(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var F=class t{constructor(e){this.path=e}static fromPath(e){return new t(pe.fromString(e))}static fromName(e){return new t(pe.fromString(e).popFirst(5))}static empty(){return new t(pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new pe(e.slice()))}};function gT(t,e,n){if(!n)throw new O(x.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Ik(t,e,n,r){if(e===!0&&r===!0)throw new O(x.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function rb(t){if(!F.isDocumentKey(t))throw new O(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ib(t){if(F.isDocumentKey(t))throw new O(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function mT(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function yd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":j(12329,{type:typeof t})}function Ke(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new O(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=yd(t);throw new O(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Ek(t,e){if(e<=0)throw new O(x.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}function Fe(t,e){let n={typeString:t};return e&&(n.value=e),n}function Da(t,e){if(!mT(t))throw new O(x.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new O(x.INVALID_ARGUMENT,n);return!0}var ob=-62135596800,sb=1e6,Te=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*sb);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new O(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new O(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<ob)throw new O(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new O(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/sb}_compareTo(e){return this.seconds===e.seconds?W(this.nanoseconds,e.nanoseconds):W(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Da(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-ob;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Te._jsonSchemaVersion="firestore/timestamp/1.0",Te._jsonSchema={type:Fe("string",Te._jsonSchemaVersion),seconds:Fe("number"),nanoseconds:Fe("number")};var $=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new Te(0,0))}static max(){return new t(new Te(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ta=-1,Do=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function xg(t){return t.fields.find(e=>e.kind===2)}function Qr(t){return t.fields.filter(e=>e.kind!==2)}Do.UNKNOWN_ID=-1;var vo=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var na=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,Ft.min())}};function Dk(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=$.fromTimestamp(r===1e9?new Te(n+1,0):new Te(n,r));return new Ft(i,F.empty(),e)}function yT(t){return new Ft(t.readTime,t.key,ta)}var Ft=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t($.min(),F.empty(),ta)}static max(){return new t($.max(),F.empty(),ta)}};function _y(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=F.comparator(t.documentKey,e.documentKey),n!==0?n:W(t.largestBatchId,e.largestBatchId))}var _T="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",_l=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ii(t){return R(this,null,function*(){if(t.code!==x.FAILED_PRECONDITION||t.message!==_T)throw t;P("LocalStore","Unexpectedly lost primary lease")})}var S=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&j(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(f=>{s[l]=f,++a,a===o&&r(s)},f=>i(f))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};var St="SimpleDb",vl=class t{static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new ii(n,o)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new Ot,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new ii(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{let i=vy(r.target.error);this.S.reject(new ii(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(P(St,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new Ng(n)}},bo=class t{static delete(e){return P(St,"Removing database:",e),Jr(qp().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Qu())return!1;if(t.F())return!0;let e=zr(),n=t.M(e),r=0<n&&n<10,i=vT(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,n){return e.store(n)}static M(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,t.M(zr())===12.2&&lt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}L(e){return R(this,null,function*(){return this.db||(P(St,"Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;n(s)},i.onblocked=()=>{r(new ii(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new O(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new O(x.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new ii(e,s))},i.onupgradeneeded=o=>{P(St,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.N.k(s,i.transaction,o.oldVersion,this.version).next(()=>{P(St,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db})}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return R(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.L(e);let a=vl.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.C(),l)).catch(l=>(a.abort(l),S.reject(l))).toPromise();return u.catch(()=>{}),yield a.D,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&s<3;if(P(St,"Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function vT(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}var Mg=class{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Jr(this.U.delete())}},ii=class extends O{constructor(e,n){super(x.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function _r(t){return t.name==="IndexedDbTransactionError"}var Ng=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(P(St,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(P(St,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Jr(r)}add(e){return P(St,"ADD",this.store.name,e,e),Jr(this.store.add(e))}get(e){return Jr(this.store.get(e)).next(n=>(n===void 0&&(n=null),P(St,"GET",this.store.name,e,n),n))}delete(e){return P(St,"DELETE",this.store.name,e),Jr(this.store.delete(e))}count(){return P(St,"COUNT",this.store.name),Jr(this.store.count())}J(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new S((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.H(o,(a,u)=>{s.push(u)}).next(()=>s)}}Y(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new S((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}Z(e,n){P(St,"DELETE ALL",this.store.name);let r=this.options(e,n);r.X=!1;let i=this.cursor(r);return this.H(i,(o,s,a)=>a.delete())}ee(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.H(i,n)}te(e){let n=this.cursor({});return new S((r,i)=>{n.onerror=o=>{let s=vy(o.target.error);i(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}H(e,n){let r=[];return new S((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new Mg(a),l=n(a.primaryKey,a.value,u);if(l instanceof S){let f=l.catch(p=>(u.done(),S.reject(p)));r.push(f)}u.isDone?i():u.G===null?a.continue():a.continue(u.G)}}).next(()=>S.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Jr(t){return new S((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=vy(r.target.error);n(i)}})}var ab=!1;function vy(t){let e=bo.M(zr());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new O("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ab||(ab=!0,setTimeout(()=>{throw r},0)),r}}return t}var Ws="IndexBackfiller",Rg=class{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){P(Ws,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>R(this,null,function*(){this.task=null;try{let n=yield this.ne.ie();P(Ws,`Documents written: ${n}`)}catch(n){_r(n)?P(Ws,"Ignoring IndexedDB error during index backfill: ",n):yield Ii(n)}yield this.re(6e4)}))}},Pg=class{constructor(e,n){this.localStore=e,this.persistence=n}ie(e=50){return R(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))})}se(e,n){let r=new Set,i=n,o=!0;return S.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return P(Ws,`Processing collection: ${s}`),this.oe(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this._e(i,o)).next(a=>(P(Ws,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}_e(e,n){let r=e;return n.changes.forEach((i,o)=>{let s=yT(o);_y(s,r)>0&&(r=s)}),new Ft(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var Wt=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ue&&this.ue(n),n}}t.ce=-1;return t})(),oi=-1;function _d(t){return t==null}function ra(t){return t===0&&1/t==-1/0}function bk(t){return typeof t=="number"&&Number.isInteger(t)&&!ra(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var wl="";function nt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=cb(e)),e=Tk(t.get(n),e);return cb(e)}function Tk(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case wl:n+="";break;default:n+=o}}return n}function cb(t){return t+wl+""}function an(t){let e=t.length;if(U(e>=2,64408,{path:t}),e===2)return U(t.charAt(0)===wl&&t.charAt(1)==="",56145,{path:t}),pe.emptyPath();let n=e-2,r=[],i="";for(let o=0;o<e;){let s=t.indexOf(wl,o);switch((s<0||s>n)&&j(50515,{path:t}),t.charAt(s+1)){case"":let a=t.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:j(61167,{path:t})}o=s+2}return new pe(r)}var Yr="remoteDocuments",ba="owner",so="owner",ia="mutationQueues",Ck="userId",Gt="mutations",ub="batchId",ti="userMutationsIndex",lb=["userId","batchId"];function al(t,e){return[t,nt(e)]}function wT(t,e,n){return[t,nt(e),n]}var Sk={},To="documentMutations",Il="remoteDocumentsV14",Ak=["prefixPath","collectionGroup","readTime","documentId"],cl="documentKeyIndex",xk=["prefixPath","collectionGroup","documentId"],IT="collectionGroupIndex",Mk=["collectionGroup","readTime","prefixPath","documentId"],oa="remoteDocumentGlobal",Og="remoteDocumentGlobalKey",Co="targets",ET="queryTargetsIndex",Nk=["canonicalId","targetId"],So="targetDocuments",Rk=["targetId","path"],wy="documentTargetsIndex",Pk=["path","targetId"],El="targetGlobalKey",si="targetGlobal",sa="collectionParents",Ok=["collectionId","parent"],Ao="clientMetadata",kk="clientId",vd="bundles",Fk="bundleId",wd="namedQueries",Vk="name",Iy="indexConfiguration",Lk="indexId",kg="collectionGroupIndex",jk="collectionGroup",Ks="indexState",Bk=["indexId","uid"],DT="sequenceNumberIndex",Uk=["uid","sequenceNumber"],Qs="indexEntries",$k=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],bT="documentKeyIndex",Hk=["indexId","uid","orderedDocumentKey"],Id="documentOverlays",qk=["userId","collectionPath","documentId"],Fg="collectionPathOverlayIndex",zk=["userId","collectionPath","largestBatchId"],TT="collectionGroupOverlayIndex",Gk=["userId","collectionGroup","largestBatchId"],Ey="globals",Wk="name",CT=[ia,Gt,To,Yr,Co,ba,si,So,Ao,oa,sa,vd,wd],Kk=[...CT,Id],ST=[ia,Gt,To,Il,Co,ba,si,So,Ao,oa,sa,vd,wd,Id],AT=ST,Dy=[...AT,Iy,Ks,Qs],Qk=Dy,xT=[...Dy,Ey],Yk=xT;var aa=class extends _l{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}};function qe(t,e){let n=z(t);return bo.O(n.le,e)}function db(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function vr(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function MT(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Se=class t{constructor(e,n){this.comparator=e,this.root=n||un.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,un.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,un.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _o(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _o(this.root,e,this.comparator,!1)}getReverseIterator(){return new _o(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _o(this.root,e,this.comparator,!0)}},_o=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},un=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw j(43730,{key:this.key,value:this.value});if(this.right.isRed())throw j(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw j(27949);return e+(this.isRed()?0:1)}};un.EMPTY=null,un.RED=!0,un.BLACK=!1;un.EMPTY=new class{constructor(){this.size=0}get key(){throw j(57766)}get value(){throw j(16141)}get color(){throw j(16727)}get left(){throw j(29726)}get right(){throw j(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new un(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ye=class t{constructor(e){this.comparator=e,this.data=new Se(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Dl(this.data.getIterator())}getIteratorFrom(e){return new Dl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Dl=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function ao(t){return t.hasNext()?t.getNext():void 0}var At=class t{constructor(e){this.fields=e,e.sort(Ue.comparator)}static empty(){return new t([])}unionWith(e){let n=new ye(Ue.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Eo(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var bl=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var He=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new bl("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return W(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};He.EMPTY_BYTE_STRING=new He("");var Jk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sn(t){if(U(!!t,39018),typeof t=="string"){let e=0,n=Jk.exec(t);if(U(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:be(t.seconds),nanos:be(t.nanos)}}function be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function An(t){return typeof t=="string"?He.fromBase64String(t):He.fromUint8Array(t)}var NT="server_timestamp",RT="__type__",PT="__previous_value__",OT="__local_write_time__";function by(t){return(t?.mapValue?.fields||{})[RT]?.stringValue===NT}function Ed(t){let e=t.mapValue.fields[PT];return by(e)?Ed(e):e}function ca(t){let e=Sn(t.mapValue.fields[OT].timestampValue);return new Te(e.seconds,e.nanos)}var Vg=class{constructor(e,n,r,i,o,s,a,u,l,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=f}},Tl="(default)",xo=class t{constructor(e,n){this.projectId=e,this.database=n||Tl}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===Tl}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Ty="__type__",kT="__max__",or={mapValue:{fields:{__type__:{stringValue:kT}}}},Cy="__vector__",Mo="value",ul={nullValue:"NULL_VALUE"};function lr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?by(t)?4:FT(t)?9007199254740991:Dd(t)?10:11:j(28295,{value:t})}function ln(t,e){if(t===e)return!0;let n=lr(t);if(n!==lr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ca(t).isEqual(ca(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Sn(i.timestampValue),a=Sn(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return An(i.bytesValue).isEqual(An(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return be(i.geoPointValue.latitude)===be(o.geoPointValue.latitude)&&be(i.geoPointValue.longitude)===be(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return be(i.integerValue)===be(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=be(i.doubleValue),a=be(o.doubleValue);return s===a?ra(s)===ra(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Eo(t.arrayValue.values||[],e.arrayValue.values||[],ln);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(db(s)!==db(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!ln(s[u],a[u])))return!1;return!0}(t,e);default:return j(52216,{left:t})}}function ua(t,e){return(t.values||[]).find(n=>ln(n,e))!==void 0}function dr(t,e){if(t===e)return 0;let n=lr(t),r=lr(e);if(n!==r)return W(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return W(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=be(o.integerValue||o.doubleValue),u=be(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return fb(t.timestampValue,e.timestampValue);case 4:return fb(ca(t),ca(e));case 5:return Ag(t.stringValue,e.stringValue);case 6:return function(o,s){let a=An(o),u=An(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let f=W(a[l],u[l]);if(f!==0)return f}return W(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=W(be(o.latitude),be(s.latitude));return a!==0?a:W(be(o.longitude),be(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return hb(t.arrayValue,e.arrayValue);case 10:return function(o,s){let a=o.fields||{},u=s.fields||{},l=a[Mo]?.arrayValue,f=u[Mo]?.arrayValue,p=W(l?.values?.length||0,f?.values?.length||0);return p!==0?p:hb(l,f)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===or.mapValue&&s===or.mapValue)return 0;if(o===or.mapValue)return 1;if(s===or.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},f=Object.keys(l);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){let m=Ag(u[p],f[p]);if(m!==0)return m;let y=dr(a[u[p]],l[f[p]]);if(y!==0)return y}return W(u.length,f.length)}(t.mapValue,e.mapValue);default:throw j(23264,{he:n})}}function fb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return W(t,e);let n=Sn(t),r=Sn(e),i=W(n.seconds,r.seconds);return i!==0?i:W(n.nanos,r.nanos)}function hb(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=dr(n[i],r[i]);if(o)return o}return W(n.length,r.length)}function No(t){return Lg(t)}function Lg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Sn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return An(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return F.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=Lg(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Lg(n.fields[s])}`;return i+"}"}(t.mapValue):j(61005,{value:t})}function ll(t){switch(lr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Ed(t);return e?16+ll(e):16;case 5:return 2*t.stringValue.length;case 6:return An(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+ll(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return vr(r.fields,(o,s)=>{i+=o.length+ll(s)}),i}(t.mapValue);default:throw j(13486,{value:t})}}function la(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function jg(t){return!!t&&"integerValue"in t}function da(t){return!!t&&"arrayValue"in t}function pb(t){return!!t&&"nullValue"in t}function gb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function dl(t){return!!t&&"mapValue"in t}function Dd(t){return(t?.mapValue?.fields||{})[Ty]?.stringValue===Cy}function Ys(t){if(t.geoPointValue)return{geoPointValue:re({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:re({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return vr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ys(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ys(t.arrayValue.values[n]);return e}return re({},t)}function FT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===kT}var VT={mapValue:{fields:{[Ty]:{stringValue:Cy},[Mo]:{arrayValue:{}}}}};function Zk(t){return"nullValue"in t?ul:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?la(xo.empty(),F.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Dd(t)?VT:{mapValue:{}}:j(35942,{value:t})}function Xk(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?la(xo.empty(),F.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?VT:"mapValue"in t?Dd(t)?{mapValue:{}}:or:j(61959,{value:t})}function mb(t,e){let n=dr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function yb(t,e){let n=dr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var dt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!dl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ys(n)}setAll(e){let n=Ue.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Ys(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());dl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ln(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];dl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){vr(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Ys(this.value))}};function LT(t){let e=[];return vr(t.fields,(n,r)=>{let i=new Ue([n]);if(dl(r)){let o=LT(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new At(e)}var Je=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,$.min(),$.min(),$.min(),dt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,$.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,$.min(),$.min(),dt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,$.min(),$.min(),dt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual($.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var fr=class{constructor(e,n){this.position=e,this.inclusive=n}};function _b(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=F.comparator(F.fromName(s.referenceValue),n.key):r=dr(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function vb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ln(t.position[n],e.position[n]))return!1;return!0}var fi=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function eF(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Cl=class{},ie=class t extends Cl{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new $g(e,n,r):n==="array-contains"?new zg(e,r):n==="in"?new Sl(e,r):n==="not-in"?new Gg(e,r):n==="array-contains-any"?new Wg(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Hg(e,r):new qg(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(dr(n,this.value)):n!==null&&lr(this.value)===lr(n)&&this.matchesComparison(dr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return j(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ge=class t extends Cl{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new t(e,n)}matches(e){return Ro(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function Ro(t){return t.op==="and"}function Bg(t){return t.op==="or"}function Sy(t){return jT(t)&&Ro(t)}function jT(t){for(let e of t.filters)if(e instanceof ge)return!1;return!0}function Ug(t){if(t instanceof ie)return t.field.canonicalString()+t.op.toString()+No(t.value);if(Sy(t))return t.filters.map(e=>Ug(e)).join(",");{let e=t.filters.map(n=>Ug(n)).join(",");return`${t.op}(${e})`}}function BT(t,e){return t instanceof ie?function(r,i){return i instanceof ie&&r.op===i.op&&r.field.isEqual(i.field)&&ln(r.value,i.value)}(t,e):t instanceof ge?function(r,i){return i instanceof ge&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&BT(s,i.filters[a]),!0):!1}(t,e):void j(19439)}function UT(t,e){let n=t.filters.concat(e);return ge.create(n,t.op)}function $T(t){return t instanceof ie?function(n){return`${n.field.canonicalString()} ${n.op} ${No(n.value)}`}(t):t instanceof ge?function(n){return n.op.toString()+" {"+n.getFilters().map($T).join(" ,")+"}"}(t):"Filter"}var $g=class extends ie{constructor(e,n,r){super(e,n,r),this.key=F.fromName(r.referenceValue)}matches(e){let n=F.comparator(e.key,this.key);return this.matchesComparison(n)}},Hg=class extends ie{constructor(e,n){super(e,"in",n),this.keys=HT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},qg=class extends ie{constructor(e,n){super(e,"not-in",n),this.keys=HT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function HT(t,e){return(e.arrayValue?.values||[]).map(n=>F.fromName(n.referenceValue))}var zg=class extends ie{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return da(n)&&ua(n.arrayValue,this.value)}},Sl=class extends ie{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&ua(this.value.arrayValue,n)}},Gg=class extends ie{constructor(e,n){super(e,"not-in",n)}matches(e){if(ua(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ua(this.value.arrayValue,n)}},Wg=class extends ie{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!da(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ua(this.value.arrayValue,r))}};var Kg=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Te=null}};function Qg(t,e=null,n=[],r=[],i=null,o=null,s=null){return new Kg(t,e,n,r,i,o,s)}function hi(t){let e=z(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ug(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),_d(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>No(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>No(r)).join(",")),e.Te=n}return e.Te}function Ta(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!eF(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!BT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!vb(t.startAt,e.startAt)&&vb(t.endAt,e.endAt)}function Al(t){return F.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function xl(t,e){return t.filters.filter(n=>n instanceof ie&&n.field.isEqual(e))}function wb(t,e,n){let r=ul,i=!0;for(let o of xl(t,e)){let s=ul,a=!0;switch(o.op){case"<":case"<=":s=Zk(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=ul}mb({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];mb({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function Ib(t,e,n){let r=or,i=!0;for(let o of xl(t,e)){let s=or,a=!0;switch(o.op){case">=":case">":s=Xk(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=or}yb({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];yb({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}var hr=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function tF(t,e,n,r,i,o,s,a){return new hr(t,e,n,r,i,o,s,a)}function Ca(t){return new hr(t)}function Eb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function qT(t){return t.collectionGroup!==null}function Js(t){let e=z(t);if(e.Ie===null){e.Ie=[];let n=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new ye(Ue.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new fi(o,r))}),n.has(Ue.keyField().canonicalString())||e.Ie.push(new fi(Ue.keyField(),r))}return e.Ie}function kt(t){let e=z(t);return e.Ee||(e.Ee=nF(e,Js(t))),e.Ee}function nF(t,e){if(t.limitType==="F")return Qg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new fi(i.field,o)});let n=t.endAt?new fr(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new fr(t.startAt.position,t.startAt.inclusive):null;return Qg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Yg(t,e){let n=t.filters.concat([e]);return new hr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ml(t,e,n){return new hr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function bd(t,e){return Ta(kt(t),kt(e))&&t.limitType===e.limitType}function zT(t){return`${hi(kt(t))}|lt:${t.limitType}`}function po(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>$T(i)).join(", ")}]`),_d(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>No(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>No(i)).join(",")),`Target(${r})`}(kt(t))}; limitType=${t.limitType})`}function Sa(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):F.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of Js(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=_b(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Js(r),i)||r.endAt&&!function(s,a,u){let l=_b(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Js(r),i))}(t,e)}function rF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function GT(t){return(e,n)=>{let r=!1;for(let i of Js(t)){let o=iF(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function iF(t,e,n){let r=t.field.isKeyField()?F.comparator(e.key,n.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?dr(u,l):j(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return j(19790,{direction:t.dir})}}var Kt=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){vr(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return MT(this.inner)}size(){return this.innerSize}};var oF=new Se(F.comparator);function xt(){return oF}var WT=new Se(F.comparator);function zs(...t){let e=WT;for(let n of t)e=e.insert(n.key,n);return e}function KT(t){let e=WT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function cn(){return Zs()}function QT(){return Zs()}function Zs(){return new Kt(t=>t.toString(),(t,e)=>t.isEqual(e))}var sF=new Se(F.comparator),aF=new ye(F.comparator);function te(...t){let e=aF;for(let n of t)e=e.add(n);return e}var cF=new ye(W);function uF(){return cF}function Ay(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ra(e)?"-0":e}}function YT(t){return{integerValue:""+t}}function lF(t,e){return bk(e)?YT(e):Ay(t,e)}var Po=class{constructor(){this._=void 0}};function dF(t,e,n){return t instanceof pi?function(i,o){let s={fields:{[RT]:{stringValue:NT},[OT]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&by(o)&&(o=Ed(o)),o&&(s.fields[PT]=o),{mapValue:s}}(n,e):t instanceof xn?ZT(t,e):t instanceof pr?XT(t,e):function(i,o){let s=JT(i,o),a=Db(s)+Db(i.Ae);return jg(s)&&jg(i.Ae)?YT(a):Ay(i.serializer,a)}(t,e)}function fF(t,e,n){return t instanceof xn?ZT(t,e):t instanceof pr?XT(t,e):n}function JT(t,e){return t instanceof gi?function(r){return jg(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var pi=class extends Po{},xn=class extends Po{constructor(e){super(),this.elements=e}};function ZT(t,e){let n=e0(e);for(let r of t.elements)n.some(i=>ln(i,r))||n.push(r);return{arrayValue:{values:n}}}var pr=class extends Po{constructor(e){super(),this.elements=e}};function XT(t,e){let n=e0(e);for(let r of t.elements)n=n.filter(i=>!ln(i,r));return{arrayValue:{values:n}}}var gi=class extends Po{constructor(e,n){super(),this.serializer=e,this.Ae=n}};function Db(t){return be(t.integerValue||t.doubleValue)}function e0(t){return da(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Nl=class{constructor(e,n){this.field=e,this.transform=n}};function hF(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof xn&&i instanceof xn||r instanceof pr&&i instanceof pr?Eo(r.elements,i.elements,ln):r instanceof gi&&i instanceof gi?ln(r.Ae,i.Ae):r instanceof pi&&i instanceof pi}(t.transform,e.transform)}var Jg=class{constructor(e,n){this.version=e,this.transformResults=n}},Ye=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function fl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Oo=class{};function t0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new mi(t.key,Ye.none()):new gr(t.key,t.data,Ye.none());{let n=t.data,r=dt.empty(),i=new ye(Ue.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Qt(t.key,r,new At(i.toArray()),Ye.none())}}function pF(t,e,n){t instanceof gr?function(i,o,s){let a=i.value.clone(),u=Tb(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Qt?function(i,o,s){if(!fl(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=Tb(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(n0(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Xs(t,e,n,r){return t instanceof gr?function(o,s,a,u){if(!fl(o.precondition,s))return a;let l=o.value.clone(),f=Cb(o.fieldTransforms,u,s);return l.setAll(f),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Qt?function(o,s,a,u){if(!fl(o.precondition,s))return a;let l=Cb(o.fieldTransforms,u,s),f=s.data;return f.setAll(n0(o)),f.setAll(l),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,a){return fl(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function gF(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=JT(r.transform,i||null);o!=null&&(n===null&&(n=dt.empty()),n.set(r.field,o))}return n||null}function bb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Eo(r,i,(o,s)=>hF(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var gr=class extends Oo{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Qt=class extends Oo{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function n0(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function Tb(t,e,n){let r=new Map;U(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,fF(s,a,n[i]))}return r}function Cb(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,dF(o,s,e))}return r}var mi=class extends Oo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Rl=class extends Oo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var fa=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&pF(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Xs(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Xs(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=QT();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=t0(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument($.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),te())}isEqual(e){return this.batchId===e.batchId&&Eo(this.mutations,e.mutations,(n,r)=>bb(n,r))&&Eo(this.baseMutations,e.baseMutations,(n,r)=>bb(n,r))}},Zg=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){U(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return sF}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var ha=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Xg=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Oe,ae;function mF(t){switch(t){case x.OK:return j(64938);case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0;default:return j(15467,{code:t})}}function r0(t){if(t===void 0)return lt("GRPC error has no .code"),x.UNKNOWN;switch(t){case Oe.OK:return x.OK;case Oe.CANCELLED:return x.CANCELLED;case Oe.UNKNOWN:return x.UNKNOWN;case Oe.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case Oe.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case Oe.INTERNAL:return x.INTERNAL;case Oe.UNAVAILABLE:return x.UNAVAILABLE;case Oe.UNAUTHENTICATED:return x.UNAUTHENTICATED;case Oe.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case Oe.NOT_FOUND:return x.NOT_FOUND;case Oe.ALREADY_EXISTS:return x.ALREADY_EXISTS;case Oe.PERMISSION_DENIED:return x.PERMISSION_DENIED;case Oe.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case Oe.ABORTED:return x.ABORTED;case Oe.OUT_OF_RANGE:return x.OUT_OF_RANGE;case Oe.UNIMPLEMENTED:return x.UNIMPLEMENTED;case Oe.DATA_LOSS:return x.DATA_LOSS;default:return j(39323,{code:t})}}(ae=Oe||(Oe={}))[ae.OK=0]="OK",ae[ae.CANCELLED=1]="CANCELLED",ae[ae.UNKNOWN=2]="UNKNOWN",ae[ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ae[ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ae[ae.NOT_FOUND=5]="NOT_FOUND",ae[ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",ae[ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",ae[ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",ae[ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ae[ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ae[ae.ABORTED=10]="ABORTED",ae[ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",ae[ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",ae[ae.INTERNAL=13]="INTERNAL",ae[ae.UNAVAILABLE=14]="UNAVAILABLE",ae[ae.DATA_LOSS=15]="DATA_LOSS";var yF=null;function _F(){return new TextEncoder}var vF=new bn([4294967295,4294967295],0);function Sb(t){let e=_F().encode(t),n=new cg;return n.update(e),new Uint8Array(n.digest())}function Ab(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new bn([n,r],0),new bn([i,o],0)]}var em=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ni(`Invalid padding: ${n}`);if(r<0)throw new ni(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ni(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ni(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=bn.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(bn.fromNumber(r)));return i.compare(vF)===1&&(i=new bn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let n=Sb(e),[r,i]=Ab(n);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.ge===0)return;let n=Sb(e),[r,i]=Ab(n);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.Se(s)}}Se(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},ni=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Pl=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,pa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t($.min(),i,new Se(W),xt(),te())}},pa=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,te(),te(),te())}};var wo=class{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}},Ol=class{constructor(e,n){this.targetId=e,this.Ce=n}},kl=class{constructor(e,n,r=He.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Fl=class{constructor(){this.ve=0,this.Fe=xb(),this.Me=He.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=te(),n=te(),r=te();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:j(38017,{changeType:o})}}),new pa(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=xb()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,U(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},tm=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=xt(),this.Je=nl(),this.He=nl(),this.Ye=new Se(W)}Ze(e){for(let n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(let n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{let r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:j(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){let n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){let o=i.target;if(Al(o))if(r===0){let s=new F(o.path);this.et(n,s,Je.newNoDocument(s,$.min()))}else U(r===1,20013,{expectedCount:r});else{let s=this._t(n);if(s!==r){let a=this.ut(e),u=a?this.ct(a,e,s):1;if(u!==0){this.it(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,l)}yF?.lt(function(f,p,m,y,T){let M={localCacheCount:f,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},N=p.unchangedNames;return N&&(M.bloomFilter={applied:T===0,hashCount:N?.hashCount??0,bitmapLength:N?.bits?.bitmap?.length??0,padding:N?.bits?.padding??0,mightContain:V=>y?.mightContain(V)??!1}),M}(s,e.Ce,this.Ge.ht(),a,u))}}}}ut(e){let n=e.Ce.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=An(r).toUint8Array()}catch(u){if(u instanceof bl)return di("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new em(s,i,o)}catch(u){return di(u instanceof ni?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){let r=this.Ge.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Ge.ht(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.et(n,o,null),i++)}),i}Tt(e){let n=new Map;this.ze.forEach((o,s)=>{let a=this.ot(s);if(a){if(o.current&&Al(a.target)){let u=new F(a.target.path);this.It(u).has(s)||this.Et(s,u)||this.et(s,u,Je.newNoDocument(u,e))}o.Be&&(n.set(s,o.ke()),o.qe())}});let r=te();this.He.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.ot(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new Pl(e,n,this.Ye,this.je,r);return this.je=xt(),this.Je=nl(),this.He=nl(),this.Ye=new Se(W),i}Xe(e,n){if(!this.rt(e))return;let r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){let n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Fl,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ye(W),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ye(W),this.Je=this.Je.insert(e,n)),n}rt(e){let n=this.ot(e)!==null;return n||P("WatchChangeAggregator","Detected inactive target",e),n}ot(e){let n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Fl),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}};function nl(){return new Se(F.comparator)}function xb(){return new Se(F.comparator)}var wF={asc:"ASCENDING",desc:"DESCENDING"},IF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},EF={and:"AND",or:"OR"},nm=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function rm(t,e){return t.useProto3Json||_d(e)?e:{value:e}}function ko(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function i0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function DF(t,e){return ko(t,e.toTimestamp())}function ft(t){return U(!!t,49232),$.fromTimestamp(function(n){let r=Sn(n);return new Te(r.seconds,r.nanos)}(t))}function xy(t,e){return im(t,e).canonicalString()}function im(t,e){let n=function(i){return new pe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function o0(t){let e=pe.fromString(t);return U(p0(e),10190,{key:e.toString()}),e}function Vl(t,e){return xy(t.databaseId,e.path)}function ai(t,e){let n=o0(e);if(n.get(1)!==t.databaseId.projectId)throw new O(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new O(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new F(c0(n))}function s0(t,e){return xy(t.databaseId,e)}function a0(t){let e=o0(t);return e.length===4?pe.emptyPath():c0(e)}function om(t){return new pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function c0(t){return U(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Mb(t,e,n){return{name:Vl(t,e),fields:n.value.mapValue.fields}}function bF(t,e,n){let r=ai(t,e.name),i=ft(e.updateTime),o=e.createTime?ft(e.createTime):$.min(),s=new dt({mapValue:{fields:e.fields}}),a=Je.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function TF(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:j(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,f){return l.useProto3Json?(U(f===void 0||typeof f=="string",58123),He.fromBase64String(f||"")):(U(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),He.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let f=l.code===void 0?x.UNKNOWN:r0(l.code);return new O(f,l.message||"")}(s);n=new kl(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=ai(t,r.document.name),o=ft(r.document.updateTime),s=r.document.createTime?ft(r.document.createTime):$.min(),a=new dt({mapValue:{fields:r.document.fields}}),u=Je.newFoundDocument(i,o,s,a),l=r.targetIds||[],f=r.removedTargetIds||[];n=new wo(l,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=ai(t,r.document),o=r.readTime?ft(r.readTime):$.min(),s=Je.newNoDocument(i,o),a=r.removedTargetIds||[];n=new wo([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=ai(t,r.document),o=r.removedTargetIds||[];n=new wo([],o,i,null)}else{if(!("filter"in e))return j(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Xg(i,o),a=r.targetId;n=new Ol(a,s)}}return n}function Ll(t,e){let n;if(e instanceof gr)n={update:Mb(t,e.key,e.value)};else if(e instanceof mi)n={delete:Vl(t,e.key)};else if(e instanceof Qt)n={update:Mb(t,e.key,e.data),updateMask:NF(e.fieldMask)};else{if(!(e instanceof Rl))return j(16599,{Vt:e.type});n={verify:Vl(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof pi)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof xn)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof pr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof gi)return{fieldPath:s.field.canonicalString(),increment:a.Ae};throw j(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:DF(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:j(27497)}(t,e.precondition)),n}function sm(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?Ye.updateTime(ft(o.updateTime)):o.exists!==void 0?Ye.exists(o.exists):Ye.none()}(e.currentDocument):Ye.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)U(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),u=new pi;else if("appendMissingElements"in a){let f=a.appendMissingElements.values||[];u=new xn(f)}else if("removeAllFromArray"in a){let f=a.removeAllFromArray.values||[];u=new pr(f)}else"increment"in a?u=new gi(s,a.increment):j(16584,{proto:a});let l=Ue.fromServerFormat(a.fieldPath);return new Nl(l,u)}(t,i)):[];if(e.update){e.update.name;let i=ai(t,e.update.name),o=new dt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let l=u.fieldPaths||[];return new At(l.map(f=>Ue.fromServerFormat(f)))}(e.updateMask);return new Qt(i,o,s,n,r)}return new gr(i,o,n,r)}if(e.delete){let i=ai(t,e.delete);return new mi(i,n)}if(e.verify){let i=ai(t,e.verify);return new Rl(i,n)}return j(1463,{proto:e})}function CF(t,e){return t&&t.length>0?(U(e!==void 0,14353),t.map(n=>function(i,o){let s=i.updateTime?ft(i.updateTime):ft(o);return s.isEqual($.min())&&(s=ft(o)),new Jg(s,i.transformResults||[])}(n,e))):[]}function u0(t,e){return{documents:[s0(t,e.path)]}}function l0(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=s0(t,i);let o=function(l){if(l.length!==0)return h0(ge.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(f=>function(m){return{field:go(m.field),direction:AF(m.dir)}}(f))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=rm(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ft:n,parent:i}}function d0(t){let e=a0(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){U(r===1,65062);let f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];n.where&&(o=function(p){let m=f0(p);return m instanceof ge&&Sy(m)?m.getFilters():[m]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(m=>function(T){return new fi(mo(T.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,_d(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){let m=!!p.before,y=p.values||[];return new fr(y,m)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new fr(y,m)}(n.endAt)),tF(e,i,s,o,a,"F",u,l)}function SF(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return j(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function f0(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=mo(n.unaryFilter.field);return ie.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=mo(n.unaryFilter.field);return ie.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=mo(n.unaryFilter.field);return ie.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=mo(n.unaryFilter.field);return ie.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return j(61313);default:return j(60726)}}(t):t.fieldFilter!==void 0?function(n){return ie.create(mo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return j(58110);default:return j(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ge.create(n.compositeFilter.filters.map(r=>f0(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return j(1026)}}(n.compositeFilter.op))}(t):j(30097,{filter:t})}function AF(t){return wF[t]}function xF(t){return IF[t]}function MF(t){return EF[t]}function go(t){return{fieldPath:t.canonicalString()}}function mo(t){return Ue.fromServerFormat(t.fieldPath)}function h0(t){return t instanceof ie?function(n){if(n.op==="=="){if(gb(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NAN"}};if(pb(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(gb(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NOT_NAN"}};if(pb(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:go(n.field),op:xF(n.op),value:n.value}}}(t):t instanceof ge?function(n){let r=n.getFilters().map(i=>h0(i));return r.length===1?r[0]:{compositeFilter:{op:MF(n.op),filters:r}}}(t):j(54877,{filter:t})}function NF(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function p0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Fo=class t{constructor(e,n,r,i,o=$.min(),s=$.min(),a=He.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var jl=class{constructor(e){this.yt=e}};function RF(t,e){let n;if(e.document)n=bF(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=F.fromSegments(e.noDocument.path),i=_i(e.noDocument.readTime);n=Je.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return j(56709);{let r=F.fromSegments(e.unknownDocument.path),i=_i(e.unknownDocument.version);n=Je.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let o=new Te(i[0],i[1]);return $.fromTimestamp(o)}(e.readTime)),n}function Nb(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Bl(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Vl(o,s.key),fields:s.data.value.mapValue.fields,updateTime:ko(o,s.version.toTimestamp()),createTime:ko(o,s.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:yi(e.version)};else{if(!e.isUnknownDocument())return j(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:yi(e.version)}}return r}function Bl(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function yi(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function _i(t){let e=new Te(t.seconds,t.nanoseconds);return $.fromTimestamp(e)}function Zr(t,e){let n=(e.baseMutations||[]).map(o=>sm(t.yt,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>sm(t.yt,o)),i=Te.fromMillis(e.localWriteTimeMs);return new fa(e.batchId,i,n,r)}function Gs(t){let e=_i(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?_i(t.lastLimboFreeSnapshotVersion):$.min(),r;return r=function(o){return o.documents!==void 0}(t.query)?function(o){let s=o.documents.length;return U(s===1,1966,{count:s}),kt(Ca(a0(o.documents[0])))}(t.query):function(o){return kt(d0(o))}(t.query),new Fo(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,He.fromBase64String(t.resumeToken))}function g0(t,e){let n=yi(e.snapshotVersion),r=yi(e.lastLimboFreeSnapshotVersion),i;i=Al(e.target)?u0(t.yt,e.target):l0(t.yt,e.target).ft;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:hi(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function m0(t){let e=d0({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ml(e,e.limit,"L"):e}function gg(t,e){return new ha(e.largestBatchId,sm(t.yt,e.overlayMutation))}function Rb(t,e){let n=e.path.lastSegment();return[t,nt(e.path.popLast()),n]}function Pb(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:yi(r.readTime),documentKey:nt(r.documentKey.path),largestBatchId:r.largestBatchId}}var am=class{getBundleMetadata(e,n){return Ob(e).get(n).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:_i(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,n){return Ob(e).put(function(i){return{bundleId:i.id,createTime:yi(ft(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return kb(e).get(n).next(r=>{if(r)return function(o){return{name:o.name,query:m0(o.bundledQuery),readTime:_i(o.readTime)}}(r)})}saveNamedQuery(e,n){return kb(e).put(function(i){return{name:i.name,readTime:yi(ft(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function Ob(t){return qe(t,vd)}function kb(t){return qe(t,wd)}var Ul=class t{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return Us(e).get(Rb(this.userId,n)).next(r=>r?gg(this.serializer,r):null)}getOverlays(e,n){let r=cn();return S.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((o,s)=>{let a=new ha(n,s);i.push(this.St(e,a))}),S.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(s=>i.add(nt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Us(e).Z(Fg,a))}),S.waitFor(o)}getOverlaysForCollection(e,n,r){let i=cn(),o=nt(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Us(e).J(Fg,s).next(a=>{for(let u of a){let l=gg(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let o=cn(),s,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Us(e).ee({index:TT,range:a},(u,l,f)=>{let p=gg(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):f.done()}).next(()=>o)}St(e,n){return Us(e).put(function(i,o,s){let[a,u,l]=Rb(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Ll(i.yt,s.mutation)}}(this.serializer,this.userId,n))}};function Us(t){return qe(t,Id)}var cm=class{bt(e){return qe(e,Ey)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{let r=n?.value;return r?He.fromUint8Array(r):He.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}};var Cn=class{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(be(e.integerValue));else if("doubleValue"in e){let r=be(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),ra(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Sn(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(An(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?FT(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):Dd(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):j(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){let r=e.fields||{};this.Ft(n,55);for(let i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){let r=e.fields||{};this.Ft(n,53);let i=Mo,o=r[i].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(be(o)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){let r=e.values||[];this.Ft(n,50);for(let i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),F.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}};Cn.Kt=new Cn;var co=255;function PF(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function Fb(t){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=PF(255&r[o]);if(i+=s,s!==8)break}return i}(t);return Math.ceil(e/8)}var um=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{let i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{let i=n.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){let n=this.en(e),r=Fb(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){let n=this.en(e),r=Fb(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(co),this.sn(255)}_n(){this.an(co),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){let n=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){let n=255&e;n===0?(this.sn(0),this.sn(255)):n===co?(this.sn(co),this.sn(0)):this.sn(n)}Jt(e){let n=255&e;n===0?(this.an(0),this.an(255)):n===co?(this.an(co),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},lm=class{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}},dm=class{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}},Xr=class{constructor(){this.cn=new um,this.ln=new lm(this.cn),this.hn=new dm(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}};var ei=class t{constructor(e,n,r,i){this.Tn=e,this.In=n,this.En=r,this.dn=i}An(){let e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new t(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:hl(this.En),directionalValue:hl(this.dn),orderedDocumentKey:hl(n),documentKey:r.path.toArray()}}Vn(e,n,r){let i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}};function tr(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=Vb(t.En,e.En),n!==0?n:(n=Vb(t.dn,e.dn),n!==0?n:F.comparator(t.In,e.In)))}function Vb(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function hl(t){return Wp()?function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r}(t):t}function Lb(t){return typeof t!="string"?t:function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(t)}var $l=class{constructor(e){this.mn=new ye((n,r)=>Ue.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(let n of e.filters){let r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(U(e.collectionGroup===this.collectionId,49279),this.pn)return!1;let n=xg(e);if(n!==void 0&&!this.wn(n))return!1;let r=Qr(e),i=new Set,o=0,s=0;for(;o<r.length&&this.wn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.mn.size>0){let a=this.mn.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.Sn(a,u)||!this.bn(this.fn[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.fn.length||!this.bn(this.fn[s++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new ye(Ue.comparator),n=[];for(let r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new vo(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new vo(r.field,0))}for(let r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new vo(r.field,r.dir==="asc"?0:1)));return new Do(Do.UNKNOWN_ID,this.collectionId,n,na.empty())}wn(e){for(let n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function y0(t){if(U(t instanceof ie||t instanceof ge,20012),t instanceof ie){if(t instanceof Sl){let n=t.value.arrayValue?.values?.map(r=>ie.create(t.field,"==",r))||[];return ge.create(n,"or")}return t}let e=t.filters.map(n=>y0(n));return ge.create(e,t.op)}function OF(t){if(t.getFilters().length===0)return[];let e=pm(y0(t));return U(_0(e),7391),fm(e)||hm(e)?[e]:e.getFilters()}function fm(t){return t instanceof ie}function hm(t){return t instanceof ge&&Sy(t)}function _0(t){return fm(t)||hm(t)||function(n){if(n instanceof ge&&Bg(n)){for(let r of n.getFilters())if(!fm(r)&&!hm(r))return!1;return!0}return!1}(t)}function pm(t){if(U(t instanceof ie||t instanceof ge,34018),t instanceof ie)return t;if(t.filters.length===1)return pm(t.filters[0]);let e=t.filters.map(r=>pm(r)),n=ge.create(e,t.op);return n=Hl(n),_0(n)?n:(U(n instanceof ge,64498),U(Ro(n),40251),U(n.filters.length>1,57927),n.filters.reduce((r,i)=>My(r,i)))}function My(t,e){let n;return U(t instanceof ie||t instanceof ge,38388),U(e instanceof ie||e instanceof ge,25473),n=t instanceof ie?e instanceof ie?function(i,o){return ge.create([i,o],"and")}(t,e):jb(t,e):e instanceof ie?jb(e,t):function(i,o){if(U(i.filters.length>0&&o.filters.length>0,48005),Ro(i)&&Ro(o))return UT(i,o.getFilters());let s=Bg(i)?i:o,a=Bg(i)?o:i,u=s.filters.map(l=>My(l,a));return ge.create(u,"or")}(t,e),Hl(n)}function jb(t,e){if(Ro(e))return UT(e,t.getFilters());{let n=e.filters.map(r=>My(t,r));return ge.create(n,"or")}}function Hl(t){if(U(t instanceof ie||t instanceof ge,11850),t instanceof ie)return t;let e=t.getFilters();if(e.length===1)return Hl(e[0]);if(jT(t))return t;let n=e.map(i=>Hl(i)),r=[];return n.forEach(i=>{i instanceof ie?r.push(i):i instanceof ge&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:ge.create(r,t.op)}var gm=class{constructor(){this.Cn=new ga}addToCollectionParentIndex(e,n){return this.Cn.add(n),S.resolve()}getCollectionParents(e,n){return S.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return S.resolve()}deleteFieldIndex(e,n){return S.resolve()}deleteAllFieldIndexes(e){return S.resolve()}createTargetIndexes(e,n){return S.resolve()}getDocumentsMatchingTarget(e,n){return S.resolve(null)}getIndexType(e,n){return S.resolve(0)}getFieldIndexes(e,n){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,n){return S.resolve(Ft.min())}getMinOffsetFromCollectionGroup(e,n){return S.resolve(Ft.min())}updateCollectionGroup(e,n,r){return S.resolve()}updateIndexEntries(e,n){return S.resolve()}},ga=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ye(pe.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ye(pe.comparator)).toArray()}};var Bb="IndexedDbIndexManager",rl=new Uint8Array(0),mm=class{constructor(e,n){this.databaseId=n,this.vn=new ga,this.Fn=new Kt(r=>hi(r),(r,i)=>Ta(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});let o={collectionId:r,parent:nt(i)};return Ub(e).put(o)}return S.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[pT(n),""],!1,!0);return Ub(e).J(i).next(o=>{for(let s of o){if(s.collectionId!==n)break;r.push(an(s.parent))}return r})}addFieldIndex(e,n){let r=$s(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete i.indexId;let o=r.add(i);if(n.indexState){let s=lo(e);return o.next(a=>{s.put(Pb(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let r=$s(e),i=lo(e),o=uo(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=$s(e),r=uo(e),i=lo(e);return n.Z().next(()=>r.Z()).next(()=>i.Z())}createTargetIndexes(e,n){return S.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new $l(r).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let r=uo(e),i=!0,o=new Map;return S.forEach(this.Mn(n),s=>this.xn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=te(),a=[];return S.forEach(o,(u,l)=>{P(Bb,`Using index ${function(L){return`id=${L.indexId}|cg=${L.collectionGroup}|f=${L.fields.map(Q=>`${Q.fieldPath}:${Q.kind}`).join(",")}`}(u)} to execute ${hi(n)}`);let f=function(L,Q){let J=xg(Q);if(J===void 0)return null;for(let G of xl(L,J.fieldPath))switch(G.op){case"array-contains-any":return G.value.arrayValue.values||[];case"array-contains":return[G.value]}return null}(l,u),p=function(L,Q){let J=new Map;for(let G of Qr(Q))for(let I of xl(L,G.fieldPath))switch(I.op){case"==":case"in":J.set(G.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return J.set(G.fieldPath.canonicalString(),I.value),Array.from(J.values())}return null}(l,u),m=function(L,Q){let J=[],G=!0;for(let I of Qr(Q)){let _=I.kind===0?wb(L,I.fieldPath,L.startAt):Ib(L,I.fieldPath,L.startAt);J.push(_.value),G&&(G=_.inclusive)}return new fr(J,G)}(l,u),y=function(L,Q){let J=[],G=!0;for(let I of Qr(Q)){let _=I.kind===0?Ib(L,I.fieldPath,L.endAt):wb(L,I.fieldPath,L.endAt);J.push(_.value),G&&(G=_.inclusive)}return new fr(J,G)}(l,u),T=this.On(u,l,m),M=this.On(u,l,y),N=this.Nn(u,l,p),V=this.Bn(u.indexId,f,T,m.inclusive,M,y.inclusive,N);return S.forEach(V,B=>r.Y(B,n.limit).next(L=>{L.forEach(Q=>{let J=F.fromSegments(Q.documentKey);s.has(J)||(s=s.add(J),a.push(J))})}))}).next(()=>a)}return S.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=OF(ge.create(e.filters,"and")).map(r=>Qg(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,i,o,s,a){let u=(n!=null?n.length:1)*Math.max(r.length,o.length),l=u/(n!=null?n.length:1),f=[];for(let p=0;p<u;++p){let m=n?this.Ln(n[p/l]):rl,y=this.kn(e,m,r[p%l],i),T=this.qn(e,m,o[p%l],s),M=a.map(N=>this.kn(e,m,N,!0));f.push(...this.createRange(y,T,M))}return f}kn(e,n,r,i){let o=new ei(e,F.empty(),n,r);return i?o:o.An()}qn(e,n,r,i){let o=new ei(e,F.empty(),n,r);return i?o.An():o}xn(e,n){let r=new $l(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.yn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2,i=this.Mn(n);return S.forEach(i,o=>this.xn(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let l=new ye(Ue.comparator),f=!1;for(let p of u.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?f=!0:l=l.add(m.field));for(let p of u.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(f?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}Qn(e,n){let r=new Xr;for(let i of Qr(e)){let o=n.data.field(i.fieldPath);if(o==null)return null;let s=r.Pn(i.kind);Cn.Kt.Dt(o,s)}return r.un()}Ln(e){let n=new Xr;return Cn.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){let r=new Xr;return Cn.Kt.Dt(la(this.databaseId,n),r.Pn(function(o){let s=Qr(o);return s.length===0?0:s[s.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let i=[];i.push(new Xr);let o=0;for(let s of Qr(e)){let a=r[o++];for(let u of i)if(this.Un(n,s.fieldPath)&&da(a))i=this.Kn(i,s,a);else{let l=u.Pn(s.kind);Cn.Kt.Dt(a,l)}}return this.Wn(i)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new Xr;u.seed(a.un()),Cn.Kt.Dt(s,u.Pn(n.kind)),o.push(u)}return o}Un(e,n){return!!e.filters.find(r=>r instanceof ie&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=$s(e),i=lo(e);return(n?r.J(kg,IDBKeyRange.bound(n,n)):r.J()).next(o=>{let s=[];return S.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(f,p){let m=p?new na(p.sequenceNumber,new Ft(_i(p.readTime),new F(an(p.documentKey)),p.largestBatchId)):na.empty(),y=f.fields.map(([T,M])=>new vo(Ue.fromServerFormat(T),M));return new Do(f.indexId,f.collectionGroup,y,m)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:W(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=$s(e),o=lo(e);return this.Gn(e).next(s=>i.J(kg,IDBKeyRange.bound(n,n)).next(a=>S.forEach(a,u=>o.put(Pb(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,n){let r=new Map;return S.forEach(n,(i,o)=>{let s=r.get(i.collectionGroup);return(s?S.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),S.forEach(a,u=>this.zn(e,i,u).next(l=>{let f=this.jn(o,u);return l.isEqual(f)?S.resolve():this.Jn(e,o,u,l,f)}))))})}Hn(e,n,r,i){return uo(e).put(i.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,i){return uo(e).delete(i.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){let i=uo(e),o=new ye(tr);return i.ee({index:bT,range:IDBKeyRange.only([r.indexId,this.uid,hl(this.$n(r,n))])},(s,a)=>{o=o.add(new ei(r.indexId,n,Lb(a.arrayValue),Lb(a.directionalValue)))}).next(()=>o)}jn(e,n){let r=new ye(tr),i=this.Qn(n,e);if(i==null)return r;let o=xg(n);if(o!=null){let s=e.data.field(o.fieldPath);if(da(s))for(let a of s.arrayValue.values||[])r=r.add(new ei(n.indexId,e.key,this.Ln(a),i))}else r=r.add(new ei(n.indexId,e.key,rl,i));return r}Jn(e,n,r,i,o){P(Bb,"Updating index entries for document '%s'",n.key);let s=[];return function(u,l,f,p,m){let y=u.getIterator(),T=l.getIterator(),M=ao(y),N=ao(T);for(;M||N;){let V=!1,B=!1;if(M&&N){let L=f(M,N);L<0?B=!0:L>0&&(V=!0)}else M!=null?B=!0:V=!0;V?(p(N),N=ao(T)):B?(m(M),M=ao(y)):(M=ao(y),N=ao(T))}}(i,o,tr,a=>{s.push(this.Hn(e,n,r,a))},a=>{s.push(this.Yn(e,n,r,a))}),S.waitFor(s)}Gn(e){let n=1;return lo(e).ee({index:DT,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>tr(s,a)).filter((s,a,u)=>!a||tr(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=tr(s,e),u=tr(s,n);if(a===0)i[0]=e.An();else if(a>0&&u<0)i.push(s),i.push(s.An());else if(u>0)break}i.push(n);let o=[];for(let s=0;s<i.length;s+=2){if(this.Zn(i[s],i[s+1]))return[];let a=i[s].Vn(this.uid,rl,F.empty()),u=i[s+1].Vn(this.uid,rl,F.empty());o.push(IDBKeyRange.bound(a,u))}return o}Zn(e,n){return tr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next($b)}getMinOffset(e,n){return S.mapArray(this.Mn(n),r=>this.xn(e,r).next(i=>i||j(44426))).next($b)}};function Ub(t){return qe(t,sa)}function uo(t){return qe(t,Qs)}function $s(t){return qe(t,Iy)}function lo(t){return qe(t,Ks)}function $b(t){U(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;_y(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Ft(e.readTime,e.documentKey,n)}var Hb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},v0=41943040,wt=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};function w0(t,e,n){let r=t.store(Gt),i=t.store(To),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.ee({range:s},(f,p,m)=>(a++,m.delete()));o.push(u.next(()=>{U(a===1,47070,{batchId:n.batchId})}));let l=[];for(let f of n.mutations){let p=wT(e,f.key.path,n.batchId);o.push(i.delete(p)),l.push(f.key)}return S.waitFor(o).next(()=>l)}function ql(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw j(14731);e=t.noDocument}return JSON.stringify(e).length}wt.DEFAULT_COLLECTION_PERCENTILE=10,wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wt.DEFAULT=new wt(v0,wt.DEFAULT_COLLECTION_PERCENTILE,wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wt.DISABLED=new wt(-1,0,0);var zl=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,n,r,i){U(e.uid!=="",64387);let o=e.isAuthenticated()?e.uid:"";return new t(o,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return nr(e).ee({index:ti,range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let o=yo(e),s=nr(e);return s.add({}).next(a=>{U(typeof a=="number",49019);let u=new fa(a,n,r,i),l=function(y,T,M){let N=M.baseMutations.map(B=>Ll(y.yt,B)),V=M.mutations.map(B=>Ll(y.yt,B));return{userId:T,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:N,mutations:V}}(this.serializer,this.userId,u),f=[],p=new ye((m,y)=>W(m.canonicalString(),y.canonicalString()));for(let m of i){let y=wT(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),f.push(s.put(l)),f.push(o.put(y,Sk))}return p.forEach(m=>{f.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Xn[a]=u.keys()}),S.waitFor(f).next(()=>u)})}lookupMutationBatch(e,n){return nr(e).get(n).next(r=>r?(U(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),Zr(this.serializer,r)):null)}er(e,n){return this.Xn[n]?S.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.Xn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return nr(e).ee({index:ti,range:i},(s,a,u)=>{a.userId===this.userId&&(U(a.batchId>=r,47524,{tr:r}),o=Zr(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=oi;return nr(e).ee({index:ti,range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,oi],[this.userId,Number.POSITIVE_INFINITY]);return nr(e).J(ti,n).next(r=>r.map(i=>Zr(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=al(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return yo(e).ee({range:i},(s,a,u)=>{let[l,f,p]=s,m=an(f);if(l===this.userId&&n.path.isEqual(m))return nr(e).get(p).next(y=>{if(!y)throw j(61480,{nr:s,batchId:p});U(y.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:y.userId,batchId:p}),o.push(Zr(this.serializer,y))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ye(W),i=[];return n.forEach(o=>{let s=al(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=yo(e).ee({range:a},(l,f,p)=>{let[m,y,T]=l,M=an(y);m===this.userId&&o.path.isEqual(M)?r=r.add(T):p.done()});i.push(u)}),S.waitFor(i).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=al(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new ye(W);return yo(e).ee({range:s},(u,l,f)=>{let[p,m,y]=u,T=an(m);p===this.userId&&r.isPrefixOf(T)?T.length===i&&(a=a.add(y)):f.done()}).next(()=>this.rr(e,a))}rr(e,n){let r=[],i=[];return n.forEach(o=>{i.push(nr(e).get(o).next(s=>{if(s===null)throw j(35274,{batchId:o});U(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:o}),r.push(Zr(this.serializer,s))}))}),S.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return w0(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),S.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return S.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return yo(e).ee({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=an(o[1]);i.push(u)}else a.done()}).next(()=>{U(i.length===0,56720,{sr:i.map(o=>o.canonicalString())})})})}containsKey(e,n){return I0(e,this.userId,n)}_r(e){return E0(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:oi,lastStreamToken:""})}};function I0(t,e,n){let r=al(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return yo(t).ee({range:o,X:!0},(a,u,l)=>{let[f,p,m]=a;f===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function nr(t){return qe(t,Gt)}function yo(t){return qe(t,To)}function E0(t){return qe(t,ia)}var Vo=class t{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new t(0)}static cr(){return new t(-1)}};var ym=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{let r=new Vo(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>$.fromTimestamp(new Te(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.hr(e,i)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>fo(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(U(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let i=0,o=[];return fo(e).ee((s,a)=>{let u=Gs(a);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>S.waitFor(o)).next(()=>i)}forEachTarget(e,n){return fo(e).ee((r,i)=>{let o=Gs(i);n(o)})}lr(e){return qb(e).get(El).next(n=>(U(n!==null,2888),n))}hr(e,n){return qb(e).put(El,n)}Pr(e,n){return fo(e).put(g0(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){let r=hi(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return fo(e).ee({range:i,index:ET},(s,a,u)=>{let l=Gs(a);Ta(n,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,n,r){let i=[],o=ir(e);return n.forEach(s=>{let a=nt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),S.waitFor(i)}removeMatchingKeys(e,n,r){let i=ir(e);return S.forEach(n,o=>{let s=nt(o.path);return S.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){let r=ir(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=ir(e),o=te();return i.ee({range:r,X:!0},(s,a,u)=>{let l=an(s[1]),f=new F(l);o=o.add(f)}).next(()=>o)}containsKey(e,n){let r=nt(n.path),i=IDBKeyRange.bound([r],[pT(r)],!1,!0),o=0;return ir(e).ee({index:wy,X:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}At(e,n){return fo(e).get(n).next(r=>r?Gs(r):null)}};function fo(t){return qe(t,Co)}function qb(t){return qe(t,si)}function ir(t){return qe(t,So)}var zb="LruGarbageCollector",kF=1048576;function Gb([t,e],[n,r]){let i=W(t,n);return i===0?W(e,r):i}var _m=class{constructor(e){this.Ir=e,this.buffer=new ye(Gb),this.Er=0}dr(){return++this.Er}Ar(e){let n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();Gb(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},Gl=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){P(zb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>R(this,null,function*(){this.Rr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){_r(n)?P(zb,"Ignoring IndexedDB error during garbage collection: ",n):yield Ii(n)}yield this.Vr(3e5)}))}},vm=class{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return S.resolve(Wt.ce);let r=new _m(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(P("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(Hb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(P("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Hb):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,o,s,a,u,l,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(P("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),ho()<=se.DEBUG&&P("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-f}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function D0(t,e){return new vm(t,e)}var wm=class{constructor(e,n){this.db=e,this.garbageCollector=D0(this,n)}gr(e){let n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,i)=>n(i))}addReference(e,n,r){return il(e,r)}removeReference(e,n,r){return il(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return il(e,n)}br(e,n){return function(i,o){let s=!1;return E0(i).te(a=>I0(i,a,o).next(u=>(u&&(s=!0),S.resolve(!u)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.Sr(e,(s,a)=>{if(a<=n){let u=this.br(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,$.min()),ir(e).delete(function(p){return[0,nt(p.path)]}(s))))});i.push(u)}}).next(()=>S.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return il(e,n)}Sr(e,n){let r=ir(e),i,o=Wt.ce;return r.ee({index:wy},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==Wt.ce&&n(new F(an(i)),o),o=l,i=u):o=Wt.ce}).next(()=>{o!==Wt.ce&&n(new F(an(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function il(t,e){return ir(t).put(function(r,i){return{targetId:0,path:nt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var Wl=class{constructor(){this.changes=new Kt(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Je.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?S.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Im=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Kr(e).put(r)}removeEntry(e,n,r){return Kr(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Bl(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=Je.newInvalidDocument(n);return Kr(e).ee({index:cl,range:IDBKeyRange.only(Hs(n))},(i,o)=>{r=this.Cr(n,o)}).next(()=>r)}vr(e,n){let r={size:0,document:Je.newInvalidDocument(n)};return Kr(e).ee({index:cl,range:IDBKeyRange.only(Hs(n))},(i,o)=>{r={document:this.Cr(n,o),size:ql(o)}}).next(()=>r)}getEntries(e,n){let r=xt();return this.Fr(e,n,(i,o)=>{let s=this.Cr(i,o);r=r.insert(i,s)}).next(()=>r)}Mr(e,n){let r=xt(),i=new Se(F.comparator);return this.Fr(e,n,(o,s)=>{let a=this.Cr(o,s);r=r.insert(o,a),i=i.insert(o,ql(s))}).next(()=>({documents:r,Or:i}))}Fr(e,n,r){if(n.isEmpty())return S.resolve();let i=new ye(Qb);n.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(Hs(i.first()),Hs(i.last())),s=i.getIterator(),a=s.getNext();return Kr(e).ee({index:cl,range:o},(u,l,f)=>{let p=F.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&Qb(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?f.j(Hs(a)):f.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){let s=n.path,a=[s.popLast().toArray(),s.lastSegment(),Bl(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Kr(e).J(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let f=xt();for(let p of l){let m=this.Cr(F.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(Sa(n,m)||i.has(m.key))&&(f=f.insert(m.key,m))}return f})}getAllFromCollectionGroup(e,n,r,i){let o=xt(),s=Kb(n,r),a=Kb(n,Ft.max());return Kr(e).ee({index:IT,range:IDBKeyRange.bound(s,a,!0)},(u,l,f)=>{let p=this.Cr(F.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&f.done()}).next(()=>o)}newChangeBuffer(e){return new Em(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Wb(e).get(Og).next(n=>(U(!!n,20021),n))}Dr(e,n){return Wb(e).put(Og,n)}Cr(e,n){if(n){let r=RF(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual($.min())))return r}return Je.newInvalidDocument(e)}};function b0(t){return new Im(t)}var Em=class extends Wl{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Kt(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new ye((o,s)=>W(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.Br.get(o);if(n.push(this.Nr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=Nb(this.Nr.serializer,s);i=i.add(o.path.popLast());let l=ql(u);r+=l-a.size,n.push(this.Nr.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=Nb(this.Nr.serializer,s.convertToNoDocument($.min()));n.push(this.Nr.addEntry(e,o,u))}}),i.forEach(o=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.Nr.updateMetadata(e,r)),S.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:i})=>(i.forEach((o,s)=>{this.Br.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function Wb(t){return qe(t,oa)}function Kr(t){return qe(t,Il)}function Hs(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Kb(t,e){let n=e.documentKey.path.toArray();return[t,Bl(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Qb(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=W(n[o],r[o]),i)return i;return i=W(n.length,r.length),i||(i=W(n[n.length-2],r[r.length-2]),i||W(n[n.length-1],r[r.length-1]))}var Dm=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Kl=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Xs(r.mutation,i,At.empty(),Te.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,te()).next(()=>r))}getLocalViewOfDocuments(e,n,r=te()){let i=cn();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=zs();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=cn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,te()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=xt(),s=Zs(),a=function(){return Zs()}();return n.forEach((u,l)=>{let f=r.get(l.key);i.has(l.key)&&(f===void 0||f.mutation instanceof Qt)?o=o.insert(l.key,l):f!==void 0?(s.set(l.key,f.mutation.getFieldMask()),Xs(f.mutation,l,f.mutation.getFieldMask(),Te.now())):s.set(l.key,At.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,f)=>s.set(l,f)),n.forEach((l,f)=>a.set(l,new Dm(f,s.get(l)??null))),a))}recalculateAndSaveOverlays(e,n){let r=Zs(),i=new Se((s,a)=>s-a),o=te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let f=r.get(u)||At.empty();f=a.applyToLocalView(l,f),r.set(u,f);let p=(i.get(a.batchId)||te()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,f=u.value,p=QT();f.forEach(m=>{if(!o.has(m)){let y=t0(n.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return S.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return F.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):qT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):S.resolve(cn()),a=ta,u=o;return s.next(l=>S.forEach(l,(f,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(f)?S.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{u=u.insert(f,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,te())).next(f=>({batchId:a,changes:KT(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new F(n)).next(r=>{let i=zs();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=zs();return this.indexManager.getCollectionParents(e,o).next(a=>S.forEach(a,u=>{let l=function(p,m){return new hr(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(f=>{f.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let f=l.getKey();s.get(f)===null&&(s=s.insert(f,Je.newInvalidDocument(f)))});let a=zs();return s.forEach((u,l)=>{let f=o.get(u);f!==void 0&&Xs(f.mutation,l,At.empty(),Te.now()),Sa(n,l)&&(a=a.insert(u,l))}),a})}};var bm=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return S.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ft(i.createTime)}}(n)),S.resolve()}getNamedQuery(e,n){return S.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:m0(i.bundledQuery),readTime:ft(i.readTime)}}(n)),S.resolve()}};var Tm=class{constructor(){this.overlays=new Se(F.comparator),this.qr=new Map}getOverlay(e,n){return S.resolve(this.overlays.get(n))}getOverlays(e,n){let r=cn();return S.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.St(e,n,o)}),S.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),S.resolve()}getOverlaysForCollection(e,n,r){let i=cn(),o=n.length+1,s=new F(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return S.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Se((l,f)=>l-f),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let f=o.get(l.largestBatchId);f===null&&(f=cn(),o=o.insert(l.largestBatchId,f)),f.set(l.getKey(),l)}}let a=cn(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,f)=>a.set(l,f)),!(a.size()>=i)););return S.resolve(a)}St(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new ha(n,r));let o=this.qr.get(n);o===void 0&&(o=te(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}};var Cm=class{constructor(){this.sessionToken=He.EMPTY_BYTE_STRING}getSessionToken(e){return S.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,S.resolve()}};var ma=class{constructor(){this.Qr=new ye(ke.$r),this.Ur=new ye(ke.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){let r=new ke(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new ke(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){let n=new F(new pe([])),r=new ke(n,e),i=new ke(n,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let n=new F(new pe([])),r=new ke(n,e),i=new ke(n,e+1),o=te();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new ke(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},ke=class{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return F.comparator(e.key,n.key)||W(e.Yr,n.Yr)}static Kr(e,n){return W(e.Yr,n.Yr)||F.comparator(e.key,n.key)}};var Sm=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ye(ke.$r)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new fa(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Zr=this.Zr.add(new ke(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(s)}lookupMutationBatch(e,n){return S.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.ei(r),o=i<0?0:i;return S.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?oi:this.tr-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new ke(n,0),i=new ke(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{let a=this.Xr(s.Yr);o.push(a)}),S.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ye(W);return n.forEach(i=>{let o=new ke(i,0),s=new ke(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],a=>{r=r.add(a.Yr)})}),S.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;F.isDocumentKey(o)||(o=o.child(""));let s=new ke(new F(o),0),a=new ye(W);return this.Zr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Yr)),!0)},s),S.resolve(this.ti(a))}ti(e){let n=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){U(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return S.forEach(n.mutations,i=>{let o=new ke(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){let r=new ke(n,0),i=this.Zr.firstAfterOrEqual(r);return S.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Am=class{constructor(e){this.ri=e,this.docs=function(){return new Se(F.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return S.resolve(r?r.document.mutableCopy():Je.newInvalidDocument(n))}getEntries(e,n){let r=xt();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Je.newInvalidDocument(i))}),S.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=xt(),s=n.path,a=new F(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:f}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||_y(yT(f),r)<=0||(i.has(f.key)||Sa(n,f))&&(o=o.insert(f.key,f.mutableCopy()))}return S.resolve(o)}getAllFromCollectionGroup(e,n,r,i){j(9500)}ii(e,n){return S.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new xm(this)}getSize(e){return S.resolve(this.size)}},xm=class extends Wl{constructor(e){super(),this.Nr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),S.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}};var Mm=class{constructor(e){this.persistence=e,this.si=new Kt(n=>hi(n),Ta),this.lastRemoteSnapshotVersion=$.min(),this.highestTargetId=0,this.oi=0,this._i=new ma,this.targetCount=0,this.ai=Vo.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),S.resolve()}Pr(e){this.si.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.ai=new Vo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,S.resolve()}updateTargetData(e,n){return this.Pr(n),S.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),S.waitFor(o).next(()=>i)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,n){let r=this.si.get(n)||null;return S.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),S.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),S.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),S.resolve()}getMatchingKeysForTargetId(e,n){let r=this._i.Hr(n);return S.resolve(r)}containsKey(e,n){return S.resolve(this._i.containsKey(n))}};var ya=class{constructor(e,n){this.ui={},this.overlays={},this.ci=new Wt(0),this.li=!1,this.li=!0,this.hi=new Cm,this.referenceDelegate=e(this),this.Pi=new Mm(this),this.indexManager=new gm,this.remoteDocumentCache=function(i){return new Am(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new jl(n),this.Ii=new bm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Tm,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Sm(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){P("MemoryPersistence","Starting transaction:",e);let i=new Nm(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,n){return S.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}},Nm=class extends _l{constructor(e){super(),this.currentSequenceNumber=e}},Ql=class t{constructor(e){this.persistence=e,this.Ri=new ma,this.Vi=null}static mi(e){return new t(e)}get fi(){if(this.Vi)return this.Vi;throw j(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),S.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),S.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),S.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.fi,r=>{let i=F.fromPath(r);return this.gi(e,i).next(o=>{o||n.removeEntry(i,$.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return S.or([()=>S.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}},Yl=class t{constructor(e,n){this.persistence=e,this.pi=new Kt(r=>nt(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=D0(this,n)}static mi(e,n){return new t(e,n)}Ei(){}di(e){return S.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){let n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return S.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?S.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,n).next(a=>{a||(r++,o.removeEntry(s,$.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),S.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),S.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),S.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),S.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ll(e.data.value)),n}br(e,n,r){return S.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.pi.get(n);return S.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Rm=class{constructor(e){this.serializer=e}k(e,n,r,i){let o=new vl("createOrUpgrade",n);r<1&&i>=1&&(function(u){u.createObjectStore(ba)}(e),function(u){u.createObjectStore(ia,{keyPath:Ck}),u.createObjectStore(Gt,{keyPath:ub,autoIncrement:!0}).createIndex(ti,lb,{unique:!0}),u.createObjectStore(To)}(e),Yb(e),function(u){u.createObjectStore(Yr)}(e));let s=S.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore(So),u.deleteObjectStore(Co),u.deleteObjectStore(si)}(e),Yb(e)),s=s.next(()=>function(u){let l=u.store(si),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:$.min().toTimestamp(),targetCount:0};return l.put(El,f)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,l){return l.store(Gt).J().next(p=>{u.deleteObjectStore(Gt),u.createObjectStore(Gt,{keyPath:ub,autoIncrement:!0}).createIndex(ti,lb,{unique:!0});let m=l.store(Gt),y=p.map(T=>m.put(T));return S.waitFor(y)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore(Ao,{keyPath:kk})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.yi(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore(oa)}(e),this.wi(o)))),r<7&&i>=7&&(s=s.next(()=>this.Si(o))),r<8&&i>=8&&(s=s.next(()=>this.bi(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.Di(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore(vd,{keyPath:Fk})})(e),function(u){u.createObjectStore(wd,{keyPath:Vk})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let l=u.createObjectStore(Id,{keyPath:qk});l.createIndex(Fg,zk,{unique:!1}),l.createIndex(TT,Gk,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let l=u.createObjectStore(Il,{keyPath:Ak});l.createIndex(cl,xk),l.createIndex(IT,Mk)}(e)).next(()=>this.Ci(e,o)).next(()=>e.deleteObjectStore(Yr))),r<14&&i>=14&&(s=s.next(()=>this.Fi(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore(Iy,{keyPath:Lk,autoIncrement:!0}).createIndex(kg,jk,{unique:!1}),u.createObjectStore(Ks,{keyPath:Bk}).createIndex(DT,Uk,{unique:!1}),u.createObjectStore(Qs,{keyPath:$k}).createIndex(bT,Hk,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{n.objectStore(Ks).clear()}).next(()=>{n.objectStore(Qs).clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(u){u.createObjectStore(Ey,{keyPath:Wk})})(e)})),r<18&&i>=18&&Wp()&&(s=s.next(()=>{n.objectStore(Ks).clear()}).next(()=>{n.objectStore(Qs).clear()})),s}wi(e){let n=0;return e.store(Yr).ee((r,i)=>{n+=ql(i)}).next(()=>{let r={byteSize:n};return e.store(oa).put(Og,r)})}yi(e){let n=e.store(ia),r=e.store(Gt);return n.J().next(i=>S.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,oi],[o.userId,o.lastAcknowledgedBatchId]);return r.J(ti,s).next(a=>S.forEach(a,u=>{U(u.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:u.batchId});let l=Zr(this.serializer,u);return w0(e,o.userId,l).next(()=>{})}))}))}Si(e){let n=e.store(So),r=e.store(Yr);return e.store(si).get(El).next(i=>{let o=[];return r.ee((s,a)=>{let u=new pe(s),l=function(p){return[0,nt(p)]}(u);o.push(n.get(l).next(f=>f?S.resolve():(p=>n.put({targetId:0,path:nt(p),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>S.waitFor(o))})}bi(e,n){e.createObjectStore(sa,{keyPath:Ok});let r=n.store(sa),i=new ga,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:nt(u)})}};return n.store(Yr).ee({X:!0},(s,a)=>{let u=new pe(s);return o(u.popLast())}).next(()=>n.store(To).ee({X:!0},([s,a,u],l)=>{let f=an(a);return o(f.popLast())}))}Di(e){let n=e.store(Co);return n.ee((r,i)=>{let o=Gs(i),s=g0(this.serializer,o);return n.put(s)})}Ci(e,n){let r=n.store(Yr),i=[];return r.ee((o,s)=>{let a=n.store(Il),u=function(p){return p.document?new F(pe.fromString(p.document.name).popFirst(5)):p.noDocument?F.fromSegments(p.noDocument.path):p.unknownDocument?F.fromSegments(p.unknownDocument.path):j(36783)}(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>S.waitFor(i))}Fi(e,n){let r=n.store(Gt),i=b0(this.serializer),o=new ya(Ql.mi,this.serializer.yt);return r.J().next(s=>{let a=new Map;return s.forEach(u=>{let l=a.get(u.userId)??te();Zr(this.serializer,u).keys().forEach(f=>l=l.add(f)),a.set(u.userId,l)}),S.forEach(a,(u,l)=>{let f=new Be(l),p=Ul.wt(this.serializer,f),m=o.getIndexManager(f),y=zl.wt(f,this.serializer,m,o.referenceDelegate);return new Kl(i,y,p,m).recalculateAndSaveOverlaysForDocumentKeys(new aa(n,Wt.ce),u).next()})})}};function Yb(t){t.createObjectStore(So,{keyPath:Rk}).createIndex(wy,Pk,{unique:!0}),t.createObjectStore(Co,{keyPath:"targetId"}).createIndex(ET,Nk,{unique:!0}),t.createObjectStore(si)}var rr="IndexedDbPersistence",mg=18e5,yg=5e3,_g="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",FF="main",Pm=class t{constructor(e,n,r,i,o,s,a,u,l,f,p=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=o,this.window=s,this.document=a,this.xi=l,this.Oi=f,this.Ni=p,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=m=>Promise.resolve(),!t.v())throw new O(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new wm(this,i),this.$i=n+FF,this.serializer=new jl(u),this.Ui=new bo(this.$i,this.Ni,new Rm(this.serializer)),this.hi=new cm,this.Pi=new ym(this.referenceDelegate,this.serializer),this.remoteDocumentCache=b0(this.serializer),this.Ii=new am,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,f===!1&&lt(rr,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new O(x.FAILED_PRECONDITION,_g);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new Wt(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=n=>R(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(n=>R(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(()=>R(this,null,function*(){this.started&&(yield this.Wi())})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ol(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(_r(e))return P(rr,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return P(rr,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return qs(e).get(so).next(n=>S.resolve(this.es(n)))}ts(e){return ol(e).delete(this.clientId)}ns(){return R(this,null,function*(){if(this.isPrimary&&!this.rs(this.qi,mg)){this.qi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=qe(n,Ao);return r.J().next(i=>{let o=this.ss(i,mg),s=i.filter(a=>o.indexOf(a)===-1);return S.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Ki)for(let n of e)this.Ki.removeItem(this._s(n.clientId))}})}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?S.resolve(!0):qs(e).get(so).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,yg)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new O(x.FAILED_PRECONDITION,_g);return!1}}return!(!this.networkEnabled||!this.inForeground)||ol(e).J().next(r=>this.ss(r,yg).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&P(rr,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return R(this,null,function*(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),yield this.Ui.runTransaction("shutdown","readwrite",[ba,Ao],e=>{let n=new aa(e,Wt.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()})}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>ol(e).J().next(n=>this.ss(n,mg).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return zl.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new mm(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Ul.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){P(rr,"Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",o=function(u){return u===18?Yk:u===17?xT:u===16?Qk:u===15?Dy:u===14?AT:u===13?ST:u===12?Kk:u===11?CT:void j(60245)}(this.Ni),s;return this.Ui.runTransaction(e,i,o,a=>(s=new aa(a,this.ci?this.ci.next():Wt.ce),n==="readwrite-primary"?this.Hi(s).next(u=>!!u||this.Yi(s)).next(u=>{if(!u)throw lt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new O(x.FAILED_PRECONDITION,_T);return r(s)}).next(u=>this.Xi(s).next(()=>u)):this.Is(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Is(e){return qs(e).get(so).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,yg)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new O(x.FAILED_PRECONDITION,_g)})}Xi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return qs(e).put(so,n)}static v(){return bo.v()}Zi(e){let n=qs(e);return n.get(so).next(r=>this.es(r)?(P(rr,"Releasing primary lease."),n.delete(so)):S.resolve())}rs(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(lt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();let e=/(?:Version|Mobile)\/1[456]/;Gp()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{let n=this.Ki?.getItem(this._s(e))!==null;return P(rr,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return lt(rr,"Failed to get zombied client id.",n),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){lt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function qs(t){return qe(t,ba)}function ol(t){return qe(t,Ao)}function VF(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Om=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=te(),i=te();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var km=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Jl=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Gp()?8:vT(zr())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ys(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new km;return this.Ss(e,n,s).next(a=>{if(o.result=a,this.Vs)return this.bs(e,n,s,a.size)})}).next(()=>o.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(ho()<=se.DEBUG&&P("QueryEngine","SDK will not create cache indexes for query:",po(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),S.resolve()):(ho()<=se.DEBUG&&P("QueryEngine","Query:",po(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(ho()<=se.DEBUG&&P("QueryEngine","The SDK decides to create cache indexes for query:",po(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kt(n))):S.resolve())}ys(e,n){if(Eb(n))return S.resolve(null);let r=kt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Ml(n,null,"F"),r=kt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=te(...o);return this.ps.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.Ds(n,a);return this.Cs(n,l,s,u.readTime)?this.ys(e,Ml(n,null,"F")):this.vs(e,l,n,u)}))})))}ws(e,n,r,i){return Eb(n)||i.isEqual($.min())?S.resolve(null):this.ps.getDocuments(e,r).next(o=>{let s=this.Ds(n,o);return this.Cs(n,s,r,i)?S.resolve(null):(ho()<=se.DEBUG&&P("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),po(n)),this.vs(e,s,n,Dk(i,ta)).next(a=>a))})}Ds(e,n){let r=new ye(GT(e));return n.forEach((i,o)=>{Sa(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,r){return ho()<=se.DEBUG&&P("QueryEngine","Using full collection scan to execute query:",po(n)),this.ps.getDocumentsMatchingQuery(e,n,Ft.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Ny="LocalStore",LF=3e8,Fm=class{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Se(W),this.xs=new Kt(o=>hi(o),Ta),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Kl(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}};function T0(t,e,n,r){return new Fm(t,e,n,r)}function C0(t,e){return R(this,null,function*(){let n=z(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=te();for(let l of i){s.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}for(let l of o){a.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Ls:l,removedBatchIds:s,addedBatchIds:a}))})})})}function jF(t,e){let n=z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,u,l,f){let p=l.batch,m=p.keys(),y=S.resolve();return m.forEach(T=>{y=y.next(()=>f.getEntry(u,T)).next(M=>{let N=l.docVersions.get(T);U(N!==null,48541),M.version.compareTo(N)<0&&(p.applyToRemoteDocument(M,l),M.isValidDocument()&&(M.setReadTime(l.commitVersion),f.addEntry(M)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=te();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function S0(t){let e=z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function BF(t,e){let n=z(t),r=e.snapshotVersion,i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;let a=[];e.targetChanges.forEach((f,p)=>{let m=i.get(p);if(!m)return;a.push(n.Pi.removeMatchingKeys(o,f.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(o,f.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(He.EMPTY_BYTE_STRING,$.min()).withLastLimboFreeSnapshotVersion($.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),i=i.insert(p,y),function(M,N,V){return M.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=LF?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(m,y,f)&&a.push(n.Pi.updateTargetData(o,y))});let u=xt(),l=te();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,f))}),a.push(UF(o,s,e.documentUpdates).next(f=>{u=f.ks,l=f.qs})),!r.isEqual($.min())){let f=n.Pi.getLastRemoteSnapshotVersion(o).next(p=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(f)}return S.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Ms=i,o))}function UF(t,e,n){let r=te(),i=te();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=xt();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual($.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):P(Ny,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{ks:s,qs:i}})}function $F(t,e){let n=z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=oi),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function HF(t,e){let n=z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(o=>o?(i=o,S.resolve(i)):n.Pi.allocateTargetId(r).next(s=>(i=new Fo(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}function Vm(t,e,n){return R(this,null,function*(){let r=z(t),i=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!_r(s))throw s;P(Ny,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)})}function Jb(t,e,n){let r=z(t),i=$.min(),o=te();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,f){let p=z(u),m=p.xs.get(f);return m!==void 0?S.resolve(p.Ms.get(m)):p.Pi.getTargetData(l,f)}(r,s,kt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,n?i:$.min(),n?o:te())).next(a=>(qF(r,rF(e),a),{documents:a,Qs:o})))}function qF(t,e,n){let r=t.Os.get(e)||$.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Os.set(e,r)}var Zl=class{constructor(){this.activeTargetIds=uF()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Xl=class{constructor(){this.Mo=new Zl,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Zl,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Lm=class{Oo(e){}shutdown(){}};var Zb="ConnectivityMonitor",ed=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){P(Zb,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){P(Zb,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var sl=null;function jm(){return sl===null?sl=function(){return 268435456+Math.round(2147483648*Math.random())}():sl++,"0x"+sl.toString(16)}var vg="RestConnection",zF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Bm=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Tl?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,o){let s=jm(),a=this.zo(e,n.toUriEncodedString());P(vg,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,o);let{host:l}=new URL(a),f=Ku(l);return this.Jo(e,a,u,r,f).then(p=>(P(vg,`Received RPC '${e}' ${s}: `,p),p),p=>{throw di(vg,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Ho(e,n,r,i,o,s){return this.Go(e,n,r,i,o)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Uo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,n){let r=zF[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}};var Um=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var tt="WebChannelConnection",$m=class extends Bm{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){let s=jm();return new Promise((a,u)=>{let l=new ug;l.setWithCredentials(!0),l.listenOnce(lg.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Bs.NO_ERROR:let p=l.getResponseJson();P(tt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Bs.TIMEOUT:P(tt,`RPC '${e}' ${s} timed out`),u(new O(x.DEADLINE_EXCEEDED,"Request time out"));break;case Bs.HTTP_ERROR:let m=l.getStatus();if(P(tt,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let T=y?.error;if(T&&T.status&&T.message){let M=function(V){let B=V.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(B)>=0?B:x.UNKNOWN}(T.status);u(new O(M,T.message))}else u(new O(x.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new O(x.UNAVAILABLE,"Connection failed."));break;default:j(9055,{l_:e,streamId:s,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{P(tt,`RPC '${e}' ${s} completed.`)}});let f=JSON.stringify(i);P(tt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",f,r,15)})}T_(e,n,r){let i=jm(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=hg(),a=fg(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let f=o.join("");P(tt,`Creating RPC '${e}' stream ${i}: ${f}`,u);let p=s.createWebChannel(f,u);this.I_(p);let m=!1,y=!1,T=new Um({Yo:N=>{y?P(tt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(P(tt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),P(tt,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},Zo:()=>p.close()}),M=(N,V,B)=>{N.listen(V,L=>{try{B(L)}catch(Q){setTimeout(()=>{throw Q},0)}})};return M(p,oo.EventType.OPEN,()=>{y||(P(tt,`RPC '${e}' stream ${i} transport opened.`),T.o_())}),M(p,oo.EventType.CLOSE,()=>{y||(y=!0,P(tt,`RPC '${e}' stream ${i} transport closed`),T.a_(),this.E_(p))}),M(p,oo.EventType.ERROR,N=>{y||(y=!0,di(tt,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),T.a_(new O(x.UNAVAILABLE,"The operation could not be completed")))}),M(p,oo.EventType.MESSAGE,N=>{if(!y){let V=N.data[0];U(!!V,16349);let B=V,L=B?.error||B[0]?.error;if(L){P(tt,`RPC '${e}' stream ${i} received error:`,L);let Q=L.status,J=function(_){let w=Oe[_];if(w!==void 0)return r0(w)}(Q),G=L.message;J===void 0&&(J=x.INTERNAL,G="Unknown error status: "+Q+" with message "+L.message),y=!0,T.a_(new O(J,G)),p.close()}else P(tt,`RPC '${e}' stream ${i} received:`,V),T.u_(V)}}),M(a,dg.STAT_EVENT,N=>{N.stat===tl.PROXY?P(tt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===tl.NOPROXY&&P(tt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.__()},0),T}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}};function GF(){return typeof window<"u"?window:null}function pl(){return typeof document<"u"?document:null}function Td(t){return new nm(t,!0)}var td=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&P("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var Xb="PersistentStream",nd=class{constructor(e,n,r,i,o,s,a,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new td(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}stop(){return R(this,null,function*(){this.x_()&&(yield this.close(0))})}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}k_(){return R(this,null,function*(){if(this.O_())return this.close(0)})}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,n){return R(this,null,function*(){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===x.RESOURCE_EXHAUSTED?(lt(n.toString()),lt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.r_(n)})}K_(){}auth(){this.state=1;let e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{let i=new O(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){let r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(()=>R(this,null,function*(){this.state=0,this.start()}))}z_(e){return P(Xb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(P(Xb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Hm=class extends nd{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let n=TF(this.serializer,e),r=function(o){if(!("targetChange"in o))return $.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?$.min():s.readTime?ft(s.readTime):$.min()}(e);return this.listener.H_(n,r)}Y_(e){let n={};n.database=om(this.serializer),n.addTarget=function(o,s){let a,u=s.target;if(a=Al(u)?{documents:u0(o,u)}:{query:l0(o,u).ft},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=i0(o,s.resumeToken);let l=rm(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo($.min())>0){a.readTime=ko(o,s.snapshotVersion.toTimestamp());let l=rm(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=SF(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){let n={};n.database=om(this.serializer),n.removeTarget=e,this.q_(n)}},qm=class extends nd{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return U(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,U(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){U(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let n=CF(e.writeResults,e.commitTime),r=ft(e.commitTime);return this.listener.na(r,n)}ra(){let e={};e.database=om(this.serializer),this.q_(e)}ea(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>Ll(this.serializer,r))};this.q_(n)}};var zm=class{},Gm=class extends zm{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new O(x.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,im(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new O(x.UNKNOWN,o.toString())})}Ho(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Ho(e,im(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new O(x.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},Wm=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(lt(n),this.aa=!1):P("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var vi="RemoteStore",Km=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(()=>R(this,null,function*(){Ei(this)&&(P(vi,"Restarting streams for network reachability change."),yield function(u){return R(this,null,function*(){let l=z(u);l.Ea.add(4),yield $o(l),l.Ra.set("Unknown"),l.Ea.delete(4),yield Aa(l)})}(this))}))}),this.Ra=new Wm(r,i)}};function Aa(t){return R(this,null,function*(){if(Ei(t))for(let e of t.da)yield e(!0)})}function $o(t){return R(this,null,function*(){for(let e of t.da)yield e(!1)})}function A0(t,e){let n=z(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),ky(n)?Oy(n):Ho(n).O_()&&Py(n,e))}function Ry(t,e){let n=z(t),r=Ho(n);n.Ia.delete(e),r.O_()&&x0(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ei(n)&&n.Ra.set("Unknown"))}function Py(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo($.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ho(t).Y_(e)}function x0(t,e){t.Va.Ue(e),Ho(t).Z_(e)}function Oy(t){t.Va=new tm({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ho(t).start(),t.Ra.ua()}function ky(t){return Ei(t)&&!Ho(t).x_()&&t.Ia.size>0}function Ei(t){return z(t).Ea.size===0}function M0(t){t.Va=void 0}function WF(t){return R(this,null,function*(){t.Ra.set("Online")})}function KF(t){return R(this,null,function*(){t.Ia.forEach((e,n)=>{Py(t,e)})})}function QF(t,e){return R(this,null,function*(){M0(t),ky(t)?(t.Ra.ha(e),Oy(t)):t.Ra.set("Unknown")})}function YF(t,e,n){return R(this,null,function*(){if(t.Ra.set("Online"),e instanceof kl&&e.state===2&&e.cause)try{yield function(i,o){return R(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ia.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ia.delete(a),i.Va.removeTarget(a))})}(t,e)}catch(r){P(vi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield rd(t,r)}else if(e instanceof wo?t.Va.Ze(e):e instanceof Ol?t.Va.st(e):t.Va.tt(e),!n.isEqual($.min()))try{let r=yield S0(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.Va.Tt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let f=o.Ia.get(l);f&&o.Ia.set(l,f.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let f=o.Ia.get(u);if(!f)return;o.Ia.set(u,f.withResumeToken(He.EMPTY_BYTE_STRING,f.snapshotVersion)),x0(o,u);let p=new Fo(f.target,u,l,f.sequenceNumber);Py(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){P(vi,"Failed to raise snapshot:",r),yield rd(t,r)}})}function rd(t,e,n){return R(this,null,function*(){if(!_r(e))throw e;t.Ea.add(1),yield $o(t),t.Ra.set("Offline"),n||(n=()=>S0(t.localStore)),t.asyncQueue.enqueueRetryable(()=>R(this,null,function*(){P(vi,"Retrying IndexedDB access"),yield n(),t.Ea.delete(1),yield Aa(t)}))})}function N0(t,e){return e().catch(n=>rd(t,n,e))}function xa(t){return R(this,null,function*(){let e=z(t),n=mr(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:oi;for(;JF(e);)try{let i=yield $F(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,ZF(e,i)}catch(i){yield rd(e,i)}R0(e)&&P0(e)})}function JF(t){return Ei(t)&&t.Ta.length<10}function ZF(t,e){t.Ta.push(e);let n=mr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function R0(t){return Ei(t)&&!mr(t).x_()&&t.Ta.length>0}function P0(t){mr(t).start()}function XF(t){return R(this,null,function*(){mr(t).ra()})}function eV(t){return R(this,null,function*(){let e=mr(t);for(let n of t.Ta)e.ea(n.mutations)})}function tV(t,e,n){return R(this,null,function*(){let r=t.Ta.shift(),i=Zg.from(r,e,n);yield N0(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield xa(t)})}function nV(t,e){return R(this,null,function*(){e&&mr(t).X_&&(yield function(r,i){return R(this,null,function*(){if(function(s){return mF(s)&&s!==x.ABORTED}(i.code)){let o=r.Ta.shift();mr(r).B_(),yield N0(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield xa(r)}})}(t,e)),R0(t)&&P0(t)})}function eT(t,e){return R(this,null,function*(){let n=z(t);n.asyncQueue.verifyOperationInProgress(),P(vi,"RemoteStore received new credentials");let r=Ei(n);n.Ea.add(3),yield $o(n),r&&n.Ra.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),yield Aa(n)})}function rV(t,e){return R(this,null,function*(){let n=z(t);e?(n.Ea.delete(2),yield Aa(n)):e||(n.Ea.add(2),yield $o(n),n.Ra.set("Unknown"))})}function Ho(t){return t.ma||(t.ma=function(n,r,i){let o=z(n);return o.sa(),new Hm(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Xo:WF.bind(null,t),t_:KF.bind(null,t),r_:QF.bind(null,t),H_:YF.bind(null,t)}),t.da.push(e=>R(this,null,function*(){e?(t.ma.B_(),ky(t)?Oy(t):t.Ra.set("Unknown")):(yield t.ma.stop(),M0(t))}))),t.ma}function mr(t){return t.fa||(t.fa=function(n,r,i){let o=z(n);return o.sa(),new qm(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:XF.bind(null,t),r_:nV.bind(null,t),ta:eV.bind(null,t),na:tV.bind(null,t)}),t.da.push(e=>R(this,null,function*(){e?(t.fa.B_(),yield xa(t)):(yield t.fa.stop(),t.Ta.length>0&&(P(vi,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}var Qm=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Ot,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new O(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Fy(t,e){if(lt("AsyncQueue",`${e}: ${t}`),_r(t))return new O(x.UNAVAILABLE,`${e}: ${t}`);throw t}var id=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||F.comparator(n.key,r.key):(n,r)=>F.comparator(n.key,r.key),this.keyedMap=zs(),this.sortedSet=new Se(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var od=class{constructor(){this.ga=new Se(F.comparator)}track(e){let n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):j(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){let e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}},Lo=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,id.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Ym=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},Jm=class{constructor(){this.queries=tT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){let i=z(n),o=i.queries;i.queries=tT(),o.forEach((s,a)=>{for(let u of a.Sa)u.onError(r)})})(this,new O(x.ABORTED,"Firestore shutting down"))}};function tT(){return new Kt(t=>zT(t),bd)}function Vy(t,e){return R(this,null,function*(){let n=z(t),r=3,i=e.query,o=n.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new Ym,r=e.Da()?0:1);try{switch(r){case 0:o.wa=yield n.onListen(i,!0);break;case 1:o.wa=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=Fy(s,`Initialization of query '${po(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&jy(n)})}function Ly(t,e){return R(this,null,function*(){let n=z(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function iV(t,e){let n=z(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.Sa)a.Fa(i)&&(r=!0);s.wa=i}}r&&jy(n)}function oV(t,e,n){let r=z(t),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(n);r.queries.delete(e)}function jy(t){t.Ca.forEach(e=>{e.next()})}var Zm,nT;(nT=Zm||(Zm={})).Ma="default",nT.Cache="cache";var _a=class{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Lo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;let r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Lo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Zm.Cache}};var sd=class{constructor(e){this.key=e}},ad=class{constructor(e){this.key=e}},Xm=class{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=te(),this.mutatedKeys=te(),this.eu=GT(e),this.tu=new id(this.eu)}get nu(){return this.Ya}ru(e,n){let r=n?n.iu:new od,i=n?n.tu:this.tu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{let m=i.get(f),y=Sa(this.query,p)?p:null,T=!!m&&this.mutatedKeys.has(m.key),M=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),N=!1;m&&y?m.data.isEqual(y.data)?T!==M&&(r.track({type:3,doc:y}),N=!0):this.su(m,y)||(r.track({type:2,doc:y}),N=!0,(u&&this.eu(y,u)>0||l&&this.eu(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),N=!0):m&&!y&&(r.track({type:1,doc:m}),N=!0,(u||l)&&(a=!0)),N&&(y?(s=s.add(y),o=M?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{tu:s,iu:r,Cs:a,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((f,p)=>function(y,T){let M=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return j(20277,{Rt:N})}};return M(y)-M(T)}(f.type,p.type)||this.eu(f.doc,p.doc)),this.ou(r),i=i??!1;let a=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,l=u!==this.Za;return this.Za=u,s.length!==0||l?{snapshot:new Lo(this.query,e.tu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new od,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=te(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new ad(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new sd(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=te();let n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Lo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},By="SyncEngine",ey=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},ty=class{constructor(e){this.key=e,this.hu=!1}},ny=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Kt(a=>zT(a),bd),this.Iu=new Map,this.Eu=new Set,this.du=new Se(F.comparator),this.Au=new Map,this.Ru=new ma,this.Vu={},this.mu=new Map,this.fu=Vo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};function sV(t,e,n=!0){return R(this,null,function*(){let r=j0(t),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=yield O0(r,e,n,!0),i})}function aV(t,e){return R(this,null,function*(){let n=j0(t);yield O0(n,e,!0,!1)})}function O0(t,e,n,r){return R(this,null,function*(){let i=yield HF(t.localStore,kt(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=yield cV(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&A0(t.remoteStore,i),a})}function cV(t,e,n,r,i){return R(this,null,function*(){t.pu=(p,m,y)=>function(M,N,V,B){return R(this,null,function*(){let L=N.view.ru(V);L.Cs&&(L=yield Jb(M.localStore,N.query,!1).then(({documents:I})=>N.view.ru(I,L)));let Q=B&&B.targetChanges.get(N.targetId),J=B&&B.targetMismatches.get(N.targetId)!=null,G=N.view.applyChanges(L,M.isPrimaryClient,Q,J);return iT(M,N.targetId,G.au),G.snapshot})}(t,p,m,y);let o=yield Jb(t.localStore,e,!0),s=new Xm(e,o.Qs),a=s.ru(o.documents),u=pa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);iT(t,n,l.au);let f=new ey(e,n,s);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),l.snapshot})}function uV(t,e,n){return R(this,null,function*(){let r=z(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!bd(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Vm(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Ry(r.remoteStore,i.targetId),ry(r,i.targetId)}).catch(Ii))):(ry(r,i.targetId),yield Vm(r.localStore,i.targetId,!0))})}function lV(t,e){return R(this,null,function*(){let n=z(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ry(n.remoteStore,r.targetId))})}function dV(t,e,n){return R(this,null,function*(){let r=B0(t);try{let i=yield function(s,a){let u=z(s),l=Te.now(),f=a.reduce((y,T)=>y.add(T.key),te()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let T=xt(),M=te();return u.Ns.getEntries(y,f).next(N=>{T=N,T.forEach((V,B)=>{B.isValidDocument()||(M=M.add(V))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,T)).next(N=>{p=N;let V=[];for(let B of a){let L=gF(B,p.get(B.key).overlayedDocument);L!=null&&V.push(new Qt(B.key,L,LT(L.value.mapValue),Ye.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,V,a)}).next(N=>{m=N;let V=N.applyToLocalDocumentSet(p,M);return u.documentOverlayCache.saveOverlays(y,N.batchId,V)})}).then(()=>({batchId:m.batchId,changes:KT(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Vu[s.currentUser.toKey()];l||(l=new Se(W)),l=l.insert(a,u),s.Vu[s.currentUser.toKey()]=l}(r,i.batchId,n),yield Ma(r,i.changes),yield xa(r.remoteStore)}catch(i){let o=Fy(i,"Failed to persist write");n.reject(o)}})}function k0(t,e){return R(this,null,function*(){let n=z(t);try{let r=yield BF(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Au.get(o);s&&(U(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?U(s.hu,14607):i.removedDocuments.size>0&&(U(s.hu,42227),s.hu=!1))}),yield Ma(n,r,e)}catch(r){yield Ii(r)}})}function rT(t,e,n){let r=z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Tu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=z(s);u.onlineState=a;let l=!1;u.queries.forEach((f,p)=>{for(let m of p.Sa)m.va(a)&&(l=!0)}),l&&jy(u)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function fV(t,e,n){return R(this,null,function*(){let r=z(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new Se(F.comparator);s=s.insert(o,Je.newNoDocument(o,$.min()));let a=te().add(o),u=new Pl($.min(),new Map,new Se(W),s,a);yield k0(r,u),r.du=r.du.remove(o),r.Au.delete(e),Uy(r)}else yield Vm(r.localStore,e,!1).then(()=>ry(r,e,n)).catch(Ii)})}function hV(t,e){return R(this,null,function*(){let n=z(t),r=e.batch.batchId;try{let i=yield jF(n.localStore,e);V0(n,r,null),F0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Ma(n,i)}catch(i){yield Ii(i)}})}function pV(t,e,n){return R(this,null,function*(){let r=z(t);try{let i=yield function(s,a){let u=z(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let f;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(U(p!==null,37113),f=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,f,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,f)).next(()=>u.localDocuments.getDocuments(l,f))})}(r.localStore,e);V0(r,e,n),F0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Ma(r,i)}catch(i){yield Ii(i)}})}function F0(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function V0(t,e,n){let r=z(t),i=r.Vu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function ry(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||L0(t,r)})}function L0(t,e){t.Eu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(Ry(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Uy(t))}function iT(t,e,n){for(let r of n)r instanceof sd?(t.Ru.addReference(r.key,e),gV(t,r)):r instanceof ad?(P(By,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||L0(t,r.key)):j(19791,{wu:r})}function gV(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(P(By,"New document in limbo: "+n),t.Eu.add(r),Uy(t))}function Uy(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Eu.values().next().value;t.Eu.delete(e);let n=new F(pe.fromString(e)),r=t.fu.next();t.Au.set(r,new ty(n)),t.du=t.du.insert(n,r),A0(t.remoteStore,new Fo(kt(Ca(n.path)),r,"TargetPurposeLimboResolution",Wt.ce))}}function Ma(t,e,n){return R(this,null,function*(){let r=z(t),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((a,u)=>{s.push(r.pu(u,e,n).then(l=>{if((l||n)&&r.isPrimaryClient){let f=l?!l.fromCache:n?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);let f=Om.As(u.targetId,l);o.push(f)}}))}),yield Promise.all(s),r.Pu.H_(i),yield function(u,l){return R(this,null,function*(){let f=z(u);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>S.forEach(l,m=>S.forEach(m.Es,y=>f.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>S.forEach(m.ds,y=>f.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!_r(p))throw p;P(Ny,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=f.Ms.get(m),T=y.snapshotVersion,M=y.withLastLimboFreeSnapshotVersion(T);f.Ms=f.Ms.insert(m,M)}}})}(r.localStore,o))})}function mV(t,e){return R(this,null,function*(){let n=z(t);if(!n.currentUser.isEqual(e)){P(By,"User change. New user:",e.toKey());let r=yield C0(n.localStore,e);n.currentUser=e,function(o,s){o.mu.forEach(a=>{a.forEach(u=>{u.reject(new O(x.CANCELLED,s))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ma(n,r.Ls)}})}function yV(t,e){let n=z(t),r=n.Au.get(e);if(r&&r.hu)return te().add(r.key);{let i=te(),o=n.Iu.get(e);if(!o)return i;for(let s of o){let a=n.Tu.get(s);i=i.unionWith(a.view.nu)}return i}}function j0(t){let e=z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=k0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fV.bind(null,e),e.Pu.H_=iV.bind(null,e.eventManager),e.Pu.yu=oV.bind(null,e.eventManager),e}function B0(t){let e=z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pV.bind(null,e),e}var $y=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return R(this,null,function*(){this.serializer=Td(n.databaseInfo.databaseId),this.sharedClientState=this.Du(n),this.persistence=this.Cu(n),yield this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Fu(n,this.localStore),this.indexBackfillerScheduler=this.Mu(n,this.localStore)})}Fu(n,r){return null}Mu(n,r){return null}vu(n){return T0(this.persistence,new Jl,n.initialUser,this.serializer)}Cu(n){return new ya(Ql.mi,this.serializer)}Du(n){return new Xl}terminate(){return R(this,null,function*(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})(),iy=class extends $y{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){U(this.persistence.referenceDelegate instanceof Yl,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Gl(r,e.asyncQueue,n)}Cu(e){let n=this.cacheSizeBytes!==void 0?wt.withCacheSize(this.cacheSizeBytes):wt.DEFAULT;return new ya(r=>Yl.mi(r,n),this.serializer)}},oy=class t extends $y{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return R(this,null,function*(){yield Y_(t.prototype,this,"initialize").call(this,e),yield this.xu.initialize(this,e),yield B0(this.xu.syncEngine),yield xa(this.xu.remoteStore),yield this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}vu(e){return T0(this.persistence,new Jl,e.initialUser,this.serializer)}Fu(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new Gl(r,e.asyncQueue,n)}Mu(e,n){let r=new Pg(n,this.persistence);return new Rg(e.asyncQueue,r)}Cu(e){let n=VF(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?wt.withCacheSize(this.cacheSizeBytes):wt.DEFAULT;return new Pm(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,GF(),pl(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new Xl}};var U0=(()=>{class t{initialize(n,r){return R(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>rT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=mV.bind(null,this.syncEngine),yield rV(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new Jm}()}createDatastore(n){let r=Td(n.databaseInfo.databaseId),i=function(s){return new $m(s)}(n.databaseInfo);return function(s,a,u,l){return new Gm(s,a,u,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,o,s,a,u){return new Km(i,o,s,a,u)}(this.localStore,this.datastore,n.asyncQueue,r=>rT(this.syncEngine,r,0),function(){return ed.v()?new ed:new Lm}())}createSyncEngine(n,r){return function(o,s,a,u,l,f,p){let m=new ny(o,s,a,u,l,f);return p&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return R(this,null,function*(){yield function(r){return R(this,null,function*(){let i=z(r);P(vi,"RemoteStore shutting down."),i.Ea.add(5),yield $o(i),i.Aa.shutdown(),i.Ra.set("Unknown")})}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()})}}return t.provider={build:()=>new t},t})();var va=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):lt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var yr="FirestoreClient",sy=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Be.UNAUTHENTICATED,this.clientId=ea.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>R(this,null,function*(){P(yr,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(P(yr,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ot;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>R(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Fy(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function wg(t,e){return R(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),P(yr,"Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>R(this,null,function*(){r.isEqual(i)||(yield C0(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function oT(t,e){return R(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield $0(t);P(yr,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>eT(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>eT(e.remoteStore,i)),t._onlineComponents=e})}function $0(t){return R(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){P(yr,"Using user provided OfflineComponentProvider");try{yield wg(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;di("Error using user provided cache. Falling back to memory cache: "+n),yield wg(t,new $y)}}else P(yr,"Using default OfflineComponentProvider"),yield wg(t,new iy(void 0));return t._offlineComponents})}function Hy(t){return R(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(P(yr,"Using user provided OnlineComponentProvider"),yield oT(t,t._uninitializedComponentsProvider._online)):(P(yr,"Using default OnlineComponentProvider"),yield oT(t,new U0))),t._onlineComponents})}function H0(t){return $0(t).then(e=>e.persistence)}function q0(t){return Hy(t).then(e=>e.remoteStore)}function _V(t){return Hy(t).then(e=>e.syncEngine)}function cd(t){return R(this,null,function*(){let e=yield Hy(t),n=e.eventManager;return n.onListen=sV.bind(null,e.syncEngine),n.onUnlisten=uV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=aV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=lV.bind(null,e.syncEngine),n})}function vV(t){return t.asyncQueue.enqueue(()=>R(this,null,function*(){let e=yield H0(t),n=yield q0(t);return e.setNetworkEnabled(!0),function(i){let o=z(i);return o.Ea.delete(0),Aa(o)}(n)}))}function wV(t){return t.asyncQueue.enqueue(()=>R(this,null,function*(){let e=yield H0(t),n=yield q0(t);return e.setNetworkEnabled(!1),function(i){return R(this,null,function*(){let o=z(i);o.Ea.add(0),yield $o(o),o.Ra.set("Offline")})}(n)}))}function IV(t,e,n={}){let r=new Ot;return t.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(o,s,a,u,l){let f=new va({next:m=>{f.Nu(),s.enqueueAndForget(()=>Ly(o,p));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new O(x.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?l.reject(new O(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new _a(Ca(a.path),f,{includeMetadataChanges:!0,qa:!0});return Vy(o,p)}(yield cd(t),t.asyncQueue,e,n,r)})),r.promise}function EV(t,e,n={}){let r=new Ot;return t.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(o,s,a,u,l){let f=new va({next:m=>{f.Nu(),s.enqueueAndForget(()=>Ly(o,p)),m.fromCache&&u.source==="server"?l.reject(new O(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new _a(a,f,{includeMetadataChanges:!0,qa:!0});return Vy(o,p)}(yield cd(t),t.asyncQueue,e,n,r)})),r.promise}function z0(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var sT=new Map;var G0="firestore.googleapis.com",aT=!0,ud=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new O(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=G0,this.ssl=aT}else this.host=e.host,this.ssl=e.ssl??aT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=v0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<kF)throw new O(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ik("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=z0(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new O(x.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new O(x.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new O(x.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},jo=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ud({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new O(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new O(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ud(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Eg;switch(r.type){case"firstParty":return new Cg(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new O(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return R(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=sT.get(n);r&&(P("ComponentProvider","Removing Datastore"),sT.delete(n),r.terminate())}(this),Promise.resolve()}};function DV(t,e,n,r={}){t=Ke(t,jo);let i=Ku(e),o=t._getSettings(),s=Re(re({},o),{emulatorOptions:t._getEmulatorOptions()}),a=`${e}:${n}`;i&&(MD(`https://${a}`),RD("Firestore",!0)),o.host!==G0&&o.host!==a&&di("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Re(re({},o),{host:a,ssl:i,emulatorOptions:r});if(!Gr(u,s)&&(t._setSettings(u),r.mockUserToken)){let l,f;if(typeof r.mockUserToken=="string")l=r.mockUserToken,f=Be.MOCK_USER;else{l=ND(r.mockUserToken,t._app?.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new O(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Be(p)}t._authCredentials=new Dg(new gl(l,f))}}var Mn=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},$e=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Da(n,t._jsonSchema))return new t(e,r||null,new F(pe.fromString(n.referencePath)))}};$e._jsonSchemaVersion="firestore/documentReference/1.0",$e._jsonSchema={type:Fe("string",$e._jsonSchemaVersion),referencePath:Fe("string")};var sr=class t extends Mn{constructor(e,n,r){super(e,n,Ca(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new $e(this.firestore,null,new F(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function W0(t,e,...n){if(t=Ct(t),gT("collection","path",e),t instanceof jo){let r=pe.fromString(e,...n);return ib(r),new sr(t,null,r)}{if(!(t instanceof $e||t instanceof sr))throw new O(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(pe.fromString(e,...n));return ib(r),new sr(t.firestore,null,r)}}function qo(t,e,...n){if(t=Ct(t),arguments.length===1&&(e=ea.newId()),gT("doc","path",e),t instanceof jo){let r=pe.fromString(e,...n);return rb(r),new $e(t,null,new F(r))}{if(!(t instanceof $e||t instanceof sr))throw new O(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(pe.fromString(e,...n));return rb(r),new $e(t.firestore,t instanceof sr?t.converter:null,new F(r))}}var cT="AsyncQueue",ld=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new td(this,"async_queue_retry"),this._c=()=>{let r=pl();r&&P(cT,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let n=pl();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let n=pl();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let n=new Ot;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}lc(){return R(this,null,function*(){if(this.Xu.length!==0){try{yield this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!_r(e))throw e;P(cT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}})}cc(e){let n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,lt("INTERNAL UNHANDLED ERROR: ",uT(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);let i=Qm.createAndSchedule(this,e,n,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&j(47125,{Pc:uT(this.nc)})}verifyOperationInProgress(){}Tc(){return R(this,null,function*(){let e;do e=this.ac,yield e;while(e!==this.ac)})}Ic(e){for(let n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let n=this.tc.indexOf(e);this.tc.splice(n,1)}};function uT(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function lT(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var ht=class extends jo{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new ld,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return R(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new ld(e),this._firestoreClient=void 0,yield e}})}};function K0(t,e){let n=typeof t=="object"?t:Xu(),r=typeof t=="string"?t:e||Tl,i=WD(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=xD("firestore");o&&DV(i,...o)}return i}function Di(t){if(t._terminated)throw new O(x.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Q0(t),t._firestoreClient}function Q0(t){let e=t._freezeSettings(),n=function(i,o,s,a){return new Vg(i,o,s,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,z0(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)}(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new sy(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}}(t._componentsProvider))}function Y0(t,e){di("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings();return bV(t,U0.provider,{build:r=>new oy(r,n.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function bV(t,e,n){if((t=Ke(t,ht))._firestoreClient||t._terminated)throw new O(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new O(x.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},Q0(t)}function R3(t){return vV(Di(t=Ke(t,ht)))}function J0(t){return wV(Di(t=Ke(t,ht)))}var ar=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(He.fromBase64String(e))}catch(n){throw new O(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(He.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Da(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};ar._jsonSchemaVersion="firestore/bytes/1.0",ar._jsonSchema={type:Fe("string",ar._jsonSchemaVersion),bytes:Fe("string")};var wi=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new O(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ue(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Bo=class{constructor(e){this._methodName=e}};var cr=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new O(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new O(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return W(this._lat,e._lat)||W(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(Da(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};cr._jsonSchemaVersion="firestore/geoPoint/1.0",cr._jsonSchema={type:Fe("string",cr._jsonSchemaVersion),latitude:Fe("number"),longitude:Fe("number")};var ur=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Da(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new O(x.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};ur._jsonSchemaVersion="firestore/vectorValue/1.0",ur._jsonSchema={type:Fe("string",ur._jsonSchemaVersion),vectorValues:Fe("object")};var TV=/^__.*__$/,ay=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Qt(e,this.data,this.fieldMask,n,this.fieldTransforms):new gr(e,this.data,n,this.fieldTransforms)}},dd=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Qt(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function Z0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw j(40011,{Ac:t})}}var fd=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new t(re(re({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){let n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return pd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Z0(this.Ac)&&TV.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},cy=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Td(e)}Cc(e,n,r,i=!1){return new fd({Ac:e,methodName:n,Dc:r,path:Ue.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Na(t){let e=t._freezeSettings(),n=Td(t._databaseId);return new cy(t._databaseId,!!e.ignoreUndefinedProperties,n)}function qy(t,e,n,r,i,o={}){let s=t.Cc(o.merge||o.mergeFields?2:0,e,n,i);zy("Data must be an object, but it was:",s,r);let a=tC(r,s),u,l;if(o.merge)u=new At(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let f=[];for(let p of o.mergeFields){let m=ly(e,p,n);if(!s.contains(m))throw new O(x.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);rC(f,m)||f.push(m)}u=new At(f),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new ay(new dt(a),u,l)}var hd=class t extends Bo{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function CV(t,e,n){return new fd({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var uy=class t extends Bo{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){let n=CV(this,e,!0),r=this.vc.map(o=>zo(o,n)),i=new xn(r);return new Nl(e.path,i)}isEqual(e){return e instanceof t&&Gr(this.vc,e.vc)}};function X0(t,e,n,r){let i=t.Cc(1,e,n);zy("Data must be an object, but it was:",i,r);let o=[],s=dt.empty();vr(r,(u,l)=>{let f=Gy(e,u,n);l=Ct(l);let p=i.yc(f);if(l instanceof hd)o.push(f);else{let m=zo(l,p);m!=null&&(o.push(f),s.set(f,m))}});let a=new At(o);return new dd(s,a,i.fieldTransforms)}function eC(t,e,n,r,i,o){let s=t.Cc(1,e,n),a=[ly(e,r,n)],u=[i];if(o.length%2!=0)throw new O(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(ly(e,o[m])),u.push(o[m+1]);let l=[],f=dt.empty();for(let m=a.length-1;m>=0;--m)if(!rC(l,a[m])){let y=a[m],T=u[m];T=Ct(T);let M=s.yc(y);if(T instanceof hd)l.push(y);else{let N=zo(T,M);N!=null&&(l.push(y),f.set(y,N))}}let p=new At(l);return new dd(f,p,s.fieldTransforms)}function SV(t,e,n,r=!1){return zo(n,t.Cc(r?4:3,e))}function zo(t,e){if(nC(t=Ct(t)))return zy("Unsupported field value:",e,t),tC(t,e);if(t instanceof Bo)return function(r,i){if(!Z0(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=zo(a,i.wc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=Ct(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return lF(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Te.fromDate(r);return{timestampValue:ko(i.serializer,o)}}if(r instanceof Te){let o=new Te(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ko(i.serializer,o)}}if(r instanceof cr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ar)return{bytesValue:i0(i.serializer,r._byteString)};if(r instanceof $e){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:xy(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ur)return function(s,a){return{mapValue:{fields:{[Ty]:{stringValue:Cy},[Mo]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Sc("VectorValues must only contain numeric values.");return Ay(a.serializer,l)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${yd(r)}`)}(t,e)}function tC(t,e){let n={};return MT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vr(t,(r,i)=>{let o=zo(i,e.mc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function nC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Te||t instanceof cr||t instanceof ar||t instanceof $e||t instanceof Bo||t instanceof ur)}function zy(t,e,n){if(!nC(n)||!mT(n)){let r=yd(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function ly(t,e,n){if((e=Ct(e))instanceof wi)return e._internalPath;if(typeof e=="string")return Gy(t,e);throw pd("Field path arguments must be of type string or ",t,!1,void 0,n)}var AV=new RegExp("[~\\*/\\[\\]]");function Gy(t,e,n){if(e.search(AV)>=0)throw pd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new wi(...e.split("."))._internalPath}catch{throw pd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function pd(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new O(x.INVALID_ARGUMENT,a+t+u)}function rC(t,e){return t.some(n=>n.isEqual(e))}var gd=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new $e(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new dy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Cd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},dy=class extends gd{data(){return super.data()}};function Cd(t,e){return typeof e=="string"?Gy(t,e):e instanceof wi?e._internalPath:e._delegate._internalPath}function iC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new O(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var wa=class{},Ia=class extends wa{};function oC(t,e,...n){let r=[];e instanceof wa&&r.push(e),r=r.concat(n),function(o){let s=o.filter(u=>u instanceof fy).length,a=o.filter(u=>u instanceof md).length;if(s>1||s>0&&a>0)throw new O(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var md=class t extends Ia{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return aC(e._query,n),new Mn(e.firestore,e.converter,Yg(e._query,n))}_parse(e){let n=Na(e.firestore);return function(o,s,a,u,l,f,p){let m;if(l.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new O(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){fT(p,f);let T=[];for(let M of p)T.push(dT(u,o,M));m={arrayValue:{values:T}}}else m=dT(u,o,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||fT(p,f),m=SV(a,s,p,f==="in"||f==="not-in");return ie.create(l,f,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function P3(t,e,n){let r=e,i=Cd("where",t);return md._create(i,r,n)}var fy=class t extends wa{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ge.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)aC(s,u),s=Yg(s,u)}(e._query,n),new Mn(e.firestore,e.converter,Yg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var hy=class t extends Ia{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,o,s){if(i.startAt!==null)throw new O(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new O(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fi(o,s)}(e._query,this._field,this._direction);return new Mn(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new hr(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function sC(t,e="asc"){let n=e,r=Cd("orderBy",t);return hy._create(r,n)}var py=class t extends Ia{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new Mn(e.firestore,e.converter,Ml(e._query,this._limit,this._limitType))}};function O3(t){return Ek("limit",t),py._create("limit",t,"F")}function dT(t,e,n){if(typeof(n=Ct(n))=="string"){if(n==="")throw new O(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qT(e)&&n.indexOf("/")!==-1)throw new O(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(pe.fromString(n));if(!F.isDocumentKey(r))throw new O(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return la(t,new F(r))}if(n instanceof $e)return la(t,n._key);throw new O(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yd(n)}.`)}function fT(t,e){if(!Array.isArray(t)||t.length===0)throw new O(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function aC(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new O(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new O(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var gy=class{convertValue(e,n="none"){switch(lr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(An(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw j(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return vr(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){let n=e.fields?.[Mo].arrayValue?.values?.map(r=>be(r.doubleValue));return new ur(n)}convertGeoPoint(e){return new cr(be(e.latitude),be(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Ed(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ca(e));default:return null}}convertTimestamp(e){let n=Sn(e);return new Te(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=pe.fromString(e);U(p0(r),9688,{name:e});let i=new xo(r.get(1),r.get(3)),o=new F(r.popFirst(5));return i.isEqual(n)||lt(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function Wy(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var ri=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ci=class t extends gd{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Io(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Cd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new O(x.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};ci._jsonSchemaVersion="firestore/documentSnapshot/1.0",ci._jsonSchema={type:Fe("string",ci._jsonSchemaVersion),bundleSource:Fe("string","DocumentSnapshot"),bundleName:Fe("string"),bundle:Fe("string")};var Io=class extends ci{data(e={}){return super.data(e)}},ui=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ri(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Io(this._firestore,this._userDataWriter,r.key,r,new ri(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new O(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Io(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ri(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Io(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ri(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,f=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),f=s.indexOf(a.doc.key)),{type:xV(a.type),doc:u,oldIndex:l,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new O(x.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ea.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function xV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return j(61501,{type:t})}}function cC(t){t=Ke(t,$e);let e=Ke(t.firestore,ht);return IV(Di(e),t._key).then(n=>hC(e,t,n))}ui._jsonSchemaVersion="firestore/querySnapshot/1.0",ui._jsonSchema={type:Fe("string",ui._jsonSchemaVersion),bundleSource:Fe("string","QuerySnapshot"),bundleName:Fe("string"),bundle:Fe("string")};var Ea=class extends gy{constructor(e){super(),this.firestore=e}convertBytes(e){return new ar(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new $e(this.firestore,null,n)}};function uC(t){t=Ke(t,Mn);let e=Ke(t.firestore,ht),n=Di(e),r=new Ea(e);return iC(t._query),EV(n,t._query).then(i=>new ui(e,r,t,i))}function lC(t,e,n){t=Ke(t,$e);let r=Ke(t.firestore,ht),i=Wy(t.converter,e,n);return Ra(r,[qy(Na(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ye.none())])}function dC(t,e,n,...r){t=Ke(t,$e);let i=Ke(t.firestore,ht),o=Na(i),s;return s=typeof(e=Ct(e))=="string"||e instanceof wi?eC(o,"updateDoc",t._key,e,n,r):X0(o,"updateDoc",t._key,e),Ra(i,[s.toMutation(t._key,Ye.exists(!0))])}function fC(t){return Ra(Ke(t.firestore,ht),[new mi(t._key,Ye.none())])}function k3(t,e){let n=Ke(t.firestore,ht),r=qo(t),i=Wy(t.converter,e);return Ra(n,[qy(Na(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ye.exists(!1))]).then(()=>r)}function F3(t,...e){t=Ct(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||lT(e[r])||(n=e[r++]);let i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(lT(e[r])){let u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let o,s,a;if(t instanceof $e)s=Ke(t.firestore,ht),a=Ca(t._key.path),o={next:u=>{e[r]&&e[r](hC(s,t,u))},error:e[r+1],complete:e[r+2]};else{let u=Ke(t,Mn);s=Ke(u.firestore,ht),a=u._query;let l=new Ea(s);o={next:f=>{e[r]&&e[r](new ui(s,l,u,f))},error:e[r+1],complete:e[r+2]},iC(t._query)}return function(l,f,p,m){let y=new va(m),T=new _a(f,y,p);return l.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return Vy(yield cd(l),T)})),()=>{y.Nu(),l.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return Ly(yield cd(l),T)}))}}(Di(s),a,i,o)}function Ra(t,e){return function(r,i){let o=new Ot;return r.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return dV(yield _V(r),i,o)})),o.promise}(Di(t),e)}function hC(t,e,n){let r=n.docs.get(e._key),i=new Ea(t);return new ci(t,i,e._key,r,new ri(n.hasPendingWrites,n.fromCache),e.converter)}var my=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Na(e)}set(e,n,r){this._verifyNotCommitted();let i=Ig(e,this._firestore),o=Wy(i.converter,n,r),s=qy(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Ye.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let o=Ig(e,this._firestore),s;return s=typeof(n=Ct(n))=="string"||n instanceof wi?eC(this._dataReader,"WriteBatch.update",o._key,n,r,i):X0(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,Ye.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=Ig(e,this._firestore);return this._mutations=this._mutations.concat(new mi(n._key,Ye.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new O(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ig(t,e){if((t=Ct(t)).firestore!==e)throw new O(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function V3(...t){return new uy("arrayUnion",t)}function L3(t){return Di(t=Ke(t,ht)),new my(t,e=>Ra(t,e))}(function(e,n=!0){(function(i){Uo=i})(QD),Ls(new En("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new ht(new bg(r.getProvider("auth-internal")),new Sg(s,r.getProvider("app-check-internal")),function(l,f){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new O(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xo(l.options.projectId,f)}(s,i),s);return o=re({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),er(eb,tb,e),er(eb,tb,"esm2020")})();var MV="firebase",NV="12.6.0";er(MV,NV,"app");var pC=(()=>{class t{constructor(){this.app=Xu(),this.db=K0(this.app),Y0(this.db).catch(n=>{console.warn("Firebase Persistence Error:",n.code)}),localStorage.getItem("jjm_data_saver_mode")==="true"&&(console.warn("FirebaseService: Data Saver Mode detected on startup. Disabling network."),J0(this.db).catch(n=>console.error("Failed to disable network on startup",n)))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var X3=(()=>{class t{get db(){return this.firebaseService.db}constructor(n){this.firebaseService=n,this._stores=mp([]),this.stores=this._stores.asReadonly(),this.storesSubject=new Un([]),this.stores$=this.storesSubject.asObservable(),this.activeStoreIdSubject=new Un(localStorage.getItem("jjm_active_store_id")),this.activeStoreId$=this.activeStoreIdSubject.asObservable(),this.activeStoreId=mp(localStorage.getItem("jjm_active_store_id")),this.hydrateFromCache()}hydrateFromCache(){let n=localStorage.getItem("jjm_cached_stores");if(n)try{let r=JSON.parse(n);this._stores.set(r),this.storesSubject.next(r),console.log("Hydrated Stores from cache")}catch(r){console.warn("Failed to hydrate stores from cache",r)}}saveToCache(n){localStorage.setItem("jjm_cached_stores",JSON.stringify(n))}reset(){this._stores.set([]),this.storesSubject.next([]),this.activeStoreIdSubject.next(null),this.activeStoreId.set(null),localStorage.removeItem("jjm_cached_stores")}loadStores(n=!1){if(!n&&this._stores().length>0){console.log("Stores already loaded in Signal. Skipping fetch.");return}let r=W0(this.db,"stores"),i=oC(r,sC("createdAt","desc"));uC(i).then(o=>{let s=o.docs.map(a=>{let u=a.data();return Re(re({},u),{id:a.id,createdAt:u.createdAt?.toDate?u.createdAt.toDate():u.createdAt})});this._stores.set(s),this.storesSubject.next(s),this.saveToCache(s),!this.activeStoreId()&&s.length>0&&this.setActiveStore(s[0].id)}).catch(o=>console.error("Error fetching stores:",o))}getStoreById(n){let r=qo(this.db,"stores",n);return Dt(cC(r)).pipe(Et(i=>{if(!i.exists())throw new Error("Store not found");let o=i.data();return Re(re({},o),{id:i.id,createdAt:o.createdAt?.toDate?o.createdAt.toDate():o.createdAt})}))}createStore(n){let r=crypto.randomUUID(),i=Re(re({},n),{id:r,createdAt:new Date}),o=qo(this.db,"stores",r);return Dt(lC(o,i)).pipe(Et(()=>i),ki(s=>{let u=[...this._stores(),s];this._stores.set(u),this.storesSubject.next(u),this.saveToCache(u),this.activeStoreId()||this.setActiveStore(s.id)}),Oi(s=>(console.error("Error creating store:",s),ds(()=>s))))}updateStore(n,r){let i=qo(this.db,"stores",n);return Dt(dC(i,r)).pipe(Et(()=>{let s=this._stores().find(a=>a.id===n);return re(re({},s),r)}),ki(o=>{let a=this._stores().map(u=>u.id===n?re(re({},u),o):u);this._stores.set(a),this.storesSubject.next(a),this.saveToCache(a)}),Oi(o=>(console.error("Error updating store:",o),ds(()=>o))))}deleteStore(n){let r=qo(this.db,"stores",n);return Dt(fC(r)).pipe(ki(()=>{let o=this._stores().filter(s=>s.id!==n);if(this._stores.set(o),this.storesSubject.next(o),this.saveToCache(o),this.activeStoreId()===n){let s=o[0];this.setActiveStore(s?s.id:null)}}),Oi(i=>(console.error("Error deleting store:",i),ds(()=>i))))}migrateData(n){return console.warn("migrateData is deprecated - no backend to migrate to"),uf({success:!0,message:"Migration deprecated"})}setActiveStore(n){n?localStorage.setItem("jjm_active_store_id",n):localStorage.removeItem("jjm_active_store_id"),this.activeStoreId.set(n),this.activeStoreIdSubject.next(n)}getActiveStoreId(){return this.activeStoreId()}hasAiResponseCredits(n){let r=this.storesSubject.value.find(o=>o.id===n);if(!r)return!1;let i=r.subscriptionPlan||"Free";return i==="Pro"||i.includes("Pro")||i.includes("Enterprise")?!0:i==="Starter"||i.includes("Starter")?(r.credits?.aiResponse??0)>0:!1}deductAiResponseCredit(n){let r=this.storesSubject.value.find(o=>o.id===n);if(!r)return;let i=r.subscriptionPlan||"Free";if(i==="Starter"||i.includes("Starter")){let o=r.credits?.aiResponse??0;if(o>0){let s=Re(re({},r.credits||{ai:0,callMinutes:0,lastResetDate:new Date}),{aiResponse:o-1});this.updateStore(n,{credits:s}).subscribe()}}}hasTransactionCredits(n){let r=this.storesSubject.value.find(o=>o.id===n);if(!r)return!1;let i=r.subscriptionPlan||"Free";return i==="Pro"||i.includes("Pro")||i.includes("Enterprise")?!0:(r.credits?.transactions??0)>0}deductTransactionCredit(n){let r=this.storesSubject.value.find(s=>s.id===n);if(!r)return;let i=r.subscriptionPlan||"Free";if(i==="Pro"||i.includes("Pro")||i.includes("Enterprise"))return;let o=r.credits?.transactions??0;if(o>0){let s=Re(re({},r.credits||{ai:0,callMinutes:0,lastResetDate:new Date}),{transactions:o-1});this.updateStore(n,{credits:s}).subscribe()}}hasAiCredits(n){let r=this.storesSubject.value.find(o=>o.id===n);if(!r)return!1;let i=r.subscriptionPlan||"Free";return i==="Pro"||i.includes("Pro")||i.includes("Enterprise")?!0:i==="Starter"||i.includes("Starter")?(r.credits?.ai??0)>0:!1}deductAiCredit(n){let r=this.storesSubject.value.find(o=>o.id===n);if(!r)return;let i=r.subscriptionPlan||"Free";if(i==="Starter"||i.includes("Starter")){let o=r.credits?.ai??0;if(o>0){let s=Re(re({},r.credits||{ai:0,callMinutes:0,lastResetDate:new Date}),{ai:o-1});this.updateStore(n,{credits:s}).subscribe()}}}hasVoiceCallAccess(n){let r=this.storesSubject.value.find(o=>o.id===n);if(!r)return!1;let i=r.subscriptionPlan||"Free";return i==="Pro"||i.includes("Pro")||i.includes("Enterprise")}static{this.\u0275fac=function(r){return new(r||t)(We(pC))}}static{this.\u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();export{Le as a,YC as b,ce as c,sf as d,af as e,Bn as f,Un as g,us as h,Dt as i,uf as j,ds as k,mS as l,dn as m,QC as n,Et as o,hS as p,fn as q,lf as r,_c as s,yS as t,gS as u,df as v,fs as w,Oi as x,bS as y,TS as z,hs as A,hc as B,CS as C,SS as D,MS as E,Dv as F,ff as G,NS as H,RS as I,PS as J,OS as K,kS as L,ki as M,le as N,xw as O,we as P,Nw as Q,s$ as R,me as S,oe as T,We as U,de as V,uA as W,lA as X,vs as Y,qn as Z,a$ as _,qw as $,fu as aa,NA as ba,Xw as ca,Gn as da,HA as ea,sI as fa,c$ as ga,u$ as ha,l$ as ia,d$ as ja,f$ as ka,Ox as la,Ji as ma,Kn as na,qr as oa,Mr as pa,h$ as qa,p$ as ra,zx as sa,Qh as ta,g$ as ua,m$ as va,y$ as wa,gM as xa,_$ as ya,v$ as za,w$ as Aa,Jc as Ba,I$ as Ca,je as Da,E$ as Ea,eu as Fa,ch as Ga,fp as Ha,eo as Ia,Nt as Ja,GN as Ka,to as La,mp as Ma,I1 as Na,S1 as Oa,vh as Pa,A1 as Qa,yp as Ra,k1 as Sa,L1 as Ta,J1 as Ua,kE as Va,Z1 as Wa,C$ as Xa,S$ as Ya,HE as Za,qE as _a,cR as $a,dR as ab,fR as bb,A$ as cb,wR as db,x$ as eb,ER as fb,GE as gb,M$ as hb,N$ as ib,R$ as jb,P$ as kb,O$ as lb,k$ as mb,TR as nb,WE as ob,CR as pb,SR as qb,AR as rb,F$ as sb,xR as tb,V$ as ub,L$ as vb,j$ as wb,B$ as xb,U$ as yb,$$ as zb,H$ as Ab,q$ as Bb,z$ as Cb,G$ as Db,W$ as Eb,K$ as Fb,Q$ as Gb,Pu as Hb,LR as Ib,jR as Jb,XE as Kb,Y$ as Lb,Ou as Mb,J$ as Nb,iP as Ob,Z$ as Pb,aP as Qb,X$ as Rb,bp as Sb,w6 as Tb,nD as Ub,Vp as Vb,I6 as Wb,zu as Xb,uP as Yb,E6 as Zb,lP as _b,D6 as $b,b6 as ac,T6 as bc,C6 as cc,S6 as dc,A6 as ec,x6 as fc,M6 as gc,N6 as hc,R6 as ic,P6 as jc,ZP as kc,O6 as lc,k6 as mc,dD as nc,AD as oc,aO as pc,B6 as qc,Ku as rc,MD as sc,RD as tc,zr as uc,U6 as vc,$6 as wc,H6 as xc,q6 as yc,z6 as zc,Qu as Ac,OD as Bc,G6 as Cc,In as Dc,Vs as Ec,W6 as Fc,Gr as Gc,K6 as Hc,Q6 as Ic,Ct as Jc,En as Kc,se as Lc,io as Mc,UD as Nc,o3 as Oc,Ls as Pc,WD as Qc,KD as Rc,QD as Sc,ak as Tc,Xu as Uc,er as Vc,Te as Wc,W0 as Xc,qo as Yc,R3 as Zc,J0 as _c,oC as $c,P3 as ad,sC as bd,O3 as cd,cC as dd,uC as ed,lC as fd,dC as gd,fC as hd,k3 as id,F3 as jd,V3 as kd,L3 as ld,pC as md,X3 as nd};
