import{a as re,b as Pe,f as df,g as R}from"./chunk-7QOE2ANW.js";function q(n){return typeof n=="function"}function Si(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var oc=Si(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function xr(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ue=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(q(r))try{r()}catch(o){e=o instanceof oc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Iv(o)}catch(s){e=e??[],s instanceof oc?e=[...e,...s.errors]:e.push(s)}}if(e)throw new oc(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Iv(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&xr(t,e)}remove(e){let{_finalizers:t}=this;t&&xr(t,e),e instanceof n&&e._removeParent(this)}};Ue.EMPTY=(()=>{let n=new Ue;return n.closed=!0,n})();var ff=Ue.EMPTY;function sc(n){return n instanceof Ue||n&&"closed"in n&&q(n.remove)&&q(n.add)&&q(n.unsubscribe)}function Iv(n){q(n)?n():n.unsubscribe()}var fn=Si(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Lt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ai={setTimeout(n,e,...t){let{delegate:r}=Ai;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ai;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ac(n){Ai.setTimeout(()=>{let{onUnhandledError:e}=Lt;if(e)e(n);else throw n})}function ps(){}var Ev=hf("C",void 0,void 0);function Dv(n){return hf("E",void 0,n)}function bv(n){return hf("N",n,void 0)}function hf(n,e,t){return{kind:n,value:e,error:t}}var Mr=null;function xi(n){if(Lt.useDeprecatedSynchronousErrorHandling){let e=!Mr;if(e&&(Mr={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Mr;if(Mr=null,t)throw r}}else n()}function Tv(n){Lt.useDeprecatedSynchronousErrorHandling&&Mr&&(Mr.errorThrown=!0,Mr.error=n)}var Nr=class extends Ue{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,sc(e)&&e.add(this)):this.destination=wS}static create(e,t,r){return new jn(e,t,r)}next(e){this.isStopped?gf(bv(e),this):this._next(e)}error(e){this.isStopped?gf(Dv(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?gf(Ev,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},_S=Function.prototype.bind;function pf(n,e){return _S.call(n,e)}var mf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){cc(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){cc(r)}else cc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){cc(t)}}},jn=class extends Nr{constructor(e,t,r){super();let i;if(q(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Lt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&pf(e.next,o),error:e.error&&pf(e.error,o),complete:e.complete&&pf(e.complete,o)}):i=e}this.destination=new mf(i)}};function cc(n){Lt.useDeprecatedSynchronousErrorHandling?Tv(n):ac(n)}function vS(n){throw n}function gf(n,e){let{onStoppedNotification:t}=Lt;t&&Ai.setTimeout(()=>t(n,e))}var wS={closed:!0,next:ps,error:vS,complete:ps};function IS(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let o=new jn({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new fn)}});n.subscribe(o)})}function yf(n){return q(n?.lift)}function ne(n){return e=>{if(yf(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function X(n,e,t,r,i){return new _f(n,e,t,r,i)}var _f=class extends Nr{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function It(n,e){return ne((t,r)=>{let i=0;t.subscribe(X(r,o=>{r.next(n.call(e,o,i++))}))})}var Mi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ot(n){return n}function ES(...n){return vf(n)}function vf(n){return n.length===0?ot:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ce=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=bS(t)?t:new jn(t,r,i);return xi(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Cv(r),new r((i,o)=>{let s=new jn({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Mi](){return this}pipe(...t){return vf(t)(this)}toPromise(t){return t=Cv(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function Cv(n){var e;return(e=n??Lt.Promise)!==null&&e!==void 0?e:Promise}function DS(n){return n&&q(n.next)&&q(n.error)&&q(n.complete)}function bS(n){return n&&n instanceof Nr||DS(n)&&sc(n)}var{isArray:TS}=Array,{getPrototypeOf:CS,prototype:SS,keys:AS}=Object;function uc(n){if(n.length===1){let e=n[0];if(TS(e))return{args:e,keys:null};if(xS(e)){let t=AS(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function xS(n){return n&&typeof n=="object"&&CS(n)===SS}function Av(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(f){try{l(r.next(f))}catch(p){s(p)}}function u(f){try{l(r.throw(f))}catch(p){s(p)}}function l(f){f.done?o(f.value):i(f.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function Sv(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Rr(n){return this instanceof Rr?(this.v=n,this):new Rr(n)}function xv(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(T){return Promise.resolve(T).then(y,p)}}function a(y,T){r[y]&&(i[y]=function(M){return new Promise(function(N,V){o.push([y,M,N,V])>1||u(y,M)})},T&&(i[y]=T(i[y])))}function u(y,T){try{l(r[y](T))}catch(M){m(o[0][3],M)}}function l(y){y.value instanceof Rr?Promise.resolve(y.value.v).then(f,p):m(o[0][2],y)}function f(y){u("next",y)}function p(y){u("throw",y)}function m(y,T){y(T),o.shift(),o.length&&u(o[0][0],o[0][1])}}function Mv(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Sv=="function"?Sv(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Ni=n=>n&&typeof n.length=="number"&&typeof n!="function";function lc(n){return q(n?.then)}function dc(n){return q(n[Mi])}function fc(n){return Symbol.asyncIterator&&q(n?.[Symbol.asyncIterator])}function hc(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function MS(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var pc=MS();function gc(n){return q(n?.[pc])}function mc(n){return xv(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Rr(t.read());if(i)return yield Rr(void 0);yield yield Rr(r)}}finally{t.releaseLock()}})}function yc(n){return q(n?.getReader)}function xe(n){if(n instanceof ce)return n;if(n!=null){if(dc(n))return NS(n);if(Ni(n))return RS(n);if(lc(n))return PS(n);if(fc(n))return Nv(n);if(gc(n))return OS(n);if(yc(n))return kS(n)}throw hc(n)}function NS(n){return new ce(e=>{let t=n[Mi]();if(q(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function RS(n){return new ce(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function PS(n){return new ce(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ac)})}function OS(n){return new ce(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function Nv(n){return new ce(e=>{FS(n,e).catch(t=>e.error(t))})}function kS(n){return Nv(mc(n))}function FS(n,e){var t,r,i,o;return Av(this,void 0,void 0,function*(){try{for(t=Mv(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function pt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function _c(n,e=0){return ne((t,r)=>{t.subscribe(X(r,i=>pt(r,n,()=>r.next(i),e),()=>pt(r,n,()=>r.complete(),e),i=>pt(r,n,()=>r.error(i),e)))})}function vc(n,e=0){return ne((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Rv(n,e){return xe(n).pipe(vc(e),_c(e))}function Pv(n,e){return xe(n).pipe(vc(e),_c(e))}function Ov(n,e){return new ce(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function kv(n,e){return new ce(t=>{let r;return pt(t,e,()=>{r=n[pc](),pt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>q(r?.return)&&r.return()})}function wc(n,e){if(!n)throw new Error("Iterable cannot be null");return new ce(t=>{pt(t,e,()=>{let r=n[Symbol.asyncIterator]();pt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Fv(n,e){return wc(mc(n),e)}function Vv(n,e){if(n!=null){if(dc(n))return Rv(n,e);if(Ni(n))return Ov(n,e);if(lc(n))return Pv(n,e);if(fc(n))return wc(n,e);if(gc(n))return kv(n,e);if(yc(n))return Fv(n,e)}throw hc(n)}function Et(n,e){return e?Vv(n,e):xe(n)}var{isArray:VS}=Array;function LS(n,e){return VS(e)?n(...e):n(e)}function Ri(n){return It(e=>LS(n,e))}function Lv(n){return n&&q(n.schedule)}function jv(n){return n[n.length-1]}function Ic(n){return q(jv(n))?n.pop():void 0}function Bn(n){return Lv(jv(n))?n.pop():void 0}function Ec(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function jS(...n){let e=Bn(n),t=Ic(n),{args:r,keys:i}=uc(n);if(r.length===0)return Et([],e);let o=new ce(BS(r,e,i?s=>Ec(i,s):ot));return t?o.pipe(Ri(t)):o}function BS(n,e,t=ot){return r=>{Bv(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)Bv(e,()=>{let l=Et(n[u],e),f=!1;l.subscribe(X(r,p=>{o[u]=p,f||(f=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Bv(n,e,t){n?pt(t,n,e):e()}function US(...n){let e=Ic(n),{args:t,keys:r}=uc(n),i=new ce(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let f=0;f<s;f++){let p=!1;xe(t[f]).subscribe(X(o,m=>{p||(p=!0,l--),a[f]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?Ec(r,a):a),o.complete())}))}});return e?i.pipe(Ri(e)):i}var gs=new ce(n=>n.complete());function Dc(n){return n<=0?()=>gs:ne((e,t)=>{let r=0;e.subscribe(X(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function wf(){return ne((n,e)=>{let t=null;n._refCount++;let r=X(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var If=class extends ce{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,yf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ue;let t=this.getSubject();e.add(this.source.subscribe(X(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ue.EMPTY)}return e}refCount(){return wf()(this)}};var Uv=Si(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Un=(()=>{class n extends ce{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new bc(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Uv}next(t){xi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){xi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){xi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?ff:(this.currentObservers=null,o.push(t),new Ue(()=>{this.currentObservers=null,xr(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ce;return t.source=this,t}}return n.create=(e,t)=>new bc(e,t),n})(),bc=class extends Un{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:ff}};var $n=class extends Un{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ef={now(){return(Ef.delegate||Date).now()},delegate:void 0};var Tc=class extends Ue{constructor(e,t){super()}schedule(e,t=0){return this}};var ms={setInterval(n,e,...t){let{delegate:r}=ms;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=ms;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Cc=class extends Tc{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return ms.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&ms.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,xr(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Pi=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Pi.now=Ef.now;var Sc=class extends Pi{constructor(e,t=Pi.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var $v=new Sc(Cc);function Df(...n){let e=Bn(n);return Et(n,e)}function ys(n,e){let t=q(n)?n:()=>n,r=i=>i.error(t());return new ce(e?i=>e.schedule(r,0,i):r)}function $S(n){return!!n&&(n instanceof ce||q(n.lift)&&q(n.subscribe))}function Hv(n,e,t,r,i,o,s,a){let u=[],l=0,f=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=M=>l<r?T(M):u.push(M),T=M=>{o&&e.next(M),l++;let N=!1;xe(t(M,f++)).subscribe(X(e,V=>{i?.(V),o?y(V):e.next(V)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;u.length&&l<r;){let V=u.shift();s?pt(e,s,()=>T(V)):T(V)}m()}catch(V){e.error(V)}}))};return n.subscribe(X(e,y,()=>{p=!0,m()})),()=>{a?.()}}function hn(n,e,t=1/0){return q(e)?hn((r,i)=>It((o,s)=>e(r,o,i,s))(xe(n(r,i))),t):(typeof e=="number"&&(t=e),ne((r,i)=>Hv(r,i,n,t)))}function bf(n=1/0){return hn(ot,n)}function qv(){return bf(1)}function Ac(...n){return qv()(Et(n,Bn(n)))}function HS(n){return new ce(e=>{xe(n()).subscribe(e)})}var qS=["addListener","removeListener"],zS=["addEventListener","removeEventListener"],GS=["on","off"];function Tf(n,e,t,r){if(q(t)&&(r=t,t=void 0),r)return Tf(n,e,t).pipe(Ri(r));let[i,o]=QS(n)?zS.map(s=>a=>n[s](e,a,t)):WS(n)?qS.map(zv(n,e)):KS(n)?GS.map(zv(n,e)):[];if(!i&&Ni(n))return hn(s=>Tf(s,e,t))(xe(n));if(!i)throw new TypeError("Invalid event target");return new ce(s=>{let a=(...u)=>s.next(1<u.length?u:u[0]);return i(a),()=>o(a)})}function zv(n,e){return t=>r=>n[t](e,r)}function WS(n){return q(n.addListener)&&q(n.removeListener)}function KS(n){return q(n.on)&&q(n.off)}function QS(n){return q(n.addEventListener)&&q(n.removeEventListener)}function _s(n,e){return ne((t,r)=>{let i=0;t.subscribe(X(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Oi(n){return ne((e,t)=>{let r=null,i=!1,o;r=e.subscribe(X(t,void 0,void 0,s=>{o=xe(n(s,Oi(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Gv(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(X(s,f=>{let p=l++;u=a?n(u,f,p):(a=!0,f),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function YS(n,e){return q(e)?hn(n,e,1):hn(n,1)}function JS(n,e=$v){return ne((t,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function u(){let l=s+n,f=e.now();if(f<l){i=this.schedule(void 0,l-f),r.add(i);return}a()}t.subscribe(X(r,l=>{o=l,s=e.now(),i||(i=e.schedule(u,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function vs(n){return ne((e,t)=>{let r=!1;e.subscribe(X(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ZS(n){return It(()=>n)}function XS(n,e=ot){return n=n??eA,ne((t,r)=>{let i,o=!0;t.subscribe(X(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function eA(n,e){return n===e}function xc(n=tA){return ne((e,t)=>{let r=!1;e.subscribe(X(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function tA(){return new fn}function nA(n){return ne((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Wv(n,e){let t=arguments.length>=2;return r=>r.pipe(n?_s((i,o)=>n(i,o,r)):ot,Dc(1),t?vs(e):xc(()=>new fn))}function Cf(n){return n<=0?()=>gs:ne((e,t)=>{let r=[];e.subscribe(X(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function rA(n,e){let t=arguments.length>=2;return r=>r.pipe(n?_s((i,o)=>n(i,o,r)):ot,Cf(1),t?vs(e):xc(()=>new fn))}function iA(n,e){return ne(Gv(n,e,arguments.length>=2,!0))}function oA(...n){let e=Bn(n);return ne((t,r)=>{(e?Ac(n,t,e):Ac(n,t)).subscribe(r)})}function sA(n,e){return ne((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(X(r,u=>{i?.unsubscribe();let l=0,f=o++;xe(n(u,f)).subscribe(i=X(r,p=>r.next(e?e(u,p,f,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function aA(n){return ne((e,t)=>{xe(n).subscribe(X(t,()=>t.complete(),ps)),!t.closed&&e.subscribe(t)})}function ki(n,e,t){let r=q(n)||e||t?{next:n,error:e,complete:t}:n;return r?ne((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(X(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):ot}function Kv(n,e){return Object.is(n,e)}var We=null,ws=!1,Mc=1,Zt=Symbol("SIGNAL");function ue(n){let e=We;return We=n,e}function cA(){return ws}var Es={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Mf(n){if(ws)throw new Error("");if(We===null)return;We.consumerOnSignalRead(n);let e=We.nextProducerIndex++;if(Fi(We),e<We.producerNode.length&&We.producerNode[e]!==n&&Is(We)){let t=We.producerNode[e];kc(t,We.producerIndexOfThis[e])}We.producerNode[e]!==n&&(We.producerNode[e]=n,We.producerIndexOfThis[e]=Is(We)?Xv(n,We,e):0),We.producerLastReadVersion[e]=n.version}function uA(){Mc++}function Qv(n){if(!(Is(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Mc)){if(!n.producerMustRecompute(n)&&!Oc(n)){n.dirty=!1,n.lastCleanEpoch=Mc;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Mc}}function Yv(n){if(n.liveConsumerNode===void 0)return;let e=ws;ws=!0;try{for(let t of n.liveConsumerNode)t.dirty||Zv(t)}finally{ws=e}}function Jv(){return We?.consumerAllowSignalWrites!==!1}function Zv(n){n.dirty=!0,Yv(n),n.consumerMarkedDirty?.(n)}function Rc(n){return n&&(n.nextProducerIndex=0),ue(n)}function Pc(n,e){if(ue(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Is(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)kc(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Oc(n){Fi(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Qv(t),r!==t.version))return!0}return!1}function Nf(n){if(Fi(n),Is(n))for(let e=0;e<n.producerNode.length;e++)kc(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Xv(n,e,t){if(ew(n),Fi(n),n.liveConsumerNode.length===0)for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=Xv(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function kc(n,e){if(ew(n),Fi(n),n.liveConsumerNode.length===1)for(let r=0;r<n.producerNode.length;r++)kc(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Fi(i),i.producerIndexOfThis[r]=e}}function Is(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Fi(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function ew(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function tw(n){let e=Object.create(lA);e.computation=n;let t=()=>{if(Qv(e),Mf(e),e.value===Nc)throw e.error;return e.value};return t[Zt]=e,t}var Sf=Symbol("UNSET"),Af=Symbol("COMPUTING"),Nc=Symbol("ERRORED"),lA=Pe(re({},Es),{value:Sf,dirty:!0,error:null,equal:Kv,producerMustRecompute(n){return n.value===Sf||n.value===Af},producerRecomputeValue(n){if(n.value===Af)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Af;let t=Rc(n),r;try{r=n.computation()}catch(i){r=Nc,n.error=i}finally{Pc(n,t)}if(e!==Sf&&e!==Nc&&r!==Nc&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function dA(){throw new Error}var nw=dA;function rw(){nw()}function iw(n){nw=n}var fA=null;function ow(n){let e=Object.create(aw);e.value=n;let t=()=>(Mf(e),e.value);return t[Zt]=e,t}function Rf(n,e){Jv()||rw(),n.equal(n.value,e)||(n.value=e,hA(n))}function sw(n,e){Jv()||rw(),Rf(n,e(n.value))}var aw=Pe(re({},Es),{equal:Kv,value:void 0});function hA(n){n.version++,uA(),Yv(n),fA?.()}function cw(n,e,t){let r=Object.create(pA);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;let i=u=>{r.cleanupFn=u};function o(u){return u.fn===null&&u.schedule===null}function s(u){o(u)||(Nf(u),u.cleanupFn(),u.fn=null,u.schedule=null,u.cleanupFn=xf)}let a=()=>{if(r.fn===null)return;if(cA())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!Oc(r))return;r.hasRun=!0;let u=Rc(r);try{r.cleanupFn(),r.cleanupFn=xf,r.fn(i)}finally{Pc(r,u)}};return r.ref={notify:()=>Zv(r),run:a,cleanup:()=>r.cleanupFn(),destroy:()=>s(r),[Zt]:r},r.ref}var xf=()=>{},pA=Pe(re({},Es),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule!==null&&n.schedule(n.ref)},hasRun:!1,cleanupFn:xf});var Yw="https://g.co/ng/security#xss",le=class extends Error{constructor(e,t){super(Jw(e,t)),this.code=e}};function Jw(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Os(n){return{toString:n}.toString()}var Fc="__parameters__";function gA(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function Zw(n,e,t){return Os(()=>{let r=gA(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,f){let p=u.hasOwnProperty(Fc)?u[Fc]:Object.defineProperty(u,Fc,{value:[]})[Fc];for(;p.length<=f;)p.push(null);return(p[f]=p[f]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Nt=globalThis;function ve(n){for(let e in n)if(n[e]===ve)return e;throw Error("Could not find renamed property on target object.")}function mA(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function at(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(at).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function Kf(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var yA=ve({__forward_ref__:ve});function Xw(n){return n.__forward_ref__=Xw,n.toString=function(){return at(this())},n}function st(n){return eI(n)?n():n}function eI(n){return typeof n=="function"&&n.hasOwnProperty(yA)&&n.__forward_ref__===Xw}function we(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function tI(n){return{providers:n.providers||[],imports:n.imports||[]}}function vu(n){return uw(n,nI)||uw(n,rI)}function S$(n){return vu(n)!==null}function uw(n,e){return n.hasOwnProperty(e)?n[e]:null}function _A(n){let e=n&&(n[nI]||n[rI]);return e||null}function lw(n){return n&&(n.hasOwnProperty(dw)||n.hasOwnProperty(vA))?n[dw]:null}var nI=ve({\u0275prov:ve}),dw=ve({\u0275inj:ve}),rI=ve({ngInjectableDef:ve}),vA=ve({ngInjectorDef:ve}),me=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=we({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function iI(n){return n&&!!n.\u0275providers}var wA=ve({\u0275cmp:ve}),IA=ve({\u0275dir:ve}),EA=ve({\u0275pipe:ve}),DA=ve({\u0275mod:ve}),Qc=ve({\u0275fac:ve}),Ds=ve({__NG_ELEMENT_ID__:ve}),fw=ve({__NG_ENV_ID__:ve});function tn(n){return typeof n=="string"?n:n==null?"":String(n)}function bA(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():tn(n)}function TA(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new le(-200,n)}function Qh(n,e){throw new le(-201,!1)}var oe=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(oe||{}),Qf;function oI(){return Qf}function gt(n){let e=Qf;return Qf=n,e}function sI(n,e,t){let r=vu(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&oe.Optional)return null;if(e!==void 0)return e;Qh(n,"Injector")}var CA={},bs=CA,Yf="__NG_DI_FLAG__",Yc="ngTempTokenPath",SA="ngTokenPath",AA=/\n/gm,xA="\u0275",hw="__source",Ui;function MA(){return Ui}function Hn(n){let e=Ui;return Ui=n,e}function NA(n,e=oe.Default){if(Ui===void 0)throw new le(-203,!1);return Ui===null?sI(n,void 0,e):Ui.get(n,e&oe.Optional?null:void 0,e)}function Ke(n,e=oe.Default){return(oI()||NA)(st(n),e)}function de(n,e=oe.Default){return Ke(n,wu(e))}function wu(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Jf(n){let e=[];for(let t=0;t<n.length;t++){let r=st(n[t]);if(Array.isArray(r)){if(r.length===0)throw new le(900,!1);let i,o=oe.Default;for(let s=0;s<r.length;s++){let a=r[s],u=RA(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(Ke(i,o))}else e.push(Ke(r))}return e}function aI(n,e){return n[Yf]=e,n.prototype[Yf]=e,n}function RA(n){return n[Yf]}function PA(n,e,t,r){let i=n[Yc];throw e[hw]&&i.unshift(e[hw]),n.message=OA(`
`+n.message,i,t,r),n[SA]=i,n[Yc]=null,n}function OA(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==xA?n.slice(2):n;let i=at(e);if(Array.isArray(e))i=e.map(at).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):at(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(AA,`
  `)}`}var kA=aI(Zw("Optional"),8);var FA=aI(Zw("SkipSelf"),4);function Vr(n,e){let t=n.hasOwnProperty(Qc);return t?n[Qc]:null}function VA(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function LA(n){return n.flat(Number.POSITIVE_INFINITY)}function Yh(n,e){n.forEach(t=>Array.isArray(t)?Yh(t,e):e(t))}function cI(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Jc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function jA(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function Iu(n,e,t){let r=ks(n,e);return r>=0?n[r|1]=t:(r=~r,jA(n,r,e,t)),r}function Pf(n,e){let t=ks(n,e);if(t>=0)return n[t|1]}function ks(n,e){return BA(n,e,1)}function BA(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Hi={},mt=[],Zc=new me(""),uI=new me("",-1),lI=new me(""),Xc=class{get(e,t=bs){if(t===bs){let r=new Error(`NullInjectorError: No provider for ${at(e)}!`);throw r.name="NullInjectorError",r}return t}},dI=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(dI||{}),Ts=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Ts||{}),zn=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(zn||{});function UA(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function Zf(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];$A(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function fI(n){return n===3||n===4||n===6}function $A(n){return n.charCodeAt(0)===64}function Cs(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?pw(n,t,i,null,e[++r]):pw(n,t,i,null,null))}}return n}function pw(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var hI="ng-template";function HA(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&UA(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Jh(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Jh(n){return n.type===4&&n.value!==hI}function qA(n,e,t){let r=n.type===4&&!t?hI:n.value;return e===r}function zA(n,e,t){let r=4,i=n.attrs,o=i!==null?KA(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!jt(r)&&!jt(u))return!1;if(s&&jt(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!qA(n,u,t)||u===""&&e.length===1){if(jt(r))return!1;s=!0}}else if(r&8){if(i===null||!HA(n,i,u,t)){if(jt(r))return!1;s=!0}}else{let l=e[++a],f=GA(u,i,Jh(n),t);if(f===-1){if(jt(r))return!1;s=!0;continue}if(l!==""){let p;if(f>o?p="":p=i[f+1].toLowerCase(),r&2&&l!==p){if(jt(r))return!1;s=!0}}}}return jt(r)||s}function jt(n){return(n&1)===0}function GA(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return QA(e,n)}function WA(n,e,t=!1){for(let r=0;r<e.length;r++)if(zA(n,e[r],t))return!0;return!1}function KA(n){for(let e=0;e<n.length;e++){let t=n[e];if(fI(t))return e}return n.length}function QA(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function gw(n,e){return n?":not("+e.trim()+")":e}function YA(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!jt(s)&&(e+=gw(o,i),i=""),r=s,o=o||!jt(r);t++}return i!==""&&(e+=gw(o,i)),e}function JA(n){return n.map(YA).join(",")}function ZA(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!jt(i))break;i=o}r++}return{attrs:e,classes:t}}function A$(n){return Os(()=>{let e=_I(n),t=Pe(re({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===dI.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ts.Emulated,styles:n.styles||mt,_:null,schemas:n.schemas||null,tView:null,id:""});vI(t);let r=n.dependencies;return t.directiveDefs=yw(r,!1),t.pipeDefs=yw(r,!0),t.id=nx(t),t})}function XA(n){return Gn(n)||gI(n)}function ex(n){return n!==null}function pI(n){return Os(()=>({type:n.type,bootstrap:n.bootstrap||mt,declarations:n.declarations||mt,imports:n.imports||mt,exports:n.exports||mt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function mw(n,e){if(n==null)return Hi;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=zn.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==zn.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Eu(n){return Os(()=>{let e=_I(n);return vI(e),e})}function Gr(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Gn(n){return n[wA]||null}function gI(n){return n[IA]||null}function mI(n){return n[EA]||null}function tx(n){let e=Gn(n)||gI(n)||mI(n);return e!==null?e.standalone:!1}function yI(n,e){let t=n[DA]||null;if(!t&&e===!0)throw new Error(`Type ${at(n)} does not have '\u0275mod' property.`);return t}function _I(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Hi,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||mt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:mw(n.inputs,e),outputs:mw(n.outputs),debugInfo:null}}function vI(n){n.features?.forEach(e=>e(n))}function yw(n,e){if(!n)return null;let t=e?mI:XA;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(ex)}function nx(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function rx(n){return{\u0275providers:n}}function ix(...n){return{\u0275providers:wI(!0,n),\u0275fromNgModule:!0}}function wI(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Yh(e,s=>{let a=s;Xf(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&II(i,o),t}function II(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Zh(i,o=>{e(o,r)})}}function Xf(n,e,t,r){if(n=st(n),!n)return!1;let i=null,o=lw(n),s=!o&&Gn(n);if(!o&&!s){let u=n.ngModule;if(o=lw(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Xf(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Yh(o.imports,f=>{Xf(f,e,t,r)&&(l||=[],l.push(f))})}finally{}l!==void 0&&II(l,e)}if(!a){let l=Vr(i)||(()=>new i);e({provide:i,useFactory:l,deps:mt},i),e({provide:lI,useValue:i,multi:!0},i),e({provide:Zc,useValue:()=>Ke(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;Zh(u,f=>{e(f,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Zh(n,e){for(let t of n)iI(t)&&(t=t.\u0275providers),Array.isArray(t)?Zh(t,e):e(t)}var ox=ve({provide:String,useValue:ve});function EI(n){return n!==null&&typeof n=="object"&&ox in n}function sx(n){return!!(n&&n.useExisting)}function ax(n){return!!(n&&n.useFactory)}function qi(n){return typeof n=="function"}function cx(n){return!!n.useClass}var DI=new me(""),$c={},ux={},Of;function Xh(){return Of===void 0&&(Of=new Xc),Of}var Wn=class{},Ss=class extends Wn{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,th(e,s=>this.processProvider(s)),this.records.set(uI,Vi(void 0,this)),i.has("environment")&&this.records.set(Wn,Vi(void 0,this));let o=this.records.get(DI);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(lI,mt,oe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ue(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ue(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Hn(this),r=gt(void 0),i;try{return e()}finally{Hn(t),gt(r)}}get(e,t=bs,r=oe.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(fw))return e[fw](this);r=wu(r);let i,o=Hn(this),s=gt(void 0);try{if(!(r&oe.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=px(e)&&vu(e);l&&this.injectableDefInScope(l)?u=Vi(eh(e),$c):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&oe.Self?Xh():this.parent;return t=r&oe.Optional&&t===bs?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Yc]=a[Yc]||[]).unshift(at(e)),o)throw a;return PA(a,e,"R3InjectorError",this.source)}else throw a}finally{gt(s),Hn(o)}}resolveInjectorInitializers(){let e=ue(null),t=Hn(this),r=gt(void 0),i;try{let o=this.get(Zc,mt,oe.Self);for(let s of o)s()}finally{Hn(t),gt(r),ue(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(at(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new le(205,!1)}processProvider(e){e=st(e);let t=qi(e)?e:st(e&&e.provide),r=dx(e);if(!qi(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Vi(void 0,$c,!0),i.factory=()=>Jf(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=ue(null);try{return t.value===$c&&(t.value=ux,t.value=t.factory()),typeof t.value=="object"&&t.value&&hx(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ue(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=st(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function eh(n){let e=vu(n),t=e!==null?e.factory:Vr(n);if(t!==null)return t;if(n instanceof me)throw new le(204,!1);if(n instanceof Function)return lx(n);throw new le(204,!1)}function lx(n){if(n.length>0)throw new le(204,!1);let t=_A(n);return t!==null?()=>t.factory(n):()=>new n}function dx(n){if(EI(n))return Vi(void 0,n.useValue);{let e=bI(n);return Vi(e,$c)}}function bI(n,e,t){let r;if(qi(n)){let i=st(n);return Vr(i)||eh(i)}else if(EI(n))r=()=>st(n.useValue);else if(ax(n))r=()=>n.useFactory(...Jf(n.deps||[]));else if(sx(n))r=()=>Ke(st(n.useExisting));else{let i=st(n&&(n.useClass||n.provide));if(fx(n))r=()=>new i(...Jf(n.deps));else return Vr(i)||eh(i)}return r}function Vi(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function fx(n){return!!n.deps}function hx(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function px(n){return typeof n=="function"||typeof n=="object"&&n instanceof me}function th(n,e){for(let t of n)Array.isArray(t)?th(t,e):t&&iI(t)?th(t.\u0275providers,e):e(t)}function gx(n,e){n instanceof Ss&&n.assertNotDestroyed();let t,r=Hn(n),i=gt(void 0);try{return e()}finally{Hn(r),gt(i)}}function TI(){return oI()!==void 0||MA()!=null}function CI(n){if(!TI())throw new le(-203,!1)}function mx(n){return typeof n=="function"}var gn=0,ee=1,z=2,Qe=3,Ut=4,qt=5,eu=6,As=7,$t=8,zi=9,Ht=10,Me=11,xs=12,_w=13,Yi=14,nn=15,Fs=16,Li=17,pn=18,Du=19,SI=20,qn=21,Hc=22,Lr=23,yt=25,AI=1;var jr=7,tu=8,Gi=9,Dt=10,ep=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(ep||{});function kr(n){return Array.isArray(n)&&typeof n[AI]=="object"}function mn(n){return Array.isArray(n)&&n[AI]===!0}function tp(n){return(n.flags&4)!==0}function bu(n){return n.componentOffset>-1}function Tu(n){return(n.flags&1)===1}function Kn(n){return!!n.template}function yx(n){return(n[z]&512)!==0}var nh=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function xI(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function MI(){return NI}function NI(n){return n.type.prototype.ngOnChanges&&(n.setInput=vx),_x}MI.ngInherit=!0;function _x(){let n=PI(this),e=n?.current;if(e){let t=n.previous;if(t===Hi)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function vx(n,e,t,r,i){let o=this.declaredInputs[r],s=PI(n)||wx(n,{previous:Hi,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new nh(l&&l.currentValue,t,u===Hi),xI(n,e,i,t)}var RI="__ngSimpleChanges__";function PI(n){return n[RI]||null}function wx(n,e){return n[RI]=e}var vw=null;var Xt=function(n,e,t){vw?.(n,e,t)},OI="svg",Ix="math",Ex=!1;function Dx(){return Ex}function rn(n){for(;Array.isArray(n);)n=n[gn];return n}function kI(n,e){return rn(e[n])}function Pt(n,e){return rn(e[n.index])}function FI(n,e){return n.data[e]}function Cu(n,e){return n[e]}function Zn(n,e){let t=e[n];return kr(t)?t:t[gn]}function bx(n){return(n[z]&4)===4}function np(n){return(n[z]&128)===128}function Tx(n){return mn(n[Qe])}function Wi(n,e){return e==null?null:n[e]}function VI(n){n[Li]=0}function Cx(n){n[z]&1024||(n[z]|=1024,np(n)&&Ms(n))}function Sx(n,e){for(;n>0;)e=e[Yi],n--;return e}function rp(n){return!!(n[z]&9216||n[Lr]?.dirty)}function rh(n){n[Ht].changeDetectionScheduler?.notify(1),rp(n)?Ms(n):n[z]&64&&(Dx()?(n[z]|=1024,Ms(n)):n[Ht].changeDetectionScheduler?.notify())}function Ms(n){n[Ht].changeDetectionScheduler?.notify();let e=Ns(n);for(;e!==null&&!(e[z]&8192||(e[z]|=8192,!np(e)));)e=Ns(e)}function LI(n,e){if((n[z]&256)===256)throw new le(911,!1);n[qn]===null&&(n[qn]=[]),n[qn].push(e)}function Ax(n,e){if(n[qn]===null)return;let t=n[qn].indexOf(e);t!==-1&&n[qn].splice(t,1)}function Ns(n){let e=n[Qe];return mn(e)?e[Qe]:e}var Y={lFrame:GI(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function xx(){return Y.lFrame.elementDepthCount}function Mx(){Y.lFrame.elementDepthCount++}function Nx(){Y.lFrame.elementDepthCount--}function jI(){return Y.bindingsEnabled}function Rx(){return Y.skipHydrationRootTNode!==null}function Px(n){return Y.skipHydrationRootTNode===n}function Ox(){Y.skipHydrationRootTNode=null}function K(){return Y.lFrame.lView}function Ne(){return Y.lFrame.tView}function x$(n){return Y.lFrame.contextLView=n,n[$t]}function M$(n){return Y.lFrame.contextLView=null,n}function Xe(){let n=BI();for(;n!==null&&n.type===64;)n=n.parent;return n}function BI(){return Y.lFrame.currentTNode}function kx(){let n=Y.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Wr(n,e){let t=Y.lFrame;t.currentTNode=n,t.isParent=e}function ip(){return Y.lFrame.isParent}function UI(){Y.lFrame.isParent=!1}function Fx(){return Y.lFrame.contextLView}function Xn(){let n=Y.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function $I(){return Y.lFrame.bindingIndex}function Vx(n){return Y.lFrame.bindingIndex=n}function Su(){return Y.lFrame.bindingIndex++}function Au(n){let e=Y.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Lx(){return Y.lFrame.inI18n}function jx(n,e){let t=Y.lFrame;t.bindingIndex=t.bindingRootIndex=n,ih(e)}function Bx(){return Y.lFrame.currentDirectiveIndex}function ih(n){Y.lFrame.currentDirectiveIndex=n}function Ux(n){let e=Y.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function HI(){return Y.lFrame.currentQueryIndex}function op(n){Y.lFrame.currentQueryIndex=n}function $x(n){let e=n[ee];return e.type===2?e.declTNode:e.type===1?n[qt]:null}function qI(n,e,t){if(t&oe.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&oe.Host);)if(i=$x(o),i===null||(o=o[Yi],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=Y.lFrame=zI();return r.currentTNode=e,r.lView=n,!0}function sp(n){let e=zI(),t=n[ee];Y.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function zI(){let n=Y.lFrame,e=n===null?null:n.child;return e===null?GI(n):e}function GI(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function WI(){let n=Y.lFrame;return Y.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var KI=WI;function ap(){let n=WI();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Hx(n){return(Y.lFrame.contextLView=Sx(n,Y.lFrame.contextLView))[$t]}function yn(){return Y.lFrame.selectedIndex}function Br(n){Y.lFrame.selectedIndex=n}function xu(){let n=Y.lFrame;return FI(n.tView,n.selectedIndex)}function N$(){Y.lFrame.currentNamespace=OI}function R$(){qx()}function qx(){Y.lFrame.currentNamespace=null}function zx(){return Y.lFrame.currentNamespace}var QI=!0;function Mu(){return QI}function Nu(n){QI=n}function Gx(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=NI(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Ru(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:f}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),f!=null&&(n.destroyHooks??=[]).push(t,f)}}function qc(n,e,t){YI(n,e,3,t)}function zc(n,e,t,r){(n[z]&3)===t&&YI(n,e,t,r)}function kf(n,e){let t=n[z];(t&3)===e&&(t&=16383,t+=1,n[z]=t)}function YI(n,e,t,r){let i=r!==void 0?n[Li]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Li]+=65536),(a<o||o==-1)&&(Wx(n,t,e,u),n[Li]=(n[Li]&4294901760)+u+2),u++}function ww(n,e){Xt(4,n,e);let t=ue(null);try{e.call(n)}finally{ue(t),Xt(5,n,e)}}function Wx(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[z]>>14<n[Li]>>16&&(n[z]&3)===e&&(n[z]+=16384,ww(a,o)):ww(a,o)}var $i=-1,Ur=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function Kx(n){return n instanceof Ur}function Qx(n){return(n.flags&8)!==0}function Yx(n){return(n.flags&16)!==0}function JI(n){return n!==$i}function nu(n){return n&32767}function Jx(n){return n>>16}function ru(n,e){let t=Jx(n),r=e;for(;t>0;)r=r[Yi],t--;return r}var oh=!0;function iu(n){let e=oh;return oh=n,e}var Zx=256,ZI=Zx-1,XI=5,Xx=0,en={};function eM(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Ds)&&(r=t[Ds]),r==null&&(r=t[Ds]=Xx++);let i=r&ZI,o=1<<i;e.data[n+(i>>XI)]|=o}function ou(n,e){let t=eE(n,e);if(t!==-1)return t;let r=e[ee];r.firstCreatePass&&(n.injectorIndex=e.length,Ff(r.data,n),Ff(e,null),Ff(r.blueprint,null));let i=cp(n,e),o=n.injectorIndex;if(JI(i)){let s=nu(i),a=ru(i,e),u=a[ee].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Ff(n,e){n.push(0,0,0,0,0,0,0,0,e)}function eE(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function cp(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=oE(i),r===null)return $i;if(t++,i=i[Yi],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return $i}function sh(n,e,t){eM(n,e,t)}function tM(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(fI(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function tE(n,e,t){if(t&oe.Optional||n!==void 0)return n;Qh(e,"NodeInjector")}function nE(n,e,t,r){if(t&oe.Optional&&r===void 0&&(r=null),!(t&(oe.Self|oe.Host))){let i=n[zi],o=gt(void 0);try{return i?i.get(e,r,t&oe.Optional):sI(e,r,t&oe.Optional)}finally{gt(o)}}return tE(r,e,t)}function rE(n,e,t,r=oe.Default,i){if(n!==null){if(e[z]&2048&&!(r&oe.Self)){let s=oM(n,e,t,r,en);if(s!==en)return s}let o=iE(n,e,t,r,en);if(o!==en)return o}return nE(e,t,r,i)}function iE(n,e,t,r,i){let o=rM(t);if(typeof o=="function"){if(!qI(e,n,r))return r&oe.Host?tE(i,t,r):nE(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&oe.Optional))Qh(t);else return s}finally{KI()}}else if(typeof o=="number"){let s=null,a=eE(n,e),u=$i,l=r&oe.Host?e[nn][qt]:null;for((a===-1||r&oe.SkipSelf)&&(u=a===-1?cp(n,e):e[a+8],u===$i||!Ew(r,!1)?a=-1:(s=e[ee],a=nu(u),e=ru(u,e)));a!==-1;){let f=e[ee];if(Iw(o,a,f.data)){let p=nM(a,e,t,s,r,l);if(p!==en)return p}u=e[a+8],u!==$i&&Ew(r,e[ee].data[a+8]===l)&&Iw(o,a,e)?(s=f,a=nu(u),e=ru(u,e)):a=-1}}return i}function nM(n,e,t,r,i,o){let s=e[ee],a=s.data[n+8],u=r==null?bu(a)&&oh:r!=s&&(a.type&3)!==0,l=i&oe.Host&&o===a,f=Gc(a,s,t,u,l);return f!==null?$r(e,s,f,a):en}function Gc(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,f=o>>20,p=r?a:a+f,m=i?a+f:l;for(let y=p;y<m;y++){let T=s[y];if(y<u&&t===T||y>=u&&T.type===t)return y}if(i){let y=s[u];if(y&&Kn(y)&&y.type===t)return u}return null}function $r(n,e,t,r){let i=n[t],o=e.data;if(Kx(i)){let s=i;s.resolving&&TA(bA(o[t]));let a=iu(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?gt(s.injectImpl):null,f=qI(n,r,oe.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&Gx(t,o[t],e)}finally{l!==null&&gt(l),iu(a),s.resolving=!1,KI()}}return i}function rM(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Ds)?n[Ds]:void 0;return typeof e=="number"?e>=0?e&ZI:iM:e}function Iw(n,e,t){let r=1<<n;return!!(t[e+(n>>XI)]&r)}function Ew(n,e){return!(n&oe.Self)&&!(n&oe.Host&&e)}var Fr=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return rE(this._tNode,this._lView,e,wu(r),t)}};function iM(){return new Fr(Xe(),K())}function P$(n){return Os(()=>{let e=n.prototype.constructor,t=e[Qc]||ah(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Qc]||ah(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function ah(n){return eI(n)?()=>{let e=ah(st(n));return e&&e()}:Vr(n)}function oM(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[z]&2048&&!(s[z]&512);){let a=iE(o,s,t,r|oe.Self,en);if(a!==en)return a;let u=o.parent;if(!u){let l=s[SI];if(l){let f=l.get(t,en,r);if(f!==en)return f}u=oE(s),s=s[Yi]}o=u}return i}function oE(n){let e=n[ee],t=e.type;return t===2?e.declTNode:t===1?n[qt]:null}function sM(n){return tM(Xe(),n)}function Dw(n,e=null,t=null,r){let i=sE(n,e,t,r);return i.resolveInjectorInitializers(),i}function sE(n,e=null,t=null,r,i=new Set){let o=[t||mt,ix(n)];return r=r||(typeof n=="object"?void 0:at(n)),new Ss(o,e||Xh(),r||null,i)}var Ji=(()=>{class n{static{this.THROW_IF_NOT_FOUND=bs}static{this.NULL=new Xc}static create(t,r){if(Array.isArray(t))return Dw({name:""},r,t,"");{let i=t.name??"";return Dw({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=we({token:n,providedIn:"any",factory:()=>Ke(uI)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();var aM="ngOriginalError";function Vf(n){return n[aM]}var Qn=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Vf(e);for(;t&&Vf(t);)t=Vf(t);return t||null}},aE=new me("",{providedIn:"root",factory:()=>de(Qn).handleError.bind(void 0)}),Pu=(()=>{class n{static{this.__NG_ELEMENT_ID__=cM}static{this.__NG_ENV_ID__=t=>t}}return n})(),ch=class extends Pu{constructor(e){super(),this._lView=e}onDestroy(e){return LI(this._lView,e),()=>Ax(this._lView,e)}};function cM(){return new ch(K())}function uM(){return Zi(Xe(),K())}function Zi(n,e){return new Kr(Pt(n,e))}var Kr=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=uM}}return n})();function lM(n){return n instanceof Kr?n.nativeElement:n}var uh=class extends Un{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,TI()&&(this.destroyRef=de(Pu,{optional:!0})??void 0)}emit(e){let t=ue(null);try{super.next(e)}finally{ue(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=Lf(o),i&&(i=Lf(i)),s&&(s=Lf(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ue&&e.add(a),a}};function Lf(n){return e=>{setTimeout(n,void 0,e)}}var Or=uh;function dM(){return this._results[Symbol.iterator]()}var lh=class n{get changes(){return this._changes??=new Or}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=dM)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=LA(e);(this._changesDetected=!VA(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function cE(n){return(n.flags&128)===128}var uE=new Map,fM=0;function hM(){return fM++}function pM(n){uE.set(n[Du],n)}function gM(n){uE.delete(n[Du])}var bw="__ngContext__";function Yn(n,e){kr(e)?(n[bw]=e[Du],pM(e)):n[bw]=e}function lE(n){return fE(n[xs])}function dE(n){return fE(n[Ut])}function fE(n){for(;n!==null&&!mn(n);)n=n[Ut];return n}var dh;function O$(n){dh=n}function hE(){if(dh!==void 0)return dh;if(typeof document<"u")return document;throw new le(210,!1)}var k$=new me("",{providedIn:"root",factory:()=>mM}),mM="ng",yM=new me(""),up=new me("",{providedIn:"platform",factory:()=>"unknown"});var F$=new me(""),V$=new me("",{providedIn:"root",factory:()=>hE().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var _M="h",vM="b";var wM=()=>null;function lp(n,e,t=!1){return wM(n,e,t)}var pE=!1,IM=new me("",{providedIn:"root",factory:()=>pE});var Vc;function EM(){if(Vc===void 0&&(Vc=null,Nt.trustedTypes))try{Vc=Nt.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Vc}function Ou(n){return EM()?.createHTML(n)||n}var Lc;function gE(){if(Lc===void 0&&(Lc=null,Nt.trustedTypes))try{Lc=Nt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Lc}function Tw(n){return gE()?.createHTML(n)||n}function Cw(n){return gE()?.createScriptURL(n)||n}var su=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Yw})`}};function Xi(n){return n instanceof su?n.changingThisBreaksApplicationSecurity:n}function dp(n,e){let t=DM(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Yw})`)}return t===e}function DM(n){return n instanceof su&&n.getTypeName()||null}function bM(n){let e=new hh(n);return TM()?new fh(e):e}var fh=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(Ou(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}},hh=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=Ou(e),t}};function TM(){try{return!!new window.DOMParser().parseFromString(Ou(""),"text/html")}catch{return!1}}var CM=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function mE(n){return n=String(n),n.match(CM)?n:"unsafe:"+n}function _n(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function Vs(...n){let e={};for(let t of n)for(let r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}var yE=_n("area,br,col,hr,img,wbr"),_E=_n("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),vE=_n("rp,rt"),SM=Vs(vE,_E),AM=Vs(_E,_n("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),xM=Vs(vE,_n("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Sw=Vs(yE,AM,xM,SM),wE=_n("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),MM=_n("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),NM=_n("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),RM=Vs(wE,MM,NM),PM=_n("script,style,template"),ph=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild){i.push(t),t=FM(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=kM(t);if(o){t=o;break}t=i.pop()}}return this.buf.join("")}startElement(e){let t=Aw(e).toLowerCase();if(!Sw.hasOwnProperty(t))return this.sanitizedSomething=!0,!PM.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let r=e.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),s=o.name,a=s.toLowerCase();if(!RM.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let u=o.value;wE[a]&&(u=mE(u)),this.buf.push(" ",s,'="',xw(u),'"')}return this.buf.push(">"),!0}endElement(e){let t=Aw(e).toLowerCase();Sw.hasOwnProperty(t)&&!yE.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(xw(e))}};function OM(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function kM(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw IE(e);return e}function FM(n){let e=n.firstChild;if(e&&OM(n,e))throw IE(e);return e}function Aw(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function IE(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var VM=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,LM=/([^\#-~ |!])/g;function xw(n){return n.replace(/&/g,"&amp;").replace(VM,function(e){let t=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(LM,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var jc;function jM(n,e){let t=null;try{jc=jc||bM(n);let r=e?String(e):"";t=jc.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=t.innerHTML,t=jc.getInertBodyElement(r)}while(r!==o);let a=new ph().sanitizeChildren(Mw(t)||t);return Ou(a)}finally{if(t){let r=Mw(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function Mw(n){return"content"in n&&BM(n)?n.content:null}function BM(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var ku=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(ku||{});function L$(n){let e=fp();return e?Tw(e.sanitize(ku.HTML,n)||""):dp(n,"HTML")?Tw(Xi(n)):jM(hE(),tn(n))}function UM(n){let e=fp();return e?e.sanitize(ku.URL,n)||"":dp(n,"URL")?Xi(n):mE(tn(n))}function $M(n){let e=fp();if(e)return Cw(e.sanitize(ku.RESOURCE_URL,n)||"");if(dp(n,"ResourceURL"))return Cw(Xi(n));throw new le(904,!1)}function HM(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?$M:UM}function j$(n,e,t){return HM(e,t)(n)}function fp(){let n=K();return n&&n[Ht].sanitizer}var qM=/^>|^->|<!--|-->|--!>|<!-$/g,zM=/(<|>)/g,GM="\u200B$1\u200B";function WM(n){return n.replace(qM,e=>e.replace(zM,GM))}function B$(n){return n.ownerDocument}function EE(n){return n instanceof Function?n():n}function KM(n){return(n??de(Ji)).get(up)==="browser"}var au=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(au||{}),QM;function hp(n,e){return QM(n,e)}function ji(n,e,t,r,i){if(r!=null){let o,s=!1;mn(r)?o=r:kr(r)&&(s=!0,r=r[gn]);let a=rn(r);n===0&&t!==null?i==null?SE(e,t,a):cu(e,t,a,i||null,!0):n===1&&t!==null?cu(e,t,a,i||null,!0):n===2?hN(e,a,s):n===3&&e.destroyNode(a),o!=null&&gN(e,n,o,t,i)}}function YM(n,e){return n.createText(e)}function JM(n,e,t){n.setValue(e,t)}function ZM(n,e){return n.createComment(WM(e))}function DE(n,e,t){return n.createElement(e,t)}function XM(n,e){bE(n,e),e[gn]=null,e[qt]=null}function eN(n,e,t,r,i,o){r[gn]=i,r[qt]=e,Vu(n,r,t,1,i,o)}function bE(n,e){e[Ht].changeDetectionScheduler?.notify(1),Vu(n,e,e[Me],2,null,null)}function tN(n){let e=n[xs];if(!e)return jf(n[ee],n);for(;e;){let t=null;if(kr(e))t=e[xs];else{let r=e[Dt];r&&(t=r)}if(!t){for(;e&&!e[Ut]&&e!==n;)kr(e)&&jf(e[ee],e),e=e[Qe];e===null&&(e=n),kr(e)&&jf(e[ee],e),t=e&&e[Ut]}e=t}}function nN(n,e,t,r){let i=Dt+r,o=t.length;r>0&&(t[i-1][Ut]=e),r<o-Dt?(e[Ut]=t[i],cI(t,Dt+r,e)):(t.push(e),e[Ut]=null),e[Qe]=t;let s=e[Fs];s!==null&&t!==s&&rN(s,e);let a=e[pn];a!==null&&a.insertView(n),rh(e),e[z]|=128}function rN(n,e){let t=n[Gi],i=e[Qe][Qe][nn];e[nn]!==i&&(n[z]|=ep.HasTransplantedViews),t===null?n[Gi]=[e]:t.push(e)}function TE(n,e){let t=n[Gi],r=t.indexOf(e);t.splice(r,1)}function gh(n,e){if(n.length<=Dt)return;let t=Dt+e,r=n[t];if(r){let i=r[Fs];i!==null&&i!==n&&TE(i,r),e>0&&(n[t-1][Ut]=r[Ut]);let o=Jc(n,Dt+e);XM(r[ee],r);let s=o[pn];s!==null&&s.detachView(o[ee]),r[Qe]=null,r[Ut]=null,r[z]&=-129}return r}function CE(n,e){if(!(e[z]&256)){let t=e[Me];t.destroyNode&&Vu(n,e,t,3,null,null),tN(e)}}function jf(n,e){if(e[z]&256)return;let t=ue(null);try{e[z]&=-129,e[z]|=256,e[Lr]&&Nf(e[Lr]),oN(n,e),iN(n,e),e[ee].type===1&&e[Me].destroy();let r=e[Fs];if(r!==null&&mn(e[Qe])){r!==e[Qe]&&TE(r,e);let i=e[pn];i!==null&&i.detachView(n)}gM(e)}finally{ue(t)}}function iN(n,e){let t=n.cleanup,r=e[As];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[As]=null);let i=e[qn];if(i!==null){e[qn]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function oN(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Ur)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Xt(4,a,u);try{u.call(a)}finally{Xt(5,a,u)}}else{Xt(4,i,o);try{o.call(i)}finally{Xt(5,i,o)}}}}}function sN(n,e,t){return aN(n,e.parent,t)}function aN(n,e,t){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return t[gn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Ts.None||o===Ts.Emulated)return null}return Pt(r,t)}}function cu(n,e,t,r,i){n.insertBefore(e,t,r,i)}function SE(n,e,t){n.appendChild(e,t)}function Nw(n,e,t,r,i){r!==null?cu(n,e,t,r,i):SE(n,e,t)}function cN(n,e,t,r){n.removeChild(e,t,r)}function pp(n,e){return n.parentNode(e)}function uN(n,e){return n.nextSibling(e)}function lN(n,e,t){return fN(n,e,t)}function dN(n,e,t){return n.type&40?Pt(n,t):null}var fN=dN,Rw;function Fu(n,e,t,r){let i=sN(n,r,e),o=e[Me],s=r.parent||e[qt],a=lN(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)Nw(o,i,t[u],a,!1);else Nw(o,i,t,a,!1);Rw!==void 0&&Rw(o,r,e,t,i)}function Wc(n,e){if(e!==null){let t=e.type;if(t&3)return Pt(e,n);if(t&4)return mh(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Wc(n,r);{let i=n[e.index];return mn(i)?mh(-1,i):rn(i)}}else{if(t&32)return hp(e,n)()||rn(n[e.index]);{let r=AE(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ns(n[nn]);return Wc(i,r)}else return Wc(n,e.next)}}}return null}function AE(n,e){if(e!==null){let r=n[nn][qt],i=e.projection;return r.projection[i]}return null}function mh(n,e){let t=Dt+n+1;if(t<e.length){let r=e[t],i=r[ee].firstChild;if(i!==null)return Wc(r,i)}return e[jr]}function hN(n,e,t){let r=pp(n,e);r&&cN(n,r,e,t)}function gp(n,e,t,r,i,o,s){for(;t!=null;){let a=r[t.index],u=t.type;if(s&&e===0&&(a&&Yn(rn(a),r),t.flags|=2),(t.flags&32)!==32)if(u&8)gp(n,e,t.child,r,i,o,!1),ji(e,n,i,a,o);else if(u&32){let l=hp(t,r),f;for(;f=l();)ji(e,n,i,f,o);ji(e,n,i,a,o)}else u&16?pN(n,e,r,t,i,o):ji(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Vu(n,e,t,r,i,o){gp(t,r,n.firstChild,e,i,o,!1)}function pN(n,e,t,r,i,o){let s=t[nn],u=s[qt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let f=u[l];ji(e,n,i,f,o)}else{let l=u,f=s[Qe];cE(r)&&(l.flags|=128),gp(n,e,l,f,i,o,!0)}}function gN(n,e,t,r,i){let o=t[jr],s=rn(t);o!==s&&ji(e,n,r,o,i);for(let a=Dt;a<t.length;a++){let u=t[a];Vu(u[ee],u,n,e,r,o)}}function mN(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:au.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=au.Important),n.setStyle(t,r,i,o))}}function yN(n,e,t){n.setAttribute(e,"style",t)}function xE(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function ME(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Zf(n,e,r),i!==null&&xE(n,e,i),o!==null&&yN(n,e,o)}var ct={};function U$(n=1){NE(Ne(),K(),yn()+n,!1)}function NE(n,e,t,r){if(!r)if((e[z]&3)===3){let o=n.preOrderCheckHooks;o!==null&&qc(e,o,t)}else{let o=n.preOrderHooks;o!==null&&zc(e,o,0,t)}Br(t)}function $e(n,e=oe.Default){let t=K();if(t===null)return Ke(n,e);let r=Xe();return rE(r,t,st(n),e)}function $$(){let n="invalid";throw new Error(n)}function RE(n,e,t,r,i,o){let s=ue(null);try{let a=null;i&zn.SignalBased&&(a=e[r][Zt]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&zn.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):xI(e,a,r,o)}finally{ue(s)}}function _N(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Br(~i);else{let o=i,s=t[++r],a=t[++r];jx(s,o);let u=e[o];a(2,u)}}}finally{Br(-1)}}function Lu(n,e,t,r,i,o,s,a,u,l,f){let p=e.blueprint.slice();return p[gn]=i,p[z]=r|4|128|8|64,(l!==null||n&&n[z]&2048)&&(p[z]|=2048),VI(p),p[Qe]=p[Yi]=n,p[$t]=t,p[Ht]=s||n&&n[Ht],p[Me]=a||n&&n[Me],p[zi]=u||n&&n[zi]||null,p[qt]=o,p[Du]=hM(),p[eu]=f,p[SI]=l,p[nn]=e.type==2?n[nn]:p,p}function Ls(n,e,t,r,i){let o=n.data[e];if(o===null)o=vN(n,e,t,r,i),Lx()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=kx();o.injectorIndex=s===null?-1:s.injectorIndex}return Wr(o,!0),o}function vN(n,e,t,r,i){let o=BI(),s=ip(),a=s?o:o&&o.parent,u=n.data[e]=TN(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function PE(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function OE(n,e,t,r,i){let o=yn(),s=r&2;try{Br(-1),s&&e.length>yt&&NE(n,e,yt,!1),Xt(s?2:0,i),t(r,i)}finally{Br(o),Xt(s?3:1,i)}}function mp(n,e,t){if(tp(e)){let r=ue(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{ue(r)}}}function yp(n,e,t){jI()&&(NN(n,e,t,Pt(t,e)),(t.flags&64)===64&&VE(n,e,t))}function _p(n,e,t=Pt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function kE(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=vp(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function vp(n,e,t,r,i,o,s,a,u,l,f){let p=yt+r,m=p+i,y=wN(p,m),T=typeof l=="function"?l():l;return y[ee]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:T,incompleteFirstPass:!1,ssrId:f}}function wN(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:ct);return t}function IN(n,e,t,r){let o=r.get(IM,pE)||t===Ts.ShadowDom,s=n.selectRootElement(e,o);return EN(s),s}function EN(n){DN(n)}var DN=()=>null;function bN(n,e,t,r){let i=BE(e);i.push(t),n.firstCreatePass&&UE(n).push(r,i.length-1)}function TN(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Rx()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Pw(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=zn.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?Ow(r,t,l,a,u):Ow(r,t,l,a)}return r}function Ow(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function CN(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],u=null,l=null;for(let f=r;f<i;f++){let p=o[f],m=t?t.get(p):null,y=m?m.inputs:null,T=m?m.outputs:null;u=Pw(0,p.inputs,f,u,y),l=Pw(1,p.outputs,f,l,T);let M=u!==null&&s!==null&&!Jh(e)?$N(u,f,s):null;a.push(M)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function SN(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function wp(n,e,t,r,i,o,s,a){let u=Pt(e,t),l=e.inputs,f;!a&&l!=null&&(f=l[r])?(Ep(n,t,f,r,i),bu(e)&&AN(t,e.index)):e.type&3?(r=SN(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function AN(n,e){let t=Zn(e,n);t[z]&16||(t[z]|=64)}function Ip(n,e,t,r){if(jI()){let i=r===null?null:{"":-1},o=PN(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&FE(n,e,t,s,i,a),i&&ON(t,r,i)}t.mergedAttrs=Cs(t.mergedAttrs,t.attrs)}function FE(n,e,t,r,i,o){for(let l=0;l<r.length;l++)sh(ou(t,e),n,r[l].type);FN(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let f=r[l];f.providersResolver&&f.providersResolver(f)}let s=!1,a=!1,u=PE(n,e,r.length,null);for(let l=0;l<r.length;l++){let f=r[l];t.mergedAttrs=Cs(t.mergedAttrs,f.hostAttrs),VN(n,t,e,u,f),kN(u,f,i),f.contentQueries!==null&&(t.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(t.flags|=64);let p=f.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}CN(n,t,o)}function xN(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;MN(s)!=a&&s.push(a),s.push(t,r,o)}}function MN(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function NN(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;bu(t)&&LN(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||ou(t,e),Yn(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let u=n.data[a],l=$r(e,n,a,t);if(Yn(l,e),s!==null&&UN(e,a-i,l,u,t,s),Kn(u)){let f=Zn(t.index,e);f[$t]=$r(e,n,a,t)}}}function VE(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=Bx();try{Br(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];ih(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&RN(u,l)}}finally{Br(-1),ih(s)}}function RN(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function PN(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(WA(e,s.selectors,!1))if(r||(r=[]),Kn(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;yh(n,e,u)}else r.unshift(s),yh(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function yh(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function ON(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new le(-301,!1);r.push(e[i],o)}}}function kN(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Kn(e)&&(t[""]=n)}}function FN(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function VN(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Vr(i.type,!0)),s=new Ur(o,Kn(i),$e);n.blueprint[r]=s,t[r]=s,xN(n,e,r,PE(n,t,i.hostVars,ct),i)}function LN(n,e,t){let r=Pt(e,n),i=kE(t),o=n[Ht].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=ju(n,Lu(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function jN(n,e,t,r,i,o){let s=Pt(n,e);BN(e[Me],s,o,n.value,t,r,i)}function BN(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?tn(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function UN(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],f=s[a++],p=s[a++];RE(r,t,u,l,f,p)}}function $N(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function LE(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function jE(n,e){let t=n.contentQueries;if(t!==null){let r=ue(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];op(o),a.contentQueries(2,e[s],s)}}}finally{ue(r)}}}function ju(n,e){return n[xs]?n[_w][Ut]=e:n[xs]=e,n[_w]=e,e}function _h(n,e,t){op(0);let r=ue(null);try{e(n,t)}finally{ue(r)}}function BE(n){return n[As]||(n[As]=[])}function UE(n){return n.cleanup||(n.cleanup=[])}function $E(n,e){let t=n[zi],r=t?t.get(Qn,null):null;r&&r.handleError(e)}function Ep(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],u=t[o++],l=e[s],f=n.data[s];RE(f,l,r,a,u,i)}}function Dp(n,e,t){let r=kI(e,n);JM(n[Me],r,t)}function HN(n,e){let t=Zn(e,n),r=t[ee];qN(r,t);let i=t[gn];i!==null&&t[eu]===null&&(t[eu]=lp(i,t[zi])),bp(r,t,t[$t])}function qN(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function bp(n,e,t){sp(e);try{let r=n.viewQuery;r!==null&&_h(1,r,t);let i=n.template;i!==null&&OE(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[pn]?.finishViewCreation(n),n.staticContentQueries&&jE(n,e),n.staticViewQueries&&_h(2,n.viewQuery,t);let o=n.components;o!==null&&zN(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[z]&=-5,ap()}}function zN(n,e){for(let t=0;t<e.length;t++)HN(n,e[t])}function GN(n,e,t,r){let i=ue(null);try{let o=e.tView,a=n[z]&4096?4096:16,u=Lu(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Fs]=l;let f=n[pn];return f!==null&&(u[pn]=f.createEmbeddedView(o)),bp(o,u,t),u}finally{ue(i)}}function kw(n,e){return!e||e.firstChild===null||cE(n)}function WN(n,e,t,r=!0){let i=e[ee];if(nN(i,e,n,t),r){let s=mh(t,n),a=e[Me],u=pp(a,n[jr]);u!==null&&eN(i,n[qt],a,e,u,s)}let o=e[eu];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function uu(n,e,t,r,i=!1){for(;t!==null;){let o=e[t.index];o!==null&&r.push(rn(o)),mn(o)&&KN(o,r);let s=t.type;if(s&8)uu(n,e,t.child,r);else if(s&32){let a=hp(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=AE(e,t);if(Array.isArray(a))r.push(...a);else{let u=Ns(e[nn]);uu(u[ee],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function KN(n,e){for(let t=Dt;t<n.length;t++){let r=n[t],i=r[ee].firstChild;i!==null&&uu(r[ee],r,i,e)}n[jr]!==n[gn]&&e.push(n[jr])}var HE=[];function QN(n){return n[Lr]??YN(n)}function YN(n){let e=HE.pop()??Object.create(ZN);return e.lView=n,e}function JN(n){n.lView[Lr]!==n&&(n.lView=null,HE.push(n))}var ZN=Pe(re({},Es),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Ms(n.lView)},consumerOnSignalRead(){this.lView[Lr]=this}}),qE=100;function zE(n,e=!0,t=0){let r=n[Ht],i=r.rendererFactory,o=!1;o||i.begin?.();try{XN(n,t)}catch(s){throw e&&$E(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function XN(n,e){vh(n,e);let t=0;for(;rp(n);){if(t===qE)throw new le(103,!1);t++,vh(n,1)}}function e1(n,e,t,r){let i=e[z];if((i&256)===256)return;let o=!1;!o&&e[Ht].inlineEffectRunner?.flush(),sp(e);let s=null,a=null;!o&&t1(n)&&(a=QN(e),s=Rc(a));try{VI(e),Vx(n.bindingStartIndex),t!==null&&OE(n,e,t,2,r);let u=(i&3)===3;if(!o)if(u){let p=n.preOrderCheckHooks;p!==null&&qc(e,p,null)}else{let p=n.preOrderHooks;p!==null&&zc(e,p,0,null),kf(e,0)}if(n1(e),GE(e,0),n.contentQueries!==null&&jE(n,e),!o)if(u){let p=n.contentCheckHooks;p!==null&&qc(e,p)}else{let p=n.contentHooks;p!==null&&zc(e,p,1),kf(e,1)}_N(n,e);let l=n.components;l!==null&&KE(e,l,0);let f=n.viewQuery;if(f!==null&&_h(2,f,r),!o)if(u){let p=n.viewCheckHooks;p!==null&&qc(e,p)}else{let p=n.viewHooks;p!==null&&zc(e,p,2),kf(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Hc]){for(let p of e[Hc])p();e[Hc]=null}o||(e[z]&=-73)}catch(u){throw Ms(e),u}finally{a!==null&&(Pc(a,s),JN(a)),ap()}}function t1(n){return n.type!==2}function GE(n,e){for(let t=lE(n);t!==null;t=dE(t))for(let r=Dt;r<t.length;r++){let i=t[r];WE(i,e)}}function n1(n){for(let e=lE(n);e!==null;e=dE(e)){if(!(e[z]&ep.HasTransplantedViews))continue;let t=e[Gi];for(let r=0;r<t.length;r++){let i=t[r],o=i[Qe];Cx(i)}}}function r1(n,e,t){let r=Zn(e,n);WE(r,t)}function WE(n,e){np(n)&&vh(n,e)}function vh(n,e){let r=n[ee],i=n[z],o=n[Lr],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Oc(o)),o&&(o.dirty=!1),n[z]&=-9217,s)e1(r,n,r.template,n[$t]);else if(i&8192){GE(n,1);let a=r.components;a!==null&&KE(n,a,1)}}function KE(n,e,t){for(let r=0;r<e.length;r++)r1(n,e[r],t)}function Tp(n){for(n[Ht].changeDetectionScheduler?.notify();n;){n[z]|=64;let e=Ns(n);if(yx(n)&&!e)return n;n=e}return null}var Hr=class{get rootNodes(){let e=this._lView,t=e[ee];return uu(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[$t]}set context(e){this._lView[$t]=e}get destroyed(){return(this._lView[z]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Qe];if(mn(e)){let t=e[tu],r=t?t.indexOf(this):-1;r>-1&&(gh(e,r),Jc(t,r))}this._attachedToViewContainer=!1}CE(this._lView[ee],this._lView)}onDestroy(e){LI(this._lView,e)}markForCheck(){Tp(this._cdRefInjectingView||this._lView)}detach(){this._lView[z]&=-129}reattach(){rh(this._lView),this._lView[z]|=128}detectChanges(){this._lView[z]|=1024,zE(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new le(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,bE(this._lView[ee],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new le(902,!1);this._appRef=e,rh(this._lView)}},qr=(()=>{class n{static{this.__NG_ELEMENT_ID__=s1}}return n})(),i1=qr,o1=class extends i1{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=GN(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Hr(i)}};function s1(){return Bu(Xe(),K())}function Bu(n,e){return n.type&4?new o1(e,n,Zi(n,e)):null}var q$=new RegExp(`^(\\d+)*(${vM}|${_M})*(.*)`);var a1=()=>null;function Fw(n,e){return a1(n,e)}var lu=class{},wh=class{},du=class{};function c1(n){let e=Error(`No component factory found for ${at(n)}.`);return e[u1]=n,e}var u1="ngComponent";var Ih=class{resolveComponentFactory(e){throw c1(e)}},Uu=(()=>{class n{static{this.NULL=new Ih}}return n})(),Eh=class{},Cp=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>l1()}}return n})();function l1(){let n=K(),e=Xe(),t=Zn(e.index,n);return(kr(t)?t:n)[Me]}var d1=(()=>{class n{static{this.\u0275prov=we({token:n,providedIn:"root",factory:()=>null})}}return n})(),Bf={};var Vw=new Set;function eo(n){Vw.has(n)||(Vw.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function Lw(...n){}function f1(){let n=typeof Nt.requestAnimationFrame=="function",e=Nt[n?"requestAnimationFrame":"setTimeout"],t=Nt[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}var Rt=class n{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Or(!1),this.onMicrotaskEmpty=new Or(!1),this.onStable=new Or(!1),this.onError=new Or(!1),typeof Zone>"u")throw new le(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=f1().nativeRequestAnimationFrame,g1(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new le(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new le(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,h1,Lw,Lw);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},h1={};function Sp(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function p1(n){n.isCheckStableRunning||n.lastRequestAnimationFrameId!==-1||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Nt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Dh(n),n.isCheckStableRunning=!0,Sp(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Dh(n))}function g1(n){let e=()=>{p1(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,s,a)=>{if(m1(a))return t.invokeTask(i,o,s,a);try{return jw(n),t.invokeTask(i,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Bw(n)}},onInvoke:(t,r,i,o,s,a,u)=>{try{return jw(n),t.invoke(i,o,s,a,u)}finally{n.shouldCoalesceRunChangeDetection&&e(),Bw(n)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,Dh(n),Sp(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function Dh(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.lastRequestAnimationFrameId!==-1?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function jw(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Bw(n){n._nesting--,Sp(n)}function m1(n){return!Array.isArray(n)||n.length!==1?!1:n[0].data?.__ignore_ng_zone__===!0}var Bi=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Bi||{}),y1={destroy(){}};function _1(n,e){!e&&CI(_1);let t=e?.injector??de(Ji);if(!KM(t))return y1;eo("NgAfterNextRender");let r=t.get(Ap),i=r.handler??=new Th,o=e?.phase??Bi.MixedReadWrite,s=()=>{i.unregister(u),a()},a=t.get(Pu).onDestroy(s),u=gx(t,()=>new bh(o,()=>{s(),n()}));return i.register(u),{destroy:s}}var bh=class{constructor(e,t){this.phase=e,this.callbackFn=t,this.zone=de(Rt),this.errorHandler=de(Qn,{optional:!0}),de(lu,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},Th=class{constructor(){this.executingCallbacks=!1,this.buckets={[Bi.EarlyRead]:new Set,[Bi.Write]:new Set,[Bi.MixedReadWrite]:new Set,[Bi.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let t of e)t.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Ap=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let t=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of t)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=we({token:n,providedIn:"root",factory:()=>new n})}}return n})();function fu(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Kf(i,a);else if(o==2){let u=a,l=e[++s];r=Kf(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var hu=class extends Uu{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Gn(e);return new Ki(t,this.ngModule)}};function Uw(n){let e=[];for(let t in n){if(!n.hasOwnProperty(t))continue;let r=n[t];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:t})}return e}function v1(n){let e=n.toLowerCase();return e==="svg"?OI:e==="math"?Ix:null}var Ch=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=wu(r);let i=this.injector.get(e,Bf,r);return i!==Bf||t===Bf?i:this.parentInjector.get(e,t,r)}},Ki=class extends du{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=Uw(e.inputs);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return Uw(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=JA(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=ue(null);try{i=i||this.ngModule;let s=i instanceof Wn?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Ch(e,s):e,u=a.get(Eh,null);if(u===null)throw new le(407,!1);let l=a.get(d1,null),f=a.get(Ap,null),p=a.get(lu,null),m={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:f,changeDetectionScheduler:p},y=u.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",M=r?IN(y,r,this.componentDef.encapsulation,a):DE(y,T,v1(T)),N=512;this.componentDef.signals?N|=4096:this.componentDef.onPush||(N|=16);let V=null;M!==null&&(V=lp(M,a,!0));let U=vp(0,null,null,1,0,null,null,null,null,null,null),L=Lu(null,U,null,N,null,null,m,y,a,null,V);sp(L);let Q,J;try{let G=this.componentDef,I,_=null;G.findHostDirectiveDefs?(I=[],_=new Map,G.findHostDirectiveDefs(G,I,_),I.push(G)):I=[G];let w=w1(L,M),D=I1(w,M,G,I,L,m,y);J=FI(U,yt),M&&b1(y,G,M,r),t!==void 0&&T1(J,this.ngContentSelectors,t),Q=D1(D,G,I,_,L,[C1]),bp(U,L,null)}finally{ap()}return new Sh(this.componentType,Q,Zi(J,L),L,J)}finally{ue(o)}}},Sh=class extends wh{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Hr(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;Ep(o[ee],o,i,e,t),this.previousInputValues.set(e,t);let s=Zn(this._tNode.index,o);Tp(s)}}get injector(){return new Fr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function w1(n,e){let t=n[ee],r=yt;return n[r]=e,Ls(t,r,2,"#host",null)}function I1(n,e,t,r,i,o,s){let a=i[ee];E1(r,n,e,s);let u=null;e!==null&&(u=lp(e,i[zi]));let l=o.rendererFactory.createRenderer(e,t),f=16;t.signals?f=4096:t.onPush&&(f=64);let p=Lu(i,kE(t),null,f,i[n.index],n,o,l,null,null,u);return a.firstCreatePass&&yh(a,n,r.length-1),ju(i,p),i[n.index]=p}function E1(n,e,t,r){for(let i of n)e.mergedAttrs=Cs(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(fu(e,e.mergedAttrs,!0),t!==null&&ME(r,t,e))}function D1(n,e,t,r,i,o){let s=Xe(),a=i[ee],u=Pt(s,i);FE(a,i,s,t,null,r);for(let f=0;f<t.length;f++){let p=s.directiveStart+f,m=$r(i,a,p,s);Yn(m,i)}VE(a,i,s),u&&Yn(u,i);let l=$r(i,a,s.directiveStart+s.componentOffset,s);if(n[$t]=i[$t]=l,o!==null)for(let f of o)f(l,e);return mp(a,s,i),l}function b1(n,e,t,r){if(r)Zf(n,t,["ng-version","17.3.12"]);else{let{attrs:i,classes:o}=ZA(e.selectors[0]);i&&Zf(n,t,i),o&&o.length>0&&xE(n,t,o.join(" "))}}function T1(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function C1(){let n=Xe();Ru(K()[ee],n)}var to=(()=>{class n{static{this.__NG_ELEMENT_ID__=S1}}return n})();function S1(){let n=Xe();return YE(n,K())}var A1=to,QE=class extends A1{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Zi(this._hostTNode,this._hostLView)}get injector(){return new Fr(this._hostTNode,this._hostLView)}get parentInjector(){let e=cp(this._hostTNode,this._hostLView);if(JI(e)){let t=ru(e,this._hostLView),r=nu(e),i=t[ee].data[r+8];return new Fr(i,t)}else return new Fr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=$w(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Dt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Fw(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,kw(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!mx(e),a;if(s)a=t;else{let T=t||{};a=T.index,r=T.injector,i=T.projectableNodes,o=T.environmentInjector||T.ngModuleRef}let u=s?e:new Ki(Gn(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let M=(s?l:this.parentInjector).get(Wn,null);M&&(o=M)}let f=Gn(u.componentType??{}),p=Fw(this._lContainer,f?.id??null),m=p?.firstChild??null,y=u.create(l,i,m,o);return this.insertImpl(y.hostView,a,kw(this._hostTNode,p)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(Tx(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Qe],l=new QE(u,u[qt],u[Qe]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return WN(s,i,o,r),e.attachToViewContainerRef(),cI(Uf(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=$w(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=gh(this._lContainer,t);r&&(Jc(Uf(this._lContainer),t),CE(r[ee],r))}detach(e){let t=this._adjustIndex(e,-1),r=gh(this._lContainer,t);return r&&Jc(Uf(this._lContainer),t)!=null?new Hr(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function $w(n){return n[tu]}function Uf(n){return n[tu]||(n[tu]=[])}function YE(n,e){let t,r=e[n.index];return mn(r)?t=r:(t=LE(r,e,null,n),e[n.index]=t,ju(e,t)),M1(t,e,n,r),new QE(t,n,e)}function x1(n,e){let t=n[Me],r=t.createComment(""),i=Pt(e,n),o=pp(t,i);return cu(t,o,r,uN(t,i),!1),r}var M1=P1,N1=()=>!1;function R1(n,e,t){return N1(n,e,t)}function P1(n,e,t,r){if(n[jr])return;let i;t.type&8?i=rn(r):i=x1(e,t),n[jr]=i}var Ah=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},xh=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)xp(e,t).matches!==null&&this.queries[t].setDirty()}},pu=class{constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=U1(e):this.predicate=e}},Mh=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Nh=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,O1(t,o)),this.matchTNodeWithReadOption(e,t,Gc(t,e,o,!1,!1))}else r===qr?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Gc(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Kr||i===to||i===qr&&t.type&4)this.addMatch(t.index,-2);else{let o=Gc(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function O1(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function k1(n,e){return n.type&11?Zi(n,e):n.type&4?Bu(n,e):null}function F1(n,e,t,r){return t===-1?k1(e,n):t===-2?V1(n,e,r):$r(n,n[ee],t,e)}function V1(n,e,t){if(t===Kr)return Zi(e,n);if(t===qr)return Bu(e,n);if(t===to)return YE(e,n)}function JE(n,e,t,r){let i=e[pn].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let f=o[l];a.push(F1(e,f,s[u+1],t.metadata.read))}}i.matches=a}return i.matches}function Rh(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=JE(n,e,i,t);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],f=e[-u];for(let p=Dt;p<f.length;p++){let m=f[p];m[Fs]===m[Qe]&&Rh(m[ee],m,l,r)}if(f[Gi]!==null){let p=f[Gi];for(let m=0;m<p.length;m++){let y=p[m];Rh(y[ee],y,l,r)}}}}}return r}function L1(n,e){return n[pn].queries[e].queryList}function ZE(n,e,t){let r=new lh((t&4)===4);return bN(n,e,r,r.destroy),(e[pn]??=new xh).queries.push(new Ah(r))-1}function j1(n,e,t){let r=Ne();return r.firstCreatePass&&(XE(r,new pu(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),ZE(r,K(),e)}function B1(n,e,t,r){let i=Ne();if(i.firstCreatePass){let o=Xe();XE(i,new pu(e,t,r),o.index),$1(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return ZE(i,K(),t)}function U1(n){return n.split(",").map(e=>e.trim())}function XE(n,e,t){n.queries===null&&(n.queries=new Mh),n.queries.track(new Nh(e,t))}function $1(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function xp(n,e){return n.queries.getByIndex(e)}function H1(n,e){let t=n[ee],r=xp(t,e);return r.crossesNgTemplate?Rh(t,n,e,[]):JE(t,n,r,e)}function q1(n){return typeof n=="function"&&n[Zt]!==void 0}function Mp(n,e){eo("NgSignals");let t=ow(n),r=t[Zt];return e?.equal&&(r.equal=e.equal),t.set=i=>Rf(r,i),t.update=i=>sw(r,i),t.asReadonly=z1.bind(t),t}function z1(){let n=this[Zt];if(n.readonlyFn===void 0){let e=()=>this();e[Zt]=n,n.readonlyFn=e}return n.readonlyFn}function eD(n){return q1(n)&&typeof n.set=="function"}function G1(n){return Object.getPrototypeOf(n.prototype).constructor}function W1(n){let e=G1(n.type),t=!0,r=[n];for(;e;){let i;if(Kn(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new le(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Bc(n.inputs),s.inputTransforms=Bc(n.inputTransforms),s.declaredInputs=Bc(n.declaredInputs),s.outputs=Bc(n.outputs);let a=i.hostBindings;a&&Z1(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&Y1(n,u),l&&J1(n,l),K1(n,i),mA(n.outputs,i.outputs),Kn(i)&&i.data.animation){let f=n.data;f.animation=(f.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===W1&&(t=!1)}}e=Object.getPrototypeOf(e)}Q1(r)}function K1(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function Q1(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Cs(i.hostAttrs,t=Cs(t,i.hostAttrs))}}function Bc(n){return n===Hi?{}:n===mt?[]:n}function Y1(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function J1(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function Z1(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function X1(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var Jn=class{},Ph=class{};var Oh=class extends Jn{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new hu(this);let i=yI(e);this._bootstrapComponents=EE(i.bootstrap),this._r3Injector=sE(e,t,[{provide:Jn,useValue:this},{provide:Uu,useValue:this.componentFactoryResolver},...r],at(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},kh=class extends Ph{constructor(e){super(),this.moduleType=e}create(e){return new Oh(this.moduleType,e,[])}};var gu=class extends Jn{constructor(e){super(),this.componentFactoryResolver=new hu(this),this.instance=null;let t=new Ss([...e.providers,{provide:Jn,useValue:this},{provide:Uu,useValue:this.componentFactoryResolver}],e.parent||Xh(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function eR(n,e,t=null){return new gu({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var Np=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new $n(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function tD(n){return nR(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function tR(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function nR(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function js(n,e,t){return n[e]=t}function rR(n,e){return n[e]}function on(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Rs(n,e,t,r){let i=on(n,e,t);return on(n,e+1,r)||i}function nD(n,e,t,r,i){let o=Rs(n,e,t,r);return on(n,e+2,i)||o}function iR(n,e,t,r,i,o){let s=Rs(n,e,t,r);return Rs(n,e+2,i,o)||s}function oR(n){return(n.flags&32)===32}function sR(n,e,t,r,i,o,s,a,u){let l=e.consts,f=Ls(e,n,4,s||null,Wi(l,a));Ip(e,t,f,Wi(l,u)),Ru(e,f);let p=f.tView=vp(2,f,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,f),p.queries=e.queries.embeddedTView(f)),f}function aR(n,e,t,r,i,o,s,a){let u=K(),l=Ne(),f=n+yt,p=l.firstCreatePass?sR(f,l,u,e,t,r,i,o,s):l.data[f];Wr(p,!1);let m=cR(l,u,p,n);Mu()&&Fu(l,u,m,p),Yn(m,u);let y=LE(m,u,m,p);return u[f]=y,ju(u,y),R1(y,p,u),Tu(p)&&yp(l,u,p),s!=null&&_p(u,p,a),aR}var cR=uR;function uR(n,e,t,r){return Nu(!0),e[Me].createComment("")}function lR(n,e,t,r){let i=K(),o=Su();if(on(i,o,e)){let s=Ne(),a=xu();jN(a,i,n,e,t,r)}return lR}function Rp(n,e,t,r){return on(n,Su(),t)?e+tn(t)+r:ct}function dR(n,e,t,r,i,o){let s=$I(),a=Rs(n,s,t,i);return Au(2),a?e+tn(t)+r+tn(i)+o:ct}function fR(n,e,t,r,i,o,s,a){let u=$I(),l=nD(n,u,t,i,s);return Au(3),l?e+tn(t)+r+tn(i)+o+tn(s)+a:ct}function Uc(n,e){return n<<17|e<<2}function zr(n){return n>>17&32767}function hR(n){return(n&2)==2}function pR(n,e){return n&131071|e<<17}function Fh(n){return n|2}function Qi(n){return(n&131068)>>2}function $f(n,e){return n&-131069|e<<2}function gR(n){return(n&1)===1}function Vh(n){return n|1}function mR(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=zr(s),u=Qi(s);n[r]=t;let l=!1,f;if(Array.isArray(t)){let p=t;f=p[1],(f===null||ks(p,f)>0)&&(l=!0)}else f=t;if(i)if(u!==0){let m=zr(n[a+1]);n[r+1]=Uc(m,a),m!==0&&(n[m+1]=$f(n[m+1],r)),n[a+1]=pR(n[a+1],r)}else n[r+1]=Uc(a,0),a!==0&&(n[a+1]=$f(n[a+1],r)),a=r;else n[r+1]=Uc(u,0),a===0?a=r:n[u+1]=$f(n[u+1],r),u=r;l&&(n[r+1]=Fh(n[r+1])),Hw(n,f,r,!0),Hw(n,f,r,!1),yR(e,f,n,r,o),s=Uc(a,u),o?e.classBindings=s:e.styleBindings=s}function yR(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&ks(o,e)>=0&&(t[r+1]=Vh(t[r+1]))}function Hw(n,e,t,r){let i=n[t+1],o=e===null,s=r?zr(i):Qi(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];_R(u,e)&&(a=!0,n[s+1]=r?Vh(l):Fh(l)),s=r?zr(l):Qi(l)}a&&(n[t+1]=r?Fh(i):Vh(i))}function _R(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?ks(n,e)>=0:!1}var Bt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function vR(n){return n.substring(Bt.key,Bt.keyEnd)}function wR(n){return IR(n),rD(n,iD(n,0,Bt.textEnd))}function rD(n,e){let t=Bt.textEnd;return t===e?-1:(e=Bt.keyEnd=ER(n,Bt.key=e,t),iD(n,e,t))}function IR(n){Bt.key=0,Bt.keyEnd=0,Bt.value=0,Bt.valueEnd=0,Bt.textEnd=n.length}function iD(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function ER(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function DR(n,e,t){let r=K(),i=Su();if(on(r,i,e)){let o=Ne(),s=xu();wp(o,s,r,n,e,r[Me],t,!1)}return DR}function Lh(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";Ep(n,t,o[s],s,r)}function oD(n,e,t){return aD(n,e,t,!1),oD}function bR(n,e){return aD(n,e,null,!0),bR}function G$(n){cD(MR,sD,n,!0)}function sD(n,e){for(let t=wR(e);t>=0;t=rD(e,t))Iu(n,vR(e),!0)}function aD(n,e,t,r){let i=K(),o=Ne(),s=Au(2);if(o.firstUpdatePass&&lD(o,n,s,r),e!==ct&&on(i,s,e)){let a=o.data[yn()];dD(o,a,i,i[Me],n,i[s+1]=RR(e,t),r,s)}}function cD(n,e,t,r){let i=Ne(),o=Au(2);i.firstUpdatePass&&lD(i,null,o,r);let s=K();if(t!==ct&&on(s,o,t)){let a=i.data[yn()];if(fD(a,r)&&!uD(i,o)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(t=Kf(u,t||"")),Lh(i,a,s,t,r)}else NR(i,a,s,s[Me],s[o+1],s[o+1]=xR(n,e,t),r,o)}}function uD(n,e){return e>=n.expandoStartIndex}function lD(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[yn()],s=uD(n,t);fD(o,r)&&e===null&&!s&&(e=!1),e=TR(i,o,e,r),mR(i,o,e,t,s,r)}}function TR(n,e,t,r){let i=Ux(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Hf(null,n,e,t,r),t=Ps(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Hf(i,n,e,t,r),o===null){let u=CR(n,e,r);u!==void 0&&Array.isArray(u)&&(u=Hf(null,n,e,u[1],r),u=Ps(u,e.attrs,r),SR(n,e,r,u))}else o=AR(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function CR(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Qi(r)!==0)return n[zr(r)]}function SR(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[zr(i)]=r}function AR(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Ps(r,s,t)}return Ps(r,e.attrs,t)}function Hf(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Ps(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ps(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Iu(n,s,t?!0:e[++o]))}return n===void 0?null:n}function xR(n,e,t){if(t==null||t==="")return mt;let r=[],i=Xi(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function MR(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&Iu(n,r,t)}function NR(n,e,t,r,i,o,s,a){i===ct&&(i=mt);let u=0,l=0,f=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;f!==null||p!==null;){let m=u<i.length?i[u+1]:void 0,y=l<o.length?o[l+1]:void 0,T=null,M;f===p?(u+=2,l+=2,m!==y&&(T=p,M=y)):p===null||f!==null&&f<p?(u+=2,T=f):(l+=2,T=p,M=y),T!==null&&dD(n,e,t,r,T,M,s,a),f=u<i.length?i[u]:null,p=l<o.length?o[l]:null}}function dD(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],f=gR(l)?qw(u,e,t,i,Qi(l),s):void 0;if(!mu(f)){mu(o)||hR(l)&&(o=qw(u,null,t,i,a,s));let p=kI(yn(),t);mN(r,s,p,i,o)}}function qw(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),f=l?u[1]:u,p=f===null,m=t[i+1];m===ct&&(m=p?mt:void 0);let y=p?Pf(m,r):f===r?m:void 0;if(l&&!mu(y)&&(y=Pf(u,r)),mu(y)&&(a=y,s))return a;let T=n[i+1];i=s?zr(T):Qi(T)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Pf(u,r))}return a}function mu(n){return n!==void 0}function RR(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=at(Xi(n)))),n}function fD(n,e){return(n.flags&(e?8:16))!==0}function W$(n,e,t){let r=K(),i=Rp(r,n,e,t);cD(Iu,sD,i,!0)}function PR(n,e,t,r,i,o){let s=e.consts,a=Wi(s,i),u=Ls(e,n,2,r,a);return Ip(e,t,u,Wi(s,o)),u.attrs!==null&&fu(u,u.attrs,!1),u.mergedAttrs!==null&&fu(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function hD(n,e,t,r){let i=K(),o=Ne(),s=yt+n,a=i[Me],u=o.firstCreatePass?PR(s,o,i,e,t,r):o.data[s],l=kR(o,i,u,a,e,n);i[s]=l;let f=Tu(u);return Wr(u,!0),ME(a,l,u),!oR(u)&&Mu()&&Fu(o,i,l,u),xx()===0&&Yn(l,i),Mx(),f&&(yp(o,i,u),mp(o,u,i)),r!==null&&_p(i,u),hD}function pD(){let n=Xe();ip()?UI():(n=n.parent,Wr(n,!1));let e=n;Px(e)&&Ox(),Nx();let t=Ne();return t.firstCreatePass&&(Ru(t,n),tp(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&Qx(e)&&Lh(t,e,K(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Yx(e)&&Lh(t,e,K(),e.stylesWithoutHost,!1),pD}function OR(n,e,t,r){return hD(n,e,t,r),pD(),OR}var kR=(n,e,t,r,i,o)=>(Nu(!0),DE(r,i,zx()));function FR(n,e,t,r,i){let o=e.consts,s=Wi(o,r),a=Ls(e,n,8,"ng-container",s);s!==null&&fu(a,s,!0);let u=Wi(o,i);return Ip(e,t,a,u),e.queries!==null&&e.queries.elementStart(e,a),a}function VR(n,e,t){let r=K(),i=Ne(),o=n+yt,s=i.firstCreatePass?FR(o,i,r,e,t):i.data[o];Wr(s,!0);let a=jR(i,r,s,n);return r[o]=a,Mu()&&Fu(i,r,a,s),Yn(a,r),Tu(s)&&(yp(i,r,s),mp(i,s,r)),t!=null&&_p(r,s),VR}function LR(){let n=Xe(),e=Ne();return ip()?UI():(n=n.parent,Wr(n,!1)),e.firstCreatePass&&(Ru(e,n),tp(n)&&e.queries.elementEnd(n)),LR}var jR=(n,e,t,r)=>(Nu(!0),ZM(e[Me],""));function K$(){return K()}var Pr=void 0;function BR(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var UR=["en",[["a","p"],["AM","PM"],Pr],[["AM","PM"],Pr,Pr],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Pr,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Pr,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Pr,"{1} 'at' {0}",Pr],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",BR],qf={};function _t(n){let e=$R(n),t=zw(e);if(t)return t;let r=e.split("-")[0];if(t=zw(r),t)return t;if(r==="en")return UR;throw new le(701,!1)}function zw(n){return n in qf||(qf[n]=Nt.ng&&Nt.ng.common&&Nt.ng.common.locales&&Nt.ng.common.locales[n]),qf[n]}var Se=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Se||{});function $R(n){return n.toLowerCase().replace(/_/g,"-")}var yu="en-US",HR="USD";var qR=yu;function zR(n){typeof n=="string"&&(qR=n.toLowerCase().replace(/_/g,"-"))}function GR(n,e,t,r){let i=K(),o=Ne(),s=Xe();return gD(o,i,i[Me],s,n,e,r),GR}function WR(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[As],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function gD(n,e,t,r,i,o,s){let a=Tu(r),l=n.firstCreatePass&&UE(n),f=e[$t],p=BE(e),m=!0;if(r.type&3||s){let M=Pt(r,e),N=s?s(M):M,V=p.length,U=s?Q=>s(rn(Q[r.index])):r.index,L=null;if(!s&&a&&(L=WR(n,e,i,r.index)),L!==null){let Q=L.__ngLastListenerFn__||L;Q.__ngNextListenerFn__=o,L.__ngLastListenerFn__=o,m=!1}else{o=Ww(r,e,f,o,!1);let Q=t.listen(N,i,o);p.push(o,Q),l&&l.push(i,U,V,V+1)}}else o=Ww(r,e,f,o,!1);let y=r.outputs,T;if(m&&y!==null&&(T=y[i])){let M=T.length;if(M)for(let N=0;N<M;N+=2){let V=T[N],U=T[N+1],J=e[V][U].subscribe(o),G=p.length;p.push(o,J),l&&l.push(i,r.index,G,-(G+1))}}}function Gw(n,e,t,r){let i=ue(null);try{return Xt(6,e,t),t(r)!==!1}catch(o){return $E(n,o),!1}finally{Xt(7,e,t),ue(i)}}function Ww(n,e,t,r,i){return function o(s){if(s===Function)return r;let a=n.componentOffset>-1?Zn(n.index,e):e;Tp(a);let u=Gw(e,t,r,s),l=o.__ngNextListenerFn__;for(;l;)u=Gw(e,t,l,s)&&u,l=l.__ngNextListenerFn__;return i&&u===!1&&s.preventDefault(),u}}function Q$(n=1){return Hx(n)}function KR(n,e,t){return mD(n,"",e,"",t),KR}function mD(n,e,t,r,i){let o=K(),s=Rp(o,e,t,r);if(s!==ct){let a=Ne(),u=xu();wp(a,u,o,n,s,o[Me],i,!1)}return mD}function Y$(n,e,t,r){B1(n,e,t,r)}function J$(n,e,t){j1(n,e,t)}function Z$(n){let e=K(),t=Ne(),r=HI();op(r+1);let i=xp(t,r);if(n.dirty&&bx(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=H1(e,r);n.reset(o,lM),n.notifyOnChanges()}return!0}return!1}function X$(){return L1(K(),HI())}function QR(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function e6(n){let e=Fx();return Cu(e,yt+n)}function t6(n,e=""){let t=K(),r=Ne(),i=n+yt,o=r.firstCreatePass?Ls(r,i,1,e,null):r.data[i],s=YR(r,t,o,e,n);t[i]=s,Mu()&&Fu(r,t,s,o),Wr(o,!1)}var YR=(n,e,t,r,i)=>(Nu(!0),YM(e[Me],r));function JR(n){return yD("",n,""),JR}function yD(n,e,t){let r=K(),i=Rp(r,n,e,t);return i!==ct&&Dp(r,yn(),i),yD}function ZR(n,e,t,r,i){let o=K(),s=dR(o,n,e,t,r,i);return s!==ct&&Dp(o,yn(),s),ZR}function XR(n,e,t,r,i,o,s){let a=K(),u=fR(a,n,e,t,r,i,o,s);return u!==ct&&Dp(a,yn(),u),XR}function eP(n,e,t){eD(e)&&(e=e());let r=K(),i=Su();if(on(r,i,e)){let o=Ne(),s=xu();wp(o,s,r,n,e,r[Me],t,!1)}return eP}function n6(n,e){let t=eD(n);return t&&n.set(e),t}function tP(n,e){let t=K(),r=Ne(),i=Xe();return gD(r,t,t[Me],i,n,e),tP}function nP(n,e,t){let r=Ne();if(r.firstCreatePass){let i=Kn(n);jh(t,r.data,r.blueprint,i,!0),jh(e,r.data,r.blueprint,i,!1)}}function jh(n,e,t,r,i){if(n=st(n),Array.isArray(n))for(let o=0;o<n.length;o++)jh(n[o],e,t,r,i);else{let o=Ne(),s=K(),a=Xe(),u=qi(n)?n:st(n.provide),l=bI(n),f=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(qi(n)||!n.multi){let y=new Ur(l,i,$e),T=Gf(u,e,i?f:f+m,p);T===-1?(sh(ou(a,s),o,u),zf(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[T]=y,s[T]=y)}else{let y=Gf(u,e,f+m,p),T=Gf(u,e,f,f+m),M=y>=0&&t[y],N=T>=0&&t[T];if(i&&!N||!i&&!M){sh(ou(a,s),o,u);let V=oP(i?iP:rP,t.length,i,r,l);!i&&N&&(t[T].providerFactory=V),zf(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(V),s.push(V)}else{let V=_D(t[i?T:y],l,!i&&r);zf(o,n,y>-1?y:T,V)}!i&&r&&N&&t[T].componentProviders++}}}function zf(n,e,t,r){let i=qi(e),o=cx(e);if(i||o){let u=(o?st(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let f=l.indexOf(t);f===-1?l.push(t,[r,u]):l[f+1].push(r,u)}else l.push(t,u)}}}function _D(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Gf(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function rP(n,e,t,r){return Bh(this.multi,[])}function iP(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=$r(t,t[ee],this.providerFactory.index,r);o=a.slice(0,s),Bh(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],Bh(i,o);return o}function Bh(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function oP(n,e,t,r,i){let o=new Ur(n,t,$e);return o.multi=[],o.index=e,o.componentProviders=0,_D(o,i,r&&!t),o}function r6(n,e=[]){return t=>{t.providersResolver=(r,i)=>nP(r,i?i(n):n,e)}}var sP=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=wI(!1,t.type),i=r.length>0?eR([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=we({token:n,providedIn:"environment",factory:()=>new n(Ke(Wn))})}}return n})();function i6(n){eo("NgStandalone"),n.getStandaloneInjector=e=>e.get(sP).getOrCreateStandaloneInjector(n)}function o6(n,e,t){let r=Xn()+n,i=K();return i[r]===ct?js(i,r,t?e.call(t):e()):rR(i,r)}function s6(n,e,t,r){return vD(K(),Xn(),n,e,t,r)}function a6(n,e,t,r,i){return wD(K(),Xn(),n,e,t,r,i)}function c6(n,e,t,r,i,o){return ID(K(),Xn(),n,e,t,r,i,o)}function u6(n,e,t,r,i,o,s){return aP(K(),Xn(),n,e,t,r,i,o,s)}function $u(n,e){let t=n[e];return t===ct?void 0:t}function vD(n,e,t,r,i,o){let s=e+t;return on(n,s,i)?js(n,s+1,o?r.call(o,i):r(i)):$u(n,s+1)}function wD(n,e,t,r,i,o,s){let a=e+t;return Rs(n,a,i,o)?js(n,a+2,s?r.call(s,i,o):r(i,o)):$u(n,a+2)}function ID(n,e,t,r,i,o,s,a){let u=e+t;return nD(n,u,i,o,s)?js(n,u+3,a?r.call(a,i,o,s):r(i,o,s)):$u(n,u+3)}function aP(n,e,t,r,i,o,s,a,u){let l=e+t;return iR(n,l,i,o,s,a)?js(n,l+4,u?r.call(u,i,o,s,a):r(i,o,s,a)):$u(n,l+4)}function l6(n,e){let t=Ne(),r,i=n+yt;t.firstCreatePass?(r=cP(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Vr(r.type,!0)),s,a=gt($e);try{let u=iu(!1),l=o();return iu(u),QR(t,K(),i,l),l}finally{gt(a)}}function cP(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function d6(n,e,t){let r=n+yt,i=K(),o=Cu(i,r);return Pp(i,r)?vD(i,Xn(),e,o.transform,t,o):o.transform(t)}function f6(n,e,t,r){let i=n+yt,o=K(),s=Cu(o,i);return Pp(o,i)?wD(o,Xn(),e,s.transform,t,r,s):s.transform(t,r)}function h6(n,e,t,r,i){let o=n+yt,s=K(),a=Cu(s,o);return Pp(s,o)?ID(s,Xn(),e,a.transform,t,r,i,a):a.transform(t,r,i)}function Pp(n,e){return n[ee].data[e].pure}function p6(n,e){return Bu(n,e)}var g6=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var uP=new me("");function Hu(n){return!!n&&typeof n.then=="function"}function Op(n){return!!n&&typeof n.subscribe=="function"}var lP=new me(""),ED=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=de(lP,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(Hu(o))t.push(o);else if(Op(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),dP=new me("");function fP(){iw(()=>{throw new le(600,!1)})}function hP(n){return n.isBoundToModule}function pP(n,e,t){try{let r=t();return Hu(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var DD=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=de(aE),this.afterRenderEffectManager=de(Ap),this.externalTestViews=new Set,this.beforeRender=new Un,this.afterTick=new Un,this.componentTypes=[],this.components=[],this.isStable=de(Np).hasPendingTasks.pipe(It(t=>!t)),this._injector=de(Wn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof du;if(!this._injector.get(ED).done){let m=!i&&tx(t),y=!1;throw new le(405,y)}let s;i?s=t:s=this._injector.get(Uu).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=hP(s)?void 0:this._injector.get(Jn),u=r||s.selector,l=s.create(Ji.NULL,[],u,a),f=l.location.nativeElement,p=l.injector.get(uP,null);return p?.registerApplication(f),l.onDestroy(()=>{this.detachView(l.hostView),Wf(this.components,l),p?.unregisterApplication(f)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(t){if(this._runningTick)throw new le(101,!1);let r=ue(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(t)}catch(i){this.internalErrorHandler(i)}finally{this.afterTick.next(),this._runningTick=!1,ue(r)}}detectChangesInAttachedViews(t){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===qE)throw new le(103,!1);if(t){let o=r===0;this.beforeRender.next(o);for(let{_lView:s,notifyErrorHandler:a}of this._views)gP(s,o,a)}if(r++,i.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Uh(o))&&(i.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Uh(o))))break}}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Wf(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(dP,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Wf(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new le(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Wf(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function gP(n,e,t){!e&&!Uh(n)||mP(n,t,e)}function Uh(n){return rp(n)}function mP(n,e,t){let r;t?(r=0,n[z]|=1024):n[z]&64?r=0:r=1,zE(n,e,r)}var $h=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},m6=(()=>{class n{compileModuleSync(t){return new kh(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=yI(t),o=EE(i.declarations).reduce((s,a)=>{let u=Gn(a);return u&&s.push(new Ki(u)),s},[]);return new $h(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var yP=(()=>{class n{constructor(){this.zone=de(Rt),this.applicationRef=de(DD)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function _P(n){return[{provide:Rt,useFactory:n},{provide:Zc,multi:!0,useFactory:()=>{let e=de(yP,{optional:!0});return()=>e.initialize()}},{provide:Zc,multi:!0,useFactory:()=>{let e=de(EP);return()=>{e.initialize()}}},{provide:aE,useFactory:vP}]}function vP(){let n=de(Rt),e=de(Qn);return t=>n.runOutsideAngular(()=>e.handleError(t))}function wP(n){let e=_P(()=>new Rt(IP(n)));return rx([[],e])}function IP(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var EP=(()=>{class n{constructor(){this.subscription=new Ue,this.initialized=!1,this.zone=de(Rt),this.pendingTasks=de(Np)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Rt.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Rt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function DP(){return typeof $localize<"u"&&$localize.locale||yu}var no=new me("",{providedIn:"root",factory:()=>de(no,oe.Optional|oe.SkipSelf)||DP()}),bD=new me("",{providedIn:"root",factory:()=>HR});var TD=new me("");var Kc=null;function bP(n=[],e){return Ji.create({name:e,providers:[{provide:DI,useValue:"platform"},{provide:TD,useValue:new Set([()=>Kc=null])},...n]})}function TP(n=[]){if(Kc)return Kc;let e=bP(n);return Kc=e,fP(),CP(e),e}function CP(n){n.get(yM,null)?.forEach(t=>t())}var qu=(()=>{class n{static{this.__NG_ELEMENT_ID__=SP}}return n})();function SP(n){return AP(Xe(),K(),(n&16)===16)}function AP(n,e,t){if(bu(n)&&!t){let r=Zn(n.index,e);return new Hr(r,r)}else if(n.type&47){let r=e[nn];return new Hr(r,e)}return null}var Hh=class{constructor(){}supports(e){return tD(e)}create(e){return new qh(e)}},xP=(n,e)=>e,qh=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||xP}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<Kw(r,i,o)?t:r,a=Kw(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,f=u-i;if(l!=f){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,T=y+m;f<=T&&T<l&&(o[m]=y+1)}let p=s.previousIndex;o[p]=f-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!tD(e))throw new le(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,tR(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new zh(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new _u),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new _u),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},zh=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Gh=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},_u=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Gh,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Kw(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function Qw(){return new kp([new Hh])}var kp=(()=>{class n{static{this.\u0275prov=we({token:n,providedIn:"root",factory:Qw})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||Qw()),deps:[[n,new FA,new kA]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new le(901,!1)}}return n})();function y6(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=TP(r),o=[wP(),...t||[]],a=new gu({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,u=a.get(Rt);return u.run(()=>{a.resolveInjectorInitializers();let l=a.get(Qn,null),f;u.runOutsideAngular(()=>{f=u.onError.subscribe({next:y=>{l.handleError(y)}})});let p=()=>a.destroy(),m=i.get(TD);return m.add(p),a.onDestroy(()=>{f.unsubscribe(),m.delete(p)}),pP(l,u,()=>{let y=a.get(ED);return y.runInitializers(),y.donePromise.then(()=>{let T=a.get(no,yu);zR(T||yu);let M=a.get(DD);return e!==void 0&&M.bootstrap(e),M})})})}catch(e){return Promise.reject(e)}}function MP(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function _6(n,e){eo("NgSignals");let t=tw(n);return e?.equal&&(t[Zt].equal=e.equal),t}function Fp(n){let e=ue(null);try{return n()}finally{ue(e)}}var NP=new me("",{providedIn:"root",factory:()=>de(RP)}),RP=(()=>{class n{static{this.\u0275prov=we({token:n,providedIn:"root",factory:()=>new Wh})}}return n})(),Wh=class{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=de(Np),this.taskId=null}scheduleEffect(e){if(this.enqueue(e),this.taskId===null){let t=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(t),this.taskId=null})}}enqueue(e){let t=e.creationZone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}},Kh=class{constructor(e,t,r,i,o,s){this.scheduler=e,this.effectFn=t,this.creationZone=r,this.injector=o,this.watcher=cw(a=>this.runEffect(a),()=>this.schedule(),s),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(t){this.injector.get(Qn,null,{optional:!0})?.handleError(t)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function PP(n,e){eo("NgSignals"),!e?.injector&&CI(PP);let t=e?.injector??de(Ji),r=e?.manualCleanup!==!0?t.get(Pu):null,i=new Kh(t.get(NP),n,typeof Zone>"u"?null:Zone.current,r,t,e?.allowSignalWrites??!1),o=t.get(qu,null,{optional:!0});return!o||!(o._lView[z]&8)?i.watcher.notify():(o._lView[Hc]??=[]).push(i.watcher.notify),i}function v6(n){let e=Gn(n);if(!e)return null;let t=new Ki(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var FD=null;function Lp(){return FD}function B6(n){FD??=n}var CD=class{};var Jp=new me(""),Zp=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=we({token:n,factory:()=>de(OP),providedIn:"platform"})}}return n})(),U6=new me(""),OP=(()=>{class n extends Zp{constructor(){super(),this._doc=de(Jp),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Lp().getBaseHref(this._doc)}onPopState(t){let r=Lp().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Lp().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=we({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function Xp(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function SD(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function wn(n){return n&&n[0]!=="?"?"?"+n:n}var tl=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=we({token:n,factory:()=>de(kP),providedIn:"root"})}}return n})(),VD=new me(""),kP=(()=>{class n extends tl{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??de(Jp).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Xp(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+wn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+wn(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+wn(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(Ke(Zp),Ke(VD,8))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),$6=(()=>{class n extends tl{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Xp(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+wn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+wn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(Ke(Zp),Ke(VD,8))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac})}}return n})(),FP=(()=>{class n{constructor(t){this._subject=new Or,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=jP(SD(AD(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+wn(r))}normalize(t){return n.stripTrailingSlash(LP(this._basePath,AD(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+wn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+wn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=wn}static{this.joinWithSlash=Xp}static{this.stripTrailingSlash=SD}static{this.\u0275fac=function(r){return new(r||n)(Ke(tl))}}static{this.\u0275prov=we({token:n,factory:()=>VP(),providedIn:"root"})}}return n})();function VP(){return new FP(Ke(tl))}function LP(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function AD(n){return n.replace(/\/index.html$/,"")}function jP(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var LD={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},eg=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(eg||{});var ut=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(ut||{}),Ie=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Ie||{}),bt=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(bt||{}),et={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function BP(n){return _t(n)[Se.LocaleId]}function UP(n,e,t){let r=_t(n),i=[r[Se.DayPeriodsFormat],r[Se.DayPeriodsStandalone]],o=Ot(i,e);return Ot(o,t)}function $P(n,e,t){let r=_t(n),i=[r[Se.DaysFormat],r[Se.DaysStandalone]],o=Ot(i,e);return Ot(o,t)}function HP(n,e,t){let r=_t(n),i=[r[Se.MonthsFormat],r[Se.MonthsStandalone]],o=Ot(i,e);return Ot(o,t)}function qP(n,e){let r=_t(n)[Se.Eras];return Ot(r,e)}function zu(n,e){let t=_t(n);return Ot(t[Se.DateFormat],e)}function Gu(n,e){let t=_t(n);return Ot(t[Se.TimeFormat],e)}function Wu(n,e){let r=_t(n)[Se.DateTimeFormat];return Ot(r,e)}function sn(n,e){let t=_t(n),r=t[Se.NumberSymbols][e];if(typeof r>"u"){if(e===et.CurrencyDecimal)return t[Se.NumberSymbols][et.Decimal];if(e===et.CurrencyGroup)return t[Se.NumberSymbols][et.Group]}return r}function jD(n,e){return _t(n)[Se.NumberFormats][e]}function zP(n){return _t(n)[Se.Currencies]}function BD(n){if(!n[Se.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Se.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function GP(n){let e=_t(n);return BD(e),(e[Se.ExtraData][2]||[]).map(r=>typeof r=="string"?jp(r):[jp(r[0]),jp(r[1])])}function WP(n,e,t){let r=_t(n);BD(r);let i=[r[Se.ExtraData][0],r[Se.ExtraData][1]],o=Ot(i,e)||[];return Ot(o,t)||[]}function Ot(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function jp(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}function KP(n,e,t="en"){let r=zP(t)[n]||LD[n]||[],i=r[1];return e==="narrow"&&typeof i=="string"?i:r[0]||n}var QP=2;function YP(n){let e,t=LD[n];return t&&(e=t[2]),typeof e=="number"?e:QP}var JP=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Ku={},ZP=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,In=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(In||{}),he=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(he||{}),fe=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(fe||{});function XP(n,e,t,r){let i=cO(n);e=vn(t,e)||e;let s=[],a;for(;e;)if(a=ZP.exec(e),a){s=s.concat(a.slice(1));let f=s.pop();if(!f)break;e=f}else{s.push(e);break}let u=i.getTimezoneOffset();r&&(u=$D(r,u),i=aO(i,r,!0));let l="";return s.forEach(f=>{let p=oO(f);l+=p?p(i,t,u):f==="''"?"'":f.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Xu(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function vn(n,e){let t=BP(n);if(Ku[t]??={},Ku[t][e])return Ku[t][e];let r="";switch(e){case"shortDate":r=zu(n,bt.Short);break;case"mediumDate":r=zu(n,bt.Medium);break;case"longDate":r=zu(n,bt.Long);break;case"fullDate":r=zu(n,bt.Full);break;case"shortTime":r=Gu(n,bt.Short);break;case"mediumTime":r=Gu(n,bt.Medium);break;case"longTime":r=Gu(n,bt.Long);break;case"fullTime":r=Gu(n,bt.Full);break;case"short":let i=vn(n,"shortTime"),o=vn(n,"shortDate");r=Qu(Wu(n,bt.Short),[i,o]);break;case"medium":let s=vn(n,"mediumTime"),a=vn(n,"mediumDate");r=Qu(Wu(n,bt.Medium),[s,a]);break;case"long":let u=vn(n,"longTime"),l=vn(n,"longDate");r=Qu(Wu(n,bt.Long),[u,l]);break;case"full":let f=vn(n,"fullTime"),p=vn(n,"fullDate");r=Qu(Wu(n,bt.Full),[f,p]);break}return r&&(Ku[t][e]=r),r}function Qu(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function zt(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function eO(n,e){return zt(n,3).substring(0,e)}function Oe(n,e,t=0,r=!1,i=!1){return function(o,s){let a=tO(n,o);if((t>0||a>-t)&&(a+=t),n===he.Hours)a===0&&t===-12&&(a=12);else if(n===he.FractionalSeconds)return eO(a,e);let u=sn(s,et.MinusSign);return zt(a,e,u,r,i)}}function tO(n,e){switch(n){case he.FullYear:return e.getFullYear();case he.Month:return e.getMonth();case he.Date:return e.getDate();case he.Hours:return e.getHours();case he.Minutes:return e.getMinutes();case he.Seconds:return e.getSeconds();case he.FractionalSeconds:return e.getMilliseconds();case he.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function Ee(n,e,t=ut.Format,r=!1){return function(i,o){return nO(i,o,n,e,t,r)}}function nO(n,e,t,r,i,o){switch(t){case fe.Months:return HP(e,i,r)[n.getMonth()];case fe.Days:return $P(e,i,r)[n.getDay()];case fe.DayPeriods:let s=n.getHours(),a=n.getMinutes();if(o){let l=GP(e),f=WP(e,i,r),p=l.findIndex(m=>{if(Array.isArray(m)){let[y,T]=m,M=s>=y.hours&&a>=y.minutes,N=s<T.hours||s===T.hours&&a<T.minutes;if(y.hours<T.hours){if(M&&N)return!0}else if(M||N)return!0}else if(m.hours===s&&m.minutes===a)return!0;return!1});if(p!==-1)return f[p]}return UP(e,i,r)[s<12?0:1];case fe.Eras:return qP(e,r)[n.getFullYear()<=0?0:1];default:let u=t;throw new Error(`unexpected translation type ${u}`)}}function Yu(n){return function(e,t,r){let i=-1*r,o=sn(t,et.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case In.Short:return(i>=0?"+":"")+zt(s,2,o)+zt(Math.abs(i%60),2,o);case In.ShortGMT:return"GMT"+(i>=0?"+":"")+zt(s,1,o);case In.Long:return"GMT"+(i>=0?"+":"")+zt(s,2,o)+":"+zt(Math.abs(i%60),2,o);case In.Extended:return r===0?"Z":(i>=0?"+":"")+zt(s,2,o)+":"+zt(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var rO=0,Zu=4;function iO(n){let e=Xu(n,rO,1).getDay();return Xu(n,0,1+(e<=Zu?Zu:Zu+7)-e)}function UD(n){let e=n.getDay(),t=e===0?-3:Zu-e;return Xu(n.getFullYear(),n.getMonth(),n.getDate()+t)}function Bp(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=UD(t),s=iO(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return zt(i,n,sn(r,et.MinusSign))}}function Ju(n,e=!1){return function(t,r){let o=UD(t).getFullYear();return zt(o,n,sn(r,et.MinusSign),e)}}var Up={};function oO(n){if(Up[n])return Up[n];let e;switch(n){case"G":case"GG":case"GGG":e=Ee(fe.Eras,Ie.Abbreviated);break;case"GGGG":e=Ee(fe.Eras,Ie.Wide);break;case"GGGGG":e=Ee(fe.Eras,Ie.Narrow);break;case"y":e=Oe(he.FullYear,1,0,!1,!0);break;case"yy":e=Oe(he.FullYear,2,0,!0,!0);break;case"yyy":e=Oe(he.FullYear,3,0,!1,!0);break;case"yyyy":e=Oe(he.FullYear,4,0,!1,!0);break;case"Y":e=Ju(1);break;case"YY":e=Ju(2,!0);break;case"YYY":e=Ju(3);break;case"YYYY":e=Ju(4);break;case"M":case"L":e=Oe(he.Month,1,1);break;case"MM":case"LL":e=Oe(he.Month,2,1);break;case"MMM":e=Ee(fe.Months,Ie.Abbreviated);break;case"MMMM":e=Ee(fe.Months,Ie.Wide);break;case"MMMMM":e=Ee(fe.Months,Ie.Narrow);break;case"LLL":e=Ee(fe.Months,Ie.Abbreviated,ut.Standalone);break;case"LLLL":e=Ee(fe.Months,Ie.Wide,ut.Standalone);break;case"LLLLL":e=Ee(fe.Months,Ie.Narrow,ut.Standalone);break;case"w":e=Bp(1);break;case"ww":e=Bp(2);break;case"W":e=Bp(1,!0);break;case"d":e=Oe(he.Date,1);break;case"dd":e=Oe(he.Date,2);break;case"c":case"cc":e=Oe(he.Day,1);break;case"ccc":e=Ee(fe.Days,Ie.Abbreviated,ut.Standalone);break;case"cccc":e=Ee(fe.Days,Ie.Wide,ut.Standalone);break;case"ccccc":e=Ee(fe.Days,Ie.Narrow,ut.Standalone);break;case"cccccc":e=Ee(fe.Days,Ie.Short,ut.Standalone);break;case"E":case"EE":case"EEE":e=Ee(fe.Days,Ie.Abbreviated);break;case"EEEE":e=Ee(fe.Days,Ie.Wide);break;case"EEEEE":e=Ee(fe.Days,Ie.Narrow);break;case"EEEEEE":e=Ee(fe.Days,Ie.Short);break;case"a":case"aa":case"aaa":e=Ee(fe.DayPeriods,Ie.Abbreviated);break;case"aaaa":e=Ee(fe.DayPeriods,Ie.Wide);break;case"aaaaa":e=Ee(fe.DayPeriods,Ie.Narrow);break;case"b":case"bb":case"bbb":e=Ee(fe.DayPeriods,Ie.Abbreviated,ut.Standalone,!0);break;case"bbbb":e=Ee(fe.DayPeriods,Ie.Wide,ut.Standalone,!0);break;case"bbbbb":e=Ee(fe.DayPeriods,Ie.Narrow,ut.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ee(fe.DayPeriods,Ie.Abbreviated,ut.Format,!0);break;case"BBBB":e=Ee(fe.DayPeriods,Ie.Wide,ut.Format,!0);break;case"BBBBB":e=Ee(fe.DayPeriods,Ie.Narrow,ut.Format,!0);break;case"h":e=Oe(he.Hours,1,-12);break;case"hh":e=Oe(he.Hours,2,-12);break;case"H":e=Oe(he.Hours,1);break;case"HH":e=Oe(he.Hours,2);break;case"m":e=Oe(he.Minutes,1);break;case"mm":e=Oe(he.Minutes,2);break;case"s":e=Oe(he.Seconds,1);break;case"ss":e=Oe(he.Seconds,2);break;case"S":e=Oe(he.FractionalSeconds,1);break;case"SS":e=Oe(he.FractionalSeconds,2);break;case"SSS":e=Oe(he.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Yu(In.Short);break;case"ZZZZZ":e=Yu(In.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Yu(In.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Yu(In.Long);break;default:return null}return Up[n]=e,e}function $D(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function sO(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function aO(n,e,t){let r=t?-1:1,i=n.getTimezoneOffset(),o=$D(e,i);return sO(n,r*(o-i))}function cO(n){if(xD(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return Xu(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(JP))return uO(r)}let e=new Date(n);if(!xD(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function uO(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,u=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,u,l),e}function xD(n){return n instanceof Date&&!isNaN(n.valueOf())}var lO=/^(\d+)?\.((\d+)(-(\d+))?)?$/,MD=22,el=".",Bs="0",dO=";",fO=",",$p="#",ND="\xA4";function HD(n,e,t,r,i,o,s=!1){let a="",u=!1;if(!isFinite(n))a=sn(t,et.Infinity);else{let l=mO(n);s&&(l=gO(l));let f=e.minInt,p=e.minFrac,m=e.maxFrac;if(o){let U=o.match(lO);if(U===null)throw new Error(`${o} is not a valid digit info`);let L=U[1],Q=U[3],J=U[5];L!=null&&(f=Hp(L)),Q!=null&&(p=Hp(Q)),J!=null?m=Hp(J):Q!=null&&p>m&&(m=p)}yO(l,p,m);let y=l.digits,T=l.integerLen,M=l.exponent,N=[];for(u=y.every(U=>!U);T<f;T++)y.unshift(0);for(;T<0;T++)y.unshift(0);T>0?N=y.splice(T,y.length):(N=y,y=[0]);let V=[];for(y.length>=e.lgSize&&V.unshift(y.splice(-e.lgSize,y.length).join(""));y.length>e.gSize;)V.unshift(y.splice(-e.gSize,y.length).join(""));y.length&&V.unshift(y.join("")),a=V.join(sn(t,r)),N.length&&(a+=sn(t,i)+N.join("")),M&&(a+=sn(t,et.Exponential)+"+"+M)}return n<0&&!u?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function hO(n,e,t,r,i){let o=jD(e,eg.Currency),s=qD(o,sn(e,et.MinusSign));return s.minFrac=YP(r),s.maxFrac=s.minFrac,HD(n,s,e,et.CurrencyGroup,et.CurrencyDecimal,i).replace(ND,t).replace(ND,"").trim()}function pO(n,e,t){let r=jD(e,eg.Decimal),i=qD(r,sn(e,et.MinusSign));return HD(n,i,e,et.Group,et.Decimal,t)}function qD(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(dO),i=r[0],o=r[1],s=i.indexOf(el)!==-1?i.split(el):[i.substring(0,i.lastIndexOf(Bs)+1),i.substring(i.lastIndexOf(Bs)+1)],a=s[0],u=s[1]||"";t.posPre=a.substring(0,a.indexOf($p));for(let f=0;f<u.length;f++){let p=u.charAt(f);p===Bs?t.minFrac=t.maxFrac=f+1:p===$p?t.maxFrac=f+1:t.posSuf+=p}let l=a.split(fO);if(t.gSize=l[1]?l[1].length:0,t.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){let f=i.length-t.posPre.length-t.posSuf.length,p=o.indexOf($p);t.negPre=o.substring(0,p).replace(/'/g,""),t.negSuf=o.slice(p+f).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function gO(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function mO(n){let e=Math.abs(n)+"",t=0,r,i,o,s,a;for((i=e.indexOf(el))>-1&&(e=e.replace(el,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===Bs;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===Bs;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>MD&&(r=r.splice(0,MD-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function yO(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen,o=Math.min(Math.max(e,i),t),s=o+n.integerLen,a=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let p=s;p<r.length;p++)r[p]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let p=1;p<s;p++)r[p]=0}if(a>=5)if(s-1<0){for(let p=0;p>s;p--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let u=o!==0,l=e+n.integerLen,f=r.reduceRight(function(p,m,y,T){return m=m+p,T[y]=m<10?m:m-10,u&&(T[y]===0&&y>=l?T.pop():u=!1),m>=10?1:0},0);f&&(r.unshift(f),n.integerLen++)}function Hp(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function H6(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var qp=/\s+/,RD=[],q6=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=RD,this.stateMap=new Map}set klass(t){this.initialClasses=t!=null?t.trim().split(qp):RD}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(qp):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(qp).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)($e(Kr),$e(Cp))}}static{this.\u0275dir=Eu({type:n,selectors:[["","ngClass",""]],inputs:{klass:[zn.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var zp=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},z6=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new zp(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),PD(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);PD(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)($e(to),$e(qr),$e(kp))}}static{this.\u0275dir=Eu({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function PD(n,e){n.context.$implicit=e.item}var G6=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Gp,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){OD("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){OD("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)($e(to),$e(qr))}}static{this.\u0275dir=Eu({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),Gp=class{constructor(){this.$implicit=null,this.ngIf=null}};function OD(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${at(e)}'.`)}function ro(n,e){return new le(2100,!1)}var Wp=class{createSubscription(e,t){return Fp(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){Fp(()=>e.unsubscribe())}},Kp=class{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}},_O=new Kp,vO=new Wp,W6=(()=>{class n{constructor(t){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(Hu(t))return _O;if(Op(t))return vO;throw ro(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(r){return new(r||n)($e(qu,16))}}static{this.\u0275pipe=Gr({name:"async",type:n,pure:!1,standalone:!0})}}return n})();var wO=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,K6=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw ro(n,t);return t.replace(wO,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=Gr({name:"titlecase",type:n,pure:!0,standalone:!0})}}return n})();var IO="mediumDate",EO=new me(""),DO=new me(""),Q6=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??IO,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return XP(t,s,o||this.locale,a)}catch(s){throw ro(n,s.message)}}static{this.\u0275fac=function(r){return new(r||n)($e(no,16),$e(EO,24),$e(DO,24))}}static{this.\u0275pipe=Gr({name:"date",type:n,pure:!0,standalone:!0})}}return n})();var Y6=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!zD(t))return null;i||=this._locale;try{let o=GD(t);return pO(o,i,r)}catch(o){throw ro(n,o.message)}}static{this.\u0275fac=function(r){return new(r||n)($e(no,16))}}static{this.\u0275pipe=Gr({name:"number",type:n,pure:!0,standalone:!0})}}return n})();var J6=(()=>{class n{constructor(t,r="USD"){this._locale=t,this._defaultCurrencyCode=r}transform(t,r=this._defaultCurrencyCode,i="symbol",o,s){if(!zD(t))return null;s||=this._locale,typeof i=="boolean"&&(i=i?"symbol":"code");let a=r||this._defaultCurrencyCode;i!=="code"&&(i==="symbol"||i==="symbol-narrow"?a=KP(a,i==="symbol"?"wide":"narrow",s):a=i);try{let u=GD(t);return hO(u,s,a,r,o)}catch(u){throw ro(n,u.message)}}static{this.\u0275fac=function(r){return new(r||n)($e(no,16),$e(bD,16))}}static{this.\u0275pipe=Gr({name:"currency",type:n,pure:!0,standalone:!0})}}return n})();function zD(n){return!(n==null||n===""||n!==n)}function GD(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var Z6=(()=>{class n{transform(t,r,i){if(t==null)return null;if(!this.supports(t))throw ro(n,t);return t.slice(r,i)}supports(t){return typeof t=="string"||Array.isArray(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=Gr({name:"slice",type:n,pure:!1,standalone:!0})}}return n})();var X6=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=pI({type:n})}static{this.\u0275inj=tI({})}}return n})(),bO="browser",TO="server";function CO(n){return n===bO}function e3(n){return n===TO}var t3=(()=>{class n{static{this.\u0275prov=we({token:n,providedIn:"root",factory:()=>CO(de(up))?new Qp(de(Jp),window):new Yp})}}return n})(),Qp=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=SO(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function SO(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Yp=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},kD=class{};var WD=()=>{};var YD=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},AO=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},JD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,f=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(t[f],t[p],t[m],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(YD(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):AO(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new ng;let m=o<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let T=l<<6&192|p;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},ng=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},xO=function(n){let e=YD(n);return JD.encodeByteArray(e,!0)},$s=function(n){return xO(n).replace(/\./g,"")},ZD=function(n){try{return JD.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ig(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var MO=()=>ig().__FIREBASE_DEFAULTS__,NO=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},RO=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&ZD(n[1]);return e&&JSON.parse(e)},rl=()=>{try{return WD()||MO()||NO()||RO()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},PO=n=>rl()?.emulatorHosts?.[n],XD=n=>{let e=PO(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},og=()=>rl()?.config,s3=n=>rl()?.[`_${n}`];var nl=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function qs(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function sg(n){return R(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function eb(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=re({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[$s(JSON.stringify(t)),$s(JSON.stringify(s)),""].join(".")}var Us={};function OO(){let n={prod:[],emulator:[]};for(let e of Object.keys(Us))Us[e]?n.emulator.push(e):n.prod.push(e);return n}function kO(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var KD=!1;function tb(n,e){if(typeof window>"u"||typeof document>"u"||!qs(window.location.host)||Us[n]===e||Us[n]||KD)return;Us[n]=e;function t(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=OO().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{KD=!0,s()},m}function f(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=kO(r),y=t("text"),T=document.getElementById(y)||document.createElement("span"),M=t("learnmore"),N=document.getElementById(M)||document.createElement("a"),V=t("preprendIcon"),U=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let L=m.element;a(L),f(N,M);let Q=l();u(U,V),L.append(U,T,N,Q),document.body.appendChild(L)}o?(T.innerText="Preview backend disconnected.",U.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(U.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Qr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function a3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qr())}function nb(){let n=rl()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function c3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function u3(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function l3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function d3(){let n=Qr();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function ag(){return!nb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cg(){return!nb()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function il(){try{return typeof indexedDB=="object"}catch{return!1}}function rb(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}function f3(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var FO="FirebaseError",En=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=FO,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hs.prototype.create)}},Hs=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?VO(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new En(i,a,r)}};function VO(n,e){return n.replace(LO,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var LO=/\{\$([^}]+)}/g;function h3(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function er(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(QD(o)&&QD(s)){if(!er(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function QD(n){return n!==null&&typeof n=="object"}function p3(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function g3(n,e){let t=new rg(n,e);return t.subscribe.bind(t)}var rg=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");jO(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=tg),i.error===void 0&&(i.error=tg),i.complete===void 0&&(i.complete=tg);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function jO(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function tg(){}var m3=4*60*60*1e3;function Tt(n){return n&&n._delegate?n._delegate:n}var Dn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Yr="[DEFAULT]";var ug=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new nl;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(UO(e))try{this.getOrInitializeService({instanceIdentifier:Yr})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Yr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return R(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Yr){return this.instances.has(e)}getOptions(e=Yr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:BO(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Yr){return this.component?this.component.multipleInstances?e:Yr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function BO(n){return n===Yr?void 0:n}function UO(n){return n.instantiationMode==="EAGER"}var ol=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new ug(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var $O=[],se=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(se||{}),HO={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},qO=se.INFO,zO={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},GO=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=zO[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},io=class{constructor(e){this.name=e,this._logLevel=qO,this._logHandler=GO,this._userLogHandler=null,$O.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?HO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...e),this._logHandler(this,se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...e),this._logHandler(this,se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,se.INFO,...e),this._logHandler(this,se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,se.WARN,...e),this._logHandler(this,se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...e),this._logHandler(this,se.ERROR,...e)}};var WO=(n,e)=>e.some(t=>n instanceof t),ib,ob;function KO(){return ib||(ib=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function QO(){return ob||(ob=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var sb=new WeakMap,dg=new WeakMap,ab=new WeakMap,lg=new WeakMap,hg=new WeakMap;function YO(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Gt(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&sb.set(t,n)}).catch(()=>{}),hg.set(e,n),e}function JO(n){if(dg.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});dg.set(n,e)}var fg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return dg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||ab.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Gt(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function cb(n){fg=n(fg)}function ZO(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(sl(this),e,...t);return ab.set(r,e.sort?e.sort():[e]),Gt(r)}:QO().includes(n)?function(...e){return n.apply(sl(this),e),Gt(sb.get(this))}:function(...e){return Gt(n.apply(sl(this),e))}}function XO(n){return typeof n=="function"?ZO(n):(n instanceof IDBTransaction&&JO(n),WO(n,KO())?new Proxy(n,fg):n)}function Gt(n){if(n instanceof IDBRequest)return YO(n);if(lg.has(n))return lg.get(n);let e=XO(n);return e!==n&&(lg.set(n,e),hg.set(e,n)),e}var sl=n=>hg.get(n);function lb(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=Gt(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Gt(s.result),u.oldVersion,u.newVersion,Gt(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}function T3(n,{blocked:e}={}){let t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",r=>e(r.oldVersion,r)),Gt(t).then(()=>{})}var ek=["get","getKey","getAll","getAllKeys","count"],tk=["put","add","delete","clear"],pg=new Map;function ub(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(pg.get(e))return pg.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=tk.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ek.includes(t)))return;let o=function(s,...a){return R(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&u.done]))[0]})};return pg.set(e,o),o}cb(n=>Pe(re({},n),{get:(e,t,r)=>ub(e,t)||n.get(e,t,r),has:(e,t)=>!!ub(e,t)||n.has(e,t)}));var mg=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(nk(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function nk(n){return n.getComponent()?.type==="VERSION"}var yg="@firebase/app",db="0.14.6";var bn=new io("@firebase/app"),rk="@firebase/app-compat",ik="@firebase/analytics-compat",ok="@firebase/analytics",sk="@firebase/app-check-compat",ak="@firebase/app-check",ck="@firebase/auth",uk="@firebase/auth-compat",lk="@firebase/database",dk="@firebase/data-connect",fk="@firebase/database-compat",hk="@firebase/functions",pk="@firebase/functions-compat",gk="@firebase/installations",mk="@firebase/installations-compat",yk="@firebase/messaging",_k="@firebase/messaging-compat",vk="@firebase/performance",wk="@firebase/performance-compat",Ik="@firebase/remote-config",Ek="@firebase/remote-config-compat",Dk="@firebase/storage",bk="@firebase/storage-compat",Tk="@firebase/firestore",Ck="@firebase/ai",Sk="@firebase/firestore-compat",Ak="firebase",xk="12.6.0";var _g="[DEFAULT]",Mk={[yg]:"fire-core",[rk]:"fire-core-compat",[ok]:"fire-analytics",[ik]:"fire-analytics-compat",[ak]:"fire-app-check",[sk]:"fire-app-check-compat",[ck]:"fire-auth",[uk]:"fire-auth-compat",[lk]:"fire-rtdb",[dk]:"fire-data-connect",[fk]:"fire-rtdb-compat",[hk]:"fire-fn",[pk]:"fire-fn-compat",[gk]:"fire-iid",[mk]:"fire-iid-compat",[yk]:"fire-fcm",[_k]:"fire-fcm-compat",[vk]:"fire-perf",[wk]:"fire-perf-compat",[Ik]:"fire-rc",[Ek]:"fire-rc-compat",[Dk]:"fire-gcs",[bk]:"fire-gcs-compat",[Tk]:"fire-fst",[Sk]:"fire-fst-compat",[Ck]:"fire-vertex","fire-js":"fire-js",[Ak]:"fire-js-all"};var al=new Map,Nk=new Map,vg=new Map;function fb(n,e){try{n.container.addComponent(e)}catch(t){bn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function zs(n){let e=n.name;if(vg.has(e))return bn.debug(`There were multiple attempts to register component ${e}.`),!1;vg.set(e,n);for(let t of al.values())fb(t,n);for(let t of Nk.values())fb(t,n);return!0}function Dg(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function mb(n){return n==null?!1:n.settings!==void 0}var Rk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},tr=new Hs("app","Firebase",Rk);var wg=class{constructor(e,t,r){this._isDeleted=!1,this._options=re({},e),this._config=re({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Dn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw tr.create("app-deleted",{appName:this._name})}};var yb=xk;function Pk(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=re({name:_g,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw tr.create("bad-app-name",{appName:String(i)});if(t||(t=og()),!t)throw tr.create("no-options");let o=al.get(i);if(o){if(er(t,o.options)&&er(r,o.config))return o;throw tr.create("duplicate-app",{appName:i})}let s=new ol(i);for(let u of vg.values())s.addComponent(u);let a=new wg(t,r,s);return al.set(i,a),a}function cl(n=_g){let e=al.get(n);if(!e&&n===_g&&og())return Pk();if(!e)throw tr.create("no-app",{appName:n});return e}function nr(n,e,t){let r=Mk[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bn.warn(s.join(" "));return}zs(new Dn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var Ok="firebase-heartbeat-database",kk=1,Gs="firebase-heartbeat-store",gg=null;function _b(){return gg||(gg=lb(Ok,kk,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Gs)}catch(t){console.warn(t)}}}}).catch(n=>{throw tr.create("idb-open",{originalErrorMessage:n.message})})),gg}function Fk(n){return R(this,null,function*(){try{let t=(yield _b()).transaction(Gs),r=yield t.objectStore(Gs).get(vb(n));return yield t.done,r}catch(e){if(e instanceof En)bn.warn(e.message);else{let t=tr.create("idb-get",{originalErrorMessage:e?.message});bn.warn(t.message)}}})}function hb(n,e){return R(this,null,function*(){try{let r=(yield _b()).transaction(Gs,"readwrite");yield r.objectStore(Gs).put(e,vb(n)),yield r.done}catch(t){if(t instanceof En)bn.warn(t.message);else{let r=tr.create("idb-set",{originalErrorMessage:t?.message});bn.warn(r.message)}}})}function vb(n){return`${n.name}!${n.options.appId}`}var Vk=1024,Lk=30,Ig=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Eg(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return R(this,null,function*(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=pb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>Lk){let i=Bk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){bn.warn(e)}})}getHeartbeatsHeader(){return R(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=pb(),{heartbeatsToSend:t,unsentEntries:r}=jk(this._heartbeatsCache.heartbeats),i=$s(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return bn.warn(e),""}})}};function pb(){return new Date().toISOString().substring(0,10)}function jk(n,e=Vk){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),gb(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),gb(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Eg=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return R(this,null,function*(){return il()?rb().then(()=>!0).catch(()=>!1):!1})}read(){return R(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield Fk(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return R(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return hb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return R(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return hb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function gb(n){return $s(JSON.stringify({version:2,heartbeats:n})).length}function Bk(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function Uk(n){zs(new Dn("platform-logger",e=>new mg(e),"PRIVATE")),zs(new Dn("heartbeat",e=>new Ig(e),"PRIVATE")),nr(yg,db,n),nr(yg,db,"esm2020"),nr("fire-js","")}Uk("");var wb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ib={};var Tn,bg;(function(){var n;function e(I,_){function w(){}w.prototype=_.prototype,I.F=_.prototype,I.prototype=new w,I.prototype.constructor=I,I.D=function(D,E,C){for(var v=Array(arguments.length-2),ht=2;ht<arguments.length;ht++)v[ht-2]=arguments[ht];return _.prototype[E].apply(D,v)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,_,w){w||(w=0);let D=Array(16);if(typeof _=="string")for(var E=0;E<16;++E)D[E]=_.charCodeAt(w++)|_.charCodeAt(w++)<<8|_.charCodeAt(w++)<<16|_.charCodeAt(w++)<<24;else for(E=0;E<16;++E)D[E]=_[w++]|_[w++]<<8|_[w++]<<16|_[w++]<<24;_=I.g[0],w=I.g[1],E=I.g[2];let C=I.g[3],v;v=_+(C^w&(E^C))+D[0]+3614090360&4294967295,_=w+(v<<7&4294967295|v>>>25),v=C+(E^_&(w^E))+D[1]+3905402710&4294967295,C=_+(v<<12&4294967295|v>>>20),v=E+(w^C&(_^w))+D[2]+606105819&4294967295,E=C+(v<<17&4294967295|v>>>15),v=w+(_^E&(C^_))+D[3]+3250441966&4294967295,w=E+(v<<22&4294967295|v>>>10),v=_+(C^w&(E^C))+D[4]+4118548399&4294967295,_=w+(v<<7&4294967295|v>>>25),v=C+(E^_&(w^E))+D[5]+1200080426&4294967295,C=_+(v<<12&4294967295|v>>>20),v=E+(w^C&(_^w))+D[6]+2821735955&4294967295,E=C+(v<<17&4294967295|v>>>15),v=w+(_^E&(C^_))+D[7]+4249261313&4294967295,w=E+(v<<22&4294967295|v>>>10),v=_+(C^w&(E^C))+D[8]+1770035416&4294967295,_=w+(v<<7&4294967295|v>>>25),v=C+(E^_&(w^E))+D[9]+2336552879&4294967295,C=_+(v<<12&4294967295|v>>>20),v=E+(w^C&(_^w))+D[10]+4294925233&4294967295,E=C+(v<<17&4294967295|v>>>15),v=w+(_^E&(C^_))+D[11]+2304563134&4294967295,w=E+(v<<22&4294967295|v>>>10),v=_+(C^w&(E^C))+D[12]+1804603682&4294967295,_=w+(v<<7&4294967295|v>>>25),v=C+(E^_&(w^E))+D[13]+4254626195&4294967295,C=_+(v<<12&4294967295|v>>>20),v=E+(w^C&(_^w))+D[14]+2792965006&4294967295,E=C+(v<<17&4294967295|v>>>15),v=w+(_^E&(C^_))+D[15]+1236535329&4294967295,w=E+(v<<22&4294967295|v>>>10),v=_+(E^C&(w^E))+D[1]+4129170786&4294967295,_=w+(v<<5&4294967295|v>>>27),v=C+(w^E&(_^w))+D[6]+3225465664&4294967295,C=_+(v<<9&4294967295|v>>>23),v=E+(_^w&(C^_))+D[11]+643717713&4294967295,E=C+(v<<14&4294967295|v>>>18),v=w+(C^_&(E^C))+D[0]+3921069994&4294967295,w=E+(v<<20&4294967295|v>>>12),v=_+(E^C&(w^E))+D[5]+3593408605&4294967295,_=w+(v<<5&4294967295|v>>>27),v=C+(w^E&(_^w))+D[10]+38016083&4294967295,C=_+(v<<9&4294967295|v>>>23),v=E+(_^w&(C^_))+D[15]+3634488961&4294967295,E=C+(v<<14&4294967295|v>>>18),v=w+(C^_&(E^C))+D[4]+3889429448&4294967295,w=E+(v<<20&4294967295|v>>>12),v=_+(E^C&(w^E))+D[9]+568446438&4294967295,_=w+(v<<5&4294967295|v>>>27),v=C+(w^E&(_^w))+D[14]+3275163606&4294967295,C=_+(v<<9&4294967295|v>>>23),v=E+(_^w&(C^_))+D[3]+4107603335&4294967295,E=C+(v<<14&4294967295|v>>>18),v=w+(C^_&(E^C))+D[8]+1163531501&4294967295,w=E+(v<<20&4294967295|v>>>12),v=_+(E^C&(w^E))+D[13]+2850285829&4294967295,_=w+(v<<5&4294967295|v>>>27),v=C+(w^E&(_^w))+D[2]+4243563512&4294967295,C=_+(v<<9&4294967295|v>>>23),v=E+(_^w&(C^_))+D[7]+1735328473&4294967295,E=C+(v<<14&4294967295|v>>>18),v=w+(C^_&(E^C))+D[12]+2368359562&4294967295,w=E+(v<<20&4294967295|v>>>12),v=_+(w^E^C)+D[5]+4294588738&4294967295,_=w+(v<<4&4294967295|v>>>28),v=C+(_^w^E)+D[8]+2272392833&4294967295,C=_+(v<<11&4294967295|v>>>21),v=E+(C^_^w)+D[11]+1839030562&4294967295,E=C+(v<<16&4294967295|v>>>16),v=w+(E^C^_)+D[14]+4259657740&4294967295,w=E+(v<<23&4294967295|v>>>9),v=_+(w^E^C)+D[1]+2763975236&4294967295,_=w+(v<<4&4294967295|v>>>28),v=C+(_^w^E)+D[4]+1272893353&4294967295,C=_+(v<<11&4294967295|v>>>21),v=E+(C^_^w)+D[7]+4139469664&4294967295,E=C+(v<<16&4294967295|v>>>16),v=w+(E^C^_)+D[10]+3200236656&4294967295,w=E+(v<<23&4294967295|v>>>9),v=_+(w^E^C)+D[13]+681279174&4294967295,_=w+(v<<4&4294967295|v>>>28),v=C+(_^w^E)+D[0]+3936430074&4294967295,C=_+(v<<11&4294967295|v>>>21),v=E+(C^_^w)+D[3]+3572445317&4294967295,E=C+(v<<16&4294967295|v>>>16),v=w+(E^C^_)+D[6]+76029189&4294967295,w=E+(v<<23&4294967295|v>>>9),v=_+(w^E^C)+D[9]+3654602809&4294967295,_=w+(v<<4&4294967295|v>>>28),v=C+(_^w^E)+D[12]+3873151461&4294967295,C=_+(v<<11&4294967295|v>>>21),v=E+(C^_^w)+D[15]+530742520&4294967295,E=C+(v<<16&4294967295|v>>>16),v=w+(E^C^_)+D[2]+3299628645&4294967295,w=E+(v<<23&4294967295|v>>>9),v=_+(E^(w|~C))+D[0]+4096336452&4294967295,_=w+(v<<6&4294967295|v>>>26),v=C+(w^(_|~E))+D[7]+1126891415&4294967295,C=_+(v<<10&4294967295|v>>>22),v=E+(_^(C|~w))+D[14]+2878612391&4294967295,E=C+(v<<15&4294967295|v>>>17),v=w+(C^(E|~_))+D[5]+4237533241&4294967295,w=E+(v<<21&4294967295|v>>>11),v=_+(E^(w|~C))+D[12]+1700485571&4294967295,_=w+(v<<6&4294967295|v>>>26),v=C+(w^(_|~E))+D[3]+2399980690&4294967295,C=_+(v<<10&4294967295|v>>>22),v=E+(_^(C|~w))+D[10]+4293915773&4294967295,E=C+(v<<15&4294967295|v>>>17),v=w+(C^(E|~_))+D[1]+2240044497&4294967295,w=E+(v<<21&4294967295|v>>>11),v=_+(E^(w|~C))+D[8]+1873313359&4294967295,_=w+(v<<6&4294967295|v>>>26),v=C+(w^(_|~E))+D[15]+4264355552&4294967295,C=_+(v<<10&4294967295|v>>>22),v=E+(_^(C|~w))+D[6]+2734768916&4294967295,E=C+(v<<15&4294967295|v>>>17),v=w+(C^(E|~_))+D[13]+1309151649&4294967295,w=E+(v<<21&4294967295|v>>>11),v=_+(E^(w|~C))+D[4]+4149444226&4294967295,_=w+(v<<6&4294967295|v>>>26),v=C+(w^(_|~E))+D[11]+3174756917&4294967295,C=_+(v<<10&4294967295|v>>>22),v=E+(_^(C|~w))+D[2]+718787259&4294967295,E=C+(v<<15&4294967295|v>>>17),v=w+(C^(E|~_))+D[9]+3951481745&4294967295,I.g[0]=I.g[0]+_&4294967295,I.g[1]=I.g[1]+(E+(v<<21&4294967295|v>>>11))&4294967295,I.g[2]=I.g[2]+E&4294967295,I.g[3]=I.g[3]+C&4294967295}r.prototype.v=function(I,_){_===void 0&&(_=I.length);let w=_-this.blockSize,D=this.C,E=this.h,C=0;for(;C<_;){if(E==0)for(;C<=w;)i(this,I,C),C+=this.blockSize;if(typeof I=="string"){for(;C<_;)if(D[E++]=I.charCodeAt(C++),E==this.blockSize){i(this,D),E=0;break}}else for(;C<_;)if(D[E++]=I[C++],E==this.blockSize){i(this,D),E=0;break}}this.h=E,this.o+=_},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var _=1;_<I.length-8;++_)I[_]=0;_=this.o*8;for(var w=I.length-8;w<I.length;++w)I[w]=_&255,_/=256;for(this.v(I),I=Array(16),_=0,w=0;w<4;++w)for(let D=0;D<32;D+=8)I[_++]=this.g[w]>>>D&255;return I};function o(I,_){var w=a;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=_(I)}function s(I,_){this.h=_;let w=[],D=!0;for(let E=I.length-1;E>=0;E--){let C=I[E]|0;D&&C==_||(w[E]=C,D=!1)}this.g=w}var a={};function u(I){return-128<=I&&I<128?o(I,function(_){return new s([_|0],_<0?-1:0)}):new s([I|0],I<0?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return p;if(I<0)return N(l(-I));let _=[],w=1;for(let D=0;I>=w;D++)_[D]=I/w|0,w*=4294967296;return new s(_,0)}function f(I,_){if(I.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(I.charAt(0)=="-")return N(f(I.substring(1),_));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');let w=l(Math.pow(_,8)),D=p;for(let C=0;C<I.length;C+=8){var E=Math.min(8,I.length-C);let v=parseInt(I.substring(C,C+E),_);E<8?(E=l(Math.pow(_,E)),D=D.j(E).add(l(v))):(D=D.j(w),D=D.add(l(v)))}return D}var p=u(0),m=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(M(this))return-N(this).m();let I=0,_=1;for(let w=0;w<this.g.length;w++){let D=this.i(w);I+=(D>=0?D:4294967296+D)*_,_*=4294967296}return I},n.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(T(this))return"0";if(M(this))return"-"+N(this).toString(I);let _=l(Math.pow(I,6));var w=this;let D="";for(;;){let E=Q(w,_).g;w=V(w,E.j(_));let C=((w.g.length>0?w.g[0]:w.h)>>>0).toString(I);if(w=E,T(w))return C+D;for(;C.length<6;)C="0"+C;D=C+D}},n.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function T(I){if(I.h!=0)return!1;for(let _=0;_<I.g.length;_++)if(I.g[_]!=0)return!1;return!0}function M(I){return I.h==-1}n.l=function(I){return I=V(this,I),M(I)?-1:T(I)?0:1};function N(I){let _=I.g.length,w=[];for(let D=0;D<_;D++)w[D]=~I.g[D];return new s(w,~I.h).add(m)}n.abs=function(){return M(this)?N(this):this},n.add=function(I){let _=Math.max(this.g.length,I.g.length),w=[],D=0;for(let E=0;E<=_;E++){let C=D+(this.i(E)&65535)+(I.i(E)&65535),v=(C>>>16)+(this.i(E)>>>16)+(I.i(E)>>>16);D=v>>>16,C&=65535,v&=65535,w[E]=v<<16|C}return new s(w,w[w.length-1]&-2147483648?-1:0)};function V(I,_){return I.add(N(_))}n.j=function(I){if(T(this)||T(I))return p;if(M(this))return M(I)?N(this).j(N(I)):N(N(this).j(I));if(M(I))return N(this.j(N(I)));if(this.l(y)<0&&I.l(y)<0)return l(this.m()*I.m());let _=this.g.length+I.g.length,w=[];for(var D=0;D<2*_;D++)w[D]=0;for(D=0;D<this.g.length;D++)for(let E=0;E<I.g.length;E++){let C=this.i(D)>>>16,v=this.i(D)&65535,ht=I.i(E)>>>16,Rn=I.i(E)&65535;w[2*D+2*E]+=v*Rn,U(w,2*D+2*E),w[2*D+2*E+1]+=C*Rn,U(w,2*D+2*E+1),w[2*D+2*E+1]+=v*ht,U(w,2*D+2*E+1),w[2*D+2*E+2]+=C*ht,U(w,2*D+2*E+2)}for(I=0;I<_;I++)w[I]=w[2*I+1]<<16|w[2*I];for(I=_;I<2*_;I++)w[I]=0;return new s(w,0)};function U(I,_){for(;(I[_]&65535)!=I[_];)I[_+1]+=I[_]>>>16,I[_]&=65535,_++}function L(I,_){this.g=I,this.h=_}function Q(I,_){if(T(_))throw Error("division by zero");if(T(I))return new L(p,p);if(M(I))return _=Q(N(I),_),new L(N(_.g),N(_.h));if(M(_))return _=Q(I,N(_)),new L(N(_.g),_.h);if(I.g.length>30){if(M(I)||M(_))throw Error("slowDivide_ only works with positive integers.");for(var w=m,D=_;D.l(I)<=0;)w=J(w),D=J(D);var E=G(w,1),C=G(D,1);for(D=G(D,2),w=G(w,2);!T(D);){var v=C.add(D);v.l(I)<=0&&(E=E.add(w),C=v),D=G(D,1),w=G(w,1)}return _=V(I,E.j(_)),new L(E,_)}for(E=p;I.l(_)>=0;){for(w=Math.max(1,Math.floor(I.m()/_.m())),D=Math.ceil(Math.log(w)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),C=l(w),v=C.j(_);M(v)||v.l(I)>0;)w-=D,C=l(w),v=C.j(_);T(C)&&(C=m),E=E.add(C),I=V(I,v)}return new L(E,I)}n.B=function(I){return Q(this,I).h},n.and=function(I){let _=Math.max(this.g.length,I.g.length),w=[];for(let D=0;D<_;D++)w[D]=this.i(D)&I.i(D);return new s(w,this.h&I.h)},n.or=function(I){let _=Math.max(this.g.length,I.g.length),w=[];for(let D=0;D<_;D++)w[D]=this.i(D)|I.i(D);return new s(w,this.h|I.h)},n.xor=function(I){let _=Math.max(this.g.length,I.g.length),w=[];for(let D=0;D<_;D++)w[D]=this.i(D)^I.i(D);return new s(w,this.h^I.h)};function J(I){let _=I.g.length+1,w=[];for(let D=0;D<_;D++)w[D]=I.i(D)<<1|I.i(D-1)>>>31;return new s(w,I.h)}function G(I,_){let w=_>>5;_%=32;let D=I.g.length-w,E=[];for(let C=0;C<D;C++)E[C]=_>0?I.i(C+w)>>>_|I.i(C+w+1)<<32-_:I.i(C+w);return new s(E,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,bg=Ib.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=f,Tn=Ib.Integer=s}).apply(typeof wb<"u"?wb:typeof self<"u"?self:typeof window<"u"?window:{});var ul=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Cn={};var Tg,$k,oo,Cg,Ws,ll,Sg,Ag,xg;(function(){var n,e=Object.defineProperty;function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ul=="object"&&ul];for(var d=0;d<c.length;++d){var h=c[d];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var h=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var b=c[g];if(!(b in h))break e;h=h[b]}c=c[c.length-1],g=h[c],d=d(g),d!=g&&d!=null&&e(h,c,{configurable:!0,writable:!0,value:d})}}i("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(c){return c||function(d){var h=[],g;for(g in d)Object.prototype.hasOwnProperty.call(d,g)&&h.push([g,d[g]]);return h}});var o=o||{},s=this||self;function a(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function u(c,d,h){return c.call.apply(c.bind,arguments)}function l(c,d,h){return l=u,l.apply(null,arguments)}function f(c,d){var h=Array.prototype.slice.call(arguments,1);return function(){var g=h.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function p(c,d){function h(){}h.prototype=d.prototype,c.Z=d.prototype,c.prototype=new h,c.prototype.constructor=c,c.Ob=function(g,b,A){for(var k=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)k[Z-2]=arguments[Z];return d.prototype[b].apply(g,k)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function y(c){let d=c.length;if(d>0){let h=Array(d);for(let g=0;g<d;g++)h[g]=c[g];return h}return[]}function T(c,d){for(let g=1;g<arguments.length;g++){let b=arguments[g];var h=typeof b;if(h=h!="object"?h:b?Array.isArray(b)?"array":h:"null",h=="array"||h=="object"&&typeof b.length=="number"){h=c.length||0;let A=b.length||0;c.length=h+A;for(let k=0;k<A;k++)c[h+k]=b[k]}else c.push(b)}}class M{constructor(d,h){this.i=d,this.j=h,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function N(c){s.setTimeout(()=>{throw c},0)}function V(){var c=I;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class U{constructor(){this.h=this.g=null}add(d,h){let g=L.get();g.set(d,h),this.h?this.h.next=g:this.g=g,this.h=g}}var L=new M(()=>new Q,c=>c.reset());class Q{constructor(){this.next=this.g=this.h=null}set(d,h){this.h=d,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let J,G=!1,I=new U,_=()=>{let c=Promise.resolve(void 0);J=()=>{c.then(w)}};function w(){for(var c;c=V();){try{c.h.call(c.g)}catch(h){N(h)}var d=L;d.j(c),d.h<100&&(d.h++,c.next=d.g,d.g=c)}G=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function E(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}E.prototype.h=function(){this.defaultPrevented=!0};var C=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let h=()=>{};s.addEventListener("test",h,d),s.removeEventListener("test",h,d)}catch{}return c}();function v(c){return/^[\s\xa0]*$/.test(c)}function ht(c,d){E.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,d)}p(ht,E),ht.prototype.init=function(c,d){let h=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget,d||(h=="mouseover"?d=c.fromElement:h=="mouseout"&&(d=c.toElement)),this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&ht.Z.h.call(this)},ht.prototype.h=function(){ht.Z.h.call(this);let c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Rn="closure_listenable_"+(Math.random()*1e6|0),UC=0;function $C(c,d,h,g,b){this.listener=c,this.proxy=null,this.src=d,this.type=h,this.capture=!!g,this.ha=b,this.key=++UC,this.da=this.fa=!1}function Ha(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function qa(c,d,h){for(let g in c)d.call(h,c[g],g,c)}function HC(c,d){for(let h in c)d.call(void 0,c[h],h,c)}function v_(c){let d={};for(let h in c)d[h]=c[h];return d}let w_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I_(c,d){let h,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(h in g)c[h]=g[h];for(let A=0;A<w_.length;A++)h=w_[A],Object.prototype.hasOwnProperty.call(g,h)&&(c[h]=g[h])}}function za(c){this.src=c,this.g={},this.h=0}za.prototype.add=function(c,d,h,g,b){let A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);let k=Ud(c,d,g,b);return k>-1?(d=c[k],h||(d.fa=!1)):(d=new $C(d,this.src,A,!!g,b),d.fa=h,c.push(d)),d};function Bd(c,d){let h=d.type;if(h in c.g){var g=c.g[h],b=Array.prototype.indexOf.call(g,d,void 0),A;(A=b>=0)&&Array.prototype.splice.call(g,b,1),A&&(Ha(d),c.g[h].length==0&&(delete c.g[h],c.h--))}}function Ud(c,d,h,g){for(let b=0;b<c.length;++b){let A=c[b];if(!A.da&&A.listener==d&&A.capture==!!h&&A.ha==g)return b}return-1}var $d="closure_lm_"+(Math.random()*1e6|0),Hd={};function E_(c,d,h,g,b){if(g&&g.once)return b_(c,d,h,g,b);if(Array.isArray(d)){for(let A=0;A<d.length;A++)E_(c,d[A],h,g,b);return null}return h=Wd(h),c&&c[Rn]?c.J(d,h,a(g)?!!g.capture:!!g,b):D_(c,d,h,!1,g,b)}function D_(c,d,h,g,b,A){if(!d)throw Error("Invalid event type");let k=a(b)?!!b.capture:!!b,Z=zd(c);if(Z||(c[$d]=Z=new za(c)),h=Z.add(d,h,g,k,A),h.proxy)return h;if(g=qC(),h.proxy=g,g.src=c,g.listener=h,c.addEventListener)C||(b=k),b===void 0&&(b=!1),c.addEventListener(d.toString(),g,b);else if(c.attachEvent)c.attachEvent(C_(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return h}function qC(){function c(h){return d.call(c.src,c.listener,h)}let d=zC;return c}function b_(c,d,h,g,b){if(Array.isArray(d)){for(let A=0;A<d.length;A++)b_(c,d[A],h,g,b);return null}return h=Wd(h),c&&c[Rn]?c.K(d,h,a(g)?!!g.capture:!!g,b):D_(c,d,h,!0,g,b)}function T_(c,d,h,g,b){if(Array.isArray(d))for(var A=0;A<d.length;A++)T_(c,d[A],h,g,b);else g=a(g)?!!g.capture:!!g,h=Wd(h),c&&c[Rn]?(c=c.i,A=String(d).toString(),A in c.g&&(d=c.g[A],h=Ud(d,h,g,b),h>-1&&(Ha(d[h]),Array.prototype.splice.call(d,h,1),d.length==0&&(delete c.g[A],c.h--)))):c&&(c=zd(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Ud(d,h,g,b)),(h=c>-1?d[c]:null)&&qd(h))}function qd(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Rn])Bd(d.i,c);else{var h=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(h,g,c.capture):d.detachEvent?d.detachEvent(C_(h),g):d.addListener&&d.removeListener&&d.removeListener(g),(h=zd(d))?(Bd(h,c),h.h==0&&(h.src=null,d[$d]=null)):Ha(c)}}}function C_(c){return c in Hd?Hd[c]:Hd[c]="on"+c}function zC(c,d){if(c.da)c=!0;else{d=new ht(d,this);let h=c.listener,g=c.ha||c.src;c.fa&&qd(c),c=h.call(g,d)}return c}function zd(c){return c=c[$d],c instanceof za?c:null}var Gd="__closure_events_fn_"+(Math.random()*1e9>>>0);function Wd(c){return typeof c=="function"?c:(c[Gd]||(c[Gd]=function(d){return c.handleEvent(d)}),c[Gd])}function Ze(){D.call(this),this.i=new za(this),this.M=this,this.G=null}p(Ze,D),Ze.prototype[Rn]=!0,Ze.prototype.removeEventListener=function(c,d,h,g){T_(this,c,d,h,g)};function rt(c,d){var h,g=c.G;if(g)for(h=[];g;g=g.G)h.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new E(d,c);else if(d instanceof E)d.target=d.target||c;else{var b=d;d=new E(g,c),I_(d,b)}b=!0;let A,k;if(h)for(k=h.length-1;k>=0;k--)A=d.g=h[k],b=Ga(A,g,!0,d)&&b;if(A=d.g=c,b=Ga(A,g,!0,d)&&b,b=Ga(A,g,!1,d)&&b,h)for(k=0;k<h.length;k++)A=d.g=h[k],b=Ga(A,g,!1,d)&&b}Ze.prototype.N=function(){if(Ze.Z.N.call(this),this.i){var c=this.i;for(let d in c.g){let h=c.g[d];for(let g=0;g<h.length;g++)Ha(h[g]);delete c.g[d],c.h--}}this.G=null},Ze.prototype.J=function(c,d,h,g){return this.i.add(String(c),d,!1,h,g)},Ze.prototype.K=function(c,d,h,g){return this.i.add(String(c),d,!0,h,g)};function Ga(c,d,h,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();let b=!0;for(let A=0;A<d.length;++A){let k=d[A];if(k&&!k.da&&k.capture==h){let Z=k.listener,Be=k.ha||k.src;k.fa&&Bd(c.i,k),b=Z.call(Be,g)!==!1&&b}}return b&&!g.defaultPrevented}function GC(c,d){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=l(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:s.setTimeout(c,d||0)}function S_(c){c.g=GC(()=>{c.g=null,c.i&&(c.i=!1,S_(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class WC extends D{constructor(d,h){super(),this.m=d,this.l=h,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:S_(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zo(c){D.call(this),this.h=c,this.g={}}p(Zo,D);var A_=[];function x_(c){qa(c.g,function(d,h){this.g.hasOwnProperty(h)&&qd(d)},c),c.g={}}Zo.prototype.N=function(){Zo.Z.N.call(this),x_(this)},Zo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kd=s.JSON.stringify,KC=s.JSON.parse,QC=class{stringify(c){return s.JSON.stringify(c,void 0)}parse(c){return s.JSON.parse(c,void 0)}};function M_(){}function N_(){}var Xo={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Qd(){E.call(this,"d")}p(Qd,E);function Yd(){E.call(this,"c")}p(Yd,E);var br={},R_=null;function Wa(){return R_=R_||new Ze}br.Ia="serverreachability";function P_(c){E.call(this,br.Ia,c)}p(P_,E);function es(c){let d=Wa();rt(d,new P_(d))}br.STAT_EVENT="statevent";function O_(c,d){E.call(this,br.STAT_EVENT,c),this.stat=d}p(O_,E);function it(c){let d=Wa();rt(d,new O_(d,c))}br.Ja="timingevent";function k_(c,d){E.call(this,br.Ja,c),this.size=d}p(k_,E);function ts(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){c()},d)}function ns(){this.g=!0}ns.prototype.ua=function(){this.g=!1};function YC(c,d,h,g,b,A){c.info(function(){if(c.g)if(A){var k="",Z=A.split("&");for(let _e=0;_e<Z.length;_e++){var Be=Z[_e].split("=");if(Be.length>1){let Ge=Be[0];Be=Be[1];let Jt=Ge.split("_");k=Jt.length>=2&&Jt[1]=="type"?k+(Ge+"="+Be+"&"):k+(Ge+"=redacted&")}}}else k=null;else k=A;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+h+`
`+k})}function JC(c,d,h,g,b,A,k){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+h+`
`+A+" "+k})}function bi(c,d,h,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+XC(c,h)+(g?" "+g:"")})}function ZC(c,d){c.info(function(){return"TIMEOUT: "+d})}ns.prototype.info=function(){};function XC(c,d){if(!c.g)return d;if(!d)return null;try{let A=JSON.parse(d);if(A){for(c=0;c<A.length;c++)if(Array.isArray(A[c])){var h=A[c];if(!(h.length<2)){var g=h[1];if(Array.isArray(g)&&!(g.length<1)){var b=g[0];if(b!="noop"&&b!="stop"&&b!="close")for(let k=1;k<g.length;k++)g[k]=""}}}}return Kd(A)}catch{return d}}var Ka={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},F_={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},V_;function Jd(){}p(Jd,M_),Jd.prototype.g=function(){return new XMLHttpRequest},V_=new Jd;function rs(c){return encodeURIComponent(String(c))}function eS(c){var d=1;c=c.split(":");let h=[];for(;d>0&&c.length;)h.push(c.shift()),d--;return c.length&&h.push(c.join(":")),h}function Pn(c,d,h,g){this.j=c,this.i=d,this.l=h,this.S=g||1,this.V=new Zo(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new L_}function L_(){this.i=null,this.g="",this.h=!1}var j_={},Zd={};function Xd(c,d,h){c.M=1,c.A=Ya(Yt(d)),c.u=h,c.R=!0,B_(c,null)}function B_(c,d){c.F=Date.now(),Qa(c),c.B=Yt(c.A);var h=c.B,g=c.S;Array.isArray(g)||(g=[String(g)]),X_(h.i,"t",g),c.C=0,h=c.j.L,c.h=new L_,c.g=yv(c.j,h?d:null,!c.u),c.P>0&&(c.O=new WC(l(c.Y,c,c.g),c.P)),d=c.V,h=c.g,g=c.ba;var b="readystatechange";Array.isArray(b)||(b&&(A_[0]=b.toString()),b=A_);for(let A=0;A<b.length;A++){let k=E_(h,b[A],g||d.handleEvent,!1,d.h||d);if(!k)break;d.g[k.key]=k}d=c.J?v_(c.J):{},c.u?(c.v||(c.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,d)):(c.v="GET",c.g.ea(c.B,c.v,null,d)),es(),YC(c.i,c.v,c.B,c.l,c.S,c.u)}Pn.prototype.ba=function(c){c=c.target;let d=this.O;d&&Fn(c)==3?d.j():this.Y(c)},Pn.prototype.Y=function(c){try{if(c==this.g)e:{let Z=Fn(this.g),Be=this.g.ya(),_e=this.g.ca();if(!(Z<3)&&(Z!=3||this.g&&(this.h.h||this.g.la()||sv(this.g)))){this.K||Z!=4||Be==7||(Be==8||_e<=0?es(3):es(2)),ef(this);var d=this.g.ca();this.X=d;var h=tS(this);if(this.o=d==200,JC(this.i,this.v,this.B,this.l,this.S,Z,d),this.o){if(this.U&&!this.L){t:{if(this.g){var g,b=this.g;if((g=b.g?b.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(g)){var A=g;break t}}A=null}if(c=A)bi(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,tf(this,c);else{this.o=!1,this.m=3,it(12),Tr(this),is(this);break e}}if(this.R){c=!0;let Ge;for(;!this.K&&this.C<h.length;)if(Ge=nS(this,h),Ge==Zd){Z==4&&(this.m=4,it(14),c=!1),bi(this.i,this.l,null,"[Incomplete Response]");break}else if(Ge==j_){this.m=4,it(15),bi(this.i,this.l,h,"[Invalid Chunk]"),c=!1;break}else bi(this.i,this.l,Ge,null),tf(this,Ge);if(U_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Z!=4||h.length!=0||this.h.h||(this.m=1,it(16),c=!1),this.o=this.o&&c,!c)bi(this.i,this.l,h,"[Invalid Chunked Response]"),Tr(this),is(this);else if(h.length>0&&!this.W){this.W=!0;var k=this.j;k.g==this&&k.aa&&!k.P&&(k.j.info("Great, no buffering proxy detected. Bytes received: "+h.length),uf(k),k.P=!0,it(11))}}else bi(this.i,this.l,h,null),tf(this,h);Z==4&&Tr(this),this.o&&!this.K&&(Z==4?hv(this.j,this):(this.o=!1,Qa(this)))}else mS(this.g),d==400&&h.indexOf("Unknown SID")>0?(this.m=3,it(12)):(this.m=0,it(13)),Tr(this),is(this)}}}catch{}finally{}};function tS(c){if(!U_(c))return c.g.la();let d=sv(c.g);if(d==="")return"";let h="",g=d.length,b=Fn(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Tr(c),is(c),"";c.h.i=new s.TextDecoder}for(let A=0;A<g;A++)c.h.h=!0,h+=c.h.i.decode(d[A],{stream:!(b&&A==g-1)});return d.length=0,c.h.g+=h,c.C=0,c.h.g}function U_(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function nS(c,d){var h=c.C,g=d.indexOf(`
`,h);return g==-1?Zd:(h=Number(d.substring(h,g)),isNaN(h)?j_:(g+=1,g+h>d.length?Zd:(d=d.slice(g,g+h),c.C=g+h,d)))}Pn.prototype.cancel=function(){this.K=!0,Tr(this)};function Qa(c){c.T=Date.now()+c.H,$_(c,c.H)}function $_(c,d){if(c.D!=null)throw Error("WatchDog timer not null");c.D=ts(l(c.aa,c),d)}function ef(c){c.D&&(s.clearTimeout(c.D),c.D=null)}Pn.prototype.aa=function(){this.D=null;let c=Date.now();c-this.T>=0?(ZC(this.i,this.B),this.M!=2&&(es(),it(17)),Tr(this),this.m=2,is(this)):$_(this,this.T-c)};function is(c){c.j.I==0||c.K||hv(c.j,c)}function Tr(c){ef(c);var d=c.O;d&&typeof d.dispose=="function"&&d.dispose(),c.O=null,x_(c.V),c.g&&(d=c.g,c.g=null,d.abort(),d.dispose())}function tf(c,d){try{var h=c.j;if(h.I!=0&&(h.g==c||nf(h.h,c))){if(!c.L&&nf(h.h,c)&&h.I==3){try{var g=h.Ba.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!h.v){if(h.g)if(h.g.F+3e3<c.F)nc(h),ec(h);else break e;cf(h),it(18)}}else h.xa=b[1],0<h.xa-h.K&&b[2]<37500&&h.F&&h.A==0&&!h.C&&(h.C=ts(l(h.Va,h),6e3));z_(h.h)<=1&&h.ta&&(h.ta=void 0)}else Sr(h,11)}else if((c.L||h.g==c)&&nc(h),!v(d))for(b=h.Ba.g.parse(d),d=0;d<b.length;d++){let _e=b[d],Ge=_e[0];if(!(Ge<=h.K))if(h.K=Ge,_e=_e[1],h.I==2)if(_e[0]=="c"){h.M=_e[1],h.ba=_e[2];let Jt=_e[3];Jt!=null&&(h.ka=Jt,h.j.info("VER="+h.ka));let Ar=_e[4];Ar!=null&&(h.za=Ar,h.j.info("SVER="+h.za));let Vn=_e[5];Vn!=null&&typeof Vn=="number"&&Vn>0&&(g=1.5*Vn,h.O=g,h.j.info("backChannelRequestTimeoutMs_="+g)),g=h;let Ln=c.g;if(Ln){let ic=Ln.g?Ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ic){var A=g.h;A.g||ic.indexOf("spdy")==-1&&ic.indexOf("quic")==-1&&ic.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(rf(A,A.h),A.h=null))}if(g.G){let lf=Ln.g?Ln.g.getResponseHeader("X-HTTP-Session-Id"):null;lf&&(g.wa=lf,De(g.J,g.G,lf))}}h.I=3,h.l&&h.l.ra(),h.aa&&(h.T=Date.now()-c.F,h.j.info("Handshake RTT: "+h.T+"ms")),g=h;var k=c;if(g.na=mv(g,g.L?g.ba:null,g.W),k.L){G_(g.h,k);var Z=k,Be=g.O;Be&&(Z.H=Be),Z.D&&(ef(Z),Qa(Z)),g.g=k}else dv(g);h.i.length>0&&tc(h)}else _e[0]!="stop"&&_e[0]!="close"||Sr(h,7);else h.I==3&&(_e[0]=="stop"||_e[0]=="close"?_e[0]=="stop"?Sr(h,7):af(h):_e[0]!="noop"&&h.l&&h.l.qa(_e),h.A=0)}}es(4)}catch{}}var rS=class{constructor(c,d){this.g=c,this.map=d}};function H_(c){this.l=c||10,s.PerformanceNavigationTiming?(c=s.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function q_(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function z_(c){return c.h?1:c.g?c.g.size:0}function nf(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function rf(c,d){c.g?c.g.add(d):c.h=d}function G_(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}H_.prototype.cancel=function(){if(this.i=W_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function W_(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let h of c.g.values())d=d.concat(h.G);return d}return y(c.i)}var K_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function iS(c,d){if(c){c=c.split("&");for(let h=0;h<c.length;h++){let g=c[h].indexOf("="),b,A=null;g>=0?(b=c[h].substring(0,g),A=c[h].substring(g+1)):b=c[h],d(b,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function On(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;c instanceof On?(this.l=c.l,os(this,c.j),this.o=c.o,this.g=c.g,ss(this,c.u),this.h=c.h,of(this,ev(c.i)),this.m=c.m):c&&(d=String(c).match(K_))?(this.l=!1,os(this,d[1]||"",!0),this.o=as(d[2]||""),this.g=as(d[3]||"",!0),ss(this,d[4]),this.h=as(d[5]||"",!0),of(this,d[6]||"",!0),this.m=as(d[7]||"")):(this.l=!1,this.i=new us(null,this.l))}On.prototype.toString=function(){let c=[];var d=this.j;d&&c.push(cs(d,Q_,!0),":");var h=this.g;return(h||d=="file")&&(c.push("//"),(d=this.o)&&c.push(cs(d,Q_,!0),"@"),c.push(rs(h).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.u,h!=null&&c.push(":",String(h))),(h=this.h)&&(this.g&&h.charAt(0)!="/"&&c.push("/"),c.push(cs(h,h.charAt(0)=="/"?aS:sS,!0))),(h=this.i.toString())&&c.push("?",h),(h=this.m)&&c.push("#",cs(h,uS)),c.join("")},On.prototype.resolve=function(c){let d=Yt(this),h=!!c.j;h?os(d,c.j):h=!!c.o,h?d.o=c.o:h=!!c.g,h?d.g=c.g:h=c.u!=null;var g=c.h;if(h)ss(d,c.u);else if(h=!!c.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var b=d.h.lastIndexOf("/");b!=-1&&(g=d.h.slice(0,b+1)+g)}if(b=g,b==".."||b==".")g="";else if(b.indexOf("./")!=-1||b.indexOf("/.")!=-1){g=b.lastIndexOf("/",0)==0,b=b.split("/");let A=[];for(let k=0;k<b.length;){let Z=b[k++];Z=="."?g&&k==b.length&&A.push(""):Z==".."?((A.length>1||A.length==1&&A[0]!="")&&A.pop(),g&&k==b.length&&A.push("")):(A.push(Z),g=!0)}g=A.join("/")}else g=b}return h?d.h=g:h=c.i.toString()!=="",h?of(d,ev(c.i)):h=!!c.m,h&&(d.m=c.m),d};function Yt(c){return new On(c)}function os(c,d,h){c.j=h?as(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function ss(c,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);c.u=d}else c.u=null}function of(c,d,h){d instanceof us?(c.i=d,lS(c.i,c.l)):(h||(d=cs(d,cS)),c.i=new us(d,c.l))}function De(c,d,h){c.i.set(d,h)}function Ya(c){return De(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function as(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function cs(c,d,h){return typeof c=="string"?(c=encodeURI(c).replace(d,oS),h&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function oS(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Q_=/[#\/\?@]/g,sS=/[#\?:]/g,aS=/[#\?]/g,cS=/[#\?@]/g,uS=/#/g;function us(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Cr(c){c.g||(c.g=new Map,c.h=0,c.i&&iS(c.i,function(d,h){c.add(decodeURIComponent(d.replace(/\+/g," ")),h)}))}n=us.prototype,n.add=function(c,d){Cr(this),this.i=null,c=Ti(this,c);let h=this.g.get(c);return h||this.g.set(c,h=[]),h.push(d),this.h+=1,this};function Y_(c,d){Cr(c),d=Ti(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function J_(c,d){return Cr(c),d=Ti(c,d),c.g.has(d)}n.forEach=function(c,d){Cr(this),this.g.forEach(function(h,g){h.forEach(function(b){c.call(d,b,g,this)},this)},this)};function Z_(c,d){Cr(c);let h=[];if(typeof d=="string")J_(c,d)&&(h=h.concat(c.g.get(Ti(c,d))));else for(c=Array.from(c.g.values()),d=0;d<c.length;d++)h=h.concat(c[d]);return h}n.set=function(c,d){return Cr(this),this.i=null,c=Ti(this,c),J_(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=Z_(this,c),c.length>0?String(c[0]):d):d};function X_(c,d,h){Y_(c,d),h.length>0&&(c.i=null,c.g.set(Ti(c,d),y(h)),c.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(let g=0;g<d.length;g++){var h=d[g];let b=rs(h);h=Z_(this,h);for(let A=0;A<h.length;A++){let k=b;h[A]!==""&&(k+="="+rs(h[A])),c.push(k)}}return this.i=c.join("&")};function ev(c){let d=new us;return d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),d}function Ti(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function lS(c,d){d&&!c.j&&(Cr(c),c.i=null,c.g.forEach(function(h,g){let b=g.toLowerCase();g!=b&&(Y_(this,g),X_(this,b,h))},c)),c.j=d}function dS(c,d){let h=new ns;if(s.Image){let g=new Image;g.onload=f(kn,h,"TestLoadImage: loaded",!0,d,g),g.onerror=f(kn,h,"TestLoadImage: error",!1,d,g),g.onabort=f(kn,h,"TestLoadImage: abort",!1,d,g),g.ontimeout=f(kn,h,"TestLoadImage: timeout",!1,d,g),s.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function fS(c,d){let h=new ns,g=new AbortController,b=setTimeout(()=>{g.abort(),kn(h,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(b),A.ok?kn(h,"TestPingServer: ok",!0,d):kn(h,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),kn(h,"TestPingServer: error",!1,d)})}function kn(c,d,h,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(h)}catch{}}function hS(){this.g=new QC}function Ja(c){this.i=c.Sb||null,this.h=c.ab||!1}p(Ja,M_),Ja.prototype.g=function(){return new Za(this.i,this.h)};function Za(c,d){Ze.call(this),this.H=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Za,Ze),n=Za.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=d,this.readyState=1,ds(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(d.body=c),(this.H||s).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ls(this)),this.readyState=0},n.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ds(this)),this.g&&(this.readyState=3,ds(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;tv(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function tv(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}n.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?ls(this):ds(this),this.readyState==3&&tv(this)}},n.Oa=function(c){this.g&&(this.response=this.responseText=c,ls(this))},n.Na=function(c){this.g&&(this.response=c,ls(this))},n.ga=function(){this.g&&ls(this)};function ls(c){c.readyState=4,c.l=null,c.j=null,c.B=null,ds(c)}n.setRequestHeader=function(c,d){this.A.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var h=d.next();!h.done;)h=h.value,c.push(h[0]+": "+h[1]),h=d.next();return c.join(`\r
`)};function ds(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Za.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function nv(c){let d="";return qa(c,function(h,g){d+=g,d+=":",d+=h,d+=`\r
`}),d}function sf(c,d,h){e:{for(g in h){var g=!1;break e}g=!0}g||(h=nv(h),typeof c=="string"?h!=null&&rs(h):De(c,d,h))}function Ae(c){Ze.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Ae,Ze);var pS=/^https?$/i,gS=["POST","PUT"];n=Ae.prototype,n.Fa=function(c){this.H=c},n.ea=function(c,d,h,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():V_.g(),this.g.onreadystatechange=m(l(this.Ca,this));try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){rv(this,A);return}if(c=h||"",h=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)h.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())h.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(h.keys()).find(A=>A.toLowerCase()=="content-type"),b=s.FormData&&c instanceof s.FormData,!(Array.prototype.indexOf.call(gS,d,void 0)>=0)||g||b||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,k]of h)this.g.setRequestHeader(A,k);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(A){rv(this,A)}};function rv(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.o=5,iv(c),Xa(c)}function iv(c){c.A||(c.A=!0,rt(c,"complete"),rt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,rt(this,"complete"),rt(this,"abort"),Xa(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xa(this,!0)),Ae.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?ov(this):this.Xa())},n.Xa=function(){ov(this)};function ov(c){if(c.h&&typeof o<"u"){if(c.v&&Fn(c)==4)setTimeout(c.Ca.bind(c),0);else if(rt(c,"readystatechange"),Fn(c)==4){c.h=!1;try{let A=c.ca();e:switch(A){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var h;if(!(h=d)){var g;if(g=A===0){let k=String(c.D).match(K_)[1]||null;!k&&s.self&&s.self.location&&(k=s.self.location.protocol.slice(0,-1)),g=!pS.test(k?k.toLowerCase():"")}h=g}if(h)rt(c,"complete"),rt(c,"success");else{c.o=6;try{var b=Fn(c)>2?c.g.statusText:""}catch{b=""}c.l=b+" ["+c.ca()+"]",iv(c)}}finally{Xa(c)}}}}function Xa(c,d){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);let h=c.g;c.g=null,d||rt(c,"ready");try{h.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Fn(c){return c.g?c.g.readyState:0}n.ca=function(){try{return Fn(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),KC(d)}};function sv(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function mS(c){let d={};c=(c.g&&Fn(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(v(c[g]))continue;var h=eS(c[g]);let b=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let A=d[b]||[];d[b]=A,A.push(h)}HC(d,function(g){return g.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function fs(c,d,h){return h&&h.internalChannelParams&&h.internalChannelParams[c]||d}function av(c){this.za=0,this.i=[],this.j=new ns,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=fs("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=fs("baseRetryDelayMs",5e3,c),this.Za=fs("retryDelaySeedMs",1e4,c),this.Ta=fs("forwardChannelMaxRetries",2,c),this.va=fs("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new H_(c&&c.concurrentRequestLimit),this.Ba=new hS,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=av.prototype,n.ka=8,n.I=1,n.connect=function(c,d,h,g){it(0),this.W=c,this.H=d||{},h&&g!==void 0&&(this.H.OSID=h,this.H.OAID=g),this.F=this.X,this.J=mv(this,null,this.W),tc(this)};function af(c){if(cv(c),c.I==3){var d=c.V++,h=Yt(c.J);if(De(h,"SID",c.M),De(h,"RID",d),De(h,"TYPE","terminate"),hs(c,h),d=new Pn(c,c.j,d),d.M=2,d.A=Ya(Yt(h)),h=!1,s.navigator&&s.navigator.sendBeacon)try{h=s.navigator.sendBeacon(d.A.toString(),"")}catch{}!h&&s.Image&&(new Image().src=d.A,h=!0),h||(d.g=yv(d.j,null),d.g.ea(d.A)),d.F=Date.now(),Qa(d)}gv(c)}function ec(c){c.g&&(uf(c),c.g.cancel(),c.g=null)}function cv(c){ec(c),c.v&&(s.clearTimeout(c.v),c.v=null),nc(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&s.clearTimeout(c.m),c.m=null)}function tc(c){if(!q_(c.h)&&!c.m){c.m=!0;var d=c.Ea;J||_(),G||(J(),G=!0),I.add(d,c),c.D=0}}function yS(c,d){return z_(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=d.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=ts(l(c.Ea,c,d),pv(c,c.D)),c.D++,!0)}n.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;let b=new Pn(this,this.j,c),A=this.o;if(this.U&&(A?(A=v_(A),I_(A,this.U)):A=this.U),this.u!==null||this.R||(b.J=A,A=null),this.S)e:{for(var d=0,h=0;h<this.i.length;h++){t:{var g=this.i[h];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,d>4096){d=h;break e}if(d===4096||h===this.i.length-1){d=h+1;break e}}d=1e3}else d=1e3;d=lv(this,b,d),h=Yt(this.J),De(h,"RID",c),De(h,"CVER",22),this.G&&De(h,"X-HTTP-Session-Id",this.G),hs(this,h),A&&(this.R?d="headers="+rs(nv(A))+"&"+d:this.u&&sf(h,this.u,A)),rf(this.h,b),this.Ra&&De(h,"TYPE","init"),this.S?(De(h,"$req",d),De(h,"SID","null"),b.U=!0,Xd(b,h,null)):Xd(b,h,d),this.I=2}}else this.I==3&&(c?uv(this,c):this.i.length==0||q_(this.h)||uv(this))};function uv(c,d){var h;d?h=d.l:h=c.V++;let g=Yt(c.J);De(g,"SID",c.M),De(g,"RID",h),De(g,"AID",c.K),hs(c,g),c.u&&c.o&&sf(g,c.u,c.o),h=new Pn(c,c.j,h,c.D+1),c.u===null&&(h.J=c.o),d&&(c.i=d.G.concat(c.i)),d=lv(c,h,1e3),h.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),rf(c.h,h),Xd(h,g,d)}function hs(c,d){c.H&&qa(c.H,function(h,g){De(d,g,h)}),c.l&&qa({},function(h,g){De(d,g,h)})}function lv(c,d,h){h=Math.min(c.i.length,h);let g=c.l?l(c.l.Ka,c.l,c):null;e:{var b=c.i;let Z=-1;for(;;){let Be=["count="+h];Z==-1?h>0?(Z=b[0].g,Be.push("ofs="+Z)):Z=0:Be.push("ofs="+Z);let _e=!0;for(let Ge=0;Ge<h;Ge++){var A=b[Ge].g;let Jt=b[Ge].map;if(A-=Z,A<0)Z=Math.max(0,b[Ge].g-100),_e=!1;else try{A="req"+A+"_"||"";try{var k=Jt instanceof Map?Jt:Object.entries(Jt);for(let[Ar,Vn]of k){let Ln=Vn;a(Vn)&&(Ln=Kd(Vn)),Be.push(A+Ar+"="+encodeURIComponent(Ln))}}catch(Ar){throw Be.push(A+"type="+encodeURIComponent("_badmap")),Ar}}catch{g&&g(Jt)}}if(_e){k=Be.join("&");break e}}k=void 0}return c=c.i.splice(0,h),d.G=c,k}function dv(c){if(!c.g&&!c.v){c.Y=1;var d=c.Da;J||_(),G||(J(),G=!0),I.add(d,c),c.A=0}}function cf(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=ts(l(c.Da,c),pv(c,c.A)),c.A++,!0)}n.Da=function(){if(this.v=null,fv(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=ts(l(this.Wa,this),c)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,it(10),ec(this),fv(this))};function uf(c){c.B!=null&&(s.clearTimeout(c.B),c.B=null)}function fv(c){c.g=new Pn(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var d=Yt(c.na);De(d,"RID","rpc"),De(d,"SID",c.M),De(d,"AID",c.K),De(d,"CI",c.F?"0":"1"),!c.F&&c.ia&&De(d,"TO",c.ia),De(d,"TYPE","xmlhttp"),hs(c,d),c.u&&c.o&&sf(d,c.u,c.o),c.O&&(c.g.H=c.O);var h=c.g;c=c.ba,h.M=1,h.A=Ya(Yt(d)),h.u=null,h.R=!0,B_(h,c)}n.Va=function(){this.C!=null&&(this.C=null,ec(this),cf(this),it(19))};function nc(c){c.C!=null&&(s.clearTimeout(c.C),c.C=null)}function hv(c,d){var h=null;if(c.g==d){nc(c),uf(c),c.g=null;var g=2}else if(nf(c.h,d))h=d.G,G_(c.h,d),g=1;else return;if(c.I!=0){if(d.o)if(g==1){h=d.u?d.u.length:0,d=Date.now()-d.F;var b=c.D;g=Wa(),rt(g,new k_(g,h)),tc(c)}else dv(c);else if(b=d.m,b==3||b==0&&d.X>0||!(g==1&&yS(c,d)||g==2&&cf(c)))switch(h&&h.length>0&&(d=c.h,d.i=d.i.concat(h)),b){case 1:Sr(c,5);break;case 4:Sr(c,10);break;case 3:Sr(c,6);break;default:Sr(c,2)}}}function pv(c,d){let h=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(h*=2),h*d}function Sr(c,d){if(c.j.info("Error code "+d),d==2){var h=l(c.bb,c),g=c.Ua;let b=!g;g=new On(g||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||os(g,"https"),Ya(g),b?dS(g.toString(),h):fS(g.toString(),h)}else it(2);c.I=0,c.l&&c.l.pa(d),gv(c),cv(c)}n.bb=function(c){c?(this.j.info("Successfully pinged google.com"),it(2)):(this.j.info("Failed to ping google.com"),it(1))};function gv(c){if(c.I=0,c.ja=[],c.l){let d=W_(c.h);(d.length!=0||c.i.length!=0)&&(T(c.ja,d),T(c.ja,c.i),c.h.i.length=0,y(c.i),c.i.length=0),c.l.oa()}}function mv(c,d,h){var g=h instanceof On?Yt(h):new On(h);if(g.g!="")d&&(g.g=d+"."+g.g),ss(g,g.u);else{var b=s.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;let A=new On(null);g&&os(A,g),d&&(A.g=d),b&&ss(A,b),h&&(A.h=h),g=A}return h=c.G,d=c.wa,h&&d&&De(g,h,d),De(g,"VER",c.ka),hs(c,g),g}function yv(c,d,h){if(d&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Aa&&!c.ma?new Ae(new Ja({ab:h})):new Ae(c.ma),d.Fa(c.L),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function _v(){}n=_v.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function rc(){}rc.prototype.g=function(c,d){return new wt(c,d)};function wt(c,d){Ze.call(this),this.g=new av(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(c?c["X-WebChannel-Client-Profile"]=d.sa:c={"X-WebChannel-Client-Profile":d.sa}),this.g.U=c,(c=d&&d.Qb)&&!v(c)&&(this.g.u=c),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!v(d)&&(this.g.G=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Ci(this)}p(wt,Ze),wt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},wt.prototype.close=function(){af(this.g)},wt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var h={};h.__data__=c,c=h}else this.v&&(h={},h.__data__=Kd(c),c=h);d.i.push(new rS(d.Ya++,c)),d.I==3&&tc(d)},wt.prototype.N=function(){this.g.l=null,delete this.j,af(this.g),delete this.g,wt.Z.N.call(this)};function vv(c){Qd.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let h in d){c=h;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}p(vv,Qd);function wv(){Yd.call(this),this.status=1}p(wv,Yd);function Ci(c){this.g=c}p(Ci,_v),Ci.prototype.ra=function(){rt(this.g,"a")},Ci.prototype.qa=function(c){rt(this.g,new vv(c))},Ci.prototype.pa=function(c){rt(this.g,new wv)},Ci.prototype.oa=function(){rt(this.g,"b")},rc.prototype.createWebChannel=rc.prototype.g,wt.prototype.send=wt.prototype.o,wt.prototype.open=wt.prototype.m,wt.prototype.close=wt.prototype.close,xg=Cn.createWebChannelTransport=function(){return new rc},Ag=Cn.getStatEventTarget=function(){return Wa()},Sg=Cn.Event=br,ll=Cn.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ka.NO_ERROR=0,Ka.TIMEOUT=8,Ka.HTTP_ERROR=6,Ws=Cn.ErrorCode=Ka,F_.COMPLETE="complete",Cg=Cn.EventType=F_,N_.EventType=Xo,Xo.OPEN="a",Xo.CLOSE="b",Xo.ERROR="c",Xo.MESSAGE="d",Ze.prototype.listen=Ze.prototype.J,oo=Cn.WebChannel=N_,$k=Cn.FetchXmlHttpFactory=Ja,Ae.prototype.listenOnce=Ae.prototype.K,Ae.prototype.getLastError=Ae.prototype.Ha,Ae.prototype.getLastErrorCode=Ae.prototype.ya,Ae.prototype.getStatus=Ae.prototype.ca,Ae.prototype.getResponseJson=Ae.prototype.La,Ae.prototype.getResponseText=Ae.prototype.la,Ae.prototype.send=Ae.prototype.ea,Ae.prototype.setWithCredentials=Ae.prototype.Fa,Tg=Cn.XhrIo=Ae}).apply(typeof ul<"u"?ul:typeof self<"u"?self:typeof window<"u"?window:{});var Eb="@firebase/firestore",Db="4.9.2";var Ve=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ve.UNAUTHENTICATED=new Ve(null),Ve.GOOGLE_CREDENTIALS=new Ve("google-credentials-uid"),Ve.FIRST_PARTY=new Ve("first-party-uid"),Ve.MOCK_USER=new Ve("mock-user");var Go="12.3.0";var hi=new io("@firebase/firestore");function ho(){return hi.logLevel}function P(n,...e){if(hi.logLevel<=se.DEBUG){let t=e.map(jy);hi.debug(`Firestore (${Go}): ${n}`,...t)}}function Re(n,...e){if(hi.logLevel<=se.ERROR){let t=e.map(jy);hi.error(`Firestore (${Go}): ${n}`,...t)}}function Eo(n,...e){if(hi.logLevel<=se.WARN){let t=e.map(jy);hi.warn(`Firestore (${Go}): ${n}`,...t)}}function jy(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function j(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,FT(n,r,t)}function FT(n,e,t){let r=`FIRESTORE (${Go}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Re(r),new Error(r)}function $(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||FT(e,i,r)}function B(n,e){return n}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},O=class extends En{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var kt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var bl=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},jg=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ve.UNAUTHENTICATED))}shutdown(){}},Bg=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Ug=class{constructor(e){this.t=e,this.currentUser=Ve.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){$(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new kt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new kt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>R(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{P("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(P("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new kt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(P("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($(typeof r.accessToken=="string",31837,{l:r}),new bl(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return $(e===null||typeof e=="string",2055,{h:e}),new Ve(e)}},$g=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Ve.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},Hg=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new $g(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Ve.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Tl=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},qg=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,mb(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){$(this.o===void 0,3512);let r=o=>{o.error!=null&&P("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,P("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{P("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):P("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Tl(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?($(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Tl(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Hk(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var ua=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=Hk(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function W(n,e){return n<e?-1:n>e?1:0}function zg(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),o=e.charAt(r);if(i!==o)return Mg(i)===Mg(o)?W(i,o):Mg(i)?1:-1}return W(n.length,e.length)}var qk=55296,zk=57343;function Mg(n){let e=n.charCodeAt(0);return e>=qk&&e<=zk}function Do(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function VT(n){return n+"\0"}var bb="__name__",Cl=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&j(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&j(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return W(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):zg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Tn.fromString(e.substring(4,e.length-2))}},pe=class n extends Cl{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new O(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Gk=/^[_a-zA-Z][_a-zA-Z0-9]*$/,He=class n extends Cl{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Gk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===bb}static keyField(){return new n([bb])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new O(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new O(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new O(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new O(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var F=class n{constructor(e){this.path=e}static fromPath(e){return new n(pe.fromString(e))}static fromName(e){return new n(pe.fromString(e).popFirst(5))}static empty(){return new n(pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return pe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new pe(e.slice()))}};function LT(n,e,t){if(!t)throw new O(x.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Wk(n,e,t,r){if(e===!0&&r===!0)throw new O(x.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Tb(n){if(!F.isDocumentKey(n))throw new O(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Cb(n){if(F.isDocumentKey(n))throw new O(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function jT(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Sd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":j(12329,{type:typeof n})}function dt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new O(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Sd(n);throw new O(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Kk(n,e){if(e<=0)throw new O(x.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function Le(n,e){let t={typeString:n};return e&&(t.value=e),t}function Oa(n,e){if(!jT(n))throw new O(x.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new O(x.INVALID_ARGUMENT,t);return!0}var Sb=-62135596800,Ab=1e6,Ce=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Ab);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new O(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new O(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Sb)throw new O(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new O(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ab}_compareTo(e){return this.seconds===e.seconds?W(this.nanoseconds,e.nanoseconds):W(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Oa(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-Sb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Ce._jsonSchemaVersion="firestore/timestamp/1.0",Ce._jsonSchema={type:Le("string",Ce._jsonSchemaVersion),seconds:Le("number"),nanoseconds:Le("number")};var H=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Ce(0,0))}static max(){return new n(new Ce(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var bo=-1,To=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function Gg(n){return n.fields.find(e=>e.kind===2)}function Zr(n){return n.fields.filter(e=>e.kind!==2)}To.UNKNOWN_ID=-1;var vo=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var la=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,Ft.min())}};function BT(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=H.fromTimestamp(r===1e9?new Ce(t+1,0):new Ce(t,r));return new Ft(i,F.empty(),e)}function UT(n){return new Ft(n.readTime,n.key,bo)}var Ft=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(H.min(),F.empty(),bo)}static max(){return new n(H.max(),F.empty(),bo)}};function By(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=F.comparator(n.documentKey,e.documentKey),t!==0?t:W(n.largestBatchId,e.largestBatchId))}var $T="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Sl=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function wr(n){return R(this,null,function*(){if(n.code!==x.FAILED_PRECONDITION||n.message!==$T)throw n;P("LocalStore","Unexpectedly lost primary lease")})}var S=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&j(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(f=>{s[l]=f,++a,a===o&&r(s)},f=>i(f))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var Ct="SimpleDb",Al=class n{static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new ai(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new kt,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new ai(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{let i=Uy(r.target.error);this.S.reject(new ai(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(P(Ct,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new Kg(t)}},Co=class n{static delete(e){return P(Ct,"Removing database:",e),ei(ig().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!il())return!1;if(n.F())return!0;let e=Qr(),t=n.M(e),r=0<t&&t<10,i=HT(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,n.M(Qr())===12.2&&Re("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}L(e){return R(this,null,function*(){return this.db||(P(Ct,"Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new ai(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new O(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new O(x.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new ai(e,s))},i.onupgradeneeded=o=>{P(Ct,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.N.k(s,i.transaction,o.oldVersion,this.version).next(()=>{P(Ct,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db})}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return R(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.L(e);let a=Al.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.C(),l)).catch(l=>(a.abort(l),S.reject(l))).toPromise();return u.catch(()=>{}),yield a.D,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&s<3;if(P(Ct,"Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function HT(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var Wg=class{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return ei(this.U.delete())}},ai=class extends O{constructor(e,t){super(x.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Ir(n){return n.name==="IndexedDbTransactionError"}var Kg=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(P(Ct,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(P(Ct,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ei(r)}add(e){return P(Ct,"ADD",this.store.name,e,e),ei(this.store.add(e))}get(e){return ei(this.store.get(e)).next(t=>(t===void 0&&(t=null),P(Ct,"GET",this.store.name,e,t),t))}delete(e){return P(Ct,"DELETE",this.store.name,e),ei(this.store.delete(e))}count(){return P(Ct,"COUNT",this.store.name),ei(this.store.count())}J(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new S((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.H(o,(a,u)=>{s.push(u)}).next(()=>s)}}Y(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new S((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}Z(e,t){P(Ct,"DELETE ALL",this.store.name);let r=this.options(e,t);r.X=!1;let i=this.cursor(r);return this.H(i,(o,s,a)=>a.delete())}ee(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.H(i,t)}te(e){let t=this.cursor({});return new S((r,i)=>{t.onerror=o=>{let s=Uy(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}H(e,t){let r=[];return new S((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new Wg(a),l=t(a.primaryKey,a.value,u);if(l instanceof S){let f=l.catch(p=>(u.done(),S.reject(p)));r.push(f)}u.isDone?i():u.G===null?a.continue():a.continue(u.G)}}).next(()=>S.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function ei(n){return new S((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=Uy(r.target.error);t(i)}})}var xb=!1;function Uy(n){let e=Co.M(Qr());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new O("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return xb||(xb=!0,setTimeout(()=>{throw r},0)),r}}return n}var ea="IndexBackfiller",Qg=class{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){P(ea,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>R(this,null,function*(){this.task=null;try{let t=yield this.ne.ie();P(ea,`Documents written: ${t}`)}catch(t){Ir(t)?P(ea,"Ignoring IndexedDB error during index backfill: ",t):yield wr(t)}yield this.re(6e4)}))}},Yg=class{constructor(e,t){this.localStore=e,this.persistence=t}ie(e=50){return R(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.se(t,e))})}se(e,t){let r=new Set,i=t,o=!0;return S.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return P(ea,`Processing collection: ${s}`),this.oe(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this._e(i,o)).next(a=>(P(ea,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}_e(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=UT(o);By(s,r)>0&&(r=s)}),new Ft(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var St=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),ci=-1;function Ad(n){return n==null}function da(n){return n===0&&1/n==-1/0}function qT(n){return typeof n=="number"&&Number.isInteger(n)&&!da(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var xl="";function nt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Mb(e)),e=Qk(n.get(t),e);return Mb(e)}function Qk(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case xl:t+="";break;default:t+=o}}return t}function Mb(n){return n+xl+""}function cn(n){let e=n.length;if($(e>=2,64408,{path:n}),e===2)return $(n.charAt(0)===xl&&n.charAt(1)==="",56145,{path:n}),pe.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf(xl,o);switch((s<0||s>t)&&j(50515,{path:n}),n.charAt(s+1)){case"":let a=n.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:j(61167,{path:n})}o=s+2}return new pe(r)}var Xr="remoteDocuments",ka="owner",so="owner",fa="mutationQueues",Yk="userId",Wt="mutations",Nb="batchId",ii="userMutationsIndex",Rb=["userId","batchId"];function ml(n,e){return[n,nt(e)]}function zT(n,e,t){return[n,nt(e),t]}var Jk={},So="documentMutations",Ml="remoteDocumentsV14",Zk=["prefixPath","collectionGroup","readTime","documentId"],yl="documentKeyIndex",Xk=["prefixPath","collectionGroup","documentId"],GT="collectionGroupIndex",eF=["collectionGroup","readTime","prefixPath","documentId"],ha="remoteDocumentGlobal",Jg="remoteDocumentGlobalKey",Ao="targets",WT="queryTargetsIndex",tF=["canonicalId","targetId"],xo="targetDocuments",nF=["targetId","path"],$y="documentTargetsIndex",rF=["path","targetId"],Nl="targetGlobalKey",ui="targetGlobal",pa="collectionParents",iF=["collectionId","parent"],Mo="clientMetadata",oF="clientId",xd="bundles",sF="bundleId",Md="namedQueries",aF="name",Hy="indexConfiguration",cF="indexId",Zg="collectionGroupIndex",uF="collectionGroup",ta="indexState",lF=["indexId","uid"],KT="sequenceNumberIndex",dF=["uid","sequenceNumber"],na="indexEntries",fF=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],QT="documentKeyIndex",hF=["indexId","uid","orderedDocumentKey"],Nd="documentOverlays",pF=["userId","collectionPath","documentId"],Xg="collectionPathOverlayIndex",gF=["userId","collectionPath","largestBatchId"],YT="collectionGroupOverlayIndex",mF=["userId","collectionGroup","largestBatchId"],qy="globals",yF="name",JT=[fa,Wt,So,Xr,Ao,ka,ui,xo,Mo,ha,pa,xd,Md],_F=[...JT,Nd],ZT=[fa,Wt,So,Ml,Ao,ka,ui,xo,Mo,ha,pa,xd,Md,Nd],XT=ZT,zy=[...XT,Hy,ta,na],vF=zy,e0=[...zy,qy],wF=e0;var ga=class extends Sl{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}};function ze(n,e){let t=B(n);return Co.O(t.le,e)}function Pb(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Er(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function t0(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var be=class n{constructor(e,t){this.comparator=e,this.root=t||ln.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ln.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ln.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _o(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _o(this.root,e,this.comparator,!1)}getReverseIterator(){return new _o(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _o(this.root,e,this.comparator,!0)}},_o=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ln=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw j(43730,{key:this.key,value:this.value});if(this.right.isRed())throw j(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw j(27949);return e+(this.isRed()?0:1)}};ln.EMPTY=null,ln.RED=!0,ln.BLACK=!1;ln.EMPTY=new class{constructor(){this.size=0}get key(){throw j(57766)}get value(){throw j(16141)}get color(){throw j(16727)}get left(){throw j(29726)}get right(){throw j(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new ln(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ye=class n{constructor(e){this.comparator=e,this.data=new be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Rl(this.data.getIterator())}getIteratorFrom(e){return new Rl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Rl=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function ao(n){return n.hasNext()?n.getNext():void 0}var At=class n{constructor(e){this.fields=e,e.sort(He.comparator)}static empty(){return new n([])}unionWith(e){let t=new ye(He.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Do(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Pl=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var je=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Pl("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return W(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};je.EMPTY_BYTE_STRING=new je("");var IF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function An(n){if($(!!n,39018),typeof n=="string"){let e=0,t=IF.exec(n);if($(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Te(n.seconds),nanos:Te(n.nanos)}}function Te(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function xn(n){return typeof n=="string"?je.fromBase64String(n):je.fromUint8Array(n)}var n0="server_timestamp",r0="__type__",i0="__previous_value__",o0="__local_write_time__";function Gy(n){return(n?.mapValue?.fields||{})[r0]?.stringValue===n0}function Rd(n){let e=n.mapValue.fields[i0];return Gy(e)?Rd(e):e}function ma(n){let e=An(n.mapValue.fields[o0].timestampValue);return new Ce(e.seconds,e.nanos)}var em=class{constructor(e,t,r,i,o,s,a,u,l,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=f}},ya="(default)",No=class n{constructor(e,t){this.projectId=e,this.database=t||ya}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===ya}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Wy="__type__",s0="__max__",ar={mapValue:{fields:{__type__:{stringValue:s0}}}},Ky="__vector__",Ro="value",_l={nullValue:"NULL_VALUE"};function fr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Gy(n)?4:a0(n)?9007199254740991:Pd(n)?10:11:j(28295,{value:n})}function dn(n,e){if(n===e)return!0;let t=fr(n);if(t!==fr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ma(n).isEqual(ma(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=An(i.timestampValue),a=An(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return xn(i.bytesValue).isEqual(xn(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Te(i.geoPointValue.latitude)===Te(o.geoPointValue.latitude)&&Te(i.geoPointValue.longitude)===Te(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Te(i.integerValue)===Te(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Te(i.doubleValue),a=Te(o.doubleValue);return s===a?da(s)===da(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Do(n.arrayValue.values||[],e.arrayValue.values||[],dn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(Pb(s)!==Pb(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!dn(s[u],a[u])))return!1;return!0}(n,e);default:return j(52216,{left:n})}}function _a(n,e){return(n.values||[]).find(t=>dn(t,e))!==void 0}function hr(n,e){if(n===e)return 0;let t=fr(n),r=fr(e);if(t!==r)return W(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return W(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Te(o.integerValue||o.doubleValue),u=Te(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return Ob(n.timestampValue,e.timestampValue);case 4:return Ob(ma(n),ma(e));case 5:return zg(n.stringValue,e.stringValue);case 6:return function(o,s){let a=xn(o),u=xn(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let f=W(a[l],u[l]);if(f!==0)return f}return W(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=W(Te(o.latitude),Te(s.latitude));return a!==0?a:W(Te(o.longitude),Te(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return kb(n.arrayValue,e.arrayValue);case 10:return function(o,s){let a=o.fields||{},u=s.fields||{},l=a[Ro]?.arrayValue,f=u[Ro]?.arrayValue,p=W(l?.values?.length||0,f?.values?.length||0);return p!==0?p:kb(l,f)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===ar.mapValue&&s===ar.mapValue)return 0;if(o===ar.mapValue)return 1;if(s===ar.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},f=Object.keys(l);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){let m=zg(u[p],f[p]);if(m!==0)return m;let y=hr(a[u[p]],l[f[p]]);if(y!==0)return y}return W(u.length,f.length)}(n.mapValue,e.mapValue);default:throw j(23264,{he:t})}}function Ob(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return W(n,e);let t=An(n),r=An(e),i=W(t.seconds,r.seconds);return i!==0?i:W(t.nanos,r.nanos)}function kb(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=hr(t[i],r[i]);if(o)return o}return W(t.length,r.length)}function Po(n){return tm(n)}function tm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=An(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return xn(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return F.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=tm(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${tm(t.fields[s])}`;return i+"}"}(n.mapValue):j(61005,{value:n})}function vl(n){switch(fr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Rd(n);return e?16+vl(e):16;case 5:return 2*n.stringValue.length;case 6:return xn(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+vl(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Er(r.fields,(o,s)=>{i+=o.length+vl(s)}),i}(n.mapValue);default:throw j(13486,{value:n})}}function va(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function nm(n){return!!n&&"integerValue"in n}function wa(n){return!!n&&"arrayValue"in n}function Fb(n){return!!n&&"nullValue"in n}function Vb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function wl(n){return!!n&&"mapValue"in n}function Pd(n){return(n?.mapValue?.fields||{})[Wy]?.stringValue===Ky}function ra(n){if(n.geoPointValue)return{geoPointValue:re({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:re({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Er(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ra(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ra(n.arrayValue.values[t]);return e}return re({},n)}function a0(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===s0}var c0={mapValue:{fields:{[Wy]:{stringValue:Ky},[Ro]:{arrayValue:{}}}}};function EF(n){return"nullValue"in n?_l:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?va(No.empty(),F.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Pd(n)?c0:{mapValue:{}}:j(35942,{value:n})}function DF(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?va(No.empty(),F.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?c0:"mapValue"in n?Pd(n)?{mapValue:{}}:ar:j(61959,{value:n})}function Lb(n,e){let t=hr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function jb(n,e){let t=hr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var lt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!wl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ra(t)}setAll(e){let t=He.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=ra(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());wl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return dn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];wl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Er(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(ra(this.value))}};function u0(n){let e=[];return Er(n.fields,(t,r)=>{let i=new He([t]);if(wl(r)){let o=u0(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new At(e)}var Je=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,H.min(),H.min(),H.min(),lt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,H.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,H.min(),H.min(),lt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,H.min(),H.min(),lt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(H.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=lt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=lt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=H.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var pr=class{constructor(e,t){this.position=e,this.inclusive=t}};function Bb(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=F.comparator(F.fromName(s.referenceValue),t.key):r=hr(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ub(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!dn(n.position[t],e.position[t]))return!1;return!0}var pi=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function bF(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Ol=class{},ie=class n extends Ol{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new om(e,t,r):t==="array-contains"?new cm(e,r):t==="in"?new kl(e,r):t==="not-in"?new um(e,r):t==="array-contains-any"?new lm(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new sm(e,r):new am(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(hr(t,this.value)):t!==null&&fr(this.value)===fr(t)&&this.matchesComparison(hr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return j(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ge=class n extends Ol{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return Oo(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function Oo(n){return n.op==="and"}function rm(n){return n.op==="or"}function Qy(n){return l0(n)&&Oo(n)}function l0(n){for(let e of n.filters)if(e instanceof ge)return!1;return!0}function im(n){if(n instanceof ie)return n.field.canonicalString()+n.op.toString()+Po(n.value);if(Qy(n))return n.filters.map(e=>im(e)).join(",");{let e=n.filters.map(t=>im(t)).join(",");return`${n.op}(${e})`}}function d0(n,e){return n instanceof ie?function(r,i){return i instanceof ie&&r.op===i.op&&r.field.isEqual(i.field)&&dn(r.value,i.value)}(n,e):n instanceof ge?function(r,i){return i instanceof ge&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&d0(s,i.filters[a]),!0):!1}(n,e):void j(19439)}function f0(n,e){let t=n.filters.concat(e);return ge.create(t,n.op)}function h0(n){return n instanceof ie?function(t){return`${t.field.canonicalString()} ${t.op} ${Po(t.value)}`}(n):n instanceof ge?function(t){return t.op.toString()+" {"+t.getFilters().map(h0).join(" ,")+"}"}(n):"Filter"}var om=class extends ie{constructor(e,t,r){super(e,t,r),this.key=F.fromName(r.referenceValue)}matches(e){let t=F.comparator(e.key,this.key);return this.matchesComparison(t)}},sm=class extends ie{constructor(e,t){super(e,"in",t),this.keys=p0("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},am=class extends ie{constructor(e,t){super(e,"not-in",t),this.keys=p0("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function p0(n,e){return(e.arrayValue?.values||[]).map(t=>F.fromName(t.referenceValue))}var cm=class extends ie{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return wa(t)&&_a(t.arrayValue,this.value)}},kl=class extends ie{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&_a(this.value.arrayValue,t)}},um=class extends ie{constructor(e,t){super(e,"not-in",t)}matches(e){if(_a(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!_a(this.value.arrayValue,t)}},lm=class extends ie{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!wa(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>_a(this.value.arrayValue,r))}};var dm=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Te=null}};function fm(n,e=null,t=[],r=[],i=null,o=null,s=null){return new dm(n,e,t,r,i,o,s)}function gi(n){let e=B(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>im(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Ad(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Po(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Po(r)).join(",")),e.Te=t}return e.Te}function Fa(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!bF(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!d0(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Ub(n.startAt,e.startAt)&&Ub(n.endAt,e.endAt)}function Fl(n){return F.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Vl(n,e){return n.filters.filter(t=>t instanceof ie&&t.field.isEqual(e))}function $b(n,e,t){let r=_l,i=!0;for(let o of Vl(n,e)){let s=_l,a=!0;switch(o.op){case"<":case"<=":s=EF(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=_l}Lb({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];Lb({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function Hb(n,e,t){let r=ar,i=!0;for(let o of Vl(n,e)){let s=ar,a=!0;switch(o.op){case">=":case">":s=DF(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=ar}jb({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];jb({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var gr=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function g0(n,e,t,r,i,o,s,a){return new gr(n,e,t,r,i,o,s,a)}function Va(n){return new gr(n)}function qb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function m0(n){return n.collectionGroup!==null}function ia(n){let e=B(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new ye(He.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new pi(o,r))}),t.has(He.keyField().canonicalString())||e.Ie.push(new pi(He.keyField(),r))}return e.Ie}function Mt(n){let e=B(n);return e.Ee||(e.Ee=TF(e,ia(n))),e.Ee}function TF(n,e){if(n.limitType==="F")return fm(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new pi(i.field,o)});let t=n.endAt?new pr(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new pr(n.startAt.position,n.startAt.inclusive):null;return fm(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function hm(n,e){let t=n.filters.concat([e]);return new gr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ll(n,e,t){return new gr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Od(n,e){return Fa(Mt(n),Mt(e))&&n.limitType===e.limitType}function y0(n){return`${gi(Mt(n))}|lt:${n.limitType}`}function po(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>h0(i)).join(", ")}]`),Ad(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Po(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Po(i)).join(",")),`Target(${r})`}(Mt(n))}; limitType=${n.limitType})`}function La(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):F.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of ia(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=Bb(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,ia(r),i)||r.endAt&&!function(s,a,u){let l=Bb(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,ia(r),i))}(n,e)}function _0(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function v0(n){return(e,t)=>{let r=!1;for(let i of ia(n)){let o=CF(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function CF(n,e,t){let r=n.field.isKeyField()?F.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?hr(u,l):j(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return j(19790,{direction:n.dir})}}var Kt=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Er(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return t0(this.inner)}size(){return this.innerSize}};var SF=new be(F.comparator);function xt(){return SF}var w0=new be(F.comparator);function Zs(...n){let e=w0;for(let t of n)e=e.insert(t.key,t);return e}function I0(n){let e=w0;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function un(){return oa()}function E0(){return oa()}function oa(){return new Kt(n=>n.toString(),(n,e)=>n.isEqual(e))}var AF=new be(F.comparator),xF=new ye(F.comparator);function te(...n){let e=xF;for(let t of n)e=e.add(t);return e}var MF=new ye(W);function Yy(){return MF}function Jy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:da(e)?"-0":e}}function D0(n){return{integerValue:""+n}}function NF(n,e){return qT(e)?D0(e):Jy(n,e)}var ko=class{constructor(){this._=void 0}};function RF(n,e,t){return n instanceof mi?function(i,o){let s={fields:{[r0]:{stringValue:n0},[o0]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Gy(o)&&(o=Rd(o)),o&&(s.fields[i0]=o),{mapValue:s}}(t,e):n instanceof Mn?T0(n,e):n instanceof mr?C0(n,e):function(i,o){let s=b0(i,o),a=zb(s)+zb(i.Ae);return nm(s)&&nm(i.Ae)?D0(a):Jy(i.serializer,a)}(n,e)}function PF(n,e,t){return n instanceof Mn?T0(n,e):n instanceof mr?C0(n,e):t}function b0(n,e){return n instanceof yi?function(r){return nm(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var mi=class extends ko{},Mn=class extends ko{constructor(e){super(),this.elements=e}};function T0(n,e){let t=S0(e);for(let r of n.elements)t.some(i=>dn(i,r))||t.push(r);return{arrayValue:{values:t}}}var mr=class extends ko{constructor(e){super(),this.elements=e}};function C0(n,e){let t=S0(e);for(let r of n.elements)t=t.filter(i=>!dn(i,r));return{arrayValue:{values:t}}}var yi=class extends ko{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function zb(n){return Te(n.integerValue||n.doubleValue)}function S0(n){return wa(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var jl=class{constructor(e,t){this.field=e,this.transform=t}};function OF(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Mn&&i instanceof Mn||r instanceof mr&&i instanceof mr?Do(r.elements,i.elements,dn):r instanceof yi&&i instanceof yi?dn(r.Ae,i.Ae):r instanceof mi&&i instanceof mi}(n.transform,e.transform)}var pm=class{constructor(e,t){this.version=e,this.transformResults=t}},Ye=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Il(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Fo=class{};function A0(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new _i(n.key,Ye.none()):new yr(n.key,n.data,Ye.none());{let t=n.data,r=lt.empty(),i=new ye(He.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Qt(n.key,r,new At(i.toArray()),Ye.none())}}function kF(n,e,t){n instanceof yr?function(i,o,s){let a=i.value.clone(),u=Wb(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Qt?function(i,o,s){if(!Il(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=Wb(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(x0(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function sa(n,e,t,r){return n instanceof yr?function(o,s,a,u){if(!Il(o.precondition,s))return a;let l=o.value.clone(),f=Kb(o.fieldTransforms,u,s);return l.setAll(f),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Qt?function(o,s,a,u){if(!Il(o.precondition,s))return a;let l=Kb(o.fieldTransforms,u,s),f=s.data;return f.setAll(x0(o)),f.setAll(l),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return Il(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function FF(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=b0(r.transform,i||null);o!=null&&(t===null&&(t=lt.empty()),t.set(r.field,o))}return t||null}function Gb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Do(r,i,(o,s)=>OF(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var yr=class extends Fo{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Qt=class extends Fo{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function x0(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function Wb(n,e,t){let r=new Map;$(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,PF(s,a,t[i]))}return r}function Kb(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,RF(o,s,e))}return r}var _i=class extends Fo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Bl=class extends Fo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Ia=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&kF(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=sa(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=sa(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=E0();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=A0(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(H.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),te())}isEqual(e){return this.batchId===e.batchId&&Do(this.mutations,e.mutations,(t,r)=>Gb(t,r))&&Do(this.baseMutations,e.baseMutations,(t,r)=>Gb(t,r))}},gm=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){$(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return AF}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Ea=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var mm=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var ke,ae;function VF(n){switch(n){case x.OK:return j(64938);case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0;default:return j(15467,{code:n})}}function M0(n){if(n===void 0)return Re("GRPC error has no .code"),x.UNKNOWN;switch(n){case ke.OK:return x.OK;case ke.CANCELLED:return x.CANCELLED;case ke.UNKNOWN:return x.UNKNOWN;case ke.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case ke.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case ke.INTERNAL:return x.INTERNAL;case ke.UNAVAILABLE:return x.UNAVAILABLE;case ke.UNAUTHENTICATED:return x.UNAUTHENTICATED;case ke.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case ke.NOT_FOUND:return x.NOT_FOUND;case ke.ALREADY_EXISTS:return x.ALREADY_EXISTS;case ke.PERMISSION_DENIED:return x.PERMISSION_DENIED;case ke.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case ke.ABORTED:return x.ABORTED;case ke.OUT_OF_RANGE:return x.OUT_OF_RANGE;case ke.UNIMPLEMENTED:return x.UNIMPLEMENTED;case ke.DATA_LOSS:return x.DATA_LOSS;default:return j(39323,{code:n})}}(ae=ke||(ke={}))[ae.OK=0]="OK",ae[ae.CANCELLED=1]="CANCELLED",ae[ae.UNKNOWN=2]="UNKNOWN",ae[ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ae[ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ae[ae.NOT_FOUND=5]="NOT_FOUND",ae[ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",ae[ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",ae[ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",ae[ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ae[ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ae[ae.ABORTED=10]="ABORTED",ae[ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",ae[ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",ae[ae.INTERNAL=13]="INTERNAL",ae[ae.UNAVAILABLE=14]="UNAVAILABLE",ae[ae.DATA_LOSS=15]="DATA_LOSS";var LF=null;function jF(){return new TextEncoder}var BF=new Tn([4294967295,4294967295],0);function Qb(n){let e=jF().encode(n),t=new bg;return t.update(e),new Uint8Array(t.digest())}function Yb(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Tn([t,r],0),new Tn([i,o],0)]}var ym=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new oi(`Invalid padding: ${t}`);if(r<0)throw new oi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new oi(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new oi(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Tn.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Tn.fromNumber(r)));return i.compare(BF)===1&&(i=new Tn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=Qb(e),[r,i]=Yb(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.ge===0)return;let t=Qb(e),[r,i]=Yb(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.Se(s)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},oi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Da=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,ba.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(H.min(),i,new be(W),xt(),te())}},ba=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,te(),te(),te())}};var wo=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},Ul=class{constructor(e,t){this.targetId=e,this.Ce=t}},$l=class{constructor(e,t,r=je.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Hl=class{constructor(){this.ve=0,this.Fe=Jb(),this.Me=je.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=te(),t=te(),r=te();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:j(38017,{changeType:o})}}),new ba(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=Jb()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,$(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},_m=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=xt(),this.Je=dl(),this.He=dl(),this.Ye=new be(W)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:j(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let o=i.target;if(Fl(o))if(r===0){let s=new F(o.path);this.et(t,s,Je.newNoDocument(s,H.min()))}else $(r===1,20013,{expectedCount:r});else{let s=this._t(t);if(s!==r){let a=this.ut(e),u=a?this.ct(a,e,s):1;if(u!==0){this.it(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,l)}LF?.lt(function(f,p,m,y,T){let M={localCacheCount:f,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},N=p.unchangedNames;return N&&(M.bloomFilter={applied:T===0,hashCount:N?.hashCount??0,bitmapLength:N?.bits?.bitmap?.length??0,padding:N?.bits?.padding??0,mightContain:V=>y?.mightContain(V)??!1}),M}(s,e.Ce,this.Ge.ht(),a,u))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=xn(r).toUint8Array()}catch(u){if(u instanceof Pl)return Eo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new ym(s,i,o)}catch(u){return Eo(u instanceof oi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Ge.ht(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.et(t,o,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((o,s)=>{let a=this.ot(s);if(a){if(o.current&&Fl(a.target)){let u=new F(a.target.path);this.It(u).has(s)||this.Et(s,u)||this.et(s,u,Je.newNoDocument(u,e))}o.Be&&(t.set(s,o.ke()),o.qe())}});let r=te();this.He.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.ot(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new Da(e,t,this.Ye,this.je,r);return this.je=xt(),this.Je=dl(),this.He=dl(),this.Ye=new be(W),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Hl,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new ye(W),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new ye(W),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||P("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Hl),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function dl(){return new be(F.comparator)}function Jb(){return new be(F.comparator)}var UF={asc:"ASCENDING",desc:"DESCENDING"},$F={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},HF={and:"AND",or:"OR"},vm=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function wm(n,e){return n.useProto3Json||Ad(e)?e:{value:e}}function Vo(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function N0(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function qF(n,e){return Vo(n,e.toTimestamp())}function ft(n){return $(!!n,49232),H.fromTimestamp(function(t){let r=An(t);return new Ce(r.seconds,r.nanos)}(n))}function Zy(n,e){return Im(n,e).canonicalString()}function Im(n,e){let t=function(i){return new pe(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function R0(n){let e=pe.fromString(n);return $(U0(e),10190,{key:e.toString()}),e}function ql(n,e){return Zy(n.databaseId,e.path)}function li(n,e){let t=R0(e);if(t.get(1)!==n.databaseId.projectId)throw new O(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new O(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new F(k0(t))}function P0(n,e){return Zy(n.databaseId,e)}function O0(n){let e=R0(n);return e.length===4?pe.emptyPath():k0(e)}function Em(n){return new pe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function k0(n){return $(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Zb(n,e,t){return{name:ql(n,e),fields:t.value.mapValue.fields}}function zF(n,e,t){let r=li(n,e.name),i=ft(e.updateTime),o=e.createTime?ft(e.createTime):H.min(),s=new lt({mapValue:{fields:e.fields}}),a=Je.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function GF(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:j(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,f){return l.useProto3Json?($(f===void 0||typeof f=="string",58123),je.fromBase64String(f||"")):($(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),je.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let f=l.code===void 0?x.UNKNOWN:M0(l.code);return new O(f,l.message||"")}(s);t=new $l(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=li(n,r.document.name),o=ft(r.document.updateTime),s=r.document.createTime?ft(r.document.createTime):H.min(),a=new lt({mapValue:{fields:r.document.fields}}),u=Je.newFoundDocument(i,o,s,a),l=r.targetIds||[],f=r.removedTargetIds||[];t=new wo(l,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=li(n,r.document),o=r.readTime?ft(r.readTime):H.min(),s=Je.newNoDocument(i,o),a=r.removedTargetIds||[];t=new wo([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=li(n,r.document),o=r.removedTargetIds||[];t=new wo([],o,i,null)}else{if(!("filter"in e))return j(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new mm(i,o),a=r.targetId;t=new Ul(a,s)}}return t}function zl(n,e){let t;if(e instanceof yr)t={update:Zb(n,e.key,e.value)};else if(e instanceof _i)t={delete:ql(n,e.key)};else if(e instanceof Qt)t={update:Zb(n,e.key,e.data),updateMask:ZF(e.fieldMask)};else{if(!(e instanceof Bl))return j(16599,{Vt:e.type});t={verify:ql(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof mi)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Mn)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof mr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof yi)return{fieldPath:s.field.canonicalString(),increment:a.Ae};throw j(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:qF(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:j(27497)}(n,e.precondition)),t}function Dm(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?Ye.updateTime(ft(o.updateTime)):o.exists!==void 0?Ye.exists(o.exists):Ye.none()}(e.currentDocument):Ye.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)$(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),u=new mi;else if("appendMissingElements"in a){let f=a.appendMissingElements.values||[];u=new Mn(f)}else if("removeAllFromArray"in a){let f=a.removeAllFromArray.values||[];u=new mr(f)}else"increment"in a?u=new yi(s,a.increment):j(16584,{proto:a});let l=He.fromServerFormat(a.fieldPath);return new jl(l,u)}(n,i)):[];if(e.update){e.update.name;let i=li(n,e.update.name),o=new lt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let l=u.fieldPaths||[];return new At(l.map(f=>He.fromServerFormat(f)))}(e.updateMask);return new Qt(i,o,s,t,r)}return new yr(i,o,t,r)}if(e.delete){let i=li(n,e.delete);return new _i(i,t)}if(e.verify){let i=li(n,e.verify);return new Bl(i,t)}return j(1463,{proto:e})}function WF(n,e){return n&&n.length>0?($(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?ft(i.updateTime):ft(o);return s.isEqual(H.min())&&(s=ft(o)),new pm(s,i.transformResults||[])}(t,e))):[]}function F0(n,e){return{documents:[P0(n,e.path)]}}function V0(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=P0(n,i);let o=function(l){if(l.length!==0)return B0(ge.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(f=>function(m){return{field:go(m.field),direction:QF(m.dir)}}(f))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=wm(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ft:t,parent:i}}function L0(n){let e=O0(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){$(r===1,65062);let f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];t.where&&(o=function(p){let m=j0(p);return m instanceof ge&&Qy(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(T){return new pi(mo(T.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Ad(m)?null:m}(t.limit));let u=null;t.startAt&&(u=function(p){let m=!!p.before,y=p.values||[];return new pr(y,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new pr(y,m)}(t.endAt)),g0(e,i,s,o,a,"F",u,l)}function KF(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return j(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function j0(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=mo(t.unaryFilter.field);return ie.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=mo(t.unaryFilter.field);return ie.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=mo(t.unaryFilter.field);return ie.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=mo(t.unaryFilter.field);return ie.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return j(61313);default:return j(60726)}}(n):n.fieldFilter!==void 0?function(t){return ie.create(mo(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return j(58110);default:return j(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ge.create(t.compositeFilter.filters.map(r=>j0(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return j(1026)}}(t.compositeFilter.op))}(n):j(30097,{filter:n})}function QF(n){return UF[n]}function YF(n){return $F[n]}function JF(n){return HF[n]}function go(n){return{fieldPath:n.canonicalString()}}function mo(n){return He.fromServerFormat(n.fieldPath)}function B0(n){return n instanceof ie?function(t){if(t.op==="=="){if(Vb(t.value))return{unaryFilter:{field:go(t.field),op:"IS_NAN"}};if(Fb(t.value))return{unaryFilter:{field:go(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Vb(t.value))return{unaryFilter:{field:go(t.field),op:"IS_NOT_NAN"}};if(Fb(t.value))return{unaryFilter:{field:go(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:go(t.field),op:YF(t.op),value:t.value}}}(n):n instanceof ge?function(t){let r=t.getFilters().map(i=>B0(i));return r.length===1?r[0]:{compositeFilter:{op:JF(t.op),filters:r}}}(n):j(54877,{filter:n})}function ZF(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function U0(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Lo=class n{constructor(e,t,r,i,o=H.min(),s=H.min(),a=je.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Gl=class{constructor(e){this.yt=e}};function XF(n,e){let t;if(e.document)t=zF(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=F.fromSegments(e.noDocument.path),i=wi(e.noDocument.readTime);t=Je.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return j(56709);{let r=F.fromSegments(e.unknownDocument.path),i=wi(e.unknownDocument.version);t=Je.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new Ce(i[0],i[1]);return H.fromTimestamp(o)}(e.readTime)),t}function Xb(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Wl(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:ql(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Vo(o,s.version.toTimestamp()),createTime:Vo(o,s.createTime.toTimestamp())}}(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:vi(e.version)};else{if(!e.isUnknownDocument())return j(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:vi(e.version)}}return r}function Wl(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function vi(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function wi(n){let e=new Ce(n.seconds,n.nanoseconds);return H.fromTimestamp(e)}function ti(n,e){let t=(e.baseMutations||[]).map(o=>Dm(n.yt,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>Dm(n.yt,o)),i=Ce.fromMillis(e.localWriteTimeMs);return new Ia(e.batchId,i,t,r)}function Xs(n){let e=wi(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?wi(n.lastLimboFreeSnapshotVersion):H.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){let s=o.documents.length;return $(s===1,1966,{count:s}),Mt(Va(O0(o.documents[0])))}(n.query):function(o){return Mt(L0(o))}(n.query),new Lo(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,je.fromBase64String(n.resumeToken))}function $0(n,e){let t=vi(e.snapshotVersion),r=vi(e.lastLimboFreeSnapshotVersion),i;i=Fl(e.target)?F0(n.yt,e.target):V0(n.yt,e.target).ft;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:gi(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function H0(n){let e=L0({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ll(e,e.limit,"L"):e}function Ng(n,e){return new Ea(e.largestBatchId,Dm(n.yt,e.overlayMutation))}function eT(n,e){let t=e.path.lastSegment();return[n,nt(e.path.popLast()),t]}function tT(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:vi(r.readTime),documentKey:nt(r.documentKey.path),largestBatchId:r.largestBatchId}}var bm=class{getBundleMetadata(e,t){return nT(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:wi(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return nT(e).put(function(i){return{bundleId:i.id,createTime:vi(ft(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return rT(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:H0(o.bundledQuery),readTime:wi(o.readTime)}}(r)})}saveNamedQuery(e,t){return rT(e).put(function(i){return{name:i.name,readTime:vi(ft(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function nT(n){return ze(n,xd)}function rT(n){return ze(n,Md)}var Kl=class n{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return Ks(e).get(eT(this.userId,t)).next(r=>r?Ng(this.serializer,r):null)}getOverlays(e,t){let r=un();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new Ea(t,s);i.push(this.St(e,a))}),S.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(nt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Ks(e).Z(Xg,a))}),S.waitFor(o)}getOverlaysForCollection(e,t,r){let i=un(),o=nt(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Ks(e).J(Xg,s).next(a=>{for(let u of a){let l=Ng(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=un(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ks(e).ee({index:YT,range:a},(u,l,f)=>{let p=Ng(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):f.done()}).next(()=>o)}St(e,t){return Ks(e).put(function(i,o,s){let[a,u,l]=eT(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:zl(i.yt,s.mutation)}}(this.serializer,this.userId,t))}};function Ks(n){return ze(n,Nd)}var Tm=class{bt(e){return ze(e,qy)}getSessionToken(e){return this.bt(e).get("sessionToken").next(t=>{let r=t?.value;return r?je.fromUint8Array(r):je.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var Sn=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Te(e.integerValue));else if("doubleValue"in e){let r=Te(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),da(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=An(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(xn(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?a0(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Pd(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):j(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=Ro,o=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Te(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),F.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};Sn.Kt=new Sn;var co=255;function eV(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function iT(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=eV(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var Cm=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{let i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{let i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){let t=this.en(e),r=iT(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){let t=this.en(e),r=iT(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(co),this.sn(255)}_n(){this.an(co),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Gt(e){let t=255&e;t===0?(this.sn(0),this.sn(255)):t===co?(this.sn(co),this.sn(0)):this.sn(t)}Jt(e){let t=255&e;t===0?(this.an(0),this.an(255)):t===co?(this.an(co),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},Sm=class{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}},Am=class{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}},ni=class{constructor(){this.cn=new Cm,this.ln=new Sm(this.cn),this.hn=new Am(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}};var ri=class n{constructor(e,t,r,i){this.Tn=e,this.In=t,this.En=r,this.dn=i}An(){let e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new n(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:El(this.En),directionalValue:El(this.dn),orderedDocumentKey:El(t),documentKey:r.path.toArray()}}Vn(e,t,r){let i=this.Rn(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}};function rr(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=oT(n.En,e.En),t!==0?t:(t=oT(n.dn,e.dn),t!==0?t:F.comparator(n.In,e.In)))}function oT(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function El(n){return cg()?function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r}(n):n}function sT(n){return typeof n!="string"?n:function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(n)}var Ql=class{constructor(e){this.mn=new ye((t,r)=>He.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(let t of e.filters){let r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if($(e.collectionGroup===this.collectionId,49279),this.pn)return!1;let t=Gg(e);if(t!==void 0&&!this.wn(t))return!1;let r=Zr(e),i=new Set,o=0,s=0;for(;o<r.length&&this.wn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.mn.size>0){let a=this.mn.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.Sn(a,u)||!this.bn(this.fn[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.fn.length||!this.bn(this.fn[s++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new ye(He.comparator),t=[];for(let r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new vo(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new vo(r.field,0))}for(let r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new vo(r.field,r.dir==="asc"?0:1)));return new To(To.UNKNOWN_ID,this.collectionId,t,la.empty())}wn(e){for(let t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function q0(n){if($(n instanceof ie||n instanceof ge,20012),n instanceof ie){if(n instanceof kl){let t=n.value.arrayValue?.values?.map(r=>ie.create(n.field,"==",r))||[];return ge.create(t,"or")}return n}let e=n.filters.map(t=>q0(t));return ge.create(e,n.op)}function tV(n){if(n.getFilters().length===0)return[];let e=Nm(q0(n));return $(z0(e),7391),xm(e)||Mm(e)?[e]:e.getFilters()}function xm(n){return n instanceof ie}function Mm(n){return n instanceof ge&&Qy(n)}function z0(n){return xm(n)||Mm(n)||function(t){if(t instanceof ge&&rm(t)){for(let r of t.getFilters())if(!xm(r)&&!Mm(r))return!1;return!0}return!1}(n)}function Nm(n){if($(n instanceof ie||n instanceof ge,34018),n instanceof ie)return n;if(n.filters.length===1)return Nm(n.filters[0]);let e=n.filters.map(r=>Nm(r)),t=ge.create(e,n.op);return t=Yl(t),z0(t)?t:($(t instanceof ge,64498),$(Oo(t),40251),$(t.filters.length>1,57927),t.filters.reduce((r,i)=>Xy(r,i)))}function Xy(n,e){let t;return $(n instanceof ie||n instanceof ge,38388),$(e instanceof ie||e instanceof ge,25473),t=n instanceof ie?e instanceof ie?function(i,o){return ge.create([i,o],"and")}(n,e):aT(n,e):e instanceof ie?aT(e,n):function(i,o){if($(i.filters.length>0&&o.filters.length>0,48005),Oo(i)&&Oo(o))return f0(i,o.getFilters());let s=rm(i)?i:o,a=rm(i)?o:i,u=s.filters.map(l=>Xy(l,a));return ge.create(u,"or")}(n,e),Yl(t)}function aT(n,e){if(Oo(e))return f0(e,n.getFilters());{let t=e.filters.map(r=>Xy(n,r));return ge.create(t,"or")}}function Yl(n){if($(n instanceof ie||n instanceof ge,11850),n instanceof ie)return n;let e=n.getFilters();if(e.length===1)return Yl(e[0]);if(l0(n))return n;let t=e.map(i=>Yl(i)),r=[];return t.forEach(i=>{i instanceof ie?r.push(i):i instanceof ge&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:ge.create(r,n.op)}var Rm=class{constructor(){this.Cn=new Ta}addToCollectionParentIndex(e,t){return this.Cn.add(t),S.resolve()}getCollectionParents(e,t){return S.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return S.resolve()}deleteFieldIndex(e,t){return S.resolve()}deleteAllFieldIndexes(e){return S.resolve()}createTargetIndexes(e,t){return S.resolve()}getDocumentsMatchingTarget(e,t){return S.resolve(null)}getIndexType(e,t){return S.resolve(0)}getFieldIndexes(e,t){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,t){return S.resolve(Ft.min())}getMinOffsetFromCollectionGroup(e,t){return S.resolve(Ft.min())}updateCollectionGroup(e,t,r){return S.resolve()}updateIndexEntries(e,t){return S.resolve()}},Ta=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ye(pe.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ye(pe.comparator)).toArray()}};var cT="IndexedDbIndexManager",fl=new Uint8Array(0),Pm=class{constructor(e,t){this.databaseId=t,this.vn=new Ta,this.Fn=new Kt(r=>gi(r),(r,i)=>Fa(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.vn.add(t)});let o={collectionId:r,parent:nt(i)};return uT(e).put(o)}return S.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[VT(t),""],!1,!0);return uT(e).J(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(cn(s.parent))}return r})}addFieldIndex(e,t){let r=Qs(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=lo(e);return o.next(a=>{s.put(tT(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=Qs(e),i=lo(e),o=uo(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=Qs(e),r=uo(e),i=lo(e);return t.Z().next(()=>r.Z()).next(()=>i.Z())}createTargetIndexes(e,t){return S.forEach(this.Mn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new Ql(r).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=uo(e),i=!0,o=new Map;return S.forEach(this.Mn(t),s=>this.xn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=te(),a=[];return S.forEach(o,(u,l)=>{P(cT,`Using index ${function(L){return`id=${L.indexId}|cg=${L.collectionGroup}|f=${L.fields.map(Q=>`${Q.fieldPath}:${Q.kind}`).join(",")}`}(u)} to execute ${gi(t)}`);let f=function(L,Q){let J=Gg(Q);if(J===void 0)return null;for(let G of Vl(L,J.fieldPath))switch(G.op){case"array-contains-any":return G.value.arrayValue.values||[];case"array-contains":return[G.value]}return null}(l,u),p=function(L,Q){let J=new Map;for(let G of Zr(Q))for(let I of Vl(L,G.fieldPath))switch(I.op){case"==":case"in":J.set(G.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return J.set(G.fieldPath.canonicalString(),I.value),Array.from(J.values())}return null}(l,u),m=function(L,Q){let J=[],G=!0;for(let I of Zr(Q)){let _=I.kind===0?$b(L,I.fieldPath,L.startAt):Hb(L,I.fieldPath,L.startAt);J.push(_.value),G&&(G=_.inclusive)}return new pr(J,G)}(l,u),y=function(L,Q){let J=[],G=!0;for(let I of Zr(Q)){let _=I.kind===0?Hb(L,I.fieldPath,L.endAt):$b(L,I.fieldPath,L.endAt);J.push(_.value),G&&(G=_.inclusive)}return new pr(J,G)}(l,u),T=this.On(u,l,m),M=this.On(u,l,y),N=this.Nn(u,l,p),V=this.Bn(u.indexId,f,T,m.inclusive,M,y.inclusive,N);return S.forEach(V,U=>r.Y(U,t.limit).next(L=>{L.forEach(Q=>{let J=F.fromSegments(Q.documentKey);s.has(J)||(s=s.add(J),a.push(J))})}))}).next(()=>a)}return S.resolve(null)})}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=tV(ge.create(e.filters,"and")).map(r=>fm(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,t),t)}Bn(e,t,r,i,o,s,a){let u=(t!=null?t.length:1)*Math.max(r.length,o.length),l=u/(t!=null?t.length:1),f=[];for(let p=0;p<u;++p){let m=t?this.Ln(t[p/l]):fl,y=this.kn(e,m,r[p%l],i),T=this.qn(e,m,o[p%l],s),M=a.map(N=>this.kn(e,m,N,!0));f.push(...this.createRange(y,T,M))}return f}kn(e,t,r,i){let o=new ri(e,F.empty(),t,r);return i?o:o.An()}qn(e,t,r,i){let o=new ri(e,F.empty(),t,r);return i?o.An():o}xn(e,t){let r=new Ql(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.yn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.Mn(t);return S.forEach(i,o=>this.xn(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let l=new ye(He.comparator),f=!1;for(let p of u.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?f=!0:l=l.add(m.field));for(let p of u.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(f?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Qn(e,t){let r=new ni;for(let i of Zr(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Pn(i.kind);Sn.Kt.Dt(o,s)}return r.un()}Ln(e){let t=new ni;return Sn.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){let r=new ni;return Sn.Kt.Dt(va(this.databaseId,t),r.Pn(function(o){let s=Zr(o);return s.length===0?0:s[s.length-1].kind}(e))),r.un()}Nn(e,t,r){if(r===null)return[];let i=[];i.push(new ni);let o=0;for(let s of Zr(e)){let a=r[o++];for(let u of i)if(this.Un(t,s.fieldPath)&&wa(a))i=this.Kn(i,s,a);else{let l=u.Pn(s.kind);Sn.Kt.Dt(a,l)}}return this.Wn(i)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new ni;u.seed(a.un()),Sn.Kt.Dt(s,u.Pn(t.kind)),o.push(u)}return o}Un(e,t){return!!e.filters.find(r=>r instanceof ie&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=Qs(e),i=lo(e);return(t?r.J(Zg,IDBKeyRange.bound(t,t)):r.J()).next(o=>{let s=[];return S.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(f,p){let m=p?new la(p.sequenceNumber,new Ft(wi(p.readTime),new F(cn(p.documentKey)),p.largestBatchId)):la.empty(),y=f.fields.map(([T,M])=>new vo(He.fromServerFormat(T),M));return new To(f.indexId,f.collectionGroup,y,m)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:W(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=Qs(e),o=lo(e);return this.Gn(e).next(s=>i.J(Zg,IDBKeyRange.bound(t,t)).next(a=>S.forEach(a,u=>o.put(tT(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return S.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?S.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),S.forEach(a,u=>this.zn(e,i,u).next(l=>{let f=this.jn(o,u);return l.isEqual(f)?S.resolve():this.Jn(e,o,u,l,f)}))))})}Hn(e,t,r,i){return uo(e).put(i.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,i){return uo(e).delete(i.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){let i=uo(e),o=new ye(rr);return i.ee({index:QT,range:IDBKeyRange.only([r.indexId,this.uid,El(this.$n(r,t))])},(s,a)=>{o=o.add(new ri(r.indexId,t,sT(a.arrayValue),sT(a.directionalValue)))}).next(()=>o)}jn(e,t){let r=new ye(rr),i=this.Qn(t,e);if(i==null)return r;let o=Gg(t);if(o!=null){let s=e.data.field(o.fieldPath);if(wa(s))for(let a of s.arrayValue.values||[])r=r.add(new ri(t.indexId,e.key,this.Ln(a),i))}else r=r.add(new ri(t.indexId,e.key,fl,i));return r}Jn(e,t,r,i,o){P(cT,"Updating index entries for document '%s'",t.key);let s=[];return function(u,l,f,p,m){let y=u.getIterator(),T=l.getIterator(),M=ao(y),N=ao(T);for(;M||N;){let V=!1,U=!1;if(M&&N){let L=f(M,N);L<0?U=!0:L>0&&(V=!0)}else M!=null?U=!0:V=!0;V?(p(N),N=ao(T)):U?(m(M),M=ao(y)):(M=ao(y),N=ao(T))}}(i,o,rr,a=>{s.push(this.Hn(e,t,r,a))},a=>{s.push(this.Yn(e,t,r,a))}),S.waitFor(s)}Gn(e){let t=1;return lo(e).ee({index:KT,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>rr(s,a)).filter((s,a,u)=>!a||rr(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=rr(s,e),u=rr(s,t);if(a===0)i[0]=e.An();else if(a>0&&u<0)i.push(s),i.push(s.An());else if(u>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Zn(i[s],i[s+1]))return[];let a=i[s].Vn(this.uid,fl,F.empty()),u=i[s+1].Vn(this.uid,fl,F.empty());o.push(IDBKeyRange.bound(a,u))}return o}Zn(e,t){return rr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(lT)}getMinOffset(e,t){return S.mapArray(this.Mn(t),r=>this.xn(e,r).next(i=>i||j(44426))).next(lT)}};function uT(n){return ze(n,pa)}function uo(n){return ze(n,na)}function Qs(n){return ze(n,Hy)}function lo(n){return ze(n,ta)}function lT(n){$(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;By(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ft(e.readTime,e.documentKey,t)}var dT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},G0=41943040,vt=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};function W0(n,e,t){let r=n.store(Wt),i=n.store(So),o=[],s=IDBKeyRange.only(t.batchId),a=0,u=r.ee({range:s},(f,p,m)=>(a++,m.delete()));o.push(u.next(()=>{$(a===1,47070,{batchId:t.batchId})}));let l=[];for(let f of t.mutations){let p=zT(e,f.key.path,t.batchId);o.push(i.delete(p)),l.push(f.key)}return S.waitFor(o).next(()=>l)}function Jl(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw j(14731);e=n.noDocument}return JSON.stringify(e).length}vt.DEFAULT_COLLECTION_PERCENTILE=10,vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vt.DEFAULT=new vt(G0,vt.DEFAULT_COLLECTION_PERCENTILE,vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vt.DISABLED=new vt(-1,0,0);var Zl=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,t,r,i){$(e.uid!=="",64387);let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ir(e).ee({index:ii,range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=yo(e),s=ir(e);return s.add({}).next(a=>{$(typeof a=="number",49019);let u=new Ia(a,t,r,i),l=function(y,T,M){let N=M.baseMutations.map(U=>zl(y.yt,U)),V=M.mutations.map(U=>zl(y.yt,U));return{userId:T,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:N,mutations:V}}(this.serializer,this.userId,u),f=[],p=new ye((m,y)=>W(m.canonicalString(),y.canonicalString()));for(let m of i){let y=zT(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),f.push(s.put(l)),f.push(o.put(y,Jk))}return p.forEach(m=>{f.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Xn[a]=u.keys()}),S.waitFor(f).next(()=>u)})}lookupMutationBatch(e,t){return ir(e).get(t).next(r=>r?($(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),ti(this.serializer,r)):null)}er(e,t){return this.Xn[t]?S.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Xn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return ir(e).ee({index:ii,range:i},(s,a,u)=>{a.userId===this.userId&&($(a.batchId>=r,47524,{tr:r}),o=ti(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=ci;return ir(e).ee({index:ii,range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,ci],[this.userId,Number.POSITIVE_INFINITY]);return ir(e).J(ii,t).next(r=>r.map(i=>ti(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=ml(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return yo(e).ee({range:i},(s,a,u)=>{let[l,f,p]=s,m=cn(f);if(l===this.userId&&t.path.isEqual(m))return ir(e).get(p).next(y=>{if(!y)throw j(61480,{nr:s,batchId:p});$(y.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:y.userId,batchId:p}),o.push(ti(this.serializer,y))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ye(W),i=[];return t.forEach(o=>{let s=ml(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=yo(e).ee({range:a},(l,f,p)=>{let[m,y,T]=l,M=cn(y);m===this.userId&&o.path.isEqual(M)?r=r.add(T):p.done()});i.push(u)}),S.waitFor(i).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=ml(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new ye(W);return yo(e).ee({range:s},(u,l,f)=>{let[p,m,y]=u,T=cn(m);p===this.userId&&r.isPrefixOf(T)?T.length===i&&(a=a.add(y)):f.done()}).next(()=>this.rr(e,a))}rr(e,t){let r=[],i=[];return t.forEach(o=>{i.push(ir(e).get(o).next(s=>{if(s===null)throw j(35274,{batchId:o});$(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:o}),r.push(ti(this.serializer,s))}))}),S.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return W0(e.le,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.ir(t.batchId)}),S.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return S.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return yo(e).ee({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=cn(o[1]);i.push(u)}else a.done()}).next(()=>{$(i.length===0,56720,{sr:i.map(o=>o.canonicalString())})})})}containsKey(e,t){return K0(e,this.userId,t)}_r(e){return Q0(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:ci,lastStreamToken:""})}};function K0(n,e,t){let r=ml(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return yo(n).ee({range:o,X:!0},(a,u,l)=>{let[f,p,m]=a;f===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function ir(n){return ze(n,Wt)}function yo(n){return ze(n,So)}function Q0(n){return ze(n,fa)}var jo=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var Om=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next(t=>{let r=new jo(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(t=>H.fromTimestamp(new Ce(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.lr(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i)))}addTargetData(e,t){return this.Pr(e,t).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>fo(e).delete(t.targetId)).next(()=>this.lr(e)).next(r=>($(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,t,r){let i=0,o=[];return fo(e).ee((s,a)=>{let u=Xs(a);u.sequenceNumber<=t&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>S.waitFor(o)).next(()=>i)}forEachTarget(e,t){return fo(e).ee((r,i)=>{let o=Xs(i);t(o)})}lr(e){return fT(e).get(Nl).next(t=>($(t!==null,2888),t))}hr(e,t){return fT(e).put(Nl,t)}Pr(e,t){return fo(e).put($0(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(t=>t.targetCount)}getTargetData(e,t){let r=gi(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return fo(e).ee({range:i,index:WT},(s,a,u)=>{let l=Xs(a);Fa(t,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=sr(e);return t.forEach(s=>{let a=nt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),S.waitFor(i)}removeMatchingKeys(e,t,r){let i=sr(e);return S.forEach(t,o=>{let s=nt(o.path);return S.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=sr(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=sr(e),o=te();return i.ee({range:r,X:!0},(s,a,u)=>{let l=cn(s[1]),f=new F(l);o=o.add(f)}).next(()=>o)}containsKey(e,t){let r=nt(t.path),i=IDBKeyRange.bound([r],[VT(r)],!1,!0),o=0;return sr(e).ee({index:$y,X:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}At(e,t){return fo(e).get(t).next(r=>r?Xs(r):null)}};function fo(n){return ze(n,Ao)}function fT(n){return ze(n,ui)}function sr(n){return ze(n,xo)}var hT="LruGarbageCollector",Y0=1048576;function pT([n,e],[t,r]){let i=W(n,t);return i===0?W(e,r):i}var km=class{constructor(e){this.Ir=e,this.buffer=new ye(pT),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();pT(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Xl=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){P(hT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>R(this,null,function*(){this.Rr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ir(t)?P(hT,"Ignoring IndexedDB error during garbage collection: ",t):yield wr(t)}yield this.Vr(3e5)}))}},Fm=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return S.resolve(St.ce);let r=new km(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(P("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(dT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(P("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dT):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,s,a,u,l,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(P("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),ho()<=se.DEBUG&&P("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-f}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function J0(n,e){return new Fm(n,e)}var Vm=class{constructor(e,t){this.db=e,this.garbageCollector=J0(this,t)}gr(e){let t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,(r,i)=>t(i))}addReference(e,t,r){return hl(e,r)}removeReference(e,t,r){return hl(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return hl(e,t)}br(e,t){return function(i,o){let s=!1;return Q0(i).te(a=>K0(i,a,o).next(u=>(u&&(s=!0),S.resolve(!u)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.Sr(e,(s,a)=>{if(a<=t){let u=this.br(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,H.min()),sr(e).delete(function(p){return[0,nt(p.path)]}(s))))});i.push(u)}}).next(()=>S.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return hl(e,t)}Sr(e,t){let r=sr(e),i,o=St.ce;return r.ee({index:$y},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==St.ce&&t(new F(cn(i)),o),o=l,i=u):o=St.ce}).next(()=>{o!==St.ce&&t(new F(cn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function hl(n,e){return sr(n).put(function(r,i){return{targetId:0,path:nt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var ed=class{constructor(){this.changes=new Kt(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Je.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?S.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Lm=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Jr(e).put(r)}removeEntry(e,t,r){return Jr(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Wl(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Dr(e,r)))}getEntry(e,t){let r=Je.newInvalidDocument(t);return Jr(e).ee({index:yl,range:IDBKeyRange.only(Ys(t))},(i,o)=>{r=this.Cr(t,o)}).next(()=>r)}vr(e,t){let r={size:0,document:Je.newInvalidDocument(t)};return Jr(e).ee({index:yl,range:IDBKeyRange.only(Ys(t))},(i,o)=>{r={document:this.Cr(t,o),size:Jl(o)}}).next(()=>r)}getEntries(e,t){let r=xt();return this.Fr(e,t,(i,o)=>{let s=this.Cr(i,o);r=r.insert(i,s)}).next(()=>r)}Mr(e,t){let r=xt(),i=new be(F.comparator);return this.Fr(e,t,(o,s)=>{let a=this.Cr(o,s);r=r.insert(o,a),i=i.insert(o,Jl(s))}).next(()=>({documents:r,Or:i}))}Fr(e,t,r){if(t.isEmpty())return S.resolve();let i=new ye(yT);t.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(Ys(i.first()),Ys(i.last())),s=i.getIterator(),a=s.getNext();return Jr(e).ee({index:yl,range:o},(u,l,f)=>{let p=F.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&yT(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?f.j(Ys(a)):f.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),Wl(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Jr(e).J(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let f=xt();for(let p of l){let m=this.Cr(F.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(La(t,m)||i.has(m.key))&&(f=f.insert(m.key,m))}return f})}getAllFromCollectionGroup(e,t,r,i){let o=xt(),s=mT(t,r),a=mT(t,Ft.max());return Jr(e).ee({index:GT,range:IDBKeyRange.bound(s,a,!0)},(u,l,f)=>{let p=this.Cr(F.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&f.done()}).next(()=>o)}newChangeBuffer(e){return new jm(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return gT(e).get(Jg).next(t=>($(!!t,20021),t))}Dr(e,t){return gT(e).put(Jg,t)}Cr(e,t){if(t){let r=XF(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(H.min())))return r}return Je.newInvalidDocument(e)}};function Z0(n){return new Lm(n)}var jm=class extends ed{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Kt(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new ye((o,s)=>W(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.Br.get(o);if(t.push(this.Nr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=Xb(this.Nr.serializer,s);i=i.add(o.path.popLast());let l=Jl(u);r+=l-a.size,t.push(this.Nr.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=Xb(this.Nr.serializer,s.convertToNoDocument(H.min()));t.push(this.Nr.addEntry(e,o,u))}}),i.forEach(o=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Nr.updateMetadata(e,r)),S.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next(r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next(({documents:r,Or:i})=>(i.forEach((o,s)=>{this.Br.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function gT(n){return ze(n,ha)}function Jr(n){return ze(n,Ml)}function Ys(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function mT(n,e){let t=e.documentKey.path.toArray();return[n,Wl(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function yT(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=W(t[o],r[o]),i)return i;return i=W(t.length,r.length),i||(i=W(t[t.length-2],r[r.length-2]),i||W(t[t.length-1],r[r.length-1]))}var Bm=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var td=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&sa(r.mutation,i,At.empty(),Ce.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,te()).next(()=>r))}getLocalViewOfDocuments(e,t,r=te()){let i=un();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Zs();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=un();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,te()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=xt(),s=oa(),a=function(){return oa()}();return t.forEach((u,l)=>{let f=r.get(l.key);i.has(l.key)&&(f===void 0||f.mutation instanceof Qt)?o=o.insert(l.key,l):f!==void 0?(s.set(l.key,f.mutation.getFieldMask()),sa(f.mutation,l,f.mutation.getFieldMask(),Ce.now())):s.set(l.key,At.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,f)=>s.set(l,f)),t.forEach((l,f)=>a.set(l,new Bm(f,s.get(l)??null))),a))}recalculateAndSaveOverlays(e,t){let r=oa(),i=new be((s,a)=>s-a),o=te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let f=r.get(u)||At.empty();f=a.applyToLocalView(l,f),r.set(u,f);let p=(i.get(a.batchId)||te()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,f=u.value,p=E0();f.forEach(m=>{if(!o.has(m)){let y=A0(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return S.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return F.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):m0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):S.resolve(un()),a=bo,u=o;return s.next(l=>S.forEach(l,(f,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(f)?S.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{u=u.insert(f,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,te())).next(f=>({batchId:a,changes:I0(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new F(t)).next(r=>{let i=Zs();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Zs();return this.indexManager.getCollectionParents(e,o).next(a=>S.forEach(a,u=>{let l=function(p,m){return new gr(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(f=>{f.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let f=l.getKey();s.get(f)===null&&(s=s.insert(f,Je.newInvalidDocument(f)))});let a=Zs();return s.forEach((u,l)=>{let f=o.get(u);f!==void 0&&sa(f.mutation,l,At.empty(),Ce.now()),La(t,l)&&(a=a.insert(u,l))}),a})}};var Um=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return S.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ft(i.createTime)}}(t)),S.resolve()}getNamedQuery(e,t){return S.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(i){return{name:i.name,query:H0(i.bundledQuery),readTime:ft(i.readTime)}}(t)),S.resolve()}};var $m=class{constructor(){this.overlays=new be(F.comparator),this.qr=new Map}getOverlay(e,t){return S.resolve(this.overlays.get(t))}getOverlays(e,t){let r=un();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),S.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),S.resolve()}getOverlaysForCollection(e,t,r){let i=un(),o=t.length+1,s=new F(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return S.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new be((l,f)=>l-f),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let f=o.get(l.largestBatchId);f===null&&(f=un(),o=o.insert(l.largestBatchId,f)),f.set(l.getKey(),l)}}let a=un(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,f)=>a.set(l,f)),!(a.size()>=i)););return S.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Ea(t,r));let o=this.qr.get(t);o===void 0&&(o=te(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}};var Hm=class{constructor(){this.sessionToken=je.EMPTY_BYTE_STRING}getSessionToken(e){return S.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,S.resolve()}};var Ca=class{constructor(){this.Qr=new ye(Fe.$r),this.Ur=new ye(Fe.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new Fe(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new Fe(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new F(new pe([])),r=new Fe(t,e),i=new Fe(t,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new F(new pe([])),r=new Fe(t,e),i=new Fe(t,e+1),o=te();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Fe(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Fe=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return F.comparator(e.key,t.key)||W(e.Yr,t.Yr)}static Kr(e,t){return W(e.Yr,t.Yr)||F.comparator(e.key,t.key)}};var qm=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new ye(Fe.$r)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Ia(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Zr=this.Zr.add(new Fe(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(s)}lookupMutationBatch(e,t){return S.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),o=i<0?0:i;return S.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?ci:this.tr-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Fe(t,0),i=new Fe(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{let a=this.Xr(s.Yr);o.push(a)}),S.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ye(W);return t.forEach(i=>{let o=new Fe(i,0),s=new Fe(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],a=>{r=r.add(a.Yr)})}),S.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;F.isDocumentKey(o)||(o=o.child(""));let s=new Fe(new F(o),0),a=new ye(W);return this.Zr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Yr)),!0)},s),S.resolve(this.ti(a))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){$(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return S.forEach(t.mutations,i=>{let o=new Fe(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new Fe(t,0),i=this.Zr.firstAfterOrEqual(r);return S.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var zm=class{constructor(e){this.ri=e,this.docs=function(){return new be(F.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return S.resolve(r?r.document.mutableCopy():Je.newInvalidDocument(t))}getEntries(e,t){let r=xt();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Je.newInvalidDocument(i))}),S.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=xt(),s=t.path,a=new F(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:f}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||By(UT(f),r)<=0||(i.has(f.key)||La(t,f))&&(o=o.insert(f.key,f.mutableCopy()))}return S.resolve(o)}getAllFromCollectionGroup(e,t,r,i){j(9500)}ii(e,t){return S.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Gm(this)}getSize(e){return S.resolve(this.size)}},Gm=class extends ed{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),S.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var Wm=class{constructor(e){this.persistence=e,this.si=new Kt(t=>gi(t),Fa),this.lastRemoteSnapshotVersion=H.min(),this.highestTargetId=0,this.oi=0,this._i=new Ca,this.targetCount=0,this.ai=jo.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),S.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new jo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,S.resolve()}updateTargetData(e,t){return this.Pr(t),S.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),S.waitFor(o).next(()=>i)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return S.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),S.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),S.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),S.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return S.resolve(r)}containsKey(e,t){return S.resolve(this._i.containsKey(t))}};var Sa=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new St(0),this.li=!1,this.li=!0,this.hi=new Hm,this.referenceDelegate=e(this),this.Pi=new Wm(this),this.indexManager=new Rm,this.remoteDocumentCache=function(i){return new zm(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new Gl(t),this.Ii=new Um(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $m,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new qm(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){P("MemoryPersistence","Starting transaction:",e);let i=new Km(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,t){return S.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},Km=class extends Sl{constructor(e){super(),this.currentSequenceNumber=e}},nd=class n{constructor(e){this.persistence=e,this.Ri=new Ca,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw j(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),S.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),S.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),S.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.fi,r=>{let i=F.fromPath(r);return this.gi(e,i).next(o=>{o||t.removeEntry(i,H.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return S.or([()=>S.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},rd=class n{constructor(e,t){this.persistence=e,this.pi=new Kt(r=>nt(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=J0(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return S.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return S.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?S.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,t).next(a=>{a||(r++,o.removeEntry(s,H.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),S.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),S.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),S.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),S.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=vl(e.data.value)),t}br(e,t,r){return S.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return S.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Qm=class{constructor(e){this.serializer=e}k(e,t,r,i){let o=new Al("createOrUpgrade",t);r<1&&i>=1&&(function(u){u.createObjectStore(ka)}(e),function(u){u.createObjectStore(fa,{keyPath:Yk}),u.createObjectStore(Wt,{keyPath:Nb,autoIncrement:!0}).createIndex(ii,Rb,{unique:!0}),u.createObjectStore(So)}(e),_T(e),function(u){u.createObjectStore(Xr)}(e));let s=S.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore(xo),u.deleteObjectStore(Ao),u.deleteObjectStore(ui)}(e),_T(e)),s=s.next(()=>function(u){let l=u.store(ui),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:H.min().toTimestamp(),targetCount:0};return l.put(Nl,f)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,l){return l.store(Wt).J().next(p=>{u.deleteObjectStore(Wt),u.createObjectStore(Wt,{keyPath:Nb,autoIncrement:!0}).createIndex(ii,Rb,{unique:!0});let m=l.store(Wt),y=p.map(T=>m.put(T));return S.waitFor(y)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore(Mo,{keyPath:oF})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.yi(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore(ha)}(e),this.wi(o)))),r<7&&i>=7&&(s=s.next(()=>this.Si(o))),r<8&&i>=8&&(s=s.next(()=>this.bi(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.Di(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore(xd,{keyPath:sF})})(e),function(u){u.createObjectStore(Md,{keyPath:aF})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let l=u.createObjectStore(Nd,{keyPath:pF});l.createIndex(Xg,gF,{unique:!1}),l.createIndex(YT,mF,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let l=u.createObjectStore(Ml,{keyPath:Zk});l.createIndex(yl,Xk),l.createIndex(GT,eF)}(e)).next(()=>this.Ci(e,o)).next(()=>e.deleteObjectStore(Xr))),r<14&&i>=14&&(s=s.next(()=>this.Fi(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore(Hy,{keyPath:cF,autoIncrement:!0}).createIndex(Zg,uF,{unique:!1}),u.createObjectStore(ta,{keyPath:lF}).createIndex(KT,dF,{unique:!1}),u.createObjectStore(na,{keyPath:fF}).createIndex(QT,hF,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore(ta).clear()}).next(()=>{t.objectStore(na).clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(u){u.createObjectStore(qy,{keyPath:yF})})(e)})),r<18&&i>=18&&cg()&&(s=s.next(()=>{t.objectStore(ta).clear()}).next(()=>{t.objectStore(na).clear()})),s}wi(e){let t=0;return e.store(Xr).ee((r,i)=>{t+=Jl(i)}).next(()=>{let r={byteSize:t};return e.store(ha).put(Jg,r)})}yi(e){let t=e.store(fa),r=e.store(Wt);return t.J().next(i=>S.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,ci],[o.userId,o.lastAcknowledgedBatchId]);return r.J(ii,s).next(a=>S.forEach(a,u=>{$(u.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:u.batchId});let l=ti(this.serializer,u);return W0(e,o.userId,l).next(()=>{})}))}))}Si(e){let t=e.store(xo),r=e.store(Xr);return e.store(ui).get(Nl).next(i=>{let o=[];return r.ee((s,a)=>{let u=new pe(s),l=function(p){return[0,nt(p)]}(u);o.push(t.get(l).next(f=>f?S.resolve():(p=>t.put({targetId:0,path:nt(p),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>S.waitFor(o))})}bi(e,t){e.createObjectStore(pa,{keyPath:iF});let r=t.store(pa),i=new Ta,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:nt(u)})}};return t.store(Xr).ee({X:!0},(s,a)=>{let u=new pe(s);return o(u.popLast())}).next(()=>t.store(So).ee({X:!0},([s,a,u],l)=>{let f=cn(a);return o(f.popLast())}))}Di(e){let t=e.store(Ao);return t.ee((r,i)=>{let o=Xs(i),s=$0(this.serializer,o);return t.put(s)})}Ci(e,t){let r=t.store(Xr),i=[];return r.ee((o,s)=>{let a=t.store(Ml),u=function(p){return p.document?new F(pe.fromString(p.document.name).popFirst(5)):p.noDocument?F.fromSegments(p.noDocument.path):p.unknownDocument?F.fromSegments(p.unknownDocument.path):j(36783)}(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>S.waitFor(i))}Fi(e,t){let r=t.store(Wt),i=Z0(this.serializer),o=new Sa(nd.mi,this.serializer.yt);return r.J().next(s=>{let a=new Map;return s.forEach(u=>{let l=a.get(u.userId)??te();ti(this.serializer,u).keys().forEach(f=>l=l.add(f)),a.set(u.userId,l)}),S.forEach(a,(u,l)=>{let f=new Ve(l),p=Kl.wt(this.serializer,f),m=o.getIndexManager(f),y=Zl.wt(f,this.serializer,m,o.referenceDelegate);return new td(i,y,p,m).recalculateAndSaveOverlaysForDocumentKeys(new ga(t,St.ce),u).next()})})}};function _T(n){n.createObjectStore(xo,{keyPath:nF}).createIndex($y,rF,{unique:!0}),n.createObjectStore(Ao,{keyPath:"targetId"}).createIndex(WT,tF,{unique:!0}),n.createObjectStore(ui)}var or="IndexedDbPersistence",Rg=18e5,Pg=5e3,Og="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",nV="main",Ym=class n{constructor(e,t,r,i,o,s,a,u,l,f,p=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=o,this.window=s,this.document=a,this.xi=l,this.Oi=f,this.Ni=p,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=m=>Promise.resolve(),!n.v())throw new O(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Vm(this,i),this.$i=t+nV,this.serializer=new Gl(u),this.Ui=new Co(this.$i,this.Ni,new Qm(this.serializer)),this.hi=new Tm,this.Pi=new Om(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Z0(this.serializer),this.Ii=new bm,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,f===!1&&Re(or,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new O(x.FAILED_PRECONDITION,Og);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new St(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=t=>R(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(t=>R(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(()=>R(this,null,function*(){this.started&&(yield this.Wi())})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>pl(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(t=>this.isPrimary&&!t?this.Zi(e).next(()=>!1):!!t&&this.Xi(e).next(()=>!0))).catch(e=>{if(Ir(e))return P(or,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return P(or,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Js(e).get(so).next(t=>S.resolve(this.es(t)))}ts(e){return pl(e).delete(this.clientId)}ns(){return R(this,null,function*(){if(this.isPrimary&&!this.rs(this.qi,Rg)){this.qi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=ze(t,Mo);return r.J().next(i=>{let o=this.ss(i,Rg),s=i.filter(a=>o.indexOf(a)===-1);return S.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Ki)for(let t of e)this.Ki.removeItem(this._s(t.clientId))}})}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?S.resolve(!0):Js(e).get(so).next(t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Pg)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new O(x.FAILED_PRECONDITION,Og);return!1}}return!(!this.networkEnabled||!this.inForeground)||pl(e).J().next(r=>this.ss(r,Pg).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&P(or,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return R(this,null,function*(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),yield this.Ui.runTransaction("shutdown","readwrite",[ka,Mo],e=>{let t=new ga(e,St.ce);return this.Zi(t).next(()=>this.ts(t))}),this.Ui.close(),this.Ps()})}ss(e,t){return e.filter(r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>pl(e).J().next(t=>this.ss(t,Rg).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Zl.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Pm(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Kl.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){P(or,"Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(u){return u===18?wF:u===17?e0:u===16?vF:u===15?zy:u===14?XT:u===13?ZT:u===12?_F:u===11?JT:void j(60245)}(this.Ni),s;return this.Ui.runTransaction(e,i,o,a=>(s=new ga(a,this.ci?this.ci.next():St.ce),t==="readwrite-primary"?this.Hi(s).next(u=>!!u||this.Yi(s)).next(u=>{if(!u)throw Re(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new O(x.FAILED_PRECONDITION,$T);return r(s)}).next(u=>this.Xi(s).next(()=>u)):this.Is(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Is(e){return Js(e).get(so).next(t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Pg)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new O(x.FAILED_PRECONDITION,Og)})}Xi(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Js(e).put(so,t)}static v(){return Co.v()}Zi(e){let t=Js(e);return t.get(so).next(r=>this.es(r)?(P(or,"Releasing primary lease."),t.delete(so)):S.resolve())}rs(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(Re(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();let e=/(?:Version|Mobile)\/1[456]/;ag()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{let t=this.Ki?.getItem(this._s(e))!==null;return P(or,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Re(or,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Re("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Js(n){return ze(n,ka)}function pl(n){return ze(n,Mo)}function X0(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var Jm=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=te(),i=te();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Zm=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var id=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return ag()?8:HT(Qr())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ys(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Zm;return this.Ss(e,t,s).next(a=>{if(o.result=a,this.Vs)return this.bs(e,t,s,a.size)})}).next(()=>o.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(ho()<=se.DEBUG&&P("QueryEngine","SDK will not create cache indexes for query:",po(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),S.resolve()):(ho()<=se.DEBUG&&P("QueryEngine","Query:",po(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(ho()<=se.DEBUG&&P("QueryEngine","The SDK decides to create cache indexes for query:",po(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mt(t))):S.resolve())}ys(e,t){if(qb(t))return S.resolve(null);let r=Mt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Ll(t,null,"F"),r=Mt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=te(...o);return this.ps.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.Ds(t,a);return this.Cs(t,l,s,u.readTime)?this.ys(e,Ll(t,null,"F")):this.vs(e,l,t,u)}))})))}ws(e,t,r,i){return qb(t)||i.isEqual(H.min())?S.resolve(null):this.ps.getDocuments(e,r).next(o=>{let s=this.Ds(t,o);return this.Cs(t,s,r,i)?S.resolve(null):(ho()<=se.DEBUG&&P("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),po(t)),this.vs(e,s,t,BT(i,bo)).next(a=>a))})}Ds(e,t){let r=new ye(v0(e));return t.forEach((i,o)=>{La(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return ho()<=se.DEBUG&&P("QueryEngine","Using full collection scan to execute query:",po(t)),this.ps.getDocumentsMatchingQuery(e,t,Ft.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var e_="LocalStore",rV=3e8,Xm=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new be(W),this.xs=new Kt(o=>gi(o),Fa),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new td(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function eC(n,e,t,r){return new Xm(n,e,t,r)}function tC(n,e){return R(this,null,function*(){let t=B(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=te();for(let l of i){s.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}for(let l of o){a.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Ls:l,removedBatchIds:s,addedBatchIds:a}))})})})}function iV(n,e){let t=B(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return function(a,u,l,f){let p=l.batch,m=p.keys(),y=S.resolve();return m.forEach(T=>{y=y.next(()=>f.getEntry(u,T)).next(M=>{let N=l.docVersions.get(T);$(N!==null,48541),M.version.compareTo(N)<0&&(p.applyToRemoteDocument(M,l),M.isValidDocument()&&(M.setReadTime(l.commitVersion),f.addEntry(M)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=te();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function nC(n){let e=B(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function oV(n,e){let t=B(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let a=[];e.targetChanges.forEach((f,p)=>{let m=i.get(p);if(!m)return;a.push(t.Pi.removeMatchingKeys(o,f.removedDocuments,p).next(()=>t.Pi.addMatchingKeys(o,f.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(je.EMPTY_BYTE_STRING,H.min()).withLastLimboFreeSnapshotVersion(H.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),i=i.insert(p,y),function(M,N,V){return M.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=rV?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(m,y,f)&&a.push(t.Pi.updateTargetData(o,y))});let u=xt(),l=te();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,f))}),a.push(sV(o,s,e.documentUpdates).next(f=>{u=f.ks,l=f.qs})),!r.isEqual(H.min())){let f=t.Pi.getLastRemoteSnapshotVersion(o).next(p=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(f)}return S.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Ms=i,o))}function sV(n,e,t){let r=te(),i=te();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=xt();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(H.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):P(e_,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{ks:s,qs:i}})}function aV(n,e){let t=B(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ci),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function od(n,e){let t=B(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(o=>o?(i=o,S.resolve(i)):t.Pi.allocateTargetId(r).next(s=>(i=new Lo(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}function Bo(n,e,t){return R(this,null,function*(){let r=B(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Ir(s))throw s;P(e_,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)})}function ey(n,e,t){let r=B(n),i=H.min(),o=te();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,f){let p=B(u),m=p.xs.get(f);return m!==void 0?S.resolve(p.Ms.get(m)):p.Pi.getTargetData(l,f)}(r,s,Mt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,t?i:H.min(),t?o:te())).next(a=>(oC(r,_0(e),a),{documents:a,Qs:o})))}function rC(n,e){let t=B(n),r=B(t.Pi),i=t.Ms.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.At(o,e).next(s=>s?s.target:null))}function iC(n,e){let t=B(n),r=t.Os.get(e)||H.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Ns.getAllFromCollectionGroup(i,e,BT(r,bo),Number.MAX_SAFE_INTEGER)).then(i=>(oC(t,e,i),i))}function oC(n,e,t){let r=n.Os.get(e)||H.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Os.set(e,r)}var sC="firestore_clients";function vT(n,e){return`${sC}_${n}_${e}`}var aC="firestore_mutations";function wT(n,e,t){let r=`${aC}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}var cC="firestore_targets";function kg(n,e){return`${cC}_${n}_${e}`}var an="SharedClientState",sd=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ws(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new O(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(Re(an,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Gs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},aa=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ws(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new O(r.error.code,r.error.message))),o?new n(e,r.state,i):(Re(an,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},ad=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Yy();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=qT(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(Re(an,`Failed to parse client data for instance '${e}': ${t}`),null)}},ty=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(Re(an,`Failed to parse online state: ${e}`),null)}},Aa=class{constructor(){this.activeTargetIds=Yy()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},ca=class{constructor(e,t,r,i,o){this.window=e,this.Mi=t,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new be(W),this.started=!1,this.Xs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.eo=vT(this.persistenceKey,this.Js),this.no=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Aa),this.ro=new RegExp(`^${sC}_${s}_([^_]*)$`),this.io=new RegExp(`^${aC}_${s}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${cC}_${s}_(\\d+)$`),this.oo=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this._o=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}start(){return R(this,null,function*(){let e=yield this.syncEngine.Ts();for(let r of e){if(r===this.Js)continue;let i=this.getItem(vT(this.persistenceKey,r));if(i){let o=ad.Ws(r,i);o&&(this.Zs=this.Zs.insert(o.clientId,o))}}this.ao();let t=this.storage.getItem(this.oo);if(t){let r=this.uo(t);r&&this.co(r)}for(let r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,r){this.ho(e,t,r),this.Po(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(kg(this.persistenceKey,e));if(i){let o=aa.Ws(e,i);o&&(r=o.state)}}return t&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(kg(this.persistenceKey,e))}updateQueryState(e,t,r){this.Io(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Po(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return P(an,"READ",e,t),t}setItem(e,t){P(an,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){P(an,"REMOVE",e),this.storage.removeItem(e)}Ys(e){let t=e;if(t.storageArea===this.storage){if(P(an,"EVENT",t.key,t.newValue),t.key===this.eo)return void Re("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(()=>R(this,null,function*(){if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){let r=this.Ro(t.key);return this.Vo(r,null)}{let r=this.mo(t.key,t.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(t.key)){if(t.newValue!==null){let r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(this.so.test(t.key)){if(t.newValue!==null){let r=this.yo(t.key,t.newValue);if(r)return this.wo(r)}}else if(t.key===this.oo){if(t.newValue!==null){let r=this.uo(t.newValue);if(r)return this.co(r)}}else if(t.key===this.no){let r=function(o){let s=St.ce;if(o!=null)try{let a=JSON.parse(o);$(typeof a=="number",30636,{So:o}),s=a}catch(a){Re(an,"Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==St.ce&&this.sequenceNumberHandler(r)}else if(t.key===this._o){let r=this.bo(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.Do(i)))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,r){let i=new sd(this.currentUser,e,t,r),o=wT(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Gs())}Po(e){let t=wT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){let t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,r){let i=kg(this.persistenceKey,e),o=new aa(e,t,r);this.setItem(i,o.Gs())}Ao(e){let t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){let t=this.ro.exec(e);return t?t[1]:null}mo(e,t){let r=this.Ro(e);return ad.Ws(r,t)}fo(e,t){let r=this.io.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return sd.Ws(new Ve(o),i,t)}yo(e,t){let r=this.so.exec(e),i=Number(r[1]);return aa.Ws(i,t)}uo(e){return ty.Ws(e)}bo(e){return JSON.parse(e)}po(e){return R(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);P(an,`Ignoring mutation for non-active user ${e.user.uid}`)})}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){let r=t?this.Zs.insert(e,t):this.Zs.remove(e),i=this.lo(this.Zs),o=this.lo(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.Fo(s,a).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=Yy();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},cd=class{constructor(){this.Mo=new Aa,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Aa,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var ny=class{Oo(e){}shutdown(){}};var IT="ConnectivityMonitor",ud=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){P(IT,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){P(IT,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var gl=null;function ry(){return gl===null?gl=function(){return 268435456+Math.round(2147483648*Math.random())}():gl++,"0x"+gl.toString(16)}var Fg="RestConnection",cV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},iy=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===ya?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){let s=ry(),a=this.zo(e,t.toUriEncodedString());P(Fg,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,o);let{host:l}=new URL(a),f=qs(l);return this.Jo(e,a,u,r,f).then(p=>(P(Fg,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Eo(Fg,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Ho(e,t,r,i,o,s){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Go}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,t){let r=cV[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var oy=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var tt="WebChannelConnection",sy=class extends iy{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){let s=ry();return new Promise((a,u)=>{let l=new Tg;l.setWithCredentials(!0),l.listenOnce(Cg.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ws.NO_ERROR:let p=l.getResponseJson();P(tt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Ws.TIMEOUT:P(tt,`RPC '${e}' ${s} timed out`),u(new O(x.DEADLINE_EXCEEDED,"Request time out"));break;case Ws.HTTP_ERROR:let m=l.getStatus();if(P(tt,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let T=y?.error;if(T&&T.status&&T.message){let M=function(V){let U=V.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(U)>=0?U:x.UNKNOWN}(T.status);u(new O(M,T.message))}else u(new O(x.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new O(x.UNAVAILABLE,"Connection failed."));break;default:j(9055,{l_:e,streamId:s,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{P(tt,`RPC '${e}' ${s} completed.`)}});let f=JSON.stringify(i);P(tt,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",f,r,15)})}T_(e,t,r){let i=ry(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=xg(),a=Ag(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let f=o.join("");P(tt,`Creating RPC '${e}' stream ${i}: ${f}`,u);let p=s.createWebChannel(f,u);this.I_(p);let m=!1,y=!1,T=new oy({Yo:N=>{y?P(tt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(P(tt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),P(tt,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},Zo:()=>p.close()}),M=(N,V,U)=>{N.listen(V,L=>{try{U(L)}catch(Q){setTimeout(()=>{throw Q},0)}})};return M(p,oo.EventType.OPEN,()=>{y||(P(tt,`RPC '${e}' stream ${i} transport opened.`),T.o_())}),M(p,oo.EventType.CLOSE,()=>{y||(y=!0,P(tt,`RPC '${e}' stream ${i} transport closed`),T.a_(),this.E_(p))}),M(p,oo.EventType.ERROR,N=>{y||(y=!0,Eo(tt,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),T.a_(new O(x.UNAVAILABLE,"The operation could not be completed")))}),M(p,oo.EventType.MESSAGE,N=>{if(!y){let V=N.data[0];$(!!V,16349);let U=V,L=U?.error||U[0]?.error;if(L){P(tt,`RPC '${e}' stream ${i} received error:`,L);let Q=L.status,J=function(_){let w=ke[_];if(w!==void 0)return M0(w)}(Q),G=L.message;J===void 0&&(J=x.INTERNAL,G="Unknown error status: "+Q+" with message "+L.message),y=!0,T.a_(new O(J,G)),p.close()}else P(tt,`RPC '${e}' stream ${i} received:`,V),T.u_(V)}}),M(a,Sg.STAT_EVENT,N=>{N.stat===ll.PROXY?P(tt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===ll.NOPROXY&&P(tt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.__()},0),T}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function uC(){return typeof window<"u"?window:null}function Dl(){return typeof document<"u"?document:null}function kd(n){return new vm(n,!0)}var ld=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&P("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var ET="PersistentStream",dd=class{constructor(e,t,r,i,o,s,a,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ld(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}stop(){return R(this,null,function*(){this.x_()&&(yield this.close(0))})}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}k_(){return R(this,null,function*(){if(this.O_())return this.close(0)})}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return R(this,null,function*(){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===x.RESOURCE_EXHAUSTED?(Re(t.toString()),Re("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.r_(t)})}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new O(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(()=>R(this,null,function*(){this.state=0,this.start()}))}z_(e){return P(ET,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(P(ET,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},ay=class extends dd{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=GF(this.serializer,e),r=function(o){if(!("targetChange"in o))return H.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?H.min():s.readTime?ft(s.readTime):H.min()}(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=Em(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=Fl(u)?{documents:F0(o,u)}:{query:V0(o,u).ft},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=N0(o,s.resumeToken);let l=wm(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(H.min())>0){a.readTime=Vo(o,s.snapshotVersion.toTimestamp());let l=wm(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=KF(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=Em(this.serializer),t.removeTarget=e,this.q_(t)}},cy=class extends dd{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return $(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){$(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=WF(e.writeResults,e.commitTime),r=ft(e.commitTime);return this.listener.na(r,t)}ra(){let e={};e.database=Em(this.serializer),this.q_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>zl(this.serializer,r))};this.q_(t)}};var uy=class{},ly=class extends uy{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new O(x.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,Im(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new O(x.UNKNOWN,o.toString())})}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Ho(e,Im(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new O(x.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},dy=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Re(t),this.aa=!1):P("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Ii="RemoteStore",fy=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(()=>R(this,null,function*(){Di(this)&&(P(Ii,"Restarting streams for network reachability change."),yield function(u){return R(this,null,function*(){let l=B(u);l.Ea.add(4),yield ja(l),l.Ra.set("Unknown"),l.Ea.delete(4),yield Fd(l)})}(this))}))}),this.Ra=new dy(r,i)}};function Fd(n){return R(this,null,function*(){if(Di(n))for(let e of n.da)yield e(!0)})}function ja(n){return R(this,null,function*(){for(let e of n.da)yield e(!1)})}function Vd(n,e){let t=B(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),r_(t)?n_(t):Ko(t).O_()&&t_(t,e))}function Uo(n,e){let t=B(n),r=Ko(t);t.Ia.delete(e),r.O_()&&lC(t,e),t.Ia.size===0&&(r.O_()?r.L_():Di(t)&&t.Ra.set("Unknown"))}function t_(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(H.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ko(n).Y_(e)}function lC(n,e){n.Va.Ue(e),Ko(n).Z_(e)}function n_(n){n.Va=new _m({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ko(n).start(),n.Ra.ua()}function r_(n){return Di(n)&&!Ko(n).x_()&&n.Ia.size>0}function Di(n){return B(n).Ea.size===0}function dC(n){n.Va=void 0}function uV(n){return R(this,null,function*(){n.Ra.set("Online")})}function lV(n){return R(this,null,function*(){n.Ia.forEach((e,t)=>{t_(n,e)})})}function dV(n,e){return R(this,null,function*(){dC(n),r_(n)?(n.Ra.ha(e),n_(n)):n.Ra.set("Unknown")})}function fV(n,e,t){return R(this,null,function*(){if(n.Ra.set("Online"),e instanceof $l&&e.state===2&&e.cause)try{yield function(i,o){return R(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ia.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ia.delete(a),i.Va.removeTarget(a))})}(n,e)}catch(r){P(Ii,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield fd(n,r)}else if(e instanceof wo?n.Va.Ze(e):e instanceof Ul?n.Va.st(e):n.Va.tt(e),!t.isEqual(H.min()))try{let r=yield nC(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Va.Tt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let f=o.Ia.get(l);f&&o.Ia.set(l,f.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let f=o.Ia.get(u);if(!f)return;o.Ia.set(u,f.withResumeToken(je.EMPTY_BYTE_STRING,f.snapshotVersion)),lC(o,u);let p=new Lo(f.target,u,l,f.sequenceNumber);t_(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){P(Ii,"Failed to raise snapshot:",r),yield fd(n,r)}})}function fd(n,e,t){return R(this,null,function*(){if(!Ir(e))throw e;n.Ea.add(1),yield ja(n),n.Ra.set("Offline"),t||(t=()=>nC(n.localStore)),n.asyncQueue.enqueueRetryable(()=>R(this,null,function*(){P(Ii,"Retrying IndexedDB access"),yield t(),n.Ea.delete(1),yield Fd(n)}))})}function fC(n,e){return e().catch(t=>fd(n,t,e))}function Wo(n){return R(this,null,function*(){let e=B(n),t=_r(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ci;for(;hV(e);)try{let i=yield aV(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,pV(e,i)}catch(i){yield fd(e,i)}hC(e)&&pC(e)})}function hV(n){return Di(n)&&n.Ta.length<10}function pV(n,e){n.Ta.push(e);let t=_r(n);t.O_()&&t.X_&&t.ea(e.mutations)}function hC(n){return Di(n)&&!_r(n).x_()&&n.Ta.length>0}function pC(n){_r(n).start()}function gV(n){return R(this,null,function*(){_r(n).ra()})}function mV(n){return R(this,null,function*(){let e=_r(n);for(let t of n.Ta)e.ea(t.mutations)})}function yV(n,e,t){return R(this,null,function*(){let r=n.Ta.shift(),i=gm.from(r,e,t);yield fC(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Wo(n)})}function _V(n,e){return R(this,null,function*(){e&&_r(n).X_&&(yield function(r,i){return R(this,null,function*(){if(function(s){return VF(s)&&s!==x.ABORTED}(i.code)){let o=r.Ta.shift();_r(r).B_(),yield fC(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Wo(r)}})}(n,e)),hC(n)&&pC(n)})}function DT(n,e){return R(this,null,function*(){let t=B(n);t.asyncQueue.verifyOperationInProgress(),P(Ii,"RemoteStore received new credentials");let r=Di(t);t.Ea.add(3),yield ja(t),r&&t.Ra.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),yield Fd(t)})}function hy(n,e){return R(this,null,function*(){let t=B(n);e?(t.Ea.delete(2),yield Fd(t)):e||(t.Ea.add(2),yield ja(t),t.Ra.set("Unknown"))})}function Ko(n){return n.ma||(n.ma=function(t,r,i){let o=B(t);return o.sa(),new ay(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Xo:uV.bind(null,n),t_:lV.bind(null,n),r_:dV.bind(null,n),H_:fV.bind(null,n)}),n.da.push(e=>R(this,null,function*(){e?(n.ma.B_(),r_(n)?n_(n):n.Ra.set("Unknown")):(yield n.ma.stop(),dC(n))}))),n.ma}function _r(n){return n.fa||(n.fa=function(t,r,i){let o=B(t);return o.sa(),new cy(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:gV.bind(null,n),r_:_V.bind(null,n),ta:mV.bind(null,n),na:yV.bind(null,n)}),n.da.push(e=>R(this,null,function*(){e?(n.fa.B_(),yield Wo(n)):(yield n.fa.stop(),n.Ta.length>0&&(P(Ii,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}var py=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new kt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new O(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function i_(n,e){if(Re("AsyncQueue",`${e}: ${n}`),Ir(n))return new O(x.UNAVAILABLE,`${e}: ${n}`);throw n}var hd=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||F.comparator(t.key,r.key):(t,r)=>F.comparator(t.key,r.key),this.keyedMap=Zs(),this.sortedSet=new be(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var pd=class{constructor(){this.ga=new be(F.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):j(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},$o=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,hd.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Od(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var gy=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},my=class{constructor(){this.queries=bT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=B(t),o=i.queries;i.queries=bT(),o.forEach((s,a)=>{for(let u of a.Sa)u.onError(r)})})(this,new O(x.ABORTED,"Firestore shutting down"))}};function bT(){return new Kt(n=>y0(n),Od)}function o_(n,e){return R(this,null,function*(){let t=B(n),r=3,i=e.query,o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new gy,r=e.Da()?0:1);try{switch(r){case 0:o.wa=yield t.onListen(i,!0);break;case 1:o.wa=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=i_(s,`Initialization of query '${po(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&a_(t)})}function s_(n,e){return R(this,null,function*(){let t=B(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function vV(n,e){let t=B(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.Sa)a.Fa(i)&&(r=!0);s.wa=i}}r&&a_(t)}function wV(n,e,t){let r=B(n),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(t);r.queries.delete(e)}function a_(n){n.Ca.forEach(e=>{e.next()})}var yy,TT;(TT=yy||(yy={})).Ma="default",TT.Cache="cache";var xa=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new $o(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=$o.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==yy.Cache}};var gd=class{constructor(e){this.key=e}},md=class{constructor(e){this.key=e}},_y=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=te(),this.mutatedKeys=te(),this.eu=v0(e),this.tu=new hd(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new pd,i=t?t.tu:this.tu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{let m=i.get(f),y=La(this.query,p)?p:null,T=!!m&&this.mutatedKeys.has(m.key),M=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),N=!1;m&&y?m.data.isEqual(y.data)?T!==M&&(r.track({type:3,doc:y}),N=!0):this.su(m,y)||(r.track({type:2,doc:y}),N=!0,(u&&this.eu(y,u)>0||l&&this.eu(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),N=!0):m&&!y&&(r.track({type:1,doc:m}),N=!0,(u||l)&&(a=!0)),N&&(y?(s=s.add(y),o=M?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{tu:s,iu:r,Cs:a,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((f,p)=>function(y,T){let M=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return j(20277,{Rt:N})}};return M(y)-M(T)}(f.type,p.type)||this.eu(f.doc,p.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,l=u!==this.Za;return this.Za=u,s.length!==0||l?{snapshot:new $o(this.query,e.tu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new pd,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=te(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new md(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new gd(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=te();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return $o.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},Qo="SyncEngine",vy=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},wy=class{constructor(e){this.key=e,this.hu=!1}},Iy=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Kt(a=>y0(a),Od),this.Iu=new Map,this.Eu=new Set,this.du=new be(F.comparator),this.Au=new Map,this.Ru=new Ca,this.Vu={},this.mu=new Map,this.fu=jo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};function IV(n,e,t=!0){return R(this,null,function*(){let r=Ld(n),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=yield gC(r,e,t,!0),i})}function EV(n,e){return R(this,null,function*(){let t=Ld(n);yield gC(t,e,!0,!1)})}function gC(n,e,t,r){return R(this,null,function*(){let i=yield od(n.localStore,Mt(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield c_(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Vd(n.remoteStore,i),a})}function c_(n,e,t,r,i){return R(this,null,function*(){n.pu=(p,m,y)=>function(M,N,V,U){return R(this,null,function*(){let L=N.view.ru(V);L.Cs&&(L=yield ey(M.localStore,N.query,!1).then(({documents:I})=>N.view.ru(I,L)));let Q=U&&U.targetChanges.get(N.targetId),J=U&&U.targetMismatches.get(N.targetId)!=null,G=N.view.applyChanges(L,M.isPrimaryClient,Q,J);return Ey(M,N.targetId,G.au),G.snapshot})}(n,p,m,y);let o=yield ey(n.localStore,e,!0),s=new _y(e,o.Qs),a=s.ru(o.documents),u=ba.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);Ey(n,t,l.au);let f=new vy(e,t,s);return n.Tu.set(e,f),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),l.snapshot})}function DV(n,e,t){return R(this,null,function*(){let r=B(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!Od(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Bo(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Uo(r.remoteStore,i.targetId),Ho(r,i.targetId)}).catch(wr))):(Ho(r,i.targetId),yield Bo(r.localStore,i.targetId,!0))})}function bV(n,e){return R(this,null,function*(){let t=B(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Uo(t.remoteStore,r.targetId))})}function TV(n,e,t){return R(this,null,function*(){let r=f_(n);try{let i=yield function(s,a){let u=B(s),l=Ce.now(),f=a.reduce((y,T)=>y.add(T.key),te()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let T=xt(),M=te();return u.Ns.getEntries(y,f).next(N=>{T=N,T.forEach((V,U)=>{U.isValidDocument()||(M=M.add(V))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,T)).next(N=>{p=N;let V=[];for(let U of a){let L=FF(U,p.get(U.key).overlayedDocument);L!=null&&V.push(new Qt(U.key,L,u0(L.value.mapValue),Ye.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,V,a)}).next(N=>{m=N;let V=N.applyToLocalDocumentSet(p,M);return u.documentOverlayCache.saveOverlays(y,N.batchId,V)})}).then(()=>({batchId:m.batchId,changes:I0(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Vu[s.currentUser.toKey()];l||(l=new be(W)),l=l.insert(a,u),s.Vu[s.currentUser.toKey()]=l}(r,i.batchId,t),yield Dr(r,i.changes),yield Wo(r.remoteStore)}catch(i){let o=i_(i,"Failed to persist write");t.reject(o)}})}function mC(n,e){return R(this,null,function*(){let t=B(n);try{let r=yield oV(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Au.get(o);s&&($(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?$(s.hu,14607):i.removedDocuments.size>0&&($(s.hu,42227),s.hu=!1))}),yield Dr(t,r,e)}catch(r){yield wr(r)}})}function CT(n,e,t){let r=B(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=B(s);u.onlineState=a;let l=!1;u.queries.forEach((f,p)=>{for(let m of p.Sa)m.va(a)&&(l=!0)}),l&&a_(u)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function CV(n,e,t){return R(this,null,function*(){let r=B(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new be(F.comparator);s=s.insert(o,Je.newNoDocument(o,H.min()));let a=te().add(o),u=new Da(H.min(),new Map,new be(W),s,a);yield mC(r,u),r.du=r.du.remove(o),r.Au.delete(e),d_(r)}else yield Bo(r.localStore,e,!1).then(()=>Ho(r,e,t)).catch(wr)})}function SV(n,e){return R(this,null,function*(){let t=B(n),r=e.batch.batchId;try{let i=yield iV(t.localStore,e);l_(t,r,null),u_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Dr(t,i)}catch(i){yield wr(i)}})}function AV(n,e,t){return R(this,null,function*(){let r=B(n);try{let i=yield function(s,a){let u=B(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let f;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>($(p!==null,37113),f=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,f,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,f)).next(()=>u.localDocuments.getDocuments(l,f))})}(r.localStore,e);l_(r,e,t),u_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Dr(r,i)}catch(i){yield wr(i)}})}function u_(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function l_(n,e,t){let r=B(n),i=r.Vu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Ho(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||yC(n,r)})}function yC(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(Uo(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),d_(n))}function Ey(n,e,t){for(let r of t)r instanceof gd?(n.Ru.addReference(r.key,e),xV(n,r)):r instanceof md?(P(Qo,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||yC(n,r.key)):j(19791,{wu:r})}function xV(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(P(Qo,"New document in limbo: "+t),n.Eu.add(r),d_(n))}function d_(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new F(pe.fromString(e)),r=n.fu.next();n.Au.set(r,new wy(t)),n.du=n.du.insert(t,r),Vd(n.remoteStore,new Lo(Mt(Va(t.path)),r,"TargetPurposeLimboResolution",St.ce))}}function Dr(n,e,t){return R(this,null,function*(){let r=B(n),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((a,u)=>{s.push(r.pu(u,e,t).then(l=>{if((l||t)&&r.isPrimaryClient){let f=l?!l.fromCache:t?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);let f=Jm.As(u.targetId,l);o.push(f)}}))}),yield Promise.all(s),r.Pu.H_(i),yield function(u,l){return R(this,null,function*(){let f=B(u);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>S.forEach(l,m=>S.forEach(m.Es,y=>f.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>S.forEach(m.ds,y=>f.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Ir(p))throw p;P(e_,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=f.Ms.get(m),T=y.snapshotVersion,M=y.withLastLimboFreeSnapshotVersion(T);f.Ms=f.Ms.insert(m,M)}}})}(r.localStore,o))})}function MV(n,e){return R(this,null,function*(){let t=B(n);if(!t.currentUser.isEqual(e)){P(Qo,"User change. New user:",e.toKey());let r=yield tC(t.localStore,e);t.currentUser=e,function(o,s){o.mu.forEach(a=>{a.forEach(u=>{u.reject(new O(x.CANCELLED,s))})}),o.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Dr(t,r.Ls)}})}function NV(n,e){let t=B(n),r=t.Au.get(e);if(r&&r.hu)return te().add(r.key);{let i=te(),o=t.Iu.get(e);if(!o)return i;for(let s of o){let a=t.Tu.get(s);i=i.unionWith(a.view.nu)}return i}}function RV(n,e){return R(this,null,function*(){let t=B(n),r=yield ey(t.localStore,e.query,!0),i=e.view.cu(r);return t.isPrimaryClient&&Ey(t,e.targetId,i.au),i})}function PV(n,e){return R(this,null,function*(){let t=B(n);return iC(t.localStore,e).then(r=>Dr(t,r))})}function OV(n,e,t,r){return R(this,null,function*(){let i=B(n),o=yield function(a,u){let l=B(a),f=B(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>f.er(p,u).next(m=>m?l.localDocuments.getDocuments(p,m):S.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield Wo(i.remoteStore):t==="acknowledged"||t==="rejected"?(l_(i,e,r||null),u_(i,e),function(a,u){B(B(a).mutationQueue).ir(u)}(i.localStore,e)):j(6720,"Unknown batchState",{Su:t}),yield Dr(i,o)):P(Qo,"Cannot apply mutation batch with id: "+e)})}function kV(n,e){return R(this,null,function*(){let t=B(n);if(Ld(t),f_(t),e===!0&&t.gu!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield ST(t,r.toArray());t.gu=!0,yield hy(t.remoteStore,!0);for(let o of i)Vd(t.remoteStore,o)}else if(e===!1&&t.gu!==!1){let r=[],i=Promise.resolve();t.Iu.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Ho(t,s),Bo(t.localStore,s,!0))),Uo(t.remoteStore,s)}),yield i,yield ST(t,r),function(s){let a=B(s);a.Au.forEach((u,l)=>{Uo(a.remoteStore,l)}),a.Ru.Jr(),a.Au=new Map,a.du=new be(F.comparator)}(t),t.gu=!1,yield hy(t.remoteStore,!1)}})}function ST(n,e,t){return R(this,null,function*(){let r=B(n),i=[],o=[];for(let s of e){let a,u=r.Iu.get(s);if(u&&u.length!==0){a=yield od(r.localStore,Mt(u[0]));for(let l of u){let f=r.Tu.get(l),p=yield RV(r,f);p.snapshot&&o.push(p.snapshot)}}else{let l=yield rC(r.localStore,s);a=yield od(r.localStore,l),yield c_(r,_C(l),s,!1,a.resumeToken)}i.push(a)}return r.Pu.H_(o),i})}function _C(n){return g0(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function FV(n){return function(t){return B(B(t).persistence).Ts()}(B(n).localStore)}function VV(n,e,t,r){return R(this,null,function*(){let i=B(n);if(i.gu)return void P(Qo,"Ignoring unexpected query state notification.");let o=i.Iu.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield iC(i.localStore,_0(o[0])),a=Da.createSynthesizedRemoteEventForCurrentChange(e,t==="current",je.EMPTY_BYTE_STRING);yield Dr(i,s,a);break}case"rejected":yield Bo(i.localStore,e,!0),Ho(i,e,r);break;default:j(64155,t)}})}function LV(n,e,t){return R(this,null,function*(){let r=Ld(n);if(r.gu){for(let i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){P(Qo,"Adding an already active target "+i);continue}let o=yield rC(r.localStore,i),s=yield od(r.localStore,o);yield c_(r,_C(o),s.targetId,!1,s.resumeToken),Vd(r.remoteStore,s)}for(let i of t)r.Iu.has(i)&&(yield Bo(r.localStore,i,!1).then(()=>{Uo(r.remoteStore,i),Ho(r,i)}).catch(wr))}})}function Ld(n){let e=B(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=mC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=NV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CV.bind(null,e),e.Pu.H_=vV.bind(null,e.eventManager),e.Pu.yu=wV.bind(null,e.eventManager),e}function f_(n){let e=B(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AV.bind(null,e),e}var h_=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return R(this,null,function*(){this.serializer=kd(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)})}Fu(t,r){return null}Mu(t,r){return null}vu(t){return eC(this.persistence,new id,t.initialUser,this.serializer)}Cu(t){return new Sa(nd.mi,this.serializer)}Du(t){return new cd}terminate(){return R(this,null,function*(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),Dy=class extends h_{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){$(this.persistence.referenceDelegate instanceof rd,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Xl(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?vt.withCacheSize(this.cacheSizeBytes):vt.DEFAULT;return new Sa(r=>rd.mi(r,t),this.serializer)}},yd=class n extends h_{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return R(this,null,function*(){yield df(n.prototype,this,"initialize").call(this,e),yield this.xu.initialize(this,e),yield f_(this.xu.syncEngine),yield Wo(this.xu.remoteStore),yield this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}vu(e){return eC(this.persistence,new id,e.initialUser,this.serializer)}Fu(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new Xl(r,e.asyncQueue,t)}Mu(e,t){let r=new Yg(t,this.persistence);return new Qg(e.asyncQueue,r)}Cu(e){let t=X0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?vt.withCacheSize(this.cacheSizeBytes):vt.DEFAULT;return new Ym(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,uC(),Dl(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new cd}},by=class n extends yd{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return R(this,null,function*(){yield df(n.prototype,this,"initialize").call(this,e);let t=this.xu.syncEngine;this.sharedClientState instanceof ca&&(this.sharedClientState.syncEngine={Co:OV.bind(null,t),vo:VV.bind(null,t),Fo:LV.bind(null,t),Ts:FV.bind(null,t),Do:PV.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.Ji(r=>R(this,null,function*(){yield kV(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Du(e){let t=uC();if(!ca.v(t))throw new O(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=X0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ca(t,e.asyncQueue,r,e.clientId,e.initialUser)}},p_=(()=>{class n{initialize(t,r){return R(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>CT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=MV.bind(null,this.syncEngine),yield hy(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new my}()}createDatastore(t){let r=kd(t.databaseInfo.databaseId),i=function(s){return new sy(s)}(t.databaseInfo);return function(s,a,u,l){return new ly(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new fy(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>CT(this.syncEngine,r,0),function(){return ud.v()?new ud:new ny}())}createSyncEngine(t,r){return function(o,s,a,u,l,f,p){let m=new Iy(o,s,a,u,l,f);return p&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return R(this,null,function*(){yield function(r){return R(this,null,function*(){let i=B(r);P(Ii,"RemoteStore shutting down."),i.Ea.add(5),yield ja(i),i.Aa.shutdown(),i.Ra.set("Unknown")})}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()})}}return n.provider={build:()=>new n},n})();var Ma=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Re("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var vr="FirestoreClient",Ty=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ve.UNAUTHENTICATED,this.clientId=ua.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>R(this,null,function*(){P(vr,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(P(vr,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new kt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>R(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=i_(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Vg(n,e){return R(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),P(vr,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>R(this,null,function*(){r.isEqual(i)||(yield tC(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function AT(n,e){return R(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield jV(n);P(vr,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>DT(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>DT(e.remoteStore,i)),n._onlineComponents=e})}function jV(n){return R(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){P(vr,"Using user provided OfflineComponentProvider");try{yield Vg(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Eo("Error using user provided cache. Falling back to memory cache: "+t),yield Vg(n,new h_)}}else P(vr,"Using default OfflineComponentProvider"),yield Vg(n,new Dy(void 0));return n._offlineComponents})}function vC(n){return R(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(P(vr,"Using user provided OnlineComponentProvider"),yield AT(n,n._uninitializedComponentsProvider._online)):(P(vr,"Using default OnlineComponentProvider"),yield AT(n,new p_))),n._onlineComponents})}function BV(n){return vC(n).then(e=>e.syncEngine)}function _d(n){return R(this,null,function*(){let e=yield vC(n),t=e.eventManager;return t.onListen=IV.bind(null,e.syncEngine),t.onUnlisten=DV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=EV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=bV.bind(null,e.syncEngine),t})}function UV(n,e,t={}){let r=new kt;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(o,s,a,u,l){let f=new Ma({next:m=>{f.Nu(),s.enqueueAndForget(()=>s_(o,p));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new O(x.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?l.reject(new O(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new xa(Va(a.path),f,{includeMetadataChanges:!0,qa:!0});return o_(o,p)}(yield _d(n),n.asyncQueue,e,t,r)})),r.promise}function $V(n,e,t={}){let r=new kt;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(o,s,a,u,l){let f=new Ma({next:m=>{f.Nu(),s.enqueueAndForget(()=>s_(o,p)),m.fromCache&&u.source==="server"?l.reject(new O(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new xa(a,f,{includeMetadataChanges:!0,qa:!0});return o_(o,p)}(yield _d(n),n.asyncQueue,e,t,r)})),r.promise}function wC(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var xT=new Map;var IC="firestore.googleapis.com",MT=!0,vd=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new O(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=IC,this.ssl=MT}else this.host=e.host,this.ssl=e.ssl??MT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=G0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Y0)throw new O(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Wk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wC(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new O(x.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new O(x.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new O(x.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},qo=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vd({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new O(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new O(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vd(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new jg;switch(r.type){case"firstParty":return new Hg(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new O(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return R(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=xT.get(t);r&&(P("ComponentProvider","Removing Datastore"),xT.delete(t),r.terminate())}(this),Promise.resolve()}};function HV(n,e,t,r={}){n=dt(n,qo);let i=qs(e),o=n._getSettings(),s=Pe(re({},o),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;i&&(sg(`https://${a}`),tb("Firestore",!0)),o.host!==IC&&o.host!==a&&Eo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Pe(re({},o),{host:a,ssl:i,emulatorOptions:r});if(!er(u,s)&&(n._setSettings(u),r.mockUserToken)){let l,f;if(typeof r.mockUserToken=="string")l=r.mockUserToken,f=Ve.MOCK_USER;else{l=eb(r.mockUserToken,n._app?.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new O(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ve(p)}n._authCredentials=new Bg(new bl(l,f))}}var Nn=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},qe=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Oa(t,n._jsonSchema))return new n(e,r||null,new F(pe.fromString(t.referencePath)))}};qe._jsonSchemaVersion="firestore/documentReference/1.0",qe._jsonSchema={type:Le("string",qe._jsonSchemaVersion),referencePath:Le("string")};var cr=class n extends Nn{constructor(e,t,r){super(e,t,Va(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new qe(this.firestore,null,new F(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function EC(n,e,...t){if(n=Tt(n),LT("collection","path",e),n instanceof qo){let r=pe.fromString(e,...t);return Cb(r),new cr(n,null,r)}{if(!(n instanceof qe||n instanceof cr))throw new O(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(pe.fromString(e,...t));return Cb(r),new cr(n.firestore,null,r)}}function Yo(n,e,...t){if(n=Tt(n),arguments.length===1&&(e=ua.newId()),LT("doc","path",e),n instanceof qo){let r=pe.fromString(e,...t);return Tb(r),new qe(n,null,new F(r))}{if(!(n instanceof qe||n instanceof cr))throw new O(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(pe.fromString(e,...t));return Tb(r),new qe(n.firestore,n instanceof cr?n.converter:null,new F(r))}}var NT="AsyncQueue",wd=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ld(this,"async_queue_retry"),this._c=()=>{let r=Dl();r&&P(NT,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=Dl();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=Dl();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new kt;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}lc(){return R(this,null,function*(){if(this.Xu.length!==0){try{yield this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ir(e))throw e;P(NT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}})}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Re("INTERNAL UNHANDLED ERROR: ",RT(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=py.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&j(47125,{Pc:RT(this.nc)})}verifyOperationInProgress(){}Tc(){return R(this,null,function*(){let e;do e=this.ac,yield e;while(e!==this.ac)})}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function RT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function PT(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Vt=class extends qo{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new wd,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return R(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new wd(e),this._firestoreClient=void 0,yield e}})}};function Z3(n,e,t){t||(t=ya);let r=Dg(n,"firestore");if(r.isInitialized(t)){let i=r.getImmediate({identifier:t}),o=r.getOptions(t);if(er(o,e))return i;throw new O(x.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new O(x.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Y0)throw new O(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&qs(e.host)&&sg(e.host),r.initialize({options:e,instanceIdentifier:t})}function DC(n,e){let t=typeof n=="object"?n:cl(),r=typeof n=="string"?n:e||ya,i=Dg(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=XD("firestore");o&&HV(i,...o)}return i}function Ba(n){if(n._terminated)throw new O(x.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||qV(n),n._firestoreClient}function qV(n){let e=n._freezeSettings(),t=function(i,o,s,a){return new em(i,o,s,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,wC(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)}(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Ty(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}}(n._componentsProvider))}var ur=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(je.fromBase64String(e))}catch(t){throw new O(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(je.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Oa(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};ur._jsonSchemaVersion="firestore/bytes/1.0",ur._jsonSchema={type:Le("string",ur._jsonSchemaVersion),bytes:Le("string")};var Ei=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new O(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new He(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var zo=class{constructor(e){this._methodName=e}};var lr=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new O(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new O(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return W(this._lat,e._lat)||W(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Oa(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};lr._jsonSchemaVersion="firestore/geoPoint/1.0",lr._jsonSchema={type:Le("string",lr._jsonSchemaVersion),latitude:Le("number"),longitude:Le("number")};var dr=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Oa(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new O(x.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};dr._jsonSchemaVersion="firestore/vectorValue/1.0",dr._jsonSchema={type:Le("string",dr._jsonSchemaVersion),vectorValues:Le("object")};var zV=/^__.*__$/,Cy=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Qt(e,this.data,this.fieldMask,t,this.fieldTransforms):new yr(e,this.data,t,this.fieldTransforms)}},Id=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Qt(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function bC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw j(40011,{Ac:n})}}var Ed=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new n(re(re({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return bd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(bC(this.Ac)&&zV.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},Sy=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||kd(e)}Cc(e,t,r,i=!1){return new Ed({Ac:e,methodName:t,Dc:r,path:He.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Ua(n){let e=n._freezeSettings(),t=kd(n._databaseId);return new Sy(n._databaseId,!!e.ignoreUndefinedProperties,t)}function g_(n,e,t,r,i,o={}){let s=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);m_("Data must be an object, but it was:",s,r);let a=SC(r,s),u,l;if(o.merge)u=new At(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let f=[];for(let p of o.mergeFields){let m=xy(e,p,t);if(!s.contains(m))throw new O(x.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);xC(f,m)||f.push(m)}u=new At(f),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new Cy(new lt(a),u,l)}var Dd=class n extends zo{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function GV(n,e,t){return new Ed({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Ay=class n extends zo{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){let t=GV(this,e,!0),r=this.vc.map(o=>Jo(o,t)),i=new Mn(r);return new jl(e.path,i)}isEqual(e){return e instanceof n&&er(this.vc,e.vc)}};function TC(n,e,t,r){let i=n.Cc(1,e,t);m_("Data must be an object, but it was:",i,r);let o=[],s=lt.empty();Er(r,(u,l)=>{let f=y_(e,u,t);l=Tt(l);let p=i.yc(f);if(l instanceof Dd)o.push(f);else{let m=Jo(l,p);m!=null&&(o.push(f),s.set(f,m))}});let a=new At(o);return new Id(s,a,i.fieldTransforms)}function CC(n,e,t,r,i,o){let s=n.Cc(1,e,t),a=[xy(e,r,t)],u=[i];if(o.length%2!=0)throw new O(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(xy(e,o[m])),u.push(o[m+1]);let l=[],f=lt.empty();for(let m=a.length-1;m>=0;--m)if(!xC(l,a[m])){let y=a[m],T=u[m];T=Tt(T);let M=s.yc(y);if(T instanceof Dd)l.push(y);else{let N=Jo(T,M);N!=null&&(l.push(y),f.set(y,N))}}let p=new At(l);return new Id(f,p,s.fieldTransforms)}function WV(n,e,t,r=!1){return Jo(t,n.Cc(r?4:3,e))}function Jo(n,e){if(AC(n=Tt(n)))return m_("Unsupported field value:",e,n),SC(n,e);if(n instanceof zo)return function(r,i){if(!bC(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=Jo(a,i.wc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Tt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return NF(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ce.fromDate(r);return{timestampValue:Vo(i.serializer,o)}}if(r instanceof Ce){let o=new Ce(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Vo(i.serializer,o)}}if(r instanceof lr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ur)return{bytesValue:N0(i.serializer,r._byteString)};if(r instanceof qe){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Zy(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof dr)return function(s,a){return{mapValue:{fields:{[Wy]:{stringValue:Ky},[Ro]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Sc("VectorValues must only contain numeric values.");return Jy(a.serializer,l)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Sd(r)}`)}(n,e)}function SC(n,e){let t={};return t0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Er(n,(r,i)=>{let o=Jo(i,e.mc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function AC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ce||n instanceof lr||n instanceof ur||n instanceof qe||n instanceof zo||n instanceof dr)}function m_(n,e,t){if(!AC(t)||!jT(t)){let r=Sd(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function xy(n,e,t){if((e=Tt(e))instanceof Ei)return e._internalPath;if(typeof e=="string")return y_(n,e);throw bd("Field path arguments must be of type string or ",n,!1,void 0,t)}var KV=new RegExp("[~\\*/\\[\\]]");function y_(n,e,t){if(e.search(KV)>=0)throw bd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ei(...e.split("."))._internalPath}catch{throw bd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function bd(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new O(x.INVALID_ARGUMENT,a+n+u)}function xC(n,e){return n.some(t=>t.isEqual(e))}var Td=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new qe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new My(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(jd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},My=class extends Td{data(){return super.data()}};function jd(n,e){return typeof e=="string"?y_(n,e):e instanceof Ei?e._internalPath:e._delegate._internalPath}function MC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new O(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Na=class{},Ra=class extends Na{};function NC(n,e,...t){let r=[];e instanceof Na&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof Ny).length,a=o.filter(u=>u instanceof Cd).length;if(s>1||s>0&&a>0)throw new O(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Cd=class n extends Ra{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return PC(e._query,t),new Nn(e.firestore,e.converter,hm(e._query,t))}_parse(e){let t=Ua(e.firestore);return function(o,s,a,u,l,f,p){let m;if(l.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new O(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){kT(p,f);let T=[];for(let M of p)T.push(OT(u,o,M));m={arrayValue:{values:T}}}else m=OT(u,o,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||kT(p,f),m=WV(a,s,p,f==="in"||f==="not-in");return ie.create(l,f,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function X3(n,e,t){let r=e,i=jd("where",n);return Cd._create(i,r,t)}var Ny=class n extends Na{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:ge.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)PC(s,u),s=hm(s,u)}(e._query,t),new Nn(e.firestore,e.converter,hm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Ry=class n extends Ra{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new O(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new O(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pi(o,s)}(e._query,this._field,this._direction);return new Nn(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new gr(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function RC(n,e="asc"){let t=e,r=jd("orderBy",n);return Ry._create(r,t)}var Py=class n extends Ra{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Nn(e.firestore,e.converter,Ll(e._query,this._limit,this._limitType))}};function e9(n){return Kk("limit",n),Py._create("limit",n,"F")}function OT(n,e,t){if(typeof(t=Tt(t))=="string"){if(t==="")throw new O(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!m0(e)&&t.indexOf("/")!==-1)throw new O(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(pe.fromString(t));if(!F.isDocumentKey(r))throw new O(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return va(n,new F(r))}if(t instanceof qe)return va(n,t._key);throw new O(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sd(t)}.`)}function kT(n,e){if(!Array.isArray(n)||n.length===0)throw new O(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function PC(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new O(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new O(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Oy=class{convertValue(e,t="none"){switch(fr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Te(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw j(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Er(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){let t=e.fields?.[Ro].arrayValue?.values?.map(r=>Te(r.doubleValue));return new dr(t)}convertGeoPoint(e){return new lr(Te(e.latitude),Te(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Rd(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ma(e));default:return null}}convertTimestamp(e){let t=An(e);return new Ce(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=pe.fromString(e);$(U0(r),9688,{name:e});let i=new No(r.get(1),r.get(3)),o=new F(r.popFirst(5));return i.isEqual(t)||Re(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function __(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var si=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},di=class n extends Td{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Io(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(jd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new O(x.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};di._jsonSchemaVersion="firestore/documentSnapshot/1.0",di._jsonSchema={type:Le("string",di._jsonSchemaVersion),bundleSource:Le("string","DocumentSnapshot"),bundleName:Le("string"),bundle:Le("string")};var Io=class extends di{data(e={}){return super.data(e)}},fi=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new si(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Io(this._firestore,this._userDataWriter,r.key,r,new si(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new O(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Io(i._firestore,i._userDataWriter,a.doc.key,a.doc,new si(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Io(i._firestore,i._userDataWriter,a.doc.key,a.doc,new si(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,f=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),f=s.indexOf(a.doc.key)),{type:QV(a.type),doc:u,oldIndex:l,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new O(x.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ua.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function QV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return j(61501,{type:n})}}function OC(n){n=dt(n,qe);let e=dt(n.firestore,Vt);return UV(Ba(e),n._key).then(t=>jC(e,n,t))}fi._jsonSchemaVersion="firestore/querySnapshot/1.0",fi._jsonSchema={type:Le("string",fi._jsonSchemaVersion),bundleSource:Le("string","QuerySnapshot"),bundleName:Le("string"),bundle:Le("string")};var Pa=class extends Oy{constructor(e){super(),this.firestore=e}convertBytes(e){return new ur(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new qe(this.firestore,null,t)}};function kC(n){n=dt(n,Nn);let e=dt(n.firestore,Vt),t=Ba(e),r=new Pa(e);return MC(n._query),$V(t,n._query).then(i=>new fi(e,r,n,i))}function FC(n,e,t){n=dt(n,qe);let r=dt(n.firestore,Vt),i=__(n.converter,e,t);return $a(r,[g_(Ua(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Ye.none())])}function VC(n,e,t,...r){n=dt(n,qe);let i=dt(n.firestore,Vt),o=Ua(i),s;return s=typeof(e=Tt(e))=="string"||e instanceof Ei?CC(o,"updateDoc",n._key,e,t,r):TC(o,"updateDoc",n._key,e),$a(i,[s.toMutation(n._key,Ye.exists(!0))])}function LC(n){return $a(dt(n.firestore,Vt),[new _i(n._key,Ye.none())])}function t9(n,e){let t=dt(n.firestore,Vt),r=Yo(n),i=__(n.converter,e);return $a(t,[g_(Ua(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ye.exists(!1))]).then(()=>r)}function n9(n,...e){n=Tt(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||PT(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(PT(e[r])){let u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let o,s,a;if(n instanceof qe)s=dt(n.firestore,Vt),a=Va(n._key.path),o={next:u=>{e[r]&&e[r](jC(s,n,u))},error:e[r+1],complete:e[r+2]};else{let u=dt(n,Nn);s=dt(u.firestore,Vt),a=u._query;let l=new Pa(s);o={next:f=>{e[r]&&e[r](new fi(s,l,u,f))},error:e[r+1],complete:e[r+2]},MC(n._query)}return function(l,f,p,m){let y=new Ma(m),T=new xa(f,y,p);return l.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return o_(yield _d(l),T)})),()=>{y.Nu(),l.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return s_(yield _d(l),T)}))}}(Ba(s),a,i,o)}function $a(n,e){return function(r,i){let o=new kt;return r.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return TV(yield BV(r),i,o)})),o.promise}(Ba(n),e)}function jC(n,e,t){let r=t.docs.get(e._key),i=new Pa(n);return new di(n,i,e._key,r,new si(t.hasPendingWrites,t.fromCache),e.converter)}var ky=class{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=YV(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}};function r9(n){return new ky(n)}var Fy=class{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=p_.provider,this._offlineComponentProvider={build:t=>new yd(t,e?.cacheSizeBytes,this.forceOwnership)}}},Vy=class{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=p_.provider,this._offlineComponentProvider={build:t=>new by(t,e?.cacheSizeBytes)}}};function YV(n){return new Fy(n?.forceOwnership)}function i9(){return new Vy}var Ly=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ua(e)}set(e,t,r){this._verifyNotCommitted();let i=Lg(e,this._firestore),o=__(i.converter,t,r),s=g_(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Ye.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Lg(e,this._firestore),s;return s=typeof(t=Tt(t))=="string"||t instanceof Ei?CC(this._dataReader,"WriteBatch.update",o._key,t,r,i):TC(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Ye.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Lg(e,this._firestore);return this._mutations=this._mutations.concat(new _i(t._key,Ye.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new O(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Lg(n,e){if((n=Tt(n)).firestore!==e)throw new O(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function o9(...n){return new Ay("arrayUnion",n)}function s9(n){return Ba(n=dt(n,Vt)),new Ly(n,e=>$a(n,e))}(function(e,t=!0){(function(i){Go=i})(yb),zs(new Dn("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Vt(new Ug(r.getProvider("auth-internal")),new qg(s,r.getProvider("app-check-internal")),function(l,f){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new O(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new No(l.options.projectId,f)}(s,i),s);return o=re({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),nr(Eb,Db,e),nr(Eb,Db,"esm2020")})();var JV="firebase",ZV="12.6.0";nr(JV,ZV,"app");var BC=(()=>{class n{constructor(){this.app=cl(),this.db=DC(this.app)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var I9=(()=>{class n{get db(){return this.firebaseService.db}constructor(t){this.firebaseService=t,this._stores=Mp([]),this.stores=this._stores.asReadonly(),this.storesSubject=new $n([]),this.stores$=this.storesSubject.asObservable(),this.activeStoreIdSubject=new $n(localStorage.getItem("jjm_active_store_id")),this.activeStoreId$=this.activeStoreIdSubject.asObservable(),this.activeStoreId=Mp(localStorage.getItem("jjm_active_store_id")),this.hydrateFromCache()}hydrateFromCache(){let t=localStorage.getItem("jjm_cached_stores");if(t)try{let r=JSON.parse(t);this._stores.set(r),this.storesSubject.next(r),console.log("Hydrated Stores from cache")}catch(r){console.warn("Failed to hydrate stores from cache",r)}}saveToCache(t){localStorage.setItem("jjm_cached_stores",JSON.stringify(t))}reset(){this._stores.set([]),this.storesSubject.next([]),this.activeStoreIdSubject.next(null),this.activeStoreId.set(null),localStorage.removeItem("jjm_cached_stores")}loadStores(t=!1){if(!t&&this._stores().length>0){console.log("Stores already loaded in Signal. Skipping fetch.");return}let r=EC(this.db,"stores"),i=NC(r,RC("createdAt","desc"));kC(i).then(o=>{let s=o.docs.map(a=>{let u=a.data();return Pe(re({},u),{id:a.id,createdAt:u.createdAt?.toDate?u.createdAt.toDate():u.createdAt})});this._stores.set(s),this.storesSubject.next(s),this.saveToCache(s),!this.activeStoreId()&&s.length>0&&this.setActiveStore(s[0].id)}).catch(o=>console.error("Error fetching stores:",o))}getStoreById(t){let r=Yo(this.db,"stores",t);return Et(OC(r)).pipe(It(i=>{if(!i.exists())throw new Error("Store not found");let o=i.data();return Pe(re({},o),{id:i.id,createdAt:o.createdAt?.toDate?o.createdAt.toDate():o.createdAt})}))}createStore(t){let r=crypto.randomUUID(),i=Pe(re({},t),{id:r,createdAt:new Date}),o=Yo(this.db,"stores",r);return Et(FC(o,i)).pipe(It(()=>i),ki(s=>{let u=[...this._stores(),s];this._stores.set(u),this.storesSubject.next(u),this.saveToCache(u),this.activeStoreId()||this.setActiveStore(s.id)}),Oi(s=>(console.error("Error creating store:",s),ys(()=>s))))}updateStore(t,r){let i=Yo(this.db,"stores",t);return Et(VC(i,r)).pipe(It(()=>{let s=this._stores().find(a=>a.id===t);return re(re({},s),r)}),ki(o=>{let a=this._stores().map(u=>u.id===t?re(re({},u),o):u);this._stores.set(a),this.storesSubject.next(a),this.saveToCache(a)}),Oi(o=>(console.error("Error updating store:",o),ys(()=>o))))}deleteStore(t){let r=Yo(this.db,"stores",t);return Et(LC(r)).pipe(ki(()=>{let o=this._stores().filter(s=>s.id!==t);if(this._stores.set(o),this.storesSubject.next(o),this.saveToCache(o),this.activeStoreId()===t){let s=o[0];this.setActiveStore(s?s.id:null)}}),Oi(i=>(console.error("Error deleting store:",i),ys(()=>i))))}migrateData(t){return console.warn("migrateData is deprecated - no backend to migrate to"),Df({success:!0,message:"Migration deprecated"})}setActiveStore(t){t?localStorage.setItem("jjm_active_store_id",t):localStorage.removeItem("jjm_active_store_id"),this.activeStoreId.set(t),this.activeStoreIdSubject.next(t)}getActiveStoreId(){return this.activeStoreId()}hasAiResponseCredits(t){let r=this.storesSubject.value.find(o=>o.id===t);if(!r)return!1;let i=r.subscriptionPlan||"Free";return i==="Pro"||i.includes("Pro")||i.includes("Enterprise")?!0:i==="Starter"||i.includes("Starter")?(r.credits?.aiResponse??0)>0:!1}deductAiResponseCredit(t){let r=this.storesSubject.value.find(o=>o.id===t);if(!r)return;let i=r.subscriptionPlan||"Free";if(i==="Starter"||i.includes("Starter")){let o=r.credits?.aiResponse??0;if(o>0){let s=Pe(re({},r.credits||{ai:0,callMinutes:0,lastResetDate:new Date}),{aiResponse:o-1});this.updateStore(t,{credits:s}).subscribe()}}}hasTransactionCredits(t){let r=this.storesSubject.value.find(o=>o.id===t);if(!r)return!1;let i=r.subscriptionPlan||"Free";return i==="Pro"||i.includes("Pro")||i.includes("Enterprise")?!0:(r.credits?.transactions??0)>0}deductTransactionCredit(t){let r=this.storesSubject.value.find(s=>s.id===t);if(!r)return;let i=r.subscriptionPlan||"Free";if(i==="Pro"||i.includes("Pro")||i.includes("Enterprise"))return;let o=r.credits?.transactions??0;if(o>0){let s=Pe(re({},r.credits||{ai:0,callMinutes:0,lastResetDate:new Date}),{transactions:o-1});this.updateStore(t,{credits:s}).subscribe()}}hasAiCredits(t){let r=this.storesSubject.value.find(o=>o.id===t);if(!r)return!1;let i=r.subscriptionPlan||"Free";return i==="Pro"||i.includes("Pro")||i.includes("Enterprise")?!0:i==="Starter"||i.includes("Starter")?(r.credits?.ai??0)>0:!1}deductAiCredit(t){let r=this.storesSubject.value.find(o=>o.id===t);if(!r)return;let i=r.subscriptionPlan||"Free";if(i==="Starter"||i.includes("Starter")){let o=r.credits?.ai??0;if(o>0){let s=Pe(re({},r.credits||{ai:0,callMinutes:0,lastResetDate:new Date}),{ai:o-1});this.updateStore(t,{credits:s}).subscribe()}}}hasVoiceCallAccess(t){let r=this.storesSubject.value.find(o=>o.id===t);if(!r)return!1;let i=r.subscriptionPlan||"Free";return i==="Pro"||i.includes("Pro")||i.includes("Enterprise")}static{this.\u0275fac=function(r){return new(r||n)(Ke(BC))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();export{Ue as a,ES as b,ce as c,wf as d,If as e,Un as f,$n as g,gs as h,Et as i,Df as j,ys as k,$S as l,fn as m,IS as n,It as o,jS as p,hn as q,bf as r,Ac as s,HS as t,US as u,Tf as v,_s as w,Oi as x,YS as y,JS as z,vs as A,Dc as B,ZS as C,XS as D,nA as E,Wv as F,Cf as G,rA as H,iA as I,oA as J,sA as K,aA as L,ki as M,le as N,Xw as O,we as P,tI as Q,S$ as R,me as S,oe as T,Ke as U,de as V,kA as W,FA as X,Ts as Y,zn as Z,A$ as _,pI as $,Eu as aa,rx as ba,DI as ca,Wn as da,gx as ea,MI as fa,x$ as ga,M$ as ha,N$ as ia,R$ as ja,P$ as ka,sM as la,Ji as ma,Qn as na,Kr as oa,Or as pa,O$ as qa,k$ as ra,yM as sa,up as ta,F$ as ua,V$ as va,L$ as wa,UM as xa,j$ as ya,B$ as za,au as Aa,U$ as Ba,$e as Ca,$$ as Da,lu as Ea,Eh as Fa,Cp as Ga,eo as Ha,Rt as Ia,_1 as Ja,to as Ka,Mp as La,W1 as Ma,X1 as Na,Ph as Oa,eR as Pa,Np as Qa,aR as Ra,lR as Sa,DR as Ta,oD as Ua,bR as Va,G$ as Wa,W$ as Xa,hD as Ya,pD as Za,OR as _a,VR as $a,LR as ab,K$ as bb,GR as cb,Q$ as db,KR as eb,mD as fb,Y$ as gb,J$ as hb,Z$ as ib,X$ as jb,e6 as kb,t6 as lb,JR as mb,yD as nb,ZR as ob,XR as pb,eP as qb,n6 as rb,tP as sb,r6 as tb,i6 as ub,o6 as vb,s6 as wb,a6 as xb,c6 as yb,u6 as zb,l6 as Ab,d6 as Bb,f6 as Cb,h6 as Db,p6 as Eb,g6 as Fb,Hu as Gb,lP as Hb,dP as Ib,DD as Jb,m6 as Kb,qu as Lb,y6 as Mb,MP as Nb,_6 as Ob,PP as Pb,v6 as Qb,Lp as Rb,B6 as Sb,CD as Tb,Jp as Ub,U6 as Vb,tl as Wb,kP as Xb,$6 as Yb,FP as Zb,H6 as _b,q6 as $b,z6 as ac,G6 as bc,W6 as cc,K6 as dc,Q6 as ec,Y6 as fc,J6 as gc,Z6 as hc,X6 as ic,bO as jc,e3 as kc,t3 as lc,kD as mc,ZD as nc,PO as oc,s3 as pc,qs as qc,sg as rc,tb as sc,Qr as tc,a3 as uc,c3 as vc,u3 as wc,l3 as xc,d3 as yc,il as zc,rb as Ac,f3 as Bc,En as Cc,Hs as Dc,h3 as Ec,er as Fc,p3 as Gc,g3 as Hc,Tt as Ic,Dn as Jc,se as Kc,io as Lc,lb as Mc,T3 as Nc,zs as Oc,Dg as Pc,mb as Qc,yb as Rc,Pk as Sc,cl as Tc,nr as Uc,Ce as Vc,EC as Wc,Yo as Xc,Z3 as Yc,NC as Zc,X3 as _c,RC as $c,e9 as ad,OC as bd,kC as cd,FC as dd,VC as ed,LC as fd,t9 as gd,n9 as hd,r9 as id,i9 as jd,o9 as kd,s9 as ld,BC as md,I9 as nd};
