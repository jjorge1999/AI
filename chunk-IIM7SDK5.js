import{H as Le,I as qe,J as Se,K as Ge,L as at,M as Ve,P as Pe,Q as st,R as ft,S as lt,V as ct}from"./chunk-H5FDN3JM.js";import{P as it,U as ot,c as Ke,g as tt,i as rt,k as nt,x as xe}from"./chunk-VZ7PRGJ5.js";import{a as Ce,b as Te,g as de}from"./chunk-7QOE2ANW.js";function Rt(S,T){return T.forEach(function(x){x&&typeof x!="string"&&!Array.isArray(x)&&Object.keys(x).forEach(function(o){if(o!=="default"&&!(o in S)){var e=Object.getOwnPropertyDescriptor(x,o);Object.defineProperty(S,o,e.get?e:{enumerable:!0,get:function(){return x[o]}})}})}),Object.freeze(S)}function dt(S,T){return new Promise(function(x,o){let e;return xt(S).then(function(t){try{return e=t,x(new Blob([T.slice(0,2),e,T.slice(2)],{type:"image/jpeg"}))}catch(l){return o(l)}},o)})}var xt=S=>new Promise((T,x)=>{let o=new FileReader;o.addEventListener("load",({target:{result:e}})=>{let t=new DataView(e),l=0;if(t.getUint16(l)!==65496)return x("not a valid JPEG");for(l+=2;;){let f=t.getUint16(l);if(f===65498)break;let A=t.getUint16(l+2);if(f===65505&&t.getUint32(l+4)===1165519206){let b=l+10,n;switch(t.getUint16(b)){case 18761:n=!0;break;case 19789:n=!1;break;default:return x("TIFF header contains invalid endian")}if(t.getUint16(b+2,n)!==42)return x("TIFF header contains invalid version");let i=t.getUint32(b+4,n),r=b+i+2+12*t.getUint16(b+i,n);for(let a=b+i+2;a<r;a+=12)if(t.getUint16(a,n)==274){if(t.getUint16(a+2,n)!==3)return x("Orientation data type is invalid");if(t.getUint32(a+4,n)!==1)return x("Orientation data count is invalid");t.setUint16(a+8,1,n);break}return T(e.slice(l,l+2+A))}l+=2+A}return T(new Blob)}),o.readAsArrayBuffer(S)}),De={},Bt={get exports(){return De},set exports(S){De=S}};(function(S){var T,x,o={};Bt.exports=o,o.parse=function(e,t){for(var l=o.bin.readUshort,f=o.bin.readUint,A=0,b={},n=new Uint8Array(e),i=n.length-4;f(n,i)!=101010256;)i--;A=i,A+=4;var r=l(n,A+=4);l(n,A+=2);var a=f(n,A+=2),h=f(n,A+=4);A+=4,A=h;for(var E=0;E<r;E++){f(n,A),A+=4,A+=4,A+=4,f(n,A+=4),a=f(n,A+=4);var B=f(n,A+=4),v=l(n,A+=4),P=l(n,A+2),Q=l(n,A+4);A+=6;var I=f(n,A+=8);A+=4,A+=v+P+Q,o._readLocal(n,I,b,a,B,t)}return b},o._readLocal=function(e,t,l,f,A,b){var n=o.bin.readUshort,i=o.bin.readUint;i(e,t),n(e,t+=4),n(e,t+=2);var r=n(e,t+=2);i(e,t+=2),i(e,t+=4),t+=4;var a=n(e,t+=8),h=n(e,t+=2);t+=2;var E=o.bin.readUTF8(e,t,a);if(t+=a,t+=h,b)l[E]={size:A,csize:f};else{var B=new Uint8Array(e.buffer,t);if(r==0)l[E]=new Uint8Array(B.buffer.slice(t,t+f));else{if(r!=8)throw"unknown compression method: "+r;var v=new Uint8Array(A);o.inflateRaw(B,v),l[E]=v}}},o.inflateRaw=function(e,t){return o.F.inflate(e,t)},o.inflate=function(e,t){return e[0],e[1],o.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),t)},o.deflate=function(e,t){t==null&&(t={level:6});var l=0,f=new Uint8Array(50+Math.floor(1.1*e.length));f[l]=120,f[l+1]=156,l+=2,l=o.F.deflateRaw(e,f,l,t.level);var A=o.adler(e,0,e.length);return f[l+0]=A>>>24&255,f[l+1]=A>>>16&255,f[l+2]=A>>>8&255,f[l+3]=A>>>0&255,new Uint8Array(f.buffer,0,l+4)},o.deflateRaw=function(e,t){t==null&&(t={level:6});var l=new Uint8Array(50+Math.floor(1.1*e.length)),f=o.F.deflateRaw(e,l,f,t.level);return new Uint8Array(l.buffer,0,f)},o.encode=function(e,t){t==null&&(t=!1);var l=0,f=o.bin.writeUint,A=o.bin.writeUshort,b={};for(var n in e){var i=!o._noNeed(n)&&!t,r=e[n],a=o.crc.crc(r,0,r.length);b[n]={cpr:i,usize:r.length,crc:a,file:i?o.deflateRaw(r):r}}for(var n in b)l+=b[n].file.length+30+46+2*o.bin.sizeUTF8(n);l+=22;var h=new Uint8Array(l),E=0,B=[];for(var n in b){var v=b[n];B.push(E),E=o._writeHeader(h,E,n,v,0)}var P=0,Q=E;for(var n in b)v=b[n],B.push(E),E=o._writeHeader(h,E,n,v,1,B[P++]);var I=E-Q;return f(h,E,101010256),E+=4,A(h,E+=4,P),A(h,E+=2,P),f(h,E+=2,I),f(h,E+=4,Q),E+=4,E+=2,h.buffer},o._noNeed=function(e){var t=e.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(t)!=-1},o._writeHeader=function(e,t,l,f,A,b){var n=o.bin.writeUint,i=o.bin.writeUshort,r=f.file;return n(e,t,A==0?67324752:33639248),t+=4,A==1&&(t+=2),i(e,t,20),i(e,t+=2,0),i(e,t+=2,f.cpr?8:0),n(e,t+=2,0),n(e,t+=4,f.crc),n(e,t+=4,r.length),n(e,t+=4,f.usize),i(e,t+=4,o.bin.sizeUTF8(l)),i(e,t+=2,0),t+=2,A==1&&(t+=2,t+=2,n(e,t+=6,b),t+=4),t+=o.bin.writeUTF8(e,t,l),A==0&&(e.set(r,t),t+=r.length),t},o.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var l=t,f=0;f<8;f++)1&l?l=3988292384^l>>>1:l>>>=1;e[t]=l}return e}(),update:function(e,t,l,f){for(var A=0;A<f;A++)e=o.crc.table[255&(e^t[l+A])]^e>>>8;return e},crc:function(e,t,l){return 4294967295^o.crc.update(4294967295,e,t,l)}},o.adler=function(e,t,l){for(var f=1,A=0,b=t,n=t+l;b<n;){for(var i=Math.min(b+5552,n);b<i;)A+=f+=e[b++];f%=65521,A%=65521}return A<<16|f},o.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,l){e[t]=255&l,e[t+1]=l>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,l){e[t]=255&l,e[t+1]=l>>8&255,e[t+2]=l>>16&255,e[t+3]=l>>24&255},readASCII:function(e,t,l){for(var f="",A=0;A<l;A++)f+=String.fromCharCode(e[t+A]);return f},writeASCII:function(e,t,l){for(var f=0;f<l.length;f++)e[t+f]=l.charCodeAt(f)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,l){for(var f,A="",b=0;b<l;b++)A+="%"+o.bin.pad(e[t+b].toString(16));try{f=decodeURIComponent(A)}catch{return o.bin.readASCII(e,t,l)}return f},writeUTF8:function(e,t,l){for(var f=l.length,A=0,b=0;b<f;b++){var n=l.charCodeAt(b);if(!(4294967168&n))e[t+A]=n,A++;else if(!(4294965248&n))e[t+A]=192|n>>6,e[t+A+1]=128|n>>0&63,A+=2;else if(!(4294901760&n))e[t+A]=224|n>>12,e[t+A+1]=128|n>>6&63,e[t+A+2]=128|n>>0&63,A+=3;else{if(4292870144&n)throw"e";e[t+A]=240|n>>18,e[t+A+1]=128|n>>12&63,e[t+A+2]=128|n>>6&63,e[t+A+3]=128|n>>0&63,A+=4}}return A},sizeUTF8:function(e){for(var t=e.length,l=0,f=0;f<t;f++){var A=e.charCodeAt(f);if(!(4294967168&A))l++;else if(!(4294965248&A))l+=2;else if(!(4294901760&A))l+=3;else{if(4292870144&A)throw"e";l+=4}}return l}},o.F={},o.F.deflateRaw=function(e,t,l,f){var A=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][f],b=o.F.U,n=o.F._goodIndex;o.F._hash;var i=o.F._putsE,r=0,a=l<<3,h=0,E=e.length;if(f==0){for(;r<E;)i(t,a,r+(y=Math.min(65535,E-r))==E?1:0),a=o.F._copyExact(e,r,y,t,a+8),r+=y;return a>>>3}var B=b.lits,v=b.strt,P=b.prev,Q=0,I=0,k=0,p=0,M=0,u=0;for(E>2&&(v[u=o.F._hash(e,0)]=0),r=0;r<E;r++){if(M=u,r+1<E-2){u=o.F._hash(e,r+1);var c=r+1&32767;P[c]=v[u],v[u]=c}if(h<=r){(Q>14e3||I>26697)&&E-r>100&&(h<r&&(B[Q]=r-h,Q+=2,h=r),a=o.F._writeBlock(r==E-1||h==E?1:0,B,Q,p,e,k,r-k,t,a),Q=I=p=0,k=r);var m=0;r<E-2&&(m=o.F._bestMatch(e,r,P,M,Math.min(A[2],E-r),A[3]));var y=m>>>16,w=65535&m;if(m!=0){w=65535&m;var U=n(y=m>>>16,b.of0);b.lhst[257+U]++;var g=n(w,b.df0);b.dhst[g]++,p+=b.exb[U]+b.dxb[g],B[Q]=y<<23|r-h,B[Q+1]=w<<16|U<<8|g,Q+=2,h=r+y}else b.lhst[e[r]]++;I++}}for(k==r&&e.length!=0||(h<r&&(B[Q]=r-h,Q+=2,h=r),a=o.F._writeBlock(1,B,Q,p,e,k,r-k,t,a),Q=0,I=0,Q=I=p=0,k=r);7&a;)a++;return a>>>3},o.F._bestMatch=function(e,t,l,f,A,b){var n=32767&t,i=l[n],r=n-i+32768&32767;if(i==n||f!=o.F._hash(e,t-r))return 0;for(var a=0,h=0,E=Math.min(32767,t);r<=E&&--b!=0&&i!=n;){if(a==0||e[t+a]==e[t+a-r]){var B=o.F._howLong(e,t,r);if(B>a){if(h=r,(a=B)>=A)break;r+2<B&&(B=r+2);for(var v=0,P=0;P<B-2;P++){var Q=t-r+P+32768&32767,I=Q-l[Q]+32768&32767;I>v&&(v=I,i=Q)}}}r+=(n=i)-(i=l[n])+32768&32767}return a<<16|h},o.F._howLong=function(e,t,l){if(e[t]!=e[t-l]||e[t+1]!=e[t+1-l]||e[t+2]!=e[t+2-l])return 0;var f=t,A=Math.min(e.length,t+258);for(t+=3;t<A&&e[t]==e[t-l];)t++;return t-f},o.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},o.saved=0,o.F._writeBlock=function(e,t,l,f,A,b,n,i,r){var a,h,E,B,v,P,Q,I,k,p=o.F.U,M=o.F._putsF,u=o.F._putsE;p.lhst[256]++,h=(a=o.F.getTrees())[0],E=a[1],B=a[2],v=a[3],P=a[4],Q=a[5],I=a[6],k=a[7];var c=32+(r+3&7?8-(r+3&7):0)+(n<<3),m=f+o.F.contSize(p.fltree,p.lhst)+o.F.contSize(p.fdtree,p.dhst),y=f+o.F.contSize(p.ltree,p.lhst)+o.F.contSize(p.dtree,p.dhst);y+=14+3*Q+o.F.contSize(p.itree,p.ihst)+(2*p.ihst[16]+3*p.ihst[17]+7*p.ihst[18]);for(var w=0;w<286;w++)p.lhst[w]=0;for(w=0;w<30;w++)p.dhst[w]=0;for(w=0;w<19;w++)p.ihst[w]=0;var U=c<m&&c<y?0:m<y?1:2;if(M(i,r,e),M(i,r+1,U),r+=3,U==0){for(;7&r;)r++;r=o.F._copyExact(A,b,n,i,r)}else{var g,F;if(U==1&&(g=p.fltree,F=p.fdtree),U==2){o.F.makeCodes(p.ltree,h),o.F.revCodes(p.ltree,h),o.F.makeCodes(p.dtree,E),o.F.revCodes(p.dtree,E),o.F.makeCodes(p.itree,B),o.F.revCodes(p.itree,B),g=p.ltree,F=p.dtree,u(i,r,v-257),u(i,r+=5,P-1),u(i,r+=5,Q-4),r+=4;for(var d=0;d<Q;d++)u(i,r+3*d,p.itree[1+(p.ordr[d]<<1)]);r+=3*Q,r=o.F._codeTiny(I,p.itree,i,r),r=o.F._codeTiny(k,p.itree,i,r)}for(var s=b,L=0;L<l;L+=2){for(var R=t[L],_=R>>>23,z=s+(8388607&R);s<z;)r=o.F._writeLit(A[s++],g,i,r);if(_!=0){var D=t[L+1],H=D>>16,O=D>>8&255,C=255&D;u(i,r=o.F._writeLit(257+O,g,i,r),_-p.of0[O]),r+=p.exb[O],M(i,r=o.F._writeLit(C,F,i,r),H-p.df0[C]),r+=p.dxb[C],s+=_}}r=o.F._writeLit(256,g,i,r)}return r},o.F._copyExact=function(e,t,l,f,A){var b=A>>>3;return f[b]=l,f[b+1]=l>>>8,f[b+2]=255-f[b],f[b+3]=255-f[b+1],b+=4,f.set(new Uint8Array(e.buffer,t,l),b),A+(l+4<<3)},o.F.getTrees=function(){for(var e=o.F.U,t=o.F._hufTree(e.lhst,e.ltree,15),l=o.F._hufTree(e.dhst,e.dtree,15),f=[],A=o.F._lenCodes(e.ltree,f),b=[],n=o.F._lenCodes(e.dtree,b),i=0;i<f.length;i+=2)e.ihst[f[i]]++;for(i=0;i<b.length;i+=2)e.ihst[b[i]]++;for(var r=o.F._hufTree(e.ihst,e.itree,7),a=19;a>4&&e.itree[1+(e.ordr[a-1]<<1)]==0;)a--;return[t,l,r,A,n,a,f,b]},o.F.getSecond=function(e){for(var t=[],l=0;l<e.length;l+=2)t.push(e[l+1]);return t},o.F.nonZero=function(e){for(var t="",l=0;l<e.length;l+=2)e[l+1]!=0&&(t+=(l>>1)+",");return t},o.F.contSize=function(e,t){for(var l=0,f=0;f<t.length;f++)l+=t[f]*e[1+(f<<1)];return l},o.F._codeTiny=function(e,t,l,f){for(var A=0;A<e.length;A+=2){var b=e[A],n=e[A+1];f=o.F._writeLit(b,t,l,f);var i=b==16?2:b==17?3:7;b>15&&(o.F._putsE(l,f,n,i),f+=i)}return f},o.F._lenCodes=function(e,t){for(var l=e.length;l!=2&&e[l-1]==0;)l-=2;for(var f=0;f<l;f+=2){var A=e[f+1],b=f+3<l?e[f+3]:-1,n=f+5<l?e[f+5]:-1,i=f==0?-1:e[f-1];if(A==0&&b==A&&n==A){for(var r=f+5;r+2<l&&e[r+2]==A;)r+=2;(a=Math.min(r+1-f>>>1,138))<11?t.push(17,a-3):t.push(18,a-11),f+=2*a-2}else if(A==i&&b==A&&n==A){for(r=f+5;r+2<l&&e[r+2]==A;)r+=2;var a=Math.min(r+1-f>>>1,6);t.push(16,a-3),f+=2*a-2}else t.push(A,0)}return l>>>1},o.F._hufTree=function(e,t,l){var f=[],A=e.length,b=t.length,n=0;for(n=0;n<b;n+=2)t[n]=0,t[n+1]=0;for(n=0;n<A;n++)e[n]!=0&&f.push({lit:n,f:e[n]});var i=f.length,r=f.slice(0);if(i==0)return 0;if(i==1){var a=f[0].lit;return r=a==0?1:0,t[1+(a<<1)]=1,t[1+(r<<1)]=1,1}f.sort(function(I,k){return I.f-k.f});var h=f[0],E=f[1],B=0,v=1,P=2;for(f[0]={lit:-1,f:h.f+E.f,l:h,r:E,d:0};v!=i-1;)h=B!=v&&(P==i||f[B].f<f[P].f)?f[B++]:f[P++],E=B!=v&&(P==i||f[B].f<f[P].f)?f[B++]:f[P++],f[v++]={lit:-1,f:h.f+E.f,l:h,r:E};var Q=o.F.setDepth(f[v-1],0);for(Q>l&&(o.F.restrictDepth(r,l,Q),Q=l),n=0;n<i;n++)t[1+(r[n].lit<<1)]=r[n].d;return Q},o.F.setDepth=function(e,t){return e.lit!=-1?(e.d=t,t):Math.max(o.F.setDepth(e.l,t+1),o.F.setDepth(e.r,t+1))},o.F.restrictDepth=function(e,t,l){var f=0,A=1<<l-t,b=0;for(e.sort(function(i,r){return r.d==i.d?i.f-r.f:r.d-i.d}),f=0;f<e.length&&e[f].d>t;f++){var n=e[f].d;e[f].d=t,b+=A-(1<<l-n)}for(b>>>=l-t;b>0;)(n=e[f].d)<t?(e[f].d++,b-=1<<t-n-1):f++;for(;f>=0;f--)e[f].d==t&&b<0&&(e[f].d--,b++);b!=0&&console.log("debt left")},o.F._goodIndex=function(e,t){var l=0;return t[16|l]<=e&&(l|=16),t[8|l]<=e&&(l|=8),t[4|l]<=e&&(l|=4),t[2|l]<=e&&(l|=2),t[1|l]<=e&&(l|=1),l},o.F._writeLit=function(e,t,l,f){return o.F._putsF(l,f,t[e<<1]),f+t[1+(e<<1)]},o.F.inflate=function(e,t){var l=Uint8Array;if(e[0]==3&&e[1]==0)return t||new l(0);var f=o.F,A=f._bitsF,b=f._bitsE,n=f._decodeTiny,i=f.makeCodes,r=f.codes2map,a=f._get17,h=f.U,E=t==null;E&&(t=new l(e.length>>>2<<3));for(var B,v,P=0,Q=0,I=0,k=0,p=0,M=0,u=0,c=0,m=0;P==0;)if(P=A(e,m,1),Q=A(e,m+1,2),m+=3,Q!=0){if(E&&(t=o.F._check(t,c+(1<<17))),Q==1&&(B=h.flmap,v=h.fdmap,M=511,u=31),Q==2){I=b(e,m,5)+257,k=b(e,m+5,5)+1,p=b(e,m+10,4)+4,m+=14;for(var y=0;y<38;y+=2)h.itree[y]=0,h.itree[y+1]=0;var w=1;for(y=0;y<p;y++){var U=b(e,m+3*y,3);h.itree[1+(h.ordr[y]<<1)]=U,U>w&&(w=U)}m+=3*p,i(h.itree,w),r(h.itree,w,h.imap),B=h.lmap,v=h.dmap,m=n(h.imap,(1<<w)-1,I+k,e,m,h.ttree);var g=f._copyOut(h.ttree,0,I,h.ltree);M=(1<<g)-1;var F=f._copyOut(h.ttree,I,k,h.dtree);u=(1<<F)-1,i(h.ltree,g),r(h.ltree,g,B),i(h.dtree,F),r(h.dtree,F,v)}for(;;){var d=B[a(e,m)&M];m+=15&d;var s=d>>>4;if(!(s>>>8))t[c++]=s;else{if(s==256)break;var L=c+s-254;if(s>264){var R=h.ldef[s-257];L=c+(R>>>3)+b(e,m,7&R),m+=7&R}var _=v[a(e,m)&u];m+=15&_;var z=_>>>4,D=h.ddef[z],H=(D>>>4)+A(e,m,15&D);for(m+=15&D,E&&(t=o.F._check(t,c+(1<<17)));c<L;)t[c]=t[c++-H],t[c]=t[c++-H],t[c]=t[c++-H],t[c]=t[c++-H];c=L}}}else{7&m&&(m+=8-(7&m));var O=4+(m>>>3),C=e[O-4]|e[O-3]<<8;E&&(t=o.F._check(t,c+C)),t.set(new l(e.buffer,e.byteOffset+O,C),c),m=O+C<<3,c+=C}return t.length==c?t:t.slice(0,c)},o.F._check=function(e,t){var l=e.length;if(t<=l)return e;var f=new Uint8Array(Math.max(l<<1,t));return f.set(e,0),f},o.F._decodeTiny=function(e,t,l,f,A,b){for(var n=o.F._bitsE,i=o.F._get17,r=0;r<l;){var a=e[i(f,A)&t];A+=15&a;var h=a>>>4;if(h<=15)b[r]=h,r++;else{var E=0,B=0;h==16?(B=3+n(f,A,2),A+=2,E=b[r-1]):h==17?(B=3+n(f,A,3),A+=3):h==18&&(B=11+n(f,A,7),A+=7);for(var v=r+B;r<v;)b[r]=E,r++}}return A},o.F._copyOut=function(e,t,l,f){for(var A=0,b=0,n=f.length>>>1;b<l;){var i=e[b+t];f[b<<1]=0,f[1+(b<<1)]=i,i>A&&(A=i),b++}for(;b<n;)f[b<<1]=0,f[1+(b<<1)]=0,b++;return A},o.F.makeCodes=function(e,t){for(var l,f,A,b,n=o.F.U,i=e.length,r=n.bl_count,a=0;a<=t;a++)r[a]=0;for(a=1;a<i;a+=2)r[e[a]]++;var h=n.next_code;for(l=0,r[0]=0,f=1;f<=t;f++)l=l+r[f-1]<<1,h[f]=l;for(A=0;A<i;A+=2)(b=e[A+1])!=0&&(e[A]=h[b],h[b]++)},o.F.codes2map=function(e,t,l){for(var f=e.length,A=o.F.U.rev15,b=0;b<f;b+=2)if(e[b+1]!=0)for(var n=b>>1,i=e[b+1],r=n<<4|i,a=t-i,h=e[b]<<a,E=h+(1<<a);h!=E;)l[A[h]>>>15-t]=r,h++},o.F.revCodes=function(e,t){for(var l=o.F.U.rev15,f=15-t,A=0;A<e.length;A+=2){var b=e[A]<<t-e[A+1];e[A]=l[b]>>>f}},o.F._putsE=function(e,t,l){l<<=7&t;var f=t>>>3;e[f]|=l,e[f+1]|=l>>>8},o.F._putsF=function(e,t,l){l<<=7&t;var f=t>>>3;e[f]|=l,e[f+1]|=l>>>8,e[f+2]|=l>>>16},o.F._bitsE=function(e,t,l){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<l)-1},o.F._bitsF=function(e,t,l){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<l)-1},o.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},o.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},o.F.U=(T=Uint16Array,x=Uint32Array,{next_code:new T(16),bl_count:new T(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new T(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new x(32),flmap:new T(512),fltree:[],fdmap:new T(32),fdtree:[],lmap:new T(32768),ltree:[],ttree:[],dmap:new T(32768),dtree:[],imap:new T(512),itree:[],rev15:new T(32768),lhst:new x(286),dhst:new x(30),ihst:new x(19),lits:new x(15e3),strt:new T(65536),prev:new T(32768)}),function(){for(var e=o.F.U,t=0;t<32768;t++){var l=t;l=(4278255360&(l=(4042322160&(l=(3435973836&(l=(2863311530&l)>>>1|(1431655765&l)<<1))>>>2|(858993459&l)<<2))>>>4|(252645135&l)<<4))>>>8|(16711935&l)<<8,e.rev15[t]=(l>>>16|l<<16)>>>17}function f(A,b,n){for(;b--!=0;)A.push(0,n)}for(t=0;t<32;t++)e.ldef[t]=e.of0[t]<<3|e.exb[t],e.ddef[t]=e.df0[t]<<4|e.dxb[t];f(e.fltree,144,8),f(e.fltree,112,9),f(e.fltree,24,7),f(e.fltree,8,8),o.F.makeCodes(e.fltree,9),o.F.codes2map(e.fltree,9,e.flmap),o.F.revCodes(e.fltree,9),f(e.fdtree,32,5),o.F.makeCodes(e.fdtree,5),o.F.codes2map(e.fdtree,5,e.fdmap),o.F.revCodes(e.fdtree,5),f(e.itree,19,0),f(e.ltree,286,0),f(e.dtree,30,0),f(e.ttree,320,0)}()})();var It=Rt({__proto__:null,default:De},[De]),he=function(){var S={nextZero(n,i){for(;n[i]!=0;)i++;return i},readUshort:(n,i)=>n[i]<<8|n[i+1],writeUshort(n,i,r){n[i]=r>>8&255,n[i+1]=255&r},readUint:(n,i)=>16777216*n[i]+(n[i+1]<<16|n[i+2]<<8|n[i+3]),writeUint(n,i,r){n[i]=r>>24&255,n[i+1]=r>>16&255,n[i+2]=r>>8&255,n[i+3]=255&r},readASCII(n,i,r){let a="";for(let h=0;h<r;h++)a+=String.fromCharCode(n[i+h]);return a},writeASCII(n,i,r){for(let a=0;a<r.length;a++)n[i+a]=r.charCodeAt(a)},readBytes(n,i,r){let a=[];for(let h=0;h<r;h++)a.push(n[i+h]);return a},pad:n=>n.length<2?`0${n}`:n,readUTF8(n,i,r){let a,h="";for(let E=0;E<r;E++)h+=`%${S.pad(n[i+E].toString(16))}`;try{a=decodeURIComponent(h)}catch{return S.readASCII(n,i,r)}return a}};function T(n,i,r,a){let h=i*r,E=t(a),B=Math.ceil(i*E/8),v=new Uint8Array(4*h),P=new Uint32Array(v.buffer),{ctype:Q}=a,{depth:I}=a,k=S.readUshort;if(Q==6){let R=h<<2;if(I==8)for(var p=0;p<R;p+=4)v[p]=n[p],v[p+1]=n[p+1],v[p+2]=n[p+2],v[p+3]=n[p+3];if(I==16)for(p=0;p<R;p++)v[p]=n[p<<1]}else if(Q==2){let R=a.tabs.tRNS;if(R==null){if(I==8)for(p=0;p<h;p++){var M=3*p;P[p]=255<<24|n[M+2]<<16|n[M+1]<<8|n[M]}if(I==16)for(p=0;p<h;p++)M=6*p,P[p]=255<<24|n[M+4]<<16|n[M+2]<<8|n[M]}else{var u=R[0];let _=R[1],z=R[2];if(I==8)for(p=0;p<h;p++){var c=p<<2;M=3*p,P[p]=255<<24|n[M+2]<<16|n[M+1]<<8|n[M],n[M]==u&&n[M+1]==_&&n[M+2]==z&&(v[c+3]=0)}if(I==16)for(p=0;p<h;p++)c=p<<2,M=6*p,P[p]=255<<24|n[M+4]<<16|n[M+2]<<8|n[M],k(n,M)==u&&k(n,M+2)==_&&k(n,M+4)==z&&(v[c+3]=0)}}else if(Q==3){let R=a.tabs.PLTE,_=a.tabs.tRNS,z=_?_.length:0;if(I==1)for(var m=0;m<r;m++){var y=m*B,w=m*i;for(p=0;p<i;p++){c=w+p<<2;var U=3*(g=n[y+(p>>3)]>>7-((7&p)<<0)&1);v[c]=R[U],v[c+1]=R[U+1],v[c+2]=R[U+2],v[c+3]=g<z?_[g]:255}}if(I==2)for(m=0;m<r;m++)for(y=m*B,w=m*i,p=0;p<i;p++)c=w+p<<2,U=3*(g=n[y+(p>>2)]>>6-((3&p)<<1)&3),v[c]=R[U],v[c+1]=R[U+1],v[c+2]=R[U+2],v[c+3]=g<z?_[g]:255;if(I==4)for(m=0;m<r;m++)for(y=m*B,w=m*i,p=0;p<i;p++)c=w+p<<2,U=3*(g=n[y+(p>>1)]>>4-((1&p)<<2)&15),v[c]=R[U],v[c+1]=R[U+1],v[c+2]=R[U+2],v[c+3]=g<z?_[g]:255;if(I==8)for(p=0;p<h;p++){var g;c=p<<2,U=3*(g=n[p]),v[c]=R[U],v[c+1]=R[U+1],v[c+2]=R[U+2],v[c+3]=g<z?_[g]:255}}else if(Q==4){if(I==8)for(p=0;p<h;p++){c=p<<2;var F=n[d=p<<1];v[c]=F,v[c+1]=F,v[c+2]=F,v[c+3]=n[d+1]}if(I==16)for(p=0;p<h;p++){var d;c=p<<2,F=n[d=p<<2],v[c]=F,v[c+1]=F,v[c+2]=F,v[c+3]=n[d+2]}}else if(Q==0)for(u=a.tabs.tRNS?a.tabs.tRNS:-1,m=0;m<r;m++){let R=m*B,_=m*i;if(I==1)for(var s=0;s<i;s++){var L=(F=255*(n[R+(s>>>3)]>>>7-(7&s)&1))==255*u?0:255;P[_+s]=L<<24|F<<16|F<<8|F}else if(I==2)for(s=0;s<i;s++)L=(F=85*(n[R+(s>>>2)]>>>6-((3&s)<<1)&3))==85*u?0:255,P[_+s]=L<<24|F<<16|F<<8|F;else if(I==4)for(s=0;s<i;s++)L=(F=17*(n[R+(s>>>1)]>>>4-((1&s)<<2)&15))==17*u?0:255,P[_+s]=L<<24|F<<16|F<<8|F;else if(I==8)for(s=0;s<i;s++)L=(F=n[R+s])==u?0:255,P[_+s]=L<<24|F<<16|F<<8|F;else if(I==16)for(s=0;s<i;s++)F=n[R+(s<<1)],L=k(n,R+(s<<1))==u?0:255,P[_+s]=L<<24|F<<16|F<<8|F}return v}function x(n,i,r,a){let h=t(n),E=Math.ceil(r*h/8),B=new Uint8Array((E+1+n.interlace)*a);return i=n.tabs.CgBI?e(i,B):o(i,B),n.interlace==0?i=l(i,n,0,r,a):n.interlace==1&&(i=function(P,Q){let I=Q.width,k=Q.height,p=t(Q),M=p>>3,u=Math.ceil(I*p/8),c=new Uint8Array(k*u),m=0,y=[0,0,4,0,2,0,1],w=[0,4,0,2,0,1,0],U=[8,8,8,4,4,2,2],g=[8,8,4,4,2,2,1],F=0;for(;F<7;){let s=U[F],L=g[F],R=0,_=0,z=y[F];for(;z<k;)z+=s,_++;let D=w[F];for(;D<I;)D+=L,R++;let H=Math.ceil(R*p/8);l(P,Q,m,R,_);let O=0,C=y[F];for(;C<k;){let W=w[F],G=m+O*H<<3;for(;W<I;){var d;if(p==1&&(d=(d=P[G>>3])>>7-(7&G)&1,c[C*u+(W>>3)]|=d<<7-((7&W)<<0)),p==2&&(d=(d=P[G>>3])>>6-(7&G)&3,c[C*u+(W>>2)]|=d<<6-((3&W)<<1)),p==4&&(d=(d=P[G>>3])>>4-(7&G)&15,c[C*u+(W>>1)]|=d<<4-((1&W)<<2)),p>=8){let j=C*u+W*M;for(let N=0;N<M;N++)c[j+N]=P[(G>>3)+N]}G+=p,W+=L}O++,C+=s}R*_!=0&&(m+=_*(1+H)),F+=1}return c}(i,n)),i}function o(n,i){return e(new Uint8Array(n.buffer,2,n.length-6),i)}var e=function(){let n={H:{}};return n.H.N=function(i,r){let a=Uint8Array,h,E,B=0,v=0,P=0,Q=0,I=0,k=0,p=0,M=0,u=0;if(i[0]==3&&i[1]==0)return r||new a(0);let c=n.H,m=c.b,y=c.e,w=c.R,U=c.n,g=c.A,F=c.Z,d=c.m,s=r==null;for(s&&(r=new a(i.length>>>2<<5));B==0;)if(B=m(i,u,1),v=m(i,u+1,2),u+=3,v!=0){if(s&&(r=n.H.W(r,M+(1<<17))),v==1&&(h=d.J,E=d.h,k=511,p=31),v==2){P=y(i,u,5)+257,Q=y(i,u+5,5)+1,I=y(i,u+10,4)+4,u+=14;let R=1;for(var L=0;L<38;L+=2)d.Q[L]=0,d.Q[L+1]=0;for(L=0;L<I;L++){let D=y(i,u+3*L,3);d.Q[1+(d.X[L]<<1)]=D,D>R&&(R=D)}u+=3*I,U(d.Q,R),g(d.Q,R,d.u),h=d.w,E=d.d,u=w(d.u,(1<<R)-1,P+Q,i,u,d.v);let _=c.V(d.v,0,P,d.C);k=(1<<_)-1;let z=c.V(d.v,P,Q,d.D);p=(1<<z)-1,U(d.C,_),g(d.C,_,h),U(d.D,z),g(d.D,z,E)}for(;;){let R=h[F(i,u)&k];u+=15&R;let _=R>>>4;if(!(_>>>8))r[M++]=_;else{if(_==256)break;{let z=M+_-254;if(_>264){let W=d.q[_-257];z=M+(W>>>3)+y(i,u,7&W),u+=7&W}let D=E[F(i,u)&p];u+=15&D;let H=D>>>4,O=d.c[H],C=(O>>>4)+m(i,u,15&O);for(u+=15&O;M<z;)r[M]=r[M++-C],r[M]=r[M++-C],r[M]=r[M++-C],r[M]=r[M++-C];M=z}}}}else{7&u&&(u+=8-(7&u));let R=4+(u>>>3),_=i[R-4]|i[R-3]<<8;s&&(r=n.H.W(r,M+_)),r.set(new a(i.buffer,i.byteOffset+R,_),M),u=R+_<<3,M+=_}return r.length==M?r:r.slice(0,M)},n.H.W=function(i,r){let a=i.length;if(r<=a)return i;let h=new Uint8Array(a<<1);return h.set(i,0),h},n.H.R=function(i,r,a,h,E,B){let v=n.H.e,P=n.H.Z,Q=0;for(;Q<a;){let I=i[P(h,E)&r];E+=15&I;let k=I>>>4;if(k<=15)B[Q]=k,Q++;else{let p=0,M=0;k==16?(M=3+v(h,E,2),E+=2,p=B[Q-1]):k==17?(M=3+v(h,E,3),E+=3):k==18&&(M=11+v(h,E,7),E+=7);let u=Q+M;for(;Q<u;)B[Q]=p,Q++}}return E},n.H.V=function(i,r,a,h){let E=0,B=0,v=h.length>>>1;for(;B<a;){let P=i[B+r];h[B<<1]=0,h[1+(B<<1)]=P,P>E&&(E=P),B++}for(;B<v;)h[B<<1]=0,h[1+(B<<1)]=0,B++;return E},n.H.n=function(i,r){let a=n.H.m,h=i.length,E,B,v,P,Q=a.j;for(var I=0;I<=r;I++)Q[I]=0;for(I=1;I<h;I+=2)Q[i[I]]++;let k=a.K;for(E=0,Q[0]=0,B=1;B<=r;B++)E=E+Q[B-1]<<1,k[B]=E;for(v=0;v<h;v+=2)P=i[v+1],P!=0&&(i[v]=k[P],k[P]++)},n.H.A=function(i,r,a){let h=i.length,E=n.H.m.r;for(let B=0;B<h;B+=2)if(i[B+1]!=0){let v=B>>1,P=i[B+1],Q=v<<4|P,I=r-P,k=i[B]<<I,p=k+(1<<I);for(;k!=p;)a[E[k]>>>15-r]=Q,k++}},n.H.l=function(i,r){let a=n.H.m.r,h=15-r;for(let E=0;E<i.length;E+=2){let B=i[E]<<r-i[E+1];i[E]=a[B]>>>h}},n.H.M=function(i,r,a){a<<=7&r;let h=r>>>3;i[h]|=a,i[h+1]|=a>>>8},n.H.I=function(i,r,a){a<<=7&r;let h=r>>>3;i[h]|=a,i[h+1]|=a>>>8,i[h+2]|=a>>>16},n.H.e=function(i,r,a){return(i[r>>>3]|i[1+(r>>>3)]<<8)>>>(7&r)&(1<<a)-1},n.H.b=function(i,r,a){return(i[r>>>3]|i[1+(r>>>3)]<<8|i[2+(r>>>3)]<<16)>>>(7&r)&(1<<a)-1},n.H.Z=function(i,r){return(i[r>>>3]|i[1+(r>>>3)]<<8|i[2+(r>>>3)]<<16)>>>(7&r)},n.H.i=function(i,r){return(i[r>>>3]|i[1+(r>>>3)]<<8|i[2+(r>>>3)]<<16|i[3+(r>>>3)]<<24)>>>(7&r)},n.H.m=function(){let i=Uint16Array,r=Uint32Array;return{K:new i(16),j:new i(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new i(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new r(32),J:new i(512),_:[],h:new i(32),$:[],w:new i(32768),C:[],v:[],d:new i(32768),D:[],u:new i(512),Q:[],r:new i(32768),s:new r(286),Y:new r(30),a:new r(19),t:new r(15e3),k:new i(65536),g:new i(32768)}}(),function(){let i=n.H.m;for(var r=0;r<32768;r++){let h=r;h=(2863311530&h)>>>1|(1431655765&h)<<1,h=(3435973836&h)>>>2|(858993459&h)<<2,h=(4042322160&h)>>>4|(252645135&h)<<4,h=(4278255360&h)>>>8|(16711935&h)<<8,i.r[r]=(h>>>16|h<<16)>>>17}function a(h,E,B){for(;E--!=0;)h.push(0,B)}for(r=0;r<32;r++)i.q[r]=i.S[r]<<3|i.T[r],i.c[r]=i.p[r]<<4|i.z[r];a(i._,144,8),a(i._,112,9),a(i._,24,7),a(i._,8,8),n.H.n(i._,9),n.H.A(i._,9,i.J),n.H.l(i._,9),a(i.$,32,5),n.H.n(i.$,5),n.H.A(i.$,5,i.h),n.H.l(i.$,5),a(i.Q,19,0),a(i.C,286,0),a(i.D,30,0),a(i.v,320,0)}(),n.H.N}();function t(n){return[1,null,3,1,2,null,4][n.ctype]*n.depth}function l(n,i,r,a,h){let E=t(i),B=Math.ceil(a*E/8),v,P;E=Math.ceil(E/8);let Q=n[r],I=0;if(Q>1&&(n[r]=[0,0,1][Q-2]),Q==3)for(I=E;I<B;I++)n[I+1]=n[I+1]+(n[I+1-E]>>>1)&255;for(let k=0;k<h;k++)if(v=r+k*B,P=v+k+1,Q=n[P-1],I=0,Q==0)for(;I<B;I++)n[v+I]=n[P+I];else if(Q==1){for(;I<E;I++)n[v+I]=n[P+I];for(;I<B;I++)n[v+I]=n[P+I]+n[v+I-E]}else if(Q==2)for(;I<B;I++)n[v+I]=n[P+I]+n[v+I-B];else if(Q==3){for(;I<E;I++)n[v+I]=n[P+I]+(n[v+I-B]>>>1);for(;I<B;I++)n[v+I]=n[P+I]+(n[v+I-B]+n[v+I-E]>>>1)}else{for(;I<E;I++)n[v+I]=n[P+I]+f(0,n[v+I-B],0);for(;I<B;I++)n[v+I]=n[P+I]+f(n[v+I-E],n[v+I-B],n[v+I-E-B])}return n}function f(n,i,r){let a=n+i-r,h=a-n,E=a-i,B=a-r;return h*h<=E*E&&h*h<=B*B?n:E*E<=B*B?i:r}function A(n,i,r){r.width=S.readUint(n,i),i+=4,r.height=S.readUint(n,i),i+=4,r.depth=n[i],i++,r.ctype=n[i],i++,r.compress=n[i],i++,r.filter=n[i],i++,r.interlace=n[i],i++}function b(n,i,r,a,h,E,B,v,P){let Q=Math.min(i,h),I=Math.min(r,E),k=0,p=0;for(let F=0;F<I;F++)for(let d=0;d<Q;d++)if(B>=0&&v>=0?(k=F*i+d<<2,p=(v+F)*h+B+d<<2):(k=(-v+F)*i-B+d<<2,p=F*h+d<<2),P==0)a[p]=n[k],a[p+1]=n[k+1],a[p+2]=n[k+2],a[p+3]=n[k+3];else if(P==1){var M=n[k+3]*.00392156862745098,u=n[k]*M,c=n[k+1]*M,m=n[k+2]*M,y=a[p+3]*(1/255),w=a[p]*y,U=a[p+1]*y,g=a[p+2]*y;let s=1-M,L=M+y*s,R=L==0?0:1/L;a[p+3]=255*L,a[p+0]=(u+w*s)*R,a[p+1]=(c+U*s)*R,a[p+2]=(m+g*s)*R}else if(P==2)M=n[k+3],u=n[k],c=n[k+1],m=n[k+2],y=a[p+3],w=a[p],U=a[p+1],g=a[p+2],M==y&&u==w&&c==U&&m==g?(a[p]=0,a[p+1]=0,a[p+2]=0,a[p+3]=0):(a[p]=u,a[p+1]=c,a[p+2]=m,a[p+3]=M);else if(P==3){if(M=n[k+3],u=n[k],c=n[k+1],m=n[k+2],y=a[p+3],w=a[p],U=a[p+1],g=a[p+2],M==y&&u==w&&c==U&&m==g)continue;if(M<220&&y>20)return!1}return!0}return{decode:function(i){let r=new Uint8Array(i),a=8,h=S,E=h.readUshort,B=h.readUint,v={tabs:{},frames:[]},P=new Uint8Array(r.length),Q,I=0,k=0,p=[137,80,78,71,13,10,26,10];for(var M=0;M<8;M++)if(r[M]!=p[M])throw"The input is not a PNG file!";for(;a<r.length;){let F=h.readUint(r,a);a+=4;let d=h.readASCII(r,a,4);if(a+=4,d=="IHDR")A(r,a,v);else if(d=="iCCP"){for(var u=a;r[u]!=0;)u++;h.readASCII(r,a,u-a),r[u+1];let s=r.slice(u+2,a+F),L=null;try{L=o(s)}catch{L=e(s)}v.tabs[d]=L}else if(d=="CgBI")v.tabs[d]=r.slice(a,a+4);else if(d=="IDAT"){for(M=0;M<F;M++)P[I+M]=r[a+M];I+=F}else if(d=="acTL")v.tabs[d]={num_frames:B(r,a),num_plays:B(r,a+4)},Q=new Uint8Array(r.length);else if(d=="fcTL"){k!=0&&((g=v.frames[v.frames.length-1]).data=x(v,Q.slice(0,k),g.rect.width,g.rect.height),k=0);let s={x:B(r,a+12),y:B(r,a+16),width:B(r,a+4),height:B(r,a+8)},L=E(r,a+22);L=E(r,a+20)/(L==0?100:L);let R={rect:s,delay:Math.round(1e3*L),dispose:r[a+24],blend:r[a+25]};v.frames.push(R)}else if(d=="fdAT"){for(M=0;M<F-4;M++)Q[k+M]=r[a+M+4];k+=F-4}else if(d=="pHYs")v.tabs[d]=[h.readUint(r,a),h.readUint(r,a+4),r[a+8]];else if(d=="cHRM")for(v.tabs[d]=[],M=0;M<8;M++)v.tabs[d].push(h.readUint(r,a+4*M));else if(d=="tEXt"||d=="zTXt"){v.tabs[d]==null&&(v.tabs[d]={});var c=h.nextZero(r,a),m=h.readASCII(r,a,c-a),y=a+F-c-1;if(d=="tEXt")U=h.readASCII(r,c+1,y);else{var w=o(r.slice(c+2,c+2+y));U=h.readUTF8(w,0,w.length)}v.tabs[d][m]=U}else if(d=="iTXt"){v.tabs[d]==null&&(v.tabs[d]={}),c=0,u=a,c=h.nextZero(r,u),m=h.readASCII(r,u,c-u);let s=r[u=c+1];var U;r[u+1],u+=2,c=h.nextZero(r,u),h.readASCII(r,u,c-u),u=c+1,c=h.nextZero(r,u),h.readUTF8(r,u,c-u),y=F-((u=c+1)-a),s==0?U=h.readUTF8(r,u,y):(w=o(r.slice(u,u+y)),U=h.readUTF8(w,0,w.length)),v.tabs[d][m]=U}else if(d=="PLTE")v.tabs[d]=h.readBytes(r,a,F);else if(d=="hIST"){let s=v.tabs.PLTE.length/3;for(v.tabs[d]=[],M=0;M<s;M++)v.tabs[d].push(E(r,a+2*M))}else if(d=="tRNS")v.ctype==3?v.tabs[d]=h.readBytes(r,a,F):v.ctype==0?v.tabs[d]=E(r,a):v.ctype==2&&(v.tabs[d]=[E(r,a),E(r,a+2),E(r,a+4)]);else if(d=="gAMA")v.tabs[d]=h.readUint(r,a)/1e5;else if(d=="sRGB")v.tabs[d]=r[a];else if(d=="bKGD")v.ctype==0||v.ctype==4?v.tabs[d]=[E(r,a)]:v.ctype==2||v.ctype==6?v.tabs[d]=[E(r,a),E(r,a+2),E(r,a+4)]:v.ctype==3&&(v.tabs[d]=r[a]);else if(d=="IEND")break;a+=F,h.readUint(r,a),a+=4}var g;return k!=0&&((g=v.frames[v.frames.length-1]).data=x(v,Q.slice(0,k),g.rect.width,g.rect.height)),v.data=x(v,P,v.width,v.height),delete v.compress,delete v.interlace,delete v.filter,v},toRGBA8:function(i){let r=i.width,a=i.height;if(i.tabs.acTL==null)return[T(i.data,r,a,i).buffer];let h=[];i.frames[0].data==null&&(i.frames[0].data=i.data);let E=r*a*4,B=new Uint8Array(E),v=new Uint8Array(E),P=new Uint8Array(E);for(let I=0;I<i.frames.length;I++){let k=i.frames[I],p=k.rect.x,M=k.rect.y,u=k.rect.width,c=k.rect.height,m=T(k.data,u,c,i);if(I!=0)for(var Q=0;Q<E;Q++)P[Q]=B[Q];if(k.blend==0?b(m,u,c,B,r,a,p,M,0):k.blend==1&&b(m,u,c,B,r,a,p,M,1),h.push(B.buffer.slice(0)),k.dispose!=0){if(k.dispose==1)b(v,u,c,B,r,a,p,M,0);else if(k.dispose==2)for(Q=0;Q<E;Q++)B[Q]=P[Q]}}return h},_paeth:f,_copyTile:b,_bin:S}}();(function(){let{_copyTile:S}=he,{_bin:T}=he,x=he._paeth;var o={table:function(){let u=new Uint32Array(256);for(let c=0;c<256;c++){let m=c;for(let y=0;y<8;y++)1&m?m=3988292384^m>>>1:m>>>=1;u[c]=m}return u}(),update(u,c,m,y){for(let w=0;w<y;w++)u=o.table[255&(u^c[m+w])]^u>>>8;return u},crc:(u,c,m)=>4294967295^o.update(4294967295,u,c,m)};function e(u,c,m,y){c[m]+=u[0]*y>>4,c[m+1]+=u[1]*y>>4,c[m+2]+=u[2]*y>>4,c[m+3]+=u[3]*y>>4}function t(u){return Math.max(0,Math.min(255,u))}function l(u,c){let m=u[0]-c[0],y=u[1]-c[1],w=u[2]-c[2],U=u[3]-c[3];return m*m+y*y+w*w+U*U}function f(u,c,m,y,w,U,g){g==null&&(g=1);let F=y.length,d=[];for(var s=0;s<F;s++){let C=y[s];d.push([C>>>0&255,C>>>8&255,C>>>16&255,C>>>24&255])}for(s=0;s<F;s++){let C=4294967295;for(var L=0,R=0;R<F;R++){var _=l(d[s],d[R]);R!=s&&_<C&&(C=_,L=R)}}let z=new Uint32Array(w.buffer),D=new Int16Array(c*m*4),H=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(s=0;s<H.length;s++)H[s]=255*((H[s]+.5)/16-.5);for(let C=0;C<m;C++)for(let W=0;W<c;W++){var O;s=4*(C*c+W),g!=2?O=[t(u[s]+D[s]),t(u[s+1]+D[s+1]),t(u[s+2]+D[s+2]),t(u[s+3]+D[s+3])]:(_=H[4*(3&C)+(3&W)],O=[t(u[s]+_),t(u[s+1]+_),t(u[s+2]+_),t(u[s+3]+_)]),L=0;let G=16777215;for(R=0;R<F;R++){let $=l(O,d[R]);$<G&&(G=$,L=R)}let j=d[L],N=[O[0]-j[0],O[1]-j[1],O[2]-j[2],O[3]-j[3]];g==1&&(W!=c-1&&e(N,D,s+4,7),C!=m-1&&(W!=0&&e(N,D,s+4*c-4,3),e(N,D,s+4*c,5),W!=c-1&&e(N,D,s+4*c+4,1))),U[s>>2]=L,z[s>>2]=y[L]}}function A(u,c,m,y,w){w==null&&(w={});let{crc:U}=o,g=T.writeUint,F=T.writeUshort,d=T.writeASCII,s=8,L=u.frames.length>1,R,_=!1,z=33+(L?20:0);if(w.sRGB!=null&&(z+=13),w.pHYs!=null&&(z+=21),w.iCCP!=null&&(R=pako.deflate(w.iCCP),z+=21+R.length+4),u.ctype==3){for(var D=u.plte.length,H=0;H<D;H++)u.plte[H]>>>24!=255&&(_=!0);z+=8+3*D+4+(_?8+1*D+4:0)}for(var O=0;O<u.frames.length;O++)L&&(z+=38),z+=(j=u.frames[O]).cimg.length+12,O!=0&&(z+=4);z+=12;let C=new Uint8Array(z),W=[137,80,78,71,13,10,26,10];for(H=0;H<8;H++)C[H]=W[H];if(g(C,s,13),s+=4,d(C,s,"IHDR"),s+=4,g(C,s,c),s+=4,g(C,s,m),s+=4,C[s]=u.depth,s++,C[s]=u.ctype,s++,C[s]=0,s++,C[s]=0,s++,C[s]=0,s++,g(C,s,U(C,s-17,17)),s+=4,w.sRGB!=null&&(g(C,s,1),s+=4,d(C,s,"sRGB"),s+=4,C[s]=w.sRGB,s++,g(C,s,U(C,s-5,5)),s+=4),w.iCCP!=null){let N=13+R.length;g(C,s,N),s+=4,d(C,s,"iCCP"),s+=4,d(C,s,"ICC profile"),s+=11,s+=2,C.set(R,s),s+=R.length,g(C,s,U(C,s-(N+4),N+4)),s+=4}if(w.pHYs!=null&&(g(C,s,9),s+=4,d(C,s,"pHYs"),s+=4,g(C,s,w.pHYs[0]),s+=4,g(C,s,w.pHYs[1]),s+=4,C[s]=w.pHYs[2],s++,g(C,s,U(C,s-13,13)),s+=4),L&&(g(C,s,8),s+=4,d(C,s,"acTL"),s+=4,g(C,s,u.frames.length),s+=4,g(C,s,w.loop!=null?w.loop:0),s+=4,g(C,s,U(C,s-12,12)),s+=4),u.ctype==3){for(g(C,s,3*(D=u.plte.length)),s+=4,d(C,s,"PLTE"),s+=4,H=0;H<D;H++){let N=3*H,$=u.plte[H],X=255&$,ee=$>>>8&255,ye=$>>>16&255;C[s+N+0]=X,C[s+N+1]=ee,C[s+N+2]=ye}if(s+=3*D,g(C,s,U(C,s-3*D-4,3*D+4)),s+=4,_){for(g(C,s,D),s+=4,d(C,s,"tRNS"),s+=4,H=0;H<D;H++)C[s+H]=u.plte[H]>>>24&255;s+=D,g(C,s,U(C,s-D-4,D+4)),s+=4}}let G=0;for(O=0;O<u.frames.length;O++){var j=u.frames[O];L&&(g(C,s,26),s+=4,d(C,s,"fcTL"),s+=4,g(C,s,G++),s+=4,g(C,s,j.rect.width),s+=4,g(C,s,j.rect.height),s+=4,g(C,s,j.rect.x),s+=4,g(C,s,j.rect.y),s+=4,F(C,s,y[O]),s+=2,F(C,s,1e3),s+=2,C[s]=j.dispose,s++,C[s]=j.blend,s++,g(C,s,U(C,s-30,30)),s+=4);let N=j.cimg;g(C,s,(D=N.length)+(O==0?0:4)),s+=4;let $=s;d(C,s,O==0?"IDAT":"fdAT"),s+=4,O!=0&&(g(C,s,G++),s+=4),C.set(N,s),s+=D,g(C,s,U(C,$,s-$)),s+=4}return g(C,s,0),s+=4,d(C,s,"IEND"),s+=4,g(C,s,U(C,s-4,4)),s+=4,C.buffer}function b(u,c,m){for(let y=0;y<u.frames.length;y++){let w=u.frames[y];w.rect.width;let U=w.rect.height,g=new Uint8Array(U*w.bpl+U);w.cimg=a(w.img,U,w.bpp,w.bpl,g,c,m)}}function n(u,c,m,y,w){let U=w[0],g=w[1],F=w[2],d=w[3],s=w[4],L=w[5],R=6,_=8,z=255;for(var D=0;D<u.length;D++){let ne=new Uint8Array(u[D]);for(var H=ne.length,O=0;O<H;O+=4)z&=ne[O+3]}let C=z!=255,W=function(V,K,te,oe,Y,fe){let J=[];for(var q=0;q<V.length;q++){let ae=new Uint8Array(V[q]),ue=new Uint32Array(ae.buffer);var le;let ce=0,me=0,pe=K,Ue=te,je=oe?1:0;if(q!=0){let Ut=fe||oe||q==1||J[q-2].dispose!=0?1:2,$e=0,Je=1e9;for(let _e=0;_e<Ut;_e++){var ve=new Uint8Array(V[q-1-_e]);let Ft=new Uint32Array(V[q-1-_e]),be=K,we=te,Ie=-1,Qe=-1;for(let Fe=0;Fe<te;Fe++)for(let Re=0;Re<K;Re++)ue[ie=Fe*K+Re]!=Ft[ie]&&(Re<be&&(be=Re),Re>Ie&&(Ie=Re),Fe<we&&(we=Fe),Fe>Qe&&(Qe=Fe));Ie==-1&&(be=we=Ie=Qe=0),Y&&((1&be)==1&&be--,(1&we)==1&&we--);let et=(Ie-be+1)*(Qe-we+1);et<Je&&(Je=et,$e=_e,ce=be,me=we,pe=Ie-be+1,Ue=Qe-we+1)}ve=new Uint8Array(V[q-1-$e]),$e==1&&(J[q-1].dispose=2),le=new Uint8Array(pe*Ue*4),S(ve,K,te,le,pe,Ue,-ce,-me,0),je=S(ae,K,te,le,pe,Ue,-ce,-me,3)?1:0,je==1?r(ae,K,te,le,{x:ce,y:me,width:pe,height:Ue}):S(ae,K,te,le,pe,Ue,-ce,-me,0)}else le=ae.slice(0);J.push({rect:{x:ce,y:me,width:pe,height:Ue},img:le,blend:je,dispose:0})}if(oe)for(q=0;q<J.length;q++){if((Ee=J[q]).blend==1)continue;let ae=Ee.rect,ue=J[q-1].rect,ce=Math.min(ae.x,ue.x),me=Math.min(ae.y,ue.y),pe={x:ce,y:me,width:Math.max(ae.x+ae.width,ue.x+ue.width)-ce,height:Math.max(ae.y+ae.height,ue.y+ue.height)-me};J[q-1].dispose=1,q-1!=0&&i(V,K,te,J,q-1,pe,Y),i(V,K,te,J,q,pe,Y)}let ke=0;if(V.length!=1)for(var ie=0;ie<J.length;ie++){var Ee;ke+=(Ee=J[ie]).rect.width*Ee.rect.height}return J}(u,c,m,U,g,F),G={},j=[],N=[];if(y!=0){let ne=[];for(O=0;O<W.length;O++)ne.push(W[O].img.buffer);let V=function(Y){let fe=0;for(var J=0;J<Y.length;J++)fe+=Y[J].byteLength;let q=new Uint8Array(fe),le=0;for(J=0;J<Y.length;J++){let ve=new Uint8Array(Y[J]),ke=ve.length;for(let ie=0;ie<ke;ie+=4){let Ee=ve[ie],ae=ve[ie+1],ue=ve[ie+2],ce=ve[ie+3];ce==0&&(Ee=ae=ue=0),q[le+ie]=Ee,q[le+ie+1]=ae,q[le+ie+2]=ue,q[le+ie+3]=ce}le+=ke}return q.buffer}(ne),K=E(V,y);for(O=0;O<K.plte.length;O++)j.push(K.plte[O].est.rgba);let te=0;for(O=0;O<W.length;O++){let oe=(X=W[O]).img.length;var $=new Uint8Array(K.inds.buffer,te>>2,oe>>2);N.push($);let Y=new Uint8Array(K.abuf,te,oe);L&&f(X.img,X.rect.width,X.rect.height,j,Y,$),X.img.set(Y),te+=oe}}else for(D=0;D<W.length;D++){var X=W[D];let ne=new Uint32Array(X.img.buffer);var ee=X.rect.width;for(H=ne.length,$=new Uint8Array(H),N.push($),O=0;O<H;O++){let V=ne[O];if(O!=0&&V==ne[O-1])$[O]=$[O-1];else if(O>ee&&V==ne[O-ee])$[O]=$[O-ee];else{let K=G[V];if(K==null&&(G[V]=K=j.length,j.push(V),j.length>=300))break;$[O]=K}}}let ye=j.length;for(ye<=256&&s==0&&(_=ye<=2?1:ye<=4?2:ye<=16?4:8,_=Math.max(_,d)),D=0;D<W.length;D++){(X=W[D]).rect.x,X.rect.y,ee=X.rect.width;let ne=X.rect.height,V=X.img;new Uint32Array(V.buffer);let K=4*ee,te=4;if(ye<=256&&s==0){K=Math.ceil(_*ee/8);var Ae=new Uint8Array(K*ne);let oe=N[D];for(let Y=0;Y<ne;Y++){O=Y*K;let fe=Y*ee;if(_==8)for(var Z=0;Z<ee;Z++)Ae[O+Z]=oe[fe+Z];else if(_==4)for(Z=0;Z<ee;Z++)Ae[O+(Z>>1)]|=oe[fe+Z]<<4-4*(1&Z);else if(_==2)for(Z=0;Z<ee;Z++)Ae[O+(Z>>2)]|=oe[fe+Z]<<6-2*(3&Z);else if(_==1)for(Z=0;Z<ee;Z++)Ae[O+(Z>>3)]|=oe[fe+Z]<<7-1*(7&Z)}V=Ae,R=3,te=1}else if(C==0&&W.length==1){Ae=new Uint8Array(ee*ne*3);let oe=ee*ne;for(O=0;O<oe;O++){let Y=3*O,fe=4*O;Ae[Y]=V[fe],Ae[Y+1]=V[fe+1],Ae[Y+2]=V[fe+2]}V=Ae,R=2,te=3,K=3*ee}X.img=V,X.bpl=K,X.bpp=te}return{ctype:R,depth:_,plte:j,frames:W}}function i(u,c,m,y,w,U,g){let F=Uint8Array,d=Uint32Array,s=new F(u[w-1]),L=new d(u[w-1]),R=w+1<u.length?new F(u[w+1]):null,_=new F(u[w]),z=new d(_.buffer),D=c,H=m,O=-1,C=-1;for(let G=0;G<U.height;G++)for(let j=0;j<U.width;j++){let N=U.x+j,$=U.y+G,X=$*c+N,ee=z[X];ee==0||y[w-1].dispose==0&&L[X]==ee&&(R==null||R[4*X+3]!=0)||(N<D&&(D=N),N>O&&(O=N),$<H&&(H=$),$>C&&(C=$))}O==-1&&(D=H=O=C=0),g&&((1&D)==1&&D--,(1&H)==1&&H--),U={x:D,y:H,width:O-D+1,height:C-H+1};let W=y[w];W.rect=U,W.blend=1,W.img=new Uint8Array(U.width*U.height*4),y[w-1].dispose==0?(S(s,c,m,W.img,U.width,U.height,-U.x,-U.y,0),r(_,c,m,W.img,U)):S(_,c,m,W.img,U.width,U.height,-U.x,-U.y,0)}function r(u,c,m,y,w){S(u,c,m,y,w.width,w.height,-w.x,-w.y,2)}function a(u,c,m,y,w,U,g){let F=[],d,s=[0,1,2,3,4];U!=-1?s=[U]:(c*y>5e5||m==1)&&(s=[0]),g&&(d={level:0});let L=It;for(var R=0;R<s.length;R++){for(let D=0;D<c;D++)h(w,u,D,y,m,s[R]);F.push(L.deflate(w,d))}let _,z=1e9;for(R=0;R<F.length;R++)F[R].length<z&&(_=R,z=F[R].length);return F[_]}function h(u,c,m,y,w,U){let g=m*y,F=g+m;if(u[F]=U,F++,U==0)if(y<500)for(var d=0;d<y;d++)u[F+d]=c[g+d];else u.set(new Uint8Array(c.buffer,g,y),F);else if(U==1){for(d=0;d<w;d++)u[F+d]=c[g+d];for(d=w;d<y;d++)u[F+d]=c[g+d]-c[g+d-w]+256&255}else if(m==0){for(d=0;d<w;d++)u[F+d]=c[g+d];if(U==2)for(d=w;d<y;d++)u[F+d]=c[g+d];if(U==3)for(d=w;d<y;d++)u[F+d]=c[g+d]-(c[g+d-w]>>1)+256&255;if(U==4)for(d=w;d<y;d++)u[F+d]=c[g+d]-x(c[g+d-w],0,0)+256&255}else{if(U==2)for(d=0;d<y;d++)u[F+d]=c[g+d]+256-c[g+d-y]&255;if(U==3){for(d=0;d<w;d++)u[F+d]=c[g+d]+256-(c[g+d-y]>>1)&255;for(d=w;d<y;d++)u[F+d]=c[g+d]+256-(c[g+d-y]+c[g+d-w]>>1)&255}if(U==4){for(d=0;d<w;d++)u[F+d]=c[g+d]+256-x(0,c[g+d-y],0)&255;for(d=w;d<y;d++)u[F+d]=c[g+d]+256-x(c[g+d-w],c[g+d-y],c[g+d-w-y])&255}}}function E(u,c){let m=new Uint8Array(u),y=m.slice(0),w=new Uint32Array(y.buffer),U=B(y,c),g=U[0],F=U[1],d=m.length,s=new Uint8Array(d>>2),L;if(m.length<2e7)for(var R=0;R<d;R+=4)L=v(g,_=m[R]*(1/255),z=m[R+1]*(1/255),D=m[R+2]*(1/255),H=m[R+3]*(1/255)),s[R>>2]=L.ind,w[R>>2]=L.est.rgba;else for(R=0;R<d;R+=4){var _=m[R]*.00392156862745098,z=m[R+1]*(1/255),D=m[R+2]*(1/255),H=m[R+3]*(1/255);for(L=g;L.left;)L=P(L.est,_,z,D,H)<=0?L.left:L.right;s[R>>2]=L.ind,w[R>>2]=L.est.rgba}return{abuf:y.buffer,inds:s,plte:F}}function B(u,c,m){m==null&&(m=1e-4);let y=new Uint32Array(u.buffer),w={i0:0,i1:u.length,bst:null,est:null,tdst:0,left:null,right:null};w.bst=k(u,w.i0,w.i1),w.est=p(w.bst);let U=[w];for(;U.length<c;){let F=0,d=0;for(var g=0;g<U.length;g++)U[g].est.L>F&&(F=U[g].est.L,d=g);if(F<m)break;let s=U[d],L=Q(u,y,s.i0,s.i1,s.est.e,s.est.eMq255);if(s.i0>=L||s.i1<=L){s.est.L=0;continue}let R={i0:s.i0,i1:L,bst:null,est:null,tdst:0,left:null,right:null};R.bst=k(u,R.i0,R.i1),R.est=p(R.bst);let _={i0:L,i1:s.i1,bst:null,est:null,tdst:0,left:null,right:null};for(_.bst={R:[],m:[],N:s.bst.N-R.bst.N},g=0;g<16;g++)_.bst.R[g]=s.bst.R[g]-R.bst.R[g];for(g=0;g<4;g++)_.bst.m[g]=s.bst.m[g]-R.bst.m[g];_.est=p(_.bst),s.left=R,s.right=_,U[d]=R,U.push(_)}for(U.sort((F,d)=>d.bst.N-F.bst.N),g=0;g<U.length;g++)U[g].ind=g;return[w,U]}function v(u,c,m,y,w){if(u.left==null)return u.tdst=function(R,_,z,D,H){let O=_-R[0],C=z-R[1],W=D-R[2],G=H-R[3];return O*O+C*C+W*W+G*G}(u.est.q,c,m,y,w),u;let U=P(u.est,c,m,y,w),g=u.left,F=u.right;U>0&&(g=u.right,F=u.left);let d=v(g,c,m,y,w);if(d.tdst<=U*U)return d;let s=v(F,c,m,y,w);return s.tdst<d.tdst?s:d}function P(u,c,m,y,w){let{e:U}=u;return U[0]*c+U[1]*m+U[2]*y+U[3]*w-u.eMq}function Q(u,c,m,y,w,U){for(y-=4;m<y;){for(;I(u,m,w)<=U;)m+=4;for(;I(u,y,w)>U;)y-=4;if(m>=y)break;let g=c[m>>2];c[m>>2]=c[y>>2],c[y>>2]=g,m+=4,y-=4}for(;I(u,m,w)>U;)m-=4;return m+4}function I(u,c,m){return u[c]*m[0]+u[c+1]*m[1]+u[c+2]*m[2]+u[c+3]*m[3]}function k(u,c,m){let y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],w=[0,0,0,0],U=m-c>>2;for(let g=c;g<m;g+=4){let F=u[g]*.00392156862745098,d=u[g+1]*(1/255),s=u[g+2]*(1/255),L=u[g+3]*(1/255);w[0]+=F,w[1]+=d,w[2]+=s,w[3]+=L,y[0]+=F*F,y[1]+=F*d,y[2]+=F*s,y[3]+=F*L,y[5]+=d*d,y[6]+=d*s,y[7]+=d*L,y[10]+=s*s,y[11]+=s*L,y[15]+=L*L}return y[4]=y[1],y[8]=y[2],y[9]=y[6],y[12]=y[3],y[13]=y[7],y[14]=y[11],{R:y,m:w,N:U}}function p(u){let{R:c}=u,{m}=u,{N:y}=u,w=m[0],U=m[1],g=m[2],F=m[3],d=y==0?0:1/y,s=[c[0]-w*w*d,c[1]-w*U*d,c[2]-w*g*d,c[3]-w*F*d,c[4]-U*w*d,c[5]-U*U*d,c[6]-U*g*d,c[7]-U*F*d,c[8]-g*w*d,c[9]-g*U*d,c[10]-g*g*d,c[11]-g*F*d,c[12]-F*w*d,c[13]-F*U*d,c[14]-F*g*d,c[15]-F*F*d],L=s,R=M,_=[Math.random(),Math.random(),Math.random(),Math.random()],z=0,D=0;if(y!=0)for(let O=0;O<16&&(_=R.multVec(L,_),D=Math.sqrt(R.dot(_,_)),_=R.sml(1/D,_),!(O!=0&&Math.abs(D-z)<1e-9));O++)z=D;let H=[w*d,U*d,g*d,F*d];return{Cov:s,q:H,e:_,L:z,eMq255:R.dot(R.sml(255,H),_),eMq:R.dot(_,H),rgba:(Math.round(255*H[3])<<24|Math.round(255*H[2])<<16|Math.round(255*H[1])<<8|Math.round(255*H[0])<<0)>>>0}}var M={multVec:(u,c)=>[u[0]*c[0]+u[1]*c[1]+u[2]*c[2]+u[3]*c[3],u[4]*c[0]+u[5]*c[1]+u[6]*c[2]+u[7]*c[3],u[8]*c[0]+u[9]*c[1]+u[10]*c[2]+u[11]*c[3],u[12]*c[0]+u[13]*c[1]+u[14]*c[2]+u[15]*c[3]],dot:(u,c)=>u[0]*c[0]+u[1]*c[1]+u[2]*c[2]+u[3]*c[3],sml:(u,c)=>[u*c[0],u*c[1],u*c[2],u*c[3]]};he.encode=function(c,m,y,w,U,g,F){w==null&&(w=0),F==null&&(F=!1);let d=n(c,m,y,w,[!1,!1,!1,0,F,!1]);return b(d,-1),A(d,m,y,U,g)},he.encodeLL=function(c,m,y,w,U,g,F,d){let s={ctype:0+(w==1?0:2)+(U==0?0:4),depth:g,frames:[]},L=(w+U)*g,R=L*m;for(let _=0;_<c.length;_++)s.frames.push({rect:{x:0,y:0,width:m,height:y},img:new Uint8Array(c[_]),blend:0,dispose:1,bpp:Math.ceil(L/8),bpl:Math.ceil(R/8)});return b(s,0,!0),A(s,m,y,F,d)},he.encode.compress=n,he.encode.dither=f,he.quantize=E,he.quantize.getKDtree=B,he.quantize.getNearest=v})();var ht={toArrayBuffer(S,T){let x=S.width,o=S.height,e=x<<2,t=S.getContext("2d").getImageData(0,0,x,o),l=new Uint32Array(t.data.buffer),f=(32*x+31)/32<<2,A=f*o,b=122+A,n=new ArrayBuffer(b),i=new DataView(n),r=1<<20,a,h,E,B,v=r,P=0,Q=0,I=0;function k(u){i.setUint16(Q,u,!0),Q+=2}function p(u){i.setUint32(Q,u,!0),Q+=4}function M(u){Q+=u}k(19778),p(b),M(4),p(122),p(108),p(x),p(-o>>>0),k(1),k(32),p(3),p(A),p(2835),p(2835),M(8),p(16711680),p(65280),p(255),p(4278190080),p(1466527264),function u(){for(;P<o&&v>0;){for(B=122+P*f,a=0;a<e;)v--,h=l[I++],E=h>>>24,i.setUint32(B+a,h<<8|E),a+=4;P++}I<l.length?(v=r,setTimeout(u,ht._dly)):T(n)}()},toBlob(S,T){this.toArrayBuffer(S,x=>{T(new Blob([x],{type:"image/bmp"}))})},_dly:9},se={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},Ct={[se.CHROME]:16384,[se.FIREFOX]:11180,[se.DESKTOP_SAFARI]:16384,[se.IE]:8192,[se.IOS]:4096,[se.ETC]:8192},Xe=typeof window<"u",At=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,He=Xe&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),St=(Xe||At)&&(He&&He.getOriginalSymbol(window,"File")||typeof File<"u"&&File),pt=(Xe||At)&&(He&&He.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Ye(S,T,x=Date.now()){return new Promise(o=>{let e=S.split(","),t=e[0].match(/:(.*?);/)[1],l=globalThis.atob(e[1]),f=l.length,A=new Uint8Array(f);for(;f--;)A[f]=l.charCodeAt(f);let b=new Blob([A],{type:t});b.name=T,b.lastModified=x,o(b)})}function gt(S){return new Promise((T,x)=>{let o=new pt;o.onload=()=>T(o.result),o.onerror=e=>x(e),o.readAsDataURL(S)})}function mt(S){return new Promise((T,x)=>{let o=new Image;o.onload=()=>T(o),o.onerror=e=>x(e),o.src=S})}function Be(){if(Be.cachedResult!==void 0)return Be.cachedResult;let S=se.ETC,{userAgent:T}=navigator;return/Chrom(e|ium)/i.test(T)?S=se.CHROME:/iP(ad|od|hone)/i.test(T)&&/WebKit/i.test(T)?S=se.IOS:/Safari/i.test(T)?S=se.DESKTOP_SAFARI:/Firefox/i.test(T)?S=se.FIREFOX:(/MSIE/i.test(T)||document.documentMode)&&(S=se.IE),Be.cachedResult=S,Be.cachedResult}function vt(S,T){let x=Be(),o=Ct[x],e=S,t=T,l=e*t,f=e>t?t/e:e/t;for(;l>o*o;){let A=(o+e)/2,b=(o+t)/2;A<b?(t=b,e=b*f):(t=A*f,e=A),l=e*t}return{width:e,height:t}}function Ne(S,T){let x,o;try{if(x=new OffscreenCanvas(S,T),o=x.getContext("2d"),o===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{x=document.createElement("canvas"),o=x.getContext("2d")}return x.width=S,x.height=T,[x,o]}function bt(S,T){let{width:x,height:o}=vt(S.width,S.height),[e,t]=Ne(x,o);return T&&/jpe?g/.test(T)&&(t.fillStyle="white",t.fillRect(0,0,e.width,e.height)),t.drawImage(S,0,0,e.width,e.height),e}function Oe(){return Oe.cachedResult!==void 0||(Oe.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Oe.cachedResult}function ze(S,T={}){return new Promise(function(x,o){let e,t;var l=function(){try{return t=bt(e,T.fileType||S.type),x([e,t])}catch(A){return o(A)}},f=function(A){try{var b=function(n){try{throw n}catch(i){return o(i)}};try{let n;return gt(S).then(function(i){try{return n=i,mt(n).then(function(r){try{return e=r,function(){try{return l()}catch(a){return o(a)}}()}catch(a){return b(a)}},b)}catch(r){return b(r)}},b)}catch(n){b(n)}}catch(n){return o(n)}};try{if(Oe()||[se.DESKTOP_SAFARI,se.MOBILE_SAFARI].includes(Be()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(S).then(function(A){try{return e=A,l()}catch{return f()}},f)}catch{f()}})}function We(S,T,x,o,e=1){return new Promise(function(t,l){let f;if(T==="image/png"){let i,r,a;return i=S.getContext("2d"),{data:r}=i.getImageData(0,0,S.width,S.height),a=he.encode([r.buffer],S.width,S.height,4096*e),f=new Blob([a],{type:T}),f.name=x,f.lastModified=o,A.call(this)}{let i=function(){return A.call(this)};var b=i;if(T==="image/bmp")return new Promise(r=>ht.toBlob(S,r)).then(function(r){try{return f=r,f.name=x,f.lastModified=o,i.call(this)}catch(a){return l(a)}}.bind(this),l);{let r=function(){return i.call(this)};var n=r;if(typeof OffscreenCanvas=="function"&&S instanceof OffscreenCanvas)return S.convertToBlob({type:T,quality:e}).then(function(a){try{return f=a,f.name=x,f.lastModified=o,r.call(this)}catch(h){return l(h)}}.bind(this),l);{let a;return a=S.toDataURL(T,e),Ye(a,x,o).then(function(h){try{return f=h,r.call(this)}catch(E){return l(E)}}.bind(this),l)}}}function A(){return t(f)}})}function ge(S){S.width=0,S.height=0}function Me(){return new Promise(function(S,T){let x,o,e,t,l;return Me.cachedResult!==void 0?S(Me.cachedResult):(x="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==",Ye("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(f){try{return o=f,ze(o).then(function(A){try{return e=A[1],We(e,o.type,o.name,o.lastModified).then(function(b){try{return t=b,ge(e),ze(t).then(function(n){try{return l=n[0],Me.cachedResult=l.width===1&&l.height===2,S(Me.cachedResult)}catch(i){return T(i)}},T)}catch(n){return T(n)}},T)}catch(b){return T(b)}},T)}catch(A){return T(A)}},T))})}function wt(S){return new Promise((T,x)=>{let o=new pt;o.onload=e=>{let t=new DataView(e.target.result);if(t.getUint16(0,!1)!=65496)return T(-2);let l=t.byteLength,f=2;for(;f<l;){if(t.getUint16(f+2,!1)<=8)return T(-1);let A=t.getUint16(f,!1);if(f+=2,A==65505){if(t.getUint32(f+=2,!1)!=1165519206)return T(-1);let b=t.getUint16(f+=6,!1)==18761;f+=t.getUint32(f+4,b);let n=t.getUint16(f,b);f+=2;for(let i=0;i<n;i++)if(t.getUint16(f+12*i,b)==274)return T(t.getUint16(f+12*i+8,b))}else{if((65280&A)!=65280)break;f+=t.getUint16(f,!1)}}return T(-1)},o.onerror=e=>x(e),o.readAsArrayBuffer(S)})}function yt(S,T){let{width:x}=S,{height:o}=S,{maxWidthOrHeight:e}=T,t,l=S;return isFinite(e)&&(x>e||o>e)&&([l,t]=Ne(x,o),x>o?(l.width=e,l.height=o/x*e):(l.width=x/o*e,l.height=e),t.drawImage(S,0,0,l.width,l.height),ge(S)),l}function Et(S,T){let{width:x}=S,{height:o}=S,[e,t]=Ne(x,o);switch(T>4&&T<9?(e.width=o,e.height=x):(e.width=x,e.height=o),T){case 2:t.transform(-1,0,0,1,x,0);break;case 3:t.transform(-1,0,0,-1,x,o);break;case 4:t.transform(1,0,0,-1,0,o);break;case 5:t.transform(0,1,1,0,0,0);break;case 6:t.transform(0,1,-1,0,o,0);break;case 7:t.transform(0,-1,-1,0,o,x);break;case 8:t.transform(0,-1,1,0,0,x)}return t.drawImage(S,0,0,x,o),ge(S),e}function ut(S,T,x=0){return new Promise(function(o,e){let t,l,f,A,b,n,i,r,a,h,E,B,v,P,Q,I,k,p,M,u;function c(y=5){if(T.signal&&T.signal.aborted)throw T.signal.reason;t+=y,T.onProgress(Math.min(t,100))}function m(y){if(T.signal&&T.signal.aborted)throw T.signal.reason;t=Math.min(Math.max(y,t),100),T.onProgress(t)}return t=x,l=T.maxIteration||10,f=1024*T.maxSizeMB*1024,c(),ze(S,T).then(function(y){try{return[,A]=y,c(),b=yt(A,T),c(),new Promise(function(w,U){var g;if(!(g=T.exifOrientation))return wt(S).then(function(d){try{return g=d,F.call(this)}catch(s){return U(s)}}.bind(this),U);function F(){return w(g)}return F.call(this)}).then(function(w){try{return n=w,c(),Me().then(function(U){try{return i=U?b:Et(b,n),c(),r=T.initialQuality||1,a=T.fileType||S.type,We(i,a,S.name,S.lastModified,r).then(function(g){try{{let L=function(){if(l--&&(Q>f||Q>v)){let _,z;return _=u?.95*M.width:M.width,z=u?.95*M.height:M.height,[k,p]=Ne(_,z),p.drawImage(M,0,0,_,z),r*=a==="image/png"?.85:.95,We(k,a,S.name,S.lastModified,r).then(function(D){try{return I=D,ge(M),M=k,Q=I.size,m(Math.min(99,Math.floor((P-Q)/(P-f)*100))),L}catch(H){return e(H)}},e)}return[1]},R=function(){return ge(M),ge(k),ge(b),ge(i),ge(A),m(100),o(I)};var d=L,s=R;if(h=g,c(),E=h.size>f,B=h.size>S.size,!E&&!B)return m(100),o(h);var F;return v=S.size,P=h.size,Q=P,M=i,u=!T.alwaysKeepResolution&&E,(F=function(_){for(;_;){if(_.then)return void _.then(F,e);try{if(_.pop){if(_.length)return _.pop()?R.call(this):_;_=L}else _=_.call(this)}catch(z){return e(z)}}}.bind(this))(L)}}catch(L){return e(L)}}.bind(this),e)}catch(g){return e(g)}}.bind(this),e)}catch(U){return e(U)}}.bind(this),e)}catch(w){return e(w)}}.bind(this),e)})}var Mt=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`,Ze;function _t(S,T){return new Promise((x,o)=>{Ze||(Ze=function(l){let f=[];return typeof l=="function"?f.push(`(${l})()`):f.push(l),URL.createObjectURL(new Blob(f))}(Mt));let e=new Worker(Ze);e.addEventListener("message",function(l){if(T.signal&&T.signal.aborted)e.terminate();else if(l.data.progress===void 0){if(l.data.error)return o(new Error(l.data.error)),void e.terminate();x(l.data.file),e.terminate()}else T.onProgress(l.data.progress)}),e.addEventListener("error",o),T.signal&&T.signal.addEventListener("abort",()=>{o(T.signal.reason),e.terminate()}),e.postMessage({file:S,imageCompressionLibUrl:T.libURL,options:Te(Ce({},T),{onProgress:void 0,signal:void 0})})})}function re(S,T){return new Promise(function(x,o){let e,t,l,f,A,b;if(e=Ce({},T),l=0,{onProgress:f}=e,e.maxSizeMB=e.maxSizeMB||Number.POSITIVE_INFINITY,A=typeof e.useWebWorker!="boolean"||e.useWebWorker,delete e.useWebWorker,e.onProgress=a=>{l=a,typeof f=="function"&&f(l)},!(S instanceof Blob||S instanceof St))return o(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(S.type))return o(new Error("The file given is not an image"));if(b=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!A||typeof Worker!="function"||b)return ut(S,e).then(function(a){try{return t=a,r.call(this)}catch(h){return o(h)}}.bind(this),o);var n=function(){try{return r.call(this)}catch(a){return o(a)}}.bind(this),i=function(a){try{return ut(S,e).then(function(h){try{return t=h,n()}catch(E){return o(E)}},o)}catch(h){return o(h)}};try{return e.libURL=e.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",_t(S,e).then(function(a){try{return t=a,n()}catch{return i()}},i)}catch{i()}function r(){try{t.name=S.name,t.lastModified=S.lastModified}catch{}try{e.preserveExif&&S.type==="image/jpeg"&&(!e.fileType||e.fileType&&e.fileType===S.type)&&(t=dt(S,t))}catch{}return x(t)}})}re.getDataUrlFromFile=gt,re.getFilefromDataUrl=Ye,re.loadImage=mt,re.drawImageInCanvas=bt,re.drawFileInCanvas=ze,re.canvasToFile=We,re.getExifOrientation=wt,re.handleMaxWidthOrHeight=yt,re.followExifOrientation=Et,re.cleanupCanvasMemory=ge,re.isAutoOrientationInBrowser=Me,re.approximateBelowMaximumCanvasSizeOfBrowser=vt,re.copyExifWithoutOrientation=dt,re.getBrowserName=Be,re.version="2.0.2";var zt=(()=>{class S{constructor(x){this.firebaseService=x,this.adsSubject=new tt([]),this.ads$=this.adsSubject.asObservable(),this.unsubscribe=null,this.handleError=o=>(console.error("AdsService error:",o),nt(()=>o)),this.db=this.firebaseService.db}startListening(x){let o=qe(this.db,"ads"),e=Ge(o,Ve("uploadDate","desc"));x&&(e=Ge(o,at("createdBy","==",x),Ve("uploadDate","desc"))),this.unsubscribe=lt(e,t=>{let l=t.docs.map(f=>{let A=f.data();return Te(Ce({id:f.id},A),{uploadDate:A.uploadDate?.toDate()||new Date,updatedAt:A.updatedAt?.toDate()})});this.adsSubject.next(l)})}stopListening(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)}getAds(){return this.ads$}fromPromise(x){return rt(x())}fileToBase64(x){return new Ke(o=>{let e=new FileReader;return e.onload=()=>{let t=e.result;o.next(t),o.complete()},e.onerror=t=>{o.error(t)},x.type.startsWith("image/")?de(this,null,function*(){try{let t=yield this.compressImage(x);e.readAsDataURL(t)}catch(t){o.error(t)}}):x.type.startsWith("video/")?de(this,null,function*(){try{console.log("\u{1F3AC} Starting video compression...");let t=yield this.compressVideo(x);e.readAsDataURL(t)}catch(t){console.error("Video compression failed, using original:",t),e.readAsDataURL(x)}}):e.readAsDataURL(x),()=>{}})}compressImage(x){return de(this,null,function*(){let o={maxSizeMB:.5,maxWidthOrHeight:1280,useWebWorker:!0,initialQuality:.7};try{let e=yield re(x,o);return console.log(`\u2705 Image compressed: ${(x.size/1024).toFixed(1)}KB \u2192 ${(e.size/1024).toFixed(1)}KB`),e}catch(e){return console.error("Image compression error:",e),x}})}compressVideo(x){return new Promise((o,e)=>{let t=document.createElement("video");t.preload="metadata",t.muted=!0,t.playsInline=!0,t.onloadedmetadata=()=>de(this,null,function*(){let A=t.videoWidth,b=t.videoHeight;if(A>480||b>480){let P=Math.min(480/A,480/b);A=Math.round(A*P),b=Math.round(b*P)}console.log(`\u{1F3AC} Compressing video: ${t.videoWidth}x${t.videoHeight} \u2192 ${A}x${b}`);let n=document.createElement("canvas");n.width=A,n.height=b;let i=n.getContext("2d"),r=n.captureStream(15),a="video/webm;codecs=vp8";MediaRecorder.isTypeSupported(a)||(a="video/webm",MediaRecorder.isTypeSupported(a)||(a="video/mp4"));let h=new MediaRecorder(r,{mimeType:a,videoBitsPerSecond:5e5}),E=[];h.ondataavailable=P=>{P.data.size>0&&E.push(P.data)},h.onstop=()=>{let P=new Blob(E,{type:a.split(";")[0]}),Q=new File([P],x.name.replace(/\.\w+$/,".webm"),{type:"video/webm"});console.log(`\u2705 Video compressed: ${(x.size/1024).toFixed(1)}KB \u2192 ${(Q.size/1024).toFixed(1)}KB`),window.URL.revokeObjectURL(t.src),o(Q)},h.onerror=P=>{e(P)},h.start(),t.currentTime=0;let B=()=>{if(t.paused||t.ended){h.stop();return}i.drawImage(t,0,0,A,b),requestAnimationFrame(B)};t.onplay=()=>{B()},t.onended=()=>{h.stop()},setTimeout(()=>{!t.paused&&!t.ended&&(t.pause(),h.stop())},10*1e3);try{yield t.play()}catch{e(new Error("Failed to play video for compression"))}}),t.onerror=()=>{e(new Error("Failed to load video"))},t.src=URL.createObjectURL(x)})}createAd(x,o){return this.fromPromise(()=>de(this,null,function*(){let e="",t="";x.mediaFile&&(e=(yield this.fileToBase64(x.mediaFile).toPromise())??""),x.thumbnailFile?t=(yield this.fileToBase64(x.thumbnailFile).toPromise())??"":t=x.type==="image"?e:"";let l=9e5,f=e.length+t.length;if(f>l){let i=(f/1024/1024).toFixed(2);throw new Error(`File too large (${i}MB). Please use an image under 500KB or a shorter video (max 10 seconds).`)}let A=this.getResolutionFromAspectRatio(x.aspectRatio),b={title:x.title,type:x.type,status:x.status||"draft",thumbnailBase64:t,mediaBase64:e,aspectRatio:x.aspectRatio,resolution:A,description:x.description||"",targetUrl:x.targetUrl||"",uploadDate:Le.now(),createdBy:o,views:0,impressions:0,clicks:0,ctr:0};return(yield ft(qe(this.db,"ads"),b)).id})).pipe(xe(this.handleError))}updateAd(x,o){return this.fromPromise(()=>de(this,null,function*(){let e=Se(this.db,"ads",x),t=Te(Ce({},o),{updatedAt:Le.now()});o.mediaFile&&(t.mediaBase64=(yield this.fileToBase64(o.mediaFile).toPromise())??"",delete t.mediaFile),o.thumbnailFile&&(t.thumbnailBase64=(yield this.fileToBase64(o.thumbnailFile).toPromise())??"",delete t.thumbnailFile),o.aspectRatio&&(t.resolution=this.getResolutionFromAspectRatio(o.aspectRatio)),yield Pe(e,t)})).pipe(xe(this.handleError))}deleteAd(x){return this.fromPromise(()=>de(this,null,function*(){let o=Se(this.db,"ads",x);yield st(o)})).pipe(xe(this.handleError))}updateAdStatus(x,o){return this.fromPromise(()=>de(this,null,function*(){let e=Se(this.db,"ads",x);yield Pe(e,{status:o,updatedAt:Le.now()})})).pipe(xe(this.handleError))}incrementViews(x){return this.fromPromise(()=>de(this,null,function*(){let o=this.adsSubject.value.find(e=>e.id===x);if(o){let e=Se(this.db,"ads",x);yield Pe(e,{views:(o.views||0)+1})}})).pipe(xe(this.handleError))}incrementClicks(x){return this.fromPromise(()=>de(this,null,function*(){let o=this.adsSubject.value.find(e=>e.id===x);if(o){let e=(o.clicks||0)+1,t=o.impressions||1,l=e/t*100,f=Se(this.db,"ads",x);yield Pe(f,{clicks:e,ctr:parseFloat(l.toFixed(2))})}})).pipe(xe(this.handleError))}getResolutionFromAspectRatio(x){return{"16:9":"1920x1080","9:16":"1080x1920","1:1":"1080x1080","4:5":"1080x1350","4:3":"1024x768","21:9":"2560x1080"}[x]||"1920x1080"}getVideoDuration(x){return new Ke(o=>{let e=document.createElement("video");e.preload="metadata",e.onloadedmetadata=()=>{window.URL.revokeObjectURL(e.src);let t=Math.floor(e.duration),l=Math.floor(t/60),f=t%60;o.next(`${l.toString().padStart(2,"0")}:${f.toString().padStart(2,"0")}`),o.complete()},e.onerror=()=>{o.error(new Error("Failed to load video metadata"))},e.src=URL.createObjectURL(x)})}static{this.\u0275fac=function(o){return new(o||S)(ot(ct))}}static{this.\u0275prov=it({token:S,factory:S.\u0275fac,providedIn:"root"})}}return S})();export{zt as a};
