import{$c as at,P as nt,U as qe,Wc as Le,Xc as Ge,Yc as Ce,Zc as it,_c as ot,c as Ke,ed as Pe,fd as st,g as et,gd as ft,hd as ct,i as tt,k as rt,kd as lt,md as ut,x as Ie}from"./chunk-57FNYN7I.js";import{a as Be,b as Te,g as de}from"./chunk-7QOE2ANW.js";function It(C,T){return T.forEach(function(I){I&&typeof I!="string"&&!Array.isArray(I)&&Object.keys(I).forEach(function(o){if(o!=="default"&&!(o in C)){var e=Object.getOwnPropertyDescriptor(I,o);Object.defineProperty(C,o,e.get?e:{enumerable:!0,get:function(){return I[o]}})}})}),Object.freeze(C)}function ht(C,T){return new Promise(function(I,o){let e;return xt(C).then(function(t){try{return e=t,I(new Blob([T.slice(0,2),e,T.slice(2)],{type:"image/jpeg"}))}catch(c){return o(c)}},o)})}var xt=C=>new Promise((T,I)=>{let o=new FileReader;o.addEventListener("load",({target:{result:e}})=>{let t=new DataView(e),c=0;if(t.getUint16(c)!==65496)return I("not a valid JPEG");for(c+=2;;){let f=t.getUint16(c);if(f===65498)break;let A=t.getUint16(c+2);if(f===65505&&t.getUint32(c+4)===1165519206){let v=c+10,n;switch(t.getUint16(v)){case 18761:n=!0;break;case 19789:n=!1;break;default:return I("TIFF header contains invalid endian")}if(t.getUint16(v+2,n)!==42)return I("TIFF header contains invalid version");let i=t.getUint32(v+4,n),r=v+i+2+12*t.getUint16(v+i,n);for(let a=v+i+2;a<r;a+=12)if(t.getUint16(a,n)==274){if(t.getUint16(a+2,n)!==3)return I("Orientation data type is invalid");if(t.getUint32(a+4,n)!==1)return I("Orientation data count is invalid");t.setUint16(a+8,1,n);break}return T(e.slice(c,c+2+A))}c+=2+A}return T(new Blob)}),o.readAsArrayBuffer(C)}),He={},St={get exports(){return He},set exports(C){He=C}};(function(C){var T,I,o={};St.exports=o,o.parse=function(e,t){for(var c=o.bin.readUshort,f=o.bin.readUint,A=0,v={},n=new Uint8Array(e),i=n.length-4;f(n,i)!=101010256;)i--;A=i,A+=4;var r=c(n,A+=4);c(n,A+=2);var a=f(n,A+=2),h=f(n,A+=4);A+=4,A=h;for(var E=0;E<r;E++){f(n,A),A+=4,A+=4,A+=4,f(n,A+=4),a=f(n,A+=4);var x=f(n,A+=4),b=c(n,A+=4),P=c(n,A+2),Q=c(n,A+4);A+=6;var S=f(n,A+=8);A+=4,A+=b+P+Q,o._readLocal(n,S,v,a,x,t)}return v},o._readLocal=function(e,t,c,f,A,v){var n=o.bin.readUshort,i=o.bin.readUint;i(e,t),n(e,t+=4),n(e,t+=2);var r=n(e,t+=2);i(e,t+=2),i(e,t+=4),t+=4;var a=n(e,t+=8),h=n(e,t+=2);t+=2;var E=o.bin.readUTF8(e,t,a);if(t+=a,t+=h,v)c[E]={size:A,csize:f};else{var x=new Uint8Array(e.buffer,t);if(r==0)c[E]=new Uint8Array(x.buffer.slice(t,t+f));else{if(r!=8)throw"unknown compression method: "+r;var b=new Uint8Array(A);o.inflateRaw(x,b),c[E]=b}}},o.inflateRaw=function(e,t){return o.F.inflate(e,t)},o.inflate=function(e,t){return e[0],e[1],o.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),t)},o.deflate=function(e,t){t==null&&(t={level:6});var c=0,f=new Uint8Array(50+Math.floor(1.1*e.length));f[c]=120,f[c+1]=156,c+=2,c=o.F.deflateRaw(e,f,c,t.level);var A=o.adler(e,0,e.length);return f[c+0]=A>>>24&255,f[c+1]=A>>>16&255,f[c+2]=A>>>8&255,f[c+3]=A>>>0&255,new Uint8Array(f.buffer,0,c+4)},o.deflateRaw=function(e,t){t==null&&(t={level:6});var c=new Uint8Array(50+Math.floor(1.1*e.length)),f=o.F.deflateRaw(e,c,f,t.level);return new Uint8Array(c.buffer,0,f)},o.encode=function(e,t){t==null&&(t=!1);var c=0,f=o.bin.writeUint,A=o.bin.writeUshort,v={};for(var n in e){var i=!o._noNeed(n)&&!t,r=e[n],a=o.crc.crc(r,0,r.length);v[n]={cpr:i,usize:r.length,crc:a,file:i?o.deflateRaw(r):r}}for(var n in v)c+=v[n].file.length+30+46+2*o.bin.sizeUTF8(n);c+=22;var h=new Uint8Array(c),E=0,x=[];for(var n in v){var b=v[n];x.push(E),E=o._writeHeader(h,E,n,b,0)}var P=0,Q=E;for(var n in v)b=v[n],x.push(E),E=o._writeHeader(h,E,n,b,1,x[P++]);var S=E-Q;return f(h,E,101010256),E+=4,A(h,E+=4,P),A(h,E+=2,P),f(h,E+=2,S),f(h,E+=4,Q),E+=4,E+=2,h.buffer},o._noNeed=function(e){var t=e.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(t)!=-1},o._writeHeader=function(e,t,c,f,A,v){var n=o.bin.writeUint,i=o.bin.writeUshort,r=f.file;return n(e,t,A==0?67324752:33639248),t+=4,A==1&&(t+=2),i(e,t,20),i(e,t+=2,0),i(e,t+=2,f.cpr?8:0),n(e,t+=2,0),n(e,t+=4,f.crc),n(e,t+=4,r.length),n(e,t+=4,f.usize),i(e,t+=4,o.bin.sizeUTF8(c)),i(e,t+=2,0),t+=2,A==1&&(t+=2,t+=2,n(e,t+=6,v),t+=4),t+=o.bin.writeUTF8(e,t,c),A==0&&(e.set(r,t),t+=r.length),t},o.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var c=t,f=0;f<8;f++)1&c?c=3988292384^c>>>1:c>>>=1;e[t]=c}return e}(),update:function(e,t,c,f){for(var A=0;A<f;A++)e=o.crc.table[255&(e^t[c+A])]^e>>>8;return e},crc:function(e,t,c){return 4294967295^o.crc.update(4294967295,e,t,c)}},o.adler=function(e,t,c){for(var f=1,A=0,v=t,n=t+c;v<n;){for(var i=Math.min(v+5552,n);v<i;)A+=f+=e[v++];f%=65521,A%=65521}return A<<16|f},o.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,c){e[t]=255&c,e[t+1]=c>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,c){e[t]=255&c,e[t+1]=c>>8&255,e[t+2]=c>>16&255,e[t+3]=c>>24&255},readASCII:function(e,t,c){for(var f="",A=0;A<c;A++)f+=String.fromCharCode(e[t+A]);return f},writeASCII:function(e,t,c){for(var f=0;f<c.length;f++)e[t+f]=c.charCodeAt(f)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,c){for(var f,A="",v=0;v<c;v++)A+="%"+o.bin.pad(e[t+v].toString(16));try{f=decodeURIComponent(A)}catch{return o.bin.readASCII(e,t,c)}return f},writeUTF8:function(e,t,c){for(var f=c.length,A=0,v=0;v<f;v++){var n=c.charCodeAt(v);if(!(4294967168&n))e[t+A]=n,A++;else if(!(4294965248&n))e[t+A]=192|n>>6,e[t+A+1]=128|n>>0&63,A+=2;else if(!(4294901760&n))e[t+A]=224|n>>12,e[t+A+1]=128|n>>6&63,e[t+A+2]=128|n>>0&63,A+=3;else{if(4292870144&n)throw"e";e[t+A]=240|n>>18,e[t+A+1]=128|n>>12&63,e[t+A+2]=128|n>>6&63,e[t+A+3]=128|n>>0&63,A+=4}}return A},sizeUTF8:function(e){for(var t=e.length,c=0,f=0;f<t;f++){var A=e.charCodeAt(f);if(!(4294967168&A))c++;else if(!(4294965248&A))c+=2;else if(!(4294901760&A))c+=3;else{if(4292870144&A)throw"e";c+=4}}return c}},o.F={},o.F.deflateRaw=function(e,t,c,f){var A=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][f],v=o.F.U,n=o.F._goodIndex;o.F._hash;var i=o.F._putsE,r=0,a=c<<3,h=0,E=e.length;if(f==0){for(;r<E;)i(t,a,r+(y=Math.min(65535,E-r))==E?1:0),a=o.F._copyExact(e,r,y,t,a+8),r+=y;return a>>>3}var x=v.lits,b=v.strt,P=v.prev,Q=0,S=0,k=0,p=0,M=0,u=0;for(E>2&&(b[u=o.F._hash(e,0)]=0),r=0;r<E;r++){if(M=u,r+1<E-2){u=o.F._hash(e,r+1);var l=r+1&32767;P[l]=b[u],b[u]=l}if(h<=r){(Q>14e3||S>26697)&&E-r>100&&(h<r&&(x[Q]=r-h,Q+=2,h=r),a=o.F._writeBlock(r==E-1||h==E?1:0,x,Q,p,e,k,r-k,t,a),Q=S=p=0,k=r);var m=0;r<E-2&&(m=o.F._bestMatch(e,r,P,M,Math.min(A[2],E-r),A[3]));var y=m>>>16,w=65535&m;if(m!=0){w=65535&m;var U=n(y=m>>>16,v.of0);v.lhst[257+U]++;var g=n(w,v.df0);v.dhst[g]++,p+=v.exb[U]+v.dxb[g],x[Q]=y<<23|r-h,x[Q+1]=w<<16|U<<8|g,Q+=2,h=r+y}else v.lhst[e[r]]++;S++}}for(k==r&&e.length!=0||(h<r&&(x[Q]=r-h,Q+=2,h=r),a=o.F._writeBlock(1,x,Q,p,e,k,r-k,t,a),Q=0,S=0,Q=S=p=0,k=r);7&a;)a++;return a>>>3},o.F._bestMatch=function(e,t,c,f,A,v){var n=32767&t,i=c[n],r=n-i+32768&32767;if(i==n||f!=o.F._hash(e,t-r))return 0;for(var a=0,h=0,E=Math.min(32767,t);r<=E&&--v!=0&&i!=n;){if(a==0||e[t+a]==e[t+a-r]){var x=o.F._howLong(e,t,r);if(x>a){if(h=r,(a=x)>=A)break;r+2<x&&(x=r+2);for(var b=0,P=0;P<x-2;P++){var Q=t-r+P+32768&32767,S=Q-c[Q]+32768&32767;S>b&&(b=S,i=Q)}}}r+=(n=i)-(i=c[n])+32768&32767}return a<<16|h},o.F._howLong=function(e,t,c){if(e[t]!=e[t-c]||e[t+1]!=e[t+1-c]||e[t+2]!=e[t+2-c])return 0;var f=t,A=Math.min(e.length,t+258);for(t+=3;t<A&&e[t]==e[t-c];)t++;return t-f},o.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},o.saved=0,o.F._writeBlock=function(e,t,c,f,A,v,n,i,r){var a,h,E,x,b,P,Q,S,k,p=o.F.U,M=o.F._putsF,u=o.F._putsE;p.lhst[256]++,h=(a=o.F.getTrees())[0],E=a[1],x=a[2],b=a[3],P=a[4],Q=a[5],S=a[6],k=a[7];var l=32+(r+3&7?8-(r+3&7):0)+(n<<3),m=f+o.F.contSize(p.fltree,p.lhst)+o.F.contSize(p.fdtree,p.dhst),y=f+o.F.contSize(p.ltree,p.lhst)+o.F.contSize(p.dtree,p.dhst);y+=14+3*Q+o.F.contSize(p.itree,p.ihst)+(2*p.ihst[16]+3*p.ihst[17]+7*p.ihst[18]);for(var w=0;w<286;w++)p.lhst[w]=0;for(w=0;w<30;w++)p.dhst[w]=0;for(w=0;w<19;w++)p.ihst[w]=0;var U=l<m&&l<y?0:m<y?1:2;if(M(i,r,e),M(i,r+1,U),r+=3,U==0){for(;7&r;)r++;r=o.F._copyExact(A,v,n,i,r)}else{var g,F;if(U==1&&(g=p.fltree,F=p.fdtree),U==2){o.F.makeCodes(p.ltree,h),o.F.revCodes(p.ltree,h),o.F.makeCodes(p.dtree,E),o.F.revCodes(p.dtree,E),o.F.makeCodes(p.itree,x),o.F.revCodes(p.itree,x),g=p.ltree,F=p.dtree,u(i,r,b-257),u(i,r+=5,P-1),u(i,r+=5,Q-4),r+=4;for(var d=0;d<Q;d++)u(i,r+3*d,p.itree[1+(p.ordr[d]<<1)]);r+=3*Q,r=o.F._codeTiny(S,p.itree,i,r),r=o.F._codeTiny(k,p.itree,i,r)}for(var s=v,L=0;L<c;L+=2){for(var R=t[L],_=R>>>23,z=s+(8388607&R);s<z;)r=o.F._writeLit(A[s++],g,i,r);if(_!=0){var H=t[L+1],D=H>>16,O=H>>8&255,B=255&H;u(i,r=o.F._writeLit(257+O,g,i,r),_-p.of0[O]),r+=p.exb[O],M(i,r=o.F._writeLit(B,F,i,r),D-p.df0[B]),r+=p.dxb[B],s+=_}}r=o.F._writeLit(256,g,i,r)}return r},o.F._copyExact=function(e,t,c,f,A){var v=A>>>3;return f[v]=c,f[v+1]=c>>>8,f[v+2]=255-f[v],f[v+3]=255-f[v+1],v+=4,f.set(new Uint8Array(e.buffer,t,c),v),A+(c+4<<3)},o.F.getTrees=function(){for(var e=o.F.U,t=o.F._hufTree(e.lhst,e.ltree,15),c=o.F._hufTree(e.dhst,e.dtree,15),f=[],A=o.F._lenCodes(e.ltree,f),v=[],n=o.F._lenCodes(e.dtree,v),i=0;i<f.length;i+=2)e.ihst[f[i]]++;for(i=0;i<v.length;i+=2)e.ihst[v[i]]++;for(var r=o.F._hufTree(e.ihst,e.itree,7),a=19;a>4&&e.itree[1+(e.ordr[a-1]<<1)]==0;)a--;return[t,c,r,A,n,a,f,v]},o.F.getSecond=function(e){for(var t=[],c=0;c<e.length;c+=2)t.push(e[c+1]);return t},o.F.nonZero=function(e){for(var t="",c=0;c<e.length;c+=2)e[c+1]!=0&&(t+=(c>>1)+",");return t},o.F.contSize=function(e,t){for(var c=0,f=0;f<t.length;f++)c+=t[f]*e[1+(f<<1)];return c},o.F._codeTiny=function(e,t,c,f){for(var A=0;A<e.length;A+=2){var v=e[A],n=e[A+1];f=o.F._writeLit(v,t,c,f);var i=v==16?2:v==17?3:7;v>15&&(o.F._putsE(c,f,n,i),f+=i)}return f},o.F._lenCodes=function(e,t){for(var c=e.length;c!=2&&e[c-1]==0;)c-=2;for(var f=0;f<c;f+=2){var A=e[f+1],v=f+3<c?e[f+3]:-1,n=f+5<c?e[f+5]:-1,i=f==0?-1:e[f-1];if(A==0&&v==A&&n==A){for(var r=f+5;r+2<c&&e[r+2]==A;)r+=2;(a=Math.min(r+1-f>>>1,138))<11?t.push(17,a-3):t.push(18,a-11),f+=2*a-2}else if(A==i&&v==A&&n==A){for(r=f+5;r+2<c&&e[r+2]==A;)r+=2;var a=Math.min(r+1-f>>>1,6);t.push(16,a-3),f+=2*a-2}else t.push(A,0)}return c>>>1},o.F._hufTree=function(e,t,c){var f=[],A=e.length,v=t.length,n=0;for(n=0;n<v;n+=2)t[n]=0,t[n+1]=0;for(n=0;n<A;n++)e[n]!=0&&f.push({lit:n,f:e[n]});var i=f.length,r=f.slice(0);if(i==0)return 0;if(i==1){var a=f[0].lit;return r=a==0?1:0,t[1+(a<<1)]=1,t[1+(r<<1)]=1,1}f.sort(function(S,k){return S.f-k.f});var h=f[0],E=f[1],x=0,b=1,P=2;for(f[0]={lit:-1,f:h.f+E.f,l:h,r:E,d:0};b!=i-1;)h=x!=b&&(P==i||f[x].f<f[P].f)?f[x++]:f[P++],E=x!=b&&(P==i||f[x].f<f[P].f)?f[x++]:f[P++],f[b++]={lit:-1,f:h.f+E.f,l:h,r:E};var Q=o.F.setDepth(f[b-1],0);for(Q>c&&(o.F.restrictDepth(r,c,Q),Q=c),n=0;n<i;n++)t[1+(r[n].lit<<1)]=r[n].d;return Q},o.F.setDepth=function(e,t){return e.lit!=-1?(e.d=t,t):Math.max(o.F.setDepth(e.l,t+1),o.F.setDepth(e.r,t+1))},o.F.restrictDepth=function(e,t,c){var f=0,A=1<<c-t,v=0;for(e.sort(function(i,r){return r.d==i.d?i.f-r.f:r.d-i.d}),f=0;f<e.length&&e[f].d>t;f++){var n=e[f].d;e[f].d=t,v+=A-(1<<c-n)}for(v>>>=c-t;v>0;)(n=e[f].d)<t?(e[f].d++,v-=1<<t-n-1):f++;for(;f>=0;f--)e[f].d==t&&v<0&&(e[f].d--,v++);v!=0&&console.log("debt left")},o.F._goodIndex=function(e,t){var c=0;return t[16|c]<=e&&(c|=16),t[8|c]<=e&&(c|=8),t[4|c]<=e&&(c|=4),t[2|c]<=e&&(c|=2),t[1|c]<=e&&(c|=1),c},o.F._writeLit=function(e,t,c,f){return o.F._putsF(c,f,t[e<<1]),f+t[1+(e<<1)]},o.F.inflate=function(e,t){var c=Uint8Array;if(e[0]==3&&e[1]==0)return t||new c(0);var f=o.F,A=f._bitsF,v=f._bitsE,n=f._decodeTiny,i=f.makeCodes,r=f.codes2map,a=f._get17,h=f.U,E=t==null;E&&(t=new c(e.length>>>2<<3));for(var x,b,P=0,Q=0,S=0,k=0,p=0,M=0,u=0,l=0,m=0;P==0;)if(P=A(e,m,1),Q=A(e,m+1,2),m+=3,Q!=0){if(E&&(t=o.F._check(t,l+(1<<17))),Q==1&&(x=h.flmap,b=h.fdmap,M=511,u=31),Q==2){S=v(e,m,5)+257,k=v(e,m+5,5)+1,p=v(e,m+10,4)+4,m+=14;for(var y=0;y<38;y+=2)h.itree[y]=0,h.itree[y+1]=0;var w=1;for(y=0;y<p;y++){var U=v(e,m+3*y,3);h.itree[1+(h.ordr[y]<<1)]=U,U>w&&(w=U)}m+=3*p,i(h.itree,w),r(h.itree,w,h.imap),x=h.lmap,b=h.dmap,m=n(h.imap,(1<<w)-1,S+k,e,m,h.ttree);var g=f._copyOut(h.ttree,0,S,h.ltree);M=(1<<g)-1;var F=f._copyOut(h.ttree,S,k,h.dtree);u=(1<<F)-1,i(h.ltree,g),r(h.ltree,g,x),i(h.dtree,F),r(h.dtree,F,b)}for(;;){var d=x[a(e,m)&M];m+=15&d;var s=d>>>4;if(!(s>>>8))t[l++]=s;else{if(s==256)break;var L=l+s-254;if(s>264){var R=h.ldef[s-257];L=l+(R>>>3)+v(e,m,7&R),m+=7&R}var _=b[a(e,m)&u];m+=15&_;var z=_>>>4,H=h.ddef[z],D=(H>>>4)+A(e,m,15&H);for(m+=15&H,E&&(t=o.F._check(t,l+(1<<17)));l<L;)t[l]=t[l++-D],t[l]=t[l++-D],t[l]=t[l++-D],t[l]=t[l++-D];l=L}}}else{7&m&&(m+=8-(7&m));var O=4+(m>>>3),B=e[O-4]|e[O-3]<<8;E&&(t=o.F._check(t,l+B)),t.set(new c(e.buffer,e.byteOffset+O,B),l),m=O+B<<3,l+=B}return t.length==l?t:t.slice(0,l)},o.F._check=function(e,t){var c=e.length;if(t<=c)return e;var f=new Uint8Array(Math.max(c<<1,t));return f.set(e,0),f},o.F._decodeTiny=function(e,t,c,f,A,v){for(var n=o.F._bitsE,i=o.F._get17,r=0;r<c;){var a=e[i(f,A)&t];A+=15&a;var h=a>>>4;if(h<=15)v[r]=h,r++;else{var E=0,x=0;h==16?(x=3+n(f,A,2),A+=2,E=v[r-1]):h==17?(x=3+n(f,A,3),A+=3):h==18&&(x=11+n(f,A,7),A+=7);for(var b=r+x;r<b;)v[r]=E,r++}}return A},o.F._copyOut=function(e,t,c,f){for(var A=0,v=0,n=f.length>>>1;v<c;){var i=e[v+t];f[v<<1]=0,f[1+(v<<1)]=i,i>A&&(A=i),v++}for(;v<n;)f[v<<1]=0,f[1+(v<<1)]=0,v++;return A},o.F.makeCodes=function(e,t){for(var c,f,A,v,n=o.F.U,i=e.length,r=n.bl_count,a=0;a<=t;a++)r[a]=0;for(a=1;a<i;a+=2)r[e[a]]++;var h=n.next_code;for(c=0,r[0]=0,f=1;f<=t;f++)c=c+r[f-1]<<1,h[f]=c;for(A=0;A<i;A+=2)(v=e[A+1])!=0&&(e[A]=h[v],h[v]++)},o.F.codes2map=function(e,t,c){for(var f=e.length,A=o.F.U.rev15,v=0;v<f;v+=2)if(e[v+1]!=0)for(var n=v>>1,i=e[v+1],r=n<<4|i,a=t-i,h=e[v]<<a,E=h+(1<<a);h!=E;)c[A[h]>>>15-t]=r,h++},o.F.revCodes=function(e,t){for(var c=o.F.U.rev15,f=15-t,A=0;A<e.length;A+=2){var v=e[A]<<t-e[A+1];e[A]=c[v]>>>f}},o.F._putsE=function(e,t,c){c<<=7&t;var f=t>>>3;e[f]|=c,e[f+1]|=c>>>8},o.F._putsF=function(e,t,c){c<<=7&t;var f=t>>>3;e[f]|=c,e[f+1]|=c>>>8,e[f+2]|=c>>>16},o.F._bitsE=function(e,t,c){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<c)-1},o.F._bitsF=function(e,t,c){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<c)-1},o.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},o.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},o.F.U=(T=Uint16Array,I=Uint32Array,{next_code:new T(16),bl_count:new T(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new T(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new I(32),flmap:new T(512),fltree:[],fdmap:new T(32),fdtree:[],lmap:new T(32768),ltree:[],ttree:[],dmap:new T(32768),dtree:[],imap:new T(512),itree:[],rev15:new T(32768),lhst:new I(286),dhst:new I(30),ihst:new I(19),lits:new I(15e3),strt:new T(65536),prev:new T(32768)}),function(){for(var e=o.F.U,t=0;t<32768;t++){var c=t;c=(4278255360&(c=(4042322160&(c=(3435973836&(c=(2863311530&c)>>>1|(1431655765&c)<<1))>>>2|(858993459&c)<<2))>>>4|(252645135&c)<<4))>>>8|(16711935&c)<<8,e.rev15[t]=(c>>>16|c<<16)>>>17}function f(A,v,n){for(;v--!=0;)A.push(0,n)}for(t=0;t<32;t++)e.ldef[t]=e.of0[t]<<3|e.exb[t],e.ddef[t]=e.df0[t]<<4|e.dxb[t];f(e.fltree,144,8),f(e.fltree,112,9),f(e.fltree,24,7),f(e.fltree,8,8),o.F.makeCodes(e.fltree,9),o.F.codes2map(e.fltree,9,e.flmap),o.F.revCodes(e.fltree,9),f(e.fdtree,32,5),o.F.makeCodes(e.fdtree,5),o.F.codes2map(e.fdtree,5,e.fdmap),o.F.revCodes(e.fdtree,5),f(e.itree,19,0),f(e.ltree,286,0),f(e.dtree,30,0),f(e.ttree,320,0)}()})();var Bt=It({__proto__:null,default:He},[He]),he=function(){var C={nextZero(n,i){for(;n[i]!=0;)i++;return i},readUshort:(n,i)=>n[i]<<8|n[i+1],writeUshort(n,i,r){n[i]=r>>8&255,n[i+1]=255&r},readUint:(n,i)=>16777216*n[i]+(n[i+1]<<16|n[i+2]<<8|n[i+3]),writeUint(n,i,r){n[i]=r>>24&255,n[i+1]=r>>16&255,n[i+2]=r>>8&255,n[i+3]=255&r},readASCII(n,i,r){let a="";for(let h=0;h<r;h++)a+=String.fromCharCode(n[i+h]);return a},writeASCII(n,i,r){for(let a=0;a<r.length;a++)n[i+a]=r.charCodeAt(a)},readBytes(n,i,r){let a=[];for(let h=0;h<r;h++)a.push(n[i+h]);return a},pad:n=>n.length<2?`0${n}`:n,readUTF8(n,i,r){let a,h="";for(let E=0;E<r;E++)h+=`%${C.pad(n[i+E].toString(16))}`;try{a=decodeURIComponent(h)}catch{return C.readASCII(n,i,r)}return a}};function T(n,i,r,a){let h=i*r,E=t(a),x=Math.ceil(i*E/8),b=new Uint8Array(4*h),P=new Uint32Array(b.buffer),{ctype:Q}=a,{depth:S}=a,k=C.readUshort;if(Q==6){let R=h<<2;if(S==8)for(var p=0;p<R;p+=4)b[p]=n[p],b[p+1]=n[p+1],b[p+2]=n[p+2],b[p+3]=n[p+3];if(S==16)for(p=0;p<R;p++)b[p]=n[p<<1]}else if(Q==2){let R=a.tabs.tRNS;if(R==null){if(S==8)for(p=0;p<h;p++){var M=3*p;P[p]=255<<24|n[M+2]<<16|n[M+1]<<8|n[M]}if(S==16)for(p=0;p<h;p++)M=6*p,P[p]=255<<24|n[M+4]<<16|n[M+2]<<8|n[M]}else{var u=R[0];let _=R[1],z=R[2];if(S==8)for(p=0;p<h;p++){var l=p<<2;M=3*p,P[p]=255<<24|n[M+2]<<16|n[M+1]<<8|n[M],n[M]==u&&n[M+1]==_&&n[M+2]==z&&(b[l+3]=0)}if(S==16)for(p=0;p<h;p++)l=p<<2,M=6*p,P[p]=255<<24|n[M+4]<<16|n[M+2]<<8|n[M],k(n,M)==u&&k(n,M+2)==_&&k(n,M+4)==z&&(b[l+3]=0)}}else if(Q==3){let R=a.tabs.PLTE,_=a.tabs.tRNS,z=_?_.length:0;if(S==1)for(var m=0;m<r;m++){var y=m*x,w=m*i;for(p=0;p<i;p++){l=w+p<<2;var U=3*(g=n[y+(p>>3)]>>7-((7&p)<<0)&1);b[l]=R[U],b[l+1]=R[U+1],b[l+2]=R[U+2],b[l+3]=g<z?_[g]:255}}if(S==2)for(m=0;m<r;m++)for(y=m*x,w=m*i,p=0;p<i;p++)l=w+p<<2,U=3*(g=n[y+(p>>2)]>>6-((3&p)<<1)&3),b[l]=R[U],b[l+1]=R[U+1],b[l+2]=R[U+2],b[l+3]=g<z?_[g]:255;if(S==4)for(m=0;m<r;m++)for(y=m*x,w=m*i,p=0;p<i;p++)l=w+p<<2,U=3*(g=n[y+(p>>1)]>>4-((1&p)<<2)&15),b[l]=R[U],b[l+1]=R[U+1],b[l+2]=R[U+2],b[l+3]=g<z?_[g]:255;if(S==8)for(p=0;p<h;p++){var g;l=p<<2,U=3*(g=n[p]),b[l]=R[U],b[l+1]=R[U+1],b[l+2]=R[U+2],b[l+3]=g<z?_[g]:255}}else if(Q==4){if(S==8)for(p=0;p<h;p++){l=p<<2;var F=n[d=p<<1];b[l]=F,b[l+1]=F,b[l+2]=F,b[l+3]=n[d+1]}if(S==16)for(p=0;p<h;p++){var d;l=p<<2,F=n[d=p<<2],b[l]=F,b[l+1]=F,b[l+2]=F,b[l+3]=n[d+2]}}else if(Q==0)for(u=a.tabs.tRNS?a.tabs.tRNS:-1,m=0;m<r;m++){let R=m*x,_=m*i;if(S==1)for(var s=0;s<i;s++){var L=(F=255*(n[R+(s>>>3)]>>>7-(7&s)&1))==255*u?0:255;P[_+s]=L<<24|F<<16|F<<8|F}else if(S==2)for(s=0;s<i;s++)L=(F=85*(n[R+(s>>>2)]>>>6-((3&s)<<1)&3))==85*u?0:255,P[_+s]=L<<24|F<<16|F<<8|F;else if(S==4)for(s=0;s<i;s++)L=(F=17*(n[R+(s>>>1)]>>>4-((1&s)<<2)&15))==17*u?0:255,P[_+s]=L<<24|F<<16|F<<8|F;else if(S==8)for(s=0;s<i;s++)L=(F=n[R+s])==u?0:255,P[_+s]=L<<24|F<<16|F<<8|F;else if(S==16)for(s=0;s<i;s++)F=n[R+(s<<1)],L=k(n,R+(s<<1))==u?0:255,P[_+s]=L<<24|F<<16|F<<8|F}return b}function I(n,i,r,a){let h=t(n),E=Math.ceil(r*h/8),x=new Uint8Array((E+1+n.interlace)*a);return i=n.tabs.CgBI?e(i,x):o(i,x),n.interlace==0?i=c(i,n,0,r,a):n.interlace==1&&(i=function(P,Q){let S=Q.width,k=Q.height,p=t(Q),M=p>>3,u=Math.ceil(S*p/8),l=new Uint8Array(k*u),m=0,y=[0,0,4,0,2,0,1],w=[0,4,0,2,0,1,0],U=[8,8,8,4,4,2,2],g=[8,8,4,4,2,2,1],F=0;for(;F<7;){let s=U[F],L=g[F],R=0,_=0,z=y[F];for(;z<k;)z+=s,_++;let H=w[F];for(;H<S;)H+=L,R++;let D=Math.ceil(R*p/8);c(P,Q,m,R,_);let O=0,B=y[F];for(;B<k;){let W=w[F],G=m+O*D<<3;for(;W<S;){var d;if(p==1&&(d=(d=P[G>>3])>>7-(7&G)&1,l[B*u+(W>>3)]|=d<<7-((7&W)<<0)),p==2&&(d=(d=P[G>>3])>>6-(7&G)&3,l[B*u+(W>>2)]|=d<<6-((3&W)<<1)),p==4&&(d=(d=P[G>>3])>>4-(7&G)&15,l[B*u+(W>>1)]|=d<<4-((1&W)<<2)),p>=8){let N=B*u+W*M;for(let j=0;j<M;j++)l[N+j]=P[(G>>3)+j]}G+=p,W+=L}O++,B+=s}R*_!=0&&(m+=_*(1+D)),F+=1}return l}(i,n)),i}function o(n,i){return e(new Uint8Array(n.buffer,2,n.length-6),i)}var e=function(){let n={H:{}};return n.H.N=function(i,r){let a=Uint8Array,h,E,x=0,b=0,P=0,Q=0,S=0,k=0,p=0,M=0,u=0;if(i[0]==3&&i[1]==0)return r||new a(0);let l=n.H,m=l.b,y=l.e,w=l.R,U=l.n,g=l.A,F=l.Z,d=l.m,s=r==null;for(s&&(r=new a(i.length>>>2<<5));x==0;)if(x=m(i,u,1),b=m(i,u+1,2),u+=3,b!=0){if(s&&(r=n.H.W(r,M+(1<<17))),b==1&&(h=d.J,E=d.h,k=511,p=31),b==2){P=y(i,u,5)+257,Q=y(i,u+5,5)+1,S=y(i,u+10,4)+4,u+=14;let R=1;for(var L=0;L<38;L+=2)d.Q[L]=0,d.Q[L+1]=0;for(L=0;L<S;L++){let H=y(i,u+3*L,3);d.Q[1+(d.X[L]<<1)]=H,H>R&&(R=H)}u+=3*S,U(d.Q,R),g(d.Q,R,d.u),h=d.w,E=d.d,u=w(d.u,(1<<R)-1,P+Q,i,u,d.v);let _=l.V(d.v,0,P,d.C);k=(1<<_)-1;let z=l.V(d.v,P,Q,d.D);p=(1<<z)-1,U(d.C,_),g(d.C,_,h),U(d.D,z),g(d.D,z,E)}for(;;){let R=h[F(i,u)&k];u+=15&R;let _=R>>>4;if(!(_>>>8))r[M++]=_;else{if(_==256)break;{let z=M+_-254;if(_>264){let W=d.q[_-257];z=M+(W>>>3)+y(i,u,7&W),u+=7&W}let H=E[F(i,u)&p];u+=15&H;let D=H>>>4,O=d.c[D],B=(O>>>4)+m(i,u,15&O);for(u+=15&O;M<z;)r[M]=r[M++-B],r[M]=r[M++-B],r[M]=r[M++-B],r[M]=r[M++-B];M=z}}}}else{7&u&&(u+=8-(7&u));let R=4+(u>>>3),_=i[R-4]|i[R-3]<<8;s&&(r=n.H.W(r,M+_)),r.set(new a(i.buffer,i.byteOffset+R,_),M),u=R+_<<3,M+=_}return r.length==M?r:r.slice(0,M)},n.H.W=function(i,r){let a=i.length;if(r<=a)return i;let h=new Uint8Array(a<<1);return h.set(i,0),h},n.H.R=function(i,r,a,h,E,x){let b=n.H.e,P=n.H.Z,Q=0;for(;Q<a;){let S=i[P(h,E)&r];E+=15&S;let k=S>>>4;if(k<=15)x[Q]=k,Q++;else{let p=0,M=0;k==16?(M=3+b(h,E,2),E+=2,p=x[Q-1]):k==17?(M=3+b(h,E,3),E+=3):k==18&&(M=11+b(h,E,7),E+=7);let u=Q+M;for(;Q<u;)x[Q]=p,Q++}}return E},n.H.V=function(i,r,a,h){let E=0,x=0,b=h.length>>>1;for(;x<a;){let P=i[x+r];h[x<<1]=0,h[1+(x<<1)]=P,P>E&&(E=P),x++}for(;x<b;)h[x<<1]=0,h[1+(x<<1)]=0,x++;return E},n.H.n=function(i,r){let a=n.H.m,h=i.length,E,x,b,P,Q=a.j;for(var S=0;S<=r;S++)Q[S]=0;for(S=1;S<h;S+=2)Q[i[S]]++;let k=a.K;for(E=0,Q[0]=0,x=1;x<=r;x++)E=E+Q[x-1]<<1,k[x]=E;for(b=0;b<h;b+=2)P=i[b+1],P!=0&&(i[b]=k[P],k[P]++)},n.H.A=function(i,r,a){let h=i.length,E=n.H.m.r;for(let x=0;x<h;x+=2)if(i[x+1]!=0){let b=x>>1,P=i[x+1],Q=b<<4|P,S=r-P,k=i[x]<<S,p=k+(1<<S);for(;k!=p;)a[E[k]>>>15-r]=Q,k++}},n.H.l=function(i,r){let a=n.H.m.r,h=15-r;for(let E=0;E<i.length;E+=2){let x=i[E]<<r-i[E+1];i[E]=a[x]>>>h}},n.H.M=function(i,r,a){a<<=7&r;let h=r>>>3;i[h]|=a,i[h+1]|=a>>>8},n.H.I=function(i,r,a){a<<=7&r;let h=r>>>3;i[h]|=a,i[h+1]|=a>>>8,i[h+2]|=a>>>16},n.H.e=function(i,r,a){return(i[r>>>3]|i[1+(r>>>3)]<<8)>>>(7&r)&(1<<a)-1},n.H.b=function(i,r,a){return(i[r>>>3]|i[1+(r>>>3)]<<8|i[2+(r>>>3)]<<16)>>>(7&r)&(1<<a)-1},n.H.Z=function(i,r){return(i[r>>>3]|i[1+(r>>>3)]<<8|i[2+(r>>>3)]<<16)>>>(7&r)},n.H.i=function(i,r){return(i[r>>>3]|i[1+(r>>>3)]<<8|i[2+(r>>>3)]<<16|i[3+(r>>>3)]<<24)>>>(7&r)},n.H.m=function(){let i=Uint16Array,r=Uint32Array;return{K:new i(16),j:new i(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new i(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new r(32),J:new i(512),_:[],h:new i(32),$:[],w:new i(32768),C:[],v:[],d:new i(32768),D:[],u:new i(512),Q:[],r:new i(32768),s:new r(286),Y:new r(30),a:new r(19),t:new r(15e3),k:new i(65536),g:new i(32768)}}(),function(){let i=n.H.m;for(var r=0;r<32768;r++){let h=r;h=(2863311530&h)>>>1|(1431655765&h)<<1,h=(3435973836&h)>>>2|(858993459&h)<<2,h=(4042322160&h)>>>4|(252645135&h)<<4,h=(4278255360&h)>>>8|(16711935&h)<<8,i.r[r]=(h>>>16|h<<16)>>>17}function a(h,E,x){for(;E--!=0;)h.push(0,x)}for(r=0;r<32;r++)i.q[r]=i.S[r]<<3|i.T[r],i.c[r]=i.p[r]<<4|i.z[r];a(i._,144,8),a(i._,112,9),a(i._,24,7),a(i._,8,8),n.H.n(i._,9),n.H.A(i._,9,i.J),n.H.l(i._,9),a(i.$,32,5),n.H.n(i.$,5),n.H.A(i.$,5,i.h),n.H.l(i.$,5),a(i.Q,19,0),a(i.C,286,0),a(i.D,30,0),a(i.v,320,0)}(),n.H.N}();function t(n){return[1,null,3,1,2,null,4][n.ctype]*n.depth}function c(n,i,r,a,h){let E=t(i),x=Math.ceil(a*E/8),b,P;E=Math.ceil(E/8);let Q=n[r],S=0;if(Q>1&&(n[r]=[0,0,1][Q-2]),Q==3)for(S=E;S<x;S++)n[S+1]=n[S+1]+(n[S+1-E]>>>1)&255;for(let k=0;k<h;k++)if(b=r+k*x,P=b+k+1,Q=n[P-1],S=0,Q==0)for(;S<x;S++)n[b+S]=n[P+S];else if(Q==1){for(;S<E;S++)n[b+S]=n[P+S];for(;S<x;S++)n[b+S]=n[P+S]+n[b+S-E]}else if(Q==2)for(;S<x;S++)n[b+S]=n[P+S]+n[b+S-x];else if(Q==3){for(;S<E;S++)n[b+S]=n[P+S]+(n[b+S-x]>>>1);for(;S<x;S++)n[b+S]=n[P+S]+(n[b+S-x]+n[b+S-E]>>>1)}else{for(;S<E;S++)n[b+S]=n[P+S]+f(0,n[b+S-x],0);for(;S<x;S++)n[b+S]=n[P+S]+f(n[b+S-E],n[b+S-x],n[b+S-E-x])}return n}function f(n,i,r){let a=n+i-r,h=a-n,E=a-i,x=a-r;return h*h<=E*E&&h*h<=x*x?n:E*E<=x*x?i:r}function A(n,i,r){r.width=C.readUint(n,i),i+=4,r.height=C.readUint(n,i),i+=4,r.depth=n[i],i++,r.ctype=n[i],i++,r.compress=n[i],i++,r.filter=n[i],i++,r.interlace=n[i],i++}function v(n,i,r,a,h,E,x,b,P){let Q=Math.min(i,h),S=Math.min(r,E),k=0,p=0;for(let F=0;F<S;F++)for(let d=0;d<Q;d++)if(x>=0&&b>=0?(k=F*i+d<<2,p=(b+F)*h+x+d<<2):(k=(-b+F)*i-x+d<<2,p=F*h+d<<2),P==0)a[p]=n[k],a[p+1]=n[k+1],a[p+2]=n[k+2],a[p+3]=n[k+3];else if(P==1){var M=n[k+3]*.00392156862745098,u=n[k]*M,l=n[k+1]*M,m=n[k+2]*M,y=a[p+3]*(1/255),w=a[p]*y,U=a[p+1]*y,g=a[p+2]*y;let s=1-M,L=M+y*s,R=L==0?0:1/L;a[p+3]=255*L,a[p+0]=(u+w*s)*R,a[p+1]=(l+U*s)*R,a[p+2]=(m+g*s)*R}else if(P==2)M=n[k+3],u=n[k],l=n[k+1],m=n[k+2],y=a[p+3],w=a[p],U=a[p+1],g=a[p+2],M==y&&u==w&&l==U&&m==g?(a[p]=0,a[p+1]=0,a[p+2]=0,a[p+3]=0):(a[p]=u,a[p+1]=l,a[p+2]=m,a[p+3]=M);else if(P==3){if(M=n[k+3],u=n[k],l=n[k+1],m=n[k+2],y=a[p+3],w=a[p],U=a[p+1],g=a[p+2],M==y&&u==w&&l==U&&m==g)continue;if(M<220&&y>20)return!1}return!0}return{decode:function(i){let r=new Uint8Array(i),a=8,h=C,E=h.readUshort,x=h.readUint,b={tabs:{},frames:[]},P=new Uint8Array(r.length),Q,S=0,k=0,p=[137,80,78,71,13,10,26,10];for(var M=0;M<8;M++)if(r[M]!=p[M])throw"The input is not a PNG file!";for(;a<r.length;){let F=h.readUint(r,a);a+=4;let d=h.readASCII(r,a,4);if(a+=4,d=="IHDR")A(r,a,b);else if(d=="iCCP"){for(var u=a;r[u]!=0;)u++;h.readASCII(r,a,u-a),r[u+1];let s=r.slice(u+2,a+F),L=null;try{L=o(s)}catch{L=e(s)}b.tabs[d]=L}else if(d=="CgBI")b.tabs[d]=r.slice(a,a+4);else if(d=="IDAT"){for(M=0;M<F;M++)P[S+M]=r[a+M];S+=F}else if(d=="acTL")b.tabs[d]={num_frames:x(r,a),num_plays:x(r,a+4)},Q=new Uint8Array(r.length);else if(d=="fcTL"){k!=0&&((g=b.frames[b.frames.length-1]).data=I(b,Q.slice(0,k),g.rect.width,g.rect.height),k=0);let s={x:x(r,a+12),y:x(r,a+16),width:x(r,a+4),height:x(r,a+8)},L=E(r,a+22);L=E(r,a+20)/(L==0?100:L);let R={rect:s,delay:Math.round(1e3*L),dispose:r[a+24],blend:r[a+25]};b.frames.push(R)}else if(d=="fdAT"){for(M=0;M<F-4;M++)Q[k+M]=r[a+M+4];k+=F-4}else if(d=="pHYs")b.tabs[d]=[h.readUint(r,a),h.readUint(r,a+4),r[a+8]];else if(d=="cHRM")for(b.tabs[d]=[],M=0;M<8;M++)b.tabs[d].push(h.readUint(r,a+4*M));else if(d=="tEXt"||d=="zTXt"){b.tabs[d]==null&&(b.tabs[d]={});var l=h.nextZero(r,a),m=h.readASCII(r,a,l-a),y=a+F-l-1;if(d=="tEXt")U=h.readASCII(r,l+1,y);else{var w=o(r.slice(l+2,l+2+y));U=h.readUTF8(w,0,w.length)}b.tabs[d][m]=U}else if(d=="iTXt"){b.tabs[d]==null&&(b.tabs[d]={}),l=0,u=a,l=h.nextZero(r,u),m=h.readASCII(r,u,l-u);let s=r[u=l+1];var U;r[u+1],u+=2,l=h.nextZero(r,u),h.readASCII(r,u,l-u),u=l+1,l=h.nextZero(r,u),h.readUTF8(r,u,l-u),y=F-((u=l+1)-a),s==0?U=h.readUTF8(r,u,y):(w=o(r.slice(u,u+y)),U=h.readUTF8(w,0,w.length)),b.tabs[d][m]=U}else if(d=="PLTE")b.tabs[d]=h.readBytes(r,a,F);else if(d=="hIST"){let s=b.tabs.PLTE.length/3;for(b.tabs[d]=[],M=0;M<s;M++)b.tabs[d].push(E(r,a+2*M))}else if(d=="tRNS")b.ctype==3?b.tabs[d]=h.readBytes(r,a,F):b.ctype==0?b.tabs[d]=E(r,a):b.ctype==2&&(b.tabs[d]=[E(r,a),E(r,a+2),E(r,a+4)]);else if(d=="gAMA")b.tabs[d]=h.readUint(r,a)/1e5;else if(d=="sRGB")b.tabs[d]=r[a];else if(d=="bKGD")b.ctype==0||b.ctype==4?b.tabs[d]=[E(r,a)]:b.ctype==2||b.ctype==6?b.tabs[d]=[E(r,a),E(r,a+2),E(r,a+4)]:b.ctype==3&&(b.tabs[d]=r[a]);else if(d=="IEND")break;a+=F,h.readUint(r,a),a+=4}var g;return k!=0&&((g=b.frames[b.frames.length-1]).data=I(b,Q.slice(0,k),g.rect.width,g.rect.height)),b.data=I(b,P,b.width,b.height),delete b.compress,delete b.interlace,delete b.filter,b},toRGBA8:function(i){let r=i.width,a=i.height;if(i.tabs.acTL==null)return[T(i.data,r,a,i).buffer];let h=[];i.frames[0].data==null&&(i.frames[0].data=i.data);let E=r*a*4,x=new Uint8Array(E),b=new Uint8Array(E),P=new Uint8Array(E);for(let S=0;S<i.frames.length;S++){let k=i.frames[S],p=k.rect.x,M=k.rect.y,u=k.rect.width,l=k.rect.height,m=T(k.data,u,l,i);if(S!=0)for(var Q=0;Q<E;Q++)P[Q]=x[Q];if(k.blend==0?v(m,u,l,x,r,a,p,M,0):k.blend==1&&v(m,u,l,x,r,a,p,M,1),h.push(x.buffer.slice(0)),k.dispose!=0){if(k.dispose==1)v(b,u,l,x,r,a,p,M,0);else if(k.dispose==2)for(Q=0;Q<E;Q++)x[Q]=P[Q]}}return h},_paeth:f,_copyTile:v,_bin:C}}();(function(){let{_copyTile:C}=he,{_bin:T}=he,I=he._paeth;var o={table:function(){let u=new Uint32Array(256);for(let l=0;l<256;l++){let m=l;for(let y=0;y<8;y++)1&m?m=3988292384^m>>>1:m>>>=1;u[l]=m}return u}(),update(u,l,m,y){for(let w=0;w<y;w++)u=o.table[255&(u^l[m+w])]^u>>>8;return u},crc:(u,l,m)=>4294967295^o.update(4294967295,u,l,m)};function e(u,l,m,y){l[m]+=u[0]*y>>4,l[m+1]+=u[1]*y>>4,l[m+2]+=u[2]*y>>4,l[m+3]+=u[3]*y>>4}function t(u){return Math.max(0,Math.min(255,u))}function c(u,l){let m=u[0]-l[0],y=u[1]-l[1],w=u[2]-l[2],U=u[3]-l[3];return m*m+y*y+w*w+U*U}function f(u,l,m,y,w,U,g){g==null&&(g=1);let F=y.length,d=[];for(var s=0;s<F;s++){let B=y[s];d.push([B>>>0&255,B>>>8&255,B>>>16&255,B>>>24&255])}for(s=0;s<F;s++){let B=4294967295;for(var L=0,R=0;R<F;R++){var _=c(d[s],d[R]);R!=s&&_<B&&(B=_,L=R)}}let z=new Uint32Array(w.buffer),H=new Int16Array(l*m*4),D=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(s=0;s<D.length;s++)D[s]=255*((D[s]+.5)/16-.5);for(let B=0;B<m;B++)for(let W=0;W<l;W++){var O;s=4*(B*l+W),g!=2?O=[t(u[s]+H[s]),t(u[s+1]+H[s+1]),t(u[s+2]+H[s+2]),t(u[s+3]+H[s+3])]:(_=D[4*(3&B)+(3&W)],O=[t(u[s]+_),t(u[s+1]+_),t(u[s+2]+_),t(u[s+3]+_)]),L=0;let G=16777215;for(R=0;R<F;R++){let $=c(O,d[R]);$<G&&(G=$,L=R)}let N=d[L],j=[O[0]-N[0],O[1]-N[1],O[2]-N[2],O[3]-N[3]];g==1&&(W!=l-1&&e(j,H,s+4,7),B!=m-1&&(W!=0&&e(j,H,s+4*l-4,3),e(j,H,s+4*l,5),W!=l-1&&e(j,H,s+4*l+4,1))),U[s>>2]=L,z[s>>2]=y[L]}}function A(u,l,m,y,w){w==null&&(w={});let{crc:U}=o,g=T.writeUint,F=T.writeUshort,d=T.writeASCII,s=8,L=u.frames.length>1,R,_=!1,z=33+(L?20:0);if(w.sRGB!=null&&(z+=13),w.pHYs!=null&&(z+=21),w.iCCP!=null&&(R=pako.deflate(w.iCCP),z+=21+R.length+4),u.ctype==3){for(var H=u.plte.length,D=0;D<H;D++)u.plte[D]>>>24!=255&&(_=!0);z+=8+3*H+4+(_?8+1*H+4:0)}for(var O=0;O<u.frames.length;O++)L&&(z+=38),z+=(N=u.frames[O]).cimg.length+12,O!=0&&(z+=4);z+=12;let B=new Uint8Array(z),W=[137,80,78,71,13,10,26,10];for(D=0;D<8;D++)B[D]=W[D];if(g(B,s,13),s+=4,d(B,s,"IHDR"),s+=4,g(B,s,l),s+=4,g(B,s,m),s+=4,B[s]=u.depth,s++,B[s]=u.ctype,s++,B[s]=0,s++,B[s]=0,s++,B[s]=0,s++,g(B,s,U(B,s-17,17)),s+=4,w.sRGB!=null&&(g(B,s,1),s+=4,d(B,s,"sRGB"),s+=4,B[s]=w.sRGB,s++,g(B,s,U(B,s-5,5)),s+=4),w.iCCP!=null){let j=13+R.length;g(B,s,j),s+=4,d(B,s,"iCCP"),s+=4,d(B,s,"ICC profile"),s+=11,s+=2,B.set(R,s),s+=R.length,g(B,s,U(B,s-(j+4),j+4)),s+=4}if(w.pHYs!=null&&(g(B,s,9),s+=4,d(B,s,"pHYs"),s+=4,g(B,s,w.pHYs[0]),s+=4,g(B,s,w.pHYs[1]),s+=4,B[s]=w.pHYs[2],s++,g(B,s,U(B,s-13,13)),s+=4),L&&(g(B,s,8),s+=4,d(B,s,"acTL"),s+=4,g(B,s,u.frames.length),s+=4,g(B,s,w.loop!=null?w.loop:0),s+=4,g(B,s,U(B,s-12,12)),s+=4),u.ctype==3){for(g(B,s,3*(H=u.plte.length)),s+=4,d(B,s,"PLTE"),s+=4,D=0;D<H;D++){let j=3*D,$=u.plte[D],X=255&$,ee=$>>>8&255,ye=$>>>16&255;B[s+j+0]=X,B[s+j+1]=ee,B[s+j+2]=ye}if(s+=3*H,g(B,s,U(B,s-3*H-4,3*H+4)),s+=4,_){for(g(B,s,H),s+=4,d(B,s,"tRNS"),s+=4,D=0;D<H;D++)B[s+D]=u.plte[D]>>>24&255;s+=H,g(B,s,U(B,s-H-4,H+4)),s+=4}}let G=0;for(O=0;O<u.frames.length;O++){var N=u.frames[O];L&&(g(B,s,26),s+=4,d(B,s,"fcTL"),s+=4,g(B,s,G++),s+=4,g(B,s,N.rect.width),s+=4,g(B,s,N.rect.height),s+=4,g(B,s,N.rect.x),s+=4,g(B,s,N.rect.y),s+=4,F(B,s,y[O]),s+=2,F(B,s,1e3),s+=2,B[s]=N.dispose,s++,B[s]=N.blend,s++,g(B,s,U(B,s-30,30)),s+=4);let j=N.cimg;g(B,s,(H=j.length)+(O==0?0:4)),s+=4;let $=s;d(B,s,O==0?"IDAT":"fdAT"),s+=4,O!=0&&(g(B,s,G++),s+=4),B.set(j,s),s+=H,g(B,s,U(B,$,s-$)),s+=4}return g(B,s,0),s+=4,d(B,s,"IEND"),s+=4,g(B,s,U(B,s-4,4)),s+=4,B.buffer}function v(u,l,m){for(let y=0;y<u.frames.length;y++){let w=u.frames[y];w.rect.width;let U=w.rect.height,g=new Uint8Array(U*w.bpl+U);w.cimg=a(w.img,U,w.bpp,w.bpl,g,l,m)}}function n(u,l,m,y,w){let U=w[0],g=w[1],F=w[2],d=w[3],s=w[4],L=w[5],R=6,_=8,z=255;for(var H=0;H<u.length;H++){let ne=new Uint8Array(u[H]);for(var D=ne.length,O=0;O<D;O+=4)z&=ne[O+3]}let B=z!=255,W=function(V,K,te,oe,Y,fe){let J=[];for(var q=0;q<V.length;q++){let ae=new Uint8Array(V[q]),ue=new Uint32Array(ae.buffer);var ce;let le=0,me=0,pe=K,Ue=te,Ne=oe?1:0;if(q!=0){let Ft=fe||oe||q==1||J[q-2].dispose!=0?1:2,$e=0,Ye=1e9;for(let _e=0;_e<Ft;_e++){var ve=new Uint8Array(V[q-1-_e]);let Rt=new Uint32Array(V[q-1-_e]),be=K,we=te,Se=-1,Qe=-1;for(let Fe=0;Fe<te;Fe++)for(let Re=0;Re<K;Re++)ue[ie=Fe*K+Re]!=Rt[ie]&&(Re<be&&(be=Re),Re>Se&&(Se=Re),Fe<we&&(we=Fe),Fe>Qe&&(Qe=Fe));Se==-1&&(be=we=Se=Qe=0),Y&&((1&be)==1&&be--,(1&we)==1&&we--);let Je=(Se-be+1)*(Qe-we+1);Je<Ye&&(Ye=Je,$e=_e,le=be,me=we,pe=Se-be+1,Ue=Qe-we+1)}ve=new Uint8Array(V[q-1-$e]),$e==1&&(J[q-1].dispose=2),ce=new Uint8Array(pe*Ue*4),C(ve,K,te,ce,pe,Ue,-le,-me,0),Ne=C(ae,K,te,ce,pe,Ue,-le,-me,3)?1:0,Ne==1?r(ae,K,te,ce,{x:le,y:me,width:pe,height:Ue}):C(ae,K,te,ce,pe,Ue,-le,-me,0)}else ce=ae.slice(0);J.push({rect:{x:le,y:me,width:pe,height:Ue},img:ce,blend:Ne,dispose:0})}if(oe)for(q=0;q<J.length;q++){if((Ee=J[q]).blend==1)continue;let ae=Ee.rect,ue=J[q-1].rect,le=Math.min(ae.x,ue.x),me=Math.min(ae.y,ue.y),pe={x:le,y:me,width:Math.max(ae.x+ae.width,ue.x+ue.width)-le,height:Math.max(ae.y+ae.height,ue.y+ue.height)-me};J[q-1].dispose=1,q-1!=0&&i(V,K,te,J,q-1,pe,Y),i(V,K,te,J,q,pe,Y)}let ke=0;if(V.length!=1)for(var ie=0;ie<J.length;ie++){var Ee;ke+=(Ee=J[ie]).rect.width*Ee.rect.height}return J}(u,l,m,U,g,F),G={},N=[],j=[];if(y!=0){let ne=[];for(O=0;O<W.length;O++)ne.push(W[O].img.buffer);let V=function(Y){let fe=0;for(var J=0;J<Y.length;J++)fe+=Y[J].byteLength;let q=new Uint8Array(fe),ce=0;for(J=0;J<Y.length;J++){let ve=new Uint8Array(Y[J]),ke=ve.length;for(let ie=0;ie<ke;ie+=4){let Ee=ve[ie],ae=ve[ie+1],ue=ve[ie+2],le=ve[ie+3];le==0&&(Ee=ae=ue=0),q[ce+ie]=Ee,q[ce+ie+1]=ae,q[ce+ie+2]=ue,q[ce+ie+3]=le}ce+=ke}return q.buffer}(ne),K=E(V,y);for(O=0;O<K.plte.length;O++)N.push(K.plte[O].est.rgba);let te=0;for(O=0;O<W.length;O++){let oe=(X=W[O]).img.length;var $=new Uint8Array(K.inds.buffer,te>>2,oe>>2);j.push($);let Y=new Uint8Array(K.abuf,te,oe);L&&f(X.img,X.rect.width,X.rect.height,N,Y,$),X.img.set(Y),te+=oe}}else for(H=0;H<W.length;H++){var X=W[H];let ne=new Uint32Array(X.img.buffer);var ee=X.rect.width;for(D=ne.length,$=new Uint8Array(D),j.push($),O=0;O<D;O++){let V=ne[O];if(O!=0&&V==ne[O-1])$[O]=$[O-1];else if(O>ee&&V==ne[O-ee])$[O]=$[O-ee];else{let K=G[V];if(K==null&&(G[V]=K=N.length,N.push(V),N.length>=300))break;$[O]=K}}}let ye=N.length;for(ye<=256&&s==0&&(_=ye<=2?1:ye<=4?2:ye<=16?4:8,_=Math.max(_,d)),H=0;H<W.length;H++){(X=W[H]).rect.x,X.rect.y,ee=X.rect.width;let ne=X.rect.height,V=X.img;new Uint32Array(V.buffer);let K=4*ee,te=4;if(ye<=256&&s==0){K=Math.ceil(_*ee/8);var Ae=new Uint8Array(K*ne);let oe=j[H];for(let Y=0;Y<ne;Y++){O=Y*K;let fe=Y*ee;if(_==8)for(var Z=0;Z<ee;Z++)Ae[O+Z]=oe[fe+Z];else if(_==4)for(Z=0;Z<ee;Z++)Ae[O+(Z>>1)]|=oe[fe+Z]<<4-4*(1&Z);else if(_==2)for(Z=0;Z<ee;Z++)Ae[O+(Z>>2)]|=oe[fe+Z]<<6-2*(3&Z);else if(_==1)for(Z=0;Z<ee;Z++)Ae[O+(Z>>3)]|=oe[fe+Z]<<7-1*(7&Z)}V=Ae,R=3,te=1}else if(B==0&&W.length==1){Ae=new Uint8Array(ee*ne*3);let oe=ee*ne;for(O=0;O<oe;O++){let Y=3*O,fe=4*O;Ae[Y]=V[fe],Ae[Y+1]=V[fe+1],Ae[Y+2]=V[fe+2]}V=Ae,R=2,te=3,K=3*ee}X.img=V,X.bpl=K,X.bpp=te}return{ctype:R,depth:_,plte:N,frames:W}}function i(u,l,m,y,w,U,g){let F=Uint8Array,d=Uint32Array,s=new F(u[w-1]),L=new d(u[w-1]),R=w+1<u.length?new F(u[w+1]):null,_=new F(u[w]),z=new d(_.buffer),H=l,D=m,O=-1,B=-1;for(let G=0;G<U.height;G++)for(let N=0;N<U.width;N++){let j=U.x+N,$=U.y+G,X=$*l+j,ee=z[X];ee==0||y[w-1].dispose==0&&L[X]==ee&&(R==null||R[4*X+3]!=0)||(j<H&&(H=j),j>O&&(O=j),$<D&&(D=$),$>B&&(B=$))}O==-1&&(H=D=O=B=0),g&&((1&H)==1&&H--,(1&D)==1&&D--),U={x:H,y:D,width:O-H+1,height:B-D+1};let W=y[w];W.rect=U,W.blend=1,W.img=new Uint8Array(U.width*U.height*4),y[w-1].dispose==0?(C(s,l,m,W.img,U.width,U.height,-U.x,-U.y,0),r(_,l,m,W.img,U)):C(_,l,m,W.img,U.width,U.height,-U.x,-U.y,0)}function r(u,l,m,y,w){C(u,l,m,y,w.width,w.height,-w.x,-w.y,2)}function a(u,l,m,y,w,U,g){let F=[],d,s=[0,1,2,3,4];U!=-1?s=[U]:(l*y>5e5||m==1)&&(s=[0]),g&&(d={level:0});let L=Bt;for(var R=0;R<s.length;R++){for(let H=0;H<l;H++)h(w,u,H,y,m,s[R]);F.push(L.deflate(w,d))}let _,z=1e9;for(R=0;R<F.length;R++)F[R].length<z&&(_=R,z=F[R].length);return F[_]}function h(u,l,m,y,w,U){let g=m*y,F=g+m;if(u[F]=U,F++,U==0)if(y<500)for(var d=0;d<y;d++)u[F+d]=l[g+d];else u.set(new Uint8Array(l.buffer,g,y),F);else if(U==1){for(d=0;d<w;d++)u[F+d]=l[g+d];for(d=w;d<y;d++)u[F+d]=l[g+d]-l[g+d-w]+256&255}else if(m==0){for(d=0;d<w;d++)u[F+d]=l[g+d];if(U==2)for(d=w;d<y;d++)u[F+d]=l[g+d];if(U==3)for(d=w;d<y;d++)u[F+d]=l[g+d]-(l[g+d-w]>>1)+256&255;if(U==4)for(d=w;d<y;d++)u[F+d]=l[g+d]-I(l[g+d-w],0,0)+256&255}else{if(U==2)for(d=0;d<y;d++)u[F+d]=l[g+d]+256-l[g+d-y]&255;if(U==3){for(d=0;d<w;d++)u[F+d]=l[g+d]+256-(l[g+d-y]>>1)&255;for(d=w;d<y;d++)u[F+d]=l[g+d]+256-(l[g+d-y]+l[g+d-w]>>1)&255}if(U==4){for(d=0;d<w;d++)u[F+d]=l[g+d]+256-I(0,l[g+d-y],0)&255;for(d=w;d<y;d++)u[F+d]=l[g+d]+256-I(l[g+d-w],l[g+d-y],l[g+d-w-y])&255}}}function E(u,l){let m=new Uint8Array(u),y=m.slice(0),w=new Uint32Array(y.buffer),U=x(y,l),g=U[0],F=U[1],d=m.length,s=new Uint8Array(d>>2),L;if(m.length<2e7)for(var R=0;R<d;R+=4)L=b(g,_=m[R]*(1/255),z=m[R+1]*(1/255),H=m[R+2]*(1/255),D=m[R+3]*(1/255)),s[R>>2]=L.ind,w[R>>2]=L.est.rgba;else for(R=0;R<d;R+=4){var _=m[R]*.00392156862745098,z=m[R+1]*(1/255),H=m[R+2]*(1/255),D=m[R+3]*(1/255);for(L=g;L.left;)L=P(L.est,_,z,H,D)<=0?L.left:L.right;s[R>>2]=L.ind,w[R>>2]=L.est.rgba}return{abuf:y.buffer,inds:s,plte:F}}function x(u,l,m){m==null&&(m=1e-4);let y=new Uint32Array(u.buffer),w={i0:0,i1:u.length,bst:null,est:null,tdst:0,left:null,right:null};w.bst=k(u,w.i0,w.i1),w.est=p(w.bst);let U=[w];for(;U.length<l;){let F=0,d=0;for(var g=0;g<U.length;g++)U[g].est.L>F&&(F=U[g].est.L,d=g);if(F<m)break;let s=U[d],L=Q(u,y,s.i0,s.i1,s.est.e,s.est.eMq255);if(s.i0>=L||s.i1<=L){s.est.L=0;continue}let R={i0:s.i0,i1:L,bst:null,est:null,tdst:0,left:null,right:null};R.bst=k(u,R.i0,R.i1),R.est=p(R.bst);let _={i0:L,i1:s.i1,bst:null,est:null,tdst:0,left:null,right:null};for(_.bst={R:[],m:[],N:s.bst.N-R.bst.N},g=0;g<16;g++)_.bst.R[g]=s.bst.R[g]-R.bst.R[g];for(g=0;g<4;g++)_.bst.m[g]=s.bst.m[g]-R.bst.m[g];_.est=p(_.bst),s.left=R,s.right=_,U[d]=R,U.push(_)}for(U.sort((F,d)=>d.bst.N-F.bst.N),g=0;g<U.length;g++)U[g].ind=g;return[w,U]}function b(u,l,m,y,w){if(u.left==null)return u.tdst=function(R,_,z,H,D){let O=_-R[0],B=z-R[1],W=H-R[2],G=D-R[3];return O*O+B*B+W*W+G*G}(u.est.q,l,m,y,w),u;let U=P(u.est,l,m,y,w),g=u.left,F=u.right;U>0&&(g=u.right,F=u.left);let d=b(g,l,m,y,w);if(d.tdst<=U*U)return d;let s=b(F,l,m,y,w);return s.tdst<d.tdst?s:d}function P(u,l,m,y,w){let{e:U}=u;return U[0]*l+U[1]*m+U[2]*y+U[3]*w-u.eMq}function Q(u,l,m,y,w,U){for(y-=4;m<y;){for(;S(u,m,w)<=U;)m+=4;for(;S(u,y,w)>U;)y-=4;if(m>=y)break;let g=l[m>>2];l[m>>2]=l[y>>2],l[y>>2]=g,m+=4,y-=4}for(;S(u,m,w)>U;)m-=4;return m+4}function S(u,l,m){return u[l]*m[0]+u[l+1]*m[1]+u[l+2]*m[2]+u[l+3]*m[3]}function k(u,l,m){let y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],w=[0,0,0,0],U=m-l>>2;for(let g=l;g<m;g+=4){let F=u[g]*.00392156862745098,d=u[g+1]*(1/255),s=u[g+2]*(1/255),L=u[g+3]*(1/255);w[0]+=F,w[1]+=d,w[2]+=s,w[3]+=L,y[0]+=F*F,y[1]+=F*d,y[2]+=F*s,y[3]+=F*L,y[5]+=d*d,y[6]+=d*s,y[7]+=d*L,y[10]+=s*s,y[11]+=s*L,y[15]+=L*L}return y[4]=y[1],y[8]=y[2],y[9]=y[6],y[12]=y[3],y[13]=y[7],y[14]=y[11],{R:y,m:w,N:U}}function p(u){let{R:l}=u,{m}=u,{N:y}=u,w=m[0],U=m[1],g=m[2],F=m[3],d=y==0?0:1/y,s=[l[0]-w*w*d,l[1]-w*U*d,l[2]-w*g*d,l[3]-w*F*d,l[4]-U*w*d,l[5]-U*U*d,l[6]-U*g*d,l[7]-U*F*d,l[8]-g*w*d,l[9]-g*U*d,l[10]-g*g*d,l[11]-g*F*d,l[12]-F*w*d,l[13]-F*U*d,l[14]-F*g*d,l[15]-F*F*d],L=s,R=M,_=[Math.random(),Math.random(),Math.random(),Math.random()],z=0,H=0;if(y!=0)for(let O=0;O<16&&(_=R.multVec(L,_),H=Math.sqrt(R.dot(_,_)),_=R.sml(1/H,_),!(O!=0&&Math.abs(H-z)<1e-9));O++)z=H;let D=[w*d,U*d,g*d,F*d];return{Cov:s,q:D,e:_,L:z,eMq255:R.dot(R.sml(255,D),_),eMq:R.dot(_,D),rgba:(Math.round(255*D[3])<<24|Math.round(255*D[2])<<16|Math.round(255*D[1])<<8|Math.round(255*D[0])<<0)>>>0}}var M={multVec:(u,l)=>[u[0]*l[0]+u[1]*l[1]+u[2]*l[2]+u[3]*l[3],u[4]*l[0]+u[5]*l[1]+u[6]*l[2]+u[7]*l[3],u[8]*l[0]+u[9]*l[1]+u[10]*l[2]+u[11]*l[3],u[12]*l[0]+u[13]*l[1]+u[14]*l[2]+u[15]*l[3]],dot:(u,l)=>u[0]*l[0]+u[1]*l[1]+u[2]*l[2]+u[3]*l[3],sml:(u,l)=>[u*l[0],u*l[1],u*l[2],u*l[3]]};he.encode=function(l,m,y,w,U,g,F){w==null&&(w=0),F==null&&(F=!1);let d=n(l,m,y,w,[!1,!1,!1,0,F,!1]);return v(d,-1),A(d,m,y,U,g)},he.encodeLL=function(l,m,y,w,U,g,F,d){let s={ctype:0+(w==1?0:2)+(U==0?0:4),depth:g,frames:[]},L=(w+U)*g,R=L*m;for(let _=0;_<l.length;_++)s.frames.push({rect:{x:0,y:0,width:m,height:y},img:new Uint8Array(l[_]),blend:0,dispose:1,bpp:Math.ceil(L/8),bpl:Math.ceil(R/8)});return v(s,0,!0),A(s,m,y,F,d)},he.encode.compress=n,he.encode.dither=f,he.quantize=E,he.quantize.getKDtree=x,he.quantize.getNearest=b})();var At={toArrayBuffer(C,T){let I=C.width,o=C.height,e=I<<2,t=C.getContext("2d").getImageData(0,0,I,o),c=new Uint32Array(t.data.buffer),f=(32*I+31)/32<<2,A=f*o,v=122+A,n=new ArrayBuffer(v),i=new DataView(n),r=1<<20,a,h,E,x,b=r,P=0,Q=0,S=0;function k(u){i.setUint16(Q,u,!0),Q+=2}function p(u){i.setUint32(Q,u,!0),Q+=4}function M(u){Q+=u}k(19778),p(v),M(4),p(122),p(108),p(I),p(-o>>>0),k(1),k(32),p(3),p(A),p(2835),p(2835),M(8),p(16711680),p(65280),p(255),p(4278190080),p(1466527264),function u(){for(;P<o&&b>0;){for(x=122+P*f,a=0;a<e;)b--,h=c[S++],E=h>>>24,i.setUint32(x+a,h<<8|E),a+=4;P++}S<c.length?(b=r,setTimeout(u,At._dly)):T(n)}()},toBlob(C,T){this.toArrayBuffer(C,I=>{T(new Blob([I],{type:"image/bmp"}))})},_dly:9},se={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},Ct={[se.CHROME]:16384,[se.FIREFOX]:11180,[se.DESKTOP_SAFARI]:16384,[se.IE]:8192,[se.IOS]:4096,[se.ETC]:8192},Ze=typeof window<"u",pt=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,De=Ze&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),Mt=(Ze||pt)&&(De&&De.getOriginalSymbol(window,"File")||typeof File<"u"&&File),gt=(Ze||pt)&&(De&&De.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Xe(C,T,I=Date.now()){return new Promise(o=>{let e=C.split(","),t=e[0].match(/:(.*?);/)[1],c=globalThis.atob(e[1]),f=c.length,A=new Uint8Array(f);for(;f--;)A[f]=c.charCodeAt(f);let v=new Blob([A],{type:t});v.name=T,v.lastModified=I,o(v)})}function mt(C){return new Promise((T,I)=>{let o=new gt;o.onload=()=>T(o.result),o.onerror=e=>I(e),o.readAsDataURL(C)})}function vt(C){return new Promise((T,I)=>{let o=new Image;o.onload=()=>T(o),o.onerror=e=>I(e),o.src=C})}function xe(){if(xe.cachedResult!==void 0)return xe.cachedResult;let C=se.ETC,{userAgent:T}=navigator;return/Chrom(e|ium)/i.test(T)?C=se.CHROME:/iP(ad|od|hone)/i.test(T)&&/WebKit/i.test(T)?C=se.IOS:/Safari/i.test(T)?C=se.DESKTOP_SAFARI:/Firefox/i.test(T)?C=se.FIREFOX:(/MSIE/i.test(T)||document.documentMode)&&(C=se.IE),xe.cachedResult=C,xe.cachedResult}function bt(C,T){let I=xe(),o=Ct[I],e=C,t=T,c=e*t,f=e>t?t/e:e/t;for(;c>o*o;){let A=(o+e)/2,v=(o+t)/2;A<v?(t=v,e=v*f):(t=A*f,e=A),c=e*t}return{width:e,height:t}}function je(C,T){let I,o;try{if(I=new OffscreenCanvas(C,T),o=I.getContext("2d"),o===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{I=document.createElement("canvas"),o=I.getContext("2d")}return I.width=C,I.height=T,[I,o]}function wt(C,T){let{width:I,height:o}=bt(C.width,C.height),[e,t]=je(I,o);return T&&/jpe?g/.test(T)&&(t.fillStyle="white",t.fillRect(0,0,e.width,e.height)),t.drawImage(C,0,0,e.width,e.height),e}function Oe(){return Oe.cachedResult!==void 0||(Oe.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Oe.cachedResult}function ze(C,T={}){return new Promise(function(I,o){let e,t;var c=function(){try{return t=wt(e,T.fileType||C.type),I([e,t])}catch(A){return o(A)}},f=function(A){try{var v=function(n){try{throw n}catch(i){return o(i)}};try{let n;return mt(C).then(function(i){try{return n=i,vt(n).then(function(r){try{return e=r,function(){try{return c()}catch(a){return o(a)}}()}catch(a){return v(a)}},v)}catch(r){return v(r)}},v)}catch(n){v(n)}}catch(n){return o(n)}};try{if(Oe()||[se.DESKTOP_SAFARI,se.MOBILE_SAFARI].includes(xe()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(C).then(function(A){try{return e=A,c()}catch{return f()}},f)}catch{f()}})}function We(C,T,I,o,e=1){return new Promise(function(t,c){let f;if(T==="image/png"){let i,r,a;return i=C.getContext("2d"),{data:r}=i.getImageData(0,0,C.width,C.height),a=he.encode([r.buffer],C.width,C.height,4096*e),f=new Blob([a],{type:T}),f.name=I,f.lastModified=o,A.call(this)}{let i=function(){return A.call(this)};var v=i;if(T==="image/bmp")return new Promise(r=>At.toBlob(C,r)).then(function(r){try{return f=r,f.name=I,f.lastModified=o,i.call(this)}catch(a){return c(a)}}.bind(this),c);{let r=function(){return i.call(this)};var n=r;if(typeof OffscreenCanvas=="function"&&C instanceof OffscreenCanvas)return C.convertToBlob({type:T,quality:e}).then(function(a){try{return f=a,f.name=I,f.lastModified=o,r.call(this)}catch(h){return c(h)}}.bind(this),c);{let a;return a=C.toDataURL(T,e),Xe(a,I,o).then(function(h){try{return f=h,r.call(this)}catch(E){return c(E)}}.bind(this),c)}}}function A(){return t(f)}})}function ge(C){C.width=0,C.height=0}function Me(){return new Promise(function(C,T){let I,o,e,t,c;return Me.cachedResult!==void 0?C(Me.cachedResult):(I="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==",Xe("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(f){try{return o=f,ze(o).then(function(A){try{return e=A[1],We(e,o.type,o.name,o.lastModified).then(function(v){try{return t=v,ge(e),ze(t).then(function(n){try{return c=n[0],Me.cachedResult=c.width===1&&c.height===2,C(Me.cachedResult)}catch(i){return T(i)}},T)}catch(n){return T(n)}},T)}catch(v){return T(v)}},T)}catch(A){return T(A)}},T))})}function yt(C){return new Promise((T,I)=>{let o=new gt;o.onload=e=>{let t=new DataView(e.target.result);if(t.getUint16(0,!1)!=65496)return T(-2);let c=t.byteLength,f=2;for(;f<c;){if(t.getUint16(f+2,!1)<=8)return T(-1);let A=t.getUint16(f,!1);if(f+=2,A==65505){if(t.getUint32(f+=2,!1)!=1165519206)return T(-1);let v=t.getUint16(f+=6,!1)==18761;f+=t.getUint32(f+4,v);let n=t.getUint16(f,v);f+=2;for(let i=0;i<n;i++)if(t.getUint16(f+12*i,v)==274)return T(t.getUint16(f+12*i+8,v))}else{if((65280&A)!=65280)break;f+=t.getUint16(f,!1)}}return T(-1)},o.onerror=e=>I(e),o.readAsArrayBuffer(C)})}function Et(C,T){let{width:I}=C,{height:o}=C,{maxWidthOrHeight:e}=T,t,c=C;return isFinite(e)&&(I>e||o>e)&&([c,t]=je(I,o),I>o?(c.width=e,c.height=o/I*e):(c.width=I/o*e,c.height=e),t.drawImage(C,0,0,c.width,c.height),ge(C)),c}function Ut(C,T){let{width:I}=C,{height:o}=C,[e,t]=je(I,o);switch(T>4&&T<9?(e.width=o,e.height=I):(e.width=I,e.height=o),T){case 2:t.transform(-1,0,0,1,I,0);break;case 3:t.transform(-1,0,0,-1,I,o);break;case 4:t.transform(1,0,0,-1,0,o);break;case 5:t.transform(0,1,1,0,0,0);break;case 6:t.transform(0,1,-1,0,o,0);break;case 7:t.transform(0,-1,-1,0,o,I);break;case 8:t.transform(0,-1,1,0,0,I)}return t.drawImage(C,0,0,I,o),ge(C),e}function dt(C,T,I=0){return new Promise(function(o,e){let t,c,f,A,v,n,i,r,a,h,E,x,b,P,Q,S,k,p,M,u;function l(y=5){if(T.signal&&T.signal.aborted)throw T.signal.reason;t+=y,T.onProgress(Math.min(t,100))}function m(y){if(T.signal&&T.signal.aborted)throw T.signal.reason;t=Math.min(Math.max(y,t),100),T.onProgress(t)}return t=I,c=T.maxIteration||10,f=1024*T.maxSizeMB*1024,l(),ze(C,T).then(function(y){try{return[,A]=y,l(),v=Et(A,T),l(),new Promise(function(w,U){var g;if(!(g=T.exifOrientation))return yt(C).then(function(d){try{return g=d,F.call(this)}catch(s){return U(s)}}.bind(this),U);function F(){return w(g)}return F.call(this)}).then(function(w){try{return n=w,l(),Me().then(function(U){try{return i=U?v:Ut(v,n),l(),r=T.initialQuality||1,a=T.fileType||C.type,We(i,a,C.name,C.lastModified,r).then(function(g){try{{let L=function(){if(c--&&(Q>f||Q>b)){let _,z;return _=u?.95*M.width:M.width,z=u?.95*M.height:M.height,[k,p]=je(_,z),p.drawImage(M,0,0,_,z),r*=a==="image/png"?.85:.95,We(k,a,C.name,C.lastModified,r).then(function(H){try{return S=H,ge(M),M=k,Q=S.size,m(Math.min(99,Math.floor((P-Q)/(P-f)*100))),L}catch(D){return e(D)}},e)}return[1]},R=function(){return ge(M),ge(k),ge(v),ge(i),ge(A),m(100),o(S)};var d=L,s=R;if(h=g,l(),E=h.size>f,x=h.size>C.size,!E&&!x)return m(100),o(h);var F;return b=C.size,P=h.size,Q=P,M=i,u=!T.alwaysKeepResolution&&E,(F=function(_){for(;_;){if(_.then)return void _.then(F,e);try{if(_.pop){if(_.length)return _.pop()?R.call(this):_;_=L}else _=_.call(this)}catch(z){return e(z)}}}.bind(this))(L)}}catch(L){return e(L)}}.bind(this),e)}catch(g){return e(g)}}.bind(this),e)}catch(U){return e(U)}}.bind(this),e)}catch(w){return e(w)}}.bind(this),e)})}var _t=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`,Ve;function Qt(C,T){return new Promise((I,o)=>{Ve||(Ve=function(c){let f=[];return typeof c=="function"?f.push(`(${c})()`):f.push(c),URL.createObjectURL(new Blob(f))}(_t));let e=new Worker(Ve);e.addEventListener("message",function(c){if(T.signal&&T.signal.aborted)e.terminate();else if(c.data.progress===void 0){if(c.data.error)return o(new Error(c.data.error)),void e.terminate();I(c.data.file),e.terminate()}else T.onProgress(c.data.progress)}),e.addEventListener("error",o),T.signal&&T.signal.addEventListener("abort",()=>{o(T.signal.reason),e.terminate()}),e.postMessage({file:C,imageCompressionLibUrl:T.libURL,options:Te(Be({},T),{onProgress:void 0,signal:void 0})})})}function re(C,T){return new Promise(function(I,o){let e,t,c,f,A,v;if(e=Be({},T),c=0,{onProgress:f}=e,e.maxSizeMB=e.maxSizeMB||Number.POSITIVE_INFINITY,A=typeof e.useWebWorker!="boolean"||e.useWebWorker,delete e.useWebWorker,e.onProgress=a=>{c=a,typeof f=="function"&&f(c)},!(C instanceof Blob||C instanceof Mt))return o(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(C.type))return o(new Error("The file given is not an image"));if(v=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!A||typeof Worker!="function"||v)return dt(C,e).then(function(a){try{return t=a,r.call(this)}catch(h){return o(h)}}.bind(this),o);var n=function(){try{return r.call(this)}catch(a){return o(a)}}.bind(this),i=function(a){try{return dt(C,e).then(function(h){try{return t=h,n()}catch(E){return o(E)}},o)}catch(h){return o(h)}};try{return e.libURL=e.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",Qt(C,e).then(function(a){try{return t=a,n()}catch{return i()}},i)}catch{i()}function r(){try{t.name=C.name,t.lastModified=C.lastModified}catch{}try{e.preserveExif&&C.type==="image/jpeg"&&(!e.fileType||e.fileType&&e.fileType===C.type)&&(t=ht(C,t))}catch{}return I(t)}})}re.getDataUrlFromFile=mt,re.getFilefromDataUrl=Xe,re.loadImage=vt,re.drawImageInCanvas=wt,re.drawFileInCanvas=ze,re.canvasToFile=We,re.getExifOrientation=yt,re.handleMaxWidthOrHeight=Et,re.followExifOrientation=Ut,re.cleanupCanvasMemory=ge,re.isAutoOrientationInBrowser=Me,re.approximateBelowMaximumCanvasSizeOfBrowser=bt,re.copyExifWithoutOrientation=ht,re.getBrowserName=xe,re.version="2.0.2";var jt=(()=>{class C{constructor(I,o){this.firebaseService=I,this.storeService=o,this.adsSubject=new et([]),this.ads$=this.adsSubject.asObservable(),this.unsubscribe=null,this.handleError=e=>(console.error("AdsService error:",e),rt(()=>e)),this.db=this.firebaseService.db}startListening(I,o){let e=o||this.storeService.getActiveStoreId();if(!e){this.adsSubject.next([]);return}let t=Ge(this.db,"ads"),c=it(t,ot("storeId","==",e),at("uploadDate","desc"));this.unsubscribe=ct(c,f=>{let A=f.docs.map(v=>{let n=v.data();return Te(Be({id:v.id},n),{uploadDate:n.uploadDate?.toDate()||new Date,updatedAt:n.updatedAt?.toDate()})});this.adsSubject.next(A)})}stopListening(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)}getAds(){return this.ads$}fromPromise(I){return tt(I())}fileToBase64(I){return new Ke(o=>{let e=new FileReader;return e.onload=()=>{let t=e.result;o.next(t),o.complete()},e.onerror=t=>{o.error(t)},I.type.startsWith("image/")?de(this,null,function*(){try{let t=yield this.compressImage(I);e.readAsDataURL(t)}catch(t){o.error(t)}}):I.type.startsWith("video/")?de(this,null,function*(){try{console.log("\u{1F3AC} Starting video compression...");let t=yield this.compressVideo(I);e.readAsDataURL(t)}catch(t){console.error("Video compression failed, using original:",t),e.readAsDataURL(I)}}):e.readAsDataURL(I),()=>{}})}compressImage(I){return de(this,null,function*(){let o={maxSizeMB:.5,maxWidthOrHeight:1280,useWebWorker:!0,initialQuality:.7};try{let e=yield re(I,o);return console.log(`\u2705 Image compressed: ${(I.size/1024).toFixed(1)}KB \u2192 ${(e.size/1024).toFixed(1)}KB`),e}catch(e){return console.error("Image compression error:",e),I}})}compressVideo(I){return new Promise((o,e)=>{let t=document.createElement("video");t.preload="metadata",t.muted=!0,t.playsInline=!0,t.onloadedmetadata=()=>de(this,null,function*(){let A=t.videoWidth,v=t.videoHeight;if(A>480||v>480){let P=Math.min(480/A,480/v);A=Math.round(A*P),v=Math.round(v*P)}console.log(`\u{1F3AC} Compressing video: ${t.videoWidth}x${t.videoHeight} \u2192 ${A}x${v}`);let n=document.createElement("canvas");n.width=A,n.height=v;let i=n.getContext("2d"),r=n.captureStream(15),a="video/webm;codecs=vp8";MediaRecorder.isTypeSupported(a)||(a="video/webm",MediaRecorder.isTypeSupported(a)||(a="video/mp4"));let h=new MediaRecorder(r,{mimeType:a,videoBitsPerSecond:5e5}),E=[];h.ondataavailable=P=>{P.data.size>0&&E.push(P.data)},h.onstop=()=>{let P=new Blob(E,{type:a.split(";")[0]}),Q=new File([P],I.name.replace(/\.\w+$/,".webm"),{type:"video/webm"});console.log(`\u2705 Video compressed: ${(I.size/1024).toFixed(1)}KB \u2192 ${(Q.size/1024).toFixed(1)}KB`),window.URL.revokeObjectURL(t.src),o(Q)},h.onerror=P=>{e(P)},h.start(),t.currentTime=0;let x=()=>{if(t.paused||t.ended){h.stop();return}i.drawImage(t,0,0,A,v),requestAnimationFrame(x)};t.onplay=()=>{x()},t.onended=()=>{h.stop()},setTimeout(()=>{!t.paused&&!t.ended&&(t.pause(),h.stop())},10*1e3);try{yield t.play()}catch{e(new Error("Failed to play video for compression"))}}),t.onerror=()=>{e(new Error("Failed to load video"))},t.src=URL.createObjectURL(I)})}createAd(I,o){return this.fromPromise(()=>de(this,null,function*(){let e="",t="";I.mediaFile&&(e=(yield this.fileToBase64(I.mediaFile).toPromise())??""),I.thumbnailFile?t=(yield this.fileToBase64(I.thumbnailFile).toPromise())??"":t=I.type==="image"?e:"";let c=9e5,f=e.length+t.length;if(f>c){let i=(f/1024/1024).toFixed(2);throw new Error(`File too large (${i}MB). Please use an image under 500KB or a shorter video (max 10 seconds).`)}let A=this.getResolutionFromAspectRatio(I.aspectRatio),v={title:I.title,type:I.type,status:I.status||"draft",thumbnailBase64:t,mediaBase64:e,aspectRatio:I.aspectRatio,resolution:A,description:I.description||"",targetUrl:I.targetUrl||"",uploadDate:Le.now(),createdBy:o,storeId:I.storeId||this.storeService.getActiveStoreId()||"",views:0,impressions:0,clicks:0,ctr:0};return(yield ft(Ge(this.db,"ads"),v)).id})).pipe(Ie(this.handleError))}updateAd(I,o){return this.fromPromise(()=>de(this,null,function*(){let e=Ce(this.db,"ads",I),t=Te(Be({},o),{updatedAt:Le.now()});o.mediaFile&&(t.mediaBase64=(yield this.fileToBase64(o.mediaFile).toPromise())??"",delete t.mediaFile),o.thumbnailFile&&(t.thumbnailBase64=(yield this.fileToBase64(o.thumbnailFile).toPromise())??"",delete t.thumbnailFile),o.aspectRatio&&(t.resolution=this.getResolutionFromAspectRatio(o.aspectRatio)),yield Pe(e,t)})).pipe(Ie(this.handleError))}deleteAd(I){return this.fromPromise(()=>de(this,null,function*(){let o=Ce(this.db,"ads",I);yield st(o)})).pipe(Ie(this.handleError))}updateAdStatus(I,o){return this.fromPromise(()=>de(this,null,function*(){let e=Ce(this.db,"ads",I);yield Pe(e,{status:o,updatedAt:Le.now()})})).pipe(Ie(this.handleError))}incrementViews(I){return this.fromPromise(()=>de(this,null,function*(){let o=this.adsSubject.value.find(e=>e.id===I);if(o){let e=Ce(this.db,"ads",I);yield Pe(e,{views:(o.views||0)+1})}})).pipe(Ie(this.handleError))}incrementClicks(I){return this.fromPromise(()=>de(this,null,function*(){let o=this.adsSubject.value.find(e=>e.id===I);if(o){let e=(o.clicks||0)+1,t=o.impressions||1,c=e/t*100,f=Ce(this.db,"ads",I);yield Pe(f,{clicks:e,ctr:parseFloat(c.toFixed(2))})}})).pipe(Ie(this.handleError))}getResolutionFromAspectRatio(I){return{"16:9":"1920x1080","9:16":"1080x1920","1:1":"1080x1080","4:5":"1080x1350","4:3":"1024x768","21:9":"2560x1080"}[I]||"1920x1080"}getVideoDuration(I){return new Ke(o=>{let e=document.createElement("video");e.preload="metadata",e.onloadedmetadata=()=>{window.URL.revokeObjectURL(e.src);let t=Math.floor(e.duration),c=Math.floor(t/60),f=t%60;o.next(`${c.toString().padStart(2,"0")}:${f.toString().padStart(2,"0")}`),o.complete()},e.onerror=()=>{o.error(new Error("Failed to load video metadata"))},e.src=URL.createObjectURL(I)})}static{this.\u0275fac=function(o){return new(o||C)(qe(lt),qe(ut))}}static{this.\u0275prov=nt({token:C,factory:C.\u0275fac,providedIn:"root"})}}return C})();export{jt as a};
