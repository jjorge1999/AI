import{a as ee}from"./chunk-NV4WTHD6.js";import{a as L,b as U,e as H,g as Q,h as Y,i as J,j as K,k as X,m as Z}from"./chunk-O3KIODMX.js";import{a as ne}from"./chunk-3BLHEVLV.js";import{a as te}from"./chunk-HTRA3HND.js";import{$a as s,Oa as f,Qa as u,Ra as N,Rb as W,Sa as w,Sb as B,Ua as i,Ub as j,Va as r,Wb as G,X as F,Xb as $,Za as x,_a as d,a as z,da as p,ea as m,eb as a,fb as h,gb as M,hb as T,ib as q,jb as y,kb as b,lb as P,nb as A,rb as S,tb as I,ub as R,wa as k,ya as c,za as D}from"./chunk-DH4NDV67.js";import{a as E,b as V}from"./chunk-7QOE2ANW.js";function re(l,g){if(l&1){let e=x();i(0,"button",3),d("click",function(){let t=p(e).$implicit,o=s();return m(o.categoryFilter=t)}),i(1,"span",4),a(2),r(),i(3,"span",5),a(4),r()()}if(l&2){let e=g.$implicit,n=s();w("active",n.categoryFilter===e),c(2),h(n.getCategoryIcon(e)),c(2),h(e)}}function oe(l,g){l&1&&(i(0,"span",62),a(1,"inventory_2"),r())}function ae(l,g){if(l&1&&(i(0,"span",63),a(1),r()),l&2){let e=s().$implicit,n=s();c(),M(" ",n.getCartQuantity(e.id)," ")}}function le(l,g){if(l&1){let e=x();i(0,"div",53),d("click",function(){let t=p(e).$implicit,o=s();return m(o.addProductToCart(t))}),i(1,"div",54),f(2,oe,2,0,"span",55)(3,ae,2,1,"span",56),r(),i(4,"div",57)(5,"p",58),a(6),r(),i(7,"div",59)(8,"span",60),a(9),r(),i(10,"span",61),a(11),r()()()()}if(l&2){let e=g.$implicit,n=s();w("in-cart",n.isInCart(e.id)),c(),N("background-image",e.imageUrl?"url("+e.imageUrl+")":"none"),c(),u("ngIf",!e.imageUrl),c(),u("ngIf",n.isInCart(e.id)),c(3),h(e.name),c(3),h(n.formatCurrency(e.price)),c(2),M("Qty: ",e.quantity,"")}}function ce(l,g){l&1&&(i(0,"div",64)(1,"span",4),a(2,"search_off"),r(),i(3,"p"),a(4,"No products available"),r()())}function se(l,g){if(l&1){let e=x();i(0,"button",65),d("click",function(){p(e);let t=s();return m(t.clearCart())}),a(1,"Clear"),r()}}function de(l,g){if(l&1&&(i(0,"option",66),a(1),r()),l&2){let e=g.$implicit;u("value",e.id),c(),M(" ",e.name," ")}}function pe(l,g){l&1&&(i(0,"span",4),a(1,"inventory_2"),r())}function me(l,g){if(l&1&&(i(0,"span",81),a(1),r()),l&2){let e=s().$implicit,n=s();c(),M(" ",n.formatCurrency(e.product.price)," each ")}}function ue(l,g){if(l&1&&(i(0,"span",82),a(1),r()),l&2){let e=s().$implicit,n=s();c(),M(" ",e.discountType==="percent"?e.discount+"%":n.formatCurrency(e.discount)," off ")}}function ge(l,g){if(l&1){let e=x();i(0,"div",67)(1,"div",68),f(2,pe,2,0,"span",69),r(),i(3,"div",70)(4,"div",71)(5,"span",72),a(6),r(),i(7,"span",73),a(8),r()(),i(9,"div",71),f(10,me,2,1,"span",74)(11,ue,2,1,"span",75),i(12,"div",76)(13,"button",77),d("click",function(){let t=p(e).index,o=s();return m(o.decrementItem(t))}),i(14,"span",4),a(15,"remove"),r()(),i(16,"span",78),a(17),r(),i(18,"button",79),d("click",function(){let t=p(e).index,o=s();return m(o.incrementItem(t))}),i(19,"span",4),a(20,"add"),r()()()()(),i(21,"button",80),d("click",function(){let t=p(e).index,o=s();return m(o.removeFromCart(t))}),i(22,"span",4),a(23,"close"),r()()()}if(l&2){let e=g.$implicit,n=s();c(),N("background-image",e.product.imageUrl?"url("+e.product.imageUrl+")":"none"),c(),u("ngIf",!e.product.imageUrl),c(4),h(e.product.name),c(2),h(n.formatCurrency(e.total)),c(2),u("ngIf",e.discount===0),c(),u("ngIf",e.discount>0),c(6),h(e.quantity),c(),u("disabled",e.quantity>=e.product.quantity)}}function _e(l,g){l&1&&(i(0,"div",83)(1,"span",4),a(2,"shopping_cart"),r(),i(3,"p"),a(4,"Cart is empty"),r(),i(5,"span",84),a(6,"Tap products to add them"),r()())}function ve(l,g){if(l&1&&(i(0,"span",85),a(1),r()),l&2){let e=s();c(),h(e.pendingSales.length)}}function fe(l,g){if(l&1){let e=x();i(0,"div",86)(1,"span",4),a(2,"local_shipping"),r(),i(3,"span"),a(4),S(5,"date"),r(),i(6,"button",87),d("click",function(){p(e);let t=s();return m(t.clearDelivery())}),a(7,"\u2715"),r()()}if(l&2){let e=s();c(4),T("",I(5,2,e.deliveryDate,"shortDate")," ",e.deliveryTime?"at "+e.deliveryTime:"","")}}function he(l,g){if(l&1){let e=x();i(0,"div",88)(1,"div",89)(2,"label"),a(3,"Cash Received"),r(),i(4,"div",90)(5,"span",91),a(6,"\u20B1"),r(),i(7,"input",92),d("ngModelChange",function(t){p(e);let o=s();return m(o.onCashInput(t))})("blur",function(){p(e);let t=s();return m(t.formatCashOnBlur())})("focus",function(){p(e);let t=s();return m(t.unformatCashOnFocus())}),r()()(),i(8,"div",93)(9,"span"),a(10,"Change"),r(),i(11,"span",94),a(12),r()()()}if(l&2){let e=s();c(7),u("ngModel",e.cashDisplayValue),c(),w("negative",e.change<0),c(4),h(e.formatCurrency(e.change))}}function xe(l,g){if(l&1&&(i(0,"div",95)(1,"span",4),a(2,"warning"),r(),a(3),r()),l&2){let e=s();c(3),M(" ",e.errorMessage," ")}}function Ce(l,g){if(l&1){let e=x();i(0,"button",96),d("click",function(){p(e);let t=s();return m(t.clearFilter())}),i(1,"span",4),a(2,"clear"),r()()}}function ye(l,g){if(l&1&&(i(0,"span",111),a(1),S(2,"slice"),r()),l&2){let e=s().$implicit;c(),M("Order #",R(2,1,e.orderId,4,12),"")}}function be(l,g){if(l&1&&(i(0,"span",111),a(1),r()),l&2){let e=s().$implicit;c(),h(e.sales==null||e.sales[0]==null?null:e.sales[0].productName)}}function Pe(l,g){l&1&&(i(0,"span",112),a(1,"RESERVATION"),r())}function Me(l,g){if(l&1&&(i(0,"span"),a(1),r()),l&2){let e=g.$implicit,n=g.last;c(),q(" ",e.productName," (x",e.quantitySold,")",n?"":", "," ")}}function we(l,g){if(l&1&&(i(0,"div",113),f(1,Me,2,3,"span",114),r()),l&2){let e=s().$implicit;c(),u("ngForOf",e.sales)}}function Oe(l,g){if(l&1&&(i(0,"div",115)(1,"span",4),a(2,"person"),r(),i(3,"span"),a(4),r()()),l&2){let e=s().$implicit;c(4),h(e.customer.name)}}function Se(l,g){if(l&1&&(i(0,"div",115)(1,"span",4),a(2,"event"),r(),i(3,"span"),a(4),S(5,"date"),r()()),l&2){let e=s().$implicit;c(4),h(I(5,1,e.deliveryDate,"medium"))}}function ke(l,g){if(l&1&&(i(0,"div",115)(1,"span",4),a(2,"notes"),r(),i(3,"span"),a(4),r()()),l&2){let e=s().$implicit;c(4),h(e.deliveryNotes)}}function De(l,g){if(l&1){let e=x();i(0,"button",116),d("click",function(){p(e);let t=s().$implicit,o=s();return m(o.confirmGroupReservation(t==null?null:t.sales))}),i(1,"span",4),a(2,"check_circle"),r()()}}function Te(l,g){if(l&1){let e=x();i(0,"button",117),d("click",function(){p(e);let t=s().$implicit,o=s();return m(o.markGroupAsDelivered(t==null?null:t.sales))}),i(1,"span",4),a(2,"local_shipping"),r()()}}function Ie(l,g){if(l&1){let e=x();i(0,"div",97)(1,"div",98)(2,"div",99),f(3,ye,3,5,"span",100)(4,be,2,1,"span",100)(5,Pe,2,0,"span",101),r(),i(6,"span",102),a(7),r()(),f(8,we,2,1,"div",103),i(9,"div",104),f(10,Oe,5,1,"div",105)(11,Se,6,4,"div",105)(12,ke,5,1,"div",105),r(),i(13,"div",106)(14,"button",107),d("click",function(){let t=p(e).$implicit,o=s();return m(o.openEditModal(t==null?null:t.sales[0]))}),i(15,"span",4),a(16,"edit"),r()(),f(17,De,3,0,"button",108)(18,Te,3,0,"button",109),i(19,"button",110),d("click",function(){let t=p(e).$implicit,o=s();return m(o.cancelGroupOrder(t==null?null:t.sales))}),i(20,"span",4),a(21,"delete"),r()()()()}if(l&2){let e=g.$implicit,n=s();w("reservation",e.status==="pending_confirmation"),c(3),u("ngIf",e.isGroup),c(),u("ngIf",!e.isGroup),c(),u("ngIf",e.status==="pending_confirmation"),c(2),h(n.formatCurrency(e.total)),c(),u("ngIf",e.isGroup),c(2),u("ngIf",e.customer),c(),u("ngIf",e.deliveryDate),c(),u("ngIf",e.deliveryNotes),c(5),u("ngIf",e.status==="pending_confirmation"),c(),u("ngIf",e.status!=="pending_confirmation")}}function Ee(l,g){l&1&&(i(0,"div",118)(1,"span",4),a(2,"check_circle"),r(),i(3,"p"),a(4,"No pending deliveries"),r()())}function Ve(l,g){if(l&1){let e=x();i(0,"div",119)(1,"button",120),d("click",function(){p(e);let t=s();return m(t.prevPendingPage())}),i(2,"span",4),a(3,"chevron_left"),r()(),i(4,"span"),a(5),r(),i(6,"button",120),d("click",function(){p(e);let t=s();return m(t.nextPendingPage())}),i(7,"span",4),a(8,"chevron_right"),r()()()}if(l&2){let e=s();c(),u("disabled",e.pendingPage===1),c(4),T("Page ",e.pendingPage," of ",e.pendingTotalPages,""),c(),u("disabled",e.pendingPage>=e.pendingTotalPages)}}function Ne(l,g){if(l&1){let e=x();i(0,"div",121),d("click",function(){p(e);let t=s();return m(t.closeDeliveryModal())}),i(1,"div",122),d("click",function(t){return p(e),m(t.stopPropagation())}),i(2,"div",123)(3,"h3")(4,"span",4),a(5,"local_shipping"),r(),a(6," Delivery Options"),r(),i(7,"button",124),d("click",function(){p(e);let t=s();return m(t.closeDeliveryModal())}),i(8,"span",4),a(9,"close"),r()()(),i(10,"div",125)(11,"div",126)(12,"label"),a(13,"Delivery Date"),r(),i(14,"input",127),P("ngModelChange",function(t){p(e);let o=s();return b(o.deliveryDate,t)||(o.deliveryDate=t),m(t)}),r()(),i(15,"div",126)(16,"label"),a(17,"Delivery Time"),r(),i(18,"input",128),P("ngModelChange",function(t){p(e);let o=s();return b(o.deliveryTime,t)||(o.deliveryTime=t),m(t)}),r()(),i(19,"div",126)(20,"label"),a(21,"Notes"),r(),i(22,"textarea",129),P("ngModelChange",function(t){p(e);let o=s();return b(o.deliveryNotes,t)||(o.deliveryNotes=t),m(t)}),r()()(),i(23,"div",130)(24,"button",131),d("click",function(){p(e);let t=s();return m(t.closeDeliveryModal())}),a(25,"Cancel"),r(),i(26,"button",132),d("click",function(){p(e);let t=s();return m(t.closeDeliveryModal())}),a(27,"Save"),r()()()()}if(l&2){let e=s();c(14),y("ngModel",e.deliveryDate),u("min",e.minDate),c(4),y("ngModel",e.deliveryTime),c(4),y("ngModel",e.deliveryNotes)}}function ze(l,g){if(l&1){let e=x();i(0,"div",121),d("click",function(){p(e);let t=s();return m(t.closeEditModal())}),i(1,"div",122),d("click",function(t){return p(e),m(t.stopPropagation())}),i(2,"div",123)(3,"h3")(4,"span",4),a(5,"edit"),r(),a(6," Edit Delivery"),r(),i(7,"button",124),d("click",function(){p(e);let t=s();return m(t.closeEditModal())}),i(8,"span",4),a(9,"close"),r()()(),i(10,"div",125)(11,"div",126)(12,"label"),a(13,"Delivery Date"),r(),i(14,"input",127),P("ngModelChange",function(t){p(e);let o=s();return b(o.editDeliveryDate,t)||(o.editDeliveryDate=t),m(t)}),r()(),i(15,"div",126)(16,"label"),a(17,"Delivery Time"),r(),i(18,"input",128),P("ngModelChange",function(t){p(e);let o=s();return b(o.editDeliveryTime,t)||(o.editDeliveryTime=t),m(t)}),r()(),i(19,"div",126)(20,"label"),a(21,"Notes"),r(),i(22,"textarea",133),P("ngModelChange",function(t){p(e);let o=s();return b(o.editDeliveryNotes,t)||(o.editDeliveryNotes=t),m(t)}),r()()(),i(23,"div",130)(24,"button",131),d("click",function(){p(e);let t=s();return m(t.closeEditModal())}),a(25,"Cancel"),r(),i(26,"button",132),d("click",function(){p(e);let t=s();return m(t.saveEdit())}),a(27,"Save Changes"),r()()()()}if(l&2){let e=s();c(14),y("ngModel",e.editDeliveryDate),u("min",e.minDate),c(4),y("ngModel",e.editDeliveryTime),c(4),y("ngModel",e.editDeliveryNotes)}}function Fe(l,g){if(l&1){let e=x();i(0,"div",121),d("click",function(){p(e);let t=s();return m(t.closeDiscountModal())}),i(1,"div",134),d("click",function(t){return p(e),m(t.stopPropagation())}),i(2,"div",123)(3,"h3")(4,"span",4),a(5,"percent"),r(),a(6," Apply Discount"),r(),i(7,"button",124),d("click",function(){p(e);let t=s();return m(t.closeDiscountModal())}),i(8,"span",4),a(9,"close"),r()()(),i(10,"div",125)(11,"div",135)(12,"input",136),P("ngModelChange",function(t){p(e);let o=s();return b(o.tempDiscount,t)||(o.tempDiscount=t),m(t)}),r(),i(13,"select",137),P("ngModelChange",function(t){p(e);let o=s();return b(o.tempDiscountType,t)||(o.tempDiscountType=t),m(t)}),i(14,"option",138),a(15,"\u20B1 Amount"),r(),i(16,"option",139),a(17,"% Percent"),r()()()(),i(18,"div",130)(19,"button",131),d("click",function(){p(e);let t=s();return m(t.closeDiscountModal())}),a(20,"Cancel"),r(),i(21,"button",132),d("click",function(){p(e);let t=s();return m(t.applyDiscount())}),a(22,"Apply"),r()()()()}if(l&2){let e=s();c(12),y("ngModel",e.tempDiscount),c(),y("ngModel",e.tempDiscountType)}}function qe(l,g){if(l&1){let e=x();i(0,"div",121),d("click",function(){p(e);let t=s();return m(t.closeNotesModal())}),i(1,"div",134),d("click",function(t){return p(e),m(t.stopPropagation())}),i(2,"div",123)(3,"h3")(4,"span",4),a(5,"edit_note"),r(),a(6," Order Notes"),r(),i(7,"button",124),d("click",function(){p(e);let t=s();return m(t.closeNotesModal())}),i(8,"span",4),a(9,"close"),r()()(),i(10,"div",125)(11,"textarea",140),P("ngModelChange",function(t){p(e);let o=s();return b(o.deliveryNotes,t)||(o.deliveryNotes=t),m(t)}),r()(),i(12,"div",130)(13,"button",131),d("click",function(){p(e);let t=s();return m(t.closeNotesModal())}),a(14,"Cancel"),r(),i(15,"button",132),d("click",function(){p(e);let t=s();return m(t.closeNotesModal())}),a(16,"Save"),r()()()()}if(l&2){let e=s();c(11),y("ngModel",e.deliveryNotes)}}var He=(()=>{class l{togglePending(){this.isPendingCollapsed=!this.isPendingCollapsed}onCashInput(e){this.cashDisplayValue=e;let n=e.replace(/[^0-9.]/g,"");this.cashReceived=parseFloat(n),isNaN(this.cashReceived)&&(this.cashReceived=0)}formatCashOnBlur(){this.cashReceived!==0?this.cashDisplayValue=this.cashReceived.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):this.cashDisplayValue=""}unformatCashOnFocus(){this.cashReceived!==0?this.cashDisplayValue=this.cashReceived.toString():this.cashDisplayValue=""}constructor(e,n,t){this.inventoryService=e,this.customerService=n,this.dialogService=t,this.products=[],this.allProducts=[],this.customers=[],this.pendingSales=[],this.allGroupedSales=[],this.isPendingCollapsed=!1,this.categories=[],this.categoryFilter="",this.isPendingPanelOpen=!1,this.isDeliveryModalOpen=!1,this.isDiscountModalOpen=!1,this.isNotesModalOpen=!1,this.orderNumber=1e3+Math.floor(Math.random()*9e3),this.currentDate=new Date,this.currentTime=new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),this.tempDiscount=0,this.tempDiscountType="amount",this.subscriptions=new z,this.selectedProductId="",this.selectedCustomerId="",this.quantity=1,this.cashReceived=0,this.discount=0,this.discountType="amount",this.errorMessage="",this.cart=[],this.deliveryDate="",this.deliveryTime="",this.deliveryNotes="",this.minDate="",this.deliveryFilterDate="",this.statusFilter="all",this.isEditModalOpen=!1,this.editingSale=null,this.editDeliveryDate="",this.editDeliveryTime="",this.editDeliveryNotes="",this.pendingPage=1,this.pendingPageSize=5,this.pendingPageSizeOptions=[5,10,20,50],this.alarmInterval=null,this.checkInterval=null,this.audioCtx=null,this.audioUnlocked=!1,this.cashDisplayValue="";let o=new Date,_=o.getFullYear(),v=String(o.getMonth()+1).padStart(2,"0"),C=String(o.getDate()).padStart(2,"0");this.minDate=`${_}-${v}-${C}`,this.deliveryDate=this.minDate,this.deliveryTime="10:00"}ngOnInit(){this.customerService.loadCustomers(),this.subscriptions.add(this.inventoryService.getProducts().subscribe(e=>{this.allProducts=e,this.products=e.filter(t=>t.quantity>0);let n=new Set(e.map(t=>t.category));this.categories=Array.from(n).filter(t=>t).sort()})),this.subscriptions.add(this.customerService.getCustomers().subscribe(e=>{this.customers=e})),this.subscriptions.add(this.inventoryService.getSales().subscribe(e=>{this.pendingSales=e.filter(n=>n.pending===!0),this.updateGroupedSales(),this.checkInterval||this.startAlarmChecks()})),this.discount=0}ngOnDestroy(){this.subscriptions.unsubscribe(),this.stopAlarm(),this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null),this.audioCtx&&this.audioCtx.close().catch(()=>{})}onUserInteraction(){this.unlockAudioContext()}unlockAudioContext(){if(this.audioUnlocked)return;this.audioCtx||(this.audioCtx=new(window.AudioContext||window.webkitAudioContext));let e=this.audioCtx;if(e){e.state==="suspended"&&e.resume().catch(()=>{});try{let n=e.createBuffer(1,1,22050),t=e.createBufferSource();t.buffer=n,t.connect(e.destination),t.start(0),this.audioUnlocked=!0}catch{}}}startAlarmChecks(){this.checkInterval=setInterval(()=>this.checkPendingDeliveryAlarms(),60*60*1e3),this.checkPendingDeliveryAlarms()}get filteredPendingSales(){let e=this.pendingSales;return this.statusFilter==="reservation"&&(e=e.filter(n=>n.reservationStatus==="pending_confirmation")),this.deliveryFilterDate&&(e=e.filter(n=>{if(!n.deliveryDate)return!1;let t=new Date(n.deliveryDate),o=t.getFullYear(),_=String(t.getMonth()+1).padStart(2,"0"),v=String(t.getDate()).padStart(2,"0");return`${o}-${_}-${v}`===this.deliveryFilterDate})),e.slice().sort((n,t)=>{let o=n.reservationStatus==="pending_confirmation",_=t.reservationStatus==="pending_confirmation";if(o&&!_)return-1;if(!o&&_)return 1;let v=n.deliveryDate?new Date(n.deliveryDate).getTime():1/0,C=t.deliveryDate?new Date(t.deliveryDate).getTime():1/0;return v-C})}checkPendingDeliveryAlarms(){let e=new Date,n=[];this.pendingSales.forEach(t=>{if(!t.deliveryDate)return;let _=new Date(t.deliveryDate).getTime()-e.getTime(),v=Math.floor(_/(1e3*60*60*24));(v===1||v===2||v<0)&&n.push({sale:t,days:v})}),n.length>0&&this.triggerBatchAlarm(n)}triggerBatchAlarm(e){if(this.alarmInterval)return;let n="";if(e.length===1){let t=e[0],_=new Date(t.sale.deliveryDate).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"});t.days<0?n=`\u26A0\uFE0F OVERDUE: Delivery for "${t.sale.productName}" was due on ${_}.`:t.days===0?n=`\u26A0\uFE0F TODAY: Delivery for "${t.sale.productName}" is due today!`:n=`\u26A0\uFE0F UPCOMING: Delivery for "${t.sale.productName}" is due in ${t.days} day(s) (${_}).`}else n=`\u26A0\uFE0F There are ${e.length} deliveries due soon or overdue. Please check the Pending Deliveries list.`;this.playLoopingAlarm(),this.dialogService.alert(n,"Delivery Reminder","warning").subscribe(()=>{this.stopAlarm()})}playLoopingAlarm(){this.stopAlarm(),this.playBeep(),this.alarmInterval=setInterval(()=>{this.playBeep()},2e3)}stopAlarm(){this.alarmInterval&&(clearInterval(this.alarmInterval),this.alarmInterval=null)}playBeep(){try{this.audioCtx||(this.audioCtx=new(window.AudioContext||window.webkitAudioContext));let e=this.audioCtx;if(e.state==="suspended")return;let n=e.createOscillator(),t=e.createOscillator(),o=e.createGain();n.type="sine",t.type="sine",n.frequency.setValueAtTime(523.25,e.currentTime),t.frequency.setValueAtTime(659.25,e.currentTime),n.connect(o),t.connect(o),o.connect(e.destination),o.gain.setValueAtTime(0,e.currentTime),o.gain.linearRampToValueAtTime(.15,e.currentTime+.05),o.gain.linearRampToValueAtTime(.15,e.currentTime+.4),o.gain.exponentialRampToValueAtTime(.01,e.currentTime+.8),n.start(e.currentTime),t.start(e.currentTime),n.stop(e.currentTime+.8),t.stop(e.currentTime+.8)}catch(e){console.error("Audio alarm failed",e)}}get selectedProduct(){return this.products.find(e=>e.id===this.selectedProductId)}get selectedCustomer(){return this.customers.find(e=>e.id===this.selectedCustomerId)}getCustomerById(e){if(e)return this.customers.find(n=>n.id===e)}get maxQuantity(){return this.selectedProduct?.quantity||0}onProductChange(){this.quantity=1,this.errorMessage="",this.discount=0}addToCart(){if(this.errorMessage="",!this.selectedProduct){this.errorMessage="Please select a product";return}if(this.quantity<1||this.quantity>this.maxQuantity){this.errorMessage=`Quantity must be between 1 and ${this.maxQuantity}`;return}let e=this.cart.filter(t=>t.product.id===this.selectedProduct.id).reduce((t,o)=>t+o.quantity,0);if(e+this.quantity>this.maxQuantity){this.errorMessage=`Cannot add more. Total in cart (${e}) + new (${this.quantity}) exceeds stock (${this.maxQuantity})`;return}let n=this.selectedProduct.price*this.quantity;this.discount>0&&(this.discountType==="percent"?n=n-n*(this.discount/100):n=n-this.discount),n=Math.max(0,Math.round(n*100)/100),this.cart.push({product:this.selectedProduct,quantity:this.quantity,discount:this.discount,discountType:this.discountType,total:n}),this.quantity=1,this.discount=0,this.discountType="amount",this.selectedProductId=""}removeFromCart(e){this.cart.splice(e,1)}get total(){return this.cart.reduce((e,n)=>e+n.total,0)}get change(){return this.cashReceived-this.total}isValid(){return this.cart.length>0&&this.cashReceived>=this.total}updateGroupedSales(){let e=new Map,n=[];this.filteredPendingSales.forEach(o=>{o.orderId?(e.has(o.orderId)||e.set(o.orderId,[]),e.get(o.orderId).push(o)):n.push(o)});let t=[];e.forEach((o,_)=>{let v=o[0];t.push({isGroup:!0,orderId:_,sales:o,total:o.reduce((C,O)=>C+O.total,0),customerName:this.getCustomerById(v.customerId)?.name||"Walk-in",customer:this.getCustomerById(v.customerId),deliveryDate:v.deliveryDate,timestamp:v.timestamp,status:v.reservationStatus,productNames:o.map(C=>C.productName).join(", "),deliveryNotes:v.deliveryNotes,quantityTotal:o.reduce((C,O)=>C+O.quantitySold,0)})}),n.forEach(o=>{t.push({isGroup:!1,id:o.id,sales:[o],total:o.total,customerName:this.getCustomerById(o.customerId)?.name||"Walk-in",customer:this.getCustomerById(o.customerId),deliveryDate:o.deliveryDate,timestamp:o.timestamp,status:o.reservationStatus,productNames:o.productName,deliveryNotes:o.deliveryNotes,quantityTotal:o.quantitySold})}),this.allGroupedSales=t.sort((o,_)=>{let v=o.status==="pending_confirmation",C=_.status==="pending_confirmation";if(v&&!C)return-1;if(!v&&C)return 1;let O=o.deliveryDate?new Date(o.deliveryDate).getTime():1/0,ie=_.deliveryDate?new Date(_.deliveryDate).getTime():1/0;return O-ie}),this.pendingPage>this.pendingTotalPages&&this.pendingPage>1&&(this.pendingPage=1)}get paginatedGroupedPendingSales(){let e=(this.pendingPage-1)*this.pendingPageSize;return this.allGroupedSales.slice(e,e+this.pendingPageSize)}get pendingTotalPages(){return Math.ceil(this.allGroupedSales.length/this.pendingPageSize)}nextPendingPage(){this.pendingPage<this.pendingTotalPages&&this.pendingPage++}prevPendingPage(){this.pendingPage>1&&this.pendingPage--}goToPendingPage(e){this.pendingPage=e}getPendingPageNumbers(){return Array(this.pendingTotalPages).fill(0).map((e,n)=>n+1)}clearFilter(){this.deliveryFilterDate="",this.statusFilter="all",this.pendingPage=1,this.updateGroupedSales()}checkout(){if(this.errorMessage="",this.cart.length===0){this.errorMessage="Cart is empty";return}if(this.cashReceived<this.total){this.errorMessage="Insufficient cash received";return}let e=this.cashReceived-this.total,n="ORD-"+Date.now()+"-"+Math.floor(Math.random()*1e3);try{this.cart.forEach((t,o)=>{let _=t.total;o===0&&(_+=e);let v;this.deliveryDate&&(this.deliveryTime?v=new Date(`${this.deliveryDate}T${this.deliveryTime}`):v=new Date(this.deliveryDate)),this.inventoryService.recordSale(t.product.id,t.quantity,_,v,this.deliveryNotes||void 0,this.selectedCustomerId||void 0,t.discount,t.discountType,n)}),this.cart=[],this.cashReceived=0,this.deliveryDate=this.minDate,this.deliveryTime="",this.deliveryNotes="",this.selectedCustomerId="",this.errorMessage=""}catch(t){this.errorMessage=t.message||"Error processing sales"}}markAsDelivered(e){this.dialogService.confirm("Are you sure you want to mark this item as delivered?","Mark as Delivered").subscribe(n=>{n&&this.inventoryService.completePendingSale(e)})}confirmReservation(e){this.dialogService.confirm("Confirming this reservation will deduct items from inventory. Continue?","Confirm Reservation").subscribe(n=>{n&&this.inventoryService.confirmReservation(e)})}deleteReservation(e){this.dialogService.confirm("Are you sure you want to remove this reservation?","Remove Reservation").subscribe(n=>{n&&this.inventoryService.deleteSale(e.id)})}openEditModal(e){if(e){if(this.editingSale=e,this.isEditModalOpen=!0,e.deliveryDate){let n=new Date(e.deliveryDate),t=n.getFullYear(),o=String(n.getMonth()+1).padStart(2,"0"),_=String(n.getDate()).padStart(2,"0");this.editDeliveryDate=`${t}-${o}-${_}`,this.editDeliveryTime=n.toTimeString().substring(0,5)}else this.editDeliveryDate="",this.editDeliveryTime="";this.editDeliveryNotes=e.deliveryNotes||""}}closeEditModal(){this.isEditModalOpen=!1,this.editingSale=null,this.editDeliveryDate="",this.editDeliveryTime="",this.editDeliveryNotes=""}saveEdit(){if(!this.editingSale)return;let e;this.editDeliveryDate&&(this.editDeliveryTime?e=new Date(`${this.editDeliveryDate}T${this.editDeliveryTime}`):e=new Date(this.editDeliveryDate));let n=this.editingSale.orderId;if(n)this.pendingSales.filter(o=>o.orderId===n).forEach(o=>{let _=V(E({},o),{deliveryDate:e,deliveryNotes:this.editDeliveryNotes});this.inventoryService.updateSale(_)});else{let t=V(E({},this.editingSale),{deliveryDate:e,deliveryNotes:this.editDeliveryNotes});this.inventoryService.updateSale(t)}this.closeEditModal()}markGroupAsDelivered(e){!e||e.length===0||this.dialogService.confirm(`Mark ${e.length} items as delivered? This will deduct stock and complete the order.`,"Mark Group as Delivered").subscribe(n=>{n&&e.forEach(t=>this.inventoryService.completePendingSale(t.id))})}confirmGroupReservation(e){!e||e.length===0||this.dialogService.confirm(`Confirm reservation for ${e.length} items? This will deduct stock upon delivery.`,"Confirm Group Reservation").subscribe(n=>{n&&e.forEach(t=>this.inventoryService.confirmReservation(t))})}cancelGroupOrder(e){!e||e.length===0||this.dialogService.confirm(`Cancel order for ${e.length} items? This cannot be undone.`,"Cancel Order").subscribe(n=>{n&&e.forEach(t=>this.inventoryService.deleteSale(t.id))})}get filteredProducts(){return this.categoryFilter?this.products.filter(e=>e.category===this.categoryFilter):this.products}getCategoryIcon(e){return{Lechon:"restaurant","Hollow blocks":"construction","Sand and Gravel":"landscape",Copra:"eco",Electronics:"devices",Furniture:"chair","Hot Drinks":"local_cafe","Cold Drinks":"ac_unit",Pastries:"bakery_dining",Others:"category"}[e]||"category"}isInCart(e){return this.cart.some(n=>n.product.id===e)}getCartQuantity(e){return this.cart.filter(n=>n.product.id===e).reduce((n,t)=>n+t.quantity,0)}addProductToCart(e){this.errorMessage="";let n=this.cart.findIndex(o=>o.product.id===e.id);if(n>=0){let o=this.cart[n];o.quantity<e.quantity?(o.quantity++,o.total=this.calculateItemTotal(o)):this.errorMessage=`Cannot add more. Already at max stock (${e.quantity})`;return}let t={product:e,quantity:1,discount:0,discountType:"amount",total:e.price};this.cart.push(t)}calculateItemTotal(e){let n=e.product.price*e.quantity;return e.discount>0&&(e.discountType==="percent"?n=n-n*(e.discount/100):n=n-e.discount),Math.max(0,Math.round(n*100)/100)}incrementItem(e){let n=this.cart[e];n&&n.quantity<n.product.quantity&&(n.quantity++,n.total=this.calculateItemTotal(n))}decrementItem(e){let n=this.cart[e];n&&(n.quantity>1?(n.quantity--,n.total=this.calculateItemTotal(n)):this.removeFromCart(e))}clearCart(){this.cart=[],this.cashReceived=0,this.cashDisplayValue="",this.errorMessage=""}formatCurrency(e){return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}togglePendingPanel(){this.isPendingPanelOpen=!this.isPendingPanelOpen,this.isPendingPanelOpen&&this.updateGroupedSales()}closePendingPanel(){this.isPendingPanelOpen=!1}openDeliveryModal(){this.isDeliveryModalOpen=!0}closeDeliveryModal(){this.isDeliveryModalOpen=!1}openDiscountModal(){this.tempDiscount=0,this.tempDiscountType="amount",this.isDiscountModalOpen=!0}closeDiscountModal(){this.isDiscountModalOpen=!1}applyDiscount(){if(this.cart.length>0&&this.tempDiscount>0){let e=this.tempDiscount/this.cart.length;this.cart.forEach(n=>{n.discount=e,n.discountType=this.tempDiscountType,n.total=this.calculateItemTotal(n)})}this.closeDiscountModal()}openNotesModal(){this.isNotesModalOpen=!0}closeNotesModal(){this.isNotesModalOpen=!1}clearDelivery(){this.deliveryDate="",this.deliveryTime="",this.deliveryNotes=""}static{this.\u0275fac=function(n){return new(n||l)(D(ne),D(te),D(ee))}}static{this.\u0275cmp=F({type:l,selectors:[["app-pos-calculator"]],hostBindings:function(n,t){n&1&&d("click",function(){return t.onUserInteraction()},!1,k)("touchstart",function(){return t.onUserInteraction()},!1,k)("keydown",function(){return t.onUserInteraction()},!1,k)},standalone:!0,features:[A],decls:99,vars:38,consts:[[1,"pos-container"],[1,"products-panel"],[1,"category-rail"],[1,"category-btn",3,"click"],[1,"material-icon"],[1,"category-label"],["class","category-btn",3,"active","click",4,"ngFor","ngForOf"],[1,"product-grid-wrapper"],[1,"product-grid"],["class","product-card",3,"in-cart","click",4,"ngFor","ngForOf"],["class","empty-products",4,"ngIf"],[1,"cart-panel"],[1,"cart-header"],[1,"order-info"],[1,"order-title"],[1,"order-meta"],["class","clear-btn",3,"click",4,"ngIf"],[1,"customer-select-wrapper"],[1,"customer-select",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"cart-items"],["class","cart-item",4,"ngFor","ngForOf"],["class","empty-cart",4,"ngIf"],[1,"cart-footer"],[1,"quick-actions"],[1,"action-btn",3,"click"],[1,"action-label"],["class","pending-badge",4,"ngIf"],["class","delivery-summary",4,"ngIf"],[1,"order-summary"],[1,"summary-row"],[1,"summary-row","total-row"],[1,"total-amount"],["class","payment-section",4,"ngIf"],[1,"main-actions"],[1,"charge-btn",3,"click","disabled"],["class","error-banner",4,"ngIf"],[1,"pending-overlay",3,"click"],[1,"pending-panel",3,"click"],[1,"pending-header"],[1,"close-pending-btn",3,"click"],[1,"pending-filters"],["type","date","placeholder","Filter by date",1,"filter-input",3,"ngModelChange","ngModel"],[1,"filter-select",3,"ngModelChange","ngModel"],["value","all"],["value","reservation"],["class","clear-filter-btn",3,"click",4,"ngIf"],[1,"pending-list"],["class","pending-order-card",3,"reservation",4,"ngFor","ngForOf"],["class","empty-pending",4,"ngIf"],["class","pending-pagination",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"product-card",3,"click"],[1,"product-image"],["class","material-icon no-image",4,"ngIf"],["class","cart-indicator",4,"ngIf"],[1,"product-info"],[1,"product-name"],[1,"product-meta"],[1,"product-price"],[1,"product-stock"],[1,"material-icon","no-image"],[1,"cart-indicator"],[1,"empty-products"],[1,"clear-btn",3,"click"],[3,"value"],[1,"cart-item"],[1,"cart-item-image"],["class","material-icon",4,"ngIf"],[1,"cart-item-details"],[1,"cart-item-row"],[1,"cart-item-name"],[1,"cart-item-total"],["class","cart-item-price",4,"ngIf"],["class","cart-item-price discount-applied",4,"ngIf"],[1,"qty-controls"],[1,"qty-btn",3,"click"],[1,"qty-value"],[1,"qty-btn",3,"click","disabled"],["title","Remove",1,"remove-item-btn",3,"click"],[1,"cart-item-price"],[1,"cart-item-price","discount-applied"],[1,"empty-cart"],[1,"hint"],[1,"pending-badge"],[1,"delivery-summary"],[1,"clear-delivery",3,"click"],[1,"payment-section"],[1,"cash-input-wrapper"],[1,"cash-input-row"],[1,"currency-symbol"],["type","text","placeholder","0.00",1,"cash-input",3,"ngModelChange","blur","focus","ngModel"],[1,"change-display"],[1,"change-amount"],[1,"error-banner"],[1,"clear-filter-btn",3,"click"],[1,"pending-order-card"],[1,"order-card-header"],[1,"order-title-section"],["class","order-id",4,"ngIf"],["class","reservation-badge",4,"ngIf"],[1,"order-total"],["class","order-items-preview",4,"ngIf"],[1,"order-details"],["class","detail-row",4,"ngIf"],[1,"order-actions"],[1,"order-action-btn","edit",3,"click"],["class","order-action-btn confirm",3,"click",4,"ngIf"],["class","order-action-btn deliver",3,"click",4,"ngIf"],[1,"order-action-btn","delete",3,"click"],[1,"order-id"],[1,"reservation-badge"],[1,"order-items-preview"],[4,"ngFor","ngForOf"],[1,"detail-row"],[1,"order-action-btn","confirm",3,"click"],[1,"order-action-btn","deliver",3,"click"],[1,"empty-pending"],[1,"pending-pagination"],[3,"click","disabled"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"modal-close",3,"click"],[1,"modal-body"],[1,"form-group"],["type","date",3,"ngModelChange","ngModel","min"],["type","time",3,"ngModelChange","ngModel"],["rows","3","placeholder","Special instructions...",3,"ngModelChange","ngModel"],[1,"modal-actions"],[1,"btn-cancel",3,"click"],[1,"btn-save",3,"click"],["rows","3","placeholder","Notes...",3,"ngModelChange","ngModel"],[1,"modal-content","small",3,"click"],[1,"discount-input-row"],["type","number","placeholder","0","min","0",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["value","amount"],["value","percent"],["rows","4","placeholder","Add notes for this order...",3,"ngModelChange","ngModel"]],template:function(n,t){n&1&&(i(0,"div",0)(1,"main",1)(2,"div",2)(3,"button",3),d("click",function(){return t.categoryFilter=""}),i(4,"span",4),a(5,"star"),r(),i(6,"span",5),a(7,"All Items"),r()(),f(8,re,5,4,"button",6),r(),i(9,"div",7)(10,"div",8),f(11,le,12,9,"div",9)(12,ce,5,0,"div",10),r()()(),i(13,"aside",11)(14,"div",12)(15,"div",13)(16,"h3",14),a(17),r(),i(18,"p",15),a(19),S(20,"date"),r()(),f(21,se,2,0,"button",16),r(),i(22,"div",17)(23,"select",18),P("ngModelChange",function(_){return b(t.selectedCustomerId,_)||(t.selectedCustomerId=_),_}),i(24,"option",19),a(25,"-- Walk-in Customer --"),r(),f(26,de,2,2,"option",20),r()(),i(27,"div",21),f(28,ge,24,9,"div",22)(29,_e,7,0,"div",23),r(),i(30,"div",24)(31,"div",25)(32,"button",26),d("click",function(){return t.openDiscountModal()}),i(33,"span",4),a(34,"percent"),r(),i(35,"span",27),a(36,"Discount"),r()(),i(37,"button",26),d("click",function(){return t.openDeliveryModal()}),i(38,"span",4),a(39,"local_shipping"),r(),i(40,"span",27),a(41,"Delivery"),r()(),i(42,"button",26),d("click",function(){return t.openNotesModal()}),i(43,"span",4),a(44,"edit_note"),r(),i(45,"span",27),a(46,"Notes"),r()(),i(47,"button",26),d("click",function(){return t.togglePendingPanel()}),i(48,"span",4),a(49,"schedule"),r(),i(50,"span",27),a(51,"Pending"),r(),f(52,ve,2,1,"span",28),r()(),f(53,fe,8,5,"div",29),i(54,"div",30)(55,"div",31)(56,"span"),a(57,"Subtotal"),r(),i(58,"span"),a(59),r()(),i(60,"div",32)(61,"span"),a(62,"Total"),r(),i(63,"span",33),a(64),r()()(),f(65,he,13,4,"div",34),i(66,"div",35)(67,"button",36),d("click",function(){return t.checkout()}),i(68,"span"),a(69),r(),i(70,"span",4),a(71,"arrow_forward"),r()()(),f(72,xe,4,1,"div",37),r()()(),i(73,"div",38),d("click",function(){return t.closePendingPanel()}),i(74,"div",39),d("click",function(_){return _.stopPropagation()}),i(75,"div",40)(76,"h3")(77,"span",4),a(78,"schedule"),r(),a(79," Pending Deliveries "),r(),i(80,"button",41),d("click",function(){return t.closePendingPanel()}),i(81,"span",4),a(82,"close"),r()()(),i(83,"div",42)(84,"input",43),P("ngModelChange",function(_){return b(t.deliveryFilterDate,_)||(t.deliveryFilterDate=_),_}),d("ngModelChange",function(){return t.updateGroupedSales()}),r(),i(85,"select",44),P("ngModelChange",function(_){return b(t.statusFilter,_)||(t.statusFilter=_),_}),d("ngModelChange",function(){return t.updateGroupedSales()}),i(86,"option",45),a(87,"All Deliveries"),r(),i(88,"option",46),a(89,"Reservations Only"),r()(),f(90,Ce,3,0,"button",47),r(),i(91,"div",48),f(92,Ie,22,12,"div",49)(93,Ee,5,0,"div",50),r(),f(94,Ve,9,4,"div",51),r()(),f(95,Ne,28,4,"div",52)(96,ze,28,4,"div",52)(97,Fe,23,2,"div",52)(98,qe,17,1,"div",52)),n&2&&(c(3),w("active",!t.categoryFilter),c(5),u("ngForOf",t.categories),c(3),u("ngForOf",t.filteredProducts),c(),u("ngIf",t.filteredProducts.length===0),c(5),M("Order #",t.orderNumber,""),c(2),T("",I(20,35,t.currentDate,"shortDate")," \u2022 ",t.currentTime,""),c(2),u("ngIf",t.cart.length>0),c(2),y("ngModel",t.selectedCustomerId),c(3),u("ngForOf",t.customers),c(2),u("ngForOf",t.cart),c(),u("ngIf",t.cart.length===0),c(23),u("ngIf",t.pendingSales.length>0),c(),u("ngIf",t.deliveryDate),c(6),h(t.formatCurrency(t.total)),c(5),h(t.formatCurrency(t.total)),c(),u("ngIf",t.cart.length>0),c(2),u("disabled",!t.isValid()),c(2),M("CHARGE ",t.formatCurrency(t.total),""),c(3),u("ngIf",t.errorMessage),c(),w("open",t.isPendingPanelOpen),c(),w("open",t.isPendingPanelOpen),c(10),y("ngModel",t.deliveryFilterDate),c(),y("ngModel",t.statusFilter),c(5),u("ngIf",t.deliveryFilterDate||t.statusFilter!=="all"),c(2),u("ngForOf",t.paginatedGroupedPendingSales),c(),u("ngIf",t.allGroupedSales.length===0),c(),u("ngIf",t.pendingTotalPages>1),c(),u("ngIf",t.isDeliveryModalOpen),c(),u("ngIf",t.isEditModalOpen),c(),u("ngIf",t.isDiscountModalOpen),c(),u("ngIf",t.isNotesModalOpen))},dependencies:[$,W,B,G,j,Z,J,K,L,Q,Y,U,X,H],styles:['.pos-container[_ngcontent-%COMP%]{display:flex;height:calc(100vh - 100px);width:100%;overflow:hidden;background:var(--color-bg)}.material-icon[_ngcontent-%COMP%]{font-family:Material Symbols Outlined,sans-serif;font-weight:400;font-style:normal;font-size:24px;display:inline-block;line-height:1;text-transform:none;letter-spacing:normal;word-wrap:normal;white-space:nowrap;direction:ltr;-webkit-font-smoothing:antialiased;font-variation-settings:"FILL" 0,"wght" 400,"GRAD" 0,"opsz" 24}.products-panel[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;min-width:0;overflow:hidden}.category-rail[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm);padding:var(--space-md) var(--space-lg);overflow-x:auto;border-bottom:1px solid var(--color-border);background:var(--color-surface);flex-shrink:0}.category-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);padding:var(--space-sm) var(--space-md);border:none;border-radius:var(--radius-lg);background:var(--color-bg);color:var(--color-text-muted);font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s;white-space:nowrap}.category-btn[_ngcontent-%COMP%]:hover{background:#137fec1a;color:var(--color-primary)}.category-btn.active[_ngcontent-%COMP%]{background:var(--color-primary);color:#fff;box-shadow:0 4px 12px #137fec4d}.category-btn[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:20px}.category-label[_ngcontent-%COMP%]{font-weight:500}.product-grid-wrapper[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:var(--space-lg)}.product-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:var(--space-md)}@media (min-width: 1200px){.product-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(5,1fr)}}@media (min-width: 1400px){.product-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(6,1fr)}}.product-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm);padding:var(--space-sm);background:var(--color-surface);border-radius:var(--radius-xl);cursor:pointer;transition:all .2s;border:2px solid transparent;height:200px}.product-card[_ngcontent-%COMP%]:hover{border-color:var(--color-primary);transform:translateY(-2px);box-shadow:var(--shadow-md)}.product-card.in-cart[_ngcontent-%COMP%]{border-color:var(--color-primary);background:#137fec0d}.product-image[_ngcontent-%COMP%]{position:relative;width:100%;height:120px;min-height:120px;max-height:120px;border-radius:var(--radius-lg);background-color:var(--color-bg);background-size:cover;background-position:center;display:flex;align-items:center;justify-content:center;overflow:hidden;flex-shrink:0}.product-image[_ngcontent-%COMP%]   .no-image[_ngcontent-%COMP%]{font-size:36px;color:var(--color-text-muted);opacity:.5}.cart-indicator[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;background:var(--color-primary);color:#fff;width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.75rem;font-weight:700;box-shadow:0 2px 8px #0000004d}.product-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.product-name[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text);margin:0;line-height:1.3;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.product-meta[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.product-price[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;color:var(--color-primary)}.product-stock[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted)}.empty-products[_ngcontent-%COMP%]{grid-column:1 / -1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--space-2xl);color:var(--color-text-muted)}.empty-products[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:var(--space-md);opacity:.5}.cart-panel[_ngcontent-%COMP%]{width:480px;min-width:420px;flex-shrink:0;display:flex;flex-direction:column;background:var(--color-surface);border-left:1px solid var(--color-border);box-shadow:-4px 0 24px #0000001a}.cart-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;padding:var(--space-md) var(--space-lg);border-bottom:1px solid var(--color-border);flex-shrink:0}.order-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.order-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:700;color:var(--color-text);margin:0}.order-meta[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted);margin:0}.clear-btn[_ngcontent-%COMP%]{background:transparent;border:none;color:var(--color-primary);font-size:.875rem;font-weight:600;cursor:pointer;text-transform:uppercase;letter-spacing:.05em}.clear-btn[_ngcontent-%COMP%]:hover{color:#ef4444}.customer-select-wrapper[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-lg);border-bottom:1px solid var(--color-border);flex-shrink:0}.customer-select[_ngcontent-%COMP%]{width:100%;padding:var(--space-sm) var(--space-md);border:1px solid var(--color-border);border-radius:var(--radius-lg);background:var(--color-bg);color:var(--color-text);font-size:.875rem}.cart-items[_ngcontent-%COMP%]{flex:1;min-height:200px;overflow-y:auto;padding:var(--space-sm) var(--space-md)}.cart-item[_ngcontent-%COMP%]{display:flex;gap:var(--space-md);padding:var(--space-md);border-radius:var(--radius-lg);transition:background .2s;position:relative}.cart-item[_ngcontent-%COMP%]:hover{background:var(--color-bg)}.cart-item-image[_ngcontent-%COMP%]{width:48px;height:48px;min-width:48px;border-radius:var(--radius-lg);background-color:var(--color-bg);background-size:cover;background-position:center;display:flex;align-items:center;justify-content:center}.cart-item-image[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:24px;color:var(--color-text-muted)}.cart-item-details[_ngcontent-%COMP%]{flex:1;min-width:0;display:flex;flex-direction:column;gap:4px}.cart-item-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.cart-item-name[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.cart-item-total[_ngcontent-%COMP%]{font-weight:700;color:var(--color-text)}.cart-item-price[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted)}.cart-item-price.discount-applied[_ngcontent-%COMP%]{color:#10b981}.qty-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;background:var(--color-bg);border-radius:9999px;padding:2px}.qty-btn[_ngcontent-%COMP%]{width:28px;height:28px;display:flex;align-items:center;justify-content:center;border:none;background:transparent;color:var(--color-text-muted);cursor:pointer;border-radius:50%;transition:all .2s;padding:0}.qty-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--color-surface);color:var(--color-text)}.qty-btn[_ngcontent-%COMP%]:disabled{opacity:.3;cursor:not-allowed}.qty-btn[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:18px}.qty-value[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:var(--color-text);min-width:20px;text-align:center}.remove-item-btn[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;width:24px;height:24px;display:flex;align-items:center;justify-content:center;border:none;background:transparent;color:var(--color-text-muted);cursor:pointer;border-radius:50%;opacity:0;transition:all .2s;padding:0}.cart-item[_ngcontent-%COMP%]:hover   .remove-item-btn[_ngcontent-%COMP%]{opacity:1}.remove-item-btn[_ngcontent-%COMP%]:hover{background:#ef44441a;color:#ef4444}.remove-item-btn[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:18px}.empty-cart[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--space-2xl);color:var(--color-text-muted);text-align:center}.empty-cart[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:var(--space-md);opacity:.3}.empty-cart[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 var(--space-xs);font-weight:500}.empty-cart[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{font-size:.75rem}.cart-footer[_ngcontent-%COMP%]{border-top:1px solid var(--color-border);padding:var(--space-sm) var(--space-lg);background:var(--color-surface);display:flex;flex-direction:column;gap:var(--space-sm);flex-shrink:0}.quick-actions[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:var(--space-sm)}.action-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:4px;padding:var(--space-sm);border:1px solid var(--color-border);border-radius:var(--radius-lg);background:var(--color-bg);cursor:pointer;transition:all .2s;position:relative}.action-btn[_ngcontent-%COMP%]:hover{border-color:var(--color-primary);background:#137fec0d}.action-btn[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:20px;color:var(--color-primary)}.action-label[_ngcontent-%COMP%]{font-size:.625rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;color:var(--color-text-muted)}.pending-badge[_ngcontent-%COMP%]{position:absolute;top:-4px;right:-4px;background:#ef4444;color:#fff;font-size:.625rem;font-weight:700;padding:2px 6px;border-radius:9999px;min-width:18px;text-align:center}.delivery-summary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);padding:var(--space-sm) var(--space-md);background:#10b9811a;border-radius:var(--radius-lg);font-size:.875rem;color:#10b981}.delivery-summary[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:18px}.clear-delivery[_ngcontent-%COMP%]{margin-left:auto;background:transparent;border:none;color:inherit;cursor:pointer;font-size:.875rem}.order-summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xs);padding:var(--space-sm) 0;border-top:1px solid var(--color-border)}.summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:.875rem;color:var(--color-text-muted)}.summary-row.total-row[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--color-text);padding-top:var(--space-sm);border-top:1px solid var(--color-border)}.total-amount[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.payment-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.cash-input-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.75rem;font-weight:500;color:var(--color-text-muted);display:block;margin-bottom:4px}.cash-input-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);border:1px solid var(--color-border);border-radius:var(--radius-lg);padding:0 var(--space-md);background:var(--color-bg)}.currency-symbol[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text-muted)}.cash-input[_ngcontent-%COMP%]{flex:1;border:none;background:transparent;padding:var(--space-sm) 0;font-size:1.125rem;font-weight:600;color:var(--color-text)}.cash-input[_ngcontent-%COMP%]:focus{outline:none}.change-display[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--space-sm) var(--space-md);background:#10b9811a;border-radius:var(--radius-lg);font-size:.875rem;color:#10b981}.change-display.negative[_ngcontent-%COMP%]{background:#ef44441a;color:#ef4444}.change-amount[_ngcontent-%COMP%]{font-weight:700;font-size:1rem}.main-actions[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm)}.charge-btn[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;gap:var(--space-sm);height:56px;background:var(--color-primary);color:#fff;border:none;border-radius:var(--radius-xl);font-size:1.125rem;font-weight:700;cursor:pointer;transition:all .2s;box-shadow:0 4px 16px #137fec4d}.charge-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--color-primary-dark);transform:translateY(-2px);box-shadow:0 6px 20px #137fec66}.charge-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.charge-btn[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:24px}.error-banner[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);padding:var(--space-sm) var(--space-md);background:#ef44441a;border-radius:var(--radius-lg);color:#ef4444;font-size:.875rem}.error-banner[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:18px}.pending-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;z-index:1000;opacity:0;pointer-events:none;transition:opacity .3s}.pending-overlay.open[_ngcontent-%COMP%]{opacity:1;pointer-events:all}.pending-panel[_ngcontent-%COMP%]{position:fixed;top:0;right:-450px;width:450px;max-width:100%;height:100%;background:var(--color-surface);box-shadow:-8px 0 32px #0003;display:flex;flex-direction:column;transition:right .3s ease;z-index:1001}.pending-panel.open[_ngcontent-%COMP%]{right:0}.pending-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--space-lg);border-bottom:1px solid var(--color-border)}.pending-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);font-size:1.125rem;font-weight:700;color:var(--color-text);margin:0}.pending-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{color:var(--color-primary)}.close-pending-btn[_ngcontent-%COMP%]{width:36px;height:36px;display:flex;align-items:center;justify-content:center;border:none;background:var(--color-bg);border-radius:var(--radius-lg);color:var(--color-text-muted);cursor:pointer;padding:0}.close-pending-btn[_ngcontent-%COMP%]:hover{background:#ef44441a;color:#ef4444}.pending-filters[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm);padding:var(--space-md) var(--space-lg);border-bottom:1px solid var(--color-border)}.filter-input[_ngcontent-%COMP%], .filter-select[_ngcontent-%COMP%]{flex:1;padding:var(--space-sm) var(--space-md);border:1px solid var(--color-border);border-radius:var(--radius-lg);background:var(--color-bg);color:var(--color-text);font-size:.875rem}.clear-filter-btn[_ngcontent-%COMP%]{width:36px;height:36px;display:flex;align-items:center;justify-content:center;border:none;background:var(--color-bg);border-radius:var(--radius-lg);color:var(--color-text-muted);cursor:pointer;padding:0}.clear-filter-btn[_ngcontent-%COMP%]:hover{background:#ef44441a;color:#ef4444}.pending-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:var(--space-md) var(--space-lg);display:flex;flex-direction:column;gap:var(--space-md)}.pending-order-card[_ngcontent-%COMP%]{background:var(--color-bg);border:1px solid var(--color-border);border-radius:var(--radius-xl);padding:var(--space-md);display:flex;flex-direction:column;gap:var(--space-sm)}.pending-order-card.reservation[_ngcontent-%COMP%]{border-color:#f97316;background:#f973160d}.order-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.order-title-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);flex-wrap:wrap}.order-id[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text)}.reservation-badge[_ngcontent-%COMP%]{font-size:.625rem;font-weight:700;padding:2px 6px;background:#f97316;color:#fff;border-radius:9999px}.order-total[_ngcontent-%COMP%]{font-weight:700;color:var(--color-primary)}.order-items-preview[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted);padding:var(--space-xs) 0}.order-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.detail-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);font-size:.75rem;color:var(--color-text-muted)}.detail-row[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:16px}.order-actions[_ngcontent-%COMP%]{display:flex;gap:var(--space-xs);padding-top:var(--space-sm);border-top:1px solid var(--color-border)}.order-action-btn[_ngcontent-%COMP%]{flex:1;height:36px;display:flex;align-items:center;justify-content:center;border:none;background:var(--color-surface);border-radius:var(--radius-lg);cursor:pointer;transition:all .2s}.order-action-btn[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:20px}.order-action-btn.edit[_ngcontent-%COMP%]{color:var(--color-text-muted)}.order-action-btn.edit[_ngcontent-%COMP%]:hover{background:#3b82f61a;color:#3b82f6}.order-action-btn.confirm[_ngcontent-%COMP%]{color:#10b981}.order-action-btn.confirm[_ngcontent-%COMP%]:hover{background:#10b9811a}.order-action-btn.deliver[_ngcontent-%COMP%]{color:var(--color-primary)}.order-action-btn.deliver[_ngcontent-%COMP%]:hover{background:#137fec1a}.order-action-btn.delete[_ngcontent-%COMP%]{color:#ef4444}.order-action-btn.delete[_ngcontent-%COMP%]:hover{background:#ef44441a}.empty-pending[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--space-2xl);color:var(--color-text-muted);text-align:center}.empty-pending[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:48px;color:#10b981;margin-bottom:var(--space-md)}.pending-pagination[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:var(--space-md);padding:var(--space-md) var(--space-lg);border-top:1px solid var(--color-border)}.pending-pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:36px;height:36px;display:flex;align-items:center;justify-content:center;border:1px solid var(--color-border);background:var(--color-bg);border-radius:var(--radius-lg);cursor:pointer;color:var(--color-text)}.pending-pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.3;cursor:not-allowed}.pending-pagination[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-muted)}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:2000;padding:var(--space-lg)}.modal-content[_ngcontent-%COMP%]{background:var(--color-surface);border-radius:var(--radius-xl);width:100%;max-width:400px;max-height:90vh;overflow-y:auto;box-shadow:0 20px 60px #0000004d;animation:_ngcontent-%COMP%_slideUp .3s ease}.modal-content.small[_ngcontent-%COMP%]{max-width:320px}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--space-lg);border-bottom:1px solid var(--color-border)}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);font-size:1rem;font-weight:600;color:var(--color-text);margin:0}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{color:var(--color-primary)}.modal-close[_ngcontent-%COMP%]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;border:none;background:transparent;border-radius:var(--radius-lg);color:var(--color-text-muted);cursor:pointer;padding:0}.modal-close[_ngcontent-%COMP%]:hover{background:var(--color-bg);color:var(--color-text)}.modal-body[_ngcontent-%COMP%]{padding:var(--space-lg);display:flex;flex-direction:column;gap:var(--space-md)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xs)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);border:1px solid var(--color-border);border-radius:var(--radius-lg);background:var(--color-bg);color:var(--color-text);font-size:.875rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #137fec26}.discount-input-row[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm)}.discount-input-row[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:var(--space-md);border:1px solid var(--color-border);border-radius:var(--radius-lg);background:var(--color-bg);color:var(--color-text);font-size:1.25rem;font-weight:600}.discount-input-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:120px;padding:var(--space-md);border:1px solid var(--color-border);border-radius:var(--radius-lg);background:var(--color-bg);color:var(--color-text);font-size:.875rem}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:var(--space-sm);padding:var(--space-lg);border-top:1px solid var(--color-border)}.btn-cancel[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-lg);border:1px solid var(--color-border);border-radius:var(--radius-lg);background:transparent;color:var(--color-text);font-size:.875rem;font-weight:500;cursor:pointer}.btn-cancel[_ngcontent-%COMP%]:hover{background:var(--color-bg)}.btn-save[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-lg);background:var(--color-primary);color:#fff;border:none;border-radius:var(--radius-lg);font-size:.875rem;font-weight:600;cursor:pointer}.btn-save[_ngcontent-%COMP%]:hover{background:var(--color-primary-dark)}body.dark-theme[_nghost-%COMP%]   .cart-panel[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .cart-panel[_ngcontent-%COMP%], body.dark-theme[_nghost-%COMP%]   .pending-panel[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .pending-panel[_ngcontent-%COMP%], body.dark-theme[_nghost-%COMP%]   .modal-content[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .modal-content[_ngcontent-%COMP%]{background:#1e293b}body.dark-theme[_nghost-%COMP%]   .product-card[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .product-card[_ngcontent-%COMP%], body.dark-theme[_nghost-%COMP%]   .pending-order-card[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .pending-order-card[_ngcontent-%COMP%]{background:#1e293b}body.dark-theme[_nghost-%COMP%]   .category-rail[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .category-rail[_ngcontent-%COMP%]{background:#1e293b}@media (max-width: 900px){.pos-container[_ngcontent-%COMP%]{flex-direction:column;height:calc(100vh - 64px);overflow-y:auto}.products-panel[_ngcontent-%COMP%]{height:auto;min-height:300px;flex-shrink:0}.product-grid-wrapper[_ngcontent-%COMP%]{max-height:40vh}.cart-panel[_ngcontent-%COMP%]{width:100%;min-width:100%;height:auto;min-height:400px;border-left:none;border-top:1px solid var(--color-border)}.pending-panel[_ngcontent-%COMP%]{width:100%;right:-100%}}@media (max-width: 600px){.product-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:var(--space-sm)}.product-card[_ngcontent-%COMP%]{height:180px}.product-image[_ngcontent-%COMP%]{height:100px;min-height:100px;max-height:100px}.quick-actions[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.cart-header[_ngcontent-%COMP%], .cart-footer[_ngcontent-%COMP%]{padding:var(--space-md)}.category-rail[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md)}}']})}}return l})();export{He as a};
