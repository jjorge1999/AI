var UI=Object.defineProperty,$I=Object.defineProperties;var zI=Object.getOwnPropertyDescriptors;var my=Object.getOwnPropertySymbols;var HI=Object.prototype.hasOwnProperty,qI=Object.prototype.propertyIsEnumerable;var gy=(n,e,t)=>e in n?UI(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Y=(n,e)=>{for(var t in e||={})HI.call(e,t)&&gy(n,t,e[t]);if(my)for(var t of my(e))qI.call(e,t)&&gy(n,t,e[t]);return n},le=(n,e)=>$I(n,zI(e));var B=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{c(t.next(l))}catch(d){i(d)}},s=l=>{try{c(t.throw(l))}catch(d){i(d)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);c((t=t.apply(n,e)).next())});var yy=null;var Hu=1,qu=Symbol("SIGNAL");function Se(n){let e=yy;return yy=n,e}var vy={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function GI(n){if(!(Ku(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Hu)){if(!n.producerMustRecompute(n)&&!Gu(n)){n.dirty=!1,n.lastCleanEpoch=Hu;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Hu}}function _y(n){return n&&(n.nextProducerIndex=0),Se(n)}function by(n,e){if(Se(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Ku(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Wu(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Gu(n){Da(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(GI(t),r!==t.version))return!0}return!1}function wy(n){if(Da(n),Ku(n))for(let e=0;e<n.producerNode.length;e++)Wu(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Wu(n,e){if(WI(n),Da(n),n.liveConsumerNode.length===1)for(let r=0;r<n.producerNode.length;r++)Wu(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Da(i),i.producerIndexOfThis[r]=e}}function Ku(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Da(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function WI(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function KI(){throw new Error}var QI=KI;function Cy(n){QI=n}function ge(n){return typeof n=="function"}function xa(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Sa=xa(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ts(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Pt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ge(r))try{r()}catch(o){e=o instanceof Sa?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Ey(o)}catch(s){e=e??[],s instanceof Sa?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Sa(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Ey(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ts(t,e)}remove(e){let{_finalizers:t}=this;t&&ts(t,e),e instanceof n&&e._removeParent(this)}};Pt.EMPTY=(()=>{let n=new Pt;return n.closed=!0,n})();var Qu=Pt.EMPTY;function Ta(n){return n instanceof Pt||n&&"closed"in n&&ge(n.remove)&&ge(n.add)&&ge(n.unsubscribe)}function Ey(n){ge(n)?n():n.unsubscribe()}var on={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Oi={setTimeout(n,e,...t){let{delegate:r}=Oi;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Oi;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ma(n){Oi.setTimeout(()=>{let{onUnhandledError:e}=on;if(e)e(n);else throw n})}function Yu(){}var Iy=Ju("C",void 0,void 0);function Dy(n){return Ju("E",void 0,n)}function xy(n){return Ju("N",n,void 0)}function Ju(n,e,t){return{kind:n,value:e,error:t}}var Qr=null;function Ri(n){if(on.useDeprecatedSynchronousErrorHandling){let e=!Qr;if(e&&(Qr={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Qr;if(Qr=null,t)throw r}}else n()}function Sy(n){on.useDeprecatedSynchronousErrorHandling&&Qr&&(Qr.errorThrown=!0,Qr.error=n)}var Yr=class extends Pt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ta(e)&&e.add(this)):this.destination=XI}static create(e,t,r){return new ki(e,t,r)}next(e){this.isStopped?Zu(xy(e),this):this._next(e)}error(e){this.isStopped?Zu(Dy(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Zu(Iy,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},YI=Function.prototype.bind;function Xu(n,e){return YI.call(n,e)}var ed=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Aa(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Aa(r)}else Aa(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Aa(t)}}},ki=class extends Yr{constructor(e,t,r){super();let i;if(ge(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&on.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Xu(e.next,o),error:e.error&&Xu(e.error,o),complete:e.complete&&Xu(e.complete,o)}):i=e}this.destination=new ed(i)}};function Aa(n){on.useDeprecatedSynchronousErrorHandling?Sy(n):Ma(n)}function JI(n){throw n}function Zu(n,e){let{onStoppedNotification:t}=on;t&&Oi.setTimeout(()=>t(n,e))}var XI={closed:!0,next:Yu,error:JI,complete:Yu};var Fi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ty(n){return n}function My(n){return n.length===0?Ty:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var je=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=eD(t)?t:new ki(t,r,i);return Ri(()=>{let{operator:s,source:c}=this;o.add(s?s.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Ay(r),new r((i,o)=>{let s=new ki({next:c=>{try{t(c)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Fi](){return this}pipe(...t){return My(t)(this)}toPromise(t){return t=Ay(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function Ay(n){var e;return(e=n??on.Promise)!==null&&e!==void 0?e:Promise}function ZI(n){return n&&ge(n.next)&&ge(n.error)&&ge(n.complete)}function eD(n){return n&&n instanceof Yr||ZI(n)&&Ta(n)}function tD(n){return ge(n?.lift)}function _t(n){return e=>{if(tD(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function bt(n,e,t,r,i){return new td(n,e,t,r,i)}var td=class extends Yr{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(c){try{t(c)}catch(l){e.error(l)}}:super._next,this._error=i?function(c){try{i(c)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var Py=xa(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Cr=(()=>{class n extends je{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Pa(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Py}next(t){Ri(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Ri(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ri(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Qu:(this.currentObservers=null,o.push(t),new Pt(()=>{this.currentObservers=null,ts(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new je;return t.source=this,t}}return n.create=(e,t)=>new Pa(e,t),n})(),Pa=class extends Cr{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Qu}};var ct=class extends Cr{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ny=new je(n=>n.complete());function Oy(n){return n&&ge(n.schedule)}function Ry(n){return n[n.length-1]}function ky(n){return ge(Ry(n))?n.pop():void 0}function Fy(n){return Oy(Ry(n))?n.pop():void 0}function Ly(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(m){try{d(r.next(m))}catch(g){s(g)}}function l(m){try{d(r.throw(m))}catch(g){s(g)}}function d(m){m.done?o(m.value):i(m.value).then(c,l)}d((r=r.apply(n,e||[])).next())})}function Vy(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Jr(n){return this instanceof Jr?(this.v=n,this):new Jr(n)}function jy(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(C){return function(N){return Promise.resolve(N).then(C,g)}}function c(C,N){r[C]&&(i[C]=function(R){return new Promise(function(k,H){o.push([C,R,k,H])>1||l(C,R)})},N&&(i[C]=N(i[C])))}function l(C,N){try{d(r[C](N))}catch(R){b(o[0][3],R)}}function d(C){C.value instanceof Jr?Promise.resolve(C.value.v).then(m,g):b(o[0][2],C)}function m(C){l("next",C)}function g(C){l("throw",C)}function b(C,N){C(N),o.shift(),o.length&&l(o[0][0],o[0][1])}}function By(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Vy=="function"?Vy(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(c,l){s=n[o](s),i(c,l,s.done,s.value)})}}function i(o,s,c,l){Promise.resolve(l).then(function(d){o({value:d,done:c})},s)}}var Na=n=>n&&typeof n.length=="number"&&typeof n!="function";function Oa(n){return ge(n?.then)}function Ra(n){return ge(n[Fi])}function ka(n){return Symbol.asyncIterator&&ge(n?.[Symbol.asyncIterator])}function Fa(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function nD(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Va=nD();function La(n){return ge(n?.[Va])}function ja(n){return jy(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Jr(t.read());if(i)return yield Jr(void 0);yield yield Jr(r)}}finally{t.releaseLock()}})}function Ba(n){return ge(n?.getReader)}function Nt(n){if(n instanceof je)return n;if(n!=null){if(Ra(n))return rD(n);if(Na(n))return iD(n);if(Oa(n))return oD(n);if(ka(n))return Uy(n);if(La(n))return sD(n);if(Ba(n))return aD(n)}throw Fa(n)}function rD(n){return new je(e=>{let t=n[Fi]();if(ge(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function iD(n){return new je(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function oD(n){return new je(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Ma)})}function sD(n){return new je(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function Uy(n){return new je(e=>{cD(n,e).catch(t=>e.error(t))})}function aD(n){return Uy(ja(n))}function cD(n,e){var t,r,i,o;return Ly(this,void 0,void 0,function*(){try{for(t=By(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Gt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Ua(n,e=0){return _t((t,r)=>{t.subscribe(bt(r,i=>Gt(r,n,()=>r.next(i),e),()=>Gt(r,n,()=>r.complete(),e),i=>Gt(r,n,()=>r.error(i),e)))})}function $a(n,e=0){return _t((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function $y(n,e){return Nt(n).pipe($a(e),Ua(e))}function zy(n,e){return Nt(n).pipe($a(e),Ua(e))}function Hy(n,e){return new je(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function qy(n,e){return new je(t=>{let r;return Gt(t,e,()=>{r=n[Va](),Gt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ge(r?.return)&&r.return()})}function za(n,e){if(!n)throw new Error("Iterable cannot be null");return new je(t=>{Gt(t,e,()=>{let r=n[Symbol.asyncIterator]();Gt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Gy(n,e){return za(ja(n),e)}function Wy(n,e){if(n!=null){if(Ra(n))return $y(n,e);if(Na(n))return Hy(n,e);if(Oa(n))return zy(n,e);if(ka(n))return za(n,e);if(La(n))return qy(n,e);if(Ba(n))return Gy(n,e)}throw Fa(n)}function bn(n,e){return e?Wy(n,e):Nt(n)}function Ha(...n){let e=Fy(n);return bn(n,e)}function lt(n,e){return _t((t,r)=>{let i=0;t.subscribe(bt(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:lD}=Array;function uD(n,e){return lD(e)?n(...e):n(e)}function Ky(n){return lt(e=>uD(n,e))}var{isArray:dD}=Array,{getPrototypeOf:hD,prototype:fD,keys:pD}=Object;function Qy(n){if(n.length===1){let e=n[0];if(dD(e))return{args:e,keys:null};if(mD(e)){let t=pD(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function mD(n){return n&&typeof n=="object"&&hD(n)===fD}function Yy(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Jy(n,e,t,r,i,o,s,c){let l=[],d=0,m=0,g=!1,b=()=>{g&&!l.length&&!d&&e.complete()},C=R=>d<r?N(R):l.push(R),N=R=>{o&&e.next(R),d++;let k=!1;Nt(t(R,m++)).subscribe(bt(e,H=>{i?.(H),o?C(H):e.next(H)},()=>{k=!0},void 0,()=>{if(k)try{for(d--;l.length&&d<r;){let H=l.shift();s?Gt(e,s,()=>N(H)):N(H)}b()}catch(H){e.error(H)}}))};return n.subscribe(bt(e,C,()=>{g=!0,b()})),()=>{c?.()}}function qa(n,e,t=1/0){return ge(e)?qa((r,i)=>lt((o,s)=>e(r,o,i,s))(Nt(n(r,i))),t):(typeof e=="number"&&(t=e),_t((r,i)=>Jy(r,i,n,t)))}function nd(...n){let e=ky(n),{args:t,keys:r}=Qy(n),i=new je(o=>{let{length:s}=t;if(!s){o.complete();return}let c=new Array(s),l=s,d=s;for(let m=0;m<s;m++){let g=!1;Nt(t[m]).subscribe(bt(o,b=>{g||(g=!0,d--),c[m]=b},()=>l--,void 0,()=>{(!l||!g)&&(d||o.next(r?Yy(r,c):c),o.complete())}))}});return e?i.pipe(Ky(e)):i}function rd(n,e){return _t((t,r)=>{let i=0;t.subscribe(bt(r,o=>n.call(e,o,i++)&&r.next(o)))})}function id(n,e){return ge(e)?qa(n,e,1):qa(n,1)}function Vi(n){return n<=0?()=>Ny:_t((e,t)=>{let r=0;e.subscribe(bt(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function od(n){return _t((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Li(n,e){return _t((t,r)=>{let i=null,o=0,s=!1,c=()=>s&&!i&&r.complete();t.subscribe(bt(r,l=>{i?.unsubscribe();let d=0,m=o++;Nt(n(l,m)).subscribe(i=bt(r,g=>r.next(e?e(l,g,m,d++):g),()=>{i=null,c()}))},()=>{s=!0,c()}))})}var kv="https://g.co/ng/security#xss",ue=class extends Error{constructor(e,t){super(wc(e,t)),this.code=e}};function wc(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function fs(n){return{toString:n}.toString()}var Ga="__parameters__";function gD(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function Fv(n,e,t){return fs(()=>{let r=gD(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return c.annotation=s,c;function c(l,d,m){let g=l.hasOwnProperty(Ga)?l[Ga]:Object.defineProperty(l,Ga,{value:[]})[Ga];for(;g.length<=m;)g.push(null);return(g[m]=g[m]||[]).push(s),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Ln=globalThis;function Be(n){for(let e in n)if(n[e]===Be)return e;throw Error("Could not find renamed property on target object.")}function yD(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function kt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(kt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function Xy(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var vD=Be({__forward_ref__:Be});function Vt(n){return n.__forward_ref__=Vt,n.toString=function(){return kt(this())},n}function St(n){return Vv(n)?n():n}function Vv(n){return typeof n=="function"&&n.hasOwnProperty(vD)&&n.__forward_ref__===Vt}function me(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function di(n){return{providers:n.providers||[],imports:n.imports||[]}}function fh(n){return Zy(n,Lv)||Zy(n,jv)}function Zy(n,e){return n.hasOwnProperty(e)?n[e]:null}function _D(n){let e=n&&(n[Lv]||n[jv]);return e||null}function ev(n){return n&&(n.hasOwnProperty(tv)||n.hasOwnProperty(bD))?n[tv]:null}var Lv=Be({\u0275prov:Be}),tv=Be({\u0275inj:Be}),jv=Be({ngInjectableDef:Be}),bD=Be({ngInjectorDef:Be}),pe=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=me({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Bv(n){return n&&!!n.\u0275providers}var wD=Be({\u0275cmp:Be}),CD=Be({\u0275dir:Be}),ED=Be({\u0275pipe:Be});var tc=Be({\u0275fac:Be}),ns=Be({__NG_ELEMENT_ID__:Be}),nv=Be({__NG_ENV_ID__:Be});function jn(n){return typeof n=="string"?n:n==null?"":String(n)}function ID(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():jn(n)}function DD(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new ue(-200,n)}function ph(n,e){throw new ue(-201,!1)}var _e=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(_e||{}),Cd;function Uv(){return Cd}function Ot(n){let e=Cd;return Cd=n,e}function $v(n,e,t){let r=fh(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&_e.Optional)return null;if(e!==void 0)return e;ph(n,"Injector")}var xD={},rs=xD,Ed="__NG_DI_FLAG__",nc="ngTempTokenPath",SD="ngTokenPath",TD=/\n/gm,MD="\u0275",rv="__source",$i;function AD(){return $i}function Er(n){let e=$i;return $i=n,e}function PD(n,e=_e.Default){if($i===void 0)throw new ue(-203,!1);return $i===null?$v(n,void 0,e):$i.get(n,e&_e.Optional?null:void 0,e)}function oe(n,e=_e.Default){return(Uv()||PD)(St(n),e)}function Fe(n,e=_e.Default){return oe(n,Cc(e))}function Cc(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Id(n){let e=[];for(let t=0;t<n.length;t++){let r=St(n[t]);if(Array.isArray(r)){if(r.length===0)throw new ue(900,!1);let i,o=_e.Default;for(let s=0;s<r.length;s++){let c=r[s],l=ND(c);typeof l=="number"?l===-1?i=c.token:o|=l:i=c}e.push(oe(i,o))}else e.push(oe(r))}return e}function zv(n,e){return n[Ed]=e,n.prototype[Ed]=e,n}function ND(n){return n[Ed]}function OD(n,e,t,r){let i=n[nc];throw e[rv]&&i.unshift(e[rv]),n.message=RD(`
`+n.message,i,t,r),n[SD]=i,n[nc]=null,n}function RD(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==MD?n.slice(2):n;let i=kt(e);if(Array.isArray(e))i=e.map(kt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let c=e[s];o.push(s+":"+(typeof c=="string"?JSON.stringify(c):kt(c)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(TD,`
  `)}`}var Hv=zv(Fv("Optional"),8);var kD=zv(Fv("SkipSelf"),4);function ti(n,e){let t=n.hasOwnProperty(tc);return t?n[tc]:null}function FD(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function VD(n){return n.flat(Number.POSITIVE_INFINITY)}function mh(n,e){n.forEach(t=>Array.isArray(t)?mh(t,e):e(t))}function qv(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function rc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function LD(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function jD(n,e,t){let r=ps(n,e);return r>=0?n[r|1]=t:(r=~r,LD(n,r,e,t)),r}function sd(n,e){let t=ps(n,e);if(t>=0)return n[t|1]}function ps(n,e){return BD(n,e,1)}function BD(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Hi={},Wt=[],is=new pe(""),Gv=new pe("",-1),Wv=new pe(""),ic=class{get(e,t=rs){if(t===rs){let r=new Error(`NullInjectorError: No provider for ${kt(e)}!`);throw r.name="NullInjectorError",r}return t}},Kv=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Kv||{}),En=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(En||{}),Kt=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Kt||{});function UD(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function Dd(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],c=t[r++];n.setAttribute(e,s,c,o)}else{let o=i,s=t[++r];zD(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function $D(n){return n===3||n===4||n===6}function zD(n){return n.charCodeAt(0)===64}function os(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?iv(n,t,i,null,e[++r]):iv(n,t,i,null,null))}}return n}function iv(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let c=n[o++];if(typeof c=="number"){if(c===e){s=-1;break}else if(c>e){s=o-1;break}}}for(;o<n.length;){let c=n[o];if(typeof c=="number")break;if(c===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var Qv="ng-template";function HD(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&UD(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(gh(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function gh(n){return n.type===4&&n.value!==Qv}function qD(n,e,t){let r=n.type===4&&!t?Qv:n.value;return e===r}function GD(n,e,t){let r=4,i=n.attrs,o=i!==null?QD(i):0,s=!1;for(let c=0;c<e.length;c++){let l=e[c];if(typeof l=="number"){if(!s&&!sn(r)&&!sn(l))return!1;if(s&&sn(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!qD(n,l,t)||l===""&&e.length===1){if(sn(r))return!1;s=!0}}else if(r&8){if(i===null||!HD(n,i,l,t)){if(sn(r))return!1;s=!0}}else{let d=e[++c],m=WD(l,i,gh(n),t);if(m===-1){if(sn(r))return!1;s=!0;continue}if(d!==""){let g;if(m>o?g="":g=i[m+1].toLowerCase(),r&2&&d!==g){if(sn(r))return!1;s=!0}}}}return sn(r)||s}function sn(n){return(n&1)===0}function WD(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return YD(e,n)}function KD(n,e,t=!1){for(let r=0;r<e.length;r++)if(GD(n,e[r],t))return!0;return!1}function QD(n){for(let e=0;e<n.length;e++){let t=n[e];if($D(t))return e}return n.length}function YD(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function ov(n,e){return n?":not("+e.trim()+")":e}function JD(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let c=n[++t];i+="["+s+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!sn(s)&&(e+=ov(o,i),i=""),r=s,o=o||!sn(r);t++}return i!==""&&(e+=ov(o,i)),e}function XD(n){return n.map(JD).join(",")}function ZD(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!sn(i))break;i=o}r++}return{attrs:e,classes:t}}function $e(n){return fs(()=>{let e=Xv(n),t=le(Y({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Kv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||En.Emulated,styles:n.styles||Wt,_:null,schemas:n.schemas||null,tView:null,id:""});Zv(t);let r=n.dependencies;return t.directiveDefs=av(r,!1),t.pipeDefs=av(r,!0),t.id=rx(t),t})}function ex(n){return qi(n)||Yv(n)}function tx(n){return n!==null}function hi(n){return fs(()=>({type:n.type,bootstrap:n.bootstrap||Wt,declarations:n.declarations||Wt,imports:n.imports||Wt,exports:n.exports||Wt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function sv(n,e){if(n==null)return Hi;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,c=Kt.None;Array.isArray(i)?(c=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=c!==Kt.None?[r,c]:r,e[o]=s):t[o]=r}return t}function We(n){return fs(()=>{let e=Xv(n);return Zv(e),e})}function Ec(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function qi(n){return n[wD]||null}function Yv(n){return n[CD]||null}function Jv(n){return n[ED]||null}function nx(n){let e=qi(n)||Yv(n)||Jv(n);return e!==null?e.standalone:!1}function Xv(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Hi,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Wt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:sv(n.inputs,e),outputs:sv(n.outputs),debugInfo:null}}function Zv(n){n.features?.forEach(e=>e(n))}function av(n,e){if(!n)return null;let t=e?Jv:ex;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(tx)}function rx(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Ic(n){return{\u0275providers:n}}function ix(...n){return{\u0275providers:e0(!0,n),\u0275fromNgModule:!0}}function e0(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return mh(e,s=>{let c=s;xd(c,o,[],r)&&(i||=[],i.push(c))}),i!==void 0&&t0(i,o),t}function t0(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];yh(i,o=>{e(o,r)})}}function xd(n,e,t,r){if(n=St(n),!n)return!1;let i=null,o=ev(n),s=!o&&qi(n);if(!o&&!s){let l=n.ngModule;if(o=ev(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=n}let c=r.has(i);if(s){if(c)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let d of l)xd(d,e,t,r)}}else if(o){if(o.imports!=null&&!c){r.add(i);let d;try{mh(o.imports,m=>{xd(m,e,t,r)&&(d||=[],d.push(m))})}finally{}d!==void 0&&t0(d,e)}if(!c){let d=ti(i)||(()=>new i);e({provide:i,useFactory:d,deps:Wt},i),e({provide:Wv,useValue:i,multi:!0},i),e({provide:is,useValue:()=>oe(i),multi:!0},i)}let l=o.providers;if(l!=null&&!c){let d=n;yh(l,m=>{e(m,d)})}}else return!1;return i!==n&&n.providers!==void 0}function yh(n,e){for(let t of n)Bv(t)&&(t=t.\u0275providers),Array.isArray(t)?yh(t,e):e(t)}var ox=Be({provide:String,useValue:Be});function n0(n){return n!==null&&typeof n=="object"&&ox in n}function sx(n){return!!(n&&n.useExisting)}function ax(n){return!!(n&&n.useFactory)}function Gi(n){return typeof n=="function"}function cx(n){return!!n.useClass}var Dc=new pe(""),Qa={},lx={},ad;function vh(){return ad===void 0&&(ad=new ic),ad}var In=class{},ss=class extends In{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Td(e,s=>this.processProvider(s)),this.records.set(Gv,ji(void 0,this)),i.has("environment")&&this.records.set(In,ji(void 0,this));let o=this.records.get(Dc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Wv,Wt,_e.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Se(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Se(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Er(this),r=Ot(void 0),i;try{return e()}finally{Er(t),Ot(r)}}get(e,t=rs,r=_e.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(nv))return e[nv](this);r=Cc(r);let i,o=Er(this),s=Ot(void 0);try{if(!(r&_e.SkipSelf)){let l=this.records.get(e);if(l===void 0){let d=px(e)&&fh(e);d&&this.injectableDefInScope(d)?l=ji(Sd(e),Qa):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let c=r&_e.Self?vh():this.parent;return t=r&_e.Optional&&t===rs?null:t,c.get(e,t)}catch(c){if(c.name==="NullInjectorError"){if((c[nc]=c[nc]||[]).unshift(kt(e)),o)throw c;return OD(c,e,"R3InjectorError",this.source)}else throw c}finally{Ot(s),Er(o)}}resolveInjectorInitializers(){let e=Se(null),t=Er(this),r=Ot(void 0),i;try{let o=this.get(is,Wt,_e.Self);for(let s of o)s()}finally{Er(t),Ot(r),Se(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(kt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ue(205,!1)}processProvider(e){e=St(e);let t=Gi(e)?e:St(e&&e.provide),r=dx(e);if(!Gi(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ji(void 0,Qa,!0),i.factory=()=>Id(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Se(null);try{return t.value===Qa&&(t.value=lx,t.value=t.factory()),typeof t.value=="object"&&t.value&&fx(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Se(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=St(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Sd(n){let e=fh(n),t=e!==null?e.factory:ti(n);if(t!==null)return t;if(n instanceof pe)throw new ue(204,!1);if(n instanceof Function)return ux(n);throw new ue(204,!1)}function ux(n){if(n.length>0)throw new ue(204,!1);let t=_D(n);return t!==null?()=>t.factory(n):()=>new n}function dx(n){if(n0(n))return ji(void 0,n.useValue);{let e=r0(n);return ji(e,Qa)}}function r0(n,e,t){let r;if(Gi(n)){let i=St(n);return ti(i)||Sd(i)}else if(n0(n))r=()=>St(n.useValue);else if(ax(n))r=()=>n.useFactory(...Id(n.deps||[]));else if(sx(n))r=()=>oe(St(n.useExisting));else{let i=St(n&&(n.useClass||n.provide));if(hx(n))r=()=>new i(...Id(n.deps));else return ti(i)||Sd(i)}return r}function ji(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function hx(n){return!!n.deps}function fx(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function px(n){return typeof n=="function"||typeof n=="object"&&n instanceof pe}function Td(n,e){for(let t of n)Array.isArray(t)?Td(t,e):t&&Bv(t)?Td(t.\u0275providers,e):e(t)}function i0(n,e){n instanceof ss&&n.assertNotDestroyed();let t,r=Er(n),i=Ot(void 0);try{return e()}finally{Er(r),Ot(i)}}function mx(){return Uv()!==void 0||AD()!=null}function gx(n){return typeof n=="function"}var Hn=0,de=1,ie=2,yt=3,cn=4,dn=5,oc=6,as=7,ln=8,Wi=9,un=10,ot=11,cs=12,cv=13,Ji=14,Dn=15,ms=16,Bi=17,Bn=18,xc=19,o0=20,Ir=21,cd=22,ni=23,Qt=25,s0=1;var ri=7,sc=8,Ki=9,Ft=10,_h=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(_h||{});function Zr(n){return Array.isArray(n)&&typeof n[s0]=="object"}function qn(n){return Array.isArray(n)&&n[s0]===!0}function a0(n){return(n.flags&4)!==0}function Sc(n){return n.componentOffset>-1}function bh(n){return(n.flags&1)===1}function Dr(n){return!!n.template}function yx(n){return(n[ie]&512)!==0}var Md=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function c0(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function gs(){return l0}function l0(n){return n.type.prototype.ngOnChanges&&(n.setInput=_x),vx}gs.ngInherit=!0;function vx(){let n=d0(this),e=n?.current;if(e){let t=n.previous;if(t===Hi)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function _x(n,e,t,r,i){let o=this.declaredInputs[r],s=d0(n)||bx(n,{previous:Hi,current:null}),c=s.current||(s.current={}),l=s.previous,d=l[o];c[o]=new Md(d&&d.currentValue,t,l===Hi),c0(n,e,i,t)}var u0="__ngSimpleChanges__";function d0(n){return n[u0]||null}function bx(n,e){return n[u0]=e}var lv=null;var wn=function(n,e,t){lv?.(n,e,t)},wx="svg",Cx="math",Ex=!1;function Ix(){return Ex}function xn(n){for(;Array.isArray(n);)n=n[Hn];return n}function h0(n,e){return xn(e[n])}function Yt(n,e){return xn(e[n.index])}function f0(n,e){return n.data[e]}function wh(n,e){return n[e]}function xr(n,e){let t=e[n];return Zr(t)?t:t[Hn]}function Dx(n){return(n[ie]&4)===4}function Ch(n){return(n[ie]&128)===128}function xx(n){return qn(n[yt])}function ac(n,e){return e==null?null:n[e]}function p0(n){n[Bi]=0}function Sx(n){n[ie]&1024||(n[ie]|=1024,Ch(n)&&ls(n))}function Tx(n,e){for(;n>0;)e=e[Ji],n--;return e}function Eh(n){return!!(n[ie]&9216||n[ni]?.dirty)}function Ad(n){n[un].changeDetectionScheduler?.notify(1),Eh(n)?ls(n):n[ie]&64&&(Ix()?(n[ie]|=1024,ls(n)):n[un].changeDetectionScheduler?.notify())}function ls(n){n[un].changeDetectionScheduler?.notify();let e=us(n);for(;e!==null&&!(e[ie]&8192||(e[ie]|=8192,!Ch(e)));)e=us(e)}function m0(n,e){if((n[ie]&256)===256)throw new ue(911,!1);n[Ir]===null&&(n[Ir]=[]),n[Ir].push(e)}function Mx(n,e){if(n[Ir]===null)return;let t=n[Ir].indexOf(e);t!==-1&&n[Ir].splice(t,1)}function us(n){let e=n[yt];return qn(e)?e[yt]:e}var he={lFrame:I0(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Ax(){return he.lFrame.elementDepthCount}function Px(){he.lFrame.elementDepthCount++}function Nx(){he.lFrame.elementDepthCount--}function g0(){return he.bindingsEnabled}function Ox(){return he.skipHydrationRootTNode!==null}function Rx(n){return he.skipHydrationRootTNode===n}function kx(){he.skipHydrationRootTNode=null}function Ee(){return he.lFrame.lView}function wt(){return he.lFrame.tView}function V(n){return he.lFrame.contextLView=n,n[ln]}function L(n){return he.lFrame.contextLView=null,n}function Lt(){let n=y0();for(;n!==null&&n.type===64;)n=n.parent;return n}function y0(){return he.lFrame.currentTNode}function Fx(){let n=he.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function ys(n,e){let t=he.lFrame;t.currentTNode=n,t.isParent=e}function v0(){return he.lFrame.isParent}function Vx(){he.lFrame.isParent=!1}function Lx(){return he.lFrame.contextLView}function _0(){let n=he.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function b0(){return he.lFrame.bindingIndex}function jx(n){return he.lFrame.bindingIndex=n}function Tc(){return he.lFrame.bindingIndex++}function Ih(n){let e=he.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Bx(){return he.lFrame.inI18n}function Ux(n,e){let t=he.lFrame;t.bindingIndex=t.bindingRootIndex=n,Pd(e)}function $x(){return he.lFrame.currentDirectiveIndex}function Pd(n){he.lFrame.currentDirectiveIndex=n}function zx(n){let e=he.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function w0(){return he.lFrame.currentQueryIndex}function Dh(n){he.lFrame.currentQueryIndex=n}function Hx(n){let e=n[de];return e.type===2?e.declTNode:e.type===1?n[dn]:null}function C0(n,e,t){if(t&_e.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&_e.Host);)if(i=Hx(o),i===null||(o=o[Ji],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=he.lFrame=E0();return r.currentTNode=e,r.lView=n,!0}function xh(n){let e=E0(),t=n[de];he.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function E0(){let n=he.lFrame,e=n===null?null:n.child;return e===null?I0(n):e}function I0(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function D0(){let n=he.lFrame;return he.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var x0=D0;function Sh(){let n=D0();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function qx(n){return(he.lFrame.contextLView=Tx(n,he.lFrame.contextLView))[ln]}function Sr(){return he.lFrame.selectedIndex}function ii(n){he.lFrame.selectedIndex=n}function Th(){let n=he.lFrame;return f0(n.tView,n.selectedIndex)}function Gx(){return he.lFrame.currentNamespace}var S0=!0;function Mh(){return S0}function Ah(n){S0=n}function Wx(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=l0(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Ph(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:c,ngAfterViewInit:l,ngAfterViewChecked:d,ngOnDestroy:m}=o;s&&(n.contentHooks??=[]).push(-t,s),c&&((n.contentHooks??=[]).push(t,c),(n.contentCheckHooks??=[]).push(t,c)),l&&(n.viewHooks??=[]).push(-t,l),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),m!=null&&(n.destroyHooks??=[]).push(t,m)}}function Ya(n,e,t){T0(n,e,3,t)}function Ja(n,e,t,r){(n[ie]&3)===t&&T0(n,e,t,r)}function ld(n,e){let t=n[ie];(t&3)===e&&(t&=16383,t+=1,n[ie]=t)}function T0(n,e,t,r){let i=r!==void 0?n[Bi]&65535:0,o=r??-1,s=e.length-1,c=0;for(let l=i;l<s;l++)if(typeof e[l+1]=="number"){if(c=e[l],r!=null&&c>=r)break}else e[l]<0&&(n[Bi]+=65536),(c<o||o==-1)&&(Kx(n,t,e,l),n[Bi]=(n[Bi]&4294901760)+l+2),l++}function uv(n,e){wn(4,n,e);let t=Se(null);try{e.call(n)}finally{Se(t),wn(5,n,e)}}function Kx(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],c=n[s];i?n[ie]>>14<n[Bi]>>16&&(n[ie]&3)===e&&(n[ie]+=16384,uv(c,o)):uv(c,o)}var zi=-1,oi=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function Qx(n){return n instanceof oi}function Yx(n){return(n.flags&8)!==0}function Jx(n){return(n.flags&16)!==0}function M0(n){return n!==zi}function cc(n){return n&32767}function Xx(n){return n>>16}function lc(n,e){let t=Xx(n),r=e;for(;t>0;)r=r[Ji],t--;return r}var Nd=!0;function uc(n){let e=Nd;return Nd=n,e}var Zx=256,A0=Zx-1,P0=5,e1=0,Cn={};function t1(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ns)&&(r=t[ns]),r==null&&(r=t[ns]=e1++);let i=r&A0,o=1<<i;e.data[n+(i>>P0)]|=o}function dc(n,e){let t=N0(n,e);if(t!==-1)return t;let r=e[de];r.firstCreatePass&&(n.injectorIndex=e.length,ud(r.data,n),ud(e,null),ud(r.blueprint,null));let i=Nh(n,e),o=n.injectorIndex;if(M0(i)){let s=cc(i),c=lc(i,e),l=c[de].data;for(let d=0;d<8;d++)e[o+d]=c[s+d]|l[s+d]}return e[o+8]=i,o}function ud(n,e){n.push(0,0,0,0,0,0,0,0,e)}function N0(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Nh(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=V0(i),r===null)return zi;if(t++,i=i[Ji],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return zi}function Od(n,e,t){t1(n,e,t)}function O0(n,e,t){if(t&_e.Optional||n!==void 0)return n;ph(e,"NodeInjector")}function R0(n,e,t,r){if(t&_e.Optional&&r===void 0&&(r=null),!(t&(_e.Self|_e.Host))){let i=n[Wi],o=Ot(void 0);try{return i?i.get(e,r,t&_e.Optional):$v(e,r,t&_e.Optional)}finally{Ot(o)}}return O0(r,e,t)}function k0(n,e,t,r=_e.Default,i){if(n!==null){if(e[ie]&2048&&!(r&_e.Self)){let s=o1(n,e,t,r,Cn);if(s!==Cn)return s}let o=F0(n,e,t,r,Cn);if(o!==Cn)return o}return R0(e,t,r,i)}function F0(n,e,t,r,i){let o=r1(t);if(typeof o=="function"){if(!C0(e,n,r))return r&_e.Host?O0(i,t,r):R0(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&_e.Optional))ph(t);else return s}finally{x0()}}else if(typeof o=="number"){let s=null,c=N0(n,e),l=zi,d=r&_e.Host?e[Dn][dn]:null;for((c===-1||r&_e.SkipSelf)&&(l=c===-1?Nh(n,e):e[c+8],l===zi||!hv(r,!1)?c=-1:(s=e[de],c=cc(l),e=lc(l,e)));c!==-1;){let m=e[de];if(dv(o,c,m.data)){let g=n1(c,e,t,s,r,d);if(g!==Cn)return g}l=e[c+8],l!==zi&&hv(r,e[de].data[c+8]===d)&&dv(o,c,e)?(s=m,c=cc(l),e=lc(l,e)):c=-1}}return i}function n1(n,e,t,r,i,o){let s=e[de],c=s.data[n+8],l=r==null?Sc(c)&&Nd:r!=s&&(c.type&3)!==0,d=i&_e.Host&&o===c,m=Xa(c,s,t,l,d);return m!==null?si(e,s,m,c):Cn}function Xa(n,e,t,r,i){let o=n.providerIndexes,s=e.data,c=o&1048575,l=n.directiveStart,d=n.directiveEnd,m=o>>20,g=r?c:c+m,b=i?c+m:d;for(let C=g;C<b;C++){let N=s[C];if(C<l&&t===N||C>=l&&N.type===t)return C}if(i){let C=s[l];if(C&&Dr(C)&&C.type===t)return l}return null}function si(n,e,t,r){let i=n[t],o=e.data;if(Qx(i)){let s=i;s.resolving&&DD(ID(o[t]));let c=uc(s.canSeeViewProviders);s.resolving=!0;let l,d=s.injectImpl?Ot(s.injectImpl):null,m=C0(n,r,_e.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&Wx(t,o[t],e)}finally{d!==null&&Ot(d),uc(c),s.resolving=!1,x0()}}return i}function r1(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ns)?n[ns]:void 0;return typeof e=="number"?e>=0?e&A0:i1:e}function dv(n,e,t){let r=1<<n;return!!(t[e+(n>>P0)]&r)}function hv(n,e){return!(n&_e.Self)&&!(n&_e.Host&&e)}var ei=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return k0(this._tNode,this._lView,e,Cc(r),t)}};function i1(){return new ei(Lt(),Ee())}function Tr(n){return fs(()=>{let e=n.prototype.constructor,t=e[tc]||Rd(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[tc]||Rd(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Rd(n){return Vv(n)?()=>{let e=Rd(St(n));return e&&e()}:ti(n)}function o1(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ie]&2048&&!(s[ie]&512);){let c=F0(o,s,t,r|_e.Self,Cn);if(c!==Cn)return c;let l=o.parent;if(!l){let d=s[o0];if(d){let m=d.get(t,Cn,r);if(m!==Cn)return m}l=V0(s),s=s[Ji]}o=l}return i}function V0(n){let e=n[de],t=e.type;return t===2?e.declTNode:t===1?n[dn]:null}function fv(n,e=null,t=null,r){let i=s1(n,e,t,r);return i.resolveInjectorInitializers(),i}function s1(n,e=null,t=null,r,i=new Set){let o=[t||Wt,ix(n)];return r=r||(typeof n=="object"?void 0:kt(n)),new ss(o,e||vh(),r||null,i)}var vs=(()=>{class n{static{this.THROW_IF_NOT_FOUND=rs}static{this.NULL=new ic}static create(t,r){if(Array.isArray(t))return fv({name:""},r,t,"");{let i=t.name??"";return fv({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=me({token:n,providedIn:"any",factory:()=>oe(Gv)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();var a1="ngOriginalError";function dd(n){return n[a1]}var Un=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&dd(e);for(;t&&dd(t);)t=dd(t);return t||null}},L0=new pe("",{providedIn:"root",factory:()=>Fe(Un).handleError.bind(void 0)}),j0=(()=>{class n{static{this.__NG_ELEMENT_ID__=c1}static{this.__NG_ENV_ID__=t=>t}}return n})(),kd=class extends j0{constructor(e){super(),this._lView=e}onDestroy(e){return m0(this._lView,e),()=>Mx(this._lView,e)}};function c1(){return new kd(Ee())}function l1(){return Xi(Lt(),Ee())}function Xi(n,e){return new Jt(Yt(n,e))}var Jt=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=l1}}return n})();function u1(n){return n instanceof Jt?n.nativeElement:n}var Fd=class extends Cr{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,mx()&&(this.destroyRef=Fe(j0,{optional:!0})??void 0)}emit(e){let t=Se(null);try{super.next(e)}finally{Se(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=hd(o),i&&(i=hd(i)),s&&(s=hd(s)));let c=super.subscribe({next:i,error:o,complete:s});return e instanceof Pt&&e.add(c),c}};function hd(n){return e=>{setTimeout(n,void 0,e)}}var an=Fd;function d1(){return this._results[Symbol.iterator]()}var Vd=class n{get changes(){return this._changes??=new an}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=d1)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=VD(e);(this._changesDetected=!FD(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function B0(n){return(n.flags&128)===128}var U0=new Map,h1=0;function f1(){return h1++}function p1(n){U0.set(n[xc],n)}function m1(n){U0.delete(n[xc])}var pv="__ngContext__";function ai(n,e){Zr(e)?(n[pv]=e[xc],p1(e)):n[pv]=e}function $0(n){return H0(n[cs])}function z0(n){return H0(n[cn])}function H0(n){for(;n!==null&&!qn(n);)n=n[cn];return n}var Ld;function q0(n){Ld=n}function g1(){if(Ld!==void 0)return Ld;if(typeof document<"u")return document;throw new ue(210,!1)}var Oh=new pe("",{providedIn:"root",factory:()=>y1}),y1="ng",Rh=new pe(""),Mr=new pe("",{providedIn:"platform",factory:()=>"unknown"});var kh=new pe("",{providedIn:"root",factory:()=>g1().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var v1="h",_1="b";var b1=()=>null;function Fh(n,e,t=!1){return b1(n,e,t)}var G0=!1,w1=new pe("",{providedIn:"root",factory:()=>G0});var hc=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${kv})`}};function Mc(n){return n instanceof hc?n.changingThisBreaksApplicationSecurity:n}function W0(n,e){let t=C1(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${kv})`)}return t===e}function C1(n){return n instanceof hc&&n.getTypeName()||null}var E1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function K0(n){return n=String(n),n.match(E1)?n:"unsafe:"+n}var Vh=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Vh||{});function fi(n){let e=I1();return e?e.sanitize(Vh.URL,n)||"":W0(n,"URL")?Mc(n):K0(jn(n))}function I1(){let n=Ee();return n&&n[un].sanitizer}var $n=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}($n||{}),D1;function Lh(n,e){return D1(n,e)}function Ui(n,e,t,r,i){if(r!=null){let o,s=!1;qn(r)?o=r:Zr(r)&&(s=!0,r=r[Hn]);let c=xn(r);n===0&&t!==null?i==null?Z0(e,t,c):fc(e,t,c,i||null,!0):n===1&&t!==null?fc(e,t,c,i||null,!0):n===2?$1(e,c,s):n===3&&e.destroyNode(c),o!=null&&H1(e,n,o,t,i)}}function x1(n,e){return n.createText(e)}function S1(n,e,t){n.setValue(e,t)}function Q0(n,e,t){return n.createElement(e,t)}function T1(n,e){Y0(n,e),e[Hn]=null,e[dn]=null}function M1(n,e,t,r,i,o){r[Hn]=i,r[dn]=e,Ac(n,r,t,1,i,o)}function Y0(n,e){e[un].changeDetectionScheduler?.notify(1),Ac(n,e,e[ot],2,null,null)}function A1(n){let e=n[cs];if(!e)return fd(n[de],n);for(;e;){let t=null;if(Zr(e))t=e[cs];else{let r=e[Ft];r&&(t=r)}if(!t){for(;e&&!e[cn]&&e!==n;)Zr(e)&&fd(e[de],e),e=e[yt];e===null&&(e=n),Zr(e)&&fd(e[de],e),t=e&&e[cn]}e=t}}function P1(n,e,t,r){let i=Ft+r,o=t.length;r>0&&(t[i-1][cn]=e),r<o-Ft?(e[cn]=t[i],qv(t,Ft+r,e)):(t.push(e),e[cn]=null),e[yt]=t;let s=e[ms];s!==null&&t!==s&&N1(s,e);let c=e[Bn];c!==null&&c.insertView(n),Ad(e),e[ie]|=128}function N1(n,e){let t=n[Ki],i=e[yt][yt][Dn];e[Dn]!==i&&(n[ie]|=_h.HasTransplantedViews),t===null?n[Ki]=[e]:t.push(e)}function J0(n,e){let t=n[Ki],r=t.indexOf(e);t.splice(r,1)}function jd(n,e){if(n.length<=Ft)return;let t=Ft+e,r=n[t];if(r){let i=r[ms];i!==null&&i!==n&&J0(i,r),e>0&&(n[t-1][cn]=r[cn]);let o=rc(n,Ft+e);T1(r[de],r);let s=o[Bn];s!==null&&s.detachView(o[de]),r[yt]=null,r[cn]=null,r[ie]&=-129}return r}function X0(n,e){if(!(e[ie]&256)){let t=e[ot];t.destroyNode&&Ac(n,e,t,3,null,null),A1(e)}}function fd(n,e){if(e[ie]&256)return;let t=Se(null);try{e[ie]&=-129,e[ie]|=256,e[ni]&&wy(e[ni]),R1(n,e),O1(n,e),e[de].type===1&&e[ot].destroy();let r=e[ms];if(r!==null&&qn(e[yt])){r!==e[yt]&&J0(r,e);let i=e[Bn];i!==null&&i.detachView(n)}m1(e)}finally{Se(t)}}function O1(n,e){let t=n.cleanup,r=e[as];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[as]=null);let i=e[Ir];if(i!==null){e[Ir]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function R1(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof oi)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let c=i[o[s]],l=o[s+1];wn(4,c,l);try{l.call(c)}finally{wn(5,c,l)}}else{wn(4,i,o);try{o.call(i)}finally{wn(5,i,o)}}}}}function k1(n,e,t){return F1(n,e.parent,t)}function F1(n,e,t){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return t[Hn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===En.None||o===En.Emulated)return null}return Yt(r,t)}}function fc(n,e,t,r,i){n.insertBefore(e,t,r,i)}function Z0(n,e,t){n.appendChild(e,t)}function mv(n,e,t,r,i){r!==null?fc(n,e,t,r,i):Z0(n,e,t)}function V1(n,e,t,r){n.removeChild(e,t,r)}function jh(n,e){return n.parentNode(e)}function L1(n,e){return n.nextSibling(e)}function j1(n,e,t){return U1(n,e,t)}function B1(n,e,t){return n.type&40?Yt(n,t):null}var U1=B1,gv;function Bh(n,e,t,r){let i=k1(n,r,e),o=e[ot],s=r.parent||e[dn],c=j1(s,r,e);if(i!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)mv(o,i,t[l],c,!1);else mv(o,i,t,c,!1);gv!==void 0&&gv(o,r,e,t,i)}function Za(n,e){if(e!==null){let t=e.type;if(t&3)return Yt(e,n);if(t&4)return Bd(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Za(n,r);{let i=n[e.index];return qn(i)?Bd(-1,i):xn(i)}}else{if(t&32)return Lh(e,n)()||xn(n[e.index]);{let r=e_(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=us(n[Dn]);return Za(i,r)}else return Za(n,e.next)}}}return null}function e_(n,e){if(e!==null){let r=n[Dn][dn],i=e.projection;return r.projection[i]}return null}function Bd(n,e){let t=Ft+n+1;if(t<e.length){let r=e[t],i=r[de].firstChild;if(i!==null)return Za(r,i)}return e[ri]}function $1(n,e,t){let r=jh(n,e);r&&V1(n,r,e,t)}function Uh(n,e,t,r,i,o,s){for(;t!=null;){let c=r[t.index],l=t.type;if(s&&e===0&&(c&&ai(xn(c),r),t.flags|=2),(t.flags&32)!==32)if(l&8)Uh(n,e,t.child,r,i,o,!1),Ui(e,n,i,c,o);else if(l&32){let d=Lh(t,r),m;for(;m=d();)Ui(e,n,i,m,o);Ui(e,n,i,c,o)}else l&16?z1(n,e,r,t,i,o):Ui(e,n,i,c,o);t=s?t.projectionNext:t.next}}function Ac(n,e,t,r,i,o){Uh(t,r,n.firstChild,e,i,o,!1)}function z1(n,e,t,r,i,o){let s=t[Dn],l=s[dn].projection[r.projection];if(Array.isArray(l))for(let d=0;d<l.length;d++){let m=l[d];Ui(e,n,i,m,o)}else{let d=l,m=s[yt];B0(r)&&(d.flags|=128),Uh(n,e,d,m,i,o,!0)}}function H1(n,e,t,r,i){let o=t[ri],s=xn(t);o!==s&&Ui(e,n,r,o,i);for(let c=Ft;c<t.length;c++){let l=t[c];Ac(l[de],l,n,e,r,o)}}function q1(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:$n.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=$n.Important),n.setStyle(t,r,i,o))}}function G1(n,e,t){n.setAttribute(e,"style",t)}function t_(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function n_(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Dd(n,e,r),i!==null&&t_(n,e,i),o!==null&&G1(n,e,o)}var hn={};function _(n=1){r_(wt(),Ee(),Sr()+n,!1)}function r_(n,e,t,r){if(!r)if((e[ie]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Ya(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Ja(e,o,0,t)}ii(t)}function K(n,e=_e.Default){let t=Ee();if(t===null)return oe(n,e);let r=Lt();return k0(r,t,St(n),e)}function i_(n,e,t,r,i,o){let s=Se(null);try{let c=null;i&Kt.SignalBased&&(c=e[r][qu]),c!==null&&c.transformFn!==void 0&&(o=c.transformFn(o)),i&Kt.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,c,o,t,r):c0(e,c,r,o)}finally{Se(s)}}function W1(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)ii(~i);else{let o=i,s=t[++r],c=t[++r];Ux(s,o);let l=e[o];c(2,l)}}}finally{ii(-1)}}function Pc(n,e,t,r,i,o,s,c,l,d,m){let g=e.blueprint.slice();return g[Hn]=i,g[ie]=r|4|128|8|64,(d!==null||n&&n[ie]&2048)&&(g[ie]|=2048),p0(g),g[yt]=g[Ji]=n,g[ln]=t,g[un]=s||n&&n[un],g[ot]=c||n&&n[ot],g[Wi]=l||n&&n[Wi]||null,g[dn]=o,g[xc]=f1(),g[oc]=m,g[o0]=d,g[Dn]=e.type==2?n[Dn]:g,g}function Nc(n,e,t,r,i){let o=n.data[e];if(o===null)o=K1(n,e,t,r,i),Bx()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=Fx();o.injectorIndex=s===null?-1:s.injectorIndex}return ys(o,!0),o}function K1(n,e,t,r,i){let o=y0(),s=v0(),c=s?o:o&&o.parent,l=n.data[e]=eS(n,c,t,e,r,i);return n.firstChild===null&&(n.firstChild=l),o!==null&&(s?o.child==null&&l.parent!==null&&(o.child=l):o.next===null&&(o.next=l,l.prev=o)),l}function o_(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function s_(n,e,t,r,i){let o=Sr(),s=r&2;try{ii(-1),s&&e.length>Qt&&r_(n,e,Qt,!1),wn(s?2:0,i),t(r,i)}finally{ii(o),wn(s?3:1,i)}}function a_(n,e,t){if(a0(e)){let r=Se(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let c=n.data[s];if(c.contentQueries){let l=t[s];c.contentQueries(1,l,s)}}}finally{Se(r)}}}function c_(n,e,t){g0()&&(sS(n,e,t,Yt(t,e)),(t.flags&64)===64&&p_(n,e,t))}function l_(n,e,t=Yt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],c=s===-1?t(e,n):n[s];n[i++]=c}}}function u_(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=$h(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function $h(n,e,t,r,i,o,s,c,l,d,m){let g=Qt+r,b=g+i,C=Q1(g,b),N=typeof d=="function"?d():d;return C[de]={type:n,blueprint:C,template:t,queries:null,viewQuery:c,declTNode:e,data:C.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:b,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:N,incompleteFirstPass:!1,ssrId:m}}function Q1(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:hn);return t}function Y1(n,e,t,r){let o=r.get(w1,G0)||t===En.ShadowDom,s=n.selectRootElement(e,o);return J1(s),s}function J1(n){X1(n)}var X1=()=>null;function Z1(n,e,t,r){let i=y_(e);i.push(t),n.firstCreatePass&&v_(n).push(r,i.length-1)}function eS(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,c=0;return Ox()&&(c|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function yv(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let c,l=Kt.None;Array.isArray(s)?(c=s[0],l=s[1]):c=s;let d=o;if(i!==null){if(!i.hasOwnProperty(o))continue;d=i[o]}n===0?vv(r,t,d,c,l):vv(r,t,d,c)}return r}function vv(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function tS(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,c=[],l=null,d=null;for(let m=r;m<i;m++){let g=o[m],b=t?t.get(g):null,C=b?b.inputs:null,N=b?b.outputs:null;l=yv(0,g.inputs,m,l,C),d=yv(1,g.outputs,m,d,N);let R=l!==null&&s!==null&&!gh(e)?yS(l,m,s):null;c.push(R)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=c,e.inputs=l,e.outputs=d}function nS(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function d_(n,e,t,r,i,o,s,c){let l=Yt(e,t),d=e.inputs,m;!c&&d!=null&&(m=d[r])?(zh(n,t,m,r,i),Sc(e)&&rS(t,e.index)):e.type&3?(r=nS(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(l,r,i)):e.type&12}function rS(n,e){let t=xr(e,n);t[ie]&16||(t[ie]|=64)}function h_(n,e,t,r){if(g0()){let i=r===null?null:{"":-1},o=cS(n,t),s,c;o===null?s=c=null:[s,c]=o,s!==null&&f_(n,e,t,s,i,c),i&&lS(t,r,i)}t.mergedAttrs=os(t.mergedAttrs,t.attrs)}function f_(n,e,t,r,i,o){for(let d=0;d<r.length;d++)Od(dc(t,e),n,r[d].type);dS(t,n.data.length,r.length);for(let d=0;d<r.length;d++){let m=r[d];m.providersResolver&&m.providersResolver(m)}let s=!1,c=!1,l=o_(n,e,r.length,null);for(let d=0;d<r.length;d++){let m=r[d];t.mergedAttrs=os(t.mergedAttrs,m.hostAttrs),hS(n,t,e,l,m),uS(l,m,i),m.contentQueries!==null&&(t.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(t.flags|=64);let g=m.type.prototype;!s&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!c&&(g.ngOnChanges||g.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),c=!0),l++}tS(n,t,o)}function iS(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let c=~e.index;oS(s)!=c&&s.push(c),s.push(t,r,o)}}function oS(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function sS(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Sc(t)&&fS(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||dc(t,e),ai(r,e);let s=t.initialInputs;for(let c=i;c<o;c++){let l=n.data[c],d=si(e,n,c,t);if(ai(d,e),s!==null&&gS(e,c-i,d,l,t,s),Dr(l)){let m=xr(t.index,e);m[ln]=si(e,n,c,t)}}}function p_(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=$x();try{ii(o);for(let c=r;c<i;c++){let l=n.data[c],d=e[c];Pd(c),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&aS(l,d)}}finally{ii(-1),Pd(s)}}function aS(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function cS(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(KD(e,s.selectors,!1))if(r||(r=[]),Dr(s))if(s.findHostDirectiveDefs!==null){let c=[];i=i||new Map,s.findHostDirectiveDefs(s,c,i),r.unshift(...c,s);let l=c.length;Ud(n,e,l)}else r.unshift(s),Ud(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Ud(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function lS(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new ue(-301,!1);r.push(e[i],o)}}}function uS(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Dr(e)&&(t[""]=n)}}function dS(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function hS(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=ti(i.type,!0)),s=new oi(o,Dr(i),K);n.blueprint[r]=s,t[r]=s,iS(n,e,r,o_(n,t,i.hostVars,hn),i)}function fS(n,e,t){let r=Yt(e,n),i=u_(t),o=n[un].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let c=Oc(n,Pc(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=c}function pS(n,e,t,r,i,o){let s=Yt(n,e);mS(e[ot],s,o,n.value,t,r,i)}function mS(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let c=s==null?jn(o):s(o,r||"",i);n.setAttribute(e,i,c,t)}}function gS(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let c=0;c<s.length;){let l=s[c++],d=s[c++],m=s[c++],g=s[c++];i_(r,t,l,d,m,g)}}function yS(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let c=0;c<s.length;c+=3)if(s[c]===e){r.push(o,s[c+1],s[c+2],t[i+1]);break}}i+=2}return r}function m_(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function g_(n,e){let t=n.contentQueries;if(t!==null){let r=Se(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let c=n.data[s];Dh(o),c.contentQueries(2,e[s],s)}}}finally{Se(r)}}}function Oc(n,e){return n[cs]?n[cv][cn]=e:n[cs]=e,n[cv]=e,e}function $d(n,e,t){Dh(0);let r=Se(null);try{e(n,t)}finally{Se(r)}}function y_(n){return n[as]||(n[as]=[])}function v_(n){return n.cleanup||(n.cleanup=[])}function __(n,e){let t=n[Wi],r=t?t.get(Un,null):null;r&&r.handleError(e)}function zh(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],c=t[o++],l=t[o++],d=e[s],m=n.data[s];i_(m,d,r,c,l,i)}}function Hh(n,e,t){let r=h0(e,n);S1(n[ot],r,t)}function vS(n,e){let t=xr(e,n),r=t[de];_S(r,t);let i=t[Hn];i!==null&&t[oc]===null&&(t[oc]=Fh(i,t[Wi])),qh(r,t,t[ln])}function _S(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function qh(n,e,t){xh(e);try{let r=n.viewQuery;r!==null&&$d(1,r,t);let i=n.template;i!==null&&s_(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Bn]?.finishViewCreation(n),n.staticContentQueries&&g_(n,e),n.staticViewQueries&&$d(2,n.viewQuery,t);let o=n.components;o!==null&&bS(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ie]&=-5,Sh()}}function bS(n,e){for(let t=0;t<e.length;t++)vS(n,e[t])}function wS(n,e,t,r){let i=Se(null);try{let o=e.tView,c=n[ie]&4096?4096:16,l=Pc(n,o,t,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),d=n[e.index];l[ms]=d;let m=n[Bn];return m!==null&&(l[Bn]=m.createEmbeddedView(o)),qh(o,l,t),l}finally{Se(i)}}function _v(n,e){return!e||e.firstChild===null||B0(n)}function CS(n,e,t,r=!0){let i=e[de];if(P1(i,e,n,t),r){let s=Bd(t,n),c=e[ot],l=jh(c,n[ri]);l!==null&&M1(i,n[dn],c,e,l,s)}let o=e[oc];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function pc(n,e,t,r,i=!1){for(;t!==null;){let o=e[t.index];o!==null&&r.push(xn(o)),qn(o)&&ES(o,r);let s=t.type;if(s&8)pc(n,e,t.child,r);else if(s&32){let c=Lh(t,e),l;for(;l=c();)r.push(l)}else if(s&16){let c=e_(e,t);if(Array.isArray(c))r.push(...c);else{let l=us(e[Dn]);pc(l[de],l,c,r,!0)}}t=i?t.projectionNext:t.next}return r}function ES(n,e){for(let t=Ft;t<n.length;t++){let r=n[t],i=r[de].firstChild;i!==null&&pc(r[de],r,i,e)}n[ri]!==n[Hn]&&e.push(n[ri])}var b_=[];function IS(n){return n[ni]??DS(n)}function DS(n){let e=b_.pop()??Object.create(SS);return e.lView=n,e}function xS(n){n.lView[ni]!==n&&(n.lView=null,b_.push(n))}var SS=le(Y({},vy),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{ls(n.lView)},consumerOnSignalRead(){this.lView[ni]=this}}),w_=100;function C_(n,e=!0,t=0){let r=n[un],i=r.rendererFactory,o=!1;o||i.begin?.();try{TS(n,t)}catch(s){throw e&&__(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function TS(n,e){zd(n,e);let t=0;for(;Eh(n);){if(t===w_)throw new ue(103,!1);t++,zd(n,1)}}function MS(n,e,t,r){let i=e[ie];if((i&256)===256)return;let o=!1;!o&&e[un].inlineEffectRunner?.flush(),xh(e);let s=null,c=null;!o&&AS(n)&&(c=IS(e),s=_y(c));try{p0(e),jx(n.bindingStartIndex),t!==null&&s_(n,e,t,2,r);let l=(i&3)===3;if(!o)if(l){let g=n.preOrderCheckHooks;g!==null&&Ya(e,g,null)}else{let g=n.preOrderHooks;g!==null&&Ja(e,g,0,null),ld(e,0)}if(PS(e),E_(e,0),n.contentQueries!==null&&g_(n,e),!o)if(l){let g=n.contentCheckHooks;g!==null&&Ya(e,g)}else{let g=n.contentHooks;g!==null&&Ja(e,g,1),ld(e,1)}W1(n,e);let d=n.components;d!==null&&D_(e,d,0);let m=n.viewQuery;if(m!==null&&$d(2,m,r),!o)if(l){let g=n.viewCheckHooks;g!==null&&Ya(e,g)}else{let g=n.viewHooks;g!==null&&Ja(e,g,2),ld(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[cd]){for(let g of e[cd])g();e[cd]=null}o||(e[ie]&=-73)}catch(l){throw ls(e),l}finally{c!==null&&(by(c,s),xS(c)),Sh()}}function AS(n){return n.type!==2}function E_(n,e){for(let t=$0(n);t!==null;t=z0(t))for(let r=Ft;r<t.length;r++){let i=t[r];I_(i,e)}}function PS(n){for(let e=$0(n);e!==null;e=z0(e)){if(!(e[ie]&_h.HasTransplantedViews))continue;let t=e[Ki];for(let r=0;r<t.length;r++){let i=t[r],o=i[yt];Sx(i)}}}function NS(n,e,t){let r=xr(e,n);I_(r,t)}function I_(n,e){Ch(n)&&zd(n,e)}function zd(n,e){let r=n[de],i=n[ie],o=n[ni],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Gu(o)),o&&(o.dirty=!1),n[ie]&=-9217,s)MS(r,n,r.template,n[ln]);else if(i&8192){E_(n,1);let c=r.components;c!==null&&D_(n,c,1)}}function D_(n,e,t){for(let r=0;r<e.length;r++)NS(n,e[r],t)}function Gh(n){for(n[un].changeDetectionScheduler?.notify();n;){n[ie]|=64;let e=us(n);if(yx(n)&&!e)return n;n=e}return null}var ci=class{get rootNodes(){let e=this._lView,t=e[de];return pc(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ln]}set context(e){this._lView[ln]=e}get destroyed(){return(this._lView[ie]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[yt];if(qn(e)){let t=e[sc],r=t?t.indexOf(this):-1;r>-1&&(jd(e,r),rc(t,r))}this._attachedToViewContainer=!1}X0(this._lView[de],this._lView)}onDestroy(e){m0(this._lView,e)}markForCheck(){Gh(this._cdRefInjectingView||this._lView)}detach(){this._lView[ie]&=-129}reattach(){Ad(this._lView),this._lView[ie]|=128}detectChanges(){this._lView[ie]|=1024,C_(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ue(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,Y0(this._lView[de],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ue(902,!1);this._appRef=e,Ad(this._lView)}},li=(()=>{class n{static{this.__NG_ELEMENT_ID__=kS}}return n})(),OS=li,RS=class extends OS{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=wS(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new ci(i)}};function kS(){return Rc(Lt(),Ee())}function Rc(n,e){return n.type&4?new RS(e,n,Xi(n,e)):null}var J3=new RegExp(`^(\\d+)*(${_1}|${v1})*(.*)`);var FS=()=>null;function bv(n,e){return FS(n,e)}var Hd=class{},qd=class{},mc=class{};function VS(n){let e=Error(`No component factory found for ${kt(n)}.`);return e[LS]=n,e}var LS="ngComponent";var Gd=class{resolveComponentFactory(e){throw VS(e)}},Wh=(()=>{class n{static{this.NULL=new Gd}}return n})(),ds=class{},Ar=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>jS()}}return n})();function jS(){let n=Ee(),e=Lt(),t=xr(e.index,n);return(Zr(t)?t:n)[ot]}var BS=(()=>{class n{static{this.\u0275prov=me({token:n,providedIn:"root",factory:()=>null})}}return n})(),pd={};var wv=new Set;function Kh(n){wv.has(n)||(wv.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function Cv(...n){}function US(){let n=typeof Ln.requestAnimationFrame=="function",e=Ln[n?"requestAnimationFrame":"setTimeout"],t=Ln[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}var gt=class n{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new an(!1),this.onMicrotaskEmpty=new an(!1),this.onStable=new an(!1),this.onError=new an(!1),typeof Zone>"u")throw new ue(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=US().nativeRequestAnimationFrame,HS(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ue(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ue(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,$S,Cv,Cv);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},$S={};function Qh(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function zS(n){n.isCheckStableRunning||n.lastRequestAnimationFrameId!==-1||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Ln,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Wd(n),n.isCheckStableRunning=!0,Qh(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Wd(n))}function HS(n){let e=()=>{zS(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,s,c)=>{if(qS(c))return t.invokeTask(i,o,s,c);try{return Ev(n),t.invokeTask(i,o,s,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Iv(n)}},onInvoke:(t,r,i,o,s,c,l)=>{try{return Ev(n),t.invoke(i,o,s,c,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),Iv(n)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,Wd(n),Qh(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function Wd(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.lastRequestAnimationFrameId!==-1?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Ev(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Iv(n){n._nesting--,Qh(n)}function qS(n){return!Array.isArray(n)||n.length!==1?!1:n[0].data?.__ignore_ng_zone__===!0}var x_=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let t=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of t)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=me({token:n,providedIn:"root",factory:()=>new n})}}return n})();function Kd(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let c=e[s];if(typeof c=="number")o=c;else if(o==1)i=Xy(i,c);else if(o==2){let l=c,d=e[++s];r=Xy(r,l+": "+d+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Qd=class extends Wh{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=qi(e);return new gc(t,this.ngModule)}};function Dv(n){let e=[];for(let t in n){if(!n.hasOwnProperty(t))continue;let r=n[t];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:t})}return e}function GS(n){let e=n.toLowerCase();return e==="svg"?wx:e==="math"?Cx:null}var Yd=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Cc(r);let i=this.injector.get(e,pd,r);return i!==pd||t===pd?i:this.parentInjector.get(e,t,r)}},gc=class extends mc{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=Dv(e.inputs);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return Dv(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=XD(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=Se(null);try{i=i||this.ngModule;let s=i instanceof In?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let c=s?new Yd(e,s):e,l=c.get(ds,null);if(l===null)throw new ue(407,!1);let d=c.get(BS,null),m=c.get(x_,null),g=c.get(Hd,null),b={rendererFactory:l,sanitizer:d,inlineEffectRunner:null,afterRenderEventManager:m,changeDetectionScheduler:g},C=l.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",R=r?Y1(C,r,this.componentDef.encapsulation,c):Q0(C,N,GS(N)),k=512;this.componentDef.signals?k|=4096:this.componentDef.onPush||(k|=16);let H=null;R!==null&&(H=Fh(R,c,!0));let re=$h(0,null,null,1,0,null,null,null,null,null,null),Q=Pc(null,re,null,k,null,null,b,C,c,null,H);xh(Q);let Ce,ke;try{let Ie=this.componentDef,x,w=null;Ie.findHostDirectiveDefs?(x=[],w=new Map,Ie.findHostDirectiveDefs(Ie,x,w),x.push(Ie)):x=[Ie];let I=WS(Q,R),S=KS(I,R,Ie,x,Q,b,C);ke=f0(re,Qt),R&&JS(C,Ie,R,r),t!==void 0&&XS(ke,this.ngContentSelectors,t),Ce=YS(S,Ie,x,w,Q,[ZS]),qh(re,Q,null)}finally{Sh()}return new Jd(this.componentType,Ce,Xi(ke,Q),Q,ke)}finally{Se(o)}}},Jd=class extends qd{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new ci(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;zh(o[de],o,i,e,t),this.previousInputValues.set(e,t);let s=xr(this._tNode.index,o);Gh(s)}}get injector(){return new ei(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function WS(n,e){let t=n[de],r=Qt;return n[r]=e,Nc(t,r,2,"#host",null)}function KS(n,e,t,r,i,o,s){let c=i[de];QS(r,n,e,s);let l=null;e!==null&&(l=Fh(e,i[Wi]));let d=o.rendererFactory.createRenderer(e,t),m=16;t.signals?m=4096:t.onPush&&(m=64);let g=Pc(i,u_(t),null,m,i[n.index],n,o,d,null,null,l);return c.firstCreatePass&&Ud(c,n,r.length-1),Oc(i,g),i[n.index]=g}function QS(n,e,t,r){for(let i of n)e.mergedAttrs=os(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Kd(e,e.mergedAttrs,!0),t!==null&&n_(r,t,e))}function YS(n,e,t,r,i,o){let s=Lt(),c=i[de],l=Yt(s,i);f_(c,i,s,t,null,r);for(let m=0;m<t.length;m++){let g=s.directiveStart+m,b=si(i,c,g,s);ai(b,i)}p_(c,i,s),l&&ai(l,i);let d=si(i,c,s.directiveStart+s.componentOffset,s);if(n[ln]=i[ln]=d,o!==null)for(let m of o)m(d,e);return a_(c,s,i),d}function JS(n,e,t,r){if(r)Dd(n,t,["ng-version","17.3.12"]);else{let{attrs:i,classes:o}=ZD(e.selectors[0]);i&&Dd(n,t,i),o&&o.length>0&&t_(n,t,o.join(" "))}}function XS(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function ZS(){let n=Lt();Ph(Ee()[de],n)}var Zi=(()=>{class n{static{this.__NG_ELEMENT_ID__=eT}}return n})();function eT(){let n=Lt();return T_(n,Ee())}var tT=Zi,S_=class extends tT{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Xi(this._hostTNode,this._hostLView)}get injector(){return new ei(this._hostTNode,this._hostLView)}get parentInjector(){let e=Nh(this._hostTNode,this._hostLView);if(M0(e)){let t=lc(e,this._hostLView),r=cc(e),i=t[de].data[r+8];return new ei(i,t)}else return new ei(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=xv(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ft}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=bv(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(c,i,_v(this._hostTNode,s)),c}createComponent(e,t,r,i,o){let s=e&&!gx(e),c;if(s)c=t;else{let N=t||{};c=N.index,r=N.injector,i=N.projectableNodes,o=N.environmentInjector||N.ngModuleRef}let l=s?e:new gc(qi(e)),d=r||this.parentInjector;if(!o&&l.ngModule==null){let R=(s?d:this.parentInjector).get(In,null);R&&(o=R)}let m=qi(l.componentType??{}),g=bv(this._lContainer,m?.id??null),b=g?.firstChild??null,C=l.create(d,i,b,o);return this.insertImpl(C.hostView,c,_v(this._hostTNode,g)),C}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(xx(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let l=i[yt],d=new S_(l,l[dn],l[yt]);d.detach(d.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return CS(s,i,o,r),e.attachToViewContainerRef(),qv(md(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=xv(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=jd(this._lContainer,t);r&&(rc(md(this._lContainer),t),X0(r[de],r))}detach(e){let t=this._adjustIndex(e,-1),r=jd(this._lContainer,t);return r&&rc(md(this._lContainer),t)!=null?new ci(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function xv(n){return n[sc]}function md(n){return n[sc]||(n[sc]=[])}function T_(n,e){let t,r=e[n.index];return qn(r)?t=r:(t=m_(r,e,null,n),e[n.index]=t,Oc(e,t)),rT(t,e,n,r),new S_(t,n,e)}function nT(n,e){let t=n[ot],r=t.createComment(""),i=Yt(e,n),o=jh(t,i);return fc(t,o,r,L1(t,i),!1),r}var rT=sT,iT=()=>!1;function oT(n,e,t){return iT(n,e,t)}function sT(n,e,t,r){if(n[ri])return;let i;t.type&8?i=xn(r):i=nT(e,t),n[ri]=i}var Xd=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Zd=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),c=this.queries[s.indexInDeclarationView];i.push(c.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Yh(e,t).matches!==null&&this.queries[t].setDirty()}},eh=class{constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=pT(e):this.predicate=e}},th=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},nh=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,aT(t,o)),this.matchTNodeWithReadOption(e,t,Xa(t,e,o,!1,!1))}else r===li?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Xa(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Jt||i===Zi||i===li&&t.type&4)this.addMatch(t.index,-2);else{let o=Xa(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function aT(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function cT(n,e){return n.type&11?Xi(n,e):n.type&4?Rc(n,e):null}function lT(n,e,t,r){return t===-1?cT(e,n):t===-2?uT(n,e,r):si(n,n[de],t,e)}function uT(n,e,t){if(t===Jt)return Xi(e,n);if(t===li)return Rc(e,n);if(t===Zi)return T_(e,n)}function M_(n,e,t,r){let i=e[Bn].queries[r];if(i.matches===null){let o=n.data,s=t.matches,c=[];for(let l=0;s!==null&&l<s.length;l+=2){let d=s[l];if(d<0)c.push(null);else{let m=o[d];c.push(lT(e,m,s[l+1],t.metadata.read))}}i.matches=c}return i.matches}function rh(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=M_(n,e,i,t);for(let c=0;c<o.length;c+=2){let l=o[c];if(l>0)r.push(s[c/2]);else{let d=o[c+1],m=e[-l];for(let g=Ft;g<m.length;g++){let b=m[g];b[ms]===b[yt]&&rh(b[de],b,d,r)}if(m[Ki]!==null){let g=m[Ki];for(let b=0;b<g.length;b++){let C=g[b];rh(C[de],C,d,r)}}}}}return r}function dT(n,e){return n[Bn].queries[e].queryList}function hT(n,e,t){let r=new Vd((t&4)===4);return Z1(n,e,r,r.destroy),(e[Bn]??=new Zd).queries.push(new Xd(r))-1}function fT(n,e,t){let r=wt();return r.firstCreatePass&&(mT(r,new eh(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),hT(r,Ee(),e)}function pT(n){return n.split(",").map(e=>e.trim())}function mT(n,e,t){n.queries===null&&(n.queries=new th),n.queries.track(new nh(e,t))}function Yh(n,e){return n.queries.getByIndex(e)}function gT(n,e){let t=n[de],r=Yh(t,e);return r.crossesNgTemplate?rh(t,n,e,[]):M_(t,n,r,e)}function yT(n){return typeof n=="function"&&n[qu]!==void 0}function A_(n){return yT(n)&&typeof n.set=="function"}function vT(n){return Object.getPrototypeOf(n.prototype).constructor}function Tt(n){let e=vT(n.type),t=!0,r=[n];for(;e;){let i;if(Dr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ue(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Wa(n.inputs),s.inputTransforms=Wa(n.inputTransforms),s.declaredInputs=Wa(n.declaredInputs),s.outputs=Wa(n.outputs);let c=i.hostBindings;c&&ET(n,c);let l=i.viewQuery,d=i.contentQueries;if(l&&wT(n,l),d&&CT(n,d),_T(n,i),yD(n.outputs,i.outputs),Dr(i)&&i.data.animation){let m=n.data;m.animation=(m.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let c=o[s];c&&c.ngInherit&&c(n),c===Tt&&(t=!1)}}e=Object.getPrototypeOf(e)}bT(r)}function _T(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function bT(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=os(i.hostAttrs,t=os(t,i.hostAttrs))}}function Wa(n){return n===Hi?{}:n===Wt?[]:n}function wT(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function CT(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function ET(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}var Qi=class{};var yc=class extends Qi{constructor(e){super(),this.componentFactoryResolver=new Qd(this),this.instance=null;let t=new ss([...e.providers,{provide:Qi,useValue:this},{provide:Wh,useValue:this.componentFactoryResolver}],e.parent||vh(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function IT(n,e,t=null){return new yc({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var kc=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ct(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function P_(n){return xT(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function DT(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function xT(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function N_(n,e,t){return n[e]=t}function zn(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Jh(n,e,t,r){let i=zn(n,e,t);return zn(n,e+1,r)||i}function ST(n,e,t,r,i){let o=Jh(n,e,t,r);return zn(n,e+2,i)||o}function TT(n){return(n.flags&32)===32}function MT(n,e,t,r,i,o,s,c,l){let d=e.consts,m=Nc(e,n,4,s||null,ac(d,c));h_(e,t,m,ac(d,l)),Ph(e,m);let g=m.tView=$h(2,m,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return e.queries!==null&&(e.queries.template(e,m),g.queries=e.queries.embeddedTView(m)),m}function z(n,e,t,r,i,o,s,c){let l=Ee(),d=wt(),m=n+Qt,g=d.firstCreatePass?MT(m,d,l,e,t,r,i,o,s):d.data[m];ys(g,!1);let b=AT(d,l,g,n);Mh()&&Bh(d,l,b,g),ai(b,l);let C=m_(b,l,b,g);return l[m]=C,Oc(l,C),oT(C,g,l),bh(g)&&c_(d,l,g),s!=null&&l_(l,g,c),z}var AT=PT;function PT(n,e,t,r){return Ah(!0),e[ot].createComment("")}function _s(n,e,t,r){let i=Ee(),o=Tc();if(zn(i,o,e)){let s=wt(),c=Th();pS(c,i,n,e,t,r)}return _s}function NT(n,e,t,r){return zn(n,Tc(),t)?e+jn(t)+r:hn}function OT(n,e,t,r,i,o){let s=b0(),c=Jh(n,s,t,i);return Ih(2),c?e+jn(t)+r+jn(i)+o:hn}function RT(n,e,t,r,i,o,s,c){let l=b0(),d=ST(n,l,t,i,s);return Ih(3),d?e+jn(t)+r+jn(i)+o+jn(s)+c:hn}function Ka(n,e){return n<<17|e<<2}function ui(n){return n>>17&32767}function kT(n){return(n&2)==2}function FT(n,e){return n&131071|e<<17}function ih(n){return n|2}function Yi(n){return(n&131068)>>2}function gd(n,e){return n&-131069|e<<2}function VT(n){return(n&1)===1}function oh(n){return n|1}function LT(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,c=ui(s),l=Yi(s);n[r]=t;let d=!1,m;if(Array.isArray(t)){let g=t;m=g[1],(m===null||ps(g,m)>0)&&(d=!0)}else m=t;if(i)if(l!==0){let b=ui(n[c+1]);n[r+1]=Ka(b,c),b!==0&&(n[b+1]=gd(n[b+1],r)),n[c+1]=FT(n[c+1],r)}else n[r+1]=Ka(c,0),c!==0&&(n[c+1]=gd(n[c+1],r)),c=r;else n[r+1]=Ka(l,0),c===0?c=r:n[l+1]=gd(n[l+1],r),l=r;d&&(n[r+1]=ih(n[r+1])),Sv(n,m,r,!0),Sv(n,m,r,!1),jT(e,m,n,r,o),s=Ka(c,l),o?e.classBindings=s:e.styleBindings=s}function jT(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&ps(o,e)>=0&&(t[r+1]=oh(t[r+1]))}function Sv(n,e,t,r){let i=n[t+1],o=e===null,s=r?ui(i):Yi(i),c=!1;for(;s!==0&&(c===!1||o);){let l=n[s],d=n[s+1];BT(l,e)&&(c=!0,n[s+1]=r?oh(d):ih(d)),s=r?ui(d):Yi(d)}c&&(n[t+1]=r?ih(i):oh(i))}function BT(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?ps(n,e)>=0:!1}function P(n,e,t){let r=Ee(),i=Tc();if(zn(r,i,e)){let o=wt(),s=Th();d_(o,s,r,n,e,r[ot],t,!1)}return P}function Tv(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";zh(n,t,o[s],s,r)}function Gn(n,e,t){return O_(n,e,t,!1),Gn}function De(n,e){return O_(n,e,null,!0),De}function O_(n,e,t,r){let i=Ee(),o=wt(),s=Ih(2);if(o.firstUpdatePass&&$T(o,n,s,r),e!==hn&&zn(i,s,e)){let c=o.data[Sr()];WT(o,c,i,i[ot],n,i[s+1]=KT(e,t),r,s)}}function UT(n,e){return e>=n.expandoStartIndex}function $T(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Sr()],s=UT(n,t);QT(o,r)&&e===null&&!s&&(e=!1),e=zT(i,o,e,r),LT(i,o,e,t,s,r)}}function zT(n,e,t,r){let i=zx(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=yd(null,n,e,t,r),t=hs(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=yd(i,n,e,t,r),o===null){let l=HT(n,e,r);l!==void 0&&Array.isArray(l)&&(l=yd(null,n,e,l[1],r),l=hs(l,e.attrs,r),qT(n,e,r,l))}else o=GT(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function HT(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Yi(r)!==0)return n[ui(r)]}function qT(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[ui(i)]=r}function GT(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=hs(r,s,t)}return hs(r,e.attrs,t)}function yd(n,e,t,r,i){let o=null,s=t.directiveEnd,c=t.directiveStylingLast;for(c===-1?c=t.directiveStart:c++;c<s&&(o=e[c],r=hs(r,o.hostAttrs,i),o!==n);)c++;return n!==null&&(t.directiveStylingLast=c),r}function hs(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),jD(n,s,t?!0:e[++o]))}return n===void 0?null:n}function WT(n,e,t,r,i,o,s,c){if(!(e.type&3))return;let l=n.data,d=l[c+1],m=VT(d)?Mv(l,e,t,i,Yi(d),s):void 0;if(!vc(m)){vc(o)||kT(d)&&(o=Mv(l,null,t,i,c,s));let g=h0(Sr(),t);q1(r,s,g,i,o)}}function Mv(n,e,t,r,i,o){let s=e===null,c;for(;i>0;){let l=n[i],d=Array.isArray(l),m=d?l[1]:l,g=m===null,b=t[i+1];b===hn&&(b=g?Wt:void 0);let C=g?sd(b,r):m===r?b:void 0;if(d&&!vc(C)&&(C=sd(l,r)),vc(C)&&(c=C,s))return c;let N=n[i+1];i=s?ui(N):Yi(N)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(c=sd(l,r))}return c}function vc(n){return n!==void 0}function KT(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=kt(Mc(n)))),n}function QT(n,e){return(n.flags&(e?8:16))!==0}function YT(n,e,t,r,i,o){let s=e.consts,c=ac(s,i),l=Nc(e,n,2,r,c);return h_(e,t,l,ac(s,o)),l.attrs!==null&&Kd(l,l.attrs,!1),l.mergedAttrs!==null&&Kd(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function p(n,e,t,r){let i=Ee(),o=wt(),s=Qt+n,c=i[ot],l=o.firstCreatePass?YT(s,o,i,e,t,r):o.data[s],d=JT(o,i,l,c,e,n);i[s]=d;let m=bh(l);return ys(l,!0),n_(c,d,l),!TT(l)&&Mh()&&Bh(o,i,d,l),Ax()===0&&ai(d,i),Px(),m&&(c_(o,i,l),a_(o,l,i)),r!==null&&l_(i,l),p}function f(){let n=Lt();v0()?Vx():(n=n.parent,ys(n,!1));let e=n;Rx(e)&&kx(),Nx();let t=wt();return t.firstCreatePass&&(Ph(t,n),a0(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&Yx(e)&&Tv(t,e,Ee(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Jx(e)&&Tv(t,e,Ee(),e.stylesWithoutHost,!1),f}function Pe(n,e,t,r){return p(n,e,t,r),f(),Pe}var JT=(n,e,t,r,i,o)=>(Ah(!0),Q0(r,i,Gx()));function fe(){return Ee()}var Xr=void 0;function XT(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var ZT=["en",[["a","p"],["AM","PM"],Xr],[["AM","PM"],Xr,Xr],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Xr,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Xr,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Xr,"{1} 'at' {0}",Xr],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",XT],vd={};function jt(n){let e=eM(n),t=Av(e);if(t)return t;let r=e.split("-")[0];if(t=Av(r),t)return t;if(r==="en")return ZT;throw new ue(701,!1)}function Av(n){return n in vd||(vd[n]=Ln.ng&&Ln.ng.common&&Ln.ng.common.locales&&Ln.ng.common.locales[n]),vd[n]}var Ke=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Ke||{});function eM(n){return n.toLowerCase().replace(/_/g,"-")}var _c="en-US";var tM=_c;function nM(n){typeof n=="string"&&(tM=n.toLowerCase().replace(/_/g,"-"))}function U(n,e,t,r){let i=Ee(),o=wt(),s=Lt();return R_(o,i,i[ot],s,n,e,r),U}function rM(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let c=e[as],l=i[o+2];return c.length>l?c[l]:null}typeof s=="string"&&(o+=2)}return null}function R_(n,e,t,r,i,o,s){let c=bh(r),d=n.firstCreatePass&&v_(n),m=e[ln],g=y_(e),b=!0;if(r.type&3||s){let R=Yt(r,e),k=s?s(R):R,H=g.length,re=s?Ce=>s(xn(Ce[r.index])):r.index,Q=null;if(!s&&c&&(Q=rM(n,e,i,r.index)),Q!==null){let Ce=Q.__ngLastListenerFn__||Q;Ce.__ngNextListenerFn__=o,Q.__ngLastListenerFn__=o,b=!1}else{o=Nv(r,e,m,o,!1);let Ce=t.listen(k,i,o);g.push(o,Ce),d&&d.push(i,re,H,H+1)}}else o=Nv(r,e,m,o,!1);let C=r.outputs,N;if(b&&C!==null&&(N=C[i])){let R=N.length;if(R)for(let k=0;k<R;k+=2){let H=N[k],re=N[k+1],ke=e[H][re].subscribe(o),Ie=g.length;g.push(o,ke),d&&d.push(i,r.index,Ie,-(Ie+1))}}}function Pv(n,e,t,r){let i=Se(null);try{return wn(6,e,t),t(r)!==!1}catch(o){return __(n,o),!1}finally{wn(7,e,t),Se(i)}}function Nv(n,e,t,r,i){return function o(s){if(s===Function)return r;let c=n.componentOffset>-1?xr(n.index,e):e;Gh(c);let l=Pv(e,t,r,s),d=o.__ngNextListenerFn__;for(;d;)l=Pv(e,t,d,s)&&l,d=d.__ngNextListenerFn__;return i&&l===!1&&s.preventDefault(),l}}function O(n=1){return qx(n)}function k_(n,e,t){fT(n,e,t)}function F_(n){let e=Ee(),t=wt(),r=w0();Dh(r+1);let i=Yh(t,r);if(n.dirty&&Dx(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=gT(e,r);n.reset(o,u1),n.notifyOnChanges()}return!0}return!1}function V_(){return dT(Ee(),w0())}function iM(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Wn(n){let e=Lx();return wh(e,Qt+n)}function y(n,e=""){let t=Ee(),r=wt(),i=n+Qt,o=r.firstCreatePass?Nc(r,i,1,e,null):r.data[i],s=oM(r,t,o,e,n);t[i]=s,Mh()&&Bh(r,t,s,o),ys(o,!1)}var oM=(n,e,t,r,i)=>(Ah(!0),x1(e[ot],r));function G(n){return J("",n,""),G}function J(n,e,t){let r=Ee(),i=NT(r,n,e,t);return i!==hn&&Hh(r,Sr(),i),J}function Kn(n,e,t,r,i){let o=Ee(),s=OT(o,n,e,t,r,i);return s!==hn&&Hh(o,Sr(),s),Kn}function Xh(n,e,t,r,i,o,s){let c=Ee(),l=RT(c,n,e,t,r,i,o,s);return l!==hn&&Hh(c,Sr(),l),Xh}function X(n,e,t){A_(e)&&(e=e());let r=Ee(),i=Tc();if(zn(r,i,e)){let o=wt(),s=Th();d_(o,s,r,n,e,r[ot],t,!1)}return X}function te(n,e){let t=A_(n);return t&&n.set(e),t}function Z(n,e){let t=Ee(),r=wt(),i=Lt();return R_(r,t,t[ot],i,n,e),Z}function sM(n,e,t){let r=wt();if(r.firstCreatePass){let i=Dr(n);sh(t,r.data,r.blueprint,i,!0),sh(e,r.data,r.blueprint,i,!1)}}function sh(n,e,t,r,i){if(n=St(n),Array.isArray(n))for(let o=0;o<n.length;o++)sh(n[o],e,t,r,i);else{let o=wt(),s=Ee(),c=Lt(),l=Gi(n)?n:St(n.provide),d=r0(n),m=c.providerIndexes&1048575,g=c.directiveStart,b=c.providerIndexes>>20;if(Gi(n)||!n.multi){let C=new oi(d,i,K),N=bd(l,e,i?m:m+b,g);N===-1?(Od(dc(c,s),o,l),_d(o,n,e.length),e.push(l),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(C),s.push(C)):(t[N]=C,s[N]=C)}else{let C=bd(l,e,m+b,g),N=bd(l,e,m,m+b),R=C>=0&&t[C],k=N>=0&&t[N];if(i&&!k||!i&&!R){Od(dc(c,s),o,l);let H=lM(i?cM:aM,t.length,i,r,d);!i&&k&&(t[N].providerFactory=H),_d(o,n,e.length,0),e.push(l),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(H),s.push(H)}else{let H=L_(t[i?N:C],d,!i&&r);_d(o,n,C>-1?C:N,H)}!i&&r&&k&&t[N].componentProviders++}}}function _d(n,e,t,r){let i=Gi(e),o=cx(e);if(i||o){let l=(o?St(e.useClass):e).prototype.ngOnDestroy;if(l){let d=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let m=d.indexOf(t);m===-1?d.push(t,[r,l]):d[m+1].push(r,l)}else d.push(t,l)}}}function L_(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function bd(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function aM(n,e,t,r){return ah(this.multi,[])}function cM(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,c=si(t,t[de],this.providerFactory.index,r);o=c.slice(0,s),ah(i,o);for(let l=s;l<c.length;l++)o.push(c[l])}else o=[],ah(i,o);return o}function ah(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function lM(n,e,t,r,i){let o=new oi(n,t,K);return o.multi=[],o.index=e,o.componentProviders=0,L_(o,i,r&&!t),o}function fn(n,e=[]){return t=>{t.providersResolver=(r,i)=>sM(r,i?i(n):n,e)}}var uM=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=e0(!1,t.type),i=r.length>0?IT([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=me({token:n,providedIn:"environment",factory:()=>new n(oe(In))})}}return n})();function ze(n){Kh("NgStandalone"),n.getStandaloneInjector=e=>e.get(uM).getOrCreateStandaloneInjector(n)}function j_(n,e){let t=n[e];return t===hn?void 0:t}function dM(n,e,t,r,i,o){let s=e+t;return zn(n,s,i)?N_(n,s+1,o?r.call(o,i):r(i)):j_(n,s+1)}function hM(n,e,t,r,i,o,s){let c=e+t;return Jh(n,c,i,o)?N_(n,c+2,s?r.call(s,i,o):r(i,o)):j_(n,c+2)}function xe(n,e){let t=wt(),r,i=n+Qt;t.firstCreatePass?(r=fM(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=ti(r.type,!0)),s,c=Ot(K);try{let l=uc(!1),d=o();return uc(l),iM(t,Ee(),i,d),d}finally{Ot(c)}}function fM(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function bs(n,e,t){let r=n+Qt,i=Ee(),o=wh(i,r);return B_(i,r)?dM(i,_0(),e,o.transform,t,o):o.transform(t)}function Ne(n,e,t,r){let i=n+Qt,o=Ee(),s=wh(o,i);return B_(o,i)?hM(o,_0(),e,s.transform,t,r,s):s.transform(t,r)}function B_(n,e){return n[de].data[e].pure}function Qn(n,e){return Rc(n,e)}var U_=new pe("");function ws(n){return!!n&&typeof n.then=="function"}function $_(n){return!!n&&typeof n.subscribe=="function"}var pM=new pe(""),z_=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=Fe(pM,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(ws(o))t.push(o);else if($_(o)){let s=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),H_=new pe("");function mM(){Cy(()=>{throw new ue(600,!1)})}function gM(n){return n.isBoundToModule}function yM(n,e,t){try{let r=t();return ws(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var Fc=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Fe(L0),this.afterRenderEffectManager=Fe(x_),this.externalTestViews=new Set,this.beforeRender=new Cr,this.afterTick=new Cr,this.componentTypes=[],this.components=[],this.isStable=Fe(kc).hasPendingTasks.pipe(lt(t=>!t)),this._injector=Fe(In)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof mc;if(!this._injector.get(z_).done){let b=!i&&nx(t),C=!1;throw new ue(405,C)}let s;i?s=t:s=this._injector.get(Wh).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let c=gM(s)?void 0:this._injector.get(Qi),l=r||s.selector,d=s.create(vs.NULL,[],l,c),m=d.location.nativeElement,g=d.injector.get(U_,null);return g?.registerApplication(m),d.onDestroy(()=>{this.detachView(d.hostView),wd(this.components,d),g?.unregisterApplication(m)}),this._loadComponent(d),d}tick(){this._tick(!0)}_tick(t){if(this._runningTick)throw new ue(101,!1);let r=Se(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(t)}catch(i){this.internalErrorHandler(i)}finally{this.afterTick.next(),this._runningTick=!1,Se(r)}}detectChangesInAttachedViews(t){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===w_)throw new ue(103,!1);if(t){let o=r===0;this.beforeRender.next(o);for(let{_lView:s,notifyErrorHandler:c}of this._views)vM(s,o,c)}if(r++,i.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>ch(o))&&(i.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>ch(o))))break}}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;wd(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(H_,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>wd(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ue(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function wd(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function vM(n,e,t){!e&&!ch(n)||_M(n,t,e)}function ch(n){return Eh(n)}function _M(n,e,t){let r;t?(r=0,n[ie]|=1024):n[ie]&64?r=0:r=1,C_(n,e,r)}var bM=(()=>{class n{constructor(){this.zone=Fe(gt),this.applicationRef=Fe(Fc)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function wM(n){return[{provide:gt,useFactory:n},{provide:is,multi:!0,useFactory:()=>{let e=Fe(bM,{optional:!0});return()=>e.initialize()}},{provide:is,multi:!0,useFactory:()=>{let e=Fe(DM);return()=>{e.initialize()}}},{provide:L0,useFactory:CM}]}function CM(){let n=Fe(gt),e=Fe(Un);return t=>n.runOutsideAngular(()=>e.handleError(t))}function EM(n){let e=wM(()=>new gt(IM(n)));return Ic([[],e])}function IM(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var DM=(()=>{class n{constructor(){this.subscription=new Pt,this.initialized=!1,this.zone=Fe(gt),this.pendingTasks=Fe(kc)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{gt.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{gt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function xM(){return typeof $localize<"u"&&$localize.locale||_c}var Cs=new pe("",{providedIn:"root",factory:()=>Fe(Cs,_e.Optional|_e.SkipSelf)||xM()});var q_=new pe("");var ec=null;function SM(n=[],e){return vs.create({name:e,providers:[{provide:Dc,useValue:"platform"},{provide:q_,useValue:new Set([()=>ec=null])},...n]})}function TM(n=[]){if(ec)return ec;let e=SM(n);return ec=e,mM(),MM(e),e}function MM(n){n.get(Rh,null)?.forEach(t=>t())}var Vc=(()=>{class n{static{this.__NG_ELEMENT_ID__=AM}}return n})();function AM(n){return PM(Lt(),Ee(),(n&16)===16)}function PM(n,e,t){if(Sc(n)&&!t){let r=xr(n.index,e);return new ci(r,r)}else if(n.type&47){let r=e[Dn];return new ci(r,e)}return null}var lh=class{constructor(){}supports(e){return P_(e)}create(e){return new uh(e)}},NM=(n,e)=>e,uh=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||NM}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<Ov(r,i,o)?t:r,c=Ov(s,i,o),l=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let d=c-i,m=l-i;if(d!=m){for(let b=0;b<d;b++){let C=b<o.length?o[b]:o[b]=0,N=C+b;m<=N&&N<d&&(o[b]=C+1)}let g=s.previousIndex;o[g]=m-d}}c!==l&&e(s,c,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!P_(e))throw new ue(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let c=0;c<this.length;c++)o=e[c],s=this._trackByFn(c,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,c),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,c)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,DT(e,c=>{s=this._trackByFn(i,c),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,c,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,c,s,i)),Object.is(t.item,c)||this._addIdentityChange(t,c)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new dh(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new bc),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new bc),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},dh=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},hh=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},bc=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new hh,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Ov(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function Rv(){return new Zh([new lh])}var Zh=(()=>{class n{static{this.\u0275prov=me({token:n,providedIn:"root",factory:Rv})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||Rv()),deps:[[n,new kD,new Hv]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new ue(901,!1)}}return n})();function G_(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=TM(r),o=[EM(),...t||[]],c=new yc({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,l=c.get(gt);return l.run(()=>{c.resolveInjectorInitializers();let d=c.get(Un,null),m;l.runOutsideAngular(()=>{m=l.onError.subscribe({next:C=>{d.handleError(C)}})});let g=()=>c.destroy(),b=i.get(q_);return b.add(g),c.onDestroy(()=>{m.unsubscribe(),b.delete(g)}),yM(d,l,()=>{let C=c.get(z_);return C.runInitializers(),C.donePromise.then(()=>{let N=c.get(Cs,_c);nM(N||_c);let R=c.get(Fc);return e!==void 0&&R.bootstrap(e),R})})})}catch(e){return Promise.reject(e)}}function Lc(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var X_=null;function to(){return X_}function Z_(n){X_??=n}var Wc=class{};var Sn=new pe("");var eb=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(eb||{});var Mt=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Mt||{}),Re=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Re||{}),Bt=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Bt||{}),Ut={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function OM(n){return jt(n)[Ke.LocaleId]}function RM(n,e,t){let r=jt(n),i=[r[Ke.DayPeriodsFormat],r[Ke.DayPeriodsStandalone]],o=Xt(i,e);return Xt(o,t)}function kM(n,e,t){let r=jt(n),i=[r[Ke.DaysFormat],r[Ke.DaysStandalone]],o=Xt(i,e);return Xt(o,t)}function FM(n,e,t){let r=jt(n),i=[r[Ke.MonthsFormat],r[Ke.MonthsStandalone]],o=Xt(i,e);return Xt(o,t)}function VM(n,e){let r=jt(n)[Ke.Eras];return Xt(r,e)}function jc(n,e){let t=jt(n);return Xt(t[Ke.DateFormat],e)}function Bc(n,e){let t=jt(n);return Xt(t[Ke.TimeFormat],e)}function Uc(n,e){let r=jt(n)[Ke.DateTimeFormat];return Xt(r,e)}function Jn(n,e){let t=jt(n),r=t[Ke.NumberSymbols][e];if(typeof r>"u"){if(e===Ut.CurrencyDecimal)return t[Ke.NumberSymbols][Ut.Decimal];if(e===Ut.CurrencyGroup)return t[Ke.NumberSymbols][Ut.Group]}return r}function LM(n,e){return jt(n)[Ke.NumberFormats][e]}function tb(n){if(!n[Ke.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Ke.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function jM(n){let e=jt(n);return tb(e),(e[Ke.ExtraData][2]||[]).map(r=>typeof r=="string"?ef(r):[ef(r[0]),ef(r[1])])}function BM(n,e,t){let r=jt(n);tb(r);let i=[r[Ke.ExtraData][0],r[Ke.ExtraData][1]],o=Xt(i,e)||[];return Xt(o,t)||[]}function Xt(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function ef(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var UM=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,$c={},$M=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,Xn=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(Xn||{}),Me=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(Me||{}),Te=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(Te||{});function zM(n,e,t,r){let i=XM(n);e=Yn(t,e)||e;let s=[],c;for(;e;)if(c=$M.exec(e),c){s=s.concat(c.slice(1));let m=s.pop();if(!m)break;e=m}else{s.push(e);break}let l=i.getTimezoneOffset();r&&(l=rb(r,l),i=JM(i,r,!0));let d="";return s.forEach(m=>{let g=QM(m);d+=g?g(i,t,l):m==="''"?"'":m.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),d}function Kc(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Yn(n,e){let t=OM(n);if($c[t]??={},$c[t][e])return $c[t][e];let r="";switch(e){case"shortDate":r=jc(n,Bt.Short);break;case"mediumDate":r=jc(n,Bt.Medium);break;case"longDate":r=jc(n,Bt.Long);break;case"fullDate":r=jc(n,Bt.Full);break;case"shortTime":r=Bc(n,Bt.Short);break;case"mediumTime":r=Bc(n,Bt.Medium);break;case"longTime":r=Bc(n,Bt.Long);break;case"fullTime":r=Bc(n,Bt.Full);break;case"short":let i=Yn(n,"shortTime"),o=Yn(n,"shortDate");r=zc(Uc(n,Bt.Short),[i,o]);break;case"medium":let s=Yn(n,"mediumTime"),c=Yn(n,"mediumDate");r=zc(Uc(n,Bt.Medium),[s,c]);break;case"long":let l=Yn(n,"longTime"),d=Yn(n,"longDate");r=zc(Uc(n,Bt.Long),[l,d]);break;case"full":let m=Yn(n,"fullTime"),g=Yn(n,"fullDate");r=zc(Uc(n,Bt.Full),[m,g]);break}return r&&($c[t][e]=r),r}function zc(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function pn(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function HM(n,e){return pn(n,3).substring(0,e)}function Je(n,e,t=0,r=!1,i=!1){return function(o,s){let c=qM(n,o);if((t>0||c>-t)&&(c+=t),n===Me.Hours)c===0&&t===-12&&(c=12);else if(n===Me.FractionalSeconds)return HM(c,e);let l=Jn(s,Ut.MinusSign);return pn(c,e,l,r,i)}}function qM(n,e){switch(n){case Me.FullYear:return e.getFullYear();case Me.Month:return e.getMonth();case Me.Date:return e.getDate();case Me.Hours:return e.getHours();case Me.Minutes:return e.getMinutes();case Me.Seconds:return e.getSeconds();case Me.FractionalSeconds:return e.getMilliseconds();case Me.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function Ve(n,e,t=Mt.Format,r=!1){return function(i,o){return GM(i,o,n,e,t,r)}}function GM(n,e,t,r,i,o){switch(t){case Te.Months:return FM(e,i,r)[n.getMonth()];case Te.Days:return kM(e,i,r)[n.getDay()];case Te.DayPeriods:let s=n.getHours(),c=n.getMinutes();if(o){let d=jM(e),m=BM(e,i,r),g=d.findIndex(b=>{if(Array.isArray(b)){let[C,N]=b,R=s>=C.hours&&c>=C.minutes,k=s<N.hours||s===N.hours&&c<N.minutes;if(C.hours<N.hours){if(R&&k)return!0}else if(R||k)return!0}else if(b.hours===s&&b.minutes===c)return!0;return!1});if(g!==-1)return m[g]}return RM(e,i,r)[s<12?0:1];case Te.Eras:return VM(e,r)[n.getFullYear()<=0?0:1];default:let l=t;throw new Error(`unexpected translation type ${l}`)}}function Hc(n){return function(e,t,r){let i=-1*r,o=Jn(t,Ut.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case Xn.Short:return(i>=0?"+":"")+pn(s,2,o)+pn(Math.abs(i%60),2,o);case Xn.ShortGMT:return"GMT"+(i>=0?"+":"")+pn(s,1,o);case Xn.Long:return"GMT"+(i>=0?"+":"")+pn(s,2,o)+":"+pn(Math.abs(i%60),2,o);case Xn.Extended:return r===0?"Z":(i>=0?"+":"")+pn(s,2,o)+":"+pn(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var WM=0,Gc=4;function KM(n){let e=Kc(n,WM,1).getDay();return Kc(n,0,1+(e<=Gc?Gc:Gc+7)-e)}function nb(n){let e=n.getDay(),t=e===0?-3:Gc-e;return Kc(n.getFullYear(),n.getMonth(),n.getDate()+t)}function tf(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=nb(t),s=KM(o.getFullYear()),c=o.getTime()-s.getTime();i=1+Math.round(c/6048e5)}return pn(i,n,Jn(r,Ut.MinusSign))}}function qc(n,e=!1){return function(t,r){let o=nb(t).getFullYear();return pn(o,n,Jn(r,Ut.MinusSign),e)}}var nf={};function QM(n){if(nf[n])return nf[n];let e;switch(n){case"G":case"GG":case"GGG":e=Ve(Te.Eras,Re.Abbreviated);break;case"GGGG":e=Ve(Te.Eras,Re.Wide);break;case"GGGGG":e=Ve(Te.Eras,Re.Narrow);break;case"y":e=Je(Me.FullYear,1,0,!1,!0);break;case"yy":e=Je(Me.FullYear,2,0,!0,!0);break;case"yyy":e=Je(Me.FullYear,3,0,!1,!0);break;case"yyyy":e=Je(Me.FullYear,4,0,!1,!0);break;case"Y":e=qc(1);break;case"YY":e=qc(2,!0);break;case"YYY":e=qc(3);break;case"YYYY":e=qc(4);break;case"M":case"L":e=Je(Me.Month,1,1);break;case"MM":case"LL":e=Je(Me.Month,2,1);break;case"MMM":e=Ve(Te.Months,Re.Abbreviated);break;case"MMMM":e=Ve(Te.Months,Re.Wide);break;case"MMMMM":e=Ve(Te.Months,Re.Narrow);break;case"LLL":e=Ve(Te.Months,Re.Abbreviated,Mt.Standalone);break;case"LLLL":e=Ve(Te.Months,Re.Wide,Mt.Standalone);break;case"LLLLL":e=Ve(Te.Months,Re.Narrow,Mt.Standalone);break;case"w":e=tf(1);break;case"ww":e=tf(2);break;case"W":e=tf(1,!0);break;case"d":e=Je(Me.Date,1);break;case"dd":e=Je(Me.Date,2);break;case"c":case"cc":e=Je(Me.Day,1);break;case"ccc":e=Ve(Te.Days,Re.Abbreviated,Mt.Standalone);break;case"cccc":e=Ve(Te.Days,Re.Wide,Mt.Standalone);break;case"ccccc":e=Ve(Te.Days,Re.Narrow,Mt.Standalone);break;case"cccccc":e=Ve(Te.Days,Re.Short,Mt.Standalone);break;case"E":case"EE":case"EEE":e=Ve(Te.Days,Re.Abbreviated);break;case"EEEE":e=Ve(Te.Days,Re.Wide);break;case"EEEEE":e=Ve(Te.Days,Re.Narrow);break;case"EEEEEE":e=Ve(Te.Days,Re.Short);break;case"a":case"aa":case"aaa":e=Ve(Te.DayPeriods,Re.Abbreviated);break;case"aaaa":e=Ve(Te.DayPeriods,Re.Wide);break;case"aaaaa":e=Ve(Te.DayPeriods,Re.Narrow);break;case"b":case"bb":case"bbb":e=Ve(Te.DayPeriods,Re.Abbreviated,Mt.Standalone,!0);break;case"bbbb":e=Ve(Te.DayPeriods,Re.Wide,Mt.Standalone,!0);break;case"bbbbb":e=Ve(Te.DayPeriods,Re.Narrow,Mt.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ve(Te.DayPeriods,Re.Abbreviated,Mt.Format,!0);break;case"BBBB":e=Ve(Te.DayPeriods,Re.Wide,Mt.Format,!0);break;case"BBBBB":e=Ve(Te.DayPeriods,Re.Narrow,Mt.Format,!0);break;case"h":e=Je(Me.Hours,1,-12);break;case"hh":e=Je(Me.Hours,2,-12);break;case"H":e=Je(Me.Hours,1);break;case"HH":e=Je(Me.Hours,2);break;case"m":e=Je(Me.Minutes,1);break;case"mm":e=Je(Me.Minutes,2);break;case"s":e=Je(Me.Seconds,1);break;case"ss":e=Je(Me.Seconds,2);break;case"S":e=Je(Me.FractionalSeconds,1);break;case"SS":e=Je(Me.FractionalSeconds,2);break;case"SSS":e=Je(Me.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Hc(Xn.Short);break;case"ZZZZZ":e=Hc(Xn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Hc(Xn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Hc(Xn.Long);break;default:return null}return nf[n]=e,e}function rb(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function YM(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function JM(n,e,t){let r=t?-1:1,i=n.getTimezoneOffset(),o=rb(e,i);return YM(n,r*(o-i))}function XM(n){if(W_(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(c=>+c);return Kc(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(UM))return ZM(r)}let e=new Date(n);if(!W_(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function ZM(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,c=Number(n[5]||0)-r,l=Number(n[6]||0),d=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,c,l,d),e}function W_(n){return n instanceof Date&&!isNaN(n.valueOf())}var eA=/^(\d+)?\.((\d+)(-(\d+))?)?$/,K_=22,Qc=".",Es="0",tA=";",nA=",",rf="#";function rA(n,e,t,r,i,o,s=!1){let c="",l=!1;if(!isFinite(n))c=Jn(t,Ut.Infinity);else{let d=aA(n);s&&(d=sA(d));let m=e.minInt,g=e.minFrac,b=e.maxFrac;if(o){let re=o.match(eA);if(re===null)throw new Error(`${o} is not a valid digit info`);let Q=re[1],Ce=re[3],ke=re[5];Q!=null&&(m=of(Q)),Ce!=null&&(g=of(Ce)),ke!=null?b=of(ke):Ce!=null&&g>b&&(b=g)}cA(d,g,b);let C=d.digits,N=d.integerLen,R=d.exponent,k=[];for(l=C.every(re=>!re);N<m;N++)C.unshift(0);for(;N<0;N++)C.unshift(0);N>0?k=C.splice(N,C.length):(k=C,C=[0]);let H=[];for(C.length>=e.lgSize&&H.unshift(C.splice(-e.lgSize,C.length).join(""));C.length>e.gSize;)H.unshift(C.splice(-e.gSize,C.length).join(""));C.length&&H.unshift(C.join("")),c=H.join(Jn(t,r)),k.length&&(c+=Jn(t,i)+k.join("")),R&&(c+=Jn(t,Ut.Exponential)+"+"+R)}return n<0&&!l?c=e.negPre+c+e.negSuf:c=e.posPre+c+e.posSuf,c}function iA(n,e,t){let r=LM(e,eb.Decimal),i=oA(r,Jn(e,Ut.MinusSign));return rA(n,i,e,Ut.Group,Ut.Decimal,t)}function oA(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(tA),i=r[0],o=r[1],s=i.indexOf(Qc)!==-1?i.split(Qc):[i.substring(0,i.lastIndexOf(Es)+1),i.substring(i.lastIndexOf(Es)+1)],c=s[0],l=s[1]||"";t.posPre=c.substring(0,c.indexOf(rf));for(let m=0;m<l.length;m++){let g=l.charAt(m);g===Es?t.minFrac=t.maxFrac=m+1:g===rf?t.maxFrac=m+1:t.posSuf+=g}let d=c.split(nA);if(t.gSize=d[1]?d[1].length:0,t.lgSize=d[2]||d[1]?(d[2]||d[1]).length:0,o){let m=i.length-t.posPre.length-t.posSuf.length,g=o.indexOf(rf);t.negPre=o.substring(0,g).replace(/'/g,""),t.negSuf=o.slice(g+m).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function sA(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function aA(n){let e=Math.abs(n)+"",t=0,r,i,o,s,c;for((i=e.indexOf(Qc))>-1&&(e=e.replace(Qc,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===Es;o++);if(o===(c=e.length))r=[0],i=1;else{for(c--;e.charAt(c)===Es;)c--;for(i-=o,r=[],s=0;o<=c;o++,s++)r[s]=Number(e.charAt(o))}return i>K_&&(r=r.splice(0,K_-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function cA(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen,o=Math.min(Math.max(e,i),t),s=o+n.integerLen,c=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let g=s;g<r.length;g++)r[g]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let g=1;g<s;g++)r[g]=0}if(c>=5)if(s-1<0){for(let g=0;g>s;g--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let l=o!==0,d=e+n.integerLen,m=r.reduceRight(function(g,b,C,N){return b=b+g,N[C]=b<10?b:b-10,l&&(N[C]===0&&C>=d?N.pop():l=!1),b>=10?1:0},0);m&&(r.unshift(m),n.integerLen++)}function of(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function Yc(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var sf=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ut=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new sf(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let c=r.get(o);r.move(c,s),Q_(c,i)}});for(let i=0,o=r.length;i<o;i++){let c=r.get(i).context;c.index=i,c.count=o,c.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);Q_(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(K(Zi),K(li),K(Zh))}}static{this.\u0275dir=We({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function Q_(n,e){n.context.$implicit=e.item}var Xe=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new af,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Y_("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Y_("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(K(Zi),K(li))}}static{this.\u0275dir=We({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),af=class{constructor(){this.$implicit=null,this.ngIf=null}};function Y_(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${kt(e)}'.`)}function cf(n,e){return new ue(2100,!1)}var lA=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,Jc=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw cf(n,t);return t.replace(lA,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=Ec({name:"titlecase",type:n,pure:!0,standalone:!0})}}return n})();var uA="mediumDate",dA=new pe(""),hA=new pe(""),Tn=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??uA,c=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return zM(t,s,o||this.locale,c)}catch(s){throw cf(n,s.message)}}static{this.\u0275fac=function(r){return new(r||n)(K(Cs,16),K(dA,24),K(hA,24))}}static{this.\u0275pipe=Ec({name:"date",type:n,pure:!0,standalone:!0})}}return n})();var ib=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!fA(t))return null;i||=this._locale;try{let o=pA(t);return iA(o,i,r)}catch(o){throw cf(n,o.message)}}static{this.\u0275fac=function(r){return new(r||n)(K(Cs,16))}}static{this.\u0275pipe=Ec({name:"number",type:n,pure:!0,standalone:!0})}}return n})();function fA(n){return!(n==null||n===""||n!==n)}function pA(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var Ue=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=hi({type:n})}static{this.\u0275inj=di({})}}return n})(),ob="browser",mA="server";function Xc(n){return n===mA}var eo=class{};var Ds=class{},el=class{},pi=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(c=>o.indexOf(c)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var uf=class{encodeKey(e){return sb(e)}encodeValue(e){return sb(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function vA(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,c]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],l=t.get(s)||[];l.push(c),t.set(s,l)}),t}var _A=/%(\d[a-f0-9])/gi,bA={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function sb(n){return encodeURIComponent(n).replace(_A,(e,t)=>bA[t]??e)}function Zc(n){return`${n}`}var Pr=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new uf,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=vA(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(Zc):[Zc(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Zc(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Zc(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var df=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function wA(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function ab(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function cb(n){return typeof Blob<"u"&&n instanceof Blob}function lb(n){return typeof FormData<"u"&&n instanceof FormData}function CA(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Is=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(wA(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new pi,this.context??=new df,!this.params)this.params=new Pr,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let c=t.indexOf("?"),l=c===-1?"?":c<t.length-1?"&":"";this.urlWithParams=t+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||ab(this.body)||cb(this.body)||lb(this.body)||CA(this.body)?this.body:this.body instanceof Pr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||lb(this.body)?null:cb(this.body)?this.body.type||null:ab(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Pr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,c=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,d=e.headers||this.headers,m=e.params||this.params,g=e.context??this.context;return e.setHeaders!==void 0&&(d=Object.keys(e.setHeaders).reduce((b,C)=>b.set(C,e.setHeaders[C]),d)),e.setParams&&(m=Object.keys(e.setParams).reduce((b,C)=>b.set(C,e.setParams[C]),m)),new n(t,r,s,{params:m,headers:d,context:g,reportProgress:l,responseType:i,withCredentials:c,transferCache:o})}},no=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(no||{}),xs=class{constructor(e,t=rl.Ok,r="OK"){this.headers=e.headers||new pi,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},hf=class n extends xs{constructor(e={}){super(e),this.type=no.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},tl=class n extends xs{constructor(e={}){super(e),this.type=no.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},nl=class extends xs{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},rl=function(n){return n[n.Continue=100]="Continue",n[n.SwitchingProtocols=101]="SwitchingProtocols",n[n.Processing=102]="Processing",n[n.EarlyHints=103]="EarlyHints",n[n.Ok=200]="Ok",n[n.Created=201]="Created",n[n.Accepted=202]="Accepted",n[n.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",n[n.NoContent=204]="NoContent",n[n.ResetContent=205]="ResetContent",n[n.PartialContent=206]="PartialContent",n[n.MultiStatus=207]="MultiStatus",n[n.AlreadyReported=208]="AlreadyReported",n[n.ImUsed=226]="ImUsed",n[n.MultipleChoices=300]="MultipleChoices",n[n.MovedPermanently=301]="MovedPermanently",n[n.Found=302]="Found",n[n.SeeOther=303]="SeeOther",n[n.NotModified=304]="NotModified",n[n.UseProxy=305]="UseProxy",n[n.Unused=306]="Unused",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n[n.BadRequest=400]="BadRequest",n[n.Unauthorized=401]="Unauthorized",n[n.PaymentRequired=402]="PaymentRequired",n[n.Forbidden=403]="Forbidden",n[n.NotFound=404]="NotFound",n[n.MethodNotAllowed=405]="MethodNotAllowed",n[n.NotAcceptable=406]="NotAcceptable",n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",n[n.RequestTimeout=408]="RequestTimeout",n[n.Conflict=409]="Conflict",n[n.Gone=410]="Gone",n[n.LengthRequired=411]="LengthRequired",n[n.PreconditionFailed=412]="PreconditionFailed",n[n.PayloadTooLarge=413]="PayloadTooLarge",n[n.UriTooLong=414]="UriTooLong",n[n.UnsupportedMediaType=415]="UnsupportedMediaType",n[n.RangeNotSatisfiable=416]="RangeNotSatisfiable",n[n.ExpectationFailed=417]="ExpectationFailed",n[n.ImATeapot=418]="ImATeapot",n[n.MisdirectedRequest=421]="MisdirectedRequest",n[n.UnprocessableEntity=422]="UnprocessableEntity",n[n.Locked=423]="Locked",n[n.FailedDependency=424]="FailedDependency",n[n.TooEarly=425]="TooEarly",n[n.UpgradeRequired=426]="UpgradeRequired",n[n.PreconditionRequired=428]="PreconditionRequired",n[n.TooManyRequests=429]="TooManyRequests",n[n.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",n[n.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",n[n.InternalServerError=500]="InternalServerError",n[n.NotImplemented=501]="NotImplemented",n[n.BadGateway=502]="BadGateway",n[n.ServiceUnavailable=503]="ServiceUnavailable",n[n.GatewayTimeout=504]="GatewayTimeout",n[n.HttpVersionNotSupported=505]="HttpVersionNotSupported",n[n.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",n[n.InsufficientStorage=507]="InsufficientStorage",n[n.LoopDetected=508]="LoopDetected",n[n.NotExtended=510]="NotExtended",n[n.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",n}(rl||{});function lf(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Zn=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof Is)o=t;else{let l;i.headers instanceof pi?l=i.headers:l=new pi(i.headers);let d;i.params&&(i.params instanceof Pr?d=i.params:d=new Pr({fromObject:i.params})),o=new Is(t,r,i.body!==void 0?i.body:null,{headers:l,context:i.context,params:d,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=Ha(o).pipe(id(l=>this.handler.handle(l)));if(t instanceof Is||i.observe==="events")return s;let c=s.pipe(rd(l=>l instanceof tl));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(lt(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(lt(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(lt(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(lt(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new Pr().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,lf(i,r))}post(t,r,i={}){return this.request("POST",t,lf(i,r))}put(t,r,i={}){return this.request("PUT",t,lf(i,r))}static{this.\u0275fac=function(r){return new(r||n)(oe(Ds))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})();function EA(n,e){return e(n)}function IA(n,e,t){return(r,i)=>i0(t,()=>e(r,o=>n(o,i)))}var hb=new pe(""),DA=new pe(""),xA=new pe("");var ub=(()=>{class n extends Ds{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=Fe(kc);let i=Fe(xA,{optional:!0});this.backend=i??t}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(hb),...this.injector.get(DA,[])]));this.chain=i.reduceRight((o,s)=>IA(o,s,this.injector),EA)}let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(od(()=>this.pendingTasks.remove(r)))}static{this.\u0275fac=function(r){return new(r||n)(oe(el),oe(In))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})();var SA=/^\)\]\}',?\n/;function TA(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var db=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new ue(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?bn(r.\u0275loadImpl()):Ha(null)).pipe(Li(()=>new je(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((R,k)=>s.setRequestHeader(R,k.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let R=t.detectContentTypeHeader();R!==null&&s.setRequestHeader("Content-Type",R)}if(t.responseType){let R=t.responseType.toLowerCase();s.responseType=R!=="json"?R:"text"}let c=t.serializeBody(),l=null,d=()=>{if(l!==null)return l;let R=s.statusText||"OK",k=new pi(s.getAllResponseHeaders()),H=TA(s)||t.url;return l=new hf({headers:k,status:s.status,statusText:R,url:H}),l},m=()=>{let{headers:R,status:k,statusText:H,url:re}=d(),Q=null;k!==rl.NoContent&&(Q=typeof s.response>"u"?s.responseText:s.response),k===0&&(k=Q?rl.Ok:0);let Ce=k>=200&&k<300;if(t.responseType==="json"&&typeof Q=="string"){let ke=Q;Q=Q.replace(SA,"");try{Q=Q!==""?JSON.parse(Q):null}catch(Ie){Q=ke,Ce&&(Ce=!1,Q={error:Ie,text:Q})}}Ce?(o.next(new tl({body:Q,headers:R,status:k,statusText:H,url:re||void 0})),o.complete()):o.error(new nl({error:Q,headers:R,status:k,statusText:H,url:re||void 0}))},g=R=>{let{url:k}=d(),H=new nl({error:R,status:s.status||0,statusText:s.statusText||"Unknown Error",url:k||void 0});o.error(H)},b=!1,C=R=>{b||(o.next(d()),b=!0);let k={type:no.DownloadProgress,loaded:R.loaded};R.lengthComputable&&(k.total=R.total),t.responseType==="text"&&s.responseText&&(k.partialText=s.responseText),o.next(k)},N=R=>{let k={type:no.UploadProgress,loaded:R.loaded};R.lengthComputable&&(k.total=R.total),o.next(k)};return s.addEventListener("load",m),s.addEventListener("error",g),s.addEventListener("timeout",g),s.addEventListener("abort",g),t.reportProgress&&(s.addEventListener("progress",C),c!==null&&s.upload&&s.upload.addEventListener("progress",N)),s.send(c),o.next({type:no.Sent}),()=>{s.removeEventListener("error",g),s.removeEventListener("abort",g),s.removeEventListener("load",m),s.removeEventListener("timeout",g),t.reportProgress&&(s.removeEventListener("progress",C),c!==null&&s.upload&&s.upload.removeEventListener("progress",N)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(oe(eo))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})(),fb=new pe(""),MA="XSRF-TOKEN",AA=new pe("",{providedIn:"root",factory:()=>MA}),PA="X-XSRF-TOKEN",NA=new pe("",{providedIn:"root",factory:()=>PA}),il=class{},OA=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Yc(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(oe(Sn),oe(Mr),oe(AA))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})();function RA(n,e){let t=n.url.toLowerCase();if(!Fe(fb)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=Fe(il).getToken(),i=Fe(NA);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function pb(...n){let e=[Zn,db,ub,{provide:Ds,useExisting:ub},{provide:el,useExisting:db},{provide:hb,useValue:RA,multi:!0},{provide:fb,useValue:!0},{provide:il,useClass:OA}];for(let t of n)e.push(...t.\u0275providers);return Ic(e)}var mf=class extends Wc{constructor(){super(...arguments),this.supportsDOMEvents=!0}},gf=class n extends mf{static makeCurrent(){Z_(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=FA();return t==null?null:VA(t)}resetBaseElement(){Ss=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Yc(document.cookie,e)}},Ss=null;function FA(){return Ss=Ss||document.querySelector("base"),Ss?Ss.getAttribute("href"):null}function VA(n){return new URL(n,document.baseURI).pathname}var LA=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})(),yf=new pe(""),vb=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new ue(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(oe(yf),oe(gt))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})(),sl=class{constructor(e){this._doc=e}},ff="ng-app-id",_b=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Xc(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${ff}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(ff),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(ff,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(oe(Sn),oe(Oh),oe(kh,8),oe(Mr))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})(),pf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},_f=/%COMP%/g,bb="%COMP%",jA=`_nghost-${bb}`,BA=`_ngcontent-${bb}`,UA=!0,$A=new pe("",{providedIn:"root",factory:()=>UA});function zA(n){return BA.replace(_f,n)}function HA(n){return jA.replace(_f,n)}function wb(n,e){return e.map(t=>t.replace(_f,n))}var mb=(()=>{class n{constructor(t,r,i,o,s,c,l,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=c,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=Xc(c),this.defaultRenderer=new Ts(t,s,l,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===En.ShadowDom&&(r=le(Y({},r),{encapsulation:En.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof al?i.applyToHost(t):i instanceof Ms&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,c=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,m=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case En.Emulated:o=new al(l,d,r,this.appId,m,s,c,g);break;case En.ShadowDom:return new vf(l,d,t,r,s,c,this.nonce,g);default:o=new Ms(l,d,r,m,s,c,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(oe(vb),oe(_b),oe(Oh),oe($A),oe(Sn),oe(Mr),oe(gt),oe(kh))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})(),Ts=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(pf[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(gb(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(gb(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ue(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=pf[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=pf[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&($n.DashCase|$n.Important)?e.style.setProperty(t,r,i&$n.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&$n.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=to().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function gb(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var vf=class extends Ts{constructor(e,t,r,i,o,s,c,l){super(e,o,s,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=wb(i.id,i.styles);for(let m of d){let g=document.createElement("style");c&&g.setAttribute("nonce",c),g.textContent=m,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ms=class extends Ts{constructor(e,t,r,i,o,s,c,l){super(e,o,s,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=l?wb(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},al=class extends Ms{constructor(e,t,r,i,o,s,c,l){let d=i+"-"+r.id;super(e,t,r,o,s,c,l,d),this.contentAttr=zA(d),this.hostAttr=HA(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},qA=(()=>{class n extends sl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(oe(Sn))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})(),yb=["alt","control","meta","shift"],GA={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},WA={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},KA=(()=>{class n extends sl{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>to().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),s="code."),yb.forEach(d=>{let m=r.indexOf(d);m>-1&&(r.splice(m,1),s+=d+".")}),s+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(t,r){let i=GA[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),yb.forEach(s=>{if(s!==i){let c=WA[s];c(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(oe(Sn))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})();function Cb(n,e){return G_(Y({rootComponent:n},QA(e)))}function QA(n){return{appProviders:[...eP,...n?.providers??[]],platformProviders:ZA}}function YA(){gf.makeCurrent()}function JA(){return new Un}function XA(){return q0(document),document}var ZA=[{provide:Mr,useValue:ob},{provide:Rh,useValue:YA,multi:!0},{provide:Sn,useFactory:XA,deps:[]}];var eP=[{provide:Dc,useValue:"root"},{provide:Un,useFactory:JA,deps:[]},{provide:yf,useClass:qA,multi:!0,deps:[Sn,gt,Mr]},{provide:yf,useClass:KA,multi:!0,deps:[Sn]},mb,_b,vb,{provide:ds,useExisting:mb},{provide:eo,useClass:LA,deps:[]},[]];var Eb={providers:[pb()]};var Ob=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(K(Ar),K(Jt))}}static{this.\u0275dir=We({type:n})}}return n})(),Rs=(()=>{class n extends Ob{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Tr(n)))(i||n)}})()}static{this.\u0275dir=We({type:n,features:[Tt]})}}return n})(),so=new pe("");var tP={provide:so,useExisting:Vt(()=>dt),multi:!0};function nP(){let n=to()?to().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var rP=new pe(""),dt=(()=>{class n extends Ob{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!nP())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(K(Ar),K(Jt),K(rP,8))}}static{this.\u0275dir=We({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&U("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[fn([tP]),Tt]})}}return n})();function Os(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var ks=new pe(""),Rb=new pe("");function iP(n){return e=>{if(Os(e.value)||Os(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function oP(n){return e=>{if(Os(e.value)||Os(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function sP(n){return Os(n.value)?{required:!0}:null}function Ib(n){return null}function kb(n){return n!=null}function Fb(n){return ws(n)?bn(n):n}function Vb(n){let e={};return n.forEach(t=>{e=t!=null?Y(Y({},e),t):e}),Object.keys(e).length===0?null:e}function Lb(n,e){return e.map(t=>t(n))}function aP(n){return!n.validate}function jb(n){return n.map(e=>aP(e)?e:t=>e.validate(t))}function cP(n){if(!n)return null;let e=n.filter(kb);return e.length==0?null:function(t){return Vb(Lb(t,e))}}function wf(n){return n!=null?cP(jb(n)):null}function lP(n){if(!n)return null;let e=n.filter(kb);return e.length==0?null:function(t){let r=Lb(t,e).map(Fb);return nd(r).pipe(lt(Vb))}}function Cf(n){return n!=null?lP(jb(n)):null}function Db(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function uP(n){return n._rawValidators}function dP(n){return n._rawAsyncValidators}function bf(n){return n?Array.isArray(n)?n:[n]:[]}function ll(n,e){return Array.isArray(n)?n.includes(e):n===e}function xb(n,e){let t=bf(e);return bf(n).forEach(i=>{ll(t,i)||t.push(i)}),t}function Sb(n,e){return bf(e).filter(t=>!ll(n,t))}var ul=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=wf(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Cf(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},io=class extends ul{get formDirective(){return null}get path(){return null}},oo=class extends ul{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},dl=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},hP={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Cj=le(Y({},hP),{"[class.ng-submitted]":"isSubmitted"}),ht=(()=>{class n extends dl{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(K(oo,2))}}static{this.\u0275dir=We({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&De("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Tt]})}}return n})(),Zt=(()=>{class n extends dl{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(K(io,10))}}static{this.\u0275dir=We({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&De("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Tt]})}}return n})();var As="VALID",cl="INVALID",ro="PENDING",Ps="DISABLED";function Bb(n){return(pl(n)?n.validators:n)||null}function fP(n){return Array.isArray(n)?wf(n):n||null}function Ub(n,e){return(pl(e)?e.asyncValidators:n)||null}function pP(n){return Array.isArray(n)?Cf(n):n||null}function pl(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function mP(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new ue(1e3,"");if(!r[t])throw new ue(1001,"")}function gP(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new ue(1002,"")})}var hl=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===As}get invalid(){return this.status===cl}get pending(){return this.status==ro}get disabled(){return this.status===Ps}get enabled(){return this.status!==Ps}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(xb(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(xb(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Sb(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Sb(e,this._rawAsyncValidators))}hasValidator(e){return ll(this._rawValidators,e)}hasAsyncValidator(e){return ll(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ro,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ps,this.errors=null,this._forEachChild(r=>{r.disable(le(Y({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(le(Y({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=As,this._forEachChild(r=>{r.enable(le(Y({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(le(Y({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===As||this.status===ro)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ps:As}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ro,this._hasOwnPendingAsyncValidator=!0;let t=Fb(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new an,this.statusChanges=new an}_calculateStatus(){return this._allControlsDisabled()?Ps:this.errors?cl:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ro)?ro:this._anyControlsHaveStatus(cl)?cl:As}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){pl(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=fP(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=pP(this._rawAsyncValidators)}},fl=class extends hl{constructor(e,t,r){super(Bb(t),Ub(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){gP(this,!0,e),Object.keys(e).forEach(r=>{mP(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var ml=new pe("CallSetDisabledState",{providedIn:"root",factory:()=>gl}),gl="always";function yP(n,e){return[...e.path,n]}function $b(n,e,t=gl){zb(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),_P(n,e),wP(n,e),bP(n,e),vP(n,e)}function Tb(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function vP(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function zb(n,e){let t=uP(n);e.validator!==null?n.setValidators(Db(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=dP(n);e.asyncValidator!==null?n.setAsyncValidators(Db(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Tb(e._rawValidators,i),Tb(e._rawAsyncValidators,i)}function _P(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Hb(n,e)})}function bP(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Hb(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function Hb(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function wP(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function CP(n,e){n==null,zb(n,e)}function EP(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function IP(n){return Object.getPrototypeOf(n.constructor)===Rs}function DP(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function xP(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===dt?t=o:IP(o)?r=o:i=o}),i||r||t||null}var SP={provide:io,useExisting:Vt(()=>zt)},Ns=Promise.resolve(),zt=(()=>{class n extends io{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new an,this.form=new fl({},wf(t),Cf(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Ns.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),$b(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Ns.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Ns.then(()=>{let r=this._findContainer(t.path),i=new fl({});CP(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Ns.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Ns.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,DP(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(K(ks,10),K(Rb,10),K(ml,8))}}static{this.\u0275dir=We({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&U("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[Kt.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[fn([SP]),Tt]})}}return n})();function Mb(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Ab(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var TP=class extends hl{constructor(e=null,t,r){super(Bb(t),Ub(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),pl(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Ab(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Mb(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Mb(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Ab(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var MP={provide:oo,useExisting:Vt(()=>st)},Pb=Promise.resolve(),st=(()=>{class n extends oo{constructor(t,r,i,o,s,c){super(),this._changeDetectorRef=s,this.callSetDisabledState=c,this.control=new TP,this._registered=!1,this.name="",this.update=new an,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=xP(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),EP(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){$b(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Pb.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Lc(r);Pb.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?yP(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(K(io,9),K(ks,10),K(Rb,10),K(so,10),K(Vc,8),K(ml,8))}}static{this.\u0275dir=We({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Kt.None,"disabled","isDisabled"],model:[Kt.None,"ngModel","model"],options:[Kt.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[fn([MP]),Tt,gs]})}}return n})(),en=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=We({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),AP={provide:so,useExisting:Vt(()=>er),multi:!0},er=(()=>{class n extends Rs{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Tr(n)))(i||n)}})()}static{this.\u0275dir=We({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&U("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[fn([AP]),Tt]})}}return n})(),PP={provide:so,useExisting:Vt(()=>Ef),multi:!0};var NP=(()=>{class n{constructor(){this._accessors=[]}add(t,r){this._accessors.push([t,r])}remove(t){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===t){this._accessors.splice(r,1);return}}select(t){this._accessors.forEach(r=>{this._isSameGroup(r,t)&&r[1]!==t&&r[1].fireUncheck(t.value)})}_isSameGroup(t,r){return t[0].control?t[0]._parent===r._control._parent&&t[1].name===r.name:!1}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ef=(()=>{class n extends Rs{constructor(t,r,i,o){super(t,r),this._registry=i,this._injector=o,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=Fe(ml,{optional:!0})??gl}ngOnInit(){this._control=this._injector.get(oo),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}setDisabledState(t){(this.setDisabledStateFired||t||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",t),this.setDisabledStateFired=!0}fireUncheck(t){this.writeValue(t)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}static{this.\u0275fac=function(r){return new(r||n)(K(Ar),K(Jt),K(NP),K(vs))}}static{this.\u0275dir=We({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(r,i){r&1&&U("change",function(){return i.onChange()})("blur",function(){return i.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[fn([PP]),Tt]})}}return n})();var OP={provide:so,useExisting:Vt(()=>tn),multi:!0};function qb(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function RP(n){return n.split(":")[0]}var tn=(()=>{class n extends Rs{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=qb(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=RP(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Tr(n)))(i||n)}})()}static{this.\u0275dir=We({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&U("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[fn([OP]),Tt]})}}return n})(),Mn=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(qb(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(K(Jt),K(Ar),K(tn,9))}}static{this.\u0275dir=We({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),kP={provide:so,useExisting:Vt(()=>Gb),multi:!0};function Nb(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function FP(n){return n.split(":")[0]}var Gb=(()=>{class n extends Rs{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let c=0;c<s.length;c++){let l=s[c],d=this._getOptionValue(l.value);i.push(d)}}else{let s=r.options;for(let c=0;c<s.length;c++){let l=s[c];if(l.selected){let d=this._getOptionValue(l.value);i.push(d)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=FP(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Tr(n)))(i||n)}})()}static{this.\u0275dir=We({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&U("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[fn([kP]),Tt]})}}return n})(),An=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(Nb(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Nb(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(K(Jt),K(Ar),K(Gb,9))}}static{this.\u0275dir=We({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();function Wb(n){return typeof n=="number"?n:parseFloat(n)}var If=(()=>{class n{constructor(){this._validator=Ib}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Ib,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=We({type:n,features:[gs]})}}return n})(),VP={provide:ks,useExisting:Vt(()=>Df),multi:!0},Df=(()=>{class n extends If{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=t=>Wb(t),this.createValidator=t=>oP(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Tr(n)))(i||n)}})()}static{this.\u0275dir=We({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&_s("max",i._enabled?i.max:null)},inputs:{max:"max"},features:[fn([VP]),Tt]})}}return n})(),LP={provide:ks,useExisting:Vt(()=>tr),multi:!0},tr=(()=>{class n extends If{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>Wb(t),this.createValidator=t=>iP(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Tr(n)))(i||n)}})()}static{this.\u0275dir=We({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&_s("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[fn([LP]),Tt]})}}return n})(),jP={provide:ks,useExisting:Vt(()=>Ht),multi:!0};var Ht=(()=>{class n extends If{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Lc,this.createValidator=t=>sP}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Tr(n)))(i||n)}})()}static{this.\u0275dir=We({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&_s("required",i._enabled?"":null)},inputs:{required:"required"},features:[fn([jP]),Tt]})}}return n})();var BP=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=hi({type:n})}static{this.\u0275inj=di({})}}return n})();var ft=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:ml,useValue:t.callSetDisabledState??gl}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=hi({type:n})}static{this.\u0275inj=di({imports:[BP]})}}return n})();var Pn={production:!0,apiUrl:"https://inventory-three-theta.vercel.app/api",socketUrl:"https://your-websocket-server.com",firebaseConfig:{apiKey:"AIzaSyDJL01CQ2KJGqni6Q3EPR8Yv1CPW6cXezk",authDomain:"inventory-8b0ad.firebaseapp.com",projectId:"inventory-8b0ad",storageBucket:"inventory-8b0ad.firebasestorage.app",messagingSenderId:"165252469952",appId:"1:165252469952:web:1dec34907cc003fd2c4925",measurementId:"G-YK1FRTQT8P"}};var yl=(()=>{class n{constructor(t){this.http=t,this.apiUrl=Pn.apiUrl,this.logsSubject=new ct([]),this.logs$=this.logsSubject.asObservable(),this.fetchLogs()}getCurrentUserId(){return localStorage.getItem("jjm_user_id")||"guest"}fetchLogs(){let t=this.getCurrentUserId();this.http.get(`${this.apiUrl}/logs?limit=200&userId=${t}`).subscribe({next:r=>this.logsSubject.next(r),error:r=>console.error("Error fetching logs:",r)})}logActivity(t,r,i,o,s){let c={action:t,entityType:r,entityId:i,entityName:o,details:s,userId:this.getCurrentUserId()};console.log("Logging activity:",c),this.http.post(`${this.apiUrl}/logs`,c).subscribe({next:l=>{console.log("Activity logged successfully:",l);let d=this.logsSubject.value;this.logsSubject.next([l,...d])},error:l=>{console.error("Error logging activity:",l),console.error("Failed log data:",c)}})}getLogs(){return this.logs$}refreshLogs(){this.fetchLogs()}cleanupOldLogs(){return this.http.post(`${this.apiUrl}/cleanup-logs`,{})}static{this.\u0275fac=function(r){return new(r||n)(oe(Zn))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var nn=(()=>{class n{constructor(t,r){this.http=t,this.loggingService=r,this.apiUrl=Pn.apiUrl,this.productsSubject=new ct([]),this.salesSubject=new ct([]),this.expensesSubject=new ct([]),this.products$=this.productsSubject.asObservable(),this.sales$=this.salesSubject.asObservable(),this.expenses$=this.expensesSubject.asObservable(),this.loadInitialData()}getCurrentUser(){return localStorage.getItem("jjm_user_id")||"guest"}reloadData(){this.loadInitialData()}loadInitialData(){this.fetchProducts(),this.fetchSales(),this.fetchExpenses()}fetchProducts(){let t=this.getCurrentUser();this.http.get(`${this.apiUrl}/products?userId=${t}`).subscribe({next:r=>this.productsSubject.next(r),error:r=>console.error("Error fetching products:",r)})}fetchSales(){let t=this.getCurrentUser();this.http.get(`${this.apiUrl}/sales?userId=${t}`).subscribe({next:r=>{let i=r.map(o=>this.transformSale(o));this.salesSubject.next(i)},error:r=>console.error("Error fetching sales:",r)})}fetchExpenses(){let t=this.getCurrentUser();this.http.get(`${this.apiUrl}/expenses?userId=${t}`).subscribe({next:r=>this.expensesSubject.next(r),error:r=>console.error("Error fetching expenses:",r)})}getProducts(){return this.products$}getSales(){return this.sales$}getExpenses(){return this.expenses$}addExpense(t){let r=le(Y({},t),{userId:this.getCurrentUser()});this.http.post(`${this.apiUrl}/expenses`,r).subscribe({next:i=>{let o=this.expensesSubject.value;this.expensesSubject.next([...o,i]),this.loggingService.logActivity("create","expense",i.id,i.productName,`$${i.price.toFixed(2)}`)},error:i=>console.error("Error adding expense:",i)})}addProduct(t){let r=le(Y({},t),{userId:this.getCurrentUser()});this.http.post(`${this.apiUrl}/products`,r).subscribe({next:i=>{let o=this.productsSubject.value;this.productsSubject.next([...o,i]),this.loggingService.logActivity("create","product",i.id,i.name)},error:i=>console.error("Error adding product:",i)})}recordSale(t,r,i,o,s,c,l=0,d="amount"){let g=this.productsSubject.value.find(R=>R.id===t);if(!g)throw new Error("Product not found");if(g.quantity<r)throw new Error("Insufficient quantity");let b=g.price*r;l>0&&(d==="percent"?b=b-b*(l/100):b=b-l),b=Math.max(0,Math.round(b*100)/100);let C=i-b;if(C<0)throw new Error("Insufficient cash");let N={productId:g.id,productName:g.name,category:g.category,price:g.price,quantitySold:r,total:b,cashReceived:i,change:C,deliveryDate:o,deliveryNotes:s,customerId:c,pending:!0,discount:l,discountType:d,userId:this.getCurrentUser()};this.http.post(`${this.apiUrl}/sales`,N).subscribe({next:R=>{let k=this.salesSubject.value;this.salesSubject.next([...k,this.transformSale(R)]);let H=le(Y({},g),{quantity:g.quantity-r});this.updateProduct(H),this.loggingService.logActivity("create","sale",R.id,g.name,`Sold ${r} units`)},error:R=>console.error("Error recording sale:",R)})}completePendingSale(t){this.http.put(`${this.apiUrl}/sales/${t}`,{pending:!1}).subscribe({next:()=>{let r=this.salesSubject.value,i=r.find(s=>s.id===t),o=r.map(s=>s.id===t?le(Y({},s),{pending:!1}):s);this.salesSubject.next(o),i&&this.loggingService.logActivity("complete","sale",t,i.productName,"Marked as delivered")},error:r=>console.error("Error completing sale:",r)})}updateSale(t){this.http.put(`${this.apiUrl}/sales/${t.id}`,t).subscribe({next:r=>{let o=this.salesSubject.value.map(s=>s.id===t.id?this.transformSale(r):s);this.salesSubject.next(o),this.loggingService.logActivity("update","sale",t.id,t.productName,"Updated delivery details")},error:r=>console.error("Error updating sale:",r)})}transformSale(t){return le(Y({},t),{timestamp:this.parseDate(t.timestamp),deliveryDate:t.deliveryDate?this.parseDate(t.deliveryDate):void 0})}parseDate(t){return t?t instanceof Date?t:typeof t=="string"?new Date(t):typeof t=="object"&&t._seconds!==void 0?new Date(t._seconds*1e3):new Date(t):new Date}restockProduct(t,r){let o=this.productsSubject.value.find(s=>s.id===t);if(o){let s=le(Y({},o),{quantity:o.quantity+r});this.updateProduct(s),this.loggingService.logActivity("restock","product",t,o.name,`Added ${r} units`)}}updateProduct(t){this.http.put(`${this.apiUrl}/products/${t.id}`,t).subscribe({next:()=>{let i=this.productsSubject.value.map(c=>c.id===t.id?t:c);this.productsSubject.next(i);let o=this.salesSubject.value,s=o.filter(c=>c.productId===t.id&&c.productName!==t.name);if(s.length>0){let c=o.map(l=>l.productId===t.id?le(Y({},l),{productName:t.name}):l);this.salesSubject.next(c),s.forEach(l=>{let d=le(Y({},l),{productName:t.name});this.http.put(`${this.apiUrl}/sales/${l.id}`,d).subscribe({error:m=>console.error(`Error updating sale ${l.id} name:`,m)})})}this.loggingService.logActivity("update","product",t.id,t.name)},error:r=>console.error("Error updating product:",r)})}clearAllData(){this.productsSubject.next([]),this.salesSubject.next([]),this.expensesSubject.next([])}migrateFromLocalStorage(){let t=localStorage.getItem("jjm_products"),r=localStorage.getItem("jjm_sales"),i=localStorage.getItem("jjm_expenses");t&&JSON.parse(t).forEach(s=>this.addProduct(s)),r&&JSON.parse(r).forEach(s=>{this.http.post(`${this.apiUrl}/sales`,s).subscribe({error:c=>console.error("Error migrating sale:",c)})}),i&&JSON.parse(i).forEach(s=>this.addExpense(s)),console.log("Migration started...")}static{this.\u0275fac=function(r){return new(r||n)(oe(Zn),oe(yl))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function UP(n,e){if(n&1){let t=fe();p(0,"div",23),Pe(1,"img",24),p(2,"button",25),U("click",function(){V(t);let i=O();return L(i.removeImage())}),y(3," \u2715 "),f()()}if(n&2){let t=O();_(),P("src",t.imagePreview,fi)}}function $P(n,e){if(n&1){let t=fe();p(0,"div",26)(1,"input",27),U("change",function(i){V(t);let o=O();return L(o.onImageChange(i))}),f(),p(2,"label",28)(3,"span",29),y(4,"\u{1F4F7}"),f(),p(5,"span",30),y(6,"Click to upload image"),f(),p(7,"span",31),y(8,"PNG, JPG, GIF up to 5MB"),f()()()}}var Qb=(()=>{class n{constructor(t){this.inventoryService=t,this.product={name:"",category:"",price:0,quantity:0,imageUrl:""},this.imagePreview=null}onImageChange(t){let r=t.target;if(r.files&&r.files[0]){let i=r.files[0],o=new FileReader;o.onload=s=>{this.imagePreview=s.target?.result,this.product.imageUrl=s.target?.result},o.readAsDataURL(i)}}removeImage(){this.imagePreview=null,this.product.imageUrl=""}onSubmit(){this.isValid()&&(this.inventoryService.addProduct({name:this.product.name,category:this.product.category,price:this.product.price,quantity:this.product.quantity,imageUrl:this.product.imageUrl}),this.product={name:"",category:"",price:0,quantity:0,imageUrl:""},this.imagePreview=null)}isValid(){return!!(this.product.name&&this.product.category&&this.product.price>0&&this.product.quantity>0)}static{this.\u0275fac=function(r){return new(r||n)(K(nn))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-product-form"]],standalone:!0,features:[ze],decls:42,vars:7,consts:[[1,"card"],[1,"form",3,"ngSubmit"],[1,"image-upload-section"],[1,"image-upload-label"],["class","image-preview-container",4,"ngIf"],["class","image-upload-area",4,"ngIf"],[1,"form-group"],["for","productName"],["type","text","id","productName","name","name","placeholder","Enter product name","required","",3,"ngModelChange","ngModel"],["for","category"],["id","category","name","category","required","",3,"ngModelChange","ngModel"],["value",""],["value","Lechon"],["value","Hollow blocks"],["value","Sand and Gravel"],["value","Copra"],["value","Others"],[1,"form-row"],["for","price"],["type","number","id","price","name","price","placeholder","0.00","min","0","step","0.01","required","",3,"ngModelChange","ngModel"],["for","quantity"],["type","number","id","quantity","name","quantity","placeholder","0","min","1","required","",3,"ngModelChange","ngModel"],["type","submit",1,"btn-primary",3,"disabled"],[1,"image-preview-container"],["alt","Product preview","loading","lazy",1,"image-preview",3,"src"],["type","button",1,"remove-image-btn",3,"click"],[1,"image-upload-area"],["type","file","id","productImage","accept","image/*",1,"file-input",3,"change"],["for","productImage",1,"file-input-label"],[1,"upload-icon"],[1,"upload-text"],[1,"upload-hint"]],template:function(r,i){r&1&&(p(0,"div",0)(1,"h3"),y(2,"Add New Product"),f(),p(3,"form",1),U("ngSubmit",function(){return i.onSubmit()}),p(4,"div",2)(5,"label",3),y(6,"Product Image (Optional)"),f(),z(7,UP,4,1,"div",4)(8,$P,9,0,"div",5),f(),p(9,"div",6)(10,"label",7),y(11,"Product Name"),f(),p(12,"input",8),Z("ngModelChange",function(s){return te(i.product.name,s)||(i.product.name=s),s}),f()(),p(13,"div",6)(14,"label",9),y(15,"Category"),f(),p(16,"select",10),Z("ngModelChange",function(s){return te(i.product.category,s)||(i.product.category=s),s}),p(17,"option",11),y(18,"-- Select Category --"),f(),p(19,"option",12),y(20,"Lechon"),f(),p(21,"option",13),y(22,"Hollow blocks"),f(),p(23,"option",14),y(24,"Sand and Gravel"),f(),p(25,"option",15),y(26,"Copra"),f(),p(27,"option",16),y(28,"Others"),f()()(),p(29,"div",17)(30,"div",6)(31,"label",18),y(32,"Price"),f(),p(33,"input",19),Z("ngModelChange",function(s){return te(i.product.price,s)||(i.product.price=s),s}),f()(),p(34,"div",6)(35,"label",20),y(36,"Quantity"),f(),p(37,"input",21),Z("ngModelChange",function(s){return te(i.product.quantity,s)||(i.product.quantity=s),s}),f()()(),p(38,"button",22)(39,"span"),y(40,"\u2795"),f(),y(41," Add Product "),f()()()),r&2&&(_(7),P("ngIf",i.imagePreview),_(),P("ngIf",!i.imagePreview),_(4),X("ngModel",i.product.name),_(4),X("ngModel",i.product.category),_(17),X("ngModel",i.product.price),_(4),X("ngModel",i.product.quantity),_(),P("disabled",!i.isValid()))},dependencies:[Ue,Xe,ft,en,Mn,An,dt,er,tn,ht,Zt,Ht,tr,st,zt],styles:[".form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg);margin-top:var(--space-lg)}.image-upload-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.image-upload-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.image-preview-container[_ngcontent-%COMP%]{position:relative;width:100%;max-width:300px;margin:0 auto}.image-preview[_ngcontent-%COMP%]{width:100%;height:200px;object-fit:cover;border-radius:var(--radius-lg);border:2px solid var(--color-border)}.remove-image-btn[_ngcontent-%COMP%]{position:absolute;top:var(--space-sm);right:var(--space-sm);width:32px;height:32px;padding:0;background:var(--color-danger);color:#fff;border:none;border-radius:50%;font-size:1.25rem;cursor:pointer;display:flex;align-items:center;justify-content:center;box-shadow:var(--shadow-md)}.remove-image-btn[_ngcontent-%COMP%]:hover{background:#dc2626;transform:scale(1.1)}.image-upload-area[_ngcontent-%COMP%]{width:100%}.file-input[_ngcontent-%COMP%]{display:none}.file-input-label[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:var(--space-sm);padding:var(--space-2xl);border:2px dashed var(--color-border);border-radius:var(--radius-lg);background:var(--color-bg);cursor:pointer;transition:all var(--transition-base)}.file-input-label[_ngcontent-%COMP%]:hover{border-color:var(--color-primary);background:#1e40af0d}.upload-icon[_ngcontent-%COMP%]{font-size:3rem}.upload-text[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text)}.upload-hint[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--space-lg)}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:var(--space-md) var(--space-lg);font-size:1rem;margin-top:var(--space-sm)}@media (max-width: 640px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return n})();var co=(()=>{class n{constructor(t){this.http=t,this.apiUrl=Pn.apiUrl,this.customersSubject=new ct([]),this.customers$=this.customersSubject.asObservable(),this.loadInitialData()}loadInitialData(){this.fetchCustomers()}getCurrentUser(){return localStorage.getItem("jjm_user_id")||"guest"}reloadData(){this.loadInitialData()}fetchCustomers(){let t=this.getCurrentUser();this.http.get(`${this.apiUrl}/customers?userId=${t}`).subscribe({next:r=>this.customersSubject.next(r),error:r=>console.error("Error fetching customers:",r)})}getCustomers(){return this.customers$}addCustomer(t){let r=le(Y({},t),{userId:this.getCurrentUser()});this.http.post(`${this.apiUrl}/customers`,r).subscribe({next:i=>{let o=this.customersSubject.value;this.customersSubject.next([...o,i])},error:i=>console.error("Error adding customer:",i)})}updateCustomer(t,r){this.http.put(`${this.apiUrl}/customers/${t}`,r).subscribe({next:()=>{let o=this.customersSubject.value.map(s=>s.id===t?Y(Y({},s),r):s);this.customersSubject.next(o)},error:i=>console.error("Error updating customer:",i)})}deleteCustomer(t){this.http.delete(`${this.apiUrl}/customers/${t}`).subscribe({next:()=>{let i=this.customersSubject.value.filter(o=>o.id!==t);this.customersSubject.next(i)},error:r=>console.error("Error deleting customer:",r)})}getCustomerById(t){return this.customersSubject.value.find(r=>r.id===t)}static{this.\u0275fac=function(r){return new(r||n)(oe(Zn))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function zP(n,e){if(n&1&&(p(0,"option",41),y(1),f()),n&2){let t=e.$implicit;P("value",t.id),_(),Kn(" ",t.name," - ",t.phoneNumber," ")}}function HP(n,e){if(n&1&&(p(0,"div",42)(1,"div",43),y(2,"\u{1F4CB} Customer Information"),f(),p(3,"div",44)(4,"span",45),y(5,"Name:"),f(),p(6,"span",46),y(7),f()(),p(8,"div",44)(9,"span",45),y(10,"Phone:"),f(),p(11,"span",46),y(12),f()(),p(13,"div",44)(14,"span",45),y(15,"Address:"),f(),p(16,"span",46),y(17),f()()()),n&2){let t=O();_(7),G(t.selectedCustomer.name),_(5),G(t.selectedCustomer.phoneNumber),_(5),G(t.selectedCustomer.deliveryAddress)}}function qP(n,e){if(n&1&&(p(0,"option",41),y(1),f()),n&2){let t=e.$implicit;P("value",t.id),_(),Xh(" ",t.name," - $",t.price.toFixed(2)," (Stock: ",t.quantity,") ")}}function GP(n,e){if(n&1&&(p(0,"div",48)(1,"span",49),y(2,"Discount:"),f(),p(3,"span",55),y(4),f()()),n&2){let t=O(2);_(4),J("- $",(t.subtotal-t.total).toFixed(2),"")}}function WP(n,e){if(n&1&&(p(0,"span"),y(1),f()),n&2){let t=O(3);_(),J(" at ",t.deliveryTime,"")}}function KP(n,e){if(n&1&&(p(0,"div",56)(1,"span",49),y(2,"\u{1F4C5} Delivery:"),f(),p(3,"span",50),y(4),xe(5,"date"),z(6,WP,2,1,"span",57),f()()),n&2){let t=O(2);_(4),G(Ne(5,2,t.deliveryDate,"mediumDate")),_(2),P("ngIf",t.deliveryTime)}}function QP(n,e){if(n&1&&(p(0,"div",47)(1,"div",48)(2,"span",49),y(3,"Subtotal:"),f(),p(4,"span",50),y(5),f()(),z(6,GP,5,1,"div",51),p(7,"div",52)(8,"span",49),y(9,"Total:"),f(),p(10,"span",50),y(11),f()(),p(12,"div",53)(13,"span",49),y(14,"Change:"),f(),p(15,"span",50),y(16),f()(),z(17,KP,7,5,"div",54),f()),n&2){let t=O();_(5),J("$",t.subtotal.toFixed(2),""),_(),P("ngIf",t.discount>0),_(5),J("$",t.total.toFixed(2),""),_(),De("negative",t.change<0),_(4),J("$",t.change.toFixed(2),""),_(),P("ngIf",t.deliveryDate)}}function YP(n,e){if(n&1&&(p(0,"div",58),y(1),f()),n&2){let t=O();_(),J("\u26A0\uFE0F ",t.errorMessage,"")}}function JP(n,e){if(n&1&&(p(0,"div",70)(1,"div",71),y(2,"\u{1F464} Customer Details"),f(),p(3,"div",72)(4,"span",73),y(5,"Name:"),f(),p(6,"span",74),y(7),f()(),p(8,"div",72)(9,"span",73),y(10,"Phone:"),f(),p(11,"span",74),y(12),f()(),p(13,"div",72)(14,"span",73),y(15,"Address:"),f(),p(16,"span",74),y(17),f()()()),n&2){let t=e.ngIf;_(7),G(t.name),_(5),G(t.phoneNumber),_(5),G(t.deliveryAddress)}}function XP(n,e){if(n&1&&(p(0,"span"),y(1),f()),n&2){let t=O(2).$implicit;_(),J("\u{1F4DD} ",t.deliveryNotes,"")}}function ZP(n,e){if(n&1&&(p(0,"div",75)(1,"span"),y(2),xe(3,"date"),f(),p(4,"span"),y(5),xe(6,"date"),f(),z(7,XP,2,1,"span",57),f()),n&2){let t=O().$implicit;_(2),J("\u{1F4C5} Due: ",Ne(3,3,t.deliveryDate,"mediumDate"),""),_(3),J("\u{1F4C5} Time: ",Ne(6,6,t.deliveryDate,"shortTime"),""),_(2),P("ngIf",t.deliveryNotes)}}function eN(n,e){if(n&1){let t=fe();p(0,"div",59)(1,"div",60)(2,"div",61)(3,"span",62),y(4),f(),p(5,"span",63),y(6),xe(7,"date"),f()(),p(8,"div",64)(9,"span"),y(10),f(),p(11,"span"),y(12),f()(),z(13,JP,18,3,"div",65)(14,ZP,8,9,"div",66),f(),p(15,"div",67)(16,"button",68),U("click",function(){let i=V(t).$implicit,o=O();return L(o.openEditModal(i))}),y(17,"\u270F\uFE0F Edit"),f(),p(18,"button",69),U("click",function(){let i=V(t).$implicit,o=O();return L(o.markAsDelivered(i.id))}),y(19,"\u2705 Mark Delivered"),f()()()}if(n&2){let t=e.$implicit,r=O();_(4),G(t.productName),_(2),G(Ne(7,6,t.timestamp,"short")),_(4),J("Qty: ",t.quantitySold,""),_(2),J("Total: $",t.total.toFixed(2),""),_(),P("ngIf",r.getCustomerById(t.customerId)),_(),P("ngIf",t.deliveryDate)}}function tN(n,e){if(n&1){let t=fe();p(0,"div",76),U("click",function(){V(t);let i=O();return L(i.closeEditModal())}),p(1,"div",77),U("click",function(i){return V(t),L(i.stopPropagation())}),p(2,"div",78)(3,"h3"),y(4,"Edit Delivery Details"),f(),p(5,"button",79),U("click",function(){V(t);let i=O();return L(i.closeEditModal())}),y(6,"\xD7"),f()(),p(7,"div",80)(8,"div",2)(9,"label",81),y(10,"Delivery Date"),f(),p(11,"input",82),Z("ngModelChange",function(i){V(t);let o=O();return te(o.editDeliveryDate,i)||(o.editDeliveryDate=i),L(i)}),f()(),p(12,"div",2)(13,"label",83),y(14,"Delivery Time"),f(),p(15,"input",84),Z("ngModelChange",function(i){V(t);let o=O();return te(o.editDeliveryTime,i)||(o.editDeliveryTime=i),L(i)}),f()(),p(16,"div",2)(17,"label",85),y(18,"Notes"),f(),p(19,"textarea",86),Z("ngModelChange",function(i){V(t);let o=O();return te(o.editDeliveryNotes,i)||(o.editDeliveryNotes=i),L(i)}),f()()(),p(20,"div",87)(21,"button",88),U("click",function(){V(t);let i=O();return L(i.closeEditModal())}),y(22,"Cancel"),f(),p(23,"button",89),U("click",function(){V(t);let i=O();return L(i.saveEdit())}),y(24,"Save Changes"),f()()()()}if(n&2){let t=O();_(11),X("ngModel",t.editDeliveryDate),P("min",t.minDate),_(4),X("ngModel",t.editDeliveryTime),_(4),X("ngModel",t.editDeliveryNotes)}}var Yb=(()=>{class n{constructor(t,r){this.inventoryService=t,this.customerService=r,this.products=[],this.customers=[],this.pendingSales=[],this.selectedProductId="",this.selectedCustomerId="",this.quantity=1,this.cashReceived=0,this.discount=0,this.discountType="amount",this.errorMessage="",this.deliveryDate="",this.deliveryTime="",this.deliveryNotes="",this.minDate="",this.deliveryFilterDate="",this.isEditModalOpen=!1,this.editingSale=null,this.editDeliveryDate="",this.editDeliveryTime="",this.editDeliveryNotes="";let i=new Date;this.minDate=i.toISOString().split("T")[0],this.deliveryDate=this.minDate}ngOnInit(){this.inventoryService.getProducts().subscribe(t=>{this.products=t.filter(r=>r.quantity>0)}),this.customerService.getCustomers().subscribe(t=>{this.customers=t}),this.inventoryService.getSales().subscribe(t=>{this.pendingSales=t.filter(r=>r.pending===!0),this.startAlarmChecks()}),this.discount=0}startAlarmChecks(){setInterval(()=>this.checkPendingDeliveryAlarms(),60*60*1e3),this.checkPendingDeliveryAlarms()}get filteredPendingSales(){let t=this.pendingSales;return this.deliveryFilterDate&&(t=t.filter(r=>r.deliveryDate?new Date(r.deliveryDate).toISOString().split("T")[0]===this.deliveryFilterDate:!1)),t.slice().sort((r,i)=>{let o=r.deliveryDate?new Date(r.deliveryDate).getTime():1/0,s=i.deliveryDate?new Date(i.deliveryDate).getTime():1/0;return o-s})}checkPendingDeliveryAlarms(){let t=new Date;this.pendingSales.forEach(r=>{if(!r.deliveryDate)return;let o=new Date(r.deliveryDate).getTime()-t.getTime(),s=Math.floor(o/(1e3*60*60*24));(s===1||s===2)&&this.triggerAlarm(r,s)})}triggerAlarm(t,r){let o=new Date(t.deliveryDate).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}),s=`\u26A0\uFE0F Delivery for "${t.productName}" is due in ${r} day(s) (${o}).`;this.playBeep(),alert(s)}playBeep(){try{let t=new(window.AudioContext||window.webkitAudioContext),r=t.createOscillator(),i=t.createGain();r.type="square",r.frequency.setValueAtTime(1e3,t.currentTime),i.gain.setValueAtTime(.5,t.currentTime),r.connect(i),i.connect(t.destination),r.start(),r.stop(t.currentTime+2)}catch(t){console.error("Audio alarm failed",t)}}get selectedProduct(){return this.products.find(t=>t.id===this.selectedProductId)}get selectedCustomer(){return this.customers.find(t=>t.id===this.selectedCustomerId)}getCustomerById(t){if(t)return this.customers.find(r=>r.id===t)}get subtotal(){return this.selectedProduct?this.selectedProduct.price*this.quantity:0}get total(){let t=this.subtotal;return this.discount>0&&(this.discountType==="percent"?t=t-t*(this.discount/100):t=t-this.discount),Math.max(0,Math.round(t*100)/100)}get change(){return this.cashReceived-this.total}get maxQuantity(){return this.selectedProduct?.quantity||0}onProductChange(){this.quantity=1,this.errorMessage="",this.discount=0}processSale(){if(this.errorMessage="",!this.selectedProductId){this.errorMessage="Please select a product";return}if(this.quantity<1||this.quantity>this.maxQuantity){this.errorMessage=`Quantity must be between 1 and ${this.maxQuantity}`;return}if(this.cashReceived<this.total){this.errorMessage="Insufficient cash received";return}try{let t;this.deliveryDate&&(this.deliveryTime?t=new Date(`${this.deliveryDate}T${this.deliveryTime}`):t=new Date(this.deliveryDate)),this.inventoryService.recordSale(this.selectedProductId,this.quantity,this.cashReceived,t,this.deliveryNotes||void 0,this.selectedCustomerId||void 0,this.discount,this.discountType),this.selectedProductId="",this.quantity=1,this.cashReceived=0,this.discount=0,this.discountType="amount",this.deliveryDate=this.minDate,this.deliveryTime="",this.deliveryNotes=""}catch(t){this.errorMessage=t.message||"Error processing sale"}}isValid(){return!!(this.selectedProductId&&this.quantity>=1&&this.quantity<=this.maxQuantity&&this.cashReceived>=this.total)}markAsDelivered(t){confirm("Are you sure you want to mark this item as delivered?")&&this.inventoryService.completePendingSale(t)}openEditModal(t){if(this.editingSale=t,this.isEditModalOpen=!0,t.deliveryDate){let r=new Date(t.deliveryDate);this.editDeliveryDate=r.toISOString().split("T")[0],this.editDeliveryTime=r.toTimeString().substring(0,5)}else this.editDeliveryDate="",this.editDeliveryTime="";this.editDeliveryNotes=t.deliveryNotes||""}closeEditModal(){this.isEditModalOpen=!1,this.editingSale=null,this.editDeliveryDate="",this.editDeliveryTime="",this.editDeliveryNotes=""}saveEdit(){if(!this.editingSale)return;let t;this.editDeliveryDate&&(this.editDeliveryTime?t=new Date(`${this.editDeliveryDate}T${this.editDeliveryTime}`):t=new Date(this.editDeliveryDate));let r=le(Y({},this.editingSale),{deliveryDate:t,deliveryNotes:this.editDeliveryNotes});this.inventoryService.updateSale(r),this.closeEditModal()}static{this.\u0275fac=function(r){return new(r||n)(K(nn),K(co))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-pos-calculator"]],standalone:!0,features:[ze],decls:81,vars:22,consts:[[1,"card"],[1,"form",3,"ngSubmit"],[1,"form-group"],["for","customer"],["id","customer","name","customer",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","customer-info-display",4,"ngIf"],["for","product"],["id","product","name","product","required","",3,"ngModelChange","change","ngModel"],[1,"form-row"],["for","quantity"],["type","number","id","quantity","name","quantity","placeholder","1","required","",3,"ngModelChange","ngModel","min","max"],["for","cash"],["type","number","id","cash","name","cash","min","0","step","0.01","placeholder","0.00","required","",3,"ngModelChange","ngModel"],[1,"radio-group"],[1,"radio-label"],["type","radio","name","discountType","value","amount",3,"ngModelChange","ngModel"],["type","radio","name","discountType","value","percent",3,"ngModelChange","ngModel"],["for","discount"],["type","number","id","discount","name","discount","min","0","placeholder","0",3,"ngModelChange","ngModel"],[1,"delivery-section"],[1,"section-title"],[1,"section-icon"],["for","deliveryDate"],["type","date","id","deliveryDate","name","deliveryDate",1,"date-input",3,"ngModelChange","ngModel","min"],["for","deliveryTime"],["type","time","id","deliveryTime","name","deliveryTime",1,"time-input",3,"ngModelChange","ngModel"],["for","deliveryNotes"],["id","deliveryNotes","name","deliveryNotes","placeholder","Special instructions, address, contact info...","rows","3",1,"textarea-input",3,"ngModelChange","ngModel"],["class","transaction-summary",4,"ngIf"],["class","error-message",4,"ngIf"],["type","submit",1,"btn-primary","btn-success",3,"disabled"],[1,"card","pending-deliveries"],[1,"filter-row"],["for","deliveryFilter"],[1,"btn-primary",3,"click"],["type","date","id","deliveryFilter","name","deliveryFilter",3,"ngModelChange","ngModel"],[1,"pending-list"],["class","pending-item",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],[3,"value"],[1,"customer-info-display"],[1,"info-header"],[1,"info-row"],[1,"info-label"],[1,"info-value"],[1,"transaction-summary"],[1,"summary-row"],[1,"label"],[1,"value"],["class","summary-row",4,"ngIf"],[1,"summary-row","total-row"],[1,"summary-row","change-row"],["class","summary-row delivery-info",4,"ngIf"],[1,"value","discount-value"],[1,"summary-row","delivery-info"],[4,"ngIf"],[1,"error-message"],[1,"pending-item"],[1,"pending-details"],[1,"pending-header"],[1,"product-name"],[1,"sale-date"],[1,"pending-info"],["class","customer-details",4,"ngIf"],["class","delivery-info",4,"ngIf"],[1,"pending-actions"],[1,"btn-edit",3,"click"],[1,"btn-deliver",3,"click"],[1,"customer-details"],[1,"customer-header"],[1,"customer-row"],[1,"customer-label"],[1,"customer-value"],[1,"delivery-info"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],["for","editDate"],["type","date","id","editDate",1,"date-input",3,"ngModelChange","ngModel","min"],["for","editTime"],["type","time","id","editTime",1,"time-input",3,"ngModelChange","ngModel"],["for","editNotes"],["id","editNotes","rows","3",1,"textarea-input",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn-cancel",3,"click"],[1,"btn-save",3,"click"]],template:function(r,i){r&1&&(p(0,"div",0)(1,"h3"),y(2,"Point of Sale"),f(),p(3,"form",1),U("ngSubmit",function(){return i.processSale()}),p(4,"div",2)(5,"label",3),y(6,"Select Customer (Optional)"),f(),p(7,"select",4),Z("ngModelChange",function(s){return te(i.selectedCustomerId,s)||(i.selectedCustomerId=s),s}),p(8,"option",5),y(9,"-- Walk-in Customer --"),f(),z(10,zP,2,3,"option",6),f()(),z(11,HP,18,3,"div",7),p(12,"div",2)(13,"label",8),y(14,"Select Product"),f(),p(15,"select",9),Z("ngModelChange",function(s){return te(i.selectedProductId,s)||(i.selectedProductId=s),s}),U("change",function(){return i.onProductChange()}),p(16,"option",5),y(17,"-- Choose a product --"),f(),z(18,qP,2,4,"option",6),f()(),p(19,"div",10)(20,"div",2)(21,"label",11),y(22,"Quantity"),f(),p(23,"input",12),Z("ngModelChange",function(s){return te(i.quantity,s)||(i.quantity=s),s}),f()(),p(24,"div",2)(25,"label",13),y(26,"Cash Received"),f(),p(27,"input",14),Z("ngModelChange",function(s){return te(i.cashReceived,s)||(i.cashReceived=s),s}),f()()(),p(28,"div",10)(29,"div",2)(30,"label"),y(31,"Discount Type"),f(),p(32,"div",15)(33,"label",16)(34,"input",17),Z("ngModelChange",function(s){return te(i.discountType,s)||(i.discountType=s),s}),f(),y(35," Amount ($)"),f(),p(36,"label",16)(37,"input",18),Z("ngModelChange",function(s){return te(i.discountType,s)||(i.discountType=s),s}),f(),y(38," Percent (%)"),f()()(),p(39,"div",2)(40,"label",19),y(41,"Discount Value"),f(),p(42,"input",20),Z("ngModelChange",function(s){return te(i.discount,s)||(i.discount=s),s}),f()()(),p(43,"div",21)(44,"h4",22)(45,"span",23),y(46,"\u{1F69A}"),f(),y(47," Delivery Schedule (Optional)"),f(),p(48,"div",10)(49,"div",2)(50,"label",24),y(51,"Delivery Date"),f(),p(52,"input",25),Z("ngModelChange",function(s){return te(i.deliveryDate,s)||(i.deliveryDate=s),s}),f()(),p(53,"div",2)(54,"label",26),y(55,"Delivery Time"),f(),p(56,"input",27),Z("ngModelChange",function(s){return te(i.deliveryTime,s)||(i.deliveryTime=s),s}),f()()(),p(57,"div",2)(58,"label",28),y(59,"Delivery Notes"),f(),p(60,"textarea",29),Z("ngModelChange",function(s){return te(i.deliveryNotes,s)||(i.deliveryNotes=s),s}),f()()(),z(61,QP,18,7,"div",30)(62,YP,2,1,"div",31),p(63,"button",32)(64,"span"),y(65,"\u{1F4B0}"),f(),y(66," Complete Sale"),f()()(),p(67,"div",33)(68,"h3"),y(69,"\u{1F69A} Pending Deliveries"),f(),p(70,"div",34)(71,"label",35),y(72,"Filter by Delivery Date:"),f(),p(73,"button",36),U("click",function(){return i.deliveryFilterDate=""}),p(74,"span"),y(75,"\u274C"),f(),y(76," Clear"),f(),p(77,"input",37),Z("ngModelChange",function(s){return te(i.deliveryFilterDate,s)||(i.deliveryFilterDate=s),s}),f()(),p(78,"div",38),z(79,eN,20,9,"div",39),f()(),z(80,tN,25,4,"div",40)),r&2&&(_(7),X("ngModel",i.selectedCustomerId),_(3),P("ngForOf",i.customers),_(),P("ngIf",i.selectedCustomerId&&i.selectedCustomer),_(4),X("ngModel",i.selectedProductId),_(3),P("ngForOf",i.products),_(5),X("ngModel",i.quantity),P("min",1)("max",i.maxQuantity),_(4),X("ngModel",i.cashReceived),_(7),X("ngModel",i.discountType),_(3),X("ngModel",i.discountType),_(5),X("ngModel",i.discount),_(10),X("ngModel",i.deliveryDate),P("min",i.minDate),_(4),X("ngModel",i.deliveryTime),_(4),X("ngModel",i.deliveryNotes),_(),P("ngIf",i.selectedProduct),_(),P("ngIf",i.errorMessage),_(),P("disabled",!i.isValid()),_(14),X("ngModel",i.deliveryFilterDate),_(2),P("ngForOf",i.filteredPendingSales),_(),P("ngIf",i.isEditModalOpen))},dependencies:[Ue,ut,Xe,Tn,ft,en,Mn,An,dt,er,tn,Ef,ht,Zt,Ht,tr,Df,st,zt],styles:[".form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg);margin-top:var(--space-lg)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--space-lg)}.delivery-section[_ngcontent-%COMP%]{background:var(--color-bg);padding:var(--space-lg);border-radius:var(--radius-lg);border:2px dashed var(--color-border);margin-top:var(--space-md)}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);font-size:1rem;font-weight:600;color:var(--color-text);margin-bottom:var(--space-lg)}.section-icon[_ngcontent-%COMP%]{font-size:1.25rem}.date-input[_ngcontent-%COMP%], .time-input[_ngcontent-%COMP%]{cursor:pointer}.textarea-input[_ngcontent-%COMP%]{font-family:inherit;font-size:.9375rem;padding:var(--space-sm) var(--space-md);border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-surface);color:var(--color-text);transition:all var(--transition-base);width:100%;resize:vertical;min-height:80px}.textarea-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f61a}.textarea-input[_ngcontent-%COMP%]::placeholder{color:var(--color-text-muted)}.customer-info-display[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f61a,#9333ea1a);border:2px solid var(--color-primary);border-radius:var(--radius-lg);padding:var(--space-lg);margin-bottom:var(--space-lg)}.info-header[_ngcontent-%COMP%]{font-weight:600;font-size:1rem;color:var(--color-primary);margin-bottom:var(--space-md);display:flex;align-items:center;gap:var(--space-sm)}.info-row[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm);padding:var(--space-xs) 0;font-size:.875rem}.info-label[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text-muted);min-width:120px}.info-value[_ngcontent-%COMP%]{color:var(--color-text);flex:1}.transaction-summary[_ngcontent-%COMP%]{background:var(--color-bg);border-radius:var(--radius-md);padding:var(--space-lg);margin-top:var(--space-md)}.summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--space-sm) 0;font-size:1.125rem}.summary-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text-muted)}.summary-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text);font-size:1.25rem}.change-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:var(--color-success)}.change-row.negative[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:var(--color-danger)}.delivery-info[_ngcontent-%COMP%]{border-top:1px solid var(--color-border);margin-top:var(--space-sm);padding-top:var(--space-md)}.delivery-info[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1rem;color:var(--color-primary)}.error-message[_ngcontent-%COMP%]{background:#fee;color:var(--color-danger);padding:var(--space-md);border-radius:var(--radius-md);font-size:.875rem;border:1px solid rgba(239,68,68,.2)}.btn-success[_ngcontent-%COMP%]{background:var(--color-success)}.btn-success[_ngcontent-%COMP%]:hover{background:#059669}@media (max-width: 640px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}.pending-deliveries[_ngcontent-%COMP%]{margin-top:var(--space-xl);border-top:4px solid var(--color-warning)}.pending-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md);margin-top:var(--space-lg)}.pending-item[_ngcontent-%COMP%]{background:var(--color-bg);border:1px solid var(--color-border);border-radius:var(--radius-md);padding:var(--space-md);display:flex;justify-content:space-between;align-items:center;gap:var(--space-md)}.pending-details[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:var(--space-xs)}.pending-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--space-xs)}.product-name[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text)}.sale-date[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted)}.pending-info[_ngcontent-%COMP%]{display:flex;gap:var(--space-lg);font-size:.875rem;color:var(--color-text-muted)}.delivery-info[_ngcontent-%COMP%]{margin-top:var(--space-xs);padding-top:var(--space-xs);border-top:1px dashed var(--color-border);font-size:.875rem;color:var(--color-primary);display:flex;flex-direction:column;gap:2px}.btn-deliver[_ngcontent-%COMP%]{background:var(--color-success);color:#fff;border:none;padding:var(--space-sm) var(--space-md);border-radius:var(--radius-md);font-weight:500;cursor:pointer;transition:all var(--transition-base);white-space:nowrap}.btn-deliver[_ngcontent-%COMP%]:hover{background:#059669;transform:translateY(-1px)}@media (max-width: 640px){.pending-item[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.btn-deliver[_ngcontent-%COMP%]{width:100%}}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.modal-content[_ngcontent-%COMP%]{background-color:var(--color-surface);padding:2rem;border-radius:12px;width:90%;max-width:500px;box-shadow:0 10px 25px #0003;animation:_ngcontent-%COMP%_slideIn .3s ease-out;color:var(--color-text)}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translateY(-20px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;border-bottom:1px solid var(--color-border);padding-bottom:1rem}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--color-text)}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:var(--color-text-muted)}.modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.modal-footer[_ngcontent-%COMP%]{margin-top:2rem;display:flex;justify-content:flex-end;gap:1rem;padding-top:1rem;border-top:1px solid var(--color-border)}.btn-cancel[_ngcontent-%COMP%]{padding:.5rem 1rem;border:1px solid var(--color-border);background-color:var(--color-surface);color:var(--color-text);border-radius:6px;cursor:pointer;font-weight:500;transition:background-color .2s}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:var(--color-bg)}.btn-save[_ngcontent-%COMP%]{padding:.5rem 1rem;background-color:#4caf50;color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:500}.btn-save[_ngcontent-%COMP%]:hover{background-color:#45a049}.pending-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;margin-left:1rem}.btn-edit[_ngcontent-%COMP%]{padding:.5rem 1rem;background-color:#2196f3;color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:500;transition:background-color .2s}.btn-edit[_ngcontent-%COMP%]:hover{background-color:#1976d2}.customer-details[_ngcontent-%COMP%]{margin-top:.75rem;padding:.75rem;background:linear-gradient(135deg,#8b5cf61a,#6366f11a);border-left:3px solid #8b5cf6;border-radius:6px}.customer-header[_ngcontent-%COMP%]{font-weight:600;color:#8b5cf6;margin-bottom:.5rem;font-size:.95rem}.customer-row[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-bottom:.25rem;font-size:.9rem}.customer-label[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text-muted);min-width:60px}.customer-value[_ngcontent-%COMP%]{color:var(--color-text);font-weight:400}.radio-group[_ngcontent-%COMP%]{display:flex;background:var(--color-bg);padding:4px;border-radius:8px;border:1px solid var(--color-border);gap:4px}.radio-label[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;padding:8px 12px;cursor:pointer;font-size:.9rem;font-weight:500;color:var(--color-text-muted);border-radius:6px;transition:all .2s ease;text-align:center;-webkit-user-select:none;user-select:none}.radio-label[_ngcontent-%COMP%]:hover{background:var(--color-surface);color:var(--color-text)}.radio-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.radio-label[_ngcontent-%COMP%]:has(input:checked){background:var(--color-primary);color:#fff;box-shadow:0 2px 4px #0000001a}.discount-value[_ngcontent-%COMP%]{color:var(--color-danger);font-weight:600}.total-row[_ngcontent-%COMP%]{border-top:1px solid var(--color-border);margin-top:var(--space-sm);padding-top:var(--space-md)}"]})}}return n})();function nN(n,e){if(n&1&&(p(0,"div",32)(1,"div",33),y(2),f(),p(3,"div",34),Pe(4,"div",35),f(),p(5,"div",36),y(6),f()()),n&2){let t=e.$implicit,r=O();_(2),G(t.category),_(2),Gn("width",t.total/r.totalSalesValue*100,"%"),P("title","$"+t.total.toFixed(2)),_(2),Kn("$",t.total.toFixed(2)," (",t.count,")")}}function rN(n,e){n&1&&(p(0,"div",37),y(1," No sales data yet "),f())}function iN(n,e){if(n&1&&(p(0,"div",50),Pe(1,"img",51),f()),n&2){let t=O().$implicit;_(),P("src",t.imageUrl,fi)("alt",t.name)}}function oN(n,e){n&1&&(p(0,"div",52)(1,"span",53),y(2,"\u{1F4E6}"),f()())}function sN(n,e){if(n&1){let t=fe();p(0,"div",40),z(1,iN,2,2,"div",41)(2,oN,3,0,"div",42),p(3,"div",43)(4,"div",44),y(5),f(),p(6,"div",45),y(7),f()(),p(8,"div",46)(9,"div",47),y(10),f(),p(11,"div",48),y(12),f(),p(13,"button",49),U("click",function(){let i=V(t).$implicit,o=O(2);return L(o.openEditModal(i))}),y(14," \u270F\uFE0F Edit "),f()()()}if(n&2){let t=e.$implicit;_(),P("ngIf",t.imageUrl),_(),P("ngIf",!t.imageUrl),_(3),G(t.name),_(2),G(t.category),_(3),J("$",t.price.toFixed(2),""),_(2),J("Stock: ",t.quantity,"")}}function aN(n,e){if(n&1&&(p(0,"div",38),z(1,sN,15,6,"div",39),f()),n&2){let t=O();_(),P("ngForOf",t.paginatedAvailableProducts)}}function cN(n,e){if(n&1&&(p(0,"option",59),y(1),f()),n&2){let t=e.$implicit;P("value",t),_(),G(t)}}function lN(n,e){if(n&1){let t=fe();p(0,"button",64),U("click",function(){let i=V(t).$implicit,o=O(3);return L(o.goToAvailablePage(i))}),y(1),f()}if(n&2){let t=e.$implicit,r=O(3);De("active",t===r.availableProductsPage),_(),J(" ",t," ")}}function uN(n,e){if(n&1){let t=fe();p(0,"div",60)(1,"button",61),U("click",function(){V(t);let i=O(2);return L(i.prevAvailablePage())}),y(2," \u2190 Prev "),f(),p(3,"div",62),z(4,lN,2,3,"button",63),f(),p(5,"button",61),U("click",function(){V(t);let i=O(2);return L(i.nextAvailablePage())}),y(6," Next \u2192 "),f()()}if(n&2){let t=O(2);_(),P("disabled",t.availableProductsPage===1),_(3),P("ngForOf",t.getPageNumbers(t.availableProductsTotalPages)),_(),P("disabled",t.availableProductsPage===t.availableProductsTotalPages)}}function dN(n,e){if(n&1){let t=fe();p(0,"div",54)(1,"div",55)(2,"label",56),y(3,"Show:"),f(),p(4,"select",57),Z("ngModelChange",function(i){V(t);let o=O();return te(o.availableProductsPageSize,i)||(o.availableProductsPageSize=i),L(i)}),U("change",function(){V(t);let i=O();return L(i.onAvailablePageSizeChange())}),z(5,cN,2,2,"option",28),f(),p(6,"span"),y(7,"per page"),f()(),z(8,uN,7,3,"div",58),f()}if(n&2){let t=O();_(4),X("ngModel",t.availableProductsPageSize),_(),P("ngForOf",t.pageSizeOptions),_(3),P("ngIf",t.availableProductsTotalPages>1)}}function hN(n,e){n&1&&(p(0,"div",65)(1,"p"),y(2,"No available products"),f()())}function fN(n,e){if(n&1&&(p(0,"div",70)(1,"div",71)(2,"div",72),y(3),f(),p(4,"div",73),y(5),f(),p(6,"div",74),y(7," Pending Delivery "),f()(),p(8,"div",75)(9,"div",76),y(10),f(),p(11,"div",77),y(12),xe(13,"date"),f()()()),n&2){let t=e.$implicit;_(3),G(t.productName),_(2),Kn(" ",t.quantitySold," \xD7 $",t.price.toFixed(2)," "),_(5),J("$",t.total.toFixed(2),""),_(2),G(Ne(13,5,t.timestamp,"medium"))}}function pN(n,e){if(n&1&&(p(0,"div",66)(1,"h3")(2,"span",5),y(3,"\u{1F69A}"),f(),y(4," Pending Deliveries "),p(5,"span",67),y(6),f()(),p(7,"div",68),z(8,fN,14,8,"div",69),f()()),n&2){let t=O();_(6),G(t.pendingSales.length),_(2),P("ngForOf",t.pendingSales)}}function mN(n,e){if(n&1&&(p(0,"option",59),y(1),f()),n&2){let t=e.$implicit;P("value",t),_(),G(t)}}function gN(n,e){if(n&1&&(p(0,"div",79),y(1),xe(2,"date"),f()),n&2){let t=O().$implicit;_(),J(" \u{1F69A} ",Ne(2,1,t.deliveryDate,"MMM d, y")," ")}}function yN(n,e){if(n&1&&(p(0,"div",70)(1,"div",71)(2,"div",72),y(3),f(),p(4,"div",73),y(5),f(),z(6,gN,3,4,"div",78),f(),p(7,"div",75)(8,"div",76),y(9),f(),p(10,"div",77),y(11),xe(12,"date"),f()()()),n&2){let t=e.$implicit;_(3),G(t.productName),_(2),Kn(" ",t.quantitySold," \xD7 $",t.price.toFixed(2)," "),_(),P("ngIf",t.deliveryDate),_(3),J("$",t.total.toFixed(2),""),_(2),G(Ne(12,6,t.timestamp,"short"))}}function vN(n,e){if(n&1&&(p(0,"div",68),z(1,yN,13,9,"div",69),f()),n&2){let t=O();_(),P("ngForOf",t.paginatedSales)}}function _N(n,e){if(n&1&&(p(0,"option",59),y(1),f()),n&2){let t=e.$implicit;P("value",t),_(),G(t)}}function bN(n,e){if(n&1){let t=fe();p(0,"button",64),U("click",function(){let i=V(t).$implicit,o=O(3);return L(o.goToSalesPage(i))}),y(1),f()}if(n&2){let t=e.$implicit,r=O(3);De("active",t===r.salesPage),_(),J(" ",t," ")}}function wN(n,e){if(n&1){let t=fe();p(0,"div",60)(1,"button",61),U("click",function(){V(t);let i=O(2);return L(i.prevSalesPage())}),y(2," \u2190 Prev "),f(),p(3,"div",62),z(4,bN,2,3,"button",63),f(),p(5,"button",61),U("click",function(){V(t);let i=O(2);return L(i.nextSalesPage())}),y(6," Next \u2192 "),f()()}if(n&2){let t=O(2);_(),P("disabled",t.salesPage===1),_(3),P("ngForOf",t.getPageNumbers(t.salesTotalPages)),_(),P("disabled",t.salesPage===t.salesTotalPages)}}function CN(n,e){if(n&1){let t=fe();p(0,"div",54)(1,"div",55)(2,"label",80),y(3,"Show:"),f(),p(4,"select",81),Z("ngModelChange",function(i){V(t);let o=O();return te(o.salesPageSize,i)||(o.salesPageSize=i),L(i)}),U("change",function(){V(t);let i=O();return L(i.onSalesPageSizeChange())}),z(5,_N,2,2,"option",28),f(),p(6,"span"),y(7,"per page"),f()(),z(8,wN,7,3,"div",58),f()}if(n&2){let t=O();_(4),X("ngModel",t.salesPageSize),_(),P("ngForOf",t.pageSizeOptions),_(3),P("ngIf",t.salesTotalPages>1)}}function EN(n,e){n&1&&(p(0,"div",65)(1,"p"),y(2,"No sales yet"),f()())}function IN(n,e){if(n&1&&(p(0,"div",50),Pe(1,"img",51),f()),n&2){let t=O().$implicit;_(),P("src",t.imageUrl,fi)("alt",t.name)}}function DN(n,e){n&1&&(p(0,"div",52)(1,"span",53),y(2,"\u{1F4E6}"),f()())}function xN(n,e){if(n&1&&(p(0,"option",59),y(1),f()),n&2){let t=e.$implicit;P("value",t),_(),G(t)}}function SN(n,e){if(n&1){let t=fe();p(0,"button",64),U("click",function(){let i=V(t).$implicit,o=O(5);return L(o.goToOutOfStockPage(i))}),y(1),f()}if(n&2){let t=e.$implicit,r=O(5);De("active",t===r.outOfStockPage),_(),J(" ",t," ")}}function TN(n,e){if(n&1){let t=fe();p(0,"div",60)(1,"button",61),U("click",function(){V(t);let i=O(4);return L(i.prevOutOfStockPage())}),y(2," \u2190 Prev "),f(),p(3,"div",62),z(4,SN,2,3,"button",63),f(),p(5,"button",61),U("click",function(){V(t);let i=O(4);return L(i.nextOutOfStockPage())}),y(6," Next \u2192 "),f()()}if(n&2){let t=O(4);_(),P("disabled",t.outOfStockPage===1),_(3),P("ngForOf",t.getPageNumbers(t.outOfStockTotalPages)),_(),P("disabled",t.outOfStockPage===t.outOfStockTotalPages)}}function MN(n,e){if(n&1){let t=fe();p(0,"div",54)(1,"div",55)(2,"label",88),y(3,"Show:"),f(),p(4,"select",89),Z("ngModelChange",function(i){V(t);let o=O(3);return te(o.outOfStockPageSize,i)||(o.outOfStockPageSize=i),L(i)}),U("change",function(){V(t);let i=O(3);return L(i.onOutOfStockPageSizeChange())}),z(5,xN,2,2,"option",28),f(),p(6,"span"),y(7,"per page"),f()(),z(8,TN,7,3,"div",58),f()}if(n&2){let t=O(3);_(4),X("ngModel",t.outOfStockPageSize),_(),P("ngForOf",t.pageSizeOptions),_(3),P("ngIf",t.outOfStockTotalPages>1)}}function AN(n,e){if(n&1){let t=fe();p(0,"div",84),z(1,IN,2,2,"div",41)(2,DN,3,0,"div",42),p(3,"div",43)(4,"div",44),y(5),p(6,"div")(7,"div",45),y(8),f()(),p(9,"div",46)(10,"div",47),y(11),f(),p(12,"div",85),y(13,"Out of Stock"),f(),p(14,"div",86)(15,"button",87),U("click",function(){let i=V(t).$implicit,o=O(2);return L(o.onRestock(i))}),y(16," \u2795 Restock "),f()()()()(),z(17,MN,9,3,"div",22),f()}if(n&2){let t=e.$implicit,r=O(2);_(),P("ngIf",t.imageUrl),_(),P("ngIf",!t.imageUrl),_(3),J(" ",t.name,""),_(3),G(t.category),_(3),J("$",t.price.toFixed(2),""),_(6),P("ngIf",r.outOfStockTotalPages>1||r.outOfStockProducts.length>10)}}function PN(n,e){if(n&1&&(p(0,"div",82)(1,"h3")(2,"span",5),y(3,"\u26A0\uFE0F"),f(),y(4," Out of Stock "),p(5,"span",67),y(6),f()(),p(7,"div",38),z(8,AN,18,6,"div",83),f()()),n&2){let t=O();_(6),G(t.outOfStockProducts.length),_(2),P("ngForOf",t.paginatedOutOfStockProducts)}}function NN(n,e){if(n&1){let t=fe();p(0,"div",90),U("click",function(){V(t);let i=O();return L(i.closeEditModal())}),p(1,"div",91),U("click",function(i){return V(t),L(i.stopPropagation())}),p(2,"div",92)(3,"h3"),y(4,"Edit Product"),f(),p(5,"button",93),U("click",function(){V(t);let i=O();return L(i.closeEditModal())}),y(6,"\xD7"),f()(),p(7,"div",94)(8,"div",95)(9,"label",96),y(10,"Product Name"),f(),p(11,"input",97),Z("ngModelChange",function(i){V(t);let o=O();return te(o.editProductName,i)||(o.editProductName=i),L(i)}),f()(),p(12,"div",95)(13,"label",98),y(14,"Stock Quantity"),f(),p(15,"input",99),Z("ngModelChange",function(i){V(t);let o=O();return te(o.editProductQuantity,i)||(o.editProductQuantity=i),L(i)}),f()(),p(16,"div",95)(17,"label",100),y(18,"Price"),f(),p(19,"input",101),Z("ngModelChange",function(i){V(t);let o=O();return te(o.editProductPrice,i)||(o.editProductPrice=i),L(i)}),f()()(),p(20,"div",102)(21,"button",103),U("click",function(){V(t);let i=O();return L(i.closeEditModal())}),y(22,"Cancel"),f(),p(23,"button",104),U("click",function(){V(t);let i=O();return L(i.saveProductEdit())}),y(24,"Save Changes"),f()()()()}if(n&2){let t=O();_(11),X("ngModel",t.editProductName),_(4),X("ngModel",t.editProductQuantity),_(4),X("ngModel",t.editProductPrice)}}var Jb=(()=>{class n{constructor(t){this.inventoryService=t,this.products=[],this.sales=[],this.selectedCategory="All",this.categories=["All","Lechon","Hollow blocks","Sand and Gravel","Copra","Others"],this.pageSizeOptions=[10,20,50,100],this.availableProductsPage=1,this.availableProductsPageSize=10,this.salesPage=1,this.salesPageSize=10,this.outOfStockPage=1,this.outOfStockPageSize=10,this.isEditModalOpen=!1,this.editingProduct=null,this.editProductName="",this.editProductQuantity=0,this.editProductPrice=0}ngOnInit(){this.inventoryService.getProducts().subscribe(t=>{this.products=t}),this.inventoryService.getSales().subscribe(t=>{this.sales=t})}get pendingSales(){return this.sales.filter(t=>t.pending===!0)}get filteredSales(){let t=this.sales.filter(r=>r.pending!==!0);return this.selectedCategory==="All"?t:t.filter(r=>r.category===this.selectedCategory)}get availableProducts(){return this.products.filter(t=>t.quantity>0)}get paginatedAvailableProducts(){let t=(this.availableProductsPage-1)*this.availableProductsPageSize,r=t+this.availableProductsPageSize;return this.availableProducts.slice(t,r)}get availableProductsTotalPages(){return Math.ceil(this.availableProducts.length/this.availableProductsPageSize)}get outOfStockProducts(){return this.products.filter(t=>t.quantity===0)}get paginatedOutOfStockProducts(){let t=(this.outOfStockPage-1)*this.outOfStockPageSize,r=t+this.outOfStockPageSize;return this.outOfStockProducts.slice(t,r)}get outOfStockTotalPages(){return Math.ceil(this.outOfStockProducts.length/this.outOfStockPageSize)}get paginatedSales(){let t=(this.salesPage-1)*this.salesPageSize,r=t+this.salesPageSize;return this.filteredSales.slice(t,r)}get salesTotalPages(){return Math.ceil(this.filteredSales.length/this.salesPageSize)}get salesByCategory(){let t=new Map;return this.sales.forEach(r=>{let i=t.get(r.category)||{total:0,count:0};t.set(r.category,{total:i.total+r.total,count:i.count+1})}),Array.from(t.entries()).map(([r,i])=>({category:r,total:i.total,count:i.count}))}get totalInventoryValue(){return this.products.reduce((t,r)=>t+r.price*r.quantity,0)}get totalSalesValue(){return this.sales.reduce((t,r)=>t+r.total,0)}nextAvailablePage(){this.availableProductsPage<this.availableProductsTotalPages&&this.availableProductsPage++}prevAvailablePage(){this.availableProductsPage>1&&this.availableProductsPage--}goToAvailablePage(t){t>=1&&t<=this.availableProductsTotalPages&&(this.availableProductsPage=t)}nextSalesPage(){this.salesPage<this.salesTotalPages&&this.salesPage++}prevSalesPage(){this.salesPage>1&&this.salesPage--}goToSalesPage(t){t>=1&&t<=this.salesTotalPages&&(this.salesPage=t)}nextOutOfStockPage(){this.outOfStockPage<this.outOfStockTotalPages&&this.outOfStockPage++}prevOutOfStockPage(){this.outOfStockPage>1&&this.outOfStockPage--}goToOutOfStockPage(t){this.outOfStockPage=t}onAvailablePageSizeChange(){this.availableProductsPage=1}onSalesPageSizeChange(){this.salesPage=1}onOutOfStockPageSizeChange(){this.outOfStockPage=1}getPageNumbers(t){return Array.from({length:t},(r,i)=>i+1)}onRestock(t){let r=prompt(`Enter quantity to add for ${t.name}:`);if(r){let i=parseInt(r,10);!isNaN(i)&&i>0?this.inventoryService.restockProduct(t.id,i):alert("Please enter a valid number greater than 0")}}openEditModal(t){this.editingProduct=t,this.editProductName=t.name,this.editProductQuantity=t.quantity,this.editProductPrice=t.price,this.isEditModalOpen=!0}closeEditModal(){this.isEditModalOpen=!1,this.editingProduct=null,this.editProductName="",this.editProductQuantity=0,this.editProductPrice=0}saveProductEdit(){if(!this.editingProduct)return;if(!this.editProductName.trim()){alert("Product name cannot be empty");return}if(this.editProductQuantity<0){alert("Quantity cannot be negative");return}if(this.editProductPrice<0){alert("Price cannot be negative");return}let t=le(Y({},this.editingProduct),{name:this.editProductName,quantity:this.editProductQuantity,price:this.editProductPrice});this.inventoryService.updateProduct(t),this.closeEditModal()}static{this.\u0275fac=function(r){return new(r||n)(K(nn))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-inventory-list"]],standalone:!0,features:[ze],decls:63,vars:17,consts:[["noAvailable",""],["noSales",""],[1,"inventory-section"],[1,"inventory-content"],[1,"card","analytics-card"],[1,"icon"],[1,"analytics-grid"],[1,"chart-container"],[1,"bar-chart"],["class","bar-item",4,"ngFor","ngForOf"],["class","empty-chart",4,"ngIf"],[1,"stats-grid"],[1,"stat-card"],[1,"stat-icon"],[1,"stat-info"],[1,"stat-label"],[1,"stat-value"],[1,"stat-card","success"],[1,"lists-container"],[1,"card"],[1,"badge"],["class","product-list",4,"ngIf","ngIfElse"],["class","pagination",4,"ngIf"],["class","card pending-section",4,"ngIf"],[1,"section-header"],[1,"filter-group"],["for","categoryFilter"],["id","categoryFilter",1,"category-filter",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","sales-list",4,"ngIf","ngIfElse"],["class","card out-of-stock-section",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"bar-item"],[1,"bar-label"],[1,"bar-wrapper"],[1,"bar-fill",3,"title"],[1,"bar-value"],[1,"empty-chart"],[1,"product-list"],["class","product-item",4,"ngFor","ngForOf"],[1,"product-item"],["class","product-image-wrapper",4,"ngIf"],["class","product-image-wrapper placeholder",4,"ngIf"],[1,"product-info"],[1,"product-name"],[1,"product-category"],[1,"product-details"],[1,"product-price"],[1,"product-stock"],[1,"btn-edit-sm",3,"click"],[1,"product-image-wrapper"],["loading","lazy",1,"product-image",3,"src","alt"],[1,"product-image-wrapper","placeholder"],[1,"placeholder-icon"],[1,"pagination"],[1,"pagination-size"],["for","availablePageSize"],["id","availablePageSize",1,"page-size-select",3,"ngModelChange","change","ngModel"],["class","pagination-controls",4,"ngIf"],[3,"value"],[1,"pagination-controls"],[1,"pagination-btn",3,"click","disabled"],[1,"pagination-pages"],["class","pagination-page",3,"active","click",4,"ngFor","ngForOf"],[1,"pagination-page",3,"click"],[1,"empty-state"],[1,"card","pending-section"],[1,"badge","warning"],[1,"sales-list"],["class","sale-item",4,"ngFor","ngForOf"],[1,"sale-item"],[1,"sale-info"],[1,"sale-name"],[1,"sale-details-text"],[1,"delivery-badge","warning"],[1,"sale-amount"],[1,"sale-total"],[1,"sale-date"],["class","delivery-badge",4,"ngIf"],[1,"delivery-badge"],["for","salesPageSize"],["id","salesPageSize",1,"page-size-select",3,"ngModelChange","change","ngModel"],[1,"card","out-of-stock-section"],["class","product-item dimmed",4,"ngFor","ngForOf"],[1,"product-item","dimmed"],[1,"product-stock","out"],[1,"product-actions"],[1,"btn-restock",3,"click"],["for","outOfStockPageSize"],["id","outOfStockPageSize",1,"page-size-select",3,"ngModelChange","change","ngModel"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"form-group"],["for","editName"],["type","text","id","editName",1,"text-input",3,"ngModelChange","ngModel"],["for","editQuantity"],["type","number","id","editQuantity","min","0",1,"number-input",3,"ngModelChange","ngModel"],["for","editPrice"],["type","number","id","editPrice","min","0","step","0.01",1,"number-input",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn-cancel",3,"click"],[1,"btn-save",3,"click"]],template:function(r,i){if(r&1){let o=fe();p(0,"div",2)(1,"div",3)(2,"div",4)(3,"h3")(4,"span",5),y(5,"\u{1F4C8}"),f(),y(6," Sales Analytics "),f(),p(7,"div",6)(8,"div",7)(9,"h4"),y(10,"Sales by Category"),f(),p(11,"div",8),z(12,nN,7,6,"div",9)(13,rN,2,0,"div",10),f()()()(),p(14,"div",11)(15,"div",12)(16,"div",13),y(17,"\u{1F4B0}"),f(),p(18,"div",14)(19,"div",15),y(20,"Total Inventory Value"),f(),p(21,"div",16),y(22),f()()(),p(23,"div",17)(24,"div",13),y(25,"\u{1F4CA}"),f(),p(26,"div",14)(27,"div",15),y(28,"Total Sales"),f(),p(29,"div",16),y(30),f()()()(),p(31,"div",18)(32,"div",19)(33,"h3")(34,"span",5),y(35,"\u{1F4E6}"),f(),y(36," Available Inventory "),p(37,"span",20),y(38),f()(),z(39,aN,2,1,"div",21)(40,dN,9,3,"div",22)(41,hN,3,0,"ng-template",null,0,Qn),f(),z(43,pN,9,2,"div",23),p(44,"div",19)(45,"div",24)(46,"h3")(47,"span",5),y(48,"\u{1F4B0}"),f(),y(49," Sales History "),p(50,"span",20),y(51),f()(),p(52,"div",25)(53,"label",26),y(54,"Filter by Category:"),f(),p(55,"select",27),Z("ngModelChange",function(c){return V(o),te(i.selectedCategory,c)||(i.selectedCategory=c),L(c)}),U("change",function(){return V(o),L(i.salesPage=1)}),z(56,mN,2,2,"option",28),f()()(),z(57,vN,2,1,"div",29)(58,CN,9,3,"div",22)(59,EN,3,0,"ng-template",null,1,Qn),f(),z(61,PN,9,2,"div",30)(62,NN,25,3,"div",31),f()()()}if(r&2){let o=Wn(42),s=Wn(60);_(12),P("ngForOf",i.salesByCategory),_(),P("ngIf",i.salesByCategory.length===0),_(9),J("$",i.totalInventoryValue.toFixed(2),""),_(8),J("$",i.totalSalesValue.toFixed(2),""),_(8),G(i.availableProducts.length),_(),P("ngIf",i.availableProducts.length>0)("ngIfElse",o),_(),P("ngIf",i.availableProductsTotalPages>1||i.availableProducts.length>10),_(3),P("ngIf",i.pendingSales.length>0),_(8),G(i.filteredSales.length),_(4),X("ngModel",i.selectedCategory),_(),P("ngForOf",i.categories),_(),P("ngIf",i.sales.length>0)("ngIfElse",s),_(),P("ngIf",i.salesTotalPages>1||i.filteredSales.length>10),_(3),P("ngIf",i.outOfStockProducts.length>0),_(),P("ngIf",i.isEditModalOpen)}},dependencies:[Ue,ut,Xe,Tn,ft,Mn,An,dt,er,tn,ht,tr,st],styles:[".inventory-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xl)}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:var(--space-lg);margin-bottom:var(--space-2xl)}.analytics-card[_ngcontent-%COMP%]{margin-bottom:var(--space-2xl)}.analytics-grid[_ngcontent-%COMP%]{margin-top:var(--space-lg)}.chart-container[_ngcontent-%COMP%]{background:var(--color-bg);padding:var(--space-lg);border-radius:var(--radius-md)}.chart-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 var(--space-lg) 0;color:var(--color-text);font-size:1rem}.bar-chart[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md)}.bar-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:80px 1fr 120px;gap:var(--space-sm);align-items:center}.bar-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.bar-wrapper[_ngcontent-%COMP%]{height:24px;background:var(--color-surface);border-radius:var(--radius-md);overflow:hidden;border:1px solid var(--color-border)}.bar-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,var(--color-primary),var(--color-success));transition:width .3s ease;min-width:2%}.bar-value[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:var(--color-text);text-align:right}.empty-chart[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl);color:var(--color-text-muted);font-style:italic}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:var(--space-md);margin-bottom:var(--space-lg)}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.filter-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm)}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.category-filter[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-surface);color:var(--color-text);font-size:.875rem;cursor:pointer;transition:all var(--transition-base)}.category-filter[_ngcontent-%COMP%]:hover{border-color:var(--color-primary)}.category-filter[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f61a}.stat-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-primary),var(--color-primary-dark));color:#fff;padding:var(--space-xl);border-radius:var(--radius-lg);box-shadow:var(--shadow-lg);display:flex;align-items:center;gap:var(--space-lg)}.stat-card.success[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-success),#059669)}.stat-icon[_ngcontent-%COMP%]{font-size:2.5rem}.stat-info[_ngcontent-%COMP%]{flex:1}.stat-label[_ngcontent-%COMP%]{font-size:.875rem;opacity:.9;margin-bottom:var(--space-sm)}.stat-value[_ngcontent-%COMP%]{font-size:2rem;font-weight:700}.lists-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(500px,1fr));gap:var(--space-xl)}h3[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);margin-bottom:var(--space-lg)}.icon[_ngcontent-%COMP%]{font-size:1.5rem}.badge[_ngcontent-%COMP%]{margin-left:auto;background:var(--color-bg);color:var(--color-primary);padding:var(--space-xs) var(--space-md);border-radius:var(--radius-xl);font-size:.875rem;font-weight:600}.badge.warning[_ngcontent-%COMP%]{background:#fef3c7;color:var(--color-warning)}.product-list[_ngcontent-%COMP%], .sales-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md)}.product-item[_ngcontent-%COMP%], .sale-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:var(--space-md);padding:var(--space-md);background:var(--color-bg);border-radius:var(--radius-md);transition:all var(--transition-base)}.product-image-wrapper[_ngcontent-%COMP%]{flex-shrink:0;width:60px;height:60px;border-radius:var(--radius-md);overflow:hidden;background:var(--color-surface);border:1px solid var(--color-border);display:flex;align-items:center;justify-content:center}.product-image-wrapper.placeholder[_ngcontent-%COMP%]{background:var(--color-bg)}.product-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.placeholder-icon[_ngcontent-%COMP%]{font-size:1.5rem;opacity:.5}.product-item[_ngcontent-%COMP%]:hover, .sale-item[_ngcontent-%COMP%]:hover{background:#e0e7ff;transform:translate(4px)}.product-item.dimmed[_ngcontent-%COMP%]{opacity:.5}.product-info[_ngcontent-%COMP%], .sale-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xs);flex:1;align-self:flex-start;padding-top:4px}.product-name[_ngcontent-%COMP%], .sale-name[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text)}.product-category[_ngcontent-%COMP%], .sale-details-text[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-muted)}.delivery-badge[_ngcontent-%COMP%]{display:inline-block;margin-top:var(--space-xs);padding:var(--space-xs) var(--space-sm);background:#10b9811a;color:var(--color-success);border-radius:var(--radius-sm);font-size:.75rem;font-weight:500}.product-details[_ngcontent-%COMP%], .sale-amount[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:var(--space-xs)}.product-price[_ngcontent-%COMP%], .sale-total[_ngcontent-%COMP%]{font-weight:600;font-size:1.125rem;color:var(--color-primary)}.product-stock[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-success);font-weight:500}.product-stock.out[_ngcontent-%COMP%]{color:var(--color-danger)}.sale-date[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl);color:var(--color-text-muted)}.out-of-stock-section[_ngcontent-%COMP%]{border:2px solid rgba(239,68,68,.2)}.pagination[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md);margin-top:var(--space-lg);padding-top:var(--space-lg);border-top:1px solid var(--color-border)}.pagination-size[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);font-size:.875rem;color:var(--color-text)}.pagination-size[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500}.page-size-select[_ngcontent-%COMP%]{padding:var(--space-xs) var(--space-sm);border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-surface);color:var(--color-text);font-size:.875rem;cursor:pointer;transition:all var(--transition-base)}.page-size-select[_ngcontent-%COMP%]:hover{border-color:var(--color-primary)}.page-size-select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f61a}.pagination-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:var(--space-sm)}.pagination-btn[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);background:var(--color-surface);border:1px solid var(--color-border);color:var(--color-text);border-radius:var(--radius-md);font-size:.875rem;font-weight:500;cursor:pointer;transition:all var(--transition-base)}.pagination-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--color-primary);color:#fff;border-color:var(--color-primary);transform:translateY(-1px)}.pagination-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed;transform:none}.pagination-pages[_ngcontent-%COMP%]{display:flex;gap:var(--space-xs);flex-wrap:wrap;justify-content:center}.pagination-page[_ngcontent-%COMP%]{min-width:36px;height:36px;padding:var(--space-xs) var(--space-sm);background:var(--color-surface);border:1px solid var(--color-border);color:var(--color-text);border-radius:var(--radius-md);font-size:.875rem;font-weight:500;cursor:pointer;transition:all var(--transition-base);display:flex;align-items:center;justify-content:center}.pagination-page[_ngcontent-%COMP%]:hover{background:var(--color-bg);border-color:var(--color-primary);transform:translateY(-1px)}.pagination-page.active[_ngcontent-%COMP%]{background:var(--color-primary);color:#fff;border-color:var(--color-primary)}@media (max-width: 768px){.lists-container[_ngcontent-%COMP%]{grid-template-columns:1fr}.pagination[_ngcontent-%COMP%]{flex-wrap:wrap}.pagination-pages[_ngcontent-%COMP%]{order:3;width:100%;margin-top:var(--space-sm)}h3[_ngcontent-%COMP%]{font-size:1.25rem}.product-name[_ngcontent-%COMP%], .sale-name[_ngcontent-%COMP%]{font-size:.95rem}.product-category[_ngcontent-%COMP%], .sale-details-text[_ngcontent-%COMP%]{font-size:.8rem}.product-price[_ngcontent-%COMP%], .sale-total[_ngcontent-%COMP%]{font-size:1rem}.product-stock[_ngcontent-%COMP%], .sale-date[_ngcontent-%COMP%]{font-size:.75rem}.stat-value[_ngcontent-%COMP%]{font-size:1.5rem}.stat-label[_ngcontent-%COMP%]{font-size:.8rem}}.btn-restock[_ngcontent-%COMP%]{margin-top:var(--space-xs);padding:var(--space-xs) var(--space-sm);background:var(--color-primary-light);color:#fff;border:none;border-radius:var(--radius-sm);font-size:.75rem;font-weight:500;cursor:pointer;transition:all var(--transition-base)}.btn-restock[_ngcontent-%COMP%]:hover{background:var(--color-primary);transform:translateY(-1px)}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.modal-content[_ngcontent-%COMP%]{background-color:var(--color-surface);padding:2rem;border-radius:12px;width:90%;max-width:500px;box-shadow:0 10px 25px #0003;animation:_ngcontent-%COMP%_slideIn .3s ease-out;color:var(--color-text)}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translateY(-20px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;border-bottom:1px solid var(--color-border);padding-bottom:1rem}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--color-text)}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:var(--color-text-muted)}.modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.modal-footer[_ngcontent-%COMP%]{margin-top:2rem;display:flex;justify-content:flex-end;gap:1rem;padding-top:1rem;border-top:1px solid var(--color-border)}.btn-cancel[_ngcontent-%COMP%]{padding:.5rem 1rem;border:1px solid var(--color-border);background-color:var(--color-surface);color:var(--color-text);border-radius:6px;cursor:pointer;font-weight:500;transition:background-color .2s}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:var(--color-bg)}.btn-save[_ngcontent-%COMP%]{padding:.5rem 1rem;background-color:#4caf50;color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:500}.btn-save[_ngcontent-%COMP%]:hover{background-color:#45a049}.btn-edit-sm[_ngcontent-%COMP%]{padding:.25rem .5rem;background-color:transparent;color:var(--color-primary);border:1px solid var(--color-primary);border-radius:4px;cursor:pointer;font-size:.75rem;font-weight:500;transition:all .2s;margin-left:.5rem}.btn-edit-sm[_ngcontent-%COMP%]:hover{background-color:var(--color-primary);color:#fff}.product-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-top:.5rem}"]})}}return n})();function ON(n,e){if(n&1){let t=fe();p(0,"button",17),U("click",function(){V(t);let i=O();return L(i.cancelEdit())}),y(1," Cancel "),f()}}function RN(n,e){if(n&1){let t=fe();p(0,"div",20)(1,"div",21)(2,"div",22),y(3),f(),p(4,"div",23)(5,"div",24)(6,"span",25),y(7,"\u{1F4DE}"),f(),p(8,"span"),y(9),f()(),p(10,"div",24)(11,"span",25),y(12,"\u{1F4CD}"),f(),p(13,"span"),y(14),f()()()(),p(15,"div",26)(16,"button",27),U("click",function(){let i=V(t).$implicit,o=O(2);return L(o.editCustomer(i))}),y(17," \u270F\uFE0F "),f(),p(18,"button",28),U("click",function(){let i=V(t).$implicit,o=O(2);return L(o.deleteCustomer(i.id))}),y(19," \u{1F5D1}\uFE0F "),f()()()}if(n&2){let t=e.$implicit,r=O(2);De("editing",t.id===r.editingId),_(3),G(t.name),_(6),G(t.phoneNumber),_(5),G(t.deliveryAddress),_(2),P("disabled",!!r.editingId&&r.editingId!==t.id),_(2),P("disabled",!!r.editingId)}}function kN(n,e){if(n&1&&(p(0,"div",18),z(1,RN,20,7,"div",19),f()),n&2){let t=O();_(),P("ngForOf",t.customers)}}function FN(n,e){n&1&&(p(0,"div",29)(1,"p"),y(2,"No customers registered yet"),f()())}var Xb=(()=>{class n{constructor(t){this.customerService=t,this.customers=[],this.editingId=null,this.customer={name:"",phoneNumber:"",deliveryAddress:""}}ngOnInit(){this.customerService.getCustomers().subscribe(t=>{this.customers=t})}onSubmit(){this.isValid()&&(this.editingId?(this.customerService.updateCustomer(this.editingId,{name:this.customer.name,phoneNumber:this.customer.phoneNumber,deliveryAddress:this.customer.deliveryAddress}),this.editingId=null):this.customerService.addCustomer({name:this.customer.name,phoneNumber:this.customer.phoneNumber,deliveryAddress:this.customer.deliveryAddress}),this.resetForm())}editCustomer(t){this.editingId=t.id,this.customer={name:t.name,phoneNumber:t.phoneNumber||"",deliveryAddress:t.deliveryAddress||""}}cancelEdit(){this.editingId=null,this.resetForm()}resetForm(){this.customer={name:"",phoneNumber:"",deliveryAddress:""}}deleteCustomer(t){confirm("Are you sure you want to delete this customer?")&&(this.customerService.deleteCustomer(t),this.editingId===t&&this.cancelEdit())}isValid(){return!!(this.customer.name&&this.customer.phoneNumber&&this.customer.deliveryAddress)}static{this.\u0275fac=function(r){return new(r||n)(K(co))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-customer-form"]],standalone:!0,features:[ze],decls:33,vars:11,consts:[["noCustomers",""],[1,"customer-container"],[1,"card"],[1,"form",3,"ngSubmit"],[1,"form-group"],["for","customerName"],["type","text","id","customerName","name","name","placeholder","Enter customer name","required","",3,"ngModelChange","ngModel"],["for","phoneNumber"],["type","tel","id","phoneNumber","name","phoneNumber","placeholder","e.g., +1 234 567 8900","required","",3,"ngModelChange","ngModel"],["for","deliveryAddress"],["id","deliveryAddress","name","deliveryAddress","placeholder","Enter full delivery address","rows","3","required","",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","button","class","btn-secondary",3,"click",4,"ngIf"],["type","submit",1,"btn-primary",3,"disabled"],[1,"icon"],[1,"badge"],["class","customer-list",4,"ngIf","ngIfElse"],["type","button",1,"btn-secondary",3,"click"],[1,"customer-list"],["class","customer-item",3,"editing",4,"ngFor","ngForOf"],[1,"customer-item"],[1,"customer-info"],[1,"customer-name"],[1,"customer-details"],[1,"detail-row"],[1,"detail-icon"],[1,"customer-actions"],[1,"btn-edit",3,"click","disabled"],[1,"btn-delete",3,"click","disabled"],[1,"empty-state"]],template:function(r,i){if(r&1){let o=fe();p(0,"div",1)(1,"div",2)(2,"h3"),y(3),f(),p(4,"form",3),U("ngSubmit",function(){return V(o),L(i.onSubmit())}),p(5,"div",4)(6,"label",5),y(7,"Customer Name *"),f(),p(8,"input",6),Z("ngModelChange",function(c){return V(o),te(i.customer.name,c)||(i.customer.name=c),L(c)}),f()(),p(9,"div",4)(10,"label",7),y(11,"Phone Number *"),f(),p(12,"input",8),Z("ngModelChange",function(c){return V(o),te(i.customer.phoneNumber,c)||(i.customer.phoneNumber=c),L(c)}),f()(),p(13,"div",4)(14,"label",9),y(15,"Delivery Address *"),f(),p(16,"textarea",10),Z("ngModelChange",function(c){return V(o),te(i.customer.deliveryAddress,c)||(i.customer.deliveryAddress=c),L(c)}),f()(),p(17,"div",11),z(18,ON,2,0,"button",12),p(19,"button",13)(20,"span"),y(21),f(),y(22),f()()()(),p(23,"div",2)(24,"h3")(25,"span",14),y(26,"\u{1F465}"),f(),y(27," Registered Customers "),p(28,"span",15),y(29),f()(),z(30,kN,2,1,"div",16)(31,FN,3,0,"ng-template",null,0,Qn),f()()}if(r&2){let o=Wn(32);_(3),G(i.editingId?"Edit Customer":"Register New Customer"),_(5),X("ngModel",i.customer.name),_(4),X("ngModel",i.customer.phoneNumber),_(4),X("ngModel",i.customer.deliveryAddress),_(2),P("ngIf",i.editingId),_(),P("disabled",!i.isValid()),_(2),G(i.editingId?"\u{1F4BE}":"\u{1F464}"),_(),J(" ",i.editingId?"Update Customer":"Add Customer"," "),_(7),G(i.customers.length),_(),P("ngIf",i.customers.length>0)("ngIfElse",o)}},dependencies:[Ue,ut,Xe,ft,en,dt,ht,Zt,Ht,st,zt],styles:[".customer-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-2xl)}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg);margin-top:var(--space-lg)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font-family:inherit;font-size:.9375rem;padding:var(--space-sm) var(--space-md);border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-surface);color:var(--color-text);transition:all var(--transition-base);width:100%;resize:vertical}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f61a}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--space-lg)}.icon[_ngcontent-%COMP%]{font-size:1.5rem}.badge[_ngcontent-%COMP%]{margin-left:auto;background:var(--color-bg);color:var(--color-primary);padding:var(--space-xs) var(--space-md);border-radius:var(--radius-xl);font-size:.875rem;font-weight:600}.customer-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md);margin-top:var(--space-lg)}.customer-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:var(--space-md);padding:var(--space-lg);background:var(--color-bg);border-radius:var(--radius-md);border:1px solid var(--color-border);transition:all var(--transition-base)}.customer-item[_ngcontent-%COMP%]:hover{background:#e0e7ff;transform:translate(4px)}.customer-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:var(--space-sm)}.customer-name[_ngcontent-%COMP%]{font-weight:600;font-size:1.125rem;color:var(--color-text)}.customer-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xs)}.detail-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);font-size:.875rem;color:var(--color-text-muted)}.detail-icon[_ngcontent-%COMP%]{font-size:1rem}.customer-actions[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm)}.btn-delete[_ngcontent-%COMP%]{padding:var(--space-sm);background:transparent;border:1px solid var(--color-border);color:var(--color-danger);border-radius:var(--radius-md);font-size:1.25rem;cursor:pointer;transition:all var(--transition-base);width:40px;height:40px;display:flex;align-items:center;justify-content:center}.btn-delete[_ngcontent-%COMP%]:hover{background:var(--color-danger);border-color:var(--color-danger);transform:scale(1.1)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl);color:var(--color-text-muted)}@media (max-width: 640px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}.form-actions[_ngcontent-%COMP%]{display:flex;gap:var(--space-md);justify-content:flex-end}.btn-secondary[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-xl);background:transparent;border:1px solid var(--color-border);color:var(--color-text);border-radius:var(--radius-md);font-weight:600;cursor:pointer;transition:all var(--transition-base)}.btn-secondary[_ngcontent-%COMP%]:hover{background:var(--color-bg);border-color:var(--color-text)}.btn-edit[_ngcontent-%COMP%]{padding:var(--space-sm);background:transparent;border:1px solid var(--color-border);color:var(--color-primary);border-radius:var(--radius-md);font-size:1.25rem;cursor:pointer;transition:all var(--transition-base);width:40px;height:40px;display:flex;align-items:center;justify-content:center}.btn-edit[_ngcontent-%COMP%]:hover{background:var(--color-primary);color:#fff;border-color:var(--color-primary);transform:scale(1.1)}.btn-edit[_ngcontent-%COMP%]:disabled, .btn-delete[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;transform:none}.customer-item.editing[_ngcontent-%COMP%]{border-color:var(--color-primary);background:var(--color-surface);box-shadow:0 0 0 2px #3b82f61a}"]})}}return n})();function VN(n,e){if(n&1&&(p(0,"div",26),y(1),f()),n&2){let t=O().$implicit;_(),G(t.notes)}}function LN(n,e){if(n&1&&(p(0,"div",19)(1,"div",20)(2,"div",21),y(3),f(),z(4,VN,2,1,"div",22),p(5,"div",23),y(6),xe(7,"date"),f()(),p(8,"div",24)(9,"div",25),y(10),f()()()),n&2){let t=e.$implicit;_(3),G(t.productName),_(),P("ngIf",t.notes),_(2),G(Ne(7,4,t.timestamp,"medium")),_(4),J("$",t.price.toFixed(2),"")}}function jN(n,e){if(n&1&&(p(0,"div",17),z(1,LN,11,7,"div",18),f()),n&2){let t=O();_(),P("ngForOf",t.expenses)}}function BN(n,e){n&1&&(p(0,"div",27)(1,"p"),y(2,"No expenses recorded yet"),f()())}var Zb=(()=>{class n{constructor(t){this.inventoryService=t,this.expenses=[],this.productName="",this.price=null,this.notes=""}ngOnInit(){this.inventoryService.getExpenses().subscribe(t=>{this.expenses=t})}get totalExpenses(){return this.expenses.reduce((t,r)=>t+r.price,0)}addExpense(){this.productName&&this.price&&this.price>0&&(this.inventoryService.addExpense({productName:this.productName,price:this.price,notes:this.notes}),this.productName="",this.price=null,this.notes="")}static{this.\u0275fac=function(r){return new(r||n)(K(nn))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-expenses"]],standalone:!0,features:[ze],decls:36,vars:8,consts:[["noExpenses",""],[1,"expenses-section"],[1,"card"],[1,"icon"],[1,"form",3,"ngSubmit"],[1,"form-group"],["for","productName"],["type","text","id","productName","name","productName","placeholder","e.g., Raw materials, Utilities, etc.","required","",3,"ngModelChange","ngModel"],["for","price"],["type","number","id","price","name","price","min","0","step","0.01","placeholder","0.00","required","",3,"ngModelChange","ngModel"],["for","notes"],["id","notes","name","notes","placeholder","Additional details about this expense...","rows","3",3,"ngModelChange","ngModel"],["type","submit",1,"btn-primary",3,"disabled"],[1,"section-header"],[1,"badge"],[1,"total-badge"],["class","expenses-list",4,"ngIf","ngIfElse"],[1,"expenses-list"],["class","expense-item",4,"ngFor","ngForOf"],[1,"expense-item"],[1,"expense-info"],[1,"expense-name"],["class","expense-notes",4,"ngIf"],[1,"expense-date"],[1,"expense-amount"],[1,"expense-price"],[1,"expense-notes"],[1,"empty-state"]],template:function(r,i){if(r&1){let o=fe();p(0,"div",1)(1,"div",2)(2,"h3")(3,"span",3),y(4,"\u{1F4B8}"),f(),y(5," Add Expense "),f(),p(6,"form",4),U("ngSubmit",function(){return V(o),L(i.addExpense())}),p(7,"div",5)(8,"label",6),y(9,"Product/Item Name"),f(),p(10,"input",7),Z("ngModelChange",function(c){return V(o),te(i.productName,c)||(i.productName=c),L(c)}),f()(),p(11,"div",5)(12,"label",8),y(13,"Price/Amount"),f(),p(14,"input",9),Z("ngModelChange",function(c){return V(o),te(i.price,c)||(i.price=c),L(c)}),f()(),p(15,"div",5)(16,"label",10),y(17,"Notes (Optional)"),f(),p(18,"textarea",11),Z("ngModelChange",function(c){return V(o),te(i.notes,c)||(i.notes=c),L(c)}),f()(),p(19,"button",12)(20,"span"),y(21,"\u2795"),f(),y(22," Add Expense "),f()()(),p(23,"div",2)(24,"div",13)(25,"h3")(26,"span",3),y(27,"\u{1F4CB}"),f(),y(28," Expense History "),p(29,"span",14),y(30),f()(),p(31,"div",15),y(32),f()(),z(33,jN,2,1,"div",16)(34,BN,3,0,"ng-template",null,0,Qn),f()()}if(r&2){let o=Wn(35);_(10),X("ngModel",i.productName),_(4),X("ngModel",i.price),_(4),X("ngModel",i.notes),_(),P("disabled",!i.productName||!i.price||i.price<=0),_(11),G(i.expenses.length),_(2),J(" Total: $",i.totalExpenses.toFixed(2)," "),_(),P("ngIf",i.expenses.length>0)("ngIfElse",o)}},dependencies:[Ue,ut,Xe,Tn,ft,en,dt,er,ht,Zt,Ht,tr,st,zt],styles:[".expenses-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xl)}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg);margin-top:var(--space-lg)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font-family:inherit;font-size:.9375rem;padding:var(--space-sm) var(--space-md);border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-surface);color:var(--color-text);transition:all var(--transition-base);width:100%;resize:vertical;min-height:80px}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f61a}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:var(--space-md);margin-bottom:var(--space-lg)}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;display:flex;align-items:center;gap:var(--space-sm)}.icon[_ngcontent-%COMP%]{font-size:1.5rem}.badge[_ngcontent-%COMP%]{margin-left:auto;background:var(--color-bg);color:var(--color-primary);padding:var(--space-xs) var(--space-md);border-radius:var(--radius-xl);font-size:.875rem;font-weight:600}.total-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-success),#059669);color:#fff;padding:var(--space-sm) var(--space-lg);border-radius:var(--radius-lg);font-size:1.125rem;font-weight:700;box-shadow:var(--shadow-md)}.expenses-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md)}.expense-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:var(--space-md);padding:var(--space-md);background:var(--color-bg);border-radius:var(--radius-md);transition:all var(--transition-base);border:1px solid var(--color-border)}.expense-item[_ngcontent-%COMP%]:hover{background:#fee;transform:translate(4px);border-color:var(--color-danger)}.expense-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xs);flex:1}.expense-name[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text)}.expense-notes[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-muted);font-style:italic}.expense-date[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted)}.expense-amount[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:var(--space-xs)}.expense-price[_ngcontent-%COMP%]{font-weight:600;font-size:1.125rem;color:var(--color-danger)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl);color:var(--color-text-muted)}@media (max-width: 640px){.section-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.total-badge[_ngcontent-%COMP%]{width:100%;text-align:center}}"]})}}return n})();var ew=(()=>{class n{constructor(t){this.inventoryService=t,this.sales=[],this.expenses=[]}ngOnInit(){this.inventoryService.getSales().subscribe(t=>{this.sales=t}),this.inventoryService.getExpenses().subscribe(t=>{this.expenses=t})}get totalIncome(){return this.sales.filter(t=>t.pending!==!0).reduce((t,r)=>t+r.total,0)}get totalExpenses(){return this.expenses.reduce((t,r)=>t+r.price,0)}get netProfit(){return this.totalIncome-this.totalExpenses}get incomePercentage(){let t=this.totalIncome+this.totalExpenses;return t>0?this.totalIncome/t*100:0}get expensePercentage(){let t=this.totalIncome+this.totalExpenses;return t>0?this.totalExpenses/t*100:0}get profitMargin(){return this.totalIncome>0?this.netProfit/this.totalIncome*100:0}get completedSalesCount(){return this.sales.filter(t=>t.pending!==!0).length}get pendingSalesCount(){return this.sales.filter(t=>t.pending===!0).length}get averageSale(){let t=this.completedSalesCount;return t>0?this.totalIncome/t:0}static{this.\u0275fac=function(r){return new(r||n)(K(nn))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-reports"]],standalone:!0,features:[ze],decls:119,vars:62,consts:[[1,"reports-section"],[1,"summary-grid"],[1,"summary-card","income"],[1,"card-icon"],[1,"card-content"],[1,"card-label"],[1,"card-value"],[1,"summary-card","expense"],[1,"summary-card","profit"],[1,"summary-card","margin"],[1,"card","chart-card"],[1,"icon"],[1,"comparison-chart"],[1,"chart-row"],[1,"chart-label"],[1,"chart-bar-wrapper"],[1,"chart-bar","income-bar",3,"title"],[1,"chart-value"],[1,"chart-bar","expense-bar",3,"title"],[1,"chart-legend"],[1,"legend-item"],[1,"legend-color","income-color"],[1,"legend-color","expense-color"],[1,"breakdown-grid"],[1,"card"],[1,"breakdown-stats"],[1,"stat-row"],[1,"stat-label"],[1,"stat-value"]],template:function(r,i){r&1&&(p(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),y(4,"\u{1F4B0}"),f(),p(5,"div",4)(6,"div",5),y(7,"Total Income"),f(),p(8,"div",6),y(9),xe(10,"number"),f()()(),p(11,"div",7)(12,"div",3),y(13,"\u{1F4B8}"),f(),p(14,"div",4)(15,"div",5),y(16,"Total Expenses"),f(),p(17,"div",6),y(18),xe(19,"number"),f()()(),p(20,"div",8)(21,"div",3),y(22),f(),p(23,"div",4)(24,"div",5),y(25,"Net Profit"),f(),p(26,"div",6),y(27),xe(28,"number"),f()()(),p(29,"div",9)(30,"div",3),y(31,"\u{1F4CA}"),f(),p(32,"div",4)(33,"div",5),y(34,"Profit Margin"),f(),p(35,"div",6),y(36),xe(37,"number"),f()()()(),p(38,"div",10)(39,"h3")(40,"span",11),y(41,"\u{1F4CA}"),f(),y(42," Income vs Expenses "),f(),p(43,"div",12)(44,"div",13)(45,"div",14),y(46,"Income"),f(),p(47,"div",15),Pe(48,"div",16),xe(49,"number"),f(),p(50,"div",17),y(51),xe(52,"number"),f()(),p(53,"div",13)(54,"div",14),y(55,"Expenses"),f(),p(56,"div",15),Pe(57,"div",18),xe(58,"number"),f(),p(59,"div",17),y(60),xe(61,"number"),f()()(),p(62,"div",19)(63,"div",20),Pe(64,"span",21),p(65,"span"),y(66),xe(67,"number"),f()(),p(68,"div",20),Pe(69,"span",22),p(70,"span"),y(71),xe(72,"number"),f()()()(),p(73,"div",23)(74,"div",24)(75,"h3")(76,"span",11),y(77,"\u{1F4B5}"),f(),y(78," Income Breakdown "),f(),p(79,"div",25)(80,"div",26)(81,"span",27),y(82,"Total Sales:"),f(),p(83,"span",28),y(84),f()(),p(85,"div",26)(86,"span",27),y(87,"Pending Deliveries:"),f(),p(88,"span",28),y(89),f()(),p(90,"div",26)(91,"span",27),y(92,"Average Sale:"),f(),p(93,"span",28),y(94),xe(95,"number"),f()()()(),p(96,"div",24)(97,"h3")(98,"span",11),y(99,"\u{1F4B3}"),f(),y(100," Expense Breakdown "),f(),p(101,"div",25)(102,"div",26)(103,"span",27),y(104,"Total Expenses:"),f(),p(105,"span",28),y(106),f()(),p(107,"div",26)(108,"span",27),y(109,"Average Expense:"),f(),p(110,"span",28),y(111),xe(112,"number"),f()(),p(113,"div",26)(114,"span",27),y(115,"Expense Ratio:"),f(),p(116,"span",28),y(117),xe(118,"number"),f()()()()()()),r&2&&(_(9),J("$",Ne(10,23,i.totalIncome,"1.2-2"),""),_(9),J("$",Ne(19,26,i.totalExpenses,"1.2-2"),""),_(2),De("negative",i.netProfit<0),_(2),G(i.netProfit>=0?"\u{1F4C8}":"\u{1F4C9}"),_(5),J("$",Ne(28,29,i.netProfit,"1.2-2"),""),_(9),J("",Ne(37,32,i.profitMargin,"1.1-1"),"%"),_(12),Gn("width",i.incomePercentage,"%"),P("title","$"+Ne(49,35,i.totalIncome,"1.2-2")),_(3),J("$",Ne(52,38,i.totalIncome,"1.2-2"),""),_(6),Gn("width",i.expensePercentage,"%"),P("title","$"+Ne(58,41,i.totalExpenses,"1.2-2")),_(3),J("$",Ne(61,44,i.totalExpenses,"1.2-2"),""),_(6),J("Income (",Ne(67,47,i.incomePercentage,"1.1-1"),"%)"),_(5),J("Expenses (",Ne(72,50,i.expensePercentage,"1.1-1"),"%)"),_(13),G(i.completedSalesCount),_(5),G(i.pendingSalesCount),_(5),J("$",Ne(95,53,i.averageSale,"1.2-2"),""),_(12),G(i.expenses.length),_(5),J("$",i.expenses.length>0?i.totalExpenses/i.expenses.length:Ne(112,56,0,"1.2-2"),""),_(6),J("",Ne(118,59,i.expensePercentage,"1.1-1"),"%"))},dependencies:[Ue,ib],styles:[".reports-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xl)}.summary-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:var(--space-lg)}.summary-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-primary),var(--color-primary-dark));color:#fff;padding:var(--space-xl);border-radius:var(--radius-lg);box-shadow:var(--shadow-lg);display:flex;align-items:center;gap:var(--space-lg);transition:all var(--transition-base);min-width:0;overflow:hidden}.summary-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:var(--shadow-xl)}.summary-card.income[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-success),#059669)}.summary-card.expense[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-danger),#dc2626)}.summary-card.profit[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#1e40af)}.summary-card.profit.negative[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706)}.summary-card.margin[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#6d28d9)}.card-icon[_ngcontent-%COMP%]{font-size:3rem;opacity:.9;flex-shrink:0}.card-content[_ngcontent-%COMP%]{flex:1;min-width:0;overflow:hidden}.card-label[_ngcontent-%COMP%]{font-size:.875rem;opacity:.9;margin-bottom:var(--space-xs);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.card-value[_ngcontent-%COMP%]{font-size:clamp(1rem,3vw,1.5rem);font-weight:700;word-break:break-all;overflow-wrap:break-word}.chart-card[_ngcontent-%COMP%]{margin-top:var(--space-lg)}.icon[_ngcontent-%COMP%]{font-size:1.5rem}h3[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);margin-bottom:var(--space-lg)}.comparison-chart[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg);margin:var(--space-xl) 0}.chart-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:100px 1fr 120px;gap:var(--space-md);align-items:center}.chart-label[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text)}.chart-bar-wrapper[_ngcontent-%COMP%]{height:40px;background:var(--color-bg);border-radius:var(--radius-md);overflow:hidden;border:1px solid var(--color-border)}.chart-bar[_ngcontent-%COMP%]{height:100%;transition:width .5s ease;min-width:2%;display:flex;align-items:center;justify-content:flex-end;padding-right:var(--space-sm);color:#fff;font-weight:600}.income-bar[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--color-success),#10b981)}.expense-bar[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--color-danger),#ef4444)}.chart-value[_ngcontent-%COMP%]{font-weight:700;font-size:1.125rem;color:var(--color-text);text-align:right}.chart-legend[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:var(--space-xl);margin-top:var(--space-lg);padding-top:var(--space-lg);border-top:1px solid var(--color-border)}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);font-size:.875rem;color:var(--color-text)}.legend-color[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:var(--radius-sm)}.income-color[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-success),#10b981)}.expense-color[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-danger),#ef4444)}.breakdown-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:var(--space-lg)}.breakdown-stats[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md);margin-top:var(--space-lg)}.stat-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--space-sm) 0;border-bottom:1px solid var(--color-border)}.stat-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.stat-label[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-muted)}.stat-value[_ngcontent-%COMP%]{font-weight:600;font-size:1rem;color:var(--color-text)}@media (max-width: 768px){.summary-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.chart-row[_ngcontent-%COMP%]{grid-template-columns:80px 1fr 100px}.chart-legend[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.breakdown-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return n})();function UN(n,e){if(n&1&&(p(0,"div",22)(1,"div",23),y(2),f(),p(3,"h3",24),y(4),f(),p(5,"p",25),y(6),f()()),n&2){let t=e.$implicit;_(2),G(t.icon),_(2),G(t.title),_(2),G(t.description)}}var tw=(()=>{class n{constructor(){this.features=[{icon:"\u{1F4E6}",title:"Product Management",description:"Add, track, and manage your inventory with ease"},{icon:"\u{1F4B0}",title:"Point of Sale",description:"Quick and efficient sales processing with delivery scheduling"},{icon:"\u{1F4CA}",title:"Analytics & Reports",description:"Track income, expenses, and profit margins in real-time"},{icon:"\u{1F465}",title:"Customer Management",description:"Maintain customer records and delivery information"},{icon:"\u{1F4B8}",title:"Expense Tracking",description:"Monitor business expenses and maintain financial records"},{icon:"\u{1F69A}",title:"Delivery Management",description:"Schedule and track pending deliveries efficiently"}]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=$e({type:n,selectors:[["app-landing"]],standalone:!0,features:[ze],decls:43,vars:1,consts:[[1,"landing-page"],[1,"hero-section"],[1,"hero-content"],[1,"hero-icon"],[1,"hero-title"],[1,"hero-subtitle"],[1,"hero-description"],[1,"hero-stats"],[1,"stat-item"],[1,"stat-icon"],[1,"stat-text"],[1,"features-section"],[1,"section-title"],[1,"section-subtitle"],[1,"features-grid"],["class","feature-card",4,"ngFor","ngForOf"],[1,"cta-section"],[1,"cta-content"],[1,"cta-title"],[1,"cta-description"],[1,"cta-arrow"],[1,"arrow-icon"],[1,"feature-card"],[1,"feature-icon"],[1,"feature-title"],[1,"feature-description"]],template:function(r,i){r&1&&(p(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),y(4,"\u{1F4E6}"),f(),p(5,"h1",4),y(6,"Welcome to JJM Inventory"),f(),p(7,"p",5),y(8,"Your complete business management solution"),f(),p(9,"p",6),y(10," Streamline your inventory, sales, and customer management all in one place. Track expenses, monitor profits, and grow your business with confidence. "),f(),p(11,"div",7)(12,"div",8)(13,"div",9),y(14,"\u26A1"),f(),p(15,"div",10),y(16,"Fast & Efficient"),f()(),p(17,"div",8)(18,"div",9),y(19,"\u{1F512}"),f(),p(20,"div",10),y(21,"Secure & Reliable"),f()(),p(22,"div",8)(23,"div",9),y(24,"\u{1F4F1}"),f(),p(25,"div",10),y(26,"Fully Responsive"),f()()()()(),p(27,"div",11)(28,"h2",12),y(29,"Powerful Features"),f(),p(30,"p",13),y(31,"Everything you need to manage your business effectively"),f(),p(32,"div",14),z(33,UN,7,3,"div",15),f()(),p(34,"div",16)(35,"div",17)(36,"h2",18),y(37,"Ready to Get Started?"),f(),p(38,"p",19),y(39," Choose a tab above to begin managing your inventory, processing sales, or viewing reports. "),f(),p(40,"div",20)(41,"span",21),y(42,"\u2191"),f()()()()()),r&2&&(_(33),P("ngForOf",i.features))},dependencies:[Ue,ut],styles:['.landing-page[_ngcontent-%COMP%]{min-height:calc(100vh - 300px);animation:_ngcontent-%COMP%_fadeIn .6s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.hero-section[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl) 0;background:linear-gradient(135deg,#3b82f60d,#9333ea0d);border-radius:var(--radius-lg);margin-bottom:var(--space-2xl)}.hero-content[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:0 var(--space-lg)}.hero-icon[_ngcontent-%COMP%]{font-size:5rem;margin-bottom:var(--space-lg);animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-15px)}}.hero-title[_ngcontent-%COMP%]{font-size:3rem;font-weight:700;color:var(--color-text);margin-bottom:var(--space-md);background:linear-gradient(135deg,var(--color-primary),var(--color-primary-light));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.hero-subtitle[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--color-text-muted);margin-bottom:var(--space-lg);font-weight:500}.hero-description[_ngcontent-%COMP%]{font-size:1.125rem;color:var(--color-text-muted);line-height:1.8;margin-bottom:var(--space-2xl);max-width:600px;margin-left:auto;margin-right:auto}.hero-stats[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:var(--space-2xl);flex-wrap:wrap;margin-top:var(--space-2xl)}.stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);padding:var(--space-md) var(--space-lg);background:var(--color-surface);border-radius:var(--radius-lg);box-shadow:var(--shadow-sm);transition:all var(--transition-base)}.stat-item[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:var(--shadow-md)}.stat-icon[_ngcontent-%COMP%]{font-size:1.5rem}.stat-text[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text)}.features-section[_ngcontent-%COMP%]{padding:var(--space-2xl) 0}.section-title[_ngcontent-%COMP%]{text-align:center;font-size:2.5rem;font-weight:700;color:var(--color-text);margin-bottom:var(--space-md)}.section-subtitle[_ngcontent-%COMP%]{text-align:center;font-size:1.125rem;color:var(--color-text-muted);margin-bottom:var(--space-2xl)}.features-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:var(--space-xl);margin-top:var(--space-2xl)}.feature-card[_ngcontent-%COMP%]{background:var(--color-surface);padding:var(--space-xl);border-radius:var(--radius-lg);border:1px solid var(--color-border);transition:all var(--transition-base);text-align:center;position:relative;overflow:hidden}.feature-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(59,130,246,.1),transparent);transition:left .6s ease}.feature-card[_ngcontent-%COMP%]:hover:before{left:100%}.feature-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:var(--shadow-xl);border-color:var(--color-primary)}.feature-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:var(--space-md);transition:transform var(--transition-base)}.feature-card[_ngcontent-%COMP%]:hover   .feature-icon[_ngcontent-%COMP%]{transform:scale(1.2) rotate(5deg)}.feature-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--color-text);margin-bottom:var(--space-sm)}.feature-description[_ngcontent-%COMP%]{font-size:.9375rem;color:var(--color-text-muted);line-height:1.6}.cta-section[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl) 0;margin-top:var(--space-2xl)}.cta-content[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:var(--space-2xl);background:linear-gradient(135deg,var(--color-primary),var(--color-primary-dark));border-radius:var(--radius-lg);color:#fff;box-shadow:var(--shadow-xl)}.cta-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:var(--space-md)}.cta-description[_ngcontent-%COMP%]{font-size:1.125rem;margin-bottom:var(--space-lg);opacity:.95}.cta-arrow[_ngcontent-%COMP%]{margin-top:var(--space-xl)}.arrow-icon[_ngcontent-%COMP%]{font-size:3rem;display:inline-block;animation:_ngcontent-%COMP%_bounce 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}@media (max-width: 768px){.hero-title[_ngcontent-%COMP%]{font-size:2rem}.hero-subtitle[_ngcontent-%COMP%]{font-size:1.25rem}.hero-description[_ngcontent-%COMP%]{font-size:1rem}.hero-stats[_ngcontent-%COMP%]{flex-direction:column;gap:var(--space-md)}.section-title[_ngcontent-%COMP%]{font-size:2rem}.features-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.cta-title[_ngcontent-%COMP%]{font-size:1.5rem}}']})}}return n})();var lo=(()=>{class n{constructor(t){this.http=t,this.apiUrl=Pn.apiUrl,this.usersSubject=new ct([]),this.users$=this.usersSubject.asObservable(),this.loadUsers()}hashPassword(t){return B(this,null,function*(){let i=new TextEncoder().encode(t),o=yield crypto.subtle.digest("SHA-256",i);return Array.from(new Uint8Array(o)).map(s=>s.toString(16).padStart(2,"0")).join("")})}loadUsers(){this.http.get(`${this.apiUrl}/users`).subscribe({next:t=>{let r=t.map(i=>this.transformUser(i));r.length===0?this.initializeDefaultAdmin():this.usersSubject.next(r)},error:t=>{console.error("Error fetching users:",t),t.status===404&&this.initializeDefaultAdmin()}})}initializeDefaultAdmin(){return B(this,null,function*(){if(this.usersSubject.value.length>0)return;let r={id:"admin-1",username:"jjm143256789",fullName:"System Administrator",password:yield this.hashPassword("Gr*l0v3R"),role:"admin",createdAt:new Date};this.http.post(`${this.apiUrl}/users`,r).subscribe({next:i=>{let o=this.transformUser(i);this.usersSubject.next([o])},error:i=>{console.warn("Could not save default admin to backend, using local only",i),this.usersSubject.next([r])}})})}getUsers(){return this.users$}addUser(t){let r=le(Y({},t),{createdAt:new Date});return bn(this.hashPassword(t.password||"")).pipe(Li(i=>(r.password=i,this.http.post(`${this.apiUrl}/users`,r))),lt(i=>{let o=this.transformUser(i),s=this.usersSubject.value;return this.usersSubject.next([...s,o]),o}))}updateUser(t){return new je(r=>{B(this,null,function*(){let o=Y({},t);o.password&&(o.password=yield this.hashPassword(o.password)),this.http.put(`${this.apiUrl}/users/${o.id}`,o).subscribe({next:s=>{let c=this.transformUser(s),d=this.usersSubject.value.map(m=>m.id===c.id?c:m);this.usersSubject.next(d),r.next(c),r.complete()},error:s=>r.error(s)})})})}deleteUser(t){return this.http.delete(`${this.apiUrl}/users/${t}`).pipe(lt(()=>{let r=this.usersSubject.value;this.usersSubject.next(r.filter(i=>i.id!==t))}))}getUserById(t){return this.usersSubject.value.find(r=>r.id===t)}validateCredentials(t,r){return bn(this.hashPassword(r)).pipe(Li(i=>this.users$.pipe(Vi(1),lt(o=>o.find(c=>c.username===t&&c.password===i)||null))))}transformUser(t){return le(Y({},t),{createdAt:this.parseDate(t.createdAt)})}parseDate(t){return t?t instanceof Date?t:typeof t=="string"?new Date(t):typeof t=="object"&&t._seconds!==void 0?new Date(t._seconds*1e3):new Date(t):new Date}static{this.\u0275fac=function(r){return new(r||n)(oe(Zn))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function $N(n,e){if(n&1&&Pe(0,"div",18),n&2){let t=e.$implicit;Gn("left",t.x,"%")("top",t.y,"%")("width",t.size,"px")("height",t.size,"px")("animation-delay",t.delay,"s")}}function zN(n,e){if(n&1&&(p(0,"div",19)(1,"span",20),y(2,"\u26A0\uFE0F"),f(),y(3),f()),n&2){let t=O();_(3),J(" ",t.errorMessage," ")}}function HN(n,e){n&1&&(p(0,"span"),y(1,"Sign In"),f())}function qN(n,e){n&1&&(p(0,"span",21),Pe(1,"span",22),y(2," Signing in... "),f())}var nw=(()=>{class n{constructor(t){this.userService=t,this.username="",this.password="",this.errorMessage="",this.isLoading=!1,this.bubbles=[]}ngOnInit(){this.generateBubbles()}ngOnDestroy(){}onMouseMove(t){document.querySelectorAll(".bubble").forEach(i=>{let o=i,s=o.getBoundingClientRect(),c=s.left+s.width/2,l=s.top+s.height/2,d=t.clientX-c,m=t.clientY-l,g=Math.sqrt(d*d+m*m);if(g<250){let b=(250-g)/250,C=d/g*b*50,N=m/g*b*50;o.style.transform=`translate(${C}px, ${N}px) scale(${1+b*.3})`}else o.style.transform="translate(0, 0) scale(1)"})}generateBubbles(){for(let t=0;t<15;t++)this.bubbles.push({x:Math.random()*100,y:Math.random()*100,size:Math.random()*100+50,delay:Math.random()*5})}onLogin(){if(this.errorMessage="",!this.username||!this.password){this.errorMessage="Please enter both username and password";return}this.isLoading=!0,setTimeout(()=>{this.userService.validateCredentials(this.username,this.password).subscribe(t=>{t?(localStorage.setItem("jjm_logged_in","true"),localStorage.setItem("jjm_username",this.username),localStorage.setItem("jjm_user_id",t.id),localStorage.setItem("jjm_role",t.role),window.location.reload()):(this.errorMessage="Invalid username or password",this.isLoading=!1)})},800)}static{this.\u0275fac=function(r){return new(r||n)(K(lo))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-login"]],hostBindings:function(r,i){r&1&&U("mousemove",function(s){return i.onMouseMove(s)})},standalone:!0,features:[ze],decls:24,vars:9,consts:[[1,"login-container"],[1,"bubbles-container"],["class","bubble",3,"left","top","width","height","animation-delay",4,"ngFor","ngForOf"],[1,"login-card"],[1,"login-header"],[1,"logo-icon"],[1,"login-title"],[1,"login-subtitle"],[1,"login-form",3,"ngSubmit"],[1,"form-group"],["for","username"],["type","text","id","username","name","username","placeholder","Enter your username","required","",3,"ngModelChange","ngModel","disabled"],["for","password"],["type","password","id","password","name","password","placeholder","Enter your password","required","",3,"ngModelChange","ngModel","disabled"],["class","error-message",4,"ngIf"],["type","submit",1,"login-button",3,"disabled"],[4,"ngIf"],["class","loading-spinner",4,"ngIf"],[1,"bubble"],[1,"error-message"],[1,"error-icon"],[1,"loading-spinner"],[1,"spinner"]],template:function(r,i){r&1&&(p(0,"div",0)(1,"div",1),z(2,$N,1,10,"div",2),f(),p(3,"div",3)(4,"div",4)(5,"div",5),y(6,"\u{1F4E6}"),f(),p(7,"h1",6),y(8,"JJM Inventory"),f(),p(9,"p",7),y(10,"Sign in to your account"),f()(),p(11,"form",8),U("ngSubmit",function(){return i.onLogin()}),p(12,"div",9)(13,"label",10),y(14,"Username"),f(),p(15,"input",11),Z("ngModelChange",function(s){return te(i.username,s)||(i.username=s),s}),f()(),p(16,"div",9)(17,"label",12),y(18,"Password"),f(),p(19,"input",13),Z("ngModelChange",function(s){return te(i.password,s)||(i.password=s),s}),f()(),z(20,zN,4,1,"div",14),p(21,"button",15),z(22,HN,2,0,"span",16)(23,qN,3,0,"span",17),f()()()()),r&2&&(_(2),P("ngForOf",i.bubbles),_(13),X("ngModel",i.username),P("disabled",i.isLoading),_(4),X("ngModel",i.password),P("disabled",i.isLoading),_(),P("ngIf",i.errorMessage),_(),P("disabled",i.isLoading),_(),P("ngIf",!i.isLoading),_(),P("ngIf",i.isLoading))},dependencies:[Ue,ut,Xe,ft,en,dt,ht,Zt,Ht,st,zt],styles:['.login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:var(--color-bg);padding:var(--space-lg);position:relative;overflow:hidden}.bubbles-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;z-index:0}.bubble[_ngcontent-%COMP%]{position:absolute;border-radius:50%;background:radial-gradient(circle at 30% 30%,#3b82f64d,#9333ea33);-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);animation:_ngcontent-%COMP%_float 8s ease-in-out infinite;transition:transform .15s ease-out;box-shadow:inset 0 0 20px #fff3,0 8px 32px #3b82f633;border:1px solid rgba(255,255,255,.1)}.bubble[_ngcontent-%COMP%]:before{content:"";position:absolute;top:10%;left:10%;width:40%;height:40%;background:radial-gradient(circle,rgba(255,255,255,.4),transparent);border-radius:50%}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0) rotate(0)}25%{transform:translateY(-20px) rotate(90deg)}50%{transform:translateY(0) rotate(180deg)}75%{transform:translateY(20px) rotate(270deg)}}.login-card[_ngcontent-%COMP%]{background:var(--color-surface);border-radius:var(--radius-xl);box-shadow:0 20px 60px #0000004d;padding:var(--space-2xl);width:100%;max-width:420px;animation:_ngcontent-%COMP%_slideIn .5s cubic-bezier(.16,1,.3,1);position:relative;z-index:1}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(30px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--space-2xl)}.logo-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:var(--space-md);animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.login-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--color-text);margin-bottom:var(--space-xs);background:linear-gradient(135deg,var(--color-primary),var(--color-primary-light));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.login-subtitle[_ngcontent-%COMP%]{color:var(--color-text-muted);font-size:.9375rem;margin:0}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:var(--color-text)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:var(--space-md);font-size:1rem;border:2px solid var(--color-border);border-radius:var(--radius-md);transition:all var(--transition-base);background:var(--color-surface)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 4px #3b82f61a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.error-message[_ngcontent-%COMP%]{background:#fee;color:var(--color-danger);padding:var(--space-md);border-radius:var(--radius-md);font-size:.875rem;border:1px solid rgba(239,68,68,.2);display:flex;align-items:center;gap:var(--space-sm);animation:_ngcontent-%COMP%_shake .4s ease}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-10px)}75%{transform:translate(10px)}}.error-icon[_ngcontent-%COMP%]{font-size:1.25rem}.login-button[_ngcontent-%COMP%]{padding:var(--space-md) var(--space-xl);font-size:1rem;font-weight:600;background:linear-gradient(135deg,var(--color-primary),var(--color-primary-light));color:#fff;border:none;border-radius:var(--radius-md);cursor:pointer;transition:all var(--transition-base);box-shadow:0 4px 12px #3b82f64d}.login-button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 20px #3b82f666}.login-button[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.login-button[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.loading-spinner[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:var(--space-sm)}.spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.login-footer[_ngcontent-%COMP%]{margin-top:var(--space-2xl);padding-top:var(--space-lg);border-top:1px solid var(--color-border);text-align:center}.demo-credentials[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-muted);line-height:1.6;margin:0}.demo-credentials[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--color-text)}.demo-credentials[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background:var(--color-bg);padding:2px 6px;border-radius:var(--radius-sm);font-family:Courier New,monospace;color:var(--color-primary);font-weight:600}@media (max-width: 480px){.login-card[_ngcontent-%COMP%]{padding:var(--space-xl)}.login-title[_ngcontent-%COMP%]{font-size:1.5rem}.logo-icon[_ngcontent-%COMP%]{font-size:3rem}}']})}}return n})();function GN(n,e){if(n&1&&(p(0,"option",18),y(1),xe(2,"titlecase"),f()),n&2){let t=e.$implicit;P("value",t),_(),J(" ",bs(2,2,t)," ")}}function WN(n,e){if(n&1&&(p(0,"option",18),y(1),xe(2,"titlecase"),f()),n&2){let t=e.$implicit;P("value",t),_(),J(" ",bs(2,2,t)," ")}}function KN(n,e){if(n&1&&(p(0,"span",33),y(1),f()),n&2){let t=O().$implicit;_(),J("\u2022 ",t.details,"")}}function QN(n,e){if(n&1&&(p(0,"div",21)(1,"div",22)(2,"span",23),y(3),f(),p(4,"span",24),y(5),f()(),p(6,"div",25)(7,"div",26)(8,"span",27),y(9),f(),p(10,"span",28),y(11),f()(),p(12,"div",29)(13,"span",30),y(14),f(),z(15,KN,2,1,"span",31),f()(),p(16,"div",32),y(17),xe(18,"date"),f()()),n&2){let t=e.$implicit,r=O(2);_(3),G(r.getEntityIcon(t.entityType)),_(2),G(r.getActionIcon(t.action)),_(4),G(t.entityName),_(2),G(t.action),_(3),G(t.entityType),_(),P("ngIf",t.details),_(2),J(" ",Ne(18,7,t==null?null:t.timestamp,"medium")," ")}}function YN(n,e){if(n&1&&(p(0,"div",19),z(1,QN,19,10,"div",20),f()),n&2){let t=O();_(),P("ngForOf",t.paginatedLogs)}}function JN(n,e){n&1&&(p(0,"div",34)(1,"p"),y(2,"No activity logs found"),f()())}function XN(n,e){if(n&1){let t=fe();p(0,"div",35)(1,"button",36),U("click",function(){V(t);let i=O();return L(i.prevPage())}),y(2," \u2190 Prev "),f(),p(3,"span",37),y(4),f(),p(5,"button",36),U("click",function(){V(t);let i=O();return L(i.nextPage())}),y(6," Next \u2192 "),f()()}if(n&2){let t=O();_(),P("disabled",t.currentPage===1),_(3),Kn(" Page ",t.currentPage," of ",t.totalPages," "),_(),P("disabled",t.currentPage===t.totalPages)}}var rw=(()=>{class n{constructor(t){this.loggingService=t,this.logs=[],this.filteredLogs=[],this.selectedEntityType="all",this.selectedAction="all",this.currentPage=1,this.pageSize=20,this.entityTypes=["all","product","sale","expense","customer"],this.actions=["all","create","update","delete","restock","complete"]}ngOnInit(){this.loggingService.getLogs().subscribe(t=>{this.logs=t.map(r=>le(Y({},r),{timestamp:new Date(r.timestamp?._seconds*1e3||new Date)})),this.applyFilters()})}applyFilters(){this.filteredLogs=this.logs.filter(t=>{let r=this.selectedEntityType==="all"||t.entityType===this.selectedEntityType,i=this.selectedAction==="all"||t.action===this.selectedAction;return r&&i}),this.currentPage=1}get paginatedLogs(){let t=(this.currentPage-1)*this.pageSize,r=t+this.pageSize;return this.filteredLogs.slice(t,r)}get totalPages(){return Math.ceil(this.filteredLogs.length/this.pageSize)}nextPage(){this.currentPage<this.totalPages&&this.currentPage++}prevPage(){this.currentPage>1&&this.currentPage--}refreshLogs(){this.loggingService.refreshLogs()}cleanupOldLogs(){confirm("This will delete all logs older than 30 days. Continue?")&&this.loggingService.cleanupOldLogs().subscribe({next:t=>{alert(`Cleanup completed! Deleted ${t.deletedCount} logs.`),this.refreshLogs()},error:t=>{console.error("Cleanup error:",t),alert("Failed to cleanup logs")}})}getActionIcon(t){return{create:"\u2795",update:"\u270F\uFE0F",delete:"\u{1F5D1}\uFE0F",restock:"\u{1F4E6}",complete:"\u2705"}[t]||"\u{1F4DD}"}getEntityIcon(t){return{product:"\u{1F4E6}",sale:"\u{1F4B0}",expense:"\u{1F4B8}",customer:"\u{1F464}"}[t]||"\u{1F4C4}"}static{this.\u0275fac=function(r){return new(r||n)(K(yl))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-activity-logs"]],standalone:!0,features:[ze],decls:29,vars:8,consts:[["noLogs",""],[1,"activity-logs-section"],[1,"card"],[1,"header-section"],[1,"icon"],[1,"badge"],[1,"header-actions"],[1,"btn-refresh",3,"click"],[1,"btn-cleanup",3,"click"],[1,"filters-section"],[1,"filter-group"],["for","entityFilter"],["id","entityFilter",1,"filter-select",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","actionFilter"],["id","actionFilter",1,"filter-select",3,"ngModelChange","change","ngModel"],["class","logs-list",4,"ngIf","ngIfElse"],["class","pagination",4,"ngIf"],[3,"value"],[1,"logs-list"],["class","log-item",4,"ngFor","ngForOf"],[1,"log-item"],[1,"log-icon"],[1,"entity-icon"],[1,"action-icon"],[1,"log-info"],[1,"log-header"],[1,"log-entity"],[1,"log-action-badge"],[1,"log-details"],[1,"log-type"],["class","log-description",4,"ngIf"],[1,"log-timestamp"],[1,"log-description"],[1,"empty-state"],[1,"pagination"],[1,"pagination-btn",3,"click","disabled"],[1,"page-info"]],template:function(r,i){if(r&1){let o=fe();p(0,"div",1)(1,"div",2)(2,"div",3)(3,"h3")(4,"span",4),y(5,"\u{1F4CB}"),f(),y(6," Activity Logs "),p(7,"span",5),y(8),f()(),p(9,"div",6)(10,"button",7),U("click",function(){return V(o),L(i.refreshLogs())}),y(11," \u{1F504} Refresh "),f(),p(12,"button",8),U("click",function(){return V(o),L(i.cleanupOldLogs())}),y(13," \u{1F5D1}\uFE0F Cleanup Old Logs "),f()()(),p(14,"div",9)(15,"div",10)(16,"label",11),y(17,"Entity Type:"),f(),p(18,"select",12),Z("ngModelChange",function(c){return V(o),te(i.selectedEntityType,c)||(i.selectedEntityType=c),L(c)}),U("change",function(){return V(o),L(i.applyFilters())}),z(19,GN,3,4,"option",13),f()(),p(20,"div",10)(21,"label",14),y(22,"Action:"),f(),p(23,"select",15),Z("ngModelChange",function(c){return V(o),te(i.selectedAction,c)||(i.selectedAction=c),L(c)}),U("change",function(){return V(o),L(i.applyFilters())}),z(24,WN,3,4,"option",13),f()()(),z(25,YN,2,1,"div",16)(26,JN,3,0,"ng-template",null,0,Qn)(28,XN,7,4,"div",17),f()()}if(r&2){let o=Wn(27);_(8),G(i.filteredLogs.length),_(10),X("ngModel",i.selectedEntityType),_(),P("ngForOf",i.entityTypes),_(4),X("ngModel",i.selectedAction),_(),P("ngForOf",i.actions),_(),P("ngIf",i.paginatedLogs.length>0)("ngIfElse",o),_(3),P("ngIf",i.totalPages>1)}},dependencies:[Ue,ut,Xe,Jc,Tn,ft,Mn,An,tn,ht,st],styles:[".activity-logs-section[_ngcontent-%COMP%]{padding:var(--space-lg)}.header-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--space-lg);flex-wrap:wrap;gap:var(--space-md)}.header-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);margin:0}.header-actions[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm)}.btn-refresh[_ngcontent-%COMP%], .btn-cleanup[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);border:1px solid var(--color-border);background:var(--color-surface);color:var(--color-text);border-radius:var(--radius-md);cursor:pointer;font-size:.875rem;font-weight:500;transition:all var(--transition-base)}.btn-refresh[_ngcontent-%COMP%]:hover{background:var(--color-primary);color:#fff;border-color:var(--color-primary)}.btn-cleanup[_ngcontent-%COMP%]{background:var(--color-danger);color:#fff;border-color:var(--color-danger)}.btn-cleanup[_ngcontent-%COMP%]:hover{background:#dc2626}.filters-section[_ngcontent-%COMP%]{display:flex;gap:var(--space-lg);margin-bottom:var(--space-lg);padding:var(--space-md);background:var(--color-bg);border-radius:var(--radius-md);flex-wrap:wrap}.filter-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm)}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.filter-select[_ngcontent-%COMP%]{padding:var(--space-xs) var(--space-sm);border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-surface);color:var(--color-text);font-size:.875rem;cursor:pointer}.logs-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.log-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-md);padding:var(--space-md);background:var(--color-bg);border-radius:var(--radius-md);border:1px solid var(--color-border);transition:all var(--transition-base)}.log-item[_ngcontent-%COMP%]:hover{background:var(--color-surface);transform:translate(4px)}.log-icon[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:2px;font-size:1.25rem}.entity-icon[_ngcontent-%COMP%]{font-size:1.5rem}.action-icon[_ngcontent-%COMP%]{font-size:1rem}.log-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:var(--space-xs)}.log-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm)}.log-entity[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text);font-size:1rem}.log-action-badge[_ngcontent-%COMP%]{padding:2px 8px;background:var(--color-primary);color:#fff;border-radius:var(--radius-sm);font-size:.75rem;font-weight:500;text-transform:uppercase}.log-details[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-xs);font-size:.875rem;color:var(--color-text-muted)}.log-type[_ngcontent-%COMP%]{text-transform:capitalize;font-weight:500}.log-description[_ngcontent-%COMP%]{font-style:italic}.log-timestamp[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted);white-space:nowrap}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl);color:var(--color-text-muted)}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:var(--space-md);margin-top:var(--space-lg);padding-top:var(--space-lg);border-top:1px solid var(--color-border)}.pagination-btn[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);background:var(--color-surface);border:1px solid var(--color-border);color:var(--color-text);border-radius:var(--radius-md);font-size:.875rem;font-weight:500;cursor:pointer;transition:all var(--transition-base)}.pagination-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--color-primary);color:#fff;border-color:var(--color-primary)}.pagination-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.page-info[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text);font-weight:500}@media (max-width: 768px){.header-section[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.filters-section[_ngcontent-%COMP%]{flex-direction:column}.log-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.log-timestamp[_ngcontent-%COMP%]{align-self:flex-end}}"]})}}return n})();var iw=()=>{};var aw=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},ZN=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],c=n[t++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},cw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,c=s?n[i+1]:0,l=i+2<n.length,d=l?n[i+2]:0,m=o>>2,g=(o&3)<<4|c>>4,b=(c&15)<<2|d>>6,C=d&63;l||(C=64,s||(b=64)),r.push(t[m],t[g],t[b],t[C])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(aw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):ZN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||c==null||d==null||g==null)throw new Tf;let b=o<<2|c>>4;if(r.push(b),d!==64){let C=c<<4&240|d>>2;if(r.push(C),g!==64){let N=d<<6&192|g;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Tf=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},eO=function(n){let e=aw(n);return cw.encodeByteArray(e,!0)},Vs=function(n){return eO(n).replace(/\./g,"")},lw=function(n){try{return cw.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function uw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var tO=()=>uw().__FIREBASE_DEFAULTS__,nO=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},rO=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&lw(n[1]);return e&&JSON.parse(e)},Mf=()=>{try{return iw()||tO()||nO()||rO()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},iO=n=>Mf()?.emulatorHosts?.[n],dw=n=>{let e=iO(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Af=()=>Mf()?.config;var vl=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function _l(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function hw(n){return B(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function fw(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Y({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Vs(JSON.stringify(t)),Vs(JSON.stringify(s)),""].join(".")}var Fs={};function oO(){let n={prod:[],emulator:[]};for(let e of Object.keys(Fs))Fs[e]?n.emulator.push(e):n.prod.push(e);return n}function sO(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var ow=!1;function pw(n,e){if(typeof window>"u"||typeof document>"u"||!_l(window.location.host)||Fs[n]===e||Fs[n]||ow)return;Fs[n]=e;function t(b){return`__firebase__banner__${b}`}let r="__firebase__banner",o=oO().prod.length>0;function s(){let b=document.getElementById(r);b&&b.remove()}function c(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function l(b,C){b.setAttribute("width","24"),b.setAttribute("id",C),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function d(){let b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{ow=!0,s()},b}function m(b,C){b.setAttribute("id",C),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function g(){let b=sO(r),C=t("text"),N=document.getElementById(C)||document.createElement("span"),R=t("learnmore"),k=document.getElementById(R)||document.createElement("a"),H=t("preprendIcon"),re=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){let Q=b.element;c(Q),m(k,R);let Ce=d();l(re,H),Q.append(re,N,k,Ce),document.body.appendChild(Q)}o?(N.innerText="Preview backend disconnected.",re.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(re.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function mw(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function aO(){let n=Mf()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gw(){return!aO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Pf(){try{return typeof indexedDB=="object"}catch{return!1}}function yw(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var cO="FirebaseError",rr=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=cO,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ls.prototype.create)}},Ls=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?lO(o,r):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new rr(i,c,r)}};function lO(n,e){return n.replace(uO,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var uO=/\{\$([^}]+)}/g;function uo(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(sw(o)&&sw(s)){if(!uo(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function sw(n){return n!==null&&typeof n=="object"}var p5=4*60*60*1e3;function Nr(n){return n&&n._delegate?n._delegate:n}var ir=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var mi="[DEFAULT]";var Nf=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new vl;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hO(e))try{this.getOrInitializeService({instanceIdentifier:mi})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=mi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return B(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=mi){return this.instances.has(e)}getOptions(e=mi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&s.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:dO(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=mi){return this.component?this.component.multipleInstances?e:mi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function dO(n){return n===mi?void 0:n}function hO(n){return n.instantiationMode==="EAGER"}var bl=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Nf(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var fO=[],be=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(be||{}),pO={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},mO=be.INFO,gO={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},yO=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=gO[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ho=class{constructor(e){this.name=e,this._logLevel=mO,this._logHandler=yO,this._userLogHandler=null,fO.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}};var vO=(n,e)=>e.some(t=>n instanceof t),vw,_w;function _O(){return vw||(vw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bO(){return _w||(_w=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var bw=new WeakMap,Rf=new WeakMap,ww=new WeakMap,Of=new WeakMap,Ff=new WeakMap;function wO(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Nn(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&bw.set(t,n)}).catch(()=>{}),Ff.set(e,n),e}function CO(n){if(Rf.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});Rf.set(n,e)}var kf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Rf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||ww.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Nn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Cw(n){kf=n(kf)}function EO(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(wl(this),e,...t);return ww.set(r,e.sort?e.sort():[e]),Nn(r)}:bO().includes(n)?function(...e){return n.apply(wl(this),e),Nn(bw.get(this))}:function(...e){return Nn(n.apply(wl(this),e))}}function IO(n){return typeof n=="function"?EO(n):(n instanceof IDBTransaction&&CO(n),vO(n,_O())?new Proxy(n,kf):n)}function Nn(n){if(n instanceof IDBRequest)return wO(n);if(Of.has(n))return Of.get(n);let e=IO(n);return e!==n&&(Of.set(n,e),Ff.set(e,n)),e}var wl=n=>Ff.get(n);function Iw(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),c=Nn(s);return r&&s.addEventListener("upgradeneeded",l=>{r(Nn(s.result),l.oldVersion,l.newVersion,Nn(s.transaction),l)}),t&&s.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),c.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}var DO=["get","getKey","getAll","getAllKeys","count"],xO=["put","add","delete","clear"],Vf=new Map;function Ew(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Vf.get(e))return Vf.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=xO.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||DO.includes(t)))return;let o=function(s,...c){return B(this,null,function*(){let l=this.transaction(s,i?"readwrite":"readonly"),d=l.store;return r&&(d=d.index(c.shift())),(yield Promise.all([d[t](...c),i&&l.done]))[0]})};return Vf.set(e,o),o}Cw(n=>le(Y({},n),{get:(e,t,r)=>Ew(e,t)||n.get(e,t,r),has:(e,t)=>!!Ew(e,t)||n.has(e,t)}));var jf=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(SO(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function SO(n){return n.getComponent()?.type==="VERSION"}var Bf="@firebase/app",Dw="0.14.6";var or=new ho("@firebase/app"),TO="@firebase/app-compat",MO="@firebase/analytics-compat",AO="@firebase/analytics",PO="@firebase/app-check-compat",NO="@firebase/app-check",OO="@firebase/auth",RO="@firebase/auth-compat",kO="@firebase/database",FO="@firebase/data-connect",VO="@firebase/database-compat",LO="@firebase/functions",jO="@firebase/functions-compat",BO="@firebase/installations",UO="@firebase/installations-compat",$O="@firebase/messaging",zO="@firebase/messaging-compat",HO="@firebase/performance",qO="@firebase/performance-compat",GO="@firebase/remote-config",WO="@firebase/remote-config-compat",KO="@firebase/storage",QO="@firebase/storage-compat",YO="@firebase/firestore",JO="@firebase/ai",XO="@firebase/firestore-compat",ZO="firebase",eR="12.6.0";var Uf="[DEFAULT]",tR={[Bf]:"fire-core",[TO]:"fire-core-compat",[AO]:"fire-analytics",[MO]:"fire-analytics-compat",[NO]:"fire-app-check",[PO]:"fire-app-check-compat",[OO]:"fire-auth",[RO]:"fire-auth-compat",[kO]:"fire-rtdb",[FO]:"fire-data-connect",[VO]:"fire-rtdb-compat",[LO]:"fire-fn",[jO]:"fire-fn-compat",[BO]:"fire-iid",[UO]:"fire-iid-compat",[$O]:"fire-fcm",[zO]:"fire-fcm-compat",[HO]:"fire-perf",[qO]:"fire-perf-compat",[GO]:"fire-rc",[WO]:"fire-rc-compat",[KO]:"fire-gcs",[QO]:"fire-gcs-compat",[YO]:"fire-fst",[XO]:"fire-fst-compat",[JO]:"fire-vertex","fire-js":"fire-js",[ZO]:"fire-js-all"};var Cl=new Map,nR=new Map,$f=new Map;function xw(n,e){try{n.container.addComponent(e)}catch(t){or.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function js(n){let e=n.name;if($f.has(e))return or.debug(`There were multiple attempts to register component ${e}.`),!1;$f.set(e,n);for(let t of Cl.values())xw(t,n);for(let t of nR.values())xw(t,n);return!0}function Aw(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Pw(n){return n==null?!1:n.settings!==void 0}var rR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Or=new Ls("app","Firebase",rR);var zf=class{constructor(e,t,r){this._isDeleted=!1,this._options=Y({},e),this._config=Y({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ir("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Or.create("app-deleted",{appName:this._name})}};var Nw=eR;function Gf(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Y({name:Uf,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Or.create("bad-app-name",{appName:String(i)});if(t||(t=Af()),!t)throw Or.create("no-options");let o=Cl.get(i);if(o){if(uo(t,o.options)&&uo(r,o.config))return o;throw Or.create("duplicate-app",{appName:i})}let s=new bl(i);for(let l of $f.values())s.addComponent(l);let c=new zf(t,r,s);return Cl.set(i,c),c}function Ow(n=Uf){let e=Cl.get(n);if(!e&&n===Uf&&Af())return Gf();if(!e)throw Or.create("no-app",{appName:n});return e}function Rr(n,e,t){let r=tR[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),or.warn(s.join(" "));return}js(new ir(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var iR="firebase-heartbeat-database",oR=1,Bs="firebase-heartbeat-store",Lf=null;function Rw(){return Lf||(Lf=Iw(iR,oR,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Bs)}catch(t){console.warn(t)}}}}).catch(n=>{throw Or.create("idb-open",{originalErrorMessage:n.message})})),Lf}function sR(n){return B(this,null,function*(){try{let t=(yield Rw()).transaction(Bs),r=yield t.objectStore(Bs).get(kw(n));return yield t.done,r}catch(e){if(e instanceof rr)or.warn(e.message);else{let t=Or.create("idb-get",{originalErrorMessage:e?.message});or.warn(t.message)}}})}function Sw(n,e){return B(this,null,function*(){try{let r=(yield Rw()).transaction(Bs,"readwrite");yield r.objectStore(Bs).put(e,kw(n)),yield r.done}catch(t){if(t instanceof rr)or.warn(t.message);else{let r=Or.create("idb-set",{originalErrorMessage:t?.message});or.warn(r.message)}}})}function kw(n){return`${n.name}!${n.options.appId}`}var aR=1024,cR=30,Hf=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new qf(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return B(this,null,function*(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Tw();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>cR){let i=uR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){or.warn(e)}})}getHeartbeatsHeader(){return B(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=Tw(),{heartbeatsToSend:t,unsentEntries:r}=lR(this._heartbeatsCache.heartbeats),i=Vs(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return or.warn(e),""}})}};function Tw(){return new Date().toISOString().substring(0,10)}function lR(n,e=aR){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Mw(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Mw(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var qf=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return B(this,null,function*(){return Pf()?yw().then(()=>!0).catch(()=>!1):!1})}read(){return B(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield sR(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return B(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Sw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return B(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Sw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function Mw(n){return Vs(JSON.stringify({version:2,heartbeats:n})).length}function uR(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function dR(n){js(new ir("platform-logger",e=>new jf(e),"PRIVATE")),js(new ir("heartbeat",e=>new Hf(e),"PRIVATE")),Rr(Bf,Dw,n),Rr(Bf,Dw,"esm2020"),Rr("fire-js","")}dR("");var hR="firebase",fR="12.6.0";Rr(hR,fR,"app");var Fw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Vw={};var sr,Wf;(function(){var n;function e(x,w){function I(){}I.prototype=w.prototype,x.F=w.prototype,x.prototype=new I,x.prototype.constructor=x,x.D=function(S,D,M){for(var E=Array(arguments.length-2),At=2;At<arguments.length;At++)E[At-2]=arguments[At];return w.prototype[D].apply(S,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(x,w,I){I||(I=0);let S=Array(16);if(typeof w=="string")for(var D=0;D<16;++D)S[D]=w.charCodeAt(I++)|w.charCodeAt(I++)<<8|w.charCodeAt(I++)<<16|w.charCodeAt(I++)<<24;else for(D=0;D<16;++D)S[D]=w[I++]|w[I++]<<8|w[I++]<<16|w[I++]<<24;w=x.g[0],I=x.g[1],D=x.g[2];let M=x.g[3],E;E=w+(M^I&(D^M))+S[0]+3614090360&4294967295,w=I+(E<<7&4294967295|E>>>25),E=M+(D^w&(I^D))+S[1]+3905402710&4294967295,M=w+(E<<12&4294967295|E>>>20),E=D+(I^M&(w^I))+S[2]+606105819&4294967295,D=M+(E<<17&4294967295|E>>>15),E=I+(w^D&(M^w))+S[3]+3250441966&4294967295,I=D+(E<<22&4294967295|E>>>10),E=w+(M^I&(D^M))+S[4]+4118548399&4294967295,w=I+(E<<7&4294967295|E>>>25),E=M+(D^w&(I^D))+S[5]+1200080426&4294967295,M=w+(E<<12&4294967295|E>>>20),E=D+(I^M&(w^I))+S[6]+2821735955&4294967295,D=M+(E<<17&4294967295|E>>>15),E=I+(w^D&(M^w))+S[7]+4249261313&4294967295,I=D+(E<<22&4294967295|E>>>10),E=w+(M^I&(D^M))+S[8]+1770035416&4294967295,w=I+(E<<7&4294967295|E>>>25),E=M+(D^w&(I^D))+S[9]+2336552879&4294967295,M=w+(E<<12&4294967295|E>>>20),E=D+(I^M&(w^I))+S[10]+4294925233&4294967295,D=M+(E<<17&4294967295|E>>>15),E=I+(w^D&(M^w))+S[11]+2304563134&4294967295,I=D+(E<<22&4294967295|E>>>10),E=w+(M^I&(D^M))+S[12]+1804603682&4294967295,w=I+(E<<7&4294967295|E>>>25),E=M+(D^w&(I^D))+S[13]+4254626195&4294967295,M=w+(E<<12&4294967295|E>>>20),E=D+(I^M&(w^I))+S[14]+2792965006&4294967295,D=M+(E<<17&4294967295|E>>>15),E=I+(w^D&(M^w))+S[15]+1236535329&4294967295,I=D+(E<<22&4294967295|E>>>10),E=w+(D^M&(I^D))+S[1]+4129170786&4294967295,w=I+(E<<5&4294967295|E>>>27),E=M+(I^D&(w^I))+S[6]+3225465664&4294967295,M=w+(E<<9&4294967295|E>>>23),E=D+(w^I&(M^w))+S[11]+643717713&4294967295,D=M+(E<<14&4294967295|E>>>18),E=I+(M^w&(D^M))+S[0]+3921069994&4294967295,I=D+(E<<20&4294967295|E>>>12),E=w+(D^M&(I^D))+S[5]+3593408605&4294967295,w=I+(E<<5&4294967295|E>>>27),E=M+(I^D&(w^I))+S[10]+38016083&4294967295,M=w+(E<<9&4294967295|E>>>23),E=D+(w^I&(M^w))+S[15]+3634488961&4294967295,D=M+(E<<14&4294967295|E>>>18),E=I+(M^w&(D^M))+S[4]+3889429448&4294967295,I=D+(E<<20&4294967295|E>>>12),E=w+(D^M&(I^D))+S[9]+568446438&4294967295,w=I+(E<<5&4294967295|E>>>27),E=M+(I^D&(w^I))+S[14]+3275163606&4294967295,M=w+(E<<9&4294967295|E>>>23),E=D+(w^I&(M^w))+S[3]+4107603335&4294967295,D=M+(E<<14&4294967295|E>>>18),E=I+(M^w&(D^M))+S[8]+1163531501&4294967295,I=D+(E<<20&4294967295|E>>>12),E=w+(D^M&(I^D))+S[13]+2850285829&4294967295,w=I+(E<<5&4294967295|E>>>27),E=M+(I^D&(w^I))+S[2]+4243563512&4294967295,M=w+(E<<9&4294967295|E>>>23),E=D+(w^I&(M^w))+S[7]+1735328473&4294967295,D=M+(E<<14&4294967295|E>>>18),E=I+(M^w&(D^M))+S[12]+2368359562&4294967295,I=D+(E<<20&4294967295|E>>>12),E=w+(I^D^M)+S[5]+4294588738&4294967295,w=I+(E<<4&4294967295|E>>>28),E=M+(w^I^D)+S[8]+2272392833&4294967295,M=w+(E<<11&4294967295|E>>>21),E=D+(M^w^I)+S[11]+1839030562&4294967295,D=M+(E<<16&4294967295|E>>>16),E=I+(D^M^w)+S[14]+4259657740&4294967295,I=D+(E<<23&4294967295|E>>>9),E=w+(I^D^M)+S[1]+2763975236&4294967295,w=I+(E<<4&4294967295|E>>>28),E=M+(w^I^D)+S[4]+1272893353&4294967295,M=w+(E<<11&4294967295|E>>>21),E=D+(M^w^I)+S[7]+4139469664&4294967295,D=M+(E<<16&4294967295|E>>>16),E=I+(D^M^w)+S[10]+3200236656&4294967295,I=D+(E<<23&4294967295|E>>>9),E=w+(I^D^M)+S[13]+681279174&4294967295,w=I+(E<<4&4294967295|E>>>28),E=M+(w^I^D)+S[0]+3936430074&4294967295,M=w+(E<<11&4294967295|E>>>21),E=D+(M^w^I)+S[3]+3572445317&4294967295,D=M+(E<<16&4294967295|E>>>16),E=I+(D^M^w)+S[6]+76029189&4294967295,I=D+(E<<23&4294967295|E>>>9),E=w+(I^D^M)+S[9]+3654602809&4294967295,w=I+(E<<4&4294967295|E>>>28),E=M+(w^I^D)+S[12]+3873151461&4294967295,M=w+(E<<11&4294967295|E>>>21),E=D+(M^w^I)+S[15]+530742520&4294967295,D=M+(E<<16&4294967295|E>>>16),E=I+(D^M^w)+S[2]+3299628645&4294967295,I=D+(E<<23&4294967295|E>>>9),E=w+(D^(I|~M))+S[0]+4096336452&4294967295,w=I+(E<<6&4294967295|E>>>26),E=M+(I^(w|~D))+S[7]+1126891415&4294967295,M=w+(E<<10&4294967295|E>>>22),E=D+(w^(M|~I))+S[14]+2878612391&4294967295,D=M+(E<<15&4294967295|E>>>17),E=I+(M^(D|~w))+S[5]+4237533241&4294967295,I=D+(E<<21&4294967295|E>>>11),E=w+(D^(I|~M))+S[12]+1700485571&4294967295,w=I+(E<<6&4294967295|E>>>26),E=M+(I^(w|~D))+S[3]+2399980690&4294967295,M=w+(E<<10&4294967295|E>>>22),E=D+(w^(M|~I))+S[10]+4293915773&4294967295,D=M+(E<<15&4294967295|E>>>17),E=I+(M^(D|~w))+S[1]+2240044497&4294967295,I=D+(E<<21&4294967295|E>>>11),E=w+(D^(I|~M))+S[8]+1873313359&4294967295,w=I+(E<<6&4294967295|E>>>26),E=M+(I^(w|~D))+S[15]+4264355552&4294967295,M=w+(E<<10&4294967295|E>>>22),E=D+(w^(M|~I))+S[6]+2734768916&4294967295,D=M+(E<<15&4294967295|E>>>17),E=I+(M^(D|~w))+S[13]+1309151649&4294967295,I=D+(E<<21&4294967295|E>>>11),E=w+(D^(I|~M))+S[4]+4149444226&4294967295,w=I+(E<<6&4294967295|E>>>26),E=M+(I^(w|~D))+S[11]+3174756917&4294967295,M=w+(E<<10&4294967295|E>>>22),E=D+(w^(M|~I))+S[2]+718787259&4294967295,D=M+(E<<15&4294967295|E>>>17),E=I+(M^(D|~w))+S[9]+3951481745&4294967295,x.g[0]=x.g[0]+w&4294967295,x.g[1]=x.g[1]+(D+(E<<21&4294967295|E>>>11))&4294967295,x.g[2]=x.g[2]+D&4294967295,x.g[3]=x.g[3]+M&4294967295}r.prototype.v=function(x,w){w===void 0&&(w=x.length);let I=w-this.blockSize,S=this.C,D=this.h,M=0;for(;M<w;){if(D==0)for(;M<=I;)i(this,x,M),M+=this.blockSize;if(typeof x=="string"){for(;M<w;)if(S[D++]=x.charCodeAt(M++),D==this.blockSize){i(this,S),D=0;break}}else for(;M<w;)if(S[D++]=x[M++],D==this.blockSize){i(this,S),D=0;break}}this.h=D,this.o+=w},r.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var w=1;w<x.length-8;++w)x[w]=0;w=this.o*8;for(var I=x.length-8;I<x.length;++I)x[I]=w&255,w/=256;for(this.v(x),x=Array(16),w=0,I=0;I<4;++I)for(let S=0;S<32;S+=8)x[w++]=this.g[I]>>>S&255;return x};function o(x,w){var I=c;return Object.prototype.hasOwnProperty.call(I,x)?I[x]:I[x]=w(x)}function s(x,w){this.h=w;let I=[],S=!0;for(let D=x.length-1;D>=0;D--){let M=x[D]|0;S&&M==w||(I[D]=M,S=!1)}this.g=I}var c={};function l(x){return-128<=x&&x<128?o(x,function(w){return new s([w|0],w<0?-1:0)}):new s([x|0],x<0?-1:0)}function d(x){if(isNaN(x)||!isFinite(x))return g;if(x<0)return k(d(-x));let w=[],I=1;for(let S=0;x>=I;S++)w[S]=x/I|0,I*=4294967296;return new s(w,0)}function m(x,w){if(x.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(x.charAt(0)=="-")return k(m(x.substring(1),w));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');let I=d(Math.pow(w,8)),S=g;for(let M=0;M<x.length;M+=8){var D=Math.min(8,x.length-M);let E=parseInt(x.substring(M,M+D),w);D<8?(D=d(Math.pow(w,D)),S=S.j(D).add(d(E))):(S=S.j(I),S=S.add(d(E)))}return S}var g=l(0),b=l(1),C=l(16777216);n=s.prototype,n.m=function(){if(R(this))return-k(this).m();let x=0,w=1;for(let I=0;I<this.g.length;I++){let S=this.i(I);x+=(S>=0?S:4294967296+S)*w,w*=4294967296}return x},n.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(N(this))return"0";if(R(this))return"-"+k(this).toString(x);let w=d(Math.pow(x,6));var I=this;let S="";for(;;){let D=Ce(I,w).g;I=H(I,D.j(w));let M=((I.g.length>0?I.g[0]:I.h)>>>0).toString(x);if(I=D,N(I))return M+S;for(;M.length<6;)M="0"+M;S=M+S}},n.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function N(x){if(x.h!=0)return!1;for(let w=0;w<x.g.length;w++)if(x.g[w]!=0)return!1;return!0}function R(x){return x.h==-1}n.l=function(x){return x=H(this,x),R(x)?-1:N(x)?0:1};function k(x){let w=x.g.length,I=[];for(let S=0;S<w;S++)I[S]=~x.g[S];return new s(I,~x.h).add(b)}n.abs=function(){return R(this)?k(this):this},n.add=function(x){let w=Math.max(this.g.length,x.g.length),I=[],S=0;for(let D=0;D<=w;D++){let M=S+(this.i(D)&65535)+(x.i(D)&65535),E=(M>>>16)+(this.i(D)>>>16)+(x.i(D)>>>16);S=E>>>16,M&=65535,E&=65535,I[D]=E<<16|M}return new s(I,I[I.length-1]&-2147483648?-1:0)};function H(x,w){return x.add(k(w))}n.j=function(x){if(N(this)||N(x))return g;if(R(this))return R(x)?k(this).j(k(x)):k(k(this).j(x));if(R(x))return k(this.j(k(x)));if(this.l(C)<0&&x.l(C)<0)return d(this.m()*x.m());let w=this.g.length+x.g.length,I=[];for(var S=0;S<2*w;S++)I[S]=0;for(S=0;S<this.g.length;S++)for(let D=0;D<x.g.length;D++){let M=this.i(S)>>>16,E=this.i(S)&65535,At=x.i(D)>>>16,mr=x.i(D)&65535;I[2*S+2*D]+=E*mr,re(I,2*S+2*D),I[2*S+2*D+1]+=M*mr,re(I,2*S+2*D+1),I[2*S+2*D+1]+=E*At,re(I,2*S+2*D+1),I[2*S+2*D+2]+=M*At,re(I,2*S+2*D+2)}for(x=0;x<w;x++)I[x]=I[2*x+1]<<16|I[2*x];for(x=w;x<2*w;x++)I[x]=0;return new s(I,0)};function re(x,w){for(;(x[w]&65535)!=x[w];)x[w+1]+=x[w]>>>16,x[w]&=65535,w++}function Q(x,w){this.g=x,this.h=w}function Ce(x,w){if(N(w))throw Error("division by zero");if(N(x))return new Q(g,g);if(R(x))return w=Ce(k(x),w),new Q(k(w.g),k(w.h));if(R(w))return w=Ce(x,k(w)),new Q(k(w.g),w.h);if(x.g.length>30){if(R(x)||R(w))throw Error("slowDivide_ only works with positive integers.");for(var I=b,S=w;S.l(x)<=0;)I=ke(I),S=ke(S);var D=Ie(I,1),M=Ie(S,1);for(S=Ie(S,2),I=Ie(I,2);!N(S);){var E=M.add(S);E.l(x)<=0&&(D=D.add(I),M=E),S=Ie(S,1),I=Ie(I,1)}return w=H(x,D.j(w)),new Q(D,w)}for(D=g;x.l(w)>=0;){for(I=Math.max(1,Math.floor(x.m()/w.m())),S=Math.ceil(Math.log(I)/Math.LN2),S=S<=48?1:Math.pow(2,S-48),M=d(I),E=M.j(w);R(E)||E.l(x)>0;)I-=S,M=d(I),E=M.j(w);N(M)&&(M=b),D=D.add(M),x=H(x,E)}return new Q(D,x)}n.B=function(x){return Ce(this,x).h},n.and=function(x){let w=Math.max(this.g.length,x.g.length),I=[];for(let S=0;S<w;S++)I[S]=this.i(S)&x.i(S);return new s(I,this.h&x.h)},n.or=function(x){let w=Math.max(this.g.length,x.g.length),I=[];for(let S=0;S<w;S++)I[S]=this.i(S)|x.i(S);return new s(I,this.h|x.h)},n.xor=function(x){let w=Math.max(this.g.length,x.g.length),I=[];for(let S=0;S<w;S++)I[S]=this.i(S)^x.i(S);return new s(I,this.h^x.h)};function ke(x){let w=x.g.length+1,I=[];for(let S=0;S<w;S++)I[S]=x.i(S)<<1|x.i(S-1)>>>31;return new s(I,x.h)}function Ie(x,w){let I=w>>5;w%=32;let S=x.g.length-I,D=[];for(let M=0;M<S;M++)D[M]=w>0?x.i(M+I)>>>w|x.i(M+I+1)<<32-w:x.i(M+I);return new s(D,x.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Wf=Vw.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=d,s.fromString=m,sr=Vw.Integer=s}).apply(typeof Fw<"u"?Fw:typeof self<"u"?self:typeof window<"u"?window:{});var El=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ar={};var Kf,pR,fo,Qf,Us,Il,Yf,Jf,Xf;(function(){var n,e=Object.defineProperty;function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof El=="object"&&El];for(var u=0;u<a.length;++u){var h=a[u];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=t(this);function i(a,u){if(u)e:{var h=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var T=a[v];if(!(T in h))break e;h=h[T]}a=a[a.length-1],v=h[a],u=u(v),u!=v&&u!=null&&e(h,a,{configurable:!0,writable:!0,value:u})}}i("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(a){return a||function(u){var h=[],v;for(v in u)Object.prototype.hasOwnProperty.call(u,v)&&h.push([v,u[v]]);return h}});var o=o||{},s=this||self;function c(a){var u=typeof a;return u=="object"&&a!=null||u=="function"}function l(a,u,h){return a.call.apply(a.bind,arguments)}function d(a,u,h){return d=l,d.apply(null,arguments)}function m(a,u){var h=Array.prototype.slice.call(arguments,1);return function(){var v=h.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function g(a,u){function h(){}h.prototype=u.prototype,a.Z=u.prototype,a.prototype=new h,a.prototype.constructor=a,a.Ob=function(v,T,A){for(var $=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)$[ce-2]=arguments[ce];return u.prototype[T].apply(v,$)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function C(a){let u=a.length;if(u>0){let h=Array(u);for(let v=0;v<u;v++)h[v]=a[v];return h}return[]}function N(a,u){for(let v=1;v<arguments.length;v++){let T=arguments[v];var h=typeof T;if(h=h!="object"?h:T?Array.isArray(T)?"array":h:"null",h=="array"||h=="object"&&typeof T.length=="number"){h=a.length||0;let A=T.length||0;a.length=h+A;for(let $=0;$<A;$++)a[h+$]=T[$]}else a.push(T)}}class R{constructor(u,h){this.i=u,this.j=h,this.h=0,this.g=null}get(){let u;return this.h>0?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function k(a){s.setTimeout(()=>{throw a},0)}function H(){var a=x;let u=null;return a.g&&(u=a.g,a.g=a.g.next,a.g||(a.h=null),u.next=null),u}class re{constructor(){this.h=this.g=null}add(u,h){let v=Q.get();v.set(u,h),this.h?this.h.next=v:this.g=v,this.h=v}}var Q=new R(()=>new Ce,a=>a.reset());class Ce{constructor(){this.next=this.g=this.h=null}set(u,h){this.h=u,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let ke,Ie=!1,x=new re,w=()=>{let a=Promise.resolve(void 0);ke=()=>{a.then(I)}};function I(){for(var a;a=H();){try{a.h.call(a.g)}catch(h){k(h)}var u=Q;u.j(a),u.h<100&&(u.h++,a.next=u.g,u.g=a)}Ie=!1}function S(){this.u=this.u,this.C=this.C}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(a,u){this.type=a,this.g=this.target=u,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var M=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var a=!1,u=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};s.addEventListener("test",h,u),s.removeEventListener("test",h,u)}catch{}return a}();function E(a){return/^[\s\xa0]*$/.test(a)}function At(a,u){D.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,u)}g(At,D),At.prototype.init=function(a,u){let h=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=u,u=a.relatedTarget,u||(h=="mouseover"?u=a.fromElement:h=="mouseout"&&(u=a.toElement)),this.relatedTarget=u,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&At.Z.h.call(this)},At.prototype.h=function(){At.Z.h.call(this);let a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var mr="closure_listenable_"+(Math.random()*1e6|0),uI=0;function dI(a,u,h,v,T){this.listener=a,this.proxy=null,this.src=u,this.type=h,this.capture=!!v,this.ha=T,this.key=++uI,this.da=this.fa=!1}function la(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function ua(a,u,h){for(let v in a)u.call(h,a[v],v,a)}function hI(a,u){for(let h in a)u.call(void 0,a[h],h,a)}function fg(a){let u={};for(let h in a)u[h]=a[h];return u}let pg="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function mg(a,u){let h,v;for(let T=1;T<arguments.length;T++){v=arguments[T];for(h in v)a[h]=v[h];for(let A=0;A<pg.length;A++)h=pg[A],Object.prototype.hasOwnProperty.call(v,h)&&(a[h]=v[h])}}function da(a){this.src=a,this.g={},this.h=0}da.prototype.add=function(a,u,h,v,T){let A=a.toString();a=this.g[A],a||(a=this.g[A]=[],this.h++);let $=wu(a,u,v,T);return $>-1?(u=a[$],h||(u.fa=!1)):(u=new dI(u,this.src,A,!!v,T),u.fa=h,a.push(u)),u};function bu(a,u){let h=u.type;if(h in a.g){var v=a.g[h],T=Array.prototype.indexOf.call(v,u,void 0),A;(A=T>=0)&&Array.prototype.splice.call(v,T,1),A&&(la(u),a.g[h].length==0&&(delete a.g[h],a.h--))}}function wu(a,u,h,v){for(let T=0;T<a.length;++T){let A=a[T];if(!A.da&&A.listener==u&&A.capture==!!h&&A.ha==v)return T}return-1}var Cu="closure_lm_"+(Math.random()*1e6|0),Eu={};function gg(a,u,h,v,T){if(v&&v.once)return vg(a,u,h,v,T);if(Array.isArray(u)){for(let A=0;A<u.length;A++)gg(a,u[A],h,v,T);return null}return h=Su(h),a&&a[mr]?a.J(u,h,c(v)?!!v.capture:!!v,T):yg(a,u,h,!1,v,T)}function yg(a,u,h,v,T,A){if(!u)throw Error("Invalid event type");let $=c(T)?!!T.capture:!!T,ce=Du(a);if(ce||(a[Cu]=ce=new da(a)),h=ce.add(u,h,v,$,A),h.proxy)return h;if(v=fI(),h.proxy=v,v.src=a,v.listener=h,a.addEventListener)M||(T=$),T===void 0&&(T=!1),a.addEventListener(u.toString(),v,T);else if(a.attachEvent)a.attachEvent(bg(u.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return h}function fI(){function a(h){return u.call(a.src,a.listener,h)}let u=pI;return a}function vg(a,u,h,v,T){if(Array.isArray(u)){for(let A=0;A<u.length;A++)vg(a,u[A],h,v,T);return null}return h=Su(h),a&&a[mr]?a.K(u,h,c(v)?!!v.capture:!!v,T):yg(a,u,h,!0,v,T)}function _g(a,u,h,v,T){if(Array.isArray(u))for(var A=0;A<u.length;A++)_g(a,u[A],h,v,T);else v=c(v)?!!v.capture:!!v,h=Su(h),a&&a[mr]?(a=a.i,A=String(u).toString(),A in a.g&&(u=a.g[A],h=wu(u,h,v,T),h>-1&&(la(u[h]),Array.prototype.splice.call(u,h,1),u.length==0&&(delete a.g[A],a.h--)))):a&&(a=Du(a))&&(u=a.g[u.toString()],a=-1,u&&(a=wu(u,h,v,T)),(h=a>-1?u[a]:null)&&Iu(h))}function Iu(a){if(typeof a!="number"&&a&&!a.da){var u=a.src;if(u&&u[mr])bu(u.i,a);else{var h=a.type,v=a.proxy;u.removeEventListener?u.removeEventListener(h,v,a.capture):u.detachEvent?u.detachEvent(bg(h),v):u.addListener&&u.removeListener&&u.removeListener(v),(h=Du(u))?(bu(h,a),h.h==0&&(h.src=null,u[Cu]=null)):la(a)}}}function bg(a){return a in Eu?Eu[a]:Eu[a]="on"+a}function pI(a,u){if(a.da)a=!0;else{u=new At(u,this);let h=a.listener,v=a.ha||a.src;a.fa&&Iu(a),a=h.call(v,u)}return a}function Du(a){return a=a[Cu],a instanceof da?a:null}var xu="__closure_events_fn_"+(Math.random()*1e9>>>0);function Su(a){return typeof a=="function"?a:(a[xu]||(a[xu]=function(u){return a.handleEvent(u)}),a[xu])}function vt(){S.call(this),this.i=new da(this),this.M=this,this.G=null}g(vt,S),vt.prototype[mr]=!0,vt.prototype.removeEventListener=function(a,u,h,v){_g(this,a,u,h,v)};function Dt(a,u){var h,v=a.G;if(v)for(h=[];v;v=v.G)h.push(v);if(a=a.M,v=u.type||u,typeof u=="string")u=new D(u,a);else if(u instanceof D)u.target=u.target||a;else{var T=u;u=new D(v,a),mg(u,T)}T=!0;let A,$;if(h)for($=h.length-1;$>=0;$--)A=u.g=h[$],T=ha(A,v,!0,u)&&T;if(A=u.g=a,T=ha(A,v,!0,u)&&T,T=ha(A,v,!1,u)&&T,h)for($=0;$<h.length;$++)A=u.g=h[$],T=ha(A,v,!1,u)&&T}vt.prototype.N=function(){if(vt.Z.N.call(this),this.i){var a=this.i;for(let u in a.g){let h=a.g[u];for(let v=0;v<h.length;v++)la(h[v]);delete a.g[u],a.h--}}this.G=null},vt.prototype.J=function(a,u,h,v){return this.i.add(String(a),u,!1,h,v)},vt.prototype.K=function(a,u,h,v){return this.i.add(String(a),u,!0,h,v)};function ha(a,u,h,v){if(u=a.i.g[String(u)],!u)return!0;u=u.concat();let T=!0;for(let A=0;A<u.length;++A){let $=u[A];if($&&!$.da&&$.capture==h){let ce=$.listener,it=$.ha||$.src;$.fa&&bu(a.i,$),T=ce.call(it,v)!==!1&&T}}return T&&!v.defaultPrevented}function mI(a,u){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=d(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(u)>2147483647?-1:s.setTimeout(a,u||0)}function wg(a){a.g=mI(()=>{a.g=null,a.i&&(a.i=!1,wg(a))},a.l);let u=a.h;a.h=null,a.m.apply(null,u)}class gI extends S{constructor(u,h){super(),this.m=u,this.l=h,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:wg(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jo(a){S.call(this),this.h=a,this.g={}}g(jo,S);var Cg=[];function Eg(a){ua(a.g,function(u,h){this.g.hasOwnProperty(h)&&Iu(u)},a),a.g={}}jo.prototype.N=function(){jo.Z.N.call(this),Eg(this)},jo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Tu=s.JSON.stringify,yI=s.JSON.parse,vI=class{stringify(a){return s.JSON.stringify(a,void 0)}parse(a){return s.JSON.parse(a,void 0)}};function Ig(){}function Dg(){}var Bo={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Mu(){D.call(this,"d")}g(Mu,D);function Au(){D.call(this,"c")}g(Au,D);var Hr={},xg=null;function fa(){return xg=xg||new vt}Hr.Ia="serverreachability";function Sg(a){D.call(this,Hr.Ia,a)}g(Sg,D);function Uo(a){let u=fa();Dt(u,new Sg(u))}Hr.STAT_EVENT="statevent";function Tg(a,u){D.call(this,Hr.STAT_EVENT,a),this.stat=u}g(Tg,D);function xt(a){let u=fa();Dt(u,new Tg(u,a))}Hr.Ja="timingevent";function Mg(a,u){D.call(this,Hr.Ja,a),this.size=u}g(Mg,D);function $o(a,u){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){a()},u)}function zo(){this.g=!0}zo.prototype.ua=function(){this.g=!1};function _I(a,u,h,v,T,A){a.info(function(){if(a.g)if(A){var $="",ce=A.split("&");for(let Oe=0;Oe<ce.length;Oe++){var it=ce[Oe].split("=");if(it.length>1){let at=it[0];it=it[1];let _n=at.split("_");$=_n.length>=2&&_n[1]=="type"?$+(at+"="+it+"&"):$+(at+"=redacted&")}}}else $=null;else $=A;return"XMLHTTP REQ ("+v+") [attempt "+T+"]: "+u+`
`+h+`
`+$})}function bI(a,u,h,v,T,A,$){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+T+"]: "+u+`
`+h+`
`+A+" "+$})}function Ai(a,u,h,v){a.info(function(){return"XMLHTTP TEXT ("+u+"): "+CI(a,h)+(v?" "+v:"")})}function wI(a,u){a.info(function(){return"TIMEOUT: "+u})}zo.prototype.info=function(){};function CI(a,u){if(!a.g)return u;if(!u)return null;try{let A=JSON.parse(u);if(A){for(a=0;a<A.length;a++)if(Array.isArray(A[a])){var h=A[a];if(!(h.length<2)){var v=h[1];if(Array.isArray(v)&&!(v.length<1)){var T=v[0];if(T!="noop"&&T!="stop"&&T!="close")for(let $=1;$<v.length;$++)v[$]=""}}}}return Tu(A)}catch{return u}}var pa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ag={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Pg;function Pu(){}g(Pu,Ig),Pu.prototype.g=function(){return new XMLHttpRequest},Pg=new Pu;function Ho(a){return encodeURIComponent(String(a))}function EI(a){var u=1;a=a.split(":");let h=[];for(;u>0&&a.length;)h.push(a.shift()),u--;return a.length&&h.push(a.join(":")),h}function gr(a,u,h,v){this.j=a,this.i=u,this.l=h,this.S=v||1,this.V=new jo(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ng}function Ng(){this.i=null,this.g="",this.h=!1}var Og={},Nu={};function Ou(a,u,h){a.M=1,a.A=ga(vn(u)),a.u=h,a.R=!0,Rg(a,null)}function Rg(a,u){a.F=Date.now(),ma(a),a.B=vn(a.A);var h=a.B,v=a.S;Array.isArray(v)||(v=[String(v)]),Wg(h.i,"t",v),a.C=0,h=a.j.L,a.h=new Ng,a.g=dy(a.j,h?u:null,!a.u),a.P>0&&(a.O=new gI(d(a.Y,a,a.g),a.P)),u=a.V,h=a.g,v=a.ba;var T="readystatechange";Array.isArray(T)||(T&&(Cg[0]=T.toString()),T=Cg);for(let A=0;A<T.length;A++){let $=gg(h,T[A],v||u.handleEvent,!1,u.h||u);if(!$)break;u.g[$.key]=$}u=a.J?fg(a.J):{},a.u?(a.v||(a.v="POST"),u["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,u)):(a.v="GET",a.g.ea(a.B,a.v,null,u)),Uo(),_I(a.i,a.v,a.B,a.l,a.S,a.u)}gr.prototype.ba=function(a){a=a.target;let u=this.O;u&&_r(a)==3?u.j():this.Y(a)},gr.prototype.Y=function(a){try{if(a==this.g)e:{let ce=_r(this.g),it=this.g.ya(),Oe=this.g.ca();if(!(ce<3)&&(ce!=3||this.g&&(this.h.h||this.g.la()||ey(this.g)))){this.K||ce!=4||it==7||(it==8||Oe<=0?Uo(3):Uo(2)),Ru(this);var u=this.g.ca();this.X=u;var h=II(this);if(this.o=u==200,bI(this.i,this.v,this.B,this.l,this.S,ce,u),this.o){if(this.U&&!this.L){t:{if(this.g){var v,T=this.g;if((v=T.g?T.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(v)){var A=v;break t}}A=null}if(a=A)Ai(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ku(this,a);else{this.o=!1,this.m=3,xt(12),qr(this),qo(this);break e}}if(this.R){a=!0;let at;for(;!this.K&&this.C<h.length;)if(at=DI(this,h),at==Nu){ce==4&&(this.m=4,xt(14),a=!1),Ai(this.i,this.l,null,"[Incomplete Response]");break}else if(at==Og){this.m=4,xt(15),Ai(this.i,this.l,h,"[Invalid Chunk]"),a=!1;break}else Ai(this.i,this.l,at,null),ku(this,at);if(kg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ce!=4||h.length!=0||this.h.h||(this.m=1,xt(16),a=!1),this.o=this.o&&a,!a)Ai(this.i,this.l,h,"[Invalid Chunked Response]"),qr(this),qo(this);else if(h.length>0&&!this.W){this.W=!0;var $=this.j;$.g==this&&$.aa&&!$.P&&($.j.info("Great, no buffering proxy detected. Bytes received: "+h.length),$u($),$.P=!0,xt(11))}}else Ai(this.i,this.l,h,null),ku(this,h);ce==4&&qr(this),this.o&&!this.K&&(ce==4?ay(this.j,this):(this.o=!1,ma(this)))}else jI(this.g),u==400&&h.indexOf("Unknown SID")>0?(this.m=3,xt(12)):(this.m=0,xt(13)),qr(this),qo(this)}}}catch{}finally{}};function II(a){if(!kg(a))return a.g.la();let u=ey(a.g);if(u==="")return"";let h="",v=u.length,T=_r(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return qr(a),qo(a),"";a.h.i=new s.TextDecoder}for(let A=0;A<v;A++)a.h.h=!0,h+=a.h.i.decode(u[A],{stream:!(T&&A==v-1)});return u.length=0,a.h.g+=h,a.C=0,a.h.g}function kg(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function DI(a,u){var h=a.C,v=u.indexOf(`
`,h);return v==-1?Nu:(h=Number(u.substring(h,v)),isNaN(h)?Og:(v+=1,v+h>u.length?Nu:(u=u.slice(v,v+h),a.C=v+h,u)))}gr.prototype.cancel=function(){this.K=!0,qr(this)};function ma(a){a.T=Date.now()+a.H,Fg(a,a.H)}function Fg(a,u){if(a.D!=null)throw Error("WatchDog timer not null");a.D=$o(d(a.aa,a),u)}function Ru(a){a.D&&(s.clearTimeout(a.D),a.D=null)}gr.prototype.aa=function(){this.D=null;let a=Date.now();a-this.T>=0?(wI(this.i,this.B),this.M!=2&&(Uo(),xt(17)),qr(this),this.m=2,qo(this)):Fg(this,this.T-a)};function qo(a){a.j.I==0||a.K||ay(a.j,a)}function qr(a){Ru(a);var u=a.O;u&&typeof u.dispose=="function"&&u.dispose(),a.O=null,Eg(a.V),a.g&&(u=a.g,a.g=null,u.abort(),u.dispose())}function ku(a,u){try{var h=a.j;if(h.I!=0&&(h.g==a||Fu(h.h,a))){if(!a.L&&Fu(h.h,a)&&h.I==3){try{var v=h.Ba.g.parse(u)}catch{v=null}if(Array.isArray(v)&&v.length==3){var T=v;if(T[0]==0){e:if(!h.v){if(h.g)if(h.g.F+3e3<a.F)Ca(h),ba(h);else break e;Uu(h),xt(18)}}else h.xa=T[1],0<h.xa-h.K&&T[2]<37500&&h.F&&h.A==0&&!h.C&&(h.C=$o(d(h.Va,h),6e3));jg(h.h)<=1&&h.ta&&(h.ta=void 0)}else Wr(h,11)}else if((a.L||h.g==a)&&Ca(h),!E(u))for(T=h.Ba.g.parse(u),u=0;u<T.length;u++){let Oe=T[u],at=Oe[0];if(!(at<=h.K))if(h.K=at,Oe=Oe[1],h.I==2)if(Oe[0]=="c"){h.M=Oe[1],h.ba=Oe[2];let _n=Oe[3];_n!=null&&(h.ka=_n,h.j.info("VER="+h.ka));let Kr=Oe[4];Kr!=null&&(h.za=Kr,h.j.info("SVER="+h.za));let br=Oe[5];br!=null&&typeof br=="number"&&br>0&&(v=1.5*br,h.O=v,h.j.info("backChannelRequestTimeoutMs_="+v)),v=h;let wr=a.g;if(wr){let Ia=wr.g?wr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ia){var A=v.h;A.g||Ia.indexOf("spdy")==-1&&Ia.indexOf("quic")==-1&&Ia.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Vu(A,A.h),A.h=null))}if(v.G){let zu=wr.g?wr.g.getResponseHeader("X-HTTP-Session-Id"):null;zu&&(v.wa=zu,Le(v.J,v.G,zu))}}h.I=3,h.l&&h.l.ra(),h.aa&&(h.T=Date.now()-a.F,h.j.info("Handshake RTT: "+h.T+"ms")),v=h;var $=a;if(v.na=uy(v,v.L?v.ba:null,v.W),$.L){Bg(v.h,$);var ce=$,it=v.O;it&&(ce.H=it),ce.D&&(Ru(ce),ma(ce)),v.g=$}else oy(v);h.i.length>0&&wa(h)}else Oe[0]!="stop"&&Oe[0]!="close"||Wr(h,7);else h.I==3&&(Oe[0]=="stop"||Oe[0]=="close"?Oe[0]=="stop"?Wr(h,7):Bu(h):Oe[0]!="noop"&&h.l&&h.l.qa(Oe),h.A=0)}}Uo(4)}catch{}}var xI=class{constructor(a,u){this.g=a,this.map=u}};function Vg(a){this.l=a||10,s.PerformanceNavigationTiming?(a=s.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Lg(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function jg(a){return a.h?1:a.g?a.g.size:0}function Fu(a,u){return a.h?a.h==u:a.g?a.g.has(u):!1}function Vu(a,u){a.g?a.g.add(u):a.h=u}function Bg(a,u){a.h&&a.h==u?a.h=null:a.g&&a.g.has(u)&&a.g.delete(u)}Vg.prototype.cancel=function(){if(this.i=Ug(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function Ug(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let u=a.i;for(let h of a.g.values())u=u.concat(h.G);return u}return C(a.i)}var $g=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function SI(a,u){if(a){a=a.split("&");for(let h=0;h<a.length;h++){let v=a[h].indexOf("="),T,A=null;v>=0?(T=a[h].substring(0,v),A=a[h].substring(v+1)):T=a[h],u(T,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function yr(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let u;a instanceof yr?(this.l=a.l,Go(this,a.j),this.o=a.o,this.g=a.g,Wo(this,a.u),this.h=a.h,Lu(this,Kg(a.i)),this.m=a.m):a&&(u=String(a).match($g))?(this.l=!1,Go(this,u[1]||"",!0),this.o=Ko(u[2]||""),this.g=Ko(u[3]||"",!0),Wo(this,u[4]),this.h=Ko(u[5]||"",!0),Lu(this,u[6]||"",!0),this.m=Ko(u[7]||"")):(this.l=!1,this.i=new Yo(null,this.l))}yr.prototype.toString=function(){let a=[];var u=this.j;u&&a.push(Qo(u,zg,!0),":");var h=this.g;return(h||u=="file")&&(a.push("//"),(u=this.o)&&a.push(Qo(u,zg,!0),"@"),a.push(Ho(h).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.u,h!=null&&a.push(":",String(h))),(h=this.h)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(Qo(h,h.charAt(0)=="/"?AI:MI,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",Qo(h,NI)),a.join("")},yr.prototype.resolve=function(a){let u=vn(this),h=!!a.j;h?Go(u,a.j):h=!!a.o,h?u.o=a.o:h=!!a.g,h?u.g=a.g:h=a.u!=null;var v=a.h;if(h)Wo(u,a.u);else if(h=!!a.h){if(v.charAt(0)!="/")if(this.g&&!this.h)v="/"+v;else{var T=u.h.lastIndexOf("/");T!=-1&&(v=u.h.slice(0,T+1)+v)}if(T=v,T==".."||T==".")v="";else if(T.indexOf("./")!=-1||T.indexOf("/.")!=-1){v=T.lastIndexOf("/",0)==0,T=T.split("/");let A=[];for(let $=0;$<T.length;){let ce=T[$++];ce=="."?v&&$==T.length&&A.push(""):ce==".."?((A.length>1||A.length==1&&A[0]!="")&&A.pop(),v&&$==T.length&&A.push("")):(A.push(ce),v=!0)}v=A.join("/")}else v=T}return h?u.h=v:h=a.i.toString()!=="",h?Lu(u,Kg(a.i)):h=!!a.m,h&&(u.m=a.m),u};function vn(a){return new yr(a)}function Go(a,u,h){a.j=h?Ko(u,!0):u,a.j&&(a.j=a.j.replace(/:$/,""))}function Wo(a,u){if(u){if(u=Number(u),isNaN(u)||u<0)throw Error("Bad port number "+u);a.u=u}else a.u=null}function Lu(a,u,h){u instanceof Yo?(a.i=u,OI(a.i,a.l)):(h||(u=Qo(u,PI)),a.i=new Yo(u,a.l))}function Le(a,u,h){a.i.set(u,h)}function ga(a){return Le(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function Ko(a,u){return a?u?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Qo(a,u,h){return typeof a=="string"?(a=encodeURI(a).replace(u,TI),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function TI(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var zg=/[#\/\?@]/g,MI=/[#\?:]/g,AI=/[#\?]/g,PI=/[#\?@]/g,NI=/#/g;function Yo(a,u){this.h=this.g=null,this.i=a||null,this.j=!!u}function Gr(a){a.g||(a.g=new Map,a.h=0,a.i&&SI(a.i,function(u,h){a.add(decodeURIComponent(u.replace(/\+/g," ")),h)}))}n=Yo.prototype,n.add=function(a,u){Gr(this),this.i=null,a=Pi(this,a);let h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(u),this.h+=1,this};function Hg(a,u){Gr(a),u=Pi(a,u),a.g.has(u)&&(a.i=null,a.h-=a.g.get(u).length,a.g.delete(u))}function qg(a,u){return Gr(a),u=Pi(a,u),a.g.has(u)}n.forEach=function(a,u){Gr(this),this.g.forEach(function(h,v){h.forEach(function(T){a.call(u,T,v,this)},this)},this)};function Gg(a,u){Gr(a);let h=[];if(typeof u=="string")qg(a,u)&&(h=h.concat(a.g.get(Pi(a,u))));else for(a=Array.from(a.g.values()),u=0;u<a.length;u++)h=h.concat(a[u]);return h}n.set=function(a,u){return Gr(this),this.i=null,a=Pi(this,a),qg(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[u]),this.h+=1,this},n.get=function(a,u){return a?(a=Gg(this,a),a.length>0?String(a[0]):u):u};function Wg(a,u,h){Hg(a,u),h.length>0&&(a.i=null,a.g.set(Pi(a,u),C(h)),a.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],u=Array.from(this.g.keys());for(let v=0;v<u.length;v++){var h=u[v];let T=Ho(h);h=Gg(this,h);for(let A=0;A<h.length;A++){let $=T;h[A]!==""&&($+="="+Ho(h[A])),a.push($)}}return this.i=a.join("&")};function Kg(a){let u=new Yo;return u.i=a.i,a.g&&(u.g=new Map(a.g),u.h=a.h),u}function Pi(a,u){return u=String(u),a.j&&(u=u.toLowerCase()),u}function OI(a,u){u&&!a.j&&(Gr(a),a.i=null,a.g.forEach(function(h,v){let T=v.toLowerCase();v!=T&&(Hg(this,v),Wg(this,T,h))},a)),a.j=u}function RI(a,u){let h=new zo;if(s.Image){let v=new Image;v.onload=m(vr,h,"TestLoadImage: loaded",!0,u,v),v.onerror=m(vr,h,"TestLoadImage: error",!1,u,v),v.onabort=m(vr,h,"TestLoadImage: abort",!1,u,v),v.ontimeout=m(vr,h,"TestLoadImage: timeout",!1,u,v),s.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else u(!1)}function kI(a,u){let h=new zo,v=new AbortController,T=setTimeout(()=>{v.abort(),vr(h,"TestPingServer: timeout",!1,u)},1e4);fetch(a,{signal:v.signal}).then(A=>{clearTimeout(T),A.ok?vr(h,"TestPingServer: ok",!0,u):vr(h,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(T),vr(h,"TestPingServer: error",!1,u)})}function vr(a,u,h,v,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),v(h)}catch{}}function FI(){this.g=new vI}function ya(a){this.i=a.Sb||null,this.h=a.ab||!1}g(ya,Ig),ya.prototype.g=function(){return new va(this.i,this.h)};function va(a,u){vt.call(this),this.H=a,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(va,vt),n=va.prototype,n.open=function(a,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=u,this.readyState=1,Xo(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let u={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(u.body=a),(this.H||s).fetch(new Request(this.D,u)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Jo(this)),this.readyState=0},n.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Xo(this)),this.g&&(this.readyState=3,Xo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Qg(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Qg(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}n.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var u=a.value?a.value:new Uint8Array(0);(u=this.B.decode(u,{stream:!a.done}))&&(this.response=this.responseText+=u)}a.done?Jo(this):Xo(this),this.readyState==3&&Qg(this)}},n.Oa=function(a){this.g&&(this.response=this.responseText=a,Jo(this))},n.Na=function(a){this.g&&(this.response=a,Jo(this))},n.ga=function(){this.g&&Jo(this)};function Jo(a){a.readyState=4,a.l=null,a.j=null,a.B=null,Xo(a)}n.setRequestHeader=function(a,u){this.A.append(a,u)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],u=this.h.entries();for(var h=u.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=u.next();return a.join(`\r
`)};function Xo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(va.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Yg(a){let u="";return ua(a,function(h,v){u+=v,u+=":",u+=h,u+=`\r
`}),u}function ju(a,u,h){e:{for(v in h){var v=!1;break e}v=!0}v||(h=Yg(h),typeof a=="string"?h!=null&&Ho(h):Le(a,u,h))}function Ge(a){vt.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(Ge,vt);var VI=/^https?$/i,LI=["POST","PUT"];n=Ge.prototype,n.Fa=function(a){this.H=a},n.ea=function(a,u,h,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);u=u?u.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Pg.g(),this.g.onreadystatechange=b(d(this.Ca,this));try{this.B=!0,this.g.open(u,String(a),!0),this.B=!1}catch(A){Jg(this,A);return}if(a=h||"",h=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var T in v)h.set(T,v[T]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(let A of v.keys())h.set(A,v.get(A));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(h.keys()).find(A=>A.toLowerCase()=="content-type"),T=s.FormData&&a instanceof s.FormData,!(Array.prototype.indexOf.call(LI,u,void 0)>=0)||v||T||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,$]of h)this.g.setRequestHeader(A,$);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(A){Jg(this,A)}};function Jg(a,u){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=u,a.o=5,Xg(a),_a(a)}function Xg(a){a.A||(a.A=!0,Dt(a,"complete"),Dt(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,Dt(this,"complete"),Dt(this,"abort"),_a(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_a(this,!0)),Ge.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Zg(this):this.Xa())},n.Xa=function(){Zg(this)};function Zg(a){if(a.h&&typeof o<"u"){if(a.v&&_r(a)==4)setTimeout(a.Ca.bind(a),0);else if(Dt(a,"readystatechange"),_r(a)==4){a.h=!1;try{let A=a.ca();e:switch(A){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var h;if(!(h=u)){var v;if(v=A===0){let $=String(a.D).match($g)[1]||null;!$&&s.self&&s.self.location&&($=s.self.location.protocol.slice(0,-1)),v=!VI.test($?$.toLowerCase():"")}h=v}if(h)Dt(a,"complete"),Dt(a,"success");else{a.o=6;try{var T=_r(a)>2?a.g.statusText:""}catch{T=""}a.l=T+" ["+a.ca()+"]",Xg(a)}}finally{_a(a)}}}}function _a(a,u){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);let h=a.g;a.g=null,u||Dt(a,"ready");try{h.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function _r(a){return a.g?a.g.readyState:0}n.ca=function(){try{return _r(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(a){if(this.g){var u=this.g.responseText;return a&&u.indexOf(a)==0&&(u=u.substring(a.length)),yI(u)}};function ey(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function jI(a){let u={};a=(a.g&&_r(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(E(a[v]))continue;var h=EI(a[v]);let T=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let A=u[T]||[];u[T]=A,A.push(h)}hI(u,function(v){return v.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Zo(a,u,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||u}function ty(a){this.za=0,this.i=[],this.j=new zo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Zo("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Zo("baseRetryDelayMs",5e3,a),this.Za=Zo("retryDelaySeedMs",1e4,a),this.Ta=Zo("forwardChannelMaxRetries",2,a),this.va=Zo("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new Vg(a&&a.concurrentRequestLimit),this.Ba=new FI,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=ty.prototype,n.ka=8,n.I=1,n.connect=function(a,u,h,v){xt(0),this.W=a,this.H=u||{},h&&v!==void 0&&(this.H.OSID=h,this.H.OAID=v),this.F=this.X,this.J=uy(this,null,this.W),wa(this)};function Bu(a){if(ny(a),a.I==3){var u=a.V++,h=vn(a.J);if(Le(h,"SID",a.M),Le(h,"RID",u),Le(h,"TYPE","terminate"),es(a,h),u=new gr(a,a.j,u),u.M=2,u.A=ga(vn(h)),h=!1,s.navigator&&s.navigator.sendBeacon)try{h=s.navigator.sendBeacon(u.A.toString(),"")}catch{}!h&&s.Image&&(new Image().src=u.A,h=!0),h||(u.g=dy(u.j,null),u.g.ea(u.A)),u.F=Date.now(),ma(u)}ly(a)}function ba(a){a.g&&($u(a),a.g.cancel(),a.g=null)}function ny(a){ba(a),a.v&&(s.clearTimeout(a.v),a.v=null),Ca(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&s.clearTimeout(a.m),a.m=null)}function wa(a){if(!Lg(a.h)&&!a.m){a.m=!0;var u=a.Ea;ke||w(),Ie||(ke(),Ie=!0),x.add(u,a),a.D=0}}function BI(a,u){return jg(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=u.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=$o(d(a.Ea,a,u),cy(a,a.D)),a.D++,!0)}n.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;let T=new gr(this,this.j,a),A=this.o;if(this.U&&(A?(A=fg(A),mg(A,this.U)):A=this.U),this.u!==null||this.R||(T.J=A,A=null),this.S)e:{for(var u=0,h=0;h<this.i.length;h++){t:{var v=this.i[h];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(u+=v,u>4096){u=h;break e}if(u===4096||h===this.i.length-1){u=h+1;break e}}u=1e3}else u=1e3;u=iy(this,T,u),h=vn(this.J),Le(h,"RID",a),Le(h,"CVER",22),this.G&&Le(h,"X-HTTP-Session-Id",this.G),es(this,h),A&&(this.R?u="headers="+Ho(Yg(A))+"&"+u:this.u&&ju(h,this.u,A)),Vu(this.h,T),this.Ra&&Le(h,"TYPE","init"),this.S?(Le(h,"$req",u),Le(h,"SID","null"),T.U=!0,Ou(T,h,null)):Ou(T,h,u),this.I=2}}else this.I==3&&(a?ry(this,a):this.i.length==0||Lg(this.h)||ry(this))};function ry(a,u){var h;u?h=u.l:h=a.V++;let v=vn(a.J);Le(v,"SID",a.M),Le(v,"RID",h),Le(v,"AID",a.K),es(a,v),a.u&&a.o&&ju(v,a.u,a.o),h=new gr(a,a.j,h,a.D+1),a.u===null&&(h.J=a.o),u&&(a.i=u.G.concat(a.i)),u=iy(a,h,1e3),h.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),Vu(a.h,h),Ou(h,v,u)}function es(a,u){a.H&&ua(a.H,function(h,v){Le(u,v,h)}),a.l&&ua({},function(h,v){Le(u,v,h)})}function iy(a,u,h){h=Math.min(a.i.length,h);let v=a.l?d(a.l.Ka,a.l,a):null;e:{var T=a.i;let ce=-1;for(;;){let it=["count="+h];ce==-1?h>0?(ce=T[0].g,it.push("ofs="+ce)):ce=0:it.push("ofs="+ce);let Oe=!0;for(let at=0;at<h;at++){var A=T[at].g;let _n=T[at].map;if(A-=ce,A<0)ce=Math.max(0,T[at].g-100),Oe=!1;else try{A="req"+A+"_"||"";try{var $=_n instanceof Map?_n:Object.entries(_n);for(let[Kr,br]of $){let wr=br;c(br)&&(wr=Tu(br)),it.push(A+Kr+"="+encodeURIComponent(wr))}}catch(Kr){throw it.push(A+"type="+encodeURIComponent("_badmap")),Kr}}catch{v&&v(_n)}}if(Oe){$=it.join("&");break e}}$=void 0}return a=a.i.splice(0,h),u.G=a,$}function oy(a){if(!a.g&&!a.v){a.Y=1;var u=a.Da;ke||w(),Ie||(ke(),Ie=!0),x.add(u,a),a.A=0}}function Uu(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=$o(d(a.Da,a),cy(a,a.A)),a.A++,!0)}n.Da=function(){if(this.v=null,sy(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=$o(d(this.Wa,this),a)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xt(10),ba(this),sy(this))};function $u(a){a.B!=null&&(s.clearTimeout(a.B),a.B=null)}function sy(a){a.g=new gr(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var u=vn(a.na);Le(u,"RID","rpc"),Le(u,"SID",a.M),Le(u,"AID",a.K),Le(u,"CI",a.F?"0":"1"),!a.F&&a.ia&&Le(u,"TO",a.ia),Le(u,"TYPE","xmlhttp"),es(a,u),a.u&&a.o&&ju(u,a.u,a.o),a.O&&(a.g.H=a.O);var h=a.g;a=a.ba,h.M=1,h.A=ga(vn(u)),h.u=null,h.R=!0,Rg(h,a)}n.Va=function(){this.C!=null&&(this.C=null,ba(this),Uu(this),xt(19))};function Ca(a){a.C!=null&&(s.clearTimeout(a.C),a.C=null)}function ay(a,u){var h=null;if(a.g==u){Ca(a),$u(a),a.g=null;var v=2}else if(Fu(a.h,u))h=u.G,Bg(a.h,u),v=1;else return;if(a.I!=0){if(u.o)if(v==1){h=u.u?u.u.length:0,u=Date.now()-u.F;var T=a.D;v=fa(),Dt(v,new Mg(v,h)),wa(a)}else oy(a);else if(T=u.m,T==3||T==0&&u.X>0||!(v==1&&BI(a,u)||v==2&&Uu(a)))switch(h&&h.length>0&&(u=a.h,u.i=u.i.concat(h)),T){case 1:Wr(a,5);break;case 4:Wr(a,10);break;case 3:Wr(a,6);break;default:Wr(a,2)}}}function cy(a,u){let h=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(h*=2),h*u}function Wr(a,u){if(a.j.info("Error code "+u),u==2){var h=d(a.bb,a),v=a.Ua;let T=!v;v=new yr(v||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Go(v,"https"),ga(v),T?RI(v.toString(),h):kI(v.toString(),h)}else xt(2);a.I=0,a.l&&a.l.pa(u),ly(a),ny(a)}n.bb=function(a){a?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function ly(a){if(a.I=0,a.ja=[],a.l){let u=Ug(a.h);(u.length!=0||a.i.length!=0)&&(N(a.ja,u),N(a.ja,a.i),a.h.i.length=0,C(a.i),a.i.length=0),a.l.oa()}}function uy(a,u,h){var v=h instanceof yr?vn(h):new yr(h);if(v.g!="")u&&(v.g=u+"."+v.g),Wo(v,v.u);else{var T=s.location;v=T.protocol,u=u?u+"."+T.hostname:T.hostname,T=+T.port;let A=new yr(null);v&&Go(A,v),u&&(A.g=u),T&&Wo(A,T),h&&(A.h=h),v=A}return h=a.G,u=a.wa,h&&u&&Le(v,h,u),Le(v,"VER",a.ka),es(a,v),v}function dy(a,u,h){if(u&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return u=a.Aa&&!a.ma?new Ge(new ya({ab:h})):new Ge(a.ma),u.Fa(a.L),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function hy(){}n=hy.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ea(){}Ea.prototype.g=function(a,u){return new Rt(a,u)};function Rt(a,u){vt.call(this),this.g=new ty(u),this.l=a,this.h=u&&u.messageUrlParams||null,a=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(a?a["X-WebChannel-Content-Type"]=u.messageContentType:a={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.sa&&(a?a["X-WebChannel-Client-Profile"]=u.sa:a={"X-WebChannel-Client-Profile":u.sa}),this.g.U=a,(a=u&&u.Qb)&&!E(a)&&(this.g.u=a),this.A=u&&u.supportsCrossDomainXhr||!1,this.v=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!E(u)&&(this.g.G=u,a=this.h,a!==null&&u in a&&(a=this.h,u in a&&delete a[u])),this.j=new Ni(this)}g(Rt,vt),Rt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Rt.prototype.close=function(){Bu(this.g)},Rt.prototype.o=function(a){var u=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.v&&(h={},h.__data__=Tu(a),a=h);u.i.push(new xI(u.Ya++,a)),u.I==3&&wa(u)},Rt.prototype.N=function(){this.g.l=null,delete this.j,Bu(this.g),delete this.g,Rt.Z.N.call(this)};function fy(a){Mu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var u=a.__sm__;if(u){e:{for(let h in u){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,u=u!==null&&a in u?u[a]:void 0),this.data=u}else this.data=a}g(fy,Mu);function py(){Au.call(this),this.status=1}g(py,Au);function Ni(a){this.g=a}g(Ni,hy),Ni.prototype.ra=function(){Dt(this.g,"a")},Ni.prototype.qa=function(a){Dt(this.g,new fy(a))},Ni.prototype.pa=function(a){Dt(this.g,new py)},Ni.prototype.oa=function(){Dt(this.g,"b")},Ea.prototype.createWebChannel=Ea.prototype.g,Rt.prototype.send=Rt.prototype.o,Rt.prototype.open=Rt.prototype.m,Rt.prototype.close=Rt.prototype.close,Xf=ar.createWebChannelTransport=function(){return new Ea},Jf=ar.getStatEventTarget=function(){return fa()},Yf=ar.Event=Hr,Il=ar.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},pa.NO_ERROR=0,pa.TIMEOUT=8,pa.HTTP_ERROR=6,Us=ar.ErrorCode=pa,Ag.COMPLETE="complete",Qf=ar.EventType=Ag,Dg.EventType=Bo,Bo.OPEN="a",Bo.CLOSE="b",Bo.ERROR="c",Bo.MESSAGE="d",vt.prototype.listen=vt.prototype.J,fo=ar.WebChannel=Dg,pR=ar.FetchXmlHttpFactory=ya,Ge.prototype.listenOnce=Ge.prototype.K,Ge.prototype.getLastError=Ge.prototype.Ha,Ge.prototype.getLastErrorCode=Ge.prototype.ya,Ge.prototype.getStatus=Ge.prototype.ca,Ge.prototype.getResponseJson=Ge.prototype.La,Ge.prototype.getResponseText=Ge.prototype.la,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Fa,Kf=ar.XhrIo=Ge}).apply(typeof El<"u"?El:typeof self<"u"?self:typeof window<"u"?window:{});var Lw="@firebase/firestore",jw="4.9.2";var pt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");var ko="12.3.0";var wi=new ho("@firebase/firestore");function po(){return wi.logLevel}function W(n,...e){if(wi.logLevel<=be.DEBUG){let t=e.map(zm);wi.debug(`Firestore (${ko}): ${n}`,...t)}}function lr(n,...e){if(wi.logLevel<=be.ERROR){let t=e.map(zm);wi.error(`Firestore (${ko}): ${n}`,...t)}}function Co(n,...e){if(wi.logLevel<=be.WARN){let t=e.map(zm);wi.warn(`Firestore (${ko}): ${n}`,...t)}}function zm(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function ne(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,AC(n,r,t)}function AC(n,e,t){let r=`FIRESTORE (${ko}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw lr(r),new Error(r)}function Ae(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||AC(e,i,r)}function se(n,e){return n}var F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},q=class extends rr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var cr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Pl=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},ip=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(pt.UNAUTHENTICATED))}shutdown(){}},op=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},sp=class{constructor(e){this.t=e,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ae(this.o===void 0,42304);let r=this.i,i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve(),o=new cr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new cr,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let l=o;e.enqueueRetryable(()=>B(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},c=l=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new cr)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ae(typeof r.accessToken=="string",31837,{l:r}),new Pl(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string",2055,{h:e}),new pt(e)}},ap=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},cp=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new ap(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Nl=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},lp=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Pw(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ae(this.o===void 0,3512);let r=o=>{o.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,W("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Nl(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ae(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Nl(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function mR(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Ks=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=mR(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function ye(n,e){return n<e?-1:n>e?1:0}function up(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),o=e.charAt(r);if(i!==o)return Zf(i)===Zf(o)?ye(i,o):Zf(i)?1:-1}return ye(n.length,e.length)}var gR=55296,yR=57343;function Zf(n){let e=n.charCodeAt(0);return e>=gR&&e<=yR}function Eo(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Bw="__name__",Ol=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ne(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ne(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return ye(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):up(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return sr.fromString(e.substring(4,e.length-2))}},qe=class n extends Ol{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new q(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},vR=/^[_a-zA-Z][_a-zA-Z0-9]*$/,qt=class n extends Ol{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return vR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Bw}static keyField(){return new n([Bw])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new q(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new q(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new q(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(r+=c,i++):(o(),i++)}if(o(),s)throw new q(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ee=class n{constructor(e){this.path=e}static fromPath(e){return new n(qe.fromString(e))}static fromName(e){return new n(qe.fromString(e).popFirst(5))}static empty(){return new n(qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return qe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new qe(e.slice()))}};function PC(n,e,t){if(!t)throw new q(F.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function _R(n,e,t,r){if(e===!0&&r===!0)throw new q(F.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Uw(n){if(!ee.isDocumentKey(n))throw new q(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function $w(n){if(ee.isDocumentKey(n))throw new q(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function NC(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function uu(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ne(12329,{type:typeof n})}function zs(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new q(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=uu(n);throw new q(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function bR(n,e){if(e<=0)throw new q(F.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function nt(n,e){let t={typeString:n};return e&&(t.value=e),t}function sa(n,e){if(!NC(n))throw new q(F.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new q(F.INVALID_ARGUMENT,t);return!0}var zw=-62135596800,Hw=1e6,rt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Hw);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<zw)throw new q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Hw}_compareTo(e){return this.seconds===e.seconds?ye(this.nanoseconds,e.nanoseconds):ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(sa(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-zw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};rt._jsonSchemaVersion="firestore/timestamp/1.0",rt._jsonSchema={type:nt("string",rt._jsonSchemaVersion),seconds:nt("number"),nanoseconds:nt("number")};var ae=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new rt(0,0))}static max(){return new n(new rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Qs=-1,dp=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};dp.UNKNOWN_ID=-1;function wR(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ae.fromTimestamp(r===1e9?new rt(t+1,0):new rt(t,r));return new Ci(i,ee.empty(),e)}function CR(n){return new Ci(n.readTime,n.key,Qs)}var Ci=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ae.min(),ee.empty(),Qs)}static max(){return new n(ae.max(),ee.empty(),Qs)}};function ER(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ee.comparator(n.documentKey,e.documentKey),t!==0?t:ye(n.largestBatchId,e.largestBatchId))}var IR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",hp=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Fo(n){return B(this,null,function*(){if(n.code!==F.FAILED_PRECONDITION||n.message!==IR)throw n;W("LocalStore","Unexpectedly lost primary lease")})}var j=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(c=>{++i,c.next(()=>{++o,s&&o===i&&t()},l=>r(l))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),c=0;for(let l=0;l<o;l++){let d=l;t(e[d]).next(m=>{s[d]=m,++c,c===o&&r(s)},m=>i(m))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function DR(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Vo(n){return n.name==="IndexedDbTransactionError"}var Hm=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),qm=-1;function du(n){return n==null}function Ys(n){return n===0&&1/n==-1/0}function xR(n){return typeof n=="number"&&Number.isInteger(n)&&!Ys(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var OC="";function SR(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=qw(e)),e=TR(n.get(t),e);return qw(e)}function TR(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case OC:t+="";break;default:t+=o}}return t}function qw(n){return n+OC+""}var MR="remoteDocuments",RC="owner";var kC="mutationQueues";var FC="mutations";var VC="documentMutations",AR="remoteDocumentsV14";var LC="remoteDocumentGlobal";var jC="targets";var BC="targetDocuments";var UC="targetGlobal",$C="collectionParents";var zC="clientMetadata";var HC="bundles";var qC="namedQueries";var PR="indexConfiguration";var NR="indexState";var OR="indexEntries";var GC="documentOverlays";var RR="globals";var kR=[kC,FC,VC,MR,jC,RC,UC,BC,zC,LC,$C,HC,qC],Z5=[...kR,GC],FR=[kC,FC,VC,AR,jC,RC,UC,BC,zC,LC,$C,HC,qC,GC],VR=FR,LR=[...VR,PR,NR,OR];var e6=[...LR,RR];function Gw(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ti(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function WC(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Qe=class n{constructor(e,t){this.comparator=e,this.root=t||Rn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Rn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vo(this.root,e,this.comparator,!1)}getReverseIterator(){return new vo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vo(this.root,e,this.comparator,!0)}},vo=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Rn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ne(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw ne(27949);return e+(this.isRed()?0:1)}};Rn.EMPTY=null,Rn.RED=!0,Rn.BLACK=!1;Rn.EMPTY=new class{constructor(){this.size=0}get key(){throw ne(57766)}get value(){throw ne(16141)}get color(){throw ne(16727)}get left(){throw ne(29726)}get right(){throw ne(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Rn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var mt=class n{constructor(e){this.comparator=e,this.data=new Qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Rl(this.data.getIterator())}getIteratorFrom(e){return new Rl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Rl=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var On=class n{constructor(e){this.fields=e,e.sort(qt.comparator)}static empty(){return new n([])}unionWith(e){let t=new mt(qt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Eo(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var kl=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var It=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new kl("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};It.EMPTY_BYTE_STRING=new It("");var jR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ur(n){if(Ae(!!n,39018),typeof n=="string"){let e=0,t=jR.exec(n);if(Ae(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:He(n.seconds),nanos:He(n.nanos)}}function He(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function dr(n){return typeof n=="string"?It.fromBase64String(n):It.fromUint8Array(n)}var KC="server_timestamp",QC="__type__",YC="__previous_value__",JC="__local_write_time__";function Gm(n){return(n?.mapValue?.fields||{})[QC]?.stringValue===KC}function hu(n){let e=n.mapValue.fields[YC];return Gm(e)?hu(e):e}function Js(n){let e=ur(n.mapValue.fields[JC].timestampValue);return new rt(e.seconds,e.nanos)}var fp=class{constructor(e,t,r,i,o,s,c,l,d,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=d,this.isUsingEmulator=m}},Fl="(default)",Vl=class n{constructor(e,t){this.projectId=e,this.database=t||Fl}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Fl}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Wm="__type__",XC="__max__",Dl={mapValue:{fields:{__type__:{stringValue:XC}}}},Km="__vector__",Io="value";function jr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Gm(n)?4:eE(n)?9007199254740991:ZC(n)?10:11:ne(28295,{value:n})}function Vn(n,e){if(n===e)return!0;let t=jr(n);if(t!==jr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Js(n).isEqual(Js(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=ur(i.timestampValue),c=ur(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return dr(i.bytesValue).isEqual(dr(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return He(i.geoPointValue.latitude)===He(o.geoPointValue.latitude)&&He(i.geoPointValue.longitude)===He(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return He(i.integerValue)===He(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=He(i.doubleValue),c=He(o.doubleValue);return s===c?Ys(s)===Ys(c):isNaN(s)&&isNaN(c)}return!1}(n,e);case 9:return Eo(n.arrayValue.values||[],e.arrayValue.values||[],Vn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},c=o.mapValue.fields||{};if(Gw(s)!==Gw(c))return!1;for(let l in s)if(s.hasOwnProperty(l)&&(c[l]===void 0||!Vn(s[l],c[l])))return!1;return!0}(n,e);default:return ne(52216,{left:n})}}function Xs(n,e){return(n.values||[]).find(t=>Vn(t,e))!==void 0}function Do(n,e){if(n===e)return 0;let t=jr(n),r=jr(e);if(t!==r)return ye(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ye(n.booleanValue,e.booleanValue);case 2:return function(o,s){let c=He(o.integerValue||o.doubleValue),l=He(s.integerValue||s.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(n,e);case 3:return Ww(n.timestampValue,e.timestampValue);case 4:return Ww(Js(n),Js(e));case 5:return up(n.stringValue,e.stringValue);case 6:return function(o,s){let c=dr(o),l=dr(s);return c.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let c=o.split("/"),l=s.split("/");for(let d=0;d<c.length&&d<l.length;d++){let m=ye(c[d],l[d]);if(m!==0)return m}return ye(c.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let c=ye(He(o.latitude),He(s.latitude));return c!==0?c:ye(He(o.longitude),He(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Kw(n.arrayValue,e.arrayValue);case 10:return function(o,s){let c=o.fields||{},l=s.fields||{},d=c[Io]?.arrayValue,m=l[Io]?.arrayValue,g=ye(d?.values?.length||0,m?.values?.length||0);return g!==0?g:Kw(d,m)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Dl.mapValue&&s===Dl.mapValue)return 0;if(o===Dl.mapValue)return 1;if(s===Dl.mapValue)return-1;let c=o.fields||{},l=Object.keys(c),d=s.fields||{},m=Object.keys(d);l.sort(),m.sort();for(let g=0;g<l.length&&g<m.length;++g){let b=up(l[g],m[g]);if(b!==0)return b;let C=Do(c[l[g]],d[m[g]]);if(C!==0)return C}return ye(l.length,m.length)}(n.mapValue,e.mapValue);default:throw ne(23264,{he:t})}}function Ww(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ye(n,e);let t=ur(n),r=ur(e),i=ye(t.seconds,r.seconds);return i!==0?i:ye(t.nanos,r.nanos)}function Kw(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Do(t[i],r[i]);if(o)return o}return ye(t.length,r.length)}function xo(n){return pp(n)}function pp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=ur(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return dr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ee.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=pp(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${pp(t.fields[s])}`;return i+"}"}(n.mapValue):ne(61005,{value:n})}function Tl(n){switch(jr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=hu(n);return e?16+Tl(e):16;case 5:return 2*n.stringValue.length;case 6:return dr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Tl(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Ti(r.fields,(o,s)=>{i+=o.length+Tl(s)}),i}(n.mapValue);default:throw ne(13486,{value:n})}}function Qw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function mp(n){return!!n&&"integerValue"in n}function Qm(n){return!!n&&"arrayValue"in n}function Yw(n){return!!n&&"nullValue"in n}function Jw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ml(n){return!!n&&"mapValue"in n}function ZC(n){return(n?.mapValue?.fields||{})[Wm]?.stringValue===Km}function Hs(n){if(n.geoPointValue)return{geoPointValue:Y({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Y({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Ti(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Hs(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hs(n.arrayValue.values[t]);return e}return Y({},n)}function eE(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===XC}var n6={mapValue:{fields:{[Wm]:{stringValue:Km},[Io]:{arrayValue:{}}}}};var mn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ml(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hs(t)}setAll(e){let t=qt.emptyPath(),r={},i=[];e.forEach((s,c)=>{if(!t.isImmediateParentOf(c)){let l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=c.popLast()}s?r[c.lastSegment()]=Hs(s):i.push(c.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Ml(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ml(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ti(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Hs(this.value))}};function tE(n){let e=[];return Ti(n.fields,(t,r)=>{let i=new qt([t]);if(Ml(r)){let o=tE(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new On(e)}var gn=class n{constructor(e,t,r,i,o,s,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new n(e,0,ae.min(),ae.min(),ae.min(),mn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ae.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ae.min(),ae.min(),mn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ae.min(),ae.min(),mn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var So=class{constructor(e,t){this.position=e,this.inclusive=t}};function Xw(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=ee.comparator(ee.fromName(s.referenceValue),t.key):r=Do(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Zw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Vn(n.position[t],e.position[t]))return!1;return!0}var Ei=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function BR(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Ll=class{},tt=class n extends Ll{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new yp(e,t,r):t==="array-contains"?new bp(e,r):t==="in"?new wp(e,r):t==="not-in"?new Cp(e,r):t==="array-contains-any"?new Ep(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new vp(e,r):new _p(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Do(t,this.value)):t!==null&&jr(this.value)===jr(t)&&this.matchesComparison(Do(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},yn=class n extends Ll{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return nE(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function nE(n){return n.op==="and"}function rE(n){return UR(n)&&nE(n)}function UR(n){for(let e of n.filters)if(e instanceof yn)return!1;return!0}function gp(n){if(n instanceof tt)return n.field.canonicalString()+n.op.toString()+xo(n.value);if(rE(n))return n.filters.map(e=>gp(e)).join(",");{let e=n.filters.map(t=>gp(t)).join(",");return`${n.op}(${e})`}}function iE(n,e){return n instanceof tt?function(r,i){return i instanceof tt&&r.op===i.op&&r.field.isEqual(i.field)&&Vn(r.value,i.value)}(n,e):n instanceof yn?function(r,i){return i instanceof yn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,c)=>o&&iE(s,i.filters[c]),!0):!1}(n,e):void ne(19439)}function oE(n){return n instanceof tt?function(t){return`${t.field.canonicalString()} ${t.op} ${xo(t.value)}`}(n):n instanceof yn?function(t){return t.op.toString()+" {"+t.getFilters().map(oE).join(" ,")+"}"}(n):"Filter"}var yp=class extends tt{constructor(e,t,r){super(e,t,r),this.key=ee.fromName(r.referenceValue)}matches(e){let t=ee.comparator(e.key,this.key);return this.matchesComparison(t)}},vp=class extends tt{constructor(e,t){super(e,"in",t),this.keys=sE("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},_p=class extends tt{constructor(e,t){super(e,"not-in",t),this.keys=sE("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function sE(n,e){return(e.arrayValue?.values||[]).map(t=>ee.fromName(t.referenceValue))}var bp=class extends tt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Qm(t)&&Xs(t.arrayValue,this.value)}},wp=class extends tt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Xs(this.value.arrayValue,t)}},Cp=class extends tt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Xs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Xs(this.value.arrayValue,t)}},Ep=class extends tt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Qm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Xs(this.value.arrayValue,r))}};var Ip=class{constructor(e,t=null,r=[],i=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=c,this.Te=null}};function eC(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Ip(n,e,t,r,i,o,s)}function Ym(n){let e=se(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>gp(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),du(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>xo(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>xo(r)).join(",")),e.Te=t}return e.Te}function Jm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!BR(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!iE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Zw(n.startAt,e.startAt)&&Zw(n.endAt,e.endAt)}function Dp(n){return ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Br=class{constructor(e,t=null,r=[],i=[],o=null,s="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function $R(n,e,t,r,i,o,s,c){return new Br(n,e,t,r,i,o,s,c)}function Xm(n){return new Br(n)}function tC(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function aE(n){return n.collectionGroup!==null}function qs(n){let e=se(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new mt(qt.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Ei(o,r))}),t.has(qt.keyField().canonicalString())||e.Ie.push(new Ei(qt.keyField(),r))}return e.Ie}function kn(n){let e=se(n);return e.Ee||(e.Ee=zR(e,qs(n))),e.Ee}function zR(n,e){if(n.limitType==="F")return eC(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Ei(i.field,o)});let t=n.endAt?new So(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new So(n.startAt.position,n.startAt.inclusive):null;return eC(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function xp(n,e){let t=n.filters.concat([e]);return new Br(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function jl(n,e,t){return new Br(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function fu(n,e){return Jm(kn(n),kn(e))&&n.limitType===e.limitType}function cE(n){return`${Ym(kn(n))}|lt:${n.limitType}`}function mo(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>oE(i)).join(", ")}]`),du(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>xo(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>xo(i)).join(",")),`Target(${r})`}(kn(n))}; limitType=${n.limitType})`}function pu(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ee.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of qs(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,c,l){let d=Xw(s,c,l);return s.inclusive?d<=0:d<0}(r.startAt,qs(r),i)||r.endAt&&!function(s,c,l){let d=Xw(s,c,l);return s.inclusive?d>=0:d>0}(r.endAt,qs(r),i))}(n,e)}function HR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function lE(n){return(e,t)=>{let r=!1;for(let i of qs(n)){let o=qR(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function qR(n,e,t){let r=n.field.isKeyField()?ee.comparator(e.key,t.key):function(o,s,c){let l=s.data.field(o),d=c.data.field(o);return l!==null&&d!==null?Do(l,d):ne(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ne(19790,{direction:n.dir})}}var hr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ti(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return WC(this.inner)}size(){return this.innerSize}};var GR=new Qe(ee.comparator);function fr(){return GR}var uE=new Qe(ee.comparator);function $s(...n){let e=uE;for(let t of n)e=e.insert(t.key,t);return e}function dE(n){let e=uE;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function gi(){return Gs()}function hE(){return Gs()}function Gs(){return new hr(n=>n.toString(),(n,e)=>n.isEqual(e))}var WR=new Qe(ee.comparator),KR=new mt(ee.comparator);function ve(...n){let e=KR;for(let t of n)e=e.add(t);return e}var QR=new mt(ye);function YR(){return QR}function Zm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ys(e)?"-0":e}}function fE(n){return{integerValue:""+n}}function JR(n,e){return xR(e)?fE(e):Zm(n,e)}var To=class{constructor(){this._=void 0}};function XR(n,e,t){return n instanceof Mo?function(i,o){let s={fields:{[QC]:{stringValue:KC},[JC]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Gm(o)&&(o=hu(o)),o&&(s.fields[YC]=o),{mapValue:s}}(t,e):n instanceof Ii?mE(n,e):n instanceof Di?gE(n,e):function(i,o){let s=pE(i,o),c=nC(s)+nC(i.Ae);return mp(s)&&mp(i.Ae)?fE(c):Zm(i.serializer,c)}(n,e)}function ZR(n,e,t){return n instanceof Ii?mE(n,e):n instanceof Di?gE(n,e):t}function pE(n,e){return n instanceof Ao?function(r){return mp(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Mo=class extends To{},Ii=class extends To{constructor(e){super(),this.elements=e}};function mE(n,e){let t=yE(e);for(let r of n.elements)t.some(i=>Vn(i,r))||t.push(r);return{arrayValue:{values:t}}}var Di=class extends To{constructor(e){super(),this.elements=e}};function gE(n,e){let t=yE(e);for(let r of n.elements)t=t.filter(i=>!Vn(i,r));return{arrayValue:{values:t}}}var Ao=class extends To{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function nC(n){return He(n.integerValue||n.doubleValue)}function yE(n){return Qm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function e2(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Ii&&i instanceof Ii||r instanceof Di&&i instanceof Di?Eo(r.elements,i.elements,Vn):r instanceof Ao&&i instanceof Ao?Vn(r.Ae,i.Ae):r instanceof Mo&&i instanceof Mo}(n.transform,e.transform)}var Sp=class{constructor(e,t){this.version=e,this.transformResults=t}},_i=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Al(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Po=class{};function vE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Bl(n.key,_i.none()):new xi(n.key,n.data,_i.none());{let t=n.data,r=mn.empty(),i=new mt(qt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new pr(n.key,r,new On(i.toArray()),_i.none())}}function t2(n,e,t){n instanceof xi?function(i,o,s){let c=i.value.clone(),l=iC(i.fieldTransforms,o,s.transformResults);c.setAll(l),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):n instanceof pr?function(i,o,s){if(!Al(i.precondition,o))return void o.convertToUnknownDocument(s.version);let c=iC(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(_E(i)),l.setAll(c),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Ws(n,e,t,r){return n instanceof xi?function(o,s,c,l){if(!Al(o.precondition,s))return c;let d=o.value.clone(),m=oC(o.fieldTransforms,l,s);return d.setAll(m),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof pr?function(o,s,c,l){if(!Al(o.precondition,s))return c;let d=oC(o.fieldTransforms,l,s),m=s.data;return m.setAll(_E(o)),m.setAll(d),s.convertToFoundDocument(s.version,m).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(o,s,c){return Al(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c}(n,e,t)}function n2(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=pE(r.transform,i||null);o!=null&&(t===null&&(t=mn.empty()),t.set(r.field,o))}return t||null}function rC(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Eo(r,i,(o,s)=>e2(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var xi=class extends Po{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},pr=class extends Po{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function _E(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function iC(n,e,t){let r=new Map;Ae(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,c=e.data.field(o.field);r.set(o.field,ZR(s,c,t[i]))}return r}function oC(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,XR(o,s,e))}return r}var Bl=class extends Po{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Tp=class extends Po{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Mp=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&t2(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ws(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Ws(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=hE();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=t.has(i.key)?null:c;let l=vE(s,c);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ve())}isEqual(e){return this.batchId===e.batchId&&Eo(this.mutations,e.mutations,(t,r)=>rC(t,r))&&Eo(this.baseMutations,e.baseMutations,(t,r)=>rC(t,r))}},Ap=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ae(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return WR}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Pp=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Np=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Ze,we;function r2(n){switch(n){case F.OK:return ne(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return ne(15467,{code:n})}}function bE(n){if(n===void 0)return lr("GRPC error has no .code"),F.UNKNOWN;switch(n){case Ze.OK:return F.OK;case Ze.CANCELLED:return F.CANCELLED;case Ze.UNKNOWN:return F.UNKNOWN;case Ze.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Ze.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Ze.INTERNAL:return F.INTERNAL;case Ze.UNAVAILABLE:return F.UNAVAILABLE;case Ze.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Ze.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Ze.NOT_FOUND:return F.NOT_FOUND;case Ze.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Ze.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Ze.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Ze.ABORTED:return F.ABORTED;case Ze.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Ze.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Ze.DATA_LOSS:return F.DATA_LOSS;default:return ne(39323,{code:n})}}(we=Ze||(Ze={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";var i2=null;function o2(){return new TextEncoder}var s2=new sr([4294967295,4294967295],0);function sC(n){let e=o2().encode(n),t=new Wf;return t.update(e),new Uint8Array(t.digest())}function aC(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new sr([t,r],0),new sr([i,o],0)]}var Op=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new yi(`Invalid padding: ${t}`);if(r<0)throw new yi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new yi(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new yi(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=sr.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(sr.fromNumber(r)));return i.compare(s2)===1&&(i=new sr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=sC(e),[r,i]=aC(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(c=>s.insert(c)),s}insert(e){if(this.ge===0)return;let t=sC(e),[r,i]=aC(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.Se(s)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},yi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ul=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Zs.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ae.min(),i,new Qe(ye),fr(),ve())}},Zs=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ve(),ve(),ve())}};var _o=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},$l=class{constructor(e,t){this.targetId=e,this.Ce=t}},zl=class{constructor(e,t,r=It.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Hl=class{constructor(){this.ve=0,this.Fe=cC(),this.Me=It.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ve(),t=ve(),r=ve();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ne(38017,{changeType:o})}}),new Zs(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=cC()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ae(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},Rp=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=fr(),this.Je=xl(),this.He=xl(),this.Ye=new Qe(ye)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:ne(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let o=i.target;if(Dp(o))if(r===0){let s=new ee(o.path);this.et(t,s,gn.newNoDocument(s,ae.min()))}else Ae(r===1,20013,{expectedCount:r});else{let s=this._t(t);if(s!==r){let c=this.ut(e),l=c?this.ct(c,e,s):1;if(l!==0){this.it(t);let d=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,d)}i2?.lt(function(m,g,b,C,N){let R={localCacheCount:m,existenceFilterCount:g.count,databaseId:b.database,projectId:b.projectId},k=g.unchangedNames;return k&&(R.bloomFilter={applied:N===0,hashCount:k?.hashCount??0,bitmapLength:k?.bits?.bitmap?.length??0,padding:k?.bits?.padding??0,mightContain:H=>C?.mightContain(H)??!1}),R}(s,e.Ce,this.Ge.ht(),c,l))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,c;try{s=dr(r).toUint8Array()}catch(l){if(l instanceof kl)return Co("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new Op(s,i,o)}catch(l){return Co(l instanceof yi?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Ge.ht(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.et(t,o,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((o,s)=>{let c=this.ot(s);if(c){if(o.current&&Dp(c.target)){let l=new ee(c.target.path);this.It(l).has(s)||this.Et(s,l)||this.et(s,l,gn.newNoDocument(l,e))}o.Be&&(t.set(s,o.ke()),o.qe())}});let r=ve();this.He.forEach((o,s)=>{let c=!0;s.forEachWhile(l=>{let d=this.ot(l);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new Ul(e,t,this.Ye,this.je,r);return this.je=fr(),this.Je=xl(),this.He=xl(),this.Ye=new Qe(ye),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Hl,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new mt(ye),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new mt(ye),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||W("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Hl),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function xl(){return new Qe(ee.comparator)}function cC(){return new Qe(ee.comparator)}var a2={asc:"ASCENDING",desc:"DESCENDING"},c2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},l2={and:"AND",or:"OR"},kp=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Fp(n,e){return n.useProto3Json||du(e)?e:{value:e}}function ql(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function u2(n,e){return ql(n,e.toTimestamp())}function Fn(n){return Ae(!!n,49232),ae.fromTimestamp(function(t){let r=ur(t);return new rt(r.seconds,r.nanos)}(n))}function eg(n,e){return Vp(n,e).canonicalString()}function Vp(n,e){let t=function(i){return new qe(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function CE(n){let e=qe.fromString(n);return Ae(SE(e),10190,{key:e.toString()}),e}function Lp(n,e){return eg(n.databaseId,e.path)}function ep(n,e){let t=CE(e);if(t.get(1)!==n.databaseId.projectId)throw new q(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new q(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ee(IE(t))}function EE(n,e){return eg(n.databaseId,e)}function d2(n){let e=CE(n);return e.length===4?qe.emptyPath():IE(e)}function jp(n){return new qe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function IE(n){return Ae(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function lC(n,e,t){return{name:Lp(n,e),fields:t.value.mapValue.fields}}function h2(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ne(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(d,m){return d.useProto3Json?(Ae(m===void 0||typeof m=="string",58123),It.fromBase64String(m||"")):(Ae(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),It.fromUint8Array(m||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&function(d){let m=d.code===void 0?F.UNKNOWN:bE(d.code);return new q(m,d.message||"")}(s);t=new zl(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=ep(n,r.document.name),o=Fn(r.document.updateTime),s=r.document.createTime?Fn(r.document.createTime):ae.min(),c=new mn({mapValue:{fields:r.document.fields}}),l=gn.newFoundDocument(i,o,s,c),d=r.targetIds||[],m=r.removedTargetIds||[];t=new _o(d,m,l.key,l)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=ep(n,r.document),o=r.readTime?Fn(r.readTime):ae.min(),s=gn.newNoDocument(i,o),c=r.removedTargetIds||[];t=new _o([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=ep(n,r.document),o=r.removedTargetIds||[];t=new _o([],o,i,null)}else{if(!("filter"in e))return ne(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Np(i,o),c=r.targetId;t=new $l(c,s)}}return t}function f2(n,e){let t;if(e instanceof xi)t={update:lC(n,e.key,e.value)};else if(e instanceof Bl)t={delete:Lp(n,e.key)};else if(e instanceof pr)t={update:lC(n,e.key,e.data),updateMask:C2(e.fieldMask)};else{if(!(e instanceof Tp))return ne(16599,{Vt:e.type});t={verify:Lp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let c=s.transform;if(c instanceof Mo)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ii)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Di)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Ao)return{fieldPath:s.field.canonicalString(),increment:c.Ae};throw ne(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:u2(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ne(27497)}(n,e.precondition)),t}function p2(n,e){return n&&n.length>0?(Ae(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?Fn(i.updateTime):Fn(o);return s.isEqual(ae.min())&&(s=Fn(o)),new Sp(s,i.transformResults||[])}(t,e))):[]}function m2(n,e){return{documents:[EE(n,e.path)]}}function g2(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=EE(n,i);let o=function(d){if(d.length!==0)return xE(yn.create(d,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(d){if(d.length!==0)return d.map(m=>function(b){return{field:go(b.field),direction:_2(b.dir)}}(m))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let c=Fp(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:t,parent:i}}function y2(n){let e=d2(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Ae(r===1,65062);let m=t.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let o=[];t.where&&(o=function(g){let b=DE(g);return b instanceof yn&&rE(b)?b.getFilters():[b]}(t.where));let s=[];t.orderBy&&(s=function(g){return g.map(b=>function(N){return new Ei(yo(N.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(b))}(t.orderBy));let c=null;t.limit&&(c=function(g){let b;return b=typeof g=="object"?g.value:g,du(b)?null:b}(t.limit));let l=null;t.startAt&&(l=function(g){let b=!!g.before,C=g.values||[];return new So(C,b)}(t.startAt));let d=null;return t.endAt&&(d=function(g){let b=!g.before,C=g.values||[];return new So(C,b)}(t.endAt)),$R(e,i,s,o,c,"F",l,d)}function v2(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function DE(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=yo(t.unaryFilter.field);return tt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=yo(t.unaryFilter.field);return tt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=yo(t.unaryFilter.field);return tt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=yo(t.unaryFilter.field);return tt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ne(61313);default:return ne(60726)}}(n):n.fieldFilter!==void 0?function(t){return tt.create(yo(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ne(58110);default:return ne(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return yn.create(t.compositeFilter.filters.map(r=>DE(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ne(1026)}}(t.compositeFilter.op))}(n):ne(30097,{filter:n})}function _2(n){return a2[n]}function b2(n){return c2[n]}function w2(n){return l2[n]}function go(n){return{fieldPath:n.canonicalString()}}function yo(n){return qt.fromServerFormat(n.fieldPath)}function xE(n){return n instanceof tt?function(t){if(t.op==="=="){if(Jw(t.value))return{unaryFilter:{field:go(t.field),op:"IS_NAN"}};if(Yw(t.value))return{unaryFilter:{field:go(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Jw(t.value))return{unaryFilter:{field:go(t.field),op:"IS_NOT_NAN"}};if(Yw(t.value))return{unaryFilter:{field:go(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:go(t.field),op:b2(t.op),value:t.value}}}(n):n instanceof yn?function(t){let r=t.getFilters().map(i=>xE(i));return r.length===1?r[0]:{compositeFilter:{op:w2(t.op),filters:r}}}(n):ne(54877,{filter:n})}function C2(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function SE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var ea=class n{constructor(e,t,r,i,o=ae.min(),s=ae.min(),c=It.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Bp=class{constructor(e){this.yt=e}};function E2(n){let e=y2({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?jl(e,e.limit,"L"):e}var Gl=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(He(e.integerValue));else if("doubleValue"in e){let r=He(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Ys(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=ur(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(dr(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?eE(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):ZC(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):ne(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=Io,o=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(He(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),ee.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};Gl.Kt=new Gl;var Up=class{constructor(){this.Cn=new $p}addToCollectionParentIndex(e,t){return this.Cn.add(t),j.resolve()}getCollectionParents(e,t){return j.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return j.resolve()}deleteFieldIndex(e,t){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,t){return j.resolve()}getDocumentsMatchingTarget(e,t){return j.resolve(null)}getIndexType(e,t){return j.resolve(0)}getFieldIndexes(e,t){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,t){return j.resolve(Ci.min())}getMinOffsetFromCollectionGroup(e,t){return j.resolve(Ci.min())}updateCollectionGroup(e,t,r){return j.resolve()}updateIndexEntries(e,t){return j.resolve()}},$p=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new mt(qe.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new mt(qe.comparator)).toArray()}};var r6=new Uint8Array(0);var uC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},TE=41943040,rn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};rn.DEFAULT_COLLECTION_PERCENTILE=10,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rn.DEFAULT=new rn(TE,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rn.DISABLED=new rn(-1,0,0);var ta=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var dC="LruGarbageCollector",I2=1048576;function hC([n,e],[t,r]){let i=ye(n,t);return i===0?ye(e,r):i}var zp=class{constructor(e){this.Ir=e,this.buffer=new mt(hC),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();hC(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Hp=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){W(dC,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>B(this,null,function*(){this.Rr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Vo(t)?W(dC,"Ignoring IndexedDB error during garbage collection: ",t):yield Fo(t)}yield this.Vr(3e5)}))}},qp=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return j.resolve(Hm.ce);let r=new zp(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(uC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),uC):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,s,c,l,d,m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,s=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,c=Date.now(),this.removeTargets(e,r,t))).next(g=>(o=g,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),po()<=be.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-m}ms
	Determined least recently used ${i} in `+(c-s)+`ms
	Removed ${o} targets in `+(l-c)+`ms
	Removed ${g} documents in `+(d-l)+`ms
Total Duration: ${d-m}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:g})))}};function D2(n,e){return new qp(n,e)}var Gp=class{constructor(){this.changes=new hr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,gn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?j.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Wp=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Kp=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Ws(r.mutation,i,On.empty(),rt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ve()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ve()){let i=gi();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=$s();return o.forEach((c,l)=>{s=s.insert(c,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=gi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ve()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,c)=>{t.set(s,c)})})}computeViews(e,t,r,i){let o=fr(),s=Gs(),c=function(){return Gs()}();return t.forEach((l,d)=>{let m=r.get(d.key);i.has(d.key)&&(m===void 0||m.mutation instanceof pr)?o=o.insert(d.key,d):m!==void 0?(s.set(d.key,m.mutation.getFieldMask()),Ws(m.mutation,d,m.mutation.getFieldMask(),rt.now())):s.set(d.key,On.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((d,m)=>s.set(d,m)),t.forEach((d,m)=>c.set(d,new Wp(m,s.get(d)??null))),c))}recalculateAndSaveOverlays(e,t){let r=Gs(),i=new Qe((s,c)=>s-c),o=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let c of s)c.keys().forEach(l=>{let d=t.get(l);if(d===null)return;let m=r.get(l)||On.empty();m=c.applyToLocalView(d,m),r.set(l,m);let g=(i.get(c.batchId)||ve()).add(l);i=i.insert(c.batchId,g)})}).next(()=>{let s=[],c=i.getReverseIterator();for(;c.hasNext();){let l=c.getNext(),d=l.key,m=l.value,g=hE();m.forEach(b=>{if(!o.has(b)){let C=vE(t.get(b),r.get(b));C!==null&&g.set(b,C),o=o.add(b)}}),s.push(this.documentOverlayCache.saveOverlays(e,d,g))}return j.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return ee.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):aE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):j.resolve(gi()),c=Qs,l=o;return s.next(d=>j.forEach(d,(m,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),o.get(m)?j.resolve():this.remoteDocumentCache.getEntry(e,m).next(b=>{l=l.insert(m,b)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,l,d,ve())).next(m=>({batchId:c,changes:dE(m)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ee(t)).next(r=>{let i=$s();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=$s();return this.indexManager.getCollectionParents(e,o).next(c=>j.forEach(c,l=>{let d=function(g,b){return new Br(b,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(m=>{m.forEach((g,b)=>{s=s.insert(g,b)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((l,d)=>{let m=d.getKey();s.get(m)===null&&(s=s.insert(m,gn.newInvalidDocument(m)))});let c=$s();return s.forEach((l,d)=>{let m=o.get(l);m!==void 0&&Ws(m.mutation,d,On.empty(),rt.now()),pu(t,d)&&(c=c.insert(l,d))}),c})}};var Qp=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return j.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Fn(i.createTime)}}(t)),j.resolve()}getNamedQuery(e,t){return j.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(i){return{name:i.name,query:E2(i.bundledQuery),readTime:Fn(i.readTime)}}(t)),j.resolve()}};var Yp=class{constructor(){this.overlays=new Qe(ee.comparator),this.qr=new Map}getOverlay(e,t){return j.resolve(this.overlays.get(t))}getOverlays(e,t){let r=gi();return j.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),j.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),j.resolve()}getOverlaysForCollection(e,t,r){let i=gi(),o=t.length+1,s=new ee(t.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let l=c.getNext().value,d=l.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return j.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Qe((d,m)=>d-m),s=this.overlays.getIterator();for(;s.hasNext();){let d=s.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let m=o.get(d.largestBatchId);m===null&&(m=gi(),o=o.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}let c=gi(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((d,m)=>c.set(d,m)),!(c.size()>=i)););return j.resolve(c)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Pp(t,r));let o=this.qr.get(t);o===void 0&&(o=ve(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}};var Jp=class{constructor(){this.sessionToken=It.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,j.resolve()}};var na=class{constructor(){this.Qr=new mt(et.$r),this.Ur=new mt(et.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new et(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new et(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new ee(new qe([])),r=new et(t,e),i=new et(t,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new ee(new qe([])),r=new et(t,e),i=new et(t,e+1),o=ve();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new et(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},et=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ee.comparator(e.key,t.key)||ye(e.Yr,t.Yr)}static Kr(e,t){return ye(e.Yr,t.Yr)||ee.comparator(e.key,t.key)}};var Xp=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new mt(et.$r)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Mp(o,t,r,i);this.mutationQueue.push(s);for(let c of i)this.Zr=this.Zr.add(new et(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return j.resolve(s)}lookupMutationBatch(e,t){return j.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),o=i<0?0:i;return j.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?qm:this.tr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new et(t,0),i=new et(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{let c=this.Xr(s.Yr);o.push(c)}),j.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mt(ye);return t.forEach(i=>{let o=new et(i,0),s=new et(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],c=>{r=r.add(c.Yr)})}),j.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;ee.isDocumentKey(o)||(o=o.child(""));let s=new et(new ee(o),0),c=new mt(ye);return this.Zr.forEachWhile(l=>{let d=l.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(l.Yr)),!0)},s),j.resolve(this.ti(c))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Ae(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return j.forEach(t.mutations,i=>{let o=new et(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new et(t,0),i=this.Zr.firstAfterOrEqual(r);return j.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Zp=class{constructor(e){this.ri=e,this.docs=function(){return new Qe(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return j.resolve(r?r.document.mutableCopy():gn.newInvalidDocument(t))}getEntries(e,t){let r=fr();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():gn.newInvalidDocument(i))}),j.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=fr(),s=t.path,c=new ee(s.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){let{key:d,value:{document:m}}=l.getNext();if(!s.isPrefixOf(d.path))break;d.path.length>s.length+1||ER(CR(m),r)<=0||(i.has(m.key)||pu(t,m))&&(o=o.insert(m.key,m.mutableCopy()))}return j.resolve(o)}getAllFromCollectionGroup(e,t,r,i){ne(9500)}ii(e,t){return j.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new em(this)}getSize(e){return j.resolve(this.size)}},em=class extends Gp{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),j.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var tm=class{constructor(e){this.persistence=e,this.si=new hr(t=>Ym(t),Jm),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.oi=0,this._i=new na,this.targetCount=0,this.ai=ta.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),j.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new ta(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,j.resolve()}updateTargetData(e,t){return this.Pr(t),j.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.si.forEach((s,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),j.waitFor(o).next(()=>i)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return j.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),j.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),j.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),j.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return j.resolve(r)}containsKey(e,t){return j.resolve(this._i.containsKey(t))}};var Wl=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new Hm(0),this.li=!1,this.li=!0,this.hi=new Jp,this.referenceDelegate=e(this),this.Pi=new tm(this),this.indexManager=new Up,this.remoteDocumentCache=function(i){return new Zp(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new Bp(t),this.Ii=new Qp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Yp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new Xp(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){W("MemoryPersistence","Starting transaction:",e);let i=new nm(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,t){return j.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},nm=class extends hp{constructor(e){super(),this.currentSequenceNumber=e}},rm=class n{constructor(e){this.persistence=e,this.Ri=new na,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw ne(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),j.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),j.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.fi,r=>{let i=ee.fromPath(r);return this.gi(e,i).next(o=>{o||t.removeEntry(i,ae.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return j.or([()=>j.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},Kl=class n{constructor(e,t){this.persistence=e,this.pi=new hr(r=>SR(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=D2(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return j.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return j.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?j.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,t).next(c=>{c||(r++,o.removeEntry(s,ae.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),j.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),j.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),j.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Tl(e.data.value)),t}br(e,t,r){return j.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return j.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var im=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=ve(),i=ve();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var om=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var sm=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return gw()?8:DR(mw())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ys(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new om;return this.Ss(e,t,s).next(c=>{if(o.result=c,this.Vs)return this.bs(e,t,s,c.size)})}).next(()=>o.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(po()<=be.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",mo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),j.resolve()):(po()<=be.DEBUG&&W("QueryEngine","Query:",mo(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(po()<=be.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",mo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kn(t))):j.resolve())}ys(e,t){if(tC(t))return j.resolve(null);let r=kn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=jl(t,null,"F"),r=kn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ve(...o);return this.ps.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,r).next(l=>{let d=this.Ds(t,c);return this.Cs(t,d,s,l.readTime)?this.ys(e,jl(t,null,"F")):this.vs(e,d,t,l)}))})))}ws(e,t,r,i){return tC(t)||i.isEqual(ae.min())?j.resolve(null):this.ps.getDocuments(e,r).next(o=>{let s=this.Ds(t,o);return this.Cs(t,s,r,i)?j.resolve(null):(po()<=be.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),mo(t)),this.vs(e,s,t,wR(i,Qs)).next(c=>c))})}Ds(e,t){let r=new mt(lE(e));return t.forEach((i,o)=>{pu(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return po()<=be.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",mo(t)),this.ps.getDocumentsMatchingQuery(e,t,Ci.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var tg="LocalStore",x2=3e8,am=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Qe(ye),this.xs=new hr(o=>Ym(o),Jm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Kp(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function S2(n,e,t,r){return new am(n,e,t,r)}function ME(n,e){return B(this,null,function*(){let t=se(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],c=[],l=ve();for(let d of i){s.push(d.batchId);for(let m of d.mutations)l=l.add(m.key)}for(let d of o){c.push(d.batchId);for(let m of d.mutations)l=l.add(m.key)}return t.localDocuments.getDocuments(r,l).next(d=>({Ls:d,removedBatchIds:s,addedBatchIds:c}))})})})}function T2(n,e){let t=se(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return function(c,l,d,m){let g=d.batch,b=g.keys(),C=j.resolve();return b.forEach(N=>{C=C.next(()=>m.getEntry(l,N)).next(R=>{let k=d.docVersions.get(N);Ae(k!==null,48541),R.version.compareTo(k)<0&&(g.applyToRemoteDocument(R,d),R.isValidDocument()&&(R.setReadTime(d.commitVersion),m.addEntry(R)))})}),C.next(()=>c.mutationQueue.removeMutationBatch(l,g))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let l=ve();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(l=l.add(c.batch.mutations[d].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function AE(n){let e=se(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function M2(n,e){let t=se(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let c=[];e.targetChanges.forEach((m,g)=>{let b=i.get(g);if(!b)return;c.push(t.Pi.removeMatchingKeys(o,m.removedDocuments,g).next(()=>t.Pi.addMatchingKeys(o,m.addedDocuments,g)));let C=b.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?C=C.withResumeToken(It.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):m.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(m.resumeToken,r)),i=i.insert(g,C),function(R,k,H){return R.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=x2?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(b,C,m)&&c.push(t.Pi.updateTargetData(o,C))});let l=fr(),d=ve();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,m))}),c.push(A2(o,s,e.documentUpdates).next(m=>{l=m.ks,d=m.qs})),!r.isEqual(ae.min())){let m=t.Pi.getLastRemoteSnapshotVersion(o).next(g=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(m)}return j.waitFor(c).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,l,d)).next(()=>l)}).then(o=>(t.Ms=i,o))}function A2(n,e,t){let r=ve(),i=ve();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=fr();return t.forEach((c,l)=>{let d=o.get(c);l.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),l.isNoDocument()&&l.version.isEqual(ae.min())?(e.removeEntry(c,l.readTime),s=s.insert(c,l)):!d.isValidDocument()||l.version.compareTo(d.version)>0||l.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(l),s=s.insert(c,l)):W(tg,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",l.version)}),{ks:s,qs:i}})}function P2(n,e){let t=se(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=qm),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function N2(n,e){let t=se(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(o=>o?(i=o,j.resolve(i)):t.Pi.allocateTargetId(r).next(s=>(i=new ea(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}function cm(n,e,t){return B(this,null,function*(){let r=se(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Vo(s))throw s;W(tg,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)})}function fC(n,e,t){let r=se(n),i=ae.min(),o=ve();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,d,m){let g=se(l),b=g.xs.get(m);return b!==void 0?j.resolve(g.Ms.get(b)):g.Pi.getTargetData(d,m)}(r,s,kn(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,c.targetId).next(l=>{o=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,t?i:ae.min(),t?o:ve())).next(c=>(O2(r,HR(e),c),{documents:c,Qs:o})))}function O2(n,e,t){let r=n.Os.get(e)||ae.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Os.set(e,r)}var Ql=class{constructor(){this.activeTargetIds=YR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var lm=class{constructor(){this.Mo=new Ql,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ql,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var um=class{Oo(e){}shutdown(){}};var pC="ConnectivityMonitor",Yl=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){W(pC,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){W(pC,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Sl=null;function dm(){return Sl===null?Sl=function(){return 268435456+Math.round(2147483648*Math.random())}():Sl++,"0x"+Sl.toString(16)}var tp="RestConnection",R2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},hm=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Fl?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){let s=dm(),c=this.zo(e,t.toUriEncodedString());W(tp,`Sending RPC '${e}' ${s}:`,c,r);let l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,o);let{host:d}=new URL(c),m=_l(d);return this.Jo(e,c,l,r,m).then(g=>(W(tp,`Received RPC '${e}' ${s}: `,g),g),g=>{throw Co(tp,`RPC '${e}' ${s} failed with error: `,g,"url: ",c,"request:",r),g})}Ho(e,t,r,i,o,s){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ko}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,t){let r=R2[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var fm=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var Ct="WebChannelConnection",pm=class extends hm{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){let s=dm();return new Promise((c,l)=>{let d=new Kf;d.setWithCredentials(!0),d.listenOnce(Qf.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Us.NO_ERROR:let g=d.getResponseJson();W(Ct,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(g)),c(g);break;case Us.TIMEOUT:W(Ct,`RPC '${e}' ${s} timed out`),l(new q(F.DEADLINE_EXCEEDED,"Request time out"));break;case Us.HTTP_ERROR:let b=d.getStatus();if(W(Ct,`RPC '${e}' ${s} failed with status:`,b,"response text:",d.getResponseText()),b>0){let C=d.getResponseJson();Array.isArray(C)&&(C=C[0]);let N=C?.error;if(N&&N.status&&N.message){let R=function(H){let re=H.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(re)>=0?re:F.UNKNOWN}(N.status);l(new q(R,N.message))}else l(new q(F.UNKNOWN,"Server responded with status "+d.getStatus()))}else l(new q(F.UNAVAILABLE,"Connection failed."));break;default:ne(9055,{l_:e,streamId:s,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{W(Ct,`RPC '${e}' ${s} completed.`)}});let m=JSON.stringify(i);W(Ct,`RPC '${e}' ${s} sending request:`,i),d.send(t,"POST",m,r,15)})}T_(e,t,r){let i=dm(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Xf(),c=Jf(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(l.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;let m=o.join("");W(Ct,`Creating RPC '${e}' stream ${i}: ${m}`,l);let g=s.createWebChannel(m,l);this.I_(g);let b=!1,C=!1,N=new fm({Yo:k=>{C?W(Ct,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(b||(W(Ct,`Opening RPC '${e}' stream ${i} transport.`),g.open(),b=!0),W(Ct,`RPC '${e}' stream ${i} sending:`,k),g.send(k))},Zo:()=>g.close()}),R=(k,H,re)=>{k.listen(H,Q=>{try{re(Q)}catch(Ce){setTimeout(()=>{throw Ce},0)}})};return R(g,fo.EventType.OPEN,()=>{C||(W(Ct,`RPC '${e}' stream ${i} transport opened.`),N.o_())}),R(g,fo.EventType.CLOSE,()=>{C||(C=!0,W(Ct,`RPC '${e}' stream ${i} transport closed`),N.a_(),this.E_(g))}),R(g,fo.EventType.ERROR,k=>{C||(C=!0,Co(Ct,`RPC '${e}' stream ${i} transport errored. Name:`,k.name,"Message:",k.message),N.a_(new q(F.UNAVAILABLE,"The operation could not be completed")))}),R(g,fo.EventType.MESSAGE,k=>{if(!C){let H=k.data[0];Ae(!!H,16349);let re=H,Q=re?.error||re[0]?.error;if(Q){W(Ct,`RPC '${e}' stream ${i} received error:`,Q);let Ce=Q.status,ke=function(w){let I=Ze[w];if(I!==void 0)return bE(I)}(Ce),Ie=Q.message;ke===void 0&&(ke=F.INTERNAL,Ie="Unknown error status: "+Ce+" with message "+Q.message),C=!0,N.a_(new q(ke,Ie)),g.close()}else W(Ct,`RPC '${e}' stream ${i} received:`,H),N.u_(H)}}),R(c,Yf.STAT_EVENT,k=>{k.stat===Il.PROXY?W(Ct,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===Il.NOPROXY&&W(Ct,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{N.__()},0),N}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function np(){return typeof document<"u"?document:null}function mu(n){return new kp(n,!0)}var Jl=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var mC="PersistentStream",Xl=class{constructor(e,t,r,i,o,s,c,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Jl(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}stop(){return B(this,null,function*(){this.x_()&&(yield this.close(0))})}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}k_(){return B(this,null,function*(){if(this.O_())return this.close(0)})}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return B(this,null,function*(){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===F.RESOURCE_EXHAUSTED?(lr(t.toString()),lr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.r_(t)})}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new q(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(()=>B(this,null,function*(){this.state=0,this.start()}))}z_(e){return W(mC,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(W(mC,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},mm=class extends Xl{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=h2(this.serializer,e),r=function(o){if(!("targetChange"in o))return ae.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ae.min():s.readTime?Fn(s.readTime):ae.min()}(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=jp(this.serializer),t.addTarget=function(o,s){let c,l=s.target;if(c=Dp(l)?{documents:m2(o,l)}:{query:g2(o,l).ft},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=wE(o,s.resumeToken);let d=Fp(o,s.expectedCount);d!==null&&(c.expectedCount=d)}else if(s.snapshotVersion.compareTo(ae.min())>0){c.readTime=ql(o,s.snapshotVersion.toTimestamp());let d=Fp(o,s.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);let r=v2(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=jp(this.serializer),t.removeTarget=e,this.q_(t)}},gm=class extends Xl{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ae(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ae(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ae(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=p2(e.writeResults,e.commitTime),r=Fn(e.commitTime);return this.listener.na(r,t)}ra(){let e={};e.database=jp(this.serializer),this.q_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>f2(this.serializer,r))};this.q_(t)}};var ym=class{},vm=class extends ym{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new q(F.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,Vp(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(F.UNKNOWN,o.toString())})}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.Ho(e,Vp(t,r),i,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new q(F.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},_m=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(lr(t),this.aa=!1):W("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Si="RemoteStore",bm=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(()=>B(this,null,function*(){Mi(this)&&(W(Si,"Restarting streams for network reachability change."),yield function(l){return B(this,null,function*(){let d=se(l);d.Ea.add(4),yield aa(d),d.Ra.set("Unknown"),d.Ea.delete(4),yield gu(d)})}(this))}))}),this.Ra=new _m(r,i)}};function gu(n){return B(this,null,function*(){if(Mi(n))for(let e of n.da)yield e(!0)})}function aa(n){return B(this,null,function*(){for(let e of n.da)yield e(!1)})}function PE(n,e){let t=se(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),og(t)?ig(t):Lo(t).O_()&&rg(t,e))}function ng(n,e){let t=se(n),r=Lo(t);t.Ia.delete(e),r.O_()&&NE(t,e),t.Ia.size===0&&(r.O_()?r.L_():Mi(t)&&t.Ra.set("Unknown"))}function rg(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Lo(n).Y_(e)}function NE(n,e){n.Va.Ue(e),Lo(n).Z_(e)}function ig(n){n.Va=new Rp({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Lo(n).start(),n.Ra.ua()}function og(n){return Mi(n)&&!Lo(n).x_()&&n.Ia.size>0}function Mi(n){return se(n).Ea.size===0}function OE(n){n.Va=void 0}function k2(n){return B(this,null,function*(){n.Ra.set("Online")})}function F2(n){return B(this,null,function*(){n.Ia.forEach((e,t)=>{rg(n,e)})})}function V2(n,e){return B(this,null,function*(){OE(n),og(n)?(n.Ra.ha(e),ig(n)):n.Ra.set("Unknown")})}function L2(n,e,t){return B(this,null,function*(){if(n.Ra.set("Online"),e instanceof zl&&e.state===2&&e.cause)try{yield function(i,o){return B(this,null,function*(){let s=o.cause;for(let c of o.targetIds)i.Ia.has(c)&&(yield i.remoteSyncer.rejectListen(c,s),i.Ia.delete(c),i.Va.removeTarget(c))})}(n,e)}catch(r){W(Si,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Zl(n,r)}else if(e instanceof _o?n.Va.Ze(e):e instanceof $l?n.Va.st(e):n.Va.tt(e),!t.isEqual(ae.min()))try{let r=yield AE(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let c=o.Va.Tt(s);return c.targetChanges.forEach((l,d)=>{if(l.resumeToken.approximateByteSize()>0){let m=o.Ia.get(d);m&&o.Ia.set(d,m.withResumeToken(l.resumeToken,s))}}),c.targetMismatches.forEach((l,d)=>{let m=o.Ia.get(l);if(!m)return;o.Ia.set(l,m.withResumeToken(It.EMPTY_BYTE_STRING,m.snapshotVersion)),NE(o,l);let g=new ea(m.target,l,d,m.sequenceNumber);rg(o,g)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){W(Si,"Failed to raise snapshot:",r),yield Zl(n,r)}})}function Zl(n,e,t){return B(this,null,function*(){if(!Vo(e))throw e;n.Ea.add(1),yield aa(n),n.Ra.set("Offline"),t||(t=()=>AE(n.localStore)),n.asyncQueue.enqueueRetryable(()=>B(this,null,function*(){W(Si,"Retrying IndexedDB access"),yield t(),n.Ea.delete(1),yield gu(n)}))})}function RE(n,e){return e().catch(t=>Zl(n,t,e))}function yu(n){return B(this,null,function*(){let e=se(n),t=Ur(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:qm;for(;j2(e);)try{let i=yield P2(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,B2(e,i)}catch(i){yield Zl(e,i)}kE(e)&&FE(e)})}function j2(n){return Mi(n)&&n.Ta.length<10}function B2(n,e){n.Ta.push(e);let t=Ur(n);t.O_()&&t.X_&&t.ea(e.mutations)}function kE(n){return Mi(n)&&!Ur(n).x_()&&n.Ta.length>0}function FE(n){Ur(n).start()}function U2(n){return B(this,null,function*(){Ur(n).ra()})}function $2(n){return B(this,null,function*(){let e=Ur(n);for(let t of n.Ta)e.ea(t.mutations)})}function z2(n,e,t){return B(this,null,function*(){let r=n.Ta.shift(),i=Ap.from(r,e,t);yield RE(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield yu(n)})}function H2(n,e){return B(this,null,function*(){e&&Ur(n).X_&&(yield function(r,i){return B(this,null,function*(){if(function(s){return r2(s)&&s!==F.ABORTED}(i.code)){let o=r.Ta.shift();Ur(r).B_(),yield RE(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield yu(r)}})}(n,e)),kE(n)&&FE(n)})}function gC(n,e){return B(this,null,function*(){let t=se(n);t.asyncQueue.verifyOperationInProgress(),W(Si,"RemoteStore received new credentials");let r=Mi(t);t.Ea.add(3),yield aa(t),r&&t.Ra.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),yield gu(t)})}function q2(n,e){return B(this,null,function*(){let t=se(n);e?(t.Ea.delete(2),yield gu(t)):e||(t.Ea.add(2),yield aa(t),t.Ra.set("Unknown"))})}function Lo(n){return n.ma||(n.ma=function(t,r,i){let o=se(t);return o.sa(),new mm(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Xo:k2.bind(null,n),t_:F2.bind(null,n),r_:V2.bind(null,n),H_:L2.bind(null,n)}),n.da.push(e=>B(this,null,function*(){e?(n.ma.B_(),og(n)?ig(n):n.Ra.set("Unknown")):(yield n.ma.stop(),OE(n))}))),n.ma}function Ur(n){return n.fa||(n.fa=function(t,r,i){let o=se(t);return o.sa(),new gm(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:U2.bind(null,n),r_:H2.bind(null,n),ta:$2.bind(null,n),na:z2.bind(null,n)}),n.da.push(e=>B(this,null,function*(){e?(n.fa.B_(),yield yu(n)):(yield n.fa.stop(),n.Ta.length>0&&(W(Si,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}var wm=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,c=new n(e,t,s,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function sg(n,e){if(lr("AsyncQueue",`${e}: ${n}`),Vo(n))return new q(F.UNAVAILABLE,`${e}: ${n}`);throw n}var eu=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ee.comparator(t.key,r.key):(t,r)=>ee.comparator(t.key,r.key),this.keyedMap=$s(),this.sortedSet=new Qe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var tu=class{constructor(){this.ga=new Qe(ee.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ne(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},No=class n{constructor(e,t,r,i,o,s,c,l,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(c=>{s.push({type:0,doc:c})}),new n(e,t,eu.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Cm=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},Em=class{constructor(){this.queries=yC(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=se(t),o=i.queries;i.queries=yC(),o.forEach((s,c)=>{for(let l of c.Sa)l.onError(r)})})(this,new q(F.ABORTED,"Firestore shutting down"))}};function yC(){return new hr(n=>cE(n),fu)}function G2(n,e){return B(this,null,function*(){let t=se(n),r=3,i=e.query,o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new Cm,r=e.Da()?0:1);try{switch(r){case 0:o.wa=yield t.onListen(i,!0);break;case 1:o.wa=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let c=sg(s,`Initialization of query '${mo(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&ag(t)})}function W2(n,e){return B(this,null,function*(){let t=se(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function K2(n,e){let t=se(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let c of s.Sa)c.Fa(i)&&(r=!0);s.wa=i}}r&&ag(t)}function Q2(n,e,t){let r=se(n),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(t);r.queries.delete(e)}function ag(n){n.Ca.forEach(e=>{e.next()})}var Im,vC;(vC=Im||(Im={})).Ma="default",vC.Cache="cache";var Dm=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new No(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=No.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Im.Cache}};var nu=class{constructor(e){this.key=e}},ru=class{constructor(e){this.key=e}},xm=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ve(),this.mutatedKeys=ve(),this.eu=lE(e),this.tu=new eu(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new tu,i=t?t.tu:this.tu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,c=!1,l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((m,g)=>{let b=i.get(m),C=pu(this.query,g)?g:null,N=!!b&&this.mutatedKeys.has(b.key),R=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations),k=!1;b&&C?b.data.isEqual(C.data)?N!==R&&(r.track({type:3,doc:C}),k=!0):this.su(b,C)||(r.track({type:2,doc:C}),k=!0,(l&&this.eu(C,l)>0||d&&this.eu(C,d)<0)&&(c=!0)):!b&&C?(r.track({type:0,doc:C}),k=!0):b&&!C&&(r.track({type:1,doc:b}),k=!0,(l||d)&&(c=!0)),k&&(C?(s=s.add(C),o=R?o.add(m):o.delete(m)):(s=s.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let m=this.query.limitType==="F"?s.last():s.first();s=s.delete(m.key),o=o.delete(m.key),r.track({type:1,doc:m})}return{tu:s,iu:r,Cs:c,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((m,g)=>function(C,N){let R=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne(20277,{Rt:k})}};return R(C)-R(N)}(m.type,g.type)||this.eu(m.doc,g.doc)),this.ou(r),i=i??!1;let c=t&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,d=l!==this.Za;return this.Za=l,s.length!==0||d?{snapshot:new No(this.query,e.tu,o,s,e.mutatedKeys,l===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new tu,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=ve(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new ru(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new nu(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=ve();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return No.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},cg="SyncEngine",Sm=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Tm=class{constructor(e){this.key=e,this.hu=!1}},Mm=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new hr(c=>cE(c),fu),this.Iu=new Map,this.Eu=new Set,this.du=new Qe(ee.comparator),this.Au=new Map,this.Ru=new na,this.Vu={},this.mu=new Map,this.fu=ta.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};function Y2(n,e,t=!0){return B(this,null,function*(){let r=$E(n),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=yield VE(r,e,t,!0),i})}function J2(n,e){return B(this,null,function*(){let t=$E(n);yield VE(t,e,!0,!1)})}function VE(n,e,t,r){return B(this,null,function*(){let i=yield N2(n.localStore,kn(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),c;return r&&(c=yield X2(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&PE(n.remoteStore,i),c})}function X2(n,e,t,r,i){return B(this,null,function*(){n.pu=(g,b,C)=>function(R,k,H,re){return B(this,null,function*(){let Q=k.view.ru(H);Q.Cs&&(Q=yield fC(R.localStore,k.query,!1).then(({documents:x})=>k.view.ru(x,Q)));let Ce=re&&re.targetChanges.get(k.targetId),ke=re&&re.targetMismatches.get(k.targetId)!=null,Ie=k.view.applyChanges(Q,R.isPrimaryClient,Ce,ke);return bC(R,k.targetId,Ie.au),Ie.snapshot})}(n,g,b,C);let o=yield fC(n.localStore,e,!0),s=new xm(e,o.Qs),c=s.ru(o.documents),l=Zs.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=s.applyChanges(c,n.isPrimaryClient,l);bC(n,t,d.au);let m=new Sm(e,t,s);return n.Tu.set(e,m),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),d.snapshot})}function Z2(n,e,t){return B(this,null,function*(){let r=se(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!fu(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield cm(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&ng(r.remoteStore,i.targetId),Am(r,i.targetId)}).catch(Fo))):(Am(r,i.targetId),yield cm(r.localStore,i.targetId,!0))})}function ek(n,e){return B(this,null,function*(){let t=se(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ng(t.remoteStore,r.targetId))})}function tk(n,e,t){return B(this,null,function*(){let r=ck(n);try{let i=yield function(s,c){let l=se(s),d=rt.now(),m=c.reduce((C,N)=>C.add(N.key),ve()),g,b;return l.persistence.runTransaction("Locally write mutations","readwrite",C=>{let N=fr(),R=ve();return l.Ns.getEntries(C,m).next(k=>{N=k,N.forEach((H,re)=>{re.isValidDocument()||(R=R.add(H))})}).next(()=>l.localDocuments.getOverlayedDocuments(C,N)).next(k=>{g=k;let H=[];for(let re of c){let Q=n2(re,g.get(re.key).overlayedDocument);Q!=null&&H.push(new pr(re.key,Q,tE(Q.value.mapValue),_i.exists(!0)))}return l.mutationQueue.addMutationBatch(C,d,H,c)}).next(k=>{b=k;let H=k.applyToLocalDocumentSet(g,R);return l.documentOverlayCache.saveOverlays(C,k.batchId,H)})}).then(()=>({batchId:b.batchId,changes:dE(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,c,l){let d=s.Vu[s.currentUser.toKey()];d||(d=new Qe(ye)),d=d.insert(c,l),s.Vu[s.currentUser.toKey()]=d}(r,i.batchId,t),yield ca(r,i.changes),yield yu(r.remoteStore)}catch(i){let o=sg(i,"Failed to persist write");t.reject(o)}})}function LE(n,e){return B(this,null,function*(){let t=se(n);try{let r=yield M2(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Au.get(o);s&&(Ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?Ae(s.hu,14607):i.removedDocuments.size>0&&(Ae(s.hu,42227),s.hu=!1))}),yield ca(t,r,e)}catch(r){yield Fo(r)}})}function _C(n,e,t){let r=se(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((o,s)=>{let c=s.view.va(e);c.snapshot&&i.push(c.snapshot)}),function(s,c){let l=se(s);l.onlineState=c;let d=!1;l.queries.forEach((m,g)=>{for(let b of g.Sa)b.va(c)&&(d=!0)}),d&&ag(l)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function nk(n,e,t){return B(this,null,function*(){let r=se(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new Qe(ee.comparator);s=s.insert(o,gn.newNoDocument(o,ae.min()));let c=ve().add(o),l=new Ul(ae.min(),new Map,new Qe(ye),s,c);yield LE(r,l),r.du=r.du.remove(o),r.Au.delete(e),lg(r)}else yield cm(r.localStore,e,!1).then(()=>Am(r,e,t)).catch(Fo)})}function rk(n,e){return B(this,null,function*(){let t=se(n),r=e.batch.batchId;try{let i=yield T2(t.localStore,e);BE(t,r,null),jE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ca(t,i)}catch(i){yield Fo(i)}})}function ik(n,e,t){return B(this,null,function*(){let r=se(n);try{let i=yield function(s,c){let l=se(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let m;return l.mutationQueue.lookupMutationBatch(d,c).next(g=>(Ae(g!==null,37113),m=g.keys(),l.mutationQueue.removeMutationBatch(d,g))).next(()=>l.mutationQueue.performConsistencyCheck(d)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(d,m,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m)).next(()=>l.localDocuments.getDocuments(d,m))})}(r.localStore,e);BE(r,e,t),jE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ca(r,i)}catch(i){yield Fo(i)}})}function jE(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function BE(n,e,t){let r=se(n),i=r.Vu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Am(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||UE(n,r)})}function UE(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(ng(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),lg(n))}function bC(n,e,t){for(let r of t)r instanceof nu?(n.Ru.addReference(r.key,e),ok(n,r)):r instanceof ru?(W(cg,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||UE(n,r.key)):ne(19791,{wu:r})}function ok(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(W(cg,"New document in limbo: "+t),n.Eu.add(r),lg(n))}function lg(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new ee(qe.fromString(e)),r=n.fu.next();n.Au.set(r,new Tm(t)),n.du=n.du.insert(t,r),PE(n.remoteStore,new ea(kn(Xm(t.path)),r,"TargetPurposeLimboResolution",Hm.ce))}}function ca(n,e,t){return B(this,null,function*(){let r=se(n),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((c,l)=>{s.push(r.pu(l,e,t).then(d=>{if((d||t)&&r.isPrimaryClient){let m=d?!d.fromCache:t?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,m?"current":"not-current")}if(d){i.push(d);let m=im.As(l.targetId,d);o.push(m)}}))}),yield Promise.all(s),r.Pu.H_(i),yield function(l,d){return B(this,null,function*(){let m=se(l);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>j.forEach(d,b=>j.forEach(b.Es,C=>m.persistence.referenceDelegate.addReference(g,b.targetId,C)).next(()=>j.forEach(b.ds,C=>m.persistence.referenceDelegate.removeReference(g,b.targetId,C)))))}catch(g){if(!Vo(g))throw g;W(tg,"Failed to update sequence numbers: "+g)}for(let g of d){let b=g.targetId;if(!g.fromCache){let C=m.Ms.get(b),N=C.snapshotVersion,R=C.withLastLimboFreeSnapshotVersion(N);m.Ms=m.Ms.insert(b,R)}}})}(r.localStore,o))})}function sk(n,e){return B(this,null,function*(){let t=se(n);if(!t.currentUser.isEqual(e)){W(cg,"User change. New user:",e.toKey());let r=yield ME(t.localStore,e);t.currentUser=e,function(o,s){o.mu.forEach(c=>{c.forEach(l=>{l.reject(new q(F.CANCELLED,s))})}),o.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ca(t,r.Ls)}})}function ak(n,e){let t=se(n),r=t.Au.get(e);if(r&&r.hu)return ve().add(r.key);{let i=ve(),o=t.Iu.get(e);if(!o)return i;for(let s of o){let c=t.Tu.get(s);i=i.unionWith(c.view.nu)}return i}}function $E(n){let e=se(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=LE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ak.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nk.bind(null,e),e.Pu.H_=K2.bind(null,e.eventManager),e.Pu.yu=Q2.bind(null,e.eventManager),e}function ck(n){let e=se(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ik.bind(null,e),e}var zE=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return B(this,null,function*(){this.serializer=mu(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)})}Fu(t,r){return null}Mu(t,r){return null}vu(t){return S2(this.persistence,new sm,t.initialUser,this.serializer)}Cu(t){return new Wl(rm.mi,this.serializer)}Du(t){return new lm}terminate(){return B(this,null,function*(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),Pm=class extends zE{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ae(this.persistence.referenceDelegate instanceof Kl,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Hp(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new Wl(r=>Kl.mi(r,t),this.serializer)}};var lk=(()=>{class n{initialize(t,r){return B(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>_C(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=sk.bind(null,this.syncEngine),yield q2(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Em}()}createDatastore(t){let r=mu(t.databaseInfo.databaseId),i=function(s){return new pm(s)}(t.databaseInfo);return function(s,c,l,d){return new vm(s,c,l,d)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,c,l){return new bm(i,o,s,c,l)}(this.localStore,this.datastore,t.asyncQueue,r=>_C(this.syncEngine,r,0),function(){return Yl.v()?new Yl:new um}())}createSyncEngine(t,r){return function(o,s,c,l,d,m,g){let b=new Mm(o,s,c,l,d,m);return g&&(b.gu=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return B(this,null,function*(){yield function(r){return B(this,null,function*(){let i=se(r);W(Si,"RemoteStore shutting down."),i.Ea.add(5),yield aa(i),i.Aa.shutdown(),i.Ra.set("Unknown")})}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()})}}return n.provider={build:()=>new n},n})();var Nm=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):lr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var $r="FirestoreClient",Om=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=pt.UNAUTHENTICATED,this.clientId=Ks.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>B(this,null,function*(){W($r,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(W($r,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>B(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=sg(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function rp(n,e){return B(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),W($r,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>B(this,null,function*(){r.isEqual(i)||(yield ME(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function wC(n,e){return B(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield uk(n);W($r,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>gC(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>gC(e.remoteStore,i)),n._onlineComponents=e})}function uk(n){return B(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){W($r,"Using user provided OfflineComponentProvider");try{yield rp(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Co("Error using user provided cache. Falling back to memory cache: "+t),yield rp(n,new zE)}}else W($r,"Using default OfflineComponentProvider"),yield rp(n,new Pm(void 0));return n._offlineComponents})}function HE(n){return B(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(W($r,"Using user provided OnlineComponentProvider"),yield wC(n,n._uninitializedComponentsProvider._online)):(W($r,"Using default OnlineComponentProvider"),yield wC(n,new lk))),n._onlineComponents})}function dk(n){return HE(n).then(e=>e.syncEngine)}function CC(n){return B(this,null,function*(){let e=yield HE(n),t=e.eventManager;return t.onListen=Y2.bind(null,e.syncEngine),t.onUnlisten=Z2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=J2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=ek.bind(null,e.syncEngine),t})}function qE(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var EC=new Map;var GE="firestore.googleapis.com",IC=!0,iu=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new q(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=GE,this.ssl=IC}else this.host=e.host,this.ssl=e.ssl??IC;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=TE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<I2)throw new q(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_R("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qE(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Oo=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new iu({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new iu(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ip;switch(r.type){case"firstParty":return new cp(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return B(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=EC.get(t);r&&(W("ComponentProvider","Removing Datastore"),EC.delete(t),r.terminate())}(this),Promise.resolve()}};function hk(n,e,t,r={}){n=zs(n,Oo);let i=_l(e),o=n._getSettings(),s=le(Y({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;i&&(hw(`https://${c}`),pw("Firestore",!0)),o.host!==GE&&o.host!==c&&Co("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=le(Y({},o),{host:c,ssl:i,emulatorOptions:r});if(!uo(l,s)&&(n._setSettings(l),r.mockUserToken)){let d,m;if(typeof r.mockUserToken=="string")d=r.mockUserToken,m=pt.MOCK_USER;else{d=fw(r.mockUserToken,n._app?.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new q(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new pt(g)}n._authCredentials=new op(new Pl(d,m))}}var zr=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Et=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(sa(t,n._jsonSchema))return new n(e,r||null,new ee(qe.fromString(t.referencePath)))}};Et._jsonSchemaVersion="firestore/documentReference/1.0",Et._jsonSchema={type:nt("string",Et._jsonSchemaVersion),referencePath:nt("string")};var kr=class n extends zr{constructor(e,t,r){super(e,t,Xm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Et(this.firestore,null,new ee(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function vu(n,e,...t){if(n=Nr(n),PC("collection","path",e),n instanceof Oo){let r=qe.fromString(e,...t);return $w(r),new kr(n,null,r)}{if(!(n instanceof Et||n instanceof kr))throw new q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(qe.fromString(e,...t));return $w(r),new kr(n.firestore,null,r)}}function fk(n,e,...t){if(n=Nr(n),arguments.length===1&&(e=Ks.newId()),PC("doc","path",e),n instanceof Oo){let r=qe.fromString(e,...t);return Uw(r),new Et(n,null,new ee(r))}{if(!(n instanceof Et||n instanceof kr))throw new q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(qe.fromString(e,...t));return Uw(r),new Et(n.firestore,n instanceof kr?n.converter:null,new ee(r))}}var DC="AsyncQueue",ou=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Jl(this,"async_queue_retry"),this._c=()=>{let r=np();r&&W(DC,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=np();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=np();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new cr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}lc(){return B(this,null,function*(){if(this.Xu.length!==0){try{yield this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Vo(e))throw e;W(DC,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}})}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,lr("INTERNAL UNHANDLED ERROR: ",xC(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=wm.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&ne(47125,{Pc:xC(this.nc)})}verifyOperationInProgress(){}Tc(){return B(this,null,function*(){let e;do e=this.ac,yield e;while(e!==this.ac)})}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function xC(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function SC(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Ro=class extends Oo{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new ou,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return B(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new ou(e),this._firestoreClient=void 0,yield e}})}};function WE(n,e){let t=typeof n=="object"?n:Ow(),r=typeof n=="string"?n:e||Fl,i=Aw(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=dw("firestore");o&&hk(i,...o)}return i}function KE(n){if(n._terminated)throw new q(F.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||pk(n),n._firestoreClient}function pk(n){let e=n._freezeSettings(),t=function(i,o,s,c){return new fp(i,o,s,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,qE(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Om(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}}(n._componentsProvider))}var Fr=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(It.fromBase64String(e))}catch(t){throw new q(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(It.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(sa(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Fr._jsonSchemaVersion="firestore/bytes/1.0",Fr._jsonSchema={type:nt("string",Fr._jsonSchemaVersion),bytes:nt("string")};var ra=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new q(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var su=class{constructor(e){this._methodName=e}};var Vr=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new q(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new q(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ye(this._lat,e._lat)||ye(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(sa(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Vr._jsonSchemaVersion="firestore/geoPoint/1.0",Vr._jsonSchema={type:nt("string",Vr._jsonSchemaVersion),latitude:nt("number"),longitude:nt("number")};var Lr=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(sa(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new q(F.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Lr._jsonSchemaVersion="firestore/vectorValue/1.0",Lr._jsonSchema={type:nt("string",Lr._jsonSchemaVersion),vectorValues:nt("object")};var mk=/^__.*__$/,Rm=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new pr(e,this.data,this.fieldMask,t,this.fieldTransforms):new xi(e,this.data,t,this.fieldTransforms)}};function QE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne(40011,{Ac:n})}}var km=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new n(Y(Y({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return au(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(QE(this.Ac)&&mk.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},Fm=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||mu(e)}Cc(e,t,r,i=!1){return new km({Ac:e,methodName:t,Dc:r,path:qt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function YE(n){let e=n._freezeSettings(),t=mu(n._databaseId);return new Fm(n._databaseId,!!e.ignoreUndefinedProperties,t)}function gk(n,e,t,r,i,o={}){let s=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);ZE("Data must be an object, but it was:",s,r);let c=JE(r,s),l,d;if(o.merge)l=new On(s.fieldMask),d=s.fieldTransforms;else if(o.mergeFields){let m=[];for(let g of o.mergeFields){let b=vk(e,g,t);if(!s.contains(b))throw new q(F.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);bk(m,b)||m.push(b)}l=new On(m),d=s.fieldTransforms.filter(g=>l.covers(g.field))}else l=null,d=s.fieldTransforms;return new Rm(new mn(c),l,d)}function yk(n,e,t,r=!1){return ug(t,n.Cc(r?4:3,e))}function ug(n,e){if(XE(n=Nr(n)))return ZE("Unsupported field value:",e,n),JE(n,e);if(n instanceof su)return function(r,i){if(!QE(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let c of r){let l=ug(c,i.wc(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Nr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return JR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=rt.fromDate(r);return{timestampValue:ql(i.serializer,o)}}if(r instanceof rt){let o=new rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ql(i.serializer,o)}}if(r instanceof Vr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Fr)return{bytesValue:wE(i.serializer,r._byteString)};if(r instanceof Et){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:eg(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Lr)return function(s,c){return{mapValue:{fields:{[Wm]:{stringValue:Km},[Io]:{arrayValue:{values:s.toArray().map(d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return Zm(c.serializer,d)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${uu(r)}`)}(n,e)}function JE(n,e){let t={};return WC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ti(n,(r,i)=>{let o=ug(i,e.mc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function XE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof rt||n instanceof Vr||n instanceof Fr||n instanceof Et||n instanceof su||n instanceof Lr)}function ZE(n,e,t){if(!XE(t)||!NC(t)){let r=uu(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function vk(n,e,t){if((e=Nr(e))instanceof ra)return e._internalPath;if(typeof e=="string")return eI(n,e);throw au("Field path arguments must be of type string or ",n,!1,void 0,t)}var _k=new RegExp("[~\\*/\\[\\]]");function eI(n,e,t){if(e.search(_k)>=0)throw au(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ra(...e.split("."))._internalPath}catch{throw au(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function au(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new q(F.INVALID_ARGUMENT,c+n+l)}function bk(n,e){return n.some(t=>t.isEqual(e))}var cu=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Vm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(dg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Vm=class extends cu{data(){return super.data()}};function dg(n,e){return typeof e=="string"?eI(n,e):e instanceof ra?e._internalPath:e._delegate._internalPath}function wk(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new q(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ia=class{},oa=class extends ia{};function tI(n,e,...t){let r=[];e instanceof ia&&r.push(e),r=r.concat(t),function(o){let s=o.filter(l=>l instanceof jm).length,c=o.filter(l=>l instanceof Lm).length;if(s>1||s>0&&c>0)throw new q(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Lm=class n extends oa{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return iI(e._query,t),new zr(e.firestore,e.converter,xp(e._query,t))}_parse(e){let t=YE(e.firestore);return function(o,s,c,l,d,m,g){let b;if(d.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new q(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){MC(g,m);let N=[];for(let R of g)N.push(TC(l,o,R));b={arrayValue:{values:N}}}else b=TC(l,o,g)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||MC(g,m),b=yk(c,s,g,m==="in"||m==="not-in");return tt.create(d,m,b)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};var jm=class n extends ia{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:yn.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,c=o.getFlattenedFilters();for(let l of c)iI(s,l),s=xp(s,l)}(e._query,t),new zr(e.firestore,e.converter,xp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Bm=class n extends oa{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new q(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new q(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ei(o,s)}(e._query,this._field,this._direction);return new zr(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Br(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function nI(n,e="asc"){let t=e,r=dg("orderBy",n);return Bm._create(r,t)}var Um=class n extends oa{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new zr(e.firestore,e.converter,jl(e._query,this._limit,this._limitType))}};function rI(n){return bR("limit",n),Um._create("limit",n,"F")}function TC(n,e,t){if(typeof(t=Nr(t))=="string"){if(t==="")throw new q(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!aE(e)&&t.indexOf("/")!==-1)throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(qe.fromString(t));if(!ee.isDocumentKey(r))throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Qw(n,new ee(r))}if(t instanceof Et)return Qw(n,t._key);throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${uu(t)}.`)}function MC(n,e){if(!Array.isArray(n)||n.length===0)throw new q(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function iI(n,e){let t=function(i,o){for(let s of i)for(let c of s.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new q(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var $m=class{convertValue(e,t="none"){switch(jr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return He(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(dr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ne(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Ti(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){let t=e.fields?.[Io].arrayValue?.values?.map(r=>He(r.doubleValue));return new Lr(t)}convertGeoPoint(e){return new Vr(He(e.latitude),He(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=hu(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Js(e));default:return null}}convertTimestamp(e){let t=ur(e);return new rt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=qe.fromString(e);Ae(SE(r),9688,{name:e});let i=new Vl(r.get(1),r.get(3)),o=new ee(r.popFirst(5));return i.isEqual(t)||lr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Ck(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var vi=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},bi=class n extends cu{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new bo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(dg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new q(F.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};bi._jsonSchemaVersion="firestore/documentSnapshot/1.0",bi._jsonSchema={type:nt("string",bi._jsonSchemaVersion),bundleSource:nt("string","DocumentSnapshot"),bundleName:nt("string"),bundle:nt("string")};var bo=class extends bi{data(e={}){return super.data(e)}},wo=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new vi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new bo(this._firestore,this._userDataWriter,r.key,r,new vi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new q(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>{let l=new bo(i._firestore,i._userDataWriter,c.doc.key,c.doc,new vi(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let l=new bo(i._firestore,i._userDataWriter,c.doc.key,c.doc,new vi(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,m=-1;return c.type!==0&&(d=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),m=s.indexOf(c.doc.key)),{type:Ek(c.type),doc:l,oldIndex:d,newIndex:m}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new q(F.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ks.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function Ek(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne(61501,{type:n})}}wo._jsonSchemaVersion="firestore/querySnapshot/1.0",wo._jsonSchema={type:nt("string",wo._jsonSchemaVersion),bundleSource:nt("string","QuerySnapshot"),bundleName:nt("string"),bundle:nt("string")};var lu=class extends $m{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Et(this.firestore,null,t)}};function hg(n,e){let t=zs(n.firestore,Ro),r=fk(n),i=Ck(n.converter,e);return Ik(t,[gk(YE(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,_i.exists(!1))]).then(()=>r)}function oI(n,...e){n=Nr(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||SC(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(SC(e[r])){let l=e[r];e[r]=l.next?.bind(l),e[r+1]=l.error?.bind(l),e[r+2]=l.complete?.bind(l)}let o,s,c;if(n instanceof Et)s=zs(n.firestore,Ro),c=Xm(n._key.path),o={next:l=>{e[r]&&e[r](Dk(s,n,l))},error:e[r+1],complete:e[r+2]};else{let l=zs(n,zr);s=zs(l.firestore,Ro),c=l._query;let d=new lu(s);o={next:m=>{e[r]&&e[r](new wo(s,d,l,m))},error:e[r+1],complete:e[r+2]},wk(n._query)}return function(d,m,g,b){let C=new Nm(b),N=new Dm(m,C,g);return d.asyncQueue.enqueueAndForget(()=>B(this,null,function*(){return G2(yield CC(d),N)})),()=>{C.Nu(),d.asyncQueue.enqueueAndForget(()=>B(this,null,function*(){return W2(yield CC(d),N)}))}}(KE(s),c,i,o)}function Ik(n,e){return function(r,i){let o=new cr;return r.asyncQueue.enqueueAndForget(()=>B(this,null,function*(){return tk(yield dk(r),i,o)})),o.promise}(KE(n),e)}function Dk(n,e,t){let r=t.docs.get(e._key),i=new lu(n);return new bi(n,i,e._key,r,new vi(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){ko=i})(Nw),js(new ir("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),c=new Ro(new sp(r.getProvider("auth-internal")),new lp(s,r.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new q(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vl(d.options.projectId,m)}(s,i),s);return o=Y({useFetchStreams:t},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Rr(Lw,jw,e),Rr(Lw,jw,"esm2020")})();var _u=(()=>{class n{constructor(){this.app=Gf(Pn.firebaseConfig),this.db=WE(this.app),this.messagesSubject=new ct([]),this.messages$=this.messagesSubject.asObservable(),this.logoutSubject=new ct(void 0),this.logout$=this.logoutSubject.asObservable(),this.listenForMessages()}listenForMessages(){let t=vu(this.db,"messages"),r=tI(t,nI("timestamp","asc"),rI(100));oI(r,i=>{let o=i.docs.map(s=>{let c=s.data();return{id:s.id,text:c.text,senderName:c.senderName,timestamp:c.timestamp.toDate(),userId:c.userId,conversationId:c.conversationId,audioBase64:c.audioBase64}});this.messagesSubject.next(o)},i=>{console.error("Error listening to messages:",i)})}sendMessage(t,r,i){return B(this,null,function*(){let o=vu(this.db,"messages");yield hg(o,{text:t,senderName:r,conversationId:i,timestamp:new Date})})}sendAudioMessage(t,r,i){return B(this,null,function*(){let o=vu(this.db,"messages");yield hg(o,{text:"\u{1F3A4} Voice Message",senderName:r,audioBase64:t,conversationId:i,timestamp:new Date})})}getMessages(){return this.messages$}triggerLogout(){this.logoutSubject.next()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var xk=["messagesContainer"];function Sk(n,e){if(n&1){let t=fe();p(0,"div",4)(1,"div",5)(2,"h2"),y(3,"\u{1F4CB} Customer Information"),f(),p(4,"p",6),y(5,"Please provide your information to use the chat"),f(),p(6,"form",7),U("ngSubmit",function(){V(t);let i=O();return L(i.registerCustomer())}),p(7,"div",8)(8,"label",9),y(9,"Full Name *"),f(),p(10,"input",10),Z("ngModelChange",function(i){V(t);let o=O();return te(o.customerInfo.name,i)||(o.customerInfo.name=i),L(i)}),f()(),p(11,"div",8)(12,"label",11),y(13,"Phone Number *"),f(),p(14,"input",12),Z("ngModelChange",function(i){V(t);let o=O();return te(o.customerInfo.phoneNumber,i)||(o.customerInfo.phoneNumber=i),L(i)}),f()(),p(15,"div",8)(16,"label",13),y(17,"Delivery Address *"),f(),p(18,"textarea",14),Z("ngModelChange",function(i){V(t);let o=O();return te(o.customerInfo.address,i)||(o.customerInfo.address=i),L(i)}),f()(),p(19,"button",15),y(20," Start Chat "),f()()()()}if(n&2){let t=O();_(10),X("ngModel",t.customerInfo.name),_(4),X("ngModel",t.customerInfo.phoneNumber),_(4),X("ngModel",t.customerInfo.address)}}function Tk(n,e){if(n&1){let t=fe();p(0,"div",36),U("click",function(){let i=V(t).$implicit,o=O(3);return L(o.selectConversation(i))}),p(1,"span",37),y(2),f(),p(3,"span",38),y(4,"Click to view chat"),f()()}if(n&2){let t=e.$implicit,r=O(3);De("active",r.currentConversationId===t),_(2),G(t)}}function Mk(n,e){n&1&&(p(0,"div",39),y(1," No conversations yet. "),f())}function Ak(n,e){if(n&1&&(p(0,"div",32)(1,"div",33),y(2," Conversations "),f(),p(3,"div",34),z(4,Tk,5,3,"div",35)(5,Mk,2,0,"div",26),f()()),n&2){let t=O(2);_(4),P("ngForOf",t.conversations),_(),P("ngIf",t.conversations.length===0)}}function Pk(n,e){if(n&1){let t=fe();p(0,"button",40),U("click",function(){V(t);let i=O(2);return L(i.logout())}),y(1," \u{1F6AA} "),f()}}function Nk(n,e){if(n&1&&(p(0,"div",39),y(1),f()),n&2){let t=O(2);_(),J(" ",t.isAppUser&&!t.currentConversationId?"Select a conversation to start chatting.":"No messages yet. Start the conversation!"," ")}}function Ok(n,e){if(n&1&&(p(0,"div",47),y(1),f()),n&2){let t=O().$implicit;_(),G(t.text)}}function Rk(n,e){if(n&1&&(p(0,"div",48),Pe(1,"audio",49),f()),n&2){let t=O().$implicit;_(),P("src",t.audioBase64,fi)}}function kk(n,e){if(n&1&&(p(0,"div",41)(1,"div",42)(2,"span",43),y(3),f(),p(4,"span",44),y(5),f()(),z(6,Ok,2,1,"div",45)(7,Rk,2,1,"div",46),f()),n&2){let t=e.$implicit,r=O(2);De("my-message",r.isMyMessage(t))("other-message",!r.isMyMessage(t)),_(3),G(t.senderName),_(2),G(r.formatTime(t.timestamp)),_(),P("ngIf",t.text),_(),P("ngIf",t.audioBase64)}}function Fk(n,e){if(n&1){let t=fe();p(0,"div",16),z(1,Ak,6,2,"div",17),p(2,"div",18)(3,"div",19)(4,"div",20)(5,"h2"),y(6),f(),p(7,"div",21)(8,"span",22),y(9),f(),p(10,"button",23),U("click",function(){V(t);let i=O();return L(i.changeInfo())}),y(11," \u270F\uFE0F "),f(),z(12,Pk,2,0,"button",24),f()()(),p(13,"div",25,0),z(15,Nk,2,1,"div",26)(16,kk,8,8,"div",27),f(),p(17,"div",28)(18,"input",29),Z("ngModelChange",function(i){V(t);let o=O();return te(o.newMessage,i)||(o.newMessage=i),L(i)}),U("keyup.enter",function(){V(t);let i=O();return L(i.sendMessage())}),f(),p(19,"button",30),U("click",function(){V(t);let i=O();return L(i.sendMessage())}),y(20," Send "),f(),p(21,"button",31),U("mousedown",function(i){V(t);let o=O();return L(o.startRecording(i))})("mouseup",function(i){V(t);let o=O();return L(o.stopRecording(i))})("mouseleave",function(i){V(t);let o=O();return L(o.stopRecording(i))})("touchstart",function(i){V(t);let o=O();return L(o.startRecording(i))})("touchend",function(i){V(t);let o=O();return L(o.stopRecording(i))}),y(22),f()()()()}if(n&2){let t=O();_(),P("ngIf",t.isAppUser),_(5),J("\u{1F4AC} ",t.isAppUser&&t.currentConversationId?"Chat with "+t.currentConversationId:"Customer Support Chat",""),_(3),G(t.senderName),_(3),P("ngIf",!t.isAppUser),_(3),P("ngIf",t.messages.length===0),_(),P("ngForOf",t.messages),_(2),X("ngModel",t.newMessage),P("disabled",t.isAppUser&&!t.currentConversationId),_(),P("disabled",!t.newMessage.trim()||t.isAppUser&&!t.currentConversationId),_(2),De("recording",t.isRecording),P("disabled",t.isAppUser&&!t.currentConversationId),_(),J(" ",t.isRecording?"\u{1F534}":"\u{1F399}\uFE0F"," ")}}var aI=(()=>{class n{constructor(t,r,i){this.chatService=t,this.customerService=r,this.userService=i,this.messages=[],this.newMessage="",this.senderName="",this.shouldScroll=!1,this.isRegistered=!1,this.customerInfo={name:"",phoneNumber:"",address:""},this.allCustomers=[],this.errorMessage="",this.isAppUser=!1,this.currentConversationId="",this.conversations=[],this.allMessagesCached=[],this.isRecording=!1,this.mediaRecorder=null,this.audioChunks=[]}ngOnInit(){this.customerSubscription=this.customerService.getCustomers().subscribe({next:t=>{this.allCustomers=t,this.checkLoginAndStatus()},error:t=>{console.error("Failed to load customers",t),this.checkLoginAndStatus()}}),this.logoutSubscription=this.chatService.logout$.subscribe(()=>{this.performForceLogout()})}performForceLogout(){localStorage.removeItem("chatCustomerInfo"),localStorage.removeItem("chatUserName"),this.isRegistered=!1,this.isAppUser=!1,this.senderName="",this.conversations=[],this.currentConversationId="",this.customerInfo={name:"",phoneNumber:"",address:""},this.messages=[]}checkLoginAndStatus(){let t=localStorage.getItem("jjm_logged_in")==="true",r=localStorage.getItem("jjm_username"),i=localStorage.getItem("jjm_user_id");if(t){if(this.isAppUser=!0,this.isRegistered=!0,this.errorMessage="",this.senderName=r||"User",i){let s=this.userService.getUserById(i);s?(this.senderName=s.fullName||s.username,this.loadMessages()):this.userService.users$.pipe(Vi(1)).subscribe(c=>{let l=c.find(d=>d.id===i);l&&(this.senderName=l.fullName||l.username),this.loadMessages()})}else this.loadMessages();return}let o=localStorage.getItem("chatCustomerInfo");if(o){let s=JSON.parse(o);this.allCustomers.find(l=>l.name.toLowerCase()===s.name.toLowerCase())?(this.customerInfo=s,this.senderName=this.customerInfo.name,this.isRegistered=!0,this.loadMessages()):(localStorage.removeItem("chatCustomerInfo"),localStorage.removeItem("chatUserName"),this.isRegistered=!1)}}ngAfterViewChecked(){this.shouldScroll&&(this.scrollToBottom(),this.shouldScroll=!1)}ngOnDestroy(){this.customerSubscription&&this.customerSubscription.unsubscribe(),this.logoutSubscription&&this.logoutSubscription.unsubscribe()}registerCustomer(){if(this.errorMessage="",!this.customerInfo.name.trim()){alert("Please enter your name");return}if(!this.customerInfo.phoneNumber.trim()){alert("Please enter your phone number");return}if(!this.customerInfo.address.trim()){alert("Please enter your address");return}if(!/^[\d\s\-\+\(\)]+$/.test(this.customerInfo.phoneNumber)){alert("Please enter a valid phone number");return}if(this.allCustomers.length>0){if(!this.allCustomers.find(i=>i.name.toLowerCase()===this.customerInfo.name.trim().toLowerCase())){alert("Access Denied: You must be a registered customer to use the chat.");return}}else console.warn("Customer verification skipped: Customer list is empty or failed to load.");localStorage.setItem("chatCustomerInfo",JSON.stringify(this.customerInfo)),localStorage.setItem("chatUserName",this.customerInfo.name),this.senderName=this.customerInfo.name,this.isRegistered=!0,this.loadMessages()}loadMessages(){if(this.messagesSubscription){this.updateFilteredMessages(!1);return}this.messagesSubscription=this.chatService.getMessages().subscribe({next:t=>{if(this.allMessagesCached=t,this.isAppUser){let r=new Set;t.forEach(i=>{i.conversationId&&r.add(i.conversationId)}),this.conversations=Array.from(r)}this.updateFilteredMessages(!0)},error:t=>{console.error("Error loading messages:",t)}})}updateFilteredMessages(t){let r=this.isAppUser?this.currentConversationId:this.senderName,i=this.allMessagesCached.filter(l=>r?l.conversationId===r:!1),o=this.messages.length,s=i.length,c=o>0;if(this.messages=i,t&&c&&s>o){let l=i[s-1];this.isMyMessage(l)||this.playNotificationSound()}(!c||s>o)&&(this.shouldScroll=!0)}playNotificationSound(){try{let t=window.AudioContext||window.webkitAudioContext;if(!t)return;let r=new t,i=r.createOscillator(),o=r.createGain();i.connect(o),o.connect(r.destination),i.type="sine",i.frequency.setValueAtTime(523.25,r.currentTime),i.frequency.exponentialRampToValueAtTime(1046.5,r.currentTime+.1),o.gain.setValueAtTime(.1,r.currentTime),o.gain.exponentialRampToValueAtTime(.001,r.currentTime+.5),i.start(),i.stop(r.currentTime+.5)}catch(t){console.warn("Audio playback failed",t)}}sendMessage(){if(!this.newMessage.trim())return;let t=this.isAppUser?this.currentConversationId:this.senderName;if(this.isAppUser&&!t){alert("Please select a conversation first.");return}this.chatService.sendMessage(this.newMessage,this.senderName,t).then(()=>{this.newMessage="",this.shouldScroll=!0}).catch(r=>{console.error("Error sending message:",r),alert("Failed to send message. Please try again.")})}selectConversation(t){this.currentConversationId=t,this.updateFilteredMessages(!1)}scrollToBottom(){try{this.messagesContainer.nativeElement.scrollTop=this.messagesContainer.nativeElement.scrollHeight}catch(t){console.error("Scroll error:",t)}}formatTime(t){return new Date(t).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})}isMyMessage(t){return t.senderName===this.senderName}changeInfo(){alert("Do you want to update your customer information?"),this.isRegistered=!1}startRecording(t){t&&(t.preventDefault(),t.stopPropagation()),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!0}).then(r=>{this.mediaRecorder=new MediaRecorder(r),this.mediaRecorder.start(),this.isRecording=!0,this.audioChunks=[],this.mediaRecorder.addEventListener("dataavailable",i=>{i.data.size>0&&this.audioChunks.push(i.data)}),this.mediaRecorder.addEventListener("stop",()=>{let i=new Blob(this.audioChunks,{type:"audio/webm"}),o=new FileReader;o.readAsDataURL(i),o.onloadend=()=>{let s=o.result;s&&this.sendAudio(s)},r.getTracks().forEach(s=>s.stop())})}).catch(r=>{console.error("Error accessing microphone:",r),alert("Could not access microphone. Please allow permissions."),this.isRecording=!1}):alert("Audio recording is not supported in this browser.")}stopRecording(t){t&&(t.preventDefault(),t.stopPropagation()),this.mediaRecorder&&this.isRecording&&(this.mediaRecorder.stop(),this.isRecording=!1)}cancelRecording(){this.mediaRecorder&&this.isRecording&&this.stopRecording()}sendAudio(t){let r=this.isAppUser?this.currentConversationId:this.senderName;if(this.isAppUser&&!r){alert("Please select a conversation first.");return}this.chatService.sendAudioMessage(t,this.senderName,r).then(()=>{this.shouldScroll=!0}).catch(i=>{console.error("Error sending audio message:",i),alert("Failed to send audio message.")})}logout(){if(this.isAppUser){alert("You cannot logout of chat while logged into the application.");return}confirm("Are you sure you want to logout? Your information will be cleared.")&&(localStorage.removeItem("chatCustomerInfo"),localStorage.removeItem("chatUserName"),this.isRegistered=!1,this.customerInfo={name:"",phoneNumber:"",address:""},this.messages=[])}static{this.\u0275fac=function(r){return new(r||n)(K(_u),K(co),K(lo))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-chat"]],viewQuery:function(r,i){if(r&1&&k_(xk,5),r&2){let o;F_(o=V_())&&(i.messagesContainer=o.first)}},standalone:!0,features:[ze],decls:3,vars:2,consts:[["messagesContainer",""],[1,"chat-container"],["class","registration-container",4,"ngIf"],["class","chat-wrapper",4,"ngIf"],[1,"registration-container"],[1,"registration-card"],[1,"registration-subtitle"],[1,"registration-form",3,"ngSubmit"],[1,"form-group"],["for","customerName"],["type","text","id","customerName","name","customerName","placeholder","Enter your full name","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","phoneNumber"],["type","tel","id","phoneNumber","name","phoneNumber","placeholder","e.g., +1 234 567 8900","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","address"],["id","address","name","address","placeholder","Enter your complete delivery address","rows","3","required","",1,"form-textarea",3,"ngModelChange","ngModel"],["type","submit",1,"btn-register"],[1,"chat-wrapper"],["class","chat-sidebar",4,"ngIf"],[1,"chat-main-area"],[1,"chat-header"],[1,"header-content"],[1,"user-info"],[1,"user-name"],["title","Edit information",1,"btn-edit",3,"click"],["class","btn-logout","title","Logout",3,"click",4,"ngIf"],[1,"messages-container"],["class","no-messages",4,"ngIf"],["class","message",3,"my-message","other-message",4,"ngFor","ngForOf"],[1,"input-container"],["type","text","placeholder","Type a message...",1,"message-input",3,"ngModelChange","keyup.enter","ngModel","disabled"],[1,"btn-send",3,"click","disabled"],["title","Hold to talk",1,"btn-mic",3,"mousedown","mouseup","mouseleave","touchstart","touchend","disabled"],[1,"chat-sidebar"],[1,"sidebar-header"],[1,"conversation-list"],["class","conversation-item",3,"active","click",4,"ngFor","ngForOf"],[1,"conversation-item",3,"click"],[1,"conversation-name"],[1,"conversation-preview"],[1,"no-messages"],["title","Logout",1,"btn-logout",3,"click"],[1,"message"],[1,"message-header"],[1,"sender-name"],[1,"message-time"],["class","message-text",4,"ngIf"],["class","message-audio",4,"ngIf"],[1,"message-text"],[1,"message-audio"],["controls","",3,"src"]],template:function(r,i){r&1&&(p(0,"div",1),z(1,Sk,21,3,"div",2)(2,Fk,23,13,"div",3),f()),r&2&&(_(),P("ngIf",!i.isRegistered),_(),P("ngIf",i.isRegistered))},dependencies:[Ue,ut,Xe,ft,en,dt,ht,Zt,Ht,st,zt],styles:[".chat-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;background:var(--color-surface);overflow:hidden}.registration-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;padding:var(--space-lg);background:linear-gradient(135deg,#3b82f60d,#9333ea0d);overflow-y:auto;scroll-behavior:smooth}.registration-card[_ngcontent-%COMP%]{background:var(--color-surface);border-radius:var(--radius-lg);padding:var(--space-xl);max-width:500px;width:100%;box-shadow:0 10px 25px #0000001a;animation:_ngcontent-%COMP%_fadeInUp .5s ease-out}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.registration-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 var(--space-sm) 0;font-size:1.875rem;font-weight:700;text-align:center;background:linear-gradient(135deg,var(--color-primary),var(--color-accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.registration-subtitle[_ngcontent-%COMP%]{text-align:center;color:var(--color-text-muted);margin-bottom:var(--space-xl);font-size:.9375rem}.registration-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xs)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;font-size:.9375rem;color:var(--color-text)}.form-input[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{padding:.75rem 1rem;border:2px solid var(--color-border);border-radius:var(--radius-md);font-size:.9375rem;font-family:inherit;background:var(--color-bg);color:var(--color-text);transition:all .2s}.form-input[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f61a}.form-textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.btn-register[_ngcontent-%COMP%]{margin-top:var(--space-md);padding:.875rem 1.5rem;background:linear-gradient(135deg,var(--color-primary),var(--color-accent));color:#fff;border:none;border-radius:var(--radius-md);font-weight:600;font-size:1rem;cursor:pointer;transition:all .3s;box-shadow:0 4px 12px #3b82f64d}.btn-register[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 16px #3b82f666}.btn-register[_ngcontent-%COMP%]:active{transform:translateY(0)}.chat-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:100%}.chat-sidebar[_ngcontent-%COMP%]{width:280px;background:var(--color-surface);border-right:1px solid var(--color-border);display:flex;flex-direction:column}.chat-main-area[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;height:100%;position:relative}.sidebar-header[_ngcontent-%COMP%]{padding:var(--space-md);border-bottom:1px solid var(--color-border);font-weight:600;background:var(--color-bg)}.conversation-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.conversation-item[_ngcontent-%COMP%]{padding:var(--space-md);border-bottom:1px solid var(--color-border);cursor:pointer;transition:background .2s}.conversation-item[_ngcontent-%COMP%]:hover{background:var(--color-bg)}.conversation-item.active[_ngcontent-%COMP%]{background:#3b82f61a;border-left:3px solid var(--color-primary)}.conversation-name[_ngcontent-%COMP%]{font-weight:600;font-size:.9375rem;color:var(--color-text);display:block}.conversation-preview[_ngcontent-%COMP%]{font-size:.8125rem;color:var(--color-text-muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;margin-top:4px}.chat-header[_ngcontent-%COMP%]{padding:var(--space-lg);background:linear-gradient(135deg,var(--color-primary),var(--color-accent));color:#fff;border-bottom:2px solid var(--color-border);position:relative;z-index:10;flex-shrink:0}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:var(--space-md)}.chat-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:600}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);position:relative;z-index:20}.user-name[_ngcontent-%COMP%]{font-weight:500;padding:.5rem 1rem;background:#fff3;border-radius:20px;font-size:.9375rem}.btn-edit[_ngcontent-%COMP%], .btn-logout[_ngcontent-%COMP%]{background:#ffffff4d;border:2px solid rgba(255,255,255,.5);padding:.625rem;border-radius:50%;cursor:pointer;font-size:1.125rem;transition:all .2s;line-height:1;position:relative;z-index:30;pointer-events:auto;color:#fff;min-width:36px;min-height:36px;display:flex;align-items:center;justify-content:center}.btn-edit[_ngcontent-%COMP%]:hover, .btn-logout[_ngcontent-%COMP%]:hover{background:#ffffff80;transform:scale(1.15);border-color:#fff}.messages-container[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:var(--space-lg);background:var(--color-bg);display:flex;flex-direction:column;gap:var(--space-md)}.no-messages[_ngcontent-%COMP%]{text-align:center;color:var(--color-text-muted);padding:var(--space-xl);font-style:italic}.message[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-width:70%;animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.my-message[_ngcontent-%COMP%]{align-self:flex-end}.other-message[_ngcontent-%COMP%]{align-self:flex-start}.message-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;gap:var(--space-sm)}.sender-name[_ngcontent-%COMP%]{font-weight:600;font-size:.875rem;color:var(--color-text-muted)}.my-message[_ngcontent-%COMP%]   .sender-name[_ngcontent-%COMP%]{color:var(--color-primary)}.message-time[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted)}.message-text[_ngcontent-%COMP%]{padding:.75rem 1rem;border-radius:12px;word-wrap:break-word;line-height:1.5}.my-message[_ngcontent-%COMP%]   .message-text[_ngcontent-%COMP%]{background:var(--color-primary);color:#fff;border-bottom-right-radius:4px}.other-message[_ngcontent-%COMP%]   .message-text[_ngcontent-%COMP%]{background:var(--color-surface);color:var(--color-text);border:1px solid var(--color-border);border-bottom-left-radius:4px}.input-container[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm);padding:var(--space-lg);background:var(--color-surface);border-top:1px solid var(--color-border)}.message-input[_ngcontent-%COMP%]{flex:1;padding:.75rem 1rem;border:1px solid var(--color-border);border-radius:24px;font-size:.9375rem;background:var(--color-bg);color:var(--color-text);transition:all .2s}.message-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f61a}.btn-send[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:var(--color-primary);color:#fff;border:none;border-radius:24px;font-weight:600;cursor:pointer;transition:all .2s}.btn-send[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--color-accent);transform:translateY(-1px);box-shadow:0 4px 8px #00000026}.btn-send[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--color-bg)}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--color-border);border-radius:4px}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--color-text-muted)}.registration-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.registration-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--color-bg)}.registration-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--color-border);border-radius:4px}.registration-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--color-text-muted)}@media (max-width: 640px){.message[_ngcontent-%COMP%]{max-width:85%}.chat-wrapper[_ngcontent-%COMP%]{flex-direction:column}.chat-sidebar[_ngcontent-%COMP%]{width:100%;height:30%;border-right:none;border-bottom:1px solid var(--color-border)}.chat-main-area[_ngcontent-%COMP%]{height:70%}.chat-header[_ngcontent-%COMP%]{padding:var(--space-md);padding-right:60px}.chat-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem;max-width:60%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.header-content[_ngcontent-%COMP%]{flex-direction:row;align-items:center}.user-info[_ngcontent-%COMP%]{font-size:.8rem}.btn-edit[_ngcontent-%COMP%], .btn-logout[_ngcontent-%COMP%]{padding:.4rem;min-width:32px;min-height:32px}.registration-card[_ngcontent-%COMP%]{padding:var(--space-lg)}.registration-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}}.btn-mic[_ngcontent-%COMP%]{width:46px;height:46px;border-radius:50%;border:none;background:var(--color-surface);border:1px solid var(--color-border);font-size:1.25rem;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center;flex-shrink:0;-webkit-user-select:none;user-select:none;touch-action:manipulation}.btn-mic[_ngcontent-%COMP%]:hover{background:var(--color-bg);transform:scale(1.05)}.btn-mic[_ngcontent-%COMP%]:active{transform:scale(.95)}.btn-mic.recording[_ngcontent-%COMP%]{background:#ef4444;border-color:#ef4444;color:#fff;transform:scale(1.1);animation:_ngcontent-%COMP%_pulse 1.5s infinite}@keyframes _ngcontent-%COMP%_pulse{0%{box-shadow:0 0 #ef444466}70%{box-shadow:0 0 0 10px #ef444400}to{box-shadow:0 0 #ef444400}}.message-audio[_ngcontent-%COMP%]{padding:.25rem;border-radius:12px;background:transparent;width:100%}audio[_ngcontent-%COMP%]{height:36px;max-width:100%;border-radius:18px}"]})}}return n})();function Vk(n,e){n&1&&(p(0,"div",10),y(1," Loading users... "),f())}function Lk(n,e){if(n&1){let t=fe();p(0,"tr")(1,"td")(2,"div",13)(3,"span",14),y(4),f(),y(5),f()(),p(6,"td"),y(7),f(),p(8,"td")(9,"span",15),y(10),xe(11,"titlecase"),f()(),p(12,"td"),y(13),xe(14,"date"),f(),p(15,"td")(16,"div",16)(17,"button",17),U("click",function(){let i=V(t).$implicit,o=O(2);return L(o.openEditModal(i))}),y(18,"\u270F\uFE0F"),f(),p(19,"button",18),U("click",function(){let i=V(t).$implicit,o=O(2);return L(o.deleteUser(i.id))}),y(20,"\u{1F5D1}\uFE0F"),f()()()()}if(n&2){let t=e.$implicit;_(4),G(t.username.charAt(0).toUpperCase()),_(),J(" ",t.username," "),_(2),G(t.fullName),_(2),De("admin",t.role==="admin"),_(),J(" ",bs(11,7,t.role)," "),_(3),G(Ne(14,9,t.createdAt,"mediumDate"))}}function jk(n,e){if(n&1&&(p(0,"table",11)(1,"thead")(2,"tr")(3,"th"),y(4,"Username"),f(),p(5,"th"),y(6,"Full Name"),f(),p(7,"th"),y(8,"Role"),f(),p(9,"th"),y(10,"Created At"),f(),p(11,"th"),y(12,"Actions"),f()()(),p(13,"tbody"),z(14,Lk,21,12,"tr",12),f()()),n&2){let t=O();_(14),P("ngForOf",t.users)}}function Bk(n,e){n&1&&(p(0,"div",19)(1,"p"),y(2,"No users found. (This shouldn't happen as default admin exists)"),f()())}function Uk(n,e){n&1&&(p(0,"small",33),y(1,"Only enter if you wish to change it."),f())}function $k(n,e){if(n&1){let t=fe();p(0,"div",20)(1,"div",21)(2,"h3"),y(3),f(),p(4,"div",22)(5,"label"),y(6,"Username"),f(),p(7,"input",23),Z("ngModelChange",function(i){V(t);let o=O();return te(o.currentUser.username,i)||(o.currentUser.username=i),L(i)}),f()(),p(8,"div",22)(9,"label"),y(10,"Full Name"),f(),p(11,"input",24),Z("ngModelChange",function(i){V(t);let o=O();return te(o.currentUser.fullName,i)||(o.currentUser.fullName=i),L(i)}),f()(),p(12,"div",22)(13,"label"),y(14,"Password"),f(),p(15,"input",25),Z("ngModelChange",function(i){V(t);let o=O();return te(o.formPassword,i)||(o.formPassword=i),L(i)}),f(),z(16,Uk,2,0,"small",26),f(),p(17,"div",22)(18,"label"),y(19,"Role"),f(),p(20,"select",27),Z("ngModelChange",function(i){V(t);let o=O();return te(o.currentUser.role,i)||(o.currentUser.role=i),L(i)}),p(21,"option",28),y(22,"User"),f(),p(23,"option",29),y(24,"Admin"),f()()(),p(25,"div",30)(26,"button",31),U("click",function(){V(t);let i=O();return L(i.closeModal())}),y(27,"Cancel"),f(),p(28,"button",32),U("click",function(){V(t);let i=O();return L(i.saveUser())}),y(29),f()()()()}if(n&2){let t=O();_(3),G(t.isEditing?"Edit User":"Add New User"),_(4),X("ngModel",t.currentUser.username),_(4),X("ngModel",t.currentUser.fullName),_(4),X("ngModel",t.formPassword),P("placeholder",t.isEditing?"Leave blank to keep current":"Enter password"),_(),P("ngIf",t.isEditing),_(4),X("ngModel",t.currentUser.role),_(9),G(t.isEditing?"Update":"Create")}}var cI=(()=>{class n{constructor(t){this.userService=t,this.users=[],this.isLoading=!1,this.isModalOpen=!1,this.isEditing=!1,this.currentUser={username:"",fullName:"",role:"user"},this.formPassword=""}ngOnInit(){this.loadUsers()}loadUsers(){this.isLoading=!0;let t=localStorage.getItem("jjm_user_id");this.userService.getUsers().subscribe(r=>{t?this.users=r.filter(i=>i.userId===t):this.users=r,this.isLoading=!1})}openAddModal(){this.isEditing=!1,this.formPassword="",this.currentUser={username:"",fullName:"",role:"user"},this.isModalOpen=!0}openEditModal(t){this.isEditing=!0,this.formPassword="",this.currentUser=Y({},t),this.isModalOpen=!0}closeModal(){this.isModalOpen=!1}saveUser(){if(!this.currentUser.username||!this.currentUser.role){alert("Please fill in username and role.");return}if(!this.isEditing&&!this.formPassword){alert("Password is required for new users.");return}if(this.isEditing&&this.currentUser.id){let t={id:this.currentUser.id,username:this.currentUser.username,fullName:this.currentUser.fullName,role:this.currentUser.role};this.formPassword&&(t.password=this.formPassword),this.userService.updateUser(t).subscribe(()=>{this.closeModal()})}else{let t=localStorage.getItem("jjm_user_id")||"system",r=le(Y({},this.currentUser),{password:this.formPassword,createdBy:t});this.userService.addUser(r).subscribe(()=>{this.closeModal()})}}deleteUser(t){confirm("Are you sure you want to delete this user?")&&this.userService.deleteUser(t).subscribe()}static{this.\u0275fac=function(r){return new(r||n)(K(lo))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-user-management"]],standalone:!0,features:[ze],decls:16,vars:4,consts:[[1,"user-management-container"],[1,"page-header"],[1,"header-text"],[1,"subtitle"],[1,"btn-add",3,"click"],[1,"users-list-container"],["class","loading-state",4,"ngIf"],["class","users-table",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"loading-state"],[1,"users-table"],[4,"ngFor","ngForOf"],[1,"user-name-cell"],[1,"avatar"],[1,"role-badge"],[1,"actions"],["title","Edit",1,"btn-icon","edit",3,"click"],["title","Delete",1,"btn-icon","delete",3,"click"],[1,"empty-state"],[1,"modal-overlay"],[1,"modal-card"],[1,"form-group"],["type","text","placeholder","Enter username",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter full name",3,"ngModelChange","ngModel"],["type","text",3,"ngModelChange","ngModel","placeholder"],["class","hint",4,"ngIf"],[3,"ngModelChange","ngModel"],["value","user"],["value","admin"],[1,"modal-actions"],[1,"btn-cancel",3,"click"],[1,"btn-save",3,"click"],[1,"hint"]],template:function(r,i){r&1&&(p(0,"div",0)(1,"header",1)(2,"div",2)(3,"h2"),y(4,"\u{1F465} User Management"),f(),p(5,"p",3),y(6,"Manage system access and roles"),f()(),p(7,"button",4),U("click",function(){return i.openAddModal()}),p(8,"span"),y(9,"+"),f(),y(10," Add User "),f()(),p(11,"div",5),z(12,Vk,2,0,"div",6)(13,jk,15,1,"table",7)(14,Bk,3,0,"div",8),f(),z(15,$k,30,8,"div",9),f()),r&2&&(_(12),P("ngIf",i.isLoading),_(),P("ngIf",!i.isLoading&&i.users.length>0),_(),P("ngIf",!i.isLoading&&i.users.length===0),_(),P("ngIf",i.isModalOpen))},dependencies:[Ue,ut,Xe,Jc,Tn,ft,Mn,An,dt,tn,ht,st],styles:[".user-management-container[_ngcontent-%COMP%]{padding:var(--space-xl);max-width:1200px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--space-xl);background:var(--color-surface);padding:var(--space-lg);border-radius:var(--radius-lg);box-shadow:var(--shadow-sm);border:1px solid var(--color-border)}.header-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;color:var(--color-text)}.subtitle[_ngcontent-%COMP%]{margin:4px 0 0;color:var(--color-text-muted);font-size:.875rem}.btn-add[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);padding:.75rem 1.5rem;background:var(--color-primary);color:#fff;border:none;border-radius:var(--radius-md);font-weight:600;cursor:pointer;transition:all .2s}.btn-add[_ngcontent-%COMP%]:hover{background:var(--color-accent);transform:translateY(-2px);box-shadow:var(--shadow-md)}.users-list-container[_ngcontent-%COMP%]{background:var(--color-surface);border-radius:var(--radius-lg);border:1px solid var(--color-border);overflow:hidden;box-shadow:var(--shadow-sm)}.users-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.users-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .users-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:var(--space-md) var(--space-lg);text-align:left;border-bottom:1px solid var(--color-border)}.users-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:var(--color-bg);font-weight:600;color:var(--color-text-muted);font-size:.875rem;text-transform:uppercase;letter-spacing:.5px}.users-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:var(--color-bg)}.user-name-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;font-weight:500}.avatar[_ngcontent-%COMP%]{width:32px;height:32px;background:var(--color-primary);color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.875rem;font-weight:700}.role-badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:999px;font-size:.75rem;font-weight:600;background:var(--color-bg);color:var(--color-text);border:1px solid var(--color-border)}.role-badge.admin[_ngcontent-%COMP%]{background:#3b82f61a;color:var(--color-primary);border-color:#3b82f633}.loading-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{padding:var(--space-2xl);text-align:center;color:var(--color-text-muted)}.actions[_ngcontent-%COMP%]{display:flex;gap:8px}.btn-icon[_ngcontent-%COMP%]{padding:6px;background:transparent;border:none;cursor:pointer;border-radius:4px;transition:background .2s}.btn-icon[_ngcontent-%COMP%]:hover{background:#0000000d}.btn-icon.delete[_ngcontent-%COMP%]:hover{background:#ef44441a}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.modal-card[_ngcontent-%COMP%]{background:var(--color-surface);padding:var(--space-xl);border-radius:var(--radius-lg);width:400px;max-width:90%;box-shadow:var(--shadow-xl);animation:_ngcontent-%COMP%_slideUp .3s cubic-bezier(.16,1,.3,1)}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 var(--space-lg) 0;font-size:1.25rem;color:var(--color-text)}.form-group[_ngcontent-%COMP%]{margin-bottom:var(--space-lg)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:var(--space-xs);font-weight:500;font-size:.875rem;color:var(--color-text)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-bg);color:var(--color-text);font-size:.9375rem}.hint[_ngcontent-%COMP%]{display:block;margin-top:4px;font-size:.75rem;color:var(--color-text-muted)}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:var(--space-md);margin-top:var(--space-xl)}.btn-cancel[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:transparent;border:1px solid var(--color-border);color:var(--color-text);border-radius:var(--radius-md);cursor:pointer;font-weight:500}.btn-save[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:var(--color-primary);color:#fff;border:none;border-radius:var(--radius-md);cursor:pointer;font-weight:600}"]})}}return n})();function zk(n,e){n&1&&Pe(0,"app-login")}function Hk(n,e){if(n&1){let t=fe();p(0,"button",22),U("click",function(){V(t);let i=O(2);return L(i.setActiveTab("users"))}),p(1,"span",23),y(2,"\u{1F464}"),f(),p(3,"span",24),y(4,"Users"),f()()}if(n&2){let t=O(2);De("active",t.activeTab==="users")}}function qk(n,e){n&1&&(p(0,"div",29)(1,"div",30),Pe(2,"app-landing"),f()())}function Gk(n,e){n&1&&(p(0,"div",29)(1,"div",30),Pe(2,"app-product-form"),f()())}function Wk(n,e){n&1&&(p(0,"div",29)(1,"div",30),Pe(2,"app-pos-calculator"),f()())}function Kk(n,e){n&1&&(p(0,"div",29)(1,"div",30),Pe(2,"app-inventory-list"),f()())}function Qk(n,e){n&1&&(p(0,"div",29)(1,"div",30),Pe(2,"app-customer-form"),f()())}function Yk(n,e){n&1&&(p(0,"div",29)(1,"div",30),Pe(2,"app-expenses"),f()())}function Jk(n,e){n&1&&(p(0,"div",29)(1,"div",30),Pe(2,"app-reports"),f()())}function Xk(n,e){n&1&&(p(0,"div",29)(1,"div",30),Pe(2,"app-activity-logs"),f()())}function Zk(n,e){n&1&&(p(0,"div",29)(1,"div",30),Pe(2,"app-user-management"),f()())}function eF(n,e){if(n&1){let t=fe();p(0,"div")(1,"header",8)(2,"div",9)(3,"div",10)(4,"div",11)(5,"div",12),y(6,"\u{1F4E6}"),f(),p(7,"div",13)(8,"h1"),y(9,"JJM Inventory"),f(),p(10,"p",14),y(11,"Smart Business Management"),f()()(),p(12,"div",15)(13,"button",16),U("click",function(){V(t);let i=O();return L(i.toggleTheme())}),p(14,"span",17),y(15),f()(),p(16,"button",18),U("click",function(){V(t);let i=O();return L(i.logout())}),p(17,"span",19),y(18,"\u{1F6AA}"),f(),p(19,"span",20),y(20,"Logout"),f()()()()()(),p(21,"main",9)(22,"nav",21)(23,"button",22),U("click",function(){V(t);let i=O();return L(i.setActiveTab("home"))}),p(24,"span",23),y(25,"\u{1F3E0}"),f(),p(26,"span",24),y(27,"Home"),f()(),p(28,"button",22),U("click",function(){V(t);let i=O();return L(i.setActiveTab("add-product"))}),p(29,"span",23),y(30,"\u{1F4E6}"),f(),p(31,"span",24),y(32,"Add Product"),f()(),p(33,"button",22),U("click",function(){V(t);let i=O();return L(i.setActiveTab("sell"))}),p(34,"span",23),y(35,"\u{1F4B0}"),f(),p(36,"span",24),y(37,"Sell"),f()(),p(38,"button",22),U("click",function(){V(t);let i=O();return L(i.setActiveTab("inventory"))}),p(39,"span",23),y(40,"\u{1F4CA}"),f(),p(41,"span",24),y(42,"Inventory"),f()(),p(43,"button",22),U("click",function(){V(t);let i=O();return L(i.setActiveTab("customers"))}),p(44,"span",23),y(45,"\u{1F465}"),f(),p(46,"span",24),y(47,"Customers"),f()(),p(48,"button",22),U("click",function(){V(t);let i=O();return L(i.setActiveTab("expenses"))}),p(49,"span",23),y(50,"\u{1F4B8}"),f(),p(51,"span",24),y(52,"Expenses"),f()(),p(53,"button",22),U("click",function(){V(t);let i=O();return L(i.setActiveTab("reports"))}),p(54,"span",23),y(55,"\u{1F4C8}"),f(),p(56,"span",24),y(57,"Reports"),f()(),p(58,"button",22),U("click",function(){V(t);let i=O();return L(i.setActiveTab("logs"))}),p(59,"span",23),y(60,"\u{1F4CB}"),f(),p(61,"span",24),y(62,"Activity Logs"),f()(),z(63,Hk,5,2,"button",25),f(),p(64,"div",26),z(65,qk,3,0,"div",27)(66,Gk,3,0,"div",27)(67,Wk,3,0,"div",27)(68,Kk,3,0,"div",27)(69,Qk,3,0,"div",27)(70,Yk,3,0,"div",27)(71,Jk,3,0,"div",27)(72,Xk,3,0,"div",27)(73,Zk,3,0,"div",27),f()(),p(74,"footer",28)(75,"div",9)(76,"p"),y(77,"\xA9 2024 JJM Inventory. All rights reserved."),f()()()()}if(n&2){let t=O();_(13),P("title",t.isDarkTheme?"Switch to Light Mode":"Switch to Dark Mode"),_(2),G(t.isDarkTheme?"\u2600\uFE0F":"\u{1F319}"),_(8),De("active",t.activeTab==="home"),_(5),De("active",t.activeTab==="add-product"),_(5),De("active",t.activeTab==="sell"),_(5),De("active",t.activeTab==="inventory"),_(5),De("active",t.activeTab==="customers"),_(5),De("active",t.activeTab==="expenses"),_(5),De("active",t.activeTab==="reports"),_(5),De("active",t.activeTab==="logs"),_(5),P("ngIf",t.userRole==="admin"),_(2),P("ngIf",t.activeTab==="home"),_(),P("ngIf",t.activeTab==="add-product"),_(),P("ngIf",t.activeTab==="sell"),_(),P("ngIf",t.activeTab==="inventory"),_(),P("ngIf",t.activeTab==="customers"),_(),P("ngIf",t.activeTab==="expenses"),_(),P("ngIf",t.activeTab==="reports"),_(),P("ngIf",t.activeTab==="logs"),_(),P("ngIf",t.activeTab==="users"&&t.userRole==="admin")}}var lI=(()=>{class n{constructor(t,r){this.inventoryService=t,this.chatService=r,this.title="JJM Inventory",this.activeTab="home",this.isDarkTheme=!1,this.isLoggedIn=!1,this.userRole="",this.isChatOpen=!1,this.isLoggedIn=localStorage.getItem("jjm_logged_in")==="true",this.userRole=localStorage.getItem("jjm_role")||"user";let i=localStorage.getItem("jjm_theme");this.isDarkTheme=i==="dark",this.applyTheme(),window.inventoryService=this.inventoryService}setActiveTab(t){t==="users"&&this.userRole!=="admin"||(this.activeTab=t)}toggleTheme(){this.isDarkTheme=!this.isDarkTheme,this.applyTheme(),localStorage.setItem("jjm_theme",this.isDarkTheme?"dark":"light")}logout(){this.chatService.triggerLogout(),localStorage.removeItem("jjm_logged_in"),localStorage.removeItem("jjm_username"),localStorage.removeItem("jjm_user_id"),localStorage.removeItem("jjm_role"),localStorage.removeItem("chatCustomerInfo"),localStorage.removeItem("chatUserName"),this.isLoggedIn=!1,window.location.reload()}applyTheme(){this.isDarkTheme?document.body.classList.add("dark-theme"):document.body.classList.remove("dark-theme")}toggleChat(){this.isChatOpen=!this.isChatOpen}static{this.\u0275fac=function(r){return new(r||n)(K(nn),K(_u))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-root"]],standalone:!0,features:[ze],decls:13,vars:6,consts:[[4,"ngIf"],[1,"chat-widget"],["title","Open Chat",1,"chat-toggle-button",3,"click"],[1,"chat-icon"],[1,"chat-label"],[1,"chat-modal"],[1,"chat-modal-content"],["title","Close Chat",1,"chat-modal-close",3,"click"],[1,"header"],[1,"container"],[1,"header-content"],[1,"logo-section"],[1,"logo-icon"],[1,"brand-info"],[1,"tagline"],[1,"header-actions"],[1,"theme-toggle",3,"click","title"],[1,"theme-icon"],["title","Logout",1,"logout-button",3,"click"],[1,"logout-icon"],[1,"logout-text"],[1,"tabs"],[1,"tab-button",3,"click"],[1,"tab-icon"],[1,"tab-label"],["class","tab-button",3,"active","click",4,"ngIf"],[1,"tab-content"],["class","tab-pane",4,"ngIf"],[1,"footer"],[1,"tab-pane"],[1,"tab-pane-content"]],template:function(r,i){r&1&&(z(0,zk,1,0,"app-login",0)(1,eF,78,28,"div",0),p(2,"div",1)(3,"button",2),U("click",function(){return i.toggleChat()}),p(4,"span",3),y(5,"\u{1F4AC}"),f(),p(6,"span",4),y(7,"Chat"),f()(),p(8,"div",5)(9,"div",6),Pe(10,"app-chat"),f(),p(11,"button",7),U("click",function(){return i.toggleChat()}),y(12,"\u2715"),f()()()),r&2&&(P("ngIf",!i.isLoggedIn),_(),P("ngIf",i.isLoggedIn),_(2),De("active",i.isChatOpen),_(5),De("open",i.isChatOpen))},dependencies:[Ue,Xe,Qb,Yb,Jb,Xb,Zb,ew,tw,nw,rw,aI,cI],styles:['.header[_ngcontent-%COMP%]{background:var(--color-surface);border-bottom:1px solid var(--color-border);padding:var(--space-lg) 0;position:sticky;top:0;z-index:100;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background:#fffffff2}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.logo-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-md)}.logo-icon[_ngcontent-%COMP%]{font-size:2.5rem;animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-5px)}}.brand-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--color-text);margin:0;font-size:1.5rem;font-weight:700;letter-spacing:-.5px}.tagline[_ngcontent-%COMP%]{color:var(--color-text-muted);font-size:.75rem;margin:0;font-weight:500}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-md)}.theme-toggle[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:var(--radius-xl);background:var(--color-bg);border:1px solid var(--color-border);display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all var(--transition-base);padding:0}.theme-toggle[_ngcontent-%COMP%]:hover{background:var(--color-primary);border-color:var(--color-primary);transform:rotate(180deg) scale(1.1);box-shadow:var(--shadow-md)}.theme-icon[_ngcontent-%COMP%]{font-size:1.25rem;transition:transform var(--transition-base)}.logout-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);padding:var(--space-sm) var(--space-md);background:#ef44441a;border:1px solid rgba(239,68,68,.3);border-radius:var(--radius-lg);color:var(--color-danger);font-weight:600;cursor:pointer;transition:all var(--transition-base)}.logout-button[_ngcontent-%COMP%]:hover{background:var(--color-danger);border-color:var(--color-danger);color:#fff;transform:translateY(-2px);box-shadow:0 4px 12px #ef44444d}.logout-icon[_ngcontent-%COMP%]{font-size:1.125rem}.logout-text[_ngcontent-%COMP%]{font-size:.875rem}.tabs[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm);margin-top:var(--space-2xl);margin-bottom:var(--space-xl);padding:var(--space-sm);background:var(--color-bg);border-radius:var(--radius-xl);flex-wrap:wrap;box-shadow:inset 0 2px 4px #0000000d}.tab-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);padding:var(--space-md) var(--space-lg);background:transparent;border:none;border-radius:var(--radius-lg);color:var(--color-text-muted);font-size:.9375rem;font-weight:600;cursor:pointer;transition:all var(--transition-base);white-space:nowrap;position:relative;overflow:hidden}.tab-button[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(59,130,246,.15),transparent);transition:left .5s ease}.tab-button[_ngcontent-%COMP%]:hover:before{left:100%}.tab-button[_ngcontent-%COMP%]:hover{background:#3b82f614;color:var(--color-primary);transform:translateY(-2px);box-shadow:0 4px 12px #3b82f626}.tab-button.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-primary),var(--color-primary-light));color:#fff;box-shadow:0 4px 12px #3b82f64d}.tab-button.active[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,var(--color-primary-dark),var(--color-primary));transform:translateY(-2px) scale(1.02)}.tab-icon[_ngcontent-%COMP%]{font-size:1.25rem;transition:transform var(--transition-base);filter:drop-shadow(0 2px 4px rgba(0,0,0,.1))}.tab-button[_ngcontent-%COMP%]:hover   .tab-icon[_ngcontent-%COMP%]{transform:scale(1.15) rotate(5deg)}.tab-button.active[_ngcontent-%COMP%]   .tab-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_iconPulse .6s ease;filter:drop-shadow(0 2px 8px rgba(255,255,255,.5))}.tab-label[_ngcontent-%COMP%]{font-weight:600;letter-spacing:.3px}@keyframes _ngcontent-%COMP%_iconPulse{0%,to{transform:scale(1)}50%{transform:scale(1.2)}}.tab-content[_ngcontent-%COMP%]{min-height:calc(100vh - 400px);padding-bottom:var(--space-2xl);position:relative}.tab-pane[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInUp .4s cubic-bezier(.16,1,.3,1)}.tab-pane-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}@keyframes _ngcontent-%COMP%_slideInUp{0%{opacity:0;transform:translateY(30px) scale(.98)}to{opacity:1;transform:translateY(0) scale(1)}}.footer[_ngcontent-%COMP%]{background:var(--color-surface);border-top:1px solid var(--color-border);padding:var(--space-lg) 0;margin-top:var(--space-2xl)}.footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;color:var(--color-text-muted);font-size:.875rem}@media (max-width: 768px){.tab-button[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);font-size:.875rem}.tab-icon[_ngcontent-%COMP%]{font-size:1rem}.tab-label[_ngcontent-%COMP%]{display:none}}.chat-widget[_ngcontent-%COMP%]{position:fixed;bottom:24px;right:24px;z-index:1000}.chat-toggle-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);padding:var(--space-md) var(--space-lg);background:linear-gradient(135deg,#3b82f6,#2563eb);border:none;border-radius:var(--radius-xl);color:#fff;font-weight:600;font-size:.9375rem;cursor:pointer;box-shadow:0 8px 24px #3b82f666;transition:all var(--transition-base);position:relative;overflow:hidden}.chat-toggle-button[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);transition:left .6s ease}.chat-toggle-button[_ngcontent-%COMP%]:hover:before{left:100%}.chat-toggle-button[_ngcontent-%COMP%]:hover{transform:translateY(-4px) scale(1.05);box-shadow:0 12px 32px #3b82f680}.chat-toggle-button.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626);box-shadow:0 8px 24px #ef444466}.chat-toggle-button.active[_ngcontent-%COMP%]:hover{box-shadow:0 12px 32px #ef444480}.chat-icon[_ngcontent-%COMP%]{font-size:1.5rem;animation:_ngcontent-%COMP%_bounce 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-4px)}}.chat-label[_ngcontent-%COMP%]{font-weight:700;letter-spacing:.3px}.chat-modal[_ngcontent-%COMP%]{position:fixed;bottom:100px;right:24px;width:850px;max-width:calc(100vw - 48px);height:650px;max-height:calc(100vh - 120px);background:var(--color-surface);border-radius:var(--radius-xl);box-shadow:0 20px 60px #0000004d;opacity:0;transform:translateY(20px) scale(.95);pointer-events:none;transition:all .3s cubic-bezier(.16,1,.3,1);display:flex;flex-direction:column;overflow:hidden;border:1px solid var(--color-border)}.chat-modal.open[_ngcontent-%COMP%]{opacity:1;transform:translateY(0) scale(1);pointer-events:all;overflow:auto}.chat-modal-close[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;width:36px;height:36px;border-radius:var(--radius-lg);background:#00000080;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);color:#fff;font-size:1.25rem;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all var(--transition-base);padding:0;z-index:100;box-shadow:0 4px 12px #0000004d}.chat-modal-close[_ngcontent-%COMP%]:hover{background:#ef4444cc;transform:rotate(90deg) scale(1.1);box-shadow:0 6px 16px #ef444466}.chat-modal-content[_ngcontent-%COMP%]{flex:1;flex-direction:column}@media (max-width: 768px){.chat-widget[_ngcontent-%COMP%]{bottom:16px;right:16px}.chat-toggle-button[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md)}.chat-label[_ngcontent-%COMP%]{display:none}.chat-modal[_ngcontent-%COMP%]{position:fixed;inset:0;width:100%;height:100%;max-width:100%;max-height:100%;border-radius:0;z-index:2000}.chat-modal-close[_ngcontent-%COMP%]{top:16px;right:16px;width:44px;height:44px}}']})}}return n})();Cb(lI,Eb).catch(n=>console.error(n));
