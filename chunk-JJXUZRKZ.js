import{a as fe}from"./chunk-YESSF774.js";import{h as ne}from"./chunk-2QKCGDE5.js";import{d as ve}from"./chunk-WDA6IXAE.js";import"./chunk-Z5ZNEV7G.js";import{a as _e}from"./chunk-6KUWSICS.js";import{b as ie,c as re,f as oe,h as ae,i as ce,j as le,k as se,l as de,m as pe,p as me}from"./chunk-WU6DJJUB.js";import{a as ge}from"./chunk-4KKS43UV.js";import{Ab as y,Ba as c,Bb as S,Ca as I,Cb as V,Db as H,Ob as N,Pb as Y,Ra as _,Ta as d,Ua as A,Va as k,Ya as n,Za as i,_ as j,_a as Q,a as W,ac as J,bb as h,bc as X,cb as g,cc as K,db as s,ec as Z,ga as m,ha as u,hc as ee,ic as te,lb as o,mb as f,md as ue,nb as x,ob as R,pb as G,qb as M,rb as w,sb as O,u as $,ub as L,vb as U,za as z}from"./chunk-TA5RWKR2.js";import{a as F,b as B,g as q}from"./chunk-7QOE2ANW.js";var xe=()=>[1,5,10,25];function Ce(a,p){if(a&1){let e=h();n(0,"button",3),g("click",function(){let t=m(e).$implicit,l=s();return u(l.categoryFilter=t)}),n(1,"span",4),o(2),i(),n(3,"span",5),o(4),i()()}if(a&2){let e=p.$implicit,r=s();k("active",r.categoryFilter===e),c(2),f(r.getCategoryIcon(e)),c(2),f(e)}}function he(a,p){a&1&&(n(0,"span",67),o(1,"inventory_2"),i())}function ye(a,p){if(a&1&&(n(0,"span",68),o(1),i()),a&2){let e=s().$implicit,r=s();c(),x(" ",r.getCartQuantity(e.id)," ")}}function Pe(a,p){if(a&1&&(n(0,"span",69),o(1),i()),a&2){let e=s().$implicit,r=s();c(),x("Cost: ",r.formatCurrency(e.cost),"")}}function be(a,p){if(a&1){let e=h();n(0,"div",57),g("click",function(){let t=m(e).$implicit,l=s();return u(l.addProductToCart(t))}),n(1,"div",58),_(2,he,2,0,"span",59)(3,ye,2,1,"span",60),i(),n(4,"div",61)(5,"p",62),o(6),i(),n(7,"div",63)(8,"span",64),o(9),i(),_(10,Pe,2,1,"span",65),n(11,"span",66),o(12),i()()()()}if(a&2){let e=p.$implicit,r=s();k("in-cart",r.isInCart(e.id)),c(),A("background-image",e.imageUrl?"url("+e.imageUrl+")":"none"),c(),d("ngIf",!e.imageUrl),c(),d("ngIf",r.isInCart(e.id)),c(3),f(e.name),c(3),f(r.formatCurrency(e.price)),c(),d("ngIf",e.cost),c(2),x("Qty: ",e.quantity,"")}}function Me(a,p){a&1&&(n(0,"div",70)(1,"span",4),o(2,"search_off"),i(),n(3,"p"),o(4,"No products available"),i()())}function we(a,p){if(a&1){let e=h();n(0,"button",71),g("click",function(){m(e);let t=s();return u(t.clearCart())}),o(1,"Clear"),i()}}function Oe(a,p){if(a&1&&(n(0,"option",72),o(1),i()),a&2){let e=p.$implicit;d("value",e.id),c(),x(" ",e.name," ")}}function Se(a,p){a&1&&(n(0,"span",4),o(1,"inventory_2"),i())}function ke(a,p){if(a&1&&(n(0,"span",87),o(1),i()),a&2){let e=s().$implicit,r=s();c(),x(" ",r.formatCurrency(e.product.price)," each ")}}function Ee(a,p){if(a&1&&(n(0,"span",88),o(1),i()),a&2){let e=s().$implicit,r=s();c(),x(" ",e.discountType==="percent"?e.discount+"%":r.formatCurrency(e.discount)," off ")}}function Te(a,p){if(a&1){let e=h();n(0,"div",73)(1,"div",74),_(2,Se,2,0,"span",75),i(),n(3,"div",76)(4,"div",77)(5,"span",78),o(6),i(),n(7,"span",79),o(8),i()(),n(9,"div",77),_(10,ke,2,1,"span",80)(11,Ee,2,1,"span",81),n(12,"div",82)(13,"button",83),g("click",function(){let t=m(e).index,l=s();return u(l.decrementItem(t))}),n(14,"span",4),o(15,"remove"),i()(),n(16,"button",84),g("click",function(){let t=m(e).index,l=s();return u(l.openQuantityModal(t))}),o(17),i(),n(18,"button",85),g("click",function(){let t=m(e).index,l=s();return u(l.incrementItem(t))}),n(19,"span",4),o(20,"add"),i()()()()(),n(21,"button",86),g("click",function(){let t=m(e).index,l=s();return u(l.removeFromCart(t))}),n(22,"span",4),o(23,"close"),i()()()}if(a&2){let e=p.$implicit,r=s();c(),A("background-image",e.product.imageUrl?"url("+e.product.imageUrl+")":"none"),c(),d("ngIf",!e.product.imageUrl),c(4),f(e.product.name),c(2),f(r.formatCurrency(e.total)),c(2),d("ngIf",e.discount===0),c(),d("ngIf",e.discount>0),c(6),x(" ",e.quantity," "),c(),d("disabled",e.quantity>=e.product.quantity)}}function De(a,p){a&1&&(n(0,"div",89)(1,"span",4),o(2,"shopping_cart"),i(),n(3,"p"),o(4,"Cart is empty"),i(),n(5,"span",90),o(6,"Tap products to add them"),i()())}function Ie(a,p){if(a&1&&(n(0,"span",91),o(1),i()),a&2){let e=s();c(),f(e.pendingSales().length)}}function Ve(a,p){if(a&1){let e=h();n(0,"div",92)(1,"span",4),o(2,"local_shipping"),i(),n(3,"span"),o(4),y(5,"date"),i(),n(6,"button",93),g("click",function(){m(e);let t=s();return u(t.clearDelivery())}),o(7,"\u2715"),i()()}if(a&2){let e=s();c(4),R("",V(5,2,e.deliveryDate,"shortDate")," ",e.deliveryTime?"at "+e.deliveryTime:"","")}}function qe(a,p){if(a&1&&(n(0,"div",94)(1,"span",95)(2,"span",4),o(3,"local_shipping"),i(),o(4," Delivery Fee "),i(),n(5,"span"),o(6),i()()),a&2){let e=s();c(6),f(e.formatCurrency(e.deliveryFee))}}function Re(a,p){if(a&1&&(n(0,"div",94)(1,"span",95)(2,"span",4),o(3,"room_service"),i(),o(4," Service Fee "),i(),n(5,"span"),o(6),i()()),a&2){let e=s();c(6),f(e.formatCurrency(e.serviceFee))}}function ze(a,p){if(a&1&&(n(0,"div",96)(1,"span",97)(2,"span",4),o(3,"payments"),i(),o(4," Total Cost "),i(),n(5,"span",98),o(6),i()()),a&2){let e=s();c(6),f(e.formatCurrency(e.totalCost))}}function Ne(a,p){if(a&1&&(n(0,"div",99)(1,"span",100)(2,"span",4),o(3,"trending_up"),i(),o(4," Est. Profit "),i(),n(5,"span",101),o(6),i()()),a&2){let e=s();c(6),f(e.formatCurrency(e.total-e.totalCost))}}function Fe(a,p){if(a&1){let e=h();n(0,"div",102)(1,"div",103)(2,"label"),o(3,"Cash Received"),i(),n(4,"div",104)(5,"span",105),o(6,"\u20B1"),i(),n(7,"input",106),g("ngModelChange",function(t){m(e);let l=s();return u(l.onCashInput(t))})("blur",function(){m(e);let t=s();return u(t.formatCashOnBlur())})("focus",function(){m(e);let t=s();return u(t.unformatCashOnFocus())}),i()()(),n(8,"div",107)(9,"span"),o(10,"Change"),i(),n(11,"span",108),o(12),i()()()}if(a&2){let e=s();c(7),d("ngModel",e.cashDisplayValue),c(),k("negative",e.change<0),c(4),f(e.formatCurrency(e.change))}}function Be(a,p){if(a&1&&(n(0,"div",109)(1,"span",4),o(2,"warning"),i(),o(3),i()),a&2){let e=s();c(3),x(" ",e.errorMessage," ")}}function Ae(a,p){if(a&1){let e=h();n(0,"button",110),g("click",function(){m(e);let t=s();return u(t.clearFilter())}),n(1,"span",4),o(2,"clear"),i()()}}function We(a,p){if(a&1&&(n(0,"span",127),o(1),y(2,"slice"),i()),a&2){let e=s().$implicit;c(),x("Order #",H(2,1,e.orderId,4,12),"")}}function $e(a,p){if(a&1&&(n(0,"span",127),o(1),i()),a&2){let e=s().$implicit;c(),f(e.sales==null||e.sales[0]==null?null:e.sales[0].productName)}}function je(a,p){a&1&&(n(0,"span",128),o(1,"RESERVATION"),i())}function Qe(a,p){if(a&1&&(n(0,"span"),o(1),i()),a&2){let e=p.$implicit,r=p.last;c(),G(" ",e.productName," (x",e.quantitySold,")",r?"":", "," ")}}function Ge(a,p){if(a&1&&(n(0,"div",129),_(1,Qe,2,3,"span",130),i()),a&2){let e=s().$implicit;c(),d("ngForOf",e.sales)}}function Le(a,p){if(a&1&&(n(0,"div",131)(1,"span",4),o(2,"person"),i(),n(3,"span"),o(4),i()()),a&2){let e=s().$implicit;c(4),f(e.customer.name)}}function Ue(a,p){if(a&1&&(n(0,"div",131)(1,"span",4),o(2,"event"),i(),n(3,"span"),o(4),y(5,"date"),i()()),a&2){let e=s().$implicit;c(4),f(V(5,1,e.deliveryDate,"medium"))}}function He(a,p){if(a&1&&(n(0,"div",131)(1,"span",4),o(2,"percent"),i(),n(3,"span"),o(4),i()()),a&2){let e=s().$implicit,r=s();c(4),x("Discount: ",e.discountType==="percent"?e.discount+"%":r.formatCurrency(e.discount),"")}}function Ye(a,p){if(a&1&&(n(0,"div",131)(1,"span",4),o(2,"notes"),i(),n(3,"span"),o(4),i()()),a&2){let e=s().$implicit;c(4),f(e.deliveryNotes)}}function Je(a,p){if(a&1){let e=h();n(0,"button",132),g("click",function(){m(e);let t=s().$implicit,l=s();return u(l.confirmGroupReservation(t==null?null:t.sales))}),n(1,"span",4),o(2,"check_circle"),i()()}}function Xe(a,p){if(a&1){let e=h();n(0,"button",133),g("click",function(){m(e);let t=s().$implicit,l=s();return u(l.markGroupAsDelivered(t==null?null:t.sales))}),n(1,"span",4),o(2,"local_shipping"),i()()}}function Ke(a,p){if(a&1){let e=h();n(0,"div",111)(1,"div",112)(2,"div",113),_(3,We,3,5,"span",114)(4,$e,2,1,"span",114)(5,je,2,0,"span",115),i(),n(6,"span",116),o(7),i()(),_(8,Ge,2,1,"div",117),n(9,"div",118),_(10,Le,5,1,"div",119)(11,Ue,6,4,"div",119)(12,He,5,1,"div",119),n(13,"div",120)(14,"span",4),o(15,"payments"),i(),n(16,"span"),o(17),i()(),n(18,"div",120)(19,"span",4),o(20,"change_circle"),i(),n(21,"span"),o(22),i()(),_(23,Ye,5,1,"div",119),i(),n(24,"div",121)(25,"button",122),g("click",function(){let t=m(e).$implicit,l=s();return u(l.reprintOrderReceipt(t))}),n(26,"span",4),o(27,"print"),i()(),n(28,"button",123),g("click",function(){let t=m(e).$implicit,l=s();return u(l.openEditModal(t==null?null:t.sales[0]))}),n(29,"span",4),o(30,"edit"),i()(),_(31,Je,3,0,"button",124)(32,Xe,3,0,"button",125),n(33,"button",126),g("click",function(){let t=m(e).$implicit,l=s();return u(l.cancelGroupOrder(t==null?null:t.sales))}),n(34,"span",4),o(35,"delete"),i()()()()}if(a&2){let e=p.$implicit,r=s();k("reservation",e.status==="pending_confirmation"),c(3),d("ngIf",e.isGroup),c(),d("ngIf",!e.isGroup),c(),d("ngIf",e.status==="pending_confirmation"),c(2),f(r.formatCurrency(e.total)),c(),d("ngIf",e.isGroup),c(2),d("ngIf",e.customer),c(),d("ngIf",e.deliveryDate),c(),d("ngIf",e.discount>0),c(5),x("Cash: ",r.formatCurrency(e.cashReceived),""),c(5),x("Change: ",r.formatCurrency(e.change),""),c(),d("ngIf",e.deliveryNotes),c(8),d("ngIf",e.status==="pending_confirmation"),c(),d("ngIf",e.status!=="pending_confirmation")}}function Ze(a,p){a&1&&(n(0,"div",134)(1,"span",4),o(2,"check_circle"),i(),n(3,"p"),o(4,"No pending deliveries"),i()())}function et(a,p){if(a&1){let e=h();n(0,"div",135)(1,"button",136),g("click",function(){m(e);let t=s();return u(t.prevPendingPage())}),n(2,"span",4),o(3,"chevron_left"),i()(),n(4,"span"),o(5),i(),n(6,"button",136),g("click",function(){m(e);let t=s();return u(t.nextPendingPage())}),n(7,"span",4),o(8,"chevron_right"),i()()()}if(a&2){let e=s();c(),d("disabled",e.pendingPage===1),c(4),R("Page ",e.pendingPage," of ",e.pendingTotalPages,""),c(),d("disabled",e.pendingPage>=e.pendingTotalPages)}}function tt(a,p){if(a&1){let e=h();n(0,"div",137),g("click",function(){m(e);let t=s();return u(t.closeDeliveryModal())}),n(1,"div",138),g("click",function(t){return m(e),u(t.stopPropagation())}),n(2,"div",139)(3,"h3")(4,"span",4),o(5,"local_shipping"),i(),o(6," Delivery Options"),i(),n(7,"button",140),g("click",function(){m(e);let t=s();return u(t.closeDeliveryModal())}),n(8,"span",4),o(9,"close"),i()()(),n(10,"div",141)(11,"div",142)(12,"label"),o(13,"Delivery Date"),i(),n(14,"input",143),O("ngModelChange",function(t){m(e);let l=s();return w(l.deliveryDate,t)||(l.deliveryDate=t),u(t)}),i()(),n(15,"div",142)(16,"label"),o(17,"Delivery Time"),i(),n(18,"input",144),O("ngModelChange",function(t){m(e);let l=s();return w(l.deliveryTime,t)||(l.deliveryTime=t),u(t)}),i()(),n(19,"div",142)(20,"label"),o(21,"Notes"),i(),n(22,"textarea",145),O("ngModelChange",function(t){m(e);let l=s();return w(l.deliveryNotes,t)||(l.deliveryNotes=t),u(t)}),i()(),n(23,"div",146)(24,"div",142)(25,"label")(26,"span",4),o(27,"local_shipping"),i(),o(28," Delivery Fee "),i(),n(29,"div",147)(30,"span",105),o(31,"\u20B1"),i(),n(32,"input",148),O("ngModelChange",function(t){m(e);let l=s();return w(l.deliveryFee,t)||(l.deliveryFee=t),u(t)}),i()()(),n(33,"div",142)(34,"label")(35,"span",4),o(36,"room_service"),i(),o(37," Service Fee "),i(),n(38,"div",147)(39,"span",105),o(40,"\u20B1"),i(),n(41,"input",148),O("ngModelChange",function(t){m(e);let l=s();return w(l.serviceFee,t)||(l.serviceFee=t),u(t)}),i()()()(),n(42,"div",149)(43,"span",4),o(44,"info"),i(),n(45,"div",150)(46,"strong"),o(47,"Note:"),i(),o(48," Setting delivery date to "),n(49,"strong"),o(50,"today"),i(),o(51," or leaving it empty will treat this as a "),n(52,"strong"),o(53,"direct sale"),i(),o(54," and mark it as completed immediately. Set a "),n(55,"strong"),o(56,"future date"),i(),o(57," for pending deliveries. "),i()()(),n(58,"div",151)(59,"button",152),g("click",function(){m(e);let t=s();return u(t.closeDeliveryModal())}),o(60,"Cancel"),i(),n(61,"button",153),g("click",function(){m(e);let t=s();return u(t.closeDeliveryModal())}),o(62,"Save"),i()()()()}if(a&2){let e=s();c(14),M("ngModel",e.deliveryDate),d("min",e.minDate),c(4),M("ngModel",e.deliveryTime),c(4),M("ngModel",e.deliveryNotes),c(10),M("ngModel",e.deliveryFee),c(9),M("ngModel",e.serviceFee)}}function nt(a,p){if(a&1){let e=h();n(0,"div",137),g("click",function(){m(e);let t=s();return u(t.closeEditModal())}),n(1,"div",138),g("click",function(t){return m(e),u(t.stopPropagation())}),n(2,"div",139)(3,"h3")(4,"span",4),o(5,"edit"),i(),o(6," Edit Delivery"),i(),n(7,"button",140),g("click",function(){m(e);let t=s();return u(t.closeEditModal())}),n(8,"span",4),o(9,"close"),i()()(),n(10,"div",141)(11,"div",142)(12,"label"),o(13,"Delivery Date"),i(),n(14,"input",143),O("ngModelChange",function(t){m(e);let l=s();return w(l.editDeliveryDate,t)||(l.editDeliveryDate=t),u(t)}),i()(),n(15,"div",142)(16,"label"),o(17,"Delivery Time"),i(),n(18,"input",144),O("ngModelChange",function(t){m(e);let l=s();return w(l.editDeliveryTime,t)||(l.editDeliveryTime=t),u(t)}),i()(),n(19,"div",142)(20,"label"),o(21,"Notes"),i(),n(22,"textarea",154),O("ngModelChange",function(t){m(e);let l=s();return w(l.editDeliveryNotes,t)||(l.editDeliveryNotes=t),u(t)}),i()()(),n(23,"div",151)(24,"button",152),g("click",function(){m(e);let t=s();return u(t.closeEditModal())}),o(25,"Cancel"),i(),n(26,"button",153),g("click",function(){m(e);let t=s();return u(t.saveEdit())}),o(27,"Save Changes"),i()()()()}if(a&2){let e=s();c(14),M("ngModel",e.editDeliveryDate),d("min",e.minDate),c(4),M("ngModel",e.editDeliveryTime),c(4),M("ngModel",e.editDeliveryNotes)}}function it(a,p){if(a&1){let e=h();n(0,"div",137),g("click",function(){m(e);let t=s();return u(t.closeDiscountModal())}),n(1,"div",155),g("click",function(t){return m(e),u(t.stopPropagation())}),n(2,"div",139)(3,"h3")(4,"span",4),o(5,"percent"),i(),o(6," Apply Discount"),i(),n(7,"button",140),g("click",function(){m(e);let t=s();return u(t.closeDiscountModal())}),n(8,"span",4),o(9,"close"),i()()(),n(10,"div",141)(11,"div",156)(12,"input",157),O("ngModelChange",function(t){m(e);let l=s();return w(l.tempDiscount,t)||(l.tempDiscount=t),u(t)}),i(),n(13,"select",158),O("ngModelChange",function(t){m(e);let l=s();return w(l.tempDiscountType,t)||(l.tempDiscountType=t),u(t)}),n(14,"option",159),o(15,"\u20B1 Amount"),i(),n(16,"option",160),o(17,"% Percent"),i()()()(),n(18,"div",151)(19,"button",152),g("click",function(){m(e);let t=s();return u(t.closeDiscountModal())}),o(20,"Cancel"),i(),n(21,"button",153),g("click",function(){m(e);let t=s();return u(t.applyDiscount())}),o(22,"Apply"),i()()()()}if(a&2){let e=s();c(12),M("ngModel",e.tempDiscount),c(),M("ngModel",e.tempDiscountType)}}function rt(a,p){if(a&1){let e=h();n(0,"div",137),g("click",function(){m(e);let t=s();return u(t.closeNotesModal())}),n(1,"div",155),g("click",function(t){return m(e),u(t.stopPropagation())}),n(2,"div",139)(3,"h3")(4,"span",4),o(5,"edit_note"),i(),o(6," Order Notes"),i(),n(7,"button",140),g("click",function(){m(e);let t=s();return u(t.closeNotesModal())}),n(8,"span",4),o(9,"close"),i()()(),n(10,"div",141)(11,"textarea",161),O("ngModelChange",function(t){m(e);let l=s();return w(l.deliveryNotes,t)||(l.deliveryNotes=t),u(t)}),i()(),n(12,"div",151)(13,"button",152),g("click",function(){m(e);let t=s();return u(t.closeNotesModal())}),o(14,"Cancel"),i(),n(15,"button",153),g("click",function(){m(e);let t=s();return u(t.closeNotesModal())}),o(16,"Save"),i()()()()}if(a&2){let e=s();c(11),M("ngModel",e.deliveryNotes)}}function ot(a,p){if(a&1&&(n(0,"div",171)(1,"span",172),o(2),i(),n(3,"span",173),o(4),i()()),a&2){let e=s(2);c(2),f(e.cart[e.quantityModalIndex].product.name),c(2),x("Max: ",e.quantityModalMax," in stock")}}function at(a,p){if(a&1){let e=h();n(0,"button",174),g("click",function(){let t=m(e).$implicit,l=s(2);return u(l.setQuickQuantity(t))}),o(1),i()}if(a&2){let e=p.$implicit,r=s(2);k("active",r.quantityModalValue===e),d("disabled",e>r.quantityModalMax),c(),x(" ",e," ")}}function ct(a,p){if(a&1&&(n(0,"p",175)(1,"span",4),o(2,"warning"),i(),o(3),i()),a&2){let e=s(2);c(3),x(" Exceeds available stock. Will be set to ",e.quantityModalMax,". ")}}function lt(a,p){if(a&1){let e=h();n(0,"div",137),g("click",function(){m(e);let t=s();return u(t.closeQuantityModal())}),n(1,"div",162),g("click",function(t){return m(e),u(t.stopPropagation())}),n(2,"div",139)(3,"h3")(4,"span",4),o(5,"pin"),i(),o(6," Set Quantity"),i(),n(7,"button",140),g("click",function(){m(e);let t=s();return u(t.closeQuantityModal())}),n(8,"span",4),o(9,"close"),i()()(),n(10,"div",141),_(11,ot,5,2,"div",163),n(12,"div",164)(13,"button",165),g("click",function(){m(e);let t=s();return u(t.decrementModalQty())}),n(14,"span",4),o(15,"remove"),i()(),n(16,"input",166),O("ngModelChange",function(t){m(e);let l=s();return w(l.quantityModalValue,t)||(l.quantityModalValue=t),u(t)}),i(),n(17,"button",165),g("click",function(){m(e);let t=s();return u(t.incrementModalQty())}),n(18,"span",4),o(19,"add"),i()()(),n(20,"div",167),_(21,at,2,4,"button",168),n(22,"button",169),g("click",function(){m(e);let t=s();return u(t.setQuickQuantity(t.quantityModalMax))}),o(23," MAX "),i()(),_(24,ct,4,1,"p",170),i(),n(25,"div",151)(26,"button",152),g("click",function(){m(e);let t=s();return u(t.closeQuantityModal())}),o(27,"Cancel"),i(),n(28,"button",153),g("click",function(){m(e);let t=s();return u(t.applyQuantity())}),o(29,"Apply"),i()()()()}if(a&2){let e=s();c(11),d("ngIf",e.cart[e.quantityModalIndex]),c(2),d("disabled",e.quantityModalValue<=1),c(3),M("ngModel",e.quantityModalValue),d("max",e.quantityModalMax),c(),d("disabled",e.quantityModalValue>=e.quantityModalMax),c(4),d("ngForOf",U(9,xe)),c(),k("active",e.quantityModalValue===e.quantityModalMax),c(2),d("ngIf",e.quantityModalValue>e.quantityModalMax)}}function st(a,p){a&1&&(n(0,"span",4),o(1,"bluetooth_connected"),i())}function dt(a,p){a&1&&(n(0,"span",4),o(1,"bluetooth_searching"),i())}function pt(a,p){a&1&&(n(0,"span",4),o(1,"bluetooth_disabled"),i())}function mt(a,p){a&1&&(n(0,"p",185),o(1,"Connected"),i())}function ut(a,p){a&1&&(n(0,"p",185),o(1,"Connecting..."),i())}function gt(a,p){a&1&&(n(0,"p",185),o(1,"Not Connected"),i())}function _t(a,p){if(a&1&&(n(0,"p",186),o(1),y(2,"async"),i()),a&2){let e=s(2);c(),f(S(2,1,e.printerName$))}}function vt(a,p){if(a&1){let e=h();n(0,"div",187)(1,"button",188),g("click",function(){m(e);let t=s(2);return u(t.connectPrinter())}),n(2,"span",4),o(3,"bluetooth"),i(),o(4," Connect Printer "),i(),n(5,"p",189),o(6,"Make sure your Bluetooth printer is turned on and in pairing mode."),i()()}}function ft(a,p){if(a&1){let e=h();n(0,"div",187)(1,"button",190),g("click",function(){m(e);let t=s(2);return u(t.printTestPage())}),n(2,"span",4),o(3,"receipt_long"),i(),o(4," Print Test Page "),i(),n(5,"button",190),g("click",function(){m(e);let t=s(2);return u(t.printReceipt())}),n(6,"span",4),o(7,"print"),i(),o(8," Reprint Last Receipt "),i(),n(9,"button",191),g("click",function(){m(e);let t=s(2);return u(t.disconnectPrinter())}),n(10,"span",4),o(11,"bluetooth_disabled"),i(),o(12," Disconnect "),i()()}if(a&2){let e=s(2);c(),d("disabled",e.isPrinting),c(4),d("disabled",e.isPrinting||!e.lastReceiptData)}}function xt(a,p){if(a&1){let e=h();n(0,"div",192)(1,"button",193),g("click",function(){m(e);let t=s(2);return u(t.forgetPrinter())}),n(2,"span",4),o(3,"delete_outline"),i(),o(4," Forget This Printer "),i()()}}function Ct(a,p){if(a&1){let e=h();n(0,"div",137),g("click",function(){m(e);let t=s();return u(t.closePrintModal())}),n(1,"div",176),g("click",function(t){return m(e),u(t.stopPropagation())}),n(2,"div",139)(3,"h4")(4,"span",4),o(5,"print"),i(),o(6," Bluetooth Printer "),i(),n(7,"button",177),g("click",function(){m(e);let t=s();return u(t.closePrintModal())}),n(8,"span",4),o(9,"close"),i()()(),n(10,"div",141)(11,"div",178),y(12,"async"),y(13,"async"),n(14,"div",179),_(15,st,2,0,"span",75),y(16,"async"),_(17,dt,2,0,"span",75),y(18,"async"),_(19,pt,2,0,"span",75),y(20,"async"),i(),n(21,"div",180),_(22,mt,2,0,"p",181),y(23,"async"),_(24,ut,2,0,"p",181),y(25,"async"),_(26,gt,2,0,"p",181),y(27,"async"),_(28,_t,3,3,"p",182),y(29,"async"),i()(),_(30,vt,7,0,"div",183),y(31,"async"),_(32,ft,13,2,"div",183),y(33,"async"),_(34,xt,5,0,"div",184),y(35,"async"),i()()()}if(a&2){let e=s();c(11),k("connected",S(12,14,e.printerStatus$)==="connected")("connecting",S(13,16,e.printerStatus$)==="connecting"),c(4),d("ngIf",S(16,18,e.printerStatus$)==="connected"),c(2),d("ngIf",S(18,20,e.printerStatus$)==="connecting"),c(2),d("ngIf",S(20,22,e.printerStatus$)==="disconnected"),c(3),d("ngIf",S(23,24,e.printerStatus$)==="connected"),c(2),d("ngIf",S(25,26,e.printerStatus$)==="connecting"),c(2),d("ngIf",S(27,28,e.printerStatus$)==="disconnected"),c(2),d("ngIf",S(29,30,e.printerName$)),c(2),d("ngIf",S(31,32,e.printerStatus$)==="disconnected"),c(2),d("ngIf",S(33,34,e.printerStatus$)==="connected"),c(2),d("ngIf",S(35,36,e.printerName$))}}function ht(a,p){if(a&1&&(n(0,"p",215),o(1),i()),a&2){let e=s(3);c(),f(e.lastReceiptData.storeAddress)}}function yt(a,p){if(a&1&&(n(0,"p",216),o(1),i()),a&2){let e=s(3);c(),x("Tel: ",e.lastReceiptData.storePhone,"")}}function Pt(a,p){if(a&1&&(n(0,"p")(1,"strong"),o(2,"Customer:"),i(),o(3),i()),a&2){let e=s(3);c(3),x(" ",e.lastReceiptData.customerName,"")}}function bt(a,p){if(a&1&&(n(0,"p")(1,"strong"),o(2,"Delivery:"),i(),o(3),y(4,"date"),i()),a&2){let e=s(3);c(3),x(" ",V(4,1,e.lastReceiptData.deliveryDate,"short"),"")}}function Mt(a,p){if(a&1&&(n(0,"span"),o(1),i()),a&2){let e=s(2).$implicit;c(),x("Discount: ",e.discount,"%")}}function wt(a,p){if(a&1&&(n(0,"span"),o(1),i()),a&2){let e=s(2).$implicit,r=s(3);c(),x("Discount: -",r.formatCurrency(e.discount),"")}}function Ot(a,p){if(a&1&&(n(0,"div",221),_(1,Mt,2,1,"span",206)(2,wt,2,1,"span",206),i()),a&2){let e=s().$implicit;c(),d("ngIf",e.discountType==="percent"),c(),d("ngIf",e.discountType==="amount")}}function St(a,p){if(a&1&&(n(0,"div",217)(1,"div",218),o(2),i(),n(3,"div",219)(4,"span"),o(5),i(),n(6,"span"),o(7),i()(),_(8,Ot,3,2,"div",220),i()),a&2){let e=p.$implicit,r=s(3);c(2),f(e.name),c(3),R("",e.quantity," x ",r.formatCurrency(e.price),""),c(2),f(r.formatCurrency(e.total)),c(),d("ngIf",e.discount&&e.discount>0)}}function kt(a,p){if(a&1&&(n(0,"div",212)(1,"span"),o(2,"Total Discount"),i(),n(3,"span"),o(4),i()()),a&2){let e=s(3);c(4),x("-",e.formatCurrency(e.lastReceiptData.totalDiscount),"")}}function Et(a,p){if(a&1&&(n(0,"div",222)(1,"div",204),o(2,"--------------------------------"),i(),n(3,"p")(4,"strong"),o(5,"Notes:"),i(),o(6),i()()),a&2){let e=s(3);c(6),x(" ",e.lastReceiptData.notes,"")}}function Tt(a,p){if(a&1&&(n(0,"div",199)(1,"div",200)(2,"h2",201),o(3),i(),_(4,ht,2,1,"p",202)(5,yt,2,1,"p",203),i(),n(6,"div",204),o(7,"================================"),i(),n(8,"div",205)(9,"p")(10,"strong"),o(11,"Order:"),i(),o(12),i(),n(13,"p")(14,"strong"),o(15,"Date:"),i(),o(16),y(17,"date"),i(),_(18,Pt,4,1,"p",206)(19,bt,5,4,"p",206),i(),n(20,"div",204),o(21,"--------------------------------"),i(),n(22,"div",207),_(23,St,9,5,"div",208),i(),n(24,"div",204),o(25,"--------------------------------"),i(),n(26,"div",209),_(27,kt,5,1,"div",210),n(28,"div",211)(29,"span"),o(30,"TOTAL"),i(),n(31,"span"),o(32),i()(),n(33,"div",212)(34,"span"),o(35,"Cash"),i(),n(36,"span"),o(37),i()(),n(38,"div",212)(39,"span"),o(40,"Change"),i(),n(41,"span"),o(42),i()()(),_(43,Et,7,1,"div",213),n(44,"div",204),o(45,"================================"),i(),n(46,"div",214)(47,"p"),o(48,"Thank you for your purchase!"),i(),n(49,"p"),o(50,"Please come again"),i()()()),a&2){let e=s(2);c(3),f(e.lastReceiptData.storeName),c(),d("ngIf",e.lastReceiptData.storeAddress),c(),d("ngIf",e.lastReceiptData.storePhone),c(7),x(" ",e.lastReceiptData.orderId,""),c(4),x(" ",V(17,13,e.lastReceiptData.date,"short"),""),c(2),d("ngIf",e.lastReceiptData.customerName),c(),d("ngIf",e.lastReceiptData.deliveryDate),c(4),d("ngForOf",e.lastReceiptData.items),c(4),d("ngIf",e.lastReceiptData.totalDiscount>0),c(5),f(e.formatCurrency(e.lastReceiptData.total)),c(5),f(e.formatCurrency(e.lastReceiptData.cashReceived)),c(5),f(e.formatCurrency(e.lastReceiptData.change)),c(),d("ngIf",e.lastReceiptData.notes)}}function Dt(a,p){if(a&1){let e=h();n(0,"div",137),g("click",function(){m(e);let t=s();return u(t.closeReceiptPreview())}),n(1,"div",194),g("click",function(t){return m(e),u(t.stopPropagation())}),n(2,"div",139)(3,"h4")(4,"span",4),o(5,"receipt_long"),i(),o(6," Receipt Preview "),i(),n(7,"button",177),g("click",function(){m(e);let t=s();return u(t.closeReceiptPreview())}),n(8,"span",4),o(9,"close"),i()()(),n(10,"div",195),_(11,Tt,51,16,"div",196),i(),n(12,"div",197)(13,"button",152),g("click",function(){m(e);let t=s();return u(t.closeReceiptPreview())}),o(14,"Close"),i(),n(15,"button",198),g("click",function(){m(e);let t=s();return u(t.printFromPreview())}),n(16,"span",4),o(17,"print"),i(),o(18),y(19,"async"),i()()()()}if(a&2){let e=s();c(11),d("ngIf",e.lastReceiptData),c(4),d("disabled",e.isPrinting),c(3),x(" ",S(19,3,e.printerStatus$)==="connected"?"Print Receipt":"Connect & Print"," ")}}var Ht=(()=>{class a{togglePending(){this.isPendingCollapsed=!this.isPendingCollapsed}onCashInput(e){this.cashDisplayValue=e;let r=e.replace(/[^0-9.]/g,"");this.cashReceived=parseFloat(r),isNaN(this.cashReceived)&&(this.cashReceived=0)}formatCashOnBlur(){this.cashReceived!==0?this.cashDisplayValue=this.cashReceived.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):this.cashDisplayValue=""}unformatCashOnFocus(){this.cashReceived!==0?this.cashDisplayValue=this.cashReceived.toString():this.cashDisplayValue=""}constructor(e,r,t,l,v,C){this.inventoryService=e,this.customerService=r,this.dialogService=t,this.printService=l,this.storeService=v,this.router=C,this.allProducts=this.inventoryService.products,this.customers=this.customerService.customers,this.sales=this.inventoryService.sales,this.categoriesSignal=this.inventoryService.categories,this.stores=this.storeService.stores,this.products=N(()=>this.allProducts().filter(D=>D.quantity>0)),this.pendingSales=N(()=>this.sales().filter(D=>D.pending===!0)),this.allGroupedSales=[],this.isPendingCollapsed=!1,this.categories=N(()=>this.categoriesSignal().map(D=>D.name).sort()),this.categoryFilter="",this.isPendingPanelOpen=!1,this.isDeliveryModalOpen=!1,this.isDiscountModalOpen=!1,this.isNotesModalOpen=!1,this.orderNumber=1e3+Math.floor(Math.random()*9e3),this.currentDate=new Date,this.currentTime=new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),this.tempDiscount=0,this.tempDiscountType="amount",this.initialPendingOpen=!1,this.subscriptions=new W,this.selectedProductId="",this.selectedCustomerId="",this.quantity=1,this.cashReceived=0,this.discount=0,this.discountType="amount",this.errorMessage="",this.cart=[],this.deliveryDate="",this.deliveryTime="",this.deliveryNotes="",this.deliveryFee=0,this.serviceFee=0,this.minDate="",this.deliveryFilterDate="",this.statusFilter="all",this.isEditModalOpen=!1,this.editingSale=null,this.editDeliveryDate="",this.editDeliveryTime="",this.editDeliveryNotes="",this.isQuantityModalOpen=!1,this.quantityModalIndex=-1,this.quantityModalValue=1,this.quantityModalMax=1,this.pendingPage=1,this.pendingPageSize=5,this.pendingPageSizeOptions=[5,10,20,50],this.alarmInterval=null,this.checkInterval=null,this.audioCtx=null,this.audioUnlocked=!1,this.printerStatus$=this.printService.connectionStatus$,this.printerName$=this.printService.deviceName$,this.isPrintModalOpen=!1,this.isPrinting=!1,this.lastReceiptData=null,this.isReceiptPreviewOpen=!1,this.activeStore=null,this.cashDisplayValue="";let P=new Date,E=P.getFullYear(),b=String(P.getMonth()+1).padStart(2,"0"),T=String(P.getDate()).padStart(2,"0");this.minDate=`${E}-${b}-${T}`,this.deliveryDate="",this.deliveryTime="",Y(()=>{this.sales()&&(this.updateGroupedSales(),this.checkInterval||this.startAlarmChecks())})}ngOnInit(){let e=history.state;(this.initialPendingOpen||e&&e.initialPendingOpen)&&(this.isPendingPanelOpen=!0),this.customerService.loadCustomers();let r=this.storeService.getActiveStoreId();r&&(this.activeStore=this.stores().find(t=>t.id===r)),this.discount=0}ngOnDestroy(){this.subscriptions.unsubscribe(),this.stopAlarm(),this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null),this.audioCtx&&this.audioCtx.close().catch(()=>{})}onUserInteraction(){this.unlockAudioContext()}unlockAudioContext(){if(this.audioUnlocked)return;this.audioCtx||(this.audioCtx=new(window.AudioContext||window.webkitAudioContext));let e=this.audioCtx;if(e){e.state==="suspended"&&e.resume().catch(()=>{});try{let r=e.createBuffer(1,1,22050),t=e.createBufferSource();t.buffer=r,t.connect(e.destination),t.start(0),this.audioUnlocked=!0}catch{}}}startAlarmChecks(){this.checkInterval=setInterval(()=>this.checkPendingDeliveryAlarms(),60*60*1e3),this.checkPendingDeliveryAlarms()}get filteredPendingSales(){let e=this.pendingSales();return this.statusFilter==="reservation"&&(e=e.filter(r=>r.reservationStatus==="pending_confirmation")),this.deliveryFilterDate&&(e=e.filter(r=>{if(!r.deliveryDate)return!1;let t=new Date(r.deliveryDate),l=t.getFullYear(),v=String(t.getMonth()+1).padStart(2,"0"),C=String(t.getDate()).padStart(2,"0");return`${l}-${v}-${C}`===this.deliveryFilterDate})),e.slice().sort((r,t)=>{let l=r.reservationStatus==="pending_confirmation",v=t.reservationStatus==="pending_confirmation";if(l&&!v)return-1;if(!l&&v)return 1;let C=r.deliveryDate?new Date(r.deliveryDate).getTime():1/0,P=t.deliveryDate?new Date(t.deliveryDate).getTime():1/0;return C-P})}checkPendingDeliveryAlarms(){let e=new Date,r=[];this.pendingSales().forEach(t=>{if(!t.deliveryDate)return;let v=new Date(t.deliveryDate).getTime()-e.getTime(),C=Math.floor(v/(1e3*60*60*24));(C===1||C===2||C<0)&&r.push({sale:t,days:C})}),r.length>0&&this.triggerBatchAlarm(r)}triggerBatchAlarm(e){if(this.alarmInterval)return;let r="";if(e.length===1){let t=e[0],v=new Date(t.sale.deliveryDate).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"});t.days<0?r=`\u26A0\uFE0F OVERDUE: Delivery for "${t.sale.productName}" was due on ${v}.`:t.days===0?r=`\u26A0\uFE0F TODAY: Delivery for "${t.sale.productName}" is due today!`:r=`\u26A0\uFE0F UPCOMING: Delivery for "${t.sale.productName}" is due in ${t.days} day(s) (${v}).`}else r=`\u26A0\uFE0F There are ${e.length} deliveries due soon or overdue. Please check the Pending Deliveries list.`;this.playLoopingAlarm(),this.dialogService.alert(r,"Delivery Reminder","warning").subscribe(()=>{this.stopAlarm()})}playLoopingAlarm(){this.stopAlarm(),this.playBeep(),this.alarmInterval=setInterval(()=>{this.playBeep()},2e3)}stopAlarm(){this.alarmInterval&&(clearInterval(this.alarmInterval),this.alarmInterval=null)}playBeep(){try{this.audioCtx||(this.audioCtx=new(window.AudioContext||window.webkitAudioContext));let e=this.audioCtx;if(e.state==="suspended")return;let r=e.createOscillator(),t=e.createOscillator(),l=e.createGain();r.type="sine",t.type="sine",r.frequency.setValueAtTime(523.25,e.currentTime),t.frequency.setValueAtTime(659.25,e.currentTime),r.connect(l),t.connect(l),l.connect(e.destination),l.gain.setValueAtTime(0,e.currentTime),l.gain.linearRampToValueAtTime(.15,e.currentTime+.05),l.gain.linearRampToValueAtTime(.15,e.currentTime+.4),l.gain.exponentialRampToValueAtTime(.01,e.currentTime+.8),r.start(e.currentTime),t.start(e.currentTime),r.stop(e.currentTime+.8),t.stop(e.currentTime+.8)}catch(e){console.error("Audio alarm failed",e)}}get selectedProduct(){return this.products().find(e=>e.id===this.selectedProductId)}get selectedCustomer(){return this.customers().find(e=>e.id===this.selectedCustomerId)}getCustomerById(e){if(e)return this.customers().find(r=>r.id===e)}get maxQuantity(){return this.selectedProduct?.quantity||0}onProductChange(){this.quantity=1,this.errorMessage="",this.discount=0}addToCart(){if(this.errorMessage="",!this.selectedProduct){this.errorMessage="Please select a product";return}if(this.quantity<1||this.quantity>this.maxQuantity){this.errorMessage=`Quantity must be between 1 and ${this.maxQuantity}`;return}let e=this.cart.filter(t=>t.product.id===this.selectedProduct.id).reduce((t,l)=>t+l.quantity,0);if(e+this.quantity>this.maxQuantity){this.errorMessage=`Cannot add more. Total in cart (${e}) + new (${this.quantity}) exceeds stock (${this.maxQuantity})`;return}let r=this.selectedProduct.price*this.quantity;this.discount>0&&(this.discountType==="percent"?r=r-r*(this.discount/100):r=r-this.discount),r=Math.max(0,Math.round(r*100)/100),this.cart.push({product:this.selectedProduct,quantity:this.quantity,discount:this.discount,discountType:this.discountType,total:r}),this.quantity=1,this.discount=0,this.discountType="amount",this.selectedProductId=""}removeFromCart(e){this.cart.splice(e,1)}get subtotal(){return this.cart.reduce((e,r)=>e+r.total,0)}get total(){return this.subtotal+this.deliveryFee+this.serviceFee}get totalCost(){return this.cart.reduce((e,r)=>{let t=r.product.cost||0;return e+t*r.quantity},0)}get change(){return this.cashReceived-this.total}isValid(){return this.cart.length>0&&this.cashReceived>=this.total}updateGroupedSales(){let e=new Map,r=[];this.filteredPendingSales.forEach(l=>{l.orderId?(e.has(l.orderId)||e.set(l.orderId,[]),e.get(l.orderId).push(l)):r.push(l)});let t=[];e.forEach((l,v)=>{let C=l[0];t.push({isGroup:!0,orderId:v,sales:l,total:l.reduce((P,E)=>P+E.total,0),customerName:this.getCustomerById(C.customerId)?.name||"Walk-in",customer:this.getCustomerById(C.customerId),deliveryDate:C.deliveryDate,timestamp:C.timestamp,status:C.reservationStatus,productNames:l.map(P=>P.productName).join(", "),deliveryNotes:C.deliveryNotes,quantityTotal:l.reduce((P,E)=>P+E.quantitySold,0),discount:C.discount,discountType:C.discountType,cashReceived:C.cashReceived,change:C.change})}),r.forEach(l=>{t.push({isGroup:!1,id:l.id,sales:[l],total:l.total,customerName:this.getCustomerById(l.customerId)?.name||"Walk-in",customer:this.getCustomerById(l.customerId),deliveryDate:l.deliveryDate,timestamp:l.timestamp,status:l.reservationStatus,productNames:l.productName,deliveryNotes:l.deliveryNotes,quantityTotal:l.quantitySold,discount:l.discount,discountType:l.discountType,cashReceived:l.cashReceived,change:l.change})}),this.allGroupedSales=t.sort((l,v)=>{let C=l.status==="pending_confirmation",P=v.status==="pending_confirmation";if(C&&!P)return-1;if(!C&&P)return 1;let E=l.deliveryDate?new Date(l.deliveryDate).getTime():1/0,b=v.deliveryDate?new Date(v.deliveryDate).getTime():1/0;return E-b}),this.pendingPage>this.pendingTotalPages&&this.pendingPage>1&&(this.pendingPage=1)}get paginatedGroupedPendingSales(){let e=(this.pendingPage-1)*this.pendingPageSize;return this.allGroupedSales.slice(e,e+this.pendingPageSize)}get pendingTotalPages(){return Math.ceil(this.allGroupedSales.length/this.pendingPageSize)}nextPendingPage(){this.pendingPage<this.pendingTotalPages&&this.pendingPage++}prevPendingPage(){this.pendingPage>1&&this.pendingPage--}goToPendingPage(e){this.pendingPage=e}getPendingPageNumbers(){return Array(this.pendingTotalPages).fill(0).map((e,r)=>r+1)}clearFilter(){this.deliveryFilterDate="",this.statusFilter="all",this.pendingPage=1,this.updateGroupedSales()}checkout(){if(this.errorMessage="",this.cart.length===0){this.errorMessage="Cart is empty";return}if(this.cashReceived<this.total){this.errorMessage="Insufficient cash received";return}let e=this.cashReceived-this.total,r="ORD-"+Date.now()+"-"+Math.floor(Math.random()*1e3),t=[...this.cart],l=this.cashReceived,v=this.total,C=this.selectedCustomer?.name,P;this.deliveryDate&&(this.deliveryTime?P=new Date(`${this.deliveryDate}T${this.deliveryTime}`):P=new Date(this.deliveryDate)),console.log("[POS Checkout] Delivery Date:",this.deliveryDate),console.log("[POS Checkout] Will be PENDING:",!!P);let E=this.cart.map((b,T)=>{let D=b.total;return T===0&&(D+=e),this.inventoryService.recordSale(b.product.id,b.quantity,D,P,this.deliveryNotes||void 0,this.selectedCustomerId||void 0,b.discount,b.discountType,r)});$(E).subscribe({next:()=>{this.lastReceiptData={storeName:this.activeStore?.name||"JJM Inventory",storeAddress:this.activeStore?.address||"",storePhone:this.activeStore?.phoneNumber||"",orderId:r,date:new Date,items:t.map(b=>({name:b.product.name,quantity:b.quantity,price:b.product.price,discount:b.discount,discountType:b.discountType,total:b.total})),subtotal:v,totalDiscount:t.reduce((b,T)=>T.discountType==="percent"?b+T.product.price*T.quantity*T.discount/100:b+T.discount,0),total:v,cashReceived:l,change:e,customerName:C,deliveryDate:P,notes:this.deliveryNotes},this.isReceiptPreviewOpen=!0,this.cart=[],this.cashReceived=0,this.cashDisplayValue="",this.deliveryDate="",this.deliveryTime="",this.deliveryNotes="",this.deliveryFee=0,this.serviceFee=0,this.selectedCustomerId="",this.errorMessage="",this.dialogService.success("Sale completed successfully!","Checkout Complete"),setTimeout(()=>{this.updateGroupedSales()},500)},error:b=>{this.errorMessage=b.message||"Error processing sales"}})}connectPrinter(){return q(this,null,function*(){try{yield this.printService.connectPrinter(),this.dialogService.success("Printer connected successfully!","Bluetooth Printer")}catch(e){this.dialogService.error(e.message||"Failed to connect to printer","Connection Error")}})}disconnectPrinter(){this.printService.disconnectPrinter()}forgetPrinter(){this.printService.forgetPrinter()}printReceipt(){return q(this,null,function*(){if(!this.lastReceiptData){this.dialogService.warning("No receipt data available","Print Error");return}if(!this.printService.isConnected()){this.dialogService.warning("Printer not connected. Please connect a Bluetooth printer first.","Printer Not Connected");return}this.isPrinting=!0;try{yield this.printService.printReceipt(this.lastReceiptData),this.dialogService.success("Receipt printed successfully!","Print Complete")}catch(e){this.dialogService.error(e.message||"Failed to print receipt","Print Error")}finally{this.isPrinting=!1}})}printTestPage(){return q(this,null,function*(){if(!this.printService.isConnected()){this.dialogService.warning("Printer not connected","Print Error");return}this.isPrinting=!0;try{yield this.printService.printTestPage(),this.dialogService.success("Test page printed!","Print Complete")}catch(e){this.dialogService.error(e.message||"Failed to print test page","Print Error")}finally{this.isPrinting=!1}})}openPrintModal(){this.isPrintModalOpen=!0}closePrintModal(){this.isPrintModalOpen=!1}closeReceiptPreview(){this.isReceiptPreviewOpen=!1}openReceiptPreview(){if(this.cart.length>0){let e=this.selectedCustomer?.name,r;this.deliveryDate&&(this.deliveryTime?r=new Date(`${this.deliveryDate}T${this.deliveryTime}`):r=new Date(this.deliveryDate)),this.lastReceiptData={storeName:this.activeStore?.name||"JJM Inventory",storeAddress:this.activeStore?.address||"",storePhone:this.activeStore?.phoneNumber||"",orderId:"(Preview)",date:new Date,items:this.cart.map(t=>({name:t.product.name,quantity:t.quantity,price:t.product.price,discount:t.discount,discountType:t.discountType,total:t.total})),subtotal:this.total,totalDiscount:this.cart.reduce((t,l)=>l.discountType==="percent"?t+l.product.price*l.quantity*l.discount/100:t+l.discount,0),total:this.total,cashReceived:this.cashReceived||0,change:Math.max(0,(this.cashReceived||0)-this.total),customerName:e,deliveryDate:r,notes:this.deliveryNotes},this.isReceiptPreviewOpen=!0}else this.lastReceiptData?this.isReceiptPreviewOpen=!0:this.dialogService.info("Add items to cart to preview the receipt.","Cart Empty")}printFromPreview(){return q(this,null,function*(){if(!this.printService.isConnected()){this.isReceiptPreviewOpen=!1,this.isPrintModalOpen=!0,this.dialogService.warning("Please connect a Bluetooth printer first.","Printer Not Connected");return}yield this.printReceipt(),this.isReceiptPreviewOpen=!1})}reprintOrderReceipt(e){if(!e||!e.sales||e.sales.length===0){this.dialogService.warning("No order data available","Reprint Error");return}this.lastReceiptData={storeName:this.activeStore?.name||"JJM Inventory",storeAddress:this.activeStore?.address||"",storePhone:this.activeStore?.phoneNumber||"",orderId:e.orderId||e.sales[0]?.id||"N/A",date:e.timestamp||new Date,items:e.sales.map(r=>({name:r.productName,quantity:r.quantitySold,price:r.price,discount:r.discount||0,discountType:r.discountType||"amount",total:r.total})),subtotal:e.total,totalDiscount:e.discount||0,total:e.total,cashReceived:e.cashReceived||0,change:e.change||0,customerName:e.customer?.name,deliveryDate:e.deliveryDate,notes:e.deliveryNotes},this.isReceiptPreviewOpen=!0}markAsDelivered(e){this.dialogService.confirm("Are you sure you want to mark this item as delivered?","Mark as Delivered").subscribe(r=>{r&&this.inventoryService.completePendingSale(e)})}confirmReservation(e){this.dialogService.confirm("Confirming this reservation will deduct items from inventory. Continue?","Confirm Reservation").subscribe(r=>{r&&this.inventoryService.confirmReservation(e)})}deleteReservation(e){this.dialogService.confirm("Are you sure you want to remove this reservation?","Remove Reservation").subscribe(r=>{r&&this.inventoryService.deleteSale(e.id)})}openEditModal(e){if(e){if(this.editingSale=e,this.isEditModalOpen=!0,e.deliveryDate){let r=new Date(e.deliveryDate),t=r.getFullYear(),l=String(r.getMonth()+1).padStart(2,"0"),v=String(r.getDate()).padStart(2,"0");this.editDeliveryDate=`${t}-${l}-${v}`,this.editDeliveryTime=r.toTimeString().substring(0,5)}else this.editDeliveryDate="",this.editDeliveryTime="";this.editDeliveryNotes=e.deliveryNotes||""}}closeEditModal(){this.isEditModalOpen=!1,this.editingSale=null,this.editDeliveryDate="",this.editDeliveryTime="",this.editDeliveryNotes=""}saveEdit(){if(!this.editingSale)return;let e;this.editDeliveryDate&&(this.editDeliveryTime?e=new Date(`${this.editDeliveryDate}T${this.editDeliveryTime}`):e=new Date(this.editDeliveryDate));let r=this.editingSale.orderId;if(r)this.pendingSales().filter(l=>l.orderId===r).forEach(l=>{let v=B(F({},l),{deliveryDate:e,deliveryNotes:this.editDeliveryNotes});this.inventoryService.updateSale(v)});else{let t=B(F({},this.editingSale),{deliveryDate:e,deliveryNotes:this.editDeliveryNotes});this.inventoryService.updateSale(t)}this.closeEditModal()}markGroupAsDelivered(e){!e||e.length===0||this.dialogService.confirm(`Mark ${e.length} items as delivered? This will deduct stock and complete the order.`,"Mark Group as Delivered").subscribe(r=>{r&&e.forEach(t=>this.inventoryService.completePendingSale(t.id))})}confirmGroupReservation(e){!e||e.length===0||this.dialogService.confirm(`Confirm reservation for ${e.length} items? This will deduct stock upon delivery.`,"Confirm Group Reservation").subscribe(r=>{r&&e.forEach(t=>this.inventoryService.confirmReservation(t))})}cancelGroupOrder(e){!e||e.length===0||this.dialogService.confirm(`Cancel order for ${e.length} items? This cannot be undone.`,"Cancel Order").subscribe(r=>{r&&e.forEach(t=>this.inventoryService.deleteSale(t.id))})}get filteredProducts(){return this.categoryFilter?this.products().filter(e=>e.category===this.categoryFilter):this.products()}getCategoryIcon(e){return{Lechon:"restaurant","Hollow blocks":"construction","Sand and Gravel":"landscape",Copra:"eco",Electronics:"devices",Furniture:"chair","Hot Drinks":"local_cafe","Cold Drinks":"ac_unit",Pastries:"bakery_dining",Others:"category"}[e]||"category"}isInCart(e){return this.cart.some(r=>r.product.id===e)}getCartQuantity(e){return this.cart.filter(r=>r.product.id===e).reduce((r,t)=>r+t.quantity,0)}addProductToCart(e){this.errorMessage="";let r=this.cart.findIndex(l=>l.product.id===e.id);if(r>=0){let l=this.cart[r];l.quantity<e.quantity?(l.quantity++,l.total=this.calculateItemTotal(l)):this.errorMessage=`Cannot add more. Already at max stock (${e.quantity})`;return}let t={product:e,quantity:1,discount:0,discountType:"amount",total:e.price};this.cart.push(t)}calculateItemTotal(e){let r=e.product.price*e.quantity;return e.discount>0&&(e.discountType==="percent"?r=r-r*(e.discount/100):r=r-e.discount),Math.max(0,Math.round(r*100)/100)}incrementItem(e){let r=this.cart[e];r&&r.quantity<r.product.quantity&&(r.quantity++,r.total=this.calculateItemTotal(r))}decrementItem(e){let r=this.cart[e];r&&(r.quantity>1?(r.quantity--,r.total=this.calculateItemTotal(r)):this.removeFromCart(e))}clearCart(){this.cart=[],this.cashReceived=0,this.cashDisplayValue="",this.errorMessage=""}formatCurrency(e){return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}togglePendingPanel(){this.isPendingPanelOpen=!this.isPendingPanelOpen,this.isPendingPanelOpen&&this.updateGroupedSales()}closePendingPanel(){this.isPendingPanelOpen=!1}openDeliveryModal(){this.isDeliveryModalOpen=!0}closeDeliveryModal(){this.isDeliveryModalOpen=!1}openDiscountModal(){this.tempDiscount=0,this.tempDiscountType="amount",this.isDiscountModalOpen=!0}closeDiscountModal(){this.isDiscountModalOpen=!1}applyDiscount(){if(this.cart.length>0&&this.tempDiscount>0){let e=this.tempDiscount/this.cart.length;this.cart.forEach(r=>{r.discount=e,r.discountType=this.tempDiscountType,r.total=this.calculateItemTotal(r)})}this.closeDiscountModal()}openNotesModal(){this.isNotesModalOpen=!0}closeNotesModal(){this.isNotesModalOpen=!1}clearDelivery(){this.deliveryDate="",this.deliveryTime="",this.deliveryNotes="",this.deliveryFee=0,this.serviceFee=0}openQuantityModal(e){let r=this.cart[e];r&&(this.quantityModalIndex=e,this.quantityModalValue=r.quantity,this.quantityModalMax=r.product.quantity,this.isQuantityModalOpen=!0)}closeQuantityModal(){this.isQuantityModalOpen=!1,this.quantityModalIndex=-1}applyQuantity(){if(this.quantityModalIndex<0)return;let e=this.cart[this.quantityModalIndex];if(!e)return;let r=Math.floor(this.quantityModalValue);isNaN(r)||r<1?r=1:r>this.quantityModalMax&&(r=this.quantityModalMax),e.quantity=r,e.total=this.calculateItemTotal(e),this.closeQuantityModal()}incrementModalQty(){this.quantityModalValue<this.quantityModalMax&&this.quantityModalValue++}decrementModalQty(){this.quantityModalValue>1&&this.quantityModalValue--}setQuickQuantity(e){e<=this.quantityModalMax?this.quantityModalValue=e:this.quantityModalValue=this.quantityModalMax}static{this.\u0275fac=function(r){return new(r||a)(I(ve),I(_e),I(ge),I(fe),I(ue),I(ne))}}static{this.\u0275cmp=j({type:a,selectors:[["app-pos-calculator"]],hostBindings:function(r,t){r&1&&g("click",function(){return t.onUserInteraction()},!1,z)("touchstart",function(){return t.onUserInteraction()},!1,z)("keydown",function(){return t.onUserInteraction()},!1,z)},inputs:{initialPendingOpen:"initialPendingOpen"},standalone:!0,features:[L],decls:108,vars:49,consts:[[1,"pos-container"],[1,"products-panel"],[1,"category-rail"],[1,"category-btn",3,"click"],[1,"material-icon"],[1,"category-label"],["class","category-btn",3,"active","click",4,"ngFor","ngForOf"],[1,"product-grid-wrapper"],[1,"product-grid"],["class","product-card",3,"in-cart","click",4,"ngFor","ngForOf"],["class","empty-products",4,"ngIf"],[1,"cart-panel"],[1,"cart-header"],[1,"order-info"],[1,"order-title"],[1,"order-meta"],["class","clear-btn",3,"click",4,"ngIf"],[1,"customer-select-wrapper"],[1,"customer-select",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"cart-items"],["class","cart-item",4,"ngFor","ngForOf"],["class","empty-cart",4,"ngIf"],[1,"cart-footer"],[1,"quick-actions"],[1,"action-btn",3,"click"],[1,"action-label"],[1,"printer-status-dot"],["class","pending-badge",4,"ngIf"],["class","delivery-summary",4,"ngIf"],[1,"order-summary"],[1,"summary-row"],["class","summary-row fee-row",4,"ngIf"],["class","summary-row cost-summary",4,"ngIf"],["class","summary-row profit-summary",4,"ngIf"],[1,"summary-row","total-row"],[1,"total-amount"],["class","payment-section",4,"ngIf"],[1,"main-actions"],[1,"charge-btn",3,"click","disabled"],["class","error-banner",4,"ngIf"],[1,"pending-overlay",3,"click"],[1,"pending-panel",3,"click"],[1,"pending-header"],[1,"close-pending-btn",3,"click"],[1,"pending-filters"],["type","date","placeholder","Filter by date",1,"filter-input",3,"ngModelChange","ngModel"],[1,"filter-select",3,"ngModelChange","ngModel"],["value","all"],["value","reservation"],["class","clear-filter-btn",3,"click",4,"ngIf"],[1,"pending-list"],["class","pending-order-card",3,"reservation",4,"ngFor","ngForOf"],["class","empty-pending",4,"ngIf"],["class","pending-pagination",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"product-card",3,"click"],[1,"product-image"],["class","material-icon no-image",4,"ngIf"],["class","cart-indicator",4,"ngIf"],[1,"product-info"],[1,"product-name"],[1,"product-meta"],[1,"product-price"],["class","product-cost",4,"ngIf"],[1,"product-stock"],[1,"material-icon","no-image"],[1,"cart-indicator"],[1,"product-cost"],[1,"empty-products"],[1,"clear-btn",3,"click"],[3,"value"],[1,"cart-item"],[1,"cart-item-image"],["class","material-icon",4,"ngIf"],[1,"cart-item-details"],[1,"cart-item-row"],[1,"cart-item-name"],[1,"cart-item-total"],["class","cart-item-price",4,"ngIf"],["class","cart-item-price discount-applied",4,"ngIf"],[1,"qty-controls"],[1,"qty-btn",3,"click"],["title","Click to enter quantity",1,"qty-value-btn",3,"click"],[1,"qty-btn",3,"click","disabled"],["title","Remove",1,"remove-item-btn",3,"click"],[1,"cart-item-price"],[1,"cart-item-price","discount-applied"],[1,"empty-cart"],[1,"hint"],[1,"pending-badge"],[1,"delivery-summary"],[1,"clear-delivery",3,"click"],[1,"summary-row","fee-row"],[1,"fee-label"],[1,"summary-row","cost-summary"],[1,"cost-label"],[1,"cost-value"],[1,"summary-row","profit-summary"],[1,"profit-label"],[1,"profit-value"],[1,"payment-section"],[1,"cash-input-wrapper"],[1,"cash-input-row"],[1,"currency-symbol"],["type","text","placeholder","0.00",1,"cash-input",3,"ngModelChange","blur","focus","ngModel"],[1,"change-display"],[1,"change-amount"],[1,"error-banner"],[1,"clear-filter-btn",3,"click"],[1,"pending-order-card"],[1,"order-card-header"],[1,"order-title-section"],["class","order-id",4,"ngIf"],["class","reservation-badge",4,"ngIf"],[1,"order-total"],["class","order-items-preview",4,"ngIf"],[1,"order-details"],["class","detail-row",4,"ngIf"],[1,"detail-row","payment-row"],[1,"order-actions"],["title","Reprint Receipt",1,"order-action-btn","print",3,"click"],[1,"order-action-btn","edit",3,"click"],["class","order-action-btn confirm",3,"click",4,"ngIf"],["class","order-action-btn deliver",3,"click",4,"ngIf"],[1,"order-action-btn","delete",3,"click"],[1,"order-id"],[1,"reservation-badge"],[1,"order-items-preview"],[4,"ngFor","ngForOf"],[1,"detail-row"],[1,"order-action-btn","confirm",3,"click"],[1,"order-action-btn","deliver",3,"click"],[1,"empty-pending"],[1,"pending-pagination"],[3,"click","disabled"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"modal-close",3,"click"],[1,"modal-body"],[1,"form-group"],["type","date",3,"ngModelChange","ngModel","min"],["type","time",3,"ngModelChange","ngModel"],["rows","3","placeholder","Special instructions...",3,"ngModelChange","ngModel"],[1,"fee-inputs-row"],[1,"fee-input-wrapper"],["type","number","min","0","step","10","placeholder","0",3,"ngModelChange","ngModel"],[1,"delivery-info-notice"],[1,"notice-content"],[1,"modal-actions"],[1,"btn-cancel",3,"click"],[1,"btn-save",3,"click"],["rows","3","placeholder","Notes...",3,"ngModelChange","ngModel"],[1,"modal-content","small",3,"click"],[1,"discount-input-row"],["type","number","placeholder","0","min","0",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["value","amount"],["value","percent"],["rows","4","placeholder","Add notes for this order...",3,"ngModelChange","ngModel"],[1,"modal-content","small","qty-modal",3,"click"],["class","qty-product-info",4,"ngIf"],[1,"qty-input-group"],[1,"qty-modal-btn",3,"click","disabled"],["type","number","min","1",1,"qty-input",3,"ngModelChange","ngModel","max"],[1,"qty-quick-btns"],["class","quick-qty-btn",3,"active","disabled","click",4,"ngFor","ngForOf"],[1,"quick-qty-btn","max-btn",3,"click"],["class","qty-hint",4,"ngIf"],[1,"qty-product-info"],[1,"qty-product-name"],[1,"qty-stock-info"],[1,"quick-qty-btn",3,"click","disabled"],[1,"qty-hint"],[1,"modal-card","printer-modal",3,"click"],[1,"btn-close",3,"click"],[1,"printer-status-card"],[1,"status-icon"],[1,"status-info"],["class","status-label",4,"ngIf"],["class","device-name",4,"ngIf"],["class","printer-actions",4,"ngIf"],["class","printer-footer",4,"ngIf"],[1,"status-label"],[1,"device-name"],[1,"printer-actions"],[1,"btn-connect",3,"click"],[1,"help-text"],[1,"btn-action",3,"click","disabled"],[1,"btn-disconnect",3,"click"],[1,"printer-footer"],[1,"btn-forget",3,"click"],[1,"modal-card","receipt-preview-modal",3,"click"],[1,"modal-body","receipt-preview-body"],["class","receipt-paper",4,"ngIf"],[1,"modal-actions","receipt-actions"],[1,"btn-print",3,"click","disabled"],[1,"receipt-paper"],[1,"receipt-header"],[1,"store-name"],["class","store-address",4,"ngIf"],["class","store-phone",4,"ngIf"],[1,"receipt-divider"],[1,"receipt-order-info"],[4,"ngIf"],[1,"receipt-items"],["class","receipt-item",4,"ngFor","ngForOf"],[1,"receipt-totals"],["class","total-row",4,"ngIf"],[1,"total-row","grand-total"],[1,"total-row"],["class","receipt-notes",4,"ngIf"],[1,"receipt-footer"],[1,"store-address"],[1,"store-phone"],[1,"receipt-item"],[1,"item-name"],[1,"item-detail"],["class","item-discount",4,"ngIf"],[1,"item-discount"],[1,"receipt-notes"]],template:function(r,t){r&1&&(n(0,"div",0)(1,"main",1)(2,"div",2)(3,"button",3),g("click",function(){return t.categoryFilter=""}),n(4,"span",4),o(5,"star"),i(),n(6,"span",5),o(7,"All Items"),i()(),_(8,Ce,5,4,"button",6),i(),n(9,"div",7)(10,"div",8),_(11,be,13,10,"div",9)(12,Me,5,0,"div",10),i()()(),n(13,"aside",11)(14,"div",12)(15,"div",13)(16,"h3",14),o(17),i(),n(18,"p",15),o(19),y(20,"date"),i()(),_(21,we,2,0,"button",16),i(),n(22,"div",17)(23,"select",18),O("ngModelChange",function(v){return w(t.selectedCustomerId,v)||(t.selectedCustomerId=v),v}),n(24,"option",19),o(25,"-- Walk-in Customer --"),i(),_(26,Oe,2,2,"option",20),i()(),n(27,"div",21),_(28,Te,24,9,"div",22)(29,De,7,0,"div",23),i(),n(30,"div",24)(31,"div",25)(32,"button",26),g("click",function(){return t.openDiscountModal()}),n(33,"span",4),o(34,"percent"),i(),n(35,"span",27),o(36,"Discount"),i()(),n(37,"button",26),g("click",function(){return t.openDeliveryModal()}),n(38,"span",4),o(39,"local_shipping"),i(),n(40,"span",27),o(41,"Delivery"),i()(),n(42,"button",26),g("click",function(){return t.openReceiptPreview()}),n(43,"span",4),o(44,"receipt_long"),i(),n(45,"span",27),o(46,"Print View"),i(),Q(47,"span",28),y(48,"async"),i(),n(49,"button",26),g("click",function(){return t.togglePendingPanel()}),n(50,"span",4),o(51,"schedule"),i(),n(52,"span",27),o(53,"Pending"),i(),_(54,Ie,2,1,"span",29),i()(),_(55,Ve,8,5,"div",30),n(56,"div",31)(57,"div",32)(58,"span"),o(59,"Subtotal"),i(),n(60,"span"),o(61),i()(),_(62,qe,7,1,"div",33)(63,Re,7,1,"div",33)(64,ze,7,1,"div",34)(65,Ne,7,1,"div",35),n(66,"div",36)(67,"span"),o(68,"Total"),i(),n(69,"span",37),o(70),i()()(),_(71,Fe,13,4,"div",38),n(72,"div",39)(73,"button",40),g("click",function(){return t.checkout()}),n(74,"span"),o(75),i(),n(76,"span",4),o(77,"arrow_forward"),i()()(),_(78,Be,4,1,"div",41),i()()(),n(79,"div",42),g("click",function(){return t.closePendingPanel()}),n(80,"div",43),g("click",function(v){return v.stopPropagation()}),n(81,"div",44)(82,"h3")(83,"span",4),o(84,"schedule"),i(),o(85," Pending Deliveries "),i(),n(86,"button",45),g("click",function(){return t.closePendingPanel()}),n(87,"span",4),o(88,"close"),i()()(),n(89,"div",46)(90,"input",47),O("ngModelChange",function(v){return w(t.deliveryFilterDate,v)||(t.deliveryFilterDate=v),v}),g("ngModelChange",function(){return t.updateGroupedSales()}),i(),n(91,"select",48),O("ngModelChange",function(v){return w(t.statusFilter,v)||(t.statusFilter=v),v}),g("ngModelChange",function(){return t.updateGroupedSales()}),n(92,"option",49),o(93,"All Deliveries"),i(),n(94,"option",50),o(95,"Reservations Only"),i()(),_(96,Ae,3,0,"button",51),i(),n(97,"div",52),_(98,Ke,36,15,"div",53)(99,Ze,5,0,"div",54),i(),_(100,et,9,4,"div",55),i()(),_(101,tt,63,6,"div",56)(102,nt,28,4,"div",56)(103,it,23,2,"div",56)(104,rt,17,1,"div",56)(105,lt,30,10,"div",56)(106,Ct,36,38,"div",56)(107,Dt,20,5,"div",56)),r&2&&(c(3),k("active",!t.categoryFilter),c(5),d("ngForOf",t.categories()),c(3),d("ngForOf",t.filteredProducts),c(),d("ngIf",t.filteredProducts.length===0),c(5),x("Order #",t.orderNumber,""),c(2),R("",V(20,44,t.currentDate,"shortDate")," \u2022 ",t.currentTime,""),c(2),d("ngIf",t.cart.length>0),c(2),M("ngModel",t.selectedCustomerId),c(3),d("ngForOf",t.customers()),c(2),d("ngForOf",t.cart),c(),d("ngIf",t.cart.length===0),c(18),k("connected",S(48,47,t.printerStatus$)==="connected"),c(7),d("ngIf",t.pendingSales().length>0),c(),d("ngIf",t.deliveryDate),c(6),f(t.formatCurrency(t.subtotal)),c(),d("ngIf",t.deliveryFee>0),c(),d("ngIf",t.serviceFee>0),c(),d("ngIf",t.totalCost>0),c(),d("ngIf",t.totalCost>0),c(5),f(t.formatCurrency(t.total)),c(),d("ngIf",t.cart.length>0),c(2),d("disabled",!t.isValid()),c(2),x("CHARGE ",t.formatCurrency(t.total),""),c(3),d("ngIf",t.errorMessage),c(),k("open",t.isPendingPanelOpen),c(),k("open",t.isPendingPanelOpen),c(10),M("ngModel",t.deliveryFilterDate),c(),M("ngModel",t.statusFilter),c(5),d("ngIf",t.deliveryFilterDate||t.statusFilter!=="all"),c(2),d("ngForOf",t.paginatedGroupedPendingSales),c(),d("ngIf",t.allGroupedSales.length===0),c(),d("ngIf",t.pendingTotalPages>1),c(),d("ngIf",t.isDeliveryModalOpen),c(),d("ngIf",t.isEditModalOpen),c(),d("ngIf",t.isDiscountModalOpen),c(),d("ngIf",t.isNotesModalOpen),c(),d("ngIf",t.isQuantityModalOpen),c(),d("ngIf",t.isPrintModalOpen),c(),d("ngIf",t.isReceiptPreviewOpen))},dependencies:[te,J,X,K,ee,Z,me,le,se,ie,ae,ce,re,pe,de,oe],styles:['.pos-container[_ngcontent-%COMP%]{display:flex;height:calc(100vh - 100px);height:calc(100dvh - 100px);width:100%;overflow:hidden;background:var(--color-bg)}.material-icon[_ngcontent-%COMP%]{font-family:Material Symbols Outlined,sans-serif;font-weight:400;font-style:normal;font-size:24px;display:inline-block;line-height:1;text-transform:none;letter-spacing:normal;word-wrap:normal;white-space:nowrap;direction:ltr;-webkit-font-smoothing:antialiased;font-variation-settings:"FILL" 0,"wght" 400,"GRAD" 0,"opsz" 24}.products-panel[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;min-width:0;overflow:hidden}.category-rail[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm);padding:var(--space-md) var(--space-lg);overflow-x:auto;border-bottom:1px solid var(--color-border);background:var(--color-surface);flex-shrink:0}.category-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);padding:var(--space-sm) var(--space-md);border:none;border-radius:var(--radius-lg);background:var(--color-bg);color:var(--color-text-muted);font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s;white-space:nowrap}.category-btn[_ngcontent-%COMP%]:hover{background:#137fec1a;color:var(--color-primary)}.category-btn.active[_ngcontent-%COMP%]{background:var(--color-primary);color:#fff;box-shadow:0 4px 12px #137fec4d}.category-btn[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:20px}.category-label[_ngcontent-%COMP%]{font-weight:500}.product-grid-wrapper[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:var(--space-lg)}.product-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:var(--space-md)}@media (min-width: 1200px){.product-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(5,1fr)}}@media (min-width: 1400px){.product-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(6,1fr)}}.product-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm);padding:var(--space-sm);background:var(--color-surface);border-radius:var(--radius-xl);cursor:pointer;transition:all .2s;border:2px solid transparent;height:200px}.product-card[_ngcontent-%COMP%]:hover{border-color:var(--color-primary);transform:translateY(-2px);box-shadow:var(--shadow-md)}.product-card.in-cart[_ngcontent-%COMP%]{border-color:var(--color-primary);background:#137fec0d}.product-image[_ngcontent-%COMP%]{position:relative;width:100%;height:120px;min-height:120px;max-height:120px;border-radius:var(--radius-lg);background-color:var(--color-bg);background-size:cover;background-position:center;display:flex;align-items:center;justify-content:center;overflow:hidden;flex-shrink:0}.product-image[_ngcontent-%COMP%]   .no-image[_ngcontent-%COMP%]{font-size:36px;color:var(--color-text-muted);opacity:.5}.cart-indicator[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;background:var(--color-primary);color:#fff;width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.75rem;font-weight:700;box-shadow:0 2px 8px #0000004d}.product-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.product-name[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text);margin:0;line-height:1.3;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.product-meta[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.product-price[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;color:var(--color-primary)}.product-stock[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted)}.product-cost[_ngcontent-%COMP%]{font-size:.7rem;color:#f97316;font-weight:500;background:#f973161a;padding:2px 6px;border-radius:4px}.empty-products[_ngcontent-%COMP%]{grid-column:1 / -1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--space-2xl);color:var(--color-text-muted)}.empty-products[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:var(--space-md);opacity:.5}.cart-panel[_ngcontent-%COMP%]{width:480px;min-width:420px;flex-shrink:0;display:flex;flex-direction:column;background:var(--color-surface);border-left:1px solid var(--color-border);box-shadow:-4px 0 24px #0000001a;overflow-y:auto}.cart-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;padding:var(--space-md) var(--space-lg);border-bottom:1px solid var(--color-border);flex-shrink:0}.order-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.order-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:700;color:var(--color-text);margin:0}.order-meta[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted);margin:0}.clear-btn[_ngcontent-%COMP%]{background:transparent;border:none;color:var(--color-primary);font-size:.875rem;font-weight:600;cursor:pointer;text-transform:uppercase;letter-spacing:.05em}.clear-btn[_ngcontent-%COMP%]:hover{color:#ef4444}.customer-select-wrapper[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-lg);border-bottom:1px solid var(--color-border);flex-shrink:0}.customer-select[_ngcontent-%COMP%]{width:100%;padding:var(--space-sm) var(--space-md);border:1px solid var(--color-border);border-radius:var(--radius-lg);background:var(--color-bg);color:var(--color-text);font-size:.875rem}.cart-items[_ngcontent-%COMP%]{flex:1;min-height:180px;overflow-y:auto;padding:var(--space-xs) var(--space-md)}.cart-item[_ngcontent-%COMP%]{display:flex;gap:var(--space-md);padding:var(--space-md);border-radius:var(--radius-lg);transition:background .2s;position:relative}.cart-item[_ngcontent-%COMP%]:hover{background:var(--color-bg)}.cart-item-image[_ngcontent-%COMP%]{width:48px;height:48px;min-width:48px;border-radius:var(--radius-lg);background-color:var(--color-bg);background-size:cover;background-position:center;display:flex;align-items:center;justify-content:center}.cart-item-image[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:24px;color:var(--color-text-muted)}.cart-item-details[_ngcontent-%COMP%]{flex:1;min-width:0;display:flex;flex-direction:column;gap:4px}.cart-item-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.cart-item-name[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.cart-item-total[_ngcontent-%COMP%]{font-weight:700;color:var(--color-text)}.cart-item-price[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted)}.cart-item-price.discount-applied[_ngcontent-%COMP%]{color:#10b981}.cart-item-row.cost-row[_ngcontent-%COMP%]{margin-top:4px;padding-top:6px;border-top:1px dashed var(--color-border);font-size:.7rem}.cart-item-cost[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;color:#f97316;font-weight:500}.cart-item-cost[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:14px}.cart-item-profit[_ngcontent-%COMP%]{color:#10b981;font-weight:600;background:#10b9811a;padding:2px 8px;border-radius:9999px}.qty-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;background:var(--color-bg);border-radius:9999px;padding:2px}.qty-btn[_ngcontent-%COMP%]{width:28px;height:28px;display:flex;align-items:center;justify-content:center;border:none;background:transparent;color:var(--color-text-muted);cursor:pointer;border-radius:50%;transition:all .2s;padding:0}.qty-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--color-surface);color:var(--color-text)}.qty-btn[_ngcontent-%COMP%]:disabled{opacity:.3;cursor:not-allowed}.qty-btn[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:18px}.qty-value[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:var(--color-text);min-width:20px;text-align:center}.remove-item-btn[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;width:24px;height:24px;display:flex;align-items:center;justify-content:center;border:none;background:transparent;color:var(--color-text-muted);cursor:pointer;border-radius:50%;opacity:0;transition:all .2s;padding:0}.cart-item[_ngcontent-%COMP%]:hover   .remove-item-btn[_ngcontent-%COMP%]{opacity:1}.remove-item-btn[_ngcontent-%COMP%]:hover{background:#ef44441a;color:#ef4444}.remove-item-btn[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:18px}.empty-cart[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--space-2xl);color:var(--color-text-muted);text-align:center}.empty-cart[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:var(--space-md);opacity:.3}.empty-cart[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 var(--space-xs);font-weight:500}.empty-cart[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{font-size:.75rem}.cart-footer[_ngcontent-%COMP%]{border-top:1px solid var(--color-border);padding:var(--space-xs) var(--space-md);background:var(--color-surface);display:flex;flex-direction:column;gap:var(--space-xs);flex-shrink:0}.quick-actions[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:var(--space-xs);overflow:visible}.action-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2px;padding:var(--space-xs);border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-bg);cursor:pointer;transition:all .2s;position:relative;overflow:visible}.action-btn[_ngcontent-%COMP%]:hover{border-color:var(--color-primary);background:#137fec0d}.action-btn[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:18px;color:var(--color-primary)}.action-label[_ngcontent-%COMP%]{font-size:.55rem;font-weight:600;text-transform:uppercase;letter-spacing:.03em;color:var(--color-text-muted)}.pending-badge[_ngcontent-%COMP%]{position:absolute;top:0;right:0;transform:translate(40%,-40%);background:#ef4444;color:#fff;font-size:.625rem;font-weight:700;padding:2px 6px;border-radius:9999px;min-width:18px;text-align:center;display:flex;align-items:center;justify-content:center;z-index:10;box-shadow:0 2px 4px #0003}.delivery-summary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);padding:var(--space-sm) var(--space-md);background:#10b9811a;border-radius:var(--radius-lg);font-size:.875rem;color:#10b981}.delivery-summary[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:18px}.clear-delivery[_ngcontent-%COMP%]{margin-left:auto;background:transparent;border:none;color:inherit;cursor:pointer;font-size:.875rem}.order-summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xs);padding:var(--space-sm) 0;border-top:1px solid var(--color-border)}.summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:.875rem;color:var(--color-text-muted)}.summary-row.total-row[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--color-text);padding-top:var(--space-sm);border-top:1px solid var(--color-border)}.total-amount[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.summary-row.cost-summary[_ngcontent-%COMP%], .summary-row.profit-summary[_ngcontent-%COMP%]{font-size:.8rem;padding:4px 0}.cost-label[_ngcontent-%COMP%], .profit-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.cost-label[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%], .profit-label[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:16px}.cost-label[_ngcontent-%COMP%]{color:#f97316}.cost-value[_ngcontent-%COMP%]{color:#f97316;font-weight:600}.profit-label[_ngcontent-%COMP%]{color:#10b981}.profit-value[_ngcontent-%COMP%]{color:#10b981;font-weight:700;background:#10b9811a;padding:2px 10px;border-radius:9999px}.payment-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.cash-input-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.75rem;font-weight:500;color:var(--color-text-muted);display:block;margin-bottom:4px}.cash-input-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);border:1px solid var(--color-border);border-radius:var(--radius-lg);padding:0 var(--space-md);background:var(--color-bg)}.currency-symbol[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text-muted)}.cash-input[_ngcontent-%COMP%]{flex:1;border:none;background:transparent;padding:var(--space-sm) 0;font-size:1.125rem;font-weight:600;color:var(--color-text)}.cash-input[_ngcontent-%COMP%]:focus{outline:none}.change-display[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--space-sm) var(--space-md);background:#10b9811a;border-radius:var(--radius-lg);font-size:.875rem;color:#10b981}.change-display.negative[_ngcontent-%COMP%]{background:#ef44441a;color:#ef4444}.change-amount[_ngcontent-%COMP%]{font-weight:700;font-size:1rem}.main-actions[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm)}.charge-btn[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;gap:var(--space-sm);height:56px;background:var(--color-primary);color:#fff;border:none;border-radius:var(--radius-xl);font-size:1.125rem;font-weight:700;cursor:pointer;transition:all .2s;box-shadow:0 4px 16px #137fec4d}.charge-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--color-primary-dark);transform:translateY(-2px);box-shadow:0 6px 20px #137fec66}.charge-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.charge-btn[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:24px}.error-banner[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);padding:var(--space-sm) var(--space-md);background:#ef44441a;border-radius:var(--radius-lg);color:#ef4444;font-size:.875rem}.error-banner[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:18px}.pending-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;z-index:1000;opacity:0;pointer-events:none;transition:opacity .3s}.pending-overlay.open[_ngcontent-%COMP%]{opacity:1;pointer-events:all}.pending-panel[_ngcontent-%COMP%]{position:fixed;top:0;right:-450px;width:450px;max-width:100%;height:100%;background:var(--color-surface);box-shadow:-8px 0 32px #0003;display:flex;flex-direction:column;transition:right .3s ease;z-index:1001}.pending-panel.open[_ngcontent-%COMP%]{right:0}.pending-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--space-lg);border-bottom:1px solid var(--color-border)}.pending-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);font-size:1.125rem;font-weight:700;color:var(--color-text);margin:0}.pending-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{color:var(--color-primary)}.close-pending-btn[_ngcontent-%COMP%]{width:36px;height:36px;display:flex;align-items:center;justify-content:center;border:none;background:var(--color-bg);border-radius:var(--radius-lg);color:var(--color-text-muted);cursor:pointer;padding:0}.close-pending-btn[_ngcontent-%COMP%]:hover{background:#ef44441a;color:#ef4444}.pending-filters[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm);padding:var(--space-md) var(--space-lg);border-bottom:1px solid var(--color-border)}.filter-input[_ngcontent-%COMP%], .filter-select[_ngcontent-%COMP%]{flex:1;padding:var(--space-sm) var(--space-md);border:1px solid var(--color-border);border-radius:var(--radius-lg);background:var(--color-bg);color:var(--color-text);font-size:.875rem}.clear-filter-btn[_ngcontent-%COMP%]{width:36px;height:36px;display:flex;align-items:center;justify-content:center;border:none;background:var(--color-bg);border-radius:var(--radius-lg);color:var(--color-text-muted);cursor:pointer;padding:0}.clear-filter-btn[_ngcontent-%COMP%]:hover{background:#ef44441a;color:#ef4444}.pending-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:var(--space-md) var(--space-lg);display:flex;flex-direction:column;gap:var(--space-md)}.pending-order-card[_ngcontent-%COMP%]{background:var(--color-bg);border:1px solid var(--color-border);border-radius:var(--radius-xl);padding:var(--space-md);display:flex;flex-direction:column;gap:var(--space-sm)}.pending-order-card.reservation[_ngcontent-%COMP%]{border-color:#f97316;background:#f973160d}.order-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.order-title-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);flex-wrap:wrap}.order-id[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text)}.reservation-badge[_ngcontent-%COMP%]{font-size:.625rem;font-weight:700;padding:2px 6px;background:#f97316;color:#fff;border-radius:9999px}.order-total[_ngcontent-%COMP%]{font-weight:700;color:var(--color-primary)}.order-items-preview[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted);padding:var(--space-xs) 0}.order-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.detail-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);font-size:.75rem;color:var(--color-text-muted)}.detail-row[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:16px}.detail-row.payment-row[_ngcontent-%COMP%]{color:#10b981;font-weight:500}.order-actions[_ngcontent-%COMP%]{display:flex;gap:var(--space-xs);padding-top:var(--space-sm);border-top:1px solid var(--color-border)}.order-action-btn[_ngcontent-%COMP%]{flex:1;height:36px;display:flex;align-items:center;justify-content:center;border:none;background:var(--color-surface);border-radius:var(--radius-lg);cursor:pointer;transition:all .2s}.order-action-btn[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:20px}.order-action-btn.edit[_ngcontent-%COMP%]{color:var(--color-text-muted)}.order-action-btn.edit[_ngcontent-%COMP%]:hover{background:#3b82f61a;color:#3b82f6}.order-action-btn.confirm[_ngcontent-%COMP%]{color:#10b981}.order-action-btn.confirm[_ngcontent-%COMP%]:hover{background:#10b9811a}.order-action-btn.deliver[_ngcontent-%COMP%]{color:var(--color-primary)}.order-action-btn.deliver[_ngcontent-%COMP%]:hover{background:#137fec1a}.order-action-btn.delete[_ngcontent-%COMP%]{color:#ef4444}.order-action-btn.delete[_ngcontent-%COMP%]:hover{background:#ef44441a}.order-action-btn.print[_ngcontent-%COMP%]{color:#3b82f6}.order-action-btn.print[_ngcontent-%COMP%]:hover{background:#3b82f61a}.empty-pending[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--space-2xl);color:var(--color-text-muted);text-align:center}.empty-pending[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:48px;color:#10b981;margin-bottom:var(--space-md)}.pending-pagination[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:var(--space-md);padding:var(--space-md) var(--space-lg);border-top:1px solid var(--color-border)}.pending-pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:36px;height:36px;display:flex;align-items:center;justify-content:center;border:1px solid var(--color-border);background:var(--color-bg);border-radius:var(--radius-lg);cursor:pointer;color:var(--color-text)}.pending-pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.3;cursor:not-allowed}.pending-pagination[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-muted)}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:2000;padding:var(--space-lg)}.modal-content[_ngcontent-%COMP%]{background:var(--color-surface);border-radius:var(--radius-xl);width:100%;max-width:400px;max-height:90vh;overflow-y:auto;box-shadow:0 20px 60px #0000004d;animation:_ngcontent-%COMP%_slideUp .3s ease}.modal-content.small[_ngcontent-%COMP%]{max-width:320px}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--space-lg);border-bottom:1px solid var(--color-border)}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);font-size:1rem;font-weight:600;color:var(--color-text);margin:0}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{color:var(--color-primary)}.modal-close[_ngcontent-%COMP%]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;border:none;background:transparent;border-radius:var(--radius-lg);color:var(--color-text-muted);cursor:pointer;padding:0}.modal-close[_ngcontent-%COMP%]:hover{background:var(--color-bg);color:var(--color-text)}.modal-body[_ngcontent-%COMP%]{padding:var(--space-lg);display:flex;flex-direction:column;gap:var(--space-md)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xs)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);border:1px solid var(--color-border);border-radius:var(--radius-lg);background:var(--color-bg);color:var(--color-text);font-size:.875rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #137fec26}.discount-input-row[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm)}.discount-input-row[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:var(--space-md);border:1px solid var(--color-border);border-radius:var(--radius-lg);background:var(--color-bg);color:var(--color-text);font-size:1.25rem;font-weight:600}.discount-input-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:120px;padding:var(--space-md);border:1px solid var(--color-border);border-radius:var(--radius-lg);background:var(--color-bg);color:var(--color-text);font-size:.875rem}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:var(--space-sm);padding:var(--space-lg);border-top:1px solid var(--color-border)}.btn-cancel[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-lg);border:1px solid var(--color-border);border-radius:var(--radius-lg);background:transparent;color:var(--color-text);font-size:.875rem;font-weight:500;cursor:pointer}.btn-cancel[_ngcontent-%COMP%]:hover{background:var(--color-bg)}.btn-save[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-lg);background:var(--color-primary);color:#fff;border:none;border-radius:var(--radius-lg);font-size:.875rem;font-weight:600;cursor:pointer}.btn-save[_ngcontent-%COMP%]:hover{background:var(--color-primary-dark)}body.dark-theme[_nghost-%COMP%]   .cart-panel[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .cart-panel[_ngcontent-%COMP%], body.dark-theme[_nghost-%COMP%]   .pending-panel[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .pending-panel[_ngcontent-%COMP%], body.dark-theme[_nghost-%COMP%]   .modal-content[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .modal-content[_ngcontent-%COMP%]{background:#1e293b}body.dark-theme[_nghost-%COMP%]   .product-card[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .product-card[_ngcontent-%COMP%], body.dark-theme[_nghost-%COMP%]   .pending-order-card[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .pending-order-card[_ngcontent-%COMP%]{background:#1e293b}body.dark-theme[_nghost-%COMP%]   .category-rail[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .category-rail[_ngcontent-%COMP%]{background:#1e293b}@media (max-width: 900px){.pos-container[_ngcontent-%COMP%]{flex-direction:column;height:calc(100vh - 64px);overflow-y:auto}.products-panel[_ngcontent-%COMP%]{height:auto;min-height:300px;flex-shrink:0}.product-grid-wrapper[_ngcontent-%COMP%]{max-height:40vh}.cart-panel[_ngcontent-%COMP%]{width:100%;min-width:100%;height:auto;min-height:400px;border-left:none;border-top:1px solid var(--color-border)}.pending-panel[_ngcontent-%COMP%]{width:100%;right:-100%}}@media (max-width: 600px){.product-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:var(--space-sm)}.product-card[_ngcontent-%COMP%]{height:180px}.product-image[_ngcontent-%COMP%]{height:100px;min-height:100px;max-height:100px}.quick-actions[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.cart-header[_ngcontent-%COMP%], .cart-footer[_ngcontent-%COMP%]{padding:var(--space-md)}.category-rail[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md)}}.qty-value-btn[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:var(--color-text);min-width:28px;height:28px;padding:0 8px;text-align:center;background:transparent;border:1px dashed var(--color-border);border-radius:var(--radius-md);cursor:pointer;transition:all .2s}.qty-value-btn[_ngcontent-%COMP%]:hover{background:var(--color-primary);color:#fff;border-color:var(--color-primary);border-style:solid}.qty-modal[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg);align-items:center}.qty-product-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px;text-align:center}.qty-product-name[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text);font-size:1rem}.qty-stock-info[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted)}.qty-input-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-md);background:var(--color-bg);padding:var(--space-sm);border-radius:var(--radius-xl)}.qty-modal-btn[_ngcontent-%COMP%]{width:44px;height:44px;display:flex;align-items:center;justify-content:center;border:none;background:var(--color-surface);color:var(--color-primary);cursor:pointer;border-radius:50%;transition:all .2s;box-shadow:0 2px 8px #0000001a}.qty-modal-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--color-primary);color:#fff;transform:scale(1.1)}.qty-modal-btn[_ngcontent-%COMP%]:disabled{opacity:.3;cursor:not-allowed}.qty-modal-btn[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:24px}.qty-input[_ngcontent-%COMP%]{width:80px;height:56px;text-align:center;font-size:1.75rem;font-weight:700;color:var(--color-text);background:var(--color-surface);border:2px solid var(--color-border);border-radius:var(--radius-lg);outline:none;transition:border-color .2s}.qty-input[_ngcontent-%COMP%]:focus{border-color:var(--color-primary)}.qty-input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .qty-input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;appearance:none;margin:0}.qty-input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield;appearance:textfield}.qty-quick-btns[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm);flex-wrap:wrap;justify-content:center}.quick-qty-btn[_ngcontent-%COMP%]{min-width:48px;height:40px;padding:0 var(--space-md);border:1px solid var(--color-border);border-radius:var(--radius-lg);background:var(--color-bg);color:var(--color-text);font-weight:600;font-size:.875rem;cursor:pointer;transition:all .2s}.quick-qty-btn[_ngcontent-%COMP%]:hover:not(:disabled){border-color:var(--color-primary);background:#137fec1a;color:var(--color-primary)}.quick-qty-btn.active[_ngcontent-%COMP%]{background:var(--color-primary);color:#fff;border-color:var(--color-primary)}.quick-qty-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.quick-qty-btn.max-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff;border-color:#10b981}.quick-qty-btn.max-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#059669,#047857);border-color:#059669}.quick-qty-btn.max-btn.active[_ngcontent-%COMP%]{box-shadow:0 4px 12px #10b98166}.qty-hint[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-xs);font-size:.75rem;color:#f59e0b;margin:0}.qty-hint[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:16px}.printer-status-dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;background:#9ca3af;position:absolute;top:6px;right:6px}.printer-status-dot.connected[_ngcontent-%COMP%]{background:#10b981;box-shadow:0 0 8px #10b98180;animation:_ngcontent-%COMP%_pulse-green 2s infinite}@keyframes _ngcontent-%COMP%_pulse-green{0%,to{opacity:1}50%{opacity:.6}}.printer-modal[_ngcontent-%COMP%]{max-width:420px}.printer-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);margin:0;font-size:1.25rem;font-weight:700}.printer-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{color:var(--color-primary)}.printer-status-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-lg);padding:var(--space-lg);background:var(--color-bg);border-radius:var(--radius-xl);border:2px solid var(--color-border);margin-bottom:var(--space-xl)}.printer-status-card.connected[_ngcontent-%COMP%]{border-color:#10b981;background:#10b9810d}.printer-status-card.connecting[_ngcontent-%COMP%]{border-color:#3b82f6;background:#3b82f60d}.printer-status-card[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:50%;background:var(--color-surface);display:flex;align-items:center;justify-content:center}.printer-status-card[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:28px;color:#9ca3af}.printer-status-card.connected[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%]{background:#10b9811a}.printer-status-card.connected[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{color:#10b981}.printer-status-card.connecting[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%]{background:#3b82f61a}.printer-status-card.connecting[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{color:#3b82f6;animation:_ngcontent-%COMP%_spin 1.5s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.status-info[_ngcontent-%COMP%]   .status-label[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;margin:0 0 4px;color:var(--color-text)}.status-info[_ngcontent-%COMP%]   .device-name[_ngcontent-%COMP%]{font-size:.85rem;color:var(--color-text-muted);margin:0}.printer-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md)}.printer-actions[_ngcontent-%COMP%]   .btn-connect[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:var(--space-sm);width:100%;padding:1rem;background:linear-gradient(135deg,#3b82f6,#2563eb);color:#fff;border:none;border-radius:var(--radius-lg);font-size:1rem;font-weight:700;cursor:pointer;transition:all .3s ease}.printer-actions[_ngcontent-%COMP%]   .btn-connect[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 20px #3b82f64d}.printer-actions[_ngcontent-%COMP%]   .help-text[_ngcontent-%COMP%]{font-size:.8rem;color:var(--color-text-muted);text-align:center;margin:var(--space-sm) 0 0 0}.printer-actions[_ngcontent-%COMP%]   .btn-action[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:var(--space-sm);width:100%;padding:.85rem;background:var(--color-bg);color:var(--color-text);border:1px solid var(--color-border);border-radius:var(--radius-lg);font-size:.95rem;font-weight:600;cursor:pointer;transition:all .2s ease}.printer-actions[_ngcontent-%COMP%]   .btn-action[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--color-surface);border-color:var(--color-primary);color:var(--color-primary)}.printer-actions[_ngcontent-%COMP%]   .btn-action[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.printer-actions[_ngcontent-%COMP%]   .btn-disconnect[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:var(--space-sm);width:100%;padding:.85rem;background:transparent;color:#ef4444;border:1px solid rgba(239,68,68,.3);border-radius:var(--radius-lg);font-size:.95rem;font-weight:600;cursor:pointer;transition:all .2s ease}.printer-actions[_ngcontent-%COMP%]   .btn-disconnect[_ngcontent-%COMP%]:hover{background:#ef44441a;border-color:#ef4444}.printer-footer[_ngcontent-%COMP%]{margin-top:var(--space-xl);padding-top:var(--space-lg);border-top:1px solid var(--color-border)}.printer-footer[_ngcontent-%COMP%]   .btn-forget[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:var(--space-xs);width:100%;padding:.75rem;background:transparent;color:var(--color-text-muted);border:none;font-size:.85rem;cursor:pointer;transition:all .2s}.printer-footer[_ngcontent-%COMP%]   .btn-forget[_ngcontent-%COMP%]:hover{color:#ef4444}.printer-footer[_ngcontent-%COMP%]   .btn-forget[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:18px}.receipt-preview-modal[_ngcontent-%COMP%]{max-width:420px;max-height:90vh}.receipt-preview-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);margin:0;font-size:1.25rem;font-weight:700}.receipt-preview-modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{color:var(--color-primary)}.receipt-preview-body[_ngcontent-%COMP%]{max-height:60vh;overflow-y:auto;padding:0}.receipt-paper[_ngcontent-%COMP%]{background:#fff;color:#1f2937;padding:var(--space-xl);font-family:Courier New,Courier,monospace;font-size:.9rem;line-height:1.5;border-radius:var(--radius-lg);box-shadow:0 4px 12px #00000014;margin:var(--space-md)}.receipt-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--space-md)}.receipt-header[_ngcontent-%COMP%]   .store-name[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:700;margin:0 0 var(--space-xs) 0;color:#111827;font-family:Inter,sans-serif}.receipt-header[_ngcontent-%COMP%]   .store-address[_ngcontent-%COMP%], .receipt-header[_ngcontent-%COMP%]   .store-phone[_ngcontent-%COMP%]{font-size:.85rem;color:#6b7280;margin:2px 0}.receipt-divider[_ngcontent-%COMP%]{text-align:center;color:#9ca3af;font-size:.75rem;letter-spacing:.1em;margin:var(--space-sm) 0}.receipt-order-info[_ngcontent-%COMP%]{margin-bottom:var(--space-md)}.receipt-order-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;font-size:.85rem}.receipt-order-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#374151}.receipt-items[_ngcontent-%COMP%]{margin-bottom:var(--space-sm)}.receipt-item[_ngcontent-%COMP%]{margin-bottom:var(--space-md)}.receipt-item[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-weight:600;color:#111827;margin-bottom:2px}.receipt-item[_ngcontent-%COMP%]   .item-detail[_ngcontent-%COMP%]{display:flex;justify-content:space-between;color:#4b5563;font-size:.85rem;padding-left:var(--space-md)}.receipt-item[_ngcontent-%COMP%]   .item-discount[_ngcontent-%COMP%]{color:#10b981;font-size:.8rem;padding-left:var(--space-md);font-style:italic}.receipt-totals[_ngcontent-%COMP%]{margin-top:var(--space-md)}.receipt-totals[_ngcontent-%COMP%]   .total-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:4px 0;font-size:.9rem}.receipt-totals[_ngcontent-%COMP%]   .total-row.grand-total[_ngcontent-%COMP%]{font-weight:700;font-size:1.1rem;color:#111827;margin-top:var(--space-sm);padding-top:var(--space-sm);border-top:1px dashed #d1d5db}.receipt-notes[_ngcontent-%COMP%]{margin-top:var(--space-sm)}.receipt-notes[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem;color:#6b7280;margin:4px 0}.receipt-footer[_ngcontent-%COMP%]{text-align:center;margin-top:var(--space-md);color:#9ca3af;font-size:.85rem}.receipt-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:2px 0}.receipt-actions[_ngcontent-%COMP%]{padding:var(--space-lg);gap:var(--space-md);border-top:1px solid var(--color-border)}.receipt-actions[_ngcontent-%COMP%]   .btn-print[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:var(--space-sm);flex:1;padding:.85rem 1.5rem;background:linear-gradient(135deg,#3b82f6,#2563eb);color:#fff;border:none;border-radius:var(--radius-lg);font-size:1rem;font-weight:700;cursor:pointer;transition:all .3s ease}.receipt-actions[_ngcontent-%COMP%]   .btn-print[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 20px #3b82f64d}.receipt-actions[_ngcontent-%COMP%]   .btn-print[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.receipt-actions[_ngcontent-%COMP%]   .btn-print[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:20px}.delivery-info-notice[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:var(--space-sm);padding:var(--space-md);background:linear-gradient(135deg,#3b82f61a,#8b5cf61a);border:1px solid rgba(59,130,246,.2);border-radius:var(--radius-lg);margin-top:var(--space-md)}.delivery-info-notice[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{color:#3b82f6;font-size:20px;flex-shrink:0;margin-top:2px}.delivery-info-notice[_ngcontent-%COMP%]   .notice-content[_ngcontent-%COMP%]{font-size:.8rem;line-height:1.5;color:var(--color-text)}.delivery-info-notice[_ngcontent-%COMP%]   .notice-content[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#3b82f6}.fee-inputs-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--space-md);margin-top:var(--space-sm)}.fee-inputs-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:.8rem}.fee-inputs-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:16px;color:var(--color-primary)}.fee-input-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;background:var(--color-bg);border:1px solid var(--color-border);border-radius:var(--radius-md);padding:0 var(--space-sm);transition:all .2s}.fee-input-wrapper[_ngcontent-%COMP%]:focus-within{border-color:var(--color-primary);box-shadow:0 0 0 3px #137fec1a}.fee-input-wrapper[_ngcontent-%COMP%]   .currency-symbol[_ngcontent-%COMP%]{color:var(--color-text-muted);font-weight:600}.fee-input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:none;background:transparent;padding:var(--space-sm);font-size:.9rem;color:var(--color-text);width:100%}.fee-input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.summary-row.fee-row[_ngcontent-%COMP%]{font-size:.85rem;color:var(--color-text)}.fee-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.fee-label[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:16px;color:var(--color-primary)}']})}}return a})();export{Ht as PosCalculatorComponent};
