var tD=Object.defineProperty,nD=Object.defineProperties;var rD=Object.getOwnPropertyDescriptors;var Oy=Object.getOwnPropertySymbols;var iD=Object.prototype.hasOwnProperty,oD=Object.prototype.propertyIsEnumerable;var Ry=(n,e,t)=>e in n?tD(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,J=(n,e)=>{for(var t in e||={})iD.call(e,t)&&Ry(n,t,e[t]);if(Oy)for(var t of Oy(e))oD.call(e,t)&&Ry(n,t,e[t]);return n},ue=(n,e)=>nD(n,rD(e));var j=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{c(t.next(l))}catch(u){i(u)}},s=l=>{try{c(t.throw(l))}catch(u){i(u)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);c((t=t.apply(n,e)).next())});var ky=null;var sd=1,ad=Symbol("SIGNAL");function Se(n){let e=ky;return ky=n,e}var Fy={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function sD(n){if(!(ud(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===sd)){if(!n.producerMustRecompute(n)&&!cd(n)){n.dirty=!1,n.lastCleanEpoch=sd;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=sd}}function Vy(n){return n&&(n.nextProducerIndex=0),Se(n)}function Ly(n,e){if(Se(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(ud(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)ld(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function cd(n){Ra(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(sD(t),r!==t.version))return!0}return!1}function jy(n){if(Ra(n),ud(n))for(let e=0;e<n.producerNode.length;e++)ld(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function ld(n,e){if(aD(n),Ra(n),n.liveConsumerNode.length===1)for(let r=0;r<n.producerNode.length;r++)ld(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Ra(i),i.producerIndexOfThis[r]=e}}function ud(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Ra(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function aD(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function cD(){throw new Error}var lD=cD;function By(n){lD=n}function ge(n){return typeof n=="function"}function ka(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Fa=ka(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ss(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Pt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ge(r))try{r()}catch(o){e=o instanceof Fa?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Uy(o)}catch(s){e=e??[],s instanceof Fa?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Fa(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Uy(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ss(t,e)}remove(e){let{_finalizers:t}=this;t&&ss(t,e),e instanceof n&&e._removeParent(this)}};Pt.EMPTY=(()=>{let n=new Pt;return n.closed=!0,n})();var dd=Pt.EMPTY;function Va(n){return n instanceof Pt||n&&"closed"in n&&ge(n.remove)&&ge(n.add)&&ge(n.unsubscribe)}function Uy(n){ge(n)?n():n.unsubscribe()}var cn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Li={setTimeout(n,e,...t){let{delegate:r}=Li;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Li;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function La(n){Li.setTimeout(()=>{let{onUnhandledError:e}=cn;if(e)e(n);else throw n})}function hd(){}var $y=fd("C",void 0,void 0);function zy(n){return fd("E",void 0,n)}function Hy(n){return fd("N",n,void 0)}function fd(n,e,t){return{kind:n,value:e,error:t}}var ni=null;function ji(n){if(cn.useDeprecatedSynchronousErrorHandling){let e=!ni;if(e&&(ni={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ni;if(ni=null,t)throw r}}else n()}function qy(n){cn.useDeprecatedSynchronousErrorHandling&&ni&&(ni.errorThrown=!0,ni.error=n)}var ri=class extends Pt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Va(e)&&e.add(this)):this.destination=hD}static create(e,t,r){return new Bi(e,t,r)}next(e){this.isStopped?md(Hy(e),this):this._next(e)}error(e){this.isStopped?md(zy(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?md($y,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},uD=Function.prototype.bind;function pd(n,e){return uD.call(n,e)}var gd=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){ja(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){ja(r)}else ja(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ja(t)}}},Bi=class extends ri{constructor(e,t,r){super();let i;if(ge(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&cn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&pd(e.next,o),error:e.error&&pd(e.error,o),complete:e.complete&&pd(e.complete,o)}):i=e}this.destination=new gd(i)}};function ja(n){cn.useDeprecatedSynchronousErrorHandling?qy(n):La(n)}function dD(n){throw n}function md(n,e){let{onStoppedNotification:t}=cn;t&&Li.setTimeout(()=>t(n,e))}var hD={closed:!0,next:hd,error:dD,complete:hd};var Ui=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Gy(n){return n}function Wy(n){return n.length===0?Gy:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var je=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=pD(t)?t:new Bi(t,r,i);return ji(()=>{let{operator:s,source:c}=this;o.add(s?s.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Ky(r),new r((i,o)=>{let s=new Bi({next:c=>{try{t(c)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Ui](){return this}pipe(...t){return Wy(t)(this)}toPromise(t){return t=Ky(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function Ky(n){var e;return(e=n??cn.Promise)!==null&&e!==void 0?e:Promise}function fD(n){return n&&ge(n.next)&&ge(n.error)&&ge(n.complete)}function pD(n){return n&&n instanceof ri||fD(n)&&Va(n)}function mD(n){return ge(n?.lift)}function bt(n){return e=>{if(mD(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function wt(n,e,t,r,i){return new yd(n,e,t,r,i)}var yd=class extends ri{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(c){try{t(c)}catch(l){e.error(l)}}:super._next,this._error=i?function(c){try{i(c)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var Qy=ka(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var In=(()=>{class n extends je{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Ba(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Qy}next(t){ji(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){ji(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ji(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?dd:(this.currentObservers=null,o.push(t),new Pt(()=>{this.currentObservers=null,ss(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new je;return t.source=this,t}}return n.create=(e,t)=>new Ba(e,t),n})(),Ba=class extends In{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:dd}};var Je=class extends In{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Yy=new je(n=>n.complete());function Jy(n){return n&&ge(n.schedule)}function Xy(n){return n[n.length-1]}function Zy(n){return ge(Xy(n))?n.pop():void 0}function ev(n){return Jy(Xy(n))?n.pop():void 0}function nv(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(m){try{u(r.next(m))}catch(g){s(g)}}function l(m){try{u(r.throw(m))}catch(g){s(g)}}function u(m){m.done?o(m.value):i(m.value).then(c,l)}u((r=r.apply(n,e||[])).next())})}function tv(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ii(n){return this instanceof ii?(this.v=n,this):new ii(n)}function rv(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(C){return function(O){return Promise.resolve(O).then(C,g)}}function c(C,O){r[C]&&(i[C]=function(R){return new Promise(function(k,q){o.push([C,R,k,q])>1||l(C,R)})},O&&(i[C]=O(i[C])))}function l(C,O){try{u(r[C](O))}catch(R){b(o[0][3],R)}}function u(C){C.value instanceof ii?Promise.resolve(C.value.v).then(m,g):b(o[0][2],C)}function m(C){l("next",C)}function g(C){l("throw",C)}function b(C,O){C(O),o.shift(),o.length&&l(o[0][0],o[0][1])}}function iv(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof tv=="function"?tv(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(c,l){s=n[o](s),i(c,l,s.done,s.value)})}}function i(o,s,c,l){Promise.resolve(l).then(function(u){o({value:u,done:c})},s)}}var Ua=n=>n&&typeof n.length=="number"&&typeof n!="function";function $a(n){return ge(n?.then)}function za(n){return ge(n[Ui])}function Ha(n){return Symbol.asyncIterator&&ge(n?.[Symbol.asyncIterator])}function qa(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function gD(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ga=gD();function Wa(n){return ge(n?.[Ga])}function Ka(n){return rv(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield ii(t.read());if(i)return yield ii(void 0);yield yield ii(r)}}finally{t.releaseLock()}})}function Qa(n){return ge(n?.getReader)}function Nt(n){if(n instanceof je)return n;if(n!=null){if(za(n))return yD(n);if(Ua(n))return vD(n);if($a(n))return _D(n);if(Ha(n))return ov(n);if(Wa(n))return bD(n);if(Qa(n))return wD(n)}throw qa(n)}function yD(n){return new je(e=>{let t=n[Ui]();if(ge(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function vD(n){return new je(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function _D(n){return new je(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,La)})}function bD(n){return new je(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function ov(n){return new je(e=>{CD(n,e).catch(t=>e.error(t))})}function wD(n){return ov(Ka(n))}function CD(n,e){var t,r,i,o;return nv(this,void 0,void 0,function*(){try{for(t=iv(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Wt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Ya(n,e=0){return bt((t,r)=>{t.subscribe(wt(r,i=>Wt(r,n,()=>r.next(i),e),()=>Wt(r,n,()=>r.complete(),e),i=>Wt(r,n,()=>r.error(i),e)))})}function Ja(n,e=0){return bt((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function sv(n,e){return Nt(n).pipe(Ja(e),Ya(e))}function av(n,e){return Nt(n).pipe(Ja(e),Ya(e))}function cv(n,e){return new je(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function lv(n,e){return new je(t=>{let r;return Wt(t,e,()=>{r=n[Ga](),Wt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ge(r?.return)&&r.return()})}function Xa(n,e){if(!n)throw new Error("Iterable cannot be null");return new je(t=>{Wt(t,e,()=>{let r=n[Symbol.asyncIterator]();Wt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function uv(n,e){return Xa(Ka(n),e)}function dv(n,e){if(n!=null){if(za(n))return sv(n,e);if(Ua(n))return cv(n,e);if($a(n))return av(n,e);if(Ha(n))return Xa(n,e);if(Wa(n))return lv(n,e);if(Qa(n))return uv(n,e)}throw qa(n)}function Dn(n,e){return e?dv(n,e):Nt(n)}function Za(...n){let e=ev(n);return Dn(n,e)}function lt(n,e){return bt((t,r)=>{let i=0;t.subscribe(wt(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:ED}=Array;function ID(n,e){return ED(e)?n(...e):n(e)}function hv(n){return lt(e=>ID(n,e))}var{isArray:DD}=Array,{getPrototypeOf:xD,prototype:SD,keys:TD}=Object;function fv(n){if(n.length===1){let e=n[0];if(DD(e))return{args:e,keys:null};if(MD(e)){let t=TD(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function MD(n){return n&&typeof n=="object"&&xD(n)===SD}function pv(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function mv(n,e,t,r,i,o,s,c){let l=[],u=0,m=0,g=!1,b=()=>{g&&!l.length&&!u&&e.complete()},C=R=>u<r?O(R):l.push(R),O=R=>{o&&e.next(R),u++;let k=!1;Nt(t(R,m++)).subscribe(wt(e,q=>{i?.(q),o?C(q):e.next(q)},()=>{k=!0},void 0,()=>{if(k)try{for(u--;l.length&&u<r;){let q=l.shift();s?Wt(e,s,()=>O(q)):O(q)}b()}catch(q){e.error(q)}}))};return n.subscribe(wt(e,C,()=>{g=!0,b()})),()=>{c?.()}}function ec(n,e,t=1/0){return ge(e)?ec((r,i)=>lt((o,s)=>e(r,o,i,s))(Nt(n(r,i))),t):(typeof e=="number"&&(t=e),bt((r,i)=>mv(r,i,n,t)))}function vd(...n){let e=Zy(n),{args:t,keys:r}=fv(n),i=new je(o=>{let{length:s}=t;if(!s){o.complete();return}let c=new Array(s),l=s,u=s;for(let m=0;m<s;m++){let g=!1;Nt(t[m]).subscribe(wt(o,b=>{g||(g=!0,u--),c[m]=b},()=>l--,void 0,()=>{(!l||!g)&&(u||o.next(r?pv(r,c):c),o.complete())}))}});return e?i.pipe(hv(e)):i}function _d(n,e){return bt((t,r)=>{let i=0;t.subscribe(wt(r,o=>n.call(e,o,i++)&&r.next(o)))})}function bd(n,e){return ge(e)?ec(n,e,1):ec(n,1)}function $i(n){return n<=0?()=>Yy:bt((e,t)=>{let r=0;e.subscribe(wt(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function wd(n){return bt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function zi(n,e){return bt((t,r)=>{let i=null,o=0,s=!1,c=()=>s&&!i&&r.complete();t.subscribe(wt(r,l=>{i?.unsubscribe();let u=0,m=o++;Nt(n(l,m)).subscribe(i=wt(r,g=>r.next(e?e(l,g,m,u++):g),()=>{i=null,c()}))},()=>{s=!0,c()}))})}var Zv="https://g.co/ng/security#xss",de=class extends Error{constructor(e,t){super(Ac(e,t)),this.code=e}};function Ac(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function vs(n){return{toString:n}.toString()}var tc="__parameters__";function AD(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function e0(n,e,t){return vs(()=>{let r=AD(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return c.annotation=s,c;function c(l,u,m){let g=l.hasOwnProperty(tc)?l[tc]:Object.defineProperty(l,tc,{value:[]})[tc];for(;g.length<=m;)g.push(null);return(g[m]=g[m]||[]).push(s),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var qn=globalThis;function Be(n){for(let e in n)if(n[e]===Be)return e;throw Error("Could not find renamed property on target object.")}function PD(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function kt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(kt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function gv(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var ND=Be({__forward_ref__:Be});function Vt(n){return n.__forward_ref__=Vt,n.toString=function(){return kt(this())},n}function St(n){return t0(n)?n():n}function t0(n){return typeof n=="function"&&n.hasOwnProperty(ND)&&n.__forward_ref__===Vt}function me(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function vi(n){return{providers:n.providers||[],imports:n.imports||[]}}function Mh(n){return yv(n,n0)||yv(n,r0)}function yv(n,e){return n.hasOwnProperty(e)?n[e]:null}function OD(n){let e=n&&(n[n0]||n[r0]);return e||null}function vv(n){return n&&(n.hasOwnProperty(_v)||n.hasOwnProperty(RD))?n[_v]:null}var n0=Be({\u0275prov:Be}),_v=Be({\u0275inj:Be}),r0=Be({ngInjectableDef:Be}),RD=Be({ngInjectorDef:Be}),pe=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=me({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function i0(n){return n&&!!n.\u0275providers}var kD=Be({\u0275cmp:Be}),FD=Be({\u0275dir:Be}),VD=Be({\u0275pipe:Be});var uc=Be({\u0275fac:Be}),as=Be({__NG_ELEMENT_ID__:Be}),bv=Be({__NG_ENV_ID__:Be});function Gn(n){return typeof n=="string"?n:n==null?"":String(n)}function LD(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Gn(n)}function jD(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new de(-200,n)}function Ah(n,e){throw new de(-201,!1)}var _e=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(_e||{}),Ld;function o0(){return Ld}function Ot(n){let e=Ld;return Ld=n,e}function s0(n,e,t){let r=Mh(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&_e.Optional)return null;if(e!==void 0)return e;Ah(n,"Injector")}var BD={},cs=BD,jd="__NG_DI_FLAG__",dc="ngTempTokenPath",UD="ngTokenPath",$D=/\n/gm,zD="\u0275",wv="__source",Wi;function HD(){return Wi}function Tr(n){let e=Wi;return Wi=n,e}function qD(n,e=_e.Default){if(Wi===void 0)throw new de(-203,!1);return Wi===null?s0(n,void 0,e):Wi.get(n,e&_e.Optional?null:void 0,e)}function oe(n,e=_e.Default){return(o0()||qD)(St(n),e)}function Fe(n,e=_e.Default){return oe(n,Pc(e))}function Pc(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Bd(n){let e=[];for(let t=0;t<n.length;t++){let r=St(n[t]);if(Array.isArray(r)){if(r.length===0)throw new de(900,!1);let i,o=_e.Default;for(let s=0;s<r.length;s++){let c=r[s],l=GD(c);typeof l=="number"?l===-1?i=c.token:o|=l:i=c}e.push(oe(i,o))}else e.push(oe(r))}return e}function a0(n,e){return n[jd]=e,n.prototype[jd]=e,n}function GD(n){return n[jd]}function WD(n,e,t,r){let i=n[dc];throw e[wv]&&i.unshift(e[wv]),n.message=KD(`
`+n.message,i,t,r),n[UD]=i,n[dc]=null,n}function KD(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==zD?n.slice(2):n;let i=kt(e);if(Array.isArray(e))i=e.map(kt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let c=e[s];o.push(s+":"+(typeof c=="string"?JSON.stringify(c):kt(c)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace($D,`
  `)}`}var c0=a0(e0("Optional"),8);var QD=a0(e0("SkipSelf"),4);function ci(n,e){let t=n.hasOwnProperty(uc);return t?n[uc]:null}function YD(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function JD(n){return n.flat(Number.POSITIVE_INFINITY)}function Ph(n,e){n.forEach(t=>Array.isArray(t)?Ph(t,e):e(t))}function l0(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function hc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function XD(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function ZD(n,e,t){let r=_s(n,e);return r>=0?n[r|1]=t:(r=~r,XD(n,r,e,t)),r}function Cd(n,e){let t=_s(n,e);if(t>=0)return n[t|1]}function _s(n,e){return ex(n,e,1)}function ex(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Qi={},Kt=[],ls=new pe(""),u0=new pe("",-1),d0=new pe(""),fc=class{get(e,t=cs){if(t===cs){let r=new Error(`NullInjectorError: No provider for ${kt(e)}!`);throw r.name="NullInjectorError",r}return t}},h0=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(h0||{}),Tn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Tn||{}),Qt=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Qt||{});function tx(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function Ud(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],c=t[r++];n.setAttribute(e,s,c,o)}else{let o=i,s=t[++r];rx(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function nx(n){return n===3||n===4||n===6}function rx(n){return n.charCodeAt(0)===64}function us(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?Cv(n,t,i,null,e[++r]):Cv(n,t,i,null,null))}}return n}function Cv(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let c=n[o++];if(typeof c=="number"){if(c===e){s=-1;break}else if(c>e){s=o-1;break}}}for(;o<n.length;){let c=n[o];if(typeof c=="number")break;if(c===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var f0="ng-template";function ix(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&tx(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Nh(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Nh(n){return n.type===4&&n.value!==f0}function ox(n,e,t){let r=n.type===4&&!t?f0:n.value;return e===r}function sx(n,e,t){let r=4,i=n.attrs,o=i!==null?lx(i):0,s=!1;for(let c=0;c<e.length;c++){let l=e[c];if(typeof l=="number"){if(!s&&!ln(r)&&!ln(l))return!1;if(s&&ln(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!ox(n,l,t)||l===""&&e.length===1){if(ln(r))return!1;s=!0}}else if(r&8){if(i===null||!ix(n,i,l,t)){if(ln(r))return!1;s=!0}}else{let u=e[++c],m=ax(l,i,Nh(n),t);if(m===-1){if(ln(r))return!1;s=!0;continue}if(u!==""){let g;if(m>o?g="":g=i[m+1].toLowerCase(),r&2&&u!==g){if(ln(r))return!1;s=!0}}}}return ln(r)||s}function ln(n){return(n&1)===0}function ax(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return ux(e,n)}function cx(n,e,t=!1){for(let r=0;r<e.length;r++)if(sx(n,e[r],t))return!0;return!1}function lx(n){for(let e=0;e<n.length;e++){let t=n[e];if(nx(t))return e}return n.length}function ux(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function Ev(n,e){return n?":not("+e.trim()+")":e}function dx(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let c=n[++t];i+="["+s+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!ln(s)&&(e+=Ev(o,i),i=""),r=s,o=o||!ln(r);t++}return i!==""&&(e+=Ev(o,i)),e}function hx(n){return n.map(dx).join(",")}function fx(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!ln(i))break;i=o}r++}return{attrs:e,classes:t}}function $e(n){return vs(()=>{let e=g0(n),t=ue(J({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===h0.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Tn.Emulated,styles:n.styles||Kt,_:null,schemas:n.schemas||null,tView:null,id:""});y0(t);let r=n.dependencies;return t.directiveDefs=Dv(r,!1),t.pipeDefs=Dv(r,!0),t.id=yx(t),t})}function px(n){return Yi(n)||p0(n)}function mx(n){return n!==null}function _i(n){return vs(()=>({type:n.type,bootstrap:n.bootstrap||Kt,declarations:n.declarations||Kt,imports:n.imports||Kt,exports:n.exports||Kt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Iv(n,e){if(n==null)return Qi;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,c=Qt.None;Array.isArray(i)?(c=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=c!==Qt.None?[r,c]:r,e[o]=s):t[o]=r}return t}function We(n){return vs(()=>{let e=g0(n);return y0(e),e})}function Nc(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Yi(n){return n[kD]||null}function p0(n){return n[FD]||null}function m0(n){return n[VD]||null}function gx(n){let e=Yi(n)||p0(n)||m0(n);return e!==null?e.standalone:!1}function g0(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Qi,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Kt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Iv(n.inputs,e),outputs:Iv(n.outputs),debugInfo:null}}function y0(n){n.features?.forEach(e=>e(n))}function Dv(n,e){if(!n)return null;let t=e?m0:px;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(mx)}function yx(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Oc(n){return{\u0275providers:n}}function vx(...n){return{\u0275providers:v0(!0,n),\u0275fromNgModule:!0}}function v0(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Ph(e,s=>{let c=s;$d(c,o,[],r)&&(i||=[],i.push(c))}),i!==void 0&&_0(i,o),t}function _0(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Oh(i,o=>{e(o,r)})}}function $d(n,e,t,r){if(n=St(n),!n)return!1;let i=null,o=vv(n),s=!o&&Yi(n);if(!o&&!s){let l=n.ngModule;if(o=vv(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=n}let c=r.has(i);if(s){if(c)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of l)$d(u,e,t,r)}}else if(o){if(o.imports!=null&&!c){r.add(i);let u;try{Ph(o.imports,m=>{$d(m,e,t,r)&&(u||=[],u.push(m))})}finally{}u!==void 0&&_0(u,e)}if(!c){let u=ci(i)||(()=>new i);e({provide:i,useFactory:u,deps:Kt},i),e({provide:d0,useValue:i,multi:!0},i),e({provide:ls,useValue:()=>oe(i),multi:!0},i)}let l=o.providers;if(l!=null&&!c){let u=n;Oh(l,m=>{e(m,u)})}}else return!1;return i!==n&&n.providers!==void 0}function Oh(n,e){for(let t of n)i0(t)&&(t=t.\u0275providers),Array.isArray(t)?Oh(t,e):e(t)}var _x=Be({provide:String,useValue:Be});function b0(n){return n!==null&&typeof n=="object"&&_x in n}function bx(n){return!!(n&&n.useExisting)}function wx(n){return!!(n&&n.useFactory)}function Ji(n){return typeof n=="function"}function Cx(n){return!!n.useClass}var Rc=new pe(""),ic={},Ex={},Ed;function Rh(){return Ed===void 0&&(Ed=new fc),Ed}var Mn=class{},ds=class extends Mn{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Hd(e,s=>this.processProvider(s)),this.records.set(u0,Hi(void 0,this)),i.has("environment")&&this.records.set(Mn,Hi(void 0,this));let o=this.records.get(Rc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(d0,Kt,_e.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Se(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Se(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Tr(this),r=Ot(void 0),i;try{return e()}finally{Tr(t),Ot(r)}}get(e,t=cs,r=_e.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(bv))return e[bv](this);r=Pc(r);let i,o=Tr(this),s=Ot(void 0);try{if(!(r&_e.SkipSelf)){let l=this.records.get(e);if(l===void 0){let u=Tx(e)&&Mh(e);u&&this.injectableDefInScope(u)?l=Hi(zd(e),ic):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let c=r&_e.Self?Rh():this.parent;return t=r&_e.Optional&&t===cs?null:t,c.get(e,t)}catch(c){if(c.name==="NullInjectorError"){if((c[dc]=c[dc]||[]).unshift(kt(e)),o)throw c;return WD(c,e,"R3InjectorError",this.source)}else throw c}finally{Ot(s),Tr(o)}}resolveInjectorInitializers(){let e=Se(null),t=Tr(this),r=Ot(void 0),i;try{let o=this.get(ls,Kt,_e.Self);for(let s of o)s()}finally{Tr(t),Ot(r),Se(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(kt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new de(205,!1)}processProvider(e){e=St(e);let t=Ji(e)?e:St(e&&e.provide),r=Dx(e);if(!Ji(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Hi(void 0,ic,!0),i.factory=()=>Bd(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Se(null);try{return t.value===ic&&(t.value=Ex,t.value=t.factory()),typeof t.value=="object"&&t.value&&Sx(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Se(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=St(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function zd(n){let e=Mh(n),t=e!==null?e.factory:ci(n);if(t!==null)return t;if(n instanceof pe)throw new de(204,!1);if(n instanceof Function)return Ix(n);throw new de(204,!1)}function Ix(n){if(n.length>0)throw new de(204,!1);let t=OD(n);return t!==null?()=>t.factory(n):()=>new n}function Dx(n){if(b0(n))return Hi(void 0,n.useValue);{let e=w0(n);return Hi(e,ic)}}function w0(n,e,t){let r;if(Ji(n)){let i=St(n);return ci(i)||zd(i)}else if(b0(n))r=()=>St(n.useValue);else if(wx(n))r=()=>n.useFactory(...Bd(n.deps||[]));else if(bx(n))r=()=>oe(St(n.useExisting));else{let i=St(n&&(n.useClass||n.provide));if(xx(n))r=()=>new i(...Bd(n.deps));else return ci(i)||zd(i)}return r}function Hi(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function xx(n){return!!n.deps}function Sx(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function Tx(n){return typeof n=="function"||typeof n=="object"&&n instanceof pe}function Hd(n,e){for(let t of n)Array.isArray(t)?Hd(t,e):t&&i0(t)?Hd(t.\u0275providers,e):e(t)}function C0(n,e){n instanceof ds&&n.assertNotDestroyed();let t,r=Tr(n),i=Ot(void 0);try{return e()}finally{Tr(r),Ot(i)}}function Mx(){return o0()!==void 0||HD()!=null}function Ax(n){return typeof n=="function"}var Jn=0,he=1,ie=2,vt=3,dn=4,pn=5,pc=6,hs=7,hn=8,Xi=9,fn=10,st=11,fs=12,xv=13,no=14,An=15,bs=16,qi=17,Wn=18,kc=19,E0=20,Mr=21,Id=22,li=23,Yt=25,I0=1;var ui=7,mc=8,Zi=9,Ft=10,kh=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(kh||{});function si(n){return Array.isArray(n)&&typeof n[I0]=="object"}function Xn(n){return Array.isArray(n)&&n[I0]===!0}function D0(n){return(n.flags&4)!==0}function Fc(n){return n.componentOffset>-1}function Fh(n){return(n.flags&1)===1}function Ar(n){return!!n.template}function Px(n){return(n[ie]&512)!==0}var qd=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function x0(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function ws(){return S0}function S0(n){return n.type.prototype.ngOnChanges&&(n.setInput=Ox),Nx}ws.ngInherit=!0;function Nx(){let n=M0(this),e=n?.current;if(e){let t=n.previous;if(t===Qi)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Ox(n,e,t,r,i){let o=this.declaredInputs[r],s=M0(n)||Rx(n,{previous:Qi,current:null}),c=s.current||(s.current={}),l=s.previous,u=l[o];c[o]=new qd(u&&u.currentValue,t,l===Qi),x0(n,e,i,t)}var T0="__ngSimpleChanges__";function M0(n){return n[T0]||null}function Rx(n,e){return n[T0]=e}var Sv=null;var xn=function(n,e,t){Sv?.(n,e,t)},kx="svg",Fx="math",Vx=!1;function Lx(){return Vx}function Pn(n){for(;Array.isArray(n);)n=n[Jn];return n}function A0(n,e){return Pn(e[n])}function Jt(n,e){return Pn(e[n.index])}function P0(n,e){return n.data[e]}function Vh(n,e){return n[e]}function Pr(n,e){let t=e[n];return si(t)?t:t[Jn]}function jx(n){return(n[ie]&4)===4}function Lh(n){return(n[ie]&128)===128}function Bx(n){return Xn(n[vt])}function gc(n,e){return e==null?null:n[e]}function N0(n){n[qi]=0}function Ux(n){n[ie]&1024||(n[ie]|=1024,Lh(n)&&ps(n))}function $x(n,e){for(;n>0;)e=e[no],n--;return e}function jh(n){return!!(n[ie]&9216||n[li]?.dirty)}function Gd(n){n[fn].changeDetectionScheduler?.notify(1),jh(n)?ps(n):n[ie]&64&&(Lx()?(n[ie]|=1024,ps(n)):n[fn].changeDetectionScheduler?.notify())}function ps(n){n[fn].changeDetectionScheduler?.notify();let e=ms(n);for(;e!==null&&!(e[ie]&8192||(e[ie]|=8192,!Lh(e)));)e=ms(e)}function O0(n,e){if((n[ie]&256)===256)throw new de(911,!1);n[Mr]===null&&(n[Mr]=[]),n[Mr].push(e)}function zx(n,e){if(n[Mr]===null)return;let t=n[Mr].indexOf(e);t!==-1&&n[Mr].splice(t,1)}function ms(n){let e=n[vt];return Xn(e)?e[vt]:e}var fe={lFrame:$0(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Hx(){return fe.lFrame.elementDepthCount}function qx(){fe.lFrame.elementDepthCount++}function Gx(){fe.lFrame.elementDepthCount--}function R0(){return fe.bindingsEnabled}function Wx(){return fe.skipHydrationRootTNode!==null}function Kx(n){return fe.skipHydrationRootTNode===n}function Qx(){fe.skipHydrationRootTNode=null}function Ie(){return fe.lFrame.lView}function Ct(){return fe.lFrame.tView}function V(n){return fe.lFrame.contextLView=n,n[hn]}function L(n){return fe.lFrame.contextLView=null,n}function Lt(){let n=k0();for(;n!==null&&n.type===64;)n=n.parent;return n}function k0(){return fe.lFrame.currentTNode}function Yx(){let n=fe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Cs(n,e){let t=fe.lFrame;t.currentTNode=n,t.isParent=e}function F0(){return fe.lFrame.isParent}function Jx(){fe.lFrame.isParent=!1}function Xx(){return fe.lFrame.contextLView}function V0(){let n=fe.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function L0(){return fe.lFrame.bindingIndex}function Zx(n){return fe.lFrame.bindingIndex=n}function Vc(){return fe.lFrame.bindingIndex++}function Bh(n){let e=fe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function e1(){return fe.lFrame.inI18n}function t1(n,e){let t=fe.lFrame;t.bindingIndex=t.bindingRootIndex=n,Wd(e)}function n1(){return fe.lFrame.currentDirectiveIndex}function Wd(n){fe.lFrame.currentDirectiveIndex=n}function r1(n){let e=fe.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function j0(){return fe.lFrame.currentQueryIndex}function Uh(n){fe.lFrame.currentQueryIndex=n}function i1(n){let e=n[he];return e.type===2?e.declTNode:e.type===1?n[pn]:null}function B0(n,e,t){if(t&_e.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&_e.Host);)if(i=i1(o),i===null||(o=o[no],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=fe.lFrame=U0();return r.currentTNode=e,r.lView=n,!0}function $h(n){let e=U0(),t=n[he];fe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function U0(){let n=fe.lFrame,e=n===null?null:n.child;return e===null?$0(n):e}function $0(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function z0(){let n=fe.lFrame;return fe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var H0=z0;function zh(){let n=z0();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function o1(n){return(fe.lFrame.contextLView=$x(n,fe.lFrame.contextLView))[hn]}function Nr(){return fe.lFrame.selectedIndex}function di(n){fe.lFrame.selectedIndex=n}function Hh(){let n=fe.lFrame;return P0(n.tView,n.selectedIndex)}function s1(){return fe.lFrame.currentNamespace}var q0=!0;function qh(){return q0}function Gh(n){q0=n}function a1(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=S0(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Wh(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:c,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:m}=o;s&&(n.contentHooks??=[]).push(-t,s),c&&((n.contentHooks??=[]).push(t,c),(n.contentCheckHooks??=[]).push(t,c)),l&&(n.viewHooks??=[]).push(-t,l),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),m!=null&&(n.destroyHooks??=[]).push(t,m)}}function oc(n,e,t){G0(n,e,3,t)}function sc(n,e,t,r){(n[ie]&3)===t&&G0(n,e,t,r)}function Dd(n,e){let t=n[ie];(t&3)===e&&(t&=16383,t+=1,n[ie]=t)}function G0(n,e,t,r){let i=r!==void 0?n[qi]&65535:0,o=r??-1,s=e.length-1,c=0;for(let l=i;l<s;l++)if(typeof e[l+1]=="number"){if(c=e[l],r!=null&&c>=r)break}else e[l]<0&&(n[qi]+=65536),(c<o||o==-1)&&(c1(n,t,e,l),n[qi]=(n[qi]&4294901760)+l+2),l++}function Tv(n,e){xn(4,n,e);let t=Se(null);try{e.call(n)}finally{Se(t),xn(5,n,e)}}function c1(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],c=n[s];i?n[ie]>>14<n[qi]>>16&&(n[ie]&3)===e&&(n[ie]+=16384,Tv(c,o)):Tv(c,o)}var Ki=-1,hi=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function l1(n){return n instanceof hi}function u1(n){return(n.flags&8)!==0}function d1(n){return(n.flags&16)!==0}function W0(n){return n!==Ki}function yc(n){return n&32767}function h1(n){return n>>16}function vc(n,e){let t=h1(n),r=e;for(;t>0;)r=r[no],t--;return r}var Kd=!0;function _c(n){let e=Kd;return Kd=n,e}var f1=256,K0=f1-1,Q0=5,p1=0,Sn={};function m1(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(as)&&(r=t[as]),r==null&&(r=t[as]=p1++);let i=r&K0,o=1<<i;e.data[n+(i>>Q0)]|=o}function bc(n,e){let t=Y0(n,e);if(t!==-1)return t;let r=e[he];r.firstCreatePass&&(n.injectorIndex=e.length,xd(r.data,n),xd(e,null),xd(r.blueprint,null));let i=Kh(n,e),o=n.injectorIndex;if(W0(i)){let s=yc(i),c=vc(i,e),l=c[he].data;for(let u=0;u<8;u++)e[o+u]=c[s+u]|l[s+u]}return e[o+8]=i,o}function xd(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Y0(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Kh(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=t_(i),r===null)return Ki;if(t++,i=i[no],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Ki}function Qd(n,e,t){m1(n,e,t)}function J0(n,e,t){if(t&_e.Optional||n!==void 0)return n;Ah(e,"NodeInjector")}function X0(n,e,t,r){if(t&_e.Optional&&r===void 0&&(r=null),!(t&(_e.Self|_e.Host))){let i=n[Xi],o=Ot(void 0);try{return i?i.get(e,r,t&_e.Optional):s0(e,r,t&_e.Optional)}finally{Ot(o)}}return J0(r,e,t)}function Z0(n,e,t,r=_e.Default,i){if(n!==null){if(e[ie]&2048&&!(r&_e.Self)){let s=_1(n,e,t,r,Sn);if(s!==Sn)return s}let o=e_(n,e,t,r,Sn);if(o!==Sn)return o}return X0(e,t,r,i)}function e_(n,e,t,r,i){let o=y1(t);if(typeof o=="function"){if(!B0(e,n,r))return r&_e.Host?J0(i,t,r):X0(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&_e.Optional))Ah(t);else return s}finally{H0()}}else if(typeof o=="number"){let s=null,c=Y0(n,e),l=Ki,u=r&_e.Host?e[An][pn]:null;for((c===-1||r&_e.SkipSelf)&&(l=c===-1?Kh(n,e):e[c+8],l===Ki||!Av(r,!1)?c=-1:(s=e[he],c=yc(l),e=vc(l,e)));c!==-1;){let m=e[he];if(Mv(o,c,m.data)){let g=g1(c,e,t,s,r,u);if(g!==Sn)return g}l=e[c+8],l!==Ki&&Av(r,e[he].data[c+8]===u)&&Mv(o,c,e)?(s=m,c=yc(l),e=vc(l,e)):c=-1}}return i}function g1(n,e,t,r,i,o){let s=e[he],c=s.data[n+8],l=r==null?Fc(c)&&Kd:r!=s&&(c.type&3)!==0,u=i&_e.Host&&o===c,m=ac(c,s,t,l,u);return m!==null?fi(e,s,m,c):Sn}function ac(n,e,t,r,i){let o=n.providerIndexes,s=e.data,c=o&1048575,l=n.directiveStart,u=n.directiveEnd,m=o>>20,g=r?c:c+m,b=i?c+m:u;for(let C=g;C<b;C++){let O=s[C];if(C<l&&t===O||C>=l&&O.type===t)return C}if(i){let C=s[l];if(C&&Ar(C)&&C.type===t)return l}return null}function fi(n,e,t,r){let i=n[t],o=e.data;if(l1(i)){let s=i;s.resolving&&jD(LD(o[t]));let c=_c(s.canSeeViewProviders);s.resolving=!0;let l,u=s.injectImpl?Ot(s.injectImpl):null,m=B0(n,r,_e.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&a1(t,o[t],e)}finally{u!==null&&Ot(u),_c(c),s.resolving=!1,H0()}}return i}function y1(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(as)?n[as]:void 0;return typeof e=="number"?e>=0?e&K0:v1:e}function Mv(n,e,t){let r=1<<n;return!!(t[e+(n>>Q0)]&r)}function Av(n,e){return!(n&_e.Self)&&!(n&_e.Host&&e)}var ai=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Z0(this._tNode,this._lView,e,Pc(r),t)}};function v1(){return new ai(Lt(),Ie())}function Or(n){return vs(()=>{let e=n.prototype.constructor,t=e[uc]||Yd(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[uc]||Yd(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Yd(n){return t0(n)?()=>{let e=Yd(St(n));return e&&e()}:ci(n)}function _1(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ie]&2048&&!(s[ie]&512);){let c=e_(o,s,t,r|_e.Self,Sn);if(c!==Sn)return c;let l=o.parent;if(!l){let u=s[E0];if(u){let m=u.get(t,Sn,r);if(m!==Sn)return m}l=t_(s),s=s[no]}o=l}return i}function t_(n){let e=n[he],t=e.type;return t===2?e.declTNode:t===1?n[pn]:null}function Pv(n,e=null,t=null,r){let i=b1(n,e,t,r);return i.resolveInjectorInitializers(),i}function b1(n,e=null,t=null,r,i=new Set){let o=[t||Kt,vx(n)];return r=r||(typeof n=="object"?void 0:kt(n)),new ds(o,e||Rh(),r||null,i)}var Es=(()=>{class n{static{this.THROW_IF_NOT_FOUND=cs}static{this.NULL=new fc}static create(t,r){if(Array.isArray(t))return Pv({name:""},r,t,"");{let i=t.name??"";return Pv({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=me({token:n,providedIn:"any",factory:()=>oe(u0)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();var w1="ngOriginalError";function Sd(n){return n[w1]}var Kn=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Sd(e);for(;t&&Sd(t);)t=Sd(t);return t||null}},n_=new pe("",{providedIn:"root",factory:()=>Fe(Kn).handleError.bind(void 0)}),r_=(()=>{class n{static{this.__NG_ELEMENT_ID__=C1}static{this.__NG_ENV_ID__=t=>t}}return n})(),Jd=class extends r_{constructor(e){super(),this._lView=e}onDestroy(e){return O0(this._lView,e),()=>zx(this._lView,e)}};function C1(){return new Jd(Ie())}function E1(){return ro(Lt(),Ie())}function ro(n,e){return new Xt(Jt(n,e))}var Xt=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=E1}}return n})();function I1(n){return n instanceof Xt?n.nativeElement:n}var Xd=class extends In{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,Mx()&&(this.destroyRef=Fe(r_,{optional:!0})??void 0)}emit(e){let t=Se(null);try{super.next(e)}finally{Se(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=Td(o),i&&(i=Td(i)),s&&(s=Td(s)));let c=super.subscribe({next:i,error:o,complete:s});return e instanceof Pt&&e.add(c),c}};function Td(n){return e=>{setTimeout(n,void 0,e)}}var un=Xd;function D1(){return this._results[Symbol.iterator]()}var Zd=class n{get changes(){return this._changes??=new un}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=D1)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=JD(e);(this._changesDetected=!YD(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function i_(n){return(n.flags&128)===128}var o_=new Map,x1=0;function S1(){return x1++}function T1(n){o_.set(n[kc],n)}function M1(n){o_.delete(n[kc])}var Nv="__ngContext__";function pi(n,e){si(e)?(n[Nv]=e[kc],T1(e)):n[Nv]=e}function s_(n){return c_(n[fs])}function a_(n){return c_(n[dn])}function c_(n){for(;n!==null&&!Xn(n);)n=n[dn];return n}var eh;function l_(n){eh=n}function A1(){if(eh!==void 0)return eh;if(typeof document<"u")return document;throw new de(210,!1)}var Qh=new pe("",{providedIn:"root",factory:()=>P1}),P1="ng",Yh=new pe(""),Rr=new pe("",{providedIn:"platform",factory:()=>"unknown"});var Jh=new pe("",{providedIn:"root",factory:()=>A1().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var N1="h",O1="b";var R1=()=>null;function Xh(n,e,t=!1){return R1(n,e,t)}var u_=!1,k1=new pe("",{providedIn:"root",factory:()=>u_});var wc=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Zv})`}};function Lc(n){return n instanceof wc?n.changingThisBreaksApplicationSecurity:n}function d_(n,e){let t=F1(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Zv})`)}return t===e}function F1(n){return n instanceof wc&&n.getTypeName()||null}var V1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function h_(n){return n=String(n),n.match(V1)?n:"unsafe:"+n}var Zh=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Zh||{});function bi(n){let e=L1();return e?e.sanitize(Zh.URL,n)||"":d_(n,"URL")?Lc(n):h_(Gn(n))}function L1(){let n=Ie();return n&&n[fn].sanitizer}function Is(n){return n.ownerDocument}var Qn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Qn||{}),j1;function ef(n,e){return j1(n,e)}function Gi(n,e,t,r,i){if(r!=null){let o,s=!1;Xn(r)?o=r:si(r)&&(s=!0,r=r[Jn]);let c=Pn(r);n===0&&t!==null?i==null?y_(e,t,c):Cc(e,t,c,i||null,!0):n===1&&t!==null?Cc(e,t,c,i||null,!0):n===2?nS(e,c,s):n===3&&e.destroyNode(c),o!=null&&iS(e,n,o,t,i)}}function B1(n,e){return n.createText(e)}function U1(n,e,t){n.setValue(e,t)}function f_(n,e,t){return n.createElement(e,t)}function $1(n,e){p_(n,e),e[Jn]=null,e[pn]=null}function z1(n,e,t,r,i,o){r[Jn]=i,r[pn]=e,jc(n,r,t,1,i,o)}function p_(n,e){e[fn].changeDetectionScheduler?.notify(1),jc(n,e,e[st],2,null,null)}function H1(n){let e=n[fs];if(!e)return Md(n[he],n);for(;e;){let t=null;if(si(e))t=e[fs];else{let r=e[Ft];r&&(t=r)}if(!t){for(;e&&!e[dn]&&e!==n;)si(e)&&Md(e[he],e),e=e[vt];e===null&&(e=n),si(e)&&Md(e[he],e),t=e&&e[dn]}e=t}}function q1(n,e,t,r){let i=Ft+r,o=t.length;r>0&&(t[i-1][dn]=e),r<o-Ft?(e[dn]=t[i],l0(t,Ft+r,e)):(t.push(e),e[dn]=null),e[vt]=t;let s=e[bs];s!==null&&t!==s&&G1(s,e);let c=e[Wn];c!==null&&c.insertView(n),Gd(e),e[ie]|=128}function G1(n,e){let t=n[Zi],i=e[vt][vt][An];e[An]!==i&&(n[ie]|=kh.HasTransplantedViews),t===null?n[Zi]=[e]:t.push(e)}function m_(n,e){let t=n[Zi],r=t.indexOf(e);t.splice(r,1)}function th(n,e){if(n.length<=Ft)return;let t=Ft+e,r=n[t];if(r){let i=r[bs];i!==null&&i!==n&&m_(i,r),e>0&&(n[t-1][dn]=r[dn]);let o=hc(n,Ft+e);$1(r[he],r);let s=o[Wn];s!==null&&s.detachView(o[he]),r[vt]=null,r[dn]=null,r[ie]&=-129}return r}function g_(n,e){if(!(e[ie]&256)){let t=e[st];t.destroyNode&&jc(n,e,t,3,null,null),H1(e)}}function Md(n,e){if(e[ie]&256)return;let t=Se(null);try{e[ie]&=-129,e[ie]|=256,e[li]&&jy(e[li]),K1(n,e),W1(n,e),e[he].type===1&&e[st].destroy();let r=e[bs];if(r!==null&&Xn(e[vt])){r!==e[vt]&&m_(r,e);let i=e[Wn];i!==null&&i.detachView(n)}M1(e)}finally{Se(t)}}function W1(n,e){let t=n.cleanup,r=e[hs];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[hs]=null);let i=e[Mr];if(i!==null){e[Mr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function K1(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof hi)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let c=i[o[s]],l=o[s+1];xn(4,c,l);try{l.call(c)}finally{xn(5,c,l)}}else{xn(4,i,o);try{o.call(i)}finally{xn(5,i,o)}}}}}function Q1(n,e,t){return Y1(n,e.parent,t)}function Y1(n,e,t){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return t[Jn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Tn.None||o===Tn.Emulated)return null}return Jt(r,t)}}function Cc(n,e,t,r,i){n.insertBefore(e,t,r,i)}function y_(n,e,t){n.appendChild(e,t)}function Ov(n,e,t,r,i){r!==null?Cc(n,e,t,r,i):y_(n,e,t)}function J1(n,e,t,r){n.removeChild(e,t,r)}function tf(n,e){return n.parentNode(e)}function X1(n,e){return n.nextSibling(e)}function Z1(n,e,t){return tS(n,e,t)}function eS(n,e,t){return n.type&40?Jt(n,t):null}var tS=eS,Rv;function nf(n,e,t,r){let i=Q1(n,r,e),o=e[st],s=r.parent||e[pn],c=Z1(s,r,e);if(i!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)Ov(o,i,t[l],c,!1);else Ov(o,i,t,c,!1);Rv!==void 0&&Rv(o,r,e,t,i)}function cc(n,e){if(e!==null){let t=e.type;if(t&3)return Jt(e,n);if(t&4)return nh(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return cc(n,r);{let i=n[e.index];return Xn(i)?nh(-1,i):Pn(i)}}else{if(t&32)return ef(e,n)()||Pn(n[e.index]);{let r=v_(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ms(n[An]);return cc(i,r)}else return cc(n,e.next)}}}return null}function v_(n,e){if(e!==null){let r=n[An][pn],i=e.projection;return r.projection[i]}return null}function nh(n,e){let t=Ft+n+1;if(t<e.length){let r=e[t],i=r[he].firstChild;if(i!==null)return cc(r,i)}return e[ui]}function nS(n,e,t){let r=tf(n,e);r&&J1(n,r,e,t)}function rf(n,e,t,r,i,o,s){for(;t!=null;){let c=r[t.index],l=t.type;if(s&&e===0&&(c&&pi(Pn(c),r),t.flags|=2),(t.flags&32)!==32)if(l&8)rf(n,e,t.child,r,i,o,!1),Gi(e,n,i,c,o);else if(l&32){let u=ef(t,r),m;for(;m=u();)Gi(e,n,i,m,o);Gi(e,n,i,c,o)}else l&16?rS(n,e,r,t,i,o):Gi(e,n,i,c,o);t=s?t.projectionNext:t.next}}function jc(n,e,t,r,i,o){rf(t,r,n.firstChild,e,i,o,!1)}function rS(n,e,t,r,i,o){let s=t[An],l=s[pn].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let m=l[u];Gi(e,n,i,m,o)}else{let u=l,m=s[vt];i_(r)&&(u.flags|=128),rf(n,e,u,m,i,o,!0)}}function iS(n,e,t,r,i){let o=t[ui],s=Pn(t);o!==s&&Gi(e,n,r,o,i);for(let c=Ft;c<t.length;c++){let l=t[c];jc(l[he],l,n,e,r,o)}}function oS(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Qn.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Qn.Important),n.setStyle(t,r,i,o))}}function sS(n,e,t){n.setAttribute(e,"style",t)}function __(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function b_(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Ud(n,e,r),i!==null&&__(n,e,i),o!==null&&sS(n,e,o)}var mn={};function _(n=1){w_(Ct(),Ie(),Nr()+n,!1)}function w_(n,e,t,r){if(!r)if((e[ie]&3)===3){let o=n.preOrderCheckHooks;o!==null&&oc(e,o,t)}else{let o=n.preOrderHooks;o!==null&&sc(e,o,0,t)}di(t)}function W(n,e=_e.Default){let t=Ie();if(t===null)return oe(n,e);let r=Lt();return Z0(r,t,St(n),e)}function C_(n,e,t,r,i,o){let s=Se(null);try{let c=null;i&Qt.SignalBased&&(c=e[r][ad]),c!==null&&c.transformFn!==void 0&&(o=c.transformFn(o)),i&Qt.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,c,o,t,r):x0(e,c,r,o)}finally{Se(s)}}function aS(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)di(~i);else{let o=i,s=t[++r],c=t[++r];t1(s,o);let l=e[o];c(2,l)}}}finally{di(-1)}}function Bc(n,e,t,r,i,o,s,c,l,u,m){let g=e.blueprint.slice();return g[Jn]=i,g[ie]=r|4|128|8|64,(u!==null||n&&n[ie]&2048)&&(g[ie]|=2048),N0(g),g[vt]=g[no]=n,g[hn]=t,g[fn]=s||n&&n[fn],g[st]=c||n&&n[st],g[Xi]=l||n&&n[Xi]||null,g[pn]=o,g[kc]=S1(),g[pc]=m,g[E0]=u,g[An]=e.type==2?n[An]:g,g}function Uc(n,e,t,r,i){let o=n.data[e];if(o===null)o=cS(n,e,t,r,i),e1()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=Yx();o.injectorIndex=s===null?-1:s.injectorIndex}return Cs(o,!0),o}function cS(n,e,t,r,i){let o=k0(),s=F0(),c=s?o:o&&o.parent,l=n.data[e]=pS(n,c,t,e,r,i);return n.firstChild===null&&(n.firstChild=l),o!==null&&(s?o.child==null&&l.parent!==null&&(o.child=l):o.next===null&&(o.next=l,l.prev=o)),l}function E_(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function I_(n,e,t,r,i){let o=Nr(),s=r&2;try{di(-1),s&&e.length>Yt&&w_(n,e,Yt,!1),xn(s?2:0,i),t(r,i)}finally{di(o),xn(s?3:1,i)}}function D_(n,e,t){if(D0(e)){let r=Se(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let c=n.data[s];if(c.contentQueries){let l=t[s];c.contentQueries(1,l,s)}}}finally{Se(r)}}}function x_(n,e,t){R0()&&(bS(n,e,t,Jt(t,e)),(t.flags&64)===64&&N_(n,e,t))}function S_(n,e,t=Jt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],c=s===-1?t(e,n):n[s];n[i++]=c}}}function T_(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=of(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function of(n,e,t,r,i,o,s,c,l,u,m){let g=Yt+r,b=g+i,C=lS(g,b),O=typeof u=="function"?u():u;return C[he]={type:n,blueprint:C,template:t,queries:null,viewQuery:c,declTNode:e,data:C.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:b,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:O,incompleteFirstPass:!1,ssrId:m}}function lS(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:mn);return t}function uS(n,e,t,r){let o=r.get(k1,u_)||t===Tn.ShadowDom,s=n.selectRootElement(e,o);return dS(s),s}function dS(n){hS(n)}var hS=()=>null;function fS(n,e,t,r){let i=k_(e);i.push(t),n.firstCreatePass&&F_(n).push(r,i.length-1)}function pS(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,c=0;return Wx()&&(c|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function kv(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let c,l=Qt.None;Array.isArray(s)?(c=s[0],l=s[1]):c=s;let u=o;if(i!==null){if(!i.hasOwnProperty(o))continue;u=i[o]}n===0?Fv(r,t,u,c,l):Fv(r,t,u,c)}return r}function Fv(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function mS(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,c=[],l=null,u=null;for(let m=r;m<i;m++){let g=o[m],b=t?t.get(g):null,C=b?b.inputs:null,O=b?b.outputs:null;l=kv(0,g.inputs,m,l,C),u=kv(1,g.outputs,m,u,O);let R=l!==null&&s!==null&&!Nh(e)?PS(l,m,s):null;c.push(R)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=c,e.inputs=l,e.outputs=u}function gS(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function M_(n,e,t,r,i,o,s,c){let l=Jt(e,t),u=e.inputs,m;!c&&u!=null&&(m=u[r])?(sf(n,t,m,r,i),Fc(e)&&yS(t,e.index)):e.type&3?(r=gS(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(l,r,i)):e.type&12}function yS(n,e){let t=Pr(e,n);t[ie]&16||(t[ie]|=64)}function A_(n,e,t,r){if(R0()){let i=r===null?null:{"":-1},o=CS(n,t),s,c;o===null?s=c=null:[s,c]=o,s!==null&&P_(n,e,t,s,i,c),i&&ES(t,r,i)}t.mergedAttrs=us(t.mergedAttrs,t.attrs)}function P_(n,e,t,r,i,o){for(let u=0;u<r.length;u++)Qd(bc(t,e),n,r[u].type);DS(t,n.data.length,r.length);for(let u=0;u<r.length;u++){let m=r[u];m.providersResolver&&m.providersResolver(m)}let s=!1,c=!1,l=E_(n,e,r.length,null);for(let u=0;u<r.length;u++){let m=r[u];t.mergedAttrs=us(t.mergedAttrs,m.hostAttrs),xS(n,t,e,l,m),IS(l,m,i),m.contentQueries!==null&&(t.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(t.flags|=64);let g=m.type.prototype;!s&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!c&&(g.ngOnChanges||g.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),c=!0),l++}mS(n,t,o)}function vS(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let c=~e.index;_S(s)!=c&&s.push(c),s.push(t,r,o)}}function _S(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function bS(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Fc(t)&&SS(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||bc(t,e),pi(r,e);let s=t.initialInputs;for(let c=i;c<o;c++){let l=n.data[c],u=fi(e,n,c,t);if(pi(u,e),s!==null&&AS(e,c-i,u,l,t,s),Ar(l)){let m=Pr(t.index,e);m[hn]=fi(e,n,c,t)}}}function N_(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=n1();try{di(o);for(let c=r;c<i;c++){let l=n.data[c],u=e[c];Wd(c),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&wS(l,u)}}finally{di(-1),Wd(s)}}function wS(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function CS(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(cx(e,s.selectors,!1))if(r||(r=[]),Ar(s))if(s.findHostDirectiveDefs!==null){let c=[];i=i||new Map,s.findHostDirectiveDefs(s,c,i),r.unshift(...c,s);let l=c.length;rh(n,e,l)}else r.unshift(s),rh(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function rh(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function ES(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new de(-301,!1);r.push(e[i],o)}}}function IS(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Ar(e)&&(t[""]=n)}}function DS(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function xS(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=ci(i.type,!0)),s=new hi(o,Ar(i),W);n.blueprint[r]=s,t[r]=s,vS(n,e,r,E_(n,t,i.hostVars,mn),i)}function SS(n,e,t){let r=Jt(e,n),i=T_(t),o=n[fn].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let c=$c(n,Bc(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=c}function TS(n,e,t,r,i,o){let s=Jt(n,e);MS(e[st],s,o,n.value,t,r,i)}function MS(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let c=s==null?Gn(o):s(o,r||"",i);n.setAttribute(e,i,c,t)}}function AS(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let c=0;c<s.length;){let l=s[c++],u=s[c++],m=s[c++],g=s[c++];C_(r,t,l,u,m,g)}}function PS(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let c=0;c<s.length;c+=3)if(s[c]===e){r.push(o,s[c+1],s[c+2],t[i+1]);break}}i+=2}return r}function O_(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function R_(n,e){let t=n.contentQueries;if(t!==null){let r=Se(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let c=n.data[s];Uh(o),c.contentQueries(2,e[s],s)}}}finally{Se(r)}}}function $c(n,e){return n[fs]?n[xv][dn]=e:n[fs]=e,n[xv]=e,e}function ih(n,e,t){Uh(0);let r=Se(null);try{e(n,t)}finally{Se(r)}}function k_(n){return n[hs]||(n[hs]=[])}function F_(n){return n.cleanup||(n.cleanup=[])}function V_(n,e){let t=n[Xi],r=t?t.get(Kn,null):null;r&&r.handleError(e)}function sf(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],c=t[o++],l=t[o++],u=e[s],m=n.data[s];C_(m,u,r,c,l,i)}}function af(n,e,t){let r=A0(e,n);U1(n[st],r,t)}function NS(n,e){let t=Pr(e,n),r=t[he];OS(r,t);let i=t[Jn];i!==null&&t[pc]===null&&(t[pc]=Xh(i,t[Xi])),cf(r,t,t[hn])}function OS(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function cf(n,e,t){$h(e);try{let r=n.viewQuery;r!==null&&ih(1,r,t);let i=n.template;i!==null&&I_(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Wn]?.finishViewCreation(n),n.staticContentQueries&&R_(n,e),n.staticViewQueries&&ih(2,n.viewQuery,t);let o=n.components;o!==null&&RS(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ie]&=-5,zh()}}function RS(n,e){for(let t=0;t<e.length;t++)NS(n,e[t])}function kS(n,e,t,r){let i=Se(null);try{let o=e.tView,c=n[ie]&4096?4096:16,l=Bc(n,o,t,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];l[bs]=u;let m=n[Wn];return m!==null&&(l[Wn]=m.createEmbeddedView(o)),cf(o,l,t),l}finally{Se(i)}}function Vv(n,e){return!e||e.firstChild===null||i_(n)}function FS(n,e,t,r=!0){let i=e[he];if(q1(i,e,n,t),r){let s=nh(t,n),c=e[st],l=tf(c,n[ui]);l!==null&&z1(i,n[pn],c,e,l,s)}let o=e[pc];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Ec(n,e,t,r,i=!1){for(;t!==null;){let o=e[t.index];o!==null&&r.push(Pn(o)),Xn(o)&&VS(o,r);let s=t.type;if(s&8)Ec(n,e,t.child,r);else if(s&32){let c=ef(t,e),l;for(;l=c();)r.push(l)}else if(s&16){let c=v_(e,t);if(Array.isArray(c))r.push(...c);else{let l=ms(e[An]);Ec(l[he],l,c,r,!0)}}t=i?t.projectionNext:t.next}return r}function VS(n,e){for(let t=Ft;t<n.length;t++){let r=n[t],i=r[he].firstChild;i!==null&&Ec(r[he],r,i,e)}n[ui]!==n[Jn]&&e.push(n[ui])}var L_=[];function LS(n){return n[li]??jS(n)}function jS(n){let e=L_.pop()??Object.create(US);return e.lView=n,e}function BS(n){n.lView[li]!==n&&(n.lView=null,L_.push(n))}var US=ue(J({},Fy),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{ps(n.lView)},consumerOnSignalRead(){this.lView[li]=this}}),j_=100;function B_(n,e=!0,t=0){let r=n[fn],i=r.rendererFactory,o=!1;o||i.begin?.();try{$S(n,t)}catch(s){throw e&&V_(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function $S(n,e){oh(n,e);let t=0;for(;jh(n);){if(t===j_)throw new de(103,!1);t++,oh(n,1)}}function zS(n,e,t,r){let i=e[ie];if((i&256)===256)return;let o=!1;!o&&e[fn].inlineEffectRunner?.flush(),$h(e);let s=null,c=null;!o&&HS(n)&&(c=LS(e),s=Vy(c));try{N0(e),Zx(n.bindingStartIndex),t!==null&&I_(n,e,t,2,r);let l=(i&3)===3;if(!o)if(l){let g=n.preOrderCheckHooks;g!==null&&oc(e,g,null)}else{let g=n.preOrderHooks;g!==null&&sc(e,g,0,null),Dd(e,0)}if(qS(e),U_(e,0),n.contentQueries!==null&&R_(n,e),!o)if(l){let g=n.contentCheckHooks;g!==null&&oc(e,g)}else{let g=n.contentHooks;g!==null&&sc(e,g,1),Dd(e,1)}aS(n,e);let u=n.components;u!==null&&z_(e,u,0);let m=n.viewQuery;if(m!==null&&ih(2,m,r),!o)if(l){let g=n.viewCheckHooks;g!==null&&oc(e,g)}else{let g=n.viewHooks;g!==null&&sc(e,g,2),Dd(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Id]){for(let g of e[Id])g();e[Id]=null}o||(e[ie]&=-73)}catch(l){throw ps(e),l}finally{c!==null&&(Ly(c,s),BS(c)),zh()}}function HS(n){return n.type!==2}function U_(n,e){for(let t=s_(n);t!==null;t=a_(t))for(let r=Ft;r<t.length;r++){let i=t[r];$_(i,e)}}function qS(n){for(let e=s_(n);e!==null;e=a_(e)){if(!(e[ie]&kh.HasTransplantedViews))continue;let t=e[Zi];for(let r=0;r<t.length;r++){let i=t[r],o=i[vt];Ux(i)}}}function GS(n,e,t){let r=Pr(e,n);$_(r,t)}function $_(n,e){Lh(n)&&oh(n,e)}function oh(n,e){let r=n[he],i=n[ie],o=n[li],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&cd(o)),o&&(o.dirty=!1),n[ie]&=-9217,s)zS(r,n,r.template,n[hn]);else if(i&8192){U_(n,1);let c=r.components;c!==null&&z_(n,c,1)}}function z_(n,e,t){for(let r=0;r<e.length;r++)GS(n,e[r],t)}function lf(n){for(n[fn].changeDetectionScheduler?.notify();n;){n[ie]|=64;let e=ms(n);if(Px(n)&&!e)return n;n=e}return null}var mi=class{get rootNodes(){let e=this._lView,t=e[he];return Ec(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[hn]}set context(e){this._lView[hn]=e}get destroyed(){return(this._lView[ie]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[vt];if(Xn(e)){let t=e[mc],r=t?t.indexOf(this):-1;r>-1&&(th(e,r),hc(t,r))}this._attachedToViewContainer=!1}g_(this._lView[he],this._lView)}onDestroy(e){O0(this._lView,e)}markForCheck(){lf(this._cdRefInjectingView||this._lView)}detach(){this._lView[ie]&=-129}reattach(){Gd(this._lView),this._lView[ie]|=128}detectChanges(){this._lView[ie]|=1024,B_(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new de(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,p_(this._lView[he],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new de(902,!1);this._appRef=e,Gd(this._lView)}},gi=(()=>{class n{static{this.__NG_ELEMENT_ID__=QS}}return n})(),WS=gi,KS=class extends WS{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=kS(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new mi(i)}};function QS(){return zc(Lt(),Ie())}function zc(n,e){return n.type&4?new KS(e,n,ro(n,e)):null}var f4=new RegExp(`^(\\d+)*(${O1}|${N1})*(.*)`);var YS=()=>null;function Lv(n,e){return YS(n,e)}var sh=class{},ah=class{},Ic=class{};function JS(n){let e=Error(`No component factory found for ${kt(n)}.`);return e[XS]=n,e}var XS="ngComponent";var ch=class{resolveComponentFactory(e){throw JS(e)}},uf=(()=>{class n{static{this.NULL=new ch}}return n})(),gs=class{},kr=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>ZS()}}return n})();function ZS(){let n=Ie(),e=Lt(),t=Pr(e.index,n);return(si(t)?t:n)[st]}var eT=(()=>{class n{static{this.\u0275prov=me({token:n,providedIn:"root",factory:()=>null})}}return n})(),Ad={};var jv=new Set;function df(n){jv.has(n)||(jv.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function Bv(...n){}function tT(){let n=typeof qn.requestAnimationFrame=="function",e=qn[n?"requestAnimationFrame":"setTimeout"],t=qn[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}var yt=class n{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new un(!1),this.onMicrotaskEmpty=new un(!1),this.onStable=new un(!1),this.onError=new un(!1),typeof Zone>"u")throw new de(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=tT().nativeRequestAnimationFrame,iT(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new de(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new de(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,nT,Bv,Bv);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},nT={};function hf(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function rT(n){n.isCheckStableRunning||n.lastRequestAnimationFrameId!==-1||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(qn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,lh(n),n.isCheckStableRunning=!0,hf(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),lh(n))}function iT(n){let e=()=>{rT(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,s,c)=>{if(oT(c))return t.invokeTask(i,o,s,c);try{return Uv(n),t.invokeTask(i,o,s,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),$v(n)}},onInvoke:(t,r,i,o,s,c,l)=>{try{return Uv(n),t.invoke(i,o,s,c,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),$v(n)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,lh(n),hf(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function lh(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.lastRequestAnimationFrameId!==-1?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Uv(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function $v(n){n._nesting--,hf(n)}function oT(n){return!Array.isArray(n)||n.length!==1?!1:n[0].data?.__ignore_ng_zone__===!0}var H_=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let t=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of t)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=me({token:n,providedIn:"root",factory:()=>new n})}}return n})();function uh(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let c=e[s];if(typeof c=="number")o=c;else if(o==1)i=gv(i,c);else if(o==2){let l=c,u=e[++s];r=gv(r,l+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var dh=class extends uf{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Yi(e);return new Dc(t,this.ngModule)}};function zv(n){let e=[];for(let t in n){if(!n.hasOwnProperty(t))continue;let r=n[t];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:t})}return e}function sT(n){let e=n.toLowerCase();return e==="svg"?kx:e==="math"?Fx:null}var hh=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Pc(r);let i=this.injector.get(e,Ad,r);return i!==Ad||t===Ad?i:this.parentInjector.get(e,t,r)}},Dc=class extends Ic{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=zv(e.inputs);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return zv(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=hx(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=Se(null);try{i=i||this.ngModule;let s=i instanceof Mn?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let c=s?new hh(e,s):e,l=c.get(gs,null);if(l===null)throw new de(407,!1);let u=c.get(eT,null),m=c.get(H_,null),g=c.get(sh,null),b={rendererFactory:l,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:m,changeDetectionScheduler:g},C=l.createRenderer(null,this.componentDef),O=this.componentDef.selectors[0][0]||"div",R=r?uS(C,r,this.componentDef.encapsulation,c):f_(C,O,sT(O)),k=512;this.componentDef.signals?k|=4096:this.componentDef.onPush||(k|=16);let q=null;R!==null&&(q=Xh(R,c,!0));let re=of(0,null,null,1,0,null,null,null,null,null,null),Q=Bc(null,re,null,k,null,null,b,C,c,null,q);$h(Q);let Ee,ke;try{let De=this.componentDef,x,w=null;De.findHostDirectiveDefs?(x=[],w=new Map,De.findHostDirectiveDefs(De,x,w),x.push(De)):x=[De];let I=aT(Q,R),S=cT(I,R,De,x,Q,b,C);ke=P0(re,Yt),R&&dT(C,De,R,r),t!==void 0&&hT(ke,this.ngContentSelectors,t),Ee=uT(S,De,x,w,Q,[fT]),cf(re,Q,null)}finally{zh()}return new fh(this.componentType,Ee,ro(ke,Q),Q,ke)}finally{Se(o)}}},fh=class extends ah{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new mi(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;sf(o[he],o,i,e,t),this.previousInputValues.set(e,t);let s=Pr(this._tNode.index,o);lf(s)}}get injector(){return new ai(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function aT(n,e){let t=n[he],r=Yt;return n[r]=e,Uc(t,r,2,"#host",null)}function cT(n,e,t,r,i,o,s){let c=i[he];lT(r,n,e,s);let l=null;e!==null&&(l=Xh(e,i[Xi]));let u=o.rendererFactory.createRenderer(e,t),m=16;t.signals?m=4096:t.onPush&&(m=64);let g=Bc(i,T_(t),null,m,i[n.index],n,o,u,null,null,l);return c.firstCreatePass&&rh(c,n,r.length-1),$c(i,g),i[n.index]=g}function lT(n,e,t,r){for(let i of n)e.mergedAttrs=us(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(uh(e,e.mergedAttrs,!0),t!==null&&b_(r,t,e))}function uT(n,e,t,r,i,o){let s=Lt(),c=i[he],l=Jt(s,i);P_(c,i,s,t,null,r);for(let m=0;m<t.length;m++){let g=s.directiveStart+m,b=fi(i,c,g,s);pi(b,i)}N_(c,i,s),l&&pi(l,i);let u=fi(i,c,s.directiveStart+s.componentOffset,s);if(n[hn]=i[hn]=u,o!==null)for(let m of o)m(u,e);return D_(c,s,i),u}function dT(n,e,t,r){if(r)Ud(n,t,["ng-version","17.3.12"]);else{let{attrs:i,classes:o}=fx(e.selectors[0]);i&&Ud(n,t,i),o&&o.length>0&&__(n,t,o.join(" "))}}function hT(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function fT(){let n=Lt();Wh(Ie()[he],n)}var io=(()=>{class n{static{this.__NG_ELEMENT_ID__=pT}}return n})();function pT(){let n=Lt();return G_(n,Ie())}var mT=io,q_=class extends mT{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ro(this._hostTNode,this._hostLView)}get injector(){return new ai(this._hostTNode,this._hostLView)}get parentInjector(){let e=Kh(this._hostTNode,this._hostLView);if(W0(e)){let t=vc(e,this._hostLView),r=yc(e),i=t[he].data[r+8];return new ai(i,t)}else return new ai(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=Hv(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ft}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Lv(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(c,i,Vv(this._hostTNode,s)),c}createComponent(e,t,r,i,o){let s=e&&!Ax(e),c;if(s)c=t;else{let O=t||{};c=O.index,r=O.injector,i=O.projectableNodes,o=O.environmentInjector||O.ngModuleRef}let l=s?e:new Dc(Yi(e)),u=r||this.parentInjector;if(!o&&l.ngModule==null){let R=(s?u:this.parentInjector).get(Mn,null);R&&(o=R)}let m=Yi(l.componentType??{}),g=Lv(this._lContainer,m?.id??null),b=g?.firstChild??null,C=l.create(u,i,b,o);return this.insertImpl(C.hostView,c,Vv(this._hostTNode,g)),C}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(Bx(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let l=i[vt],u=new q_(l,l[pn],l[vt]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return FS(s,i,o,r),e.attachToViewContainerRef(),l0(Pd(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=Hv(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=th(this._lContainer,t);r&&(hc(Pd(this._lContainer),t),g_(r[he],r))}detach(e){let t=this._adjustIndex(e,-1),r=th(this._lContainer,t);return r&&hc(Pd(this._lContainer),t)!=null?new mi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Hv(n){return n[mc]}function Pd(n){return n[mc]||(n[mc]=[])}function G_(n,e){let t,r=e[n.index];return Xn(r)?t=r:(t=O_(r,e,null,n),e[n.index]=t,$c(e,t)),yT(t,e,n,r),new q_(t,n,e)}function gT(n,e){let t=n[st],r=t.createComment(""),i=Jt(e,n),o=tf(t,i);return Cc(t,o,r,X1(t,i),!1),r}var yT=bT,vT=()=>!1;function _T(n,e,t){return vT(n,e,t)}function bT(n,e,t,r){if(n[ui])return;let i;t.type&8?i=Pn(r):i=gT(e,t),n[ui]=i}var ph=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},mh=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),c=this.queries[s.indexInDeclarationView];i.push(c.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)ff(e,t).matches!==null&&this.queries[t].setDirty()}},gh=class{constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=TT(e):this.predicate=e}},yh=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},vh=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,wT(t,o)),this.matchTNodeWithReadOption(e,t,ac(t,e,o,!1,!1))}else r===gi?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,ac(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Xt||i===io||i===gi&&t.type&4)this.addMatch(t.index,-2);else{let o=ac(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function wT(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function CT(n,e){return n.type&11?ro(n,e):n.type&4?zc(n,e):null}function ET(n,e,t,r){return t===-1?CT(e,n):t===-2?IT(n,e,r):fi(n,n[he],t,e)}function IT(n,e,t){if(t===Xt)return ro(e,n);if(t===gi)return zc(e,n);if(t===io)return G_(e,n)}function W_(n,e,t,r){let i=e[Wn].queries[r];if(i.matches===null){let o=n.data,s=t.matches,c=[];for(let l=0;s!==null&&l<s.length;l+=2){let u=s[l];if(u<0)c.push(null);else{let m=o[u];c.push(ET(e,m,s[l+1],t.metadata.read))}}i.matches=c}return i.matches}function _h(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=W_(n,e,i,t);for(let c=0;c<o.length;c+=2){let l=o[c];if(l>0)r.push(s[c/2]);else{let u=o[c+1],m=e[-l];for(let g=Ft;g<m.length;g++){let b=m[g];b[bs]===b[vt]&&_h(b[he],b,u,r)}if(m[Zi]!==null){let g=m[Zi];for(let b=0;b<g.length;b++){let C=g[b];_h(C[he],C,u,r)}}}}}return r}function DT(n,e){return n[Wn].queries[e].queryList}function xT(n,e,t){let r=new Zd((t&4)===4);return fS(n,e,r,r.destroy),(e[Wn]??=new mh).queries.push(new ph(r))-1}function ST(n,e,t){let r=Ct();return r.firstCreatePass&&(MT(r,new gh(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),xT(r,Ie(),e)}function TT(n){return n.split(",").map(e=>e.trim())}function MT(n,e,t){n.queries===null&&(n.queries=new yh),n.queries.track(new vh(e,t))}function ff(n,e){return n.queries.getByIndex(e)}function AT(n,e){let t=n[he],r=ff(t,e);return r.crossesNgTemplate?_h(t,n,e,[]):W_(t,n,r,e)}function PT(n){return typeof n=="function"&&n[ad]!==void 0}function K_(n){return PT(n)&&typeof n.set=="function"}function NT(n){return Object.getPrototypeOf(n.prototype).constructor}function Tt(n){let e=NT(n.type),t=!0,r=[n];for(;e;){let i;if(Ar(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new de(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=nc(n.inputs),s.inputTransforms=nc(n.inputTransforms),s.declaredInputs=nc(n.declaredInputs),s.outputs=nc(n.outputs);let c=i.hostBindings;c&&VT(n,c);let l=i.viewQuery,u=i.contentQueries;if(l&&kT(n,l),u&&FT(n,u),OT(n,i),PD(n.outputs,i.outputs),Ar(i)&&i.data.animation){let m=n.data;m.animation=(m.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let c=o[s];c&&c.ngInherit&&c(n),c===Tt&&(t=!1)}}e=Object.getPrototypeOf(e)}RT(r)}function OT(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function RT(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=us(i.hostAttrs,t=us(t,i.hostAttrs))}}function nc(n){return n===Qi?{}:n===Kt?[]:n}function kT(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function FT(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function VT(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}var eo=class{};var xc=class extends eo{constructor(e){super(),this.componentFactoryResolver=new dh(this),this.instance=null;let t=new ds([...e.providers,{provide:eo,useValue:this},{provide:uf,useValue:this.componentFactoryResolver}],e.parent||Rh(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function LT(n,e,t=null){return new xc({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var Hc=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Je(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Q_(n){return BT(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function jT(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function BT(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Y_(n,e,t){return n[e]=t}function Yn(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function pf(n,e,t,r){let i=Yn(n,e,t);return Yn(n,e+1,r)||i}function UT(n,e,t,r,i){let o=pf(n,e,t,r);return Yn(n,e+2,i)||o}function $T(n){return(n.flags&32)===32}function zT(n,e,t,r,i,o,s,c,l){let u=e.consts,m=Uc(e,n,4,s||null,gc(u,c));A_(e,t,m,gc(u,l)),Wh(e,m);let g=m.tView=of(2,m,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,m),g.queries=e.queries.embeddedTView(m)),m}function z(n,e,t,r,i,o,s,c){let l=Ie(),u=Ct(),m=n+Yt,g=u.firstCreatePass?zT(m,u,l,e,t,r,i,o,s):u.data[m];Cs(g,!1);let b=HT(u,l,g,n);qh()&&nf(u,l,b,g),pi(b,l);let C=O_(b,l,b,g);return l[m]=C,$c(l,C),_T(C,g,l),Fh(g)&&x_(u,l,g),s!=null&&S_(l,g,c),z}var HT=qT;function qT(n,e,t,r){return Gh(!0),e[st].createComment("")}function Ds(n,e,t,r){let i=Ie(),o=Vc();if(Yn(i,o,e)){let s=Ct(),c=Hh();TS(c,i,n,e,t,r)}return Ds}function GT(n,e,t,r){return Yn(n,Vc(),t)?e+Gn(t)+r:mn}function WT(n,e,t,r,i,o){let s=L0(),c=pf(n,s,t,i);return Bh(2),c?e+Gn(t)+r+Gn(i)+o:mn}function KT(n,e,t,r,i,o,s,c){let l=L0(),u=UT(n,l,t,i,s);return Bh(3),u?e+Gn(t)+r+Gn(i)+o+Gn(s)+c:mn}function rc(n,e){return n<<17|e<<2}function yi(n){return n>>17&32767}function QT(n){return(n&2)==2}function YT(n,e){return n&131071|e<<17}function bh(n){return n|2}function to(n){return(n&131068)>>2}function Nd(n,e){return n&-131069|e<<2}function JT(n){return(n&1)===1}function wh(n){return n|1}function XT(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,c=yi(s),l=to(s);n[r]=t;let u=!1,m;if(Array.isArray(t)){let g=t;m=g[1],(m===null||_s(g,m)>0)&&(u=!0)}else m=t;if(i)if(l!==0){let b=yi(n[c+1]);n[r+1]=rc(b,c),b!==0&&(n[b+1]=Nd(n[b+1],r)),n[c+1]=YT(n[c+1],r)}else n[r+1]=rc(c,0),c!==0&&(n[c+1]=Nd(n[c+1],r)),c=r;else n[r+1]=rc(l,0),c===0?c=r:n[l+1]=Nd(n[l+1],r),l=r;u&&(n[r+1]=bh(n[r+1])),qv(n,m,r,!0),qv(n,m,r,!1),ZT(e,m,n,r,o),s=rc(c,l),o?e.classBindings=s:e.styleBindings=s}function ZT(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&_s(o,e)>=0&&(t[r+1]=wh(t[r+1]))}function qv(n,e,t,r){let i=n[t+1],o=e===null,s=r?yi(i):to(i),c=!1;for(;s!==0&&(c===!1||o);){let l=n[s],u=n[s+1];eM(l,e)&&(c=!0,n[s+1]=r?wh(u):bh(u)),s=r?yi(u):to(u)}c&&(n[t+1]=r?bh(i):wh(i))}function eM(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?_s(n,e)>=0:!1}function A(n,e,t){let r=Ie(),i=Vc();if(Yn(r,i,e)){let o=Ct(),s=Hh();M_(o,s,r,n,e,r[st],t,!1)}return A}function Gv(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";sf(n,t,o[s],s,r)}function gn(n,e,t){return J_(n,e,t,!1),gn}function be(n,e){return J_(n,e,null,!0),be}function J_(n,e,t,r){let i=Ie(),o=Ct(),s=Bh(2);if(o.firstUpdatePass&&nM(o,n,s,r),e!==mn&&Yn(i,s,e)){let c=o.data[Nr()];aM(o,c,i,i[st],n,i[s+1]=cM(e,t),r,s)}}function tM(n,e){return e>=n.expandoStartIndex}function nM(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Nr()],s=tM(n,t);lM(o,r)&&e===null&&!s&&(e=!1),e=rM(i,o,e,r),XT(i,o,e,t,s,r)}}function rM(n,e,t,r){let i=r1(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Od(null,n,e,t,r),t=ys(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Od(i,n,e,t,r),o===null){let l=iM(n,e,r);l!==void 0&&Array.isArray(l)&&(l=Od(null,n,e,l[1],r),l=ys(l,e.attrs,r),oM(n,e,r,l))}else o=sM(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function iM(n,e,t){let r=t?e.classBindings:e.styleBindings;if(to(r)!==0)return n[yi(r)]}function oM(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[yi(i)]=r}function sM(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=ys(r,s,t)}return ys(r,e.attrs,t)}function Od(n,e,t,r,i){let o=null,s=t.directiveEnd,c=t.directiveStylingLast;for(c===-1?c=t.directiveStart:c++;c<s&&(o=e[c],r=ys(r,o.hostAttrs,i),o!==n);)c++;return n!==null&&(t.directiveStylingLast=c),r}function ys(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),ZD(n,s,t?!0:e[++o]))}return n===void 0?null:n}function aM(n,e,t,r,i,o,s,c){if(!(e.type&3))return;let l=n.data,u=l[c+1],m=JT(u)?Wv(l,e,t,i,to(u),s):void 0;if(!Sc(m)){Sc(o)||QT(u)&&(o=Wv(l,null,t,i,c,s));let g=A0(Nr(),t);oS(r,s,g,i,o)}}function Wv(n,e,t,r,i,o){let s=e===null,c;for(;i>0;){let l=n[i],u=Array.isArray(l),m=u?l[1]:l,g=m===null,b=t[i+1];b===mn&&(b=g?Kt:void 0);let C=g?Cd(b,r):m===r?b:void 0;if(u&&!Sc(C)&&(C=Cd(l,r)),Sc(C)&&(c=C,s))return c;let O=n[i+1];i=s?yi(O):to(O)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(c=Cd(l,r))}return c}function Sc(n){return n!==void 0}function cM(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=kt(Lc(n)))),n}function lM(n,e){return(n.flags&(e?8:16))!==0}function uM(n,e,t,r,i,o){let s=e.consts,c=gc(s,i),l=Uc(e,n,2,r,c);return A_(e,t,l,gc(s,o)),l.attrs!==null&&uh(l,l.attrs,!1),l.mergedAttrs!==null&&uh(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function f(n,e,t,r){let i=Ie(),o=Ct(),s=Yt+n,c=i[st],l=o.firstCreatePass?uM(s,o,i,e,t,r):o.data[s],u=dM(o,i,l,c,e,n);i[s]=u;let m=Fh(l);return Cs(l,!0),b_(c,u,l),!$T(l)&&qh()&&nf(o,i,u,l),Hx()===0&&pi(u,i),qx(),m&&(x_(o,i,l),D_(o,l,i)),r!==null&&S_(i,l),f}function h(){let n=Lt();F0()?Jx():(n=n.parent,Cs(n,!1));let e=n;Kx(e)&&Qx(),Gx();let t=Ct();return t.firstCreatePass&&(Wh(t,n),D0(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&u1(e)&&Gv(t,e,Ie(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&d1(e)&&Gv(t,e,Ie(),e.stylesWithoutHost,!1),h}function Te(n,e,t,r){return f(n,e,t,r),h(),Te}var dM=(n,e,t,r,i,o)=>(Gh(!0),f_(r,i,s1()));function se(){return Ie()}var oi=void 0;function hM(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var fM=["en",[["a","p"],["AM","PM"],oi],[["AM","PM"],oi,oi],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],oi,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],oi,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",oi,"{1} 'at' {0}",oi],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",hM],Rd={};function jt(n){let e=pM(n),t=Kv(e);if(t)return t;let r=e.split("-")[0];if(t=Kv(r),t)return t;if(r==="en")return fM;throw new de(701,!1)}function Kv(n){return n in Rd||(Rd[n]=qn.ng&&qn.ng.common&&qn.ng.common.locales&&qn.ng.common.locales[n]),Rd[n]}var Ke=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Ke||{});function pM(n){return n.toLowerCase().replace(/_/g,"-")}var Tc="en-US";var mM=Tc;function gM(n){typeof n=="string"&&(mM=n.toLowerCase().replace(/_/g,"-"))}function U(n,e,t,r){let i=Ie(),o=Ct(),s=Lt();return X_(o,i,i[st],s,n,e,r),U}function yM(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let c=e[hs],l=i[o+2];return c.length>l?c[l]:null}typeof s=="string"&&(o+=2)}return null}function X_(n,e,t,r,i,o,s){let c=Fh(r),u=n.firstCreatePass&&F_(n),m=e[hn],g=k_(e),b=!0;if(r.type&3||s){let R=Jt(r,e),k=s?s(R):R,q=g.length,re=s?Ee=>s(Pn(Ee[r.index])):r.index,Q=null;if(!s&&c&&(Q=yM(n,e,i,r.index)),Q!==null){let Ee=Q.__ngLastListenerFn__||Q;Ee.__ngNextListenerFn__=o,Q.__ngLastListenerFn__=o,b=!1}else{o=Yv(r,e,m,o,!1);let Ee=t.listen(k,i,o);g.push(o,Ee),u&&u.push(i,re,q,q+1)}}else o=Yv(r,e,m,o,!1);let C=r.outputs,O;if(b&&C!==null&&(O=C[i])){let R=O.length;if(R)for(let k=0;k<R;k+=2){let q=O[k],re=O[k+1],ke=e[q][re].subscribe(o),De=g.length;g.push(o,ke),u&&u.push(i,r.index,De,-(De+1))}}}function Qv(n,e,t,r){let i=Se(null);try{return xn(6,e,t),t(r)!==!1}catch(o){return V_(n,o),!1}finally{xn(7,e,t),Se(i)}}function Yv(n,e,t,r,i){return function o(s){if(s===Function)return r;let c=n.componentOffset>-1?Pr(n.index,e):e;lf(c);let l=Qv(e,t,r,s),u=o.__ngNextListenerFn__;for(;u;)l=Qv(e,t,u,s)&&l,u=u.__ngNextListenerFn__;return i&&l===!1&&s.preventDefault(),l}}function P(n=1){return o1(n)}function mf(n,e,t){ST(n,e,t)}function gf(n){let e=Ie(),t=Ct(),r=j0();Uh(r+1);let i=ff(t,r);if(n.dirty&&jx(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=AT(e,r);n.reset(o,I1),n.notifyOnChanges()}return!0}return!1}function yf(){return DT(Ie(),j0())}function vM(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Zn(n){let e=Xx();return Vh(e,Yt+n)}function y(n,e=""){let t=Ie(),r=Ct(),i=n+Yt,o=r.firstCreatePass?Uc(r,i,1,e,null):r.data[i],s=_M(r,t,o,e,n);t[i]=s,qh()&&nf(r,t,s,o),Cs(o,!1)}var _M=(n,e,t,r,i)=>(Gh(!0),B1(e[st],r));function G(n){return Y("",n,""),G}function Y(n,e,t){let r=Ie(),i=GT(r,n,e,t);return i!==mn&&af(r,Nr(),i),Y}function er(n,e,t,r,i){let o=Ie(),s=WT(o,n,e,t,r,i);return s!==mn&&af(o,Nr(),s),er}function vf(n,e,t,r,i,o,s){let c=Ie(),l=KT(c,n,e,t,r,i,o,s);return l!==mn&&af(c,Nr(),l),vf}function X(n,e,t){K_(e)&&(e=e());let r=Ie(),i=Vc();if(Yn(r,i,e)){let o=Ct(),s=Hh();M_(o,s,r,n,e,r[st],t,!1)}return X}function te(n,e){let t=K_(n);return t&&n.set(e),t}function Z(n,e){let t=Ie(),r=Ct(),i=Lt();return X_(r,t,t[st],i,n,e),Z}function bM(n,e,t){let r=Ct();if(r.firstCreatePass){let i=Ar(n);Ch(t,r.data,r.blueprint,i,!0),Ch(e,r.data,r.blueprint,i,!1)}}function Ch(n,e,t,r,i){if(n=St(n),Array.isArray(n))for(let o=0;o<n.length;o++)Ch(n[o],e,t,r,i);else{let o=Ct(),s=Ie(),c=Lt(),l=Ji(n)?n:St(n.provide),u=w0(n),m=c.providerIndexes&1048575,g=c.directiveStart,b=c.providerIndexes>>20;if(Ji(n)||!n.multi){let C=new hi(u,i,W),O=Fd(l,e,i?m:m+b,g);O===-1?(Qd(bc(c,s),o,l),kd(o,n,e.length),e.push(l),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(C),s.push(C)):(t[O]=C,s[O]=C)}else{let C=Fd(l,e,m+b,g),O=Fd(l,e,m,m+b),R=C>=0&&t[C],k=O>=0&&t[O];if(i&&!k||!i&&!R){Qd(bc(c,s),o,l);let q=EM(i?CM:wM,t.length,i,r,u);!i&&k&&(t[O].providerFactory=q),kd(o,n,e.length,0),e.push(l),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(q),s.push(q)}else{let q=Z_(t[i?O:C],u,!i&&r);kd(o,n,C>-1?C:O,q)}!i&&r&&k&&t[O].componentProviders++}}}function kd(n,e,t,r){let i=Ji(e),o=Cx(e);if(i||o){let l=(o?St(e.useClass):e).prototype.ngOnDestroy;if(l){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let m=u.indexOf(t);m===-1?u.push(t,[r,l]):u[m+1].push(r,l)}else u.push(t,l)}}}function Z_(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Fd(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function wM(n,e,t,r){return Eh(this.multi,[])}function CM(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,c=fi(t,t[he],this.providerFactory.index,r);o=c.slice(0,s),Eh(i,o);for(let l=s;l<c.length;l++)o.push(c[l])}else o=[],Eh(i,o);return o}function Eh(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function EM(n,e,t,r,i){let o=new hi(n,t,W);return o.multi=[],o.index=e,o.componentProviders=0,Z_(o,i,r&&!t),o}function yn(n,e=[]){return t=>{t.providersResolver=(r,i)=>bM(r,i?i(n):n,e)}}var IM=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=v0(!1,t.type),i=r.length>0?LT([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=me({token:n,providedIn:"environment",factory:()=>new n(oe(Mn))})}}return n})();function ze(n){df("NgStandalone"),n.getStandaloneInjector=e=>e.get(IM).getOrCreateStandaloneInjector(n)}function eb(n,e){let t=n[e];return t===mn?void 0:t}function DM(n,e,t,r,i,o){let s=e+t;return Yn(n,s,i)?Y_(n,s+1,o?r.call(o,i):r(i)):eb(n,s+1)}function xM(n,e,t,r,i,o,s){let c=e+t;return pf(n,c,i,o)?Y_(n,c+2,s?r.call(s,i,o):r(i,o)):eb(n,c+2)}function xe(n,e){let t=Ct(),r,i=n+Yt;t.firstCreatePass?(r=SM(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=ci(r.type,!0)),s,c=Ot(W);try{let l=_c(!1),u=o();return _c(l),vM(t,Ie(),i,u),u}finally{Ot(c)}}function SM(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function xs(n,e,t){let r=n+Yt,i=Ie(),o=Vh(i,r);return tb(i,r)?DM(i,V0(),e,o.transform,t,o):o.transform(t)}function Ne(n,e,t,r){let i=n+Yt,o=Ie(),s=Vh(o,i);return tb(o,i)?xM(o,V0(),e,s.transform,t,r,s):s.transform(t,r)}function tb(n,e){return n[he].data[e].pure}function tr(n,e){return zc(n,e)}var nb=new pe("");function Ss(n){return!!n&&typeof n.then=="function"}function rb(n){return!!n&&typeof n.subscribe=="function"}var TM=new pe(""),ib=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=Fe(TM,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(Ss(o))t.push(o);else if(rb(o)){let s=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ob=new pe("");function MM(){By(()=>{throw new de(600,!1)})}function AM(n){return n.isBoundToModule}function PM(n,e,t){try{let r=t();return Ss(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var qc=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Fe(n_),this.afterRenderEffectManager=Fe(H_),this.externalTestViews=new Set,this.beforeRender=new In,this.afterTick=new In,this.componentTypes=[],this.components=[],this.isStable=Fe(Hc).hasPendingTasks.pipe(lt(t=>!t)),this._injector=Fe(Mn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Ic;if(!this._injector.get(ib).done){let b=!i&&gx(t),C=!1;throw new de(405,C)}let s;i?s=t:s=this._injector.get(uf).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let c=AM(s)?void 0:this._injector.get(eo),l=r||s.selector,u=s.create(Es.NULL,[],l,c),m=u.location.nativeElement,g=u.injector.get(nb,null);return g?.registerApplication(m),u.onDestroy(()=>{this.detachView(u.hostView),Vd(this.components,u),g?.unregisterApplication(m)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(t){if(this._runningTick)throw new de(101,!1);let r=Se(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(t)}catch(i){this.internalErrorHandler(i)}finally{this.afterTick.next(),this._runningTick=!1,Se(r)}}detectChangesInAttachedViews(t){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===j_)throw new de(103,!1);if(t){let o=r===0;this.beforeRender.next(o);for(let{_lView:s,notifyErrorHandler:c}of this._views)NM(s,o,c)}if(r++,i.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Ih(o))&&(i.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Ih(o))))break}}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Vd(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(ob,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Vd(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new de(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Vd(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function NM(n,e,t){!e&&!Ih(n)||OM(n,t,e)}function Ih(n){return jh(n)}function OM(n,e,t){let r;t?(r=0,n[ie]|=1024):n[ie]&64?r=0:r=1,B_(n,e,r)}var RM=(()=>{class n{constructor(){this.zone=Fe(yt),this.applicationRef=Fe(qc)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function kM(n){return[{provide:yt,useFactory:n},{provide:ls,multi:!0,useFactory:()=>{let e=Fe(RM,{optional:!0});return()=>e.initialize()}},{provide:ls,multi:!0,useFactory:()=>{let e=Fe(jM);return()=>{e.initialize()}}},{provide:n_,useFactory:FM}]}function FM(){let n=Fe(yt),e=Fe(Kn);return t=>n.runOutsideAngular(()=>e.handleError(t))}function VM(n){let e=kM(()=>new yt(LM(n)));return Oc([[],e])}function LM(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var jM=(()=>{class n{constructor(){this.subscription=new Pt,this.initialized=!1,this.zone=Fe(yt),this.pendingTasks=Fe(Hc)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{yt.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{yt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function BM(){return typeof $localize<"u"&&$localize.locale||Tc}var Ts=new pe("",{providedIn:"root",factory:()=>Fe(Ts,_e.Optional|_e.SkipSelf)||BM()});var sb=new pe("");var lc=null;function UM(n=[],e){return Es.create({name:e,providers:[{provide:Rc,useValue:"platform"},{provide:sb,useValue:new Set([()=>lc=null])},...n]})}function $M(n=[]){if(lc)return lc;let e=UM(n);return lc=e,MM(),zM(e),e}function zM(n){n.get(Yh,null)?.forEach(t=>t())}var Gc=(()=>{class n{static{this.__NG_ELEMENT_ID__=HM}}return n})();function HM(n){return qM(Lt(),Ie(),(n&16)===16)}function qM(n,e,t){if(Fc(n)&&!t){let r=Pr(n.index,e);return new mi(r,r)}else if(n.type&47){let r=e[An];return new mi(r,e)}return null}var Dh=class{constructor(){}supports(e){return Q_(e)}create(e){return new xh(e)}},GM=(n,e)=>e,xh=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||GM}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<Jv(r,i,o)?t:r,c=Jv(s,i,o),l=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let u=c-i,m=l-i;if(u!=m){for(let b=0;b<u;b++){let C=b<o.length?o[b]:o[b]=0,O=C+b;m<=O&&O<u&&(o[b]=C+1)}let g=s.previousIndex;o[g]=m-u}}c!==l&&e(s,c,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!Q_(e))throw new de(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let c=0;c<this.length;c++)o=e[c],s=this._trackByFn(c,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,c),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,c)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,jT(e,c=>{s=this._trackByFn(i,c),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,c,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,c,s,i)),Object.is(t.item,c)||this._addIdentityChange(t,c)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Sh(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Mc),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Mc),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Sh=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Th=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Mc=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Th,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Jv(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function Xv(){return new _f([new Dh])}var _f=(()=>{class n{static{this.\u0275prov=me({token:n,providedIn:"root",factory:Xv})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||Xv()),deps:[[n,new QD,new c0]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new de(901,!1)}}return n})();function ab(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=$M(r),o=[VM(),...t||[]],c=new xc({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,l=c.get(yt);return l.run(()=>{c.resolveInjectorInitializers();let u=c.get(Kn,null),m;l.runOutsideAngular(()=>{m=l.onError.subscribe({next:C=>{u.handleError(C)}})});let g=()=>c.destroy(),b=i.get(sb);return b.add(g),c.onDestroy(()=>{m.unsubscribe(),b.delete(g)}),PM(u,l,()=>{let C=c.get(ib);return C.runInitializers(),C.donePromise.then(()=>{let O=c.get(Ts,Tc);gM(O||Tc);let R=c.get(qc);return e!==void 0&&R.bootstrap(e),R})})})}catch(e){return Promise.reject(e)}}function Wc(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var fb=null;function so(){return fb}function pb(n){fb??=n}var nl=class{};var Nn=new pe("");var mb=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(mb||{});var Mt=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Mt||{}),Re=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Re||{}),Bt=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Bt||{}),Ut={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function WM(n){return jt(n)[Ke.LocaleId]}function KM(n,e,t){let r=jt(n),i=[r[Ke.DayPeriodsFormat],r[Ke.DayPeriodsStandalone]],o=Zt(i,e);return Zt(o,t)}function QM(n,e,t){let r=jt(n),i=[r[Ke.DaysFormat],r[Ke.DaysStandalone]],o=Zt(i,e);return Zt(o,t)}function YM(n,e,t){let r=jt(n),i=[r[Ke.MonthsFormat],r[Ke.MonthsStandalone]],o=Zt(i,e);return Zt(o,t)}function JM(n,e){let r=jt(n)[Ke.Eras];return Zt(r,e)}function Kc(n,e){let t=jt(n);return Zt(t[Ke.DateFormat],e)}function Qc(n,e){let t=jt(n);return Zt(t[Ke.TimeFormat],e)}function Yc(n,e){let r=jt(n)[Ke.DateTimeFormat];return Zt(r,e)}function rr(n,e){let t=jt(n),r=t[Ke.NumberSymbols][e];if(typeof r>"u"){if(e===Ut.CurrencyDecimal)return t[Ke.NumberSymbols][Ut.Decimal];if(e===Ut.CurrencyGroup)return t[Ke.NumberSymbols][Ut.Group]}return r}function XM(n,e){return jt(n)[Ke.NumberFormats][e]}function gb(n){if(!n[Ke.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Ke.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function ZM(n){let e=jt(n);return gb(e),(e[Ke.ExtraData][2]||[]).map(r=>typeof r=="string"?bf(r):[bf(r[0]),bf(r[1])])}function eA(n,e,t){let r=jt(n);gb(r);let i=[r[Ke.ExtraData][0],r[Ke.ExtraData][1]],o=Zt(i,e)||[];return Zt(o,t)||[]}function Zt(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function bf(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var tA=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Jc={},nA=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,ir=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(ir||{}),Ae=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(Ae||{}),Me=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(Me||{});function rA(n,e,t,r){let i=hA(n);e=nr(t,e)||e;let s=[],c;for(;e;)if(c=nA.exec(e),c){s=s.concat(c.slice(1));let m=s.pop();if(!m)break;e=m}else{s.push(e);break}let l=i.getTimezoneOffset();r&&(l=vb(r,l),i=dA(i,r,!0));let u="";return s.forEach(m=>{let g=lA(m);u+=g?g(i,t,l):m==="''"?"'":m.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function rl(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function nr(n,e){let t=WM(n);if(Jc[t]??={},Jc[t][e])return Jc[t][e];let r="";switch(e){case"shortDate":r=Kc(n,Bt.Short);break;case"mediumDate":r=Kc(n,Bt.Medium);break;case"longDate":r=Kc(n,Bt.Long);break;case"fullDate":r=Kc(n,Bt.Full);break;case"shortTime":r=Qc(n,Bt.Short);break;case"mediumTime":r=Qc(n,Bt.Medium);break;case"longTime":r=Qc(n,Bt.Long);break;case"fullTime":r=Qc(n,Bt.Full);break;case"short":let i=nr(n,"shortTime"),o=nr(n,"shortDate");r=Xc(Yc(n,Bt.Short),[i,o]);break;case"medium":let s=nr(n,"mediumTime"),c=nr(n,"mediumDate");r=Xc(Yc(n,Bt.Medium),[s,c]);break;case"long":let l=nr(n,"longTime"),u=nr(n,"longDate");r=Xc(Yc(n,Bt.Long),[l,u]);break;case"full":let m=nr(n,"fullTime"),g=nr(n,"fullDate");r=Xc(Yc(n,Bt.Full),[m,g]);break}return r&&(Jc[t][e]=r),r}function Xc(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function vn(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function iA(n,e){return vn(n,3).substring(0,e)}function Xe(n,e,t=0,r=!1,i=!1){return function(o,s){let c=oA(n,o);if((t>0||c>-t)&&(c+=t),n===Ae.Hours)c===0&&t===-12&&(c=12);else if(n===Ae.FractionalSeconds)return iA(c,e);let l=rr(s,Ut.MinusSign);return vn(c,e,l,r,i)}}function oA(n,e){switch(n){case Ae.FullYear:return e.getFullYear();case Ae.Month:return e.getMonth();case Ae.Date:return e.getDate();case Ae.Hours:return e.getHours();case Ae.Minutes:return e.getMinutes();case Ae.Seconds:return e.getSeconds();case Ae.FractionalSeconds:return e.getMilliseconds();case Ae.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function Ve(n,e,t=Mt.Format,r=!1){return function(i,o){return sA(i,o,n,e,t,r)}}function sA(n,e,t,r,i,o){switch(t){case Me.Months:return YM(e,i,r)[n.getMonth()];case Me.Days:return QM(e,i,r)[n.getDay()];case Me.DayPeriods:let s=n.getHours(),c=n.getMinutes();if(o){let u=ZM(e),m=eA(e,i,r),g=u.findIndex(b=>{if(Array.isArray(b)){let[C,O]=b,R=s>=C.hours&&c>=C.minutes,k=s<O.hours||s===O.hours&&c<O.minutes;if(C.hours<O.hours){if(R&&k)return!0}else if(R||k)return!0}else if(b.hours===s&&b.minutes===c)return!0;return!1});if(g!==-1)return m[g]}return KM(e,i,r)[s<12?0:1];case Me.Eras:return JM(e,r)[n.getFullYear()<=0?0:1];default:let l=t;throw new Error(`unexpected translation type ${l}`)}}function Zc(n){return function(e,t,r){let i=-1*r,o=rr(t,Ut.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case ir.Short:return(i>=0?"+":"")+vn(s,2,o)+vn(Math.abs(i%60),2,o);case ir.ShortGMT:return"GMT"+(i>=0?"+":"")+vn(s,1,o);case ir.Long:return"GMT"+(i>=0?"+":"")+vn(s,2,o)+":"+vn(Math.abs(i%60),2,o);case ir.Extended:return r===0?"Z":(i>=0?"+":"")+vn(s,2,o)+":"+vn(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var aA=0,tl=4;function cA(n){let e=rl(n,aA,1).getDay();return rl(n,0,1+(e<=tl?tl:tl+7)-e)}function yb(n){let e=n.getDay(),t=e===0?-3:tl-e;return rl(n.getFullYear(),n.getMonth(),n.getDate()+t)}function wf(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=yb(t),s=cA(o.getFullYear()),c=o.getTime()-s.getTime();i=1+Math.round(c/6048e5)}return vn(i,n,rr(r,Ut.MinusSign))}}function el(n,e=!1){return function(t,r){let o=yb(t).getFullYear();return vn(o,n,rr(r,Ut.MinusSign),e)}}var Cf={};function lA(n){if(Cf[n])return Cf[n];let e;switch(n){case"G":case"GG":case"GGG":e=Ve(Me.Eras,Re.Abbreviated);break;case"GGGG":e=Ve(Me.Eras,Re.Wide);break;case"GGGGG":e=Ve(Me.Eras,Re.Narrow);break;case"y":e=Xe(Ae.FullYear,1,0,!1,!0);break;case"yy":e=Xe(Ae.FullYear,2,0,!0,!0);break;case"yyy":e=Xe(Ae.FullYear,3,0,!1,!0);break;case"yyyy":e=Xe(Ae.FullYear,4,0,!1,!0);break;case"Y":e=el(1);break;case"YY":e=el(2,!0);break;case"YYY":e=el(3);break;case"YYYY":e=el(4);break;case"M":case"L":e=Xe(Ae.Month,1,1);break;case"MM":case"LL":e=Xe(Ae.Month,2,1);break;case"MMM":e=Ve(Me.Months,Re.Abbreviated);break;case"MMMM":e=Ve(Me.Months,Re.Wide);break;case"MMMMM":e=Ve(Me.Months,Re.Narrow);break;case"LLL":e=Ve(Me.Months,Re.Abbreviated,Mt.Standalone);break;case"LLLL":e=Ve(Me.Months,Re.Wide,Mt.Standalone);break;case"LLLLL":e=Ve(Me.Months,Re.Narrow,Mt.Standalone);break;case"w":e=wf(1);break;case"ww":e=wf(2);break;case"W":e=wf(1,!0);break;case"d":e=Xe(Ae.Date,1);break;case"dd":e=Xe(Ae.Date,2);break;case"c":case"cc":e=Xe(Ae.Day,1);break;case"ccc":e=Ve(Me.Days,Re.Abbreviated,Mt.Standalone);break;case"cccc":e=Ve(Me.Days,Re.Wide,Mt.Standalone);break;case"ccccc":e=Ve(Me.Days,Re.Narrow,Mt.Standalone);break;case"cccccc":e=Ve(Me.Days,Re.Short,Mt.Standalone);break;case"E":case"EE":case"EEE":e=Ve(Me.Days,Re.Abbreviated);break;case"EEEE":e=Ve(Me.Days,Re.Wide);break;case"EEEEE":e=Ve(Me.Days,Re.Narrow);break;case"EEEEEE":e=Ve(Me.Days,Re.Short);break;case"a":case"aa":case"aaa":e=Ve(Me.DayPeriods,Re.Abbreviated);break;case"aaaa":e=Ve(Me.DayPeriods,Re.Wide);break;case"aaaaa":e=Ve(Me.DayPeriods,Re.Narrow);break;case"b":case"bb":case"bbb":e=Ve(Me.DayPeriods,Re.Abbreviated,Mt.Standalone,!0);break;case"bbbb":e=Ve(Me.DayPeriods,Re.Wide,Mt.Standalone,!0);break;case"bbbbb":e=Ve(Me.DayPeriods,Re.Narrow,Mt.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ve(Me.DayPeriods,Re.Abbreviated,Mt.Format,!0);break;case"BBBB":e=Ve(Me.DayPeriods,Re.Wide,Mt.Format,!0);break;case"BBBBB":e=Ve(Me.DayPeriods,Re.Narrow,Mt.Format,!0);break;case"h":e=Xe(Ae.Hours,1,-12);break;case"hh":e=Xe(Ae.Hours,2,-12);break;case"H":e=Xe(Ae.Hours,1);break;case"HH":e=Xe(Ae.Hours,2);break;case"m":e=Xe(Ae.Minutes,1);break;case"mm":e=Xe(Ae.Minutes,2);break;case"s":e=Xe(Ae.Seconds,1);break;case"ss":e=Xe(Ae.Seconds,2);break;case"S":e=Xe(Ae.FractionalSeconds,1);break;case"SS":e=Xe(Ae.FractionalSeconds,2);break;case"SSS":e=Xe(Ae.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Zc(ir.Short);break;case"ZZZZZ":e=Zc(ir.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Zc(ir.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Zc(ir.Long);break;default:return null}return Cf[n]=e,e}function vb(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function uA(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function dA(n,e,t){let r=t?-1:1,i=n.getTimezoneOffset(),o=vb(e,i);return uA(n,r*(o-i))}function hA(n){if(cb(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(c=>+c);return rl(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(tA))return fA(r)}let e=new Date(n);if(!cb(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function fA(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,c=Number(n[5]||0)-r,l=Number(n[6]||0),u=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,c,l,u),e}function cb(n){return n instanceof Date&&!isNaN(n.valueOf())}var pA=/^(\d+)?\.((\d+)(-(\d+))?)?$/,lb=22,il=".",Ms="0",mA=";",gA=",",Ef="#";function yA(n,e,t,r,i,o,s=!1){let c="",l=!1;if(!isFinite(n))c=rr(t,Ut.Infinity);else{let u=wA(n);s&&(u=bA(u));let m=e.minInt,g=e.minFrac,b=e.maxFrac;if(o){let re=o.match(pA);if(re===null)throw new Error(`${o} is not a valid digit info`);let Q=re[1],Ee=re[3],ke=re[5];Q!=null&&(m=If(Q)),Ee!=null&&(g=If(Ee)),ke!=null?b=If(ke):Ee!=null&&g>b&&(b=g)}CA(u,g,b);let C=u.digits,O=u.integerLen,R=u.exponent,k=[];for(l=C.every(re=>!re);O<m;O++)C.unshift(0);for(;O<0;O++)C.unshift(0);O>0?k=C.splice(O,C.length):(k=C,C=[0]);let q=[];for(C.length>=e.lgSize&&q.unshift(C.splice(-e.lgSize,C.length).join(""));C.length>e.gSize;)q.unshift(C.splice(-e.gSize,C.length).join(""));C.length&&q.unshift(C.join("")),c=q.join(rr(t,r)),k.length&&(c+=rr(t,i)+k.join("")),R&&(c+=rr(t,Ut.Exponential)+"+"+R)}return n<0&&!l?c=e.negPre+c+e.negSuf:c=e.posPre+c+e.posSuf,c}function vA(n,e,t){let r=XM(e,mb.Decimal),i=_A(r,rr(e,Ut.MinusSign));return yA(n,i,e,Ut.Group,Ut.Decimal,t)}function _A(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(mA),i=r[0],o=r[1],s=i.indexOf(il)!==-1?i.split(il):[i.substring(0,i.lastIndexOf(Ms)+1),i.substring(i.lastIndexOf(Ms)+1)],c=s[0],l=s[1]||"";t.posPre=c.substring(0,c.indexOf(Ef));for(let m=0;m<l.length;m++){let g=l.charAt(m);g===Ms?t.minFrac=t.maxFrac=m+1:g===Ef?t.maxFrac=m+1:t.posSuf+=g}let u=c.split(gA);if(t.gSize=u[1]?u[1].length:0,t.lgSize=u[2]||u[1]?(u[2]||u[1]).length:0,o){let m=i.length-t.posPre.length-t.posSuf.length,g=o.indexOf(Ef);t.negPre=o.substring(0,g).replace(/'/g,""),t.negSuf=o.slice(g+m).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function bA(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function wA(n){let e=Math.abs(n)+"",t=0,r,i,o,s,c;for((i=e.indexOf(il))>-1&&(e=e.replace(il,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===Ms;o++);if(o===(c=e.length))r=[0],i=1;else{for(c--;e.charAt(c)===Ms;)c--;for(i-=o,r=[],s=0;o<=c;o++,s++)r[s]=Number(e.charAt(o))}return i>lb&&(r=r.splice(0,lb-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function CA(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen,o=Math.min(Math.max(e,i),t),s=o+n.integerLen,c=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let g=s;g<r.length;g++)r[g]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let g=1;g<s;g++)r[g]=0}if(c>=5)if(s-1<0){for(let g=0;g>s;g--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let l=o!==0,u=e+n.integerLen,m=r.reduceRight(function(g,b,C,O){return b=b+g,O[C]=b<10?b:b-10,l&&(O[C]===0&&C>=u?O.pop():l=!1),b>=10?1:0},0);m&&(r.unshift(m),n.integerLen++)}function If(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function ol(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Df=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ut=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Df(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let c=r.get(o);r.move(c,s),ub(c,i)}});for(let i=0,o=r.length;i<o;i++){let c=r.get(i).context;c.index=i,c.count=o,c.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);ub(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(W(io),W(gi),W(_f))}}static{this.\u0275dir=We({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function ub(n,e){n.context.$implicit=e.item}var Ze=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new xf,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){db("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){db("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(W(io),W(gi))}}static{this.\u0275dir=We({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),xf=class{constructor(){this.$implicit=null,this.ngIf=null}};function db(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${kt(e)}'.`)}function Sf(n,e){return new de(2100,!1)}var EA=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,sl=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw Sf(n,t);return t.replace(EA,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=Nc({name:"titlecase",type:n,pure:!0,standalone:!0})}}return n})();var IA="mediumDate",DA=new pe(""),xA=new pe(""),On=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??IA,c=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return rA(t,s,o||this.locale,c)}catch(s){throw Sf(n,s.message)}}static{this.\u0275fac=function(r){return new(r||n)(W(Ts,16),W(DA,24),W(xA,24))}}static{this.\u0275pipe=Nc({name:"date",type:n,pure:!0,standalone:!0})}}return n})();var _b=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!SA(t))return null;i||=this._locale;try{let o=TA(t);return vA(o,i,r)}catch(o){throw Sf(n,o.message)}}static{this.\u0275fac=function(r){return new(r||n)(W(Ts,16))}}static{this.\u0275pipe=Nc({name:"number",type:n,pure:!0,standalone:!0})}}return n})();function SA(n){return!(n==null||n===""||n!==n)}function TA(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var Ue=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=_i({type:n})}static{this.\u0275inj=vi({})}}return n})(),bb="browser",MA="server";function al(n){return n===MA}var oo=class{};var Ps=class{},ll=class{},wi=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(c=>o.indexOf(c)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Mf=class{encodeKey(e){return wb(e)}encodeValue(e){return wb(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function NA(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,c]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],l=t.get(s)||[];l.push(c),t.set(s,l)}),t}var OA=/%(\d[a-f0-9])/gi,RA={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function wb(n){return encodeURIComponent(n).replace(OA,(e,t)=>RA[t]??e)}function cl(n){return`${n}`}var Fr=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Mf,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=NA(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(cl):[cl(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(cl(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(cl(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Af=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function kA(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Cb(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Eb(n){return typeof Blob<"u"&&n instanceof Blob}function Ib(n){return typeof FormData<"u"&&n instanceof FormData}function FA(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var As=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(kA(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new wi,this.context??=new Af,!this.params)this.params=new Fr,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let c=t.indexOf("?"),l=c===-1?"?":c<t.length-1?"&":"";this.urlWithParams=t+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Cb(this.body)||Eb(this.body)||Ib(this.body)||FA(this.body)?this.body:this.body instanceof Fr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Ib(this.body)?null:Eb(this.body)?this.body.type||null:Cb(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Fr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,c=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,u=e.headers||this.headers,m=e.params||this.params,g=e.context??this.context;return e.setHeaders!==void 0&&(u=Object.keys(e.setHeaders).reduce((b,C)=>b.set(C,e.setHeaders[C]),u)),e.setParams&&(m=Object.keys(e.setParams).reduce((b,C)=>b.set(C,e.setParams[C]),m)),new n(t,r,s,{params:m,headers:u,context:g,reportProgress:l,responseType:i,withCredentials:c,transferCache:o})}},ao=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(ao||{}),Ns=class{constructor(e,t=hl.Ok,r="OK"){this.headers=e.headers||new wi,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Pf=class n extends Ns{constructor(e={}){super(e),this.type=ao.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ul=class n extends Ns{constructor(e={}){super(e),this.type=ao.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},dl=class extends Ns{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},hl=function(n){return n[n.Continue=100]="Continue",n[n.SwitchingProtocols=101]="SwitchingProtocols",n[n.Processing=102]="Processing",n[n.EarlyHints=103]="EarlyHints",n[n.Ok=200]="Ok",n[n.Created=201]="Created",n[n.Accepted=202]="Accepted",n[n.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",n[n.NoContent=204]="NoContent",n[n.ResetContent=205]="ResetContent",n[n.PartialContent=206]="PartialContent",n[n.MultiStatus=207]="MultiStatus",n[n.AlreadyReported=208]="AlreadyReported",n[n.ImUsed=226]="ImUsed",n[n.MultipleChoices=300]="MultipleChoices",n[n.MovedPermanently=301]="MovedPermanently",n[n.Found=302]="Found",n[n.SeeOther=303]="SeeOther",n[n.NotModified=304]="NotModified",n[n.UseProxy=305]="UseProxy",n[n.Unused=306]="Unused",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n[n.BadRequest=400]="BadRequest",n[n.Unauthorized=401]="Unauthorized",n[n.PaymentRequired=402]="PaymentRequired",n[n.Forbidden=403]="Forbidden",n[n.NotFound=404]="NotFound",n[n.MethodNotAllowed=405]="MethodNotAllowed",n[n.NotAcceptable=406]="NotAcceptable",n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",n[n.RequestTimeout=408]="RequestTimeout",n[n.Conflict=409]="Conflict",n[n.Gone=410]="Gone",n[n.LengthRequired=411]="LengthRequired",n[n.PreconditionFailed=412]="PreconditionFailed",n[n.PayloadTooLarge=413]="PayloadTooLarge",n[n.UriTooLong=414]="UriTooLong",n[n.UnsupportedMediaType=415]="UnsupportedMediaType",n[n.RangeNotSatisfiable=416]="RangeNotSatisfiable",n[n.ExpectationFailed=417]="ExpectationFailed",n[n.ImATeapot=418]="ImATeapot",n[n.MisdirectedRequest=421]="MisdirectedRequest",n[n.UnprocessableEntity=422]="UnprocessableEntity",n[n.Locked=423]="Locked",n[n.FailedDependency=424]="FailedDependency",n[n.TooEarly=425]="TooEarly",n[n.UpgradeRequired=426]="UpgradeRequired",n[n.PreconditionRequired=428]="PreconditionRequired",n[n.TooManyRequests=429]="TooManyRequests",n[n.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",n[n.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",n[n.InternalServerError=500]="InternalServerError",n[n.NotImplemented=501]="NotImplemented",n[n.BadGateway=502]="BadGateway",n[n.ServiceUnavailable=503]="ServiceUnavailable",n[n.GatewayTimeout=504]="GatewayTimeout",n[n.HttpVersionNotSupported=505]="HttpVersionNotSupported",n[n.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",n[n.InsufficientStorage=507]="InsufficientStorage",n[n.LoopDetected=508]="LoopDetected",n[n.NotExtended=510]="NotExtended",n[n.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",n}(hl||{});function Tf(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var or=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof As)o=t;else{let l;i.headers instanceof wi?l=i.headers:l=new wi(i.headers);let u;i.params&&(i.params instanceof Fr?u=i.params:u=new Fr({fromObject:i.params})),o=new As(t,r,i.body!==void 0?i.body:null,{headers:l,context:i.context,params:u,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=Za(o).pipe(bd(l=>this.handler.handle(l)));if(t instanceof As||i.observe==="events")return s;let c=s.pipe(_d(l=>l instanceof ul));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(lt(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(lt(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(lt(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(lt(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new Fr().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Tf(i,r))}post(t,r,i={}){return this.request("POST",t,Tf(i,r))}put(t,r,i={}){return this.request("PUT",t,Tf(i,r))}static{this.\u0275fac=function(r){return new(r||n)(oe(Ps))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})();function VA(n,e){return e(n)}function LA(n,e,t){return(r,i)=>C0(t,()=>e(r,o=>n(o,i)))}var Sb=new pe(""),jA=new pe(""),BA=new pe("");var Db=(()=>{class n extends Ps{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=Fe(Hc);let i=Fe(BA,{optional:!0});this.backend=i??t}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(Sb),...this.injector.get(jA,[])]));this.chain=i.reduceRight((o,s)=>LA(o,s,this.injector),VA)}let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(wd(()=>this.pendingTasks.remove(r)))}static{this.\u0275fac=function(r){return new(r||n)(oe(ll),oe(Mn))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})();var UA=/^\)\]\}',?\n/;function $A(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var xb=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new de(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Dn(r.\u0275loadImpl()):Za(null)).pipe(zi(()=>new je(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((R,k)=>s.setRequestHeader(R,k.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let R=t.detectContentTypeHeader();R!==null&&s.setRequestHeader("Content-Type",R)}if(t.responseType){let R=t.responseType.toLowerCase();s.responseType=R!=="json"?R:"text"}let c=t.serializeBody(),l=null,u=()=>{if(l!==null)return l;let R=s.statusText||"OK",k=new wi(s.getAllResponseHeaders()),q=$A(s)||t.url;return l=new Pf({headers:k,status:s.status,statusText:R,url:q}),l},m=()=>{let{headers:R,status:k,statusText:q,url:re}=u(),Q=null;k!==hl.NoContent&&(Q=typeof s.response>"u"?s.responseText:s.response),k===0&&(k=Q?hl.Ok:0);let Ee=k>=200&&k<300;if(t.responseType==="json"&&typeof Q=="string"){let ke=Q;Q=Q.replace(UA,"");try{Q=Q!==""?JSON.parse(Q):null}catch(De){Q=ke,Ee&&(Ee=!1,Q={error:De,text:Q})}}Ee?(o.next(new ul({body:Q,headers:R,status:k,statusText:q,url:re||void 0})),o.complete()):o.error(new dl({error:Q,headers:R,status:k,statusText:q,url:re||void 0}))},g=R=>{let{url:k}=u(),q=new dl({error:R,status:s.status||0,statusText:s.statusText||"Unknown Error",url:k||void 0});o.error(q)},b=!1,C=R=>{b||(o.next(u()),b=!0);let k={type:ao.DownloadProgress,loaded:R.loaded};R.lengthComputable&&(k.total=R.total),t.responseType==="text"&&s.responseText&&(k.partialText=s.responseText),o.next(k)},O=R=>{let k={type:ao.UploadProgress,loaded:R.loaded};R.lengthComputable&&(k.total=R.total),o.next(k)};return s.addEventListener("load",m),s.addEventListener("error",g),s.addEventListener("timeout",g),s.addEventListener("abort",g),t.reportProgress&&(s.addEventListener("progress",C),c!==null&&s.upload&&s.upload.addEventListener("progress",O)),s.send(c),o.next({type:ao.Sent}),()=>{s.removeEventListener("error",g),s.removeEventListener("abort",g),s.removeEventListener("load",m),s.removeEventListener("timeout",g),t.reportProgress&&(s.removeEventListener("progress",C),c!==null&&s.upload&&s.upload.removeEventListener("progress",O)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(oe(oo))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})(),Tb=new pe(""),zA="XSRF-TOKEN",HA=new pe("",{providedIn:"root",factory:()=>zA}),qA="X-XSRF-TOKEN",GA=new pe("",{providedIn:"root",factory:()=>qA}),fl=class{},WA=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ol(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(oe(Nn),oe(Rr),oe(HA))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})();function KA(n,e){let t=n.url.toLowerCase();if(!Fe(Tb)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=Fe(fl).getToken(),i=Fe(GA);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function Mb(...n){let e=[or,xb,Db,{provide:Ps,useExisting:Db},{provide:ll,useExisting:xb},{provide:Sb,useValue:KA,multi:!0},{provide:Tb,useValue:!0},{provide:fl,useClass:WA}];for(let t of n)e.push(...t.\u0275providers);return Oc(e)}var Rf=class extends nl{constructor(){super(...arguments),this.supportsDOMEvents=!0}},kf=class n extends Rf{static makeCurrent(){pb(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=YA();return t==null?null:JA(t)}resetBaseElement(){Os=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ol(document.cookie,e)}},Os=null;function YA(){return Os=Os||document.querySelector("base"),Os?Os.getAttribute("href"):null}function JA(n){return new URL(n,document.baseURI).pathname}var XA=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})(),Ff=new pe(""),Ob=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new de(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(oe(Ff),oe(yt))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})(),ml=class{constructor(e){this._doc=e}},Nf="ng-app-id",Rb=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=al(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Nf}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(Nf),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Nf,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(oe(Nn),oe(Qh),oe(Jh,8),oe(Rr))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})(),Of={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Lf=/%COMP%/g,kb="%COMP%",ZA=`_nghost-${kb}`,eP=`_ngcontent-${kb}`,tP=!0,nP=new pe("",{providedIn:"root",factory:()=>tP});function rP(n){return eP.replace(Lf,n)}function iP(n){return ZA.replace(Lf,n)}function Fb(n,e){return e.map(t=>t.replace(Lf,n))}var Ab=(()=>{class n{constructor(t,r,i,o,s,c,l,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=al(c),this.defaultRenderer=new Rs(t,s,l,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Tn.ShadowDom&&(r=ue(J({},r),{encapsulation:Tn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof gl?i.applyToHost(t):i instanceof ks&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,m=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case Tn.Emulated:o=new gl(l,u,r,this.appId,m,s,c,g);break;case Tn.ShadowDom:return new Vf(l,u,t,r,s,c,this.nonce,g);default:o=new ks(l,u,r,m,s,c,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(oe(Ob),oe(Rb),oe(Qh),oe(nP),oe(Nn),oe(Rr),oe(yt),oe(Jh))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})(),Rs=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Of[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Pb(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Pb(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new de(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Of[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Of[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Qn.DashCase|Qn.Important)?e.style.setProperty(t,r,i&Qn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Qn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=so().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function Pb(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Vf=class extends Rs{constructor(e,t,r,i,o,s,c,l){super(e,o,s,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=Fb(i.id,i.styles);for(let m of u){let g=document.createElement("style");c&&g.setAttribute("nonce",c),g.textContent=m,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ks=class extends Rs{constructor(e,t,r,i,o,s,c,l){super(e,o,s,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=l?Fb(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},gl=class extends ks{constructor(e,t,r,i,o,s,c,l){let u=i+"-"+r.id;super(e,t,r,o,s,c,l,u),this.contentAttr=rP(u),this.hostAttr=iP(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},oP=(()=>{class n extends ml{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(oe(Nn))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})(),Nb=["alt","control","meta","shift"],sP={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},aP={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},cP=(()=>{class n extends ml{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>so().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),s="code."),Nb.forEach(u=>{let m=r.indexOf(u);m>-1&&(r.splice(m,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(t,r){let i=sP[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Nb.forEach(s=>{if(s!==i){let c=aP[s];c(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(oe(Nn))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})();function Vb(n,e){return ab(J({rootComponent:n},lP(e)))}function lP(n){return{appProviders:[...pP,...n?.providers??[]],platformProviders:fP}}function uP(){kf.makeCurrent()}function dP(){return new Kn}function hP(){return l_(document),document}var fP=[{provide:Rr,useValue:bb},{provide:Yh,useValue:uP,multi:!0},{provide:Nn,useFactory:hP,deps:[]}];var pP=[{provide:Rc,useValue:"root"},{provide:Kn,useFactory:dP,deps:[]},{provide:Ff,useClass:oP,multi:!0,deps:[Nn,yt,Rr]},{provide:Ff,useClass:cP,multi:!0,deps:[Nn]},Ab,Rb,Ob,{provide:gs,useExisting:Ab},{provide:oo,useClass:XA,deps:[]},[]];var Lb={providers:[Mb()]};var Kb=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(W(kr),W(Xt))}}static{this.\u0275dir=We({type:n})}}return n})(),Bs=(()=>{class n extends Kb{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Or(n)))(i||n)}})()}static{this.\u0275dir=We({type:n,features:[Tt]})}}return n})(),ho=new pe("");var mP={provide:ho,useExisting:Vt(()=>dt),multi:!0};function gP(){let n=so()?so().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var yP=new pe(""),dt=(()=>{class n extends Kb{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!gP())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(W(kr),W(Xt),W(yP,8))}}static{this.\u0275dir=We({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&U("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[yn([mP]),Tt]})}}return n})();function js(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var Us=new pe(""),Qb=new pe("");function vP(n){return e=>{if(js(e.value)||js(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function _P(n){return e=>{if(js(e.value)||js(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function bP(n){return js(n.value)?{required:!0}:null}function jb(n){return null}function Yb(n){return n!=null}function Jb(n){return Ss(n)?Dn(n):n}function Xb(n){let e={};return n.forEach(t=>{e=t!=null?J(J({},e),t):e}),Object.keys(e).length===0?null:e}function Zb(n,e){return e.map(t=>t(n))}function wP(n){return!n.validate}function ew(n){return n.map(e=>wP(e)?e:t=>e.validate(t))}function CP(n){if(!n)return null;let e=n.filter(Yb);return e.length==0?null:function(t){return Xb(Zb(t,e))}}function Bf(n){return n!=null?CP(ew(n)):null}function EP(n){if(!n)return null;let e=n.filter(Yb);return e.length==0?null:function(t){let r=Zb(t,e).map(Jb);return vd(r).pipe(lt(Xb))}}function Uf(n){return n!=null?EP(ew(n)):null}function Bb(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function IP(n){return n._rawValidators}function DP(n){return n._rawAsyncValidators}function jf(n){return n?Array.isArray(n)?n:[n]:[]}function vl(n,e){return Array.isArray(n)?n.includes(e):n===e}function Ub(n,e){let t=jf(e);return jf(n).forEach(i=>{vl(t,i)||t.push(i)}),t}function $b(n,e){return jf(e).filter(t=>!vl(n,t))}var _l=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Bf(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Uf(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},lo=class extends _l{get formDirective(){return null}get path(){return null}},uo=class extends _l{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},bl=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},xP={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Lj=ue(J({},xP),{"[class.ng-submitted]":"isSubmitted"}),ht=(()=>{class n extends bl{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(W(uo,2))}}static{this.\u0275dir=We({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&be("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Tt]})}}return n})(),en=(()=>{class n extends bl{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(W(lo,10))}}static{this.\u0275dir=We({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&be("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Tt]})}}return n})();var Fs="VALID",yl="INVALID",co="PENDING",Vs="DISABLED";function tw(n){return(El(n)?n.validators:n)||null}function SP(n){return Array.isArray(n)?Bf(n):n||null}function nw(n,e){return(El(e)?e.asyncValidators:n)||null}function TP(n){return Array.isArray(n)?Uf(n):n||null}function El(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function MP(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new de(1e3,"");if(!r[t])throw new de(1001,"")}function AP(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new de(1002,"")})}var wl=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Fs}get invalid(){return this.status===yl}get pending(){return this.status==co}get disabled(){return this.status===Vs}get enabled(){return this.status!==Vs}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Ub(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Ub(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators($b(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators($b(e,this._rawAsyncValidators))}hasValidator(e){return vl(this._rawValidators,e)}hasAsyncValidator(e){return vl(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=co,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Vs,this.errors=null,this._forEachChild(r=>{r.disable(ue(J({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ue(J({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Fs,this._forEachChild(r=>{r.enable(ue(J({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ue(J({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Fs||this.status===co)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Vs:Fs}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=co,this._hasOwnPendingAsyncValidator=!0;let t=Jb(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new un,this.statusChanges=new un}_calculateStatus(){return this._allControlsDisabled()?Vs:this.errors?yl:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(co)?co:this._anyControlsHaveStatus(yl)?yl:Fs}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){El(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=SP(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=TP(this._rawAsyncValidators)}},Cl=class extends wl{constructor(e,t,r){super(tw(t),nw(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){AP(this,!0,e),Object.keys(e).forEach(r=>{MP(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Il=new pe("CallSetDisabledState",{providedIn:"root",factory:()=>Dl}),Dl="always";function PP(n,e){return[...e.path,n]}function rw(n,e,t=Dl){iw(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),OP(n,e),kP(n,e),RP(n,e),NP(n,e)}function zb(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function NP(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function iw(n,e){let t=IP(n);e.validator!==null?n.setValidators(Bb(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=DP(n);e.asyncValidator!==null?n.setAsyncValidators(Bb(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();zb(e._rawValidators,i),zb(e._rawAsyncValidators,i)}function OP(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&ow(n,e)})}function RP(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&ow(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function ow(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function kP(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function FP(n,e){n==null,iw(n,e)}function VP(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function LP(n){return Object.getPrototypeOf(n.constructor)===Bs}function jP(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function BP(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===dt?t=o:LP(o)?r=o:i=o}),i||r||t||null}var UP={provide:lo,useExisting:Vt(()=>zt)},Ls=Promise.resolve(),zt=(()=>{class n extends lo{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new un,this.form=new Cl({},Bf(t),Uf(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Ls.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),rw(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Ls.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Ls.then(()=>{let r=this._findContainer(t.path),i=new Cl({});FP(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Ls.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Ls.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,jP(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(W(Us,10),W(Qb,10),W(Il,8))}}static{this.\u0275dir=We({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&U("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[Qt.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[yn([UP]),Tt]})}}return n})();function Hb(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function qb(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var $P=class extends wl{constructor(e=null,t,r){super(tw(t),nw(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),El(t)&&(t.nonNullable||t.initialValueIsDefault)&&(qb(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Hb(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Hb(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){qb(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var zP={provide:uo,useExisting:Vt(()=>at)},Gb=Promise.resolve(),at=(()=>{class n extends uo{constructor(t,r,i,o,s,c){super(),this._changeDetectorRef=s,this.callSetDisabledState=c,this.control=new $P,this._registered=!1,this.name="",this.update=new un,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=BP(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),VP(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){rw(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Gb.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Wc(r);Gb.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?PP(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(W(lo,9),W(Us,10),W(Qb,10),W(ho,10),W(Gc,8),W(Il,8))}}static{this.\u0275dir=We({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Qt.None,"disabled","isDisabled"],model:[Qt.None,"ngModel","model"],options:[Qt.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[yn([zP]),Tt,ws]})}}return n})(),tn=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=We({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),HP={provide:ho,useExisting:Vt(()=>sr),multi:!0},sr=(()=>{class n extends Bs{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Or(n)))(i||n)}})()}static{this.\u0275dir=We({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&U("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[yn([HP]),Tt]})}}return n})(),qP={provide:ho,useExisting:Vt(()=>$f),multi:!0};var GP=(()=>{class n{constructor(){this._accessors=[]}add(t,r){this._accessors.push([t,r])}remove(t){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===t){this._accessors.splice(r,1);return}}select(t){this._accessors.forEach(r=>{this._isSameGroup(r,t)&&r[1]!==t&&r[1].fireUncheck(t.value)})}_isSameGroup(t,r){return t[0].control?t[0]._parent===r._control._parent&&t[1].name===r.name:!1}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),$f=(()=>{class n extends Bs{constructor(t,r,i,o){super(t,r),this._registry=i,this._injector=o,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=Fe(Il,{optional:!0})??Dl}ngOnInit(){this._control=this._injector.get(uo),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}setDisabledState(t){(this.setDisabledStateFired||t||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",t),this.setDisabledStateFired=!0}fireUncheck(t){this.writeValue(t)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}static{this.\u0275fac=function(r){return new(r||n)(W(kr),W(Xt),W(GP),W(Es))}}static{this.\u0275dir=We({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(r,i){r&1&&U("change",function(){return i.onChange()})("blur",function(){return i.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[yn([qP]),Tt]})}}return n})();var WP={provide:ho,useExisting:Vt(()=>nn),multi:!0};function sw(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function KP(n){return n.split(":")[0]}var nn=(()=>{class n extends Bs{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=sw(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=KP(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Or(n)))(i||n)}})()}static{this.\u0275dir=We({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&U("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[yn([WP]),Tt]})}}return n})(),Rn=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(sw(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(W(Xt),W(kr),W(nn,9))}}static{this.\u0275dir=We({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),QP={provide:ho,useExisting:Vt(()=>aw),multi:!0};function Wb(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function YP(n){return n.split(":")[0]}var aw=(()=>{class n extends Bs{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let c=0;c<s.length;c++){let l=s[c],u=this._getOptionValue(l.value);i.push(u)}}else{let s=r.options;for(let c=0;c<s.length;c++){let l=s[c];if(l.selected){let u=this._getOptionValue(l.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=YP(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Or(n)))(i||n)}})()}static{this.\u0275dir=We({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&U("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[yn([QP]),Tt]})}}return n})(),kn=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(Wb(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Wb(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(W(Xt),W(kr),W(aw,9))}}static{this.\u0275dir=We({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();function cw(n){return typeof n=="number"?n:parseFloat(n)}var zf=(()=>{class n{constructor(){this._validator=jb}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):jb,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=We({type:n,features:[ws]})}}return n})(),JP={provide:Us,useExisting:Vt(()=>Hf),multi:!0},Hf=(()=>{class n extends zf{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=t=>cw(t),this.createValidator=t=>_P(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Or(n)))(i||n)}})()}static{this.\u0275dir=We({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Ds("max",i._enabled?i.max:null)},inputs:{max:"max"},features:[yn([JP]),Tt]})}}return n})(),XP={provide:Us,useExisting:Vt(()=>ar),multi:!0},ar=(()=>{class n extends zf{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>cw(t),this.createValidator=t=>vP(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Or(n)))(i||n)}})()}static{this.\u0275dir=We({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Ds("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[yn([XP]),Tt]})}}return n})(),ZP={provide:Us,useExisting:Vt(()=>Ht),multi:!0};var Ht=(()=>{class n extends zf{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Wc,this.createValidator=t=>bP}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Or(n)))(i||n)}})()}static{this.\u0275dir=We({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Ds("required",i._enabled?"":null)},inputs:{required:"required"},features:[yn([ZP]),Tt]})}}return n})();var eN=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=_i({type:n})}static{this.\u0275inj=vi({})}}return n})();var ft=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Il,useValue:t.callSetDisabledState??Dl}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=_i({type:n})}static{this.\u0275inj=vi({imports:[eN]})}}return n})();var rn={production:!0,apiUrl:"https://inventory-three-theta.vercel.app/api",socketUrl:"https://your-websocket-server.com",firebaseConfig:{apiKey:"AIzaSyDJL01CQ2KJGqni6Q3EPR8Yv1CPW6cXezk",authDomain:"inventory-8b0ad.firebaseapp.com",projectId:"inventory-8b0ad",storageBucket:"inventory-8b0ad.firebasestorage.app",messagingSenderId:"165252469952",appId:"1:165252469952:web:1dec34907cc003fd2c4925",measurementId:"G-YK1FRTQT8P"}};var xl=(()=>{class n{constructor(t){this.http=t,this.apiUrl=rn.apiUrl,this.logsSubject=new Je([]),this.logs$=this.logsSubject.asObservable(),this.fetchLogs()}getCurrentUserId(){return localStorage.getItem("jjm_user_id")||"guest"}fetchLogs(){let t=this.getCurrentUserId();this.http.get(`${this.apiUrl}/logs?limit=200&userId=${t}`).subscribe({next:r=>this.logsSubject.next(r),error:r=>console.error("Error fetching logs:",r)})}logActivity(t,r,i,o,s){let c={action:t,entityType:r,entityId:i,entityName:o,details:s,userId:this.getCurrentUserId()};console.log("Logging activity:",c),this.http.post(`${this.apiUrl}/logs`,c).subscribe({next:l=>{console.log("Activity logged successfully:",l);let u=this.logsSubject.value;this.logsSubject.next([l,...u])},error:l=>{console.error("Error logging activity:",l),console.error("Failed log data:",c)}})}getLogs(){return this.logs$}refreshLogs(){this.fetchLogs()}cleanupOldLogs(){return this.http.post(`${this.apiUrl}/cleanup-logs`,{})}static{this.\u0275fac=function(r){return new(r||n)(oe(or))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var on=(()=>{class n{constructor(t,r){this.http=t,this.loggingService=r,this.apiUrl=rn.apiUrl,this.productsSubject=new Je([]),this.salesSubject=new Je([]),this.expensesSubject=new Je([]),this.products$=this.productsSubject.asObservable(),this.sales$=this.salesSubject.asObservable(),this.expenses$=this.expensesSubject.asObservable(),this.loadInitialData()}getCurrentUser(){return localStorage.getItem("jjm_user_id")||"guest"}reloadData(){this.loadInitialData()}loadInitialData(){this.fetchProducts(),this.fetchSales(),this.fetchExpenses()}fetchProducts(){let t=this.getCurrentUser();this.http.get(`${this.apiUrl}/products?userId=${t}`).subscribe({next:r=>this.productsSubject.next(r),error:r=>console.error("Error fetching products:",r)})}fetchSales(){let t=this.getCurrentUser();this.http.get(`${this.apiUrl}/sales?userId=${t}`).subscribe({next:r=>{let i=r.map(o=>this.transformSale(o));this.salesSubject.next(i)},error:r=>console.error("Error fetching sales:",r)})}fetchExpenses(){let t=this.getCurrentUser();this.http.get(`${this.apiUrl}/expenses?userId=${t}`).subscribe({next:r=>this.expensesSubject.next(r),error:r=>console.error("Error fetching expenses:",r)})}getProducts(){return this.products$}getSales(){return this.sales$}getExpenses(){return this.expenses$}addExpense(t){let r=ue(J({},t),{userId:this.getCurrentUser()});this.http.post(`${this.apiUrl}/expenses`,r).subscribe({next:i=>{let o=this.expensesSubject.value;this.expensesSubject.next([...o,i]),this.loggingService.logActivity("create","expense",i.id,i.productName,`$${i.price.toFixed(2)}`)},error:i=>console.error("Error adding expense:",i)})}addProduct(t){let r=ue(J({},t),{userId:this.getCurrentUser()});this.http.post(`${this.apiUrl}/products`,r).subscribe({next:i=>{let o=this.productsSubject.value;this.productsSubject.next([...o,i]),this.loggingService.logActivity("create","product",i.id,i.name)},error:i=>console.error("Error adding product:",i)})}recordSale(t,r,i,o,s,c,l=0,u="amount"){let g=this.productsSubject.value.find(R=>R.id===t);if(!g)throw new Error("Product not found");if(g.quantity<r)throw new Error("Insufficient quantity");let b=g.price*r;l>0&&(u==="percent"?b=b-b*(l/100):b=b-l),b=Math.max(0,Math.round(b*100)/100);let C=i-b;if(C<0)throw new Error("Insufficient cash");let O={productId:g.id,productName:g.name,category:g.category,price:g.price,quantitySold:r,total:b,cashReceived:i,change:C,deliveryDate:o,deliveryNotes:s,customerId:c,pending:!0,discount:l,discountType:u,userId:this.getCurrentUser()};this.http.post(`${this.apiUrl}/sales`,O).subscribe({next:R=>{let k=this.salesSubject.value;this.salesSubject.next([...k,this.transformSale(R)]);let q=ue(J({},g),{quantity:g.quantity-r});this.updateProduct(q),this.loggingService.logActivity("create","sale",R.id,g.name,`Sold ${r} units`)},error:R=>console.error("Error recording sale:",R)})}completePendingSale(t){this.http.put(`${this.apiUrl}/sales/${t}`,{pending:!1}).subscribe({next:()=>{let r=this.salesSubject.value,i=r.find(s=>s.id===t),o=r.map(s=>s.id===t?ue(J({},s),{pending:!1}):s);this.salesSubject.next(o),i&&this.loggingService.logActivity("complete","sale",t,i.productName,"Marked as delivered")},error:r=>console.error("Error completing sale:",r)})}updateSale(t){this.http.put(`${this.apiUrl}/sales/${t.id}`,t).subscribe({next:r=>{let o=this.salesSubject.value.map(s=>s.id===t.id?this.transformSale(r):s);this.salesSubject.next(o),this.loggingService.logActivity("update","sale",t.id,t.productName,"Updated delivery details")},error:r=>console.error("Error updating sale:",r)})}transformSale(t){return ue(J({},t),{timestamp:this.parseDate(t.timestamp),deliveryDate:t.deliveryDate?this.parseDate(t.deliveryDate):void 0})}parseDate(t){return t?t instanceof Date?t:typeof t=="string"?new Date(t):typeof t=="object"&&t._seconds!==void 0?new Date(t._seconds*1e3):new Date(t):new Date}restockProduct(t,r){let o=this.productsSubject.value.find(s=>s.id===t);if(o){let s=ue(J({},o),{quantity:o.quantity+r});this.updateProduct(s),this.loggingService.logActivity("restock","product",t,o.name,`Added ${r} units`)}}updateProduct(t){this.http.put(`${this.apiUrl}/products/${t.id}`,t).subscribe({next:()=>{let i=this.productsSubject.value.map(c=>c.id===t.id?t:c);this.productsSubject.next(i);let o=this.salesSubject.value,s=o.filter(c=>c.productId===t.id&&c.productName!==t.name);if(s.length>0){let c=o.map(l=>l.productId===t.id?ue(J({},l),{productName:t.name}):l);this.salesSubject.next(c),s.forEach(l=>{let u=ue(J({},l),{productName:t.name});this.http.put(`${this.apiUrl}/sales/${l.id}`,u).subscribe({error:m=>console.error(`Error updating sale ${l.id} name:`,m)})})}this.loggingService.logActivity("update","product",t.id,t.name)},error:r=>console.error("Error updating product:",r)})}clearAllData(){this.productsSubject.next([]),this.salesSubject.next([]),this.expensesSubject.next([])}migrateFromLocalStorage(){let t=localStorage.getItem("jjm_products"),r=localStorage.getItem("jjm_sales"),i=localStorage.getItem("jjm_expenses");t&&JSON.parse(t).forEach(s=>this.addProduct(s)),r&&JSON.parse(r).forEach(s=>{this.http.post(`${this.apiUrl}/sales`,s).subscribe({error:c=>console.error("Error migrating sale:",c)})}),i&&JSON.parse(i).forEach(s=>this.addExpense(s)),console.log("Migration started...")}static{this.\u0275fac=function(r){return new(r||n)(oe(or),oe(xl))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function tN(n,e){if(n&1){let t=se();f(0,"div",23),Te(1,"img",24),f(2,"button",25),U("click",function(){V(t);let i=P();return L(i.removeImage())}),y(3," \u2715 "),h()()}if(n&2){let t=P();_(),A("src",t.imagePreview,bi)}}function nN(n,e){if(n&1){let t=se();f(0,"div",26)(1,"input",27),U("change",function(i){V(t);let o=P();return L(o.onImageChange(i))}),h(),f(2,"label",28)(3,"span",29),y(4,"\u{1F4F7}"),h(),f(5,"span",30),y(6,"Click to upload image"),h(),f(7,"span",31),y(8,"PNG, JPG, GIF up to 5MB"),h()()()}}var uw=(()=>{class n{constructor(t){this.inventoryService=t,this.product={name:"",category:"",price:0,quantity:0,imageUrl:""},this.imagePreview=null}onImageChange(t){let r=t.target;if(r.files&&r.files[0]){let i=r.files[0],o=new FileReader;o.onload=s=>{this.imagePreview=s.target?.result,this.product.imageUrl=s.target?.result},o.readAsDataURL(i)}}removeImage(){this.imagePreview=null,this.product.imageUrl=""}onSubmit(){this.isValid()&&(this.inventoryService.addProduct({name:this.product.name,category:this.product.category,price:this.product.price,quantity:this.product.quantity,imageUrl:this.product.imageUrl}),this.product={name:"",category:"",price:0,quantity:0,imageUrl:""},this.imagePreview=null)}isValid(){return!!(this.product.name&&this.product.category&&this.product.price>0&&this.product.quantity>0)}static{this.\u0275fac=function(r){return new(r||n)(W(on))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-product-form"]],standalone:!0,features:[ze],decls:42,vars:7,consts:[[1,"card"],[1,"form",3,"ngSubmit"],[1,"image-upload-section"],[1,"image-upload-label"],["class","image-preview-container",4,"ngIf"],["class","image-upload-area",4,"ngIf"],[1,"form-group"],["for","productName"],["type","text","id","productName","name","name","placeholder","Enter product name","required","",3,"ngModelChange","ngModel"],["for","category"],["id","category","name","category","required","",3,"ngModelChange","ngModel"],["value",""],["value","Lechon"],["value","Hollow blocks"],["value","Sand and Gravel"],["value","Copra"],["value","Others"],[1,"form-row"],["for","price"],["type","number","id","price","name","price","placeholder","0.00","min","0","step","0.01","required","",3,"ngModelChange","ngModel"],["for","quantity"],["type","number","id","quantity","name","quantity","placeholder","0","min","1","required","",3,"ngModelChange","ngModel"],["type","submit",1,"btn-primary",3,"disabled"],[1,"image-preview-container"],["alt","Product preview","loading","lazy",1,"image-preview",3,"src"],["type","button",1,"remove-image-btn",3,"click"],[1,"image-upload-area"],["type","file","id","productImage","accept","image/*",1,"file-input",3,"change"],["for","productImage",1,"file-input-label"],[1,"upload-icon"],[1,"upload-text"],[1,"upload-hint"]],template:function(r,i){r&1&&(f(0,"div",0)(1,"h3"),y(2,"Add New Product"),h(),f(3,"form",1),U("ngSubmit",function(){return i.onSubmit()}),f(4,"div",2)(5,"label",3),y(6,"Product Image (Optional)"),h(),z(7,tN,4,1,"div",4)(8,nN,9,0,"div",5),h(),f(9,"div",6)(10,"label",7),y(11,"Product Name"),h(),f(12,"input",8),Z("ngModelChange",function(s){return te(i.product.name,s)||(i.product.name=s),s}),h()(),f(13,"div",6)(14,"label",9),y(15,"Category"),h(),f(16,"select",10),Z("ngModelChange",function(s){return te(i.product.category,s)||(i.product.category=s),s}),f(17,"option",11),y(18,"-- Select Category --"),h(),f(19,"option",12),y(20,"Lechon"),h(),f(21,"option",13),y(22,"Hollow blocks"),h(),f(23,"option",14),y(24,"Sand and Gravel"),h(),f(25,"option",15),y(26,"Copra"),h(),f(27,"option",16),y(28,"Others"),h()()(),f(29,"div",17)(30,"div",6)(31,"label",18),y(32,"Price"),h(),f(33,"input",19),Z("ngModelChange",function(s){return te(i.product.price,s)||(i.product.price=s),s}),h()(),f(34,"div",6)(35,"label",20),y(36,"Quantity"),h(),f(37,"input",21),Z("ngModelChange",function(s){return te(i.product.quantity,s)||(i.product.quantity=s),s}),h()()(),f(38,"button",22)(39,"span"),y(40,"\u2795"),h(),y(41," Add Product "),h()()()),r&2&&(_(7),A("ngIf",i.imagePreview),_(),A("ngIf",!i.imagePreview),_(4),X("ngModel",i.product.name),_(4),X("ngModel",i.product.category),_(17),X("ngModel",i.product.price),_(4),X("ngModel",i.product.quantity),_(),A("disabled",!i.isValid()))},dependencies:[Ue,Ze,ft,tn,Rn,kn,dt,sr,nn,ht,en,Ht,ar,at,zt],styles:[".form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg);margin-top:var(--space-lg)}.image-upload-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.image-upload-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.image-preview-container[_ngcontent-%COMP%]{position:relative;width:100%;max-width:300px;margin:0 auto}.image-preview[_ngcontent-%COMP%]{width:100%;height:200px;object-fit:cover;border-radius:var(--radius-lg);border:2px solid var(--color-border)}.remove-image-btn[_ngcontent-%COMP%]{position:absolute;top:var(--space-sm);right:var(--space-sm);width:32px;height:32px;padding:0;background:var(--color-danger);color:#fff;border:none;border-radius:50%;font-size:1.25rem;cursor:pointer;display:flex;align-items:center;justify-content:center;box-shadow:var(--shadow-md)}.remove-image-btn[_ngcontent-%COMP%]:hover{background:#dc2626;transform:scale(1.1)}.image-upload-area[_ngcontent-%COMP%]{width:100%}.file-input[_ngcontent-%COMP%]{display:none}.file-input-label[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:var(--space-sm);padding:var(--space-2xl);border:2px dashed var(--color-border);border-radius:var(--radius-lg);background:var(--color-bg);cursor:pointer;transition:all var(--transition-base)}.file-input-label[_ngcontent-%COMP%]:hover{border-color:var(--color-primary);background:#1e40af0d}.upload-icon[_ngcontent-%COMP%]{font-size:3rem}.upload-text[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text)}.upload-hint[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--space-lg)}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:var(--space-md) var(--space-lg);font-size:1rem;margin-top:var(--space-sm)}@media (max-width: 640px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return n})();var po=(()=>{class n{constructor(t){this.http=t,this.apiUrl=rn.apiUrl,this.customersSubject=new Je([]),this.customers$=this.customersSubject.asObservable(),this.loadInitialData()}loadInitialData(){this.fetchCustomers()}getCurrentUser(){return localStorage.getItem("jjm_user_id")||"guest"}reloadData(){this.loadInitialData()}fetchCustomers(){let t=this.getCurrentUser();this.http.get(`${this.apiUrl}/customers?userId=${t}`).subscribe({next:r=>this.customersSubject.next(r),error:r=>console.error("Error fetching customers:",r)})}getCustomers(){return this.customers$}addCustomer(t){let r=ue(J({},t),{userId:this.getCurrentUser()});this.http.post(`${this.apiUrl}/customers`,r).subscribe({next:i=>{let o=this.customersSubject.value;this.customersSubject.next([...o,i])},error:i=>console.error("Error adding customer:",i)})}updateCustomer(t,r){this.http.put(`${this.apiUrl}/customers/${t}`,r).subscribe({next:()=>{let o=this.customersSubject.value.map(s=>s.id===t?J(J({},s),r):s);this.customersSubject.next(o)},error:i=>console.error("Error updating customer:",i)})}deleteCustomer(t){this.http.delete(`${this.apiUrl}/customers/${t}`).subscribe({next:()=>{let i=this.customersSubject.value.filter(o=>o.id!==t);this.customersSubject.next(i)},error:r=>console.error("Error deleting customer:",r)})}getCustomerById(t){return this.customersSubject.value.find(r=>r.id===t)}static{this.\u0275fac=function(r){return new(r||n)(oe(or))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function rN(n,e){if(n&1&&(f(0,"option",41),y(1),h()),n&2){let t=e.$implicit;A("value",t.id),_(),er(" ",t.name," - ",t.phoneNumber," ")}}function iN(n,e){if(n&1&&(f(0,"div",42)(1,"div",43),y(2,"\u{1F4CB} Customer Information"),h(),f(3,"div",44)(4,"span",45),y(5,"Name:"),h(),f(6,"span",46),y(7),h()(),f(8,"div",44)(9,"span",45),y(10,"Phone:"),h(),f(11,"span",46),y(12),h()(),f(13,"div",44)(14,"span",45),y(15,"Address:"),h(),f(16,"span",46),y(17),h()()()),n&2){let t=P();_(7),G(t.selectedCustomer.name),_(5),G(t.selectedCustomer.phoneNumber),_(5),G(t.selectedCustomer.deliveryAddress)}}function oN(n,e){if(n&1&&(f(0,"option",41),y(1),h()),n&2){let t=e.$implicit;A("value",t.id),_(),vf(" ",t.name," - $",t.price.toFixed(2)," (Stock: ",t.quantity,") ")}}function sN(n,e){if(n&1&&(f(0,"div",48)(1,"span",49),y(2,"Discount:"),h(),f(3,"span",55),y(4),h()()),n&2){let t=P(2);_(4),Y("- $",(t.subtotal-t.total).toFixed(2),"")}}function aN(n,e){if(n&1&&(f(0,"span"),y(1),h()),n&2){let t=P(3);_(),Y(" at ",t.deliveryTime,"")}}function cN(n,e){if(n&1&&(f(0,"div",56)(1,"span",49),y(2,"\u{1F4C5} Delivery:"),h(),f(3,"span",50),y(4),xe(5,"date"),z(6,aN,2,1,"span",57),h()()),n&2){let t=P(2);_(4),G(Ne(5,2,t.deliveryDate,"mediumDate")),_(2),A("ngIf",t.deliveryTime)}}function lN(n,e){if(n&1&&(f(0,"div",47)(1,"div",48)(2,"span",49),y(3,"Subtotal:"),h(),f(4,"span",50),y(5),h()(),z(6,sN,5,1,"div",51),f(7,"div",52)(8,"span",49),y(9,"Total:"),h(),f(10,"span",50),y(11),h()(),f(12,"div",53)(13,"span",49),y(14,"Change:"),h(),f(15,"span",50),y(16),h()(),z(17,cN,7,5,"div",54),h()),n&2){let t=P();_(5),Y("$",t.subtotal.toFixed(2),""),_(),A("ngIf",t.discount>0),_(5),Y("$",t.total.toFixed(2),""),_(),be("negative",t.change<0),_(4),Y("$",t.change.toFixed(2),""),_(),A("ngIf",t.deliveryDate)}}function uN(n,e){if(n&1&&(f(0,"div",58),y(1),h()),n&2){let t=P();_(),Y("\u26A0\uFE0F ",t.errorMessage,"")}}function dN(n,e){if(n&1&&(f(0,"div",70)(1,"div",71),y(2,"\u{1F464} Customer Details"),h(),f(3,"div",72)(4,"span",73),y(5,"Name:"),h(),f(6,"span",74),y(7),h()(),f(8,"div",72)(9,"span",73),y(10,"Phone:"),h(),f(11,"span",74),y(12),h()(),f(13,"div",72)(14,"span",73),y(15,"Address:"),h(),f(16,"span",74),y(17),h()()()),n&2){let t=e.ngIf;_(7),G(t.name),_(5),G(t.phoneNumber),_(5),G(t.deliveryAddress)}}function hN(n,e){if(n&1&&(f(0,"span"),y(1),h()),n&2){let t=P(2).$implicit;_(),Y("\u{1F4DD} ",t.deliveryNotes,"")}}function fN(n,e){if(n&1&&(f(0,"div",75)(1,"span"),y(2),xe(3,"date"),h(),f(4,"span"),y(5),xe(6,"date"),h(),z(7,hN,2,1,"span",57),h()),n&2){let t=P().$implicit;_(2),Y("\u{1F4C5} Due: ",Ne(3,3,t.deliveryDate,"mediumDate"),""),_(3),Y("\u{1F4C5} Time: ",Ne(6,6,t.deliveryDate,"shortTime"),""),_(2),A("ngIf",t.deliveryNotes)}}function pN(n,e){if(n&1){let t=se();f(0,"div",59)(1,"div",60)(2,"div",61)(3,"span",62),y(4),h(),f(5,"span",63),y(6),xe(7,"date"),h()(),f(8,"div",64)(9,"span"),y(10),h(),f(11,"span"),y(12),h()(),z(13,dN,18,3,"div",65)(14,fN,8,9,"div",66),h(),f(15,"div",67)(16,"button",68),U("click",function(){let i=V(t).$implicit,o=P();return L(o.openEditModal(i))}),y(17,"\u270F\uFE0F Edit"),h(),f(18,"button",69),U("click",function(){let i=V(t).$implicit,o=P();return L(o.markAsDelivered(i.id))}),y(19,"\u2705 Mark Delivered"),h()()()}if(n&2){let t=e.$implicit,r=P();_(4),G(t.productName),_(2),G(Ne(7,6,t.timestamp,"short")),_(4),Y("Qty: ",t.quantitySold,""),_(2),Y("Total: $",t.total.toFixed(2),""),_(),A("ngIf",r.getCustomerById(t.customerId)),_(),A("ngIf",t.deliveryDate)}}function mN(n,e){if(n&1){let t=se();f(0,"div",76),U("click",function(){V(t);let i=P();return L(i.closeEditModal())}),f(1,"div",77),U("click",function(i){return V(t),L(i.stopPropagation())}),f(2,"div",78)(3,"h3"),y(4,"Edit Delivery Details"),h(),f(5,"button",79),U("click",function(){V(t);let i=P();return L(i.closeEditModal())}),y(6,"\xD7"),h()(),f(7,"div",80)(8,"div",2)(9,"label",81),y(10,"Delivery Date"),h(),f(11,"input",82),Z("ngModelChange",function(i){V(t);let o=P();return te(o.editDeliveryDate,i)||(o.editDeliveryDate=i),L(i)}),h()(),f(12,"div",2)(13,"label",83),y(14,"Delivery Time"),h(),f(15,"input",84),Z("ngModelChange",function(i){V(t);let o=P();return te(o.editDeliveryTime,i)||(o.editDeliveryTime=i),L(i)}),h()(),f(16,"div",2)(17,"label",85),y(18,"Notes"),h(),f(19,"textarea",86),Z("ngModelChange",function(i){V(t);let o=P();return te(o.editDeliveryNotes,i)||(o.editDeliveryNotes=i),L(i)}),h()()(),f(20,"div",87)(21,"button",88),U("click",function(){V(t);let i=P();return L(i.closeEditModal())}),y(22,"Cancel"),h(),f(23,"button",89),U("click",function(){V(t);let i=P();return L(i.saveEdit())}),y(24,"Save Changes"),h()()()()}if(n&2){let t=P();_(11),X("ngModel",t.editDeliveryDate),A("min",t.minDate),_(4),X("ngModel",t.editDeliveryTime),_(4),X("ngModel",t.editDeliveryNotes)}}var dw=(()=>{class n{constructor(t,r){this.inventoryService=t,this.customerService=r,this.products=[],this.customers=[],this.pendingSales=[],this.selectedProductId="",this.selectedCustomerId="",this.quantity=1,this.cashReceived=0,this.discount=0,this.discountType="amount",this.errorMessage="",this.deliveryDate="",this.deliveryTime="",this.deliveryNotes="",this.minDate="",this.deliveryFilterDate="",this.isEditModalOpen=!1,this.editingSale=null,this.editDeliveryDate="",this.editDeliveryTime="",this.editDeliveryNotes="";let i=new Date;this.minDate=i.toISOString().split("T")[0],this.deliveryDate=this.minDate}ngOnInit(){this.inventoryService.getProducts().subscribe(t=>{this.products=t.filter(r=>r.quantity>0)}),this.customerService.getCustomers().subscribe(t=>{this.customers=t}),this.inventoryService.getSales().subscribe(t=>{this.pendingSales=t.filter(r=>r.pending===!0),this.startAlarmChecks()}),this.discount=0}startAlarmChecks(){setInterval(()=>this.checkPendingDeliveryAlarms(),60*60*1e3),this.checkPendingDeliveryAlarms()}get filteredPendingSales(){let t=this.pendingSales;return this.deliveryFilterDate&&(t=t.filter(r=>r.deliveryDate?new Date(r.deliveryDate).toISOString().split("T")[0]===this.deliveryFilterDate:!1)),t.slice().sort((r,i)=>{let o=r.deliveryDate?new Date(r.deliveryDate).getTime():1/0,s=i.deliveryDate?new Date(i.deliveryDate).getTime():1/0;return o-s})}checkPendingDeliveryAlarms(){let t=new Date;this.pendingSales.forEach(r=>{if(!r.deliveryDate)return;let o=new Date(r.deliveryDate).getTime()-t.getTime(),s=Math.floor(o/(1e3*60*60*24));(s===1||s===2)&&this.triggerAlarm(r,s)})}triggerAlarm(t,r){let o=new Date(t.deliveryDate).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}),s=`\u26A0\uFE0F Delivery for "${t.productName}" is due in ${r} day(s) (${o}).`;this.playBeep(),alert(s)}playBeep(){try{let t=new(window.AudioContext||window.webkitAudioContext),r=t.createOscillator(),i=t.createGain();r.type="square",r.frequency.setValueAtTime(1e3,t.currentTime),i.gain.setValueAtTime(.5,t.currentTime),r.connect(i),i.connect(t.destination),r.start(),r.stop(t.currentTime+2)}catch(t){console.error("Audio alarm failed",t)}}get selectedProduct(){return this.products.find(t=>t.id===this.selectedProductId)}get selectedCustomer(){return this.customers.find(t=>t.id===this.selectedCustomerId)}getCustomerById(t){if(t)return this.customers.find(r=>r.id===t)}get subtotal(){return this.selectedProduct?this.selectedProduct.price*this.quantity:0}get total(){let t=this.subtotal;return this.discount>0&&(this.discountType==="percent"?t=t-t*(this.discount/100):t=t-this.discount),Math.max(0,Math.round(t*100)/100)}get change(){return this.cashReceived-this.total}get maxQuantity(){return this.selectedProduct?.quantity||0}onProductChange(){this.quantity=1,this.errorMessage="",this.discount=0}processSale(){if(this.errorMessage="",!this.selectedProductId){this.errorMessage="Please select a product";return}if(this.quantity<1||this.quantity>this.maxQuantity){this.errorMessage=`Quantity must be between 1 and ${this.maxQuantity}`;return}if(this.cashReceived<this.total){this.errorMessage="Insufficient cash received";return}try{let t;this.deliveryDate&&(this.deliveryTime?t=new Date(`${this.deliveryDate}T${this.deliveryTime}`):t=new Date(this.deliveryDate)),this.inventoryService.recordSale(this.selectedProductId,this.quantity,this.cashReceived,t,this.deliveryNotes||void 0,this.selectedCustomerId||void 0,this.discount,this.discountType),this.selectedProductId="",this.quantity=1,this.cashReceived=0,this.discount=0,this.discountType="amount",this.deliveryDate=this.minDate,this.deliveryTime="",this.deliveryNotes=""}catch(t){this.errorMessage=t.message||"Error processing sale"}}isValid(){return!!(this.selectedProductId&&this.quantity>=1&&this.quantity<=this.maxQuantity&&this.cashReceived>=this.total)}markAsDelivered(t){confirm("Are you sure you want to mark this item as delivered?")&&this.inventoryService.completePendingSale(t)}openEditModal(t){if(this.editingSale=t,this.isEditModalOpen=!0,t.deliveryDate){let r=new Date(t.deliveryDate);this.editDeliveryDate=r.toISOString().split("T")[0],this.editDeliveryTime=r.toTimeString().substring(0,5)}else this.editDeliveryDate="",this.editDeliveryTime="";this.editDeliveryNotes=t.deliveryNotes||""}closeEditModal(){this.isEditModalOpen=!1,this.editingSale=null,this.editDeliveryDate="",this.editDeliveryTime="",this.editDeliveryNotes=""}saveEdit(){if(!this.editingSale)return;let t;this.editDeliveryDate&&(this.editDeliveryTime?t=new Date(`${this.editDeliveryDate}T${this.editDeliveryTime}`):t=new Date(this.editDeliveryDate));let r=ue(J({},this.editingSale),{deliveryDate:t,deliveryNotes:this.editDeliveryNotes});this.inventoryService.updateSale(r),this.closeEditModal()}static{this.\u0275fac=function(r){return new(r||n)(W(on),W(po))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-pos-calculator"]],standalone:!0,features:[ze],decls:81,vars:22,consts:[[1,"card"],[1,"form",3,"ngSubmit"],[1,"form-group"],["for","customer"],["id","customer","name","customer",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","customer-info-display",4,"ngIf"],["for","product"],["id","product","name","product","required","",3,"ngModelChange","change","ngModel"],[1,"form-row"],["for","quantity"],["type","number","id","quantity","name","quantity","placeholder","1","required","",3,"ngModelChange","ngModel","min","max"],["for","cash"],["type","number","id","cash","name","cash","min","0","step","0.01","placeholder","0.00","required","",3,"ngModelChange","ngModel"],[1,"radio-group"],[1,"radio-label"],["type","radio","name","discountType","value","amount",3,"ngModelChange","ngModel"],["type","radio","name","discountType","value","percent",3,"ngModelChange","ngModel"],["for","discount"],["type","number","id","discount","name","discount","min","0","placeholder","0",3,"ngModelChange","ngModel"],[1,"delivery-section"],[1,"section-title"],[1,"section-icon"],["for","deliveryDate"],["type","date","id","deliveryDate","name","deliveryDate",1,"date-input",3,"ngModelChange","ngModel","min"],["for","deliveryTime"],["type","time","id","deliveryTime","name","deliveryTime",1,"time-input",3,"ngModelChange","ngModel"],["for","deliveryNotes"],["id","deliveryNotes","name","deliveryNotes","placeholder","Special instructions, address, contact info...","rows","3",1,"textarea-input",3,"ngModelChange","ngModel"],["class","transaction-summary",4,"ngIf"],["class","error-message",4,"ngIf"],["type","submit",1,"btn-primary","btn-success",3,"disabled"],[1,"card","pending-deliveries"],[1,"filter-row"],["for","deliveryFilter"],[1,"btn-primary",3,"click"],["type","date","id","deliveryFilter","name","deliveryFilter",3,"ngModelChange","ngModel"],[1,"pending-list"],["class","pending-item",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],[3,"value"],[1,"customer-info-display"],[1,"info-header"],[1,"info-row"],[1,"info-label"],[1,"info-value"],[1,"transaction-summary"],[1,"summary-row"],[1,"label"],[1,"value"],["class","summary-row",4,"ngIf"],[1,"summary-row","total-row"],[1,"summary-row","change-row"],["class","summary-row delivery-info",4,"ngIf"],[1,"value","discount-value"],[1,"summary-row","delivery-info"],[4,"ngIf"],[1,"error-message"],[1,"pending-item"],[1,"pending-details"],[1,"pending-header"],[1,"product-name"],[1,"sale-date"],[1,"pending-info"],["class","customer-details",4,"ngIf"],["class","delivery-info",4,"ngIf"],[1,"pending-actions"],[1,"btn-edit",3,"click"],[1,"btn-deliver",3,"click"],[1,"customer-details"],[1,"customer-header"],[1,"customer-row"],[1,"customer-label"],[1,"customer-value"],[1,"delivery-info"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],["for","editDate"],["type","date","id","editDate",1,"date-input",3,"ngModelChange","ngModel","min"],["for","editTime"],["type","time","id","editTime",1,"time-input",3,"ngModelChange","ngModel"],["for","editNotes"],["id","editNotes","rows","3",1,"textarea-input",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn-cancel",3,"click"],[1,"btn-save",3,"click"]],template:function(r,i){r&1&&(f(0,"div",0)(1,"h3"),y(2,"Point of Sale"),h(),f(3,"form",1),U("ngSubmit",function(){return i.processSale()}),f(4,"div",2)(5,"label",3),y(6,"Select Customer (Optional)"),h(),f(7,"select",4),Z("ngModelChange",function(s){return te(i.selectedCustomerId,s)||(i.selectedCustomerId=s),s}),f(8,"option",5),y(9,"-- Walk-in Customer --"),h(),z(10,rN,2,3,"option",6),h()(),z(11,iN,18,3,"div",7),f(12,"div",2)(13,"label",8),y(14,"Select Product"),h(),f(15,"select",9),Z("ngModelChange",function(s){return te(i.selectedProductId,s)||(i.selectedProductId=s),s}),U("change",function(){return i.onProductChange()}),f(16,"option",5),y(17,"-- Choose a product --"),h(),z(18,oN,2,4,"option",6),h()(),f(19,"div",10)(20,"div",2)(21,"label",11),y(22,"Quantity"),h(),f(23,"input",12),Z("ngModelChange",function(s){return te(i.quantity,s)||(i.quantity=s),s}),h()(),f(24,"div",2)(25,"label",13),y(26,"Cash Received"),h(),f(27,"input",14),Z("ngModelChange",function(s){return te(i.cashReceived,s)||(i.cashReceived=s),s}),h()()(),f(28,"div",10)(29,"div",2)(30,"label"),y(31,"Discount Type"),h(),f(32,"div",15)(33,"label",16)(34,"input",17),Z("ngModelChange",function(s){return te(i.discountType,s)||(i.discountType=s),s}),h(),y(35," Amount ($)"),h(),f(36,"label",16)(37,"input",18),Z("ngModelChange",function(s){return te(i.discountType,s)||(i.discountType=s),s}),h(),y(38," Percent (%)"),h()()(),f(39,"div",2)(40,"label",19),y(41,"Discount Value"),h(),f(42,"input",20),Z("ngModelChange",function(s){return te(i.discount,s)||(i.discount=s),s}),h()()(),f(43,"div",21)(44,"h4",22)(45,"span",23),y(46,"\u{1F69A}"),h(),y(47," Delivery Schedule (Optional)"),h(),f(48,"div",10)(49,"div",2)(50,"label",24),y(51,"Delivery Date"),h(),f(52,"input",25),Z("ngModelChange",function(s){return te(i.deliveryDate,s)||(i.deliveryDate=s),s}),h()(),f(53,"div",2)(54,"label",26),y(55,"Delivery Time"),h(),f(56,"input",27),Z("ngModelChange",function(s){return te(i.deliveryTime,s)||(i.deliveryTime=s),s}),h()()(),f(57,"div",2)(58,"label",28),y(59,"Delivery Notes"),h(),f(60,"textarea",29),Z("ngModelChange",function(s){return te(i.deliveryNotes,s)||(i.deliveryNotes=s),s}),h()()(),z(61,lN,18,7,"div",30)(62,uN,2,1,"div",31),f(63,"button",32)(64,"span"),y(65,"\u{1F4B0}"),h(),y(66," Complete Sale"),h()()(),f(67,"div",33)(68,"h3"),y(69,"\u{1F69A} Pending Deliveries"),h(),f(70,"div",34)(71,"label",35),y(72,"Filter by Delivery Date:"),h(),f(73,"button",36),U("click",function(){return i.deliveryFilterDate=""}),f(74,"span"),y(75,"\u274C"),h(),y(76," Clear"),h(),f(77,"input",37),Z("ngModelChange",function(s){return te(i.deliveryFilterDate,s)||(i.deliveryFilterDate=s),s}),h()(),f(78,"div",38),z(79,pN,20,9,"div",39),h()(),z(80,mN,25,4,"div",40)),r&2&&(_(7),X("ngModel",i.selectedCustomerId),_(3),A("ngForOf",i.customers),_(),A("ngIf",i.selectedCustomerId&&i.selectedCustomer),_(4),X("ngModel",i.selectedProductId),_(3),A("ngForOf",i.products),_(5),X("ngModel",i.quantity),A("min",1)("max",i.maxQuantity),_(4),X("ngModel",i.cashReceived),_(7),X("ngModel",i.discountType),_(3),X("ngModel",i.discountType),_(5),X("ngModel",i.discount),_(10),X("ngModel",i.deliveryDate),A("min",i.minDate),_(4),X("ngModel",i.deliveryTime),_(4),X("ngModel",i.deliveryNotes),_(),A("ngIf",i.selectedProduct),_(),A("ngIf",i.errorMessage),_(),A("disabled",!i.isValid()),_(14),X("ngModel",i.deliveryFilterDate),_(2),A("ngForOf",i.filteredPendingSales),_(),A("ngIf",i.isEditModalOpen))},dependencies:[Ue,ut,Ze,On,ft,tn,Rn,kn,dt,sr,nn,$f,ht,en,Ht,ar,Hf,at,zt],styles:[".form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg);margin-top:var(--space-lg)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--space-lg)}.delivery-section[_ngcontent-%COMP%]{background:var(--color-bg);padding:var(--space-lg);border-radius:var(--radius-lg);border:2px dashed var(--color-border);margin-top:var(--space-md)}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);font-size:1rem;font-weight:600;color:var(--color-text);margin-bottom:var(--space-lg)}.section-icon[_ngcontent-%COMP%]{font-size:1.25rem}.date-input[_ngcontent-%COMP%], .time-input[_ngcontent-%COMP%]{cursor:pointer}.textarea-input[_ngcontent-%COMP%]{font-family:inherit;font-size:.9375rem;padding:var(--space-sm) var(--space-md);border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-surface);color:var(--color-text);transition:all var(--transition-base);width:100%;resize:vertical;min-height:80px}.textarea-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f61a}.textarea-input[_ngcontent-%COMP%]::placeholder{color:var(--color-text-muted)}.customer-info-display[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f61a,#9333ea1a);border:2px solid var(--color-primary);border-radius:var(--radius-lg);padding:var(--space-lg);margin-bottom:var(--space-lg)}.info-header[_ngcontent-%COMP%]{font-weight:600;font-size:1rem;color:var(--color-primary);margin-bottom:var(--space-md);display:flex;align-items:center;gap:var(--space-sm)}.info-row[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm);padding:var(--space-xs) 0;font-size:.875rem}.info-label[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text-muted);min-width:120px}.info-value[_ngcontent-%COMP%]{color:var(--color-text);flex:1}.transaction-summary[_ngcontent-%COMP%]{background:var(--color-bg);border-radius:var(--radius-md);padding:var(--space-lg);margin-top:var(--space-md)}.summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--space-sm) 0;font-size:1.125rem}.summary-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text-muted)}.summary-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text);font-size:1.25rem}.change-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:var(--color-success)}.change-row.negative[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:var(--color-danger)}.delivery-info[_ngcontent-%COMP%]{border-top:1px solid var(--color-border);margin-top:var(--space-sm);padding-top:var(--space-md)}.delivery-info[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1rem;color:var(--color-primary)}.error-message[_ngcontent-%COMP%]{background:#fee;color:var(--color-danger);padding:var(--space-md);border-radius:var(--radius-md);font-size:.875rem;border:1px solid rgba(239,68,68,.2)}.btn-success[_ngcontent-%COMP%]{background:var(--color-success)}.btn-success[_ngcontent-%COMP%]:hover{background:#059669}@media (max-width: 640px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}.pending-deliveries[_ngcontent-%COMP%]{margin-top:var(--space-xl);border-top:4px solid var(--color-warning)}.pending-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md);margin-top:var(--space-lg)}.pending-item[_ngcontent-%COMP%]{background:var(--color-bg);border:1px solid var(--color-border);border-radius:var(--radius-md);padding:var(--space-md);display:flex;justify-content:space-between;align-items:center;gap:var(--space-md)}.pending-details[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:var(--space-xs)}.pending-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--space-xs)}.product-name[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text)}.sale-date[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted)}.pending-info[_ngcontent-%COMP%]{display:flex;gap:var(--space-lg);font-size:.875rem;color:var(--color-text-muted)}.delivery-info[_ngcontent-%COMP%]{margin-top:var(--space-xs);padding-top:var(--space-xs);border-top:1px dashed var(--color-border);font-size:.875rem;color:var(--color-primary);display:flex;flex-direction:column;gap:2px}.btn-deliver[_ngcontent-%COMP%]{background:var(--color-success);color:#fff;border:none;padding:var(--space-sm) var(--space-md);border-radius:var(--radius-md);font-weight:500;cursor:pointer;transition:all var(--transition-base);white-space:nowrap}.btn-deliver[_ngcontent-%COMP%]:hover{background:#059669;transform:translateY(-1px)}@media (max-width: 640px){.pending-item[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.btn-deliver[_ngcontent-%COMP%]{width:100%}}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.modal-content[_ngcontent-%COMP%]{background-color:var(--color-surface);padding:2rem;border-radius:12px;width:90%;max-width:500px;box-shadow:0 10px 25px #0003;animation:_ngcontent-%COMP%_slideIn .3s ease-out;color:var(--color-text)}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translateY(-20px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;border-bottom:1px solid var(--color-border);padding-bottom:1rem}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--color-text)}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:var(--color-text-muted)}.modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.modal-footer[_ngcontent-%COMP%]{margin-top:2rem;display:flex;justify-content:flex-end;gap:1rem;padding-top:1rem;border-top:1px solid var(--color-border)}.btn-cancel[_ngcontent-%COMP%]{padding:.5rem 1rem;border:1px solid var(--color-border);background-color:var(--color-surface);color:var(--color-text);border-radius:6px;cursor:pointer;font-weight:500;transition:background-color .2s}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:var(--color-bg)}.btn-save[_ngcontent-%COMP%]{padding:.5rem 1rem;background-color:#4caf50;color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:500}.btn-save[_ngcontent-%COMP%]:hover{background-color:#45a049}.pending-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;margin-left:1rem}.btn-edit[_ngcontent-%COMP%]{padding:.5rem 1rem;background-color:#2196f3;color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:500;transition:background-color .2s}.btn-edit[_ngcontent-%COMP%]:hover{background-color:#1976d2}.customer-details[_ngcontent-%COMP%]{margin-top:.75rem;padding:.75rem;background:linear-gradient(135deg,#8b5cf61a,#6366f11a);border-left:3px solid #8b5cf6;border-radius:6px}.customer-header[_ngcontent-%COMP%]{font-weight:600;color:#8b5cf6;margin-bottom:.5rem;font-size:.95rem}.customer-row[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-bottom:.25rem;font-size:.9rem}.customer-label[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text-muted);min-width:60px}.customer-value[_ngcontent-%COMP%]{color:var(--color-text);font-weight:400}.radio-group[_ngcontent-%COMP%]{display:flex;background:var(--color-bg);padding:4px;border-radius:8px;border:1px solid var(--color-border);gap:4px}.radio-label[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;padding:8px 12px;cursor:pointer;font-size:.9rem;font-weight:500;color:var(--color-text-muted);border-radius:6px;transition:all .2s ease;text-align:center;-webkit-user-select:none;user-select:none}.radio-label[_ngcontent-%COMP%]:hover{background:var(--color-surface);color:var(--color-text)}.radio-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.radio-label[_ngcontent-%COMP%]:has(input:checked){background:var(--color-primary);color:#fff;box-shadow:0 2px 4px #0000001a}.discount-value[_ngcontent-%COMP%]{color:var(--color-danger);font-weight:600}.total-row[_ngcontent-%COMP%]{border-top:1px solid var(--color-border);margin-top:var(--space-sm);padding-top:var(--space-md)}"]})}}return n})();function gN(n,e){if(n&1&&(f(0,"div",32)(1,"div",33),y(2),h(),f(3,"div",34),Te(4,"div",35),h(),f(5,"div",36),y(6),h()()),n&2){let t=e.$implicit,r=P();_(2),G(t.category),_(2),gn("width",t.total/r.totalSalesValue*100,"%"),A("title","$"+t.total.toFixed(2)),_(2),er("$",t.total.toFixed(2)," (",t.count,")")}}function yN(n,e){n&1&&(f(0,"div",37),y(1," No sales data yet "),h())}function vN(n,e){if(n&1&&(f(0,"div",50),Te(1,"img",51),h()),n&2){let t=P().$implicit;_(),A("src",t.imageUrl,bi)("alt",t.name)}}function _N(n,e){n&1&&(f(0,"div",52)(1,"span",53),y(2,"\u{1F4E6}"),h()())}function bN(n,e){if(n&1){let t=se();f(0,"div",40),z(1,vN,2,2,"div",41)(2,_N,3,0,"div",42),f(3,"div",43)(4,"div",44),y(5),h(),f(6,"div",45),y(7),h()(),f(8,"div",46)(9,"div",47),y(10),h(),f(11,"div",48),y(12),h(),f(13,"button",49),U("click",function(){let i=V(t).$implicit,o=P(2);return L(o.openEditModal(i))}),y(14," \u270F\uFE0F Edit "),h()()()}if(n&2){let t=e.$implicit;_(),A("ngIf",t.imageUrl),_(),A("ngIf",!t.imageUrl),_(3),G(t.name),_(2),G(t.category),_(3),Y("$",t.price.toFixed(2),""),_(2),Y("Stock: ",t.quantity,"")}}function wN(n,e){if(n&1&&(f(0,"div",38),z(1,bN,15,6,"div",39),h()),n&2){let t=P();_(),A("ngForOf",t.paginatedAvailableProducts)}}function CN(n,e){if(n&1&&(f(0,"option",59),y(1),h()),n&2){let t=e.$implicit;A("value",t),_(),G(t)}}function EN(n,e){if(n&1){let t=se();f(0,"button",64),U("click",function(){let i=V(t).$implicit,o=P(3);return L(o.goToAvailablePage(i))}),y(1),h()}if(n&2){let t=e.$implicit,r=P(3);be("active",t===r.availableProductsPage),_(),Y(" ",t," ")}}function IN(n,e){if(n&1){let t=se();f(0,"div",60)(1,"button",61),U("click",function(){V(t);let i=P(2);return L(i.prevAvailablePage())}),y(2," \u2190 Prev "),h(),f(3,"div",62),z(4,EN,2,3,"button",63),h(),f(5,"button",61),U("click",function(){V(t);let i=P(2);return L(i.nextAvailablePage())}),y(6," Next \u2192 "),h()()}if(n&2){let t=P(2);_(),A("disabled",t.availableProductsPage===1),_(3),A("ngForOf",t.getPageNumbers(t.availableProductsTotalPages)),_(),A("disabled",t.availableProductsPage===t.availableProductsTotalPages)}}function DN(n,e){if(n&1){let t=se();f(0,"div",54)(1,"div",55)(2,"label",56),y(3,"Show:"),h(),f(4,"select",57),Z("ngModelChange",function(i){V(t);let o=P();return te(o.availableProductsPageSize,i)||(o.availableProductsPageSize=i),L(i)}),U("change",function(){V(t);let i=P();return L(i.onAvailablePageSizeChange())}),z(5,CN,2,2,"option",28),h(),f(6,"span"),y(7,"per page"),h()(),z(8,IN,7,3,"div",58),h()}if(n&2){let t=P();_(4),X("ngModel",t.availableProductsPageSize),_(),A("ngForOf",t.pageSizeOptions),_(3),A("ngIf",t.availableProductsTotalPages>1)}}function xN(n,e){n&1&&(f(0,"div",65)(1,"p"),y(2,"No available products"),h()())}function SN(n,e){if(n&1&&(f(0,"div",70)(1,"div",71)(2,"div",72),y(3),h(),f(4,"div",73),y(5),h(),f(6,"div",74),y(7," Pending Delivery "),h()(),f(8,"div",75)(9,"div",76),y(10),h(),f(11,"div",77),y(12),xe(13,"date"),h()()()),n&2){let t=e.$implicit;_(3),G(t.productName),_(2),er(" ",t.quantitySold," \xD7 $",t.price.toFixed(2)," "),_(5),Y("$",t.total.toFixed(2),""),_(2),G(Ne(13,5,t.timestamp,"medium"))}}function TN(n,e){if(n&1&&(f(0,"div",66)(1,"h3")(2,"span",5),y(3,"\u{1F69A}"),h(),y(4," Pending Deliveries "),f(5,"span",67),y(6),h()(),f(7,"div",68),z(8,SN,14,8,"div",69),h()()),n&2){let t=P();_(6),G(t.pendingSales.length),_(2),A("ngForOf",t.pendingSales)}}function MN(n,e){if(n&1&&(f(0,"option",59),y(1),h()),n&2){let t=e.$implicit;A("value",t),_(),G(t)}}function AN(n,e){if(n&1&&(f(0,"div",79),y(1),xe(2,"date"),h()),n&2){let t=P().$implicit;_(),Y(" \u{1F69A} ",Ne(2,1,t.deliveryDate,"MMM d, y")," ")}}function PN(n,e){if(n&1&&(f(0,"div",70)(1,"div",71)(2,"div",72),y(3),h(),f(4,"div",73),y(5),h(),z(6,AN,3,4,"div",78),h(),f(7,"div",75)(8,"div",76),y(9),h(),f(10,"div",77),y(11),xe(12,"date"),h()()()),n&2){let t=e.$implicit;_(3),G(t.productName),_(2),er(" ",t.quantitySold," \xD7 $",t.price.toFixed(2)," "),_(),A("ngIf",t.deliveryDate),_(3),Y("$",t.total.toFixed(2),""),_(2),G(Ne(12,6,t.timestamp,"short"))}}function NN(n,e){if(n&1&&(f(0,"div",68),z(1,PN,13,9,"div",69),h()),n&2){let t=P();_(),A("ngForOf",t.paginatedSales)}}function ON(n,e){if(n&1&&(f(0,"option",59),y(1),h()),n&2){let t=e.$implicit;A("value",t),_(),G(t)}}function RN(n,e){if(n&1){let t=se();f(0,"button",64),U("click",function(){let i=V(t).$implicit,o=P(3);return L(o.goToSalesPage(i))}),y(1),h()}if(n&2){let t=e.$implicit,r=P(3);be("active",t===r.salesPage),_(),Y(" ",t," ")}}function kN(n,e){if(n&1){let t=se();f(0,"div",60)(1,"button",61),U("click",function(){V(t);let i=P(2);return L(i.prevSalesPage())}),y(2," \u2190 Prev "),h(),f(3,"div",62),z(4,RN,2,3,"button",63),h(),f(5,"button",61),U("click",function(){V(t);let i=P(2);return L(i.nextSalesPage())}),y(6," Next \u2192 "),h()()}if(n&2){let t=P(2);_(),A("disabled",t.salesPage===1),_(3),A("ngForOf",t.getPageNumbers(t.salesTotalPages)),_(),A("disabled",t.salesPage===t.salesTotalPages)}}function FN(n,e){if(n&1){let t=se();f(0,"div",54)(1,"div",55)(2,"label",80),y(3,"Show:"),h(),f(4,"select",81),Z("ngModelChange",function(i){V(t);let o=P();return te(o.salesPageSize,i)||(o.salesPageSize=i),L(i)}),U("change",function(){V(t);let i=P();return L(i.onSalesPageSizeChange())}),z(5,ON,2,2,"option",28),h(),f(6,"span"),y(7,"per page"),h()(),z(8,kN,7,3,"div",58),h()}if(n&2){let t=P();_(4),X("ngModel",t.salesPageSize),_(),A("ngForOf",t.pageSizeOptions),_(3),A("ngIf",t.salesTotalPages>1)}}function VN(n,e){n&1&&(f(0,"div",65)(1,"p"),y(2,"No sales yet"),h()())}function LN(n,e){if(n&1&&(f(0,"div",50),Te(1,"img",51),h()),n&2){let t=P().$implicit;_(),A("src",t.imageUrl,bi)("alt",t.name)}}function jN(n,e){n&1&&(f(0,"div",52)(1,"span",53),y(2,"\u{1F4E6}"),h()())}function BN(n,e){if(n&1&&(f(0,"option",59),y(1),h()),n&2){let t=e.$implicit;A("value",t),_(),G(t)}}function UN(n,e){if(n&1){let t=se();f(0,"button",64),U("click",function(){let i=V(t).$implicit,o=P(5);return L(o.goToOutOfStockPage(i))}),y(1),h()}if(n&2){let t=e.$implicit,r=P(5);be("active",t===r.outOfStockPage),_(),Y(" ",t," ")}}function $N(n,e){if(n&1){let t=se();f(0,"div",60)(1,"button",61),U("click",function(){V(t);let i=P(4);return L(i.prevOutOfStockPage())}),y(2," \u2190 Prev "),h(),f(3,"div",62),z(4,UN,2,3,"button",63),h(),f(5,"button",61),U("click",function(){V(t);let i=P(4);return L(i.nextOutOfStockPage())}),y(6," Next \u2192 "),h()()}if(n&2){let t=P(4);_(),A("disabled",t.outOfStockPage===1),_(3),A("ngForOf",t.getPageNumbers(t.outOfStockTotalPages)),_(),A("disabled",t.outOfStockPage===t.outOfStockTotalPages)}}function zN(n,e){if(n&1){let t=se();f(0,"div",54)(1,"div",55)(2,"label",88),y(3,"Show:"),h(),f(4,"select",89),Z("ngModelChange",function(i){V(t);let o=P(3);return te(o.outOfStockPageSize,i)||(o.outOfStockPageSize=i),L(i)}),U("change",function(){V(t);let i=P(3);return L(i.onOutOfStockPageSizeChange())}),z(5,BN,2,2,"option",28),h(),f(6,"span"),y(7,"per page"),h()(),z(8,$N,7,3,"div",58),h()}if(n&2){let t=P(3);_(4),X("ngModel",t.outOfStockPageSize),_(),A("ngForOf",t.pageSizeOptions),_(3),A("ngIf",t.outOfStockTotalPages>1)}}function HN(n,e){if(n&1){let t=se();f(0,"div",84),z(1,LN,2,2,"div",41)(2,jN,3,0,"div",42),f(3,"div",43)(4,"div",44),y(5),f(6,"div")(7,"div",45),y(8),h()(),f(9,"div",46)(10,"div",47),y(11),h(),f(12,"div",85),y(13,"Out of Stock"),h(),f(14,"div",86)(15,"button",87),U("click",function(){let i=V(t).$implicit,o=P(2);return L(o.onRestock(i))}),y(16," \u2795 Restock "),h()()()()(),z(17,zN,9,3,"div",22),h()}if(n&2){let t=e.$implicit,r=P(2);_(),A("ngIf",t.imageUrl),_(),A("ngIf",!t.imageUrl),_(3),Y(" ",t.name,""),_(3),G(t.category),_(3),Y("$",t.price.toFixed(2),""),_(6),A("ngIf",r.outOfStockTotalPages>1||r.outOfStockProducts.length>10)}}function qN(n,e){if(n&1&&(f(0,"div",82)(1,"h3")(2,"span",5),y(3,"\u26A0\uFE0F"),h(),y(4," Out of Stock "),f(5,"span",67),y(6),h()(),f(7,"div",38),z(8,HN,18,6,"div",83),h()()),n&2){let t=P();_(6),G(t.outOfStockProducts.length),_(2),A("ngForOf",t.paginatedOutOfStockProducts)}}function GN(n,e){if(n&1){let t=se();f(0,"div",90),U("click",function(){V(t);let i=P();return L(i.closeEditModal())}),f(1,"div",91),U("click",function(i){return V(t),L(i.stopPropagation())}),f(2,"div",92)(3,"h3"),y(4,"Edit Product"),h(),f(5,"button",93),U("click",function(){V(t);let i=P();return L(i.closeEditModal())}),y(6,"\xD7"),h()(),f(7,"div",94)(8,"div",95)(9,"label",96),y(10,"Product Name"),h(),f(11,"input",97),Z("ngModelChange",function(i){V(t);let o=P();return te(o.editProductName,i)||(o.editProductName=i),L(i)}),h()(),f(12,"div",95)(13,"label",98),y(14,"Stock Quantity"),h(),f(15,"input",99),Z("ngModelChange",function(i){V(t);let o=P();return te(o.editProductQuantity,i)||(o.editProductQuantity=i),L(i)}),h()(),f(16,"div",95)(17,"label",100),y(18,"Price"),h(),f(19,"input",101),Z("ngModelChange",function(i){V(t);let o=P();return te(o.editProductPrice,i)||(o.editProductPrice=i),L(i)}),h()()(),f(20,"div",102)(21,"button",103),U("click",function(){V(t);let i=P();return L(i.closeEditModal())}),y(22,"Cancel"),h(),f(23,"button",104),U("click",function(){V(t);let i=P();return L(i.saveProductEdit())}),y(24,"Save Changes"),h()()()()}if(n&2){let t=P();_(11),X("ngModel",t.editProductName),_(4),X("ngModel",t.editProductQuantity),_(4),X("ngModel",t.editProductPrice)}}var hw=(()=>{class n{constructor(t){this.inventoryService=t,this.products=[],this.sales=[],this.selectedCategory="All",this.categories=["All","Lechon","Hollow blocks","Sand and Gravel","Copra","Others"],this.pageSizeOptions=[10,20,50,100],this.availableProductsPage=1,this.availableProductsPageSize=10,this.salesPage=1,this.salesPageSize=10,this.outOfStockPage=1,this.outOfStockPageSize=10,this.isEditModalOpen=!1,this.editingProduct=null,this.editProductName="",this.editProductQuantity=0,this.editProductPrice=0}ngOnInit(){this.inventoryService.getProducts().subscribe(t=>{this.products=t}),this.inventoryService.getSales().subscribe(t=>{this.sales=t})}get pendingSales(){return this.sales.filter(t=>t.pending===!0)}get filteredSales(){let t=this.sales.filter(r=>r.pending!==!0);return this.selectedCategory==="All"?t:t.filter(r=>r.category===this.selectedCategory)}get availableProducts(){return this.products.filter(t=>t.quantity>0)}get paginatedAvailableProducts(){let t=(this.availableProductsPage-1)*this.availableProductsPageSize,r=t+this.availableProductsPageSize;return this.availableProducts.slice(t,r)}get availableProductsTotalPages(){return Math.ceil(this.availableProducts.length/this.availableProductsPageSize)}get outOfStockProducts(){return this.products.filter(t=>t.quantity===0)}get paginatedOutOfStockProducts(){let t=(this.outOfStockPage-1)*this.outOfStockPageSize,r=t+this.outOfStockPageSize;return this.outOfStockProducts.slice(t,r)}get outOfStockTotalPages(){return Math.ceil(this.outOfStockProducts.length/this.outOfStockPageSize)}get paginatedSales(){let t=(this.salesPage-1)*this.salesPageSize,r=t+this.salesPageSize;return this.filteredSales.slice(t,r)}get salesTotalPages(){return Math.ceil(this.filteredSales.length/this.salesPageSize)}get salesByCategory(){let t=new Map;return this.sales.forEach(r=>{let i=t.get(r.category)||{total:0,count:0};t.set(r.category,{total:i.total+r.total,count:i.count+1})}),Array.from(t.entries()).map(([r,i])=>({category:r,total:i.total,count:i.count}))}get totalInventoryValue(){return this.products.reduce((t,r)=>t+r.price*r.quantity,0)}get totalSalesValue(){return this.sales.reduce((t,r)=>t+r.total,0)}nextAvailablePage(){this.availableProductsPage<this.availableProductsTotalPages&&this.availableProductsPage++}prevAvailablePage(){this.availableProductsPage>1&&this.availableProductsPage--}goToAvailablePage(t){t>=1&&t<=this.availableProductsTotalPages&&(this.availableProductsPage=t)}nextSalesPage(){this.salesPage<this.salesTotalPages&&this.salesPage++}prevSalesPage(){this.salesPage>1&&this.salesPage--}goToSalesPage(t){t>=1&&t<=this.salesTotalPages&&(this.salesPage=t)}nextOutOfStockPage(){this.outOfStockPage<this.outOfStockTotalPages&&this.outOfStockPage++}prevOutOfStockPage(){this.outOfStockPage>1&&this.outOfStockPage--}goToOutOfStockPage(t){this.outOfStockPage=t}onAvailablePageSizeChange(){this.availableProductsPage=1}onSalesPageSizeChange(){this.salesPage=1}onOutOfStockPageSizeChange(){this.outOfStockPage=1}getPageNumbers(t){return Array.from({length:t},(r,i)=>i+1)}onRestock(t){let r=prompt(`Enter quantity to add for ${t.name}:`);if(r){let i=parseInt(r,10);!isNaN(i)&&i>0?this.inventoryService.restockProduct(t.id,i):alert("Please enter a valid number greater than 0")}}openEditModal(t){this.editingProduct=t,this.editProductName=t.name,this.editProductQuantity=t.quantity,this.editProductPrice=t.price,this.isEditModalOpen=!0}closeEditModal(){this.isEditModalOpen=!1,this.editingProduct=null,this.editProductName="",this.editProductQuantity=0,this.editProductPrice=0}saveProductEdit(){if(!this.editingProduct)return;if(!this.editProductName.trim()){alert("Product name cannot be empty");return}if(this.editProductQuantity<0){alert("Quantity cannot be negative");return}if(this.editProductPrice<0){alert("Price cannot be negative");return}let t=ue(J({},this.editingProduct),{name:this.editProductName,quantity:this.editProductQuantity,price:this.editProductPrice});this.inventoryService.updateProduct(t),this.closeEditModal()}static{this.\u0275fac=function(r){return new(r||n)(W(on))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-inventory-list"]],standalone:!0,features:[ze],decls:63,vars:17,consts:[["noAvailable",""],["noSales",""],[1,"inventory-section"],[1,"inventory-content"],[1,"card","analytics-card"],[1,"icon"],[1,"analytics-grid"],[1,"chart-container"],[1,"bar-chart"],["class","bar-item",4,"ngFor","ngForOf"],["class","empty-chart",4,"ngIf"],[1,"stats-grid"],[1,"stat-card"],[1,"stat-icon"],[1,"stat-info"],[1,"stat-label"],[1,"stat-value"],[1,"stat-card","success"],[1,"lists-container"],[1,"card"],[1,"badge"],["class","product-list",4,"ngIf","ngIfElse"],["class","pagination",4,"ngIf"],["class","card pending-section",4,"ngIf"],[1,"section-header"],[1,"filter-group"],["for","categoryFilter"],["id","categoryFilter",1,"category-filter",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","sales-list",4,"ngIf","ngIfElse"],["class","card out-of-stock-section",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"bar-item"],[1,"bar-label"],[1,"bar-wrapper"],[1,"bar-fill",3,"title"],[1,"bar-value"],[1,"empty-chart"],[1,"product-list"],["class","product-item",4,"ngFor","ngForOf"],[1,"product-item"],["class","product-image-wrapper",4,"ngIf"],["class","product-image-wrapper placeholder",4,"ngIf"],[1,"product-info"],[1,"product-name"],[1,"product-category"],[1,"product-details"],[1,"product-price"],[1,"product-stock"],[1,"btn-edit-sm",3,"click"],[1,"product-image-wrapper"],["loading","lazy",1,"product-image",3,"src","alt"],[1,"product-image-wrapper","placeholder"],[1,"placeholder-icon"],[1,"pagination"],[1,"pagination-size"],["for","availablePageSize"],["id","availablePageSize",1,"page-size-select",3,"ngModelChange","change","ngModel"],["class","pagination-controls",4,"ngIf"],[3,"value"],[1,"pagination-controls"],[1,"pagination-btn",3,"click","disabled"],[1,"pagination-pages"],["class","pagination-page",3,"active","click",4,"ngFor","ngForOf"],[1,"pagination-page",3,"click"],[1,"empty-state"],[1,"card","pending-section"],[1,"badge","warning"],[1,"sales-list"],["class","sale-item",4,"ngFor","ngForOf"],[1,"sale-item"],[1,"sale-info"],[1,"sale-name"],[1,"sale-details-text"],[1,"delivery-badge","warning"],[1,"sale-amount"],[1,"sale-total"],[1,"sale-date"],["class","delivery-badge",4,"ngIf"],[1,"delivery-badge"],["for","salesPageSize"],["id","salesPageSize",1,"page-size-select",3,"ngModelChange","change","ngModel"],[1,"card","out-of-stock-section"],["class","product-item dimmed",4,"ngFor","ngForOf"],[1,"product-item","dimmed"],[1,"product-stock","out"],[1,"product-actions"],[1,"btn-restock",3,"click"],["for","outOfStockPageSize"],["id","outOfStockPageSize",1,"page-size-select",3,"ngModelChange","change","ngModel"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"form-group"],["for","editName"],["type","text","id","editName",1,"text-input",3,"ngModelChange","ngModel"],["for","editQuantity"],["type","number","id","editQuantity","min","0",1,"number-input",3,"ngModelChange","ngModel"],["for","editPrice"],["type","number","id","editPrice","min","0","step","0.01",1,"number-input",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn-cancel",3,"click"],[1,"btn-save",3,"click"]],template:function(r,i){if(r&1){let o=se();f(0,"div",2)(1,"div",3)(2,"div",4)(3,"h3")(4,"span",5),y(5,"\u{1F4C8}"),h(),y(6," Sales Analytics "),h(),f(7,"div",6)(8,"div",7)(9,"h4"),y(10,"Sales by Category"),h(),f(11,"div",8),z(12,gN,7,6,"div",9)(13,yN,2,0,"div",10),h()()()(),f(14,"div",11)(15,"div",12)(16,"div",13),y(17,"\u{1F4B0}"),h(),f(18,"div",14)(19,"div",15),y(20,"Total Inventory Value"),h(),f(21,"div",16),y(22),h()()(),f(23,"div",17)(24,"div",13),y(25,"\u{1F4CA}"),h(),f(26,"div",14)(27,"div",15),y(28,"Total Sales"),h(),f(29,"div",16),y(30),h()()()(),f(31,"div",18)(32,"div",19)(33,"h3")(34,"span",5),y(35,"\u{1F4E6}"),h(),y(36," Available Inventory "),f(37,"span",20),y(38),h()(),z(39,wN,2,1,"div",21)(40,DN,9,3,"div",22)(41,xN,3,0,"ng-template",null,0,tr),h(),z(43,TN,9,2,"div",23),f(44,"div",19)(45,"div",24)(46,"h3")(47,"span",5),y(48,"\u{1F4B0}"),h(),y(49," Sales History "),f(50,"span",20),y(51),h()(),f(52,"div",25)(53,"label",26),y(54,"Filter by Category:"),h(),f(55,"select",27),Z("ngModelChange",function(c){return V(o),te(i.selectedCategory,c)||(i.selectedCategory=c),L(c)}),U("change",function(){return V(o),L(i.salesPage=1)}),z(56,MN,2,2,"option",28),h()()(),z(57,NN,2,1,"div",29)(58,FN,9,3,"div",22)(59,VN,3,0,"ng-template",null,1,tr),h(),z(61,qN,9,2,"div",30)(62,GN,25,3,"div",31),h()()()}if(r&2){let o=Zn(42),s=Zn(60);_(12),A("ngForOf",i.salesByCategory),_(),A("ngIf",i.salesByCategory.length===0),_(9),Y("$",i.totalInventoryValue.toFixed(2),""),_(8),Y("$",i.totalSalesValue.toFixed(2),""),_(8),G(i.availableProducts.length),_(),A("ngIf",i.availableProducts.length>0)("ngIfElse",o),_(),A("ngIf",i.availableProductsTotalPages>1||i.availableProducts.length>10),_(3),A("ngIf",i.pendingSales.length>0),_(8),G(i.filteredSales.length),_(4),X("ngModel",i.selectedCategory),_(),A("ngForOf",i.categories),_(),A("ngIf",i.sales.length>0)("ngIfElse",s),_(),A("ngIf",i.salesTotalPages>1||i.filteredSales.length>10),_(3),A("ngIf",i.outOfStockProducts.length>0),_(),A("ngIf",i.isEditModalOpen)}},dependencies:[Ue,ut,Ze,On,ft,Rn,kn,dt,sr,nn,ht,ar,at],styles:[".inventory-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xl)}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:var(--space-lg);margin-bottom:var(--space-2xl)}.analytics-card[_ngcontent-%COMP%]{margin-bottom:var(--space-2xl)}.analytics-grid[_ngcontent-%COMP%]{margin-top:var(--space-lg)}.chart-container[_ngcontent-%COMP%]{background:var(--color-bg);padding:var(--space-lg);border-radius:var(--radius-md)}.chart-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 var(--space-lg) 0;color:var(--color-text);font-size:1rem}.bar-chart[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md)}.bar-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:80px 1fr 120px;gap:var(--space-sm);align-items:center}.bar-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.bar-wrapper[_ngcontent-%COMP%]{height:24px;background:var(--color-surface);border-radius:var(--radius-md);overflow:hidden;border:1px solid var(--color-border)}.bar-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,var(--color-primary),var(--color-success));transition:width .3s ease;min-width:2%}.bar-value[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:var(--color-text);text-align:right}.empty-chart[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl);color:var(--color-text-muted);font-style:italic}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:var(--space-md);margin-bottom:var(--space-lg)}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.filter-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm)}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.category-filter[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-surface);color:var(--color-text);font-size:.875rem;cursor:pointer;transition:all var(--transition-base)}.category-filter[_ngcontent-%COMP%]:hover{border-color:var(--color-primary)}.category-filter[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f61a}.stat-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-primary),var(--color-primary-dark));color:#fff;padding:var(--space-xl);border-radius:var(--radius-lg);box-shadow:var(--shadow-lg);display:flex;align-items:center;gap:var(--space-lg)}.stat-card.success[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-success),#059669)}.stat-icon[_ngcontent-%COMP%]{font-size:2.5rem}.stat-info[_ngcontent-%COMP%]{flex:1}.stat-label[_ngcontent-%COMP%]{font-size:.875rem;opacity:.9;margin-bottom:var(--space-sm)}.stat-value[_ngcontent-%COMP%]{font-size:2rem;font-weight:700}.lists-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(500px,1fr));gap:var(--space-xl)}h3[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);margin-bottom:var(--space-lg)}.icon[_ngcontent-%COMP%]{font-size:1.5rem}.badge[_ngcontent-%COMP%]{margin-left:auto;background:var(--color-bg);color:var(--color-primary);padding:var(--space-xs) var(--space-md);border-radius:var(--radius-xl);font-size:.875rem;font-weight:600}.badge.warning[_ngcontent-%COMP%]{background:#fef3c7;color:var(--color-warning)}.product-list[_ngcontent-%COMP%], .sales-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md)}.product-item[_ngcontent-%COMP%], .sale-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:var(--space-md);padding:var(--space-md);background:var(--color-bg);border-radius:var(--radius-md);transition:all var(--transition-base)}.product-image-wrapper[_ngcontent-%COMP%]{flex-shrink:0;width:60px;height:60px;border-radius:var(--radius-md);overflow:hidden;background:var(--color-surface);border:1px solid var(--color-border);display:flex;align-items:center;justify-content:center}.product-image-wrapper.placeholder[_ngcontent-%COMP%]{background:var(--color-bg)}.product-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.placeholder-icon[_ngcontent-%COMP%]{font-size:1.5rem;opacity:.5}.product-item[_ngcontent-%COMP%]:hover, .sale-item[_ngcontent-%COMP%]:hover{background:#e0e7ff;transform:translate(4px)}.product-item.dimmed[_ngcontent-%COMP%]{opacity:.5}.product-info[_ngcontent-%COMP%], .sale-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xs);flex:1;align-self:flex-start;padding-top:4px}.product-name[_ngcontent-%COMP%], .sale-name[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text)}.product-category[_ngcontent-%COMP%], .sale-details-text[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-muted)}.delivery-badge[_ngcontent-%COMP%]{display:inline-block;margin-top:var(--space-xs);padding:var(--space-xs) var(--space-sm);background:#10b9811a;color:var(--color-success);border-radius:var(--radius-sm);font-size:.75rem;font-weight:500}.product-details[_ngcontent-%COMP%], .sale-amount[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:var(--space-xs)}.product-price[_ngcontent-%COMP%], .sale-total[_ngcontent-%COMP%]{font-weight:600;font-size:1.125rem;color:var(--color-primary)}.product-stock[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-success);font-weight:500}.product-stock.out[_ngcontent-%COMP%]{color:var(--color-danger)}.sale-date[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl);color:var(--color-text-muted)}.out-of-stock-section[_ngcontent-%COMP%]{border:2px solid rgba(239,68,68,.2)}.pagination[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md);margin-top:var(--space-lg);padding-top:var(--space-lg);border-top:1px solid var(--color-border)}.pagination-size[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);font-size:.875rem;color:var(--color-text)}.pagination-size[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500}.page-size-select[_ngcontent-%COMP%]{padding:var(--space-xs) var(--space-sm);border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-surface);color:var(--color-text);font-size:.875rem;cursor:pointer;transition:all var(--transition-base)}.page-size-select[_ngcontent-%COMP%]:hover{border-color:var(--color-primary)}.page-size-select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f61a}.pagination-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:var(--space-sm)}.pagination-btn[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);background:var(--color-surface);border:1px solid var(--color-border);color:var(--color-text);border-radius:var(--radius-md);font-size:.875rem;font-weight:500;cursor:pointer;transition:all var(--transition-base)}.pagination-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--color-primary);color:#fff;border-color:var(--color-primary);transform:translateY(-1px)}.pagination-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed;transform:none}.pagination-pages[_ngcontent-%COMP%]{display:flex;gap:var(--space-xs);flex-wrap:wrap;justify-content:center}.pagination-page[_ngcontent-%COMP%]{min-width:36px;height:36px;padding:var(--space-xs) var(--space-sm);background:var(--color-surface);border:1px solid var(--color-border);color:var(--color-text);border-radius:var(--radius-md);font-size:.875rem;font-weight:500;cursor:pointer;transition:all var(--transition-base);display:flex;align-items:center;justify-content:center}.pagination-page[_ngcontent-%COMP%]:hover{background:var(--color-bg);border-color:var(--color-primary);transform:translateY(-1px)}.pagination-page.active[_ngcontent-%COMP%]{background:var(--color-primary);color:#fff;border-color:var(--color-primary)}@media (max-width: 768px){.lists-container[_ngcontent-%COMP%]{grid-template-columns:1fr}.pagination[_ngcontent-%COMP%]{flex-wrap:wrap}.pagination-pages[_ngcontent-%COMP%]{order:3;width:100%;margin-top:var(--space-sm)}h3[_ngcontent-%COMP%]{font-size:1.25rem}.product-name[_ngcontent-%COMP%], .sale-name[_ngcontent-%COMP%]{font-size:.95rem}.product-category[_ngcontent-%COMP%], .sale-details-text[_ngcontent-%COMP%]{font-size:.8rem}.product-price[_ngcontent-%COMP%], .sale-total[_ngcontent-%COMP%]{font-size:1rem}.product-stock[_ngcontent-%COMP%], .sale-date[_ngcontent-%COMP%]{font-size:.75rem}.stat-value[_ngcontent-%COMP%]{font-size:1.5rem}.stat-label[_ngcontent-%COMP%]{font-size:.8rem}}.btn-restock[_ngcontent-%COMP%]{margin-top:var(--space-xs);padding:var(--space-xs) var(--space-sm);background:var(--color-primary-light);color:#fff;border:none;border-radius:var(--radius-sm);font-size:.75rem;font-weight:500;cursor:pointer;transition:all var(--transition-base)}.btn-restock[_ngcontent-%COMP%]:hover{background:var(--color-primary);transform:translateY(-1px)}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.modal-content[_ngcontent-%COMP%]{background-color:var(--color-surface);padding:2rem;border-radius:12px;width:90%;max-width:500px;box-shadow:0 10px 25px #0003;animation:_ngcontent-%COMP%_slideIn .3s ease-out;color:var(--color-text)}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translateY(-20px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;border-bottom:1px solid var(--color-border);padding-bottom:1rem}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--color-text)}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:var(--color-text-muted)}.modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.modal-footer[_ngcontent-%COMP%]{margin-top:2rem;display:flex;justify-content:flex-end;gap:1rem;padding-top:1rem;border-top:1px solid var(--color-border)}.btn-cancel[_ngcontent-%COMP%]{padding:.5rem 1rem;border:1px solid var(--color-border);background-color:var(--color-surface);color:var(--color-text);border-radius:6px;cursor:pointer;font-weight:500;transition:background-color .2s}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:var(--color-bg)}.btn-save[_ngcontent-%COMP%]{padding:.5rem 1rem;background-color:#4caf50;color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:500}.btn-save[_ngcontent-%COMP%]:hover{background-color:#45a049}.btn-edit-sm[_ngcontent-%COMP%]{padding:.25rem .5rem;background-color:transparent;color:var(--color-primary);border:1px solid var(--color-primary);border-radius:4px;cursor:pointer;font-size:.75rem;font-weight:500;transition:all .2s;margin-left:.5rem}.btn-edit-sm[_ngcontent-%COMP%]:hover{background-color:var(--color-primary);color:#fff}.product-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-top:.5rem}"]})}}return n})();function WN(n,e){if(n&1){let t=se();f(0,"button",17),U("click",function(){V(t);let i=P();return L(i.cancelEdit())}),y(1," Cancel "),h()}}function KN(n,e){if(n&1){let t=se();f(0,"div",20)(1,"div",21)(2,"div",22),y(3),h(),f(4,"div",23)(5,"div",24)(6,"span",25),y(7,"\u{1F4DE}"),h(),f(8,"span"),y(9),h()(),f(10,"div",24)(11,"span",25),y(12,"\u{1F4CD}"),h(),f(13,"span"),y(14),h()()()(),f(15,"div",26)(16,"button",27),U("click",function(){let i=V(t).$implicit,o=P(2);return L(o.editCustomer(i))}),y(17," \u270F\uFE0F "),h(),f(18,"button",28),U("click",function(){let i=V(t).$implicit,o=P(2);return L(o.deleteCustomer(i.id))}),y(19," \u{1F5D1}\uFE0F "),h()()()}if(n&2){let t=e.$implicit,r=P(2);be("editing",t.id===r.editingId),_(3),G(t.name),_(6),G(t.phoneNumber),_(5),G(t.deliveryAddress),_(2),A("disabled",!!r.editingId&&r.editingId!==t.id),_(2),A("disabled",!!r.editingId)}}function QN(n,e){if(n&1&&(f(0,"div",18),z(1,KN,20,7,"div",19),h()),n&2){let t=P();_(),A("ngForOf",t.customers)}}function YN(n,e){n&1&&(f(0,"div",29)(1,"p"),y(2,"No customers registered yet"),h()())}var fw=(()=>{class n{constructor(t){this.customerService=t,this.customers=[],this.editingId=null,this.customer={name:"",phoneNumber:"",deliveryAddress:""}}ngOnInit(){this.customerService.getCustomers().subscribe(t=>{this.customers=t})}onSubmit(){this.isValid()&&(this.editingId?(this.customerService.updateCustomer(this.editingId,{name:this.customer.name,phoneNumber:this.customer.phoneNumber,deliveryAddress:this.customer.deliveryAddress}),this.editingId=null):this.customerService.addCustomer({name:this.customer.name,phoneNumber:this.customer.phoneNumber,deliveryAddress:this.customer.deliveryAddress}),this.resetForm())}editCustomer(t){this.editingId=t.id,this.customer={name:t.name,phoneNumber:t.phoneNumber||"",deliveryAddress:t.deliveryAddress||""}}cancelEdit(){this.editingId=null,this.resetForm()}resetForm(){this.customer={name:"",phoneNumber:"",deliveryAddress:""}}deleteCustomer(t){confirm("Are you sure you want to delete this customer?")&&(this.customerService.deleteCustomer(t),this.editingId===t&&this.cancelEdit())}isValid(){return!!(this.customer.name&&this.customer.phoneNumber&&this.customer.deliveryAddress)}static{this.\u0275fac=function(r){return new(r||n)(W(po))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-customer-form"]],standalone:!0,features:[ze],decls:33,vars:11,consts:[["noCustomers",""],[1,"customer-container"],[1,"card"],[1,"form",3,"ngSubmit"],[1,"form-group"],["for","customerName"],["type","text","id","customerName","name","name","placeholder","Enter customer name","required","",3,"ngModelChange","ngModel"],["for","phoneNumber"],["type","tel","id","phoneNumber","name","phoneNumber","placeholder","e.g., +1 234 567 8900","required","",3,"ngModelChange","ngModel"],["for","deliveryAddress"],["id","deliveryAddress","name","deliveryAddress","placeholder","Enter full delivery address","rows","3","required","",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","button","class","btn-secondary",3,"click",4,"ngIf"],["type","submit",1,"btn-primary",3,"disabled"],[1,"icon"],[1,"badge"],["class","customer-list",4,"ngIf","ngIfElse"],["type","button",1,"btn-secondary",3,"click"],[1,"customer-list"],["class","customer-item",3,"editing",4,"ngFor","ngForOf"],[1,"customer-item"],[1,"customer-info"],[1,"customer-name"],[1,"customer-details"],[1,"detail-row"],[1,"detail-icon"],[1,"customer-actions"],[1,"btn-edit",3,"click","disabled"],[1,"btn-delete",3,"click","disabled"],[1,"empty-state"]],template:function(r,i){if(r&1){let o=se();f(0,"div",1)(1,"div",2)(2,"h3"),y(3),h(),f(4,"form",3),U("ngSubmit",function(){return V(o),L(i.onSubmit())}),f(5,"div",4)(6,"label",5),y(7,"Customer Name *"),h(),f(8,"input",6),Z("ngModelChange",function(c){return V(o),te(i.customer.name,c)||(i.customer.name=c),L(c)}),h()(),f(9,"div",4)(10,"label",7),y(11,"Phone Number *"),h(),f(12,"input",8),Z("ngModelChange",function(c){return V(o),te(i.customer.phoneNumber,c)||(i.customer.phoneNumber=c),L(c)}),h()(),f(13,"div",4)(14,"label",9),y(15,"Delivery Address *"),h(),f(16,"textarea",10),Z("ngModelChange",function(c){return V(o),te(i.customer.deliveryAddress,c)||(i.customer.deliveryAddress=c),L(c)}),h()(),f(17,"div",11),z(18,WN,2,0,"button",12),f(19,"button",13)(20,"span"),y(21),h(),y(22),h()()()(),f(23,"div",2)(24,"h3")(25,"span",14),y(26,"\u{1F465}"),h(),y(27," Registered Customers "),f(28,"span",15),y(29),h()(),z(30,QN,2,1,"div",16)(31,YN,3,0,"ng-template",null,0,tr),h()()}if(r&2){let o=Zn(32);_(3),G(i.editingId?"Edit Customer":"Register New Customer"),_(5),X("ngModel",i.customer.name),_(4),X("ngModel",i.customer.phoneNumber),_(4),X("ngModel",i.customer.deliveryAddress),_(2),A("ngIf",i.editingId),_(),A("disabled",!i.isValid()),_(2),G(i.editingId?"\u{1F4BE}":"\u{1F464}"),_(),Y(" ",i.editingId?"Update Customer":"Add Customer"," "),_(7),G(i.customers.length),_(),A("ngIf",i.customers.length>0)("ngIfElse",o)}},dependencies:[Ue,ut,Ze,ft,tn,dt,ht,en,Ht,at,zt],styles:[".customer-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-2xl)}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg);margin-top:var(--space-lg)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font-family:inherit;font-size:.9375rem;padding:var(--space-sm) var(--space-md);border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-surface);color:var(--color-text);transition:all var(--transition-base);width:100%;resize:vertical}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f61a}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--space-lg)}.icon[_ngcontent-%COMP%]{font-size:1.5rem}.badge[_ngcontent-%COMP%]{margin-left:auto;background:var(--color-bg);color:var(--color-primary);padding:var(--space-xs) var(--space-md);border-radius:var(--radius-xl);font-size:.875rem;font-weight:600}.customer-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md);margin-top:var(--space-lg)}.customer-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:var(--space-md);padding:var(--space-lg);background:var(--color-bg);border-radius:var(--radius-md);border:1px solid var(--color-border);transition:all var(--transition-base)}.customer-item[_ngcontent-%COMP%]:hover{background:#e0e7ff;transform:translate(4px)}.customer-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:var(--space-sm)}.customer-name[_ngcontent-%COMP%]{font-weight:600;font-size:1.125rem;color:var(--color-text)}.customer-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xs)}.detail-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);font-size:.875rem;color:var(--color-text-muted)}.detail-icon[_ngcontent-%COMP%]{font-size:1rem}.customer-actions[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm)}.btn-delete[_ngcontent-%COMP%]{padding:var(--space-sm);background:transparent;border:1px solid var(--color-border);color:var(--color-danger);border-radius:var(--radius-md);font-size:1.25rem;cursor:pointer;transition:all var(--transition-base);width:40px;height:40px;display:flex;align-items:center;justify-content:center}.btn-delete[_ngcontent-%COMP%]:hover{background:var(--color-danger);border-color:var(--color-danger);transform:scale(1.1)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl);color:var(--color-text-muted)}@media (max-width: 640px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}.form-actions[_ngcontent-%COMP%]{display:flex;gap:var(--space-md);justify-content:flex-end}.btn-secondary[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-xl);background:transparent;border:1px solid var(--color-border);color:var(--color-text);border-radius:var(--radius-md);font-weight:600;cursor:pointer;transition:all var(--transition-base)}.btn-secondary[_ngcontent-%COMP%]:hover{background:var(--color-bg);border-color:var(--color-text)}.btn-edit[_ngcontent-%COMP%]{padding:var(--space-sm);background:transparent;border:1px solid var(--color-border);color:var(--color-primary);border-radius:var(--radius-md);font-size:1.25rem;cursor:pointer;transition:all var(--transition-base);width:40px;height:40px;display:flex;align-items:center;justify-content:center}.btn-edit[_ngcontent-%COMP%]:hover{background:var(--color-primary);color:#fff;border-color:var(--color-primary);transform:scale(1.1)}.btn-edit[_ngcontent-%COMP%]:disabled, .btn-delete[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;transform:none}.customer-item.editing[_ngcontent-%COMP%]{border-color:var(--color-primary);background:var(--color-surface);box-shadow:0 0 0 2px #3b82f61a}"]})}}return n})();function JN(n,e){if(n&1&&(f(0,"div",26),y(1),h()),n&2){let t=P().$implicit;_(),G(t.notes)}}function XN(n,e){if(n&1&&(f(0,"div",19)(1,"div",20)(2,"div",21),y(3),h(),z(4,JN,2,1,"div",22),f(5,"div",23),y(6),xe(7,"date"),h()(),f(8,"div",24)(9,"div",25),y(10),h()()()),n&2){let t=e.$implicit;_(3),G(t.productName),_(),A("ngIf",t.notes),_(2),G(Ne(7,4,t.timestamp,"medium")),_(4),Y("$",t.price.toFixed(2),"")}}function ZN(n,e){if(n&1&&(f(0,"div",17),z(1,XN,11,7,"div",18),h()),n&2){let t=P();_(),A("ngForOf",t.expenses)}}function eO(n,e){n&1&&(f(0,"div",27)(1,"p"),y(2,"No expenses recorded yet"),h()())}var pw=(()=>{class n{constructor(t){this.inventoryService=t,this.expenses=[],this.productName="",this.price=null,this.notes=""}ngOnInit(){this.inventoryService.getExpenses().subscribe(t=>{this.expenses=t})}get totalExpenses(){return this.expenses.reduce((t,r)=>t+r.price,0)}addExpense(){this.productName&&this.price&&this.price>0&&(this.inventoryService.addExpense({productName:this.productName,price:this.price,notes:this.notes}),this.productName="",this.price=null,this.notes="")}static{this.\u0275fac=function(r){return new(r||n)(W(on))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-expenses"]],standalone:!0,features:[ze],decls:36,vars:8,consts:[["noExpenses",""],[1,"expenses-section"],[1,"card"],[1,"icon"],[1,"form",3,"ngSubmit"],[1,"form-group"],["for","productName"],["type","text","id","productName","name","productName","placeholder","e.g., Raw materials, Utilities, etc.","required","",3,"ngModelChange","ngModel"],["for","price"],["type","number","id","price","name","price","min","0","step","0.01","placeholder","0.00","required","",3,"ngModelChange","ngModel"],["for","notes"],["id","notes","name","notes","placeholder","Additional details about this expense...","rows","3",3,"ngModelChange","ngModel"],["type","submit",1,"btn-primary",3,"disabled"],[1,"section-header"],[1,"badge"],[1,"total-badge"],["class","expenses-list",4,"ngIf","ngIfElse"],[1,"expenses-list"],["class","expense-item",4,"ngFor","ngForOf"],[1,"expense-item"],[1,"expense-info"],[1,"expense-name"],["class","expense-notes",4,"ngIf"],[1,"expense-date"],[1,"expense-amount"],[1,"expense-price"],[1,"expense-notes"],[1,"empty-state"]],template:function(r,i){if(r&1){let o=se();f(0,"div",1)(1,"div",2)(2,"h3")(3,"span",3),y(4,"\u{1F4B8}"),h(),y(5," Add Expense "),h(),f(6,"form",4),U("ngSubmit",function(){return V(o),L(i.addExpense())}),f(7,"div",5)(8,"label",6),y(9,"Product/Item Name"),h(),f(10,"input",7),Z("ngModelChange",function(c){return V(o),te(i.productName,c)||(i.productName=c),L(c)}),h()(),f(11,"div",5)(12,"label",8),y(13,"Price/Amount"),h(),f(14,"input",9),Z("ngModelChange",function(c){return V(o),te(i.price,c)||(i.price=c),L(c)}),h()(),f(15,"div",5)(16,"label",10),y(17,"Notes (Optional)"),h(),f(18,"textarea",11),Z("ngModelChange",function(c){return V(o),te(i.notes,c)||(i.notes=c),L(c)}),h()(),f(19,"button",12)(20,"span"),y(21,"\u2795"),h(),y(22," Add Expense "),h()()(),f(23,"div",2)(24,"div",13)(25,"h3")(26,"span",3),y(27,"\u{1F4CB}"),h(),y(28," Expense History "),f(29,"span",14),y(30),h()(),f(31,"div",15),y(32),h()(),z(33,ZN,2,1,"div",16)(34,eO,3,0,"ng-template",null,0,tr),h()()}if(r&2){let o=Zn(35);_(10),X("ngModel",i.productName),_(4),X("ngModel",i.price),_(4),X("ngModel",i.notes),_(),A("disabled",!i.productName||!i.price||i.price<=0),_(11),G(i.expenses.length),_(2),Y(" Total: $",i.totalExpenses.toFixed(2)," "),_(),A("ngIf",i.expenses.length>0)("ngIfElse",o)}},dependencies:[Ue,ut,Ze,On,ft,tn,dt,sr,ht,en,Ht,ar,at,zt],styles:[".expenses-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xl)}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg);margin-top:var(--space-lg)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font-family:inherit;font-size:.9375rem;padding:var(--space-sm) var(--space-md);border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-surface);color:var(--color-text);transition:all var(--transition-base);width:100%;resize:vertical;min-height:80px}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f61a}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:var(--space-md);margin-bottom:var(--space-lg)}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;display:flex;align-items:center;gap:var(--space-sm)}.icon[_ngcontent-%COMP%]{font-size:1.5rem}.badge[_ngcontent-%COMP%]{margin-left:auto;background:var(--color-bg);color:var(--color-primary);padding:var(--space-xs) var(--space-md);border-radius:var(--radius-xl);font-size:.875rem;font-weight:600}.total-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-success),#059669);color:#fff;padding:var(--space-sm) var(--space-lg);border-radius:var(--radius-lg);font-size:1.125rem;font-weight:700;box-shadow:var(--shadow-md)}.expenses-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md)}.expense-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:var(--space-md);padding:var(--space-md);background:var(--color-bg);border-radius:var(--radius-md);transition:all var(--transition-base);border:1px solid var(--color-border)}.expense-item[_ngcontent-%COMP%]:hover{background:#fee;transform:translate(4px);border-color:var(--color-danger)}.expense-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xs);flex:1}.expense-name[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text)}.expense-notes[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-muted);font-style:italic}.expense-date[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted)}.expense-amount[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:var(--space-xs)}.expense-price[_ngcontent-%COMP%]{font-weight:600;font-size:1.125rem;color:var(--color-danger)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl);color:var(--color-text-muted)}@media (max-width: 640px){.section-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.total-badge[_ngcontent-%COMP%]{width:100%;text-align:center}}"]})}}return n})();var mw=(()=>{class n{constructor(t){this.inventoryService=t,this.sales=[],this.expenses=[]}ngOnInit(){this.inventoryService.getSales().subscribe(t=>{this.sales=t}),this.inventoryService.getExpenses().subscribe(t=>{this.expenses=t})}get totalIncome(){return this.sales.filter(t=>t.pending!==!0).reduce((t,r)=>t+r.total,0)}get totalExpenses(){return this.expenses.reduce((t,r)=>t+r.price,0)}get netProfit(){return this.totalIncome-this.totalExpenses}get incomePercentage(){let t=this.totalIncome+this.totalExpenses;return t>0?this.totalIncome/t*100:0}get expensePercentage(){let t=this.totalIncome+this.totalExpenses;return t>0?this.totalExpenses/t*100:0}get profitMargin(){return this.totalIncome>0?this.netProfit/this.totalIncome*100:0}get completedSalesCount(){return this.sales.filter(t=>t.pending!==!0).length}get pendingSalesCount(){return this.sales.filter(t=>t.pending===!0).length}get averageSale(){let t=this.completedSalesCount;return t>0?this.totalIncome/t:0}static{this.\u0275fac=function(r){return new(r||n)(W(on))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-reports"]],standalone:!0,features:[ze],decls:119,vars:62,consts:[[1,"reports-section"],[1,"summary-grid"],[1,"summary-card","income"],[1,"card-icon"],[1,"card-content"],[1,"card-label"],[1,"card-value"],[1,"summary-card","expense"],[1,"summary-card","profit"],[1,"summary-card","margin"],[1,"card","chart-card"],[1,"icon"],[1,"comparison-chart"],[1,"chart-row"],[1,"chart-label"],[1,"chart-bar-wrapper"],[1,"chart-bar","income-bar",3,"title"],[1,"chart-value"],[1,"chart-bar","expense-bar",3,"title"],[1,"chart-legend"],[1,"legend-item"],[1,"legend-color","income-color"],[1,"legend-color","expense-color"],[1,"breakdown-grid"],[1,"card"],[1,"breakdown-stats"],[1,"stat-row"],[1,"stat-label"],[1,"stat-value"]],template:function(r,i){r&1&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),y(4,"\u{1F4B0}"),h(),f(5,"div",4)(6,"div",5),y(7,"Total Income"),h(),f(8,"div",6),y(9),xe(10,"number"),h()()(),f(11,"div",7)(12,"div",3),y(13,"\u{1F4B8}"),h(),f(14,"div",4)(15,"div",5),y(16,"Total Expenses"),h(),f(17,"div",6),y(18),xe(19,"number"),h()()(),f(20,"div",8)(21,"div",3),y(22),h(),f(23,"div",4)(24,"div",5),y(25,"Net Profit"),h(),f(26,"div",6),y(27),xe(28,"number"),h()()(),f(29,"div",9)(30,"div",3),y(31,"\u{1F4CA}"),h(),f(32,"div",4)(33,"div",5),y(34,"Profit Margin"),h(),f(35,"div",6),y(36),xe(37,"number"),h()()()(),f(38,"div",10)(39,"h3")(40,"span",11),y(41,"\u{1F4CA}"),h(),y(42," Income vs Expenses "),h(),f(43,"div",12)(44,"div",13)(45,"div",14),y(46,"Income"),h(),f(47,"div",15),Te(48,"div",16),xe(49,"number"),h(),f(50,"div",17),y(51),xe(52,"number"),h()(),f(53,"div",13)(54,"div",14),y(55,"Expenses"),h(),f(56,"div",15),Te(57,"div",18),xe(58,"number"),h(),f(59,"div",17),y(60),xe(61,"number"),h()()(),f(62,"div",19)(63,"div",20),Te(64,"span",21),f(65,"span"),y(66),xe(67,"number"),h()(),f(68,"div",20),Te(69,"span",22),f(70,"span"),y(71),xe(72,"number"),h()()()(),f(73,"div",23)(74,"div",24)(75,"h3")(76,"span",11),y(77,"\u{1F4B5}"),h(),y(78," Income Breakdown "),h(),f(79,"div",25)(80,"div",26)(81,"span",27),y(82,"Total Sales:"),h(),f(83,"span",28),y(84),h()(),f(85,"div",26)(86,"span",27),y(87,"Pending Deliveries:"),h(),f(88,"span",28),y(89),h()(),f(90,"div",26)(91,"span",27),y(92,"Average Sale:"),h(),f(93,"span",28),y(94),xe(95,"number"),h()()()(),f(96,"div",24)(97,"h3")(98,"span",11),y(99,"\u{1F4B3}"),h(),y(100," Expense Breakdown "),h(),f(101,"div",25)(102,"div",26)(103,"span",27),y(104,"Total Expenses:"),h(),f(105,"span",28),y(106),h()(),f(107,"div",26)(108,"span",27),y(109,"Average Expense:"),h(),f(110,"span",28),y(111),xe(112,"number"),h()(),f(113,"div",26)(114,"span",27),y(115,"Expense Ratio:"),h(),f(116,"span",28),y(117),xe(118,"number"),h()()()()()()),r&2&&(_(9),Y("$",Ne(10,23,i.totalIncome,"1.2-2"),""),_(9),Y("$",Ne(19,26,i.totalExpenses,"1.2-2"),""),_(2),be("negative",i.netProfit<0),_(2),G(i.netProfit>=0?"\u{1F4C8}":"\u{1F4C9}"),_(5),Y("$",Ne(28,29,i.netProfit,"1.2-2"),""),_(9),Y("",Ne(37,32,i.profitMargin,"1.1-1"),"%"),_(12),gn("width",i.incomePercentage,"%"),A("title","$"+Ne(49,35,i.totalIncome,"1.2-2")),_(3),Y("$",Ne(52,38,i.totalIncome,"1.2-2"),""),_(6),gn("width",i.expensePercentage,"%"),A("title","$"+Ne(58,41,i.totalExpenses,"1.2-2")),_(3),Y("$",Ne(61,44,i.totalExpenses,"1.2-2"),""),_(6),Y("Income (",Ne(67,47,i.incomePercentage,"1.1-1"),"%)"),_(5),Y("Expenses (",Ne(72,50,i.expensePercentage,"1.1-1"),"%)"),_(13),G(i.completedSalesCount),_(5),G(i.pendingSalesCount),_(5),Y("$",Ne(95,53,i.averageSale,"1.2-2"),""),_(12),G(i.expenses.length),_(5),Y("$",i.expenses.length>0?i.totalExpenses/i.expenses.length:Ne(112,56,0,"1.2-2"),""),_(6),Y("",Ne(118,59,i.expensePercentage,"1.1-1"),"%"))},dependencies:[Ue,_b],styles:[".reports-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xl)}.summary-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:var(--space-lg)}.summary-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-primary),var(--color-primary-dark));color:#fff;padding:var(--space-xl);border-radius:var(--radius-lg);box-shadow:var(--shadow-lg);display:flex;align-items:center;gap:var(--space-lg);transition:all var(--transition-base);min-width:0;overflow:hidden}.summary-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:var(--shadow-xl)}.summary-card.income[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-success),#059669)}.summary-card.expense[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-danger),#dc2626)}.summary-card.profit[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#1e40af)}.summary-card.profit.negative[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706)}.summary-card.margin[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#6d28d9)}.card-icon[_ngcontent-%COMP%]{font-size:3rem;opacity:.9;flex-shrink:0}.card-content[_ngcontent-%COMP%]{flex:1;min-width:0;overflow:hidden}.card-label[_ngcontent-%COMP%]{font-size:.875rem;opacity:.9;margin-bottom:var(--space-xs);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.card-value[_ngcontent-%COMP%]{font-size:clamp(1rem,3vw,1.5rem);font-weight:700;word-break:break-all;overflow-wrap:break-word}.chart-card[_ngcontent-%COMP%]{margin-top:var(--space-lg)}.icon[_ngcontent-%COMP%]{font-size:1.5rem}h3[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);margin-bottom:var(--space-lg)}.comparison-chart[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg);margin:var(--space-xl) 0}.chart-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:100px 1fr 120px;gap:var(--space-md);align-items:center}.chart-label[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text)}.chart-bar-wrapper[_ngcontent-%COMP%]{height:40px;background:var(--color-bg);border-radius:var(--radius-md);overflow:hidden;border:1px solid var(--color-border)}.chart-bar[_ngcontent-%COMP%]{height:100%;transition:width .5s ease;min-width:2%;display:flex;align-items:center;justify-content:flex-end;padding-right:var(--space-sm);color:#fff;font-weight:600}.income-bar[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--color-success),#10b981)}.expense-bar[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--color-danger),#ef4444)}.chart-value[_ngcontent-%COMP%]{font-weight:700;font-size:1.125rem;color:var(--color-text);text-align:right}.chart-legend[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:var(--space-xl);margin-top:var(--space-lg);padding-top:var(--space-lg);border-top:1px solid var(--color-border)}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);font-size:.875rem;color:var(--color-text)}.legend-color[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:var(--radius-sm)}.income-color[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-success),#10b981)}.expense-color[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-danger),#ef4444)}.breakdown-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:var(--space-lg)}.breakdown-stats[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md);margin-top:var(--space-lg)}.stat-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--space-sm) 0;border-bottom:1px solid var(--color-border)}.stat-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.stat-label[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-muted)}.stat-value[_ngcontent-%COMP%]{font-weight:600;font-size:1rem;color:var(--color-text)}@media (max-width: 768px){.summary-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.chart-row[_ngcontent-%COMP%]{grid-template-columns:80px 1fr 100px}.chart-legend[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.breakdown-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return n})();function tO(n,e){if(n&1&&(f(0,"div",22)(1,"div",23),y(2),h(),f(3,"h3",24),y(4),h(),f(5,"p",25),y(6),h()()),n&2){let t=e.$implicit;_(2),G(t.icon),_(2),G(t.title),_(2),G(t.description)}}var gw=(()=>{class n{constructor(){this.features=[{icon:"\u{1F4E6}",title:"Product Management",description:"Add, track, and manage your inventory with ease"},{icon:"\u{1F4B0}",title:"Point of Sale",description:"Quick and efficient sales processing with delivery scheduling"},{icon:"\u{1F4CA}",title:"Analytics & Reports",description:"Track income, expenses, and profit margins in real-time"},{icon:"\u{1F465}",title:"Customer Management",description:"Maintain customer records and delivery information"},{icon:"\u{1F4B8}",title:"Expense Tracking",description:"Monitor business expenses and maintain financial records"},{icon:"\u{1F69A}",title:"Delivery Management",description:"Schedule and track pending deliveries efficiently"}]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=$e({type:n,selectors:[["app-landing"]],standalone:!0,features:[ze],decls:43,vars:1,consts:[[1,"landing-page"],[1,"hero-section"],[1,"hero-content"],[1,"hero-icon"],[1,"hero-title"],[1,"hero-subtitle"],[1,"hero-description"],[1,"hero-stats"],[1,"stat-item"],[1,"stat-icon"],[1,"stat-text"],[1,"features-section"],[1,"section-title"],[1,"section-subtitle"],[1,"features-grid"],["class","feature-card",4,"ngFor","ngForOf"],[1,"cta-section"],[1,"cta-content"],[1,"cta-title"],[1,"cta-description"],[1,"cta-arrow"],[1,"arrow-icon"],[1,"feature-card"],[1,"feature-icon"],[1,"feature-title"],[1,"feature-description"]],template:function(r,i){r&1&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),y(4,"\u{1F4E6}"),h(),f(5,"h1",4),y(6,"Welcome to JJM Inventory"),h(),f(7,"p",5),y(8,"Your complete business management solution"),h(),f(9,"p",6),y(10," Streamline your inventory, sales, and customer management all in one place. Track expenses, monitor profits, and grow your business with confidence. "),h(),f(11,"div",7)(12,"div",8)(13,"div",9),y(14,"\u26A1"),h(),f(15,"div",10),y(16,"Fast & Efficient"),h()(),f(17,"div",8)(18,"div",9),y(19,"\u{1F512}"),h(),f(20,"div",10),y(21,"Secure & Reliable"),h()(),f(22,"div",8)(23,"div",9),y(24,"\u{1F4F1}"),h(),f(25,"div",10),y(26,"Fully Responsive"),h()()()()(),f(27,"div",11)(28,"h2",12),y(29,"Powerful Features"),h(),f(30,"p",13),y(31,"Everything you need to manage your business effectively"),h(),f(32,"div",14),z(33,tO,7,3,"div",15),h()(),f(34,"div",16)(35,"div",17)(36,"h2",18),y(37,"Ready to Get Started?"),h(),f(38,"p",19),y(39," Choose a tab above to begin managing your inventory, processing sales, or viewing reports. "),h(),f(40,"div",20)(41,"span",21),y(42,"\u2191"),h()()()()()),r&2&&(_(33),A("ngForOf",i.features))},dependencies:[Ue,ut],styles:['.landing-page[_ngcontent-%COMP%]{min-height:calc(100vh - 300px);animation:_ngcontent-%COMP%_fadeIn .6s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.hero-section[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl) 0;background:linear-gradient(135deg,#3b82f60d,#9333ea0d);border-radius:var(--radius-lg);margin-bottom:var(--space-2xl)}.hero-content[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:0 var(--space-lg)}.hero-icon[_ngcontent-%COMP%]{font-size:5rem;margin-bottom:var(--space-lg);animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-15px)}}.hero-title[_ngcontent-%COMP%]{font-size:3rem;font-weight:700;color:var(--color-text);margin-bottom:var(--space-md);background:linear-gradient(135deg,var(--color-primary),var(--color-primary-light));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.hero-subtitle[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--color-text-muted);margin-bottom:var(--space-lg);font-weight:500}.hero-description[_ngcontent-%COMP%]{font-size:1.125rem;color:var(--color-text-muted);line-height:1.8;margin-bottom:var(--space-2xl);max-width:600px;margin-left:auto;margin-right:auto}.hero-stats[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:var(--space-2xl);flex-wrap:wrap;margin-top:var(--space-2xl)}.stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);padding:var(--space-md) var(--space-lg);background:var(--color-surface);border-radius:var(--radius-lg);box-shadow:var(--shadow-sm);transition:all var(--transition-base)}.stat-item[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:var(--shadow-md)}.stat-icon[_ngcontent-%COMP%]{font-size:1.5rem}.stat-text[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text)}.features-section[_ngcontent-%COMP%]{padding:var(--space-2xl) 0}.section-title[_ngcontent-%COMP%]{text-align:center;font-size:2.5rem;font-weight:700;color:var(--color-text);margin-bottom:var(--space-md)}.section-subtitle[_ngcontent-%COMP%]{text-align:center;font-size:1.125rem;color:var(--color-text-muted);margin-bottom:var(--space-2xl)}.features-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:var(--space-xl);margin-top:var(--space-2xl)}.feature-card[_ngcontent-%COMP%]{background:var(--color-surface);padding:var(--space-xl);border-radius:var(--radius-lg);border:1px solid var(--color-border);transition:all var(--transition-base);text-align:center;position:relative;overflow:hidden}.feature-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(59,130,246,.1),transparent);transition:left .6s ease}.feature-card[_ngcontent-%COMP%]:hover:before{left:100%}.feature-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:var(--shadow-xl);border-color:var(--color-primary)}.feature-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:var(--space-md);transition:transform var(--transition-base)}.feature-card[_ngcontent-%COMP%]:hover   .feature-icon[_ngcontent-%COMP%]{transform:scale(1.2) rotate(5deg)}.feature-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--color-text);margin-bottom:var(--space-sm)}.feature-description[_ngcontent-%COMP%]{font-size:.9375rem;color:var(--color-text-muted);line-height:1.6}.cta-section[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl) 0;margin-top:var(--space-2xl)}.cta-content[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:var(--space-2xl);background:linear-gradient(135deg,var(--color-primary),var(--color-primary-dark));border-radius:var(--radius-lg);color:#fff;box-shadow:var(--shadow-xl)}.cta-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:var(--space-md)}.cta-description[_ngcontent-%COMP%]{font-size:1.125rem;margin-bottom:var(--space-lg);opacity:.95}.cta-arrow[_ngcontent-%COMP%]{margin-top:var(--space-xl)}.arrow-icon[_ngcontent-%COMP%]{font-size:3rem;display:inline-block;animation:_ngcontent-%COMP%_bounce 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}@media (max-width: 768px){.hero-title[_ngcontent-%COMP%]{font-size:2rem}.hero-subtitle[_ngcontent-%COMP%]{font-size:1.25rem}.hero-description[_ngcontent-%COMP%]{font-size:1rem}.hero-stats[_ngcontent-%COMP%]{flex-direction:column;gap:var(--space-md)}.section-title[_ngcontent-%COMP%]{font-size:2rem}.features-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.cta-title[_ngcontent-%COMP%]{font-size:1.5rem}}']})}}return n})();var mo=(()=>{class n{constructor(t){this.http=t,this.apiUrl=rn.apiUrl,this.usersSubject=new Je([]),this.users$=this.usersSubject.asObservable(),this.loadUsers()}hashPassword(t){return j(this,null,function*(){let i=new TextEncoder().encode(t),o=yield crypto.subtle.digest("SHA-256",i);return Array.from(new Uint8Array(o)).map(s=>s.toString(16).padStart(2,"0")).join("")})}loadUsers(){this.http.get(`${this.apiUrl}/users`).subscribe({next:t=>{let r=t.map(i=>this.transformUser(i));r.length===0?this.initializeDefaultAdmin():this.usersSubject.next(r)},error:t=>{console.error("Error fetching users:",t),t.status===404&&this.initializeDefaultAdmin()}})}initializeDefaultAdmin(){return j(this,null,function*(){if(this.usersSubject.value.length>0)return;let r={id:"admin-1",username:"jjm143256789",fullName:"System Administrator",password:yield this.hashPassword("Gr*l0v3R"),role:"admin",createdAt:new Date};this.http.post(`${this.apiUrl}/users`,r).subscribe({next:i=>{let o=this.transformUser(i);this.usersSubject.next([o])},error:i=>{console.warn("Could not save default admin to backend, using local only",i),this.usersSubject.next([r])}})})}getUsers(){return this.users$}addUser(t){let r=ue(J({},t),{createdAt:new Date});return Dn(this.hashPassword(t.password||"")).pipe(zi(i=>(r.password=i,this.http.post(`${this.apiUrl}/users`,r))),lt(i=>{let o=this.transformUser(i),s=this.usersSubject.value;return this.usersSubject.next([...s,o]),o}))}updateUser(t){return new je(r=>{j(this,null,function*(){let o=J({},t);o.password&&(o.password=yield this.hashPassword(o.password)),this.http.put(`${this.apiUrl}/users/${o.id}`,o).subscribe({next:s=>{let c=this.transformUser(s),u=this.usersSubject.value.map(m=>m.id===c.id?c:m);this.usersSubject.next(u),r.next(c),r.complete()},error:s=>r.error(s)})})})}deleteUser(t){return this.http.delete(`${this.apiUrl}/users/${t}`).pipe(lt(()=>{let r=this.usersSubject.value;this.usersSubject.next(r.filter(i=>i.id!==t))}))}getUserById(t){return this.usersSubject.value.find(r=>r.id===t)}validateCredentials(t,r){return Dn(this.hashPassword(r)).pipe(zi(i=>this.users$.pipe($i(1),lt(o=>o.find(c=>c.username===t&&c.password===i)||null))))}transformUser(t){return ue(J({},t),{createdAt:this.parseDate(t.createdAt)})}parseDate(t){return t?t instanceof Date?t:typeof t=="string"?new Date(t):typeof t=="object"&&t._seconds!==void 0?new Date(t._seconds*1e3):new Date(t):new Date}static{this.\u0275fac=function(r){return new(r||n)(oe(or))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function nO(n,e){if(n&1&&Te(0,"div",18),n&2){let t=e.$implicit;gn("left",t.x,"%")("top",t.y,"%")("width",t.size,"px")("height",t.size,"px")("animation-delay",t.delay,"s")}}function rO(n,e){if(n&1&&(f(0,"div",19)(1,"span",20),y(2,"\u26A0\uFE0F"),h(),y(3),h()),n&2){let t=P();_(3),Y(" ",t.errorMessage," ")}}function iO(n,e){n&1&&(f(0,"span"),y(1,"Sign In"),h())}function oO(n,e){n&1&&(f(0,"span",21),Te(1,"span",22),y(2," Signing in... "),h())}var yw=(()=>{class n{constructor(t){this.userService=t,this.username="",this.password="",this.errorMessage="",this.isLoading=!1,this.bubbles=[]}ngOnInit(){this.generateBubbles()}ngOnDestroy(){}onMouseMove(t){document.querySelectorAll(".bubble").forEach(i=>{let o=i,s=o.getBoundingClientRect(),c=s.left+s.width/2,l=s.top+s.height/2,u=t.clientX-c,m=t.clientY-l,g=Math.sqrt(u*u+m*m);if(g<250){let b=(250-g)/250,C=u/g*b*50,O=m/g*b*50;o.style.transform=`translate(${C}px, ${O}px) scale(${1+b*.3})`}else o.style.transform="translate(0, 0) scale(1)"})}generateBubbles(){for(let t=0;t<15;t++)this.bubbles.push({x:Math.random()*100,y:Math.random()*100,size:Math.random()*100+50,delay:Math.random()*5})}onLogin(){if(this.errorMessage="",!this.username||!this.password){this.errorMessage="Please enter both username and password";return}this.isLoading=!0,setTimeout(()=>{this.userService.validateCredentials(this.username,this.password).subscribe(t=>{t?(localStorage.setItem("jjm_logged_in","true"),localStorage.setItem("jjm_username",this.username),localStorage.setItem("jjm_user_id",t.id),localStorage.setItem("jjm_role",t.role),window.location.reload()):(this.errorMessage="Invalid username or password",this.isLoading=!1)})},800)}static{this.\u0275fac=function(r){return new(r||n)(W(mo))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-login"]],hostBindings:function(r,i){r&1&&U("mousemove",function(s){return i.onMouseMove(s)})},standalone:!0,features:[ze],decls:24,vars:9,consts:[[1,"login-container"],[1,"bubbles-container"],["class","bubble",3,"left","top","width","height","animation-delay",4,"ngFor","ngForOf"],[1,"login-card"],[1,"login-header"],[1,"logo-icon"],[1,"login-title"],[1,"login-subtitle"],[1,"login-form",3,"ngSubmit"],[1,"form-group"],["for","username"],["type","text","id","username","name","username","placeholder","Enter your username","required","",3,"ngModelChange","ngModel","disabled"],["for","password"],["type","password","id","password","name","password","placeholder","Enter your password","required","",3,"ngModelChange","ngModel","disabled"],["class","error-message",4,"ngIf"],["type","submit",1,"login-button",3,"disabled"],[4,"ngIf"],["class","loading-spinner",4,"ngIf"],[1,"bubble"],[1,"error-message"],[1,"error-icon"],[1,"loading-spinner"],[1,"spinner"]],template:function(r,i){r&1&&(f(0,"div",0)(1,"div",1),z(2,nO,1,10,"div",2),h(),f(3,"div",3)(4,"div",4)(5,"div",5),y(6,"\u{1F4E6}"),h(),f(7,"h1",6),y(8,"JJM Inventory"),h(),f(9,"p",7),y(10,"Sign in to your account"),h()(),f(11,"form",8),U("ngSubmit",function(){return i.onLogin()}),f(12,"div",9)(13,"label",10),y(14,"Username"),h(),f(15,"input",11),Z("ngModelChange",function(s){return te(i.username,s)||(i.username=s),s}),h()(),f(16,"div",9)(17,"label",12),y(18,"Password"),h(),f(19,"input",13),Z("ngModelChange",function(s){return te(i.password,s)||(i.password=s),s}),h()(),z(20,rO,4,1,"div",14),f(21,"button",15),z(22,iO,2,0,"span",16)(23,oO,3,0,"span",17),h()()()()),r&2&&(_(2),A("ngForOf",i.bubbles),_(13),X("ngModel",i.username),A("disabled",i.isLoading),_(4),X("ngModel",i.password),A("disabled",i.isLoading),_(),A("ngIf",i.errorMessage),_(),A("disabled",i.isLoading),_(),A("ngIf",!i.isLoading),_(),A("ngIf",i.isLoading))},dependencies:[Ue,ut,Ze,ft,tn,dt,ht,en,Ht,at,zt],styles:['.login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:var(--color-bg);padding:var(--space-lg);position:relative;overflow:hidden}.bubbles-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;z-index:0}.bubble[_ngcontent-%COMP%]{position:absolute;border-radius:50%;background:radial-gradient(circle at 30% 30%,#3b82f64d,#9333ea33);-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);animation:_ngcontent-%COMP%_float 8s ease-in-out infinite;transition:transform .15s ease-out;box-shadow:inset 0 0 20px #fff3,0 8px 32px #3b82f633;border:1px solid rgba(255,255,255,.1)}.bubble[_ngcontent-%COMP%]:before{content:"";position:absolute;top:10%;left:10%;width:40%;height:40%;background:radial-gradient(circle,rgba(255,255,255,.4),transparent);border-radius:50%}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0) rotate(0)}25%{transform:translateY(-20px) rotate(90deg)}50%{transform:translateY(0) rotate(180deg)}75%{transform:translateY(20px) rotate(270deg)}}.login-card[_ngcontent-%COMP%]{background:var(--color-surface);border-radius:var(--radius-xl);box-shadow:0 20px 60px #0000004d;padding:var(--space-2xl);width:100%;max-width:420px;animation:_ngcontent-%COMP%_slideIn .5s cubic-bezier(.16,1,.3,1);position:relative;z-index:1}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(30px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--space-2xl)}.logo-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:var(--space-md);animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.login-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--color-text);margin-bottom:var(--space-xs);background:linear-gradient(135deg,var(--color-primary),var(--color-primary-light));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.login-subtitle[_ngcontent-%COMP%]{color:var(--color-text-muted);font-size:.9375rem;margin:0}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:var(--color-text)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:var(--space-md);font-size:1rem;border:2px solid var(--color-border);border-radius:var(--radius-md);transition:all var(--transition-base);background:var(--color-surface)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 4px #3b82f61a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.error-message[_ngcontent-%COMP%]{background:#fee;color:var(--color-danger);padding:var(--space-md);border-radius:var(--radius-md);font-size:.875rem;border:1px solid rgba(239,68,68,.2);display:flex;align-items:center;gap:var(--space-sm);animation:_ngcontent-%COMP%_shake .4s ease}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-10px)}75%{transform:translate(10px)}}.error-icon[_ngcontent-%COMP%]{font-size:1.25rem}.login-button[_ngcontent-%COMP%]{padding:var(--space-md) var(--space-xl);font-size:1rem;font-weight:600;background:linear-gradient(135deg,var(--color-primary),var(--color-primary-light));color:#fff;border:none;border-radius:var(--radius-md);cursor:pointer;transition:all var(--transition-base);box-shadow:0 4px 12px #3b82f64d}.login-button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 20px #3b82f666}.login-button[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.login-button[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.loading-spinner[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:var(--space-sm)}.spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.login-footer[_ngcontent-%COMP%]{margin-top:var(--space-2xl);padding-top:var(--space-lg);border-top:1px solid var(--color-border);text-align:center}.demo-credentials[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-muted);line-height:1.6;margin:0}.demo-credentials[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--color-text)}.demo-credentials[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background:var(--color-bg);padding:2px 6px;border-radius:var(--radius-sm);font-family:Courier New,monospace;color:var(--color-primary);font-weight:600}@media (max-width: 480px){.login-card[_ngcontent-%COMP%]{padding:var(--space-xl)}.login-title[_ngcontent-%COMP%]{font-size:1.5rem}.logo-icon[_ngcontent-%COMP%]{font-size:3rem}}']})}}return n})();function sO(n,e){if(n&1&&(f(0,"option",18),y(1),xe(2,"titlecase"),h()),n&2){let t=e.$implicit;A("value",t),_(),Y(" ",xs(2,2,t)," ")}}function aO(n,e){if(n&1&&(f(0,"option",18),y(1),xe(2,"titlecase"),h()),n&2){let t=e.$implicit;A("value",t),_(),Y(" ",xs(2,2,t)," ")}}function cO(n,e){if(n&1&&(f(0,"span",33),y(1),h()),n&2){let t=P().$implicit;_(),Y("\u2022 ",t.details,"")}}function lO(n,e){if(n&1&&(f(0,"div",21)(1,"div",22)(2,"span",23),y(3),h(),f(4,"span",24),y(5),h()(),f(6,"div",25)(7,"div",26)(8,"span",27),y(9),h(),f(10,"span",28),y(11),h()(),f(12,"div",29)(13,"span",30),y(14),h(),z(15,cO,2,1,"span",31),h()(),f(16,"div",32),y(17),xe(18,"date"),h()()),n&2){let t=e.$implicit,r=P(2);_(3),G(r.getEntityIcon(t.entityType)),_(2),G(r.getActionIcon(t.action)),_(4),G(t.entityName),_(2),G(t.action),_(3),G(t.entityType),_(),A("ngIf",t.details),_(2),Y(" ",Ne(18,7,t==null?null:t.timestamp,"medium")," ")}}function uO(n,e){if(n&1&&(f(0,"div",19),z(1,lO,19,10,"div",20),h()),n&2){let t=P();_(),A("ngForOf",t.paginatedLogs)}}function dO(n,e){n&1&&(f(0,"div",34)(1,"p"),y(2,"No activity logs found"),h()())}function hO(n,e){if(n&1){let t=se();f(0,"div",35)(1,"button",36),U("click",function(){V(t);let i=P();return L(i.prevPage())}),y(2," \u2190 Prev "),h(),f(3,"span",37),y(4),h(),f(5,"button",36),U("click",function(){V(t);let i=P();return L(i.nextPage())}),y(6," Next \u2192 "),h()()}if(n&2){let t=P();_(),A("disabled",t.currentPage===1),_(3),er(" Page ",t.currentPage," of ",t.totalPages," "),_(),A("disabled",t.currentPage===t.totalPages)}}var vw=(()=>{class n{constructor(t){this.loggingService=t,this.logs=[],this.filteredLogs=[],this.selectedEntityType="all",this.selectedAction="all",this.currentPage=1,this.pageSize=20,this.entityTypes=["all","product","sale","expense","customer"],this.actions=["all","create","update","delete","restock","complete"]}ngOnInit(){this.loggingService.getLogs().subscribe(t=>{this.logs=t.map(r=>ue(J({},r),{timestamp:new Date(r.timestamp?._seconds*1e3||new Date)})),this.applyFilters()})}applyFilters(){this.filteredLogs=this.logs.filter(t=>{let r=this.selectedEntityType==="all"||t.entityType===this.selectedEntityType,i=this.selectedAction==="all"||t.action===this.selectedAction;return r&&i}),this.currentPage=1}get paginatedLogs(){let t=(this.currentPage-1)*this.pageSize,r=t+this.pageSize;return this.filteredLogs.slice(t,r)}get totalPages(){return Math.ceil(this.filteredLogs.length/this.pageSize)}nextPage(){this.currentPage<this.totalPages&&this.currentPage++}prevPage(){this.currentPage>1&&this.currentPage--}refreshLogs(){this.loggingService.refreshLogs()}cleanupOldLogs(){confirm("This will delete all logs older than 30 days. Continue?")&&this.loggingService.cleanupOldLogs().subscribe({next:t=>{alert(`Cleanup completed! Deleted ${t.deletedCount} logs.`),this.refreshLogs()},error:t=>{console.error("Cleanup error:",t),alert("Failed to cleanup logs")}})}getActionIcon(t){return{create:"\u2795",update:"\u270F\uFE0F",delete:"\u{1F5D1}\uFE0F",restock:"\u{1F4E6}",complete:"\u2705"}[t]||"\u{1F4DD}"}getEntityIcon(t){return{product:"\u{1F4E6}",sale:"\u{1F4B0}",expense:"\u{1F4B8}",customer:"\u{1F464}"}[t]||"\u{1F4C4}"}static{this.\u0275fac=function(r){return new(r||n)(W(xl))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-activity-logs"]],standalone:!0,features:[ze],decls:29,vars:8,consts:[["noLogs",""],[1,"activity-logs-section"],[1,"card"],[1,"header-section"],[1,"icon"],[1,"badge"],[1,"header-actions"],[1,"btn-refresh",3,"click"],[1,"btn-cleanup",3,"click"],[1,"filters-section"],[1,"filter-group"],["for","entityFilter"],["id","entityFilter",1,"filter-select",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","actionFilter"],["id","actionFilter",1,"filter-select",3,"ngModelChange","change","ngModel"],["class","logs-list",4,"ngIf","ngIfElse"],["class","pagination",4,"ngIf"],[3,"value"],[1,"logs-list"],["class","log-item",4,"ngFor","ngForOf"],[1,"log-item"],[1,"log-icon"],[1,"entity-icon"],[1,"action-icon"],[1,"log-info"],[1,"log-header"],[1,"log-entity"],[1,"log-action-badge"],[1,"log-details"],[1,"log-type"],["class","log-description",4,"ngIf"],[1,"log-timestamp"],[1,"log-description"],[1,"empty-state"],[1,"pagination"],[1,"pagination-btn",3,"click","disabled"],[1,"page-info"]],template:function(r,i){if(r&1){let o=se();f(0,"div",1)(1,"div",2)(2,"div",3)(3,"h3")(4,"span",4),y(5,"\u{1F4CB}"),h(),y(6," Activity Logs "),f(7,"span",5),y(8),h()(),f(9,"div",6)(10,"button",7),U("click",function(){return V(o),L(i.refreshLogs())}),y(11," \u{1F504} Refresh "),h(),f(12,"button",8),U("click",function(){return V(o),L(i.cleanupOldLogs())}),y(13," \u{1F5D1}\uFE0F Cleanup Old Logs "),h()()(),f(14,"div",9)(15,"div",10)(16,"label",11),y(17,"Entity Type:"),h(),f(18,"select",12),Z("ngModelChange",function(c){return V(o),te(i.selectedEntityType,c)||(i.selectedEntityType=c),L(c)}),U("change",function(){return V(o),L(i.applyFilters())}),z(19,sO,3,4,"option",13),h()(),f(20,"div",10)(21,"label",14),y(22,"Action:"),h(),f(23,"select",15),Z("ngModelChange",function(c){return V(o),te(i.selectedAction,c)||(i.selectedAction=c),L(c)}),U("change",function(){return V(o),L(i.applyFilters())}),z(24,aO,3,4,"option",13),h()()(),z(25,uO,2,1,"div",16)(26,dO,3,0,"ng-template",null,0,tr)(28,hO,7,4,"div",17),h()()}if(r&2){let o=Zn(27);_(8),G(i.filteredLogs.length),_(10),X("ngModel",i.selectedEntityType),_(),A("ngForOf",i.entityTypes),_(4),X("ngModel",i.selectedAction),_(),A("ngForOf",i.actions),_(),A("ngIf",i.paginatedLogs.length>0)("ngIfElse",o),_(3),A("ngIf",i.totalPages>1)}},dependencies:[Ue,ut,Ze,sl,On,ft,Rn,kn,nn,ht,at],styles:[".activity-logs-section[_ngcontent-%COMP%]{padding:var(--space-lg)}.header-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--space-lg);flex-wrap:wrap;gap:var(--space-md)}.header-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);margin:0}.header-actions[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm)}.btn-refresh[_ngcontent-%COMP%], .btn-cleanup[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);border:1px solid var(--color-border);background:var(--color-surface);color:var(--color-text);border-radius:var(--radius-md);cursor:pointer;font-size:.875rem;font-weight:500;transition:all var(--transition-base)}.btn-refresh[_ngcontent-%COMP%]:hover{background:var(--color-primary);color:#fff;border-color:var(--color-primary)}.btn-cleanup[_ngcontent-%COMP%]{background:var(--color-danger);color:#fff;border-color:var(--color-danger)}.btn-cleanup[_ngcontent-%COMP%]:hover{background:#dc2626}.filters-section[_ngcontent-%COMP%]{display:flex;gap:var(--space-lg);margin-bottom:var(--space-lg);padding:var(--space-md);background:var(--color-bg);border-radius:var(--radius-md);flex-wrap:wrap}.filter-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm)}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.filter-select[_ngcontent-%COMP%]{padding:var(--space-xs) var(--space-sm);border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-surface);color:var(--color-text);font-size:.875rem;cursor:pointer}.logs-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.log-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-md);padding:var(--space-md);background:var(--color-bg);border-radius:var(--radius-md);border:1px solid var(--color-border);transition:all var(--transition-base)}.log-item[_ngcontent-%COMP%]:hover{background:var(--color-surface);transform:translate(4px)}.log-icon[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:2px;font-size:1.25rem}.entity-icon[_ngcontent-%COMP%]{font-size:1.5rem}.action-icon[_ngcontent-%COMP%]{font-size:1rem}.log-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:var(--space-xs)}.log-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm)}.log-entity[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text);font-size:1rem}.log-action-badge[_ngcontent-%COMP%]{padding:2px 8px;background:var(--color-primary);color:#fff;border-radius:var(--radius-sm);font-size:.75rem;font-weight:500;text-transform:uppercase}.log-details[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-xs);font-size:.875rem;color:var(--color-text-muted)}.log-type[_ngcontent-%COMP%]{text-transform:capitalize;font-weight:500}.log-description[_ngcontent-%COMP%]{font-style:italic}.log-timestamp[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted);white-space:nowrap}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl);color:var(--color-text-muted)}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:var(--space-md);margin-top:var(--space-lg);padding-top:var(--space-lg);border-top:1px solid var(--color-border)}.pagination-btn[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);background:var(--color-surface);border:1px solid var(--color-border);color:var(--color-text);border-radius:var(--radius-md);font-size:.875rem;font-weight:500;cursor:pointer;transition:all var(--transition-base)}.pagination-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--color-primary);color:#fff;border-color:var(--color-primary)}.pagination-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.page-info[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text);font-weight:500}@media (max-width: 768px){.header-section[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.filters-section[_ngcontent-%COMP%]{flex-direction:column}.log-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.log-timestamp[_ngcontent-%COMP%]{align-self:flex-end}}"]})}}return n})();var _w=()=>{};var Cw=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},fO=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],c=n[t++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Ew={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,c=s?n[i+1]:0,l=i+2<n.length,u=l?n[i+2]:0,m=o>>2,g=(o&3)<<4|c>>4,b=(c&15)<<2|u>>6,C=u&63;l||(C=64,s||(b=64)),r.push(t[m],t[g],t[b],t[C])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Cw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):fO(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||c==null||u==null||g==null)throw new Wf;let b=o<<2|c>>4;if(r.push(b),u!==64){let C=c<<4&240|u>>2;if(r.push(C),g!==64){let O=u<<6&192|g;r.push(O)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Wf=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},pO=function(n){let e=Cw(n);return Ew.encodeByteArray(e,!0)},zs=function(n){return pO(n).replace(/\./g,"")},Iw=function(n){try{return Ew.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Dw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var mO=()=>Dw().__FIREBASE_DEFAULTS__,gO=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},yO=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Iw(n[1]);return e&&JSON.parse(e)},Kf=()=>{try{return _w()||mO()||gO()||yO()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},vO=n=>Kf()?.emulatorHosts?.[n],xw=n=>{let e=vO(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Qf=()=>Kf()?.config;var Sl=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Tl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Sw(n){return j(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function Tw(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=J({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[zs(JSON.stringify(t)),zs(JSON.stringify(s)),""].join(".")}var $s={};function _O(){let n={prod:[],emulator:[]};for(let e of Object.keys($s))$s[e]?n.emulator.push(e):n.prod.push(e);return n}function bO(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var bw=!1;function Mw(n,e){if(typeof window>"u"||typeof document>"u"||!Tl(window.location.host)||$s[n]===e||$s[n]||bw)return;$s[n]=e;function t(b){return`__firebase__banner__${b}`}let r="__firebase__banner",o=_O().prod.length>0;function s(){let b=document.getElementById(r);b&&b.remove()}function c(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function l(b,C){b.setAttribute("width","24"),b.setAttribute("id",C),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function u(){let b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{bw=!0,s()},b}function m(b,C){b.setAttribute("id",C),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function g(){let b=bO(r),C=t("text"),O=document.getElementById(C)||document.createElement("span"),R=t("learnmore"),k=document.getElementById(R)||document.createElement("a"),q=t("preprendIcon"),re=document.getElementById(q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){let Q=b.element;c(Q),m(k,R);let Ee=u();l(re,q),Q.append(re,O,k,Ee),document.body.appendChild(Q)}o?(O.innerText="Preview backend disconnected.",re.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(re.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function Aw(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wO(){let n=Kf()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Pw(){return!wO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Yf(){try{return typeof indexedDB=="object"}catch{return!1}}function Nw(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var CO="FirebaseError",lr=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=CO,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hs.prototype.create)}},Hs=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?EO(o,r):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new lr(i,c,r)}};function EO(n,e){return n.replace(IO,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var IO=/\{\$([^}]+)}/g;function go(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(ww(o)&&ww(s)){if(!go(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function ww(n){return n!==null&&typeof n=="object"}var A5=4*60*60*1e3;function _n(n){return n&&n._delegate?n._delegate:n}var ur=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ci="[DEFAULT]";var Jf=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Sl;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xO(e))try{this.getOrInitializeService({instanceIdentifier:Ci})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ci){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return j(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ci){return this.instances.has(e)}getOptions(e=Ci){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&s.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:DO(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ci){return this.component?this.component.multipleInstances?e:Ci:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function DO(n){return n===Ci?void 0:n}function xO(n){return n.instantiationMode==="EAGER"}var Ml=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Jf(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var SO=[],we=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(we||{}),TO={debug:we.DEBUG,verbose:we.VERBOSE,info:we.INFO,warn:we.WARN,error:we.ERROR,silent:we.SILENT},MO=we.INFO,AO={[we.DEBUG]:"log",[we.VERBOSE]:"log",[we.INFO]:"info",[we.WARN]:"warn",[we.ERROR]:"error"},PO=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=AO[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},yo=class{constructor(e){this.name=e,this._logLevel=MO,this._logHandler=PO,this._userLogHandler=null,SO.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in we))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,we.DEBUG,...e),this._logHandler(this,we.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,we.VERBOSE,...e),this._logHandler(this,we.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,we.INFO,...e),this._logHandler(this,we.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,we.WARN,...e),this._logHandler(this,we.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,we.ERROR,...e),this._logHandler(this,we.ERROR,...e)}};var NO=(n,e)=>e.some(t=>n instanceof t),Ow,Rw;function OO(){return Ow||(Ow=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function RO(){return Rw||(Rw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var kw=new WeakMap,Zf=new WeakMap,Fw=new WeakMap,Xf=new WeakMap,tp=new WeakMap;function kO(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Fn(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&kw.set(t,n)}).catch(()=>{}),tp.set(e,n),e}function FO(n){if(Zf.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});Zf.set(n,e)}var ep={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Zf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Fw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Fn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Vw(n){ep=n(ep)}function VO(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Al(this),e,...t);return Fw.set(r,e.sort?e.sort():[e]),Fn(r)}:RO().includes(n)?function(...e){return n.apply(Al(this),e),Fn(kw.get(this))}:function(...e){return Fn(n.apply(Al(this),e))}}function LO(n){return typeof n=="function"?VO(n):(n instanceof IDBTransaction&&FO(n),NO(n,OO())?new Proxy(n,ep):n)}function Fn(n){if(n instanceof IDBRequest)return kO(n);if(Xf.has(n))return Xf.get(n);let e=LO(n);return e!==n&&(Xf.set(n,e),tp.set(e,n)),e}var Al=n=>tp.get(n);function jw(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),c=Fn(s);return r&&s.addEventListener("upgradeneeded",l=>{r(Fn(s.result),l.oldVersion,l.newVersion,Fn(s.transaction),l)}),t&&s.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),c.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),c}var jO=["get","getKey","getAll","getAllKeys","count"],BO=["put","add","delete","clear"],np=new Map;function Lw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(np.get(e))return np.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=BO.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||jO.includes(t)))return;let o=function(s,...c){return j(this,null,function*(){let l=this.transaction(s,i?"readwrite":"readonly"),u=l.store;return r&&(u=u.index(c.shift())),(yield Promise.all([u[t](...c),i&&l.done]))[0]})};return np.set(e,o),o}Vw(n=>ue(J({},n),{get:(e,t,r)=>Lw(e,t)||n.get(e,t,r),has:(e,t)=>!!Lw(e,t)||n.has(e,t)}));var ip=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(UO(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function UO(n){return n.getComponent()?.type==="VERSION"}var op="@firebase/app",Bw="0.14.6";var dr=new yo("@firebase/app"),$O="@firebase/app-compat",zO="@firebase/analytics-compat",HO="@firebase/analytics",qO="@firebase/app-check-compat",GO="@firebase/app-check",WO="@firebase/auth",KO="@firebase/auth-compat",QO="@firebase/database",YO="@firebase/data-connect",JO="@firebase/database-compat",XO="@firebase/functions",ZO="@firebase/functions-compat",eR="@firebase/installations",tR="@firebase/installations-compat",nR="@firebase/messaging",rR="@firebase/messaging-compat",iR="@firebase/performance",oR="@firebase/performance-compat",sR="@firebase/remote-config",aR="@firebase/remote-config-compat",cR="@firebase/storage",lR="@firebase/storage-compat",uR="@firebase/firestore",dR="@firebase/ai",hR="@firebase/firestore-compat",fR="firebase",pR="12.6.0";var sp="[DEFAULT]",mR={[op]:"fire-core",[$O]:"fire-core-compat",[HO]:"fire-analytics",[zO]:"fire-analytics-compat",[GO]:"fire-app-check",[qO]:"fire-app-check-compat",[WO]:"fire-auth",[KO]:"fire-auth-compat",[QO]:"fire-rtdb",[YO]:"fire-data-connect",[JO]:"fire-rtdb-compat",[XO]:"fire-fn",[ZO]:"fire-fn-compat",[eR]:"fire-iid",[tR]:"fire-iid-compat",[nR]:"fire-fcm",[rR]:"fire-fcm-compat",[iR]:"fire-perf",[oR]:"fire-perf-compat",[sR]:"fire-rc",[aR]:"fire-rc-compat",[cR]:"fire-gcs",[lR]:"fire-gcs-compat",[uR]:"fire-fst",[hR]:"fire-fst-compat",[dR]:"fire-vertex","fire-js":"fire-js",[fR]:"fire-js-all"};var Pl=new Map,gR=new Map,ap=new Map;function Uw(n,e){try{n.container.addComponent(e)}catch(t){dr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function qs(n){let e=n.name;if(ap.has(e))return dr.debug(`There were multiple attempts to register component ${e}.`),!1;ap.set(e,n);for(let t of Pl.values())Uw(t,n);for(let t of gR.values())Uw(t,n);return!0}function qw(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Gw(n){return n==null?!1:n.settings!==void 0}var yR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vr=new Hs("app","Firebase",yR);var cp=class{constructor(e,t,r){this._isDeleted=!1,this._options=J({},e),this._config=J({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ur("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vr.create("app-deleted",{appName:this._name})}};var Ww=pR;function Ws(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=J({name:sp,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Vr.create("bad-app-name",{appName:String(i)});if(t||(t=Qf()),!t)throw Vr.create("no-options");let o=Pl.get(i);if(o){if(go(t,o.options)&&go(r,o.config))return o;throw Vr.create("duplicate-app",{appName:i})}let s=new Ml(i);for(let l of ap.values())s.addComponent(l);let c=new cp(t,r,s);return Pl.set(i,c),c}function Kw(n=sp){let e=Pl.get(n);if(!e&&n===sp&&Qf())return Ws();if(!e)throw Vr.create("no-app",{appName:n});return e}function Lr(n,e,t){let r=mR[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),dr.warn(s.join(" "));return}qs(new ur(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var vR="firebase-heartbeat-database",_R=1,Gs="firebase-heartbeat-store",rp=null;function Qw(){return rp||(rp=jw(vR,_R,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Gs)}catch(t){console.warn(t)}}}}).catch(n=>{throw Vr.create("idb-open",{originalErrorMessage:n.message})})),rp}function bR(n){return j(this,null,function*(){try{let t=(yield Qw()).transaction(Gs),r=yield t.objectStore(Gs).get(Yw(n));return yield t.done,r}catch(e){if(e instanceof lr)dr.warn(e.message);else{let t=Vr.create("idb-get",{originalErrorMessage:e?.message});dr.warn(t.message)}}})}function $w(n,e){return j(this,null,function*(){try{let r=(yield Qw()).transaction(Gs,"readwrite");yield r.objectStore(Gs).put(e,Yw(n)),yield r.done}catch(t){if(t instanceof lr)dr.warn(t.message);else{let r=Vr.create("idb-set",{originalErrorMessage:t?.message});dr.warn(r.message)}}})}function Yw(n){return`${n.name}!${n.options.appId}`}var wR=1024,CR=30,lp=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new up(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return j(this,null,function*(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=zw();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>CR){let i=IR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){dr.warn(e)}})}getHeartbeatsHeader(){return j(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=zw(),{heartbeatsToSend:t,unsentEntries:r}=ER(this._heartbeatsCache.heartbeats),i=zs(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return dr.warn(e),""}})}};function zw(){return new Date().toISOString().substring(0,10)}function ER(n,e=wR){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Hw(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Hw(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var up=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return j(this,null,function*(){return Yf()?Nw().then(()=>!0).catch(()=>!1):!1})}read(){return j(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield bR(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return j(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return $w(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return j(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return $w(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function Hw(n){return zs(JSON.stringify({version:2,heartbeats:n})).length}function IR(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function DR(n){qs(new ur("platform-logger",e=>new ip(e),"PRIVATE")),qs(new ur("heartbeat",e=>new lp(e),"PRIVATE")),Lr(op,Bw,n),Lr(op,Bw,"esm2020"),Lr("fire-js","")}DR("");var xR="firebase",SR="12.6.0";Lr(xR,SR,"app");var Jw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Xw={};var hr,dp;(function(){var n;function e(x,w){function I(){}I.prototype=w.prototype,x.F=w.prototype,x.prototype=new I,x.prototype.constructor=x,x.D=function(S,D,M){for(var E=Array(arguments.length-2),At=2;At<arguments.length;At++)E[At-2]=arguments[At];return w.prototype[D].apply(S,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(x,w,I){I||(I=0);let S=Array(16);if(typeof w=="string")for(var D=0;D<16;++D)S[D]=w.charCodeAt(I++)|w.charCodeAt(I++)<<8|w.charCodeAt(I++)<<16|w.charCodeAt(I++)<<24;else for(D=0;D<16;++D)S[D]=w[I++]|w[I++]<<8|w[I++]<<16|w[I++]<<24;w=x.g[0],I=x.g[1],D=x.g[2];let M=x.g[3],E;E=w+(M^I&(D^M))+S[0]+3614090360&4294967295,w=I+(E<<7&4294967295|E>>>25),E=M+(D^w&(I^D))+S[1]+3905402710&4294967295,M=w+(E<<12&4294967295|E>>>20),E=D+(I^M&(w^I))+S[2]+606105819&4294967295,D=M+(E<<17&4294967295|E>>>15),E=I+(w^D&(M^w))+S[3]+3250441966&4294967295,I=D+(E<<22&4294967295|E>>>10),E=w+(M^I&(D^M))+S[4]+4118548399&4294967295,w=I+(E<<7&4294967295|E>>>25),E=M+(D^w&(I^D))+S[5]+1200080426&4294967295,M=w+(E<<12&4294967295|E>>>20),E=D+(I^M&(w^I))+S[6]+2821735955&4294967295,D=M+(E<<17&4294967295|E>>>15),E=I+(w^D&(M^w))+S[7]+4249261313&4294967295,I=D+(E<<22&4294967295|E>>>10),E=w+(M^I&(D^M))+S[8]+1770035416&4294967295,w=I+(E<<7&4294967295|E>>>25),E=M+(D^w&(I^D))+S[9]+2336552879&4294967295,M=w+(E<<12&4294967295|E>>>20),E=D+(I^M&(w^I))+S[10]+4294925233&4294967295,D=M+(E<<17&4294967295|E>>>15),E=I+(w^D&(M^w))+S[11]+2304563134&4294967295,I=D+(E<<22&4294967295|E>>>10),E=w+(M^I&(D^M))+S[12]+1804603682&4294967295,w=I+(E<<7&4294967295|E>>>25),E=M+(D^w&(I^D))+S[13]+4254626195&4294967295,M=w+(E<<12&4294967295|E>>>20),E=D+(I^M&(w^I))+S[14]+2792965006&4294967295,D=M+(E<<17&4294967295|E>>>15),E=I+(w^D&(M^w))+S[15]+1236535329&4294967295,I=D+(E<<22&4294967295|E>>>10),E=w+(D^M&(I^D))+S[1]+4129170786&4294967295,w=I+(E<<5&4294967295|E>>>27),E=M+(I^D&(w^I))+S[6]+3225465664&4294967295,M=w+(E<<9&4294967295|E>>>23),E=D+(w^I&(M^w))+S[11]+643717713&4294967295,D=M+(E<<14&4294967295|E>>>18),E=I+(M^w&(D^M))+S[0]+3921069994&4294967295,I=D+(E<<20&4294967295|E>>>12),E=w+(D^M&(I^D))+S[5]+3593408605&4294967295,w=I+(E<<5&4294967295|E>>>27),E=M+(I^D&(w^I))+S[10]+38016083&4294967295,M=w+(E<<9&4294967295|E>>>23),E=D+(w^I&(M^w))+S[15]+3634488961&4294967295,D=M+(E<<14&4294967295|E>>>18),E=I+(M^w&(D^M))+S[4]+3889429448&4294967295,I=D+(E<<20&4294967295|E>>>12),E=w+(D^M&(I^D))+S[9]+568446438&4294967295,w=I+(E<<5&4294967295|E>>>27),E=M+(I^D&(w^I))+S[14]+3275163606&4294967295,M=w+(E<<9&4294967295|E>>>23),E=D+(w^I&(M^w))+S[3]+4107603335&4294967295,D=M+(E<<14&4294967295|E>>>18),E=I+(M^w&(D^M))+S[8]+1163531501&4294967295,I=D+(E<<20&4294967295|E>>>12),E=w+(D^M&(I^D))+S[13]+2850285829&4294967295,w=I+(E<<5&4294967295|E>>>27),E=M+(I^D&(w^I))+S[2]+4243563512&4294967295,M=w+(E<<9&4294967295|E>>>23),E=D+(w^I&(M^w))+S[7]+1735328473&4294967295,D=M+(E<<14&4294967295|E>>>18),E=I+(M^w&(D^M))+S[12]+2368359562&4294967295,I=D+(E<<20&4294967295|E>>>12),E=w+(I^D^M)+S[5]+4294588738&4294967295,w=I+(E<<4&4294967295|E>>>28),E=M+(w^I^D)+S[8]+2272392833&4294967295,M=w+(E<<11&4294967295|E>>>21),E=D+(M^w^I)+S[11]+1839030562&4294967295,D=M+(E<<16&4294967295|E>>>16),E=I+(D^M^w)+S[14]+4259657740&4294967295,I=D+(E<<23&4294967295|E>>>9),E=w+(I^D^M)+S[1]+2763975236&4294967295,w=I+(E<<4&4294967295|E>>>28),E=M+(w^I^D)+S[4]+1272893353&4294967295,M=w+(E<<11&4294967295|E>>>21),E=D+(M^w^I)+S[7]+4139469664&4294967295,D=M+(E<<16&4294967295|E>>>16),E=I+(D^M^w)+S[10]+3200236656&4294967295,I=D+(E<<23&4294967295|E>>>9),E=w+(I^D^M)+S[13]+681279174&4294967295,w=I+(E<<4&4294967295|E>>>28),E=M+(w^I^D)+S[0]+3936430074&4294967295,M=w+(E<<11&4294967295|E>>>21),E=D+(M^w^I)+S[3]+3572445317&4294967295,D=M+(E<<16&4294967295|E>>>16),E=I+(D^M^w)+S[6]+76029189&4294967295,I=D+(E<<23&4294967295|E>>>9),E=w+(I^D^M)+S[9]+3654602809&4294967295,w=I+(E<<4&4294967295|E>>>28),E=M+(w^I^D)+S[12]+3873151461&4294967295,M=w+(E<<11&4294967295|E>>>21),E=D+(M^w^I)+S[15]+530742520&4294967295,D=M+(E<<16&4294967295|E>>>16),E=I+(D^M^w)+S[2]+3299628645&4294967295,I=D+(E<<23&4294967295|E>>>9),E=w+(D^(I|~M))+S[0]+4096336452&4294967295,w=I+(E<<6&4294967295|E>>>26),E=M+(I^(w|~D))+S[7]+1126891415&4294967295,M=w+(E<<10&4294967295|E>>>22),E=D+(w^(M|~I))+S[14]+2878612391&4294967295,D=M+(E<<15&4294967295|E>>>17),E=I+(M^(D|~w))+S[5]+4237533241&4294967295,I=D+(E<<21&4294967295|E>>>11),E=w+(D^(I|~M))+S[12]+1700485571&4294967295,w=I+(E<<6&4294967295|E>>>26),E=M+(I^(w|~D))+S[3]+2399980690&4294967295,M=w+(E<<10&4294967295|E>>>22),E=D+(w^(M|~I))+S[10]+4293915773&4294967295,D=M+(E<<15&4294967295|E>>>17),E=I+(M^(D|~w))+S[1]+2240044497&4294967295,I=D+(E<<21&4294967295|E>>>11),E=w+(D^(I|~M))+S[8]+1873313359&4294967295,w=I+(E<<6&4294967295|E>>>26),E=M+(I^(w|~D))+S[15]+4264355552&4294967295,M=w+(E<<10&4294967295|E>>>22),E=D+(w^(M|~I))+S[6]+2734768916&4294967295,D=M+(E<<15&4294967295|E>>>17),E=I+(M^(D|~w))+S[13]+1309151649&4294967295,I=D+(E<<21&4294967295|E>>>11),E=w+(D^(I|~M))+S[4]+4149444226&4294967295,w=I+(E<<6&4294967295|E>>>26),E=M+(I^(w|~D))+S[11]+3174756917&4294967295,M=w+(E<<10&4294967295|E>>>22),E=D+(w^(M|~I))+S[2]+718787259&4294967295,D=M+(E<<15&4294967295|E>>>17),E=I+(M^(D|~w))+S[9]+3951481745&4294967295,x.g[0]=x.g[0]+w&4294967295,x.g[1]=x.g[1]+(D+(E<<21&4294967295|E>>>11))&4294967295,x.g[2]=x.g[2]+D&4294967295,x.g[3]=x.g[3]+M&4294967295}r.prototype.v=function(x,w){w===void 0&&(w=x.length);let I=w-this.blockSize,S=this.C,D=this.h,M=0;for(;M<w;){if(D==0)for(;M<=I;)i(this,x,M),M+=this.blockSize;if(typeof x=="string"){for(;M<w;)if(S[D++]=x.charCodeAt(M++),D==this.blockSize){i(this,S),D=0;break}}else for(;M<w;)if(S[D++]=x[M++],D==this.blockSize){i(this,S),D=0;break}}this.h=D,this.o+=w},r.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var w=1;w<x.length-8;++w)x[w]=0;w=this.o*8;for(var I=x.length-8;I<x.length;++I)x[I]=w&255,w/=256;for(this.v(x),x=Array(16),w=0,I=0;I<4;++I)for(let S=0;S<32;S+=8)x[w++]=this.g[I]>>>S&255;return x};function o(x,w){var I=c;return Object.prototype.hasOwnProperty.call(I,x)?I[x]:I[x]=w(x)}function s(x,w){this.h=w;let I=[],S=!0;for(let D=x.length-1;D>=0;D--){let M=x[D]|0;S&&M==w||(I[D]=M,S=!1)}this.g=I}var c={};function l(x){return-128<=x&&x<128?o(x,function(w){return new s([w|0],w<0?-1:0)}):new s([x|0],x<0?-1:0)}function u(x){if(isNaN(x)||!isFinite(x))return g;if(x<0)return k(u(-x));let w=[],I=1;for(let S=0;x>=I;S++)w[S]=x/I|0,I*=4294967296;return new s(w,0)}function m(x,w){if(x.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(x.charAt(0)=="-")return k(m(x.substring(1),w));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');let I=u(Math.pow(w,8)),S=g;for(let M=0;M<x.length;M+=8){var D=Math.min(8,x.length-M);let E=parseInt(x.substring(M,M+D),w);D<8?(D=u(Math.pow(w,D)),S=S.j(D).add(u(E))):(S=S.j(I),S=S.add(u(E)))}return S}var g=l(0),b=l(1),C=l(16777216);n=s.prototype,n.m=function(){if(R(this))return-k(this).m();let x=0,w=1;for(let I=0;I<this.g.length;I++){let S=this.i(I);x+=(S>=0?S:4294967296+S)*w,w*=4294967296}return x},n.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(O(this))return"0";if(R(this))return"-"+k(this).toString(x);let w=u(Math.pow(x,6));var I=this;let S="";for(;;){let D=Ee(I,w).g;I=q(I,D.j(w));let M=((I.g.length>0?I.g[0]:I.h)>>>0).toString(x);if(I=D,O(I))return M+S;for(;M.length<6;)M="0"+M;S=M+S}},n.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function O(x){if(x.h!=0)return!1;for(let w=0;w<x.g.length;w++)if(x.g[w]!=0)return!1;return!0}function R(x){return x.h==-1}n.l=function(x){return x=q(this,x),R(x)?-1:O(x)?0:1};function k(x){let w=x.g.length,I=[];for(let S=0;S<w;S++)I[S]=~x.g[S];return new s(I,~x.h).add(b)}n.abs=function(){return R(this)?k(this):this},n.add=function(x){let w=Math.max(this.g.length,x.g.length),I=[],S=0;for(let D=0;D<=w;D++){let M=S+(this.i(D)&65535)+(x.i(D)&65535),E=(M>>>16)+(this.i(D)>>>16)+(x.i(D)>>>16);S=E>>>16,M&=65535,E&=65535,I[D]=E<<16|M}return new s(I,I[I.length-1]&-2147483648?-1:0)};function q(x,w){return x.add(k(w))}n.j=function(x){if(O(this)||O(x))return g;if(R(this))return R(x)?k(this).j(k(x)):k(k(this).j(x));if(R(x))return k(this.j(k(x)));if(this.l(C)<0&&x.l(C)<0)return u(this.m()*x.m());let w=this.g.length+x.g.length,I=[];for(var S=0;S<2*w;S++)I[S]=0;for(S=0;S<this.g.length;S++)for(let D=0;D<x.g.length;D++){let M=this.i(S)>>>16,E=this.i(S)&65535,At=x.i(D)>>>16,wr=x.i(D)&65535;I[2*S+2*D]+=E*wr,re(I,2*S+2*D),I[2*S+2*D+1]+=M*wr,re(I,2*S+2*D+1),I[2*S+2*D+1]+=E*At,re(I,2*S+2*D+1),I[2*S+2*D+2]+=M*At,re(I,2*S+2*D+2)}for(x=0;x<w;x++)I[x]=I[2*x+1]<<16|I[2*x];for(x=w;x<2*w;x++)I[x]=0;return new s(I,0)};function re(x,w){for(;(x[w]&65535)!=x[w];)x[w+1]+=x[w]>>>16,x[w]&=65535,w++}function Q(x,w){this.g=x,this.h=w}function Ee(x,w){if(O(w))throw Error("division by zero");if(O(x))return new Q(g,g);if(R(x))return w=Ee(k(x),w),new Q(k(w.g),k(w.h));if(R(w))return w=Ee(x,k(w)),new Q(k(w.g),w.h);if(x.g.length>30){if(R(x)||R(w))throw Error("slowDivide_ only works with positive integers.");for(var I=b,S=w;S.l(x)<=0;)I=ke(I),S=ke(S);var D=De(I,1),M=De(S,1);for(S=De(S,2),I=De(I,2);!O(S);){var E=M.add(S);E.l(x)<=0&&(D=D.add(I),M=E),S=De(S,1),I=De(I,1)}return w=q(x,D.j(w)),new Q(D,w)}for(D=g;x.l(w)>=0;){for(I=Math.max(1,Math.floor(x.m()/w.m())),S=Math.ceil(Math.log(I)/Math.LN2),S=S<=48?1:Math.pow(2,S-48),M=u(I),E=M.j(w);R(E)||E.l(x)>0;)I-=S,M=u(I),E=M.j(w);O(M)&&(M=b),D=D.add(M),x=q(x,E)}return new Q(D,x)}n.B=function(x){return Ee(this,x).h},n.and=function(x){let w=Math.max(this.g.length,x.g.length),I=[];for(let S=0;S<w;S++)I[S]=this.i(S)&x.i(S);return new s(I,this.h&x.h)},n.or=function(x){let w=Math.max(this.g.length,x.g.length),I=[];for(let S=0;S<w;S++)I[S]=this.i(S)|x.i(S);return new s(I,this.h|x.h)},n.xor=function(x){let w=Math.max(this.g.length,x.g.length),I=[];for(let S=0;S<w;S++)I[S]=this.i(S)^x.i(S);return new s(I,this.h^x.h)};function ke(x){let w=x.g.length+1,I=[];for(let S=0;S<w;S++)I[S]=x.i(S)<<1|x.i(S-1)>>>31;return new s(I,x.h)}function De(x,w){let I=w>>5;w%=32;let S=x.g.length-I,D=[];for(let M=0;M<S;M++)D[M]=w>0?x.i(M+I)>>>w|x.i(M+I+1)<<32-w:x.i(M+I);return new s(D,x.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,dp=Xw.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=m,hr=Xw.Integer=s}).apply(typeof Jw<"u"?Jw:typeof self<"u"?self:typeof window<"u"?window:{});var Nl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fr={};var hp,TR,vo,fp,Ks,Ol,pp,mp,gp;(function(){var n,e=Object.defineProperty;function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nl=="object"&&Nl];for(var d=0;d<a.length;++d){var p=a[d];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(a,d){if(d)e:{var p=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var T=a[v];if(!(T in p))break e;p=p[T]}a=a[a.length-1],v=p[a],d=d(v),d!=v&&d!=null&&e(p,a,{configurable:!0,writable:!0,value:d})}}i("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(a){return a||function(d){var p=[],v;for(v in d)Object.prototype.hasOwnProperty.call(d,v)&&p.push([v,d[v]]);return p}});var o=o||{},s=this||self;function c(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function l(a,d,p){return a.call.apply(a.bind,arguments)}function u(a,d,p){return u=l,u.apply(null,arguments)}function m(a,d){var p=Array.prototype.slice.call(arguments,1);return function(){var v=p.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function g(a,d){function p(){}p.prototype=d.prototype,a.Z=d.prototype,a.prototype=new p,a.prototype.constructor=a,a.Ob=function(v,T,N){for(var $=Array(arguments.length-2),le=2;le<arguments.length;le++)$[le-2]=arguments[le];return d.prototype[T].apply(v,$)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function C(a){let d=a.length;if(d>0){let p=Array(d);for(let v=0;v<d;v++)p[v]=a[v];return p}return[]}function O(a,d){for(let v=1;v<arguments.length;v++){let T=arguments[v];var p=typeof T;if(p=p!="object"?p:T?Array.isArray(T)?"array":p:"null",p=="array"||p=="object"&&typeof T.length=="number"){p=a.length||0;let N=T.length||0;a.length=p+N;for(let $=0;$<N;$++)a[p+$]=T[$]}else a.push(T)}}class R{constructor(d,p){this.i=d,this.j=p,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function k(a){s.setTimeout(()=>{throw a},0)}function q(){var a=x;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class re{constructor(){this.h=this.g=null}add(d,p){let v=Q.get();v.set(d,p),this.h?this.h.next=v:this.g=v,this.h=v}}var Q=new R(()=>new Ee,a=>a.reset());class Ee{constructor(){this.next=this.g=this.h=null}set(d,p){this.h=d,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let ke,De=!1,x=new re,w=()=>{let a=Promise.resolve(void 0);ke=()=>{a.then(I)}};function I(){for(var a;a=q();){try{a.h.call(a.g)}catch(p){k(p)}var d=Q;d.j(a),d.h<100&&(d.h++,a.next=d.g,d.g=a)}De=!1}function S(){this.u=this.u,this.C=this.C}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var M=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let p=()=>{};s.addEventListener("test",p,d),s.removeEventListener("test",p,d)}catch{}return a}();function E(a){return/^[\s\xa0]*$/.test(a)}function At(a,d){D.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,d)}g(At,D),At.prototype.init=function(a,d){let p=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget,d||(p=="mouseover"?d=a.fromElement:p=="mouseout"&&(d=a.toElement)),this.relatedTarget=d,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&At.Z.h.call(this)},At.prototype.h=function(){At.Z.h.call(this);let a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var wr="closure_listenable_"+(Math.random()*1e6|0),II=0;function DI(a,d,p,v,T){this.listener=a,this.proxy=null,this.src=d,this.type=p,this.capture=!!v,this.ha=T,this.key=++II,this.da=this.fa=!1}function va(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function _a(a,d,p){for(let v in a)d.call(p,a[v],v,a)}function xI(a,d){for(let p in a)d.call(void 0,a[p],p,a)}function Pg(a){let d={};for(let p in a)d[p]=a[p];return d}let Ng="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Og(a,d){let p,v;for(let T=1;T<arguments.length;T++){v=arguments[T];for(p in v)a[p]=v[p];for(let N=0;N<Ng.length;N++)p=Ng[N],Object.prototype.hasOwnProperty.call(v,p)&&(a[p]=v[p])}}function ba(a){this.src=a,this.g={},this.h=0}ba.prototype.add=function(a,d,p,v,T){let N=a.toString();a=this.g[N],a||(a=this.g[N]=[],this.h++);let $=Vu(a,d,v,T);return $>-1?(d=a[$],p||(d.fa=!1)):(d=new DI(d,this.src,N,!!v,T),d.fa=p,a.push(d)),d};function Fu(a,d){let p=d.type;if(p in a.g){var v=a.g[p],T=Array.prototype.indexOf.call(v,d,void 0),N;(N=T>=0)&&Array.prototype.splice.call(v,T,1),N&&(va(d),a.g[p].length==0&&(delete a.g[p],a.h--))}}function Vu(a,d,p,v){for(let T=0;T<a.length;++T){let N=a[T];if(!N.da&&N.listener==d&&N.capture==!!p&&N.ha==v)return T}return-1}var Lu="closure_lm_"+(Math.random()*1e6|0),ju={};function Rg(a,d,p,v,T){if(v&&v.once)return Fg(a,d,p,v,T);if(Array.isArray(d)){for(let N=0;N<d.length;N++)Rg(a,d[N],p,v,T);return null}return p=zu(p),a&&a[wr]?a.J(d,p,c(v)?!!v.capture:!!v,T):kg(a,d,p,!1,v,T)}function kg(a,d,p,v,T,N){if(!d)throw Error("Invalid event type");let $=c(T)?!!T.capture:!!T,le=Uu(a);if(le||(a[Lu]=le=new ba(a)),p=le.add(d,p,v,$,N),p.proxy)return p;if(v=SI(),p.proxy=v,v.src=a,v.listener=p,a.addEventListener)M||(T=$),T===void 0&&(T=!1),a.addEventListener(d.toString(),v,T);else if(a.attachEvent)a.attachEvent(Lg(d.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return p}function SI(){function a(p){return d.call(a.src,a.listener,p)}let d=TI;return a}function Fg(a,d,p,v,T){if(Array.isArray(d)){for(let N=0;N<d.length;N++)Fg(a,d[N],p,v,T);return null}return p=zu(p),a&&a[wr]?a.K(d,p,c(v)?!!v.capture:!!v,T):kg(a,d,p,!0,v,T)}function Vg(a,d,p,v,T){if(Array.isArray(d))for(var N=0;N<d.length;N++)Vg(a,d[N],p,v,T);else v=c(v)?!!v.capture:!!v,p=zu(p),a&&a[wr]?(a=a.i,N=String(d).toString(),N in a.g&&(d=a.g[N],p=Vu(d,p,v,T),p>-1&&(va(d[p]),Array.prototype.splice.call(d,p,1),d.length==0&&(delete a.g[N],a.h--)))):a&&(a=Uu(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Vu(d,p,v,T)),(p=a>-1?d[a]:null)&&Bu(p))}function Bu(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[wr])Fu(d.i,a);else{var p=a.type,v=a.proxy;d.removeEventListener?d.removeEventListener(p,v,a.capture):d.detachEvent?d.detachEvent(Lg(p),v):d.addListener&&d.removeListener&&d.removeListener(v),(p=Uu(d))?(Fu(p,a),p.h==0&&(p.src=null,d[Lu]=null)):va(a)}}}function Lg(a){return a in ju?ju[a]:ju[a]="on"+a}function TI(a,d){if(a.da)a=!0;else{d=new At(d,this);let p=a.listener,v=a.ha||a.src;a.fa&&Bu(a),a=p.call(v,d)}return a}function Uu(a){return a=a[Lu],a instanceof ba?a:null}var $u="__closure_events_fn_"+(Math.random()*1e9>>>0);function zu(a){return typeof a=="function"?a:(a[$u]||(a[$u]=function(d){return a.handleEvent(d)}),a[$u])}function _t(){S.call(this),this.i=new ba(this),this.M=this,this.G=null}g(_t,S),_t.prototype[wr]=!0,_t.prototype.removeEventListener=function(a,d,p,v){Vg(this,a,d,p,v)};function Dt(a,d){var p,v=a.G;if(v)for(p=[];v;v=v.G)p.push(v);if(a=a.M,v=d.type||d,typeof d=="string")d=new D(d,a);else if(d instanceof D)d.target=d.target||a;else{var T=d;d=new D(v,a),Og(d,T)}T=!0;let N,$;if(p)for($=p.length-1;$>=0;$--)N=d.g=p[$],T=wa(N,v,!0,d)&&T;if(N=d.g=a,T=wa(N,v,!0,d)&&T,T=wa(N,v,!1,d)&&T,p)for($=0;$<p.length;$++)N=d.g=p[$],T=wa(N,v,!1,d)&&T}_t.prototype.N=function(){if(_t.Z.N.call(this),this.i){var a=this.i;for(let d in a.g){let p=a.g[d];for(let v=0;v<p.length;v++)va(p[v]);delete a.g[d],a.h--}}this.G=null},_t.prototype.J=function(a,d,p,v){return this.i.add(String(a),d,!1,p,v)},_t.prototype.K=function(a,d,p,v){return this.i.add(String(a),d,!0,p,v)};function wa(a,d,p,v){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();let T=!0;for(let N=0;N<d.length;++N){let $=d[N];if($&&!$.da&&$.capture==p){let le=$.listener,ot=$.ha||$.src;$.fa&&Fu(a.i,$),T=le.call(ot,v)!==!1&&T}}return T&&!v.defaultPrevented}function MI(a,d){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=u(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:s.setTimeout(a,d||0)}function jg(a){a.g=MI(()=>{a.g=null,a.i&&(a.i=!1,jg(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class AI extends S{constructor(d,p){super(),this.m=d,this.l=p,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:jg(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ho(a){S.call(this),this.h=a,this.g={}}g(Ho,S);var Bg=[];function Ug(a){_a(a.g,function(d,p){this.g.hasOwnProperty(p)&&Bu(d)},a),a.g={}}Ho.prototype.N=function(){Ho.Z.N.call(this),Ug(this)},Ho.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hu=s.JSON.stringify,PI=s.JSON.parse,NI=class{stringify(a){return s.JSON.stringify(a,void 0)}parse(a){return s.JSON.parse(a,void 0)}};function $g(){}function zg(){}var qo={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function qu(){D.call(this,"d")}g(qu,D);function Gu(){D.call(this,"c")}g(Gu,D);var Jr={},Hg=null;function Ca(){return Hg=Hg||new _t}Jr.Ia="serverreachability";function qg(a){D.call(this,Jr.Ia,a)}g(qg,D);function Go(a){let d=Ca();Dt(d,new qg(d))}Jr.STAT_EVENT="statevent";function Gg(a,d){D.call(this,Jr.STAT_EVENT,a),this.stat=d}g(Gg,D);function xt(a){let d=Ca();Dt(d,new Gg(d,a))}Jr.Ja="timingevent";function Wg(a,d){D.call(this,Jr.Ja,a),this.size=d}g(Wg,D);function Wo(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){a()},d)}function Ko(){this.g=!0}Ko.prototype.ua=function(){this.g=!1};function OI(a,d,p,v,T,N){a.info(function(){if(a.g)if(N){var $="",le=N.split("&");for(let Oe=0;Oe<le.length;Oe++){var ot=le[Oe].split("=");if(ot.length>1){let ct=ot[0];ot=ot[1];let En=ct.split("_");$=En.length>=2&&En[1]=="type"?$+(ct+"="+ot+"&"):$+(ct+"=redacted&")}}}else $=null;else $=N;return"XMLHTTP REQ ("+v+") [attempt "+T+"]: "+d+`
`+p+`
`+$})}function RI(a,d,p,v,T,N,$){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+T+"]: "+d+`
`+p+`
`+N+" "+$})}function ki(a,d,p,v){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+FI(a,p)+(v?" "+v:"")})}function kI(a,d){a.info(function(){return"TIMEOUT: "+d})}Ko.prototype.info=function(){};function FI(a,d){if(!a.g)return d;if(!d)return null;try{let N=JSON.parse(d);if(N){for(a=0;a<N.length;a++)if(Array.isArray(N[a])){var p=N[a];if(!(p.length<2)){var v=p[1];if(Array.isArray(v)&&!(v.length<1)){var T=v[0];if(T!="noop"&&T!="stop"&&T!="close")for(let $=1;$<v.length;$++)v[$]=""}}}}return Hu(N)}catch{return d}}var Ea={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Kg={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Qg;function Wu(){}g(Wu,$g),Wu.prototype.g=function(){return new XMLHttpRequest},Qg=new Wu;function Qo(a){return encodeURIComponent(String(a))}function VI(a){var d=1;a=a.split(":");let p=[];for(;d>0&&a.length;)p.push(a.shift()),d--;return a.length&&p.push(a.join(":")),p}function Cr(a,d,p,v){this.j=a,this.i=d,this.l=p,this.S=v||1,this.V=new Ho(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Yg}function Yg(){this.i=null,this.g="",this.h=!1}var Jg={},Ku={};function Qu(a,d,p){a.M=1,a.A=Da(Cn(d)),a.u=p,a.R=!0,Xg(a,null)}function Xg(a,d){a.F=Date.now(),Ia(a),a.B=Cn(a.A);var p=a.B,v=a.S;Array.isArray(v)||(v=[String(v)]),dy(p.i,"t",v),a.C=0,p=a.j.L,a.h=new Yg,a.g=My(a.j,p?d:null,!a.u),a.P>0&&(a.O=new AI(u(a.Y,a,a.g),a.P)),d=a.V,p=a.g,v=a.ba;var T="readystatechange";Array.isArray(T)||(T&&(Bg[0]=T.toString()),T=Bg);for(let N=0;N<T.length;N++){let $=Rg(p,T[N],v||d.handleEvent,!1,d.h||d);if(!$)break;d.g[$.key]=$}d=a.J?Pg(a.J):{},a.u?(a.v||(a.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,d)):(a.v="GET",a.g.ea(a.B,a.v,null,d)),Go(),OI(a.i,a.v,a.B,a.l,a.S,a.u)}Cr.prototype.ba=function(a){a=a.target;let d=this.O;d&&Dr(a)==3?d.j():this.Y(a)},Cr.prototype.Y=function(a){try{if(a==this.g)e:{let le=Dr(this.g),ot=this.g.ya(),Oe=this.g.ca();if(!(le<3)&&(le!=3||this.g&&(this.h.h||this.g.la()||vy(this.g)))){this.K||le!=4||ot==7||(ot==8||Oe<=0?Go(3):Go(2)),Yu(this);var d=this.g.ca();this.X=d;var p=LI(this);if(this.o=d==200,RI(this.i,this.v,this.B,this.l,this.S,le,d),this.o){if(this.U&&!this.L){t:{if(this.g){var v,T=this.g;if((v=T.g?T.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(v)){var N=v;break t}}N=null}if(a=N)ki(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ju(this,a);else{this.o=!1,this.m=3,xt(12),Xr(this),Yo(this);break e}}if(this.R){a=!0;let ct;for(;!this.K&&this.C<p.length;)if(ct=jI(this,p),ct==Ku){le==4&&(this.m=4,xt(14),a=!1),ki(this.i,this.l,null,"[Incomplete Response]");break}else if(ct==Jg){this.m=4,xt(15),ki(this.i,this.l,p,"[Invalid Chunk]"),a=!1;break}else ki(this.i,this.l,ct,null),Ju(this,ct);if(Zg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),le!=4||p.length!=0||this.h.h||(this.m=1,xt(16),a=!1),this.o=this.o&&a,!a)ki(this.i,this.l,p,"[Invalid Chunked Response]"),Xr(this),Yo(this);else if(p.length>0&&!this.W){this.W=!0;var $=this.j;$.g==this&&$.aa&&!$.P&&($.j.info("Great, no buffering proxy detected. Bytes received: "+p.length),id($),$.P=!0,xt(11))}}else ki(this.i,this.l,p,null),Ju(this,p);le==4&&Xr(this),this.o&&!this.K&&(le==4?Dy(this.j,this):(this.o=!1,Ia(this)))}else ZI(this.g),d==400&&p.indexOf("Unknown SID")>0?(this.m=3,xt(12)):(this.m=0,xt(13)),Xr(this),Yo(this)}}}catch{}finally{}};function LI(a){if(!Zg(a))return a.g.la();let d=vy(a.g);if(d==="")return"";let p="",v=d.length,T=Dr(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Xr(a),Yo(a),"";a.h.i=new s.TextDecoder}for(let N=0;N<v;N++)a.h.h=!0,p+=a.h.i.decode(d[N],{stream:!(T&&N==v-1)});return d.length=0,a.h.g+=p,a.C=0,a.h.g}function Zg(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function jI(a,d){var p=a.C,v=d.indexOf(`
`,p);return v==-1?Ku:(p=Number(d.substring(p,v)),isNaN(p)?Jg:(v+=1,v+p>d.length?Ku:(d=d.slice(v,v+p),a.C=v+p,d)))}Cr.prototype.cancel=function(){this.K=!0,Xr(this)};function Ia(a){a.T=Date.now()+a.H,ey(a,a.H)}function ey(a,d){if(a.D!=null)throw Error("WatchDog timer not null");a.D=Wo(u(a.aa,a),d)}function Yu(a){a.D&&(s.clearTimeout(a.D),a.D=null)}Cr.prototype.aa=function(){this.D=null;let a=Date.now();a-this.T>=0?(kI(this.i,this.B),this.M!=2&&(Go(),xt(17)),Xr(this),this.m=2,Yo(this)):ey(this,this.T-a)};function Yo(a){a.j.I==0||a.K||Dy(a.j,a)}function Xr(a){Yu(a);var d=a.O;d&&typeof d.dispose=="function"&&d.dispose(),a.O=null,Ug(a.V),a.g&&(d=a.g,a.g=null,d.abort(),d.dispose())}function Ju(a,d){try{var p=a.j;if(p.I!=0&&(p.g==a||Xu(p.h,a))){if(!a.L&&Xu(p.h,a)&&p.I==3){try{var v=p.Ba.g.parse(d)}catch{v=null}if(Array.isArray(v)&&v.length==3){var T=v;if(T[0]==0){e:if(!p.v){if(p.g)if(p.g.F+3e3<a.F)Pa(p),Ma(p);else break e;rd(p),xt(18)}}else p.xa=T[1],0<p.xa-p.K&&T[2]<37500&&p.F&&p.A==0&&!p.C&&(p.C=Wo(u(p.Va,p),6e3));ry(p.h)<=1&&p.ta&&(p.ta=void 0)}else ei(p,11)}else if((a.L||p.g==a)&&Pa(p),!E(d))for(T=p.Ba.g.parse(d),d=0;d<T.length;d++){let Oe=T[d],ct=Oe[0];if(!(ct<=p.K))if(p.K=ct,Oe=Oe[1],p.I==2)if(Oe[0]=="c"){p.M=Oe[1],p.ba=Oe[2];let En=Oe[3];En!=null&&(p.ka=En,p.j.info("VER="+p.ka));let ti=Oe[4];ti!=null&&(p.za=ti,p.j.info("SVER="+p.za));let xr=Oe[5];xr!=null&&typeof xr=="number"&&xr>0&&(v=1.5*xr,p.O=v,p.j.info("backChannelRequestTimeoutMs_="+v)),v=p;let Sr=a.g;if(Sr){let Oa=Sr.g?Sr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oa){var N=v.h;N.g||Oa.indexOf("spdy")==-1&&Oa.indexOf("quic")==-1&&Oa.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(Zu(N,N.h),N.h=null))}if(v.G){let od=Sr.g?Sr.g.getResponseHeader("X-HTTP-Session-Id"):null;od&&(v.wa=od,Le(v.J,v.G,od))}}p.I=3,p.l&&p.l.ra(),p.aa&&(p.T=Date.now()-a.F,p.j.info("Handshake RTT: "+p.T+"ms")),v=p;var $=a;if(v.na=Ty(v,v.L?v.ba:null,v.W),$.L){iy(v.h,$);var le=$,ot=v.O;ot&&(le.H=ot),le.D&&(Yu(le),Ia(le)),v.g=$}else Ey(v);p.i.length>0&&Aa(p)}else Oe[0]!="stop"&&Oe[0]!="close"||ei(p,7);else p.I==3&&(Oe[0]=="stop"||Oe[0]=="close"?Oe[0]=="stop"?ei(p,7):nd(p):Oe[0]!="noop"&&p.l&&p.l.qa(Oe),p.A=0)}}Go(4)}catch{}}var BI=class{constructor(a,d){this.g=a,this.map=d}};function ty(a){this.l=a||10,s.PerformanceNavigationTiming?(a=s.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ny(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function ry(a){return a.h?1:a.g?a.g.size:0}function Xu(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function Zu(a,d){a.g?a.g.add(d):a.h=d}function iy(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}ty.prototype.cancel=function(){if(this.i=oy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function oy(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let p of a.g.values())d=d.concat(p.G);return d}return C(a.i)}var sy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function UI(a,d){if(a){a=a.split("&");for(let p=0;p<a.length;p++){let v=a[p].indexOf("="),T,N=null;v>=0?(T=a[p].substring(0,v),N=a[p].substring(v+1)):T=a[p],d(T,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function Er(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;a instanceof Er?(this.l=a.l,Jo(this,a.j),this.o=a.o,this.g=a.g,Xo(this,a.u),this.h=a.h,ed(this,hy(a.i)),this.m=a.m):a&&(d=String(a).match(sy))?(this.l=!1,Jo(this,d[1]||"",!0),this.o=Zo(d[2]||""),this.g=Zo(d[3]||"",!0),Xo(this,d[4]),this.h=Zo(d[5]||"",!0),ed(this,d[6]||"",!0),this.m=Zo(d[7]||"")):(this.l=!1,this.i=new ts(null,this.l))}Er.prototype.toString=function(){let a=[];var d=this.j;d&&a.push(es(d,ay,!0),":");var p=this.g;return(p||d=="file")&&(a.push("//"),(d=this.o)&&a.push(es(d,ay,!0),"@"),a.push(Qo(p).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.u,p!=null&&a.push(":",String(p))),(p=this.h)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(es(p,p.charAt(0)=="/"?HI:zI,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",es(p,GI)),a.join("")},Er.prototype.resolve=function(a){let d=Cn(this),p=!!a.j;p?Jo(d,a.j):p=!!a.o,p?d.o=a.o:p=!!a.g,p?d.g=a.g:p=a.u!=null;var v=a.h;if(p)Xo(d,a.u);else if(p=!!a.h){if(v.charAt(0)!="/")if(this.g&&!this.h)v="/"+v;else{var T=d.h.lastIndexOf("/");T!=-1&&(v=d.h.slice(0,T+1)+v)}if(T=v,T==".."||T==".")v="";else if(T.indexOf("./")!=-1||T.indexOf("/.")!=-1){v=T.lastIndexOf("/",0)==0,T=T.split("/");let N=[];for(let $=0;$<T.length;){let le=T[$++];le=="."?v&&$==T.length&&N.push(""):le==".."?((N.length>1||N.length==1&&N[0]!="")&&N.pop(),v&&$==T.length&&N.push("")):(N.push(le),v=!0)}v=N.join("/")}else v=T}return p?d.h=v:p=a.i.toString()!=="",p?ed(d,hy(a.i)):p=!!a.m,p&&(d.m=a.m),d};function Cn(a){return new Er(a)}function Jo(a,d,p){a.j=p?Zo(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Xo(a,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);a.u=d}else a.u=null}function ed(a,d,p){d instanceof ts?(a.i=d,WI(a.i,a.l)):(p||(d=es(d,qI)),a.i=new ts(d,a.l))}function Le(a,d,p){a.i.set(d,p)}function Da(a){return Le(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function Zo(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function es(a,d,p){return typeof a=="string"?(a=encodeURI(a).replace(d,$I),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function $I(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var ay=/[#\/\?@]/g,zI=/[#\?:]/g,HI=/[#\?]/g,qI=/[#\?@]/g,GI=/#/g;function ts(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Zr(a){a.g||(a.g=new Map,a.h=0,a.i&&UI(a.i,function(d,p){a.add(decodeURIComponent(d.replace(/\+/g," ")),p)}))}n=ts.prototype,n.add=function(a,d){Zr(this),this.i=null,a=Fi(this,a);let p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(d),this.h+=1,this};function cy(a,d){Zr(a),d=Fi(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function ly(a,d){return Zr(a),d=Fi(a,d),a.g.has(d)}n.forEach=function(a,d){Zr(this),this.g.forEach(function(p,v){p.forEach(function(T){a.call(d,T,v,this)},this)},this)};function uy(a,d){Zr(a);let p=[];if(typeof d=="string")ly(a,d)&&(p=p.concat(a.g.get(Fi(a,d))));else for(a=Array.from(a.g.values()),d=0;d<a.length;d++)p=p.concat(a[d]);return p}n.set=function(a,d){return Zr(this),this.i=null,a=Fi(this,a),ly(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},n.get=function(a,d){return a?(a=uy(this,a),a.length>0?String(a[0]):d):d};function dy(a,d,p){cy(a,d),p.length>0&&(a.i=null,a.g.set(Fi(a,d),C(p)),a.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(let v=0;v<d.length;v++){var p=d[v];let T=Qo(p);p=uy(this,p);for(let N=0;N<p.length;N++){let $=T;p[N]!==""&&($+="="+Qo(p[N])),a.push($)}}return this.i=a.join("&")};function hy(a){let d=new ts;return d.i=a.i,a.g&&(d.g=new Map(a.g),d.h=a.h),d}function Fi(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function WI(a,d){d&&!a.j&&(Zr(a),a.i=null,a.g.forEach(function(p,v){let T=v.toLowerCase();v!=T&&(cy(this,v),dy(this,T,p))},a)),a.j=d}function KI(a,d){let p=new Ko;if(s.Image){let v=new Image;v.onload=m(Ir,p,"TestLoadImage: loaded",!0,d,v),v.onerror=m(Ir,p,"TestLoadImage: error",!1,d,v),v.onabort=m(Ir,p,"TestLoadImage: abort",!1,d,v),v.ontimeout=m(Ir,p,"TestLoadImage: timeout",!1,d,v),s.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else d(!1)}function QI(a,d){let p=new Ko,v=new AbortController,T=setTimeout(()=>{v.abort(),Ir(p,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:v.signal}).then(N=>{clearTimeout(T),N.ok?Ir(p,"TestPingServer: ok",!0,d):Ir(p,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(T),Ir(p,"TestPingServer: error",!1,d)})}function Ir(a,d,p,v,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),v(p)}catch{}}function YI(){this.g=new NI}function xa(a){this.i=a.Sb||null,this.h=a.ab||!1}g(xa,$g),xa.prototype.g=function(){return new Sa(this.i,this.h)};function Sa(a,d){_t.call(this),this.H=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(Sa,_t),n=Sa.prototype,n.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=d,this.readyState=1,rs(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(d.body=a),(this.H||s).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ns(this)),this.readyState=0},n.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,rs(this)),this.g&&(this.readyState=3,rs(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;fy(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function fy(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}n.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?ns(this):rs(this),this.readyState==3&&fy(this)}},n.Oa=function(a){this.g&&(this.response=this.responseText=a,ns(this))},n.Na=function(a){this.g&&(this.response=a,ns(this))},n.ga=function(){this.g&&ns(this)};function ns(a){a.readyState=4,a.l=null,a.j=null,a.B=null,rs(a)}n.setRequestHeader=function(a,d){this.A.append(a,d)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var p=d.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=d.next();return a.join(`\r
`)};function rs(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Sa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function py(a){let d="";return _a(a,function(p,v){d+=v,d+=":",d+=p,d+=`\r
`}),d}function td(a,d,p){e:{for(v in p){var v=!1;break e}v=!0}v||(p=py(p),typeof a=="string"?p!=null&&Qo(p):Le(a,d,p))}function Ge(a){_t.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(Ge,_t);var JI=/^https?$/i,XI=["POST","PUT"];n=Ge.prototype,n.Fa=function(a){this.H=a},n.ea=function(a,d,p,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Qg.g(),this.g.onreadystatechange=b(u(this.Ca,this));try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(N){my(this,N);return}if(a=p||"",p=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var T in v)p.set(T,v[T]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(let N of v.keys())p.set(N,v.get(N));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(p.keys()).find(N=>N.toLowerCase()=="content-type"),T=s.FormData&&a instanceof s.FormData,!(Array.prototype.indexOf.call(XI,d,void 0)>=0)||v||T||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[N,$]of p)this.g.setRequestHeader(N,$);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(N){my(this,N)}};function my(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.o=5,gy(a),Ta(a)}function gy(a){a.A||(a.A=!0,Dt(a,"complete"),Dt(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,Dt(this,"complete"),Dt(this,"abort"),Ta(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ta(this,!0)),Ge.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?yy(this):this.Xa())},n.Xa=function(){yy(this)};function yy(a){if(a.h&&typeof o<"u"){if(a.v&&Dr(a)==4)setTimeout(a.Ca.bind(a),0);else if(Dt(a,"readystatechange"),Dr(a)==4){a.h=!1;try{let N=a.ca();e:switch(N){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var p;if(!(p=d)){var v;if(v=N===0){let $=String(a.D).match(sy)[1]||null;!$&&s.self&&s.self.location&&($=s.self.location.protocol.slice(0,-1)),v=!JI.test($?$.toLowerCase():"")}p=v}if(p)Dt(a,"complete"),Dt(a,"success");else{a.o=6;try{var T=Dr(a)>2?a.g.statusText:""}catch{T=""}a.l=T+" ["+a.ca()+"]",gy(a)}}finally{Ta(a)}}}}function Ta(a,d){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);let p=a.g;a.g=null,d||Dt(a,"ready");try{p.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Dr(a){return a.g?a.g.readyState:0}n.ca=function(){try{return Dr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),PI(d)}};function vy(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function ZI(a){let d={};a=(a.g&&Dr(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(E(a[v]))continue;var p=VI(a[v]);let T=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let N=d[T]||[];d[T]=N,N.push(p)}xI(d,function(v){return v.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function is(a,d,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||d}function _y(a){this.za=0,this.i=[],this.j=new Ko,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=is("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=is("baseRetryDelayMs",5e3,a),this.Za=is("retryDelaySeedMs",1e4,a),this.Ta=is("forwardChannelMaxRetries",2,a),this.va=is("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new ty(a&&a.concurrentRequestLimit),this.Ba=new YI,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=_y.prototype,n.ka=8,n.I=1,n.connect=function(a,d,p,v){xt(0),this.W=a,this.H=d||{},p&&v!==void 0&&(this.H.OSID=p,this.H.OAID=v),this.F=this.X,this.J=Ty(this,null,this.W),Aa(this)};function nd(a){if(by(a),a.I==3){var d=a.V++,p=Cn(a.J);if(Le(p,"SID",a.M),Le(p,"RID",d),Le(p,"TYPE","terminate"),os(a,p),d=new Cr(a,a.j,d),d.M=2,d.A=Da(Cn(p)),p=!1,s.navigator&&s.navigator.sendBeacon)try{p=s.navigator.sendBeacon(d.A.toString(),"")}catch{}!p&&s.Image&&(new Image().src=d.A,p=!0),p||(d.g=My(d.j,null),d.g.ea(d.A)),d.F=Date.now(),Ia(d)}Sy(a)}function Ma(a){a.g&&(id(a),a.g.cancel(),a.g=null)}function by(a){Ma(a),a.v&&(s.clearTimeout(a.v),a.v=null),Pa(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&s.clearTimeout(a.m),a.m=null)}function Aa(a){if(!ny(a.h)&&!a.m){a.m=!0;var d=a.Ea;ke||w(),De||(ke(),De=!0),x.add(d,a),a.D=0}}function eD(a,d){return ry(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=d.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=Wo(u(a.Ea,a,d),xy(a,a.D)),a.D++,!0)}n.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;let T=new Cr(this,this.j,a),N=this.o;if(this.U&&(N?(N=Pg(N),Og(N,this.U)):N=this.U),this.u!==null||this.R||(T.J=N,N=null),this.S)e:{for(var d=0,p=0;p<this.i.length;p++){t:{var v=this.i[p];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(d+=v,d>4096){d=p;break e}if(d===4096||p===this.i.length-1){d=p+1;break e}}d=1e3}else d=1e3;d=Cy(this,T,d),p=Cn(this.J),Le(p,"RID",a),Le(p,"CVER",22),this.G&&Le(p,"X-HTTP-Session-Id",this.G),os(this,p),N&&(this.R?d="headers="+Qo(py(N))+"&"+d:this.u&&td(p,this.u,N)),Zu(this.h,T),this.Ra&&Le(p,"TYPE","init"),this.S?(Le(p,"$req",d),Le(p,"SID","null"),T.U=!0,Qu(T,p,null)):Qu(T,p,d),this.I=2}}else this.I==3&&(a?wy(this,a):this.i.length==0||ny(this.h)||wy(this))};function wy(a,d){var p;d?p=d.l:p=a.V++;let v=Cn(a.J);Le(v,"SID",a.M),Le(v,"RID",p),Le(v,"AID",a.K),os(a,v),a.u&&a.o&&td(v,a.u,a.o),p=new Cr(a,a.j,p,a.D+1),a.u===null&&(p.J=a.o),d&&(a.i=d.G.concat(a.i)),d=Cy(a,p,1e3),p.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),Zu(a.h,p),Qu(p,v,d)}function os(a,d){a.H&&_a(a.H,function(p,v){Le(d,v,p)}),a.l&&_a({},function(p,v){Le(d,v,p)})}function Cy(a,d,p){p=Math.min(a.i.length,p);let v=a.l?u(a.l.Ka,a.l,a):null;e:{var T=a.i;let le=-1;for(;;){let ot=["count="+p];le==-1?p>0?(le=T[0].g,ot.push("ofs="+le)):le=0:ot.push("ofs="+le);let Oe=!0;for(let ct=0;ct<p;ct++){var N=T[ct].g;let En=T[ct].map;if(N-=le,N<0)le=Math.max(0,T[ct].g-100),Oe=!1;else try{N="req"+N+"_"||"";try{var $=En instanceof Map?En:Object.entries(En);for(let[ti,xr]of $){let Sr=xr;c(xr)&&(Sr=Hu(xr)),ot.push(N+ti+"="+encodeURIComponent(Sr))}}catch(ti){throw ot.push(N+"type="+encodeURIComponent("_badmap")),ti}}catch{v&&v(En)}}if(Oe){$=ot.join("&");break e}}$=void 0}return a=a.i.splice(0,p),d.G=a,$}function Ey(a){if(!a.g&&!a.v){a.Y=1;var d=a.Da;ke||w(),De||(ke(),De=!0),x.add(d,a),a.A=0}}function rd(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=Wo(u(a.Da,a),xy(a,a.A)),a.A++,!0)}n.Da=function(){if(this.v=null,Iy(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=Wo(u(this.Wa,this),a)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xt(10),Ma(this),Iy(this))};function id(a){a.B!=null&&(s.clearTimeout(a.B),a.B=null)}function Iy(a){a.g=new Cr(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var d=Cn(a.na);Le(d,"RID","rpc"),Le(d,"SID",a.M),Le(d,"AID",a.K),Le(d,"CI",a.F?"0":"1"),!a.F&&a.ia&&Le(d,"TO",a.ia),Le(d,"TYPE","xmlhttp"),os(a,d),a.u&&a.o&&td(d,a.u,a.o),a.O&&(a.g.H=a.O);var p=a.g;a=a.ba,p.M=1,p.A=Da(Cn(d)),p.u=null,p.R=!0,Xg(p,a)}n.Va=function(){this.C!=null&&(this.C=null,Ma(this),rd(this),xt(19))};function Pa(a){a.C!=null&&(s.clearTimeout(a.C),a.C=null)}function Dy(a,d){var p=null;if(a.g==d){Pa(a),id(a),a.g=null;var v=2}else if(Xu(a.h,d))p=d.G,iy(a.h,d),v=1;else return;if(a.I!=0){if(d.o)if(v==1){p=d.u?d.u.length:0,d=Date.now()-d.F;var T=a.D;v=Ca(),Dt(v,new Wg(v,p)),Aa(a)}else Ey(a);else if(T=d.m,T==3||T==0&&d.X>0||!(v==1&&eD(a,d)||v==2&&rd(a)))switch(p&&p.length>0&&(d=a.h,d.i=d.i.concat(p)),T){case 1:ei(a,5);break;case 4:ei(a,10);break;case 3:ei(a,6);break;default:ei(a,2)}}}function xy(a,d){let p=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(p*=2),p*d}function ei(a,d){if(a.j.info("Error code "+d),d==2){var p=u(a.bb,a),v=a.Ua;let T=!v;v=new Er(v||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Jo(v,"https"),Da(v),T?KI(v.toString(),p):QI(v.toString(),p)}else xt(2);a.I=0,a.l&&a.l.pa(d),Sy(a),by(a)}n.bb=function(a){a?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function Sy(a){if(a.I=0,a.ja=[],a.l){let d=oy(a.h);(d.length!=0||a.i.length!=0)&&(O(a.ja,d),O(a.ja,a.i),a.h.i.length=0,C(a.i),a.i.length=0),a.l.oa()}}function Ty(a,d,p){var v=p instanceof Er?Cn(p):new Er(p);if(v.g!="")d&&(v.g=d+"."+v.g),Xo(v,v.u);else{var T=s.location;v=T.protocol,d=d?d+"."+T.hostname:T.hostname,T=+T.port;let N=new Er(null);v&&Jo(N,v),d&&(N.g=d),T&&Xo(N,T),p&&(N.h=p),v=N}return p=a.G,d=a.wa,p&&d&&Le(v,p,d),Le(v,"VER",a.ka),os(a,v),v}function My(a,d,p){if(d&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Aa&&!a.ma?new Ge(new xa({ab:p})):new Ge(a.ma),d.Fa(a.L),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ay(){}n=Ay.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Na(){}Na.prototype.g=function(a,d){return new Rt(a,d)};function Rt(a,d){_t.call(this),this.g=new _y(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(a?a["X-WebChannel-Client-Profile"]=d.sa:a={"X-WebChannel-Client-Profile":d.sa}),this.g.U=a,(a=d&&d.Qb)&&!E(a)&&(this.g.u=a),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!E(d)&&(this.g.G=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new Vi(this)}g(Rt,_t),Rt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Rt.prototype.close=function(){nd(this.g)},Rt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.v&&(p={},p.__data__=Hu(a),a=p);d.i.push(new BI(d.Ya++,a)),d.I==3&&Aa(d)},Rt.prototype.N=function(){this.g.l=null,delete this.j,nd(this.g),delete this.g,Rt.Z.N.call(this)};function Py(a){qu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let p in d){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}g(Py,qu);function Ny(){Gu.call(this),this.status=1}g(Ny,Gu);function Vi(a){this.g=a}g(Vi,Ay),Vi.prototype.ra=function(){Dt(this.g,"a")},Vi.prototype.qa=function(a){Dt(this.g,new Py(a))},Vi.prototype.pa=function(a){Dt(this.g,new Ny)},Vi.prototype.oa=function(){Dt(this.g,"b")},Na.prototype.createWebChannel=Na.prototype.g,Rt.prototype.send=Rt.prototype.o,Rt.prototype.open=Rt.prototype.m,Rt.prototype.close=Rt.prototype.close,gp=fr.createWebChannelTransport=function(){return new Na},mp=fr.getStatEventTarget=function(){return Ca()},pp=fr.Event=Jr,Ol=fr.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ea.NO_ERROR=0,Ea.TIMEOUT=8,Ea.HTTP_ERROR=6,Ks=fr.ErrorCode=Ea,Kg.COMPLETE="complete",fp=fr.EventType=Kg,zg.EventType=qo,qo.OPEN="a",qo.CLOSE="b",qo.ERROR="c",qo.MESSAGE="d",_t.prototype.listen=_t.prototype.J,vo=fr.WebChannel=zg,TR=fr.FetchXmlHttpFactory=xa,Ge.prototype.listenOnce=Ge.prototype.K,Ge.prototype.getLastError=Ge.prototype.Ha,Ge.prototype.getLastErrorCode=Ge.prototype.ya,Ge.prototype.getStatus=Ge.prototype.ca,Ge.prototype.getResponseJson=Ge.prototype.La,Ge.prototype.getResponseText=Ge.prototype.la,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Fa,hp=fr.XhrIo=Ge}).apply(typeof Nl<"u"?Nl:typeof self<"u"?self:typeof window<"u"?window:{});var Zw="@firebase/firestore",eC="4.9.2";var pt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");var Bo="12.3.0";var Si=new yo("@firebase/firestore");function _o(){return Si.logLevel}function K(n,...e){if(Si.logLevel<=we.DEBUG){let t=e.map(ag);Si.debug(`Firestore (${Bo}): ${n}`,...t)}}function mr(n,...e){if(Si.logLevel<=we.ERROR){let t=e.map(ag);Si.error(`Firestore (${Bo}): ${n}`,...t)}}function So(n,...e){if(Si.logLevel<=we.WARN){let t=e.map(ag);Si.warn(`Firestore (${Bo}): ${n}`,...t)}}function ag(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function ne(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,qC(n,r,t)}function qC(n,e,t){let r=`FIRESTORE (${Bo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw mr(r),new Error(r)}function Pe(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||qC(e,i,r)}function ae(n,e){return n}var F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},H=class extends lr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var pr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Bl=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Cp=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(pt.UNAUTHENTICATED))}shutdown(){}},Ep=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Ip=class{constructor(e){this.t=e,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Pe(this.o===void 0,42304);let r=this.i,i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve(),o=new pr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new pr,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let l=o;e.enqueueRetryable(()=>j(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},c=l=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new pr)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pe(typeof r.accessToken=="string",31837,{l:r}),new Bl(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Pe(e===null||typeof e=="string",2055,{h:e}),new pt(e)}},Dp=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},xp=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Dp(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Ul=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Sp=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Gw(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Pe(this.o===void 0,3512);let r=o=>{o.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,K("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ul(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Pe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Ul(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function MR(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var ea=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=MR(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function ye(n,e){return n<e?-1:n>e?1:0}function Tp(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),o=e.charAt(r);if(i!==o)return yp(i)===yp(o)?ye(i,o):yp(i)?1:-1}return ye(n.length,e.length)}var AR=55296,PR=57343;function yp(n){let e=n.charCodeAt(0);return e>=AR&&e<=PR}function To(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var tC="__name__",$l=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ne(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ne(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return ye(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):Tp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return hr.fromString(e.substring(4,e.length-2))}},qe=class n extends $l{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new H(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},NR=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Gt=class n extends $l{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return NR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===tC}static keyField(){return new n([tC])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new H(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new H(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new H(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(r+=c,i++):(o(),i++)}if(o(),s)throw new H(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ee=class n{constructor(e){this.path=e}static fromPath(e){return new n(qe.fromString(e))}static fromName(e){return new n(qe.fromString(e).popFirst(5))}static empty(){return new n(qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return qe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new qe(e.slice()))}};function GC(n,e,t){if(!t)throw new H(F.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function OR(n,e,t,r){if(e===!0&&r===!0)throw new H(F.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function nC(n){if(!ee.isDocumentKey(n))throw new H(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function rC(n){if(ee.isDocumentKey(n))throw new H(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function WC(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function bu(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ne(12329,{type:typeof n})}function Vn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new H(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=bu(n);throw new H(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function RR(n,e){if(e<=0)throw new H(F.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function rt(n,e){let t={typeString:n};return e&&(t.value=e),t}function fa(n,e){if(!WC(n))throw new H(F.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new H(F.INVALID_ARGUMENT,t);return!0}var iC=-62135596800,oC=1e6,it=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*oC);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new H(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new H(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<iC)throw new H(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/oC}_compareTo(e){return this.seconds===e.seconds?ye(this.nanoseconds,e.nanoseconds):ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(fa(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-iC;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};it._jsonSchemaVersion="firestore/timestamp/1.0",it._jsonSchema={type:rt("string",it._jsonSchemaVersion),seconds:rt("number"),nanoseconds:rt("number")};var ce=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new it(0,0))}static max(){return new n(new it(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ta=-1,Mp=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Mp.UNKNOWN_ID=-1;function kR(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ce.fromTimestamp(r===1e9?new it(t+1,0):new it(t,r));return new Ti(i,ee.empty(),e)}function FR(n){return new Ti(n.readTime,n.key,ta)}var Ti=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ce.min(),ee.empty(),ta)}static max(){return new n(ce.max(),ee.empty(),ta)}};function VR(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ee.comparator(n.documentKey,e.documentKey),t!==0?t:ye(n.largestBatchId,e.largestBatchId))}var LR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ap=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Uo(n){return j(this,null,function*(){if(n.code!==F.FAILED_PRECONDITION||n.message!==LR)throw n;K("LocalStore","Unexpectedly lost primary lease")})}var B=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(c=>{++i,c.next(()=>{++o,s&&o===i&&t()},l=>r(l))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),c=0;for(let l=0;l<o;l++){let u=l;t(e[u]).next(m=>{s[u]=m,++c,c===o&&r(s)},m=>i(m))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function jR(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function $o(n){return n.name==="IndexedDbTransactionError"}var cg=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),lg=-1;function wu(n){return n==null}function na(n){return n===0&&1/n==-1/0}function BR(n){return typeof n=="number"&&Number.isInteger(n)&&!na(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var KC="";function UR(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=sC(e)),e=$R(n.get(t),e);return sC(e)}function $R(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case KC:t+="";break;default:t+=o}}return t}function sC(n){return n+KC+""}var zR="remoteDocuments",QC="owner";var YC="mutationQueues";var JC="mutations";var XC="documentMutations",HR="remoteDocumentsV14";var ZC="remoteDocumentGlobal";var eE="targets";var tE="targetDocuments";var nE="targetGlobal",rE="collectionParents";var iE="clientMetadata";var oE="bundles";var sE="namedQueries";var qR="indexConfiguration";var GR="indexState";var WR="indexEntries";var aE="documentOverlays";var KR="globals";var QR=[YC,JC,XC,zR,eE,QC,nE,tE,iE,ZC,rE,oE,sE],m6=[...QR,aE],YR=[YC,JC,XC,HR,eE,QC,nE,tE,iE,ZC,rE,oE,sE,aE],JR=YR,XR=[...JR,qR,GR,WR];var g6=[...XR,KR];function aC(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Kr(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function cE(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ye=class n{constructor(e,t){this.comparator=e,this.root=t||Ln.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ln.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ln.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Eo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Eo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Eo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Eo(this.root,e,this.comparator,!0)}},Eo=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ln=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ne(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw ne(27949);return e+(this.isRed()?0:1)}};Ln.EMPTY=null,Ln.RED=!0,Ln.BLACK=!1;Ln.EMPTY=new class{constructor(){this.size=0}get key(){throw ne(57766)}get value(){throw ne(16141)}get color(){throw ne(16727)}get left(){throw ne(29726)}get right(){throw ne(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Ln(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var mt=class n{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new zl(this.data.getIterator())}getIteratorFrom(e){return new zl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},zl=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var an=class n{constructor(e){this.fields=e,e.sort(Gt.comparator)}static empty(){return new n([])}unionWith(e){let t=new mt(Gt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return To(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Hl=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var It=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Hl("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};It.EMPTY_BYTE_STRING=new It("");var ZR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gr(n){if(Pe(!!n,39018),typeof n=="string"){let e=0,t=ZR.exec(n);if(Pe(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:He(n.seconds),nanos:He(n.nanos)}}function He(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function yr(n){return typeof n=="string"?It.fromBase64String(n):It.fromUint8Array(n)}var lE="server_timestamp",uE="__type__",dE="__previous_value__",hE="__local_write_time__";function ug(n){return(n?.mapValue?.fields||{})[uE]?.stringValue===lE}function Cu(n){let e=n.mapValue.fields[dE];return ug(e)?Cu(e):e}function ra(n){let e=gr(n.mapValue.fields[hE].timestampValue);return new it(e.seconds,e.nanos)}var Pp=class{constructor(e,t,r,i,o,s,c,l,u,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=m}},ql="(default)",Gl=class n{constructor(e,t){this.projectId=e,this.database=t||ql}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===ql}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var dg="__type__",fE="__max__",Rl={mapValue:{fields:{__type__:{stringValue:fE}}}},hg="__vector__",Mo="value";function zr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ug(n)?4:mE(n)?9007199254740991:pE(n)?10:11:ne(28295,{value:n})}function $n(n,e){if(n===e)return!0;let t=zr(n);if(t!==zr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ra(n).isEqual(ra(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=gr(i.timestampValue),c=gr(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return yr(i.bytesValue).isEqual(yr(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return He(i.geoPointValue.latitude)===He(o.geoPointValue.latitude)&&He(i.geoPointValue.longitude)===He(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return He(i.integerValue)===He(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=He(i.doubleValue),c=He(o.doubleValue);return s===c?na(s)===na(c):isNaN(s)&&isNaN(c)}return!1}(n,e);case 9:return To(n.arrayValue.values||[],e.arrayValue.values||[],$n);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},c=o.mapValue.fields||{};if(aC(s)!==aC(c))return!1;for(let l in s)if(s.hasOwnProperty(l)&&(c[l]===void 0||!$n(s[l],c[l])))return!1;return!0}(n,e);default:return ne(52216,{left:n})}}function ia(n,e){return(n.values||[]).find(t=>$n(t,e))!==void 0}function Ao(n,e){if(n===e)return 0;let t=zr(n),r=zr(e);if(t!==r)return ye(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ye(n.booleanValue,e.booleanValue);case 2:return function(o,s){let c=He(o.integerValue||o.doubleValue),l=He(s.integerValue||s.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(n,e);case 3:return cC(n.timestampValue,e.timestampValue);case 4:return cC(ra(n),ra(e));case 5:return Tp(n.stringValue,e.stringValue);case 6:return function(o,s){let c=yr(o),l=yr(s);return c.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let c=o.split("/"),l=s.split("/");for(let u=0;u<c.length&&u<l.length;u++){let m=ye(c[u],l[u]);if(m!==0)return m}return ye(c.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let c=ye(He(o.latitude),He(s.latitude));return c!==0?c:ye(He(o.longitude),He(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return lC(n.arrayValue,e.arrayValue);case 10:return function(o,s){let c=o.fields||{},l=s.fields||{},u=c[Mo]?.arrayValue,m=l[Mo]?.arrayValue,g=ye(u?.values?.length||0,m?.values?.length||0);return g!==0?g:lC(u,m)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Rl.mapValue&&s===Rl.mapValue)return 0;if(o===Rl.mapValue)return 1;if(s===Rl.mapValue)return-1;let c=o.fields||{},l=Object.keys(c),u=s.fields||{},m=Object.keys(u);l.sort(),m.sort();for(let g=0;g<l.length&&g<m.length;++g){let b=Tp(l[g],m[g]);if(b!==0)return b;let C=Ao(c[l[g]],u[m[g]]);if(C!==0)return C}return ye(l.length,m.length)}(n.mapValue,e.mapValue);default:throw ne(23264,{he:t})}}function cC(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ye(n,e);let t=gr(n),r=gr(e),i=ye(t.seconds,r.seconds);return i!==0?i:ye(t.nanos,r.nanos)}function lC(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Ao(t[i],r[i]);if(o)return o}return ye(t.length,r.length)}function Po(n){return Np(n)}function Np(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=gr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return yr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ee.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Np(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Np(t.fields[s])}`;return i+"}"}(n.mapValue):ne(61005,{value:n})}function Vl(n){switch(zr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Cu(n);return e?16+Vl(e):16;case 5:return 2*n.stringValue.length;case 6:return yr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Vl(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Kr(r.fields,(o,s)=>{i+=o.length+Vl(s)}),i}(n.mapValue);default:throw ne(13486,{value:n})}}function uC(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Op(n){return!!n&&"integerValue"in n}function fg(n){return!!n&&"arrayValue"in n}function dC(n){return!!n&&"nullValue"in n}function hC(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ll(n){return!!n&&"mapValue"in n}function pE(n){return(n?.mapValue?.fields||{})[dg]?.stringValue===hg}function Ys(n){if(n.geoPointValue)return{geoPointValue:J({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:J({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Kr(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ys(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ys(n.arrayValue.values[t]);return e}return J({},n)}function mE(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===fE}var v6={mapValue:{fields:{[dg]:{stringValue:hg},[Mo]:{arrayValue:{}}}}};var qt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ll(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ys(t)}setAll(e){let t=Gt.emptyPath(),r={},i=[];e.forEach((s,c)=>{if(!t.isImmediateParentOf(c)){let l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=c.popLast()}s?r[c.lastSegment()]=Ys(s):i.push(c.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Ll(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $n(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ll(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Kr(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Ys(this.value))}};function gE(n){let e=[];return Kr(n.fields,(t,r)=>{let i=new Gt([t]);if(Ll(r)){let o=gE(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new an(e)}var bn=class n{constructor(e,t,r,i,o,s,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new n(e,0,ce.min(),ce.min(),ce.min(),qt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ce.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ce.min(),ce.min(),qt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ce.min(),ce.min(),qt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var No=class{constructor(e,t){this.position=e,this.inclusive=t}};function fC(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=ee.comparator(ee.fromName(s.referenceValue),t.key):r=Ao(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function pC(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!$n(n.position[t],e.position[t]))return!1;return!0}var Mi=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function e2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Wl=class{},nt=class n extends Wl{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new kp(e,t,r):t==="array-contains"?new Lp(e,r):t==="in"?new jp(e,r):t==="not-in"?new Bp(e,r):t==="array-contains-any"?new Up(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Fp(e,r):new Vp(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ao(t,this.value)):t!==null&&zr(this.value)===zr(t)&&this.matchesComparison(Ao(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},wn=class n extends Wl{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return yE(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function yE(n){return n.op==="and"}function vE(n){return t2(n)&&yE(n)}function t2(n){for(let e of n.filters)if(e instanceof wn)return!1;return!0}function Rp(n){if(n instanceof nt)return n.field.canonicalString()+n.op.toString()+Po(n.value);if(vE(n))return n.filters.map(e=>Rp(e)).join(",");{let e=n.filters.map(t=>Rp(t)).join(",");return`${n.op}(${e})`}}function _E(n,e){return n instanceof nt?function(r,i){return i instanceof nt&&r.op===i.op&&r.field.isEqual(i.field)&&$n(r.value,i.value)}(n,e):n instanceof wn?function(r,i){return i instanceof wn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,c)=>o&&_E(s,i.filters[c]),!0):!1}(n,e):void ne(19439)}function bE(n){return n instanceof nt?function(t){return`${t.field.canonicalString()} ${t.op} ${Po(t.value)}`}(n):n instanceof wn?function(t){return t.op.toString()+" {"+t.getFilters().map(bE).join(" ,")+"}"}(n):"Filter"}var kp=class extends nt{constructor(e,t,r){super(e,t,r),this.key=ee.fromName(r.referenceValue)}matches(e){let t=ee.comparator(e.key,this.key);return this.matchesComparison(t)}},Fp=class extends nt{constructor(e,t){super(e,"in",t),this.keys=wE("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Vp=class extends nt{constructor(e,t){super(e,"not-in",t),this.keys=wE("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function wE(n,e){return(e.arrayValue?.values||[]).map(t=>ee.fromName(t.referenceValue))}var Lp=class extends nt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return fg(t)&&ia(t.arrayValue,this.value)}},jp=class extends nt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&ia(this.value.arrayValue,t)}},Bp=class extends nt{constructor(e,t){super(e,"not-in",t)}matches(e){if(ia(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ia(this.value.arrayValue,t)}},Up=class extends nt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!fg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ia(this.value.arrayValue,r))}};var $p=class{constructor(e,t=null,r=[],i=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=c,this.Te=null}};function mC(n,e=null,t=[],r=[],i=null,o=null,s=null){return new $p(n,e,t,r,i,o,s)}function pg(n){let e=ae(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Rp(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),wu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Po(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Po(r)).join(",")),e.Te=t}return e.Te}function mg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!e2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!_E(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!pC(n.startAt,e.startAt)&&pC(n.endAt,e.endAt)}function zp(n){return ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Hr=class{constructor(e,t=null,r=[],i=[],o=null,s="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function n2(n,e,t,r,i,o,s,c){return new Hr(n,e,t,r,i,o,s,c)}function gg(n){return new Hr(n)}function gC(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function CE(n){return n.collectionGroup!==null}function Js(n){let e=ae(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new mt(Gt.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(c=c.add(u.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Mi(o,r))}),t.has(Gt.keyField().canonicalString())||e.Ie.push(new Mi(Gt.keyField(),r))}return e.Ie}function jn(n){let e=ae(n);return e.Ee||(e.Ee=r2(e,Js(n))),e.Ee}function r2(n,e){if(n.limitType==="F")return mC(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Mi(i.field,o)});let t=n.endAt?new No(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new No(n.startAt.position,n.startAt.inclusive):null;return mC(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Hp(n,e){let t=n.filters.concat([e]);return new Hr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Kl(n,e,t){return new Hr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Eu(n,e){return mg(jn(n),jn(e))&&n.limitType===e.limitType}function EE(n){return`${pg(jn(n))}|lt:${n.limitType}`}function bo(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>bE(i)).join(", ")}]`),wu(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Po(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Po(i)).join(",")),`Target(${r})`}(jn(n))}; limitType=${n.limitType})`}function Iu(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ee.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Js(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,c,l){let u=fC(s,c,l);return s.inclusive?u<=0:u<0}(r.startAt,Js(r),i)||r.endAt&&!function(s,c,l){let u=fC(s,c,l);return s.inclusive?u>=0:u>0}(r.endAt,Js(r),i))}(n,e)}function i2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function IE(n){return(e,t)=>{let r=!1;for(let i of Js(n)){let o=o2(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function o2(n,e,t){let r=n.field.isKeyField()?ee.comparator(e.key,t.key):function(o,s,c){let l=s.data.field(o),u=c.data.field(o);return l!==null&&u!==null?Ao(l,u):ne(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ne(19790,{direction:n.dir})}}var vr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Kr(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return cE(this.inner)}size(){return this.innerSize}};var s2=new Ye(ee.comparator);function _r(){return s2}var DE=new Ye(ee.comparator);function Qs(...n){let e=DE;for(let t of n)e=e.insert(t.key,t);return e}function xE(n){let e=DE;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ei(){return Xs()}function SE(){return Xs()}function Xs(){return new vr(n=>n.toString(),(n,e)=>n.isEqual(e))}var a2=new Ye(ee.comparator),c2=new mt(ee.comparator);function ve(...n){let e=c2;for(let t of n)e=e.add(t);return e}var l2=new mt(ye);function u2(){return l2}function yg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:na(e)?"-0":e}}function TE(n){return{integerValue:""+n}}function d2(n,e){return BR(e)?TE(e):yg(n,e)}var Oo=class{constructor(){this._=void 0}};function h2(n,e,t){return n instanceof Ro?function(i,o){let s={fields:{[uE]:{stringValue:lE},[hE]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&ug(o)&&(o=Cu(o)),o&&(s.fields[dE]=o),{mapValue:s}}(t,e):n instanceof Ai?AE(n,e):n instanceof Pi?PE(n,e):function(i,o){let s=ME(i,o),c=yC(s)+yC(i.Ae);return Op(s)&&Op(i.Ae)?TE(c):yg(i.serializer,c)}(n,e)}function f2(n,e,t){return n instanceof Ai?AE(n,e):n instanceof Pi?PE(n,e):t}function ME(n,e){return n instanceof ko?function(r){return Op(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Ro=class extends Oo{},Ai=class extends Oo{constructor(e){super(),this.elements=e}};function AE(n,e){let t=NE(e);for(let r of n.elements)t.some(i=>$n(i,r))||t.push(r);return{arrayValue:{values:t}}}var Pi=class extends Oo{constructor(e){super(),this.elements=e}};function PE(n,e){let t=NE(e);for(let r of n.elements)t=t.filter(i=>!$n(i,r));return{arrayValue:{values:t}}}var ko=class extends Oo{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function yC(n){return He(n.integerValue||n.doubleValue)}function NE(n){return fg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function p2(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Ai&&i instanceof Ai||r instanceof Pi&&i instanceof Pi?To(r.elements,i.elements,$n):r instanceof ko&&i instanceof ko?$n(r.Ae,i.Ae):r instanceof Ro&&i instanceof Ro}(n.transform,e.transform)}var qp=class{constructor(e,t){this.version=e,this.transformResults=t}},Bn=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function jl(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Fo=class{};function OE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new oa(n.key,Bn.none()):new Ni(n.key,n.data,Bn.none());{let t=n.data,r=qt.empty(),i=new mt(Gt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new zn(n.key,r,new an(i.toArray()),Bn.none())}}function m2(n,e,t){n instanceof Ni?function(i,o,s){let c=i.value.clone(),l=_C(i.fieldTransforms,o,s.transformResults);c.setAll(l),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):n instanceof zn?function(i,o,s){if(!jl(i.precondition,o))return void o.convertToUnknownDocument(s.version);let c=_C(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(RE(i)),l.setAll(c),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Zs(n,e,t,r){return n instanceof Ni?function(o,s,c,l){if(!jl(o.precondition,s))return c;let u=o.value.clone(),m=bC(o.fieldTransforms,l,s);return u.setAll(m),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof zn?function(o,s,c,l){if(!jl(o.precondition,s))return c;let u=bC(o.fieldTransforms,l,s),m=s.data;return m.setAll(RE(o)),m.setAll(u),s.convertToFoundDocument(s.version,m).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(o,s,c){return jl(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c}(n,e,t)}function g2(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=ME(r.transform,i||null);o!=null&&(t===null&&(t=qt.empty()),t.set(r.field,o))}return t||null}function vC(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&To(r,i,(o,s)=>p2(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Ni=class extends Fo{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},zn=class extends Fo{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function RE(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function _C(n,e,t){let r=new Map;Pe(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,c=e.data.field(o.field);r.set(o.field,f2(s,c,t[i]))}return r}function bC(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,h2(o,s,e))}return r}var oa=class extends Fo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Gp=class extends Fo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Wp=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&m2(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Zs(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Zs(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=SE();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=t.has(i.key)?null:c;let l=OE(s,c);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(ce.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ve())}isEqual(e){return this.batchId===e.batchId&&To(this.mutations,e.mutations,(t,r)=>vC(t,r))&&To(this.baseMutations,e.baseMutations,(t,r)=>vC(t,r))}},Kp=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Pe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return a2}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Qp=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Yp=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var et,Ce;function y2(n){switch(n){case F.OK:return ne(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return ne(15467,{code:n})}}function kE(n){if(n===void 0)return mr("GRPC error has no .code"),F.UNKNOWN;switch(n){case et.OK:return F.OK;case et.CANCELLED:return F.CANCELLED;case et.UNKNOWN:return F.UNKNOWN;case et.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case et.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case et.INTERNAL:return F.INTERNAL;case et.UNAVAILABLE:return F.UNAVAILABLE;case et.UNAUTHENTICATED:return F.UNAUTHENTICATED;case et.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case et.NOT_FOUND:return F.NOT_FOUND;case et.ALREADY_EXISTS:return F.ALREADY_EXISTS;case et.PERMISSION_DENIED:return F.PERMISSION_DENIED;case et.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case et.ABORTED:return F.ABORTED;case et.OUT_OF_RANGE:return F.OUT_OF_RANGE;case et.UNIMPLEMENTED:return F.UNIMPLEMENTED;case et.DATA_LOSS:return F.DATA_LOSS;default:return ne(39323,{code:n})}}(Ce=et||(et={}))[Ce.OK=0]="OK",Ce[Ce.CANCELLED=1]="CANCELLED",Ce[Ce.UNKNOWN=2]="UNKNOWN",Ce[Ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ce[Ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ce[Ce.NOT_FOUND=5]="NOT_FOUND",Ce[Ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ce[Ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ce[Ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ce[Ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ce[Ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ce[Ce.ABORTED=10]="ABORTED",Ce[Ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ce[Ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ce[Ce.INTERNAL=13]="INTERNAL",Ce[Ce.UNAVAILABLE=14]="UNAVAILABLE",Ce[Ce.DATA_LOSS=15]="DATA_LOSS";var v2=null;function _2(){return new TextEncoder}var b2=new hr([4294967295,4294967295],0);function wC(n){let e=_2().encode(n),t=new dp;return t.update(e),new Uint8Array(t.digest())}function CC(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new hr([t,r],0),new hr([i,o],0)]}var Jp=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ii(`Invalid padding: ${t}`);if(r<0)throw new Ii(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ii(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ii(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=hr.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(hr.fromNumber(r)));return i.compare(b2)===1&&(i=new hr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=wC(e),[r,i]=CC(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(c=>s.insert(c)),s}insert(e){if(this.ge===0)return;let t=wC(e),[r,i]=CC(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.Se(s)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Ii=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ql=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,sa.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ce.min(),i,new Ye(ye),_r(),ve())}},sa=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ve(),ve(),ve())}};var Io=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},Yl=class{constructor(e,t){this.targetId=e,this.Ce=t}},Jl=class{constructor(e,t,r=It.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Xl=class{constructor(){this.ve=0,this.Fe=EC(),this.Me=It.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ve(),t=ve(),r=ve();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ne(38017,{changeType:o})}}),new sa(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=EC()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Pe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},Xp=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=_r(),this.Je=kl(),this.He=kl(),this.Ye=new Ye(ye)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:ne(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let o=i.target;if(zp(o))if(r===0){let s=new ee(o.path);this.et(t,s,bn.newNoDocument(s,ce.min()))}else Pe(r===1,20013,{expectedCount:r});else{let s=this._t(t);if(s!==r){let c=this.ut(e),l=c?this.ct(c,e,s):1;if(l!==0){this.it(t);let u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,u)}v2?.lt(function(m,g,b,C,O){let R={localCacheCount:m,existenceFilterCount:g.count,databaseId:b.database,projectId:b.projectId},k=g.unchangedNames;return k&&(R.bloomFilter={applied:O===0,hashCount:k?.hashCount??0,bitmapLength:k?.bits?.bitmap?.length??0,padding:k?.bits?.padding??0,mightContain:q=>C?.mightContain(q)??!1}),R}(s,e.Ce,this.Ge.ht(),c,l))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,c;try{s=yr(r).toUint8Array()}catch(l){if(l instanceof Hl)return So("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new Jp(s,i,o)}catch(l){return So(l instanceof Ii?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Ge.ht(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.et(t,o,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((o,s)=>{let c=this.ot(s);if(c){if(o.current&&zp(c.target)){let l=new ee(c.target.path);this.It(l).has(s)||this.Et(s,l)||this.et(s,l,bn.newNoDocument(l,e))}o.Be&&(t.set(s,o.ke()),o.qe())}});let r=ve();this.He.forEach((o,s)=>{let c=!0;s.forEachWhile(l=>{let u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new Ql(e,t,this.Ye,this.je,r);return this.je=_r(),this.Je=kl(),this.He=kl(),this.Ye=new Ye(ye),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Xl,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new mt(ye),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new mt(ye),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||K("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Xl),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function kl(){return new Ye(ee.comparator)}function EC(){return new Ye(ee.comparator)}var w2={asc:"ASCENDING",desc:"DESCENDING"},C2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},E2={and:"AND",or:"OR"},Zp=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function em(n,e){return n.useProto3Json||wu(e)?e:{value:e}}function Zl(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function FE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function I2(n,e){return Zl(n,e.toTimestamp())}function Un(n){return Pe(!!n,49232),ce.fromTimestamp(function(t){let r=gr(t);return new it(r.seconds,r.nanos)}(n))}function vg(n,e){return tm(n,e).canonicalString()}function tm(n,e){let t=function(i){return new qe(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function VE(n){let e=qe.fromString(n);return Pe($E(e),10190,{key:e.toString()}),e}function nm(n,e){return vg(n.databaseId,e.path)}function vp(n,e){let t=VE(e);if(t.get(1)!==n.databaseId.projectId)throw new H(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new H(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ee(jE(t))}function LE(n,e){return vg(n.databaseId,e)}function D2(n){let e=VE(n);return e.length===4?qe.emptyPath():jE(e)}function rm(n){return new qe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function jE(n){return Pe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function IC(n,e,t){return{name:nm(n,e),fields:t.value.mapValue.fields}}function x2(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ne(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,m){return u.useProto3Json?(Pe(m===void 0||typeof m=="string",58123),It.fromBase64String(m||"")):(Pe(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),It.fromUint8Array(m||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&function(u){let m=u.code===void 0?F.UNKNOWN:kE(u.code);return new H(m,u.message||"")}(s);t=new Jl(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=vp(n,r.document.name),o=Un(r.document.updateTime),s=r.document.createTime?Un(r.document.createTime):ce.min(),c=new qt({mapValue:{fields:r.document.fields}}),l=bn.newFoundDocument(i,o,s,c),u=r.targetIds||[],m=r.removedTargetIds||[];t=new Io(u,m,l.key,l)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=vp(n,r.document),o=r.readTime?Un(r.readTime):ce.min(),s=bn.newNoDocument(i,o),c=r.removedTargetIds||[];t=new Io([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=vp(n,r.document),o=r.removedTargetIds||[];t=new Io([],o,i,null)}else{if(!("filter"in e))return ne(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Yp(i,o),c=r.targetId;t=new Yl(c,s)}}return t}function S2(n,e){let t;if(e instanceof Ni)t={update:IC(n,e.key,e.value)};else if(e instanceof oa)t={delete:nm(n,e.key)};else if(e instanceof zn)t={update:IC(n,e.key,e.data),updateMask:F2(e.fieldMask)};else{if(!(e instanceof Gp))return ne(16599,{Vt:e.type});t={verify:nm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let c=s.transform;if(c instanceof Ro)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ai)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Pi)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ko)return{fieldPath:s.field.canonicalString(),increment:c.Ae};throw ne(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:I2(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ne(27497)}(n,e.precondition)),t}function T2(n,e){return n&&n.length>0?(Pe(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?Un(i.updateTime):Un(o);return s.isEqual(ce.min())&&(s=Un(o)),new qp(s,i.transformResults||[])}(t,e))):[]}function M2(n,e){return{documents:[LE(n,e.path)]}}function A2(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=LE(n,i);let o=function(u){if(u.length!==0)return UE(wn.create(u,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(m=>function(b){return{field:wo(b.field),direction:O2(b.dir)}}(m))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let c=em(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:t,parent:i}}function P2(n){let e=D2(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Pe(r===1,65062);let m=t.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let o=[];t.where&&(o=function(g){let b=BE(g);return b instanceof wn&&vE(b)?b.getFilters():[b]}(t.where));let s=[];t.orderBy&&(s=function(g){return g.map(b=>function(O){return new Mi(Co(O.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction))}(b))}(t.orderBy));let c=null;t.limit&&(c=function(g){let b;return b=typeof g=="object"?g.value:g,wu(b)?null:b}(t.limit));let l=null;t.startAt&&(l=function(g){let b=!!g.before,C=g.values||[];return new No(C,b)}(t.startAt));let u=null;return t.endAt&&(u=function(g){let b=!g.before,C=g.values||[];return new No(C,b)}(t.endAt)),n2(e,i,s,o,c,"F",l,u)}function N2(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function BE(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Co(t.unaryFilter.field);return nt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Co(t.unaryFilter.field);return nt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Co(t.unaryFilter.field);return nt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Co(t.unaryFilter.field);return nt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ne(61313);default:return ne(60726)}}(n):n.fieldFilter!==void 0?function(t){return nt.create(Co(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ne(58110);default:return ne(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return wn.create(t.compositeFilter.filters.map(r=>BE(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ne(1026)}}(t.compositeFilter.op))}(n):ne(30097,{filter:n})}function O2(n){return w2[n]}function R2(n){return C2[n]}function k2(n){return E2[n]}function wo(n){return{fieldPath:n.canonicalString()}}function Co(n){return Gt.fromServerFormat(n.fieldPath)}function UE(n){return n instanceof nt?function(t){if(t.op==="=="){if(hC(t.value))return{unaryFilter:{field:wo(t.field),op:"IS_NAN"}};if(dC(t.value))return{unaryFilter:{field:wo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(hC(t.value))return{unaryFilter:{field:wo(t.field),op:"IS_NOT_NAN"}};if(dC(t.value))return{unaryFilter:{field:wo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wo(t.field),op:R2(t.op),value:t.value}}}(n):n instanceof wn?function(t){let r=t.getFilters().map(i=>UE(i));return r.length===1?r[0]:{compositeFilter:{op:k2(t.op),filters:r}}}(n):ne(54877,{filter:n})}function F2(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function $E(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var aa=class n{constructor(e,t,r,i,o=ce.min(),s=ce.min(),c=It.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var im=class{constructor(e){this.yt=e}};function V2(n){let e=P2({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Kl(e,e.limit,"L"):e}var eu=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(He(e.integerValue));else if("doubleValue"in e){let r=He(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),na(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=gr(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(yr(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?mE(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):pE(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):ne(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=Mo,o=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(He(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),ee.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};eu.Kt=new eu;var om=class{constructor(){this.Cn=new sm}addToCollectionParentIndex(e,t){return this.Cn.add(t),B.resolve()}getCollectionParents(e,t){return B.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return B.resolve()}deleteFieldIndex(e,t){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,t){return B.resolve()}getDocumentsMatchingTarget(e,t){return B.resolve(null)}getIndexType(e,t){return B.resolve(0)}getFieldIndexes(e,t){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,t){return B.resolve(Ti.min())}getMinOffsetFromCollectionGroup(e,t){return B.resolve(Ti.min())}updateCollectionGroup(e,t,r){return B.resolve()}updateIndexEntries(e,t){return B.resolve()}},sm=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new mt(qe.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new mt(qe.comparator)).toArray()}};var _6=new Uint8Array(0);var DC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zE=41943040,sn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};sn.DEFAULT_COLLECTION_PERCENTILE=10,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sn.DEFAULT=new sn(zE,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sn.DISABLED=new sn(-1,0,0);var ca=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var xC="LruGarbageCollector",L2=1048576;function SC([n,e],[t,r]){let i=ye(n,t);return i===0?ye(e,r):i}var am=class{constructor(e){this.Ir=e,this.buffer=new mt(SC),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();SC(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},cm=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){K(xC,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>j(this,null,function*(){this.Rr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){$o(t)?K(xC,"Ignoring IndexedDB error during garbage collection: ",t):yield Uo(t)}yield this.Vr(3e5)}))}},lm=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return B.resolve(cg.ce);let r=new am(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(K("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(DC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(K("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),DC):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,s,c,l,u,m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(K("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,s=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,c=Date.now(),this.removeTargets(e,r,t))).next(g=>(o=g,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(u=Date.now(),_o()<=we.DEBUG&&K("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-m}ms
	Determined least recently used ${i} in `+(c-s)+`ms
	Removed ${o} targets in `+(l-c)+`ms
	Removed ${g} documents in `+(u-l)+`ms
Total Duration: ${u-m}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:g})))}};function j2(n,e){return new lm(n,e)}var um=class{constructor(){this.changes=new vr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,bn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?B.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var dm=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var hm=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Zs(r.mutation,i,an.empty(),it.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ve()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ve()){let i=Ei();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Qs();return o.forEach((c,l)=>{s=s.insert(c,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Ei();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ve()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,c)=>{t.set(s,c)})})}computeViews(e,t,r,i){let o=_r(),s=Xs(),c=function(){return Xs()}();return t.forEach((l,u)=>{let m=r.get(u.key);i.has(u.key)&&(m===void 0||m.mutation instanceof zn)?o=o.insert(u.key,u):m!==void 0?(s.set(u.key,m.mutation.getFieldMask()),Zs(m.mutation,u,m.mutation.getFieldMask(),it.now())):s.set(u.key,an.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((u,m)=>s.set(u,m)),t.forEach((u,m)=>c.set(u,new dm(m,s.get(u)??null))),c))}recalculateAndSaveOverlays(e,t){let r=Xs(),i=new Ye((s,c)=>s-c),o=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let c of s)c.keys().forEach(l=>{let u=t.get(l);if(u===null)return;let m=r.get(l)||an.empty();m=c.applyToLocalView(u,m),r.set(l,m);let g=(i.get(c.batchId)||ve()).add(l);i=i.insert(c.batchId,g)})}).next(()=>{let s=[],c=i.getReverseIterator();for(;c.hasNext();){let l=c.getNext(),u=l.key,m=l.value,g=SE();m.forEach(b=>{if(!o.has(b)){let C=OE(t.get(b),r.get(b));C!==null&&g.set(b,C),o=o.add(b)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,g))}return B.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return ee.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):CE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):B.resolve(Ei()),c=ta,l=o;return s.next(u=>B.forEach(u,(m,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),o.get(m)?B.resolve():this.remoteDocumentCache.getEntry(e,m).next(b=>{l=l.insert(m,b)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,l,u,ve())).next(m=>({batchId:c,changes:xE(m)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ee(t)).next(r=>{let i=Qs();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Qs();return this.indexManager.getCollectionParents(e,o).next(c=>B.forEach(c,l=>{let u=function(g,b){return new Hr(b,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(m=>{m.forEach((g,b)=>{s=s.insert(g,b)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((l,u)=>{let m=u.getKey();s.get(m)===null&&(s=s.insert(m,bn.newInvalidDocument(m)))});let c=Qs();return s.forEach((l,u)=>{let m=o.get(l);m!==void 0&&Zs(m.mutation,u,an.empty(),it.now()),Iu(t,u)&&(c=c.insert(l,u))}),c})}};var fm=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return B.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Un(i.createTime)}}(t)),B.resolve()}getNamedQuery(e,t){return B.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(i){return{name:i.name,query:V2(i.bundledQuery),readTime:Un(i.readTime)}}(t)),B.resolve()}};var pm=class{constructor(){this.overlays=new Ye(ee.comparator),this.qr=new Map}getOverlay(e,t){return B.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Ei();return B.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),B.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),B.resolve()}getOverlaysForCollection(e,t,r){let i=Ei(),o=t.length+1,s=new ee(t.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let l=c.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return B.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ye((u,m)=>u-m),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let m=o.get(u.largestBatchId);m===null&&(m=Ei(),o=o.insert(u.largestBatchId,m)),m.set(u.getKey(),u)}}let c=Ei(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,m)=>c.set(u,m)),!(c.size()>=i)););return B.resolve(c)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Qp(t,r));let o=this.qr.get(t);o===void 0&&(o=ve(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}};var mm=class{constructor(){this.sessionToken=It.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,B.resolve()}};var la=class{constructor(){this.Qr=new mt(tt.$r),this.Ur=new mt(tt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new tt(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new tt(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new ee(new qe([])),r=new tt(t,e),i=new tt(t,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new ee(new qe([])),r=new tt(t,e),i=new tt(t,e+1),o=ve();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new tt(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},tt=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ee.comparator(e.key,t.key)||ye(e.Yr,t.Yr)}static Kr(e,t){return ye(e.Yr,t.Yr)||ee.comparator(e.key,t.key)}};var gm=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new mt(tt.$r)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Wp(o,t,r,i);this.mutationQueue.push(s);for(let c of i)this.Zr=this.Zr.add(new tt(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return B.resolve(s)}lookupMutationBatch(e,t){return B.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),o=i<0?0:i;return B.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?lg:this.tr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new tt(t,0),i=new tt(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{let c=this.Xr(s.Yr);o.push(c)}),B.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mt(ye);return t.forEach(i=>{let o=new tt(i,0),s=new tt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],c=>{r=r.add(c.Yr)})}),B.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;ee.isDocumentKey(o)||(o=o.child(""));let s=new tt(new ee(o),0),c=new mt(ye);return this.Zr.forEachWhile(l=>{let u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(c=c.add(l.Yr)),!0)},s),B.resolve(this.ti(c))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Pe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return B.forEach(t.mutations,i=>{let o=new tt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new tt(t,0),i=this.Zr.firstAfterOrEqual(r);return B.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var ym=class{constructor(e){this.ri=e,this.docs=function(){return new Ye(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return B.resolve(r?r.document.mutableCopy():bn.newInvalidDocument(t))}getEntries(e,t){let r=_r();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():bn.newInvalidDocument(i))}),B.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=_r(),s=t.path,c=new ee(s.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){let{key:u,value:{document:m}}=l.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||VR(FR(m),r)<=0||(i.has(m.key)||Iu(t,m))&&(o=o.insert(m.key,m.mutableCopy()))}return B.resolve(o)}getAllFromCollectionGroup(e,t,r,i){ne(9500)}ii(e,t){return B.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new vm(this)}getSize(e){return B.resolve(this.size)}},vm=class extends um{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),B.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var _m=class{constructor(e){this.persistence=e,this.si=new vr(t=>pg(t),mg),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.oi=0,this._i=new la,this.targetCount=0,this.ai=ca.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),B.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new ca(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,B.resolve()}updateTargetData(e,t){return this.Pr(t),B.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.si.forEach((s,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),B.waitFor(o).next(()=>i)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return B.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),B.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),B.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),B.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return B.resolve(r)}containsKey(e,t){return B.resolve(this._i.containsKey(t))}};var tu=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new cg(0),this.li=!1,this.li=!0,this.hi=new mm,this.referenceDelegate=e(this),this.Pi=new _m(this),this.indexManager=new om,this.remoteDocumentCache=function(i){return new ym(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new im(t),this.Ii=new fm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new pm,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new gm(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){K("MemoryPersistence","Starting transaction:",e);let i=new bm(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,t){return B.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},bm=class extends Ap{constructor(e){super(),this.currentSequenceNumber=e}},wm=class n{constructor(e){this.persistence=e,this.Ri=new la,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw ne(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),B.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),B.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.fi,r=>{let i=ee.fromPath(r);return this.gi(e,i).next(o=>{o||t.removeEntry(i,ce.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return B.or([()=>B.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},nu=class n{constructor(e,t){this.persistence=e,this.pi=new vr(r=>UR(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=j2(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return B.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return B.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?B.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,t).next(c=>{c||(r++,o.removeEntry(s,ce.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),B.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),B.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Vl(e.data.value)),t}br(e,t,r){return B.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return B.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Cm=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=ve(),i=ve();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Em=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Im=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Pw()?8:jR(Aw())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ys(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Em;return this.Ss(e,t,s).next(c=>{if(o.result=c,this.Vs)return this.bs(e,t,s,c.size)})}).next(()=>o.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(_o()<=we.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",bo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),B.resolve()):(_o()<=we.DEBUG&&K("QueryEngine","Query:",bo(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(_o()<=we.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",bo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jn(t))):B.resolve())}ys(e,t){if(gC(t))return B.resolve(null);let r=jn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Kl(t,null,"F"),r=jn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ve(...o);return this.ps.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,r).next(l=>{let u=this.Ds(t,c);return this.Cs(t,u,s,l.readTime)?this.ys(e,Kl(t,null,"F")):this.vs(e,u,t,l)}))})))}ws(e,t,r,i){return gC(t)||i.isEqual(ce.min())?B.resolve(null):this.ps.getDocuments(e,r).next(o=>{let s=this.Ds(t,o);return this.Cs(t,s,r,i)?B.resolve(null):(_o()<=we.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),bo(t)),this.vs(e,s,t,kR(i,ta)).next(c=>c))})}Ds(e,t){let r=new mt(IE(e));return t.forEach((i,o)=>{Iu(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return _o()<=we.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",bo(t)),this.ps.getDocumentsMatchingQuery(e,t,Ti.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var _g="LocalStore",B2=3e8,Dm=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Ye(ye),this.xs=new vr(o=>pg(o),mg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hm(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function U2(n,e,t,r){return new Dm(n,e,t,r)}function HE(n,e){return j(this,null,function*(){let t=ae(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],c=[],l=ve();for(let u of i){s.push(u.batchId);for(let m of u.mutations)l=l.add(m.key)}for(let u of o){c.push(u.batchId);for(let m of u.mutations)l=l.add(m.key)}return t.localDocuments.getDocuments(r,l).next(u=>({Ls:u,removedBatchIds:s,addedBatchIds:c}))})})})}function $2(n,e){let t=ae(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return function(c,l,u,m){let g=u.batch,b=g.keys(),C=B.resolve();return b.forEach(O=>{C=C.next(()=>m.getEntry(l,O)).next(R=>{let k=u.docVersions.get(O);Pe(k!==null,48541),R.version.compareTo(k)<0&&(g.applyToRemoteDocument(R,u),R.isValidDocument()&&(R.setReadTime(u.commitVersion),m.addEntry(R)))})}),C.next(()=>c.mutationQueue.removeMutationBatch(l,g))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let l=ve();for(let u=0;u<c.mutationResults.length;++u)c.mutationResults[u].transformResults.length>0&&(l=l.add(c.batch.mutations[u].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function qE(n){let e=ae(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function z2(n,e){let t=ae(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let c=[];e.targetChanges.forEach((m,g)=>{let b=i.get(g);if(!b)return;c.push(t.Pi.removeMatchingKeys(o,m.removedDocuments,g).next(()=>t.Pi.addMatchingKeys(o,m.addedDocuments,g)));let C=b.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?C=C.withResumeToken(It.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):m.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(m.resumeToken,r)),i=i.insert(g,C),function(R,k,q){return R.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=B2?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(b,C,m)&&c.push(t.Pi.updateTargetData(o,C))});let l=_r(),u=ve();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,m))}),c.push(H2(o,s,e.documentUpdates).next(m=>{l=m.ks,u=m.qs})),!r.isEqual(ce.min())){let m=t.Pi.getLastRemoteSnapshotVersion(o).next(g=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(m)}return B.waitFor(c).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,l,u)).next(()=>l)}).then(o=>(t.Ms=i,o))}function H2(n,e,t){let r=ve(),i=ve();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=_r();return t.forEach((c,l)=>{let u=o.get(c);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(c)),l.isNoDocument()&&l.version.isEqual(ce.min())?(e.removeEntry(c,l.readTime),s=s.insert(c,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),s=s.insert(c,l)):K(_g,"Ignoring outdated watch update for ",c,". Current version:",u.version," Watch version:",l.version)}),{ks:s,qs:i}})}function q2(n,e){let t=ae(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=lg),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function G2(n,e){let t=ae(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(o=>o?(i=o,B.resolve(i)):t.Pi.allocateTargetId(r).next(s=>(i=new aa(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}function xm(n,e,t){return j(this,null,function*(){let r=ae(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!$o(s))throw s;K(_g,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)})}function TC(n,e,t){let r=ae(n),i=ce.min(),o=ve();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,u,m){let g=ae(l),b=g.xs.get(m);return b!==void 0?B.resolve(g.Ms.get(b)):g.Pi.getTargetData(u,m)}(r,s,jn(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,c.targetId).next(l=>{o=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,t?i:ce.min(),t?o:ve())).next(c=>(W2(r,i2(e),c),{documents:c,Qs:o})))}function W2(n,e,t){let r=n.Os.get(e)||ce.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Os.set(e,r)}var ru=class{constructor(){this.activeTargetIds=u2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Sm=class{constructor(){this.Mo=new ru,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new ru,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Tm=class{Oo(e){}shutdown(){}};var MC="ConnectivityMonitor",iu=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){K(MC,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){K(MC,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Fl=null;function Mm(){return Fl===null?Fl=function(){return 268435456+Math.round(2147483648*Math.random())}():Fl++,"0x"+Fl.toString(16)}var _p="RestConnection",K2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Am=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===ql?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){let s=Mm(),c=this.zo(e,t.toUriEncodedString());K(_p,`Sending RPC '${e}' ${s}:`,c,r);let l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,o);let{host:u}=new URL(c),m=Tl(u);return this.Jo(e,c,l,r,m).then(g=>(K(_p,`Received RPC '${e}' ${s}: `,g),g),g=>{throw So(_p,`RPC '${e}' ${s} failed with error: `,g,"url: ",c,"request:",r),g})}Ho(e,t,r,i,o,s){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Bo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,t){let r=K2[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var Pm=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var Et="WebChannelConnection",Nm=class extends Am{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){let s=Mm();return new Promise((c,l)=>{let u=new hp;u.setWithCredentials(!0),u.listenOnce(fp.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ks.NO_ERROR:let g=u.getResponseJson();K(Et,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(g)),c(g);break;case Ks.TIMEOUT:K(Et,`RPC '${e}' ${s} timed out`),l(new H(F.DEADLINE_EXCEEDED,"Request time out"));break;case Ks.HTTP_ERROR:let b=u.getStatus();if(K(Et,`RPC '${e}' ${s} failed with status:`,b,"response text:",u.getResponseText()),b>0){let C=u.getResponseJson();Array.isArray(C)&&(C=C[0]);let O=C?.error;if(O&&O.status&&O.message){let R=function(q){let re=q.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(re)>=0?re:F.UNKNOWN}(O.status);l(new H(R,O.message))}else l(new H(F.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new H(F.UNAVAILABLE,"Connection failed."));break;default:ne(9055,{l_:e,streamId:s,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{K(Et,`RPC '${e}' ${s} completed.`)}});let m=JSON.stringify(i);K(Et,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",m,r,15)})}T_(e,t,r){let i=Mm(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=gp(),c=mp(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;let m=o.join("");K(Et,`Creating RPC '${e}' stream ${i}: ${m}`,l);let g=s.createWebChannel(m,l);this.I_(g);let b=!1,C=!1,O=new Pm({Yo:k=>{C?K(Et,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(b||(K(Et,`Opening RPC '${e}' stream ${i} transport.`),g.open(),b=!0),K(Et,`RPC '${e}' stream ${i} sending:`,k),g.send(k))},Zo:()=>g.close()}),R=(k,q,re)=>{k.listen(q,Q=>{try{re(Q)}catch(Ee){setTimeout(()=>{throw Ee},0)}})};return R(g,vo.EventType.OPEN,()=>{C||(K(Et,`RPC '${e}' stream ${i} transport opened.`),O.o_())}),R(g,vo.EventType.CLOSE,()=>{C||(C=!0,K(Et,`RPC '${e}' stream ${i} transport closed`),O.a_(),this.E_(g))}),R(g,vo.EventType.ERROR,k=>{C||(C=!0,So(Et,`RPC '${e}' stream ${i} transport errored. Name:`,k.name,"Message:",k.message),O.a_(new H(F.UNAVAILABLE,"The operation could not be completed")))}),R(g,vo.EventType.MESSAGE,k=>{if(!C){let q=k.data[0];Pe(!!q,16349);let re=q,Q=re?.error||re[0]?.error;if(Q){K(Et,`RPC '${e}' stream ${i} received error:`,Q);let Ee=Q.status,ke=function(w){let I=et[w];if(I!==void 0)return kE(I)}(Ee),De=Q.message;ke===void 0&&(ke=F.INTERNAL,De="Unknown error status: "+Ee+" with message "+Q.message),C=!0,O.a_(new H(ke,De)),g.close()}else K(Et,`RPC '${e}' stream ${i} received:`,q),O.u_(q)}}),R(c,pp.STAT_EVENT,k=>{k.stat===Ol.PROXY?K(Et,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===Ol.NOPROXY&&K(Et,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{O.__()},0),O}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function bp(){return typeof document<"u"?document:null}function Du(n){return new Zp(n,!0)}var ou=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&K("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var AC="PersistentStream",su=class{constructor(e,t,r,i,o,s,c,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ou(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}stop(){return j(this,null,function*(){this.x_()&&(yield this.close(0))})}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}k_(){return j(this,null,function*(){if(this.O_())return this.close(0)})}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return j(this,null,function*(){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===F.RESOURCE_EXHAUSTED?(mr(t.toString()),mr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.r_(t)})}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new H(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(()=>j(this,null,function*(){this.state=0,this.start()}))}z_(e){return K(AC,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(K(AC,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Om=class extends su{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=x2(this.serializer,e),r=function(o){if(!("targetChange"in o))return ce.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ce.min():s.readTime?Un(s.readTime):ce.min()}(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=rm(this.serializer),t.addTarget=function(o,s){let c,l=s.target;if(c=zp(l)?{documents:M2(o,l)}:{query:A2(o,l).ft},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=FE(o,s.resumeToken);let u=em(o,s.expectedCount);u!==null&&(c.expectedCount=u)}else if(s.snapshotVersion.compareTo(ce.min())>0){c.readTime=Zl(o,s.snapshotVersion.toTimestamp());let u=em(o,s.expectedCount);u!==null&&(c.expectedCount=u)}return c}(this.serializer,e);let r=N2(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=rm(this.serializer),t.removeTarget=e,this.q_(t)}},Rm=class extends su{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Pe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Pe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Pe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=T2(e.writeResults,e.commitTime),r=Un(e.commitTime);return this.listener.na(r,t)}ra(){let e={};e.database=rm(this.serializer),this.q_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>S2(this.serializer,r))};this.q_(t)}};var km=class{},Fm=class extends km{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new H(F.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,tm(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(F.UNKNOWN,o.toString())})}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.Ho(e,tm(t,r),i,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new H(F.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},Vm=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(mr(t),this.aa=!1):K("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Oi="RemoteStore",Lm=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(()=>j(this,null,function*(){Ri(this)&&(K(Oi,"Restarting streams for network reachability change."),yield function(l){return j(this,null,function*(){let u=ae(l);u.Ea.add(4),yield pa(u),u.Ra.set("Unknown"),u.Ea.delete(4),yield xu(u)})}(this))}))}),this.Ra=new Vm(r,i)}};function xu(n){return j(this,null,function*(){if(Ri(n))for(let e of n.da)yield e(!0)})}function pa(n){return j(this,null,function*(){for(let e of n.da)yield e(!1)})}function GE(n,e){let t=ae(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Eg(t)?Cg(t):zo(t).O_()&&wg(t,e))}function bg(n,e){let t=ae(n),r=zo(t);t.Ia.delete(e),r.O_()&&WE(t,e),t.Ia.size===0&&(r.O_()?r.L_():Ri(t)&&t.Ra.set("Unknown"))}function wg(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}zo(n).Y_(e)}function WE(n,e){n.Va.Ue(e),zo(n).Z_(e)}function Cg(n){n.Va=new Xp({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),zo(n).start(),n.Ra.ua()}function Eg(n){return Ri(n)&&!zo(n).x_()&&n.Ia.size>0}function Ri(n){return ae(n).Ea.size===0}function KE(n){n.Va=void 0}function Q2(n){return j(this,null,function*(){n.Ra.set("Online")})}function Y2(n){return j(this,null,function*(){n.Ia.forEach((e,t)=>{wg(n,e)})})}function J2(n,e){return j(this,null,function*(){KE(n),Eg(n)?(n.Ra.ha(e),Cg(n)):n.Ra.set("Unknown")})}function X2(n,e,t){return j(this,null,function*(){if(n.Ra.set("Online"),e instanceof Jl&&e.state===2&&e.cause)try{yield function(i,o){return j(this,null,function*(){let s=o.cause;for(let c of o.targetIds)i.Ia.has(c)&&(yield i.remoteSyncer.rejectListen(c,s),i.Ia.delete(c),i.Va.removeTarget(c))})}(n,e)}catch(r){K(Oi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield au(n,r)}else if(e instanceof Io?n.Va.Ze(e):e instanceof Yl?n.Va.st(e):n.Va.tt(e),!t.isEqual(ce.min()))try{let r=yield qE(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let c=o.Va.Tt(s);return c.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){let m=o.Ia.get(u);m&&o.Ia.set(u,m.withResumeToken(l.resumeToken,s))}}),c.targetMismatches.forEach((l,u)=>{let m=o.Ia.get(l);if(!m)return;o.Ia.set(l,m.withResumeToken(It.EMPTY_BYTE_STRING,m.snapshotVersion)),WE(o,l);let g=new aa(m.target,l,u,m.sequenceNumber);wg(o,g)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){K(Oi,"Failed to raise snapshot:",r),yield au(n,r)}})}function au(n,e,t){return j(this,null,function*(){if(!$o(e))throw e;n.Ea.add(1),yield pa(n),n.Ra.set("Offline"),t||(t=()=>qE(n.localStore)),n.asyncQueue.enqueueRetryable(()=>j(this,null,function*(){K(Oi,"Retrying IndexedDB access"),yield t(),n.Ea.delete(1),yield xu(n)}))})}function QE(n,e){return e().catch(t=>au(n,t,e))}function Su(n){return j(this,null,function*(){let e=ae(n),t=qr(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:lg;for(;Z2(e);)try{let i=yield q2(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,ek(e,i)}catch(i){yield au(e,i)}YE(e)&&JE(e)})}function Z2(n){return Ri(n)&&n.Ta.length<10}function ek(n,e){n.Ta.push(e);let t=qr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function YE(n){return Ri(n)&&!qr(n).x_()&&n.Ta.length>0}function JE(n){qr(n).start()}function tk(n){return j(this,null,function*(){qr(n).ra()})}function nk(n){return j(this,null,function*(){let e=qr(n);for(let t of n.Ta)e.ea(t.mutations)})}function rk(n,e,t){return j(this,null,function*(){let r=n.Ta.shift(),i=Kp.from(r,e,t);yield QE(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Su(n)})}function ik(n,e){return j(this,null,function*(){e&&qr(n).X_&&(yield function(r,i){return j(this,null,function*(){if(function(s){return y2(s)&&s!==F.ABORTED}(i.code)){let o=r.Ta.shift();qr(r).B_(),yield QE(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Su(r)}})}(n,e)),YE(n)&&JE(n)})}function PC(n,e){return j(this,null,function*(){let t=ae(n);t.asyncQueue.verifyOperationInProgress(),K(Oi,"RemoteStore received new credentials");let r=Ri(t);t.Ea.add(3),yield pa(t),r&&t.Ra.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),yield xu(t)})}function ok(n,e){return j(this,null,function*(){let t=ae(n);e?(t.Ea.delete(2),yield xu(t)):e||(t.Ea.add(2),yield pa(t),t.Ra.set("Unknown"))})}function zo(n){return n.ma||(n.ma=function(t,r,i){let o=ae(t);return o.sa(),new Om(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Xo:Q2.bind(null,n),t_:Y2.bind(null,n),r_:J2.bind(null,n),H_:X2.bind(null,n)}),n.da.push(e=>j(this,null,function*(){e?(n.ma.B_(),Eg(n)?Cg(n):n.Ra.set("Unknown")):(yield n.ma.stop(),KE(n))}))),n.ma}function qr(n){return n.fa||(n.fa=function(t,r,i){let o=ae(t);return o.sa(),new Rm(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:tk.bind(null,n),r_:ik.bind(null,n),ta:nk.bind(null,n),na:rk.bind(null,n)}),n.da.push(e=>j(this,null,function*(){e?(n.fa.B_(),yield Su(n)):(yield n.fa.stop(),n.Ta.length>0&&(K(Oi,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}var jm=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,c=new n(e,t,s,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Ig(n,e){if(mr("AsyncQueue",`${e}: ${n}`),$o(n))return new H(F.UNAVAILABLE,`${e}: ${n}`);throw n}var cu=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ee.comparator(t.key,r.key):(t,r)=>ee.comparator(t.key,r.key),this.keyedMap=Qs(),this.sortedSet=new Ye(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var lu=class{constructor(){this.ga=new Ye(ee.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ne(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},Vo=class n{constructor(e,t,r,i,o,s,c,l,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(c=>{s.push({type:0,doc:c})}),new n(e,t,cu.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Eu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Bm=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},Um=class{constructor(){this.queries=NC(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=ae(t),o=i.queries;i.queries=NC(),o.forEach((s,c)=>{for(let l of c.Sa)l.onError(r)})})(this,new H(F.ABORTED,"Firestore shutting down"))}};function NC(){return new vr(n=>EE(n),Eu)}function sk(n,e){return j(this,null,function*(){let t=ae(n),r=3,i=e.query,o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new Bm,r=e.Da()?0:1);try{switch(r){case 0:o.wa=yield t.onListen(i,!0);break;case 1:o.wa=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let c=Ig(s,`Initialization of query '${bo(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&Dg(t)})}function ak(n,e){return j(this,null,function*(){let t=ae(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function ck(n,e){let t=ae(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let c of s.Sa)c.Fa(i)&&(r=!0);s.wa=i}}r&&Dg(t)}function lk(n,e,t){let r=ae(n),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(t);r.queries.delete(e)}function Dg(n){n.Ca.forEach(e=>{e.next()})}var $m,OC;(OC=$m||($m={})).Ma="default",OC.Cache="cache";var zm=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Vo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Vo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==$m.Cache}};var uu=class{constructor(e){this.key=e}},du=class{constructor(e){this.key=e}},Hm=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ve(),this.mutatedKeys=ve(),this.eu=IE(e),this.tu=new cu(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new lu,i=t?t.tu:this.tu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,c=!1,l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((m,g)=>{let b=i.get(m),C=Iu(this.query,g)?g:null,O=!!b&&this.mutatedKeys.has(b.key),R=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations),k=!1;b&&C?b.data.isEqual(C.data)?O!==R&&(r.track({type:3,doc:C}),k=!0):this.su(b,C)||(r.track({type:2,doc:C}),k=!0,(l&&this.eu(C,l)>0||u&&this.eu(C,u)<0)&&(c=!0)):!b&&C?(r.track({type:0,doc:C}),k=!0):b&&!C&&(r.track({type:1,doc:b}),k=!0,(l||u)&&(c=!0)),k&&(C?(s=s.add(C),o=R?o.add(m):o.delete(m)):(s=s.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let m=this.query.limitType==="F"?s.last():s.first();s=s.delete(m.key),o=o.delete(m.key),r.track({type:1,doc:m})}return{tu:s,iu:r,Cs:c,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((m,g)=>function(C,O){let R=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne(20277,{Rt:k})}};return R(C)-R(O)}(m.type,g.type)||this.eu(m.doc,g.doc)),this.ou(r),i=i??!1;let c=t&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,s.length!==0||u?{snapshot:new Vo(this.query,e.tu,o,s,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new lu,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=ve(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new du(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new uu(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=ve();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Vo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},xg="SyncEngine",qm=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Gm=class{constructor(e){this.key=e,this.hu=!1}},Wm=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new vr(c=>EE(c),Eu),this.Iu=new Map,this.Eu=new Set,this.du=new Ye(ee.comparator),this.Au=new Map,this.Ru=new la,this.Vu={},this.mu=new Map,this.fu=ca.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};function uk(n,e,t=!0){return j(this,null,function*(){let r=rI(n),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=yield XE(r,e,t,!0),i})}function dk(n,e){return j(this,null,function*(){let t=rI(n);yield XE(t,e,!0,!1)})}function XE(n,e,t,r){return j(this,null,function*(){let i=yield G2(n.localStore,jn(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),c;return r&&(c=yield hk(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&GE(n.remoteStore,i),c})}function hk(n,e,t,r,i){return j(this,null,function*(){n.pu=(g,b,C)=>function(R,k,q,re){return j(this,null,function*(){let Q=k.view.ru(q);Q.Cs&&(Q=yield TC(R.localStore,k.query,!1).then(({documents:x})=>k.view.ru(x,Q)));let Ee=re&&re.targetChanges.get(k.targetId),ke=re&&re.targetMismatches.get(k.targetId)!=null,De=k.view.applyChanges(Q,R.isPrimaryClient,Ee,ke);return kC(R,k.targetId,De.au),De.snapshot})}(n,g,b,C);let o=yield TC(n.localStore,e,!0),s=new Hm(e,o.Qs),c=s.ru(o.documents),l=sa.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=s.applyChanges(c,n.isPrimaryClient,l);kC(n,t,u.au);let m=new qm(e,t,s);return n.Tu.set(e,m),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),u.snapshot})}function fk(n,e,t){return j(this,null,function*(){let r=ae(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!Eu(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield xm(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&bg(r.remoteStore,i.targetId),Km(r,i.targetId)}).catch(Uo))):(Km(r,i.targetId),yield xm(r.localStore,i.targetId,!0))})}function pk(n,e){return j(this,null,function*(){let t=ae(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),bg(t.remoteStore,r.targetId))})}function mk(n,e,t){return j(this,null,function*(){let r=Ck(n);try{let i=yield function(s,c){let l=ae(s),u=it.now(),m=c.reduce((C,O)=>C.add(O.key),ve()),g,b;return l.persistence.runTransaction("Locally write mutations","readwrite",C=>{let O=_r(),R=ve();return l.Ns.getEntries(C,m).next(k=>{O=k,O.forEach((q,re)=>{re.isValidDocument()||(R=R.add(q))})}).next(()=>l.localDocuments.getOverlayedDocuments(C,O)).next(k=>{g=k;let q=[];for(let re of c){let Q=g2(re,g.get(re.key).overlayedDocument);Q!=null&&q.push(new zn(re.key,Q,gE(Q.value.mapValue),Bn.exists(!0)))}return l.mutationQueue.addMutationBatch(C,u,q,c)}).next(k=>{b=k;let q=k.applyToLocalDocumentSet(g,R);return l.documentOverlayCache.saveOverlays(C,k.batchId,q)})}).then(()=>({batchId:b.batchId,changes:xE(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,c,l){let u=s.Vu[s.currentUser.toKey()];u||(u=new Ye(ye)),u=u.insert(c,l),s.Vu[s.currentUser.toKey()]=u}(r,i.batchId,t),yield ma(r,i.changes),yield Su(r.remoteStore)}catch(i){let o=Ig(i,"Failed to persist write");t.reject(o)}})}function ZE(n,e){return j(this,null,function*(){let t=ae(n);try{let r=yield z2(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Au.get(o);s&&(Pe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?Pe(s.hu,14607):i.removedDocuments.size>0&&(Pe(s.hu,42227),s.hu=!1))}),yield ma(t,r,e)}catch(r){yield Uo(r)}})}function RC(n,e,t){let r=ae(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((o,s)=>{let c=s.view.va(e);c.snapshot&&i.push(c.snapshot)}),function(s,c){let l=ae(s);l.onlineState=c;let u=!1;l.queries.forEach((m,g)=>{for(let b of g.Sa)b.va(c)&&(u=!0)}),u&&Dg(l)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function gk(n,e,t){return j(this,null,function*(){let r=ae(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new Ye(ee.comparator);s=s.insert(o,bn.newNoDocument(o,ce.min()));let c=ve().add(o),l=new Ql(ce.min(),new Map,new Ye(ye),s,c);yield ZE(r,l),r.du=r.du.remove(o),r.Au.delete(e),Sg(r)}else yield xm(r.localStore,e,!1).then(()=>Km(r,e,t)).catch(Uo)})}function yk(n,e){return j(this,null,function*(){let t=ae(n),r=e.batch.batchId;try{let i=yield $2(t.localStore,e);tI(t,r,null),eI(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ma(t,i)}catch(i){yield Uo(i)}})}function vk(n,e,t){return j(this,null,function*(){let r=ae(n);try{let i=yield function(s,c){let l=ae(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let m;return l.mutationQueue.lookupMutationBatch(u,c).next(g=>(Pe(g!==null,37113),m=g.keys(),l.mutationQueue.removeMutationBatch(u,g))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,m,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,m)).next(()=>l.localDocuments.getDocuments(u,m))})}(r.localStore,e);tI(r,e,t),eI(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ma(r,i)}catch(i){yield Uo(i)}})}function eI(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function tI(n,e,t){let r=ae(n),i=r.Vu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Km(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||nI(n,r)})}function nI(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(bg(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Sg(n))}function kC(n,e,t){for(let r of t)r instanceof uu?(n.Ru.addReference(r.key,e),_k(n,r)):r instanceof du?(K(xg,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||nI(n,r.key)):ne(19791,{wu:r})}function _k(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(K(xg,"New document in limbo: "+t),n.Eu.add(r),Sg(n))}function Sg(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new ee(qe.fromString(e)),r=n.fu.next();n.Au.set(r,new Gm(t)),n.du=n.du.insert(t,r),GE(n.remoteStore,new aa(jn(gg(t.path)),r,"TargetPurposeLimboResolution",cg.ce))}}function ma(n,e,t){return j(this,null,function*(){let r=ae(n),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((c,l)=>{s.push(r.pu(l,e,t).then(u=>{if((u||t)&&r.isPrimaryClient){let m=u?!u.fromCache:t?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,m?"current":"not-current")}if(u){i.push(u);let m=Cm.As(l.targetId,u);o.push(m)}}))}),yield Promise.all(s),r.Pu.H_(i),yield function(l,u){return j(this,null,function*(){let m=ae(l);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>B.forEach(u,b=>B.forEach(b.Es,C=>m.persistence.referenceDelegate.addReference(g,b.targetId,C)).next(()=>B.forEach(b.ds,C=>m.persistence.referenceDelegate.removeReference(g,b.targetId,C)))))}catch(g){if(!$o(g))throw g;K(_g,"Failed to update sequence numbers: "+g)}for(let g of u){let b=g.targetId;if(!g.fromCache){let C=m.Ms.get(b),O=C.snapshotVersion,R=C.withLastLimboFreeSnapshotVersion(O);m.Ms=m.Ms.insert(b,R)}}})}(r.localStore,o))})}function bk(n,e){return j(this,null,function*(){let t=ae(n);if(!t.currentUser.isEqual(e)){K(xg,"User change. New user:",e.toKey());let r=yield HE(t.localStore,e);t.currentUser=e,function(o,s){o.mu.forEach(c=>{c.forEach(l=>{l.reject(new H(F.CANCELLED,s))})}),o.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ma(t,r.Ls)}})}function wk(n,e){let t=ae(n),r=t.Au.get(e);if(r&&r.hu)return ve().add(r.key);{let i=ve(),o=t.Iu.get(e);if(!o)return i;for(let s of o){let c=t.Tu.get(s);i=i.unionWith(c.view.nu)}return i}}function rI(n){let e=ae(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gk.bind(null,e),e.Pu.H_=ck.bind(null,e.eventManager),e.Pu.yu=lk.bind(null,e.eventManager),e}function Ck(n){let e=ae(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vk.bind(null,e),e}var iI=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return j(this,null,function*(){this.serializer=Du(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)})}Fu(t,r){return null}Mu(t,r){return null}vu(t){return U2(this.persistence,new Im,t.initialUser,this.serializer)}Cu(t){return new tu(wm.mi,this.serializer)}Du(t){return new Sm}terminate(){return j(this,null,function*(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),Qm=class extends iI{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Pe(this.persistence.referenceDelegate instanceof nu,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new cm(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new tu(r=>nu.mi(r,t),this.serializer)}};var Ek=(()=>{class n{initialize(t,r){return j(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>RC(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=bk.bind(null,this.syncEngine),yield ok(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Um}()}createDatastore(t){let r=Du(t.databaseInfo.databaseId),i=function(s){return new Nm(s)}(t.databaseInfo);return function(s,c,l,u){return new Fm(s,c,l,u)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,c,l){return new Lm(i,o,s,c,l)}(this.localStore,this.datastore,t.asyncQueue,r=>RC(this.syncEngine,r,0),function(){return iu.v()?new iu:new Tm}())}createSyncEngine(t,r){return function(o,s,c,l,u,m,g){let b=new Wm(o,s,c,l,u,m);return g&&(b.gu=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return j(this,null,function*(){yield function(r){return j(this,null,function*(){let i=ae(r);K(Oi,"RemoteStore shutting down."),i.Ea.add(5),yield pa(i),i.Aa.shutdown(),i.Ra.set("Unknown")})}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()})}}return n.provider={build:()=>new n},n})();var Ym=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):mr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Gr="FirestoreClient",Jm=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=pt.UNAUTHENTICATED,this.clientId=ea.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>j(this,null,function*(){K(Gr,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(K(Gr,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>j(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Ig(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function wp(n,e){return j(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),K(Gr,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>j(this,null,function*(){r.isEqual(i)||(yield HE(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function FC(n,e){return j(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Ik(n);K(Gr,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>PC(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>PC(e.remoteStore,i)),n._onlineComponents=e})}function Ik(n){return j(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){K(Gr,"Using user provided OfflineComponentProvider");try{yield wp(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;So("Error using user provided cache. Falling back to memory cache: "+t),yield wp(n,new iI)}}else K(Gr,"Using default OfflineComponentProvider"),yield wp(n,new Qm(void 0));return n._offlineComponents})}function oI(n){return j(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(K(Gr,"Using user provided OnlineComponentProvider"),yield FC(n,n._uninitializedComponentsProvider._online)):(K(Gr,"Using default OnlineComponentProvider"),yield FC(n,new Ek))),n._onlineComponents})}function Dk(n){return oI(n).then(e=>e.syncEngine)}function VC(n){return j(this,null,function*(){let e=yield oI(n),t=e.eventManager;return t.onListen=uk.bind(null,e.syncEngine),t.onUnlisten=fk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=dk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=pk.bind(null,e.syncEngine),t})}function sI(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var LC=new Map;var aI="firestore.googleapis.com",jC=!0,hu=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new H(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=aI,this.ssl=jC}else this.host=e.host,this.ssl=e.ssl??jC;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=zE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<L2)throw new H(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}OR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sI(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new H(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new H(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new H(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Lo=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hu({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hu(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Cp;switch(r.type){case"firstParty":return new xp(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return j(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=LC.get(t);r&&(K("ComponentProvider","Removing Datastore"),LC.delete(t),r.terminate())}(this),Promise.resolve()}};function xk(n,e,t,r={}){n=Vn(n,Lo);let i=Tl(e),o=n._getSettings(),s=ue(J({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;i&&(Sw(`https://${c}`),Mw("Firestore",!0)),o.host!==aI&&o.host!==c&&So("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=ue(J({},o),{host:c,ssl:i,emulatorOptions:r});if(!go(l,s)&&(n._setSettings(l),r.mockUserToken)){let u,m;if(typeof r.mockUserToken=="string")u=r.mockUserToken,m=pt.MOCK_USER;else{u=Tw(r.mockUserToken,n._app?.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new H(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new pt(g)}n._authCredentials=new Ep(new Bl(u,m))}}var Wr=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},gt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(fa(t,n._jsonSchema))return new n(e,r||null,new ee(qe.fromString(t.referencePath)))}};gt._jsonSchemaVersion="firestore/documentReference/1.0",gt._jsonSchema={type:rt("string",gt._jsonSchemaVersion),referencePath:rt("string")};var jr=class n extends Wr{constructor(e,t,r){super(e,t,gg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new gt(this.firestore,null,new ee(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Hn(n,e,...t){if(n=_n(n),GC("collection","path",e),n instanceof Lo){let r=qe.fromString(e,...t);return rC(r),new jr(n,null,r)}{if(!(n instanceof gt||n instanceof jr))throw new H(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(qe.fromString(e,...t));return rC(r),new jr(n.firestore,null,r)}}function Qr(n,e,...t){if(n=_n(n),arguments.length===1&&(e=ea.newId()),GC("doc","path",e),n instanceof Lo){let r=qe.fromString(e,...t);return nC(r),new gt(n,null,new ee(r))}{if(!(n instanceof gt||n instanceof jr))throw new H(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(qe.fromString(e,...t));return nC(r),new gt(n.firestore,n instanceof jr?n.converter:null,new ee(r))}}var BC="AsyncQueue",fu=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ou(this,"async_queue_retry"),this._c=()=>{let r=bp();r&&K(BC,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=bp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=bp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new pr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}lc(){return j(this,null,function*(){if(this.Xu.length!==0){try{yield this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!$o(e))throw e;K(BC,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}})}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,mr("INTERNAL UNHANDLED ERROR: ",UC(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=jm.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&ne(47125,{Pc:UC(this.nc)})}verifyOperationInProgress(){}Tc(){return j(this,null,function*(){let e;do e=this.ac,yield e;while(e!==this.ac)})}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function UC(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function $C(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var br=class extends Lo{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new fu,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return j(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new fu(e),this._firestoreClient=void 0,yield e}})}};function Tu(n,e){let t=typeof n=="object"?n:Kw(),r=typeof n=="string"?n:e||ql,i=qw(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=xw("firestore");o&&xk(i,...o)}return i}function cI(n){if(n._terminated)throw new H(F.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Sk(n),n._firestoreClient}function Sk(n){let e=n._freezeSettings(),t=function(i,o,s,c){return new Pp(i,o,s,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,sI(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Jm(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}}(n._componentsProvider))}var Br=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(It.fromBase64String(e))}catch(t){throw new H(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(It.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(fa(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Br._jsonSchemaVersion="firestore/bytes/1.0",Br._jsonSchema={type:rt("string",Br._jsonSchemaVersion),bytes:rt("string")};var jo=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new H(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ua=class{constructor(e){this._methodName=e}};var Ur=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new H(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new H(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ye(this._lat,e._lat)||ye(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(fa(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Ur._jsonSchemaVersion="firestore/geoPoint/1.0",Ur._jsonSchema={type:rt("string",Ur._jsonSchemaVersion),latitude:rt("number"),longitude:rt("number")};var $r=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(fa(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new H(F.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};$r._jsonSchemaVersion="firestore/vectorValue/1.0",$r._jsonSchema={type:rt("string",$r._jsonSchemaVersion),vectorValues:rt("object")};var Tk=/^__.*__$/,Xm=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new zn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ni(e,this.data,t,this.fieldTransforms)}},pu=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new zn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function lI(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne(40011,{Ac:n})}}var Zm=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new n(J(J({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return gu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(lI(this.Ac)&&Tk.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},eg=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Du(e)}Cc(e,t,r,i=!1){return new Zm({Ac:e,methodName:t,Dc:r,path:Gt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Mu(n){let e=n._freezeSettings(),t=Du(n._databaseId);return new eg(n._databaseId,!!e.ignoreUndefinedProperties,t)}function uI(n,e,t,r,i,o={}){let s=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);Tg("Data must be an object, but it was:",s,r);let c=dI(r,s),l,u;if(o.merge)l=new an(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let m=[];for(let g of o.mergeFields){let b=tg(e,g,t);if(!s.contains(b))throw new H(F.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);fI(m,b)||m.push(b)}l=new an(m),u=s.fieldTransforms.filter(g=>l.covers(g.field))}else l=null,u=s.fieldTransforms;return new Xm(new qt(c),l,u)}var mu=class n extends ua{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function Mk(n,e,t,r){let i=n.Cc(1,e,t);Tg("Data must be an object, but it was:",i,r);let o=[],s=qt.empty();Kr(r,(l,u)=>{let m=Mg(e,l,t);u=_n(u);let g=i.yc(m);if(u instanceof mu)o.push(m);else{let b=ga(u,g);b!=null&&(o.push(m),s.set(m,b))}});let c=new an(o);return new pu(s,c,i.fieldTransforms)}function Ak(n,e,t,r,i,o){let s=n.Cc(1,e,t),c=[tg(e,r,t)],l=[i];if(o.length%2!=0)throw new H(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<o.length;b+=2)c.push(tg(e,o[b])),l.push(o[b+1]);let u=[],m=qt.empty();for(let b=c.length-1;b>=0;--b)if(!fI(u,c[b])){let C=c[b],O=l[b];O=_n(O);let R=s.yc(C);if(O instanceof mu)u.push(C);else{let k=ga(O,R);k!=null&&(u.push(C),m.set(C,k))}}let g=new an(u);return new pu(m,g,s.fieldTransforms)}function Pk(n,e,t,r=!1){return ga(t,n.Cc(r?4:3,e))}function ga(n,e){if(hI(n=_n(n)))return Tg("Unsupported field value:",e,n),dI(n,e);if(n instanceof ua)return function(r,i){if(!lI(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let c of r){let l=ga(c,i.wc(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=_n(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return d2(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=it.fromDate(r);return{timestampValue:Zl(i.serializer,o)}}if(r instanceof it){let o=new it(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Zl(i.serializer,o)}}if(r instanceof Ur)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Br)return{bytesValue:FE(i.serializer,r._byteString)};if(r instanceof gt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:vg(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof $r)return function(s,c){return{mapValue:{fields:{[dg]:{stringValue:hg},[Mo]:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw c.Sc("VectorValues must only contain numeric values.");return yg(c.serializer,u)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${bu(r)}`)}(n,e)}function dI(n,e){let t={};return cE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Kr(n,(r,i)=>{let o=ga(i,e.mc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function hI(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof it||n instanceof Ur||n instanceof Br||n instanceof gt||n instanceof ua||n instanceof $r)}function Tg(n,e,t){if(!hI(t)||!WC(t)){let r=bu(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function tg(n,e,t){if((e=_n(e))instanceof jo)return e._internalPath;if(typeof e=="string")return Mg(n,e);throw gu("Field path arguments must be of type string or ",n,!1,void 0,t)}var Nk=new RegExp("[~\\*/\\[\\]]");function Mg(n,e,t){if(e.search(Nk)>=0)throw gu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new jo(...e.split("."))._internalPath}catch{throw gu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function gu(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new H(F.INVALID_ARGUMENT,c+n+l)}function fI(n,e){return n.some(t=>t.isEqual(e))}var yu=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new ng(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Au("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},ng=class extends yu{data(){return super.data()}};function Au(n,e){return typeof e=="string"?Mg(n,e):e instanceof jo?e._internalPath:e._delegate._internalPath}function Ok(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new H(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var da=class{},ha=class extends da{};function Pu(n,e,...t){let r=[];e instanceof da&&r.push(e),r=r.concat(t),function(o){let s=o.filter(l=>l instanceof rg).length,c=o.filter(l=>l instanceof vu).length;if(s>1||s>0&&c>0)throw new H(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var vu=class n extends ha{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return mI(e._query,t),new Wr(e.firestore,e.converter,Hp(e._query,t))}_parse(e){let t=Mu(e.firestore);return function(o,s,c,l,u,m,g){let b;if(u.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new H(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){HC(g,m);let O=[];for(let R of g)O.push(zC(l,o,R));b={arrayValue:{values:O}}}else b=zC(l,o,g)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||HC(g,m),b=Pk(c,s,g,m==="in"||m==="not-in");return nt.create(u,m,b)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function Ag(n,e,t){let r=e,i=Au("where",n);return vu._create(i,r,t)}var rg=class n extends da{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:wn.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,c=o.getFlattenedFilters();for(let l of c)mI(s,l),s=Hp(s,l)}(e._query,t),new Wr(e.firestore,e.converter,Hp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var ig=class n extends ha{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new H(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new H(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Mi(o,s)}(e._query,this._field,this._direction);return new Wr(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Hr(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function pI(n,e="asc"){let t=e,r=Au("orderBy",n);return ig._create(r,t)}var og=class n extends ha{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Wr(e.firestore,e.converter,Kl(e._query,this._limit,this._limitType))}};function Nu(n){return RR("limit",n),og._create("limit",n,"F")}function zC(n,e,t){if(typeof(t=_n(t))=="string"){if(t==="")throw new H(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!CE(e)&&t.indexOf("/")!==-1)throw new H(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(qe.fromString(t));if(!ee.isDocumentKey(r))throw new H(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return uC(n,new ee(r))}if(t instanceof gt)return uC(n,t._key);throw new H(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bu(t)}.`)}function HC(n,e){if(!Array.isArray(n)||n.length===0)throw new H(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mI(n,e){let t=function(i,o){for(let s of i)for(let c of s.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new H(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var sg=class{convertValue(e,t="none"){switch(zr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return He(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(yr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ne(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Kr(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){let t=e.fields?.[Mo].arrayValue?.values?.map(r=>He(r.doubleValue));return new $r(t)}convertGeoPoint(e){return new Ur(He(e.latitude),He(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Cu(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ra(e));default:return null}}convertTimestamp(e){let t=gr(e);return new it(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=qe.fromString(e);Pe($E(r),9688,{name:e});let i=new Gl(r.get(1),r.get(3)),o=new ee(r.popFirst(5));return i.isEqual(t)||mr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function gI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Di=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},xi=class n extends yu{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Do(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Au("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new H(F.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};xi._jsonSchemaVersion="firestore/documentSnapshot/1.0",xi._jsonSchema={type:rt("string",xi._jsonSchemaVersion),bundleSource:rt("string","DocumentSnapshot"),bundleName:rt("string"),bundle:rt("string")};var Do=class extends xi{data(e={}){return super.data(e)}},xo=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Di(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Do(this._firestore,this._userDataWriter,r.key,r,new Di(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new H(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>{let l=new Do(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Di(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let l=new Do(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Di(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,m=-1;return c.type!==0&&(u=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),m=s.indexOf(c.doc.key)),{type:Rk(c.type),doc:l,oldIndex:u,newIndex:m}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new H(F.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ea.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function Rk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne(61501,{type:n})}}xo._jsonSchemaVersion="firestore/querySnapshot/1.0",xo._jsonSchema={type:rt("string",xo._jsonSchemaVersion),bundleSource:rt("string","QuerySnapshot"),bundleName:rt("string"),bundle:rt("string")};var _u=class extends sg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Br(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new gt(this.firestore,null,t)}};function yI(n,e,t){n=Vn(n,gt);let r=Vn(n.firestore,br),i=gI(n.converter,e,t);return Ru(r,[uI(Mu(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Bn.none())])}function Ou(n,e,t,...r){n=Vn(n,gt);let i=Vn(n.firestore,br),o=Mu(i),s;return s=typeof(e=_n(e))=="string"||e instanceof jo?Ak(o,"updateDoc",n._key,e,t,r):Mk(o,"updateDoc",n._key,e),Ru(i,[s.toMutation(n._key,Bn.exists(!0))])}function vI(n){return Ru(Vn(n.firestore,br),[new oa(n._key,Bn.none())])}function ya(n,e){let t=Vn(n.firestore,br),r=Qr(n),i=gI(n.converter,e);return Ru(t,[uI(Mu(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Bn.exists(!1))]).then(()=>r)}function Yr(n,...e){n=_n(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||$C(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if($C(e[r])){let l=e[r];e[r]=l.next?.bind(l),e[r+1]=l.error?.bind(l),e[r+2]=l.complete?.bind(l)}let o,s,c;if(n instanceof gt)s=Vn(n.firestore,br),c=gg(n._key.path),o={next:l=>{e[r]&&e[r](kk(s,n,l))},error:e[r+1],complete:e[r+2]};else{let l=Vn(n,Wr);s=Vn(l.firestore,br),c=l._query;let u=new _u(s);o={next:m=>{e[r]&&e[r](new xo(s,u,l,m))},error:e[r+1],complete:e[r+2]},Ok(n._query)}return function(u,m,g,b){let C=new Ym(b),O=new zm(m,C,g);return u.asyncQueue.enqueueAndForget(()=>j(this,null,function*(){return sk(yield VC(u),O)})),()=>{C.Nu(),u.asyncQueue.enqueueAndForget(()=>j(this,null,function*(){return ak(yield VC(u),O)}))}}(cI(s),c,i,o)}function Ru(n,e){return function(r,i){let o=new pr;return r.asyncQueue.enqueueAndForget(()=>j(this,null,function*(){return mk(yield Dk(r),i,o)})),o.promise}(cI(n),e)}function kk(n,e,t){let r=t.docs.get(e._key),i=new _u(n);return new xi(n,i,e._key,r,new Di(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Bo=i})(Ww),qs(new ur("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),c=new br(new Ip(r.getProvider("auth-internal")),new Sp(s,r.getProvider("app-check-internal")),function(u,m){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new H(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gl(u.options.projectId,m)}(s,i),s);return o=J({useFetchStreams:t},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Lr(Zw,eC,e),Lr(Zw,eC,"esm2020")})();var ku=(()=>{class n{constructor(){this.app=Ws(rn.firebaseConfig),this.db=Tu(this.app),this.messagesSubject=new Je([]),this.messages$=this.messagesSubject.asObservable(),this.logoutSubject=new Je(void 0),this.logout$=this.logoutSubject.asObservable(),this.listenForMessages()}listenForMessages(){let t=Hn(this.db,"messages"),r=Pu(t,pI("timestamp","asc"),Nu(100));Yr(r,i=>{let o=i.docs.map(s=>{let c=s.data();return{id:s.id,text:c.text,senderName:c.senderName,timestamp:c.timestamp.toDate(),userId:c.userId,conversationId:c.conversationId,audioBase64:c.audioBase64}});this.messagesSubject.next(o)},i=>{console.error("Error listening to messages:",i)})}sendMessage(t,r,i){return j(this,null,function*(){let o=Hn(this.db,"messages");yield ya(o,{text:t,senderName:r,conversationId:i,timestamp:new Date})})}sendAudioMessage(t,r,i){return j(this,null,function*(){let o=Hn(this.db,"messages");yield ya(o,{text:"\u{1F3A4} Voice Message",senderName:r,audioBase64:t,conversationId:i,timestamp:new Date})})}deleteMessage(t){return j(this,null,function*(){let r=Qr(this.db,"messages",t);yield vI(r)})}getMessages(){return this.messages$}triggerLogout(){this.logoutSubject.next()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var bI=(()=>{class n{constructor(){this.app=Ws(rn.firebaseConfig),this.db=Tu(this.app),this.peerConnection=null,this.localStream=null,this.remoteStream=null,this.callDocSubscription=null,this.offerCandidatesSubscription=null,this.answerCandidatesSubscription=null,this.incomingCall$=new In,this.callStatus$=new Je("idle"),this.remoteStream$=new Je(null),this.currentCallId=null,this.candidateQueue=[],this.servers={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:stun1.l.google.com:19302","stun:stun2.l.google.com:19302","stun:stun3.l.google.com:19302","stun:stun4.l.google.com:19302"]}]}}initializeCall(t,r){return j(this,null,function*(){this.currentCallId=null,this.callStatus$.next("calling");let i=Qr(Hn(this.db,"calls"));this.currentCallId=i.id,yield this.setupLocalMedia(),this.setupPeerConnection(this.currentCallId),this.localStream&&this.localStream.getTracks().forEach(l=>{this.peerConnection&&this.localStream&&this.peerConnection.addTrack(l,this.localStream)});let o=yield this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!1});yield this.peerConnection.setLocalDescription(o);let s={id:this.currentCallId,conversationId:t,callerName:r,status:"offering",offer:{type:o.type,sdp:o.sdp},timestamp:new Date};yield yI(i,s),this.callDocSubscription=Yr(i,l=>j(this,null,function*(){let u=l.data();if(!(!this.peerConnection||!u)){if(this.peerConnection.signalingState==="have-local-offer"&&u.answer){let m=new RTCSessionDescription(u.answer);yield this.peerConnection.setRemoteDescription(m),this.callStatus$.next("connected"),this.candidateQueue.forEach(g=>{this.peerConnection?.addIceCandidate(g).catch(b=>console.error("Error adding buffered candidate",b))}),this.candidateQueue=[]}(u.status==="ended"||u.status==="rejected")&&this.endCallInternal()}}));let c=Hn(i,"answerCandidates");this.answerCandidatesSubscription=Yr(c,l=>{l.docChanges().forEach(u=>{if(u.type==="added"){let m=u.doc.data(),g=new RTCIceCandidate(m);this.peerConnection?.remoteDescription?this.peerConnection.addIceCandidate(g).catch(b=>console.error("Error adding candidate",b)):(console.log("Buffering candidate..."),this.candidateQueue.push(g))}})})})}answerCall(t){return j(this,null,function*(){this.currentCallId=t.id,this.callStatus$.next("connected");let r=Qr(this.db,"calls",t.id);yield this.setupLocalMedia(),this.setupPeerConnection(t.id),this.localStream.getTracks().forEach(l=>{this.peerConnection.addTrack(l,this.localStream)});let i=t.offer;yield this.peerConnection.setRemoteDescription(new RTCSessionDescription(i));let o=yield this.peerConnection.createAnswer();yield this.peerConnection.setLocalDescription(o);let s={type:o.type,sdp:o.sdp};yield Ou(r,{answer:s,status:"answered"});let c=Hn(r,"offerCandidates");this.offerCandidatesSubscription=Yr(c,l=>{l.docChanges().forEach(u=>{if(u.type==="added"){let m=u.doc.data(),g=new RTCIceCandidate(m);this.peerConnection?.remoteDescription&&this.peerConnection.addIceCandidate(g).catch(b=>console.error("Error adding offer candidate",b))}})}),this.callDocSubscription=Yr(r,l=>{let u=l.data();u&&u.status==="ended"&&this.endCallInternal()})})}endCall(){return j(this,null,function*(){if(this.currentCallId){let t=Qr(this.db,"calls",this.currentCallId);yield Ou(t,{status:"ended"}).catch(()=>{})}this.endCallInternal()})}rejectCall(t){let r=Qr(this.db,"calls",t);Ou(r,{status:"rejected"}).catch(()=>{})}endCallInternal(){this.callStatus$.next("idle"),this.remoteStream$.next(null),this.localStream&&(this.localStream.getTracks().forEach(t=>t.stop()),this.localStream=null),this.remoteStream&&(this.remoteStream.getTracks().forEach(t=>t.stop()),this.remoteStream=null),this.peerConnection&&(this.peerConnection.close(),this.peerConnection=null),this.callDocSubscription&&(this.callDocSubscription(),this.callDocSubscription=null),this.offerCandidatesSubscription&&(this.offerCandidatesSubscription(),this.offerCandidatesSubscription=null),this.answerCandidatesSubscription&&(this.answerCandidatesSubscription(),this.answerCandidatesSubscription=null),this.currentCallId=null}setupLocalMedia(){return j(this,null,function*(){try{this.localStream=yield navigator.mediaDevices.getUserMedia({video:!1,audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}}),console.log("CallService: Local media acquired",this.localStream),this.localStream.getAudioTracks().forEach(t=>{console.log("Local Track:",t.label,t.readyState,t.enabled,t.muted),t.enabled=!0})}catch(t){throw console.error("CallService: Error getting user media",t),t}})}setupPeerConnection(t){this.peerConnection=new RTCPeerConnection(this.servers),this.peerConnection.oniceconnectionstatechange=()=>{let r=this.peerConnection?.iceConnectionState;console.log("CallService: ICE Connection State Change:",r),(r==="failed"||r==="disconnected")&&console.warn("CallService: Peer connection failed/disconnected. Check firewall/network."),r==="connected"&&console.log("CallService: P2P Connection Established!")},this.peerConnection.onicecandidateerror=r=>{console.error("CallService: ICE Candidate Error:",r.errorCode,r.errorText,r.url)},this.peerConnection.onicecandidate=r=>{if(r.candidate){console.log("CallService: Generated ICE Candidate:",r.candidate.type,r.candidate.address);let i="offerCandidates";this.peerConnection?.localDescription&&this.peerConnection.localDescription.type==="answer"&&(i="answerCandidates");let o=Hn(this.db,"calls",t,i);ya(o,r.candidate.toJSON())}},this.peerConnection.ontrack=r=>{console.log("CallService: Received remote track",r.streams[0]);let i=r.streams[0];this.remoteStream=i,this.remoteStream$.next(i)}}listenForIncomingCalls(t){this.callDocSubscription;let r=Hn(this.db,"calls"),i=Pu(r,Ag("conversationId","==",t),Ag("status","==","offering"),Nu(1));return Yr(i,o=>{o.docChanges().forEach(s=>{if(s.type==="added"){let c=s.doc.data();c.id=s.doc.id,this.incomingCall$.next(c)}})})}toggleMic(t){this.localStream&&this.localStream.getAudioTracks().forEach(r=>{r.enabled=!t})}setAudioOutput(t,r){return j(this,null,function*(){if("setSinkId"in r)try{return yield r.setSinkId(t),console.log(`Audio output set to ${t}`),!0}catch(i){return console.error("Error setting audio output:",i),!1}return console.warn("setSinkId not supported in this browser."),!1})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Vk=["messagesContainer"],Lk=["remoteAudio"];function jk(n,e){if(n&1){let t=se();f(0,"div",5)(1,"div",6)(2,"h2"),y(3,"\u{1F4CB} Customer Information"),h(),f(4,"p",7),y(5,"Please provide your information to use the chat"),h(),f(6,"form",8),U("ngSubmit",function(){V(t);let i=P();return L(i.registerCustomer())}),f(7,"div",9)(8,"label",10),y(9,"Full Name *"),h(),f(10,"input",11),Z("ngModelChange",function(i){V(t);let o=P();return te(o.customerInfo.name,i)||(o.customerInfo.name=i),L(i)}),h()(),f(11,"div",9)(12,"label",12),y(13,"Phone Number *"),h(),f(14,"input",13),Z("ngModelChange",function(i){V(t);let o=P();return te(o.customerInfo.phoneNumber,i)||(o.customerInfo.phoneNumber=i),L(i)}),h()(),f(15,"div",9)(16,"label",14),y(17,"Delivery Address *"),h(),f(18,"textarea",15),Z("ngModelChange",function(i){V(t);let o=P();return te(o.customerInfo.address,i)||(o.customerInfo.address=i),L(i)}),h()(),f(19,"button",16),y(20," Start Chat "),h()()()()}if(n&2){let t=P();_(10),X("ngModel",t.customerInfo.name),_(4),X("ngModel",t.customerInfo.phoneNumber),_(4),X("ngModel",t.customerInfo.address)}}function Bk(n,e){if(n&1){let t=se();f(0,"div",40),U("click",function(){let i=V(t).$implicit,o=P(3);return L(o.selectConversation(i))}),f(1,"span",41),y(2),h(),f(3,"span",42),y(4,"Click to view chat"),h()()}if(n&2){let t=e.$implicit,r=P(3);be("active",r.currentConversationId===t),_(2),G(t)}}function Uk(n,e){n&1&&(f(0,"div",43),y(1," No conversations yet. "),h())}function $k(n,e){if(n&1&&(f(0,"div",36)(1,"div",37),y(2," Conversations "),h(),f(3,"div",38),z(4,Bk,5,3,"div",39)(5,Uk,2,0,"div",30),h()()),n&2){let t=P(2);_(4),A("ngForOf",t.conversations),_(),A("ngIf",t.conversations.length===0)}}function zk(n,e){if(n&1){let t=se();f(0,"button",44),U("click",function(){V(t);let i=P(2);return L(i.logout())}),y(1," \u{1F6AA} "),h()}}function Hk(n,e){if(n&1){let t=se();f(0,"div",45)(1,"div",46)(2,"h3"),y(3,"\u{1F4DE} Incoming Call"),h(),f(4,"p"),y(5),h(),f(6,"div",47)(7,"button",48),U("click",function(){V(t);let i=P(2);return L(i.acceptCall())}),y(8,"Accept"),h(),f(9,"button",49),U("click",function(){V(t);let i=P(2);return L(i.rejectCall())}),y(10,"Reject"),h()()()()}if(n&2){let t=P(2);_(5),Y("",t.incomingCall.callerName," is calling...")}}function qk(n,e){if(n&1){let t=se();f(0,"button",60),U("click",function(){V(t);let i=P(3);return L(i.toggleMic())}),y(1),h()}if(n&2){let t=P(3);be("active",t.isMicMuted),_(),Y(" ",t.isMicMuted?"\u{1F507}":"\u{1F399}\uFE0F"," ")}}function Gk(n,e){if(n&1){let t=se();f(0,"div",50)(1,"div",46)(2,"div",51),y(3,"\u{1F464}"),h(),f(4,"h3"),y(5),h(),f(6,"p"),y(7),h(),f(8,"div",52),Te(9,"audio",53,1),h(),f(11,"div",54),Te(12,"div",55),h(),f(13,"div",56)(14,"button",57),U("click",function(){V(t);let i=P(2);return L(i.toggleSpeaker())}),y(15),h(),z(16,qk,2,3,"button",58),h(),f(17,"div",47)(18,"button",59),U("click",function(){V(t);let i=P(2);return L(i.endCall())}),y(19,"End Call"),h()()()()}if(n&2){let t=P(2);_(5),G(t.callStatus==="calling"?"Calling...":"Connected"),_(2),G(t.isAppUser?t.currentConversationId:"Support"),_(2),A("srcObject",t.remoteStream),_(3),gn("width",t.audioLevel,"%"),_(2),be("active",t.isSpeakerOn),_(),Y(" ",t.isSpeakerOn?"\u{1F50A}":"\u{1F508}"," "),_(),A("ngIf",t.isAppUser)}}function Wk(n,e){if(n&1&&(f(0,"div",43),y(1),h()),n&2){let t=P(2);_(),Y(" ",t.isAppUser&&!t.currentConversationId?"Select a conversation to start chatting.":"No messages yet. Start the conversation!"," ")}}function Kk(n,e){if(n&1&&(f(0,"div",68),y(1),h()),n&2){let t=P().$implicit;_(),G(t.text)}}function Qk(n,e){if(n&1&&(f(0,"div",69),Te(1,"audio",70),h()),n&2){let t=P().$implicit;_(),A("src",t.audioBase64,bi)}}function Yk(n,e){if(n&1){let t=se();f(0,"button",71),U("click",function(){V(t);let i=P().$implicit,o=P(2);return L(o.deleteMessage(i))}),y(1," \u{1F5D1}\uFE0F "),h()}}function Jk(n,e){if(n&1&&(f(0,"div",61)(1,"div",62)(2,"span",63),y(3),h(),f(4,"span",64),y(5),h()(),z(6,Kk,2,1,"div",65)(7,Qk,2,1,"div",66)(8,Yk,2,0,"button",67),h()),n&2){let t=e.$implicit,r=P(2);be("my-message",r.isMyMessage(t))("other-message",!r.isMyMessage(t)),_(3),G(t.senderName),_(2),G(r.formatTime(t.timestamp)),_(),A("ngIf",t.text),_(),A("ngIf",t.audioBase64),_(),A("ngIf",r.isMyMessage(t))}}function Xk(n,e){if(n&1){let t=se();f(0,"div",17),z(1,$k,6,2,"div",18),f(2,"div",19)(3,"div",20)(4,"div",21)(5,"h2"),y(6),h(),f(7,"div",22)(8,"span",23),y(9),h(),f(10,"button",24),U("click",function(){V(t);let i=P();return L(i.changeInfo())}),y(11," \u270F\uFE0F "),h(),z(12,zk,2,0,"button",25),f(13,"button",26),U("click",function(){V(t);let i=P();return L(i.startCall())}),y(14," \u{1F4DE} "),h()()()(),z(15,Hk,11,1,"div",27)(16,Gk,20,9,"div",28),f(17,"div",29,0),z(19,Wk,2,1,"div",30)(20,Jk,9,9,"div",31),h(),f(21,"div",32)(22,"input",33),Z("ngModelChange",function(i){V(t);let o=P();return te(o.newMessage,i)||(o.newMessage=i),L(i)}),U("keyup.enter",function(){V(t);let i=P();return L(i.sendMessage())}),h(),f(23,"button",34),U("click",function(){V(t);let i=P();return L(i.sendMessage())}),y(24," Send "),h(),f(25,"button",35),U("mousedown",function(i){V(t);let o=P();return L(o.startRecording(i))})("mouseup",function(i){V(t);let o=P();return L(o.stopRecording(i))})("mouseleave",function(i){V(t);let o=P();return L(o.stopRecording(i))})("touchstart",function(i){V(t);let o=P();return L(o.startRecording(i))})("touchend",function(i){V(t);let o=P();return L(o.stopRecording(i))}),y(26),h()()()()}if(n&2){let t=P();_(),A("ngIf",t.isAppUser),_(5),Y("\u{1F4AC} ",t.isAppUser&&t.currentConversationId?"Chat with "+t.currentConversationId:"Customer Support Chat",""),_(3),G(t.senderName),_(3),A("ngIf",!t.isAppUser),_(),A("disabled",t.isAppUser&&!t.currentConversationId),_(2),A("ngIf",t.callStatus==="incoming"&&t.incomingCall),_(),A("ngIf",t.callStatus==="connected"||t.callStatus==="calling"),_(3),A("ngIf",t.messages.length===0),_(),A("ngForOf",t.messages),_(2),X("ngModel",t.newMessage),A("disabled",t.isAppUser&&!t.currentConversationId),_(),A("disabled",!t.newMessage.trim()||t.isAppUser&&!t.currentConversationId),_(2),be("recording",t.isRecording),A("disabled",t.isAppUser&&!t.currentConversationId),_(),Y(" ",t.isRecording?"\u{1F534}":"\u{1F399}\uFE0F"," ")}}var wI=(()=>{class n{constructor(t,r,i,o){this.chatService=t,this.customerService=r,this.userService=i,this.callService=o,this.messages=[],this.newMessage="",this.senderName="",this.shouldScroll=!1,this.isRegistered=!1,this.customerInfo={name:"",phoneNumber:"",address:""},this.allCustomers=[],this.errorMessage="",this.isAppUser=!1,this.currentConversationId="",this.conversations=[],this.callStatus="idle",this.incomingCall=null,this.remoteStream=null,this.notificationAudioContext=null,this.audioUnlocked=!1,this.allMessagesCached=[],this.isRecording=!1,this.mediaRecorder=null,this.audioChunks=[],this.isSpeakerOn=!1,this.isMicMuted=!1,this.audioLevel=0,this.audioContext=null,this.analyser=null,this.dataArray=null,this.source=null,this.animationFrameId=null,this.requestNotificationPermission()}requestNotificationPermission(){"Notification"in window&&Notification.requestPermission()}onVisibilityChange(){document.hidden||(document.title="JJM Inventory")}unlockAudioContext(){if(this.audioUnlocked)return;if(!this.notificationAudioContext){let r=window.AudioContext||window.webkitAudioContext;this.notificationAudioContext=new r}let t=this.notificationAudioContext;if(t){t.state==="suspended"&&t.resume();try{let r=t.createBuffer(1,1,22050),i=t.createBufferSource();i.buffer=r,i.connect(t.destination),i.start(0),this.audioUnlocked=!0,console.log("ChatComponent: AudioContext unlocked via user interaction.")}catch(r){console.error("ChatComponent: Failed to unlock audio",r)}}}onUserInteraction(){this.unlockAudioContext()}ngOnInit(){this.customerSubscription=this.customerService.getCustomers().subscribe({next:t=>{this.allCustomers=t,this.checkLoginAndStatus()},error:t=>{console.error("Failed to load customers",t),this.checkLoginAndStatus()}}),this.logoutSubscription=this.chatService.logout$.subscribe(()=>{this.performForceLogout()}),this.callStatusSubscription=this.callService.callStatus$.subscribe(t=>this.callStatus=t),this.incomingCallSubscription=this.callService.incomingCall$.subscribe(t=>{this.callStatus==="idle"&&t.callerName!==this.senderName&&(this.incomingCall=t,this.callStatus="incoming")}),this.callService.remoteStream$.subscribe(t=>{this.remoteStream=t,t&&this.remoteAudio&&setTimeout(()=>{let r=this.remoteAudio.nativeElement;r.srcObject=t,r.muted=!1,r.volume=1;let i=t.getAudioTracks();i.length>0?(console.log("ChatComponent: Audio track found",i[0].label,"Enabled:",i[0].enabled,"Muted:",i[0].muted),i[0].enabled=!0):console.warn("ChatComponent: No audio tracks in stream!"),r.onloadedmetadata=()=>{console.log("ChatComponent: Audio metadata loaded, attempting play..."),r.play().then(()=>{console.log("ChatComponent: Audio playing successfully"),this.setupAudioVisualizer(t)}).catch(o=>console.error("ChatComponent: Error playing audio:",o))}},100)})}performForceLogout(){localStorage.removeItem("chatCustomerInfo"),localStorage.removeItem("chatUserName"),this.isRegistered=!1,this.isAppUser=!1,this.senderName="",this.conversations=[],this.currentConversationId="",this.customerInfo={name:"",phoneNumber:"",address:""},this.messages=[]}checkLoginAndStatus(){let t=localStorage.getItem("jjm_logged_in")==="true",r=localStorage.getItem("jjm_username"),i=localStorage.getItem("jjm_user_id");if(t){if(this.isAppUser=!0,this.isRegistered=!0,this.errorMessage="",this.senderName=r||"User",i){let s=this.userService.getUserById(i);s?(this.senderName=s.fullName||s.username,this.loadMessages()):this.userService.users$.pipe($i(1)).subscribe(c=>{let l=c.find(u=>u.id===i);l&&(this.senderName=l.fullName||l.username),this.loadMessages(),this.loadMessages()})}else this.loadMessages();return}let o=localStorage.getItem("chatCustomerInfo");if(o){let s=JSON.parse(o);this.allCustomers.find(l=>l.name.toLowerCase()===s.name.toLowerCase())?(this.customerInfo=s,this.senderName=this.customerInfo.name,this.isRegistered=!0,this.loadMessages(),this.incomingCallListener&&this.incomingCallListener(),this.incomingCallListener=this.callService.listenForIncomingCalls(this.senderName)):(localStorage.removeItem("chatCustomerInfo"),localStorage.removeItem("chatUserName"),this.isRegistered=!1)}}ngAfterViewChecked(){this.shouldScroll&&(this.scrollToBottom(),this.shouldScroll=!1)}ngOnDestroy(){this.customerSubscription&&this.customerSubscription.unsubscribe(),this.logoutSubscription&&this.logoutSubscription.unsubscribe(),this.incomingCallSubscription&&this.incomingCallSubscription.unsubscribe(),this.callStatusSubscription&&this.callStatusSubscription.unsubscribe(),this.incomingCallListener&&this.incomingCallListener()}registerCustomer(){if(this.errorMessage="",!this.customerInfo.name.trim()){alert("Please enter your name");return}if(!this.customerInfo.phoneNumber.trim()){alert("Please enter your phone number");return}if(!this.customerInfo.address.trim()){alert("Please enter your address");return}if(!/^[\d\s\-\+\(\)]+$/.test(this.customerInfo.phoneNumber)){alert("Please enter a valid phone number");return}if(this.allCustomers.length>0){if(!this.allCustomers.find(i=>i.name.toLowerCase()===this.customerInfo.name.trim().toLowerCase())){alert("Access Denied: You must be a registered customer to use the chat.");return}}else console.warn("Customer verification skipped: Customer list is empty or failed to load.");localStorage.setItem("chatCustomerInfo",JSON.stringify(this.customerInfo)),localStorage.setItem("chatUserName",this.customerInfo.name),this.senderName=this.customerInfo.name,this.isRegistered=!0,this.isRegistered=!0,this.loadMessages(),this.callService.listenForIncomingCalls(this.senderName)}loadMessages(){if(this.messagesSubscription){this.updateFilteredMessages(!1);return}this.messagesSubscription=this.chatService.getMessages().subscribe({next:t=>{if(this.allMessagesCached=t,this.isAppUser){let r=new Set;t.forEach(i=>{i.conversationId&&r.add(i.conversationId)}),this.conversations=Array.from(r)}this.updateFilteredMessages(!0)},error:t=>{console.error("Error loading messages:",t)}})}updateFilteredMessages(t){let r=this.isAppUser?this.currentConversationId:this.senderName,i=this.allMessagesCached.filter(l=>r?l.conversationId===r:!1),o=this.messages.length,s=i.length,c=o>0;if(this.messages=i,t&&c&&s>o){let l=i[s-1];this.isMyMessage(l)||(this.playNotificationSound(),document.hidden&&"Notification"in window&&Notification.permission==="granted"&&(new Notification("New Message",{body:l.text||"You received a new audio message",icon:"/assets/icons/icon-72x72.png"}),document.title=`(${s-o}) New Message - JJM Inventory`))}(!c||s>o)&&(this.shouldScroll=!0)}playNotificationSound(){try{let t=this.notificationAudioContext;if(!t){let c=window.AudioContext||window.webkitAudioContext;c&&(t=new c)}if(!t)return;t.state==="suspended"&&t.resume().catch(c=>console.warn("Could not resume audio context",c));let r=t.currentTime,i=t.createOscillator(),o=t.createOscillator(),s=t.createGain();i.type="sine",o.type="sine",i.frequency.setValueAtTime(1200,r),o.frequency.setValueAtTime(2400,r),i.connect(s),o.connect(s),s.connect(t.destination),s.gain.setValueAtTime(0,r),s.gain.linearRampToValueAtTime(.5,r+.02),s.gain.exponentialRampToValueAtTime(.01,r+.6),i.start(r),o.start(r),i.stop(r+.6),o.stop(r+.6)}catch(t){console.warn("Audio playback failed",t)}}sendMessage(){if(!this.newMessage.trim())return;let t=this.isAppUser?this.currentConversationId:this.senderName;if(this.isAppUser&&!t){alert("Please select a conversation first.");return}this.chatService.sendMessage(this.newMessage,this.senderName,t).then(()=>{this.newMessage="",this.shouldScroll=!0}).catch(r=>{console.error("Error sending message:",r),alert("Failed to send message. Please try again.")})}selectConversation(t){this.currentConversationId=t,this.updateFilteredMessages(!1),this.incomingCallListener&&this.incomingCallListener(),this.incomingCallListener=this.callService.listenForIncomingCalls(t)}scrollToBottom(){try{this.messagesContainer.nativeElement.scrollTop=this.messagesContainer.nativeElement.scrollHeight}catch(t){console.error("Scroll error:",t)}}formatTime(t){return new Date(t).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})}isMyMessage(t){return t.senderName===this.senderName}changeInfo(){alert("Do you want to update your customer information?"),this.isRegistered=!1}startRecording(t){t&&(t.preventDefault(),t.stopPropagation()),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!0}).then(r=>{this.mediaRecorder=new MediaRecorder(r),this.mediaRecorder.start(),this.isRecording=!0,this.audioChunks=[],this.mediaRecorder.addEventListener("dataavailable",i=>{i.data.size>0&&this.audioChunks.push(i.data)}),this.mediaRecorder.addEventListener("stop",()=>{let i=new Blob(this.audioChunks,{type:"audio/webm"}),o=new FileReader;o.readAsDataURL(i),o.onloadend=()=>{let s=o.result;s&&this.sendAudio(s)},r.getTracks().forEach(s=>s.stop())})}).catch(r=>{console.error("Error accessing microphone:",r),alert("Could not access microphone. Please allow permissions."),this.isRecording=!1}):alert("Audio recording is not supported in this browser.")}stopRecording(t){t&&(t.preventDefault(),t.stopPropagation()),this.mediaRecorder&&this.isRecording&&(this.mediaRecorder.stop(),this.isRecording=!1)}cancelRecording(){this.mediaRecorder&&this.isRecording&&this.stopRecording()}sendAudio(t){let r=this.isAppUser?this.currentConversationId:this.senderName;if(this.isAppUser&&!r){alert("Please select a conversation first.");return}this.chatService.sendAudioMessage(t,this.senderName,r).then(()=>{this.shouldScroll=!0}).catch(i=>{console.error("Error sending audio message:",i),alert("Failed to send audio message.")})}deleteMessage(t){this.isMyMessage(t)&&confirm("Are you sure you want to delete this message?")&&this.chatService.deleteMessage(t.id).catch(r=>{console.error("Error deleting message:",r),alert("Failed to delete message.")})}logout(){if(this.isAppUser){alert("You cannot logout of chat while logged into the application.");return}confirm("Are you sure you want to logout? Your information will be cleared.")&&(localStorage.removeItem("chatCustomerInfo"),localStorage.removeItem("chatUserName"),this.isRegistered=!1,this.customerInfo={name:"",phoneNumber:"",address:""},this.messages=[])}startCall(){let t=this.isAppUser?this.currentConversationId:this.senderName;if(!t){alert("Cannot start call: Unknown conversation.");return}this.callService.initializeCall(t,this.senderName)}acceptCall(){this.incomingCall&&(this.callService.answerCall(this.incomingCall),this.incomingCall=null)}rejectCall(){this.incomingCall&&(this.callService.rejectCall(this.incomingCall.id),this.incomingCall=null,this.callStatus="idle")}endCall(){this.callService.endCall(),this.isSpeakerOn=!1,this.isMicMuted=!1,this.cleanupAudioVisualizer()}setupAudioVisualizer(t){this.cleanupAudioVisualizer();try{let r=window.AudioContext||window.webkitAudioContext;this.audioContext=new r,this.audioContext.state==="suspended"&&(console.log("ChatComponent: AudioContext suspended. Attempting to resume..."),this.audioContext.resume().then(()=>console.log("ChatComponent: AudioContext resumed!"))),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=64,this.source=this.audioContext.createMediaStreamSource(t),this.source.connect(this.analyser),this.dataArray=new Uint8Array(this.analyser.frequencyBinCount);let i=()=>{if(!this.analyser||!this.dataArray)return;this.analyser.getByteFrequencyData(this.dataArray);let o=0;for(let c=0;c<this.dataArray.length;c++)o+=this.dataArray[c];let s=o/this.dataArray.length;this.audioLevel=Math.min(100,Math.max(0,s/255*300)),this.animationFrameId=requestAnimationFrame(i)};i()}catch(r){console.error("Error setting up visualizer",r)}}cleanupAudioVisualizer(){this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),this.source&&(this.source.disconnect(),this.source=null),this.audioContext&&(this.audioContext.close().catch(()=>{}),this.audioContext=null),this.audioLevel=0}toggleSpeaker(){return j(this,null,function*(){if(this.isSpeakerOn=!this.isSpeakerOn,this.remoteAudio&&this.remoteAudio.nativeElement){let r=(yield navigator.mediaDevices.enumerateDevices()).filter(i=>i.kind==="audiooutput");if(r.length>1&&this.isSpeakerOn){let i=r[0].deviceId==="default"?r[1].deviceId:r[0].deviceId;yield this.callService.setAudioOutput(i,this.remoteAudio.nativeElement)}else yield this.callService.setAudioOutput("default",this.remoteAudio.nativeElement)}})}toggleMic(){this.isMicMuted=!this.isMicMuted,this.callService.toggleMic(this.isMicMuted)}static{this.\u0275fac=function(r){return new(r||n)(W(ku),W(po),W(mo),W(bI))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-chat"]],viewQuery:function(r,i){if(r&1&&(mf(Vk,5),mf(Lk,5)),r&2){let o;gf(o=yf())&&(i.messagesContainer=o.first),gf(o=yf())&&(i.remoteAudio=o.first)}},hostBindings:function(r,i){r&1&&U("visibilitychange",function(){return i.onVisibilityChange()},!1,Is)("click",function(){return i.onUserInteraction()},!1,Is)("touchstart",function(){return i.onUserInteraction()},!1,Is)("keydown",function(){return i.onUserInteraction()},!1,Is)},standalone:!0,features:[ze],decls:3,vars:2,consts:[["messagesContainer",""],["remoteAudio",""],[1,"chat-container"],["class","registration-container",4,"ngIf"],["class","chat-wrapper",4,"ngIf"],[1,"registration-container"],[1,"registration-card"],[1,"registration-subtitle"],[1,"registration-form",3,"ngSubmit"],[1,"form-group"],["for","customerName"],["type","text","id","customerName","name","customerName","placeholder","Enter your full name","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","phoneNumber"],["type","tel","id","phoneNumber","name","phoneNumber","placeholder","e.g., +1 234 567 8900","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","address"],["id","address","name","address","placeholder","Enter your complete delivery address","rows","3","required","",1,"form-textarea",3,"ngModelChange","ngModel"],["type","submit",1,"btn-register"],[1,"chat-wrapper"],["class","chat-sidebar",4,"ngIf"],[1,"chat-main-area"],[1,"chat-header"],[1,"header-content"],[1,"user-info"],[1,"user-name"],["title","Edit information",1,"btn-edit",3,"click"],["class","btn-logout","title","Logout",3,"click",4,"ngIf"],["title","Start Audio Call",1,"btn-call",3,"click","disabled"],["class","call-overlay incoming",4,"ngIf"],["class","call-overlay active",4,"ngIf"],[1,"messages-container"],["class","no-messages",4,"ngIf"],["class","message",3,"my-message","other-message",4,"ngFor","ngForOf"],[1,"input-container"],["type","text","placeholder","Type a message...",1,"message-input",3,"ngModelChange","keyup.enter","ngModel","disabled"],[1,"btn-send",3,"click","disabled"],["title","Hold to talk",1,"btn-mic",3,"mousedown","mouseup","mouseleave","touchstart","touchend","disabled"],[1,"chat-sidebar"],[1,"sidebar-header"],[1,"conversation-list"],["class","conversation-item",3,"active","click",4,"ngFor","ngForOf"],[1,"conversation-item",3,"click"],[1,"conversation-name"],[1,"conversation-preview"],[1,"no-messages"],["title","Logout",1,"btn-logout",3,"click"],[1,"call-overlay","incoming"],[1,"call-content"],[1,"call-actions"],[1,"btn-accept",3,"click"],[1,"btn-reject",3,"click"],[1,"call-overlay","active"],[1,"call-avatar","pulsing"],[2,"opacity","0","height","0","width","0","overflow","hidden","position","absolute","pointer-events","none"],["autoplay","","playsinline","","controls","",3,"srcObject"],["title","Audio Signal Strength",1,"volume-meter"],[1,"volume-bar"],[1,"call-utilities"],["title","Toggle Speaker",1,"btn-round",3,"click"],["class","btn-round","title","Toggle Microphone",3,"active","click",4,"ngIf"],[1,"btn-end",3,"click"],["title","Toggle Microphone",1,"btn-round",3,"click"],[1,"message"],[1,"message-header"],[1,"sender-name"],[1,"message-time"],["class","message-text",4,"ngIf"],["class","message-audio",4,"ngIf"],["class","btn-delete-msg","title","Delete message",3,"click",4,"ngIf"],[1,"message-text"],[1,"message-audio"],["controls","",3,"src"],["title","Delete message",1,"btn-delete-msg",3,"click"]],template:function(r,i){r&1&&(f(0,"div",2),z(1,jk,21,3,"div",3)(2,Xk,27,16,"div",4),h()),r&2&&(_(),A("ngIf",!i.isRegistered),_(),A("ngIf",i.isRegistered))},dependencies:[Ue,ut,Ze,ft,tn,dt,ht,en,Ht,at,zt],styles:[".chat-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;background:var(--color-surface);overflow:hidden}.registration-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;padding:var(--space-lg);background:linear-gradient(135deg,#3b82f60d,#9333ea0d);overflow-y:auto;scroll-behavior:smooth}.registration-card[_ngcontent-%COMP%]{background:var(--color-surface);border-radius:var(--radius-lg);padding:var(--space-xl);max-width:500px;width:100%;box-shadow:0 10px 25px #0000001a;animation:_ngcontent-%COMP%_fadeInUp .5s ease-out}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.registration-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 var(--space-sm) 0;font-size:1.875rem;font-weight:700;text-align:center;background:linear-gradient(135deg,var(--color-primary),var(--color-accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.registration-subtitle[_ngcontent-%COMP%]{text-align:center;color:var(--color-text-muted);margin-bottom:var(--space-xl);font-size:.9375rem}.registration-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xs)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;font-size:.9375rem;color:var(--color-text)}.form-input[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{padding:.75rem 1rem;border:2px solid var(--color-border);border-radius:var(--radius-md);font-size:.9375rem;font-family:inherit;background:var(--color-bg);color:var(--color-text);transition:all .2s}.form-input[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f61a}.form-textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.btn-register[_ngcontent-%COMP%]{margin-top:var(--space-md);padding:.875rem 1.5rem;background:linear-gradient(135deg,var(--color-primary),var(--color-accent));color:#fff;border:none;border-radius:var(--radius-md);font-weight:600;font-size:1rem;cursor:pointer;transition:all .3s;box-shadow:0 4px 12px #3b82f64d}.btn-register[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 16px #3b82f666}.btn-register[_ngcontent-%COMP%]:active{transform:translateY(0)}.chat-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:100%}.chat-sidebar[_ngcontent-%COMP%]{width:280px;background:var(--color-surface);border-right:1px solid var(--color-border);display:flex;flex-direction:column}.chat-main-area[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;height:100%;position:relative}.sidebar-header[_ngcontent-%COMP%]{padding:var(--space-md);border-bottom:1px solid var(--color-border);font-weight:600;background:var(--color-bg)}.conversation-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.conversation-item[_ngcontent-%COMP%]{padding:var(--space-md);border-bottom:1px solid var(--color-border);cursor:pointer;transition:background .2s}.conversation-item[_ngcontent-%COMP%]:hover{background:var(--color-bg)}.conversation-item.active[_ngcontent-%COMP%]{background:#3b82f61a;border-left:3px solid var(--color-primary)}.conversation-name[_ngcontent-%COMP%]{font-weight:600;font-size:.9375rem;color:var(--color-text);display:block}.conversation-preview[_ngcontent-%COMP%]{font-size:.8125rem;color:var(--color-text-muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;margin-top:4px}.chat-header[_ngcontent-%COMP%]{padding:var(--space-lg);background:linear-gradient(135deg,var(--color-primary),var(--color-accent));color:#fff;border-bottom:2px solid var(--color-border);position:relative;z-index:10;flex-shrink:0}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:var(--space-md)}.chat-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:600}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);position:relative;z-index:20}.user-name[_ngcontent-%COMP%]{font-weight:500;padding:.5rem 1rem;background:#fff3;border-radius:20px;font-size:.9375rem}.btn-edit[_ngcontent-%COMP%], .btn-logout[_ngcontent-%COMP%]{background:#ffffff4d;border:2px solid rgba(255,255,255,.5);padding:.625rem;border-radius:50%;cursor:pointer;font-size:1.125rem;transition:all .2s;line-height:1;position:relative;z-index:30;pointer-events:auto;color:#fff;min-width:36px;min-height:36px;display:flex;align-items:center;justify-content:center}.btn-edit[_ngcontent-%COMP%]:hover, .btn-logout[_ngcontent-%COMP%]:hover{background:#ffffff80;transform:scale(1.15);border-color:#fff}.messages-container[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:var(--space-lg);background:var(--color-bg);display:flex;flex-direction:column;gap:var(--space-md)}.no-messages[_ngcontent-%COMP%]{text-align:center;color:var(--color-text-muted);padding:var(--space-xl);font-style:italic}.message[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-width:70%;animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.my-message[_ngcontent-%COMP%]{align-self:flex-end}.other-message[_ngcontent-%COMP%]{align-self:flex-start}.message-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;gap:var(--space-sm)}.sender-name[_ngcontent-%COMP%]{font-weight:600;font-size:.875rem;color:var(--color-text-muted)}.my-message[_ngcontent-%COMP%]   .sender-name[_ngcontent-%COMP%]{color:var(--color-primary)}.message-time[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted)}.message-text[_ngcontent-%COMP%]{padding:.75rem 1rem;border-radius:12px;word-wrap:break-word;line-height:1.5}.my-message[_ngcontent-%COMP%]   .message-text[_ngcontent-%COMP%]{background:var(--color-primary);color:#fff;border-bottom-right-radius:4px}.other-message[_ngcontent-%COMP%]   .message-text[_ngcontent-%COMP%]{background:var(--color-surface);color:var(--color-text);border:1px solid var(--color-border);border-bottom-left-radius:4px}.input-container[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm);padding:var(--space-lg);background:var(--color-surface);border-top:1px solid var(--color-border)}.message-input[_ngcontent-%COMP%]{flex:1;padding:.75rem 1rem;border:1px solid var(--color-border);border-radius:24px;font-size:.9375rem;background:var(--color-bg);color:var(--color-text);transition:all .2s}.message-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f61a}.btn-send[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:var(--color-primary);color:#fff;border:none;border-radius:24px;font-weight:600;cursor:pointer;transition:all .2s}.btn-send[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--color-accent);transform:translateY(-1px);box-shadow:0 4px 8px #00000026}.btn-send[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--color-bg)}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--color-border);border-radius:4px}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--color-text-muted)}.registration-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.registration-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--color-bg)}.registration-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--color-border);border-radius:4px}.registration-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--color-text-muted)}@media (max-width: 640px){.message[_ngcontent-%COMP%]{max-width:85%}.chat-wrapper[_ngcontent-%COMP%]{flex-direction:column}.chat-sidebar[_ngcontent-%COMP%]{width:100%;height:30%;border-right:none;border-bottom:1px solid var(--color-border)}.chat-main-area[_ngcontent-%COMP%]{height:70%}.chat-header[_ngcontent-%COMP%]{padding:var(--space-md);padding-right:60px}.chat-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem;max-width:60%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.header-content[_ngcontent-%COMP%]{flex-direction:row;align-items:center}.user-info[_ngcontent-%COMP%]{font-size:.8rem}.btn-edit[_ngcontent-%COMP%], .btn-logout[_ngcontent-%COMP%]{padding:.4rem;min-width:32px;min-height:32px}.registration-card[_ngcontent-%COMP%]{padding:var(--space-lg)}.registration-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}}.btn-mic[_ngcontent-%COMP%]{width:46px;height:46px;border-radius:50%;border:none;background:var(--color-surface);border:1px solid var(--color-border);font-size:1.25rem;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center;flex-shrink:0;-webkit-user-select:none;user-select:none;touch-action:manipulation}.btn-mic[_ngcontent-%COMP%]:hover{background:var(--color-bg);transform:scale(1.05)}.btn-mic[_ngcontent-%COMP%]:active{transform:scale(.95)}.btn-mic.recording[_ngcontent-%COMP%]{background:#ef4444;border-color:#ef4444;color:#fff;transform:scale(1.1);animation:_ngcontent-%COMP%_pulse 1.5s infinite}@keyframes _ngcontent-%COMP%_pulse{0%{box-shadow:0 0 #ef444466}70%{box-shadow:0 0 0 10px #ef444400}to{box-shadow:0 0 #ef444400}}.message-audio[_ngcontent-%COMP%]{padding:.25rem;border-radius:12px;background:transparent;width:100%}audio[_ngcontent-%COMP%]{height:36px;max-width:100%;border-radius:18px}.btn-delete-msg[_ngcontent-%COMP%]{align-self:flex-end;background:transparent;border:none;font-size:.8rem;opacity:.5;cursor:pointer;padding:0;margin-top:4px;transition:opacity .2s}.btn-delete-msg[_ngcontent-%COMP%]:hover{opacity:1;transform:scale(1.1)}.btn-call[_ngcontent-%COMP%]{background:#10b98133;border:1px solid rgba(16,185,129,.5);color:#10b981;padding:.625rem;border-radius:50%;cursor:pointer;font-size:1.125rem;transition:all .2s;min-width:36px;min-height:36px;display:flex;align-items:center;justify-content:center}.btn-call[_ngcontent-%COMP%]:hover:not(:disabled){background:#10b98166;transform:scale(1.15);color:#fff;border-color:#fff}.btn-call[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;filter:grayscale(1)}.call-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#000000d9;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);z-index:100;display:flex;align-items:center;justify-content:center;animation:fadeIn .3s}.call-content[_ngcontent-%COMP%]{background:var(--color-surface);padding:2rem;border-radius:20px;text-align:center;width:90%;max-width:350px;box-shadow:0 20px 50px #00000080;border:1px solid var(--color-border)}.call-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:1rem 0;font-size:1.5rem}.call-avatar[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem;display:inline-block}.pulsing[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse-avatar 2s infinite}@keyframes _ngcontent-%COMP%_pulse-avatar{0%{transform:scale(1);opacity:1;text-shadow:0 0 0 rgba(16,185,129,.7)}50%{transform:scale(1.1);opacity:.8;text-shadow:0 0 20px rgba(16,185,129,0)}to{transform:scale(1);opacity:1;text-shadow:0 0 0 rgba(16,185,129,0)}}.call-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1rem;margin-top:2rem}.btn-accept[_ngcontent-%COMP%], .btn-reject[_ngcontent-%COMP%], .btn-end[_ngcontent-%COMP%]{padding:.8rem 1.5rem;border-radius:30px;font-weight:600;border:none;cursor:pointer;transition:transform .2s;color:#fff}.btn-accept[_ngcontent-%COMP%]{background:#10b981}.btn-reject[_ngcontent-%COMP%], .btn-end[_ngcontent-%COMP%]{background:#ef4444}.btn-accept[_ngcontent-%COMP%]:hover, .btn-reject[_ngcontent-%COMP%]:hover, .btn-end[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.call-utilities[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1.5rem;margin-bottom:2rem}.volume-meter[_ngcontent-%COMP%]{width:200px;height:6px;background:#fff3;border-radius:3px;margin:0 auto 1.5rem;overflow:hidden;position:relative}.volume-bar[_ngcontent-%COMP%]{height:100%;background:#10b981;width:0%;transition:width .1s linear}.btn-round[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;border:1px solid var(--color-border);background:var(--color-surface);font-size:1.5rem;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s;color:var(--color-text)}.btn-round[_ngcontent-%COMP%]:hover{background:var(--color-bg);transform:scale(1.1)}.btn-round.active[_ngcontent-%COMP%]{background:#fff;color:#000;border-color:#fff}"]})}}return n})();function Zk(n,e){n&1&&(f(0,"div",10),y(1," Loading users... "),h())}function eF(n,e){if(n&1){let t=se();f(0,"tr")(1,"td")(2,"div",13)(3,"span",14),y(4),h(),y(5),h()(),f(6,"td"),y(7),h(),f(8,"td")(9,"span",15),y(10),xe(11,"titlecase"),h()(),f(12,"td"),y(13),xe(14,"date"),h(),f(15,"td")(16,"div",16)(17,"button",17),U("click",function(){let i=V(t).$implicit,o=P(2);return L(o.openEditModal(i))}),y(18,"\u270F\uFE0F"),h(),f(19,"button",18),U("click",function(){let i=V(t).$implicit,o=P(2);return L(o.deleteUser(i.id))}),y(20,"\u{1F5D1}\uFE0F"),h()()()()}if(n&2){let t=e.$implicit;_(4),G(t.username.charAt(0).toUpperCase()),_(),Y(" ",t.username," "),_(2),G(t.fullName),_(2),be("admin",t.role==="admin"),_(),Y(" ",xs(11,7,t.role)," "),_(3),G(Ne(14,9,t.createdAt,"mediumDate"))}}function tF(n,e){if(n&1&&(f(0,"table",11)(1,"thead")(2,"tr")(3,"th"),y(4,"Username"),h(),f(5,"th"),y(6,"Full Name"),h(),f(7,"th"),y(8,"Role"),h(),f(9,"th"),y(10,"Created At"),h(),f(11,"th"),y(12,"Actions"),h()()(),f(13,"tbody"),z(14,eF,21,12,"tr",12),h()()),n&2){let t=P();_(14),A("ngForOf",t.users)}}function nF(n,e){n&1&&(f(0,"div",19)(1,"p"),y(2,"No users found. (This shouldn't happen as default admin exists)"),h()())}function rF(n,e){n&1&&(f(0,"small",33),y(1,"Only enter if you wish to change it."),h())}function iF(n,e){if(n&1){let t=se();f(0,"div",20)(1,"div",21)(2,"h3"),y(3),h(),f(4,"div",22)(5,"label"),y(6,"Username"),h(),f(7,"input",23),Z("ngModelChange",function(i){V(t);let o=P();return te(o.currentUser.username,i)||(o.currentUser.username=i),L(i)}),h()(),f(8,"div",22)(9,"label"),y(10,"Full Name"),h(),f(11,"input",24),Z("ngModelChange",function(i){V(t);let o=P();return te(o.currentUser.fullName,i)||(o.currentUser.fullName=i),L(i)}),h()(),f(12,"div",22)(13,"label"),y(14,"Password"),h(),f(15,"input",25),Z("ngModelChange",function(i){V(t);let o=P();return te(o.formPassword,i)||(o.formPassword=i),L(i)}),h(),z(16,rF,2,0,"small",26),h(),f(17,"div",22)(18,"label"),y(19,"Role"),h(),f(20,"select",27),Z("ngModelChange",function(i){V(t);let o=P();return te(o.currentUser.role,i)||(o.currentUser.role=i),L(i)}),f(21,"option",28),y(22,"User"),h(),f(23,"option",29),y(24,"Admin"),h()()(),f(25,"div",30)(26,"button",31),U("click",function(){V(t);let i=P();return L(i.closeModal())}),y(27,"Cancel"),h(),f(28,"button",32),U("click",function(){V(t);let i=P();return L(i.saveUser())}),y(29),h()()()()}if(n&2){let t=P();_(3),G(t.isEditing?"Edit User":"Add New User"),_(4),X("ngModel",t.currentUser.username),_(4),X("ngModel",t.currentUser.fullName),_(4),X("ngModel",t.formPassword),A("placeholder",t.isEditing?"Leave blank to keep current":"Enter password"),_(),A("ngIf",t.isEditing),_(4),X("ngModel",t.currentUser.role),_(9),G(t.isEditing?"Update":"Create")}}var CI=(()=>{class n{constructor(t){this.userService=t,this.users=[],this.isLoading=!1,this.isModalOpen=!1,this.isEditing=!1,this.currentUser={username:"",fullName:"",role:"user"},this.formPassword=""}ngOnInit(){this.loadUsers()}loadUsers(){this.isLoading=!0;let t=localStorage.getItem("jjm_user_id");this.userService.getUsers().subscribe(r=>{t?this.users=r.filter(i=>i.userId===t):this.users=r,this.isLoading=!1})}openAddModal(){this.isEditing=!1,this.formPassword="",this.currentUser={username:"",fullName:"",role:"user"},this.isModalOpen=!0}openEditModal(t){this.isEditing=!0,this.formPassword="",this.currentUser=J({},t),this.isModalOpen=!0}closeModal(){this.isModalOpen=!1}saveUser(){if(!this.currentUser.username||!this.currentUser.role){alert("Please fill in username and role.");return}if(!this.isEditing&&!this.formPassword){alert("Password is required for new users.");return}if(this.isEditing&&this.currentUser.id){let t={id:this.currentUser.id,username:this.currentUser.username,fullName:this.currentUser.fullName,role:this.currentUser.role};this.formPassword&&(t.password=this.formPassword),this.userService.updateUser(t).subscribe(()=>{this.closeModal()})}else{let t=localStorage.getItem("jjm_user_id")||"system",r=ue(J({},this.currentUser),{password:this.formPassword,createdBy:t});this.userService.addUser(r).subscribe(()=>{this.closeModal()})}}deleteUser(t){confirm("Are you sure you want to delete this user?")&&this.userService.deleteUser(t).subscribe()}static{this.\u0275fac=function(r){return new(r||n)(W(mo))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-user-management"]],standalone:!0,features:[ze],decls:16,vars:4,consts:[[1,"user-management-container"],[1,"page-header"],[1,"header-text"],[1,"subtitle"],[1,"btn-add",3,"click"],[1,"users-list-container"],["class","loading-state",4,"ngIf"],["class","users-table",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"loading-state"],[1,"users-table"],[4,"ngFor","ngForOf"],[1,"user-name-cell"],[1,"avatar"],[1,"role-badge"],[1,"actions"],["title","Edit",1,"btn-icon","edit",3,"click"],["title","Delete",1,"btn-icon","delete",3,"click"],[1,"empty-state"],[1,"modal-overlay"],[1,"modal-card"],[1,"form-group"],["type","text","placeholder","Enter username",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter full name",3,"ngModelChange","ngModel"],["type","text",3,"ngModelChange","ngModel","placeholder"],["class","hint",4,"ngIf"],[3,"ngModelChange","ngModel"],["value","user"],["value","admin"],[1,"modal-actions"],[1,"btn-cancel",3,"click"],[1,"btn-save",3,"click"],[1,"hint"]],template:function(r,i){r&1&&(f(0,"div",0)(1,"header",1)(2,"div",2)(3,"h2"),y(4,"\u{1F465} User Management"),h(),f(5,"p",3),y(6,"Manage system access and roles"),h()(),f(7,"button",4),U("click",function(){return i.openAddModal()}),f(8,"span"),y(9,"+"),h(),y(10," Add User "),h()(),f(11,"div",5),z(12,Zk,2,0,"div",6)(13,tF,15,1,"table",7)(14,nF,3,0,"div",8),h(),z(15,iF,30,8,"div",9),h()),r&2&&(_(12),A("ngIf",i.isLoading),_(),A("ngIf",!i.isLoading&&i.users.length>0),_(),A("ngIf",!i.isLoading&&i.users.length===0),_(),A("ngIf",i.isModalOpen))},dependencies:[Ue,ut,Ze,sl,On,ft,Rn,kn,dt,nn,ht,at],styles:[".user-management-container[_ngcontent-%COMP%]{padding:var(--space-xl);max-width:1200px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--space-xl);background:var(--color-surface);padding:var(--space-lg);border-radius:var(--radius-lg);box-shadow:var(--shadow-sm);border:1px solid var(--color-border)}.header-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;color:var(--color-text)}.subtitle[_ngcontent-%COMP%]{margin:4px 0 0;color:var(--color-text-muted);font-size:.875rem}.btn-add[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);padding:.75rem 1.5rem;background:var(--color-primary);color:#fff;border:none;border-radius:var(--radius-md);font-weight:600;cursor:pointer;transition:all .2s}.btn-add[_ngcontent-%COMP%]:hover{background:var(--color-accent);transform:translateY(-2px);box-shadow:var(--shadow-md)}.users-list-container[_ngcontent-%COMP%]{background:var(--color-surface);border-radius:var(--radius-lg);border:1px solid var(--color-border);overflow:hidden;box-shadow:var(--shadow-sm)}.users-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.users-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .users-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:var(--space-md) var(--space-lg);text-align:left;border-bottom:1px solid var(--color-border)}.users-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:var(--color-bg);font-weight:600;color:var(--color-text-muted);font-size:.875rem;text-transform:uppercase;letter-spacing:.5px}.users-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:var(--color-bg)}.user-name-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;font-weight:500}.avatar[_ngcontent-%COMP%]{width:32px;height:32px;background:var(--color-primary);color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.875rem;font-weight:700}.role-badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:999px;font-size:.75rem;font-weight:600;background:var(--color-bg);color:var(--color-text);border:1px solid var(--color-border)}.role-badge.admin[_ngcontent-%COMP%]{background:#3b82f61a;color:var(--color-primary);border-color:#3b82f633}.loading-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{padding:var(--space-2xl);text-align:center;color:var(--color-text-muted)}.actions[_ngcontent-%COMP%]{display:flex;gap:8px}.btn-icon[_ngcontent-%COMP%]{padding:6px;background:transparent;border:none;cursor:pointer;border-radius:4px;transition:background .2s}.btn-icon[_ngcontent-%COMP%]:hover{background:#0000000d}.btn-icon.delete[_ngcontent-%COMP%]:hover{background:#ef44441a}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.modal-card[_ngcontent-%COMP%]{background:var(--color-surface);padding:var(--space-xl);border-radius:var(--radius-lg);width:400px;max-width:90%;box-shadow:var(--shadow-xl);animation:_ngcontent-%COMP%_slideUp .3s cubic-bezier(.16,1,.3,1)}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 var(--space-lg) 0;font-size:1.25rem;color:var(--color-text)}.form-group[_ngcontent-%COMP%]{margin-bottom:var(--space-lg)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:var(--space-xs);font-weight:500;font-size:.875rem;color:var(--color-text)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-bg);color:var(--color-text);font-size:.9375rem}.hint[_ngcontent-%COMP%]{display:block;margin-top:4px;font-size:.75rem;color:var(--color-text-muted)}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:var(--space-md);margin-top:var(--space-xl)}.btn-cancel[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:transparent;border:1px solid var(--color-border);color:var(--color-text);border-radius:var(--radius-md);cursor:pointer;font-weight:500}.btn-save[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:var(--color-primary);color:#fff;border:none;border-radius:var(--radius-md);cursor:pointer;font-weight:600}"]})}}return n})();function oF(n,e){n&1&&Te(0,"app-login")}function sF(n,e){if(n&1){let t=se();f(0,"button",22),U("click",function(){V(t);let i=P(2);return L(i.setActiveTab("users"))}),f(1,"span",23),y(2,"\u{1F464}"),h(),f(3,"span",24),y(4,"Users"),h()()}if(n&2){let t=P(2);be("active",t.activeTab==="users")}}function aF(n,e){n&1&&(f(0,"div",29)(1,"div",30),Te(2,"app-landing"),h()())}function cF(n,e){n&1&&(f(0,"div",29)(1,"div",30),Te(2,"app-product-form"),h()())}function lF(n,e){n&1&&(f(0,"div",29)(1,"div",30),Te(2,"app-pos-calculator"),h()())}function uF(n,e){n&1&&(f(0,"div",29)(1,"div",30),Te(2,"app-inventory-list"),h()())}function dF(n,e){n&1&&(f(0,"div",29)(1,"div",30),Te(2,"app-customer-form"),h()())}function hF(n,e){n&1&&(f(0,"div",29)(1,"div",30),Te(2,"app-expenses"),h()())}function fF(n,e){n&1&&(f(0,"div",29)(1,"div",30),Te(2,"app-reports"),h()())}function pF(n,e){n&1&&(f(0,"div",29)(1,"div",30),Te(2,"app-activity-logs"),h()())}function mF(n,e){n&1&&(f(0,"div",29)(1,"div",30),Te(2,"app-user-management"),h()())}function gF(n,e){if(n&1){let t=se();f(0,"div")(1,"header",8)(2,"div",9)(3,"div",10)(4,"div",11)(5,"div",12),y(6,"\u{1F4E6}"),h(),f(7,"div",13)(8,"h1"),y(9,"JJM Inventory"),h(),f(10,"p",14),y(11,"Smart Business Management"),h()()(),f(12,"div",15)(13,"button",16),U("click",function(){V(t);let i=P();return L(i.toggleTheme())}),f(14,"span",17),y(15),h()(),f(16,"button",18),U("click",function(){V(t);let i=P();return L(i.logout())}),f(17,"span",19),y(18,"\u{1F6AA}"),h(),f(19,"span",20),y(20,"Logout"),h()()()()()(),f(21,"main",9)(22,"nav",21)(23,"button",22),U("click",function(){V(t);let i=P();return L(i.setActiveTab("home"))}),f(24,"span",23),y(25,"\u{1F3E0}"),h(),f(26,"span",24),y(27,"Home"),h()(),f(28,"button",22),U("click",function(){V(t);let i=P();return L(i.setActiveTab("add-product"))}),f(29,"span",23),y(30,"\u{1F4E6}"),h(),f(31,"span",24),y(32,"Add Product"),h()(),f(33,"button",22),U("click",function(){V(t);let i=P();return L(i.setActiveTab("sell"))}),f(34,"span",23),y(35,"\u{1F4B0}"),h(),f(36,"span",24),y(37,"Sell"),h()(),f(38,"button",22),U("click",function(){V(t);let i=P();return L(i.setActiveTab("inventory"))}),f(39,"span",23),y(40,"\u{1F4CA}"),h(),f(41,"span",24),y(42,"Inventory"),h()(),f(43,"button",22),U("click",function(){V(t);let i=P();return L(i.setActiveTab("customers"))}),f(44,"span",23),y(45,"\u{1F465}"),h(),f(46,"span",24),y(47,"Customers"),h()(),f(48,"button",22),U("click",function(){V(t);let i=P();return L(i.setActiveTab("expenses"))}),f(49,"span",23),y(50,"\u{1F4B8}"),h(),f(51,"span",24),y(52,"Expenses"),h()(),f(53,"button",22),U("click",function(){V(t);let i=P();return L(i.setActiveTab("reports"))}),f(54,"span",23),y(55,"\u{1F4C8}"),h(),f(56,"span",24),y(57,"Reports"),h()(),f(58,"button",22),U("click",function(){V(t);let i=P();return L(i.setActiveTab("logs"))}),f(59,"span",23),y(60,"\u{1F4CB}"),h(),f(61,"span",24),y(62,"Activity Logs"),h()(),z(63,sF,5,2,"button",25),h(),f(64,"div",26),z(65,aF,3,0,"div",27)(66,cF,3,0,"div",27)(67,lF,3,0,"div",27)(68,uF,3,0,"div",27)(69,dF,3,0,"div",27)(70,hF,3,0,"div",27)(71,fF,3,0,"div",27)(72,pF,3,0,"div",27)(73,mF,3,0,"div",27),h()(),f(74,"footer",28)(75,"div",9)(76,"p"),y(77,"\xA9 2024 JJM Inventory. All rights reserved."),h()()()()}if(n&2){let t=P();_(13),A("title",t.isDarkTheme?"Switch to Light Mode":"Switch to Dark Mode"),_(2),G(t.isDarkTheme?"\u2600\uFE0F":"\u{1F319}"),_(8),be("active",t.activeTab==="home"),_(5),be("active",t.activeTab==="add-product"),_(5),be("active",t.activeTab==="sell"),_(5),be("active",t.activeTab==="inventory"),_(5),be("active",t.activeTab==="customers"),_(5),be("active",t.activeTab==="expenses"),_(5),be("active",t.activeTab==="reports"),_(5),be("active",t.activeTab==="logs"),_(5),A("ngIf",t.userRole==="admin"),_(2),A("ngIf",t.activeTab==="home"),_(),A("ngIf",t.activeTab==="add-product"),_(),A("ngIf",t.activeTab==="sell"),_(),A("ngIf",t.activeTab==="inventory"),_(),A("ngIf",t.activeTab==="customers"),_(),A("ngIf",t.activeTab==="expenses"),_(),A("ngIf",t.activeTab==="reports"),_(),A("ngIf",t.activeTab==="logs"),_(),A("ngIf",t.activeTab==="users"&&t.userRole==="admin")}}var EI=(()=>{class n{constructor(t,r){this.inventoryService=t,this.chatService=r,this.title="JJM Inventory",this.activeTab="home",this.isDarkTheme=!1,this.isLoggedIn=!1,this.userRole="",this.isChatOpen=!1,this.isLoggedIn=localStorage.getItem("jjm_logged_in")==="true",this.userRole=localStorage.getItem("jjm_role")||"user";let i=localStorage.getItem("jjm_theme");this.isDarkTheme=i==="dark",this.applyTheme(),window.inventoryService=this.inventoryService}setActiveTab(t){t==="users"&&this.userRole!=="admin"||(this.activeTab=t)}toggleTheme(){this.isDarkTheme=!this.isDarkTheme,this.applyTheme(),localStorage.setItem("jjm_theme",this.isDarkTheme?"dark":"light")}logout(){this.chatService.triggerLogout(),localStorage.removeItem("jjm_logged_in"),localStorage.removeItem("jjm_username"),localStorage.removeItem("jjm_user_id"),localStorage.removeItem("jjm_role"),localStorage.removeItem("chatCustomerInfo"),localStorage.removeItem("chatUserName"),this.isLoggedIn=!1,window.location.reload()}applyTheme(){this.isDarkTheme?document.body.classList.add("dark-theme"):document.body.classList.remove("dark-theme")}toggleChat(){this.isChatOpen=!this.isChatOpen}static{this.\u0275fac=function(r){return new(r||n)(W(on),W(ku))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-root"]],standalone:!0,features:[ze],decls:13,vars:6,consts:[[4,"ngIf"],[1,"chat-widget"],["title","Open Chat",1,"chat-toggle-button",3,"click"],[1,"chat-icon"],[1,"chat-label"],[1,"chat-modal"],[1,"chat-modal-content"],["title","Close Chat",1,"chat-modal-close",3,"click"],[1,"header"],[1,"container"],[1,"header-content"],[1,"logo-section"],[1,"logo-icon"],[1,"brand-info"],[1,"tagline"],[1,"header-actions"],[1,"theme-toggle",3,"click","title"],[1,"theme-icon"],["title","Logout",1,"logout-button",3,"click"],[1,"logout-icon"],[1,"logout-text"],[1,"tabs"],[1,"tab-button",3,"click"],[1,"tab-icon"],[1,"tab-label"],["class","tab-button",3,"active","click",4,"ngIf"],[1,"tab-content"],["class","tab-pane",4,"ngIf"],[1,"footer"],[1,"tab-pane"],[1,"tab-pane-content"]],template:function(r,i){r&1&&(z(0,oF,1,0,"app-login",0)(1,gF,78,28,"div",0),f(2,"div",1)(3,"button",2),U("click",function(){return i.toggleChat()}),f(4,"span",3),y(5,"\u{1F4AC}"),h(),f(6,"span",4),y(7,"Chat"),h()(),f(8,"div",5)(9,"div",6),Te(10,"app-chat"),h(),f(11,"button",7),U("click",function(){return i.toggleChat()}),y(12,"\u2715"),h()()()),r&2&&(A("ngIf",!i.isLoggedIn),_(),A("ngIf",i.isLoggedIn),_(2),be("active",i.isChatOpen),_(5),be("open",i.isChatOpen))},dependencies:[Ue,Ze,uw,dw,hw,fw,pw,mw,gw,yw,vw,wI,CI],styles:['.header[_ngcontent-%COMP%]{background:var(--color-surface);border-bottom:1px solid var(--color-border);padding:var(--space-lg) 0;position:sticky;top:0;z-index:100;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background:#fffffff2}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.logo-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-md)}.logo-icon[_ngcontent-%COMP%]{font-size:2.5rem;animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-5px)}}.brand-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--color-text);margin:0;font-size:1.5rem;font-weight:700;letter-spacing:-.5px}.tagline[_ngcontent-%COMP%]{color:var(--color-text-muted);font-size:.75rem;margin:0;font-weight:500}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-md)}.theme-toggle[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:var(--radius-xl);background:var(--color-bg);border:1px solid var(--color-border);display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all var(--transition-base);padding:0}.theme-toggle[_ngcontent-%COMP%]:hover{background:var(--color-primary);border-color:var(--color-primary);transform:rotate(180deg) scale(1.1);box-shadow:var(--shadow-md)}.theme-icon[_ngcontent-%COMP%]{font-size:1.25rem;transition:transform var(--transition-base)}.logout-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);padding:var(--space-sm) var(--space-md);background:#ef44441a;border:1px solid rgba(239,68,68,.3);border-radius:var(--radius-lg);color:var(--color-danger);font-weight:600;cursor:pointer;transition:all var(--transition-base)}.logout-button[_ngcontent-%COMP%]:hover{background:var(--color-danger);border-color:var(--color-danger);color:#fff;transform:translateY(-2px);box-shadow:0 4px 12px #ef44444d}.logout-icon[_ngcontent-%COMP%]{font-size:1.125rem}.logout-text[_ngcontent-%COMP%]{font-size:.875rem}.tabs[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm);margin-top:var(--space-2xl);margin-bottom:var(--space-xl);padding:var(--space-sm);background:var(--color-bg);border-radius:var(--radius-xl);flex-wrap:wrap;box-shadow:inset 0 2px 4px #0000000d}.tab-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);padding:var(--space-md) var(--space-lg);background:transparent;border:none;border-radius:var(--radius-lg);color:var(--color-text-muted);font-size:.9375rem;font-weight:600;cursor:pointer;transition:all var(--transition-base);white-space:nowrap;position:relative;overflow:hidden}.tab-button[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(59,130,246,.15),transparent);transition:left .5s ease}.tab-button[_ngcontent-%COMP%]:hover:before{left:100%}.tab-button[_ngcontent-%COMP%]:hover{background:#3b82f614;color:var(--color-primary);transform:translateY(-2px);box-shadow:0 4px 12px #3b82f626}.tab-button.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-primary),var(--color-primary-light));color:#fff;box-shadow:0 4px 12px #3b82f64d}.tab-button.active[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,var(--color-primary-dark),var(--color-primary));transform:translateY(-2px) scale(1.02)}.tab-icon[_ngcontent-%COMP%]{font-size:1.25rem;transition:transform var(--transition-base);filter:drop-shadow(0 2px 4px rgba(0,0,0,.1))}.tab-button[_ngcontent-%COMP%]:hover   .tab-icon[_ngcontent-%COMP%]{transform:scale(1.15) rotate(5deg)}.tab-button.active[_ngcontent-%COMP%]   .tab-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_iconPulse .6s ease;filter:drop-shadow(0 2px 8px rgba(255,255,255,.5))}.tab-label[_ngcontent-%COMP%]{font-weight:600;letter-spacing:.3px}@keyframes _ngcontent-%COMP%_iconPulse{0%,to{transform:scale(1)}50%{transform:scale(1.2)}}.tab-content[_ngcontent-%COMP%]{min-height:calc(100vh - 400px);padding-bottom:var(--space-2xl);position:relative}.tab-pane[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInUp .4s cubic-bezier(.16,1,.3,1)}.tab-pane-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}@keyframes _ngcontent-%COMP%_slideInUp{0%{opacity:0;transform:translateY(30px) scale(.98)}to{opacity:1;transform:translateY(0) scale(1)}}.footer[_ngcontent-%COMP%]{background:var(--color-surface);border-top:1px solid var(--color-border);padding:var(--space-lg) 0;margin-top:var(--space-2xl)}.footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;color:var(--color-text-muted);font-size:.875rem}@media (max-width: 768px){.tab-button[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);font-size:.875rem}.tab-icon[_ngcontent-%COMP%]{font-size:1rem}.tab-label[_ngcontent-%COMP%]{display:none}}.chat-widget[_ngcontent-%COMP%]{position:fixed;bottom:24px;right:24px;z-index:1000}.chat-toggle-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);padding:var(--space-md) var(--space-lg);background:linear-gradient(135deg,#3b82f6,#2563eb);border:none;border-radius:var(--radius-xl);color:#fff;font-weight:600;font-size:.9375rem;cursor:pointer;box-shadow:0 8px 24px #3b82f666;transition:all var(--transition-base);position:relative;overflow:hidden}.chat-toggle-button[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);transition:left .6s ease}.chat-toggle-button[_ngcontent-%COMP%]:hover:before{left:100%}.chat-toggle-button[_ngcontent-%COMP%]:hover{transform:translateY(-4px) scale(1.05);box-shadow:0 12px 32px #3b82f680}.chat-toggle-button.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626);box-shadow:0 8px 24px #ef444466}.chat-toggle-button.active[_ngcontent-%COMP%]:hover{box-shadow:0 12px 32px #ef444480}.chat-icon[_ngcontent-%COMP%]{font-size:1.5rem;animation:_ngcontent-%COMP%_bounce 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-4px)}}.chat-label[_ngcontent-%COMP%]{font-weight:700;letter-spacing:.3px}.chat-modal[_ngcontent-%COMP%]{position:fixed;bottom:100px;right:24px;width:850px;max-width:calc(100vw - 48px);height:650px;max-height:calc(100vh - 120px);background:var(--color-surface);border-radius:var(--radius-xl);box-shadow:0 20px 60px #0000004d;opacity:0;transform:translateY(20px) scale(.95);pointer-events:none;transition:all .3s cubic-bezier(.16,1,.3,1);display:flex;flex-direction:column;overflow:hidden;border:1px solid var(--color-border)}.chat-modal.open[_ngcontent-%COMP%]{opacity:1;transform:translateY(0) scale(1);pointer-events:all;overflow:auto}.chat-modal-close[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;width:36px;height:36px;border-radius:var(--radius-lg);background:#00000080;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);color:#fff;font-size:1.25rem;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all var(--transition-base);padding:0;z-index:100;box-shadow:0 4px 12px #0000004d}.chat-modal-close[_ngcontent-%COMP%]:hover{background:#ef4444cc;transform:rotate(90deg) scale(1.1);box-shadow:0 6px 16px #ef444466}.chat-modal-content[_ngcontent-%COMP%]{flex:1;flex-direction:column}@media (max-width: 768px){.chat-widget[_ngcontent-%COMP%]{bottom:16px;right:16px}.chat-toggle-button[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md)}.chat-label[_ngcontent-%COMP%]{display:none}.chat-modal[_ngcontent-%COMP%]{position:fixed;inset:0;width:100%;height:100%;max-width:100%;max-height:100%;border-radius:0;z-index:2000}.chat-modal-close[_ngcontent-%COMP%]{top:16px;right:16px;width:44px;height:44px}}']})}}return n})();Vb(EI,Lb).catch(n=>console.error(n));
