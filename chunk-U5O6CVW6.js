import{a as zn}from"./chunk-ENR26V5I.js";import"./chunk-NJOMBBJH.js";import{a as An}from"./chunk-KZVRJRCG.js";import{b as mn,c as _n,f as bn,i as vn,j as wn,k as xn,p as yn}from"./chunk-BCCQ5B7E.js";import{A as Rn,B as Un,C as Fn,D as Ft,E as gt,F as It,G as Je,H as Bt,I as In,J as Dt,M as st,N as Bn,O as Dn,P as Nn,R as Ln,c as Cn,e as Ut,f as En,g as Mn,h as Sn,o as Pn,u as Ze,v as kn,y as On,z as Tn}from"./chunk-GTB743SD.js";import{$a as $,$b as gn,M as tn,Oa as Ee,Qa as X,R as nn,Ra as an,Sa as Xe,Tb as cn,Ua as T,Ub as dn,Va as R,Vb as un,Wa as kt,X as rn,Xb as fn,Yb as pn,Za as Ke,_a as fe,_b as hn,a as Jt,da as oe,ea as ae,fb as B,g as en,gb as Te,hb as pe,ib as Ot,kb as Re,lb as Ue,mb as Fe,ob as sn,ua as on,ub as Ye,vb as Tt,wb as ln,xb as Rt,ya as j,za as ht}from"./chunk-Q3VW5VG2.js";import{a as We,b as at,g as ue}from"./chunk-7QOE2ANW.js";var $n="firebasestorage.googleapis.com",Gn="storageBucket",Sr=2*60*1e3,Pr=10*60*1e3;var re=class r extends Pn{constructor(o,i,n=0){super(Nt(o),`Firebase Storage: ${i} (${Nt(o)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,r.prototype)}get status(){return this.status_}set status(o){this.status_=o}_codeEquals(o){return Nt(o)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(o){this.customData.serverResponse=o,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},se=function(r){return r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment",r}(se||{});function Nt(r){return"storage/"+r}function Qt(){let r="An unknown error occurred, please check the error payload for server response.";return new re(se.UNKNOWN,r)}function kr(r){return new re(se.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}function Or(r){return new re(se.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Tr(){let r="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new re(se.UNAUTHENTICATED,r)}function Rr(){return new re(se.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Ur(r){return new re(se.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}function Fr(){return new re(se.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Ir(){return new re(se.CANCELED,"User canceled the upload/download.")}function Br(r){return new re(se.INVALID_URL,"Invalid URL '"+r+"'.")}function Dr(r){return new re(se.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function Nr(){return new re(se.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Gn+"' property when initializing the app?")}function Lr(){return new re(se.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function zr(){return new re(se.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Hr(r){return new re(se.UNSUPPORTED_ENVIRONMENT,`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Lt(r){return new re(se.INVALID_ARGUMENT,r)}function Xn(){return new re(se.APP_DELETED,"The Firebase app was deleted.")}function Vr(r){return new re(se.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ct(r,o){return new re(se.INVALID_FORMAT,"String does not match format '"+r+"': "+o)}function lt(r){throw new re(se.INTERNAL_ERROR,"Internal error: "+r)}var Se=class r{constructor(o,i){this.bucket=o,this.path_=i}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let o=encodeURIComponent;return"/b/"+o(this.bucket)+"/o/"+o(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(o,i){let n;try{n=r.makeFromUrl(o,i)}catch{return new r(o,"")}if(n.path==="")return n;throw Dr(o)}static makeFromUrl(o,i){let n=null,e="([A-Za-z0-9.\\-_]+)";function t(S){S.path.charAt(S.path.length-1)==="/"&&(S.path_=S.path_.slice(0,-1))}let l="(/(.*))?$",d=new RegExp("^gs://"+e+l,"i"),m={bucket:1,path:3};function v(S){S.path_=decodeURIComponent(S.path)}let s="v[A-Za-z0-9_]+",c=i.replace(/[.]/g,"\\."),a="(/([^?#]*).*)?$",u=new RegExp(`^https?://${c}/${s}/b/${e}/o${a}`,"i"),_={bucket:1,path:3},E=i===$n?"(?:storage.googleapis.com|storage.cloud.google.com)":i,P="([^?#]*)",w=new RegExp(`^https?://${E}/${e}/${P}`,"i"),U=[{regex:d,indices:m,postModify:t},{regex:u,indices:_,postModify:v},{regex:w,indices:{bucket:1,path:2},postModify:v}];for(let S=0;S<U.length;S++){let N=U[S],b=N.regex.exec(o);if(b){let I=b[N.indices.bucket],p=b[N.indices.path];p||(p=""),n=new r(I,p),N.postModify(n);break}}if(n==null)throw Br(o);return n}},zt=class{constructor(o){this.promise_=Promise.reject(o)}getPromise(){return this.promise_}cancel(o=!1){}};function jr(r,o,i){let n=1,e=null,t=null,l=!1,d=0;function m(){return d===2}let v=!1;function s(...P){v||(v=!0,o.apply(null,P))}function c(P){e=setTimeout(()=>{e=null,r(u,m())},P)}function a(){t&&clearTimeout(t)}function u(P,...w){if(v){a();return}if(P){a(),s.call(null,P,...w);return}if(m()||l){a(),s.call(null,P,...w);return}n<64&&(n*=2);let U;d===1?(d=2,U=0):U=(n+Math.random())*1e3,c(U)}let _=!1;function E(P){_||(_=!0,a(),!v&&(e!==null?(P||(d=2),clearTimeout(e),c(0)):P||(d=1)))}return c(0),t=setTimeout(()=>{l=!0,E(!0)},i),E}function Qr(r){r(!1)}function qr(r){return r!==void 0}function Wr(r){return typeof r=="object"&&!Array.isArray(r)}function qt(r){return typeof r=="string"||r instanceof String}function Hn(r){return Wt()&&r instanceof Blob}function Wt(){return typeof Blob<"u"}function Vn(r,o,i,n){if(n<o)throw Lt(`Invalid value for '${r}'. Expected ${o} or greater.`);if(n>i)throw Lt(`Invalid value for '${r}'. Expected ${i} or less.`)}function vt(r,o,i){let n=o;return i==null&&(n=`https://${o}`),`${i}://${n}/v0${r}`}function Kn(r){let o=encodeURIComponent,i="?";for(let n in r)if(r.hasOwnProperty(n)){let e=o(n)+"="+o(r[n]);i=i+e+"&"}return i=i.slice(0,-1),i}var tt=function(r){return r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT",r}(tt||{});function $r(r,o){let i=r>=500&&r<600,e=[408,429].indexOf(r)!==-1,t=o.indexOf(r)!==-1;return i||e||t}var Ht=class{constructor(o,i,n,e,t,l,d,m,v,s,c,a=!0,u=!1){this.url_=o,this.method_=i,this.headers_=n,this.body_=e,this.successCodes_=t,this.additionalRetryCodes_=l,this.callback_=d,this.errorCallback_=m,this.timeout_=v,this.progressCallback_=s,this.connectionFactory_=c,this.retry=a,this.isUsingEmulator=u,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,E)=>{this.resolve_=_,this.reject_=E,this.start_()})}start_(){let o=(n,e)=>{if(e){n(!1,new et(!1,null,!0));return}let t=this.connectionFactory_();this.pendingConnection_=t;let l=d=>{let m=d.loaded,v=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,v)};this.progressCallback_!==null&&t.addUploadProgressListener(l),t.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&t.removeUploadProgressListener(l),this.pendingConnection_=null;let d=t.getErrorCode()===tt.NO_ERROR,m=t.getStatus();if(!d||$r(m,this.additionalRetryCodes_)&&this.retry){let s=t.getErrorCode()===tt.ABORT;n(!1,new et(!1,null,s));return}let v=this.successCodes_.indexOf(m)!==-1;n(!0,new et(v,t))})},i=(n,e)=>{let t=this.resolve_,l=this.reject_,d=e.connection;if(e.wasSuccessCode)try{let m=this.callback_(d,d.getResponse());qr(m)?t(m):t()}catch(m){l(m)}else if(d!==null){let m=Qt();m.serverResponse=d.getErrorText(),this.errorCallback_?l(this.errorCallback_(d,m)):l(m)}else if(e.canceled){let m=this.appDelete_?Xn():Ir();l(m)}else{let m=Fr();l(m)}};this.canceled_?i(!1,new et(!1,null,!0)):this.backoffId_=jr(o,i,this.timeout_)}getPromise(){return this.promise_}cancel(o){this.canceled_=!0,this.appDelete_=o||!1,this.backoffId_!==null&&Qr(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},et=class{constructor(o,i,n){this.wasSuccessCode=o,this.connection=i,this.canceled=!!n}};function Gr(r,o){o!==null&&o.length>0&&(r.Authorization="Firebase "+o)}function Xr(r,o){r["X-Firebase-Storage-Version"]="webjs/"+(o??"AppManager")}function Kr(r,o){o&&(r["X-Firebase-GMPID"]=o)}function Yr(r,o){o!==null&&(r["X-Firebase-AppCheck"]=o)}function Zr(r,o,i,n,e,t,l=!0,d=!1){let m=Kn(r.urlParams),v=r.url+m,s=Object.assign({},r.headers);return Kr(s,o),Gr(s,i),Xr(s,t),Yr(s,n),new Ht(v,r.method,s,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,e,l,d)}function Jr(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function ei(...r){let o=Jr();if(o!==void 0){let i=new o;for(let n=0;n<r.length;n++)i.append(r[n]);return i.getBlob()}else{if(Wt())return new Blob(r);throw new re(se.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function ti(r,o,i){return r.webkitSlice?r.webkitSlice(o,i):r.mozSlice?r.mozSlice(o,i):r.slice?r.slice(o,i):null}function ni(r){if(typeof atob>"u")throw Hr("base-64");return atob(r)}var Ie={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},dt=class{constructor(o,i){this.data=o,this.contentType=i||null}};function ri(r,o){switch(r){case Ie.RAW:return new dt(Yn(o));case Ie.BASE64:case Ie.BASE64URL:return new dt(Zn(r,o));case Ie.DATA_URL:return new dt(oi(o),ai(o))}throw Qt()}function Yn(r){let o=[];for(let i=0;i<r.length;i++){let n=r.charCodeAt(i);if(n<=127)o.push(n);else if(n<=2047)o.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(i<r.length-1&&(r.charCodeAt(i+1)&64512)===56320))o.push(239,191,189);else{let t=n,l=r.charCodeAt(++i);n=65536|(t&1023)<<10|l&1023,o.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?o.push(239,191,189):o.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(o)}function ii(r){let o;try{o=decodeURIComponent(r)}catch{throw ct(Ie.DATA_URL,"Malformed data URL.")}return Yn(o)}function Zn(r,o){switch(r){case Ie.BASE64:{let e=o.indexOf("-")!==-1,t=o.indexOf("_")!==-1;if(e||t)throw ct(r,"Invalid character '"+(e?"-":"_")+"' found: is it base64url encoded?");break}case Ie.BASE64URL:{let e=o.indexOf("+")!==-1,t=o.indexOf("/")!==-1;if(e||t)throw ct(r,"Invalid character '"+(e?"+":"/")+"' found: is it base64 encoded?");o=o.replace(/-/g,"+").replace(/_/g,"/");break}}let i;try{i=ni(o)}catch(e){throw e.message.includes("polyfill")?e:ct(r,"Invalid character found")}let n=new Uint8Array(i.length);for(let e=0;e<i.length;e++)n[e]=i.charCodeAt(e);return n}var _t=class{constructor(o){this.base64=!1,this.contentType=null;let i=o.match(/^data:([^,]+)?,/);if(i===null)throw ct(Ie.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let n=i[1]||null;n!=null&&(this.base64=si(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=o.substring(o.indexOf(",")+1)}};function oi(r){let o=new _t(r);return o.base64?Zn(Ie.BASE64,o.rest):ii(o.rest)}function ai(r){return new _t(r).contentType}function si(r,o){return r.length>=o.length?r.substring(r.length-o.length)===o:!1}var bt=class r{constructor(o,i){let n=0,e="";Hn(o)?(this.data_=o,n=o.size,e=o.type):o instanceof ArrayBuffer?(i?this.data_=new Uint8Array(o):(this.data_=new Uint8Array(o.byteLength),this.data_.set(new Uint8Array(o))),n=this.data_.length):o instanceof Uint8Array&&(i?this.data_=o:(this.data_=new Uint8Array(o.length),this.data_.set(o)),n=o.length),this.size_=n,this.type_=e}size(){return this.size_}type(){return this.type_}slice(o,i){if(Hn(this.data_)){let n=this.data_,e=ti(n,o,i);return e===null?null:new r(e)}else{let n=new Uint8Array(this.data_.buffer,o,i-o);return new r(n,!0)}}static getBlob(...o){if(Wt()){let i=o.map(n=>n instanceof r?n.data_:n);return new r(ei.apply(null,i))}else{let i=o.map(l=>qt(l)?ri(Ie.RAW,l).data:l.data_),n=0;i.forEach(l=>{n+=l.byteLength});let e=new Uint8Array(n),t=0;return i.forEach(l=>{for(let d=0;d<l.length;d++)e[t++]=l[d]}),new r(e,!0)}}uploadData(){return this.data_}};function Jn(r){let o;try{o=JSON.parse(r)}catch{return null}return Wr(o)?o:null}function li(r){if(r.length===0)return null;let o=r.lastIndexOf("/");return o===-1?"":r.slice(0,o)}function ci(r,o){let i=o.split("/").filter(n=>n.length>0).join("/");return r.length===0?i:r+"/"+i}function er(r){let o=r.lastIndexOf("/",r.length-2);return o===-1?r:r.slice(o+1)}function di(r,o){return o}var ge=class{constructor(o,i,n,e){this.server=o,this.local=i||o,this.writable=!!n,this.xform=e||di}},mt=null;function ui(r){return!qt(r)||r.length<2?r:er(r)}function tr(){if(mt)return mt;let r=[];r.push(new ge("bucket")),r.push(new ge("generation")),r.push(new ge("metageneration")),r.push(new ge("name","fullPath",!0));function o(t,l){return ui(l)}let i=new ge("name");i.xform=o,r.push(i);function n(t,l){return l!==void 0?Number(l):l}let e=new ge("size");return e.xform=n,r.push(e),r.push(new ge("timeCreated")),r.push(new ge("updated")),r.push(new ge("md5Hash",null,!0)),r.push(new ge("cacheControl",null,!0)),r.push(new ge("contentDisposition",null,!0)),r.push(new ge("contentEncoding",null,!0)),r.push(new ge("contentLanguage",null,!0)),r.push(new ge("contentType",null,!0)),r.push(new ge("metadata","customMetadata",!0)),mt=r,mt}function fi(r,o){function i(){let n=r.bucket,e=r.fullPath,t=new Se(n,e);return o._makeStorageReference(t)}Object.defineProperty(r,"ref",{get:i})}function pi(r,o,i){let n={};n.type="file";let e=i.length;for(let t=0;t<e;t++){let l=i[t];n[l.local]=l.xform(n,o[l.server])}return fi(n,r),n}function nr(r,o,i){let n=Jn(o);return n===null?null:pi(r,n,i)}function hi(r,o,i,n){let e=Jn(o);if(e===null||!qt(e.downloadTokens))return null;let t=e.downloadTokens;if(t.length===0)return null;let l=encodeURIComponent;return t.split(",").map(v=>{let s=r.bucket,c=r.fullPath,a="/b/"+l(s)+"/o/"+l(c),u=vt(a,i,n),_=Kn({alt:"media",token:v});return u+_})[0]}function gi(r,o){let i={},n=o.length;for(let e=0;e<n;e++){let t=o[e];t.writable&&(i[t.server]=r[t.local])}return JSON.stringify(i)}var ut=class{constructor(o,i,n,e){this.url=o,this.method=i,this.handler=n,this.timeout=e,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function rr(r){if(!r)throw Qt()}function mi(r,o){function i(n,e){let t=nr(r,e,o);return rr(t!==null),t}return i}function _i(r,o){function i(n,e){let t=nr(r,e,o);return rr(t!==null),hi(t,e,r.host,r._protocol)}return i}function ir(r){function o(i,n){let e;return i.getStatus()===401?i.getErrorText().includes("Firebase App Check token is invalid")?e=Rr():e=Tr():i.getStatus()===402?e=Or(r.bucket):i.getStatus()===403?e=Ur(r.path):e=n,e.status=i.getStatus(),e.serverResponse=n.serverResponse,e}return o}function or(r){let o=ir(r);function i(n,e){let t=o(n,e);return n.getStatus()===404&&(t=kr(r.path)),t.serverResponse=e.serverResponse,t}return i}function bi(r,o,i){let n=o.fullServerUrl(),e=vt(n,r.host,r._protocol),t="GET",l=r.maxOperationRetryTime,d=new ut(e,t,_i(r,i),l);return d.errorHandler=or(o),d}function vi(r,o){let i=o.fullServerUrl(),n=vt(i,r.host,r._protocol),e="DELETE",t=r.maxOperationRetryTime;function l(m,v){}let d=new ut(n,e,l,t);return d.successCodes=[200,204],d.errorHandler=or(o),d}function wi(r,o){return r&&r.contentType||o&&o.type()||"application/octet-stream"}function xi(r,o,i){let n=Object.assign({},i);return n.fullPath=r.path,n.size=o.size(),n.contentType||(n.contentType=wi(null,o)),n}function yi(r,o,i,n,e){let t=o.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function d(){let U="";for(let S=0;S<2;S++)U=U+Math.random().toString().slice(2);return U}let m=d();l["Content-Type"]="multipart/related; boundary="+m;let v=xi(o,n,e),s=gi(v,i),c="--"+m+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+s+`\r
--`+m+`\r
Content-Type: `+v.contentType+`\r
\r
`,a=`\r
--`+m+"--",u=bt.getBlob(c,n,a);if(u===null)throw Lr();let _={name:v.fullPath},E=vt(t,r.host,r._protocol),P="POST",w=r.maxUploadRetryTime,L=new ut(E,P,mi(r,i),w);return L.urlParams=_,L.headers=l,L.body=u.uploadData(),L.errorHandler=ir(o),L}var po=256*1024;var jn=null,Vt=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=tt.NO_ERROR,this.sendPromise_=new Promise(o=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=tt.ABORT,o()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=tt.NETWORK_ERROR,o()}),this.xhr_.addEventListener("load",()=>{o()})})}send(o,i,n,e,t){if(this.sent_)throw lt("cannot .send() more than once");if(Ut(o)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(i,o,!0),t!==void 0)for(let l in t)t.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,t[l].toString());return e!==void 0?this.xhr_.send(e):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw lt("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw lt("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw lt("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw lt("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(o){return this.xhr_.getResponseHeader(o)}addUploadProgressListener(o){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",o)}removeUploadProgressListener(o){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",o)}},jt=class extends Vt{initXhr(){this.xhr_.responseType="text"}};function $t(){return jn?jn():new jt}var nt=class r{constructor(o,i){this._service=o,i instanceof Se?this._location=i:this._location=Se.makeFromUrl(i,o.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(o,i){return new r(o,i)}get root(){let o=new Se(this._location.bucket,"");return this._newRef(this._service,o)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return er(this._location.path)}get storage(){return this._service}get parent(){let o=li(this._location.path);if(o===null)return null;let i=new Se(this._location.bucket,o);return new r(this._service,i)}_throwIfRoot(o){if(this._location.path==="")throw Vr(o)}};function Ai(r,o,i){r._throwIfRoot("uploadBytes");let n=yi(r.storage,r._location,tr(),new bt(o,!0),i);return r.storage.makeRequestWithTokens(n,$t).then(e=>({metadata:e,ref:r}))}function Ci(r){r._throwIfRoot("getDownloadURL");let o=bi(r.storage,r._location,tr());return r.storage.makeRequestWithTokens(o,$t).then(i=>{if(i===null)throw zr();return i})}function Ei(r){r._throwIfRoot("deleteObject");let o=vi(r.storage,r._location);return r.storage.makeRequestWithTokens(o,$t)}function Mi(r,o){let i=ci(r._location.path,o),n=new Se(r._location.bucket,i);return new nt(r.storage,n)}function Si(r){return/^[A-Za-z]+:\/\//.test(r)}function Pi(r,o){return new nt(r,o)}function ar(r,o){if(r instanceof ft){let i=r;if(i._bucket==null)throw Nr();let n=new nt(i,i._bucket);return o!=null?ar(n,o):n}else return o!==void 0?Mi(r,o):r}function ki(r,o){if(o&&Si(o)){if(r instanceof ft)return Pi(r,o);throw Lt("To use ref(service, url), the first argument must be a Storage instance.")}else return ar(r,o)}function Qn(r,o){let i=o?.[Gn];return i==null?null:Se.makeFromBucketSpec(i,r)}function Oi(r,o,i,n={}){r.host=`${o}:${i}`;let e=Ut(o);e&&(En(`https://${r.host}/b`),Sn("Storage",!0)),r._isUsingEmulator=!0,r._protocol=e?"https":"http";let{mockUserToken:t}=n;t&&(r._overrideAuthToken=typeof t=="string"?t:Mn(t,r.app.options.projectId))}var ft=class{constructor(o,i,n,e,t,l=!1){this.app=o,this._authProvider=i,this._appCheckProvider=n,this._url=e,this._firebaseVersion=t,this._isUsingEmulator=l,this._bucket=null,this._host=$n,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Sr,this._maxUploadRetryTime=Pr,this._requests=new Set,e!=null?this._bucket=Se.makeFromBucketSpec(e,this._host):this._bucket=Qn(this._host,this.app.options)}get host(){return this._host}set host(o){this._host=o,this._url!=null?this._bucket=Se.makeFromBucketSpec(this._url,o):this._bucket=Qn(o,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(o){Vn("time",0,Number.POSITIVE_INFINITY,o),this._maxUploadRetryTime=o}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(o){Vn("time",0,Number.POSITIVE_INFINITY,o),this._maxOperationRetryTime=o}_getAuthToken(){return ue(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let o=this._authProvider.getImmediate({optional:!0});if(o){let i=yield o.getToken();if(i!==null)return i.accessToken}return null})}_getAppCheckToken(){return ue(this,null,function*(){if(Rn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let o=this._appCheckProvider.getImmediate({optional:!0});return o?(yield o.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(o=>o.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(o){return new nt(this,o)}_makeRequest(o,i,n,e,t=!0){if(this._deleted)return new zt(Xn());{let l=Zr(o,this._appId,n,e,i,this._firebaseVersion,t,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(o,i){return ue(this,null,function*(){let[n,e]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(o,i,n,e).getPromise()})}},qn="@firebase/storage",Wn="0.14.0";var sr="storage";function lr(r,o,i){return r=Ze(r),Ai(r,o,i)}function cr(r){return r=Ze(r),Ci(r)}function dr(r){return r=Ze(r),Ei(r)}function wt(r,o){return r=Ze(r),ki(r,o)}function ur(r=Fn(),o){r=Ze(r);let n=Tn(r,sr).getImmediate({identifier:o}),e=Cn("storage");return e&&Ti(n,...e),n}function Ti(r,o,i,n={}){Oi(r,o,i,n)}function Ri(r,{instanceIdentifier:o}){let i=r.getProvider("app").getImmediate(),n=r.getProvider("auth-internal"),e=r.getProvider("app-check-internal");return new ft(i,n,e,o,Un)}function Ui(){On(new kn(sr,Ri,"PUBLIC").setMultipleInstances(!0)),Ft(qn,Wn,""),Ft(qn,Wn,"esm2020")}Ui();function Fi(r,o){return o.forEach(function(i){i&&typeof i!="string"&&!Array.isArray(i)&&Object.keys(i).forEach(function(n){if(n!=="default"&&!(n in r)){var e=Object.getOwnPropertyDescriptor(i,n);Object.defineProperty(r,n,e.get?e:{enumerable:!0,get:function(){return i[n]}})}})}),Object.freeze(r)}function pr(r,o){return new Promise(function(i,n){let e;return Ii(r).then(function(t){try{return e=t,i(new Blob([o.slice(0,2),e,o.slice(2)],{type:"image/jpeg"}))}catch(l){return n(l)}},n)})}var Ii=r=>new Promise((o,i)=>{let n=new FileReader;n.addEventListener("load",({target:{result:e}})=>{let t=new DataView(e),l=0;if(t.getUint16(l)!==65496)return i("not a valid JPEG");for(l+=2;;){let d=t.getUint16(l);if(d===65498)break;let m=t.getUint16(l+2);if(d===65505&&t.getUint32(l+4)===1165519206){let v=l+10,s;switch(t.getUint16(v)){case 18761:s=!0;break;case 19789:s=!1;break;default:return i("TIFF header contains invalid endian")}if(t.getUint16(v+2,s)!==42)return i("TIFF header contains invalid version");let c=t.getUint32(v+4,s),a=v+c+2+12*t.getUint16(v+c,s);for(let u=v+c+2;u<a;u+=12)if(t.getUint16(u,s)==274){if(t.getUint16(u+2,s)!==3)return i("Orientation data type is invalid");if(t.getUint32(u+4,s)!==1)return i("Orientation data count is invalid");t.setUint16(u+8,1,s);break}return o(e.slice(l,l+2+m))}l+=2+m}return o(new Blob)}),n.readAsArrayBuffer(r)}),yt={},Bi={get exports(){return yt},set exports(r){yt=r}};(function(r){var o,i,n={};Bi.exports=n,n.parse=function(e,t){for(var l=n.bin.readUshort,d=n.bin.readUint,m=0,v={},s=new Uint8Array(e),c=s.length-4;d(s,c)!=101010256;)c--;m=c,m+=4;var a=l(s,m+=4);l(s,m+=2);var u=d(s,m+=2),_=d(s,m+=4);m+=4,m=_;for(var E=0;E<a;E++){d(s,m),m+=4,m+=4,m+=4,d(s,m+=4),u=d(s,m+=4);var P=d(s,m+=4),w=l(s,m+=4),L=l(s,m+2),U=l(s,m+4);m+=6;var S=d(s,m+=8);m+=4,m+=w+L+U,n._readLocal(s,S,v,u,P,t)}return v},n._readLocal=function(e,t,l,d,m,v){var s=n.bin.readUshort,c=n.bin.readUint;c(e,t),s(e,t+=4),s(e,t+=2);var a=s(e,t+=2);c(e,t+=2),c(e,t+=4),t+=4;var u=s(e,t+=8),_=s(e,t+=2);t+=2;var E=n.bin.readUTF8(e,t,u);if(t+=u,t+=_,v)l[E]={size:m,csize:d};else{var P=new Uint8Array(e.buffer,t);if(a==0)l[E]=new Uint8Array(P.buffer.slice(t,t+d));else{if(a!=8)throw"unknown compression method: "+a;var w=new Uint8Array(m);n.inflateRaw(P,w),l[E]=w}}},n.inflateRaw=function(e,t){return n.F.inflate(e,t)},n.inflate=function(e,t){return e[0],e[1],n.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),t)},n.deflate=function(e,t){t==null&&(t={level:6});var l=0,d=new Uint8Array(50+Math.floor(1.1*e.length));d[l]=120,d[l+1]=156,l+=2,l=n.F.deflateRaw(e,d,l,t.level);var m=n.adler(e,0,e.length);return d[l+0]=m>>>24&255,d[l+1]=m>>>16&255,d[l+2]=m>>>8&255,d[l+3]=m>>>0&255,new Uint8Array(d.buffer,0,l+4)},n.deflateRaw=function(e,t){t==null&&(t={level:6});var l=new Uint8Array(50+Math.floor(1.1*e.length)),d=n.F.deflateRaw(e,l,d,t.level);return new Uint8Array(l.buffer,0,d)},n.encode=function(e,t){t==null&&(t=!1);var l=0,d=n.bin.writeUint,m=n.bin.writeUshort,v={};for(var s in e){var c=!n._noNeed(s)&&!t,a=e[s],u=n.crc.crc(a,0,a.length);v[s]={cpr:c,usize:a.length,crc:u,file:c?n.deflateRaw(a):a}}for(var s in v)l+=v[s].file.length+30+46+2*n.bin.sizeUTF8(s);l+=22;var _=new Uint8Array(l),E=0,P=[];for(var s in v){var w=v[s];P.push(E),E=n._writeHeader(_,E,s,w,0)}var L=0,U=E;for(var s in v)w=v[s],P.push(E),E=n._writeHeader(_,E,s,w,1,P[L++]);var S=E-U;return d(_,E,101010256),E+=4,m(_,E+=4,L),m(_,E+=2,L),d(_,E+=2,S),d(_,E+=4,U),E+=4,E+=2,_.buffer},n._noNeed=function(e){var t=e.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(t)!=-1},n._writeHeader=function(e,t,l,d,m,v){var s=n.bin.writeUint,c=n.bin.writeUshort,a=d.file;return s(e,t,m==0?67324752:33639248),t+=4,m==1&&(t+=2),c(e,t,20),c(e,t+=2,0),c(e,t+=2,d.cpr?8:0),s(e,t+=2,0),s(e,t+=4,d.crc),s(e,t+=4,a.length),s(e,t+=4,d.usize),c(e,t+=4,n.bin.sizeUTF8(l)),c(e,t+=2,0),t+=2,m==1&&(t+=2,t+=2,s(e,t+=6,v),t+=4),t+=n.bin.writeUTF8(e,t,l),m==0&&(e.set(a,t),t+=a.length),t},n.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var l=t,d=0;d<8;d++)1&l?l=3988292384^l>>>1:l>>>=1;e[t]=l}return e}(),update:function(e,t,l,d){for(var m=0;m<d;m++)e=n.crc.table[255&(e^t[l+m])]^e>>>8;return e},crc:function(e,t,l){return 4294967295^n.crc.update(4294967295,e,t,l)}},n.adler=function(e,t,l){for(var d=1,m=0,v=t,s=t+l;v<s;){for(var c=Math.min(v+5552,s);v<c;)m+=d+=e[v++];d%=65521,m%=65521}return m<<16|d},n.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,l){e[t]=255&l,e[t+1]=l>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,l){e[t]=255&l,e[t+1]=l>>8&255,e[t+2]=l>>16&255,e[t+3]=l>>24&255},readASCII:function(e,t,l){for(var d="",m=0;m<l;m++)d+=String.fromCharCode(e[t+m]);return d},writeASCII:function(e,t,l){for(var d=0;d<l.length;d++)e[t+d]=l.charCodeAt(d)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,l){for(var d,m="",v=0;v<l;v++)m+="%"+n.bin.pad(e[t+v].toString(16));try{d=decodeURIComponent(m)}catch{return n.bin.readASCII(e,t,l)}return d},writeUTF8:function(e,t,l){for(var d=l.length,m=0,v=0;v<d;v++){var s=l.charCodeAt(v);if(!(4294967168&s))e[t+m]=s,m++;else if(!(4294965248&s))e[t+m]=192|s>>6,e[t+m+1]=128|s>>0&63,m+=2;else if(!(4294901760&s))e[t+m]=224|s>>12,e[t+m+1]=128|s>>6&63,e[t+m+2]=128|s>>0&63,m+=3;else{if(4292870144&s)throw"e";e[t+m]=240|s>>18,e[t+m+1]=128|s>>12&63,e[t+m+2]=128|s>>6&63,e[t+m+3]=128|s>>0&63,m+=4}}return m},sizeUTF8:function(e){for(var t=e.length,l=0,d=0;d<t;d++){var m=e.charCodeAt(d);if(!(4294967168&m))l++;else if(!(4294965248&m))l+=2;else if(!(4294901760&m))l+=3;else{if(4292870144&m)throw"e";l+=4}}return l}},n.F={},n.F.deflateRaw=function(e,t,l,d){var m=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][d],v=n.F.U,s=n.F._goodIndex;n.F._hash;var c=n.F._putsE,a=0,u=l<<3,_=0,E=e.length;if(d==0){for(;a<E;)c(t,u,a+(C=Math.min(65535,E-a))==E?1:0),u=n.F._copyExact(e,a,C,t,u+8),a+=C;return u>>>3}var P=v.lits,w=v.strt,L=v.prev,U=0,S=0,N=0,b=0,I=0,p=0;for(E>2&&(w[p=n.F._hash(e,0)]=0),a=0;a<E;a++){if(I=p,a+1<E-2){p=n.F._hash(e,a+1);var h=a+1&32767;L[h]=w[p],w[p]=h}if(_<=a){(U>14e3||S>26697)&&E-a>100&&(_<a&&(P[U]=a-_,U+=2,_=a),u=n.F._writeBlock(a==E-1||_==E?1:0,P,U,b,e,N,a-N,t,u),U=S=b=0,N=a);var y=0;a<E-2&&(y=n.F._bestMatch(e,a,L,I,Math.min(m[2],E-a),m[3]));var C=y>>>16,A=65535&y;if(y!=0){A=65535&y;var M=s(C=y>>>16,v.of0);v.lhst[257+M]++;var x=s(A,v.df0);v.dhst[x]++,b+=v.exb[M]+v.dxb[x],P[U]=C<<23|a-_,P[U+1]=A<<16|M<<8|x,U+=2,_=a+C}else v.lhst[e[a]]++;S++}}for(N==a&&e.length!=0||(_<a&&(P[U]=a-_,U+=2,_=a),u=n.F._writeBlock(1,P,U,b,e,N,a-N,t,u),U=0,S=0,U=S=b=0,N=a);7&u;)u++;return u>>>3},n.F._bestMatch=function(e,t,l,d,m,v){var s=32767&t,c=l[s],a=s-c+32768&32767;if(c==s||d!=n.F._hash(e,t-a))return 0;for(var u=0,_=0,E=Math.min(32767,t);a<=E&&--v!=0&&c!=s;){if(u==0||e[t+u]==e[t+u-a]){var P=n.F._howLong(e,t,a);if(P>u){if(_=a,(u=P)>=m)break;a+2<P&&(P=a+2);for(var w=0,L=0;L<P-2;L++){var U=t-a+L+32768&32767,S=U-l[U]+32768&32767;S>w&&(w=S,c=U)}}}a+=(s=c)-(c=l[s])+32768&32767}return u<<16|_},n.F._howLong=function(e,t,l){if(e[t]!=e[t-l]||e[t+1]!=e[t+1-l]||e[t+2]!=e[t+2-l])return 0;var d=t,m=Math.min(e.length,t+258);for(t+=3;t<m&&e[t]==e[t-l];)t++;return t-d},n.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},n.saved=0,n.F._writeBlock=function(e,t,l,d,m,v,s,c,a){var u,_,E,P,w,L,U,S,N,b=n.F.U,I=n.F._putsF,p=n.F._putsE;b.lhst[256]++,_=(u=n.F.getTrees())[0],E=u[1],P=u[2],w=u[3],L=u[4],U=u[5],S=u[6],N=u[7];var h=32+(a+3&7?8-(a+3&7):0)+(s<<3),y=d+n.F.contSize(b.fltree,b.lhst)+n.F.contSize(b.fdtree,b.dhst),C=d+n.F.contSize(b.ltree,b.lhst)+n.F.contSize(b.dtree,b.dhst);C+=14+3*U+n.F.contSize(b.itree,b.ihst)+(2*b.ihst[16]+3*b.ihst[17]+7*b.ihst[18]);for(var A=0;A<286;A++)b.lhst[A]=0;for(A=0;A<30;A++)b.dhst[A]=0;for(A=0;A<19;A++)b.ihst[A]=0;var M=h<y&&h<C?0:y<C?1:2;if(I(c,a,e),I(c,a+1,M),a+=3,M==0){for(;7&a;)a++;a=n.F._copyExact(m,v,s,c,a)}else{var x,k;if(M==1&&(x=b.fltree,k=b.fdtree),M==2){n.F.makeCodes(b.ltree,_),n.F.revCodes(b.ltree,_),n.F.makeCodes(b.dtree,E),n.F.revCodes(b.dtree,E),n.F.makeCodes(b.itree,P),n.F.revCodes(b.itree,P),x=b.ltree,k=b.dtree,p(c,a,w-257),p(c,a+=5,L-1),p(c,a+=5,U-4),a+=4;for(var g=0;g<U;g++)p(c,a+3*g,b.itree[1+(b.ordr[g]<<1)]);a+=3*U,a=n.F._codeTiny(S,b.itree,c,a),a=n.F._codeTiny(N,b.itree,c,a)}for(var f=v,z=0;z<l;z+=2){for(var O=t[z],D=O>>>23,q=f+(8388607&O);f<q;)a=n.F._writeLit(m[f++],x,c,a);if(D!=0){var V=t[z+1],Q=V>>16,H=V>>8&255,F=255&V;p(c,a=n.F._writeLit(257+H,x,c,a),D-b.of0[H]),a+=b.exb[H],I(c,a=n.F._writeLit(F,k,c,a),Q-b.df0[F]),a+=b.dxb[F],f+=D}}a=n.F._writeLit(256,x,c,a)}return a},n.F._copyExact=function(e,t,l,d,m){var v=m>>>3;return d[v]=l,d[v+1]=l>>>8,d[v+2]=255-d[v],d[v+3]=255-d[v+1],v+=4,d.set(new Uint8Array(e.buffer,t,l),v),m+(l+4<<3)},n.F.getTrees=function(){for(var e=n.F.U,t=n.F._hufTree(e.lhst,e.ltree,15),l=n.F._hufTree(e.dhst,e.dtree,15),d=[],m=n.F._lenCodes(e.ltree,d),v=[],s=n.F._lenCodes(e.dtree,v),c=0;c<d.length;c+=2)e.ihst[d[c]]++;for(c=0;c<v.length;c+=2)e.ihst[v[c]]++;for(var a=n.F._hufTree(e.ihst,e.itree,7),u=19;u>4&&e.itree[1+(e.ordr[u-1]<<1)]==0;)u--;return[t,l,a,m,s,u,d,v]},n.F.getSecond=function(e){for(var t=[],l=0;l<e.length;l+=2)t.push(e[l+1]);return t},n.F.nonZero=function(e){for(var t="",l=0;l<e.length;l+=2)e[l+1]!=0&&(t+=(l>>1)+",");return t},n.F.contSize=function(e,t){for(var l=0,d=0;d<t.length;d++)l+=t[d]*e[1+(d<<1)];return l},n.F._codeTiny=function(e,t,l,d){for(var m=0;m<e.length;m+=2){var v=e[m],s=e[m+1];d=n.F._writeLit(v,t,l,d);var c=v==16?2:v==17?3:7;v>15&&(n.F._putsE(l,d,s,c),d+=c)}return d},n.F._lenCodes=function(e,t){for(var l=e.length;l!=2&&e[l-1]==0;)l-=2;for(var d=0;d<l;d+=2){var m=e[d+1],v=d+3<l?e[d+3]:-1,s=d+5<l?e[d+5]:-1,c=d==0?-1:e[d-1];if(m==0&&v==m&&s==m){for(var a=d+5;a+2<l&&e[a+2]==m;)a+=2;(u=Math.min(a+1-d>>>1,138))<11?t.push(17,u-3):t.push(18,u-11),d+=2*u-2}else if(m==c&&v==m&&s==m){for(a=d+5;a+2<l&&e[a+2]==m;)a+=2;var u=Math.min(a+1-d>>>1,6);t.push(16,u-3),d+=2*u-2}else t.push(m,0)}return l>>>1},n.F._hufTree=function(e,t,l){var d=[],m=e.length,v=t.length,s=0;for(s=0;s<v;s+=2)t[s]=0,t[s+1]=0;for(s=0;s<m;s++)e[s]!=0&&d.push({lit:s,f:e[s]});var c=d.length,a=d.slice(0);if(c==0)return 0;if(c==1){var u=d[0].lit;return a=u==0?1:0,t[1+(u<<1)]=1,t[1+(a<<1)]=1,1}d.sort(function(S,N){return S.f-N.f});var _=d[0],E=d[1],P=0,w=1,L=2;for(d[0]={lit:-1,f:_.f+E.f,l:_,r:E,d:0};w!=c-1;)_=P!=w&&(L==c||d[P].f<d[L].f)?d[P++]:d[L++],E=P!=w&&(L==c||d[P].f<d[L].f)?d[P++]:d[L++],d[w++]={lit:-1,f:_.f+E.f,l:_,r:E};var U=n.F.setDepth(d[w-1],0);for(U>l&&(n.F.restrictDepth(a,l,U),U=l),s=0;s<c;s++)t[1+(a[s].lit<<1)]=a[s].d;return U},n.F.setDepth=function(e,t){return e.lit!=-1?(e.d=t,t):Math.max(n.F.setDepth(e.l,t+1),n.F.setDepth(e.r,t+1))},n.F.restrictDepth=function(e,t,l){var d=0,m=1<<l-t,v=0;for(e.sort(function(c,a){return a.d==c.d?c.f-a.f:a.d-c.d}),d=0;d<e.length&&e[d].d>t;d++){var s=e[d].d;e[d].d=t,v+=m-(1<<l-s)}for(v>>>=l-t;v>0;)(s=e[d].d)<t?(e[d].d++,v-=1<<t-s-1):d++;for(;d>=0;d--)e[d].d==t&&v<0&&(e[d].d--,v++);v!=0&&console.log("debt left")},n.F._goodIndex=function(e,t){var l=0;return t[16|l]<=e&&(l|=16),t[8|l]<=e&&(l|=8),t[4|l]<=e&&(l|=4),t[2|l]<=e&&(l|=2),t[1|l]<=e&&(l|=1),l},n.F._writeLit=function(e,t,l,d){return n.F._putsF(l,d,t[e<<1]),d+t[1+(e<<1)]},n.F.inflate=function(e,t){var l=Uint8Array;if(e[0]==3&&e[1]==0)return t||new l(0);var d=n.F,m=d._bitsF,v=d._bitsE,s=d._decodeTiny,c=d.makeCodes,a=d.codes2map,u=d._get17,_=d.U,E=t==null;E&&(t=new l(e.length>>>2<<3));for(var P,w,L=0,U=0,S=0,N=0,b=0,I=0,p=0,h=0,y=0;L==0;)if(L=m(e,y,1),U=m(e,y+1,2),y+=3,U!=0){if(E&&(t=n.F._check(t,h+(1<<17))),U==1&&(P=_.flmap,w=_.fdmap,I=511,p=31),U==2){S=v(e,y,5)+257,N=v(e,y+5,5)+1,b=v(e,y+10,4)+4,y+=14;for(var C=0;C<38;C+=2)_.itree[C]=0,_.itree[C+1]=0;var A=1;for(C=0;C<b;C++){var M=v(e,y+3*C,3);_.itree[1+(_.ordr[C]<<1)]=M,M>A&&(A=M)}y+=3*b,c(_.itree,A),a(_.itree,A,_.imap),P=_.lmap,w=_.dmap,y=s(_.imap,(1<<A)-1,S+N,e,y,_.ttree);var x=d._copyOut(_.ttree,0,S,_.ltree);I=(1<<x)-1;var k=d._copyOut(_.ttree,S,N,_.dtree);p=(1<<k)-1,c(_.ltree,x),a(_.ltree,x,P),c(_.dtree,k),a(_.dtree,k,w)}for(;;){var g=P[u(e,y)&I];y+=15&g;var f=g>>>4;if(!(f>>>8))t[h++]=f;else{if(f==256)break;var z=h+f-254;if(f>264){var O=_.ldef[f-257];z=h+(O>>>3)+v(e,y,7&O),y+=7&O}var D=w[u(e,y)&p];y+=15&D;var q=D>>>4,V=_.ddef[q],Q=(V>>>4)+m(e,y,15&V);for(y+=15&V,E&&(t=n.F._check(t,h+(1<<17)));h<z;)t[h]=t[h++-Q],t[h]=t[h++-Q],t[h]=t[h++-Q],t[h]=t[h++-Q];h=z}}}else{7&y&&(y+=8-(7&y));var H=4+(y>>>3),F=e[H-4]|e[H-3]<<8;E&&(t=n.F._check(t,h+F)),t.set(new l(e.buffer,e.byteOffset+H,F),h),y=H+F<<3,h+=F}return t.length==h?t:t.slice(0,h)},n.F._check=function(e,t){var l=e.length;if(t<=l)return e;var d=new Uint8Array(Math.max(l<<1,t));return d.set(e,0),d},n.F._decodeTiny=function(e,t,l,d,m,v){for(var s=n.F._bitsE,c=n.F._get17,a=0;a<l;){var u=e[c(d,m)&t];m+=15&u;var _=u>>>4;if(_<=15)v[a]=_,a++;else{var E=0,P=0;_==16?(P=3+s(d,m,2),m+=2,E=v[a-1]):_==17?(P=3+s(d,m,3),m+=3):_==18&&(P=11+s(d,m,7),m+=7);for(var w=a+P;a<w;)v[a]=E,a++}}return m},n.F._copyOut=function(e,t,l,d){for(var m=0,v=0,s=d.length>>>1;v<l;){var c=e[v+t];d[v<<1]=0,d[1+(v<<1)]=c,c>m&&(m=c),v++}for(;v<s;)d[v<<1]=0,d[1+(v<<1)]=0,v++;return m},n.F.makeCodes=function(e,t){for(var l,d,m,v,s=n.F.U,c=e.length,a=s.bl_count,u=0;u<=t;u++)a[u]=0;for(u=1;u<c;u+=2)a[e[u]]++;var _=s.next_code;for(l=0,a[0]=0,d=1;d<=t;d++)l=l+a[d-1]<<1,_[d]=l;for(m=0;m<c;m+=2)(v=e[m+1])!=0&&(e[m]=_[v],_[v]++)},n.F.codes2map=function(e,t,l){for(var d=e.length,m=n.F.U.rev15,v=0;v<d;v+=2)if(e[v+1]!=0)for(var s=v>>1,c=e[v+1],a=s<<4|c,u=t-c,_=e[v]<<u,E=_+(1<<u);_!=E;)l[m[_]>>>15-t]=a,_++},n.F.revCodes=function(e,t){for(var l=n.F.U.rev15,d=15-t,m=0;m<e.length;m+=2){var v=e[m]<<t-e[m+1];e[m]=l[v]>>>d}},n.F._putsE=function(e,t,l){l<<=7&t;var d=t>>>3;e[d]|=l,e[d+1]|=l>>>8},n.F._putsF=function(e,t,l){l<<=7&t;var d=t>>>3;e[d]|=l,e[d+1]|=l>>>8,e[d+2]|=l>>>16},n.F._bitsE=function(e,t,l){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<l)-1},n.F._bitsF=function(e,t,l){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<l)-1},n.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},n.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},n.F.U=(o=Uint16Array,i=Uint32Array,{next_code:new o(16),bl_count:new o(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new o(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new i(32),flmap:new o(512),fltree:[],fdmap:new o(32),fdtree:[],lmap:new o(32768),ltree:[],ttree:[],dmap:new o(32768),dtree:[],imap:new o(512),itree:[],rev15:new o(32768),lhst:new i(286),dhst:new i(30),ihst:new i(19),lits:new i(15e3),strt:new o(65536),prev:new o(32768)}),function(){for(var e=n.F.U,t=0;t<32768;t++){var l=t;l=(4278255360&(l=(4042322160&(l=(3435973836&(l=(2863311530&l)>>>1|(1431655765&l)<<1))>>>2|(858993459&l)<<2))>>>4|(252645135&l)<<4))>>>8|(16711935&l)<<8,e.rev15[t]=(l>>>16|l<<16)>>>17}function d(m,v,s){for(;v--!=0;)m.push(0,s)}for(t=0;t<32;t++)e.ldef[t]=e.of0[t]<<3|e.exb[t],e.ddef[t]=e.df0[t]<<4|e.dxb[t];d(e.fltree,144,8),d(e.fltree,112,9),d(e.fltree,24,7),d(e.fltree,8,8),n.F.makeCodes(e.fltree,9),n.F.codes2map(e.fltree,9,e.flmap),n.F.revCodes(e.fltree,9),d(e.fdtree,32,5),n.F.makeCodes(e.fdtree,5),n.F.codes2map(e.fdtree,5,e.fdmap),n.F.revCodes(e.fdtree,5),d(e.itree,19,0),d(e.ltree,286,0),d(e.dtree,30,0),d(e.ttree,320,0)}()})();var Di=Fi({__proto__:null,default:yt},[yt]),Pe=function(){var r={nextZero(s,c){for(;s[c]!=0;)c++;return c},readUshort:(s,c)=>s[c]<<8|s[c+1],writeUshort(s,c,a){s[c]=a>>8&255,s[c+1]=255&a},readUint:(s,c)=>16777216*s[c]+(s[c+1]<<16|s[c+2]<<8|s[c+3]),writeUint(s,c,a){s[c]=a>>24&255,s[c+1]=a>>16&255,s[c+2]=a>>8&255,s[c+3]=255&a},readASCII(s,c,a){let u="";for(let _=0;_<a;_++)u+=String.fromCharCode(s[c+_]);return u},writeASCII(s,c,a){for(let u=0;u<a.length;u++)s[c+u]=a.charCodeAt(u)},readBytes(s,c,a){let u=[];for(let _=0;_<a;_++)u.push(s[c+_]);return u},pad:s=>s.length<2?`0${s}`:s,readUTF8(s,c,a){let u,_="";for(let E=0;E<a;E++)_+=`%${r.pad(s[c+E].toString(16))}`;try{u=decodeURIComponent(_)}catch{return r.readASCII(s,c,a)}return u}};function o(s,c,a,u){let _=c*a,E=t(u),P=Math.ceil(c*E/8),w=new Uint8Array(4*_),L=new Uint32Array(w.buffer),{ctype:U}=u,{depth:S}=u,N=r.readUshort;if(U==6){let O=_<<2;if(S==8)for(var b=0;b<O;b+=4)w[b]=s[b],w[b+1]=s[b+1],w[b+2]=s[b+2],w[b+3]=s[b+3];if(S==16)for(b=0;b<O;b++)w[b]=s[b<<1]}else if(U==2){let O=u.tabs.tRNS;if(O==null){if(S==8)for(b=0;b<_;b++){var I=3*b;L[b]=255<<24|s[I+2]<<16|s[I+1]<<8|s[I]}if(S==16)for(b=0;b<_;b++)I=6*b,L[b]=255<<24|s[I+4]<<16|s[I+2]<<8|s[I]}else{var p=O[0];let D=O[1],q=O[2];if(S==8)for(b=0;b<_;b++){var h=b<<2;I=3*b,L[b]=255<<24|s[I+2]<<16|s[I+1]<<8|s[I],s[I]==p&&s[I+1]==D&&s[I+2]==q&&(w[h+3]=0)}if(S==16)for(b=0;b<_;b++)h=b<<2,I=6*b,L[b]=255<<24|s[I+4]<<16|s[I+2]<<8|s[I],N(s,I)==p&&N(s,I+2)==D&&N(s,I+4)==q&&(w[h+3]=0)}}else if(U==3){let O=u.tabs.PLTE,D=u.tabs.tRNS,q=D?D.length:0;if(S==1)for(var y=0;y<a;y++){var C=y*P,A=y*c;for(b=0;b<c;b++){h=A+b<<2;var M=3*(x=s[C+(b>>3)]>>7-((7&b)<<0)&1);w[h]=O[M],w[h+1]=O[M+1],w[h+2]=O[M+2],w[h+3]=x<q?D[x]:255}}if(S==2)for(y=0;y<a;y++)for(C=y*P,A=y*c,b=0;b<c;b++)h=A+b<<2,M=3*(x=s[C+(b>>2)]>>6-((3&b)<<1)&3),w[h]=O[M],w[h+1]=O[M+1],w[h+2]=O[M+2],w[h+3]=x<q?D[x]:255;if(S==4)for(y=0;y<a;y++)for(C=y*P,A=y*c,b=0;b<c;b++)h=A+b<<2,M=3*(x=s[C+(b>>1)]>>4-((1&b)<<2)&15),w[h]=O[M],w[h+1]=O[M+1],w[h+2]=O[M+2],w[h+3]=x<q?D[x]:255;if(S==8)for(b=0;b<_;b++){var x;h=b<<2,M=3*(x=s[b]),w[h]=O[M],w[h+1]=O[M+1],w[h+2]=O[M+2],w[h+3]=x<q?D[x]:255}}else if(U==4){if(S==8)for(b=0;b<_;b++){h=b<<2;var k=s[g=b<<1];w[h]=k,w[h+1]=k,w[h+2]=k,w[h+3]=s[g+1]}if(S==16)for(b=0;b<_;b++){var g;h=b<<2,k=s[g=b<<2],w[h]=k,w[h+1]=k,w[h+2]=k,w[h+3]=s[g+2]}}else if(U==0)for(p=u.tabs.tRNS?u.tabs.tRNS:-1,y=0;y<a;y++){let O=y*P,D=y*c;if(S==1)for(var f=0;f<c;f++){var z=(k=255*(s[O+(f>>>3)]>>>7-(7&f)&1))==255*p?0:255;L[D+f]=z<<24|k<<16|k<<8|k}else if(S==2)for(f=0;f<c;f++)z=(k=85*(s[O+(f>>>2)]>>>6-((3&f)<<1)&3))==85*p?0:255,L[D+f]=z<<24|k<<16|k<<8|k;else if(S==4)for(f=0;f<c;f++)z=(k=17*(s[O+(f>>>1)]>>>4-((1&f)<<2)&15))==17*p?0:255,L[D+f]=z<<24|k<<16|k<<8|k;else if(S==8)for(f=0;f<c;f++)z=(k=s[O+f])==p?0:255,L[D+f]=z<<24|k<<16|k<<8|k;else if(S==16)for(f=0;f<c;f++)k=s[O+(f<<1)],z=N(s,O+(f<<1))==p?0:255,L[D+f]=z<<24|k<<16|k<<8|k}return w}function i(s,c,a,u){let _=t(s),E=Math.ceil(a*_/8),P=new Uint8Array((E+1+s.interlace)*u);return c=s.tabs.CgBI?e(c,P):n(c,P),s.interlace==0?c=l(c,s,0,a,u):s.interlace==1&&(c=function(L,U){let S=U.width,N=U.height,b=t(U),I=b>>3,p=Math.ceil(S*b/8),h=new Uint8Array(N*p),y=0,C=[0,0,4,0,2,0,1],A=[0,4,0,2,0,1,0],M=[8,8,8,4,4,2,2],x=[8,8,4,4,2,2,1],k=0;for(;k<7;){let f=M[k],z=x[k],O=0,D=0,q=C[k];for(;q<N;)q+=f,D++;let V=A[k];for(;V<S;)V+=z,O++;let Q=Math.ceil(O*b/8);l(L,U,y,O,D);let H=0,F=C[k];for(;F<N;){let W=A[k],ee=y+H*Q<<3;for(;W<S;){var g;if(b==1&&(g=(g=L[ee>>3])>>7-(7&ee)&1,h[F*p+(W>>3)]|=g<<7-((7&W)<<0)),b==2&&(g=(g=L[ee>>3])>>6-(7&ee)&3,h[F*p+(W>>2)]|=g<<6-((3&W)<<1)),b==4&&(g=(g=L[ee>>3])>>4-(7&ee)&15,h[F*p+(W>>1)]|=g<<4-((1&W)<<2)),b>=8){let K=F*p+W*I;for(let G=0;G<I;G++)h[K+G]=L[(ee>>3)+G]}ee+=b,W+=z}H++,F+=f}O*D!=0&&(y+=D*(1+Q)),k+=1}return h}(c,s)),c}function n(s,c){return e(new Uint8Array(s.buffer,2,s.length-6),c)}var e=function(){let s={H:{}};return s.H.N=function(c,a){let u=Uint8Array,_,E,P=0,w=0,L=0,U=0,S=0,N=0,b=0,I=0,p=0;if(c[0]==3&&c[1]==0)return a||new u(0);let h=s.H,y=h.b,C=h.e,A=h.R,M=h.n,x=h.A,k=h.Z,g=h.m,f=a==null;for(f&&(a=new u(c.length>>>2<<5));P==0;)if(P=y(c,p,1),w=y(c,p+1,2),p+=3,w!=0){if(f&&(a=s.H.W(a,I+(1<<17))),w==1&&(_=g.J,E=g.h,N=511,b=31),w==2){L=C(c,p,5)+257,U=C(c,p+5,5)+1,S=C(c,p+10,4)+4,p+=14;let O=1;for(var z=0;z<38;z+=2)g.Q[z]=0,g.Q[z+1]=0;for(z=0;z<S;z++){let V=C(c,p+3*z,3);g.Q[1+(g.X[z]<<1)]=V,V>O&&(O=V)}p+=3*S,M(g.Q,O),x(g.Q,O,g.u),_=g.w,E=g.d,p=A(g.u,(1<<O)-1,L+U,c,p,g.v);let D=h.V(g.v,0,L,g.C);N=(1<<D)-1;let q=h.V(g.v,L,U,g.D);b=(1<<q)-1,M(g.C,D),x(g.C,D,_),M(g.D,q),x(g.D,q,E)}for(;;){let O=_[k(c,p)&N];p+=15&O;let D=O>>>4;if(!(D>>>8))a[I++]=D;else{if(D==256)break;{let q=I+D-254;if(D>264){let W=g.q[D-257];q=I+(W>>>3)+C(c,p,7&W),p+=7&W}let V=E[k(c,p)&b];p+=15&V;let Q=V>>>4,H=g.c[Q],F=(H>>>4)+y(c,p,15&H);for(p+=15&H;I<q;)a[I]=a[I++-F],a[I]=a[I++-F],a[I]=a[I++-F],a[I]=a[I++-F];I=q}}}}else{7&p&&(p+=8-(7&p));let O=4+(p>>>3),D=c[O-4]|c[O-3]<<8;f&&(a=s.H.W(a,I+D)),a.set(new u(c.buffer,c.byteOffset+O,D),I),p=O+D<<3,I+=D}return a.length==I?a:a.slice(0,I)},s.H.W=function(c,a){let u=c.length;if(a<=u)return c;let _=new Uint8Array(u<<1);return _.set(c,0),_},s.H.R=function(c,a,u,_,E,P){let w=s.H.e,L=s.H.Z,U=0;for(;U<u;){let S=c[L(_,E)&a];E+=15&S;let N=S>>>4;if(N<=15)P[U]=N,U++;else{let b=0,I=0;N==16?(I=3+w(_,E,2),E+=2,b=P[U-1]):N==17?(I=3+w(_,E,3),E+=3):N==18&&(I=11+w(_,E,7),E+=7);let p=U+I;for(;U<p;)P[U]=b,U++}}return E},s.H.V=function(c,a,u,_){let E=0,P=0,w=_.length>>>1;for(;P<u;){let L=c[P+a];_[P<<1]=0,_[1+(P<<1)]=L,L>E&&(E=L),P++}for(;P<w;)_[P<<1]=0,_[1+(P<<1)]=0,P++;return E},s.H.n=function(c,a){let u=s.H.m,_=c.length,E,P,w,L,U=u.j;for(var S=0;S<=a;S++)U[S]=0;for(S=1;S<_;S+=2)U[c[S]]++;let N=u.K;for(E=0,U[0]=0,P=1;P<=a;P++)E=E+U[P-1]<<1,N[P]=E;for(w=0;w<_;w+=2)L=c[w+1],L!=0&&(c[w]=N[L],N[L]++)},s.H.A=function(c,a,u){let _=c.length,E=s.H.m.r;for(let P=0;P<_;P+=2)if(c[P+1]!=0){let w=P>>1,L=c[P+1],U=w<<4|L,S=a-L,N=c[P]<<S,b=N+(1<<S);for(;N!=b;)u[E[N]>>>15-a]=U,N++}},s.H.l=function(c,a){let u=s.H.m.r,_=15-a;for(let E=0;E<c.length;E+=2){let P=c[E]<<a-c[E+1];c[E]=u[P]>>>_}},s.H.M=function(c,a,u){u<<=7&a;let _=a>>>3;c[_]|=u,c[_+1]|=u>>>8},s.H.I=function(c,a,u){u<<=7&a;let _=a>>>3;c[_]|=u,c[_+1]|=u>>>8,c[_+2]|=u>>>16},s.H.e=function(c,a,u){return(c[a>>>3]|c[1+(a>>>3)]<<8)>>>(7&a)&(1<<u)-1},s.H.b=function(c,a,u){return(c[a>>>3]|c[1+(a>>>3)]<<8|c[2+(a>>>3)]<<16)>>>(7&a)&(1<<u)-1},s.H.Z=function(c,a){return(c[a>>>3]|c[1+(a>>>3)]<<8|c[2+(a>>>3)]<<16)>>>(7&a)},s.H.i=function(c,a){return(c[a>>>3]|c[1+(a>>>3)]<<8|c[2+(a>>>3)]<<16|c[3+(a>>>3)]<<24)>>>(7&a)},s.H.m=function(){let c=Uint16Array,a=Uint32Array;return{K:new c(16),j:new c(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new c(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new a(32),J:new c(512),_:[],h:new c(32),$:[],w:new c(32768),C:[],v:[],d:new c(32768),D:[],u:new c(512),Q:[],r:new c(32768),s:new a(286),Y:new a(30),a:new a(19),t:new a(15e3),k:new c(65536),g:new c(32768)}}(),function(){let c=s.H.m;for(var a=0;a<32768;a++){let _=a;_=(2863311530&_)>>>1|(1431655765&_)<<1,_=(3435973836&_)>>>2|(858993459&_)<<2,_=(4042322160&_)>>>4|(252645135&_)<<4,_=(4278255360&_)>>>8|(16711935&_)<<8,c.r[a]=(_>>>16|_<<16)>>>17}function u(_,E,P){for(;E--!=0;)_.push(0,P)}for(a=0;a<32;a++)c.q[a]=c.S[a]<<3|c.T[a],c.c[a]=c.p[a]<<4|c.z[a];u(c._,144,8),u(c._,112,9),u(c._,24,7),u(c._,8,8),s.H.n(c._,9),s.H.A(c._,9,c.J),s.H.l(c._,9),u(c.$,32,5),s.H.n(c.$,5),s.H.A(c.$,5,c.h),s.H.l(c.$,5),u(c.Q,19,0),u(c.C,286,0),u(c.D,30,0),u(c.v,320,0)}(),s.H.N}();function t(s){return[1,null,3,1,2,null,4][s.ctype]*s.depth}function l(s,c,a,u,_){let E=t(c),P=Math.ceil(u*E/8),w,L;E=Math.ceil(E/8);let U=s[a],S=0;if(U>1&&(s[a]=[0,0,1][U-2]),U==3)for(S=E;S<P;S++)s[S+1]=s[S+1]+(s[S+1-E]>>>1)&255;for(let N=0;N<_;N++)if(w=a+N*P,L=w+N+1,U=s[L-1],S=0,U==0)for(;S<P;S++)s[w+S]=s[L+S];else if(U==1){for(;S<E;S++)s[w+S]=s[L+S];for(;S<P;S++)s[w+S]=s[L+S]+s[w+S-E]}else if(U==2)for(;S<P;S++)s[w+S]=s[L+S]+s[w+S-P];else if(U==3){for(;S<E;S++)s[w+S]=s[L+S]+(s[w+S-P]>>>1);for(;S<P;S++)s[w+S]=s[L+S]+(s[w+S-P]+s[w+S-E]>>>1)}else{for(;S<E;S++)s[w+S]=s[L+S]+d(0,s[w+S-P],0);for(;S<P;S++)s[w+S]=s[L+S]+d(s[w+S-E],s[w+S-P],s[w+S-E-P])}return s}function d(s,c,a){let u=s+c-a,_=u-s,E=u-c,P=u-a;return _*_<=E*E&&_*_<=P*P?s:E*E<=P*P?c:a}function m(s,c,a){a.width=r.readUint(s,c),c+=4,a.height=r.readUint(s,c),c+=4,a.depth=s[c],c++,a.ctype=s[c],c++,a.compress=s[c],c++,a.filter=s[c],c++,a.interlace=s[c],c++}function v(s,c,a,u,_,E,P,w,L){let U=Math.min(c,_),S=Math.min(a,E),N=0,b=0;for(let k=0;k<S;k++)for(let g=0;g<U;g++)if(P>=0&&w>=0?(N=k*c+g<<2,b=(w+k)*_+P+g<<2):(N=(-w+k)*c-P+g<<2,b=k*_+g<<2),L==0)u[b]=s[N],u[b+1]=s[N+1],u[b+2]=s[N+2],u[b+3]=s[N+3];else if(L==1){var I=s[N+3]*.00392156862745098,p=s[N]*I,h=s[N+1]*I,y=s[N+2]*I,C=u[b+3]*(1/255),A=u[b]*C,M=u[b+1]*C,x=u[b+2]*C;let f=1-I,z=I+C*f,O=z==0?0:1/z;u[b+3]=255*z,u[b+0]=(p+A*f)*O,u[b+1]=(h+M*f)*O,u[b+2]=(y+x*f)*O}else if(L==2)I=s[N+3],p=s[N],h=s[N+1],y=s[N+2],C=u[b+3],A=u[b],M=u[b+1],x=u[b+2],I==C&&p==A&&h==M&&y==x?(u[b]=0,u[b+1]=0,u[b+2]=0,u[b+3]=0):(u[b]=p,u[b+1]=h,u[b+2]=y,u[b+3]=I);else if(L==3){if(I=s[N+3],p=s[N],h=s[N+1],y=s[N+2],C=u[b+3],A=u[b],M=u[b+1],x=u[b+2],I==C&&p==A&&h==M&&y==x)continue;if(I<220&&C>20)return!1}return!0}return{decode:function(c){let a=new Uint8Array(c),u=8,_=r,E=_.readUshort,P=_.readUint,w={tabs:{},frames:[]},L=new Uint8Array(a.length),U,S=0,N=0,b=[137,80,78,71,13,10,26,10];for(var I=0;I<8;I++)if(a[I]!=b[I])throw"The input is not a PNG file!";for(;u<a.length;){let k=_.readUint(a,u);u+=4;let g=_.readASCII(a,u,4);if(u+=4,g=="IHDR")m(a,u,w);else if(g=="iCCP"){for(var p=u;a[p]!=0;)p++;_.readASCII(a,u,p-u),a[p+1];let f=a.slice(p+2,u+k),z=null;try{z=n(f)}catch{z=e(f)}w.tabs[g]=z}else if(g=="CgBI")w.tabs[g]=a.slice(u,u+4);else if(g=="IDAT"){for(I=0;I<k;I++)L[S+I]=a[u+I];S+=k}else if(g=="acTL")w.tabs[g]={num_frames:P(a,u),num_plays:P(a,u+4)},U=new Uint8Array(a.length);else if(g=="fcTL"){N!=0&&((x=w.frames[w.frames.length-1]).data=i(w,U.slice(0,N),x.rect.width,x.rect.height),N=0);let f={x:P(a,u+12),y:P(a,u+16),width:P(a,u+4),height:P(a,u+8)},z=E(a,u+22);z=E(a,u+20)/(z==0?100:z);let O={rect:f,delay:Math.round(1e3*z),dispose:a[u+24],blend:a[u+25]};w.frames.push(O)}else if(g=="fdAT"){for(I=0;I<k-4;I++)U[N+I]=a[u+I+4];N+=k-4}else if(g=="pHYs")w.tabs[g]=[_.readUint(a,u),_.readUint(a,u+4),a[u+8]];else if(g=="cHRM")for(w.tabs[g]=[],I=0;I<8;I++)w.tabs[g].push(_.readUint(a,u+4*I));else if(g=="tEXt"||g=="zTXt"){w.tabs[g]==null&&(w.tabs[g]={});var h=_.nextZero(a,u),y=_.readASCII(a,u,h-u),C=u+k-h-1;if(g=="tEXt")M=_.readASCII(a,h+1,C);else{var A=n(a.slice(h+2,h+2+C));M=_.readUTF8(A,0,A.length)}w.tabs[g][y]=M}else if(g=="iTXt"){w.tabs[g]==null&&(w.tabs[g]={}),h=0,p=u,h=_.nextZero(a,p),y=_.readASCII(a,p,h-p);let f=a[p=h+1];var M;a[p+1],p+=2,h=_.nextZero(a,p),_.readASCII(a,p,h-p),p=h+1,h=_.nextZero(a,p),_.readUTF8(a,p,h-p),C=k-((p=h+1)-u),f==0?M=_.readUTF8(a,p,C):(A=n(a.slice(p,p+C)),M=_.readUTF8(A,0,A.length)),w.tabs[g][y]=M}else if(g=="PLTE")w.tabs[g]=_.readBytes(a,u,k);else if(g=="hIST"){let f=w.tabs.PLTE.length/3;for(w.tabs[g]=[],I=0;I<f;I++)w.tabs[g].push(E(a,u+2*I))}else if(g=="tRNS")w.ctype==3?w.tabs[g]=_.readBytes(a,u,k):w.ctype==0?w.tabs[g]=E(a,u):w.ctype==2&&(w.tabs[g]=[E(a,u),E(a,u+2),E(a,u+4)]);else if(g=="gAMA")w.tabs[g]=_.readUint(a,u)/1e5;else if(g=="sRGB")w.tabs[g]=a[u];else if(g=="bKGD")w.ctype==0||w.ctype==4?w.tabs[g]=[E(a,u)]:w.ctype==2||w.ctype==6?w.tabs[g]=[E(a,u),E(a,u+2),E(a,u+4)]:w.ctype==3&&(w.tabs[g]=a[u]);else if(g=="IEND")break;u+=k,_.readUint(a,u),u+=4}var x;return N!=0&&((x=w.frames[w.frames.length-1]).data=i(w,U.slice(0,N),x.rect.width,x.rect.height)),w.data=i(w,L,w.width,w.height),delete w.compress,delete w.interlace,delete w.filter,w},toRGBA8:function(c){let a=c.width,u=c.height;if(c.tabs.acTL==null)return[o(c.data,a,u,c).buffer];let _=[];c.frames[0].data==null&&(c.frames[0].data=c.data);let E=a*u*4,P=new Uint8Array(E),w=new Uint8Array(E),L=new Uint8Array(E);for(let S=0;S<c.frames.length;S++){let N=c.frames[S],b=N.rect.x,I=N.rect.y,p=N.rect.width,h=N.rect.height,y=o(N.data,p,h,c);if(S!=0)for(var U=0;U<E;U++)L[U]=P[U];if(N.blend==0?v(y,p,h,P,a,u,b,I,0):N.blend==1&&v(y,p,h,P,a,u,b,I,1),_.push(P.buffer.slice(0)),N.dispose!=0){if(N.dispose==1)v(w,p,h,P,a,u,b,I,0);else if(N.dispose==2)for(U=0;U<E;U++)P[U]=L[U]}}return _},_paeth:d,_copyTile:v,_bin:r}}();(function(){let{_copyTile:r}=Pe,{_bin:o}=Pe,i=Pe._paeth;var n={table:function(){let p=new Uint32Array(256);for(let h=0;h<256;h++){let y=h;for(let C=0;C<8;C++)1&y?y=3988292384^y>>>1:y>>>=1;p[h]=y}return p}(),update(p,h,y,C){for(let A=0;A<C;A++)p=n.table[255&(p^h[y+A])]^p>>>8;return p},crc:(p,h,y)=>4294967295^n.update(4294967295,p,h,y)};function e(p,h,y,C){h[y]+=p[0]*C>>4,h[y+1]+=p[1]*C>>4,h[y+2]+=p[2]*C>>4,h[y+3]+=p[3]*C>>4}function t(p){return Math.max(0,Math.min(255,p))}function l(p,h){let y=p[0]-h[0],C=p[1]-h[1],A=p[2]-h[2],M=p[3]-h[3];return y*y+C*C+A*A+M*M}function d(p,h,y,C,A,M,x){x==null&&(x=1);let k=C.length,g=[];for(var f=0;f<k;f++){let F=C[f];g.push([F>>>0&255,F>>>8&255,F>>>16&255,F>>>24&255])}for(f=0;f<k;f++){let F=4294967295;for(var z=0,O=0;O<k;O++){var D=l(g[f],g[O]);O!=f&&D<F&&(F=D,z=O)}}let q=new Uint32Array(A.buffer),V=new Int16Array(h*y*4),Q=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(f=0;f<Q.length;f++)Q[f]=255*((Q[f]+.5)/16-.5);for(let F=0;F<y;F++)for(let W=0;W<h;W++){var H;f=4*(F*h+W),x!=2?H=[t(p[f]+V[f]),t(p[f+1]+V[f+1]),t(p[f+2]+V[f+2]),t(p[f+3]+V[f+3])]:(D=Q[4*(3&F)+(3&W)],H=[t(p[f]+D),t(p[f+1]+D),t(p[f+2]+D),t(p[f+3]+D)]),z=0;let ee=16777215;for(O=0;O<k;O++){let Y=l(H,g[O]);Y<ee&&(ee=Y,z=O)}let K=g[z],G=[H[0]-K[0],H[1]-K[1],H[2]-K[2],H[3]-K[3]];x==1&&(W!=h-1&&e(G,V,f+4,7),F!=y-1&&(W!=0&&e(G,V,f+4*h-4,3),e(G,V,f+4*h,5),W!=h-1&&e(G,V,f+4*h+4,1))),M[f>>2]=z,q[f>>2]=C[z]}}function m(p,h,y,C,A){A==null&&(A={});let{crc:M}=n,x=o.writeUint,k=o.writeUshort,g=o.writeASCII,f=8,z=p.frames.length>1,O,D=!1,q=33+(z?20:0);if(A.sRGB!=null&&(q+=13),A.pHYs!=null&&(q+=21),A.iCCP!=null&&(O=pako.deflate(A.iCCP),q+=21+O.length+4),p.ctype==3){for(var V=p.plte.length,Q=0;Q<V;Q++)p.plte[Q]>>>24!=255&&(D=!0);q+=8+3*V+4+(D?8+1*V+4:0)}for(var H=0;H<p.frames.length;H++)z&&(q+=38),q+=(K=p.frames[H]).cimg.length+12,H!=0&&(q+=4);q+=12;let F=new Uint8Array(q),W=[137,80,78,71,13,10,26,10];for(Q=0;Q<8;Q++)F[Q]=W[Q];if(x(F,f,13),f+=4,g(F,f,"IHDR"),f+=4,x(F,f,h),f+=4,x(F,f,y),f+=4,F[f]=p.depth,f++,F[f]=p.ctype,f++,F[f]=0,f++,F[f]=0,f++,F[f]=0,f++,x(F,f,M(F,f-17,17)),f+=4,A.sRGB!=null&&(x(F,f,1),f+=4,g(F,f,"sRGB"),f+=4,F[f]=A.sRGB,f++,x(F,f,M(F,f-5,5)),f+=4),A.iCCP!=null){let G=13+O.length;x(F,f,G),f+=4,g(F,f,"iCCP"),f+=4,g(F,f,"ICC profile"),f+=11,f+=2,F.set(O,f),f+=O.length,x(F,f,M(F,f-(G+4),G+4)),f+=4}if(A.pHYs!=null&&(x(F,f,9),f+=4,g(F,f,"pHYs"),f+=4,x(F,f,A.pHYs[0]),f+=4,x(F,f,A.pHYs[1]),f+=4,F[f]=A.pHYs[2],f++,x(F,f,M(F,f-13,13)),f+=4),z&&(x(F,f,8),f+=4,g(F,f,"acTL"),f+=4,x(F,f,p.frames.length),f+=4,x(F,f,A.loop!=null?A.loop:0),f+=4,x(F,f,M(F,f-12,12)),f+=4),p.ctype==3){for(x(F,f,3*(V=p.plte.length)),f+=4,g(F,f,"PLTE"),f+=4,Q=0;Q<V;Q++){let G=3*Q,Y=p.plte[Q],ie=255&Y,de=Y>>>8&255,He=Y>>>16&255;F[f+G+0]=ie,F[f+G+1]=de,F[f+G+2]=He}if(f+=3*V,x(F,f,M(F,f-3*V-4,3*V+4)),f+=4,D){for(x(F,f,V),f+=4,g(F,f,"tRNS"),f+=4,Q=0;Q<V;Q++)F[f+Q]=p.plte[Q]>>>24&255;f+=V,x(F,f,M(F,f-V-4,V+4)),f+=4}}let ee=0;for(H=0;H<p.frames.length;H++){var K=p.frames[H];z&&(x(F,f,26),f+=4,g(F,f,"fcTL"),f+=4,x(F,f,ee++),f+=4,x(F,f,K.rect.width),f+=4,x(F,f,K.rect.height),f+=4,x(F,f,K.rect.x),f+=4,x(F,f,K.rect.y),f+=4,k(F,f,C[H]),f+=2,k(F,f,1e3),f+=2,F[f]=K.dispose,f++,F[f]=K.blend,f++,x(F,f,M(F,f-30,30)),f+=4);let G=K.cimg;x(F,f,(V=G.length)+(H==0?0:4)),f+=4;let Y=f;g(F,f,H==0?"IDAT":"fdAT"),f+=4,H!=0&&(x(F,f,ee++),f+=4),F.set(G,f),f+=V,x(F,f,M(F,Y,f-Y)),f+=4}return x(F,f,0),f+=4,g(F,f,"IEND"),f+=4,x(F,f,M(F,f-4,4)),f+=4,F.buffer}function v(p,h,y){for(let C=0;C<p.frames.length;C++){let A=p.frames[C];A.rect.width;let M=A.rect.height,x=new Uint8Array(M*A.bpl+M);A.cimg=u(A.img,M,A.bpp,A.bpl,x,h,y)}}function s(p,h,y,C,A){let M=A[0],x=A[1],k=A[2],g=A[3],f=A[4],z=A[5],O=6,D=8,q=255;for(var V=0;V<p.length;V++){let _e=new Uint8Array(p[V]);for(var Q=_e.length,H=0;H<Q;H+=4)q&=_e[H+3]}let F=q!=255,W=function(te,Z,he,ve,le,ye){let ce=[];for(var J=0;J<te.length;J++){let we=new Uint8Array(te[J]),Me=new Uint32Array(we.buffer);var Ae;let Ce=0,De=0,Oe=Z,je=he,St=ve?1:0;if(J!=0){let Er=ye||ve||J==1||ce[J-2].dispose!=0?1:2,Pt=0,Yt=1e9;for(let it=0;it<Er;it++){var Ne=new Uint8Array(te[J-1-it]);let Mr=new Uint32Array(te[J-1-it]),Le=Z,ze=he,Ge=-1,ot=-1;for(let Qe=0;Qe<he;Qe++)for(let qe=0;qe<Z;qe++)Me[be=Qe*Z+qe]!=Mr[be]&&(qe<Le&&(Le=qe),qe>Ge&&(Ge=qe),Qe<ze&&(ze=Qe),Qe>ot&&(ot=Qe));Ge==-1&&(Le=ze=Ge=ot=0),le&&((1&Le)==1&&Le--,(1&ze)==1&&ze--);let Zt=(Ge-Le+1)*(ot-ze+1);Zt<Yt&&(Yt=Zt,Pt=it,Ce=Le,De=ze,Oe=Ge-Le+1,je=ot-ze+1)}Ne=new Uint8Array(te[J-1-Pt]),Pt==1&&(ce[J-1].dispose=2),Ae=new Uint8Array(Oe*je*4),r(Ne,Z,he,Ae,Oe,je,-Ce,-De,0),St=r(we,Z,he,Ae,Oe,je,-Ce,-De,3)?1:0,St==1?a(we,Z,he,Ae,{x:Ce,y:De,width:Oe,height:je}):r(we,Z,he,Ae,Oe,je,-Ce,-De,0)}else Ae=we.slice(0);ce.push({rect:{x:Ce,y:De,width:Oe,height:je},img:Ae,blend:St,dispose:0})}if(ve)for(J=0;J<ce.length;J++){if((Ve=ce[J]).blend==1)continue;let we=Ve.rect,Me=ce[J-1].rect,Ce=Math.min(we.x,Me.x),De=Math.min(we.y,Me.y),Oe={x:Ce,y:De,width:Math.max(we.x+we.width,Me.x+Me.width)-Ce,height:Math.max(we.y+we.height,Me.y+Me.height)-De};ce[J-1].dispose=1,J-1!=0&&c(te,Z,he,ce,J-1,Oe,le),c(te,Z,he,ce,J,Oe,le)}let pt=0;if(te.length!=1)for(var be=0;be<ce.length;be++){var Ve;pt+=(Ve=ce[be]).rect.width*Ve.rect.height}return ce}(p,h,y,M,x,k),ee={},K=[],G=[];if(C!=0){let _e=[];for(H=0;H<W.length;H++)_e.push(W[H].img.buffer);let te=function(le){let ye=0;for(var ce=0;ce<le.length;ce++)ye+=le[ce].byteLength;let J=new Uint8Array(ye),Ae=0;for(ce=0;ce<le.length;ce++){let Ne=new Uint8Array(le[ce]),pt=Ne.length;for(let be=0;be<pt;be+=4){let Ve=Ne[be],we=Ne[be+1],Me=Ne[be+2],Ce=Ne[be+3];Ce==0&&(Ve=we=Me=0),J[Ae+be]=Ve,J[Ae+be+1]=we,J[Ae+be+2]=Me,J[Ae+be+3]=Ce}Ae+=pt}return J.buffer}(_e),Z=E(te,C);for(H=0;H<Z.plte.length;H++)K.push(Z.plte[H].est.rgba);let he=0;for(H=0;H<W.length;H++){let ve=(ie=W[H]).img.length;var Y=new Uint8Array(Z.inds.buffer,he>>2,ve>>2);G.push(Y);let le=new Uint8Array(Z.abuf,he,ve);z&&d(ie.img,ie.rect.width,ie.rect.height,K,le,Y),ie.img.set(le),he+=ve}}else for(V=0;V<W.length;V++){var ie=W[V];let _e=new Uint32Array(ie.img.buffer);var de=ie.rect.width;for(Q=_e.length,Y=new Uint8Array(Q),G.push(Y),H=0;H<Q;H++){let te=_e[H];if(H!=0&&te==_e[H-1])Y[H]=Y[H-1];else if(H>de&&te==_e[H-de])Y[H]=Y[H-de];else{let Z=ee[te];if(Z==null&&(ee[te]=Z=K.length,K.push(te),K.length>=300))break;Y[H]=Z}}}let He=K.length;for(He<=256&&f==0&&(D=He<=2?1:He<=4?2:He<=16?4:8,D=Math.max(D,g)),V=0;V<W.length;V++){(ie=W[V]).rect.x,ie.rect.y,de=ie.rect.width;let _e=ie.rect.height,te=ie.img;new Uint32Array(te.buffer);let Z=4*de,he=4;if(He<=256&&f==0){Z=Math.ceil(D*de/8);var ke=new Uint8Array(Z*_e);let ve=G[V];for(let le=0;le<_e;le++){H=le*Z;let ye=le*de;if(D==8)for(var ne=0;ne<de;ne++)ke[H+ne]=ve[ye+ne];else if(D==4)for(ne=0;ne<de;ne++)ke[H+(ne>>1)]|=ve[ye+ne]<<4-4*(1&ne);else if(D==2)for(ne=0;ne<de;ne++)ke[H+(ne>>2)]|=ve[ye+ne]<<6-2*(3&ne);else if(D==1)for(ne=0;ne<de;ne++)ke[H+(ne>>3)]|=ve[ye+ne]<<7-1*(7&ne)}te=ke,O=3,he=1}else if(F==0&&W.length==1){ke=new Uint8Array(de*_e*3);let ve=de*_e;for(H=0;H<ve;H++){let le=3*H,ye=4*H;ke[le]=te[ye],ke[le+1]=te[ye+1],ke[le+2]=te[ye+2]}te=ke,O=2,he=3,Z=3*de}ie.img=te,ie.bpl=Z,ie.bpp=he}return{ctype:O,depth:D,plte:K,frames:W}}function c(p,h,y,C,A,M,x){let k=Uint8Array,g=Uint32Array,f=new k(p[A-1]),z=new g(p[A-1]),O=A+1<p.length?new k(p[A+1]):null,D=new k(p[A]),q=new g(D.buffer),V=h,Q=y,H=-1,F=-1;for(let ee=0;ee<M.height;ee++)for(let K=0;K<M.width;K++){let G=M.x+K,Y=M.y+ee,ie=Y*h+G,de=q[ie];de==0||C[A-1].dispose==0&&z[ie]==de&&(O==null||O[4*ie+3]!=0)||(G<V&&(V=G),G>H&&(H=G),Y<Q&&(Q=Y),Y>F&&(F=Y))}H==-1&&(V=Q=H=F=0),x&&((1&V)==1&&V--,(1&Q)==1&&Q--),M={x:V,y:Q,width:H-V+1,height:F-Q+1};let W=C[A];W.rect=M,W.blend=1,W.img=new Uint8Array(M.width*M.height*4),C[A-1].dispose==0?(r(f,h,y,W.img,M.width,M.height,-M.x,-M.y,0),a(D,h,y,W.img,M)):r(D,h,y,W.img,M.width,M.height,-M.x,-M.y,0)}function a(p,h,y,C,A){r(p,h,y,C,A.width,A.height,-A.x,-A.y,2)}function u(p,h,y,C,A,M,x){let k=[],g,f=[0,1,2,3,4];M!=-1?f=[M]:(h*C>5e5||y==1)&&(f=[0]),x&&(g={level:0});let z=Di;for(var O=0;O<f.length;O++){for(let V=0;V<h;V++)_(A,p,V,C,y,f[O]);k.push(z.deflate(A,g))}let D,q=1e9;for(O=0;O<k.length;O++)k[O].length<q&&(D=O,q=k[O].length);return k[D]}function _(p,h,y,C,A,M){let x=y*C,k=x+y;if(p[k]=M,k++,M==0)if(C<500)for(var g=0;g<C;g++)p[k+g]=h[x+g];else p.set(new Uint8Array(h.buffer,x,C),k);else if(M==1){for(g=0;g<A;g++)p[k+g]=h[x+g];for(g=A;g<C;g++)p[k+g]=h[x+g]-h[x+g-A]+256&255}else if(y==0){for(g=0;g<A;g++)p[k+g]=h[x+g];if(M==2)for(g=A;g<C;g++)p[k+g]=h[x+g];if(M==3)for(g=A;g<C;g++)p[k+g]=h[x+g]-(h[x+g-A]>>1)+256&255;if(M==4)for(g=A;g<C;g++)p[k+g]=h[x+g]-i(h[x+g-A],0,0)+256&255}else{if(M==2)for(g=0;g<C;g++)p[k+g]=h[x+g]+256-h[x+g-C]&255;if(M==3){for(g=0;g<A;g++)p[k+g]=h[x+g]+256-(h[x+g-C]>>1)&255;for(g=A;g<C;g++)p[k+g]=h[x+g]+256-(h[x+g-C]+h[x+g-A]>>1)&255}if(M==4){for(g=0;g<A;g++)p[k+g]=h[x+g]+256-i(0,h[x+g-C],0)&255;for(g=A;g<C;g++)p[k+g]=h[x+g]+256-i(h[x+g-A],h[x+g-C],h[x+g-A-C])&255}}}function E(p,h){let y=new Uint8Array(p),C=y.slice(0),A=new Uint32Array(C.buffer),M=P(C,h),x=M[0],k=M[1],g=y.length,f=new Uint8Array(g>>2),z;if(y.length<2e7)for(var O=0;O<g;O+=4)z=w(x,D=y[O]*(1/255),q=y[O+1]*(1/255),V=y[O+2]*(1/255),Q=y[O+3]*(1/255)),f[O>>2]=z.ind,A[O>>2]=z.est.rgba;else for(O=0;O<g;O+=4){var D=y[O]*.00392156862745098,q=y[O+1]*(1/255),V=y[O+2]*(1/255),Q=y[O+3]*(1/255);for(z=x;z.left;)z=L(z.est,D,q,V,Q)<=0?z.left:z.right;f[O>>2]=z.ind,A[O>>2]=z.est.rgba}return{abuf:C.buffer,inds:f,plte:k}}function P(p,h,y){y==null&&(y=1e-4);let C=new Uint32Array(p.buffer),A={i0:0,i1:p.length,bst:null,est:null,tdst:0,left:null,right:null};A.bst=N(p,A.i0,A.i1),A.est=b(A.bst);let M=[A];for(;M.length<h;){let k=0,g=0;for(var x=0;x<M.length;x++)M[x].est.L>k&&(k=M[x].est.L,g=x);if(k<y)break;let f=M[g],z=U(p,C,f.i0,f.i1,f.est.e,f.est.eMq255);if(f.i0>=z||f.i1<=z){f.est.L=0;continue}let O={i0:f.i0,i1:z,bst:null,est:null,tdst:0,left:null,right:null};O.bst=N(p,O.i0,O.i1),O.est=b(O.bst);let D={i0:z,i1:f.i1,bst:null,est:null,tdst:0,left:null,right:null};for(D.bst={R:[],m:[],N:f.bst.N-O.bst.N},x=0;x<16;x++)D.bst.R[x]=f.bst.R[x]-O.bst.R[x];for(x=0;x<4;x++)D.bst.m[x]=f.bst.m[x]-O.bst.m[x];D.est=b(D.bst),f.left=O,f.right=D,M[g]=O,M.push(D)}for(M.sort((k,g)=>g.bst.N-k.bst.N),x=0;x<M.length;x++)M[x].ind=x;return[A,M]}function w(p,h,y,C,A){if(p.left==null)return p.tdst=function(O,D,q,V,Q){let H=D-O[0],F=q-O[1],W=V-O[2],ee=Q-O[3];return H*H+F*F+W*W+ee*ee}(p.est.q,h,y,C,A),p;let M=L(p.est,h,y,C,A),x=p.left,k=p.right;M>0&&(x=p.right,k=p.left);let g=w(x,h,y,C,A);if(g.tdst<=M*M)return g;let f=w(k,h,y,C,A);return f.tdst<g.tdst?f:g}function L(p,h,y,C,A){let{e:M}=p;return M[0]*h+M[1]*y+M[2]*C+M[3]*A-p.eMq}function U(p,h,y,C,A,M){for(C-=4;y<C;){for(;S(p,y,A)<=M;)y+=4;for(;S(p,C,A)>M;)C-=4;if(y>=C)break;let x=h[y>>2];h[y>>2]=h[C>>2],h[C>>2]=x,y+=4,C-=4}for(;S(p,y,A)>M;)y-=4;return y+4}function S(p,h,y){return p[h]*y[0]+p[h+1]*y[1]+p[h+2]*y[2]+p[h+3]*y[3]}function N(p,h,y){let C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],A=[0,0,0,0],M=y-h>>2;for(let x=h;x<y;x+=4){let k=p[x]*.00392156862745098,g=p[x+1]*(1/255),f=p[x+2]*(1/255),z=p[x+3]*(1/255);A[0]+=k,A[1]+=g,A[2]+=f,A[3]+=z,C[0]+=k*k,C[1]+=k*g,C[2]+=k*f,C[3]+=k*z,C[5]+=g*g,C[6]+=g*f,C[7]+=g*z,C[10]+=f*f,C[11]+=f*z,C[15]+=z*z}return C[4]=C[1],C[8]=C[2],C[9]=C[6],C[12]=C[3],C[13]=C[7],C[14]=C[11],{R:C,m:A,N:M}}function b(p){let{R:h}=p,{m:y}=p,{N:C}=p,A=y[0],M=y[1],x=y[2],k=y[3],g=C==0?0:1/C,f=[h[0]-A*A*g,h[1]-A*M*g,h[2]-A*x*g,h[3]-A*k*g,h[4]-M*A*g,h[5]-M*M*g,h[6]-M*x*g,h[7]-M*k*g,h[8]-x*A*g,h[9]-x*M*g,h[10]-x*x*g,h[11]-x*k*g,h[12]-k*A*g,h[13]-k*M*g,h[14]-k*x*g,h[15]-k*k*g],z=f,O=I,D=[Math.random(),Math.random(),Math.random(),Math.random()],q=0,V=0;if(C!=0)for(let H=0;H<16&&(D=O.multVec(z,D),V=Math.sqrt(O.dot(D,D)),D=O.sml(1/V,D),!(H!=0&&Math.abs(V-q)<1e-9));H++)q=V;let Q=[A*g,M*g,x*g,k*g];return{Cov:f,q:Q,e:D,L:q,eMq255:O.dot(O.sml(255,Q),D),eMq:O.dot(D,Q),rgba:(Math.round(255*Q[3])<<24|Math.round(255*Q[2])<<16|Math.round(255*Q[1])<<8|Math.round(255*Q[0])<<0)>>>0}}var I={multVec:(p,h)=>[p[0]*h[0]+p[1]*h[1]+p[2]*h[2]+p[3]*h[3],p[4]*h[0]+p[5]*h[1]+p[6]*h[2]+p[7]*h[3],p[8]*h[0]+p[9]*h[1]+p[10]*h[2]+p[11]*h[3],p[12]*h[0]+p[13]*h[1]+p[14]*h[2]+p[15]*h[3]],dot:(p,h)=>p[0]*h[0]+p[1]*h[1]+p[2]*h[2]+p[3]*h[3],sml:(p,h)=>[p*h[0],p*h[1],p*h[2],p*h[3]]};Pe.encode=function(h,y,C,A,M,x,k){A==null&&(A=0),k==null&&(k=!1);let g=s(h,y,C,A,[!1,!1,!1,0,k,!1]);return v(g,-1),m(g,y,C,M,x)},Pe.encodeLL=function(h,y,C,A,M,x,k,g){let f={ctype:0+(A==1?0:2)+(M==0?0:4),depth:x,frames:[]},z=(A+M)*x,O=z*y;for(let D=0;D<h.length;D++)f.frames.push({rect:{x:0,y:0,width:y,height:C},img:new Uint8Array(h[D]),blend:0,dispose:1,bpp:Math.ceil(z/8),bpl:Math.ceil(O/8)});return v(f,0,!0),m(f,y,C,k,g)},Pe.encode.compress=s,Pe.encode.dither=d,Pe.quantize=E,Pe.quantize.getKDtree=P,Pe.quantize.getNearest=w})();var hr={toArrayBuffer(r,o){let i=r.width,n=r.height,e=i<<2,t=r.getContext("2d").getImageData(0,0,i,n),l=new Uint32Array(t.data.buffer),d=(32*i+31)/32<<2,m=d*n,v=122+m,s=new ArrayBuffer(v),c=new DataView(s),a=1<<20,u,_,E,P,w=a,L=0,U=0,S=0;function N(p){c.setUint16(U,p,!0),U+=2}function b(p){c.setUint32(U,p,!0),U+=4}function I(p){U+=p}N(19778),b(v),I(4),b(122),b(108),b(i),b(-n>>>0),N(1),N(32),b(3),b(m),b(2835),b(2835),I(8),b(16711680),b(65280),b(255),b(4278190080),b(1466527264),function p(){for(;L<n&&w>0;){for(P=122+L*d,u=0;u<e;)w--,_=l[S++],E=_>>>24,c.setUint32(P+u,_<<8|E),u+=4;L++}S<l.length?(w=a,setTimeout(p,hr._dly)):o(s)}()},toBlob(r,o){this.toArrayBuffer(r,i=>{o(new Blob([i],{type:"image/bmp"}))})},_dly:9},xe={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},Ni={[xe.CHROME]:16384,[xe.FIREFOX]:11180,[xe.DESKTOP_SAFARI]:16384,[xe.IE]:8192,[xe.IOS]:4096,[xe.ETC]:8192},Xt=typeof window<"u",gr=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,At=Xt&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),Li=(Xt||gr)&&(At&&At.getOriginalSymbol(window,"File")||typeof File<"u"&&File),mr=(Xt||gr)&&(At&&At.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Kt(r,o,i=Date.now()){return new Promise(n=>{let e=r.split(","),t=e[0].match(/:(.*?);/)[1],l=globalThis.atob(e[1]),d=l.length,m=new Uint8Array(d);for(;d--;)m[d]=l.charCodeAt(d);let v=new Blob([m],{type:t});v.name=o,v.lastModified=i,n(v)})}function _r(r){return new Promise((o,i)=>{let n=new mr;n.onload=()=>o(n.result),n.onerror=e=>i(e),n.readAsDataURL(r)})}function br(r){return new Promise((o,i)=>{let n=new Image;n.onload=()=>o(n),n.onerror=e=>i(e),n.src=r})}function $e(){if($e.cachedResult!==void 0)return $e.cachedResult;let r=xe.ETC,{userAgent:o}=navigator;return/Chrom(e|ium)/i.test(o)?r=xe.CHROME:/iP(ad|od|hone)/i.test(o)&&/WebKit/i.test(o)?r=xe.IOS:/Safari/i.test(o)?r=xe.DESKTOP_SAFARI:/Firefox/i.test(o)?r=xe.FIREFOX:(/MSIE/i.test(o)||document.documentMode)&&(r=xe.IE),$e.cachedResult=r,$e.cachedResult}function vr(r,o){let i=$e(),n=Ni[i],e=r,t=o,l=e*t,d=e>t?t/e:e/t;for(;l>n*n;){let m=(n+e)/2,v=(n+t)/2;m<v?(t=v,e=v*d):(t=m*d,e=m),l=e*t}return{width:e,height:t}}function Mt(r,o){let i,n;try{if(i=new OffscreenCanvas(r,o),n=i.getContext("2d"),n===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{i=document.createElement("canvas"),n=i.getContext("2d")}return i.width=r,i.height=o,[i,n]}function wr(r,o){let{width:i,height:n}=vr(r.width,r.height),[e,t]=Mt(i,n);return o&&/jpe?g/.test(o)&&(t.fillStyle="white",t.fillRect(0,0,e.width,e.height)),t.drawImage(r,0,0,e.width,e.height),e}function xt(){return xt.cachedResult!==void 0||(xt.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),xt.cachedResult}function Ct(r,o={}){return new Promise(function(i,n){let e,t;var l=function(){try{return t=wr(e,o.fileType||r.type),i([e,t])}catch(m){return n(m)}},d=function(m){try{var v=function(s){try{throw s}catch(c){return n(c)}};try{let s;return _r(r).then(function(c){try{return s=c,br(s).then(function(a){try{return e=a,function(){try{return l()}catch(u){return n(u)}}()}catch(u){return v(u)}},v)}catch(a){return v(a)}},v)}catch(s){v(s)}}catch(s){return n(s)}};try{if(xt()||[xe.DESKTOP_SAFARI,xe.MOBILE_SAFARI].includes($e()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(r).then(function(m){try{return e=m,l()}catch{return d()}},d)}catch{d()}})}function Et(r,o,i,n,e=1){return new Promise(function(t,l){let d;if(o==="image/png"){let c,a,u;return c=r.getContext("2d"),{data:a}=c.getImageData(0,0,r.width,r.height),u=Pe.encode([a.buffer],r.width,r.height,4096*e),d=new Blob([u],{type:o}),d.name=i,d.lastModified=n,m.call(this)}{let c=function(){return m.call(this)};var v=c;if(o==="image/bmp")return new Promise(a=>hr.toBlob(r,a)).then(function(a){try{return d=a,d.name=i,d.lastModified=n,c.call(this)}catch(u){return l(u)}}.bind(this),l);{let a=function(){return c.call(this)};var s=a;if(typeof OffscreenCanvas=="function"&&r instanceof OffscreenCanvas)return r.convertToBlob({type:o,quality:e}).then(function(u){try{return d=u,d.name=i,d.lastModified=n,a.call(this)}catch(_){return l(_)}}.bind(this),l);{let u;return u=r.toDataURL(o,e),Kt(u,i,n).then(function(_){try{return d=_,a.call(this)}catch(E){return l(E)}}.bind(this),l)}}}function m(){return t(d)}})}function Be(r){r.width=0,r.height=0}function rt(){return new Promise(function(r,o){let i,n,e,t,l;return rt.cachedResult!==void 0?r(rt.cachedResult):(i="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==",Kt("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(d){try{return n=d,Ct(n).then(function(m){try{return e=m[1],Et(e,n.type,n.name,n.lastModified).then(function(v){try{return t=v,Be(e),Ct(t).then(function(s){try{return l=s[0],rt.cachedResult=l.width===1&&l.height===2,r(rt.cachedResult)}catch(c){return o(c)}},o)}catch(s){return o(s)}},o)}catch(v){return o(v)}},o)}catch(m){return o(m)}},o))})}function xr(r){return new Promise((o,i)=>{let n=new mr;n.onload=e=>{let t=new DataView(e.target.result);if(t.getUint16(0,!1)!=65496)return o(-2);let l=t.byteLength,d=2;for(;d<l;){if(t.getUint16(d+2,!1)<=8)return o(-1);let m=t.getUint16(d,!1);if(d+=2,m==65505){if(t.getUint32(d+=2,!1)!=1165519206)return o(-1);let v=t.getUint16(d+=6,!1)==18761;d+=t.getUint32(d+4,v);let s=t.getUint16(d,v);d+=2;for(let c=0;c<s;c++)if(t.getUint16(d+12*c,v)==274)return o(t.getUint16(d+12*c+8,v))}else{if((65280&m)!=65280)break;d+=t.getUint16(d,!1)}}return o(-1)},n.onerror=e=>i(e),n.readAsArrayBuffer(r)})}function yr(r,o){let{width:i}=r,{height:n}=r,{maxWidthOrHeight:e}=o,t,l=r;return isFinite(e)&&(i>e||n>e)&&([l,t]=Mt(i,n),i>n?(l.width=e,l.height=n/i*e):(l.width=i/n*e,l.height=e),t.drawImage(r,0,0,l.width,l.height),Be(r)),l}function Ar(r,o){let{width:i}=r,{height:n}=r,[e,t]=Mt(i,n);switch(o>4&&o<9?(e.width=n,e.height=i):(e.width=i,e.height=n),o){case 2:t.transform(-1,0,0,1,i,0);break;case 3:t.transform(-1,0,0,-1,i,n);break;case 4:t.transform(1,0,0,-1,0,n);break;case 5:t.transform(0,1,1,0,0,0);break;case 6:t.transform(0,1,-1,0,n,0);break;case 7:t.transform(0,-1,-1,0,n,i);break;case 8:t.transform(0,-1,1,0,0,i)}return t.drawImage(r,0,0,i,n),Be(r),e}function fr(r,o,i=0){return new Promise(function(n,e){let t,l,d,m,v,s,c,a,u,_,E,P,w,L,U,S,N,b,I,p;function h(C=5){if(o.signal&&o.signal.aborted)throw o.signal.reason;t+=C,o.onProgress(Math.min(t,100))}function y(C){if(o.signal&&o.signal.aborted)throw o.signal.reason;t=Math.min(Math.max(C,t),100),o.onProgress(t)}return t=i,l=o.maxIteration||10,d=1024*o.maxSizeMB*1024,h(),Ct(r,o).then(function(C){try{return[,m]=C,h(),v=yr(m,o),h(),new Promise(function(A,M){var x;if(!(x=o.exifOrientation))return xr(r).then(function(g){try{return x=g,k.call(this)}catch(f){return M(f)}}.bind(this),M);function k(){return A(x)}return k.call(this)}).then(function(A){try{return s=A,h(),rt().then(function(M){try{return c=M?v:Ar(v,s),h(),a=o.initialQuality||1,u=o.fileType||r.type,Et(c,u,r.name,r.lastModified,a).then(function(x){try{{let z=function(){if(l--&&(U>d||U>w)){let D,q;return D=p?.95*I.width:I.width,q=p?.95*I.height:I.height,[N,b]=Mt(D,q),b.drawImage(I,0,0,D,q),a*=u==="image/png"?.85:.95,Et(N,u,r.name,r.lastModified,a).then(function(V){try{return S=V,Be(I),I=N,U=S.size,y(Math.min(99,Math.floor((L-U)/(L-d)*100))),z}catch(Q){return e(Q)}},e)}return[1]},O=function(){return Be(I),Be(N),Be(v),Be(c),Be(m),y(100),n(S)};var g=z,f=O;if(_=x,h(),E=_.size>d,P=_.size>r.size,!E&&!P)return y(100),n(_);var k;return w=r.size,L=_.size,U=L,I=c,p=!o.alwaysKeepResolution&&E,(k=function(D){for(;D;){if(D.then)return void D.then(k,e);try{if(D.pop){if(D.length)return D.pop()?O.call(this):D;D=z}else D=D.call(this)}catch(q){return e(q)}}}.bind(this))(z)}}catch(z){return e(z)}}.bind(this),e)}catch(x){return e(x)}}.bind(this),e)}catch(M){return e(M)}}.bind(this),e)}catch(A){return e(A)}}.bind(this),e)})}var zi=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`,Gt;function Hi(r,o){return new Promise((i,n)=>{Gt||(Gt=function(l){let d=[];return typeof l=="function"?d.push(`(${l})()`):d.push(l),URL.createObjectURL(new Blob(d))}(zi));let e=new Worker(Gt);e.addEventListener("message",function(l){if(o.signal&&o.signal.aborted)e.terminate();else if(l.data.progress===void 0){if(l.data.error)return n(new Error(l.data.error)),void e.terminate();i(l.data.file),e.terminate()}else o.onProgress(l.data.progress)}),e.addEventListener("error",n),o.signal&&o.signal.addEventListener("abort",()=>{n(o.signal.reason),e.terminate()}),e.postMessage({file:r,imageCompressionLibUrl:o.libURL,options:at(We({},o),{onProgress:void 0,signal:void 0})})})}function me(r,o){return new Promise(function(i,n){let e,t,l,d,m,v;if(e=We({},o),l=0,{onProgress:d}=e,e.maxSizeMB=e.maxSizeMB||Number.POSITIVE_INFINITY,m=typeof e.useWebWorker!="boolean"||e.useWebWorker,delete e.useWebWorker,e.onProgress=u=>{l=u,typeof d=="function"&&d(l)},!(r instanceof Blob||r instanceof Li))return n(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(r.type))return n(new Error("The file given is not an image"));if(v=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!m||typeof Worker!="function"||v)return fr(r,e).then(function(u){try{return t=u,a.call(this)}catch(_){return n(_)}}.bind(this),n);var s=function(){try{return a.call(this)}catch(u){return n(u)}}.bind(this),c=function(u){try{return fr(r,e).then(function(_){try{return t=_,s()}catch(E){return n(E)}},n)}catch(_){return n(_)}};try{return e.libURL=e.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",Hi(r,e).then(function(u){try{return t=u,s()}catch{return c()}},c)}catch{c()}function a(){try{t.name=r.name,t.lastModified=r.lastModified}catch{}try{e.preserveExif&&r.type==="image/jpeg"&&(!e.fileType||e.fileType&&e.fileType===r.type)&&(t=pr(r,t))}catch{}return i(t)}})}me.getDataUrlFromFile=_r,me.getFilefromDataUrl=Kt,me.loadImage=br,me.drawImageInCanvas=wr,me.drawFileInCanvas=Ct,me.canvasToFile=Et,me.getExifOrientation=xr,me.handleMaxWidthOrHeight=yr,me.followExifOrientation=Ar,me.cleanupCanvasMemory=Be,me.isAutoOrientationInBrowser=rt,me.approximateBelowMaximumCanvasSizeOfBrowser=vr,me.copyExifWithoutOrientation=pr,me.getBrowserName=$e,me.version="2.0.2";var Cr=(()=>{class r{constructor(i){this.firebaseService=i,this.adsSubject=new en([]),this.ads$=this.adsSubject.asObservable(),this.unsubscribe=null,this.db=this.firebaseService.db,this.storage=ur(this.firebaseService.app),this.testStorageConnection()}testStorageConnection(){return ue(this,null,function*(){try{let i=wt(this.storage,"ads/");console.log("\u2705 Firebase Storage initialized successfully"),console.log("Storage bucket:",this.storage.app.options.storageBucket)}catch(i){console.error("\u274C Firebase Storage connection failed:",i),console.error("Please ensure Firebase Storage is enabled in your Firebase console")}})}startListening(i){let n=It(this.db,"ads"),e=Bt(n,Dt("uploadDate","desc"));i&&(e=Bt(n,In("createdBy","==",i),Dt("uploadDate","desc"))),this.unsubscribe=Nn(e,t=>{let l=t.docs.map(d=>{let m=d.data();return at(We({id:d.id},m),{uploadDate:m.uploadDate?.toDate()||new Date,updatedAt:m.updatedAt?.toDate()})});this.adsSubject.next(l)})}stopListening(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)}getAds(){return this.ads$}createAd(i,n){return ue(this,null,function*(){try{let e="",t="";i.mediaFile&&(e=yield this.uploadFile(i.mediaFile,"ads/media")),i.thumbnailFile?t=yield this.uploadFile(i.thumbnailFile,"ads/thumbnails"):t=i.type==="image"?e:"";let l=this.getResolutionFromAspectRatio(i.aspectRatio),d={title:i.title,type:i.type,status:i.status||"draft",thumbnailUrl:t,mediaUrl:e,aspectRatio:i.aspectRatio,resolution:l,description:i.description||"",targetUrl:i.targetUrl||"",uploadDate:gt.now(),createdBy:n,views:0,impressions:0,clicks:0,ctr:0};return(yield Dn(It(this.db,"ads"),d)).id}catch(e){throw console.error("Error creating ad:",e),e}})}updateAd(i,n){return ue(this,null,function*(){try{let e=Je(this.db,"ads",i),t=at(We({},n),{updatedAt:gt.now()});n.mediaFile&&(t.mediaUrl=yield this.uploadFile(n.mediaFile,"ads/media"),delete t.mediaFile),n.thumbnailFile&&(t.thumbnailUrl=yield this.uploadFile(n.thumbnailFile,"ads/thumbnails"),delete t.thumbnailFile),n.aspectRatio&&(t.resolution=this.getResolutionFromAspectRatio(n.aspectRatio)),yield st(e,t)}catch(e){throw console.error("Error updating ad:",e),e}})}deleteAd(i){return ue(this,null,function*(){try{let e=this.adsSubject.value.find(l=>l.id===i);e&&(e.mediaUrl&&(yield this.deleteFileFromUrl(e.mediaUrl)),e.thumbnailUrl&&e.thumbnailUrl!==e.mediaUrl&&(yield this.deleteFileFromUrl(e.thumbnailUrl)));let t=Je(this.db,"ads",i);yield Bn(t)}catch(n){throw console.error("Error deleting ad:",n),n}})}updateAdStatus(i,n){return ue(this,null,function*(){try{let e=Je(this.db,"ads",i);yield st(e,{status:n,updatedAt:gt.now()})}catch(e){throw console.error("Error updating ad status:",e),e}})}incrementViews(i){return ue(this,null,function*(){try{let e=this.adsSubject.value.find(t=>t.id===i);if(e){let t=Je(this.db,"ads",i);yield st(t,{views:(e.views||0)+1})}}catch(n){throw console.error("Error incrementing views:",n),n}})}incrementClicks(i){return ue(this,null,function*(){try{let e=this.adsSubject.value.find(t=>t.id===i);if(e){let t=(e.clicks||0)+1,l=e.impressions||1,d=t/l*100,m=Je(this.db,"ads",i);yield st(m,{clicks:t,ctr:parseFloat(d.toFixed(2))})}}catch(n){throw console.error("Error incrementing clicks:",n),n}})}compressFile(i){return ue(this,null,function*(){let n=i.type;if(n.startsWith("image/"))try{console.log("Compressing image:",i.name,"Original size:",(i.size/1024/1024).toFixed(2),"MB");let t=yield me(i,{maxSizeMB:2,maxWidthOrHeight:1920,useWebWorker:!0,fileType:"image/jpeg",initialQuality:.8});if(console.log("Image compressed:",t.name,"New size:",(t.size/1024/1024).toFixed(2),"MB","Reduction:",((1-t.size/i.size)*100).toFixed(1)+"%"),i.type==="image/jpeg"||i.type==="image/jpg")return new File([t],i.name,{type:t.type});let l=i.name.replace(/\.[^/.]+$/,".jpg");return new File([t],l,{type:"image/jpeg"})}catch(e){return console.error("Image compression failed, using original file:",e),i}if(n.startsWith("video/")){let e=i.size/1024/1024;return console.log("Video file size:",e.toFixed(2),"MB"),e>50&&console.warn("Video file is large (>50MB). Consider compressing it externally for better performance."),i}return i})}uploadFile(i,n){return ue(this,null,function*(){try{let e=yield this.compressFile(i),l=`${new Date().getTime()}_${e.name}`,d=wt(this.storage,`${n}/${l}`),m={contentType:e.type,customMetadata:{uploadedAt:new Date().toISOString(),originalSize:i.size.toString(),compressedSize:e.size.toString()}};console.log("Uploading file:",l,"Type:",e.type,"Size:",(e.size/1024/1024).toFixed(2),"MB");let v=yield lr(d,e,m);console.log("Upload successful:",v.metadata.fullPath);let s=yield cr(d);return console.log("Download URL:",s),s}catch(e){throw console.error("Error uploading file:",e),console.error("Error code:",e.code),console.error("Error message:",e.message),e.code==="storage/unauthorized"?new Error("Upload failed: You do not have permission to upload files. Please check Firebase Storage rules."):e.code==="storage/canceled"?new Error("Upload was canceled."):e.code==="storage/unknown"?new Error("Upload failed: Please check if Firebase Storage is enabled in your Firebase project."):e}})}deleteFileFromUrl(i){return ue(this,null,function*(){try{let n=decodeURIComponent(i),e=n.indexOf("/o/")+3,t=n.indexOf("?"),l=n.substring(e,t),d=wt(this.storage,l);yield dr(d)}catch(n){console.error("Error deleting file:",n)}})}getResolutionFromAspectRatio(i){return{"16:9":"1920x1080","9:16":"1080x1920","1:1":"1080x1080","4:5":"1080x1350","4:3":"1024x768","21:9":"2560x1080"}[i]||"1920x1080"}getVideoDuration(i){return new Promise((n,e)=>{let t=document.createElement("video");t.preload="metadata",t.onloadedmetadata=()=>{window.URL.revokeObjectURL(t.src);let l=Math.floor(t.duration),d=Math.floor(l/60),m=l%60;n(`${d.toString().padStart(2,"0")}:${m.toString().padStart(2,"0")}`)},t.onerror=()=>{e(new Error("Failed to load video metadata"))},t.src=URL.createObjectURL(i)})}static{this.\u0275fac=function(n){return new(n||r)(nn(Ln))}}static{this.\u0275prov=tn({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function Qi(r,o){if(r&1&&(T(0,"span",67)(1,"span",8),B(2,"play_circle"),R(),B(3),R()),r&2){let i=$().$implicit;j(3),pe(" ",i.duration," ")}}function qi(r,o){if(r&1&&(T(0,"div",62)(1,"span",8),B(2,"visibility"),R(),B(3),R()),r&2){let i=$().$implicit,n=$(2);j(3),pe(" ",n.formatViews(i.views)," ")}}function Wi(r,o){if(r&1&&(T(0,"div",62)(1,"span",8),B(2,"mouse"),R(),B(3),R()),r&2){let i=$().$implicit;j(3),pe(" ",i.ctr,"% CTR ")}}function $i(r,o){if(r&1){let i=Ke();T(0,"div",51)(1,"div",52),kt(2,"img",53),T(3,"div",54),Ee(4,Qi,4,1,"span",55),T(5,"span",56),B(6),R()()(),T(7,"div",57)(8,"h4",58),B(9),R(),T(10,"p",59),B(11),Ye(12,"slice"),R(),T(13,"div",60),Ee(14,qi,4,1,"div",61)(15,Wi,4,1,"div",61),T(16,"div",62)(17,"span",8),B(18,"aspect_ratio"),R(),B(19),R()(),T(20,"div",63)(21,"button",64),fe("click",function(){let e=oe(i).$implicit,t=$(2);return ae(t.toggleAdStatus(e))}),T(22,"span",8),B(23),R()(),T(24,"button",65)(25,"span",8),B(26,"edit"),R()(),T(27,"button",66),fe("click",function(){let e=oe(i).$implicit,t=$(2);return ae(t.deleteAd(e))}),T(28,"span",8),B(29,"delete"),R()()()()()}if(r&2){let i=o.$implicit,n=$(2);j(),X("ngClass",n.getAspectRatioClass(i.aspectRatio)),j(),X("src",i.thumbnailUrl,on)("alt",i.title),j(2),X("ngIf",i.type==="video"),j(),X("ngClass","status-"+i.status),j(),pe(" ",i.status," "),j(3),Te(i.title),j(2),Ot("",Rt(12,14,i.description,0,60),"",i.description&&i.description.length>60?"...":"",""),j(3),X("ngIf",i.views),j(),X("ngIf",i.ctr),j(4),pe(" ",i.aspectRatio," "),j(2),X("title",i.status==="active"?"Pause":"Activate"),j(2),Te(i.status==="active"?"pause_circle":"play_circle")}}function Gi(r,o){if(r&1){let i=Ke();T(0,"div",68)(1,"span",8),B(2,"campaign"),R(),T(3,"p"),B(4,"No ads found"),R(),T(5,"button",7),fe("click",function(){oe(i);let e=$(2);return ae(e.uploadNewAd())}),T(6,"span",8),B(7,"add_circle"),R(),B(8," Create Your First Ad "),R()()}}function Xi(r,o){if(r&1&&(T(0,"div",48),Ee(1,$i,30,18,"div",49)(2,Gi,9,0,"div",50),R()),r&2){let i=$();j(),X("ngForOf",i.filteredAds),j(),X("ngIf",i.filteredAds.length===0)}}function Ki(r,o){r&1&&(T(0,"span",90),B(1,"campaign"),R())}function Yi(r,o){if(r&1&&(T(0,"div",91)(1,"span",81),B(2,"visibility"),R(),B(3),R()),r&2){let i=$().$implicit,n=$(2);j(3),pe(" ",n.formatViews(i.views)," ")}}function Zi(r,o){if(r&1&&(T(0,"div",91)(1,"span",81),B(2,"mouse"),R(),B(3),R()),r&2){let i=$().$implicit;j(3),pe(" ",i.ctr,"% ")}}function Ji(r,o){if(r&1){let i=Ke();T(0,"tr",74)(1,"td")(2,"div",75)(3,"div",76),Ee(4,Ki,2,0,"span",77),R(),T(5,"div")(6,"span",78),B(7),R(),T(8,"p",79),B(9),Ye(10,"slice"),R()()()(),T(11,"td")(12,"span",80)(13,"span",81),B(14),R(),B(15),R()(),T(16,"td")(17,"span",82),kt(18,"span",83),B(19),R()(),T(20,"td")(21,"div",84),Ee(22,Yi,4,1,"div",85)(23,Zi,4,1,"div",85),R()(),T(24,"td",86),B(25),R(),T(26,"td",87),B(27),Ye(28,"date"),R(),T(29,"td",71)(30,"div",88)(31,"button",64),fe("click",function(){let e=oe(i).$implicit,t=$(2);return ae(t.toggleAdStatus(e))}),T(32,"span",8),B(33),R()(),T(34,"button",65)(35,"span",8),B(36,"edit"),R()(),T(37,"button",89),fe("click",function(){let e=oe(i).$implicit,t=$(2);return ae(t.deleteAd(e))}),T(38,"span",8),B(39,"delete"),R()()()()()}if(r&2){let i=o.$implicit;j(3),an("background-image","url("+i.thumbnailUrl+")"),j(),X("ngIf",!i.thumbnailUrl),j(3),Te(i.title),j(2),pe("",Rt(10,16,i.description,0,40),"..."),j(5),Te(i.type==="video"?"movie":"image"),j(),pe(" ",i.type," "),j(2),X("ngClass","status-"+i.status),j(2),pe(" ",i.status," "),j(3),X("ngIf",i.views),j(),X("ngIf",i.ctr),j(2),Ot(" ",i.aspectRatio," \u2022 ",i.resolution," "),j(2),pe(" ",ln(28,20,i.uploadDate,"MMM d, y")," "),j(4),X("title",i.status==="active"?"Pause":"Activate"),j(2),Te(i.status==="active"?"pause":"play_arrow")}}function eo(r,o){r&1&&(T(0,"tr")(1,"td",92)(2,"div",93)(3,"span",8),B(4,"campaign"),R(),T(5,"p"),B(6,"No ads match your filters"),R()()()())}function to(r,o){if(r&1&&(T(0,"div",69)(1,"table",70)(2,"thead")(3,"tr")(4,"th"),B(5,"Ad"),R(),T(6,"th"),B(7,"Type"),R(),T(8,"th"),B(9,"Status"),R(),T(10,"th"),B(11,"Performance"),R(),T(12,"th"),B(13,"Format"),R(),T(14,"th"),B(15,"Uploaded"),R(),T(16,"th",71),B(17,"Actions"),R()()(),T(18,"tbody"),Ee(19,Ji,40,23,"tr",72)(20,eo,7,0,"tr",73),R()()()),r&2){let i=$();j(19),X("ngForOf",i.filteredAds),j(),X("ngIf",i.filteredAds.length===0)}}function no(r,o){if(r&1){let i=Ke();T(0,"div",99)(1,"label"),B(2,"Thumbnail (Optional)"),R(),T(3,"div",124)(4,"input",125),fe("change",function(e){oe(i);let t=$(2);return ae(t.onThumbnailFileSelected(e))}),R(),T(5,"label",126)(6,"span",81),B(7),R(),T(8,"span",106),B(9),R()()()()}if(r&2){let i=$(2);j(7),Te(i.uploadForm.thumbnailFile?"check_circle":"add_photo_alternate"),j(2),pe(" ",i.uploadForm.thumbnailFile?i.uploadForm.thumbnailFile.name:"Upload custom thumbnail"," ")}}function ro(r,o){r&1&&(T(0,"span",8),B(1,"auto_awesome"),R())}function io(r,o){r&1&&(T(0,"span",127),B(1,"refresh"),R())}function oo(r,o){r&1&&(T(0,"span",8),B(1,"cloud_upload"),R())}function ao(r,o){r&1&&(T(0,"span",127),B(1,"hourglass_empty"),R())}function so(r,o){r&1&&(T(0,"span",127),B(1,"refresh"),R())}function lo(r,o){if(r&1){let i=Ke();T(0,"div",94),fe("click",function(){oe(i);let e=$();return ae(e.closeUploadModal())}),T(1,"div",95),fe("click",function(e){return oe(i),ae(e.stopPropagation())}),T(2,"div",96)(3,"h3")(4,"span",8),B(5,"cloud_upload"),R(),B(6," Upload New Ad "),R(),T(7,"button",97),fe("click",function(){oe(i);let e=$();return ae(e.closeUploadModal())}),T(8,"span",8),B(9,"close"),R()()(),T(10,"div",98)(11,"div",99)(12,"label"),B(13,"Ad Title *"),R(),T(14,"input",100),Fe("ngModelChange",function(e){oe(i);let t=$();return Ue(t.uploadForm.title,e)||(t.uploadForm.title=e),ae(e)}),R()(),T(15,"div",99)(16,"label"),B(17,"Ad Type *"),R(),T(18,"div",101)(19,"button",102),fe("click",function(){oe(i);let e=$();return ae(e.uploadForm.type="image")}),T(20,"span",8),B(21,"image"),R(),B(22," Image "),R(),T(23,"button",102),fe("click",function(){oe(i);let e=$();return ae(e.uploadForm.type="video")}),T(24,"span",8),B(25,"movie"),R(),B(26," Video "),R()()(),T(27,"div",99)(28,"label"),B(29),R(),T(30,"div",103)(31,"input",104),fe("change",function(e){oe(i);let t=$();return ae(t.onMediaFileSelected(e))}),R(),T(32,"label",105)(33,"span",8),B(34),R(),T(35,"span",106),B(36),R()()(),T(37,"p",107),B(38,"\u{1F4E6} Images will be automatically compressed to max 2MB and optimized for web"),R()(),Ee(39,no,10,2,"div",108),T(40,"div",99)(41,"label"),B(42,"Aspect Ratio"),R(),T(43,"select",109),Fe("ngModelChange",function(e){oe(i);let t=$();return Ue(t.uploadForm.aspectRatio,e)||(t.uploadForm.aspectRatio=e),ae(e)}),T(44,"option",110),B(45,"16:9 (Landscape)"),R(),T(46,"option",111),B(47,"9:16 (Portrait)"),R(),T(48,"option",112),B(49,"1:1 (Square)"),R(),T(50,"option",113),B(51,"4:5 (Portrait)"),R(),T(52,"option",114),B(53,"4:3 (Standard)"),R()()(),T(54,"div",99)(55,"div",115)(56,"label"),B(57,"Ad Caption / Description"),R(),T(58,"button",116),fe("click",function(){oe(i);let e=$();return ae(e.generateAdCaption())}),Ee(59,ro,2,0,"span",117)(60,io,2,0,"span",118),B(61),R()(),T(62,"textarea",119),Fe("ngModelChange",function(e){oe(i);let t=$();return Ue(t.uploadForm.description,e)||(t.uploadForm.description=e),ae(e)}),R(),T(63,"p",107),B(64,'\u{1F4A1} Tip: Add your ad title first, then click "AI Caption" for expert marketing copy'),R()(),T(65,"div",99)(66,"label"),B(67,"Target URL (Optional)"),R(),T(68,"input",120),Fe("ngModelChange",function(e){oe(i);let t=$();return Ue(t.uploadForm.targetUrl,e)||(t.uploadForm.targetUrl=e),ae(e)}),R()(),T(69,"div",99)(70,"label"),B(71,"Status"),R(),T(72,"select",109),Fe("ngModelChange",function(e){oe(i);let t=$();return Ue(t.uploadForm.status,e)||(t.uploadForm.status=e),ae(e)}),T(73,"option",34),B(74,"Draft"),R(),T(75,"option",33),B(76,"Pending Review"),R(),T(77,"option",31),B(78,"Active"),R(),T(79,"option",32),B(80,"Paused"),R()()()(),T(81,"div",121)(82,"button",122),fe("click",function(){oe(i);let e=$();return ae(e.closeUploadModal())}),B(83,"Cancel"),R(),T(84,"button",123),fe("click",function(){oe(i);let e=$();return ae(e.submitAd())}),Ee(85,oo,2,0,"span",117)(86,ao,2,0,"span",118)(87,so,2,0,"span",118),B(88),R()()()()}if(r&2){let i=$();j(14),Re("ngModel",i.uploadForm.title),j(5),Xe("active",i.uploadForm.type==="image"),j(4),Xe("active",i.uploadForm.type==="video"),j(6),pe("",i.uploadForm.type==="video"?"Video":"Image"," File *"),j(2),X("accept",i.uploadForm.type==="video"?"video/*":"image/*"),j(3),Te(i.uploadForm.mediaFile?"check_circle":"cloud_upload"),j(2),pe(" ",i.uploadForm.mediaFile?i.uploadForm.mediaFile.name:"Click to upload "+i.uploadForm.type," "),j(3),X("ngIf",i.uploadForm.type==="video"),j(4),Re("ngModel",i.uploadForm.aspectRatio),j(15),X("disabled",i.isGeneratingCaption||!i.uploadForm.title),j(),X("ngIf",!i.isGeneratingCaption),j(),X("ngIf",i.isGeneratingCaption),j(),pe(" ",i.isGeneratingCaption?"Generating...":"AI Caption"," "),j(),Re("ngModel",i.uploadForm.description),j(6),Re("ngModel",i.uploadForm.targetUrl),j(4),Re("ngModel",i.uploadForm.status),j(10),X("disabled",i.isUploading||i.isCompressing),j(2),X("disabled",i.isUploading||i.isCompressing),j(),X("ngIf",!i.isUploading&&!i.isCompressing),j(),X("ngIf",i.isCompressing),j(),X("ngIf",i.isUploading&&!i.isCompressing),j(),pe(" ",i.isCompressing?"Compressing...":i.isUploading?"Uploading...":"Upload Ad"," ")}}var Uo=(()=>{class r{constructor(i,n,e){this.adsService=i,this.dialogService=n,this.aiService=e,this.selectedFilter="all",this.selectedStatus="all",this.sortBy="newest",this.searchQuery="",this.viewMode="grid",this.ads=[],this.subscription=new Jt,this.userId="",this.showUploadModal=!1,this.isUploading=!1,this.isCompressing=!1,this.isGeneratingCaption=!1,this.uploadForm={title:"",type:"image",status:"draft",aspectRatio:"16:9",description:"",targetUrl:""}}ngOnInit(){this.userId=localStorage.getItem("jjm_user_id")||"admin-1",this.adsService.startListening(),this.subscription.add(this.adsService.getAds().subscribe(i=>{this.ads=i}))}ngOnDestroy(){this.subscription.unsubscribe(),this.adsService.stopListening()}get filteredAds(){let i=[...this.ads];if(this.selectedFilter!=="all"&&(this.selectedFilter==="video"?i=i.filter(n=>n.type==="video"):this.selectedFilter==="image"&&(i=i.filter(n=>n.type==="image"))),this.selectedStatus!=="all"&&(i=i.filter(n=>n.status===this.selectedStatus)),this.searchQuery){let n=this.searchQuery.toLowerCase();i=i.filter(e=>e.title.toLowerCase().includes(n)||e.description?.toLowerCase().includes(n))}switch(this.sortBy){case"newest":i.sort((n,e)=>e.uploadDate.getTime()-n.uploadDate.getTime());break;case"oldest":i.sort((n,e)=>n.uploadDate.getTime()-e.uploadDate.getTime());break;case"views":i.sort((n,e)=>(e.views||0)-(n.views||0));break;case"title":i.sort((n,e)=>n.title.localeCompare(e.title));break}return i}setFilter(i){this.selectedFilter=i}setStatus(i){this.selectedStatus=i}setSortBy(i){this.sortBy=i}setViewMode(i){this.viewMode=i}formatViews(i){return i?i>=1e3?`${(i/1e3).toFixed(1)}k Views`:`${i} Views`:"0 Views"}getTotalViews(){return this.ads.reduce((i,n)=>i+(n.views||0),0)}getAverageCTR(){let i=this.ads.filter(e=>e.ctr&&e.ctr>0);if(i.length===0)return 0;let n=i.reduce((e,t)=>e+(t.ctr||0),0);return parseFloat((n/i.length).toFixed(2))}getActiveAdsCount(){return this.ads.filter(i=>i.status==="active").length}getStatusBadgeClass(i){switch(i){case"active":return"bg-green-500/90";case"paused":return"bg-yellow-600/90";case"pending":return"bg-gray-600/90";case"draft":return"bg-gray-600/90";default:return"bg-gray-600/90"}}getAspectRatioClass(i){switch(i){case"16:9":return"aspect-video";case"9:16":return"aspect-[9/16]";case"1:1":return"aspect-square";case"4:5":return"aspect-[4/5]";default:return"aspect-video"}}uploadNewAd(){this.resetUploadForm(),this.showUploadModal=!0}submitAd(){return ue(this,null,function*(){if(!this.uploadForm.title||!this.uploadForm.mediaFile){this.dialogService.warning("Please fill in all required fields and select a media file.","Missing Information");return}this.isUploading=!0;try{if(this.uploadForm.type==="video"&&this.uploadForm.mediaFile){let i=yield this.adsService.getVideoDuration(this.uploadForm.mediaFile);this.uploadForm.duration=i}yield this.adsService.createAd(this.uploadForm,this.userId),this.dialogService.success("Ad uploaded successfully!","Success"),this.closeUploadModal()}catch(i){console.error("Error uploading ad:",i),this.dialogService.error("Failed to upload ad. Please try again.","Upload Failed")}finally{this.isUploading=!1}})}toggleAdStatus(i){return ue(this,null,function*(){let n=i.status==="active"?"paused":"active";try{yield this.adsService.updateAdStatus(i.id,n),this.dialogService.success(`Ad ${n==="active"?"activated":"paused"} successfully!`,"Status Updated")}catch(e){console.error("Error updating status:",e),this.dialogService.error("Failed to update ad status.","Error")}})}deleteAd(i){return ue(this,null,function*(){if(yield this.dialogService.confirm(`Are you sure you want to delete "${i.title}"? This action cannot be undone.`,"Delete Ad").toPromise())try{yield this.adsService.deleteAd(i.id),this.dialogService.success("Ad deleted successfully!","Deleted")}catch(e){console.error("Error deleting ad:",e),this.dialogService.error("Failed to delete ad.","Error")}})}openAdOptions(i){let n=["Change Status","Edit","Delete"];console.log("Ad options for:",i.title)}onMediaFileSelected(i){let n=i.target;if(n.files&&n.files[0]){let e=n.files[0];if(this.uploadForm.type==="video"){if(!e.type.startsWith("video/")){this.dialogService.warning("Please select a valid video file.","Invalid File");return}}else if(!e.type.startsWith("image/")){this.dialogService.warning("Please select a valid image file.","Invalid File");return}this.uploadForm.mediaFile=e}}onThumbnailFileSelected(i){let n=i.target;if(n.files&&n.files[0]){let e=n.files[0];if(!e.type.startsWith("image/")){this.dialogService.warning("Please select a valid image file for thumbnail.","Invalid File");return}this.uploadForm.thumbnailFile=e}}closeUploadModal(){this.showUploadModal=!1,this.resetUploadForm()}resetUploadForm(){this.uploadForm={title:"",type:"image",status:"draft",aspectRatio:"16:9",description:"",targetUrl:""}}generateAdCaption(){if(!this.uploadForm.title){this.dialogService.warning("Please enter an Ad Title first to give the AI some context.","Missing Ad Title");return}this.isGeneratingCaption=!0;let i=this.uploadForm.type==="video"?"video ad":"image ad",n=`${this.uploadForm.aspectRatio} aspect ratio`,e=this.uploadForm.targetUrl?`linking to ${this.uploadForm.targetUrl}`:"",l=`You are a senior marketing expert specializing in digital advertising and copywriting. Create compelling ad copy for this advertisement: "${`Ad Title: ${this.uploadForm.title}. Type: ${i}. Format: ${n}. ${e}`.trim()}".

Respond with a strictly valid JSON object containing one key:
1. "description": A persuasive, engaging, and action-oriented ad caption that will drive conversions (max 50 words, include relevant emojis if appropriate, focus on benefits and call-to-action).

Example response:
{
  "description": "\u{1F3AF} Transform your business today! Get premium solutions at unbeatable prices. Limited time offer - Don't miss out! \u{1F680} Click now to discover amazing deals that will elevate your success!"
}

Do not include markdown formatting, code blocks, or explanations. Just the JSON string.`;this.aiService.generateWithGemma(l).subscribe({next:d=>{if(this.isGeneratingCaption=!1,d){let m=d;try{m=d.replace(/```json/g,"").replace(/```/g,"").trim();let v=JSON.parse(m);v.description&&(this.uploadForm.description=v.description)}catch(v){console.error("Failed to parse AI response",v),this.uploadForm.description=m||d}}},error:d=>{this.isGeneratingCaption=!1,console.error("AI Generation Error",d),this.dialogService.error("Failed to generate caption. Please try again.","AI Error")}})}static{this.\u0275fac=function(n){return new(n||r)(ht(Cr),ht(An),ht(zn))}}static{this.\u0275cmp=rn({type:r,selectors:[["app-ads-management"]],standalone:!0,features:[sn],decls:106,vars:21,consts:[[1,"ads-container"],[1,"page-header"],[1,"header-content"],[1,"header-title-section"],[1,"page-title"],[1,"page-subtitle"],[1,"header-actions"],[1,"btn-primary",3,"click"],[1,"material-icon"],[1,"stats-grid"],[1,"stat-card"],[1,"stat-content"],[1,"stat-info"],[1,"stat-label"],[1,"stat-value"],[1,"stat-icon-container","blue"],[1,"stat-trend","trend-up"],[1,"trend-label"],[1,"stat-icon-container","purple"],[1,"stat-trend"],[1,"stat-icon-container","orange"],[1,"filters-section"],[1,"filters-left"],[1,"search-box"],[1,"material-icon","search-icon"],["type","text","placeholder","Search ads by title or description...",1,"search-input",3,"ngModelChange","ngModel"],[1,"filters-right"],[1,"filter-select",3,"ngModelChange","ngModel"],["value","all"],["value","video"],["value","image"],["value","active"],["value","paused"],["value","pending"],["value","draft"],["value","newest"],["value","oldest"],["value","views"],["value","title"],[1,"table-card"],[1,"table-header"],[1,"table-title"],[1,"view-toggle"],["title","Grid View",1,"view-btn",3,"click"],["title","List View",1,"view-btn",3,"click"],["class","ads-grid",4,"ngIf"],["class","table-wrapper",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"ads-grid"],["class","ad-card",4,"ngFor","ngForOf"],["class","empty-state-grid",4,"ngIf"],[1,"ad-card"],[1,"ad-thumbnail",3,"ngClass"],[1,"ad-image",3,"src","alt"],[1,"ad-overlay"],["class","ad-type-badge",4,"ngIf"],[1,"ad-status-badge",3,"ngClass"],[1,"ad-content"],[1,"ad-title"],[1,"ad-description"],[1,"ad-stats"],["class","ad-stat",4,"ngIf"],[1,"ad-stat"],[1,"ad-actions"],[1,"action-btn",3,"click","title"],["title","Edit",1,"action-btn"],["title","Delete",1,"action-btn","delete",3,"click"],[1,"ad-type-badge"],[1,"empty-state-grid"],[1,"table-wrapper"],[1,"data-table"],[1,"text-right"],["class","table-row",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"table-row"],[1,"product-cell"],[1,"product-image"],["class","material-icon no-image",4,"ngIf"],[1,"product-name"],[1,"ad-desc-mini"],[1,"category-badge"],[1,"material-icon","mini"],[1,"status-badge",3,"ngClass"],[1,"status-dot"],[1,"performance-cell"],["class","perf-item",4,"ngIf"],[1,"format-cell"],[1,"date-cell"],[1,"action-buttons"],["title","Delete",1,"action-btn",3,"click"],[1,"material-icon","no-image"],[1,"perf-item"],["colspan","7",1,"empty-row"],[1,"empty-state"],[1,"modal-overlay",3,"click"],[1,"modal-content","upload-modal",3,"click"],[1,"modal-header"],[1,"modal-close",3,"click"],[1,"modal-body"],[1,"form-group"],["type","text","placeholder","Enter a catchy title for your ad",3,"ngModelChange","ngModel"],[1,"type-selector"],["type","button",1,"type-btn",3,"click"],[1,"file-upload-area"],["type","file","id","mediaFile",1,"file-input",3,"change","accept"],["for","mediaFile",1,"file-label"],[1,"file-text"],[1,"field-hint"],["class","form-group",4,"ngIf"],[3,"ngModelChange","ngModel"],["value","16:9"],["value","9:16"],["value","1:1"],["value","4:5"],["value","4:3"],[1,"label-row"],["type","button","title","Generate AI-powered caption",1,"ai-btn",3,"click","disabled"],["class","material-icon",4,"ngIf"],["class","material-icon spin",4,"ngIf"],["rows","3","placeholder","Enter compelling ad description or let AI write it for you...",3,"ngModelChange","ngModel"],["type","url","placeholder","https://example.com",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn-cancel",3,"click","disabled"],[1,"btn-save",3,"click","disabled"],[1,"file-upload-area","small"],["type","file","accept","image/*","id","thumbnailFile",1,"file-input",3,"change"],["for","thumbnailFile",1,"file-label"],[1,"material-icon","spin"]],template:function(n,e){n&1&&(T(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"h2",4),B(5,"Ad Inventory"),R(),T(6,"p",5),B(7,"Manage your advertising campaigns, track performance, and create engaging content."),R()(),T(8,"div",6)(9,"button",7),fe("click",function(){return e.uploadNewAd()}),T(10,"span",8),B(11,"add_circle"),R(),B(12," Upload New Ad "),R()()()(),T(13,"div",9)(14,"div",10)(15,"div",11)(16,"div",12)(17,"span",13),B(18,"Total Ads"),R(),T(19,"span",14),B(20),Ye(21,"number"),R()(),T(22,"div",15)(23,"span",8),B(24,"campaign"),R()()(),T(25,"div",16)(26,"span",8),B(27,"trending_up"),R(),B(28),T(29,"span",17),B(30,"active campaigns"),R()()(),T(31,"div",10)(32,"div",11)(33,"div",12)(34,"span",13),B(35,"Total Views"),R(),T(36,"span",14),B(37),Ye(38,"number"),R()(),T(39,"div",18)(40,"span",8),B(41,"visibility"),R()()(),T(42,"div",19)(43,"span",17),B(44,"Across all campaigns"),R()()(),T(45,"div",10)(46,"div",11)(47,"div",12)(48,"span",13),B(49,"Avg. CTR"),R(),T(50,"span",14),B(51),R()(),T(52,"div",20)(53,"span",8),B(54,"mouse"),R()()(),T(55,"div",19)(56,"span",17),B(57,"Click-through rate"),R()()()(),T(58,"div",21)(59,"div",22)(60,"div",23)(61,"span",24),B(62,"search"),R(),T(63,"input",25),Fe("ngModelChange",function(l){return Ue(e.searchQuery,l)||(e.searchQuery=l),l}),R()()(),T(64,"div",26)(65,"select",27),Fe("ngModelChange",function(l){return Ue(e.selectedFilter,l)||(e.selectedFilter=l),l}),T(66,"option",28),B(67,"All Types"),R(),T(68,"option",29),B(69,"Video Ads"),R(),T(70,"option",30),B(71,"Image Ads"),R()(),T(72,"select",27),Fe("ngModelChange",function(l){return Ue(e.selectedStatus,l)||(e.selectedStatus=l),l}),T(73,"option",28),B(74,"All Status"),R(),T(75,"option",31),B(76,"Active"),R(),T(77,"option",32),B(78,"Paused"),R(),T(79,"option",33),B(80,"Pending"),R(),T(81,"option",34),B(82,"Draft"),R()(),T(83,"select",27),Fe("ngModelChange",function(l){return Ue(e.sortBy,l)||(e.sortBy=l),l}),T(84,"option",35),B(85,"Newest First"),R(),T(86,"option",36),B(87,"Oldest First"),R(),T(88,"option",37),B(89,"Most Views"),R(),T(90,"option",38),B(91,"A-Z"),R()()()(),T(92,"div",39)(93,"div",40)(94,"h3",41),B(95,"Active Campaigns"),R(),T(96,"div",42)(97,"button",43),fe("click",function(){return e.setViewMode("grid")}),T(98,"span",8),B(99,"view_module"),R()(),T(100,"button",44),fe("click",function(){return e.setViewMode("list")}),T(101,"span",8),B(102,"list"),R()()()(),Ee(103,Xi,3,2,"div",45)(104,to,21,2,"div",46),R()(),Ee(105,lo,89,24,"div",47)),n&2&&(j(20),Te(Tt(21,17,e.ads.length)),j(8),pe(" ",e.getActiveAdsCount()," "),j(9),Te(Tt(38,19,e.getTotalViews())),j(14),pe("",e.getAverageCTR(),"%"),j(4),Xe("trend-up",e.getAverageCTR()>2),j(8),Re("ngModel",e.searchQuery),j(2),Re("ngModel",e.selectedFilter),j(7),Re("ngModel",e.selectedStatus),j(11),Re("ngModel",e.sortBy),j(14),Xe("active",e.viewMode==="grid"),j(3),Xe("active",e.viewMode==="list"),j(3),X("ngIf",e.viewMode==="grid"),j(),X("ngIf",e.viewMode==="list"),j(),X("ngIf",e.showUploadModal))},dependencies:[gn,cn,dn,un,hn,pn,fn,yn,wn,xn,mn,vn,_n,bn],styles:[`.material-icon[_ngcontent-%COMP%]{font-family:Material Symbols Outlined,sans-serif;font-weight:400;font-style:normal;font-size:24px;display:inline-block;line-height:1;text-transform:none;letter-spacing:normal;word-wrap:normal;white-space:nowrap;direction:ltr;-webkit-font-smoothing:antialiased;font-variation-settings:"FILL" 0,"wght" 400,"GRAD" 0,"opsz" 24}.material-icon.mini[_ngcontent-%COMP%]{font-size:16px}.material-icon.spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.ads-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg);height:100%;overflow-y:auto;padding-bottom:var(--space-lg)}.page-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md)}.header-content[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center;gap:var(--space-md)}.header-title-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xs)}.page-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:var(--color-text);margin:0}.page-subtitle[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-muted);margin:0}.header-actions[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm)}.btn-primary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-xs);padding:var(--space-sm) var(--space-lg);background:var(--color-primary);color:#fff;border:none;border-radius:var(--radius-lg);font-size:.875rem;font-weight:600;cursor:pointer;transition:all .2s}.btn-primary[_ngcontent-%COMP%]:hover{background:var(--color-primary-dark);transform:translateY(-1px);box-shadow:0 4px 12px #137fec4d}.btn-primary[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:20px}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:var(--space-md)}.stat-card[_ngcontent-%COMP%]{padding:var(--space-lg);background:var(--color-surface);border:1px solid var(--color-border);border-radius:var(--radius-xl);box-shadow:var(--shadow-sm);display:flex;flex-direction:column;justify-content:space-between;min-height:120px}.stat-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.stat-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xs)}.stat-label[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-muted);font-weight:500}.stat-value[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:var(--color-text)}.stat-icon-container[_ngcontent-%COMP%]{padding:var(--space-sm);border-radius:var(--radius-lg)}.stat-icon-container[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:24px}.stat-icon-container.blue[_ngcontent-%COMP%]{background:#3b82f61a;color:#3b82f6}.stat-icon-container.orange[_ngcontent-%COMP%]{background:#f59e0b1a;color:#f59e0b}.stat-icon-container.purple[_ngcontent-%COMP%]{background:#8b5cf61a;color:#8b5cf6}.stat-trend[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-xs);font-size:.875rem;margin-top:auto}.stat-trend[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:16px}.stat-trend.trend-up[_ngcontent-%COMP%]{color:#10b981}.trend-label[_ngcontent-%COMP%]{color:var(--color-text-muted)}.filters-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:stretch;gap:var(--space-md);flex-wrap:wrap}.filters-left[_ngcontent-%COMP%]{flex:1;min-width:280px;max-width:400px;display:flex;align-items:center}.search-box[_ngcontent-%COMP%]{position:relative;width:100%}.search-icon[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);font-size:20px;color:var(--color-text-muted);pointer-events:none}.search-input[_ngcontent-%COMP%]{width:100%;height:40px;padding:0 var(--space-md);padding-left:44px;border:1px solid var(--color-border);border-radius:var(--radius-lg);background:var(--color-surface);color:var(--color-text);font-size:.875rem;transition:all .2s}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #137fec1a}.filters-right[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm);align-items:center;flex-shrink:0}.filter-select[_ngcontent-%COMP%]{height:40px;padding:0 var(--space-md);padding-right:32px;border:1px solid var(--color-border);border-radius:var(--radius-lg);background:var(--color-surface);color:var(--color-text);font-size:.875rem;cursor:pointer;appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%236b7280' d='M6 9L1 4h10z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 12px center;background-size:12px;transition:all .2s;min-width:140px}.filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #137fec1a}.filter-select[_ngcontent-%COMP%]:hover{border-color:var(--color-text-muted)}.table-card[_ngcontent-%COMP%]{background:var(--color-surface);border:1px solid var(--color-border);border-radius:var(--radius-xl);overflow:hidden;box-shadow:var(--shadow-sm)}.table-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--space-md) var(--space-lg);border-bottom:1px solid var(--color-border)}.table-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--color-text);margin:0}.view-toggle[_ngcontent-%COMP%]{display:flex;gap:4px;background:var(--color-bg);padding:4px;border-radius:var(--radius-lg)}.view-btn[_ngcontent-%COMP%]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;border:none;background:transparent;color:var(--color-text-muted);border-radius:var(--radius-md);cursor:pointer;transition:all .2s}.view-btn.active[_ngcontent-%COMP%]{background:var(--color-surface);color:var(--color-primary);box-shadow:var(--shadow-sm)}.view-btn[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:20px}.ads-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:var(--space-md);padding:var(--space-lg)}.ad-card[_ngcontent-%COMP%]{background:var(--color-bg);border:1px solid var(--color-border);border-radius:var(--radius-lg);overflow:hidden;transition:all .2s}.ad-card[_ngcontent-%COMP%]:hover{border-color:var(--color-primary);transform:translateY(-2px);box-shadow:0 8px 24px #0000001a}.ad-thumbnail[_ngcontent-%COMP%]{position:relative;width:100%;background:#000;overflow:hidden}.ad-thumbnail.aspect-video[_ngcontent-%COMP%]{aspect-ratio:16 / 9}.ad-thumbnail.aspect-square[_ngcontent-%COMP%]{aspect-ratio:1 / 1}.ad-thumbnail.aspect-\\__ph-0__[_ngcontent-%COMP%]{aspect-ratio:9 / 16}.ad-thumbnail.aspect-\\__ph-0__[_ngcontent-%COMP%]{aspect-ratio:4 / 5}.ad-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.ad-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;padding:var(--space-sm);display:flex;justify-content:space-between;align-items:flex-start}.ad-type-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;padding:4px 8px;background:#000000b3;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);color:#fff;border-radius:var(--radius-md);font-size:.75rem;font-weight:500}.ad-type-badge[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:16px}.ad-status-badge[_ngcontent-%COMP%]{padding:4px 10px;background:#000000b3;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border-radius:9999px;font-size:.625rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.ad-status-badge.status-active[_ngcontent-%COMP%]{background:#10b981e6;color:#fff}.ad-status-badge.status-paused[_ngcontent-%COMP%]{background:#f59e0be6;color:#fff}.ad-status-badge.status-pending[_ngcontent-%COMP%], .ad-status-badge.status-draft[_ngcontent-%COMP%]{background:#6b7280e6;color:#fff}.ad-content[_ngcontent-%COMP%]{padding:var(--space-md)}.ad-title[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:var(--color-text);margin:0 0 var(--space-xs);overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.ad-description[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted);margin:0 0 var(--space-sm);overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.ad-stats[_ngcontent-%COMP%]{display:flex;gap:var(--space-md);flex-wrap:wrap;margin-bottom:var(--space-sm)}.ad-stat[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:.75rem;color:var(--color-text-muted)}.ad-stat[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:14px}.ad-actions[_ngcontent-%COMP%]{display:flex;gap:var(--space-xs);padding-top:var(--space-sm);border-top:1px solid var(--color-border)}.action-btn[_ngcontent-%COMP%]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;border:none;background:transparent;color:var(--color-text-muted);border-radius:var(--radius-lg);cursor:pointer;transition:all .2s}.action-btn[_ngcontent-%COMP%]:hover{background:#137fec1a;color:var(--color-primary)}.action-btn.delete[_ngcontent-%COMP%]:hover{background:#ef44441a;color:#ef4444}.action-btn[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:18px}.empty-state-grid[_ngcontent-%COMP%]{grid-column:1 / -1;display:flex;flex-direction:column;align-items:center;gap:var(--space-md);padding:var(--space-2xl);color:var(--color-text-muted)}.empty-state-grid[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:64px;opacity:.5}.table-wrapper[_ngcontent-%COMP%]{overflow-x:auto}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;text-align:left}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:var(--color-bg)}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:var(--space-md) var(--space-lg);font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;color:var(--color-text-muted)}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:var(--space-md) var(--space-lg);font-size:.875rem;border-bottom:1px solid var(--color-border)}.table-row[_ngcontent-%COMP%]{transition:background .2s}.table-row[_ngcontent-%COMP%]:hover{background:#137fec08}.text-right[_ngcontent-%COMP%]{text-align:right}.product-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-md)}.product-image[_ngcontent-%COMP%]{width:64px;height:64px;border-radius:var(--radius-lg);background-color:var(--color-bg);background-size:cover;background-position:center;display:flex;align-items:center;justify-content:center;flex-shrink:0}.product-image[_ngcontent-%COMP%]   .no-image[_ngcontent-%COMP%]{color:var(--color-text-muted);font-size:24px}.product-name[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text);display:block;margin-bottom:2px}.ad-desc-mini[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted);margin:0}.category-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;padding:4px 10px;background:var(--color-bg);color:var(--color-text-muted);border-radius:9999px;font-size:.75rem;font-weight:500;text-transform:capitalize}.status-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:4px 10px;border-radius:9999px;font-size:.75rem;font-weight:500;text-transform:capitalize}.status-dot[_ngcontent-%COMP%]{width:6px;height:6px;border-radius:50%}.status-badge.status-active[_ngcontent-%COMP%]{background:#10b9811a;color:#10b981}.status-badge.status-active[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{background:#10b981}.status-badge.status-paused[_ngcontent-%COMP%]{background:#f59e0b1a;color:#f59e0b}.status-badge.status-paused[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{background:#f59e0b}.status-badge.status-pending[_ngcontent-%COMP%], .status-badge.status-draft[_ngcontent-%COMP%]{background:#6b72801a;color:#6b7280}.status-badge.status-pending[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%], .status-badge.status-draft[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{background:#6b7280}.performance-cell[_ngcontent-%COMP%]{display:flex;gap:var(--space-md);font-size:.75rem}.perf-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;color:var(--color-text-muted)}.format-cell[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted)}.date-cell[_ngcontent-%COMP%]{color:var(--color-text-muted);font-size:.75rem}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:var(--space-xs);justify-content:flex-end}.empty-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:var(--space-2xl)!important;text-align:center}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:var(--space-md);padding:var(--space-lg);color:var(--color-text-muted)}.empty-state[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:48px;opacity:.5}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0009;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:2000;padding:var(--space-lg)}.modal-content[_ngcontent-%COMP%]{background:var(--color-surface);border-radius:var(--radius-xl);width:100%;max-width:600px;max-height:90vh;overflow:hidden;display:flex;flex-direction:column;box-shadow:0 20px 60px #0006;animation:_ngcontent-%COMP%_slideUp .3s ease}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--space-lg);border-bottom:1px solid var(--color-border)}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);font-size:1.125rem;font-weight:600;color:var(--color-text);margin:0}.modal-close[_ngcontent-%COMP%]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;border:none;background:transparent;color:var(--color-text-muted);border-radius:var(--radius-lg);cursor:pointer;transition:all .2s}.modal-close[_ngcontent-%COMP%]:hover{background:#ef44441a;color:#ef4444}.modal-body[_ngcontent-%COMP%]{padding:var(--space-lg);overflow-y:auto;flex:1}.form-group[_ngcontent-%COMP%]{margin-bottom:var(--space-md)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;color:var(--color-text);margin-bottom:var(--space-xs)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:var(--space-sm) var(--space-md);border:1px solid var(--color-border);border-radius:var(--radius-lg);background:var(--color-bg);color:var(--color-text);font-size:.875rem;transition:all .2s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #137fec1a}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;font-family:inherit}.type-selector[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--space-sm)}.type-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:var(--space-xs);padding:var(--space-md);border:2px solid var(--color-border);background:var(--color-bg);color:var(--color-text-muted);border-radius:var(--radius-lg);font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s}.type-btn.active[_ngcontent-%COMP%]{border-color:var(--color-primary);background:#137fec1a;color:var(--color-primary)}.type-btn[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:20px}.file-upload-area[_ngcontent-%COMP%]{margin-top:var(--space-xs)}.file-input[_ngcontent-%COMP%]{display:none}.file-label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:var(--space-sm);padding:var(--space-lg);border:2px dashed var(--color-border);background:var(--color-bg);border-radius:var(--radius-lg);cursor:pointer;transition:all .2s}.file-label[_ngcontent-%COMP%]:hover{border-color:var(--color-primary);background:#137fec0d}.file-upload-area.small[_ngcontent-%COMP%]   .file-label[_ngcontent-%COMP%]{padding:var(--space-md)}.file-text[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-muted)}.label-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--space-xs)}.ai-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;padding:4px 12px;background:linear-gradient(135deg,#a855f7,#ec4899);border:none;color:#fff;border-radius:var(--radius-lg);font-size:.75rem;font-weight:600;cursor:pointer;transition:all .2s}.ai-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#9333ea,#db2777);transform:translateY(-1px);box-shadow:0 4px 12px #a855f766}.ai-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.ai-btn[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:14px}.field-hint[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted);margin-top:4px;margin-bottom:0}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:var(--space-sm);padding:var(--space-lg);border-top:1px solid var(--color-border);background:var(--color-bg)}.btn-cancel[_ngcontent-%COMP%], .btn-save[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-xs);padding:var(--space-sm) var(--space-lg);border:none;border-radius:var(--radius-lg);font-size:.875rem;font-weight:600;cursor:pointer;transition:all .2s}.btn-cancel[_ngcontent-%COMP%]{background:transparent;color:var(--color-text-muted);border:1px solid var(--color-border)}.btn-cancel[_ngcontent-%COMP%]:hover{background:var(--color-bg);border-color:var(--color-text-muted)}.btn-save[_ngcontent-%COMP%]{background:var(--color-primary);color:#fff}.btn-save[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--color-primary-dark);transform:translateY(-1px);box-shadow:0 4px 12px #137fec4d}.btn-save[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-save[_ngcontent-%COMP%]   .material-icon[_ngcontent-%COMP%]{font-size:18px}@media (max-width: 1024px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 768px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.filters-section[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.search-box[_ngcontent-%COMP%]{max-width:100%}.filters-right[_ngcontent-%COMP%]{width:100%}.filter-select[_ngcontent-%COMP%]{flex:1}.ads-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}`]})}}return r})();export{Uo as AdsManagementComponent};
