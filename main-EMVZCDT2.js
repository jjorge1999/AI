var h1=Object.defineProperty,f1=Object.defineProperties;var p1=Object.getOwnPropertyDescriptors;var z0=Object.getOwnPropertySymbols;var m1=Object.prototype.hasOwnProperty,g1=Object.prototype.propertyIsEnumerable;var q0=(n,e,t)=>e in n?h1(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ee=(n,e)=>{for(var t in e||={})m1.call(e,t)&&q0(n,t,e[t]);if(z0)for(var t of z0(e))g1.call(e,t)&&q0(n,t,e[t]);return n},ue=(n,e)=>f1(n,p1(e));var B=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(u){i(u)}},s=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});var H0=null;var cd=1,ld=Symbol("SIGNAL");function Te(n){let e=H0;return H0=n,e}var G0={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function y1(n){if(!(hd(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===cd)){if(!n.producerMustRecompute(n)&&!ud(n)){n.dirty=!1,n.lastCleanEpoch=cd;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=cd}}function W0(n){return n&&(n.nextProducerIndex=0),Te(n)}function Q0(n,e){if(Te(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(hd(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)dd(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function ud(n){Ba(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(y1(t),r!==t.version))return!0}return!1}function K0(n){if(Ba(n),hd(n))for(let e=0;e<n.producerNode.length;e++)dd(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function dd(n,e){if(v1(n),Ba(n),n.liveConsumerNode.length===1)for(let r=0;r<n.producerNode.length;r++)dd(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Ba(i),i.producerIndexOfThis[r]=e}}function hd(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Ba(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function v1(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function _1(){throw new Error}var b1=_1;function Y0(n){b1=n}function ve(n){return typeof n=="function"}function zi(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Ua=zi(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function cs(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Pt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ve(r))try{r()}catch(o){e=o instanceof Ua?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{J0(o)}catch(s){e=e??[],s instanceof Ua?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Ua(e)}}add(e){var t;if(e&&e!==this)if(this.closed)J0(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&cs(t,e)}remove(e){let{_finalizers:t}=this;t&&cs(t,e),e instanceof n&&e._removeParent(this)}};Pt.EMPTY=(()=>{let n=new Pt;return n.closed=!0,n})();var fd=Pt.EMPTY;function $a(n){return n instanceof Pt||n&&"closed"in n&&ve(n.remove)&&ve(n.add)&&ve(n.unsubscribe)}function J0(n){ve(n)?n():n.unsubscribe()}var un={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var qi={setTimeout(n,e,...t){let{delegate:r}=qi;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=qi;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function za(n){qi.setTimeout(()=>{let{onUnhandledError:e}=un;if(e)e(n);else throw n})}function pd(){}var X0=md("C",void 0,void 0);function Z0(n){return md("E",void 0,n)}function ey(n){return md("N",n,void 0)}function md(n,e,t){return{kind:n,value:e,error:t}}var ri=null;function Hi(n){if(un.useDeprecatedSynchronousErrorHandling){let e=!ri;if(e&&(ri={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ri;if(ri=null,t)throw r}}else n()}function ty(n){un.useDeprecatedSynchronousErrorHandling&&ri&&(ri.errorThrown=!0,ri.error=n)}var ii=class extends Pt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,$a(e)&&e.add(this)):this.destination=x1}static create(e,t,r){return new Ar(e,t,r)}next(e){this.isStopped?yd(ey(e),this):this._next(e)}error(e){this.isStopped?yd(Z0(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?yd(X0,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},w1=Function.prototype.bind;function gd(n,e){return w1.call(n,e)}var vd=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){qa(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){qa(r)}else qa(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){qa(t)}}},Ar=class extends ii{constructor(e,t,r){super();let i;if(ve(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&un.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&gd(e.next,o),error:e.error&&gd(e.error,o),complete:e.complete&&gd(e.complete,o)}):i=e}this.destination=new vd(i)}};function qa(n){un.useDeprecatedSynchronousErrorHandling?ty(n):za(n)}function C1(n){throw n}function yd(n,e){let{onStoppedNotification:t}=un;t&&qi.setTimeout(()=>t(n,e))}var x1={closed:!0,next:pd,error:C1,complete:pd};var Gi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ny(n){return n}function ry(n){return n.length===0?ny:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Ue=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=I1(t)?t:new Ar(t,r,i);return Hi(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=iy(r),new r((i,o)=>{let s=new Ar({next:a=>{try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Gi](){return this}pipe(...t){return ry(t)(this)}toPromise(t){return t=iy(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function iy(n){var e;return(e=n??un.Promise)!==null&&e!==void 0?e:Promise}function E1(n){return n&&ve(n.next)&&ve(n.error)&&ve(n.complete)}function I1(n){return n&&n instanceof ii||E1(n)&&$a(n)}function D1(n){return ve(n?.lift)}function bt(n){return e=>{if(D1(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function wt(n,e,t,r,i){return new _d(n,e,t,r,i)}var _d=class extends ii{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var oy=zi(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Tn=(()=>{class n extends Ue{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Ha(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new oy}next(t){Hi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Hi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Hi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?fd:(this.currentObservers=null,o.push(t),new Pt(()=>{this.currentObservers=null,cs(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Ue;return t.source=this,t}}return n.create=(e,t)=>new Ha(e,t),n})(),Ha=class extends Tn{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:fd}};var Je=class extends Tn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var sy=new Ue(n=>n.complete());function ay(n){return n&&ve(n.schedule)}function cy(n){return n[n.length-1]}function ly(n){return ve(cy(n))?n.pop():void 0}function uy(n){return ay(cy(n))?n.pop():void 0}function hy(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(p){try{u(r.next(p))}catch(y){s(y)}}function l(p){try{u(r.throw(p))}catch(y){s(y)}}function u(p){p.done?o(p.value):i(p.value).then(a,l)}u((r=r.apply(n,e||[])).next())})}function dy(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function oi(n){return this instanceof oi?(this.v=n,this):new oi(n)}function fy(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(w){return function(N){return Promise.resolve(N).then(w,y)}}function a(w,N){r[w]&&(i[w]=function(V){return new Promise(function(F,W){o.push([w,V,F,W])>1||l(w,V)})},N&&(i[w]=N(i[w])))}function l(w,N){try{u(r[w](N))}catch(V){b(o[0][3],V)}}function u(w){w.value instanceof oi?Promise.resolve(w.value.v).then(p,y):b(o[0][2],w)}function p(w){l("next",w)}function y(w){l("throw",w)}function b(w,N){w(N),o.shift(),o.length&&l(o[0][0],o[0][1])}}function py(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof dy=="function"?dy(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(u){o({value:u,done:a})},s)}}var Ga=n=>n&&typeof n.length=="number"&&typeof n!="function";function Wa(n){return ve(n?.then)}function Qa(n){return ve(n[Gi])}function Ka(n){return Symbol.asyncIterator&&ve(n?.[Symbol.asyncIterator])}function Ya(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function S1(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ja=S1();function Xa(n){return ve(n?.[Ja])}function Za(n){return fy(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield oi(t.read());if(i)return yield oi(void 0);yield yield oi(r)}}finally{t.releaseLock()}})}function ec(n){return ve(n?.getReader)}function At(n){if(n instanceof Ue)return n;if(n!=null){if(Qa(n))return M1(n);if(Ga(n))return T1(n);if(Wa(n))return P1(n);if(Ka(n))return my(n);if(Xa(n))return A1(n);if(ec(n))return O1(n)}throw Ya(n)}function M1(n){return new Ue(e=>{let t=n[Gi]();if(ve(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function T1(n){return new Ue(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function P1(n){return new Ue(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,za)})}function A1(n){return new Ue(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function my(n){return new Ue(e=>{N1(n,e).catch(t=>e.error(t))})}function O1(n){return my(Za(n))}function N1(n,e){var t,r,i,o;return hy(this,void 0,void 0,function*(){try{for(t=py(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Xt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function tc(n,e=0){return bt((t,r)=>{t.subscribe(wt(r,i=>Xt(r,n,()=>r.next(i),e),()=>Xt(r,n,()=>r.complete(),e),i=>Xt(r,n,()=>r.error(i),e)))})}function nc(n,e=0){return bt((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function gy(n,e){return At(n).pipe(nc(e),tc(e))}function yy(n,e){return At(n).pipe(nc(e),tc(e))}function vy(n,e){return new Ue(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function _y(n,e){return new Ue(t=>{let r;return Xt(t,e,()=>{r=n[Ja](),Xt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ve(r?.return)&&r.return()})}function rc(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ue(t=>{Xt(t,e,()=>{let r=n[Symbol.asyncIterator]();Xt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function by(n,e){return rc(Za(n),e)}function wy(n,e){if(n!=null){if(Qa(n))return gy(n,e);if(Ga(n))return vy(n,e);if(Wa(n))return yy(n,e);if(Ka(n))return rc(n,e);if(Xa(n))return _y(n,e);if(ec(n))return by(n,e)}throw Ya(n)}function Pn(n,e){return e?wy(n,e):At(n)}function ic(...n){let e=uy(n);return Pn(n,e)}var Cy=zi(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function bd(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let o=new Ar({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new Cy)}});n.subscribe(o)})}function ft(n,e){return bt((t,r)=>{let i=0;t.subscribe(wt(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:R1}=Array;function k1(n,e){return R1(e)?n(...e):n(e)}function xy(n){return ft(e=>k1(n,e))}var{isArray:F1}=Array,{getPrototypeOf:V1,prototype:L1,keys:j1}=Object;function Ey(n){if(n.length===1){let e=n[0];if(F1(e))return{args:e,keys:null};if(B1(e)){let t=j1(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function B1(n){return n&&typeof n=="object"&&V1(n)===L1}function Iy(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Dy(n,e,t,r,i,o,s,a){let l=[],u=0,p=0,y=!1,b=()=>{y&&!l.length&&!u&&e.complete()},w=V=>u<r?N(V):l.push(V),N=V=>{o&&e.next(V),u++;let F=!1;At(t(V,p++)).subscribe(wt(e,W=>{i?.(W),o?w(W):e.next(W)},()=>{F=!0},void 0,()=>{if(F)try{for(u--;l.length&&u<r;){let W=l.shift();s?Xt(e,s,()=>N(W)):N(W)}b()}catch(W){e.error(W)}}))};return n.subscribe(wt(e,w,()=>{y=!0,b()})),()=>{a?.()}}function oc(n,e,t=1/0){return ve(e)?oc((r,i)=>ft((o,s)=>e(r,o,i,s))(At(n(r,i))),t):(typeof e=="number"&&(t=e),bt((r,i)=>Dy(r,i,n,t)))}function wd(...n){let e=ly(n),{args:t,keys:r}=Ey(n),i=new Ue(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),l=s,u=s;for(let p=0;p<s;p++){let y=!1;At(t[p]).subscribe(wt(o,b=>{y||(y=!0,u--),a[p]=b},()=>l--,void 0,()=>{(!l||!y)&&(u||o.next(r?Iy(r,a):a),o.complete())}))}});return e?i.pipe(xy(e)):i}function Cd(n,e){return bt((t,r)=>{let i=0;t.subscribe(wt(r,o=>n.call(e,o,i++)&&r.next(o)))})}function xd(n,e){return ve(e)?oc(n,e,1):oc(n,1)}function si(n){return n<=0?()=>sy:bt((e,t)=>{let r=0;e.subscribe(wt(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Ed(n){return bt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Wi(n,e){return bt((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(wt(r,l=>{i?.unsubscribe();let u=0,p=o++;At(n(l,p)).subscribe(i=wt(r,y=>r.next(e?e(l,y,p,u++):y),()=>{i=null,a()}))},()=>{s=!0,a()}))})}var uv="https://g.co/ng/security#xss",he=class extends Error{constructor(e,t){super(kc(e,t)),this.code=e}};function kc(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function bs(n){return{toString:n}.toString()}var sc="__parameters__";function U1(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function dv(n,e,t){return bs(()=>{let r=U1(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(l,u,p){let y=l.hasOwnProperty(sc)?l[sc]:Object.defineProperty(l,sc,{value:[]})[sc];for(;y.length<=p;)y.push(null);return(y[p]=y[p]||[]).push(s),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Yn=globalThis;function ze(n){for(let e in n)if(n[e]===ze)return e;throw Error("Could not find renamed property on target object.")}function $1(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Bt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Bt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function Sy(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var z1=ze({__forward_ref__:ze});function tn(n){return n.__forward_ref__=tn,n.toString=function(){return Bt(this())},n}function St(n){return hv(n)?n():n}function hv(n){return typeof n=="function"&&n.hasOwnProperty(z1)&&n.__forward_ref__===tn}function me(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function bi(n){return{providers:n.providers||[],imports:n.imports||[]}}function Oh(n){return My(n,fv)||My(n,pv)}function My(n,e){return n.hasOwnProperty(e)?n[e]:null}function q1(n){let e=n&&(n[fv]||n[pv]);return e||null}function Ty(n){return n&&(n.hasOwnProperty(Py)||n.hasOwnProperty(H1))?n[Py]:null}var fv=ze({\u0275prov:ze}),Py=ze({\u0275inj:ze}),pv=ze({ngInjectableDef:ze}),H1=ze({ngInjectorDef:ze}),ye=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=me({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function mv(n){return n&&!!n.\u0275providers}var G1=ze({\u0275cmp:ze}),W1=ze({\u0275dir:ze}),Q1=ze({\u0275pipe:ze});var mc=ze({\u0275fac:ze}),ls=ze({__NG_ELEMENT_ID__:ze}),Ay=ze({__NG_ENV_ID__:ze});function Jn(n){return typeof n=="string"?n:n==null?"":String(n)}function K1(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Jn(n)}function Y1(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new he(-200,n)}function Nh(n,e){throw new he(-201,!1)}var Ce=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Ce||{}),Ud;function gv(){return Ud}function Ot(n){let e=Ud;return Ud=n,e}function yv(n,e,t){let r=Oh(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&Ce.Optional)return null;if(e!==void 0)return e;Nh(n,"Injector")}var J1={},us=J1,$d="__NG_DI_FLAG__",gc="ngTempTokenPath",X1="ngTokenPath",Z1=/\n/gm,eI="\u0275",Oy="__source",Ji;function tI(){return Ji}function Or(n){let e=Ji;return Ji=n,e}function nI(n,e=Ce.Default){if(Ji===void 0)throw new he(-203,!1);return Ji===null?yv(n,void 0,e):Ji.get(n,e&Ce.Optional?null:void 0,e)}function se(n,e=Ce.Default){return(gv()||nI)(St(n),e)}function $e(n,e=Ce.Default){return se(n,Fc(e))}function Fc(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function zd(n){let e=[];for(let t=0;t<n.length;t++){let r=St(n[t]);if(Array.isArray(r)){if(r.length===0)throw new he(900,!1);let i,o=Ce.Default;for(let s=0;s<r.length;s++){let a=r[s],l=rI(a);typeof l=="number"?l===-1?i=a.token:o|=l:i=a}e.push(se(i,o))}else e.push(se(r))}return e}function vv(n,e){return n[$d]=e,n.prototype[$d]=e,n}function rI(n){return n[$d]}function iI(n,e,t,r){let i=n[gc];throw e[Oy]&&i.unshift(e[Oy]),n.message=oI(`
`+n.message,i,t,r),n[X1]=i,n[gc]=null,n}function oI(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==eI?n.slice(2):n;let i=Bt(e);if(Array.isArray(e))i=e.map(Bt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Bt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Z1,`
  `)}`}var _v=vv(dv("Optional"),8);var sI=vv(dv("SkipSelf"),4);function ui(n,e){let t=n.hasOwnProperty(mc);return t?n[mc]:null}function aI(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function cI(n){return n.flat(Number.POSITIVE_INFINITY)}function Rh(n,e){n.forEach(t=>Array.isArray(t)?Rh(t,e):e(t))}function bv(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function yc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function lI(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function uI(n,e,t){let r=ws(n,e);return r>=0?n[r|1]=t:(r=~r,lI(n,r,e,t)),r}function Id(n,e){let t=ws(n,e);if(t>=0)return n[t|1]}function ws(n,e){return dI(n,e,1)}function dI(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Zi={},Zt=[],ds=new ye(""),wv=new ye("",-1),Cv=new ye(""),vc=class{get(e,t=us){if(t===us){let r=new Error(`NullInjectorError: No provider for ${Bt(e)}!`);throw r.name="NullInjectorError",r}return t}},xv=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(xv||{}),Nn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Nn||{}),en=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(en||{});function hI(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function qd(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];pI(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function fI(n){return n===3||n===4||n===6}function pI(n){return n.charCodeAt(0)===64}function hs(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?Ny(n,t,i,null,e[++r]):Ny(n,t,i,null,null))}}return n}function Ny(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var Ev="ng-template";function mI(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&hI(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(kh(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function kh(n){return n.type===4&&n.value!==Ev}function gI(n,e,t){let r=n.type===4&&!t?Ev:n.value;return e===r}function yI(n,e,t){let r=4,i=n.attrs,o=i!==null?bI(i):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!dn(r)&&!dn(l))return!1;if(s&&dn(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!gI(n,l,t)||l===""&&e.length===1){if(dn(r))return!1;s=!0}}else if(r&8){if(i===null||!mI(n,i,l,t)){if(dn(r))return!1;s=!0}}else{let u=e[++a],p=vI(l,i,kh(n),t);if(p===-1){if(dn(r))return!1;s=!0;continue}if(u!==""){let y;if(p>o?y="":y=i[p+1].toLowerCase(),r&2&&u!==y){if(dn(r))return!1;s=!0}}}}return dn(r)||s}function dn(n){return(n&1)===0}function vI(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return wI(e,n)}function _I(n,e,t=!1){for(let r=0;r<e.length;r++)if(yI(n,e[r],t))return!0;return!1}function bI(n){for(let e=0;e<n.length;e++){let t=n[e];if(fI(t))return e}return n.length}function wI(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function Ry(n,e){return n?":not("+e.trim()+")":e}function CI(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!dn(s)&&(e+=Ry(o,i),i=""),r=s,o=o||!dn(r);t++}return i!==""&&(e+=Ry(o,i)),e}function xI(n){return n.map(CI).join(",")}function EI(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!dn(i))break;i=o}r++}return{attrs:e,classes:t}}function Ve(n){return bs(()=>{let e=Sv(n),t=ue(ee({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===xv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Nn.Emulated,styles:n.styles||Zt,_:null,schemas:n.schemas||null,tView:null,id:""});Mv(t);let r=n.dependencies;return t.directiveDefs=Fy(r,!1),t.pipeDefs=Fy(r,!0),t.id=MI(t),t})}function II(n){return eo(n)||Iv(n)}function DI(n){return n!==null}function wi(n){return bs(()=>({type:n.type,bootstrap:n.bootstrap||Zt,declarations:n.declarations||Zt,imports:n.imports||Zt,exports:n.exports||Zt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function ky(n,e){if(n==null)return Zi;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=en.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==en.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Xe(n){return bs(()=>{let e=Sv(n);return Mv(e),e})}function Cs(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function eo(n){return n[G1]||null}function Iv(n){return n[W1]||null}function Dv(n){return n[Q1]||null}function SI(n){let e=eo(n)||Iv(n)||Dv(n);return e!==null?e.standalone:!1}function Sv(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Zi,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Zt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ky(n.inputs,e),outputs:ky(n.outputs),debugInfo:null}}function Mv(n){n.features?.forEach(e=>e(n))}function Fy(n,e){if(!n)return null;let t=e?Dv:II;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(DI)}function MI(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Vc(n){return{\u0275providers:n}}function TI(...n){return{\u0275providers:Tv(!0,n),\u0275fromNgModule:!0}}function Tv(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Rh(e,s=>{let a=s;Hd(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Pv(i,o),t}function Pv(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Fh(i,o=>{e(o,r)})}}function Hd(n,e,t,r){if(n=St(n),!n)return!1;let i=null,o=Ty(n),s=!o&&eo(n);if(!o&&!s){let l=n.ngModule;if(o=Ty(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of l)Hd(u,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{Rh(o.imports,p=>{Hd(p,e,t,r)&&(u||=[],u.push(p))})}finally{}u!==void 0&&Pv(u,e)}if(!a){let u=ui(i)||(()=>new i);e({provide:i,useFactory:u,deps:Zt},i),e({provide:Cv,useValue:i,multi:!0},i),e({provide:ds,useValue:()=>se(i),multi:!0},i)}let l=o.providers;if(l!=null&&!a){let u=n;Fh(l,p=>{e(p,u)})}}else return!1;return i!==n&&n.providers!==void 0}function Fh(n,e){for(let t of n)mv(t)&&(t=t.\u0275providers),Array.isArray(t)?Fh(t,e):e(t)}var PI=ze({provide:String,useValue:ze});function Av(n){return n!==null&&typeof n=="object"&&PI in n}function AI(n){return!!(n&&n.useExisting)}function OI(n){return!!(n&&n.useFactory)}function to(n){return typeof n=="function"}function NI(n){return!!n.useClass}var Lc=new ye(""),lc={},RI={},Dd;function Vh(){return Dd===void 0&&(Dd=new vc),Dd}var Rn=class{},fs=class extends Rn{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Wd(e,s=>this.processProvider(s)),this.records.set(wv,Qi(void 0,this)),i.has("environment")&&this.records.set(Rn,Qi(void 0,this));let o=this.records.get(Lc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Cv,Zt,Ce.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Te(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Te(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Or(this),r=Ot(void 0),i;try{return e()}finally{Or(t),Ot(r)}}get(e,t=us,r=Ce.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Ay))return e[Ay](this);r=Fc(r);let i,o=Or(this),s=Ot(void 0);try{if(!(r&Ce.SkipSelf)){let l=this.records.get(e);if(l===void 0){let u=jI(e)&&Oh(e);u&&this.injectableDefInScope(u)?l=Qi(Gd(e),lc):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=r&Ce.Self?Vh():this.parent;return t=r&Ce.Optional&&t===us?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[gc]=a[gc]||[]).unshift(Bt(e)),o)throw a;return iI(a,e,"R3InjectorError",this.source)}else throw a}finally{Ot(s),Or(o)}}resolveInjectorInitializers(){let e=Te(null),t=Or(this),r=Ot(void 0),i;try{let o=this.get(ds,Zt,Ce.Self);for(let s of o)s()}finally{Or(t),Ot(r),Te(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Bt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new he(205,!1)}processProvider(e){e=St(e);let t=to(e)?e:St(e&&e.provide),r=FI(e);if(!to(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Qi(void 0,lc,!0),i.factory=()=>zd(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Te(null);try{return t.value===lc&&(t.value=RI,t.value=t.factory()),typeof t.value=="object"&&t.value&&LI(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Te(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=St(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Gd(n){let e=Oh(n),t=e!==null?e.factory:ui(n);if(t!==null)return t;if(n instanceof ye)throw new he(204,!1);if(n instanceof Function)return kI(n);throw new he(204,!1)}function kI(n){if(n.length>0)throw new he(204,!1);let t=q1(n);return t!==null?()=>t.factory(n):()=>new n}function FI(n){if(Av(n))return Qi(void 0,n.useValue);{let e=Ov(n);return Qi(e,lc)}}function Ov(n,e,t){let r;if(to(n)){let i=St(n);return ui(i)||Gd(i)}else if(Av(n))r=()=>St(n.useValue);else if(OI(n))r=()=>n.useFactory(...zd(n.deps||[]));else if(AI(n))r=()=>se(St(n.useExisting));else{let i=St(n&&(n.useClass||n.provide));if(VI(n))r=()=>new i(...zd(n.deps));else return ui(i)||Gd(i)}return r}function Qi(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function VI(n){return!!n.deps}function LI(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function jI(n){return typeof n=="function"||typeof n=="object"&&n instanceof ye}function Wd(n,e){for(let t of n)Array.isArray(t)?Wd(t,e):t&&mv(t)?Wd(t.\u0275providers,e):e(t)}function Nv(n,e){n instanceof fs&&n.assertNotDestroyed();let t,r=Or(n),i=Ot(void 0);try{return e()}finally{Or(r),Ot(i)}}function BI(){return gv()!==void 0||tI()!=null}function UI(n){return typeof n=="function"}var nr=0,fe=1,oe=2,vt=3,hn=4,mn=5,_c=6,ps=7,fn=8,no=9,pn=10,dt=11,ms=12,Vy=13,so=14,kn=15,xs=16,Ki=17,Xn=18,jc=19,Rv=20,Nr=21,Sd=22,di=23,$t=25,kv=1;var hi=7,bc=8,ro=9,Ut=10,Lh=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Lh||{});function ci(n){return Array.isArray(n)&&typeof n[kv]=="object"}function rr(n){return Array.isArray(n)&&n[kv]===!0}function Fv(n){return(n.flags&4)!==0}function Bc(n){return n.componentOffset>-1}function jh(n){return(n.flags&1)===1}function Rr(n){return!!n.template}function $I(n){return(n[oe]&512)!==0}var Qd=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function Vv(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Ci(){return Lv}function Lv(n){return n.type.prototype.ngOnChanges&&(n.setInput=qI),zI}Ci.ngInherit=!0;function zI(){let n=Bv(this),e=n?.current;if(e){let t=n.previous;if(t===Zi)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function qI(n,e,t,r,i){let o=this.declaredInputs[r],s=Bv(n)||HI(n,{previous:Zi,current:null}),a=s.current||(s.current={}),l=s.previous,u=l[o];a[o]=new Qd(u&&u.currentValue,t,l===Zi),Vv(n,e,i,t)}var jv="__ngSimpleChanges__";function Bv(n){return n[jv]||null}function HI(n,e){return n[jv]=e}var Ly=null;var An=function(n,e,t){Ly?.(n,e,t)},GI="svg",WI="math",QI=!1;function KI(){return QI}function Fn(n){for(;Array.isArray(n);)n=n[nr];return n}function Uv(n,e){return Fn(e[n])}function nn(n,e){return Fn(e[n.index])}function $v(n,e){return n.data[e]}function Uc(n,e){return n[e]}function kr(n,e){let t=e[n];return ci(t)?t:t[nr]}function YI(n){return(n[oe]&4)===4}function Bh(n){return(n[oe]&128)===128}function JI(n){return rr(n[vt])}function wc(n,e){return e==null?null:n[e]}function zv(n){n[Ki]=0}function XI(n){n[oe]&1024||(n[oe]|=1024,Bh(n)&&gs(n))}function ZI(n,e){for(;n>0;)e=e[so],n--;return e}function Uh(n){return!!(n[oe]&9216||n[di]?.dirty)}function Kd(n){n[pn].changeDetectionScheduler?.notify(1),Uh(n)?gs(n):n[oe]&64&&(KI()?(n[oe]|=1024,gs(n)):n[pn].changeDetectionScheduler?.notify())}function gs(n){n[pn].changeDetectionScheduler?.notify();let e=ys(n);for(;e!==null&&!(e[oe]&8192||(e[oe]|=8192,!Bh(e)));)e=ys(e)}function qv(n,e){if((n[oe]&256)===256)throw new he(911,!1);n[Nr]===null&&(n[Nr]=[]),n[Nr].push(e)}function eD(n,e){if(n[Nr]===null)return;let t=n[Nr].indexOf(e);t!==-1&&n[Nr].splice(t,1)}function ys(n){let e=n[vt];return rr(e)?e[vt]:e}var pe={lFrame:Xv(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function tD(){return pe.lFrame.elementDepthCount}function nD(){pe.lFrame.elementDepthCount++}function rD(){pe.lFrame.elementDepthCount--}function Hv(){return pe.bindingsEnabled}function iD(){return pe.skipHydrationRootTNode!==null}function oD(n){return pe.skipHydrationRootTNode===n}function sD(){pe.skipHydrationRootTNode=null}function Ee(){return pe.lFrame.lView}function Ct(){return pe.lFrame.tView}function R(n){return pe.lFrame.contextLView=n,n[fn]}function k(n){return pe.lFrame.contextLView=null,n}function zt(){let n=Gv();for(;n!==null&&n.type===64;)n=n.parent;return n}function Gv(){return pe.lFrame.currentTNode}function aD(){let n=pe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Es(n,e){let t=pe.lFrame;t.currentTNode=n,t.isParent=e}function Wv(){return pe.lFrame.isParent}function cD(){pe.lFrame.isParent=!1}function lD(){return pe.lFrame.contextLView}function $h(){let n=pe.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Qv(){return pe.lFrame.bindingIndex}function uD(n){return pe.lFrame.bindingIndex=n}function $c(){return pe.lFrame.bindingIndex++}function zh(n){let e=pe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function dD(){return pe.lFrame.inI18n}function hD(n,e){let t=pe.lFrame;t.bindingIndex=t.bindingRootIndex=n,Yd(e)}function fD(){return pe.lFrame.currentDirectiveIndex}function Yd(n){pe.lFrame.currentDirectiveIndex=n}function pD(n){let e=pe.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Kv(){return pe.lFrame.currentQueryIndex}function qh(n){pe.lFrame.currentQueryIndex=n}function mD(n){let e=n[fe];return e.type===2?e.declTNode:e.type===1?n[mn]:null}function Yv(n,e,t){if(t&Ce.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&Ce.Host);)if(i=mD(o),i===null||(o=o[so],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=pe.lFrame=Jv();return r.currentTNode=e,r.lView=n,!0}function Hh(n){let e=Jv(),t=n[fe];pe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Jv(){let n=pe.lFrame,e=n===null?null:n.child;return e===null?Xv(n):e}function Xv(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Zv(){let n=pe.lFrame;return pe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var e_=Zv;function Gh(){let n=Zv();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function gD(n){return(pe.lFrame.contextLView=ZI(n,pe.lFrame.contextLView))[fn]}function Fr(){return pe.lFrame.selectedIndex}function fi(n){pe.lFrame.selectedIndex=n}function Wh(){let n=pe.lFrame;return $v(n.tView,n.selectedIndex)}function yD(){return pe.lFrame.currentNamespace}var t_=!0;function Qh(){return t_}function Kh(n){t_=n}function vD(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=Lv(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Yh(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:p}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),p!=null&&(n.destroyHooks??=[]).push(t,p)}}function uc(n,e,t){n_(n,e,3,t)}function dc(n,e,t,r){(n[oe]&3)===t&&n_(n,e,t,r)}function Md(n,e){let t=n[oe];(t&3)===e&&(t&=16383,t+=1,n[oe]=t)}function n_(n,e,t,r){let i=r!==void 0?n[Ki]&65535:0,o=r??-1,s=e.length-1,a=0;for(let l=i;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(n[Ki]+=65536),(a<o||o==-1)&&(_D(n,t,e,l),n[Ki]=(n[Ki]&4294901760)+l+2),l++}function jy(n,e){An(4,n,e);let t=Te(null);try{e.call(n)}finally{Te(t),An(5,n,e)}}function _D(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[oe]>>14<n[Ki]>>16&&(n[oe]&3)===e&&(n[oe]+=16384,jy(a,o)):jy(a,o)}var Xi=-1,pi=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function bD(n){return n instanceof pi}function wD(n){return(n.flags&8)!==0}function CD(n){return(n.flags&16)!==0}function r_(n){return n!==Xi}function Cc(n){return n&32767}function xD(n){return n>>16}function xc(n,e){let t=xD(n),r=e;for(;t>0;)r=r[so],t--;return r}var Jd=!0;function Ec(n){let e=Jd;return Jd=n,e}var ED=256,i_=ED-1,o_=5,ID=0,On={};function DD(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ls)&&(r=t[ls]),r==null&&(r=t[ls]=ID++);let i=r&i_,o=1<<i;e.data[n+(i>>o_)]|=o}function Ic(n,e){let t=s_(n,e);if(t!==-1)return t;let r=e[fe];r.firstCreatePass&&(n.injectorIndex=e.length,Td(r.data,n),Td(e,null),Td(r.blueprint,null));let i=Jh(n,e),o=n.injectorIndex;if(r_(i)){let s=Cc(i),a=xc(i,e),l=a[fe].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|l[s+u]}return e[o+8]=i,o}function Td(n,e){n.push(0,0,0,0,0,0,0,0,e)}function s_(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Jh(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=d_(i),r===null)return Xi;if(t++,i=i[so],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Xi}function Xd(n,e,t){DD(n,e,t)}function a_(n,e,t){if(t&Ce.Optional||n!==void 0)return n;Nh(e,"NodeInjector")}function c_(n,e,t,r){if(t&Ce.Optional&&r===void 0&&(r=null),!(t&(Ce.Self|Ce.Host))){let i=n[no],o=Ot(void 0);try{return i?i.get(e,r,t&Ce.Optional):yv(e,r,t&Ce.Optional)}finally{Ot(o)}}return a_(r,e,t)}function l_(n,e,t,r=Ce.Default,i){if(n!==null){if(e[oe]&2048&&!(r&Ce.Self)){let s=PD(n,e,t,r,On);if(s!==On)return s}let o=u_(n,e,t,r,On);if(o!==On)return o}return c_(e,t,r,i)}function u_(n,e,t,r,i){let o=MD(t);if(typeof o=="function"){if(!Yv(e,n,r))return r&Ce.Host?a_(i,t,r):c_(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&Ce.Optional))Nh(t);else return s}finally{e_()}}else if(typeof o=="number"){let s=null,a=s_(n,e),l=Xi,u=r&Ce.Host?e[kn][mn]:null;for((a===-1||r&Ce.SkipSelf)&&(l=a===-1?Jh(n,e):e[a+8],l===Xi||!Uy(r,!1)?a=-1:(s=e[fe],a=Cc(l),e=xc(l,e)));a!==-1;){let p=e[fe];if(By(o,a,p.data)){let y=SD(a,e,t,s,r,u);if(y!==On)return y}l=e[a+8],l!==Xi&&Uy(r,e[fe].data[a+8]===u)&&By(o,a,e)?(s=p,a=Cc(l),e=xc(l,e)):a=-1}}return i}function SD(n,e,t,r,i,o){let s=e[fe],a=s.data[n+8],l=r==null?Bc(a)&&Jd:r!=s&&(a.type&3)!==0,u=i&Ce.Host&&o===a,p=hc(a,s,t,l,u);return p!==null?mi(e,s,p,a):On}function hc(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,l=n.directiveStart,u=n.directiveEnd,p=o>>20,y=r?a:a+p,b=i?a+p:u;for(let w=y;w<b;w++){let N=s[w];if(w<l&&t===N||w>=l&&N.type===t)return w}if(i){let w=s[l];if(w&&Rr(w)&&w.type===t)return l}return null}function mi(n,e,t,r){let i=n[t],o=e.data;if(bD(i)){let s=i;s.resolving&&Y1(K1(o[t]));let a=Ec(s.canSeeViewProviders);s.resolving=!0;let l,u=s.injectImpl?Ot(s.injectImpl):null,p=Yv(n,r,Ce.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&vD(t,o[t],e)}finally{u!==null&&Ot(u),Ec(a),s.resolving=!1,e_()}}return i}function MD(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ls)?n[ls]:void 0;return typeof e=="number"?e>=0?e&i_:TD:e}function By(n,e,t){let r=1<<n;return!!(t[e+(n>>o_)]&r)}function Uy(n,e){return!(n&Ce.Self)&&!(n&Ce.Host&&e)}var li=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return l_(this._tNode,this._lView,e,Fc(r),t)}};function TD(){return new li(zt(),Ee())}function Vr(n){return bs(()=>{let e=n.prototype.constructor,t=e[mc]||Zd(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[mc]||Zd(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Zd(n){return hv(n)?()=>{let e=Zd(St(n));return e&&e()}:ui(n)}function PD(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[oe]&2048&&!(s[oe]&512);){let a=u_(o,s,t,r|Ce.Self,On);if(a!==On)return a;let l=o.parent;if(!l){let u=s[Rv];if(u){let p=u.get(t,On,r);if(p!==On)return p}l=d_(s),s=s[so]}o=l}return i}function d_(n){let e=n[fe],t=e.type;return t===2?e.declTNode:t===1?n[mn]:null}function $y(n,e=null,t=null,r){let i=AD(n,e,t,r);return i.resolveInjectorInitializers(),i}function AD(n,e=null,t=null,r,i=new Set){let o=[t||Zt,TI(n)];return r=r||(typeof n=="object"?void 0:Bt(n)),new fs(o,e||Vh(),r||null,i)}var zc=(()=>{class n{static{this.THROW_IF_NOT_FOUND=us}static{this.NULL=new vc}static create(t,r){if(Array.isArray(t))return $y({name:""},r,t,"");{let i=t.name??"";return $y({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=me({token:n,providedIn:"any",factory:()=>se(wv)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();var OD="ngOriginalError";function Pd(n){return n[OD]}var Zn=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Pd(e);for(;t&&Pd(t);)t=Pd(t);return t||null}},h_=new ye("",{providedIn:"root",factory:()=>$e(Zn).handleError.bind(void 0)}),f_=(()=>{class n{static{this.__NG_ELEMENT_ID__=ND}static{this.__NG_ENV_ID__=t=>t}}return n})(),eh=class extends f_{constructor(e){super(),this._lView=e}onDestroy(e){return qv(this._lView,e),()=>eD(this._lView,e)}};function ND(){return new eh(Ee())}function RD(){return ao(zt(),Ee())}function ao(n,e){return new gn(nn(n,e))}var gn=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=RD}}return n})();function kD(n){return n instanceof gn?n.nativeElement:n}var th=class extends Tn{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,BI()&&(this.destroyRef=$e(f_,{optional:!0})??void 0)}emit(e){let t=Te(null);try{super.next(e)}finally{Te(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=Ad(o),i&&(i=Ad(i)),s&&(s=Ad(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Pt&&e.add(a),a}};function Ad(n){return e=>{setTimeout(n,void 0,e)}}var jt=th;function FD(){return this._results[Symbol.iterator]()}var nh=class n{get changes(){return this._changes??=new jt}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=FD)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=cI(e);(this._changesDetected=!aI(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function p_(n){return(n.flags&128)===128}var m_=new Map,VD=0;function LD(){return VD++}function jD(n){m_.set(n[jc],n)}function BD(n){m_.delete(n[jc])}var zy="__ngContext__";function gi(n,e){ci(e)?(n[zy]=e[jc],jD(e)):n[zy]=e}function g_(n){return v_(n[ms])}function y_(n){return v_(n[hn])}function v_(n){for(;n!==null&&!rr(n);)n=n[hn];return n}var rh;function __(n){rh=n}function UD(){if(rh!==void 0)return rh;if(typeof document<"u")return document;throw new he(210,!1)}var Xh=new ye("",{providedIn:"root",factory:()=>$D}),$D="ng",Zh=new ye(""),Lr=new ye("",{providedIn:"platform",factory:()=>"unknown"});var ef=new ye("",{providedIn:"root",factory:()=>UD().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var zD="h",qD="b";var HD=()=>null;function tf(n,e,t=!1){return HD(n,e,t)}var b_=!1,GD=new ye("",{providedIn:"root",factory:()=>b_});var Dc=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${uv})`}};function qc(n){return n instanceof Dc?n.changingThisBreaksApplicationSecurity:n}function w_(n,e){let t=WD(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${uv})`)}return t===e}function WD(n){return n instanceof Dc&&n.getTypeName()||null}var QD=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function C_(n){return n=String(n),n.match(QD)?n:"unsafe:"+n}var nf=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(nf||{});function yn(n){let e=KD();return e?e.sanitize(nf.URL,n)||"":w_(n,"URL")?qc(n):C_(Jn(n))}function KD(){let n=Ee();return n&&n[pn].sanitizer}function Is(n){return n.ownerDocument}var er=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(er||{}),YD;function rf(n,e){return YD(n,e)}function Yi(n,e,t,r,i){if(r!=null){let o,s=!1;rr(r)?o=r:ci(r)&&(s=!0,r=r[nr]);let a=Fn(r);n===0&&t!==null?i==null?S_(e,t,a):Sc(e,t,a,i||null,!0):n===1&&t!==null?Sc(e,t,a,i||null,!0):n===2?fS(e,a,s):n===3&&e.destroyNode(a),o!=null&&mS(e,n,o,t,i)}}function JD(n,e){return n.createText(e)}function XD(n,e,t){n.setValue(e,t)}function x_(n,e,t){return n.createElement(e,t)}function ZD(n,e){E_(n,e),e[nr]=null,e[mn]=null}function eS(n,e,t,r,i,o){r[nr]=i,r[mn]=e,Hc(n,r,t,1,i,o)}function E_(n,e){e[pn].changeDetectionScheduler?.notify(1),Hc(n,e,e[dt],2,null,null)}function tS(n){let e=n[ms];if(!e)return Od(n[fe],n);for(;e;){let t=null;if(ci(e))t=e[ms];else{let r=e[Ut];r&&(t=r)}if(!t){for(;e&&!e[hn]&&e!==n;)ci(e)&&Od(e[fe],e),e=e[vt];e===null&&(e=n),ci(e)&&Od(e[fe],e),t=e&&e[hn]}e=t}}function nS(n,e,t,r){let i=Ut+r,o=t.length;r>0&&(t[i-1][hn]=e),r<o-Ut?(e[hn]=t[i],bv(t,Ut+r,e)):(t.push(e),e[hn]=null),e[vt]=t;let s=e[xs];s!==null&&t!==s&&rS(s,e);let a=e[Xn];a!==null&&a.insertView(n),Kd(e),e[oe]|=128}function rS(n,e){let t=n[ro],i=e[vt][vt][kn];e[kn]!==i&&(n[oe]|=Lh.HasTransplantedViews),t===null?n[ro]=[e]:t.push(e)}function I_(n,e){let t=n[ro],r=t.indexOf(e);t.splice(r,1)}function ih(n,e){if(n.length<=Ut)return;let t=Ut+e,r=n[t];if(r){let i=r[xs];i!==null&&i!==n&&I_(i,r),e>0&&(n[t-1][hn]=r[hn]);let o=yc(n,Ut+e);ZD(r[fe],r);let s=o[Xn];s!==null&&s.detachView(o[fe]),r[vt]=null,r[hn]=null,r[oe]&=-129}return r}function D_(n,e){if(!(e[oe]&256)){let t=e[dt];t.destroyNode&&Hc(n,e,t,3,null,null),tS(e)}}function Od(n,e){if(e[oe]&256)return;let t=Te(null);try{e[oe]&=-129,e[oe]|=256,e[di]&&K0(e[di]),oS(n,e),iS(n,e),e[fe].type===1&&e[dt].destroy();let r=e[xs];if(r!==null&&rr(e[vt])){r!==e[vt]&&I_(r,e);let i=e[Xn];i!==null&&i.detachView(n)}BD(e)}finally{Te(t)}}function iS(n,e){let t=n.cleanup,r=e[ps];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[ps]=null);let i=e[Nr];if(i!==null){e[Nr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function oS(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof pi)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],l=o[s+1];An(4,a,l);try{l.call(a)}finally{An(5,a,l)}}else{An(4,i,o);try{o.call(i)}finally{An(5,i,o)}}}}}function sS(n,e,t){return aS(n,e.parent,t)}function aS(n,e,t){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return t[nr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Nn.None||o===Nn.Emulated)return null}return nn(r,t)}}function Sc(n,e,t,r,i){n.insertBefore(e,t,r,i)}function S_(n,e,t){n.appendChild(e,t)}function qy(n,e,t,r,i){r!==null?Sc(n,e,t,r,i):S_(n,e,t)}function cS(n,e,t,r){n.removeChild(e,t,r)}function of(n,e){return n.parentNode(e)}function lS(n,e){return n.nextSibling(e)}function uS(n,e,t){return hS(n,e,t)}function dS(n,e,t){return n.type&40?nn(n,t):null}var hS=dS,Hy;function sf(n,e,t,r){let i=sS(n,r,e),o=e[dt],s=r.parent||e[mn],a=uS(s,r,e);if(i!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)qy(o,i,t[l],a,!1);else qy(o,i,t,a,!1);Hy!==void 0&&Hy(o,r,e,t,i)}function fc(n,e){if(e!==null){let t=e.type;if(t&3)return nn(e,n);if(t&4)return oh(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return fc(n,r);{let i=n[e.index];return rr(i)?oh(-1,i):Fn(i)}}else{if(t&32)return rf(e,n)()||Fn(n[e.index]);{let r=M_(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ys(n[kn]);return fc(i,r)}else return fc(n,e.next)}}}return null}function M_(n,e){if(e!==null){let r=n[kn][mn],i=e.projection;return r.projection[i]}return null}function oh(n,e){let t=Ut+n+1;if(t<e.length){let r=e[t],i=r[fe].firstChild;if(i!==null)return fc(r,i)}return e[hi]}function fS(n,e,t){let r=of(n,e);r&&cS(n,r,e,t)}function af(n,e,t,r,i,o,s){for(;t!=null;){let a=r[t.index],l=t.type;if(s&&e===0&&(a&&gi(Fn(a),r),t.flags|=2),(t.flags&32)!==32)if(l&8)af(n,e,t.child,r,i,o,!1),Yi(e,n,i,a,o);else if(l&32){let u=rf(t,r),p;for(;p=u();)Yi(e,n,i,p,o);Yi(e,n,i,a,o)}else l&16?pS(n,e,r,t,i,o):Yi(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Hc(n,e,t,r,i,o){af(t,r,n.firstChild,e,i,o,!1)}function pS(n,e,t,r,i,o){let s=t[kn],l=s[mn].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let p=l[u];Yi(e,n,i,p,o)}else{let u=l,p=s[vt];p_(r)&&(u.flags|=128),af(n,e,u,p,i,o,!0)}}function mS(n,e,t,r,i){let o=t[hi],s=Fn(t);o!==s&&Yi(e,n,r,o,i);for(let a=Ut;a<t.length;a++){let l=t[a];Hc(l[fe],l,n,e,r,o)}}function gS(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:er.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=er.Important),n.setStyle(t,r,i,o))}}function yS(n,e,t){n.setAttribute(e,"style",t)}function T_(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function P_(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&qd(n,e,r),i!==null&&T_(n,e,i),o!==null&&yS(n,e,o)}var vn={};function v(n=1){A_(Ct(),Ee(),Fr()+n,!1)}function A_(n,e,t,r){if(!r)if((e[oe]&3)===3){let o=n.preOrderCheckHooks;o!==null&&uc(e,o,t)}else{let o=n.preOrderHooks;o!==null&&dc(e,o,0,t)}fi(t)}function K(n,e=Ce.Default){let t=Ee();if(t===null)return se(n,e);let r=zt();return l_(r,t,St(n),e)}function O_(n,e,t,r,i,o){let s=Te(null);try{let a=null;i&en.SignalBased&&(a=e[r][ld]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&en.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):Vv(e,a,r,o)}finally{Te(s)}}function vS(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)fi(~i);else{let o=i,s=t[++r],a=t[++r];hD(s,o);let l=e[o];a(2,l)}}}finally{fi(-1)}}function Gc(n,e,t,r,i,o,s,a,l,u,p){let y=e.blueprint.slice();return y[nr]=i,y[oe]=r|4|128|8|64,(u!==null||n&&n[oe]&2048)&&(y[oe]|=2048),zv(y),y[vt]=y[so]=n,y[fn]=t,y[pn]=s||n&&n[pn],y[dt]=a||n&&n[dt],y[no]=l||n&&n[no]||null,y[mn]=o,y[jc]=LD(),y[_c]=p,y[Rv]=u,y[kn]=e.type==2?n[kn]:y,y}function Wc(n,e,t,r,i){let o=n.data[e];if(o===null)o=_S(n,e,t,r,i),dD()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=aD();o.injectorIndex=s===null?-1:s.injectorIndex}return Es(o,!0),o}function _S(n,e,t,r,i){let o=Gv(),s=Wv(),a=s?o:o&&o.parent,l=n.data[e]=IS(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=l),o!==null&&(s?o.child==null&&l.parent!==null&&(o.child=l):o.next===null&&(o.next=l,l.prev=o)),l}function N_(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function R_(n,e,t,r,i){let o=Fr(),s=r&2;try{fi(-1),s&&e.length>$t&&A_(n,e,$t,!1),An(s?2:0,i),t(r,i)}finally{fi(o),An(s?3:1,i)}}function k_(n,e,t){if(Fv(e)){let r=Te(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let l=t[s];a.contentQueries(1,l,s)}}}finally{Te(r)}}}function F_(n,e,t){Hv()&&(AS(n,e,t,nn(t,e)),(t.flags&64)===64&&$_(n,e,t))}function V_(n,e,t=nn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function L_(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=cf(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function cf(n,e,t,r,i,o,s,a,l,u,p){let y=$t+r,b=y+i,w=bS(y,b),N=typeof u=="function"?u():u;return w[fe]={type:n,blueprint:w,template:t,queries:null,viewQuery:a,declTNode:e,data:w.slice().fill(null,y),bindingStartIndex:y,expandoStartIndex:b,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:N,incompleteFirstPass:!1,ssrId:p}}function bS(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:vn);return t}function wS(n,e,t,r){let o=r.get(GD,b_)||t===Nn.ShadowDom,s=n.selectRootElement(e,o);return CS(s),s}function CS(n){xS(n)}var xS=()=>null;function ES(n,e,t,r){let i=H_(e);i.push(t),n.firstCreatePass&&G_(n).push(r,i.length-1)}function IS(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return iD()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Gy(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,l=en.None;Array.isArray(s)?(a=s[0],l=s[1]):a=s;let u=o;if(i!==null){if(!i.hasOwnProperty(o))continue;u=i[o]}n===0?Wy(r,t,u,a,l):Wy(r,t,u,a)}return r}function Wy(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function DS(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],l=null,u=null;for(let p=r;p<i;p++){let y=o[p],b=t?t.get(y):null,w=b?b.inputs:null,N=b?b.outputs:null;l=Gy(0,y.inputs,p,l,w),u=Gy(1,y.outputs,p,u,N);let V=l!==null&&s!==null&&!kh(e)?$S(l,p,s):null;a.push(V)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=u}function SS(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function j_(n,e,t,r,i,o,s,a){let l=nn(e,t),u=e.inputs,p;!a&&u!=null&&(p=u[r])?(lf(n,t,p,r,i),Bc(e)&&MS(t,e.index)):e.type&3?(r=SS(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(l,r,i)):e.type&12}function MS(n,e){let t=kr(e,n);t[oe]&16||(t[oe]|=64)}function B_(n,e,t,r){if(Hv()){let i=r===null?null:{"":-1},o=NS(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&U_(n,e,t,s,i,a),i&&RS(t,r,i)}t.mergedAttrs=hs(t.mergedAttrs,t.attrs)}function U_(n,e,t,r,i,o){for(let u=0;u<r.length;u++)Xd(Ic(t,e),n,r[u].type);FS(t,n.data.length,r.length);for(let u=0;u<r.length;u++){let p=r[u];p.providersResolver&&p.providersResolver(p)}let s=!1,a=!1,l=N_(n,e,r.length,null);for(let u=0;u<r.length;u++){let p=r[u];t.mergedAttrs=hs(t.mergedAttrs,p.hostAttrs),VS(n,t,e,l,p),kS(l,p,i),p.contentQueries!==null&&(t.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(t.flags|=64);let y=p.type.prototype;!s&&(y.ngOnChanges||y.ngOnInit||y.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(y.ngOnChanges||y.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}DS(n,t,o)}function TS(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;PS(s)!=a&&s.push(a),s.push(t,r,o)}}function PS(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function AS(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Bc(t)&&LS(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Ic(t,e),gi(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let l=n.data[a],u=mi(e,n,a,t);if(gi(u,e),s!==null&&US(e,a-i,u,l,t,s),Rr(l)){let p=kr(t.index,e);p[fn]=mi(e,n,a,t)}}}function $_(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=fD();try{fi(o);for(let a=r;a<i;a++){let l=n.data[a],u=e[a];Yd(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&OS(l,u)}}finally{fi(-1),Yd(s)}}function OS(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function NS(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(_I(e,s.selectors,!1))if(r||(r=[]),Rr(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let l=a.length;sh(n,e,l)}else r.unshift(s),sh(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function sh(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function RS(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new he(-301,!1);r.push(e[i],o)}}}function kS(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Rr(e)&&(t[""]=n)}}function FS(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function VS(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=ui(i.type,!0)),s=new pi(o,Rr(i),K);n.blueprint[r]=s,t[r]=s,TS(n,e,r,N_(n,t,i.hostVars,vn),i)}function LS(n,e,t){let r=nn(e,n),i=L_(t),o=n[pn].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=Qc(n,Gc(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function jS(n,e,t,r,i,o){let s=nn(n,e);BS(e[dt],s,o,n.value,t,r,i)}function BS(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Jn(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function US(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let l=s[a++],u=s[a++],p=s[a++],y=s[a++];O_(r,t,l,u,p,y)}}function $S(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function z_(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function q_(n,e){let t=n.contentQueries;if(t!==null){let r=Te(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];qh(o),a.contentQueries(2,e[s],s)}}}finally{Te(r)}}}function Qc(n,e){return n[ms]?n[Vy][hn]=e:n[ms]=e,n[Vy]=e,e}function ah(n,e,t){qh(0);let r=Te(null);try{e(n,t)}finally{Te(r)}}function H_(n){return n[ps]||(n[ps]=[])}function G_(n){return n.cleanup||(n.cleanup=[])}function W_(n,e){let t=n[no],r=t?t.get(Zn,null):null;r&&r.handleError(e)}function lf(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],l=t[o++],u=e[s],p=n.data[s];O_(p,u,r,a,l,i)}}function uf(n,e,t){let r=Uv(e,n);XD(n[dt],r,t)}function zS(n,e){let t=kr(e,n),r=t[fe];qS(r,t);let i=t[nr];i!==null&&t[_c]===null&&(t[_c]=tf(i,t[no])),df(r,t,t[fn])}function qS(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function df(n,e,t){Hh(e);try{let r=n.viewQuery;r!==null&&ah(1,r,t);let i=n.template;i!==null&&R_(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Xn]?.finishViewCreation(n),n.staticContentQueries&&q_(n,e),n.staticViewQueries&&ah(2,n.viewQuery,t);let o=n.components;o!==null&&HS(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[oe]&=-5,Gh()}}function HS(n,e){for(let t=0;t<e.length;t++)zS(n,e[t])}function GS(n,e,t,r){let i=Te(null);try{let o=e.tView,a=n[oe]&4096?4096:16,l=Gc(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];l[xs]=u;let p=n[Xn];return p!==null&&(l[Xn]=p.createEmbeddedView(o)),df(o,l,t),l}finally{Te(i)}}function Qy(n,e){return!e||e.firstChild===null||p_(n)}function WS(n,e,t,r=!0){let i=e[fe];if(nS(i,e,n,t),r){let s=oh(t,n),a=e[dt],l=of(a,n[hi]);l!==null&&eS(i,n[mn],a,e,l,s)}let o=e[_c];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Mc(n,e,t,r,i=!1){for(;t!==null;){let o=e[t.index];o!==null&&r.push(Fn(o)),rr(o)&&QS(o,r);let s=t.type;if(s&8)Mc(n,e,t.child,r);else if(s&32){let a=rf(t,e),l;for(;l=a();)r.push(l)}else if(s&16){let a=M_(e,t);if(Array.isArray(a))r.push(...a);else{let l=ys(e[kn]);Mc(l[fe],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function QS(n,e){for(let t=Ut;t<n.length;t++){let r=n[t],i=r[fe].firstChild;i!==null&&Mc(r[fe],r,i,e)}n[hi]!==n[nr]&&e.push(n[hi])}var Q_=[];function KS(n){return n[di]??YS(n)}function YS(n){let e=Q_.pop()??Object.create(XS);return e.lView=n,e}function JS(n){n.lView[di]!==n&&(n.lView=null,Q_.push(n))}var XS=ue(ee({},G0),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{gs(n.lView)},consumerOnSignalRead(){this.lView[di]=this}}),K_=100;function Y_(n,e=!0,t=0){let r=n[pn],i=r.rendererFactory,o=!1;o||i.begin?.();try{ZS(n,t)}catch(s){throw e&&W_(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function ZS(n,e){ch(n,e);let t=0;for(;Uh(n);){if(t===K_)throw new he(103,!1);t++,ch(n,1)}}function eM(n,e,t,r){let i=e[oe];if((i&256)===256)return;let o=!1;!o&&e[pn].inlineEffectRunner?.flush(),Hh(e);let s=null,a=null;!o&&tM(n)&&(a=KS(e),s=W0(a));try{zv(e),uD(n.bindingStartIndex),t!==null&&R_(n,e,t,2,r);let l=(i&3)===3;if(!o)if(l){let y=n.preOrderCheckHooks;y!==null&&uc(e,y,null)}else{let y=n.preOrderHooks;y!==null&&dc(e,y,0,null),Md(e,0)}if(nM(e),J_(e,0),n.contentQueries!==null&&q_(n,e),!o)if(l){let y=n.contentCheckHooks;y!==null&&uc(e,y)}else{let y=n.contentHooks;y!==null&&dc(e,y,1),Md(e,1)}vS(n,e);let u=n.components;u!==null&&Z_(e,u,0);let p=n.viewQuery;if(p!==null&&ah(2,p,r),!o)if(l){let y=n.viewCheckHooks;y!==null&&uc(e,y)}else{let y=n.viewHooks;y!==null&&dc(e,y,2),Md(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Sd]){for(let y of e[Sd])y();e[Sd]=null}o||(e[oe]&=-73)}catch(l){throw gs(e),l}finally{a!==null&&(Q0(a,s),JS(a)),Gh()}}function tM(n){return n.type!==2}function J_(n,e){for(let t=g_(n);t!==null;t=y_(t))for(let r=Ut;r<t.length;r++){let i=t[r];X_(i,e)}}function nM(n){for(let e=g_(n);e!==null;e=y_(e)){if(!(e[oe]&Lh.HasTransplantedViews))continue;let t=e[ro];for(let r=0;r<t.length;r++){let i=t[r],o=i[vt];XI(i)}}}function rM(n,e,t){let r=kr(e,n);X_(r,t)}function X_(n,e){Bh(n)&&ch(n,e)}function ch(n,e){let r=n[fe],i=n[oe],o=n[di],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&ud(o)),o&&(o.dirty=!1),n[oe]&=-9217,s)eM(r,n,r.template,n[fn]);else if(i&8192){J_(n,1);let a=r.components;a!==null&&Z_(n,a,1)}}function Z_(n,e,t){for(let r=0;r<e.length;r++)rM(n,e[r],t)}function hf(n){for(n[pn].changeDetectionScheduler?.notify();n;){n[oe]|=64;let e=ys(n);if($I(n)&&!e)return n;n=e}return null}var yi=class{get rootNodes(){let e=this._lView,t=e[fe];return Mc(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[fn]}set context(e){this._lView[fn]=e}get destroyed(){return(this._lView[oe]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[vt];if(rr(e)){let t=e[bc],r=t?t.indexOf(this):-1;r>-1&&(ih(e,r),yc(t,r))}this._attachedToViewContainer=!1}D_(this._lView[fe],this._lView)}onDestroy(e){qv(this._lView,e)}markForCheck(){hf(this._cdRefInjectingView||this._lView)}detach(){this._lView[oe]&=-129}reattach(){Kd(this._lView),this._lView[oe]|=128}detectChanges(){this._lView[oe]|=1024,Y_(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new he(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,E_(this._lView[fe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new he(902,!1);this._appRef=e,Kd(this._lView)}},vi=(()=>{class n{static{this.__NG_ELEMENT_ID__=sM}}return n})(),iM=vi,oM=class extends iM{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=GS(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new yi(i)}};function sM(){return Kc(zt(),Ee())}function Kc(n,e){return n.type&4?new oM(e,n,ao(n,e)):null}var s5=new RegExp(`^(\\d+)*(${qD}|${zD})*(.*)`);var aM=()=>null;function Ky(n,e){return aM(n,e)}var lh=class{},uh=class{},Tc=class{};function cM(n){let e=Error(`No component factory found for ${Bt(n)}.`);return e[lM]=n,e}var lM="ngComponent";var dh=class{resolveComponentFactory(e){throw cM(e)}},ff=(()=>{class n{static{this.NULL=new dh}}return n})(),vs=class{},xi=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>uM()}}return n})();function uM(){let n=Ee(),e=zt(),t=kr(e.index,n);return(ci(t)?t:n)[dt]}var dM=(()=>{class n{static{this.\u0275prov=me({token:n,providedIn:"root",factory:()=>null})}}return n})(),Nd={};var Yy=new Set;function pf(n){Yy.has(n)||(Yy.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function Jy(...n){}function hM(){let n=typeof Yn.requestAnimationFrame=="function",e=Yn[n?"requestAnimationFrame":"setTimeout"],t=Yn[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}var yt=class n{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new jt(!1),this.onMicrotaskEmpty=new jt(!1),this.onStable=new jt(!1),this.onError=new jt(!1),typeof Zone>"u")throw new he(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=hM().nativeRequestAnimationFrame,mM(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new he(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new he(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,fM,Jy,Jy);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},fM={};function mf(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function pM(n){n.isCheckStableRunning||n.lastRequestAnimationFrameId!==-1||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Yn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,hh(n),n.isCheckStableRunning=!0,mf(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),hh(n))}function mM(n){let e=()=>{pM(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,s,a)=>{if(gM(a))return t.invokeTask(i,o,s,a);try{return Xy(n),t.invokeTask(i,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Zy(n)}},onInvoke:(t,r,i,o,s,a,l)=>{try{return Xy(n),t.invoke(i,o,s,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),Zy(n)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,hh(n),mf(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function hh(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.lastRequestAnimationFrameId!==-1?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Xy(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Zy(n){n._nesting--,mf(n)}function gM(n){return!Array.isArray(n)||n.length!==1?!1:n[0].data?.__ignore_ng_zone__===!0}var eb=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let t=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of t)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=me({token:n,providedIn:"root",factory:()=>new n})}}return n})();function fh(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Sy(i,a);else if(o==2){let l=a,u=e[++s];r=Sy(r,l+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var ph=class extends ff{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=eo(e);return new Pc(t,this.ngModule)}};function ev(n){let e=[];for(let t in n){if(!n.hasOwnProperty(t))continue;let r=n[t];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:t})}return e}function yM(n){let e=n.toLowerCase();return e==="svg"?GI:e==="math"?WI:null}var mh=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Fc(r);let i=this.injector.get(e,Nd,r);return i!==Nd||t===Nd?i:this.parentInjector.get(e,t,r)}},Pc=class extends Tc{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=ev(e.inputs);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return ev(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=xI(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=Te(null);try{i=i||this.ngModule;let s=i instanceof Rn?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new mh(e,s):e,l=a.get(vs,null);if(l===null)throw new he(407,!1);let u=a.get(dM,null),p=a.get(eb,null),y=a.get(lh,null),b={rendererFactory:l,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:p,changeDetectionScheduler:y},w=l.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",V=r?wS(w,r,this.componentDef.encapsulation,a):x_(w,N,yM(N)),F=512;this.componentDef.signals?F|=4096:this.componentDef.onPush||(F|=16);let W=null;V!==null&&(W=tf(V,a,!0));let ie=cf(0,null,null,1,0,null,null,null,null,null,null),X=Gc(null,ie,null,F,null,null,b,w,a,null,W);Hh(X);let Se,Fe;try{let Me=this.componentDef,M,C=null;Me.findHostDirectiveDefs?(M=[],C=new Map,Me.findHostDirectiveDefs(Me,M,C),M.push(Me)):M=[Me];let E=vM(X,V),T=_M(E,V,Me,M,X,b,w);Fe=$v(ie,$t),V&&CM(w,Me,V,r),t!==void 0&&xM(Fe,this.ngContentSelectors,t),Se=wM(T,Me,M,C,X,[EM]),df(ie,X,null)}finally{Gh()}return new gh(this.componentType,Se,ao(Fe,X),X,Fe)}finally{Te(o)}}},gh=class extends uh{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new yi(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;lf(o[fe],o,i,e,t),this.previousInputValues.set(e,t);let s=kr(this._tNode.index,o);hf(s)}}get injector(){return new li(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function vM(n,e){let t=n[fe],r=$t;return n[r]=e,Wc(t,r,2,"#host",null)}function _M(n,e,t,r,i,o,s){let a=i[fe];bM(r,n,e,s);let l=null;e!==null&&(l=tf(e,i[no]));let u=o.rendererFactory.createRenderer(e,t),p=16;t.signals?p=4096:t.onPush&&(p=64);let y=Gc(i,L_(t),null,p,i[n.index],n,o,u,null,null,l);return a.firstCreatePass&&sh(a,n,r.length-1),Qc(i,y),i[n.index]=y}function bM(n,e,t,r){for(let i of n)e.mergedAttrs=hs(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(fh(e,e.mergedAttrs,!0),t!==null&&P_(r,t,e))}function wM(n,e,t,r,i,o){let s=zt(),a=i[fe],l=nn(s,i);U_(a,i,s,t,null,r);for(let p=0;p<t.length;p++){let y=s.directiveStart+p,b=mi(i,a,y,s);gi(b,i)}$_(a,i,s),l&&gi(l,i);let u=mi(i,a,s.directiveStart+s.componentOffset,s);if(n[fn]=i[fn]=u,o!==null)for(let p of o)p(u,e);return k_(a,s,i),u}function CM(n,e,t,r){if(r)qd(n,t,["ng-version","17.3.12"]);else{let{attrs:i,classes:o}=EI(e.selectors[0]);i&&qd(n,t,i),o&&o.length>0&&T_(n,t,o.join(" "))}}function xM(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function EM(){let n=zt();Yh(Ee()[fe],n)}var co=(()=>{class n{static{this.__NG_ELEMENT_ID__=IM}}return n})();function IM(){let n=zt();return nb(n,Ee())}var DM=co,tb=class extends DM{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ao(this._hostTNode,this._hostLView)}get injector(){return new li(this._hostTNode,this._hostLView)}get parentInjector(){let e=Jh(this._hostTNode,this._hostLView);if(r_(e)){let t=xc(e,this._hostLView),r=Cc(e),i=t[fe].data[r+8];return new li(i,t)}else return new li(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=tv(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ut}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Ky(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,Qy(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!UI(e),a;if(s)a=t;else{let N=t||{};a=N.index,r=N.injector,i=N.projectableNodes,o=N.environmentInjector||N.ngModuleRef}let l=s?e:new Pc(eo(e)),u=r||this.parentInjector;if(!o&&l.ngModule==null){let V=(s?u:this.parentInjector).get(Rn,null);V&&(o=V)}let p=eo(l.componentType??{}),y=Ky(this._lContainer,p?.id??null),b=y?.firstChild??null,w=l.create(u,i,b,o);return this.insertImpl(w.hostView,a,Qy(this._hostTNode,y)),w}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(JI(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[vt],u=new tb(l,l[mn],l[vt]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return WS(s,i,o,r),e.attachToViewContainerRef(),bv(Rd(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=tv(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=ih(this._lContainer,t);r&&(yc(Rd(this._lContainer),t),D_(r[fe],r))}detach(e){let t=this._adjustIndex(e,-1),r=ih(this._lContainer,t);return r&&yc(Rd(this._lContainer),t)!=null?new yi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function tv(n){return n[bc]}function Rd(n){return n[bc]||(n[bc]=[])}function nb(n,e){let t,r=e[n.index];return rr(r)?t=r:(t=z_(r,e,null,n),e[n.index]=t,Qc(e,t)),MM(t,e,n,r),new tb(t,n,e)}function SM(n,e){let t=n[dt],r=t.createComment(""),i=nn(e,n),o=of(t,i);return Sc(t,o,r,lS(t,i),!1),r}var MM=AM,TM=()=>!1;function PM(n,e,t){return TM(n,e,t)}function AM(n,e,t,r){if(n[hi])return;let i;t.type&8?i=Fn(r):i=SM(e,t),n[hi]=i}var yh=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},vh=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)gf(e,t).matches!==null&&this.queries[t].setDirty()}},_h=class{constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=jM(e):this.predicate=e}},bh=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},wh=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,OM(t,o)),this.matchTNodeWithReadOption(e,t,hc(t,e,o,!1,!1))}else r===vi?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,hc(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===gn||i===co||i===vi&&t.type&4)this.addMatch(t.index,-2);else{let o=hc(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function OM(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function NM(n,e){return n.type&11?ao(n,e):n.type&4?Kc(n,e):null}function RM(n,e,t,r){return t===-1?NM(e,n):t===-2?kM(n,e,r):mi(n,n[fe],t,e)}function kM(n,e,t){if(t===gn)return ao(e,n);if(t===vi)return Kc(e,n);if(t===co)return nb(e,n)}function rb(n,e,t,r){let i=e[Xn].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let u=s[l];if(u<0)a.push(null);else{let p=o[u];a.push(RM(e,p,s[l+1],t.metadata.read))}}i.matches=a}return i.matches}function Ch(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=rb(n,e,i,t);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)r.push(s[a/2]);else{let u=o[a+1],p=e[-l];for(let y=Ut;y<p.length;y++){let b=p[y];b[xs]===b[vt]&&Ch(b[fe],b,u,r)}if(p[ro]!==null){let y=p[ro];for(let b=0;b<y.length;b++){let w=y[b];Ch(w[fe],w,u,r)}}}}}return r}function FM(n,e){return n[Xn].queries[e].queryList}function VM(n,e,t){let r=new nh((t&4)===4);return ES(n,e,r,r.destroy),(e[Xn]??=new vh).queries.push(new yh(r))-1}function LM(n,e,t){let r=Ct();return r.firstCreatePass&&(BM(r,new _h(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),VM(r,Ee(),e)}function jM(n){return n.split(",").map(e=>e.trim())}function BM(n,e,t){n.queries===null&&(n.queries=new bh),n.queries.track(new wh(e,t))}function gf(n,e){return n.queries.getByIndex(e)}function UM(n,e){let t=n[fe],r=gf(t,e);return r.crossesNgTemplate?Ch(t,n,e,[]):rb(t,n,r,e)}function $M(n){return typeof n=="function"&&n[ld]!==void 0}function ib(n){return $M(n)&&typeof n.set=="function"}function zM(n){return Object.getPrototypeOf(n.prototype).constructor}function Nt(n){let e=zM(n.type),t=!0,r=[n];for(;e;){let i;if(Rr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new he(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=ac(n.inputs),s.inputTransforms=ac(n.inputTransforms),s.declaredInputs=ac(n.declaredInputs),s.outputs=ac(n.outputs);let a=i.hostBindings;a&&QM(n,a);let l=i.viewQuery,u=i.contentQueries;if(l&&GM(n,l),u&&WM(n,u),qM(n,i),$1(n.outputs,i.outputs),Rr(i)&&i.data.animation){let p=n.data;p.animation=(p.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Nt&&(t=!1)}}e=Object.getPrototypeOf(e)}HM(r)}function qM(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function HM(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=hs(i.hostAttrs,t=hs(t,i.hostAttrs))}}function ac(n){return n===Zi?{}:n===Zt?[]:n}function GM(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function WM(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function QM(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}var io=class{};var Ac=class extends io{constructor(e){super(),this.componentFactoryResolver=new ph(this),this.instance=null;let t=new fs([...e.providers,{provide:io,useValue:this},{provide:ff,useValue:this.componentFactoryResolver}],e.parent||Vh(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function KM(n,e,t=null){return new Ac({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var Yc=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Je(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ob(n){return JM(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function YM(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function JM(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function yf(n,e,t){return n[e]=t}function tr(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function vf(n,e,t,r){let i=tr(n,e,t);return tr(n,e+1,r)||i}function sb(n,e,t,r,i){let o=vf(n,e,t,r);return tr(n,e+2,i)||o}function XM(n){return(n.flags&32)===32}function ZM(n,e,t,r,i,o,s,a,l){let u=e.consts,p=Wc(e,n,4,s||null,wc(u,a));B_(e,t,p,wc(u,l)),Yh(e,p);let y=p.tView=cf(2,p,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,p),y.queries=e.queries.embeddedTView(p)),p}function U(n,e,t,r,i,o,s,a){let l=Ee(),u=Ct(),p=n+$t,y=u.firstCreatePass?ZM(p,u,l,e,t,r,i,o,s):u.data[p];Es(y,!1);let b=eT(u,l,y,n);Qh()&&sf(u,l,b,y),gi(b,l);let w=z_(b,l,b,y);return l[p]=w,Qc(l,w),PM(w,y,l),jh(y)&&F_(u,l,y),s!=null&&V_(l,y,a),U}var eT=tT;function tT(n,e,t,r){return Kh(!0),e[dt].createComment("")}function Ds(n,e,t,r){let i=Ee(),o=$c();if(tr(i,o,e)){let s=Ct(),a=Wh();jS(a,i,n,e,t,r)}return Ds}function nT(n,e,t,r){return tr(n,$c(),t)?e+Jn(t)+r:vn}function rT(n,e,t,r,i,o){let s=Qv(),a=vf(n,s,t,i);return zh(2),a?e+Jn(t)+r+Jn(i)+o:vn}function iT(n,e,t,r,i,o,s,a){let l=Qv(),u=sb(n,l,t,i,s);return zh(3),u?e+Jn(t)+r+Jn(i)+o+Jn(s)+a:vn}function cc(n,e){return n<<17|e<<2}function _i(n){return n>>17&32767}function oT(n){return(n&2)==2}function sT(n,e){return n&131071|e<<17}function xh(n){return n|2}function oo(n){return(n&131068)>>2}function kd(n,e){return n&-131069|e<<2}function aT(n){return(n&1)===1}function Eh(n){return n|1}function cT(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=_i(s),l=oo(s);n[r]=t;let u=!1,p;if(Array.isArray(t)){let y=t;p=y[1],(p===null||ws(y,p)>0)&&(u=!0)}else p=t;if(i)if(l!==0){let b=_i(n[a+1]);n[r+1]=cc(b,a),b!==0&&(n[b+1]=kd(n[b+1],r)),n[a+1]=sT(n[a+1],r)}else n[r+1]=cc(a,0),a!==0&&(n[a+1]=kd(n[a+1],r)),a=r;else n[r+1]=cc(l,0),a===0?a=r:n[l+1]=kd(n[l+1],r),l=r;u&&(n[r+1]=xh(n[r+1])),nv(n,p,r,!0),nv(n,p,r,!1),lT(e,p,n,r,o),s=cc(a,l),o?e.classBindings=s:e.styleBindings=s}function lT(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&ws(o,e)>=0&&(t[r+1]=Eh(t[r+1]))}function nv(n,e,t,r){let i=n[t+1],o=e===null,s=r?_i(i):oo(i),a=!1;for(;s!==0&&(a===!1||o);){let l=n[s],u=n[s+1];uT(l,e)&&(a=!0,n[s+1]=r?Eh(u):xh(u)),s=r?_i(u):oo(u)}a&&(n[t+1]=r?xh(i):Eh(i))}function uT(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?ws(n,e)>=0:!1}function D(n,e,t){let r=Ee(),i=$c();if(tr(r,i,e)){let o=Ct(),s=Wh();j_(o,s,r,n,e,r[dt],t,!1)}return D}function rv(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";lf(n,t,o[s],s,r)}function _n(n,e,t){return ab(n,e,t,!1),_n}function _e(n,e){return ab(n,e,null,!0),_e}function ab(n,e,t,r){let i=Ee(),o=Ct(),s=zh(2);if(o.firstUpdatePass&&hT(o,n,s,r),e!==vn&&tr(i,s,e)){let a=o.data[Fr()];yT(o,a,i,i[dt],n,i[s+1]=vT(e,t),r,s)}}function dT(n,e){return e>=n.expandoStartIndex}function hT(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Fr()],s=dT(n,t);_T(o,r)&&e===null&&!s&&(e=!1),e=fT(i,o,e,r),cT(i,o,e,t,s,r)}}function fT(n,e,t,r){let i=pD(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Fd(null,n,e,t,r),t=_s(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Fd(i,n,e,t,r),o===null){let l=pT(n,e,r);l!==void 0&&Array.isArray(l)&&(l=Fd(null,n,e,l[1],r),l=_s(l,e.attrs,r),mT(n,e,r,l))}else o=gT(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function pT(n,e,t){let r=t?e.classBindings:e.styleBindings;if(oo(r)!==0)return n[_i(r)]}function mT(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[_i(i)]=r}function gT(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=_s(r,s,t)}return _s(r,e.attrs,t)}function Fd(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=_s(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function _s(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),uI(n,s,t?!0:e[++o]))}return n===void 0?null:n}function yT(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let l=n.data,u=l[a+1],p=aT(u)?iv(l,e,t,i,oo(u),s):void 0;if(!Oc(p)){Oc(o)||oT(u)&&(o=iv(l,null,t,i,a,s));let y=Uv(Fr(),t);gS(r,s,y,i,o)}}function iv(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let l=n[i],u=Array.isArray(l),p=u?l[1]:l,y=p===null,b=t[i+1];b===vn&&(b=y?Zt:void 0);let w=y?Id(b,r):p===r?b:void 0;if(u&&!Oc(w)&&(w=Id(l,r)),Oc(w)&&(a=w,s))return a;let N=n[i+1];i=s?_i(N):oo(N)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=Id(l,r))}return a}function Oc(n){return n!==void 0}function vT(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Bt(qc(n)))),n}function _T(n,e){return(n.flags&(e?8:16))!==0}function bT(n,e,t,r,i,o){let s=e.consts,a=wc(s,i),l=Wc(e,n,2,r,a);return B_(e,t,l,wc(s,o)),l.attrs!==null&&fh(l,l.attrs,!1),l.mergedAttrs!==null&&fh(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function f(n,e,t,r){let i=Ee(),o=Ct(),s=$t+n,a=i[dt],l=o.firstCreatePass?bT(s,o,i,e,t,r):o.data[s],u=wT(o,i,l,a,e,n);i[s]=u;let p=jh(l);return Es(l,!0),P_(a,u,l),!XM(l)&&Qh()&&sf(o,i,u,l),tD()===0&&gi(u,i),nD(),p&&(F_(o,i,l),k_(o,l,i)),r!==null&&V_(i,l),f}function h(){let n=zt();Wv()?cD():(n=n.parent,Es(n,!1));let e=n;oD(e)&&sD(),rD();let t=Ct();return t.firstCreatePass&&(Yh(t,n),Fv(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&wD(e)&&rv(t,e,Ee(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&CD(e)&&rv(t,e,Ee(),e.stylesWithoutHost,!1),h}function xe(n,e,t,r){return f(n,e,t,r),h(),xe}var wT=(n,e,t,r,i,o)=>(Kh(!0),x_(r,i,yD()));function te(){return Ee()}var ai=void 0;function CT(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var xT=["en",[["a","p"],["AM","PM"],ai],[["AM","PM"],ai,ai],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ai,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ai,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ai,"{1} 'at' {0}",ai],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",CT],Vd={};function qt(n){let e=ET(n),t=ov(e);if(t)return t;let r=e.split("-")[0];if(t=ov(r),t)return t;if(r==="en")return xT;throw new he(701,!1)}function ov(n){return n in Vd||(Vd[n]=Yn.ng&&Yn.ng.common&&Yn.ng.common.locales&&Yn.ng.common.locales[n]),Vd[n]}var Qe=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Qe||{});function ET(n){return n.toLowerCase().replace(/_/g,"-")}var Nc="en-US";var IT=Nc;function DT(n){typeof n=="string"&&(IT=n.toLowerCase().replace(/_/g,"-"))}function j(n,e,t,r){let i=Ee(),o=Ct(),s=zt();return cb(o,i,i[dt],s,n,e,r),j}function ST(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[ps],l=i[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function cb(n,e,t,r,i,o,s){let a=jh(r),u=n.firstCreatePass&&G_(n),p=e[fn],y=H_(e),b=!0;if(r.type&3||s){let V=nn(r,e),F=s?s(V):V,W=y.length,ie=s?Se=>s(Fn(Se[r.index])):r.index,X=null;if(!s&&a&&(X=ST(n,e,i,r.index)),X!==null){let Se=X.__ngLastListenerFn__||X;Se.__ngNextListenerFn__=o,X.__ngLastListenerFn__=o,b=!1}else{o=av(r,e,p,o,!1);let Se=t.listen(F,i,o);y.push(o,Se),u&&u.push(i,ie,W,W+1)}}else o=av(r,e,p,o,!1);let w=r.outputs,N;if(b&&w!==null&&(N=w[i])){let V=N.length;if(V)for(let F=0;F<V;F+=2){let W=N[F],ie=N[F+1],Fe=e[W][ie].subscribe(o),Me=y.length;y.push(o,Fe),u&&u.push(i,r.index,Me,-(Me+1))}}}function sv(n,e,t,r){let i=Te(null);try{return An(6,e,t),t(r)!==!1}catch(o){return W_(n,o),!1}finally{An(7,e,t),Te(i)}}function av(n,e,t,r,i){return function o(s){if(s===Function)return r;let a=n.componentOffset>-1?kr(n.index,e):e;hf(a);let l=sv(e,t,r,s),u=o.__ngNextListenerFn__;for(;u;)l=sv(e,t,u,s)&&l,u=u.__ngNextListenerFn__;return i&&l===!1&&s.preventDefault(),l}}function I(n=1){return gD(n)}function _f(n,e,t){LM(n,e,t)}function bf(n){let e=Ee(),t=Ct(),r=Kv();qh(r+1);let i=gf(t,r);if(n.dirty&&YI(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=UM(e,r);n.reset(o,kD),n.notifyOnChanges()}return!0}return!1}function wf(){return FM(Ee(),Kv())}function MT(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function ir(n){let e=lD();return Uc(e,$t+n)}function g(n,e=""){let t=Ee(),r=Ct(),i=n+$t,o=r.firstCreatePass?Wc(r,i,1,e,null):r.data[i],s=TT(r,t,o,e,n);t[i]=s,Qh()&&sf(r,t,s,o),Es(o,!1)}var TT=(n,e,t,r,i)=>(Kh(!0),JD(e[dt],r));function H(n){return q("",n,""),H}function q(n,e,t){let r=Ee(),i=nT(r,n,e,t);return i!==vn&&uf(r,Fr(),i),q}function rn(n,e,t,r,i){let o=Ee(),s=rT(o,n,e,t,r,i);return s!==vn&&uf(o,Fr(),s),rn}function Cf(n,e,t,r,i,o,s){let a=Ee(),l=iT(a,n,e,t,r,i,o,s);return l!==vn&&uf(a,Fr(),l),Cf}function Y(n,e,t){ib(e)&&(e=e());let r=Ee(),i=$c();if(tr(r,i,e)){let o=Ct(),s=Wh();j_(o,s,r,n,e,r[dt],t,!1)}return Y}function Z(n,e){let t=ib(n);return t&&n.set(e),t}function J(n,e){let t=Ee(),r=Ct(),i=zt();return cb(r,t,t[dt],i,n,e),J}function PT(n,e,t){let r=Ct();if(r.firstCreatePass){let i=Rr(n);Ih(t,r.data,r.blueprint,i,!0),Ih(e,r.data,r.blueprint,i,!1)}}function Ih(n,e,t,r,i){if(n=St(n),Array.isArray(n))for(let o=0;o<n.length;o++)Ih(n[o],e,t,r,i);else{let o=Ct(),s=Ee(),a=zt(),l=to(n)?n:St(n.provide),u=Ov(n),p=a.providerIndexes&1048575,y=a.directiveStart,b=a.providerIndexes>>20;if(to(n)||!n.multi){let w=new pi(u,i,K),N=jd(l,e,i?p:p+b,y);N===-1?(Xd(Ic(a,s),o,l),Ld(o,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(w),s.push(w)):(t[N]=w,s[N]=w)}else{let w=jd(l,e,p+b,y),N=jd(l,e,p,p+b),V=w>=0&&t[w],F=N>=0&&t[N];if(i&&!F||!i&&!V){Xd(Ic(a,s),o,l);let W=NT(i?OT:AT,t.length,i,r,u);!i&&F&&(t[N].providerFactory=W),Ld(o,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(W),s.push(W)}else{let W=lb(t[i?N:w],u,!i&&r);Ld(o,n,w>-1?w:N,W)}!i&&r&&F&&t[N].componentProviders++}}}function Ld(n,e,t,r){let i=to(e),o=NI(e);if(i||o){let l=(o?St(e.useClass):e).prototype.ngOnDestroy;if(l){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let p=u.indexOf(t);p===-1?u.push(t,[r,l]):u[p+1].push(r,l)}else u.push(t,l)}}}function lb(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function jd(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function AT(n,e,t,r){return Dh(this.multi,[])}function OT(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=mi(t,t[fe],this.providerFactory.index,r);o=a.slice(0,s),Dh(i,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],Dh(i,o);return o}function Dh(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function NT(n,e,t,r,i){let o=new pi(n,t,K);return o.multi=[],o.index=e,o.componentProviders=0,lb(o,i,r&&!t),o}function Vn(n,e=[]){return t=>{t.providersResolver=(r,i)=>PT(r,i?i(n):n,e)}}var RT=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Tv(!1,t.type),i=r.length>0?KM([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=me({token:n,providedIn:"environment",factory:()=>new n(se(Rn))})}}return n})();function Le(n){pf("NgStandalone"),n.getStandaloneInjector=e=>e.get(RT).getOrCreateStandaloneInjector(n)}function xf(n,e){let t=n[e];return t===vn?void 0:t}function kT(n,e,t,r,i,o){let s=e+t;return tr(n,s,i)?yf(n,s+1,o?r.call(o,i):r(i)):xf(n,s+1)}function FT(n,e,t,r,i,o,s){let a=e+t;return vf(n,a,i,o)?yf(n,a+2,s?r.call(s,i,o):r(i,o)):xf(n,a+2)}function VT(n,e,t,r,i,o,s,a){let l=e+t;return sb(n,l,i,o,s)?yf(n,l+3,a?r.call(a,i,o,s):r(i,o,s)):xf(n,l+3)}function ae(n,e){let t=Ct(),r,i=n+$t;t.firstCreatePass?(r=LT(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=ui(r.type,!0)),s,a=Ot(K);try{let l=Ec(!1),u=o();return Ec(l),MT(t,Ee(),i,u),u}finally{Ot(a)}}function LT(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Ss(n,e,t){let r=n+$t,i=Ee(),o=Uc(i,r);return Ef(i,r)?kT(i,$h(),e,o.transform,t,o):o.transform(t)}function ge(n,e,t,r){let i=n+$t,o=Ee(),s=Uc(o,i);return Ef(o,i)?FT(o,$h(),e,s.transform,t,r,s):s.transform(t,r)}function ub(n,e,t,r,i){let o=n+$t,s=Ee(),a=Uc(s,o);return Ef(s,o)?VT(s,$h(),e,a.transform,t,r,i,a):a.transform(t,r,i)}function Ef(n,e){return n[fe].data[e].pure}function or(n,e){return Kc(n,e)}var db=new ye("");function Ms(n){return!!n&&typeof n.then=="function"}function hb(n){return!!n&&typeof n.subscribe=="function"}var jT=new ye(""),fb=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=$e(jT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(Ms(o))t.push(o);else if(hb(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),pb=new ye("");function BT(){Y0(()=>{throw new he(600,!1)})}function UT(n){return n.isBoundToModule}function $T(n,e,t){try{let r=t();return Ms(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var Jc=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=$e(h_),this.afterRenderEffectManager=$e(eb),this.externalTestViews=new Set,this.beforeRender=new Tn,this.afterTick=new Tn,this.componentTypes=[],this.components=[],this.isStable=$e(Yc).hasPendingTasks.pipe(ft(t=>!t)),this._injector=$e(Rn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Tc;if(!this._injector.get(fb).done){let b=!i&&SI(t),w=!1;throw new he(405,w)}let s;i?s=t:s=this._injector.get(ff).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=UT(s)?void 0:this._injector.get(io),l=r||s.selector,u=s.create(zc.NULL,[],l,a),p=u.location.nativeElement,y=u.injector.get(db,null);return y?.registerApplication(p),u.onDestroy(()=>{this.detachView(u.hostView),Bd(this.components,u),y?.unregisterApplication(p)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(t){if(this._runningTick)throw new he(101,!1);let r=Te(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(t)}catch(i){this.internalErrorHandler(i)}finally{this.afterTick.next(),this._runningTick=!1,Te(r)}}detectChangesInAttachedViews(t){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===K_)throw new he(103,!1);if(t){let o=r===0;this.beforeRender.next(o);for(let{_lView:s,notifyErrorHandler:a}of this._views)zT(s,o,a)}if(r++,i.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Sh(o))&&(i.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Sh(o))))break}}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Bd(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(pb,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Bd(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new he(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Bd(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function zT(n,e,t){!e&&!Sh(n)||qT(n,t,e)}function Sh(n){return Uh(n)}function qT(n,e,t){let r;t?(r=0,n[oe]|=1024):n[oe]&64?r=0:r=1,Y_(n,e,r)}var HT=(()=>{class n{constructor(){this.zone=$e(yt),this.applicationRef=$e(Jc)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function GT(n){return[{provide:yt,useFactory:n},{provide:ds,multi:!0,useFactory:()=>{let e=$e(HT,{optional:!0});return()=>e.initialize()}},{provide:ds,multi:!0,useFactory:()=>{let e=$e(YT);return()=>{e.initialize()}}},{provide:h_,useFactory:WT}]}function WT(){let n=$e(yt),e=$e(Zn);return t=>n.runOutsideAngular(()=>e.handleError(t))}function QT(n){let e=GT(()=>new yt(KT(n)));return Vc([[],e])}function KT(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var YT=(()=>{class n{constructor(){this.subscription=new Pt,this.initialized=!1,this.zone=$e(yt),this.pendingTasks=$e(Yc)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{yt.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{yt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function JT(){return typeof $localize<"u"&&$localize.locale||Nc}var Ts=new ye("",{providedIn:"root",factory:()=>$e(Ts,Ce.Optional|Ce.SkipSelf)||JT()});var mb=new ye("");var pc=null;function XT(n=[],e){return zc.create({name:e,providers:[{provide:Lc,useValue:"platform"},{provide:mb,useValue:new Set([()=>pc=null])},...n]})}function ZT(n=[]){if(pc)return pc;let e=XT(n);return pc=e,BT(),eP(e),e}function eP(n){n.get(Zh,null)?.forEach(t=>t())}var Xc=(()=>{class n{static{this.__NG_ELEMENT_ID__=tP}}return n})();function tP(n){return nP(zt(),Ee(),(n&16)===16)}function nP(n,e,t){if(Bc(n)&&!t){let r=kr(n.index,e);return new yi(r,r)}else if(n.type&47){let r=e[kn];return new yi(r,e)}return null}var Mh=class{constructor(){}supports(e){return ob(e)}create(e){return new Th(e)}},rP=(n,e)=>e,Th=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||rP}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<cv(r,i,o)?t:r,a=cv(s,i,o),l=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,p=l-i;if(u!=p){for(let b=0;b<u;b++){let w=b<o.length?o[b]:o[b]=0,N=w+b;p<=N&&N<u&&(o[b]=w+1)}let y=s.previousIndex;o[y]=p-u}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!ob(e))throw new he(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,YM(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Ph(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Rc),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Rc),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Ph=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Ah=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Rc=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Ah,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function cv(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function lv(){return new If([new Mh])}var If=(()=>{class n{static{this.\u0275prov=me({token:n,providedIn:"root",factory:lv})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||lv()),deps:[[n,new sI,new _v]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new he(901,!1)}}return n})();function gb(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=ZT(r),o=[QT(),...t||[]],a=new Ac({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get(yt);return l.run(()=>{a.resolveInjectorInitializers();let u=a.get(Zn,null),p;l.runOutsideAngular(()=>{p=l.onError.subscribe({next:w=>{u.handleError(w)}})});let y=()=>a.destroy(),b=i.get(mb);return b.add(y),a.onDestroy(()=>{p.unsubscribe(),b.delete(y)}),$T(u,l,()=>{let w=a.get(fb);return w.runInitializers(),w.donePromise.then(()=>{let N=a.get(Ts,Nc);DT(N||Nc);let V=a.get(Jc);return e!==void 0&&V.bootstrap(e),V})})})}catch(e){return Promise.reject(e)}}function Zc(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var Cb=null;function uo(){return Cb}function xb(n){Cb??=n}var cl=class{};var Ln=new ye("");var Eb=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(Eb||{});var Mt=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Mt||{}),Re=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Re||{}),Ht=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Ht||{}),Gt={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function iP(n){return qt(n)[Qe.LocaleId]}function oP(n,e,t){let r=qt(n),i=[r[Qe.DayPeriodsFormat],r[Qe.DayPeriodsStandalone]],o=on(i,e);return on(o,t)}function sP(n,e,t){let r=qt(n),i=[r[Qe.DaysFormat],r[Qe.DaysStandalone]],o=on(i,e);return on(o,t)}function aP(n,e,t){let r=qt(n),i=[r[Qe.MonthsFormat],r[Qe.MonthsStandalone]],o=on(i,e);return on(o,t)}function cP(n,e){let r=qt(n)[Qe.Eras];return on(r,e)}function el(n,e){let t=qt(n);return on(t[Qe.DateFormat],e)}function tl(n,e){let t=qt(n);return on(t[Qe.TimeFormat],e)}function nl(n,e){let r=qt(n)[Qe.DateTimeFormat];return on(r,e)}function ar(n,e){let t=qt(n),r=t[Qe.NumberSymbols][e];if(typeof r>"u"){if(e===Gt.CurrencyDecimal)return t[Qe.NumberSymbols][Gt.Decimal];if(e===Gt.CurrencyGroup)return t[Qe.NumberSymbols][Gt.Group]}return r}function lP(n,e){return qt(n)[Qe.NumberFormats][e]}function Ib(n){if(!n[Qe.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Qe.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function uP(n){let e=qt(n);return Ib(e),(e[Qe.ExtraData][2]||[]).map(r=>typeof r=="string"?Df(r):[Df(r[0]),Df(r[1])])}function dP(n,e,t){let r=qt(n);Ib(r);let i=[r[Qe.ExtraData][0],r[Qe.ExtraData][1]],o=on(i,e)||[];return on(o,t)||[]}function on(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function Df(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var hP=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,rl={},fP=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,cr=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(cr||{}),Ae=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(Ae||{}),Pe=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(Pe||{});function pP(n,e,t,r){let i=xP(n);e=sr(t,e)||e;let s=[],a;for(;e;)if(a=fP.exec(e),a){s=s.concat(a.slice(1));let p=s.pop();if(!p)break;e=p}else{s.push(e);break}let l=i.getTimezoneOffset();r&&(l=Sb(r,l),i=CP(i,r,!0));let u="";return s.forEach(p=>{let y=bP(p);u+=y?y(i,t,l):p==="''"?"'":p.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function ll(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function sr(n,e){let t=iP(n);if(rl[t]??={},rl[t][e])return rl[t][e];let r="";switch(e){case"shortDate":r=el(n,Ht.Short);break;case"mediumDate":r=el(n,Ht.Medium);break;case"longDate":r=el(n,Ht.Long);break;case"fullDate":r=el(n,Ht.Full);break;case"shortTime":r=tl(n,Ht.Short);break;case"mediumTime":r=tl(n,Ht.Medium);break;case"longTime":r=tl(n,Ht.Long);break;case"fullTime":r=tl(n,Ht.Full);break;case"short":let i=sr(n,"shortTime"),o=sr(n,"shortDate");r=il(nl(n,Ht.Short),[i,o]);break;case"medium":let s=sr(n,"mediumTime"),a=sr(n,"mediumDate");r=il(nl(n,Ht.Medium),[s,a]);break;case"long":let l=sr(n,"longTime"),u=sr(n,"longDate");r=il(nl(n,Ht.Long),[l,u]);break;case"full":let p=sr(n,"fullTime"),y=sr(n,"fullDate");r=il(nl(n,Ht.Full),[p,y]);break}return r&&(rl[t][e]=r),r}function il(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function bn(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function mP(n,e){return bn(n,3).substring(0,e)}function et(n,e,t=0,r=!1,i=!1){return function(o,s){let a=gP(n,o);if((t>0||a>-t)&&(a+=t),n===Ae.Hours)a===0&&t===-12&&(a=12);else if(n===Ae.FractionalSeconds)return mP(a,e);let l=ar(s,Gt.MinusSign);return bn(a,e,l,r,i)}}function gP(n,e){switch(n){case Ae.FullYear:return e.getFullYear();case Ae.Month:return e.getMonth();case Ae.Date:return e.getDate();case Ae.Hours:return e.getHours();case Ae.Minutes:return e.getMinutes();case Ae.Seconds:return e.getSeconds();case Ae.FractionalSeconds:return e.getMilliseconds();case Ae.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function je(n,e,t=Mt.Format,r=!1){return function(i,o){return yP(i,o,n,e,t,r)}}function yP(n,e,t,r,i,o){switch(t){case Pe.Months:return aP(e,i,r)[n.getMonth()];case Pe.Days:return sP(e,i,r)[n.getDay()];case Pe.DayPeriods:let s=n.getHours(),a=n.getMinutes();if(o){let u=uP(e),p=dP(e,i,r),y=u.findIndex(b=>{if(Array.isArray(b)){let[w,N]=b,V=s>=w.hours&&a>=w.minutes,F=s<N.hours||s===N.hours&&a<N.minutes;if(w.hours<N.hours){if(V&&F)return!0}else if(V||F)return!0}else if(b.hours===s&&b.minutes===a)return!0;return!1});if(y!==-1)return p[y]}return oP(e,i,r)[s<12?0:1];case Pe.Eras:return cP(e,r)[n.getFullYear()<=0?0:1];default:let l=t;throw new Error(`unexpected translation type ${l}`)}}function ol(n){return function(e,t,r){let i=-1*r,o=ar(t,Gt.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case cr.Short:return(i>=0?"+":"")+bn(s,2,o)+bn(Math.abs(i%60),2,o);case cr.ShortGMT:return"GMT"+(i>=0?"+":"")+bn(s,1,o);case cr.Long:return"GMT"+(i>=0?"+":"")+bn(s,2,o)+":"+bn(Math.abs(i%60),2,o);case cr.Extended:return r===0?"Z":(i>=0?"+":"")+bn(s,2,o)+":"+bn(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var vP=0,al=4;function _P(n){let e=ll(n,vP,1).getDay();return ll(n,0,1+(e<=al?al:al+7)-e)}function Db(n){let e=n.getDay(),t=e===0?-3:al-e;return ll(n.getFullYear(),n.getMonth(),n.getDate()+t)}function Sf(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=Db(t),s=_P(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return bn(i,n,ar(r,Gt.MinusSign))}}function sl(n,e=!1){return function(t,r){let o=Db(t).getFullYear();return bn(o,n,ar(r,Gt.MinusSign),e)}}var Mf={};function bP(n){if(Mf[n])return Mf[n];let e;switch(n){case"G":case"GG":case"GGG":e=je(Pe.Eras,Re.Abbreviated);break;case"GGGG":e=je(Pe.Eras,Re.Wide);break;case"GGGGG":e=je(Pe.Eras,Re.Narrow);break;case"y":e=et(Ae.FullYear,1,0,!1,!0);break;case"yy":e=et(Ae.FullYear,2,0,!0,!0);break;case"yyy":e=et(Ae.FullYear,3,0,!1,!0);break;case"yyyy":e=et(Ae.FullYear,4,0,!1,!0);break;case"Y":e=sl(1);break;case"YY":e=sl(2,!0);break;case"YYY":e=sl(3);break;case"YYYY":e=sl(4);break;case"M":case"L":e=et(Ae.Month,1,1);break;case"MM":case"LL":e=et(Ae.Month,2,1);break;case"MMM":e=je(Pe.Months,Re.Abbreviated);break;case"MMMM":e=je(Pe.Months,Re.Wide);break;case"MMMMM":e=je(Pe.Months,Re.Narrow);break;case"LLL":e=je(Pe.Months,Re.Abbreviated,Mt.Standalone);break;case"LLLL":e=je(Pe.Months,Re.Wide,Mt.Standalone);break;case"LLLLL":e=je(Pe.Months,Re.Narrow,Mt.Standalone);break;case"w":e=Sf(1);break;case"ww":e=Sf(2);break;case"W":e=Sf(1,!0);break;case"d":e=et(Ae.Date,1);break;case"dd":e=et(Ae.Date,2);break;case"c":case"cc":e=et(Ae.Day,1);break;case"ccc":e=je(Pe.Days,Re.Abbreviated,Mt.Standalone);break;case"cccc":e=je(Pe.Days,Re.Wide,Mt.Standalone);break;case"ccccc":e=je(Pe.Days,Re.Narrow,Mt.Standalone);break;case"cccccc":e=je(Pe.Days,Re.Short,Mt.Standalone);break;case"E":case"EE":case"EEE":e=je(Pe.Days,Re.Abbreviated);break;case"EEEE":e=je(Pe.Days,Re.Wide);break;case"EEEEE":e=je(Pe.Days,Re.Narrow);break;case"EEEEEE":e=je(Pe.Days,Re.Short);break;case"a":case"aa":case"aaa":e=je(Pe.DayPeriods,Re.Abbreviated);break;case"aaaa":e=je(Pe.DayPeriods,Re.Wide);break;case"aaaaa":e=je(Pe.DayPeriods,Re.Narrow);break;case"b":case"bb":case"bbb":e=je(Pe.DayPeriods,Re.Abbreviated,Mt.Standalone,!0);break;case"bbbb":e=je(Pe.DayPeriods,Re.Wide,Mt.Standalone,!0);break;case"bbbbb":e=je(Pe.DayPeriods,Re.Narrow,Mt.Standalone,!0);break;case"B":case"BB":case"BBB":e=je(Pe.DayPeriods,Re.Abbreviated,Mt.Format,!0);break;case"BBBB":e=je(Pe.DayPeriods,Re.Wide,Mt.Format,!0);break;case"BBBBB":e=je(Pe.DayPeriods,Re.Narrow,Mt.Format,!0);break;case"h":e=et(Ae.Hours,1,-12);break;case"hh":e=et(Ae.Hours,2,-12);break;case"H":e=et(Ae.Hours,1);break;case"HH":e=et(Ae.Hours,2);break;case"m":e=et(Ae.Minutes,1);break;case"mm":e=et(Ae.Minutes,2);break;case"s":e=et(Ae.Seconds,1);break;case"ss":e=et(Ae.Seconds,2);break;case"S":e=et(Ae.FractionalSeconds,1);break;case"SS":e=et(Ae.FractionalSeconds,2);break;case"SSS":e=et(Ae.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=ol(cr.Short);break;case"ZZZZZ":e=ol(cr.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=ol(cr.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=ol(cr.Long);break;default:return null}return Mf[n]=e,e}function Sb(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function wP(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function CP(n,e,t){let r=t?-1:1,i=n.getTimezoneOffset(),o=Sb(e,i);return wP(n,r*(o-i))}function xP(n){if(yb(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return ll(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(hP))return EP(r)}let e=new Date(n);if(!yb(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function EP(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,l=Number(n[6]||0),u=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,l,u),e}function yb(n){return n instanceof Date&&!isNaN(n.valueOf())}var IP=/^(\d+)?\.((\d+)(-(\d+))?)?$/,vb=22,ul=".",Ps="0",DP=";",SP=",",Tf="#";function MP(n,e,t,r,i,o,s=!1){let a="",l=!1;if(!isFinite(n))a=ar(t,Gt.Infinity);else{let u=OP(n);s&&(u=AP(u));let p=e.minInt,y=e.minFrac,b=e.maxFrac;if(o){let ie=o.match(IP);if(ie===null)throw new Error(`${o} is not a valid digit info`);let X=ie[1],Se=ie[3],Fe=ie[5];X!=null&&(p=Pf(X)),Se!=null&&(y=Pf(Se)),Fe!=null?b=Pf(Fe):Se!=null&&y>b&&(b=y)}NP(u,y,b);let w=u.digits,N=u.integerLen,V=u.exponent,F=[];for(l=w.every(ie=>!ie);N<p;N++)w.unshift(0);for(;N<0;N++)w.unshift(0);N>0?F=w.splice(N,w.length):(F=w,w=[0]);let W=[];for(w.length>=e.lgSize&&W.unshift(w.splice(-e.lgSize,w.length).join(""));w.length>e.gSize;)W.unshift(w.splice(-e.gSize,w.length).join(""));w.length&&W.unshift(w.join("")),a=W.join(ar(t,r)),F.length&&(a+=ar(t,i)+F.join("")),V&&(a+=ar(t,Gt.Exponential)+"+"+V)}return n<0&&!l?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function TP(n,e,t){let r=lP(e,Eb.Decimal),i=PP(r,ar(e,Gt.MinusSign));return MP(n,i,e,Gt.Group,Gt.Decimal,t)}function PP(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(DP),i=r[0],o=r[1],s=i.indexOf(ul)!==-1?i.split(ul):[i.substring(0,i.lastIndexOf(Ps)+1),i.substring(i.lastIndexOf(Ps)+1)],a=s[0],l=s[1]||"";t.posPre=a.substring(0,a.indexOf(Tf));for(let p=0;p<l.length;p++){let y=l.charAt(p);y===Ps?t.minFrac=t.maxFrac=p+1:y===Tf?t.maxFrac=p+1:t.posSuf+=y}let u=a.split(SP);if(t.gSize=u[1]?u[1].length:0,t.lgSize=u[2]||u[1]?(u[2]||u[1]).length:0,o){let p=i.length-t.posPre.length-t.posSuf.length,y=o.indexOf(Tf);t.negPre=o.substring(0,y).replace(/'/g,""),t.negSuf=o.slice(y+p).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function AP(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function OP(n){let e=Math.abs(n)+"",t=0,r,i,o,s,a;for((i=e.indexOf(ul))>-1&&(e=e.replace(ul,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===Ps;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===Ps;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>vb&&(r=r.splice(0,vb-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function NP(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen,o=Math.min(Math.max(e,i),t),s=o+n.integerLen,a=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let y=s;y<r.length;y++)r[y]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let y=1;y<s;y++)r[y]=0}if(a>=5)if(s-1<0){for(let y=0;y>s;y--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let l=o!==0,u=e+n.integerLen,p=r.reduceRight(function(y,b,w,N){return b=b+y,N[w]=b<10?b:b-10,l&&(N[w]===0&&w>=u?N.pop():l=!1),b>=10?1:0},0);p&&(r.unshift(p),n.integerLen++)}function Pf(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function dl(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Af=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},tt=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Af(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),_b(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);_b(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(K(co),K(vi),K(If))}}static{this.\u0275dir=Xe({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function _b(n,e){n.context.$implicit=e.item}var Ke=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Of,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){bb("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){bb("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(K(co),K(vi))}}static{this.\u0275dir=Xe({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),Of=class{constructor(){this.$implicit=null,this.ngIf=null}};function bb(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Bt(e)}'.`)}function hl(n,e){return new he(2100,!1)}var RP=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,fl=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw hl(n,t);return t.replace(RP,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=Cs({name:"titlecase",type:n,pure:!0,standalone:!0})}}return n})();var kP="mediumDate",FP=new ye(""),VP=new ye(""),jn=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??kP,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return pP(t,s,o||this.locale,a)}catch(s){throw hl(n,s.message)}}static{this.\u0275fac=function(r){return new(r||n)(K(Ts,16),K(FP,24),K(VP,24))}}static{this.\u0275pipe=Cs({name:"date",type:n,pure:!0,standalone:!0})}}return n})();var ho=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!LP(t))return null;i||=this._locale;try{let o=jP(t);return TP(o,i,r)}catch(o){throw hl(n,o.message)}}static{this.\u0275fac=function(r){return new(r||n)(K(Ts,16))}}static{this.\u0275pipe=Cs({name:"number",type:n,pure:!0,standalone:!0})}}return n})();function LP(n){return!(n==null||n===""||n!==n)}function jP(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var Mb=(()=>{class n{transform(t,r,i){if(t==null)return null;if(!this.supports(t))throw hl(n,t);return t.slice(r,i)}supports(t){return typeof t=="string"||Array.isArray(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=Cs({name:"slice",type:n,pure:!1,standalone:!0})}}return n})();var ke=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=wi({type:n})}static{this.\u0275inj=bi({})}}return n})(),Tb="browser",BP="server";function pl(n){return n===BP}var lo=class{};var Os=class{},gl=class{},Ei=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Rf=class{encodeKey(e){return Pb(e)}encodeValue(e){return Pb(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function zP(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],l=t.get(s)||[];l.push(a),t.set(s,l)}),t}var qP=/%(\d[a-f0-9])/gi,HP={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Pb(n){return encodeURIComponent(n).replace(qP,(e,t)=>HP[t]??e)}function ml(n){return`${n}`}var jr=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Rf,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=zP(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(ml):[ml(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(ml(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(ml(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var kf=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function GP(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Ab(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Ob(n){return typeof Blob<"u"&&n instanceof Blob}function Nb(n){return typeof FormData<"u"&&n instanceof FormData}function WP(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var As=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(GP(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Ei,this.context??=new kf,!this.params)this.params=new jr,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),l=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Ab(this.body)||Ob(this.body)||Nb(this.body)||WP(this.body)?this.body:this.body instanceof jr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Nb(this.body)?null:Ob(this.body)?this.body.type||null:Ab(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof jr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,u=e.headers||this.headers,p=e.params||this.params,y=e.context??this.context;return e.setHeaders!==void 0&&(u=Object.keys(e.setHeaders).reduce((b,w)=>b.set(w,e.setHeaders[w]),u)),e.setParams&&(p=Object.keys(e.setParams).reduce((b,w)=>b.set(w,e.setParams[w]),p)),new n(t,r,s,{params:p,headers:u,context:y,reportProgress:l,responseType:i,withCredentials:a,transferCache:o})}},fo=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(fo||{}),Ns=class{constructor(e,t=_l.Ok,r="OK"){this.headers=e.headers||new Ei,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Ff=class n extends Ns{constructor(e={}){super(e),this.type=fo.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},yl=class n extends Ns{constructor(e={}){super(e),this.type=fo.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},vl=class extends Ns{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},_l=function(n){return n[n.Continue=100]="Continue",n[n.SwitchingProtocols=101]="SwitchingProtocols",n[n.Processing=102]="Processing",n[n.EarlyHints=103]="EarlyHints",n[n.Ok=200]="Ok",n[n.Created=201]="Created",n[n.Accepted=202]="Accepted",n[n.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",n[n.NoContent=204]="NoContent",n[n.ResetContent=205]="ResetContent",n[n.PartialContent=206]="PartialContent",n[n.MultiStatus=207]="MultiStatus",n[n.AlreadyReported=208]="AlreadyReported",n[n.ImUsed=226]="ImUsed",n[n.MultipleChoices=300]="MultipleChoices",n[n.MovedPermanently=301]="MovedPermanently",n[n.Found=302]="Found",n[n.SeeOther=303]="SeeOther",n[n.NotModified=304]="NotModified",n[n.UseProxy=305]="UseProxy",n[n.Unused=306]="Unused",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n[n.BadRequest=400]="BadRequest",n[n.Unauthorized=401]="Unauthorized",n[n.PaymentRequired=402]="PaymentRequired",n[n.Forbidden=403]="Forbidden",n[n.NotFound=404]="NotFound",n[n.MethodNotAllowed=405]="MethodNotAllowed",n[n.NotAcceptable=406]="NotAcceptable",n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",n[n.RequestTimeout=408]="RequestTimeout",n[n.Conflict=409]="Conflict",n[n.Gone=410]="Gone",n[n.LengthRequired=411]="LengthRequired",n[n.PreconditionFailed=412]="PreconditionFailed",n[n.PayloadTooLarge=413]="PayloadTooLarge",n[n.UriTooLong=414]="UriTooLong",n[n.UnsupportedMediaType=415]="UnsupportedMediaType",n[n.RangeNotSatisfiable=416]="RangeNotSatisfiable",n[n.ExpectationFailed=417]="ExpectationFailed",n[n.ImATeapot=418]="ImATeapot",n[n.MisdirectedRequest=421]="MisdirectedRequest",n[n.UnprocessableEntity=422]="UnprocessableEntity",n[n.Locked=423]="Locked",n[n.FailedDependency=424]="FailedDependency",n[n.TooEarly=425]="TooEarly",n[n.UpgradeRequired=426]="UpgradeRequired",n[n.PreconditionRequired=428]="PreconditionRequired",n[n.TooManyRequests=429]="TooManyRequests",n[n.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",n[n.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",n[n.InternalServerError=500]="InternalServerError",n[n.NotImplemented=501]="NotImplemented",n[n.BadGateway=502]="BadGateway",n[n.ServiceUnavailable=503]="ServiceUnavailable",n[n.GatewayTimeout=504]="GatewayTimeout",n[n.HttpVersionNotSupported=505]="HttpVersionNotSupported",n[n.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",n[n.InsufficientStorage=507]="InsufficientStorage",n[n.LoopDetected=508]="LoopDetected",n[n.NotExtended=510]="NotExtended",n[n.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",n}(_l||{});function Nf(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var wn=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof As)o=t;else{let l;i.headers instanceof Ei?l=i.headers:l=new Ei(i.headers);let u;i.params&&(i.params instanceof jr?u=i.params:u=new jr({fromObject:i.params})),o=new As(t,r,i.body!==void 0?i.body:null,{headers:l,context:i.context,params:u,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=ic(o).pipe(xd(l=>this.handler.handle(l)));if(t instanceof As||i.observe==="events")return s;let a=s.pipe(Cd(l=>l instanceof yl));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(ft(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(ft(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(ft(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return a.pipe(ft(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new jr().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Nf(i,r))}post(t,r,i={}){return this.request("POST",t,Nf(i,r))}put(t,r,i={}){return this.request("PUT",t,Nf(i,r))}static{this.\u0275fac=function(r){return new(r||n)(se(Os))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})();function QP(n,e){return e(n)}function KP(n,e,t){return(r,i)=>Nv(t,()=>e(r,o=>n(o,i)))}var Fb=new ye(""),YP=new ye(""),JP=new ye("");var Rb=(()=>{class n extends Os{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=$e(Yc);let i=$e(JP,{optional:!0});this.backend=i??t}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(Fb),...this.injector.get(YP,[])]));this.chain=i.reduceRight((o,s)=>KP(o,s,this.injector),QP)}let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Ed(()=>this.pendingTasks.remove(r)))}static{this.\u0275fac=function(r){return new(r||n)(se(gl),se(Rn))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})();var XP=/^\)\]\}',?\n/;function ZP(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var kb=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new he(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Pn(r.\u0275loadImpl()):ic(null)).pipe(Wi(()=>new Ue(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((V,F)=>s.setRequestHeader(V,F.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let V=t.detectContentTypeHeader();V!==null&&s.setRequestHeader("Content-Type",V)}if(t.responseType){let V=t.responseType.toLowerCase();s.responseType=V!=="json"?V:"text"}let a=t.serializeBody(),l=null,u=()=>{if(l!==null)return l;let V=s.statusText||"OK",F=new Ei(s.getAllResponseHeaders()),W=ZP(s)||t.url;return l=new Ff({headers:F,status:s.status,statusText:V,url:W}),l},p=()=>{let{headers:V,status:F,statusText:W,url:ie}=u(),X=null;F!==_l.NoContent&&(X=typeof s.response>"u"?s.responseText:s.response),F===0&&(F=X?_l.Ok:0);let Se=F>=200&&F<300;if(t.responseType==="json"&&typeof X=="string"){let Fe=X;X=X.replace(XP,"");try{X=X!==""?JSON.parse(X):null}catch(Me){X=Fe,Se&&(Se=!1,X={error:Me,text:X})}}Se?(o.next(new yl({body:X,headers:V,status:F,statusText:W,url:ie||void 0})),o.complete()):o.error(new vl({error:X,headers:V,status:F,statusText:W,url:ie||void 0}))},y=V=>{let{url:F}=u(),W=new vl({error:V,status:s.status||0,statusText:s.statusText||"Unknown Error",url:F||void 0});o.error(W)},b=!1,w=V=>{b||(o.next(u()),b=!0);let F={type:fo.DownloadProgress,loaded:V.loaded};V.lengthComputable&&(F.total=V.total),t.responseType==="text"&&s.responseText&&(F.partialText=s.responseText),o.next(F)},N=V=>{let F={type:fo.UploadProgress,loaded:V.loaded};V.lengthComputable&&(F.total=V.total),o.next(F)};return s.addEventListener("load",p),s.addEventListener("error",y),s.addEventListener("timeout",y),s.addEventListener("abort",y),t.reportProgress&&(s.addEventListener("progress",w),a!==null&&s.upload&&s.upload.addEventListener("progress",N)),s.send(a),o.next({type:fo.Sent}),()=>{s.removeEventListener("error",y),s.removeEventListener("abort",y),s.removeEventListener("load",p),s.removeEventListener("timeout",y),t.reportProgress&&(s.removeEventListener("progress",w),a!==null&&s.upload&&s.upload.removeEventListener("progress",N)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(se(lo))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})(),Vb=new ye(""),eA="XSRF-TOKEN",tA=new ye("",{providedIn:"root",factory:()=>eA}),nA="X-XSRF-TOKEN",rA=new ye("",{providedIn:"root",factory:()=>nA}),bl=class{},iA=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=dl(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(se(Ln),se(Lr),se(tA))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})();function oA(n,e){let t=n.url.toLowerCase();if(!$e(Vb)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=$e(bl).getToken(),i=$e(rA);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function Lb(...n){let e=[wn,kb,Rb,{provide:Os,useExisting:Rb},{provide:gl,useExisting:kb},{provide:Fb,useValue:oA,multi:!0},{provide:Vb,useValue:!0},{provide:bl,useClass:iA}];for(let t of n)e.push(...t.\u0275providers);return Vc(e)}var jf=class extends cl{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Bf=class n extends jf{static makeCurrent(){xb(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=aA();return t==null?null:cA(t)}resetBaseElement(){ks=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return dl(document.cookie,e)}},ks=null;function aA(){return ks=ks||document.querySelector("base"),ks?ks.getAttribute("href"):null}function cA(n){return new URL(n,document.baseURI).pathname}var lA=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})(),Uf=new ye(""),$b=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new he(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(se(Uf),se(yt))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})(),wl=class{constructor(e){this._doc=e}},Vf="ng-app-id",zb=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=pl(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Vf}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(Vf),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Vf,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(se(Ln),se(Xh),se(ef,8),se(Lr))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})(),Lf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},zf=/%COMP%/g,qb="%COMP%",uA=`_nghost-${qb}`,dA=`_ngcontent-${qb}`,hA=!0,fA=new ye("",{providedIn:"root",factory:()=>hA});function pA(n){return dA.replace(zf,n)}function mA(n){return uA.replace(zf,n)}function Hb(n,e){return e.map(t=>t.replace(zf,n))}var jb=(()=>{class n{constructor(t,r,i,o,s,a,l,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=pl(a),this.defaultRenderer=new Fs(t,s,l,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Nn.ShadowDom&&(r=ue(ee({},r),{encapsulation:Nn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Cl?i.applyToHost(t):i instanceof Vs&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,y=this.platformIsServer;switch(r.encapsulation){case Nn.Emulated:o=new Cl(l,u,r,this.appId,p,s,a,y);break;case Nn.ShadowDom:return new $f(l,u,t,r,s,a,this.nonce,y);default:o=new Vs(l,u,r,p,s,a,y);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(se($b),se(zb),se(Xh),se(fA),se(Ln),se(Lr),se(yt),se(ef))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})(),Fs=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Lf[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Bb(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Bb(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new he(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Lf[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Lf[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(er.DashCase|er.Important)?e.style.setProperty(t,r,i&er.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&er.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=uo().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function Bb(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var $f=class extends Fs{constructor(e,t,r,i,o,s,a,l){super(e,o,s,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=Hb(i.id,i.styles);for(let p of u){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=p,this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Vs=class extends Fs{constructor(e,t,r,i,o,s,a,l){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=l?Hb(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Cl=class extends Vs{constructor(e,t,r,i,o,s,a,l){let u=i+"-"+r.id;super(e,t,r,o,s,a,l,u),this.contentAttr=pA(u),this.hostAttr=mA(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},gA=(()=>{class n extends wl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(se(Ln))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})(),Ub=["alt","control","meta","shift"],yA={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},vA={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},_A=(()=>{class n extends wl{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>uo().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Ub.forEach(u=>{let p=r.indexOf(u);p>-1&&(r.splice(p,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(t,r){let i=yA[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Ub.forEach(s=>{if(s!==i){let a=vA[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(se(Ln))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})();function Gb(n,e){return gb(ee({rootComponent:n},bA(e)))}function bA(n){return{appProviders:[...IA,...n?.providers??[]],platformProviders:EA}}function wA(){Bf.makeCurrent()}function CA(){return new Zn}function xA(){return __(document),document}var EA=[{provide:Lr,useValue:Tb},{provide:Zh,useValue:wA,multi:!0},{provide:Ln,useFactory:xA,deps:[]}];var IA=[{provide:Lc,useValue:"root"},{provide:Zn,useFactory:CA,deps:[]},{provide:Uf,useClass:gA,multi:!0,deps:[Ln,yt,Lr]},{provide:Uf,useClass:_A,multi:!0,deps:[Ln]},jb,zb,$b,{provide:vs,useExisting:jb},{provide:lo,useClass:lA,deps:[]},[]];var Wb={providers:[Lb()]};var rw=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(K(xi),K(gn))}}static{this.\u0275dir=Xe({type:n})}}return n})(),Tl=(()=>{class n extends rw{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Vr(n)))(i||n)}})()}static{this.\u0275dir=Xe({type:n,features:[Nt]})}}return n})(),zs=new ye("");var DA={provide:zs,useExisting:tn(()=>nt),multi:!0};function SA(){let n=uo()?uo().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var MA=new ye(""),nt=(()=>{class n extends rw{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!SA())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(K(xi),K(gn),K(MA,8))}}static{this.\u0275dir=Xe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&j("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Vn([DA]),Nt]})}}return n})();function Us(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var qs=new ye(""),iw=new ye("");function TA(n){return e=>{if(Us(e.value)||Us(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function PA(n){return e=>{if(Us(e.value)||Us(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function AA(n){return Us(n.value)?{required:!0}:null}function Qb(n){return null}function ow(n){return n!=null}function sw(n){return Ms(n)?Pn(n):n}function aw(n){let e={};return n.forEach(t=>{e=t!=null?ee(ee({},e),t):e}),Object.keys(e).length===0?null:e}function cw(n,e){return e.map(t=>t(n))}function OA(n){return!n.validate}function lw(n){return n.map(e=>OA(e)?e:t=>e.validate(t))}function NA(n){if(!n)return null;let e=n.filter(ow);return e.length==0?null:function(t){return aw(cw(t,e))}}function Hf(n){return n!=null?NA(lw(n)):null}function RA(n){if(!n)return null;let e=n.filter(ow);return e.length==0?null:function(t){let r=cw(t,e).map(sw);return wd(r).pipe(ft(aw))}}function Gf(n){return n!=null?RA(lw(n)):null}function Kb(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function kA(n){return n._rawValidators}function FA(n){return n._rawAsyncValidators}function qf(n){return n?Array.isArray(n)?n:[n]:[]}function El(n,e){return Array.isArray(n)?n.includes(e):n===e}function Yb(n,e){let t=qf(e);return qf(n).forEach(i=>{El(t,i)||t.push(i)}),t}function Jb(n,e){return qf(e).filter(t=>!El(n,t))}var Il=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Hf(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Gf(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},mo=class extends Il{get formDirective(){return null}get path(){return null}},$s=class extends Il{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Dl=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},VA={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Aj=ue(ee({},VA),{"[class.ng-submitted]":"isSubmitted"}),rt=(()=>{class n extends Dl{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(K($s,2))}}static{this.\u0275dir=Xe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&_e("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Nt]})}}return n})(),Bn=(()=>{class n extends Dl{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(K(mo,10))}}static{this.\u0275dir=Xe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&_e("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Nt]})}}return n})();var Ls="VALID",xl="INVALID",po="PENDING",js="DISABLED";function uw(n){return(Pl(n)?n.validators:n)||null}function LA(n){return Array.isArray(n)?Hf(n):n||null}function dw(n,e){return(Pl(e)?e.asyncValidators:n)||null}function jA(n){return Array.isArray(n)?Gf(n):n||null}function Pl(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function BA(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new he(1e3,"");if(!r[t])throw new he(1001,"")}function UA(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new he(1002,"")})}var Sl=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ls}get invalid(){return this.status===xl}get pending(){return this.status==po}get disabled(){return this.status===js}get enabled(){return this.status!==js}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Yb(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Yb(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Jb(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Jb(e,this._rawAsyncValidators))}hasValidator(e){return El(this._rawValidators,e)}hasAsyncValidator(e){return El(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=po,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=js,this.errors=null,this._forEachChild(r=>{r.disable(ue(ee({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ue(ee({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ls,this._forEachChild(r=>{r.enable(ue(ee({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ue(ee({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ls||this.status===po)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?js:Ls}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=po,this._hasOwnPendingAsyncValidator=!0;let t=sw(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new jt,this.statusChanges=new jt}_calculateStatus(){return this._allControlsDisabled()?js:this.errors?xl:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(po)?po:this._anyControlsHaveStatus(xl)?xl:Ls}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Pl(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=LA(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=jA(this._rawAsyncValidators)}},Ml=class extends Sl{constructor(e,t,r){super(uw(t),dw(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){UA(this,!0,e),Object.keys(e).forEach(r=>{BA(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Wf=new ye("CallSetDisabledState",{providedIn:"root",factory:()=>Qf}),Qf="always";function $A(n,e){return[...e.path,n]}function hw(n,e,t=Qf){fw(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),qA(n,e),GA(n,e),HA(n,e),zA(n,e)}function Xb(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function zA(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function fw(n,e){let t=kA(n);e.validator!==null?n.setValidators(Kb(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=FA(n);e.asyncValidator!==null?n.setAsyncValidators(Kb(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Xb(e._rawValidators,i),Xb(e._rawAsyncValidators,i)}function qA(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&pw(n,e)})}function HA(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&pw(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function pw(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function GA(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function WA(n,e){n==null,fw(n,e)}function QA(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function KA(n){return Object.getPrototypeOf(n.constructor)===Tl}function YA(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function JA(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===nt?t=o:KA(o)?r=o:i=o}),i||r||t||null}var XA={provide:mo,useExisting:tn(()=>Cn)},Bs=Promise.resolve(),Cn=(()=>{class n extends mo{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new jt,this.form=new Ml({},Hf(t),Gf(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Bs.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),hw(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Bs.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Bs.then(()=>{let r=this._findContainer(t.path),i=new Ml({});WA(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Bs.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Bs.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,YA(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(K(qs,10),K(iw,10),K(Wf,8))}}static{this.\u0275dir=Xe({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&j("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[en.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Vn([XA]),Nt]})}}return n})();function Zb(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function ew(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var ZA=class extends Sl{constructor(e=null,t,r){super(uw(t),dw(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Pl(t)&&(t.nonNullable||t.initialValueIsDefault)&&(ew(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Zb(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Zb(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){ew(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var eO={provide:$s,useExisting:tn(()=>Ze)},tw=Promise.resolve(),Ze=(()=>{class n extends $s{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new ZA,this._registered=!1,this.name="",this.update=new jt,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=JA(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),QA(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){hw(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){tw.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Zc(r);tw.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?$A(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(K(mo,9),K(qs,10),K(iw,10),K(zs,10),K(Xc,8),K(Wf,8))}}static{this.\u0275dir=Xe({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[en.None,"disabled","isDisabled"],model:[en.None,"ngModel","model"],options:[en.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Vn([eO]),Nt,Ci]})}}return n})(),Un=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Xe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),tO={provide:zs,useExisting:tn(()=>lr),multi:!0},lr=(()=>{class n extends Tl{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Vr(n)))(i||n)}})()}static{this.\u0275dir=Xe({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&j("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[Vn([tO]),Nt]})}}return n})();var nO={provide:zs,useExisting:tn(()=>kt),multi:!0};function mw(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function rO(n){return n.split(":")[0]}var kt=(()=>{class n extends Tl{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=mw(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=rO(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Vr(n)))(i||n)}})()}static{this.\u0275dir=Xe({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&j("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Vn([nO]),Nt]})}}return n})(),sn=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(mw(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(K(gn),K(xi),K(kt,9))}}static{this.\u0275dir=Xe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),iO={provide:zs,useExisting:tn(()=>gw),multi:!0};function nw(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function oO(n){return n.split(":")[0]}var gw=(()=>{class n extends Tl{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let l=s[a],u=this._getOptionValue(l.value);i.push(u)}}else{let s=r.options;for(let a=0;a<s.length;a++){let l=s[a];if(l.selected){let u=this._getOptionValue(l.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=oO(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Vr(n)))(i||n)}})()}static{this.\u0275dir=Xe({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&j("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Vn([iO]),Nt]})}}return n})(),an=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(nw(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(nw(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(K(gn),K(xi),K(gw,9))}}static{this.\u0275dir=Xe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();function yw(n){return typeof n=="number"?n:parseFloat(n)}var Kf=(()=>{class n{constructor(){this._validator=Qb}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Qb,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Xe({type:n,features:[Ci]})}}return n})(),sO={provide:qs,useExisting:tn(()=>Yf),multi:!0},Yf=(()=>{class n extends Kf{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=t=>yw(t),this.createValidator=t=>PA(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Vr(n)))(i||n)}})()}static{this.\u0275dir=Xe({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Ds("max",i._enabled?i.max:null)},inputs:{max:"max"},features:[Vn([sO]),Nt]})}}return n})(),aO={provide:qs,useExisting:tn(()=>ur),multi:!0},ur=(()=>{class n extends Kf{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>yw(t),this.createValidator=t=>TA(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Vr(n)))(i||n)}})()}static{this.\u0275dir=Xe({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Ds("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[Vn([aO]),Nt]})}}return n})(),cO={provide:qs,useExisting:tn(()=>Wt),multi:!0};var Wt=(()=>{class n extends Kf{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Zc,this.createValidator=t=>AA}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Vr(n)))(i||n)}})()}static{this.\u0275dir=Xe({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Ds("required",i._enabled?"":null)},inputs:{required:"required"},features:[Vn([cO]),Nt]})}}return n})();var lO=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=wi({type:n})}static{this.\u0275inj=bi({})}}return n})();var it=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Wf,useValue:t.callSetDisabledState??Qf}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=wi({type:n})}static{this.\u0275inj=bi({imports:[lO]})}}return n})();var Ft={production:!0,apiUrl:"https://inventory-three-theta.vercel.app/api",socketUrl:"https://your-websocket-server.com",firebaseConfig:{apiKey:"AIzaSyDJL01CQ2KJGqni6Q3EPR8Yv1CPW6cXezk",authDomain:"inventory-8b0ad.firebaseapp.com",projectId:"inventory-8b0ad",storageBucket:"inventory-8b0ad.firebasestorage.app",messagingSenderId:"165252469952",appId:"1:165252469952:web:1dec34907cc003fd2c4925",measurementId:"G-YK1FRTQT8P"}};var Al=(()=>{class n{constructor(t){this.http=t,this.apiUrl=Ft.apiUrl,this.logsSubject=new Je([]),this.logs$=this.logsSubject.asObservable(),this.fetchLogs()}getCurrentUserId(){return localStorage.getItem("jjm_user_id")||"guest"}fetchLogs(){let t=this.getCurrentUserId();this.http.get(`${this.apiUrl}/logs?limit=200&userId=${t}`).subscribe({next:r=>this.logsSubject.next(r),error:r=>console.error("Error fetching logs:",r)})}logActivity(t,r,i,o,s){let a={action:t,entityType:r,entityId:i,entityName:o,details:s,userId:this.getCurrentUserId()};console.log("Logging activity:",a),this.http.post(`${this.apiUrl}/logs`,a).subscribe({next:l=>{console.log("Activity logged successfully:",l);let u=this.logsSubject.value;this.logsSubject.next([l,...u])},error:l=>{console.error("Error logging activity:",l),console.error("Failed log data:",a)}})}getLogs(){return this.logs$}refreshLogs(){this.fetchLogs()}cleanupOldLogs(){return this.http.post(`${this.apiUrl}/cleanup-logs`,{})}static{this.\u0275fac=function(r){return new(r||n)(se(wn))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Vt=(()=>{class n{constructor(t,r){this.http=t,this.loggingService=r,this.apiUrl=Ft.apiUrl,this.productsSubject=new Je([]),this.salesSubject=new Je([]),this.expensesSubject=new Je([]),this.products$=this.productsSubject.asObservable(),this.sales$=this.salesSubject.asObservable(),this.expenses$=this.expensesSubject.asObservable(),this.loadInitialData()}getCurrentUser(){return localStorage.getItem("jjm_user_id")||"guest"}reloadData(){this.loadInitialData()}loadInitialData(){this.fetchProducts(),this.fetchSales(),this.fetchExpenses()}fetchProducts(){let t=this.getCurrentUser(),r=`${this.apiUrl}/products`;t&&t!=="guest"&&(r+=`?userId=${t}`),this.http.get(r).subscribe({next:i=>this.productsSubject.next(i),error:i=>console.error("Error fetching products:",i)})}fetchSales(){let t=this.getCurrentUser();this.http.get(`${this.apiUrl}/sales?userId=${t}`).subscribe({next:r=>{let i=r.map(o=>this.transformSale(o));this.salesSubject.next(i)},error:r=>console.error("Error fetching sales:",r)})}fetchExpenses(){let t=this.getCurrentUser();this.http.get(`${this.apiUrl}/expenses?userId=${t}`).subscribe({next:r=>this.expensesSubject.next(r),error:r=>console.error("Error fetching expenses:",r)})}getProducts(){return this.products$}getSales(){return this.sales$}getExpenses(){return this.expenses$}addExpense(t){let r=ue(ee({},t),{userId:this.getCurrentUser()});this.http.post(`${this.apiUrl}/expenses`,r).subscribe({next:i=>{let o=this.expensesSubject.value;this.expensesSubject.next([...o,i]),this.loggingService.logActivity("create","expense",i.id,i.productName,`$${i.price.toFixed(2)}`)},error:i=>console.error("Error adding expense:",i)})}addProduct(t){let r=ue(ee({},t),{userId:this.getCurrentUser()});this.http.post(`${this.apiUrl}/products`,r).subscribe({next:i=>{let o=this.productsSubject.value;this.productsSubject.next([...o,i]),this.loggingService.logActivity("create","product",i.id,i.name)},error:i=>console.error("Error adding product:",i)})}recordSale(t,r,i,o,s,a,l=0,u="amount",p){let b=this.productsSubject.value.find(F=>F.id===t);if(!b)throw new Error("Product not found");if(b.quantity<r)throw new Error("Insufficient quantity");let w=b.price*r;l>0&&(u==="percent"?w=w-w*(l/100):w=w-l),w=Math.max(0,Math.round(w*100)/100);let N=i-w;if(N<0)throw new Error("Insufficient cash");let V={productId:b.id,productName:b.name,category:b.category,price:b.price,quantitySold:r,total:w,cashReceived:i,change:N,deliveryDate:o,deliveryNotes:s,customerId:a,pending:!0,discount:l,discountType:u,userId:this.getCurrentUser(),orderId:p};this.http.post(`${this.apiUrl}/sales`,V).subscribe({next:F=>{let W=this.salesSubject.value;this.salesSubject.next([...W,this.transformSale(F)]),this.loggingService.logActivity("create","sale",F.id,b.name,`Sold ${r} units (Pending Delivery)`)},error:F=>console.error("Error recording sale:",F)})}completePendingSale(t){let r=this.salesSubject.value,i=r.find(o=>o.id===t);if(!i){console.error("Sale not found via ID");return}this.http.put(`${this.apiUrl}/sales/${t}`,{pending:!1}).subscribe({next:()=>{let o=r.map(l=>l.id===t?ue(ee({},l),{pending:!1}):l);this.salesSubject.next(o);let a=this.productsSubject.value.find(l=>l.id===i.productId);if(a){let l=ue(ee({},a),{quantity:a.quantity-i.quantitySold});this.updateProduct(l)}this.loggingService.logActivity("complete","sale",t,i.productName,`Marked as delivered & Deducted ${i.quantitySold} units`)},error:o=>console.error("Error completing sale:",o)})}updateSale(t){this.http.put(`${this.apiUrl}/sales/${t.id}`,t).subscribe({next:r=>{let o=this.salesSubject.value.map(s=>s.id===t.id?this.transformSale(r):s);this.salesSubject.next(o),this.loggingService.logActivity("update","sale",t.id,t.productName,"Updated delivery details")},error:r=>console.error("Error updating sale:",r)})}confirmReservation(t){if(!this.productsSubject.value.find(s=>s.id===t.productId)){console.error("Product not found for confirmation stock deduction");return}let o=ue(ee({},t),{reservationStatus:"confirmed"});this.http.put(`${this.apiUrl}/sales/${t.id}`,o).subscribe({next:s=>{let l=this.salesSubject.value.map(u=>u.id===t.id?this.transformSale(o):u);this.salesSubject.next(l),this.loggingService.logActivity("update","sale",t.id,t.productName,"Confirmed reservation (Stock deduction pending delivery)")},error:s=>console.error("Error confirming reservation:",s)})}transformSale(t){return ue(ee({},t),{timestamp:this.parseDate(t.timestamp),deliveryDate:t.deliveryDate?this.parseDate(t.deliveryDate):void 0})}parseDate(t){return t?t instanceof Date?t:typeof t=="string"?new Date(t):typeof t=="object"&&t._seconds!==void 0?new Date(t._seconds*1e3):new Date(t):new Date}restockProduct(t,r){let o=this.productsSubject.value.find(s=>s.id===t);if(o){let s=ue(ee({},o),{quantity:o.quantity+r});this.updateProduct(s),this.loggingService.logActivity("restock","product",t,o.name,`Added ${r} units`)}}deleteSale(t){this.http.delete(`${this.apiUrl}/sales/${t}`).subscribe({next:()=>{let i=this.salesSubject.value.filter(o=>o.id!==t);this.salesSubject.next(i),this.loggingService.logActivity("delete","sale",t,"Reservation/Sale","Deleted sale record")},error:r=>console.error("Error deleting sale:",r)})}updateProduct(t){this.http.put(`${this.apiUrl}/products/${t.id}`,t).subscribe({next:()=>{let i=this.productsSubject.value.map(a=>a.id===t.id?t:a);this.productsSubject.next(i);let o=this.salesSubject.value,s=o.filter(a=>a.productId===t.id&&a.productName!==t.name);if(s.length>0){let a=o.map(l=>l.productId===t.id?ue(ee({},l),{productName:t.name}):l);this.salesSubject.next(a),s.forEach(l=>{let u=ue(ee({},l),{productName:t.name});this.http.put(`${this.apiUrl}/sales/${l.id}`,u).subscribe({error:p=>console.error(`Error updating sale ${l.id} name:`,p)})})}this.loggingService.logActivity("update","product",t.id,t.name)},error:r=>console.error("Error updating product:",r)})}clearAllData(){this.productsSubject.next([]),this.salesSubject.next([]),this.expensesSubject.next([])}migrateFromLocalStorage(){let t=localStorage.getItem("jjm_products"),r=localStorage.getItem("jjm_sales"),i=localStorage.getItem("jjm_expenses");t&&JSON.parse(t).forEach(s=>this.addProduct(s)),r&&JSON.parse(r).forEach(s=>{this.http.post(`${this.apiUrl}/sales`,s).subscribe({error:a=>console.error("Error migrating sale:",a)})}),i&&JSON.parse(i).forEach(s=>this.addExpense(s)),console.log("Migration started...")}static{this.\u0275fac=function(r){return new(r||n)(se(wn),se(Al))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function uO(n,e){if(n&1){let t=te();f(0,"div",23),xe(1,"img",24),f(2,"button",25),j("click",function(){R(t);let i=I();return k(i.removeImage())}),g(3," \u2715 "),h()()}if(n&2){let t=I();v(),D("src",t.imagePreview,yn)}}function dO(n,e){if(n&1){let t=te();f(0,"div",26)(1,"input",27),j("change",function(i){R(t);let o=I();return k(o.onImageChange(i))}),h(),f(2,"label",28)(3,"span",29),g(4,"\u{1F4F7}"),h(),f(5,"span",30),g(6,"Click to upload image"),h(),f(7,"span",31),g(8,"PNG, JPG, GIF up to 5MB"),h()()()}}var _w=(()=>{class n{constructor(t){this.inventoryService=t,this.product={name:"",category:"",price:0,quantity:0,imageUrl:""},this.imagePreview=null}onImageChange(t){let r=t.target;if(r.files&&r.files[0]){let i=r.files[0],o=new FileReader;o.onload=s=>{this.imagePreview=s.target?.result,this.product.imageUrl=s.target?.result},o.readAsDataURL(i)}}removeImage(){this.imagePreview=null,this.product.imageUrl=""}onSubmit(){this.isValid()&&(this.inventoryService.addProduct({name:this.product.name,category:this.product.category,price:this.product.price,quantity:this.product.quantity,imageUrl:this.product.imageUrl}),this.product={name:"",category:"",price:0,quantity:0,imageUrl:""},this.imagePreview=null)}isValid(){return!!(this.product.name&&this.product.category&&this.product.price>0&&this.product.quantity>0)}static{this.\u0275fac=function(r){return new(r||n)(K(Vt))}}static{this.\u0275cmp=Ve({type:n,selectors:[["app-product-form"]],standalone:!0,features:[Le],decls:42,vars:7,consts:[[1,"card"],[1,"form",3,"ngSubmit"],[1,"image-upload-section"],[1,"image-upload-label"],["class","image-preview-container",4,"ngIf"],["class","image-upload-area",4,"ngIf"],[1,"form-group"],["for","productName"],["type","text","id","productName","name","name","placeholder","Enter product name","required","",3,"ngModelChange","ngModel"],["for","category"],["id","category","name","category","required","",3,"ngModelChange","ngModel"],["value",""],["value","Lechon"],["value","Hollow blocks"],["value","Sand and Gravel"],["value","Copra"],["value","Others"],[1,"form-row"],["for","price"],["type","number","id","price","name","price","placeholder","0.00","min","0","step","0.01","required","",3,"ngModelChange","ngModel"],["for","quantity"],["type","number","id","quantity","name","quantity","placeholder","0","min","1","required","",3,"ngModelChange","ngModel"],["type","submit",1,"btn-primary",3,"disabled"],[1,"image-preview-container"],["alt","Product preview","loading","lazy",1,"image-preview",3,"src"],["type","button",1,"remove-image-btn",3,"click"],[1,"image-upload-area"],["type","file","id","productImage","accept","image/*",1,"file-input",3,"change"],["for","productImage",1,"file-input-label"],[1,"upload-icon"],[1,"upload-text"],[1,"upload-hint"]],template:function(r,i){r&1&&(f(0,"div",0)(1,"h3"),g(2,"Add New Product"),h(),f(3,"form",1),j("ngSubmit",function(){return i.onSubmit()}),f(4,"div",2)(5,"label",3),g(6,"Product Image (Optional)"),h(),U(7,uO,4,1,"div",4)(8,dO,9,0,"div",5),h(),f(9,"div",6)(10,"label",7),g(11,"Product Name"),h(),f(12,"input",8),J("ngModelChange",function(s){return Z(i.product.name,s)||(i.product.name=s),s}),h()(),f(13,"div",6)(14,"label",9),g(15,"Category"),h(),f(16,"select",10),J("ngModelChange",function(s){return Z(i.product.category,s)||(i.product.category=s),s}),f(17,"option",11),g(18,"-- Select Category --"),h(),f(19,"option",12),g(20,"Lechon"),h(),f(21,"option",13),g(22,"Hollow blocks"),h(),f(23,"option",14),g(24,"Sand and Gravel"),h(),f(25,"option",15),g(26,"Copra"),h(),f(27,"option",16),g(28,"Others"),h()()(),f(29,"div",17)(30,"div",6)(31,"label",18),g(32,"Price"),h(),f(33,"input",19),J("ngModelChange",function(s){return Z(i.product.price,s)||(i.product.price=s),s}),h()(),f(34,"div",6)(35,"label",20),g(36,"Quantity"),h(),f(37,"input",21),J("ngModelChange",function(s){return Z(i.product.quantity,s)||(i.product.quantity=s),s}),h()()(),f(38,"button",22)(39,"span"),g(40,"\u2795"),h(),g(41," Add Product "),h()()()),r&2&&(v(7),D("ngIf",i.imagePreview),v(),D("ngIf",!i.imagePreview),v(4),Y("ngModel",i.product.name),v(4),Y("ngModel",i.product.category),v(17),Y("ngModel",i.product.price),v(4),Y("ngModel",i.product.quantity),v(),D("disabled",!i.isValid()))},dependencies:[ke,Ke,it,Un,sn,an,nt,lr,kt,rt,Bn,Wt,ur,Ze,Cn],styles:[".form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg);margin-top:var(--space-lg)}.image-upload-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.image-upload-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.image-preview-container[_ngcontent-%COMP%]{position:relative;width:100%;max-width:300px;margin:0 auto}.image-preview[_ngcontent-%COMP%]{width:100%;height:200px;object-fit:cover;border-radius:var(--radius-lg);border:2px solid var(--color-border)}.remove-image-btn[_ngcontent-%COMP%]{position:absolute;top:var(--space-sm);right:var(--space-sm);width:32px;height:32px;padding:0;background:var(--color-danger);color:#fff;border:none;border-radius:50%;font-size:1.25rem;cursor:pointer;display:flex;align-items:center;justify-content:center;box-shadow:var(--shadow-md)}.remove-image-btn[_ngcontent-%COMP%]:hover{background:#dc2626;transform:scale(1.1)}.image-upload-area[_ngcontent-%COMP%]{width:100%}.file-input[_ngcontent-%COMP%]{display:none}.file-input-label[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:var(--space-sm);padding:var(--space-2xl);border:2px dashed var(--color-border);border-radius:var(--radius-lg);background:var(--color-bg);cursor:pointer;transition:all var(--transition-base)}.file-input-label[_ngcontent-%COMP%]:hover{border-color:var(--color-primary);background:#1e40af0d}.upload-icon[_ngcontent-%COMP%]{font-size:3rem}.upload-text[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text)}.upload-hint[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--space-lg)}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:var(--space-md) var(--space-lg);font-size:1rem;margin-top:var(--space-sm)}@media (max-width: 640px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return n})();var go=(()=>{class n{constructor(t){this.http=t,this.apiUrl=Ft.apiUrl,this.customersSubject=new Je([]),this.customers$=this.customersSubject.asObservable(),this.loadInitialData()}loadInitialData(){this.fetchCustomers()}getCurrentUser(){return localStorage.getItem("jjm_user_id")||"guest"}reloadData(){this.loadInitialData()}fetchCustomers(){let t=this.getCurrentUser();this.http.get(`${this.apiUrl}/customers?userId=${t}`).subscribe({next:r=>this.customersSubject.next(r),error:r=>console.error("Error fetching customers:",r)})}getCustomers(){return this.customers$}addCustomer(t){let r=ue(ee({},t),{userId:this.getCurrentUser()});this.http.post(`${this.apiUrl}/customers`,r).subscribe({next:i=>{let o=this.customersSubject.value;this.customersSubject.next([...o,i])},error:i=>console.error("Error adding customer:",i)})}updateCustomer(t,r){this.http.put(`${this.apiUrl}/customers/${t}`,r).subscribe({next:()=>{let o=this.customersSubject.value.map(s=>s.id===t?ee(ee({},s),r):s);this.customersSubject.next(o)},error:i=>console.error("Error updating customer:",i)})}deleteCustomer(t){this.http.delete(`${this.apiUrl}/customers/${t}`).subscribe({next:()=>{let i=this.customersSubject.value.filter(o=>o.id!==t);this.customersSubject.next(i)},error:r=>console.error("Error deleting customer:",r)})}getCustomerById(t){return this.customersSubject.value.find(r=>r.id===t)}static{this.\u0275fac=function(r){return new(r||n)(se(wn))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function hO(n,e){if(n&1&&(f(0,"option",43),g(1),h()),n&2){let t=e.$implicit;D("value",t.id),v(),q(" ",t.name," ")}}function fO(n,e){if(n&1&&(f(0,"option",43),g(1),ae(2,"number"),h()),n&2){let t=e.$implicit;D("value",t.id),v(),Cf(" ",t.name," - $",ge(2,4,t.price,"1.2-2")," (Stock: ",t.quantity,") ")}}function pO(n,e){if(n&1&&(f(0,"div",44),g(1),h()),n&2){let t=I();v(),q("\u26A0\uFE0F ",t.errorMessage,"")}}function mO(n,e){if(n&1&&(f(0,"div",49),g(1),h()),n&2){let t=I().$implicit;v(),q(" Disc: -",t.discountType==="percent"?t.discount+"%":"$"+t.discount," ")}}function gO(n,e){if(n&1){let t=te();f(0,"tr")(1,"td")(2,"div",45),g(3),h(),U(4,mO,2,1,"div",46),h(),f(5,"td",25),g(6),ae(7,"number"),h(),f(8,"td",26),g(9),h(),f(10,"td",47),g(11),ae(12,"number"),h(),f(13,"td",26)(14,"button",48),j("click",function(){let i=R(t).index,o=I();return k(o.removeFromCart(i))}),g(15,"\u2715"),h()()()}if(n&2){let t=e.$implicit;v(3),H(t.product.name),v(),D("ngIf",t.discount>0),v(2),q("$",ge(7,5,t.product.price,"1.2-2"),""),v(3),H(t.quantity),v(2),q("$",ge(12,8,t.total,"1.2-2"),"")}}function yO(n,e){n&1&&(f(0,"tr")(1,"td",50),g(2,"Cart is empty. Add items above."),h()())}function vO(n,e){if(n&1){let t=te();f(0,"div",51)(1,"div",52)(2,"h4"),g(3,"\u{1F69A} Delivery Options"),h(),f(4,"div",3)(5,"div",4)(6,"label"),g(7,"Date"),h(),f(8,"input",53),J("ngModelChange",function(i){R(t);let o=I();return Z(o.deliveryDate,i)||(o.deliveryDate=i),k(i)}),h()(),f(9,"div",4)(10,"label"),g(11,"Time"),h(),f(12,"input",54),J("ngModelChange",function(i){R(t);let o=I();return Z(o.deliveryTime,i)||(o.deliveryTime=i),k(i)}),h()()(),f(13,"div",4)(14,"textarea",55),J("ngModelChange",function(i){R(t);let o=I();return Z(o.deliveryNotes,i)||(o.deliveryNotes=i),k(i)}),h()()(),f(15,"div",56)(16,"h4"),g(17,"\u{1F4B0} Payment"),h(),f(18,"div",57)(19,"span"),g(20,"Total Due:"),h(),f(21,"span"),g(22),ae(23,"number"),h()(),f(24,"div",58)(25,"label"),g(26,"Cash Received ($)"),h(),f(27,"input",59),J("ngModelChange",function(i){R(t);let o=I();return Z(o.cashReceived,i)||(o.cashReceived=i),k(i)}),h()(),f(28,"div",60)(29,"span"),g(30,"Change:"),h(),f(31,"span"),g(32),ae(33,"number"),h()(),f(34,"button",61),j("click",function(){R(t);let i=I();return k(i.checkout())}),g(35," Complete Order "),h()()()}if(n&2){let t=I();v(8),Y("ngModel",t.deliveryDate),D("min",t.minDate),v(4),Y("ngModel",t.deliveryTime),v(2),Y("ngModel",t.deliveryNotes),v(8),q("$",ge(23,10,t.total,"1.2-2"),""),v(5),Y("ngModel",t.cashReceived),v(),_e("negative",t.change<0),v(4),q("$",ge(33,13,t.change,"1.2-2"),""),v(2),D("disabled",!t.isValid())}}function _O(n,e){if(n&1){let t=te();f(0,"button",62),j("click",function(){R(t);let i=I();return k(i.deliveryFilterDate="")}),g(1,"\u274C"),h()}}function bO(n,e){if(n&1&&(f(0,"span",81),g(1),h()),n&2){let t=I().$implicit;v(),H(t.sales[0].productName)}}function wO(n,e){if(n&1&&(f(0,"span",81),g(1),ae(2,"slice"),h()),n&2){let t=I().$implicit;v(),rn("Order #",ub(2,2,t.orderId,4,12),"... (",t.sales.length," items)")}}function CO(n,e){n&1&&(f(0,"span",82),g(1,"\u26A0\uFE0F RESERVATION"),h())}function xO(n,e){n&1&&(f(0,"span",83),g(1,"\u2705 CONFIRMED"),h())}function EO(n,e){if(n&1&&(f(0,"div",86),g(1),f(2,"span",87),g(3),h()()),n&2){let t=e.$implicit;v(),q(" \u2022 ",t.productName," "),v(2),q("(x",t.quantitySold,")")}}function IO(n,e){if(n&1&&(f(0,"div",84),U(1,EO,4,2,"div",85),h()),n&2){let t=I().$implicit;v(),D("ngForOf",t.sales)}}function DO(n,e){if(n&1&&(f(0,"span"),g(1),h()),n&2){let t=I().$implicit;v(),q("Qty: ",t.quantityTotal,"")}}function SO(n,e){if(n&1&&(f(0,"span"),g(1),h()),n&2){let t=I().$implicit;v(),q("Total Qty: ",t.quantityTotal,"")}}function MO(n,e){if(n&1&&(f(0,"div",88)(1,"div",89),g(2,"\u{1F464} Customer Details"),h(),f(3,"div",90)(4,"span",91),g(5,"Name:"),h(),f(6,"span",92),g(7),h()(),f(8,"div",90)(9,"span",91),g(10,"Phone:"),h(),f(11,"span",92),g(12),h()(),f(13,"div",90)(14,"span",91),g(15,"Address:"),h(),f(16,"span",92),g(17),h()()()),n&2){let t=I().$implicit;v(7),H(t.customer.name),v(5),H(t.customer.phoneNumber),v(5),H(t.customer.deliveryAddress)}}function TO(n,e){if(n&1&&(f(0,"span"),g(1),h()),n&2){let t=I(2).$implicit;v(),q("\u{1F4DD} ",t.deliveryNotes,"")}}function PO(n,e){if(n&1&&(f(0,"div",93)(1,"span"),g(2),ae(3,"date"),h(),f(4,"span"),g(5),ae(6,"date"),h(),U(7,TO,2,1,"span",28),h()),n&2){let t=I().$implicit;v(2),q("\u{1F4C5} Due: ",ge(3,3,t.deliveryDate,"mediumDate"),""),v(3),q("\u{1F4C5} Time: ",ge(6,6,t.deliveryDate,"shortTime"),""),v(2),D("ngIf",t.deliveryNotes)}}function AO(n,e){if(n&1){let t=te();f(0,"button",94),j("click",function(){R(t);let i=I().$implicit,o=I();return k(o.confirmGroupReservation(i.sales))}),g(1," \u{1F4DD} Confirm "),h()}}function OO(n,e){if(n&1){let t=te();f(0,"button",95),j("click",function(){R(t);let i=I().$implicit,o=I();return k(o.markGroupAsDelivered(i.sales))}),g(1," \u{1F69A} Mark Delivered "),h()}}function NO(n,e){if(n&1){let t=te();f(0,"div",63)(1,"div",64)(2,"div",65)(3,"div",66),U(4,bO,2,1,"span",67)(5,wO,3,6,"span",67),h(),U(6,CO,2,0,"span",68)(7,xO,2,0,"span",69),f(8,"span",70),g(9),ae(10,"date"),h()(),U(11,IO,2,1,"div",71),f(12,"div",72),U(13,DO,2,1,"span",28)(14,SO,2,1,"span",28),f(15,"span",73),g(16),ae(17,"number"),h()(),U(18,MO,18,3,"div",74)(19,PO,8,9,"div",75),h(),f(20,"div",76)(21,"button",77),j("click",function(){let i=R(t).$implicit,o=I();return k(o.openEditModal(i.sales[0]))}),g(22,"\u270F\uFE0F Edit"),h(),U(23,AO,2,0,"button",78),f(24,"button",79),j("click",function(){let i=R(t).$implicit,o=I();return k(o.cancelGroupOrder(i.sales))}),g(25," \u{1F5D1}\uFE0F Cancel "),h(),U(26,OO,2,0,"button",80),h()()}if(n&2){let t=e.$implicit;v(4),D("ngIf",!t.isGroup),v(),D("ngIf",t.isGroup),v(),D("ngIf",t.status==="pending_confirmation"),v(),D("ngIf",t.status==="confirmed"),v(2),H(ge(10,13,t.timestamp,"short")),v(2),D("ngIf",t.isGroup),v(2),D("ngIf",!t.isGroup),v(),D("ngIf",t.isGroup),v(2),q("Due: $",ge(17,16,t.total,"1.2-2"),""),v(2),D("ngIf",t.customer),v(),D("ngIf",t.deliveryDate),v(4),D("ngIf",t.status==="pending_confirmation"),v(3),D("ngIf",t.status!=="pending_confirmation")}}function RO(n,e){if(n&1){let t=te();f(0,"div",96),j("click",function(){R(t);let i=I();return k(i.closeEditModal())}),f(1,"div",97),j("click",function(i){return R(t),k(i.stopPropagation())}),f(2,"div",98)(3,"h3"),g(4,"Edit Delivery Details"),h(),f(5,"button",99),j("click",function(){R(t);let i=I();return k(i.closeEditModal())}),g(6,"\xD7"),h()(),f(7,"div",100)(8,"div",4)(9,"label",101),g(10,"Delivery Date"),h(),f(11,"input",102),J("ngModelChange",function(i){R(t);let o=I();return Z(o.editDeliveryDate,i)||(o.editDeliveryDate=i),k(i)}),h()(),f(12,"div",4)(13,"label",103),g(14,"Delivery Time"),h(),f(15,"input",104),J("ngModelChange",function(i){R(t);let o=I();return Z(o.editDeliveryTime,i)||(o.editDeliveryTime=i),k(i)}),h()(),f(16,"div",4)(17,"label",105),g(18,"Notes"),h(),f(19,"textarea",106),J("ngModelChange",function(i){R(t);let o=I();return Z(o.editDeliveryNotes,i)||(o.editDeliveryNotes=i),k(i)}),h()()(),f(20,"div",107)(21,"button",108),j("click",function(){R(t);let i=I();return k(i.closeEditModal())}),g(22,"Cancel"),h(),f(23,"button",109),j("click",function(){R(t);let i=I();return k(i.saveEdit())}),g(24,"Save Changes"),h()()()()}if(n&2){let t=I();v(11),Y("ngModel",t.editDeliveryDate),D("min",t.minDate),v(4),Y("ngModel",t.editDeliveryTime),v(4),Y("ngModel",t.editDeliveryNotes)}}var bw=(()=>{class n{constructor(t,r){this.inventoryService=t,this.customerService=r,this.products=[],this.customers=[],this.pendingSales=[],this.selectedProductId="",this.selectedCustomerId="",this.quantity=1,this.cashReceived=0,this.discount=0,this.discountType="amount",this.errorMessage="",this.cart=[],this.deliveryDate="",this.deliveryTime="",this.deliveryNotes="",this.minDate="",this.deliveryFilterDate="",this.statusFilter="all",this.isEditModalOpen=!1,this.editingSale=null,this.editDeliveryDate="",this.editDeliveryTime="",this.editDeliveryNotes="";let i=new Date,o=i.getFullYear(),s=String(i.getMonth()+1).padStart(2,"0"),a=String(i.getDate()).padStart(2,"0");this.minDate=`${o}-${s}-${a}`,this.deliveryDate=this.minDate}ngOnInit(){this.inventoryService.getProducts().subscribe(t=>{this.products=t.filter(r=>r.quantity>0)}),this.customerService.getCustomers().subscribe(t=>{this.customers=t}),this.inventoryService.getSales().subscribe(t=>{this.pendingSales=t.filter(r=>r.pending===!0),this.startAlarmChecks()}),this.discount=0}startAlarmChecks(){setInterval(()=>this.checkPendingDeliveryAlarms(),60*60*1e3),this.checkPendingDeliveryAlarms()}get filteredPendingSales(){let t=this.pendingSales;return this.statusFilter==="reservation"&&(t=t.filter(r=>r.reservationStatus==="pending_confirmation")),this.deliveryFilterDate&&(t=t.filter(r=>{if(!r.deliveryDate)return!1;let i=new Date(r.deliveryDate),o=i.getFullYear(),s=String(i.getMonth()+1).padStart(2,"0"),a=String(i.getDate()).padStart(2,"0");return`${o}-${s}-${a}`===this.deliveryFilterDate})),t.slice().sort((r,i)=>{let o=r.reservationStatus==="pending_confirmation",s=i.reservationStatus==="pending_confirmation";if(o&&!s)return-1;if(!o&&s)return 1;let a=r.deliveryDate?new Date(r.deliveryDate).getTime():1/0,l=i.deliveryDate?new Date(i.deliveryDate).getTime():1/0;return a-l})}checkPendingDeliveryAlarms(){let t=new Date;this.pendingSales.forEach(r=>{if(!r.deliveryDate)return;let o=new Date(r.deliveryDate).getTime()-t.getTime(),s=Math.floor(o/(1e3*60*60*24));(s===1||s===2)&&this.triggerAlarm(r,s)})}triggerAlarm(t,r){let o=new Date(t.deliveryDate).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}),s=`\u26A0\uFE0F Delivery for "${t.productName}" is due in ${r} day(s) (${o}).`;this.playBeep(),alert(s)}playBeep(){try{let t=new(window.AudioContext||window.webkitAudioContext),r=t.createOscillator(),i=t.createGain();r.type="square",r.frequency.setValueAtTime(1e3,t.currentTime),i.gain.setValueAtTime(.5,t.currentTime),r.connect(i),i.connect(t.destination),r.start(),r.stop(t.currentTime+2)}catch(t){console.error("Audio alarm failed",t)}}get selectedProduct(){return this.products.find(t=>t.id===this.selectedProductId)}get selectedCustomer(){return this.customers.find(t=>t.id===this.selectedCustomerId)}getCustomerById(t){if(t)return this.customers.find(r=>r.id===t)}get maxQuantity(){return this.selectedProduct?.quantity||0}onProductChange(){this.quantity=1,this.errorMessage="",this.discount=0}addToCart(){if(this.errorMessage="",!this.selectedProduct){this.errorMessage="Please select a product";return}if(this.quantity<1||this.quantity>this.maxQuantity){this.errorMessage=`Quantity must be between 1 and ${this.maxQuantity}`;return}let t=this.cart.filter(i=>i.product.id===this.selectedProduct.id).reduce((i,o)=>i+o.quantity,0);if(t+this.quantity>this.maxQuantity){this.errorMessage=`Cannot add more. Total in cart (${t}) + new (${this.quantity}) exceeds stock (${this.maxQuantity})`;return}let r=this.selectedProduct.price*this.quantity;this.discount>0&&(this.discountType==="percent"?r=r-r*(this.discount/100):r=r-this.discount),r=Math.max(0,Math.round(r*100)/100),this.cart.push({product:this.selectedProduct,quantity:this.quantity,discount:this.discount,discountType:this.discountType,total:r}),this.quantity=1,this.discount=0,this.discountType="amount",this.selectedProductId=""}removeFromCart(t){this.cart.splice(t,1)}get total(){return this.cart.reduce((t,r)=>t+r.total,0)}get change(){return this.cashReceived-this.total}isValid(){return this.cart.length>0&&this.cashReceived>=this.total}get groupedPendingSales(){let t=new Map,r=[];this.filteredPendingSales.forEach(o=>{o.orderId?(t.has(o.orderId)||t.set(o.orderId,[]),t.get(o.orderId).push(o)):r.push(o)});let i=[];return t.forEach((o,s)=>{let a=o[0];i.push({isGroup:!0,orderId:s,sales:o,total:o.reduce((l,u)=>l+u.total,0),customerName:this.getCustomerById(a.customerId)?.name||"Walk-in",customer:this.getCustomerById(a.customerId),deliveryDate:a.deliveryDate,timestamp:a.timestamp,status:a.reservationStatus,productNames:o.map(l=>l.productName).join(", "),deliveryNotes:a.deliveryNotes,quantityTotal:o.reduce((l,u)=>l+u.quantitySold,0)})}),r.forEach(o=>{i.push({isGroup:!1,id:o.id,sales:[o],total:o.total,customerName:this.getCustomerById(o.customerId)?.name||"Walk-in",customer:this.getCustomerById(o.customerId),deliveryDate:o.deliveryDate,timestamp:o.timestamp,status:o.reservationStatus,productNames:o.productName,deliveryNotes:o.deliveryNotes,quantityTotal:o.quantitySold})}),i.sort((o,s)=>{let a=o.status==="pending_confirmation",l=s.status==="pending_confirmation";if(a&&!l)return-1;if(!a&&l)return 1;let u=o.deliveryDate?new Date(o.deliveryDate).getTime():1/0,p=s.deliveryDate?new Date(s.deliveryDate).getTime():1/0;return u-p})}checkout(){if(this.errorMessage="",this.cart.length===0){this.errorMessage="Cart is empty";return}if(this.cashReceived<this.total){this.errorMessage="Insufficient cash received";return}let t=this.cashReceived-this.total,r="ORD-"+Date.now()+"-"+Math.floor(Math.random()*1e3);try{this.cart.forEach((i,o)=>{let s=i.total;o===0&&(s+=t);let a;this.deliveryDate&&(this.deliveryTime?a=new Date(`${this.deliveryDate}T${this.deliveryTime}`):a=new Date(this.deliveryDate)),this.inventoryService.recordSale(i.product.id,i.quantity,s,a,this.deliveryNotes||void 0,this.selectedCustomerId||void 0,i.discount,i.discountType,r)}),this.cart=[],this.cashReceived=0,this.deliveryDate=this.minDate,this.deliveryTime="",this.deliveryNotes="",this.selectedCustomerId="",this.errorMessage=""}catch(i){this.errorMessage=i.message||"Error processing sales"}}markAsDelivered(t){confirm("Are you sure you want to mark this item as delivered?")&&this.inventoryService.completePendingSale(t)}confirmReservation(t){confirm("Confirming this reservation will deduct items from inventory. Continue?")&&this.inventoryService.confirmReservation(t)}deleteReservation(t){confirm("Are you sure you want to remove this reservation?")&&this.inventoryService.deleteSale(t.id)}openEditModal(t){if(this.editingSale=t,this.isEditModalOpen=!0,t.deliveryDate){let r=new Date(t.deliveryDate),i=r.getFullYear(),o=String(r.getMonth()+1).padStart(2,"0"),s=String(r.getDate()).padStart(2,"0");this.editDeliveryDate=`${i}-${o}-${s}`,this.editDeliveryTime=r.toTimeString().substring(0,5)}else this.editDeliveryDate="",this.editDeliveryTime="";this.editDeliveryNotes=t.deliveryNotes||""}closeEditModal(){this.isEditModalOpen=!1,this.editingSale=null,this.editDeliveryDate="",this.editDeliveryTime="",this.editDeliveryNotes=""}saveEdit(){if(!this.editingSale)return;let t;this.editDeliveryDate&&(this.editDeliveryTime?t=new Date(`${this.editDeliveryDate}T${this.editDeliveryTime}`):t=new Date(this.editDeliveryDate));let r=this.editingSale.orderId;if(r)this.pendingSales.filter(o=>o.orderId===r).forEach(o=>{let s=ue(ee({},o),{deliveryDate:t,deliveryNotes:this.editDeliveryNotes});this.inventoryService.updateSale(s)});else{let i=ue(ee({},this.editingSale),{deliveryDate:t,deliveryNotes:this.editDeliveryNotes});this.inventoryService.updateSale(i)}this.closeEditModal()}markGroupAsDelivered(t){confirm(`Mark ${t.length} items as delivered?
This will deduct stock and complete the order.`)&&t.forEach(r=>this.inventoryService.completePendingSale(r.id))}confirmGroupReservation(t){confirm(`Confirm reservation for ${t.length} items? This will deduct stock upon delivery.`)&&t.forEach(r=>this.inventoryService.confirmReservation(r))}cancelGroupOrder(t){confirm(`Cancel order for ${t.length} items? This cannot be undone.`)&&t.forEach(r=>this.inventoryService.deleteSale(r.id))}static{this.\u0275fac=function(r){return new(r||n)(K(Vt),K(go))}}static{this.\u0275cmp=Ve({type:n,selectors:[["app-pos-calculator"]],standalone:!0,features:[Le],decls:76,vars:19,consts:[[1,"card"],[1,"pos-layout"],[1,"selection-panel"],[1,"form-row"],[1,"form-group"],["for","customer"],["id","customer",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","flex-grow"],["for","product"],["id","product",3,"ngModelChange","change","ngModel"],[1,"form-row","align-end"],[1,"form-group","small-width"],["for","qty"],["type","number","id","qty",3,"ngModelChange","ngModel","min","max"],[1,"discount-row"],["type","number","placeholder","0",1,"small-input",3,"ngModelChange","ngModel"],[1,"small-select",3,"ngModelChange","ngModel"],["value","amount"],["value","percent"],[1,"btn-primary","btn-add",3,"click","disabled"],["class","error-message",4,"ngIf"],[1,"cart-container"],[1,"cart-table"],[1,"text-right"],[1,"text-center"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","checkout-panel",4,"ngIf"],[1,"card","pending-deliveries"],[1,"filter-row"],[1,"filter-group"],["for","deliveryFilter"],["type","date","id","deliveryFilter","name","deliveryFilter",3,"ngModelChange","ngModel"],["class","btn-clear","title","Clear Date",3,"click",4,"ngIf"],["for","statusFilter"],["id","statusFilter",1,"status-select",3,"ngModelChange","ngModel"],["value","all"],["value","reservation"],[1,"pending-list"],["class","pending-item",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],[3,"value"],[1,"error-message"],[1,"cart-prod-name"],["class","cart-prod-disc",4,"ngIf"],[1,"text-right","font-bold"],["title","Remove",1,"btn-remove-sm",3,"click"],[1,"cart-prod-disc"],["colspan","5",1,"empty-cart-cell"],[1,"checkout-panel"],[1,"delivery-card"],["type","date",3,"ngModelChange","ngModel","min"],["type","time",3,"ngModelChange","ngModel"],["placeholder","Delivery notes...","rows","2",3,"ngModelChange","ngModel"],[1,"payment-card"],[1,"summary-line","total-line"],[1,"form-group","cash-group"],["type","number","placeholder","0.00",1,"cash-input",3,"ngModelChange","ngModel"],[1,"summary-line","change-line"],[1,"btn-checkout",3,"click","disabled"],["title","Clear Date",1,"btn-clear",3,"click"],[1,"pending-item"],[1,"pending-details"],[1,"pending-header"],[1,"header-left"],["class","product-name",4,"ngIf"],["class","status-badge warning",4,"ngIf"],["class","status-badge success",4,"ngIf"],[1,"sale-date"],["class","multi-item-list",4,"ngIf"],[1,"pending-info"],[1,"total-price"],["class","customer-details",4,"ngIf"],["class","delivery-info",4,"ngIf"],[1,"pending-actions"],[1,"btn-edit",3,"click"],["class","btn-confirm","title","Confirm Reservation",3,"click",4,"ngIf"],["title","Cancel Order",1,"btn-delete",3,"click"],["class","btn-deliver",3,"click",4,"ngIf"],[1,"product-name"],[1,"status-badge","warning"],[1,"status-badge","success"],[1,"multi-item-list"],["class","sub-item",4,"ngFor","ngForOf"],[1,"sub-item"],[1,"sub-qty"],[1,"customer-details"],[1,"customer-header"],[1,"customer-row"],[1,"customer-label"],[1,"customer-value"],[1,"delivery-info"],["title","Confirm Reservation",1,"btn-confirm",3,"click"],[1,"btn-deliver",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],["for","editDate"],["type","date","id","editDate",1,"date-input",3,"ngModelChange","ngModel","min"],["for","editTime"],["type","time","id","editTime",1,"time-input",3,"ngModelChange","ngModel"],["for","editNotes"],["id","editNotes","rows","3",1,"textarea-input",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn-cancel",3,"click"],[1,"btn-save",3,"click"]],template:function(r,i){r&1&&(f(0,"div",0)(1,"h3"),g(2,"Point of Sale"),h(),f(3,"div",1)(4,"div",2)(5,"div",3)(6,"div",4)(7,"label",5),g(8,"Select Customer"),h(),f(9,"select",6),J("ngModelChange",function(s){return Z(i.selectedCustomerId,s)||(i.selectedCustomerId=s),s}),f(10,"option",7),g(11,"-- Walk-in Customer --"),h(),U(12,hO,2,2,"option",8),h()(),f(13,"div",9)(14,"label",10),g(15,"Select Product"),h(),f(16,"select",11),J("ngModelChange",function(s){return Z(i.selectedProductId,s)||(i.selectedProductId=s),s}),j("change",function(){return i.onProductChange()}),f(17,"option",7),g(18,"-- Choose a product --"),h(),U(19,fO,3,7,"option",8),h()()(),f(20,"div",12)(21,"div",13)(22,"label",14),g(23,"Quantity"),h(),f(24,"input",15),J("ngModelChange",function(s){return Z(i.quantity,s)||(i.quantity=s),s}),h()(),f(25,"div",4)(26,"label"),g(27,"Discount"),h(),f(28,"div",16)(29,"input",17),J("ngModelChange",function(s){return Z(i.discount,s)||(i.discount=s),s}),h(),f(30,"select",18),J("ngModelChange",function(s){return Z(i.discountType,s)||(i.discountType=s),s}),f(31,"option",19),g(32,"$"),h(),f(33,"option",20),g(34,"%"),h()()()(),f(35,"div",4)(36,"button",21),j("click",function(){return i.addToCart()}),g(37," \u2795 Add to Cart "),h()()()(),U(38,pO,2,1,"div",22),f(39,"div",23)(40,"table",24)(41,"thead")(42,"tr")(43,"th"),g(44,"Product"),h(),f(45,"th",25),g(46,"Price"),h(),f(47,"th",26),g(48,"Qty"),h(),f(49,"th",25),g(50,"Total"),h(),xe(51,"th"),h()(),f(52,"tbody"),U(53,gO,16,11,"tr",27)(54,yO,3,0,"tr",28),h()()(),U(55,vO,36,16,"div",29),h()(),f(56,"div",30)(57,"h3"),g(58,"\u{1F69A} Pending Deliveries"),h(),f(59,"div",31)(60,"div",32)(61,"label",33),g(62,"Date:"),h(),f(63,"input",34),J("ngModelChange",function(s){return Z(i.deliveryFilterDate,s)||(i.deliveryFilterDate=s),s}),h(),U(64,_O,2,0,"button",35),h(),f(65,"div",32)(66,"label",36),g(67,"Show:"),h(),f(68,"select",37),J("ngModelChange",function(s){return Z(i.statusFilter,s)||(i.statusFilter=s),s}),f(69,"option",38),g(70,"All Deliveries"),h(),f(71,"option",39),g(72,"\u26A0\uFE0F Reservations"),h()()()(),f(73,"div",40),U(74,NO,27,19,"div",41),h()(),U(75,RO,25,4,"div",42)),r&2&&(v(9),Y("ngModel",i.selectedCustomerId),v(3),D("ngForOf",i.customers),v(4),Y("ngModel",i.selectedProductId),v(3),D("ngForOf",i.products),v(5),Y("ngModel",i.quantity),D("min",1)("max",i.maxQuantity),v(5),Y("ngModel",i.discount),v(),Y("ngModel",i.discountType),v(6),D("disabled",!i.selectedProductId),v(2),D("ngIf",i.errorMessage),v(15),D("ngForOf",i.cart),v(),D("ngIf",i.cart.length===0),v(),D("ngIf",i.cart.length>0),v(8),Y("ngModel",i.deliveryFilterDate),v(),D("ngIf",i.deliveryFilterDate),v(4),Y("ngModel",i.statusFilter),v(6),D("ngForOf",i.groupedPendingSales),v(),D("ngIf",i.isEditModalOpen))},dependencies:[ke,tt,Ke,Mb,ho,jn,it,sn,an,nt,lr,kt,rt,ur,Yf,Ze],styles:[".form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg);margin-top:var(--space-lg)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--space-lg)}.delivery-section[_ngcontent-%COMP%]{background:var(--color-bg);padding:var(--space-lg);border-radius:var(--radius-lg);border:2px dashed var(--color-border);margin-top:var(--space-md)}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);font-size:1rem;font-weight:600;color:var(--color-text);margin-bottom:var(--space-lg)}.section-icon[_ngcontent-%COMP%]{font-size:1.25rem}.date-input[_ngcontent-%COMP%], .time-input[_ngcontent-%COMP%]{cursor:pointer}.textarea-input[_ngcontent-%COMP%]{font-family:inherit;font-size:.9375rem;padding:var(--space-sm) var(--space-md);border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-surface);color:var(--color-text);transition:all var(--transition-base);width:100%;resize:vertical;min-height:80px}.textarea-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f61a}.textarea-input[_ngcontent-%COMP%]::placeholder{color:var(--color-text-muted)}.customer-info-display[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f61a,#9333ea1a);border:2px solid var(--color-primary);border-radius:var(--radius-lg);padding:var(--space-lg);margin-bottom:var(--space-lg)}.info-header[_ngcontent-%COMP%]{font-weight:600;font-size:1rem;color:var(--color-primary);margin-bottom:var(--space-md);display:flex;align-items:center;gap:var(--space-sm)}.info-row[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm);padding:var(--space-xs) 0;font-size:.875rem}.info-label[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text-muted);min-width:120px}.info-value[_ngcontent-%COMP%]{color:var(--color-text);flex:1}.transaction-summary[_ngcontent-%COMP%]{background:var(--color-bg);border-radius:var(--radius-md);padding:var(--space-lg);margin-top:var(--space-md)}.summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--space-sm) 0;font-size:1.125rem}.summary-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text-muted)}.summary-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text);font-size:1.25rem}.change-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:var(--color-success)}.change-row.negative[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:var(--color-danger)}.delivery-info[_ngcontent-%COMP%]{border-top:1px solid var(--color-border);margin-top:var(--space-sm);padding-top:var(--space-md)}.delivery-info[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1rem;color:var(--color-primary)}.error-message[_ngcontent-%COMP%]{background:#fee;color:var(--color-danger);padding:var(--space-md);border-radius:var(--radius-md);font-size:.875rem;border:1px solid rgba(239,68,68,.2)}.btn-success[_ngcontent-%COMP%]{background:var(--color-success)}.btn-success[_ngcontent-%COMP%]:hover{background:#059669}@media (max-width: 640px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}.pending-deliveries[_ngcontent-%COMP%]{margin-top:var(--space-xl);border-top:4px solid var(--color-warning)}.pending-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm);margin-top:var(--space-md)}.pending-item[_ngcontent-%COMP%]{background:var(--color-bg);border:1px solid var(--color-border);border-radius:var(--radius-md);padding:var(--space-sm);display:flex;justify-content:space-between;align-items:flex-start;gap:var(--space-md)}.pending-details[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:2px}.pending-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:4px}.header-left[_ngcontent-%COMP%]{display:flex;flex-direction:column}.product-name[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text);font-size:1rem}.sale-date[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted);white-space:nowrap}.multi-item-list[_ngcontent-%COMP%]{background:#00000005;border-radius:4px;padding:4px 8px;margin-bottom:4px;border-left:2px solid var(--color-border)}.sub-item[_ngcontent-%COMP%]{font-size:.85rem;color:var(--color-text);line-height:1.3}.sub-qty[_ngcontent-%COMP%]{color:var(--color-text-muted);font-size:.8rem}.pending-info[_ngcontent-%COMP%]{display:flex;gap:var(--space-md);font-size:.9rem;color:var(--color-text);align-items:center;background:var(--color-surface);padding:4px 8px;border-radius:4px;width:fit-content}.total-price[_ngcontent-%COMP%]{color:var(--color-primary);font-weight:600}.delivery-info[_ngcontent-%COMP%]{margin-top:4px;padding-top:4px;border-top:1px dashed var(--color-border);font-size:.85rem;color:var(--color-primary);display:grid;grid-template-columns:auto auto 1fr;gap:8px}.btn-deliver[_ngcontent-%COMP%]{background:var(--color-success);color:#fff;border:none;padding:6px 12px;border-radius:var(--radius-md);font-weight:500;font-size:.9rem;cursor:pointer;transition:all var(--transition-base);white-space:nowrap;height:fit-content}.btn-deliver[_ngcontent-%COMP%]:hover{background:#059669;transform:translateY(-1px)}@media (max-width: 640px){.pending-item[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.delivery-info[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:2px}.btn-deliver[_ngcontent-%COMP%]{width:100%;margin-top:8px}}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.modal-content[_ngcontent-%COMP%]{background-color:var(--color-surface);padding:2rem;border-radius:12px;width:90%;max-width:500px;box-shadow:0 10px 25px #0003;animation:_ngcontent-%COMP%_slideIn .3s ease-out;color:var(--color-text)}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translateY(-20px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;border-bottom:1px solid var(--color-border);padding-bottom:1rem}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--color-text)}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:var(--color-text-muted)}.modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.modal-footer[_ngcontent-%COMP%]{margin-top:2rem;display:flex;justify-content:flex-end;gap:1rem;padding-top:1rem;border-top:1px solid var(--color-border)}.btn-cancel[_ngcontent-%COMP%]{padding:.5rem 1rem;border:1px solid var(--color-border);background-color:var(--color-surface);color:var(--color-text);border-radius:6px;cursor:pointer;font-weight:500;transition:background-color .2s}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:var(--color-bg)}.btn-save[_ngcontent-%COMP%]{padding:.5rem 1rem;background-color:#4caf50;color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:500}.btn-save[_ngcontent-%COMP%]:hover{background-color:#45a049}.pending-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;margin-left:1rem}.btn-edit[_ngcontent-%COMP%]{padding:.5rem 1rem;background-color:#2196f3;color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:500;transition:background-color .2s}.btn-edit[_ngcontent-%COMP%]:hover{background-color:#1976d2}.customer-details[_ngcontent-%COMP%]{margin-top:4px;padding:4px 8px;background:linear-gradient(135deg,#8b5cf61a,#6366f11a);border-left:3px solid #8b5cf6;border-radius:4px;font-size:.85rem}.customer-header[_ngcontent-%COMP%]{font-weight:600;color:#8b5cf6;margin-bottom:2px;font-size:.85rem;display:inline-block;margin-right:8px}.customer-row[_ngcontent-%COMP%]{display:inline-flex;gap:4px;margin-right:12px;font-size:.85rem}.customer-label[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text-muted);min-width:auto}.customer-value[_ngcontent-%COMP%]{color:var(--color-text);font-weight:400}.radio-group[_ngcontent-%COMP%]{display:flex;background:var(--color-bg);padding:4px;border-radius:8px;border:1px solid var(--color-border);gap:4px}.radio-label[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;padding:8px 12px;cursor:pointer;font-size:.9rem;font-weight:500;color:var(--color-text-muted);border-radius:6px;transition:all .2s ease;text-align:center;-webkit-user-select:none;user-select:none}.radio-label[_ngcontent-%COMP%]:hover{background:var(--color-surface);color:var(--color-text)}.radio-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.radio-label[_ngcontent-%COMP%]:has(input:checked){background:var(--color-primary);color:#fff;box-shadow:0 2px 4px #0000001a}.discount-value[_ngcontent-%COMP%]{color:var(--color-danger);font-weight:600}.total-row[_ngcontent-%COMP%]{border-top:1px solid var(--color-border);margin-top:var(--space-sm);padding-top:var(--space-md)}.status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:.75rem;font-weight:600;text-transform:uppercase}.status-badge.warning[_ngcontent-%COMP%]{background:#fef3c7;color:#d97706;border:1px solid #fcd34d}.btn-confirm[_ngcontent-%COMP%]{padding:.5rem 1rem;background-color:#f59e0b;color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:500;transition:all .2s;white-space:nowrap}.btn-delete[_ngcontent-%COMP%]{padding:.5rem 1rem;background-color:#ef4444;color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:500;transition:all .2s;white-space:nowrap}.btn-delete[_ngcontent-%COMP%]:hover{background-color:#dc2626;transform:translateY(-1px)}.pos-layout[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg)}.selection-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md);padding-bottom:var(--space-md);border-bottom:1px dashed var(--color-border)}.flex-grow[_ngcontent-%COMP%]{flex:1}.align-end[_ngcontent-%COMP%]{align-items:flex-end}.small-width[_ngcontent-%COMP%]{width:80px}.discount-row[_ngcontent-%COMP%]{display:flex;gap:4px}.small-input[_ngcontent-%COMP%]{width:80px;padding:8px;border:1px solid var(--color-border);border-radius:6px}.small-select[_ngcontent-%COMP%]{padding:8px;border:1px solid var(--color-border);border-radius:6px;background:var(--color-surface)}.btn-add[_ngcontent-%COMP%]{padding:10px 20px;background:var(--color-primary);color:#fff;border:none;border-radius:6px;font-weight:600;cursor:pointer;transition:all .2s;height:42px}.btn-add[_ngcontent-%COMP%]:disabled{background:var(--color-border);cursor:not-allowed}.btn-add[_ngcontent-%COMP%]:not(:disabled):hover{filter:brightness(1.1);transform:translateY(-1px)}.cart-container[_ngcontent-%COMP%]{overflow-x:auto;border:1px solid var(--color-border);border-radius:8px;background:var(--color-surface)}.cart-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:.9rem}.cart-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:var(--color-bg);padding:10px;text-align:left;font-weight:600;color:var(--color-text-muted);border-bottom:1px solid var(--color-border)}.cart-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;border-bottom:1px solid var(--color-border);vertical-align:middle}.cart-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.text-right[_ngcontent-%COMP%]{text-align:right}.text-center[_ngcontent-%COMP%]{text-align:center}.font-bold[_ngcontent-%COMP%]{font-weight:600}.cart-prod-name[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text)}.cart-prod-disc[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-danger)}.btn-remove-sm[_ngcontent-%COMP%]{background:none;border:none;color:var(--color-text-muted);cursor:pointer;padding:4px 8px;border-radius:4px}.btn-remove-sm[_ngcontent-%COMP%]:hover{background:#fee;color:var(--color-danger)}.empty-cart-cell[_ngcontent-%COMP%]{padding:2rem;text-align:center;color:var(--color-text-muted);font-style:italic}.checkout-panel[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--space-lg);margin-top:var(--space-md)}@media (max-width: 768px){.checkout-panel[_ngcontent-%COMP%]{grid-template-columns:1fr}}.delivery-card[_ngcontent-%COMP%], .payment-card[_ngcontent-%COMP%]{background:var(--color-surface);border:1px solid var(--color-border);border-radius:8px;padding:var(--space-md);display:flex;flex-direction:column;gap:var(--space-md)}.delivery-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .payment-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:1rem;color:var(--color-primary);border-bottom:1px solid var(--color-border);padding-bottom:8px}.cash-group[_ngcontent-%COMP%]{margin:var(--space-sm) 0}.cash-input[_ngcontent-%COMP%]{font-size:1.2rem;padding:10px;border:2px solid var(--color-border);border-radius:6px;width:100%}.cash-input[_ngcontent-%COMP%]:focus{border-color:var(--color-success);outline:none}.total-line[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:1.2rem;font-weight:700;color:var(--color-text)}.change-line[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:1.1rem;font-weight:600;color:var(--color-success);padding-top:var(--space-sm);border-top:1px dashed var(--color-border)}.change-line.negative[_ngcontent-%COMP%]{color:var(--color-danger)}.btn-checkout[_ngcontent-%COMP%]{margin-top:auto;width:100%;padding:12px;background:var(--color-success);color:#fff;border:none;border-radius:6px;font-size:1.1rem;font-weight:700;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center;gap:8px}.btn-checkout[_ngcontent-%COMP%]:not(:disabled):hover{background:#059669;transform:translateY(-2px);box-shadow:0 4px 6px #0000001a}.btn-checkout[_ngcontent-%COMP%]:disabled{background:var(--color-border);cursor:not-allowed;opacity:.7}"]})}}return n})();function kO(n,e){if(n&1&&(f(0,"div",32)(1,"div",33),g(2),h(),f(3,"div",34),xe(4,"div",35),h(),f(5,"div",36),g(6),h()()),n&2){let t=e.$implicit,r=I();v(2),H(t.category),v(2),_n("width",t.total/r.totalSalesValue*100,"%"),D("title","$"+t.total.toFixed(2)),v(2),rn("$",t.total.toFixed(2)," (",t.count,")")}}function FO(n,e){n&1&&(f(0,"div",37),g(1," No sales data yet "),h())}function VO(n,e){if(n&1&&(f(0,"div",50),xe(1,"img",51),h()),n&2){let t=I().$implicit;v(),D("src",t.imageUrl,yn)("alt",t.name)}}function LO(n,e){n&1&&(f(0,"div",52)(1,"span",53),g(2,"\u{1F4E6}"),h()())}function jO(n,e){if(n&1){let t=te();f(0,"div",40),U(1,VO,2,2,"div",41)(2,LO,3,0,"div",42),f(3,"div",43)(4,"div",44),g(5),h(),f(6,"div",45),g(7),h()(),f(8,"div",46)(9,"div",47),g(10),h(),f(11,"div",48),g(12),h(),f(13,"button",49),j("click",function(){let i=R(t).$implicit,o=I(2);return k(o.openEditModal(i))}),g(14," \u270F\uFE0F Edit "),h()()()}if(n&2){let t=e.$implicit;v(),D("ngIf",t.imageUrl),v(),D("ngIf",!t.imageUrl),v(3),H(t.name),v(2),H(t.category),v(3),q("$",t.price.toFixed(2),""),v(2),q("Stock: ",t.quantity,"")}}function BO(n,e){if(n&1&&(f(0,"div",38),U(1,jO,15,6,"div",39),h()),n&2){let t=I();v(),D("ngForOf",t.paginatedAvailableProducts)}}function UO(n,e){if(n&1&&(f(0,"option",59),g(1),h()),n&2){let t=e.$implicit;D("value",t),v(),H(t)}}function $O(n,e){if(n&1){let t=te();f(0,"button",64),j("click",function(){let i=R(t).$implicit,o=I(3);return k(o.goToAvailablePage(i))}),g(1),h()}if(n&2){let t=e.$implicit,r=I(3);_e("active",t===r.availableProductsPage),v(),q(" ",t," ")}}function zO(n,e){if(n&1){let t=te();f(0,"div",60)(1,"button",61),j("click",function(){R(t);let i=I(2);return k(i.prevAvailablePage())}),g(2," \u2190 Prev "),h(),f(3,"div",62),U(4,$O,2,3,"button",63),h(),f(5,"button",61),j("click",function(){R(t);let i=I(2);return k(i.nextAvailablePage())}),g(6," Next \u2192 "),h()()}if(n&2){let t=I(2);v(),D("disabled",t.availableProductsPage===1),v(3),D("ngForOf",t.getPageNumbers(t.availableProductsTotalPages)),v(),D("disabled",t.availableProductsPage===t.availableProductsTotalPages)}}function qO(n,e){if(n&1){let t=te();f(0,"div",54)(1,"div",55)(2,"label",56),g(3,"Show:"),h(),f(4,"select",57),J("ngModelChange",function(i){R(t);let o=I();return Z(o.availableProductsPageSize,i)||(o.availableProductsPageSize=i),k(i)}),j("change",function(){R(t);let i=I();return k(i.onAvailablePageSizeChange())}),U(5,UO,2,2,"option",28),h(),f(6,"span"),g(7,"per page"),h()(),U(8,zO,7,3,"div",58),h()}if(n&2){let t=I();v(4),Y("ngModel",t.availableProductsPageSize),v(),D("ngForOf",t.pageSizeOptions),v(3),D("ngIf",t.availableProductsTotalPages>1)}}function HO(n,e){n&1&&(f(0,"div",65)(1,"p"),g(2,"No available products"),h()())}function GO(n,e){if(n&1&&(f(0,"span",80),g(1),h()),n&2){let t=I().$implicit;v(),q("(",t.quantityCount," items)")}}function WO(n,e){if(n&1&&(f(0,"div",81),g(1),h()),n&2){let t=I().$implicit;v(),rn(" ",t.items[0].quantitySold," \xD7 $",t.items[0].price.toFixed(2)," ")}}function QO(n,e){if(n&1&&(f(0,"div",83),g(1),h()),n&2){let t=e.$implicit;v(),rn(" \u2022 ",t.productName," (x",t.quantitySold,") ")}}function KO(n,e){if(n&1&&(f(0,"div",81),U(1,QO,2,2,"div",82),h()),n&2){let t=I().$implicit;v(),D("ngForOf",t.items)}}function YO(n,e){if(n&1&&(f(0,"span"),g(1),ae(2,"date"),h()),n&2){let t=I().$implicit;v(),q("(",ge(2,1,t.deliveryDate,"shortDate"),")")}}function JO(n,e){if(n&1&&(f(0,"div",70)(1,"div",71)(2,"div",72),g(3),U(4,GO,2,1,"span",73),h(),U(5,WO,2,2,"div",74)(6,KO,2,1,"div",74),f(7,"div",75),g(8," Pending Delivery "),U(9,YO,3,4,"span",76),h()(),f(10,"div",77)(11,"div",78),g(12),h(),f(13,"div",79),g(14),ae(15,"date"),h()()()),n&2){let t=e.$implicit;v(3),q(" ",t.productName," "),v(),D("ngIf",t.isGroup),v(),D("ngIf",!t.isGroup),v(),D("ngIf",t.isGroup),v(3),D("ngIf",t.deliveryDate),v(3),q("$",t.total.toFixed(2),""),v(2),H(ge(15,7,t.timestamp,"short"))}}function XO(n,e){if(n&1&&(f(0,"div",66)(1,"h3")(2,"span",5),g(3,"\u{1F69A}"),h(),g(4," Pending Deliveries "),f(5,"span",67),g(6),h()(),f(7,"div",68),U(8,JO,16,10,"div",69),h()()),n&2){let t=I();v(6),H(t.pendingSales.length),v(2),D("ngForOf",t.groupedPendingSales)}}function ZO(n,e){if(n&1&&(f(0,"option",59),g(1),h()),n&2){let t=e.$implicit;D("value",t),v(),H(t)}}function eN(n,e){if(n&1&&(f(0,"div",85),g(1),ae(2,"date"),h()),n&2){let t=I().$implicit;v(),q(" \u{1F69A} ",ge(2,1,t.deliveryDate,"MMM d, y")," ")}}function tN(n,e){if(n&1&&(f(0,"div",70)(1,"div",71)(2,"div",72),g(3),h(),f(4,"div",81),g(5),h(),U(6,eN,3,4,"div",84),h(),f(7,"div",77)(8,"div",78),g(9),h(),f(10,"div",79),g(11),ae(12,"date"),h()()()),n&2){let t=e.$implicit;v(3),H(t.productName),v(2),rn(" ",t.quantitySold," \xD7 $",t.price.toFixed(2)," "),v(),D("ngIf",t.deliveryDate),v(3),q("$",t.total.toFixed(2),""),v(2),H(ge(12,6,t.timestamp,"short"))}}function nN(n,e){if(n&1&&(f(0,"div",68),U(1,tN,13,9,"div",69),h()),n&2){let t=I();v(),D("ngForOf",t.paginatedSales)}}function rN(n,e){if(n&1&&(f(0,"option",59),g(1),h()),n&2){let t=e.$implicit;D("value",t),v(),H(t)}}function iN(n,e){if(n&1){let t=te();f(0,"button",64),j("click",function(){let i=R(t).$implicit,o=I(3);return k(o.goToSalesPage(i))}),g(1),h()}if(n&2){let t=e.$implicit,r=I(3);_e("active",t===r.salesPage),v(),q(" ",t," ")}}function oN(n,e){if(n&1){let t=te();f(0,"div",60)(1,"button",61),j("click",function(){R(t);let i=I(2);return k(i.prevSalesPage())}),g(2," \u2190 Prev "),h(),f(3,"div",62),U(4,iN,2,3,"button",63),h(),f(5,"button",61),j("click",function(){R(t);let i=I(2);return k(i.nextSalesPage())}),g(6," Next \u2192 "),h()()}if(n&2){let t=I(2);v(),D("disabled",t.salesPage===1),v(3),D("ngForOf",t.getPageNumbers(t.salesTotalPages)),v(),D("disabled",t.salesPage===t.salesTotalPages)}}function sN(n,e){if(n&1){let t=te();f(0,"div",54)(1,"div",55)(2,"label",86),g(3,"Show:"),h(),f(4,"select",87),J("ngModelChange",function(i){R(t);let o=I();return Z(o.salesPageSize,i)||(o.salesPageSize=i),k(i)}),j("change",function(){R(t);let i=I();return k(i.onSalesPageSizeChange())}),U(5,rN,2,2,"option",28),h(),f(6,"span"),g(7,"per page"),h()(),U(8,oN,7,3,"div",58),h()}if(n&2){let t=I();v(4),Y("ngModel",t.salesPageSize),v(),D("ngForOf",t.pageSizeOptions),v(3),D("ngIf",t.salesTotalPages>1)}}function aN(n,e){n&1&&(f(0,"div",65)(1,"p"),g(2,"No sales yet"),h()())}function cN(n,e){if(n&1&&(f(0,"div",50),xe(1,"img",51),h()),n&2){let t=I().$implicit;v(),D("src",t.imageUrl,yn)("alt",t.name)}}function lN(n,e){n&1&&(f(0,"div",52)(1,"span",53),g(2,"\u{1F4E6}"),h()())}function uN(n,e){if(n&1&&(f(0,"option",59),g(1),h()),n&2){let t=e.$implicit;D("value",t),v(),H(t)}}function dN(n,e){if(n&1){let t=te();f(0,"button",64),j("click",function(){let i=R(t).$implicit,o=I(5);return k(o.goToOutOfStockPage(i))}),g(1),h()}if(n&2){let t=e.$implicit,r=I(5);_e("active",t===r.outOfStockPage),v(),q(" ",t," ")}}function hN(n,e){if(n&1){let t=te();f(0,"div",60)(1,"button",61),j("click",function(){R(t);let i=I(4);return k(i.prevOutOfStockPage())}),g(2," \u2190 Prev "),h(),f(3,"div",62),U(4,dN,2,3,"button",63),h(),f(5,"button",61),j("click",function(){R(t);let i=I(4);return k(i.nextOutOfStockPage())}),g(6," Next \u2192 "),h()()}if(n&2){let t=I(4);v(),D("disabled",t.outOfStockPage===1),v(3),D("ngForOf",t.getPageNumbers(t.outOfStockTotalPages)),v(),D("disabled",t.outOfStockPage===t.outOfStockTotalPages)}}function fN(n,e){if(n&1){let t=te();f(0,"div",54)(1,"div",55)(2,"label",94),g(3,"Show:"),h(),f(4,"select",95),J("ngModelChange",function(i){R(t);let o=I(3);return Z(o.outOfStockPageSize,i)||(o.outOfStockPageSize=i),k(i)}),j("change",function(){R(t);let i=I(3);return k(i.onOutOfStockPageSizeChange())}),U(5,uN,2,2,"option",28),h(),f(6,"span"),g(7,"per page"),h()(),U(8,hN,7,3,"div",58),h()}if(n&2){let t=I(3);v(4),Y("ngModel",t.outOfStockPageSize),v(),D("ngForOf",t.pageSizeOptions),v(3),D("ngIf",t.outOfStockTotalPages>1)}}function pN(n,e){if(n&1){let t=te();f(0,"div",90),U(1,cN,2,2,"div",41)(2,lN,3,0,"div",42),f(3,"div",43)(4,"div",44),g(5),f(6,"div")(7,"div",45),g(8),h()(),f(9,"div",46)(10,"div",47),g(11),h(),f(12,"div",91),g(13,"Out of Stock"),h(),f(14,"div",92)(15,"button",93),j("click",function(){let i=R(t).$implicit,o=I(2);return k(o.onRestock(i))}),g(16," \u2795 Restock "),h()()()()(),U(17,fN,9,3,"div",22),h()}if(n&2){let t=e.$implicit,r=I(2);v(),D("ngIf",t.imageUrl),v(),D("ngIf",!t.imageUrl),v(3),q(" ",t.name,""),v(3),H(t.category),v(3),q("$",t.price.toFixed(2),""),v(6),D("ngIf",r.outOfStockTotalPages>1||r.outOfStockProducts.length>10)}}function mN(n,e){if(n&1&&(f(0,"div",88)(1,"h3")(2,"span",5),g(3,"\u26A0\uFE0F"),h(),g(4," Out of Stock "),f(5,"span",67),g(6),h()(),f(7,"div",38),U(8,pN,18,6,"div",89),h()()),n&2){let t=I();v(6),H(t.outOfStockProducts.length),v(2),D("ngForOf",t.paginatedOutOfStockProducts)}}function gN(n,e){if(n&1){let t=te();f(0,"div",96),j("click",function(){R(t);let i=I();return k(i.closeEditModal())}),f(1,"div",97),j("click",function(i){return R(t),k(i.stopPropagation())}),f(2,"div",98)(3,"h3"),g(4,"Edit Product"),h(),f(5,"button",99),j("click",function(){R(t);let i=I();return k(i.closeEditModal())}),g(6,"\xD7"),h()(),f(7,"div",100)(8,"div",101)(9,"label",102),g(10,"Product Name"),h(),f(11,"input",103),J("ngModelChange",function(i){R(t);let o=I();return Z(o.editProductName,i)||(o.editProductName=i),k(i)}),h()(),f(12,"div",101)(13,"label",104),g(14,"Stock Quantity"),h(),f(15,"input",105),J("ngModelChange",function(i){R(t);let o=I();return Z(o.editProductQuantity,i)||(o.editProductQuantity=i),k(i)}),h()(),f(16,"div",101)(17,"label",106),g(18,"Price"),h(),f(19,"input",107),J("ngModelChange",function(i){R(t);let o=I();return Z(o.editProductPrice,i)||(o.editProductPrice=i),k(i)}),h()()(),f(20,"div",108)(21,"button",109),j("click",function(){R(t);let i=I();return k(i.closeEditModal())}),g(22,"Cancel"),h(),f(23,"button",110),j("click",function(){R(t);let i=I();return k(i.saveProductEdit())}),g(24,"Save Changes"),h()()()()}if(n&2){let t=I();v(11),Y("ngModel",t.editProductName),v(4),Y("ngModel",t.editProductQuantity),v(4),Y("ngModel",t.editProductPrice)}}var ww=(()=>{class n{constructor(t){this.inventoryService=t,this.products=[],this.sales=[],this.selectedCategory="All",this.categories=["All","Lechon","Hollow blocks","Sand and Gravel","Copra","Others"],this.pageSizeOptions=[10,20,50,100],this.availableProductsPage=1,this.availableProductsPageSize=10,this.salesPage=1,this.salesPageSize=10,this.outOfStockPage=1,this.outOfStockPageSize=10,this.isEditModalOpen=!1,this.editingProduct=null,this.editProductName="",this.editProductQuantity=0,this.editProductPrice=0}ngOnInit(){this.inventoryService.getProducts().subscribe(t=>{this.products=t}),this.inventoryService.getSales().subscribe(t=>{this.sales=t})}get pendingSales(){return this.sales.filter(t=>t.pending===!0)}get groupedPendingSales(){let t=new Map,r=[];this.pendingSales.forEach(o=>{o.orderId?(t.has(o.orderId)||t.set(o.orderId,[]),t.get(o.orderId).push(o)):r.push(o)});let i=[];return t.forEach((o,s)=>{let a=o[0];i.push({isGroup:!0,orderId:s,sales:o,total:o.reduce((l,u)=>l+u.total,0),productName:`Order #${s.substring(4,10)}...`,quantityCount:o.length,items:o,timestamp:a.timestamp,deliveryDate:a.deliveryDate,pending:!0})}),r.forEach(o=>{i.push({isGroup:!1,sales:[o],total:o.total,productName:o.productName,quantityCount:1,items:[o],timestamp:o.timestamp,deliveryDate:o.deliveryDate,pending:!0})}),i.sort((o,s)=>{let a=o.deliveryDate?new Date(o.deliveryDate).getTime():1/0,l=s.deliveryDate?new Date(s.deliveryDate).getTime():1/0;return a-l})}get filteredSales(){let t=this.sales.filter(r=>r.pending!==!0);return this.selectedCategory==="All"?t:t.filter(r=>r.category===this.selectedCategory)}get availableProducts(){return this.products.filter(t=>t.quantity>0)}get paginatedAvailableProducts(){let t=(this.availableProductsPage-1)*this.availableProductsPageSize,r=t+this.availableProductsPageSize;return this.availableProducts.slice(t,r)}get availableProductsTotalPages(){return Math.ceil(this.availableProducts.length/this.availableProductsPageSize)}get outOfStockProducts(){return this.products.filter(t=>t.quantity===0)}get paginatedOutOfStockProducts(){let t=(this.outOfStockPage-1)*this.outOfStockPageSize,r=t+this.outOfStockPageSize;return this.outOfStockProducts.slice(t,r)}get outOfStockTotalPages(){return Math.ceil(this.outOfStockProducts.length/this.outOfStockPageSize)}get paginatedSales(){let t=(this.salesPage-1)*this.salesPageSize,r=t+this.salesPageSize;return this.filteredSales.slice(t,r)}get salesTotalPages(){return Math.ceil(this.filteredSales.length/this.salesPageSize)}get salesByCategory(){let t=new Map;return this.sales.filter(r=>!r.pending).forEach(r=>{let i=t.get(r.category)||{total:0,count:0};t.set(r.category,{total:i.total+r.total,count:i.count+1})}),Array.from(t.entries()).map(([r,i])=>({category:r,total:i.total,count:i.count}))}get totalInventoryValue(){return this.products.reduce((t,r)=>t+r.price*r.quantity,0)}get totalSalesValue(){return this.sales.filter(t=>!t.pending).reduce((t,r)=>t+r.total,0)}nextAvailablePage(){this.availableProductsPage<this.availableProductsTotalPages&&this.availableProductsPage++}prevAvailablePage(){this.availableProductsPage>1&&this.availableProductsPage--}goToAvailablePage(t){t>=1&&t<=this.availableProductsTotalPages&&(this.availableProductsPage=t)}nextSalesPage(){this.salesPage<this.salesTotalPages&&this.salesPage++}prevSalesPage(){this.salesPage>1&&this.salesPage--}goToSalesPage(t){t>=1&&t<=this.salesTotalPages&&(this.salesPage=t)}nextOutOfStockPage(){this.outOfStockPage<this.outOfStockTotalPages&&this.outOfStockPage++}prevOutOfStockPage(){this.outOfStockPage>1&&this.outOfStockPage--}goToOutOfStockPage(t){this.outOfStockPage=t}onAvailablePageSizeChange(){this.availableProductsPage=1}onSalesPageSizeChange(){this.salesPage=1}onOutOfStockPageSizeChange(){this.outOfStockPage=1}getPageNumbers(t){return Array.from({length:t},(r,i)=>i+1)}onRestock(t){let r=prompt(`Enter quantity to add for ${t.name}:`);if(r){let i=parseInt(r,10);!isNaN(i)&&i>0?this.inventoryService.restockProduct(t.id,i):alert("Please enter a valid number greater than 0")}}openEditModal(t){this.editingProduct=t,this.editProductName=t.name,this.editProductQuantity=t.quantity,this.editProductPrice=t.price,this.isEditModalOpen=!0}closeEditModal(){this.isEditModalOpen=!1,this.editingProduct=null,this.editProductName="",this.editProductQuantity=0,this.editProductPrice=0}saveProductEdit(){if(!this.editingProduct)return;if(!this.editProductName.trim()){alert("Product name cannot be empty");return}if(this.editProductQuantity<0){alert("Quantity cannot be negative");return}if(this.editProductPrice<0){alert("Price cannot be negative");return}let t=ue(ee({},this.editingProduct),{name:this.editProductName,quantity:this.editProductQuantity,price:this.editProductPrice});this.inventoryService.updateProduct(t),this.closeEditModal()}static{this.\u0275fac=function(r){return new(r||n)(K(Vt))}}static{this.\u0275cmp=Ve({type:n,selectors:[["app-inventory-list"]],standalone:!0,features:[Le],decls:63,vars:17,consts:[["noAvailable",""],["noSales",""],[1,"inventory-section"],[1,"inventory-content"],[1,"card","analytics-card"],[1,"icon"],[1,"analytics-grid"],[1,"chart-container"],[1,"bar-chart"],["class","bar-item",4,"ngFor","ngForOf"],["class","empty-chart",4,"ngIf"],[1,"stats-grid"],[1,"stat-card"],[1,"stat-icon"],[1,"stat-info"],[1,"stat-label"],[1,"stat-value"],[1,"stat-card","success"],[1,"lists-container"],[1,"card"],[1,"badge"],["class","product-list",4,"ngIf","ngIfElse"],["class","pagination",4,"ngIf"],["class","card pending-section",4,"ngIf"],[1,"section-header"],[1,"filter-group"],["for","categoryFilter"],["id","categoryFilter",1,"category-filter",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","sales-list",4,"ngIf","ngIfElse"],["class","card out-of-stock-section",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"bar-item"],[1,"bar-label"],[1,"bar-wrapper"],[1,"bar-fill",3,"title"],[1,"bar-value"],[1,"empty-chart"],[1,"product-list"],["class","product-item",4,"ngFor","ngForOf"],[1,"product-item"],["class","product-image-wrapper",4,"ngIf"],["class","product-image-wrapper placeholder",4,"ngIf"],[1,"product-info"],[1,"product-name"],[1,"product-category"],[1,"product-details"],[1,"product-price"],[1,"product-stock"],[1,"btn-edit-sm",3,"click"],[1,"product-image-wrapper"],["loading","lazy",1,"product-image",3,"src","alt"],[1,"product-image-wrapper","placeholder"],[1,"placeholder-icon"],[1,"pagination"],[1,"pagination-size"],["for","availablePageSize"],["id","availablePageSize",1,"page-size-select",3,"ngModelChange","change","ngModel"],["class","pagination-controls",4,"ngIf"],[3,"value"],[1,"pagination-controls"],[1,"pagination-btn",3,"click","disabled"],[1,"pagination-pages"],["class","pagination-page",3,"active","click",4,"ngFor","ngForOf"],[1,"pagination-page",3,"click"],[1,"empty-state"],[1,"card","pending-section"],[1,"badge","warning"],[1,"sales-list"],["class","sale-item",4,"ngFor","ngForOf"],[1,"sale-item"],[1,"sale-info"],[1,"sale-name"],["style","font-size:0.8em; color:gray",4,"ngIf"],["class","sale-details-text",4,"ngIf"],[1,"delivery-badge","warning"],[4,"ngIf"],[1,"sale-amount"],[1,"sale-total"],[1,"sale-date"],[2,"font-size","0.8em","color","gray"],[1,"sale-details-text"],["style","font-size:0.9em; margin-bottom:2px",4,"ngFor","ngForOf"],[2,"font-size","0.9em","margin-bottom","2px"],["class","delivery-badge",4,"ngIf"],[1,"delivery-badge"],["for","salesPageSize"],["id","salesPageSize",1,"page-size-select",3,"ngModelChange","change","ngModel"],[1,"card","out-of-stock-section"],["class","product-item dimmed",4,"ngFor","ngForOf"],[1,"product-item","dimmed"],[1,"product-stock","out"],[1,"product-actions"],[1,"btn-restock",3,"click"],["for","outOfStockPageSize"],["id","outOfStockPageSize",1,"page-size-select",3,"ngModelChange","change","ngModel"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"form-group"],["for","editName"],["type","text","id","editName",1,"text-input",3,"ngModelChange","ngModel"],["for","editQuantity"],["type","number","id","editQuantity","min","0",1,"number-input",3,"ngModelChange","ngModel"],["for","editPrice"],["type","number","id","editPrice","min","0","step","0.01",1,"number-input",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn-cancel",3,"click"],[1,"btn-save",3,"click"]],template:function(r,i){if(r&1){let o=te();f(0,"div",2)(1,"div",3)(2,"div",4)(3,"h3")(4,"span",5),g(5,"\u{1F4C8}"),h(),g(6," Sales Analytics "),h(),f(7,"div",6)(8,"div",7)(9,"h4"),g(10,"Sales by Category"),h(),f(11,"div",8),U(12,kO,7,6,"div",9)(13,FO,2,0,"div",10),h()()()(),f(14,"div",11)(15,"div",12)(16,"div",13),g(17,"\u{1F4B0}"),h(),f(18,"div",14)(19,"div",15),g(20,"Total Inventory Value"),h(),f(21,"div",16),g(22),h()()(),f(23,"div",17)(24,"div",13),g(25,"\u{1F4CA}"),h(),f(26,"div",14)(27,"div",15),g(28,"Total Sales"),h(),f(29,"div",16),g(30),h()()()(),f(31,"div",18)(32,"div",19)(33,"h3")(34,"span",5),g(35,"\u{1F4E6}"),h(),g(36," Available Inventory "),f(37,"span",20),g(38),h()(),U(39,BO,2,1,"div",21)(40,qO,9,3,"div",22)(41,HO,3,0,"ng-template",null,0,or),h(),U(43,XO,9,2,"div",23),f(44,"div",19)(45,"div",24)(46,"h3")(47,"span",5),g(48,"\u{1F4B0}"),h(),g(49," Sales History "),f(50,"span",20),g(51),h()(),f(52,"div",25)(53,"label",26),g(54,"Filter by Category:"),h(),f(55,"select",27),J("ngModelChange",function(a){return R(o),Z(i.selectedCategory,a)||(i.selectedCategory=a),k(a)}),j("change",function(){return R(o),k(i.salesPage=1)}),U(56,ZO,2,2,"option",28),h()()(),U(57,nN,2,1,"div",29)(58,sN,9,3,"div",22)(59,aN,3,0,"ng-template",null,1,or),h(),U(61,mN,9,2,"div",30)(62,gN,25,3,"div",31),h()()()}if(r&2){let o=ir(42),s=ir(60);v(12),D("ngForOf",i.salesByCategory),v(),D("ngIf",i.salesByCategory.length===0),v(9),q("$",i.totalInventoryValue.toFixed(2),""),v(8),q("$",i.totalSalesValue.toFixed(2),""),v(8),H(i.availableProducts.length),v(),D("ngIf",i.availableProducts.length>0)("ngIfElse",o),v(),D("ngIf",i.availableProductsTotalPages>1||i.availableProducts.length>10),v(3),D("ngIf",i.pendingSales.length>0),v(8),H(i.filteredSales.length),v(4),Y("ngModel",i.selectedCategory),v(),D("ngForOf",i.categories),v(),D("ngIf",i.sales.length>0)("ngIfElse",s),v(),D("ngIf",i.salesTotalPages>1||i.filteredSales.length>10),v(3),D("ngIf",i.outOfStockProducts.length>0),v(),D("ngIf",i.isEditModalOpen)}},dependencies:[ke,tt,Ke,jn,it,sn,an,nt,lr,kt,rt,ur,Ze],styles:[".inventory-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xl)}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:var(--space-lg);margin-bottom:var(--space-2xl)}.analytics-card[_ngcontent-%COMP%]{margin-bottom:var(--space-2xl)}.analytics-grid[_ngcontent-%COMP%]{margin-top:var(--space-lg)}.chart-container[_ngcontent-%COMP%]{background:var(--color-bg);padding:var(--space-lg);border-radius:var(--radius-md)}.chart-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 var(--space-lg) 0;color:var(--color-text);font-size:1rem}.bar-chart[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md)}.bar-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:80px 1fr 120px;gap:var(--space-sm);align-items:center}.bar-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.bar-wrapper[_ngcontent-%COMP%]{height:24px;background:var(--color-surface);border-radius:var(--radius-md);overflow:hidden;border:1px solid var(--color-border)}.bar-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,var(--color-primary),var(--color-success));transition:width .3s ease;min-width:2%}.bar-value[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:var(--color-text);text-align:right}.empty-chart[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl);color:var(--color-text-muted);font-style:italic}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:var(--space-md);margin-bottom:var(--space-lg)}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.filter-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm)}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.category-filter[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-surface);color:var(--color-text);font-size:.875rem;cursor:pointer;transition:all var(--transition-base)}.category-filter[_ngcontent-%COMP%]:hover{border-color:var(--color-primary)}.category-filter[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f61a}.stat-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-primary),var(--color-primary-dark));color:#fff;padding:var(--space-xl);border-radius:var(--radius-lg);box-shadow:var(--shadow-lg);display:flex;align-items:center;gap:var(--space-lg)}.stat-card.success[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-success),#059669)}.stat-icon[_ngcontent-%COMP%]{font-size:2.5rem}.stat-info[_ngcontent-%COMP%]{flex:1}.stat-label[_ngcontent-%COMP%]{font-size:.875rem;opacity:.9;margin-bottom:var(--space-sm)}.stat-value[_ngcontent-%COMP%]{font-size:2rem;font-weight:700}.lists-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(500px,1fr));gap:var(--space-xl)}h3[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);margin-bottom:var(--space-lg)}.icon[_ngcontent-%COMP%]{font-size:1.5rem}.badge[_ngcontent-%COMP%]{margin-left:auto;background:var(--color-bg);color:var(--color-primary);padding:var(--space-xs) var(--space-md);border-radius:var(--radius-xl);font-size:.875rem;font-weight:600}.badge.warning[_ngcontent-%COMP%]{background:#fef3c7;color:var(--color-warning)}.product-list[_ngcontent-%COMP%], .sales-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md)}.product-item[_ngcontent-%COMP%], .sale-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:var(--space-md);padding:var(--space-md);background:var(--color-bg);border-radius:var(--radius-md);transition:all var(--transition-base)}.product-image-wrapper[_ngcontent-%COMP%]{flex-shrink:0;width:60px;height:60px;border-radius:var(--radius-md);overflow:hidden;background:var(--color-surface);border:1px solid var(--color-border);display:flex;align-items:center;justify-content:center}.product-image-wrapper.placeholder[_ngcontent-%COMP%]{background:var(--color-bg)}.product-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.placeholder-icon[_ngcontent-%COMP%]{font-size:1.5rem;opacity:.5}.product-item[_ngcontent-%COMP%]:hover, .sale-item[_ngcontent-%COMP%]:hover{background:#e0e7ff;transform:translate(4px)}.product-item.dimmed[_ngcontent-%COMP%]{opacity:.5}.product-info[_ngcontent-%COMP%], .sale-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xs);flex:1;align-self:flex-start;padding-top:4px}.product-name[_ngcontent-%COMP%], .sale-name[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text)}.product-category[_ngcontent-%COMP%], .sale-details-text[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-muted)}.delivery-badge[_ngcontent-%COMP%]{display:inline-block;margin-top:var(--space-xs);padding:var(--space-xs) var(--space-sm);background:#10b9811a;color:var(--color-success);border-radius:var(--radius-sm);font-size:.75rem;font-weight:500}.product-details[_ngcontent-%COMP%], .sale-amount[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:var(--space-xs)}.product-price[_ngcontent-%COMP%], .sale-total[_ngcontent-%COMP%]{font-weight:600;font-size:1.125rem;color:var(--color-primary)}.product-stock[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-success);font-weight:500}.product-stock.out[_ngcontent-%COMP%]{color:var(--color-danger)}.sale-date[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl);color:var(--color-text-muted)}.out-of-stock-section[_ngcontent-%COMP%]{border:2px solid rgba(239,68,68,.2)}.pagination[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md);margin-top:var(--space-lg);padding-top:var(--space-lg);border-top:1px solid var(--color-border)}.pagination-size[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);font-size:.875rem;color:var(--color-text)}.pagination-size[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500}.page-size-select[_ngcontent-%COMP%]{padding:var(--space-xs) var(--space-sm);border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-surface);color:var(--color-text);font-size:.875rem;cursor:pointer;transition:all var(--transition-base)}.page-size-select[_ngcontent-%COMP%]:hover{border-color:var(--color-primary)}.page-size-select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f61a}.pagination-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:var(--space-sm)}.pagination-btn[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);background:var(--color-surface);border:1px solid var(--color-border);color:var(--color-text);border-radius:var(--radius-md);font-size:.875rem;font-weight:500;cursor:pointer;transition:all var(--transition-base)}.pagination-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--color-primary);color:#fff;border-color:var(--color-primary);transform:translateY(-1px)}.pagination-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed;transform:none}.pagination-pages[_ngcontent-%COMP%]{display:flex;gap:var(--space-xs);flex-wrap:wrap;justify-content:center}.pagination-page[_ngcontent-%COMP%]{min-width:36px;height:36px;padding:var(--space-xs) var(--space-sm);background:var(--color-surface);border:1px solid var(--color-border);color:var(--color-text);border-radius:var(--radius-md);font-size:.875rem;font-weight:500;cursor:pointer;transition:all var(--transition-base);display:flex;align-items:center;justify-content:center}.pagination-page[_ngcontent-%COMP%]:hover{background:var(--color-bg);border-color:var(--color-primary);transform:translateY(-1px)}.pagination-page.active[_ngcontent-%COMP%]{background:var(--color-primary);color:#fff;border-color:var(--color-primary)}@media (max-width: 768px){.lists-container[_ngcontent-%COMP%]{grid-template-columns:1fr}.pagination[_ngcontent-%COMP%]{flex-wrap:wrap}.pagination-pages[_ngcontent-%COMP%]{order:3;width:100%;margin-top:var(--space-sm)}h3[_ngcontent-%COMP%]{font-size:1.25rem}.product-name[_ngcontent-%COMP%], .sale-name[_ngcontent-%COMP%]{font-size:.95rem}.product-category[_ngcontent-%COMP%], .sale-details-text[_ngcontent-%COMP%]{font-size:.8rem}.product-price[_ngcontent-%COMP%], .sale-total[_ngcontent-%COMP%]{font-size:1rem}.product-stock[_ngcontent-%COMP%], .sale-date[_ngcontent-%COMP%]{font-size:.75rem}.stat-value[_ngcontent-%COMP%]{font-size:1.5rem}.stat-label[_ngcontent-%COMP%]{font-size:.8rem}}.btn-restock[_ngcontent-%COMP%]{margin-top:var(--space-xs);padding:var(--space-xs) var(--space-sm);background:var(--color-primary-light);color:#fff;border:none;border-radius:var(--radius-sm);font-size:.75rem;font-weight:500;cursor:pointer;transition:all var(--transition-base)}.btn-restock[_ngcontent-%COMP%]:hover{background:var(--color-primary);transform:translateY(-1px)}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.modal-content[_ngcontent-%COMP%]{background-color:var(--color-surface);padding:2rem;border-radius:12px;width:90%;max-width:500px;box-shadow:0 10px 25px #0003;animation:_ngcontent-%COMP%_slideIn .3s ease-out;color:var(--color-text)}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translateY(-20px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;border-bottom:1px solid var(--color-border);padding-bottom:1rem}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--color-text)}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:var(--color-text-muted)}.modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.modal-footer[_ngcontent-%COMP%]{margin-top:2rem;display:flex;justify-content:flex-end;gap:1rem;padding-top:1rem;border-top:1px solid var(--color-border)}.btn-cancel[_ngcontent-%COMP%]{padding:.5rem 1rem;border:1px solid var(--color-border);background-color:var(--color-surface);color:var(--color-text);border-radius:6px;cursor:pointer;font-weight:500;transition:background-color .2s}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:var(--color-bg)}.btn-save[_ngcontent-%COMP%]{padding:.5rem 1rem;background-color:#4caf50;color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:500}.btn-save[_ngcontent-%COMP%]:hover{background-color:#45a049}.btn-edit-sm[_ngcontent-%COMP%]{padding:.25rem .5rem;background-color:transparent;color:var(--color-primary);border:1px solid var(--color-primary);border-radius:4px;cursor:pointer;font-size:.75rem;font-weight:500;transition:all .2s;margin-left:.5rem}.btn-edit-sm[_ngcontent-%COMP%]:hover{background-color:var(--color-primary);color:#fff}.product-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-top:.5rem}"]})}}return n})();function yN(n,e){if(n&1){let t=te();f(0,"button",17),j("click",function(){R(t);let i=I();return k(i.cancelEdit())}),g(1," Cancel "),h()}}function vN(n,e){if(n&1){let t=te();f(0,"div",20)(1,"div",21)(2,"div",22),g(3),h(),f(4,"div",23)(5,"div",24)(6,"span",25),g(7,"\u{1F4DE}"),h(),f(8,"span"),g(9),h()(),f(10,"div",24)(11,"span",25),g(12,"\u{1F4CD}"),h(),f(13,"span"),g(14),h()()()(),f(15,"div",26)(16,"button",27),j("click",function(){let i=R(t).$implicit,o=I(2);return k(o.editCustomer(i))}),g(17," \u270F\uFE0F "),h(),f(18,"button",28),j("click",function(){let i=R(t).$implicit,o=I(2);return k(o.deleteCustomer(i.id))}),g(19," \u{1F5D1}\uFE0F "),h()()()}if(n&2){let t=e.$implicit,r=I(2);_e("editing",t.id===r.editingId),v(3),H(t.name),v(6),H(t.phoneNumber),v(5),H(t.deliveryAddress),v(2),D("disabled",!!r.editingId&&r.editingId!==t.id),v(2),D("disabled",!!r.editingId)}}function _N(n,e){if(n&1&&(f(0,"div",18),U(1,vN,20,7,"div",19),h()),n&2){let t=I();v(),D("ngForOf",t.customers)}}function bN(n,e){n&1&&(f(0,"div",29)(1,"p"),g(2,"No customers registered yet"),h()())}var Cw=(()=>{class n{constructor(t){this.customerService=t,this.customers=[],this.editingId=null,this.customer={name:"",phoneNumber:"",deliveryAddress:""}}ngOnInit(){this.customerService.getCustomers().subscribe(t=>{this.customers=t})}onSubmit(){this.isValid()&&(this.editingId?(this.customerService.updateCustomer(this.editingId,{name:this.customer.name,phoneNumber:this.customer.phoneNumber,deliveryAddress:this.customer.deliveryAddress}),this.editingId=null):this.customerService.addCustomer({name:this.customer.name,phoneNumber:this.customer.phoneNumber,deliveryAddress:this.customer.deliveryAddress}),this.resetForm())}editCustomer(t){this.editingId=t.id,this.customer={name:t.name,phoneNumber:t.phoneNumber||"",deliveryAddress:t.deliveryAddress||""}}cancelEdit(){this.editingId=null,this.resetForm()}resetForm(){this.customer={name:"",phoneNumber:"",deliveryAddress:""}}deleteCustomer(t){confirm("Are you sure you want to delete this customer?")&&(this.customerService.deleteCustomer(t),this.editingId===t&&this.cancelEdit())}isValid(){return!!(this.customer.name&&this.customer.phoneNumber&&this.customer.deliveryAddress)}static{this.\u0275fac=function(r){return new(r||n)(K(go))}}static{this.\u0275cmp=Ve({type:n,selectors:[["app-customer-form"]],standalone:!0,features:[Le],decls:33,vars:11,consts:[["noCustomers",""],[1,"customer-container"],[1,"card"],[1,"form",3,"ngSubmit"],[1,"form-group"],["for","customerName"],["type","text","id","customerName","name","name","placeholder","Enter customer name","required","",3,"ngModelChange","ngModel"],["for","phoneNumber"],["type","tel","id","phoneNumber","name","phoneNumber","placeholder","e.g., +1 234 567 8900","required","",3,"ngModelChange","ngModel"],["for","deliveryAddress"],["id","deliveryAddress","name","deliveryAddress","placeholder","Enter full delivery address","rows","3","required","",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","button","class","btn-secondary",3,"click",4,"ngIf"],["type","submit",1,"btn-primary",3,"disabled"],[1,"icon"],[1,"badge"],["class","customer-list",4,"ngIf","ngIfElse"],["type","button",1,"btn-secondary",3,"click"],[1,"customer-list"],["class","customer-item",3,"editing",4,"ngFor","ngForOf"],[1,"customer-item"],[1,"customer-info"],[1,"customer-name"],[1,"customer-details"],[1,"detail-row"],[1,"detail-icon"],[1,"customer-actions"],[1,"btn-edit",3,"click","disabled"],[1,"btn-delete",3,"click","disabled"],[1,"empty-state"]],template:function(r,i){if(r&1){let o=te();f(0,"div",1)(1,"div",2)(2,"h3"),g(3),h(),f(4,"form",3),j("ngSubmit",function(){return R(o),k(i.onSubmit())}),f(5,"div",4)(6,"label",5),g(7,"Customer Name *"),h(),f(8,"input",6),J("ngModelChange",function(a){return R(o),Z(i.customer.name,a)||(i.customer.name=a),k(a)}),h()(),f(9,"div",4)(10,"label",7),g(11,"Phone Number *"),h(),f(12,"input",8),J("ngModelChange",function(a){return R(o),Z(i.customer.phoneNumber,a)||(i.customer.phoneNumber=a),k(a)}),h()(),f(13,"div",4)(14,"label",9),g(15,"Delivery Address *"),h(),f(16,"textarea",10),J("ngModelChange",function(a){return R(o),Z(i.customer.deliveryAddress,a)||(i.customer.deliveryAddress=a),k(a)}),h()(),f(17,"div",11),U(18,yN,2,0,"button",12),f(19,"button",13)(20,"span"),g(21),h(),g(22),h()()()(),f(23,"div",2)(24,"h3")(25,"span",14),g(26,"\u{1F465}"),h(),g(27," Registered Customers "),f(28,"span",15),g(29),h()(),U(30,_N,2,1,"div",16)(31,bN,3,0,"ng-template",null,0,or),h()()}if(r&2){let o=ir(32);v(3),H(i.editingId?"Edit Customer":"Register New Customer"),v(5),Y("ngModel",i.customer.name),v(4),Y("ngModel",i.customer.phoneNumber),v(4),Y("ngModel",i.customer.deliveryAddress),v(2),D("ngIf",i.editingId),v(),D("disabled",!i.isValid()),v(2),H(i.editingId?"\u{1F4BE}":"\u{1F464}"),v(),q(" ",i.editingId?"Update Customer":"Add Customer"," "),v(7),H(i.customers.length),v(),D("ngIf",i.customers.length>0)("ngIfElse",o)}},dependencies:[ke,tt,Ke,it,Un,nt,rt,Bn,Wt,Ze,Cn],styles:[".customer-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-2xl)}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg);margin-top:var(--space-lg)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font-family:inherit;font-size:.9375rem;padding:var(--space-sm) var(--space-md);border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-surface);color:var(--color-text);transition:all var(--transition-base);width:100%;resize:vertical}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f61a}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--space-lg)}.icon[_ngcontent-%COMP%]{font-size:1.5rem}.badge[_ngcontent-%COMP%]{margin-left:auto;background:var(--color-bg);color:var(--color-primary);padding:var(--space-xs) var(--space-md);border-radius:var(--radius-xl);font-size:.875rem;font-weight:600}.customer-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;margin-top:var(--space-md)}.customer-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:var(--space-sm);padding:var(--space-xs) var(--space-sm);background:var(--color-bg);border-radius:var(--radius-md);border:1px solid var(--color-border);transition:all var(--transition-base)}.customer-item[_ngcontent-%COMP%]:hover{background:#e0e7ff;transform:translate(2px)}.customer-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:2px}.customer-name[_ngcontent-%COMP%]{font-weight:600;font-size:.95rem;color:var(--color-text)}.customer-details[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;gap:var(--space-lg);align-items:center}.detail-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:.8rem;color:var(--color-text-muted)}.detail-icon[_ngcontent-%COMP%]{font-size:.9rem}.customer-actions[_ngcontent-%COMP%]{display:flex;gap:var(--space-xs)}.btn-delete[_ngcontent-%COMP%]{padding:0;background:transparent;border:1px solid var(--color-border);color:var(--color-danger);border-radius:var(--radius-md);font-size:.9rem;cursor:pointer;transition:all var(--transition-base);width:28px;height:28px;display:flex;align-items:center;justify-content:center}.btn-delete[_ngcontent-%COMP%]:hover{background:var(--color-danger);border-color:var(--color-danger);transform:scale(1.1)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl);color:var(--color-text-muted)}@media (max-width: 640px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}.form-actions[_ngcontent-%COMP%]{display:flex;gap:var(--space-md);justify-content:flex-end}.btn-secondary[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-xl);background:transparent;border:1px solid var(--color-border);color:var(--color-text);border-radius:var(--radius-md);font-weight:600;cursor:pointer;transition:all var(--transition-base)}.btn-secondary[_ngcontent-%COMP%]:hover{background:var(--color-bg);border-color:var(--color-text)}.btn-edit[_ngcontent-%COMP%]{padding:0;background:transparent;border:1px solid var(--color-border);color:var(--color-primary);border-radius:var(--radius-md);font-size:.9rem;cursor:pointer;transition:all var(--transition-base);width:28px;height:28px;display:flex;align-items:center;justify-content:center}.btn-edit[_ngcontent-%COMP%]:hover{background:var(--color-primary);color:#fff;border-color:var(--color-primary);transform:scale(1.1)}.btn-edit[_ngcontent-%COMP%]:disabled, .btn-delete[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;transform:none}.customer-item.editing[_ngcontent-%COMP%]{border-color:var(--color-primary);background:var(--color-surface);box-shadow:0 0 0 2px #3b82f61a}"]})}}return n})();function wN(n,e){if(n&1&&(f(0,"div",26),g(1),h()),n&2){let t=I().$implicit;v(),H(t.notes)}}function CN(n,e){if(n&1&&(f(0,"div",19)(1,"div",20)(2,"div",21),g(3),h(),U(4,wN,2,1,"div",22),f(5,"div",23),g(6),ae(7,"date"),h()(),f(8,"div",24)(9,"div",25),g(10),h()()()),n&2){let t=e.$implicit;v(3),H(t.productName),v(),D("ngIf",t.notes),v(2),H(ge(7,4,t.timestamp,"medium")),v(4),q("$",t.price.toFixed(2),"")}}function xN(n,e){if(n&1&&(f(0,"div",17),U(1,CN,11,7,"div",18),h()),n&2){let t=I();v(),D("ngForOf",t.expenses)}}function EN(n,e){n&1&&(f(0,"div",27)(1,"p"),g(2,"No expenses recorded yet"),h()())}var xw=(()=>{class n{constructor(t){this.inventoryService=t,this.expenses=[],this.productName="",this.price=null,this.notes=""}ngOnInit(){this.inventoryService.getExpenses().subscribe(t=>{this.expenses=t})}get totalExpenses(){return this.expenses.reduce((t,r)=>t+r.price,0)}addExpense(){this.productName&&this.price&&this.price>0&&(this.inventoryService.addExpense({productName:this.productName,price:this.price,notes:this.notes}),this.productName="",this.price=null,this.notes="")}static{this.\u0275fac=function(r){return new(r||n)(K(Vt))}}static{this.\u0275cmp=Ve({type:n,selectors:[["app-expenses"]],standalone:!0,features:[Le],decls:36,vars:8,consts:[["noExpenses",""],[1,"expenses-section"],[1,"card"],[1,"icon"],[1,"form",3,"ngSubmit"],[1,"form-group"],["for","productName"],["type","text","id","productName","name","productName","placeholder","e.g., Raw materials, Utilities, etc.","required","",3,"ngModelChange","ngModel"],["for","price"],["type","number","id","price","name","price","min","0","step","0.01","placeholder","0.00","required","",3,"ngModelChange","ngModel"],["for","notes"],["id","notes","name","notes","placeholder","Additional details about this expense...","rows","3",3,"ngModelChange","ngModel"],["type","submit",1,"btn-primary",3,"disabled"],[1,"section-header"],[1,"badge"],[1,"total-badge"],["class","expenses-list",4,"ngIf","ngIfElse"],[1,"expenses-list"],["class","expense-item",4,"ngFor","ngForOf"],[1,"expense-item"],[1,"expense-info"],[1,"expense-name"],["class","expense-notes",4,"ngIf"],[1,"expense-date"],[1,"expense-amount"],[1,"expense-price"],[1,"expense-notes"],[1,"empty-state"]],template:function(r,i){if(r&1){let o=te();f(0,"div",1)(1,"div",2)(2,"h3")(3,"span",3),g(4,"\u{1F4B8}"),h(),g(5," Add Expense "),h(),f(6,"form",4),j("ngSubmit",function(){return R(o),k(i.addExpense())}),f(7,"div",5)(8,"label",6),g(9,"Product/Item Name"),h(),f(10,"input",7),J("ngModelChange",function(a){return R(o),Z(i.productName,a)||(i.productName=a),k(a)}),h()(),f(11,"div",5)(12,"label",8),g(13,"Price/Amount"),h(),f(14,"input",9),J("ngModelChange",function(a){return R(o),Z(i.price,a)||(i.price=a),k(a)}),h()(),f(15,"div",5)(16,"label",10),g(17,"Notes (Optional)"),h(),f(18,"textarea",11),J("ngModelChange",function(a){return R(o),Z(i.notes,a)||(i.notes=a),k(a)}),h()(),f(19,"button",12)(20,"span"),g(21,"\u2795"),h(),g(22," Add Expense "),h()()(),f(23,"div",2)(24,"div",13)(25,"h3")(26,"span",3),g(27,"\u{1F4CB}"),h(),g(28," Expense History "),f(29,"span",14),g(30),h()(),f(31,"div",15),g(32),h()(),U(33,xN,2,1,"div",16)(34,EN,3,0,"ng-template",null,0,or),h()()}if(r&2){let o=ir(35);v(10),Y("ngModel",i.productName),v(4),Y("ngModel",i.price),v(4),Y("ngModel",i.notes),v(),D("disabled",!i.productName||!i.price||i.price<=0),v(11),H(i.expenses.length),v(2),q(" Total: $",i.totalExpenses.toFixed(2)," "),v(),D("ngIf",i.expenses.length>0)("ngIfElse",o)}},dependencies:[ke,tt,Ke,jn,it,Un,nt,lr,rt,Bn,Wt,ur,Ze,Cn],styles:[".expenses-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xl)}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg);margin-top:var(--space-lg)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font-family:inherit;font-size:.9375rem;padding:var(--space-sm) var(--space-md);border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-surface);color:var(--color-text);transition:all var(--transition-base);width:100%;resize:vertical;min-height:80px}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f61a}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:var(--space-md);margin-bottom:var(--space-lg)}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;display:flex;align-items:center;gap:var(--space-sm)}.icon[_ngcontent-%COMP%]{font-size:1.5rem}.badge[_ngcontent-%COMP%]{margin-left:auto;background:var(--color-bg);color:var(--color-primary);padding:var(--space-xs) var(--space-md);border-radius:var(--radius-xl);font-size:.875rem;font-weight:600}.total-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-success),#059669);color:#fff;padding:var(--space-sm) var(--space-lg);border-radius:var(--radius-lg);font-size:1.125rem;font-weight:700;box-shadow:var(--shadow-md)}.expenses-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md)}.expense-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:var(--space-md);padding:var(--space-md);background:var(--color-bg);border-radius:var(--radius-md);transition:all var(--transition-base);border:1px solid var(--color-border)}.expense-item[_ngcontent-%COMP%]:hover{background:#fee;transform:translate(4px);border-color:var(--color-danger)}.expense-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xs);flex:1}.expense-name[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text)}.expense-notes[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-muted);font-style:italic}.expense-date[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted)}.expense-amount[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:var(--space-xs)}.expense-price[_ngcontent-%COMP%]{font-weight:600;font-size:1.125rem;color:var(--color-danger)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl);color:var(--color-text-muted)}@media (max-width: 640px){.section-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.total-badge[_ngcontent-%COMP%]{width:100%;text-align:center}}"]})}}return n})();var Ew=(()=>{class n{constructor(t){this.inventoryService=t,this.sales=[],this.expenses=[]}ngOnInit(){this.inventoryService.getSales().subscribe(t=>{this.sales=t}),this.inventoryService.getExpenses().subscribe(t=>{this.expenses=t})}get totalIncome(){return this.sales.filter(t=>t.pending!==!0).reduce((t,r)=>t+r.total,0)}get totalExpenses(){return this.expenses.reduce((t,r)=>t+r.price,0)}get netProfit(){return this.totalIncome-this.totalExpenses}get incomePercentage(){let t=this.totalIncome+this.totalExpenses;return t>0?this.totalIncome/t*100:0}get expensePercentage(){let t=this.totalIncome+this.totalExpenses;return t>0?this.totalExpenses/t*100:0}get profitMargin(){return this.totalIncome>0?this.netProfit/this.totalIncome*100:0}get completedSalesCount(){return this.sales.filter(t=>t.pending!==!0).length}get pendingSalesCount(){return this.sales.filter(t=>t.pending===!0).length}get averageSale(){let t=this.completedSalesCount;return t>0?this.totalIncome/t:0}static{this.\u0275fac=function(r){return new(r||n)(K(Vt))}}static{this.\u0275cmp=Ve({type:n,selectors:[["app-reports"]],standalone:!0,features:[Le],decls:119,vars:62,consts:[[1,"reports-section"],[1,"summary-grid"],[1,"summary-card","income"],[1,"card-icon"],[1,"card-content"],[1,"card-label"],[1,"card-value"],[1,"summary-card","expense"],[1,"summary-card","profit"],[1,"summary-card","margin"],[1,"card","chart-card"],[1,"icon"],[1,"comparison-chart"],[1,"chart-row"],[1,"chart-label"],[1,"chart-bar-wrapper"],[1,"chart-bar","income-bar",3,"title"],[1,"chart-value"],[1,"chart-bar","expense-bar",3,"title"],[1,"chart-legend"],[1,"legend-item"],[1,"legend-color","income-color"],[1,"legend-color","expense-color"],[1,"breakdown-grid"],[1,"card"],[1,"breakdown-stats"],[1,"stat-row"],[1,"stat-label"],[1,"stat-value"]],template:function(r,i){r&1&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),g(4,"\u{1F4B0}"),h(),f(5,"div",4)(6,"div",5),g(7,"Total Income"),h(),f(8,"div",6),g(9),ae(10,"number"),h()()(),f(11,"div",7)(12,"div",3),g(13,"\u{1F4B8}"),h(),f(14,"div",4)(15,"div",5),g(16,"Total Expenses"),h(),f(17,"div",6),g(18),ae(19,"number"),h()()(),f(20,"div",8)(21,"div",3),g(22),h(),f(23,"div",4)(24,"div",5),g(25,"Net Profit"),h(),f(26,"div",6),g(27),ae(28,"number"),h()()(),f(29,"div",9)(30,"div",3),g(31,"\u{1F4CA}"),h(),f(32,"div",4)(33,"div",5),g(34,"Profit Margin"),h(),f(35,"div",6),g(36),ae(37,"number"),h()()()(),f(38,"div",10)(39,"h3")(40,"span",11),g(41,"\u{1F4CA}"),h(),g(42," Income vs Expenses "),h(),f(43,"div",12)(44,"div",13)(45,"div",14),g(46,"Income"),h(),f(47,"div",15),xe(48,"div",16),ae(49,"number"),h(),f(50,"div",17),g(51),ae(52,"number"),h()(),f(53,"div",13)(54,"div",14),g(55,"Expenses"),h(),f(56,"div",15),xe(57,"div",18),ae(58,"number"),h(),f(59,"div",17),g(60),ae(61,"number"),h()()(),f(62,"div",19)(63,"div",20),xe(64,"span",21),f(65,"span"),g(66),ae(67,"number"),h()(),f(68,"div",20),xe(69,"span",22),f(70,"span"),g(71),ae(72,"number"),h()()()(),f(73,"div",23)(74,"div",24)(75,"h3")(76,"span",11),g(77,"\u{1F4B5}"),h(),g(78," Income Breakdown "),h(),f(79,"div",25)(80,"div",26)(81,"span",27),g(82,"Total Sales:"),h(),f(83,"span",28),g(84),h()(),f(85,"div",26)(86,"span",27),g(87,"Pending Deliveries:"),h(),f(88,"span",28),g(89),h()(),f(90,"div",26)(91,"span",27),g(92,"Average Sale:"),h(),f(93,"span",28),g(94),ae(95,"number"),h()()()(),f(96,"div",24)(97,"h3")(98,"span",11),g(99,"\u{1F4B3}"),h(),g(100," Expense Breakdown "),h(),f(101,"div",25)(102,"div",26)(103,"span",27),g(104,"Total Expenses:"),h(),f(105,"span",28),g(106),h()(),f(107,"div",26)(108,"span",27),g(109,"Average Expense:"),h(),f(110,"span",28),g(111),ae(112,"number"),h()(),f(113,"div",26)(114,"span",27),g(115,"Expense Ratio:"),h(),f(116,"span",28),g(117),ae(118,"number"),h()()()()()()),r&2&&(v(9),q("$",ge(10,23,i.totalIncome,"1.2-2"),""),v(9),q("$",ge(19,26,i.totalExpenses,"1.2-2"),""),v(2),_e("negative",i.netProfit<0),v(2),H(i.netProfit>=0?"\u{1F4C8}":"\u{1F4C9}"),v(5),q("$",ge(28,29,i.netProfit,"1.2-2"),""),v(9),q("",ge(37,32,i.profitMargin,"1.1-1"),"%"),v(12),_n("width",i.incomePercentage,"%"),D("title","$"+ge(49,35,i.totalIncome,"1.2-2")),v(3),q("$",ge(52,38,i.totalIncome,"1.2-2"),""),v(6),_n("width",i.expensePercentage,"%"),D("title","$"+ge(58,41,i.totalExpenses,"1.2-2")),v(3),q("$",ge(61,44,i.totalExpenses,"1.2-2"),""),v(6),q("Income (",ge(67,47,i.incomePercentage,"1.1-1"),"%)"),v(5),q("Expenses (",ge(72,50,i.expensePercentage,"1.1-1"),"%)"),v(13),H(i.completedSalesCount),v(5),H(i.pendingSalesCount),v(5),q("$",ge(95,53,i.averageSale,"1.2-2"),""),v(12),H(i.expenses.length),v(5),q("$",i.expenses.length>0?i.totalExpenses/i.expenses.length:ge(112,56,0,"1.2-2"),""),v(6),q("",ge(118,59,i.expensePercentage,"1.1-1"),"%"))},dependencies:[ke,ho],styles:[".reports-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xl)}.summary-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:var(--space-lg)}.summary-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-primary),var(--color-primary-dark));color:#fff;padding:var(--space-xl);border-radius:var(--radius-lg);box-shadow:var(--shadow-lg);display:flex;align-items:center;gap:var(--space-lg);transition:all var(--transition-base);min-width:0;overflow:hidden}.summary-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:var(--shadow-xl)}.summary-card.income[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-success),#059669)}.summary-card.expense[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-danger),#dc2626)}.summary-card.profit[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#1e40af)}.summary-card.profit.negative[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706)}.summary-card.margin[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#6d28d9)}.card-icon[_ngcontent-%COMP%]{font-size:3rem;opacity:.9;flex-shrink:0}.card-content[_ngcontent-%COMP%]{flex:1;min-width:0;overflow:hidden}.card-label[_ngcontent-%COMP%]{font-size:.875rem;opacity:.9;margin-bottom:var(--space-xs);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.card-value[_ngcontent-%COMP%]{font-size:clamp(1rem,3vw,1.5rem);font-weight:700;word-break:break-all;overflow-wrap:break-word}.chart-card[_ngcontent-%COMP%]{margin-top:var(--space-lg)}.icon[_ngcontent-%COMP%]{font-size:1.5rem}h3[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);margin-bottom:var(--space-lg)}.comparison-chart[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg);margin:var(--space-xl) 0}.chart-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:100px 1fr 120px;gap:var(--space-md);align-items:center}.chart-label[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text)}.chart-bar-wrapper[_ngcontent-%COMP%]{height:40px;background:var(--color-bg);border-radius:var(--radius-md);overflow:hidden;border:1px solid var(--color-border)}.chart-bar[_ngcontent-%COMP%]{height:100%;transition:width .5s ease;min-width:2%;display:flex;align-items:center;justify-content:flex-end;padding-right:var(--space-sm);color:#fff;font-weight:600}.income-bar[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--color-success),#10b981)}.expense-bar[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--color-danger),#ef4444)}.chart-value[_ngcontent-%COMP%]{font-weight:700;font-size:1.125rem;color:var(--color-text);text-align:right}.chart-legend[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:var(--space-xl);margin-top:var(--space-lg);padding-top:var(--space-lg);border-top:1px solid var(--color-border)}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);font-size:.875rem;color:var(--color-text)}.legend-color[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:var(--radius-sm)}.income-color[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-success),#10b981)}.expense-color[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-danger),#ef4444)}.breakdown-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:var(--space-lg)}.breakdown-stats[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md);margin-top:var(--space-lg)}.stat-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--space-sm) 0;border-bottom:1px solid var(--color-border)}.stat-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.stat-label[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-muted)}.stat-value[_ngcontent-%COMP%]{font-weight:600;font-size:1rem;color:var(--color-text)}@media (max-width: 768px){.summary-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.chart-row[_ngcontent-%COMP%]{grid-template-columns:80px 1fr 100px}.chart-legend[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.breakdown-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return n})();function IN(n,e){if(n&1&&(f(0,"div",22)(1,"div",23),g(2),h(),f(3,"h3",24),g(4),h(),f(5,"p",25),g(6),h()()),n&2){let t=e.$implicit;v(2),H(t.icon),v(2),H(t.title),v(2),H(t.description)}}var Iw=(()=>{class n{constructor(){this.features=[{icon:"\u{1F4E6}",title:"Smart Inventory",description:"Add, track, and manage your products with real-time stock updates."},{icon:"\u{1F4B0}",title:"Advanced POS",description:"Seamless sales processing with pending delivery scheduling and alarms."},{icon:"\u{1F4DE}",title:"Live Communication",description:"Real-time chat and crystal clear audio calls for instant support."},{icon:"\u{1F30D}",title:"GPS Location",description:"Integrated location sharing for precise delivery coordination."},{icon:"\u{1F4CA}",title:"Analytics & Reports",description:"Visualize income, expenses, and profit margins with detailed charts."},{icon:"\u{1F4CB}",title:"Activity Logs",description:"Complete audit trail of all system actions for security and accountability."},{icon:"\u{1F465}",title:"Customer CRM",description:"Maintain detailed customer profiles and purchase history."},{icon:"\u{1F4B8}",title:"Expense Tracking",description:"Monitor operational costs to ensure maximum profitability."}]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ve({type:n,selectors:[["app-landing"]],standalone:!0,features:[Le],decls:43,vars:1,consts:[[1,"landing-page"],[1,"hero-section"],[1,"hero-content"],[1,"hero-icon"],[1,"hero-title"],[1,"hero-subtitle"],[1,"hero-description"],[1,"hero-stats"],[1,"stat-item"],[1,"stat-icon"],[1,"stat-text"],[1,"features-section"],[1,"section-title"],[1,"section-subtitle"],[1,"features-grid"],["class","feature-card",4,"ngFor","ngForOf"],[1,"cta-section"],[1,"cta-content"],[1,"cta-title"],[1,"cta-description"],[1,"cta-arrow"],[1,"arrow-icon"],[1,"feature-card"],[1,"feature-icon"],[1,"feature-title"],[1,"feature-description"]],template:function(r,i){r&1&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),g(4,"\u{1F4E6}"),h(),f(5,"h1",4),g(6,"Welcome to JJM Inventory"),h(),f(7,"p",5),g(8,"Your complete business management solution"),h(),f(9,"p",6),g(10," Streamline your inventory, sales, and customer management all in one place. Track expenses, monitor profits, and grow your business with confidence. "),h(),f(11,"div",7)(12,"div",8)(13,"div",9),g(14,"\u26A1"),h(),f(15,"div",10),g(16,"Fast & Efficient"),h()(),f(17,"div",8)(18,"div",9),g(19,"\u{1F512}"),h(),f(20,"div",10),g(21,"Secure & Reliable"),h()(),f(22,"div",8)(23,"div",9),g(24,"\u{1F4F1}"),h(),f(25,"div",10),g(26,"Fully Responsive"),h()()()()(),f(27,"div",11)(28,"h2",12),g(29,"Powerful Features"),h(),f(30,"p",13),g(31,"Everything you need to manage your business effectively"),h(),f(32,"div",14),U(33,IN,7,3,"div",15),h()(),f(34,"div",16)(35,"div",17)(36,"h2",18),g(37,"Ready to Get Started?"),h(),f(38,"p",19),g(39," Choose a tab above to begin managing your inventory, processing sales, or viewing reports. "),h(),f(40,"div",20)(41,"span",21),g(42,"\u2191"),h()()()()()),r&2&&(v(33),D("ngForOf",i.features))},dependencies:[ke,tt],styles:['.landing-page[_ngcontent-%COMP%]{min-height:calc(100vh - 300px);animation:_ngcontent-%COMP%_fadeIn .6s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.hero-section[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl) 0;background:linear-gradient(135deg,#3b82f60d,#9333ea0d);border-radius:var(--radius-lg);margin-bottom:var(--space-2xl)}.hero-content[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:0 var(--space-lg)}.hero-icon[_ngcontent-%COMP%]{font-size:5rem;margin-bottom:var(--space-lg);animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-15px)}}.hero-title[_ngcontent-%COMP%]{font-size:3rem;font-weight:700;color:var(--color-text);margin-bottom:var(--space-md);background:linear-gradient(135deg,var(--color-primary),var(--color-primary-light));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.hero-subtitle[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--color-text-muted);margin-bottom:var(--space-lg);font-weight:500}.hero-description[_ngcontent-%COMP%]{font-size:1.125rem;color:var(--color-text-muted);line-height:1.8;margin-bottom:var(--space-2xl);max-width:600px;margin-left:auto;margin-right:auto}.hero-stats[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:var(--space-2xl);flex-wrap:wrap;margin-top:var(--space-2xl)}.stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);padding:var(--space-md) var(--space-lg);background:var(--color-surface);border-radius:var(--radius-lg);box-shadow:var(--shadow-sm);transition:all var(--transition-base)}.stat-item[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:var(--shadow-md)}.stat-icon[_ngcontent-%COMP%]{font-size:1.5rem}.stat-text[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text)}.features-section[_ngcontent-%COMP%]{padding:var(--space-2xl) 0}.section-title[_ngcontent-%COMP%]{text-align:center;font-size:2.5rem;font-weight:700;color:var(--color-text);margin-bottom:var(--space-md)}.section-subtitle[_ngcontent-%COMP%]{text-align:center;font-size:1.125rem;color:var(--color-text-muted);margin-bottom:var(--space-2xl)}.features-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:var(--space-xl);margin-top:var(--space-2xl)}.feature-card[_ngcontent-%COMP%]{background:var(--color-surface);padding:var(--space-xl);border-radius:var(--radius-lg);border:1px solid var(--color-border);transition:all var(--transition-base);text-align:center;position:relative;overflow:hidden}.feature-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(59,130,246,.1),transparent);transition:left .6s ease}.feature-card[_ngcontent-%COMP%]:hover:before{left:100%}.feature-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:var(--shadow-xl);border-color:var(--color-primary)}.feature-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:var(--space-md);transition:transform var(--transition-base)}.feature-card[_ngcontent-%COMP%]:hover   .feature-icon[_ngcontent-%COMP%]{transform:scale(1.2) rotate(5deg)}.feature-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--color-text);margin-bottom:var(--space-sm)}.feature-description[_ngcontent-%COMP%]{font-size:.9375rem;color:var(--color-text-muted);line-height:1.6}.cta-section[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl) 0;margin-top:var(--space-2xl)}.cta-content[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:var(--space-2xl);background:linear-gradient(135deg,var(--color-primary),var(--color-primary-dark));border-radius:var(--radius-lg);color:#fff;box-shadow:var(--shadow-xl)}.cta-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:var(--space-md)}.cta-description[_ngcontent-%COMP%]{font-size:1.125rem;margin-bottom:var(--space-lg);opacity:.95}.cta-arrow[_ngcontent-%COMP%]{margin-top:var(--space-xl)}.arrow-icon[_ngcontent-%COMP%]{font-size:3rem;display:inline-block;animation:_ngcontent-%COMP%_bounce 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}@media (max-width: 768px){.hero-title[_ngcontent-%COMP%]{font-size:2rem}.hero-subtitle[_ngcontent-%COMP%]{font-size:1.25rem}.hero-description[_ngcontent-%COMP%]{font-size:1rem}.hero-stats[_ngcontent-%COMP%]{flex-direction:column;gap:var(--space-md)}.section-title[_ngcontent-%COMP%]{font-size:2rem}.features-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.cta-title[_ngcontent-%COMP%]{font-size:1.5rem}}']})}}return n})();var yo=(()=>{class n{constructor(t){this.http=t,this.apiUrl=Ft.apiUrl,this.usersSubject=new Je([]),this.users$=this.usersSubject.asObservable(),this.loadUsers()}hashPassword(t){return B(this,null,function*(){let i=new TextEncoder().encode(t),o=yield crypto.subtle.digest("SHA-256",i);return Array.from(new Uint8Array(o)).map(s=>s.toString(16).padStart(2,"0")).join("")})}loadUsers(){this.http.get(`${this.apiUrl}/users`).subscribe({next:t=>{let r=t.map(i=>this.transformUser(i));r.length===0?this.initializeDefaultAdmin():this.usersSubject.next(r)},error:t=>{console.error("Error fetching users:",t),t.status===404&&this.initializeDefaultAdmin()}})}initializeDefaultAdmin(){return B(this,null,function*(){if(this.usersSubject.value.length>0)return;let r={id:"admin-1",username:"jjm143256789",fullName:"System Administrator",password:yield this.hashPassword("Gr*l0v3R"),role:"admin",createdAt:new Date};this.http.post(`${this.apiUrl}/users`,r).subscribe({next:i=>{let o=this.transformUser(i);this.usersSubject.next([o])},error:i=>{console.warn("Could not save default admin to backend, using local only",i),this.usersSubject.next([r])}})})}getUsers(){return this.users$}addUser(t){let r=ue(ee({},t),{createdAt:new Date,userId:t.userId||localStorage.getItem("jjm_user_id")||"system"});return Pn(this.hashPassword(t.password||"")).pipe(Wi(i=>(r.password=i,this.http.post(`${this.apiUrl}/users`,r))),ft(i=>{let o=this.transformUser(i),s=this.usersSubject.value;return this.usersSubject.next([...s,o]),o}))}updateUser(t){return new Ue(r=>{B(this,null,function*(){let o=ee({},t);o.password&&(o.password=yield this.hashPassword(o.password)),this.http.put(`${this.apiUrl}/users/${o.id}`,o).subscribe({next:s=>{let a=this.transformUser(s),u=this.usersSubject.value.map(p=>p.id===a.id?a:p);this.usersSubject.next(u),r.next(a),r.complete()},error:s=>r.error(s)})})})}deleteUser(t){return this.http.delete(`${this.apiUrl}/users/${t}`).pipe(ft(()=>{let r=this.usersSubject.value;this.usersSubject.next(r.filter(i=>i.id!==t))}))}getUserById(t){return this.usersSubject.value.find(r=>r.id===t)}validateCredentials(t,r){return Pn(this.hashPassword(r)).pipe(Wi(i=>this.users$.pipe(si(1),ft(o=>o.find(a=>a.username===t&&a.password===i)||null))))}transformUser(t){return ue(ee({},t),{createdAt:this.parseDate(t.createdAt)})}parseDate(t){return t?t instanceof Date?t:typeof t=="string"?new Date(t):typeof t=="object"&&t._seconds!==void 0?new Date(t._seconds*1e3):new Date(t):new Date}static{this.\u0275fac=function(r){return new(r||n)(se(wn))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function DN(n,e){if(n&1&&xe(0,"div",18),n&2){let t=e.$implicit;_n("left",t.x,"%")("top",t.y,"%")("width",t.size,"px")("height",t.size,"px")("animation-delay",t.delay,"s")}}function SN(n,e){if(n&1&&(f(0,"div",19)(1,"span",20),g(2,"\u26A0\uFE0F"),h(),g(3),h()),n&2){let t=I();v(3),q(" ",t.errorMessage," ")}}function MN(n,e){n&1&&(f(0,"span"),g(1,"Sign In"),h())}function TN(n,e){n&1&&(f(0,"span",21),xe(1,"span",22),g(2," Signing in... "),h())}var Dw=(()=>{class n{constructor(t){this.userService=t,this.username="",this.password="",this.errorMessage="",this.isLoading=!1,this.bubbles=[]}ngOnInit(){this.generateBubbles()}ngOnDestroy(){}onMouseMove(t){document.querySelectorAll(".bubble").forEach(i=>{let o=i,s=o.getBoundingClientRect(),a=s.left+s.width/2,l=s.top+s.height/2,u=t.clientX-a,p=t.clientY-l,y=Math.sqrt(u*u+p*p);if(y<250){let b=(250-y)/250,w=u/y*b*50,N=p/y*b*50;o.style.transform=`translate(${w}px, ${N}px) scale(${1+b*.3})`}else o.style.transform="translate(0, 0) scale(1)"})}generateBubbles(){for(let t=0;t<15;t++)this.bubbles.push({x:Math.random()*100,y:Math.random()*100,size:Math.random()*100+50,delay:Math.random()*5})}onLogin(){if(this.errorMessage="",!this.username||!this.password){this.errorMessage="Please enter both username and password";return}this.isLoading=!0,setTimeout(()=>{this.userService.validateCredentials(this.username,this.password).subscribe(t=>{t?(localStorage.setItem("jjm_logged_in","true"),localStorage.setItem("jjm_username",this.username),localStorage.setItem("jjm_user_id",t.id),localStorage.setItem("jjm_role",t.role),window.location.reload()):(this.errorMessage="Invalid username or password",this.isLoading=!1)})},800)}static{this.\u0275fac=function(r){return new(r||n)(K(yo))}}static{this.\u0275cmp=Ve({type:n,selectors:[["app-login"]],hostBindings:function(r,i){r&1&&j("mousemove",function(s){return i.onMouseMove(s)})},standalone:!0,features:[Le],decls:24,vars:9,consts:[[1,"login-container"],[1,"bubbles-container"],["class","bubble",3,"left","top","width","height","animation-delay",4,"ngFor","ngForOf"],[1,"login-card"],[1,"login-header"],[1,"logo-icon"],[1,"login-title"],[1,"login-subtitle"],[1,"login-form",3,"ngSubmit"],[1,"form-group"],["for","username"],["type","text","id","username","name","username","placeholder","Enter your username","required","",3,"ngModelChange","ngModel","disabled"],["for","password"],["type","password","id","password","name","password","placeholder","Enter your password","required","",3,"ngModelChange","ngModel","disabled"],["class","error-message",4,"ngIf"],["type","submit",1,"login-button",3,"disabled"],[4,"ngIf"],["class","loading-spinner",4,"ngIf"],[1,"bubble"],[1,"error-message"],[1,"error-icon"],[1,"loading-spinner"],[1,"spinner"]],template:function(r,i){r&1&&(f(0,"div",0)(1,"div",1),U(2,DN,1,10,"div",2),h(),f(3,"div",3)(4,"div",4)(5,"div",5),g(6,"\u{1F4E6}"),h(),f(7,"h1",6),g(8,"JJM Inventory"),h(),f(9,"p",7),g(10,"Sign in to your account"),h()(),f(11,"form",8),j("ngSubmit",function(){return i.onLogin()}),f(12,"div",9)(13,"label",10),g(14,"Username"),h(),f(15,"input",11),J("ngModelChange",function(s){return Z(i.username,s)||(i.username=s),s}),h()(),f(16,"div",9)(17,"label",12),g(18,"Password"),h(),f(19,"input",13),J("ngModelChange",function(s){return Z(i.password,s)||(i.password=s),s}),h()(),U(20,SN,4,1,"div",14),f(21,"button",15),U(22,MN,2,0,"span",16)(23,TN,3,0,"span",17),h()()()()),r&2&&(v(2),D("ngForOf",i.bubbles),v(13),Y("ngModel",i.username),D("disabled",i.isLoading),v(4),Y("ngModel",i.password),D("disabled",i.isLoading),v(),D("ngIf",i.errorMessage),v(),D("disabled",i.isLoading),v(),D("ngIf",!i.isLoading),v(),D("ngIf",i.isLoading))},dependencies:[ke,tt,Ke,it,Un,nt,rt,Bn,Wt,Ze,Cn],styles:['.login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:var(--color-bg);padding:var(--space-lg);position:relative;overflow:hidden}.bubbles-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;z-index:0}.bubble[_ngcontent-%COMP%]{position:absolute;border-radius:50%;background:radial-gradient(circle at 30% 30%,#3b82f64d,#9333ea33);-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);animation:_ngcontent-%COMP%_float 8s ease-in-out infinite;transition:transform .15s ease-out;box-shadow:inset 0 0 20px #fff3,0 8px 32px #3b82f633;border:1px solid rgba(255,255,255,.1)}.bubble[_ngcontent-%COMP%]:before{content:"";position:absolute;top:10%;left:10%;width:40%;height:40%;background:radial-gradient(circle,rgba(255,255,255,.4),transparent);border-radius:50%}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0) rotate(0)}25%{transform:translateY(-20px) rotate(90deg)}50%{transform:translateY(0) rotate(180deg)}75%{transform:translateY(20px) rotate(270deg)}}.login-card[_ngcontent-%COMP%]{background:var(--color-surface);border-radius:var(--radius-xl);box-shadow:0 20px 60px #0000004d;padding:var(--space-2xl);width:100%;max-width:420px;animation:_ngcontent-%COMP%_slideIn .5s cubic-bezier(.16,1,.3,1);position:relative;z-index:1}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(30px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--space-2xl)}.logo-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:var(--space-md);animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.login-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--color-text);margin-bottom:var(--space-xs);background:linear-gradient(135deg,var(--color-primary),var(--color-primary-light));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.login-subtitle[_ngcontent-%COMP%]{color:var(--color-text-muted);font-size:.9375rem;margin:0}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:var(--color-text)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:var(--space-md);font-size:1rem;border:2px solid var(--color-border);border-radius:var(--radius-md);transition:all var(--transition-base);background:var(--color-surface)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 4px #3b82f61a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.error-message[_ngcontent-%COMP%]{background:#fee;color:var(--color-danger);padding:var(--space-md);border-radius:var(--radius-md);font-size:.875rem;border:1px solid rgba(239,68,68,.2);display:flex;align-items:center;gap:var(--space-sm);animation:_ngcontent-%COMP%_shake .4s ease}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-10px)}75%{transform:translate(10px)}}.error-icon[_ngcontent-%COMP%]{font-size:1.25rem}.login-button[_ngcontent-%COMP%]{padding:var(--space-md) var(--space-xl);font-size:1rem;font-weight:600;background:linear-gradient(135deg,var(--color-primary),var(--color-primary-light));color:#fff;border:none;border-radius:var(--radius-md);cursor:pointer;transition:all var(--transition-base);box-shadow:0 4px 12px #3b82f64d}.login-button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 20px #3b82f666}.login-button[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.login-button[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.loading-spinner[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:var(--space-sm)}.spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.login-footer[_ngcontent-%COMP%]{margin-top:var(--space-2xl);padding-top:var(--space-lg);border-top:1px solid var(--color-border);text-align:center}.demo-credentials[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-muted);line-height:1.6;margin:0}.demo-credentials[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--color-text)}.demo-credentials[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background:var(--color-bg);padding:2px 6px;border-radius:var(--radius-sm);font-family:Courier New,monospace;color:var(--color-primary);font-weight:600}@media (max-width: 480px){.login-card[_ngcontent-%COMP%]{padding:var(--space-xl)}.login-title[_ngcontent-%COMP%]{font-size:1.5rem}.logo-icon[_ngcontent-%COMP%]{font-size:3rem}}']})}}return n})();function PN(n,e){if(n&1&&(f(0,"option",18),g(1),ae(2,"titlecase"),h()),n&2){let t=e.$implicit;D("value",t),v(),q(" ",Ss(2,2,t)," ")}}function AN(n,e){if(n&1&&(f(0,"option",18),g(1),ae(2,"titlecase"),h()),n&2){let t=e.$implicit;D("value",t),v(),q(" ",Ss(2,2,t)," ")}}function ON(n,e){if(n&1&&(f(0,"span",33),g(1),h()),n&2){let t=I().$implicit;v(),q("\u2022 ",t.details,"")}}function NN(n,e){if(n&1&&(f(0,"div",21)(1,"div",22)(2,"span",23),g(3),h(),f(4,"span",24),g(5),h()(),f(6,"div",25)(7,"div",26)(8,"span",27),g(9),h(),f(10,"span",28),g(11),h()(),f(12,"div",29)(13,"span",30),g(14),h(),U(15,ON,2,1,"span",31),h()(),f(16,"div",32),g(17),ae(18,"date"),h()()),n&2){let t=e.$implicit,r=I(2);v(3),H(r.getEntityIcon(t.entityType)),v(2),H(r.getActionIcon(t.action)),v(4),H(t.entityName),v(2),H(t.action),v(3),H(t.entityType),v(),D("ngIf",t.details),v(2),q(" ",ge(18,7,t==null?null:t.timestamp,"medium")," ")}}function RN(n,e){if(n&1&&(f(0,"div",19),U(1,NN,19,10,"div",20),h()),n&2){let t=I();v(),D("ngForOf",t.paginatedLogs)}}function kN(n,e){n&1&&(f(0,"div",34)(1,"p"),g(2,"No activity logs found"),h()())}function FN(n,e){if(n&1){let t=te();f(0,"div",35)(1,"button",36),j("click",function(){R(t);let i=I();return k(i.prevPage())}),g(2," \u2190 Prev "),h(),f(3,"span",37),g(4),h(),f(5,"button",36),j("click",function(){R(t);let i=I();return k(i.nextPage())}),g(6," Next \u2192 "),h()()}if(n&2){let t=I();v(),D("disabled",t.currentPage===1),v(3),rn(" Page ",t.currentPage," of ",t.totalPages," "),v(),D("disabled",t.currentPage===t.totalPages)}}var Sw=(()=>{class n{constructor(t){this.loggingService=t,this.logs=[],this.filteredLogs=[],this.selectedEntityType="all",this.selectedAction="all",this.currentPage=1,this.pageSize=20,this.entityTypes=["all","product","sale","expense","customer"],this.actions=["all","create","update","delete","restock","complete"]}ngOnInit(){this.loggingService.getLogs().subscribe(t=>{this.logs=t.map(r=>ue(ee({},r),{timestamp:new Date(r.timestamp?._seconds*1e3||new Date)})),this.applyFilters()})}applyFilters(){this.filteredLogs=this.logs.filter(t=>{let r=this.selectedEntityType==="all"||t.entityType===this.selectedEntityType,i=this.selectedAction==="all"||t.action===this.selectedAction;return r&&i}),this.currentPage=1}get paginatedLogs(){let t=(this.currentPage-1)*this.pageSize,r=t+this.pageSize;return this.filteredLogs.slice(t,r)}get totalPages(){return Math.ceil(this.filteredLogs.length/this.pageSize)}nextPage(){this.currentPage<this.totalPages&&this.currentPage++}prevPage(){this.currentPage>1&&this.currentPage--}refreshLogs(){this.loggingService.refreshLogs()}cleanupOldLogs(){confirm("This will delete all logs older than 30 days. Continue?")&&this.loggingService.cleanupOldLogs().subscribe({next:t=>{alert(`Cleanup completed! Deleted ${t.deletedCount} logs.`),this.refreshLogs()},error:t=>{console.error("Cleanup error:",t),alert("Failed to cleanup logs")}})}getActionIcon(t){return{create:"\u2795",update:"\u270F\uFE0F",delete:"\u{1F5D1}\uFE0F",restock:"\u{1F4E6}",complete:"\u2705"}[t]||"\u{1F4DD}"}getEntityIcon(t){return{product:"\u{1F4E6}",sale:"\u{1F4B0}",expense:"\u{1F4B8}",customer:"\u{1F464}"}[t]||"\u{1F4C4}"}static{this.\u0275fac=function(r){return new(r||n)(K(Al))}}static{this.\u0275cmp=Ve({type:n,selectors:[["app-activity-logs"]],standalone:!0,features:[Le],decls:29,vars:8,consts:[["noLogs",""],[1,"activity-logs-section"],[1,"card"],[1,"header-section"],[1,"icon"],[1,"badge"],[1,"header-actions"],[1,"btn-refresh",3,"click"],[1,"btn-cleanup",3,"click"],[1,"filters-section"],[1,"filter-group"],["for","entityFilter"],["id","entityFilter",1,"filter-select",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","actionFilter"],["id","actionFilter",1,"filter-select",3,"ngModelChange","change","ngModel"],["class","logs-list",4,"ngIf","ngIfElse"],["class","pagination",4,"ngIf"],[3,"value"],[1,"logs-list"],["class","log-item",4,"ngFor","ngForOf"],[1,"log-item"],[1,"log-icon"],[1,"entity-icon"],[1,"action-icon"],[1,"log-info"],[1,"log-header"],[1,"log-entity"],[1,"log-action-badge"],[1,"log-details"],[1,"log-type"],["class","log-description",4,"ngIf"],[1,"log-timestamp"],[1,"log-description"],[1,"empty-state"],[1,"pagination"],[1,"pagination-btn",3,"click","disabled"],[1,"page-info"]],template:function(r,i){if(r&1){let o=te();f(0,"div",1)(1,"div",2)(2,"div",3)(3,"h3")(4,"span",4),g(5,"\u{1F4CB}"),h(),g(6," Activity Logs "),f(7,"span",5),g(8),h()(),f(9,"div",6)(10,"button",7),j("click",function(){return R(o),k(i.refreshLogs())}),g(11," \u{1F504} Refresh "),h(),f(12,"button",8),j("click",function(){return R(o),k(i.cleanupOldLogs())}),g(13," \u{1F5D1}\uFE0F Cleanup Old Logs "),h()()(),f(14,"div",9)(15,"div",10)(16,"label",11),g(17,"Entity Type:"),h(),f(18,"select",12),J("ngModelChange",function(a){return R(o),Z(i.selectedEntityType,a)||(i.selectedEntityType=a),k(a)}),j("change",function(){return R(o),k(i.applyFilters())}),U(19,PN,3,4,"option",13),h()(),f(20,"div",10)(21,"label",14),g(22,"Action:"),h(),f(23,"select",15),J("ngModelChange",function(a){return R(o),Z(i.selectedAction,a)||(i.selectedAction=a),k(a)}),j("change",function(){return R(o),k(i.applyFilters())}),U(24,AN,3,4,"option",13),h()()(),U(25,RN,2,1,"div",16)(26,kN,3,0,"ng-template",null,0,or)(28,FN,7,4,"div",17),h()()}if(r&2){let o=ir(27);v(8),H(i.filteredLogs.length),v(10),Y("ngModel",i.selectedEntityType),v(),D("ngForOf",i.entityTypes),v(4),Y("ngModel",i.selectedAction),v(),D("ngForOf",i.actions),v(),D("ngIf",i.paginatedLogs.length>0)("ngIfElse",o),v(3),D("ngIf",i.totalPages>1)}},dependencies:[ke,tt,Ke,fl,jn,it,sn,an,kt,rt,Ze],styles:[".activity-logs-section[_ngcontent-%COMP%]{padding:var(--space-lg)}.header-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--space-lg);flex-wrap:wrap;gap:var(--space-md)}.header-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);margin:0}.header-actions[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm)}.btn-refresh[_ngcontent-%COMP%], .btn-cleanup[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);border:1px solid var(--color-border);background:var(--color-surface);color:var(--color-text);border-radius:var(--radius-md);cursor:pointer;font-size:.875rem;font-weight:500;transition:all var(--transition-base)}.btn-refresh[_ngcontent-%COMP%]:hover{background:var(--color-primary);color:#fff;border-color:var(--color-primary)}.btn-cleanup[_ngcontent-%COMP%]{background:var(--color-danger);color:#fff;border-color:var(--color-danger)}.btn-cleanup[_ngcontent-%COMP%]:hover{background:#dc2626}.filters-section[_ngcontent-%COMP%]{display:flex;gap:var(--space-lg);margin-bottom:var(--space-lg);padding:var(--space-md);background:var(--color-bg);border-radius:var(--radius-md);flex-wrap:wrap}.filter-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm)}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.filter-select[_ngcontent-%COMP%]{padding:var(--space-xs) var(--space-sm);border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-surface);color:var(--color-text);font-size:.875rem;cursor:pointer}.logs-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.log-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);padding:8px 12px;background:var(--color-bg);border-radius:var(--radius-sm);border:1px solid var(--color-border);transition:all var(--transition-base)}.log-item[_ngcontent-%COMP%]:hover{background:var(--color-surface);transform:translate(2px)}.log-icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:4px;font-size:1rem;min-width:40px;justify-content:center}.entity-icon[_ngcontent-%COMP%]{font-size:1.1rem}.action-icon[_ngcontent-%COMP%]{font-size:.9rem}.log-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:row;align-items:center;gap:var(--space-sm);flex-wrap:wrap}.log-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-xs)}.log-entity[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text);font-size:.9rem}.log-action-badge[_ngcontent-%COMP%]{padding:1px 6px;background:var(--color-primary);color:#fff;border-radius:var(--radius-sm);font-size:.7rem;font-weight:500;text-transform:uppercase}.log-details[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-xs);font-size:.85rem;color:var(--color-text-muted)}.log-type[_ngcontent-%COMP%]{text-transform:capitalize;font-weight:500}.log-description[_ngcontent-%COMP%]{font-style:italic;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:400px}.log-timestamp[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted);white-space:nowrap}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl);color:var(--color-text-muted)}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:var(--space-md);margin-top:var(--space-lg);padding-top:var(--space-lg);border-top:1px solid var(--color-border)}.pagination-btn[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);background:var(--color-surface);border:1px solid var(--color-border);color:var(--color-text);border-radius:var(--radius-md);font-size:.875rem;font-weight:500;cursor:pointer;transition:all var(--transition-base)}.pagination-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--color-primary);color:#fff;border-color:var(--color-primary)}.pagination-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.page-info[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text);font-weight:500}@media (max-width: 768px){.header-section[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.filters-section[_ngcontent-%COMP%]{flex-direction:column}.log-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.log-timestamp[_ngcontent-%COMP%]{align-self:flex-end}}"]})}}return n})();var Mw=()=>{};var Aw=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},VN=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Ow={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,l=i+2<n.length,u=l?n[i+2]:0,p=o>>2,y=(o&3)<<4|a>>4,b=(a&15)<<2|u>>6,w=u&63;l||(w=64,s||(b=64)),r.push(t[p],t[y],t[b],t[w])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Aw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):VN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let y=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||u==null||y==null)throw new Zf;let b=o<<2|a>>4;if(r.push(b),u!==64){let w=a<<4&240|u>>2;if(r.push(w),y!==64){let N=u<<6&192|y;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Zf=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},LN=function(n){let e=Aw(n);return Ow.encodeByteArray(e,!0)},Gs=function(n){return LN(n).replace(/\./g,"")},Nw=function(n){try{return Ow.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Rw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var jN=()=>Rw().__FIREBASE_DEFAULTS__,BN=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},UN=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Nw(n[1]);return e&&JSON.parse(e)},ep=()=>{try{return Mw()||jN()||BN()||UN()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},$N=n=>ep()?.emulatorHosts?.[n],kw=n=>{let e=$N(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},tp=()=>ep()?.config;var Ol=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Nl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Fw(n){return B(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function Vw(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=ee({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Gs(JSON.stringify(t)),Gs(JSON.stringify(s)),""].join(".")}var Hs={};function zN(){let n={prod:[],emulator:[]};for(let e of Object.keys(Hs))Hs[e]?n.emulator.push(e):n.prod.push(e);return n}function qN(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var Tw=!1;function Lw(n,e){if(typeof window>"u"||typeof document>"u"||!Nl(window.location.host)||Hs[n]===e||Hs[n]||Tw)return;Hs[n]=e;function t(b){return`__firebase__banner__${b}`}let r="__firebase__banner",o=zN().prod.length>0;function s(){let b=document.getElementById(r);b&&b.remove()}function a(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function l(b,w){b.setAttribute("width","24"),b.setAttribute("id",w),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function u(){let b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{Tw=!0,s()},b}function p(b,w){b.setAttribute("id",w),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function y(){let b=qN(r),w=t("text"),N=document.getElementById(w)||document.createElement("span"),V=t("learnmore"),F=document.getElementById(V)||document.createElement("a"),W=t("preprendIcon"),ie=document.getElementById(W)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){let X=b.element;a(X),p(F,V);let Se=u();l(ie,W),X.append(ie,N,F,Se),document.body.appendChild(X)}o?(N.innerText="Preview backend disconnected.",ie.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ie.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}function jw(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function HN(){let n=ep()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Bw(){return!HN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function np(){try{return typeof indexedDB=="object"}catch{return!1}}function Uw(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var GN="FirebaseError",dr=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=GN,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ws.prototype.create)}},Ws=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?WN(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new dr(i,a,r)}};function WN(n,e){return n.replace(QN,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var QN=/\{\$([^}]+)}/g;function vo(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(Pw(o)&&Pw(s)){if(!vo(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function Pw(n){return n!==null&&typeof n=="object"}var x6=4*60*60*1e3;function Qt(n){return n&&n._delegate?n._delegate:n}var hr=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Di="[DEFAULT]";var rp=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Ol;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(YN(e))try{this.getOrInitializeService({instanceIdentifier:Di})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Di){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return B(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Di){return this.instances.has(e)}getOptions(e=Di){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:KN(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Di){return this.component?this.component.multipleInstances?e:Di:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function KN(n){return n===Di?void 0:n}function YN(n){return n.instantiationMode==="EAGER"}var Rl=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new rp(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var JN=[],Ie=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Ie||{}),XN={debug:Ie.DEBUG,verbose:Ie.VERBOSE,info:Ie.INFO,warn:Ie.WARN,error:Ie.ERROR,silent:Ie.SILENT},ZN=Ie.INFO,e2={[Ie.DEBUG]:"log",[Ie.VERBOSE]:"log",[Ie.INFO]:"info",[Ie.WARN]:"warn",[Ie.ERROR]:"error"},t2=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=e2[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},_o=class{constructor(e){this.name=e,this._logLevel=ZN,this._logHandler=t2,this._userLogHandler=null,JN.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?XN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ie.DEBUG,...e),this._logHandler(this,Ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ie.VERBOSE,...e),this._logHandler(this,Ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ie.INFO,...e),this._logHandler(this,Ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ie.WARN,...e),this._logHandler(this,Ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ie.ERROR,...e),this._logHandler(this,Ie.ERROR,...e)}};var n2=(n,e)=>e.some(t=>n instanceof t),$w,zw;function r2(){return $w||($w=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function i2(){return zw||(zw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var qw=new WeakMap,op=new WeakMap,Hw=new WeakMap,ip=new WeakMap,ap=new WeakMap;function o2(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(zn(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&qw.set(t,n)}).catch(()=>{}),ap.set(e,n),e}function s2(n){if(op.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});op.set(n,e)}var sp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return op.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Hw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return zn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Gw(n){sp=n(sp)}function a2(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(kl(this),e,...t);return Hw.set(r,e.sort?e.sort():[e]),zn(r)}:i2().includes(n)?function(...e){return n.apply(kl(this),e),zn(qw.get(this))}:function(...e){return zn(n.apply(kl(this),e))}}function c2(n){return typeof n=="function"?a2(n):(n instanceof IDBTransaction&&s2(n),n2(n,r2())?new Proxy(n,sp):n)}function zn(n){if(n instanceof IDBRequest)return o2(n);if(ip.has(n))return ip.get(n);let e=c2(n);return e!==n&&(ip.set(n,e),ap.set(e,n)),e}var kl=n=>ap.get(n);function Qw(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=zn(s);return r&&s.addEventListener("upgradeneeded",l=>{r(zn(s.result),l.oldVersion,l.newVersion,zn(s.transaction),l)}),t&&s.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var l2=["get","getKey","getAll","getAllKeys","count"],u2=["put","add","delete","clear"],cp=new Map;function Ww(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(cp.get(e))return cp.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=u2.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||l2.includes(t)))return;let o=function(s,...a){return B(this,null,function*(){let l=this.transaction(s,i?"readwrite":"readonly"),u=l.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[t](...a),i&&l.done]))[0]})};return cp.set(e,o),o}Gw(n=>ue(ee({},n),{get:(e,t,r)=>Ww(e,t)||n.get(e,t,r),has:(e,t)=>!!Ww(e,t)||n.has(e,t)}));var up=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(d2(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function d2(n){return n.getComponent()?.type==="VERSION"}var dp="@firebase/app",Kw="0.14.6";var fr=new _o("@firebase/app"),h2="@firebase/app-compat",f2="@firebase/analytics-compat",p2="@firebase/analytics",m2="@firebase/app-check-compat",g2="@firebase/app-check",y2="@firebase/auth",v2="@firebase/auth-compat",_2="@firebase/database",b2="@firebase/data-connect",w2="@firebase/database-compat",C2="@firebase/functions",x2="@firebase/functions-compat",E2="@firebase/installations",I2="@firebase/installations-compat",D2="@firebase/messaging",S2="@firebase/messaging-compat",M2="@firebase/performance",T2="@firebase/performance-compat",P2="@firebase/remote-config",A2="@firebase/remote-config-compat",O2="@firebase/storage",N2="@firebase/storage-compat",R2="@firebase/firestore",k2="@firebase/ai",F2="@firebase/firestore-compat",V2="firebase",L2="12.6.0";var hp="[DEFAULT]",j2={[dp]:"fire-core",[h2]:"fire-core-compat",[p2]:"fire-analytics",[f2]:"fire-analytics-compat",[g2]:"fire-app-check",[m2]:"fire-app-check-compat",[y2]:"fire-auth",[v2]:"fire-auth-compat",[_2]:"fire-rtdb",[b2]:"fire-data-connect",[w2]:"fire-rtdb-compat",[C2]:"fire-fn",[x2]:"fire-fn-compat",[E2]:"fire-iid",[I2]:"fire-iid-compat",[D2]:"fire-fcm",[S2]:"fire-fcm-compat",[M2]:"fire-perf",[T2]:"fire-perf-compat",[P2]:"fire-rc",[A2]:"fire-rc-compat",[O2]:"fire-gcs",[N2]:"fire-gcs-compat",[R2]:"fire-fst",[F2]:"fire-fst-compat",[k2]:"fire-vertex","fire-js":"fire-js",[V2]:"fire-js-all"};var Fl=new Map,B2=new Map,fp=new Map;function Yw(n,e){try{n.container.addComponent(e)}catch(t){fr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Qs(n){let e=n.name;if(fp.has(e))return fr.debug(`There were multiple attempts to register component ${e}.`),!1;fp.set(e,n);for(let t of Fl.values())Yw(t,n);for(let t of B2.values())Yw(t,n);return!0}function eC(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function tC(n){return n==null?!1:n.settings!==void 0}var U2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Br=new Ws("app","Firebase",U2);var pp=class{constructor(e,t,r){this._isDeleted=!1,this._options=ee({},e),this._config=ee({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Br.create("app-deleted",{appName:this._name})}};var nC=L2;function Ys(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=ee({name:hp,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Br.create("bad-app-name",{appName:String(i)});if(t||(t=tp()),!t)throw Br.create("no-options");let o=Fl.get(i);if(o){if(vo(t,o.options)&&vo(r,o.config))return o;throw Br.create("duplicate-app",{appName:i})}let s=new Rl(i);for(let l of fp.values())s.addComponent(l);let a=new pp(t,r,s);return Fl.set(i,a),a}function rC(n=hp){let e=Fl.get(n);if(!e&&n===hp&&tp())return Ys();if(!e)throw Br.create("no-app",{appName:n});return e}function Ur(n,e,t){let r=j2[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fr.warn(s.join(" "));return}Qs(new hr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var $2="firebase-heartbeat-database",z2=1,Ks="firebase-heartbeat-store",lp=null;function iC(){return lp||(lp=Qw($2,z2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ks)}catch(t){console.warn(t)}}}}).catch(n=>{throw Br.create("idb-open",{originalErrorMessage:n.message})})),lp}function q2(n){return B(this,null,function*(){try{let t=(yield iC()).transaction(Ks),r=yield t.objectStore(Ks).get(oC(n));return yield t.done,r}catch(e){if(e instanceof dr)fr.warn(e.message);else{let t=Br.create("idb-get",{originalErrorMessage:e?.message});fr.warn(t.message)}}})}function Jw(n,e){return B(this,null,function*(){try{let r=(yield iC()).transaction(Ks,"readwrite");yield r.objectStore(Ks).put(e,oC(n)),yield r.done}catch(t){if(t instanceof dr)fr.warn(t.message);else{let r=Br.create("idb-set",{originalErrorMessage:t?.message});fr.warn(r.message)}}})}function oC(n){return`${n.name}!${n.options.appId}`}var H2=1024,G2=30,mp=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new gp(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return B(this,null,function*(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Xw();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>G2){let i=Q2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){fr.warn(e)}})}getHeartbeatsHeader(){return B(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=Xw(),{heartbeatsToSend:t,unsentEntries:r}=W2(this._heartbeatsCache.heartbeats),i=Gs(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return fr.warn(e),""}})}};function Xw(){return new Date().toISOString().substring(0,10)}function W2(n,e=H2){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Zw(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Zw(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var gp=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return B(this,null,function*(){return np()?Uw().then(()=>!0).catch(()=>!1):!1})}read(){return B(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield q2(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return B(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Jw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return B(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Jw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function Zw(n){return Gs(JSON.stringify({version:2,heartbeats:n})).length}function Q2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function K2(n){Qs(new hr("platform-logger",e=>new up(e),"PRIVATE")),Qs(new hr("heartbeat",e=>new mp(e),"PRIVATE")),Ur(dp,Kw,n),Ur(dp,Kw,"esm2020"),Ur("fire-js","")}K2("");var Y2="firebase",J2="12.6.0";Ur(Y2,J2,"app");var sC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},aC={};var pr,yp;(function(){var n;function e(M,C){function E(){}E.prototype=C.prototype,M.F=C.prototype,M.prototype=new E,M.prototype.constructor=M,M.D=function(T,S,A){for(var x=Array(arguments.length-2),Tt=2;Tt<arguments.length;Tt++)x[Tt-2]=arguments[Tt];return C.prototype[S].apply(T,x)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,C,E){E||(E=0);let T=Array(16);if(typeof C=="string")for(var S=0;S<16;++S)T[S]=C.charCodeAt(E++)|C.charCodeAt(E++)<<8|C.charCodeAt(E++)<<16|C.charCodeAt(E++)<<24;else for(S=0;S<16;++S)T[S]=C[E++]|C[E++]<<8|C[E++]<<16|C[E++]<<24;C=M.g[0],E=M.g[1],S=M.g[2];let A=M.g[3],x;x=C+(A^E&(S^A))+T[0]+3614090360&4294967295,C=E+(x<<7&4294967295|x>>>25),x=A+(S^C&(E^S))+T[1]+3905402710&4294967295,A=C+(x<<12&4294967295|x>>>20),x=S+(E^A&(C^E))+T[2]+606105819&4294967295,S=A+(x<<17&4294967295|x>>>15),x=E+(C^S&(A^C))+T[3]+3250441966&4294967295,E=S+(x<<22&4294967295|x>>>10),x=C+(A^E&(S^A))+T[4]+4118548399&4294967295,C=E+(x<<7&4294967295|x>>>25),x=A+(S^C&(E^S))+T[5]+1200080426&4294967295,A=C+(x<<12&4294967295|x>>>20),x=S+(E^A&(C^E))+T[6]+2821735955&4294967295,S=A+(x<<17&4294967295|x>>>15),x=E+(C^S&(A^C))+T[7]+4249261313&4294967295,E=S+(x<<22&4294967295|x>>>10),x=C+(A^E&(S^A))+T[8]+1770035416&4294967295,C=E+(x<<7&4294967295|x>>>25),x=A+(S^C&(E^S))+T[9]+2336552879&4294967295,A=C+(x<<12&4294967295|x>>>20),x=S+(E^A&(C^E))+T[10]+4294925233&4294967295,S=A+(x<<17&4294967295|x>>>15),x=E+(C^S&(A^C))+T[11]+2304563134&4294967295,E=S+(x<<22&4294967295|x>>>10),x=C+(A^E&(S^A))+T[12]+1804603682&4294967295,C=E+(x<<7&4294967295|x>>>25),x=A+(S^C&(E^S))+T[13]+4254626195&4294967295,A=C+(x<<12&4294967295|x>>>20),x=S+(E^A&(C^E))+T[14]+2792965006&4294967295,S=A+(x<<17&4294967295|x>>>15),x=E+(C^S&(A^C))+T[15]+1236535329&4294967295,E=S+(x<<22&4294967295|x>>>10),x=C+(S^A&(E^S))+T[1]+4129170786&4294967295,C=E+(x<<5&4294967295|x>>>27),x=A+(E^S&(C^E))+T[6]+3225465664&4294967295,A=C+(x<<9&4294967295|x>>>23),x=S+(C^E&(A^C))+T[11]+643717713&4294967295,S=A+(x<<14&4294967295|x>>>18),x=E+(A^C&(S^A))+T[0]+3921069994&4294967295,E=S+(x<<20&4294967295|x>>>12),x=C+(S^A&(E^S))+T[5]+3593408605&4294967295,C=E+(x<<5&4294967295|x>>>27),x=A+(E^S&(C^E))+T[10]+38016083&4294967295,A=C+(x<<9&4294967295|x>>>23),x=S+(C^E&(A^C))+T[15]+3634488961&4294967295,S=A+(x<<14&4294967295|x>>>18),x=E+(A^C&(S^A))+T[4]+3889429448&4294967295,E=S+(x<<20&4294967295|x>>>12),x=C+(S^A&(E^S))+T[9]+568446438&4294967295,C=E+(x<<5&4294967295|x>>>27),x=A+(E^S&(C^E))+T[14]+3275163606&4294967295,A=C+(x<<9&4294967295|x>>>23),x=S+(C^E&(A^C))+T[3]+4107603335&4294967295,S=A+(x<<14&4294967295|x>>>18),x=E+(A^C&(S^A))+T[8]+1163531501&4294967295,E=S+(x<<20&4294967295|x>>>12),x=C+(S^A&(E^S))+T[13]+2850285829&4294967295,C=E+(x<<5&4294967295|x>>>27),x=A+(E^S&(C^E))+T[2]+4243563512&4294967295,A=C+(x<<9&4294967295|x>>>23),x=S+(C^E&(A^C))+T[7]+1735328473&4294967295,S=A+(x<<14&4294967295|x>>>18),x=E+(A^C&(S^A))+T[12]+2368359562&4294967295,E=S+(x<<20&4294967295|x>>>12),x=C+(E^S^A)+T[5]+4294588738&4294967295,C=E+(x<<4&4294967295|x>>>28),x=A+(C^E^S)+T[8]+2272392833&4294967295,A=C+(x<<11&4294967295|x>>>21),x=S+(A^C^E)+T[11]+1839030562&4294967295,S=A+(x<<16&4294967295|x>>>16),x=E+(S^A^C)+T[14]+4259657740&4294967295,E=S+(x<<23&4294967295|x>>>9),x=C+(E^S^A)+T[1]+2763975236&4294967295,C=E+(x<<4&4294967295|x>>>28),x=A+(C^E^S)+T[4]+1272893353&4294967295,A=C+(x<<11&4294967295|x>>>21),x=S+(A^C^E)+T[7]+4139469664&4294967295,S=A+(x<<16&4294967295|x>>>16),x=E+(S^A^C)+T[10]+3200236656&4294967295,E=S+(x<<23&4294967295|x>>>9),x=C+(E^S^A)+T[13]+681279174&4294967295,C=E+(x<<4&4294967295|x>>>28),x=A+(C^E^S)+T[0]+3936430074&4294967295,A=C+(x<<11&4294967295|x>>>21),x=S+(A^C^E)+T[3]+3572445317&4294967295,S=A+(x<<16&4294967295|x>>>16),x=E+(S^A^C)+T[6]+76029189&4294967295,E=S+(x<<23&4294967295|x>>>9),x=C+(E^S^A)+T[9]+3654602809&4294967295,C=E+(x<<4&4294967295|x>>>28),x=A+(C^E^S)+T[12]+3873151461&4294967295,A=C+(x<<11&4294967295|x>>>21),x=S+(A^C^E)+T[15]+530742520&4294967295,S=A+(x<<16&4294967295|x>>>16),x=E+(S^A^C)+T[2]+3299628645&4294967295,E=S+(x<<23&4294967295|x>>>9),x=C+(S^(E|~A))+T[0]+4096336452&4294967295,C=E+(x<<6&4294967295|x>>>26),x=A+(E^(C|~S))+T[7]+1126891415&4294967295,A=C+(x<<10&4294967295|x>>>22),x=S+(C^(A|~E))+T[14]+2878612391&4294967295,S=A+(x<<15&4294967295|x>>>17),x=E+(A^(S|~C))+T[5]+4237533241&4294967295,E=S+(x<<21&4294967295|x>>>11),x=C+(S^(E|~A))+T[12]+1700485571&4294967295,C=E+(x<<6&4294967295|x>>>26),x=A+(E^(C|~S))+T[3]+2399980690&4294967295,A=C+(x<<10&4294967295|x>>>22),x=S+(C^(A|~E))+T[10]+4293915773&4294967295,S=A+(x<<15&4294967295|x>>>17),x=E+(A^(S|~C))+T[1]+2240044497&4294967295,E=S+(x<<21&4294967295|x>>>11),x=C+(S^(E|~A))+T[8]+1873313359&4294967295,C=E+(x<<6&4294967295|x>>>26),x=A+(E^(C|~S))+T[15]+4264355552&4294967295,A=C+(x<<10&4294967295|x>>>22),x=S+(C^(A|~E))+T[6]+2734768916&4294967295,S=A+(x<<15&4294967295|x>>>17),x=E+(A^(S|~C))+T[13]+1309151649&4294967295,E=S+(x<<21&4294967295|x>>>11),x=C+(S^(E|~A))+T[4]+4149444226&4294967295,C=E+(x<<6&4294967295|x>>>26),x=A+(E^(C|~S))+T[11]+3174756917&4294967295,A=C+(x<<10&4294967295|x>>>22),x=S+(C^(A|~E))+T[2]+718787259&4294967295,S=A+(x<<15&4294967295|x>>>17),x=E+(A^(S|~C))+T[9]+3951481745&4294967295,M.g[0]=M.g[0]+C&4294967295,M.g[1]=M.g[1]+(S+(x<<21&4294967295|x>>>11))&4294967295,M.g[2]=M.g[2]+S&4294967295,M.g[3]=M.g[3]+A&4294967295}r.prototype.v=function(M,C){C===void 0&&(C=M.length);let E=C-this.blockSize,T=this.C,S=this.h,A=0;for(;A<C;){if(S==0)for(;A<=E;)i(this,M,A),A+=this.blockSize;if(typeof M=="string"){for(;A<C;)if(T[S++]=M.charCodeAt(A++),S==this.blockSize){i(this,T),S=0;break}}else for(;A<C;)if(T[S++]=M[A++],S==this.blockSize){i(this,T),S=0;break}}this.h=S,this.o+=C},r.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var C=1;C<M.length-8;++C)M[C]=0;C=this.o*8;for(var E=M.length-8;E<M.length;++E)M[E]=C&255,C/=256;for(this.v(M),M=Array(16),C=0,E=0;E<4;++E)for(let T=0;T<32;T+=8)M[C++]=this.g[E]>>>T&255;return M};function o(M,C){var E=a;return Object.prototype.hasOwnProperty.call(E,M)?E[M]:E[M]=C(M)}function s(M,C){this.h=C;let E=[],T=!0;for(let S=M.length-1;S>=0;S--){let A=M[S]|0;T&&A==C||(E[S]=A,T=!1)}this.g=E}var a={};function l(M){return-128<=M&&M<128?o(M,function(C){return new s([C|0],C<0?-1:0)}):new s([M|0],M<0?-1:0)}function u(M){if(isNaN(M)||!isFinite(M))return y;if(M<0)return F(u(-M));let C=[],E=1;for(let T=0;M>=E;T++)C[T]=M/E|0,E*=4294967296;return new s(C,0)}function p(M,C){if(M.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(M.charAt(0)=="-")return F(p(M.substring(1),C));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');let E=u(Math.pow(C,8)),T=y;for(let A=0;A<M.length;A+=8){var S=Math.min(8,M.length-A);let x=parseInt(M.substring(A,A+S),C);S<8?(S=u(Math.pow(C,S)),T=T.j(S).add(u(x))):(T=T.j(E),T=T.add(u(x)))}return T}var y=l(0),b=l(1),w=l(16777216);n=s.prototype,n.m=function(){if(V(this))return-F(this).m();let M=0,C=1;for(let E=0;E<this.g.length;E++){let T=this.i(E);M+=(T>=0?T:4294967296+T)*C,C*=4294967296}return M},n.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(N(this))return"0";if(V(this))return"-"+F(this).toString(M);let C=u(Math.pow(M,6));var E=this;let T="";for(;;){let S=Se(E,C).g;E=W(E,S.j(C));let A=((E.g.length>0?E.g[0]:E.h)>>>0).toString(M);if(E=S,N(E))return A+T;for(;A.length<6;)A="0"+A;T=A+T}},n.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function N(M){if(M.h!=0)return!1;for(let C=0;C<M.g.length;C++)if(M.g[C]!=0)return!1;return!0}function V(M){return M.h==-1}n.l=function(M){return M=W(this,M),V(M)?-1:N(M)?0:1};function F(M){let C=M.g.length,E=[];for(let T=0;T<C;T++)E[T]=~M.g[T];return new s(E,~M.h).add(b)}n.abs=function(){return V(this)?F(this):this},n.add=function(M){let C=Math.max(this.g.length,M.g.length),E=[],T=0;for(let S=0;S<=C;S++){let A=T+(this.i(S)&65535)+(M.i(S)&65535),x=(A>>>16)+(this.i(S)>>>16)+(M.i(S)>>>16);T=x>>>16,A&=65535,x&=65535,E[S]=x<<16|A}return new s(E,E[E.length-1]&-2147483648?-1:0)};function W(M,C){return M.add(F(C))}n.j=function(M){if(N(this)||N(M))return y;if(V(this))return V(M)?F(this).j(F(M)):F(F(this).j(M));if(V(M))return F(this.j(F(M)));if(this.l(w)<0&&M.l(w)<0)return u(this.m()*M.m());let C=this.g.length+M.g.length,E=[];for(var T=0;T<2*C;T++)E[T]=0;for(T=0;T<this.g.length;T++)for(let S=0;S<M.g.length;S++){let A=this.i(T)>>>16,x=this.i(T)&65535,Tt=M.i(S)>>>16,Er=M.i(S)&65535;E[2*T+2*S]+=x*Er,ie(E,2*T+2*S),E[2*T+2*S+1]+=A*Er,ie(E,2*T+2*S+1),E[2*T+2*S+1]+=x*Tt,ie(E,2*T+2*S+1),E[2*T+2*S+2]+=A*Tt,ie(E,2*T+2*S+2)}for(M=0;M<C;M++)E[M]=E[2*M+1]<<16|E[2*M];for(M=C;M<2*C;M++)E[M]=0;return new s(E,0)};function ie(M,C){for(;(M[C]&65535)!=M[C];)M[C+1]+=M[C]>>>16,M[C]&=65535,C++}function X(M,C){this.g=M,this.h=C}function Se(M,C){if(N(C))throw Error("division by zero");if(N(M))return new X(y,y);if(V(M))return C=Se(F(M),C),new X(F(C.g),F(C.h));if(V(C))return C=Se(M,F(C)),new X(F(C.g),C.h);if(M.g.length>30){if(V(M)||V(C))throw Error("slowDivide_ only works with positive integers.");for(var E=b,T=C;T.l(M)<=0;)E=Fe(E),T=Fe(T);var S=Me(E,1),A=Me(T,1);for(T=Me(T,2),E=Me(E,2);!N(T);){var x=A.add(T);x.l(M)<=0&&(S=S.add(E),A=x),T=Me(T,1),E=Me(E,1)}return C=W(M,S.j(C)),new X(S,C)}for(S=y;M.l(C)>=0;){for(E=Math.max(1,Math.floor(M.m()/C.m())),T=Math.ceil(Math.log(E)/Math.LN2),T=T<=48?1:Math.pow(2,T-48),A=u(E),x=A.j(C);V(x)||x.l(M)>0;)E-=T,A=u(E),x=A.j(C);N(A)&&(A=b),S=S.add(A),M=W(M,x)}return new X(S,M)}n.B=function(M){return Se(this,M).h},n.and=function(M){let C=Math.max(this.g.length,M.g.length),E=[];for(let T=0;T<C;T++)E[T]=this.i(T)&M.i(T);return new s(E,this.h&M.h)},n.or=function(M){let C=Math.max(this.g.length,M.g.length),E=[];for(let T=0;T<C;T++)E[T]=this.i(T)|M.i(T);return new s(E,this.h|M.h)},n.xor=function(M){let C=Math.max(this.g.length,M.g.length),E=[];for(let T=0;T<C;T++)E[T]=this.i(T)^M.i(T);return new s(E,this.h^M.h)};function Fe(M){let C=M.g.length+1,E=[];for(let T=0;T<C;T++)E[T]=M.i(T)<<1|M.i(T-1)>>>31;return new s(E,M.h)}function Me(M,C){let E=C>>5;C%=32;let T=M.g.length-E,S=[];for(let A=0;A<T;A++)S[A]=C>0?M.i(A+E)>>>C|M.i(A+E+1)<<32-C:M.i(A+E);return new s(S,M.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,yp=aC.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=p,pr=aC.Integer=s}).apply(typeof sC<"u"?sC:typeof self<"u"?self:typeof window<"u"?window:{});var Vl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},mr={};var vp,X2,bo,_p,Js,Ll,bp,wp,Cp;(function(){var n,e=Object.defineProperty;function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vl=="object"&&Vl];for(var d=0;d<c.length;++d){var m=c[d];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var m=r;c=c.split(".");for(var _=0;_<c.length-1;_++){var P=c[_];if(!(P in m))break e;m=m[P]}c=c[c.length-1],_=m[c],d=d(_),d!=_&&d!=null&&e(m,c,{configurable:!0,writable:!0,value:d})}}i("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(c){return c||function(d){var m=[],_;for(_ in d)Object.prototype.hasOwnProperty.call(d,_)&&m.push([_,d[_]]);return m}});var o=o||{},s=this||self;function a(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function l(c,d,m){return c.call.apply(c.bind,arguments)}function u(c,d,m){return u=l,u.apply(null,arguments)}function p(c,d){var m=Array.prototype.slice.call(arguments,1);return function(){var _=m.slice();return _.push.apply(_,arguments),c.apply(this,_)}}function y(c,d){function m(){}m.prototype=d.prototype,c.Z=d.prototype,c.prototype=new m,c.prototype.constructor=c,c.Ob=function(_,P,O){for(var z=Array(arguments.length-2),de=2;de<arguments.length;de++)z[de-2]=arguments[de];return d.prototype[P].apply(_,z)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function w(c){let d=c.length;if(d>0){let m=Array(d);for(let _=0;_<d;_++)m[_]=c[_];return m}return[]}function N(c,d){for(let _=1;_<arguments.length;_++){let P=arguments[_];var m=typeof P;if(m=m!="object"?m:P?Array.isArray(P)?"array":m:"null",m=="array"||m=="object"&&typeof P.length=="number"){m=c.length||0;let O=P.length||0;c.length=m+O;for(let z=0;z<O;z++)c[m+z]=P[z]}else c.push(P)}}class V{constructor(d,m){this.i=d,this.j=m,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function F(c){s.setTimeout(()=>{throw c},0)}function W(){var c=M;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class ie{constructor(){this.h=this.g=null}add(d,m){let _=X.get();_.set(d,m),this.h?this.h.next=_:this.g=_,this.h=_}}var X=new V(()=>new Se,c=>c.reset());class Se{constructor(){this.next=this.g=this.h=null}set(d,m){this.h=d,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Fe,Me=!1,M=new ie,C=()=>{let c=Promise.resolve(void 0);Fe=()=>{c.then(E)}};function E(){for(var c;c=W();){try{c.h.call(c.g)}catch(m){F(m)}var d=X;d.j(c),d.h<100&&(d.h++,c.next=d.g,d.g=c)}Me=!1}function T(){this.u=this.u,this.C=this.C}T.prototype.u=!1,T.prototype.dispose=function(){this.u||(this.u=!0,this.N())},T.prototype[Symbol.dispose]=function(){this.dispose()},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function S(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}S.prototype.h=function(){this.defaultPrevented=!0};var A=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let m=()=>{};s.addEventListener("test",m,d),s.removeEventListener("test",m,d)}catch{}return c}();function x(c){return/^[\s\xa0]*$/.test(c)}function Tt(c,d){S.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,d)}y(Tt,S),Tt.prototype.init=function(c,d){let m=this.type=c.type,_=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget,d||(m=="mouseover"?d=c.fromElement:m=="mouseout"&&(d=c.toElement)),this.relatedTarget=d,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Tt.Z.h.call(this)},Tt.prototype.h=function(){Tt.Z.h.call(this);let c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Er="closure_listenable_"+(Math.random()*1e6|0),kE=0;function FE(c,d,m,_,P){this.listener=c,this.proxy=null,this.src=d,this.type=m,this.capture=!!_,this.ha=P,this.key=++kE,this.da=this.fa=!1}function Ea(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ia(c,d,m){for(let _ in c)d.call(m,c[_],_,c)}function VE(c,d){for(let m in c)d.call(void 0,c[m],m,c)}function Ug(c){let d={};for(let m in c)d[m]=c[m];return d}let $g="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function zg(c,d){let m,_;for(let P=1;P<arguments.length;P++){_=arguments[P];for(m in _)c[m]=_[m];for(let O=0;O<$g.length;O++)m=$g[O],Object.prototype.hasOwnProperty.call(_,m)&&(c[m]=_[m])}}function Da(c){this.src=c,this.g={},this.h=0}Da.prototype.add=function(c,d,m,_,P){let O=c.toString();c=this.g[O],c||(c=this.g[O]=[],this.h++);let z=ju(c,d,_,P);return z>-1?(d=c[z],m||(d.fa=!1)):(d=new FE(d,this.src,O,!!_,P),d.fa=m,c.push(d)),d};function Lu(c,d){let m=d.type;if(m in c.g){var _=c.g[m],P=Array.prototype.indexOf.call(_,d,void 0),O;(O=P>=0)&&Array.prototype.splice.call(_,P,1),O&&(Ea(d),c.g[m].length==0&&(delete c.g[m],c.h--))}}function ju(c,d,m,_){for(let P=0;P<c.length;++P){let O=c[P];if(!O.da&&O.listener==d&&O.capture==!!m&&O.ha==_)return P}return-1}var Bu="closure_lm_"+(Math.random()*1e6|0),Uu={};function qg(c,d,m,_,P){if(_&&_.once)return Gg(c,d,m,_,P);if(Array.isArray(d)){for(let O=0;O<d.length;O++)qg(c,d[O],m,_,P);return null}return m=Hu(m),c&&c[Er]?c.J(d,m,a(_)?!!_.capture:!!_,P):Hg(c,d,m,!1,_,P)}function Hg(c,d,m,_,P,O){if(!d)throw Error("Invalid event type");let z=a(P)?!!P.capture:!!P,de=zu(c);if(de||(c[Bu]=de=new Da(c)),m=de.add(d,m,_,z,O),m.proxy)return m;if(_=LE(),m.proxy=_,_.src=c,_.listener=m,c.addEventListener)A||(P=z),P===void 0&&(P=!1),c.addEventListener(d.toString(),_,P);else if(c.attachEvent)c.attachEvent(Qg(d.toString()),_);else if(c.addListener&&c.removeListener)c.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return m}function LE(){function c(m){return d.call(c.src,c.listener,m)}let d=jE;return c}function Gg(c,d,m,_,P){if(Array.isArray(d)){for(let O=0;O<d.length;O++)Gg(c,d[O],m,_,P);return null}return m=Hu(m),c&&c[Er]?c.K(d,m,a(_)?!!_.capture:!!_,P):Hg(c,d,m,!0,_,P)}function Wg(c,d,m,_,P){if(Array.isArray(d))for(var O=0;O<d.length;O++)Wg(c,d[O],m,_,P);else _=a(_)?!!_.capture:!!_,m=Hu(m),c&&c[Er]?(c=c.i,O=String(d).toString(),O in c.g&&(d=c.g[O],m=ju(d,m,_,P),m>-1&&(Ea(d[m]),Array.prototype.splice.call(d,m,1),d.length==0&&(delete c.g[O],c.h--)))):c&&(c=zu(c))&&(d=c.g[d.toString()],c=-1,d&&(c=ju(d,m,_,P)),(m=c>-1?d[c]:null)&&$u(m))}function $u(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Er])Lu(d.i,c);else{var m=c.type,_=c.proxy;d.removeEventListener?d.removeEventListener(m,_,c.capture):d.detachEvent?d.detachEvent(Qg(m),_):d.addListener&&d.removeListener&&d.removeListener(_),(m=zu(d))?(Lu(m,c),m.h==0&&(m.src=null,d[Bu]=null)):Ea(c)}}}function Qg(c){return c in Uu?Uu[c]:Uu[c]="on"+c}function jE(c,d){if(c.da)c=!0;else{d=new Tt(d,this);let m=c.listener,_=c.ha||c.src;c.fa&&$u(c),c=m.call(_,d)}return c}function zu(c){return c=c[Bu],c instanceof Da?c:null}var qu="__closure_events_fn_"+(Math.random()*1e9>>>0);function Hu(c){return typeof c=="function"?c:(c[qu]||(c[qu]=function(d){return c.handleEvent(d)}),c[qu])}function _t(){T.call(this),this.i=new Da(this),this.M=this,this.G=null}y(_t,T),_t.prototype[Er]=!0,_t.prototype.removeEventListener=function(c,d,m,_){Wg(this,c,d,m,_)};function It(c,d){var m,_=c.G;if(_)for(m=[];_;_=_.G)m.push(_);if(c=c.M,_=d.type||d,typeof d=="string")d=new S(d,c);else if(d instanceof S)d.target=d.target||c;else{var P=d;d=new S(_,c),zg(d,P)}P=!0;let O,z;if(m)for(z=m.length-1;z>=0;z--)O=d.g=m[z],P=Sa(O,_,!0,d)&&P;if(O=d.g=c,P=Sa(O,_,!0,d)&&P,P=Sa(O,_,!1,d)&&P,m)for(z=0;z<m.length;z++)O=d.g=m[z],P=Sa(O,_,!1,d)&&P}_t.prototype.N=function(){if(_t.Z.N.call(this),this.i){var c=this.i;for(let d in c.g){let m=c.g[d];for(let _=0;_<m.length;_++)Ea(m[_]);delete c.g[d],c.h--}}this.G=null},_t.prototype.J=function(c,d,m,_){return this.i.add(String(c),d,!1,m,_)},_t.prototype.K=function(c,d,m,_){return this.i.add(String(c),d,!0,m,_)};function Sa(c,d,m,_){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();let P=!0;for(let O=0;O<d.length;++O){let z=d[O];if(z&&!z.da&&z.capture==m){let de=z.listener,ut=z.ha||z.src;z.fa&&Lu(c.i,z),P=de.call(ut,_)!==!1&&P}}return P&&!_.defaultPrevented}function BE(c,d){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=u(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:s.setTimeout(c,d||0)}function Kg(c){c.g=BE(()=>{c.g=null,c.i&&(c.i=!1,Kg(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class UE extends T{constructor(d,m){super(),this.m=d,this.l=m,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Kg(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Go(c){T.call(this),this.h=c,this.g={}}y(Go,T);var Yg=[];function Jg(c){Ia(c.g,function(d,m){this.g.hasOwnProperty(m)&&$u(d)},c),c.g={}}Go.prototype.N=function(){Go.Z.N.call(this),Jg(this)},Go.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gu=s.JSON.stringify,$E=s.JSON.parse,zE=class{stringify(c){return s.JSON.stringify(c,void 0)}parse(c){return s.JSON.parse(c,void 0)}};function Xg(){}function Zg(){}var Wo={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Wu(){S.call(this,"d")}y(Wu,S);function Qu(){S.call(this,"c")}y(Qu,S);var Xr={},e0=null;function Ma(){return e0=e0||new _t}Xr.Ia="serverreachability";function t0(c){S.call(this,Xr.Ia,c)}y(t0,S);function Qo(c){let d=Ma();It(d,new t0(d))}Xr.STAT_EVENT="statevent";function n0(c,d){S.call(this,Xr.STAT_EVENT,c),this.stat=d}y(n0,S);function Dt(c){let d=Ma();It(d,new n0(d,c))}Xr.Ja="timingevent";function r0(c,d){S.call(this,Xr.Ja,c),this.size=d}y(r0,S);function Ko(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){c()},d)}function Yo(){this.g=!0}Yo.prototype.ua=function(){this.g=!1};function qE(c,d,m,_,P,O){c.info(function(){if(c.g)if(O){var z="",de=O.split("&");for(let Ne=0;Ne<de.length;Ne++){var ut=de[Ne].split("=");if(ut.length>1){let ht=ut[0];ut=ut[1];let Mn=ht.split("_");z=Mn.length>=2&&Mn[1]=="type"?z+(ht+"="+ut+"&"):z+(ht+"=redacted&")}}}else z=null;else z=O;return"XMLHTTP REQ ("+_+") [attempt "+P+"]: "+d+`
`+m+`
`+z})}function HE(c,d,m,_,P,O,z){c.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+P+"]: "+d+`
`+m+`
`+O+" "+z})}function Bi(c,d,m,_){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+WE(c,m)+(_?" "+_:"")})}function GE(c,d){c.info(function(){return"TIMEOUT: "+d})}Yo.prototype.info=function(){};function WE(c,d){if(!c.g)return d;if(!d)return null;try{let O=JSON.parse(d);if(O){for(c=0;c<O.length;c++)if(Array.isArray(O[c])){var m=O[c];if(!(m.length<2)){var _=m[1];if(Array.isArray(_)&&!(_.length<1)){var P=_[0];if(P!="noop"&&P!="stop"&&P!="close")for(let z=1;z<_.length;z++)_[z]=""}}}}return Gu(O)}catch{return d}}var Ta={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},i0={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},o0;function Ku(){}y(Ku,Xg),Ku.prototype.g=function(){return new XMLHttpRequest},o0=new Ku;function Jo(c){return encodeURIComponent(String(c))}function QE(c){var d=1;c=c.split(":");let m=[];for(;d>0&&c.length;)m.push(c.shift()),d--;return c.length&&m.push(c.join(":")),m}function Ir(c,d,m,_){this.j=c,this.i=d,this.l=m,this.S=_||1,this.V=new Go(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new s0}function s0(){this.i=null,this.g="",this.h=!1}var a0={},Yu={};function Ju(c,d,m){c.M=1,c.A=Aa(Sn(d)),c.u=m,c.R=!0,c0(c,null)}function c0(c,d){c.F=Date.now(),Pa(c),c.B=Sn(c.A);var m=c.B,_=c.S;Array.isArray(_)||(_=[String(_)]),w0(m.i,"t",_),c.C=0,m=c.j.L,c.h=new s0,c.g=j0(c.j,m?d:null,!c.u),c.P>0&&(c.O=new UE(u(c.Y,c,c.g),c.P)),d=c.V,m=c.g,_=c.ba;var P="readystatechange";Array.isArray(P)||(P&&(Yg[0]=P.toString()),P=Yg);for(let O=0;O<P.length;O++){let z=qg(m,P[O],_||d.handleEvent,!1,d.h||d);if(!z)break;d.g[z.key]=z}d=c.J?Ug(c.J):{},c.u?(c.v||(c.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,d)):(c.v="GET",c.g.ea(c.B,c.v,null,d)),Qo(),qE(c.i,c.v,c.B,c.l,c.S,c.u)}Ir.prototype.ba=function(c){c=c.target;let d=this.O;d&&Mr(c)==3?d.j():this.Y(c)},Ir.prototype.Y=function(c){try{if(c==this.g)e:{let de=Mr(this.g),ut=this.g.ya(),Ne=this.g.ca();if(!(de<3)&&(de!=3||this.g&&(this.h.h||this.g.la()||M0(this.g)))){this.K||de!=4||ut==7||(ut==8||Ne<=0?Qo(3):Qo(2)),Xu(this);var d=this.g.ca();this.X=d;var m=KE(this);if(this.o=d==200,HE(this.i,this.v,this.B,this.l,this.S,de,d),this.o){if(this.U&&!this.L){t:{if(this.g){var _,P=this.g;if((_=P.g?P.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(_)){var O=_;break t}}O=null}if(c=O)Bi(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Zu(this,c);else{this.o=!1,this.m=3,Dt(12),Zr(this),Xo(this);break e}}if(this.R){c=!0;let ht;for(;!this.K&&this.C<m.length;)if(ht=YE(this,m),ht==Yu){de==4&&(this.m=4,Dt(14),c=!1),Bi(this.i,this.l,null,"[Incomplete Response]");break}else if(ht==a0){this.m=4,Dt(15),Bi(this.i,this.l,m,"[Invalid Chunk]"),c=!1;break}else Bi(this.i,this.l,ht,null),Zu(this,ht);if(l0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),de!=4||m.length!=0||this.h.h||(this.m=1,Dt(16),c=!1),this.o=this.o&&c,!c)Bi(this.i,this.l,m,"[Invalid Chunked Response]"),Zr(this),Xo(this);else if(m.length>0&&!this.W){this.W=!0;var z=this.j;z.g==this&&z.aa&&!z.P&&(z.j.info("Great, no buffering proxy detected. Bytes received: "+m.length),sd(z),z.P=!0,Dt(11))}}else Bi(this.i,this.l,m,null),Zu(this,m);de==4&&Zr(this),this.o&&!this.K&&(de==4?k0(this.j,this):(this.o=!1,Pa(this)))}else u1(this.g),d==400&&m.indexOf("Unknown SID")>0?(this.m=3,Dt(12)):(this.m=0,Dt(13)),Zr(this),Xo(this)}}}catch{}finally{}};function KE(c){if(!l0(c))return c.g.la();let d=M0(c.g);if(d==="")return"";let m="",_=d.length,P=Mr(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Zr(c),Xo(c),"";c.h.i=new s.TextDecoder}for(let O=0;O<_;O++)c.h.h=!0,m+=c.h.i.decode(d[O],{stream:!(P&&O==_-1)});return d.length=0,c.h.g+=m,c.C=0,c.h.g}function l0(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function YE(c,d){var m=c.C,_=d.indexOf(`
`,m);return _==-1?Yu:(m=Number(d.substring(m,_)),isNaN(m)?a0:(_+=1,_+m>d.length?Yu:(d=d.slice(_,_+m),c.C=_+m,d)))}Ir.prototype.cancel=function(){this.K=!0,Zr(this)};function Pa(c){c.T=Date.now()+c.H,u0(c,c.H)}function u0(c,d){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Ko(u(c.aa,c),d)}function Xu(c){c.D&&(s.clearTimeout(c.D),c.D=null)}Ir.prototype.aa=function(){this.D=null;let c=Date.now();c-this.T>=0?(GE(this.i,this.B),this.M!=2&&(Qo(),Dt(17)),Zr(this),this.m=2,Xo(this)):u0(this,this.T-c)};function Xo(c){c.j.I==0||c.K||k0(c.j,c)}function Zr(c){Xu(c);var d=c.O;d&&typeof d.dispose=="function"&&d.dispose(),c.O=null,Jg(c.V),c.g&&(d=c.g,c.g=null,d.abort(),d.dispose())}function Zu(c,d){try{var m=c.j;if(m.I!=0&&(m.g==c||ed(m.h,c))){if(!c.L&&ed(m.h,c)&&m.I==3){try{var _=m.Ba.g.parse(d)}catch{_=null}if(Array.isArray(_)&&_.length==3){var P=_;if(P[0]==0){e:if(!m.v){if(m.g)if(m.g.F+3e3<c.F)Va(m),ka(m);else break e;od(m),Dt(18)}}else m.xa=P[1],0<m.xa-m.K&&P[2]<37500&&m.F&&m.A==0&&!m.C&&(m.C=Ko(u(m.Va,m),6e3));f0(m.h)<=1&&m.ta&&(m.ta=void 0)}else ti(m,11)}else if((c.L||m.g==c)&&Va(m),!x(d))for(P=m.Ba.g.parse(d),d=0;d<P.length;d++){let Ne=P[d],ht=Ne[0];if(!(ht<=m.K))if(m.K=ht,Ne=Ne[1],m.I==2)if(Ne[0]=="c"){m.M=Ne[1],m.ba=Ne[2];let Mn=Ne[3];Mn!=null&&(m.ka=Mn,m.j.info("VER="+m.ka));let ni=Ne[4];ni!=null&&(m.za=ni,m.j.info("SVER="+m.za));let Tr=Ne[5];Tr!=null&&typeof Tr=="number"&&Tr>0&&(_=1.5*Tr,m.O=_,m.j.info("backChannelRequestTimeoutMs_="+_)),_=m;let Pr=c.g;if(Pr){let ja=Pr.g?Pr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ja){var O=_.h;O.g||ja.indexOf("spdy")==-1&&ja.indexOf("quic")==-1&&ja.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(td(O,O.h),O.h=null))}if(_.G){let ad=Pr.g?Pr.g.getResponseHeader("X-HTTP-Session-Id"):null;ad&&(_.wa=ad,Be(_.J,_.G,ad))}}m.I=3,m.l&&m.l.ra(),m.aa&&(m.T=Date.now()-c.F,m.j.info("Handshake RTT: "+m.T+"ms")),_=m;var z=c;if(_.na=L0(_,_.L?_.ba:null,_.W),z.L){p0(_.h,z);var de=z,ut=_.O;ut&&(de.H=ut),de.D&&(Xu(de),Pa(de)),_.g=z}else N0(_);m.i.length>0&&Fa(m)}else Ne[0]!="stop"&&Ne[0]!="close"||ti(m,7);else m.I==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?ti(m,7):id(m):Ne[0]!="noop"&&m.l&&m.l.qa(Ne),m.A=0)}}Qo(4)}catch{}}var JE=class{constructor(c,d){this.g=c,this.map=d}};function d0(c){this.l=c||10,s.PerformanceNavigationTiming?(c=s.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function h0(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function f0(c){return c.h?1:c.g?c.g.size:0}function ed(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function td(c,d){c.g?c.g.add(d):c.h=d}function p0(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}d0.prototype.cancel=function(){if(this.i=m0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function m0(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let m of c.g.values())d=d.concat(m.G);return d}return w(c.i)}var g0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function XE(c,d){if(c){c=c.split("&");for(let m=0;m<c.length;m++){let _=c[m].indexOf("="),P,O=null;_>=0?(P=c[m].substring(0,_),O=c[m].substring(_+1)):P=c[m],d(P,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function Dr(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;c instanceof Dr?(this.l=c.l,Zo(this,c.j),this.o=c.o,this.g=c.g,es(this,c.u),this.h=c.h,nd(this,C0(c.i)),this.m=c.m):c&&(d=String(c).match(g0))?(this.l=!1,Zo(this,d[1]||"",!0),this.o=ts(d[2]||""),this.g=ts(d[3]||"",!0),es(this,d[4]),this.h=ts(d[5]||"",!0),nd(this,d[6]||"",!0),this.m=ts(d[7]||"")):(this.l=!1,this.i=new rs(null,this.l))}Dr.prototype.toString=function(){let c=[];var d=this.j;d&&c.push(ns(d,y0,!0),":");var m=this.g;return(m||d=="file")&&(c.push("//"),(d=this.o)&&c.push(ns(d,y0,!0),"@"),c.push(Jo(m).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.u,m!=null&&c.push(":",String(m))),(m=this.h)&&(this.g&&m.charAt(0)!="/"&&c.push("/"),c.push(ns(m,m.charAt(0)=="/"?t1:e1,!0))),(m=this.i.toString())&&c.push("?",m),(m=this.m)&&c.push("#",ns(m,r1)),c.join("")},Dr.prototype.resolve=function(c){let d=Sn(this),m=!!c.j;m?Zo(d,c.j):m=!!c.o,m?d.o=c.o:m=!!c.g,m?d.g=c.g:m=c.u!=null;var _=c.h;if(m)es(d,c.u);else if(m=!!c.h){if(_.charAt(0)!="/")if(this.g&&!this.h)_="/"+_;else{var P=d.h.lastIndexOf("/");P!=-1&&(_=d.h.slice(0,P+1)+_)}if(P=_,P==".."||P==".")_="";else if(P.indexOf("./")!=-1||P.indexOf("/.")!=-1){_=P.lastIndexOf("/",0)==0,P=P.split("/");let O=[];for(let z=0;z<P.length;){let de=P[z++];de=="."?_&&z==P.length&&O.push(""):de==".."?((O.length>1||O.length==1&&O[0]!="")&&O.pop(),_&&z==P.length&&O.push("")):(O.push(de),_=!0)}_=O.join("/")}else _=P}return m?d.h=_:m=c.i.toString()!=="",m?nd(d,C0(c.i)):m=!!c.m,m&&(d.m=c.m),d};function Sn(c){return new Dr(c)}function Zo(c,d,m){c.j=m?ts(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function es(c,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);c.u=d}else c.u=null}function nd(c,d,m){d instanceof rs?(c.i=d,i1(c.i,c.l)):(m||(d=ns(d,n1)),c.i=new rs(d,c.l))}function Be(c,d,m){c.i.set(d,m)}function Aa(c){return Be(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function ts(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ns(c,d,m){return typeof c=="string"?(c=encodeURI(c).replace(d,ZE),m&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function ZE(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var y0=/[#\/\?@]/g,e1=/[#\?:]/g,t1=/[#\?]/g,n1=/[#\?@]/g,r1=/#/g;function rs(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function ei(c){c.g||(c.g=new Map,c.h=0,c.i&&XE(c.i,function(d,m){c.add(decodeURIComponent(d.replace(/\+/g," ")),m)}))}n=rs.prototype,n.add=function(c,d){ei(this),this.i=null,c=Ui(this,c);let m=this.g.get(c);return m||this.g.set(c,m=[]),m.push(d),this.h+=1,this};function v0(c,d){ei(c),d=Ui(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function _0(c,d){return ei(c),d=Ui(c,d),c.g.has(d)}n.forEach=function(c,d){ei(this),this.g.forEach(function(m,_){m.forEach(function(P){c.call(d,P,_,this)},this)},this)};function b0(c,d){ei(c);let m=[];if(typeof d=="string")_0(c,d)&&(m=m.concat(c.g.get(Ui(c,d))));else for(c=Array.from(c.g.values()),d=0;d<c.length;d++)m=m.concat(c[d]);return m}n.set=function(c,d){return ei(this),this.i=null,c=Ui(this,c),_0(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=b0(this,c),c.length>0?String(c[0]):d):d};function w0(c,d,m){v0(c,d),m.length>0&&(c.i=null,c.g.set(Ui(c,d),w(m)),c.h+=m.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(let _=0;_<d.length;_++){var m=d[_];let P=Jo(m);m=b0(this,m);for(let O=0;O<m.length;O++){let z=P;m[O]!==""&&(z+="="+Jo(m[O])),c.push(z)}}return this.i=c.join("&")};function C0(c){let d=new rs;return d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),d}function Ui(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function i1(c,d){d&&!c.j&&(ei(c),c.i=null,c.g.forEach(function(m,_){let P=_.toLowerCase();_!=P&&(v0(this,_),w0(this,P,m))},c)),c.j=d}function o1(c,d){let m=new Yo;if(s.Image){let _=new Image;_.onload=p(Sr,m,"TestLoadImage: loaded",!0,d,_),_.onerror=p(Sr,m,"TestLoadImage: error",!1,d,_),_.onabort=p(Sr,m,"TestLoadImage: abort",!1,d,_),_.ontimeout=p(Sr,m,"TestLoadImage: timeout",!1,d,_),s.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=c}else d(!1)}function s1(c,d){let m=new Yo,_=new AbortController,P=setTimeout(()=>{_.abort(),Sr(m,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:_.signal}).then(O=>{clearTimeout(P),O.ok?Sr(m,"TestPingServer: ok",!0,d):Sr(m,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(P),Sr(m,"TestPingServer: error",!1,d)})}function Sr(c,d,m,_,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),_(m)}catch{}}function a1(){this.g=new zE}function Oa(c){this.i=c.Sb||null,this.h=c.ab||!1}y(Oa,Xg),Oa.prototype.g=function(){return new Na(this.i,this.h)};function Na(c,d){_t.call(this),this.H=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(Na,_t),n=Na.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=d,this.readyState=1,os(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(d.body=c),(this.H||s).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,is(this)),this.readyState=0},n.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,os(this)),this.g&&(this.readyState=3,os(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;x0(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function x0(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}n.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?is(this):os(this),this.readyState==3&&x0(this)}},n.Oa=function(c){this.g&&(this.response=this.responseText=c,is(this))},n.Na=function(c){this.g&&(this.response=c,is(this))},n.ga=function(){this.g&&is(this)};function is(c){c.readyState=4,c.l=null,c.j=null,c.B=null,os(c)}n.setRequestHeader=function(c,d){this.A.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var m=d.next();!m.done;)m=m.value,c.push(m[0]+": "+m[1]),m=d.next();return c.join(`\r
`)};function os(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Na.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function E0(c){let d="";return Ia(c,function(m,_){d+=_,d+=":",d+=m,d+=`\r
`}),d}function rd(c,d,m){e:{for(_ in m){var _=!1;break e}_=!0}_||(m=E0(m),typeof c=="string"?m!=null&&Jo(m):Be(c,d,m))}function We(c){_t.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(We,_t);var c1=/^https?$/i,l1=["POST","PUT"];n=We.prototype,n.Fa=function(c){this.H=c},n.ea=function(c,d,m,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():o0.g(),this.g.onreadystatechange=b(u(this.Ca,this));try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(O){I0(this,O);return}if(c=m||"",m=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var P in _)m.set(P,_[P]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(let O of _.keys())m.set(O,_.get(O));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(m.keys()).find(O=>O.toLowerCase()=="content-type"),P=s.FormData&&c instanceof s.FormData,!(Array.prototype.indexOf.call(l1,d,void 0)>=0)||_||P||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[O,z]of m)this.g.setRequestHeader(O,z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(O){I0(this,O)}};function I0(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.o=5,D0(c),Ra(c)}function D0(c){c.A||(c.A=!0,It(c,"complete"),It(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,It(this,"complete"),It(this,"abort"),Ra(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ra(this,!0)),We.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?S0(this):this.Xa())},n.Xa=function(){S0(this)};function S0(c){if(c.h&&typeof o<"u"){if(c.v&&Mr(c)==4)setTimeout(c.Ca.bind(c),0);else if(It(c,"readystatechange"),Mr(c)==4){c.h=!1;try{let O=c.ca();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var m;if(!(m=d)){var _;if(_=O===0){let z=String(c.D).match(g0)[1]||null;!z&&s.self&&s.self.location&&(z=s.self.location.protocol.slice(0,-1)),_=!c1.test(z?z.toLowerCase():"")}m=_}if(m)It(c,"complete"),It(c,"success");else{c.o=6;try{var P=Mr(c)>2?c.g.statusText:""}catch{P=""}c.l=P+" ["+c.ca()+"]",D0(c)}}finally{Ra(c)}}}}function Ra(c,d){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);let m=c.g;c.g=null,d||It(c,"ready");try{m.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Mr(c){return c.g?c.g.readyState:0}n.ca=function(){try{return Mr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),$E(d)}};function M0(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function u1(c){let d={};c=(c.g&&Mr(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<c.length;_++){if(x(c[_]))continue;var m=QE(c[_]);let P=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();let O=d[P]||[];d[P]=O,O.push(m)}VE(d,function(_){return _.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ss(c,d,m){return m&&m.internalChannelParams&&m.internalChannelParams[c]||d}function T0(c){this.za=0,this.i=[],this.j=new Yo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ss("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ss("baseRetryDelayMs",5e3,c),this.Za=ss("retryDelaySeedMs",1e4,c),this.Ta=ss("forwardChannelMaxRetries",2,c),this.va=ss("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new d0(c&&c.concurrentRequestLimit),this.Ba=new a1,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=T0.prototype,n.ka=8,n.I=1,n.connect=function(c,d,m,_){Dt(0),this.W=c,this.H=d||{},m&&_!==void 0&&(this.H.OSID=m,this.H.OAID=_),this.F=this.X,this.J=L0(this,null,this.W),Fa(this)};function id(c){if(P0(c),c.I==3){var d=c.V++,m=Sn(c.J);if(Be(m,"SID",c.M),Be(m,"RID",d),Be(m,"TYPE","terminate"),as(c,m),d=new Ir(c,c.j,d),d.M=2,d.A=Aa(Sn(m)),m=!1,s.navigator&&s.navigator.sendBeacon)try{m=s.navigator.sendBeacon(d.A.toString(),"")}catch{}!m&&s.Image&&(new Image().src=d.A,m=!0),m||(d.g=j0(d.j,null),d.g.ea(d.A)),d.F=Date.now(),Pa(d)}V0(c)}function ka(c){c.g&&(sd(c),c.g.cancel(),c.g=null)}function P0(c){ka(c),c.v&&(s.clearTimeout(c.v),c.v=null),Va(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&s.clearTimeout(c.m),c.m=null)}function Fa(c){if(!h0(c.h)&&!c.m){c.m=!0;var d=c.Ea;Fe||C(),Me||(Fe(),Me=!0),M.add(d,c),c.D=0}}function d1(c,d){return f0(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=d.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Ko(u(c.Ea,c,d),F0(c,c.D)),c.D++,!0)}n.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;let P=new Ir(this,this.j,c),O=this.o;if(this.U&&(O?(O=Ug(O),zg(O,this.U)):O=this.U),this.u!==null||this.R||(P.J=O,O=null),this.S)e:{for(var d=0,m=0;m<this.i.length;m++){t:{var _=this.i[m];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(d+=_,d>4096){d=m;break e}if(d===4096||m===this.i.length-1){d=m+1;break e}}d=1e3}else d=1e3;d=O0(this,P,d),m=Sn(this.J),Be(m,"RID",c),Be(m,"CVER",22),this.G&&Be(m,"X-HTTP-Session-Id",this.G),as(this,m),O&&(this.R?d="headers="+Jo(E0(O))+"&"+d:this.u&&rd(m,this.u,O)),td(this.h,P),this.Ra&&Be(m,"TYPE","init"),this.S?(Be(m,"$req",d),Be(m,"SID","null"),P.U=!0,Ju(P,m,null)):Ju(P,m,d),this.I=2}}else this.I==3&&(c?A0(this,c):this.i.length==0||h0(this.h)||A0(this))};function A0(c,d){var m;d?m=d.l:m=c.V++;let _=Sn(c.J);Be(_,"SID",c.M),Be(_,"RID",m),Be(_,"AID",c.K),as(c,_),c.u&&c.o&&rd(_,c.u,c.o),m=new Ir(c,c.j,m,c.D+1),c.u===null&&(m.J=c.o),d&&(c.i=d.G.concat(c.i)),d=O0(c,m,1e3),m.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),td(c.h,m),Ju(m,_,d)}function as(c,d){c.H&&Ia(c.H,function(m,_){Be(d,_,m)}),c.l&&Ia({},function(m,_){Be(d,_,m)})}function O0(c,d,m){m=Math.min(c.i.length,m);let _=c.l?u(c.l.Ka,c.l,c):null;e:{var P=c.i;let de=-1;for(;;){let ut=["count="+m];de==-1?m>0?(de=P[0].g,ut.push("ofs="+de)):de=0:ut.push("ofs="+de);let Ne=!0;for(let ht=0;ht<m;ht++){var O=P[ht].g;let Mn=P[ht].map;if(O-=de,O<0)de=Math.max(0,P[ht].g-100),Ne=!1;else try{O="req"+O+"_"||"";try{var z=Mn instanceof Map?Mn:Object.entries(Mn);for(let[ni,Tr]of z){let Pr=Tr;a(Tr)&&(Pr=Gu(Tr)),ut.push(O+ni+"="+encodeURIComponent(Pr))}}catch(ni){throw ut.push(O+"type="+encodeURIComponent("_badmap")),ni}}catch{_&&_(Mn)}}if(Ne){z=ut.join("&");break e}}z=void 0}return c=c.i.splice(0,m),d.G=c,z}function N0(c){if(!c.g&&!c.v){c.Y=1;var d=c.Da;Fe||C(),Me||(Fe(),Me=!0),M.add(d,c),c.A=0}}function od(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Ko(u(c.Da,c),F0(c,c.A)),c.A++,!0)}n.Da=function(){if(this.v=null,R0(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Ko(u(this.Wa,this),c)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Dt(10),ka(this),R0(this))};function sd(c){c.B!=null&&(s.clearTimeout(c.B),c.B=null)}function R0(c){c.g=new Ir(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var d=Sn(c.na);Be(d,"RID","rpc"),Be(d,"SID",c.M),Be(d,"AID",c.K),Be(d,"CI",c.F?"0":"1"),!c.F&&c.ia&&Be(d,"TO",c.ia),Be(d,"TYPE","xmlhttp"),as(c,d),c.u&&c.o&&rd(d,c.u,c.o),c.O&&(c.g.H=c.O);var m=c.g;c=c.ba,m.M=1,m.A=Aa(Sn(d)),m.u=null,m.R=!0,c0(m,c)}n.Va=function(){this.C!=null&&(this.C=null,ka(this),od(this),Dt(19))};function Va(c){c.C!=null&&(s.clearTimeout(c.C),c.C=null)}function k0(c,d){var m=null;if(c.g==d){Va(c),sd(c),c.g=null;var _=2}else if(ed(c.h,d))m=d.G,p0(c.h,d),_=1;else return;if(c.I!=0){if(d.o)if(_==1){m=d.u?d.u.length:0,d=Date.now()-d.F;var P=c.D;_=Ma(),It(_,new r0(_,m)),Fa(c)}else N0(c);else if(P=d.m,P==3||P==0&&d.X>0||!(_==1&&d1(c,d)||_==2&&od(c)))switch(m&&m.length>0&&(d=c.h,d.i=d.i.concat(m)),P){case 1:ti(c,5);break;case 4:ti(c,10);break;case 3:ti(c,6);break;default:ti(c,2)}}}function F0(c,d){let m=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(m*=2),m*d}function ti(c,d){if(c.j.info("Error code "+d),d==2){var m=u(c.bb,c),_=c.Ua;let P=!_;_=new Dr(_||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Zo(_,"https"),Aa(_),P?o1(_.toString(),m):s1(_.toString(),m)}else Dt(2);c.I=0,c.l&&c.l.pa(d),V0(c),P0(c)}n.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function V0(c){if(c.I=0,c.ja=[],c.l){let d=m0(c.h);(d.length!=0||c.i.length!=0)&&(N(c.ja,d),N(c.ja,c.i),c.h.i.length=0,w(c.i),c.i.length=0),c.l.oa()}}function L0(c,d,m){var _=m instanceof Dr?Sn(m):new Dr(m);if(_.g!="")d&&(_.g=d+"."+_.g),es(_,_.u);else{var P=s.location;_=P.protocol,d=d?d+"."+P.hostname:P.hostname,P=+P.port;let O=new Dr(null);_&&Zo(O,_),d&&(O.g=d),P&&es(O,P),m&&(O.h=m),_=O}return m=c.G,d=c.wa,m&&d&&Be(_,m,d),Be(_,"VER",c.ka),as(c,_),_}function j0(c,d,m){if(d&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Aa&&!c.ma?new We(new Oa({ab:m})):new We(c.ma),d.Fa(c.L),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function B0(){}n=B0.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function La(){}La.prototype.g=function(c,d){return new Lt(c,d)};function Lt(c,d){_t.call(this),this.g=new T0(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(c?c["X-WebChannel-Client-Profile"]=d.sa:c={"X-WebChannel-Client-Profile":d.sa}),this.g.U=c,(c=d&&d.Qb)&&!x(c)&&(this.g.u=c),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!x(d)&&(this.g.G=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new $i(this)}y(Lt,_t),Lt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Lt.prototype.close=function(){id(this.g)},Lt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var m={};m.__data__=c,c=m}else this.v&&(m={},m.__data__=Gu(c),c=m);d.i.push(new JE(d.Ya++,c)),d.I==3&&Fa(d)},Lt.prototype.N=function(){this.g.l=null,delete this.j,id(this.g),delete this.g,Lt.Z.N.call(this)};function U0(c){Wu.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let m in d){c=m;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}y(U0,Wu);function $0(){Qu.call(this),this.status=1}y($0,Qu);function $i(c){this.g=c}y($i,B0),$i.prototype.ra=function(){It(this.g,"a")},$i.prototype.qa=function(c){It(this.g,new U0(c))},$i.prototype.pa=function(c){It(this.g,new $0)},$i.prototype.oa=function(){It(this.g,"b")},La.prototype.createWebChannel=La.prototype.g,Lt.prototype.send=Lt.prototype.o,Lt.prototype.open=Lt.prototype.m,Lt.prototype.close=Lt.prototype.close,Cp=mr.createWebChannelTransport=function(){return new La},wp=mr.getStatEventTarget=function(){return Ma()},bp=mr.Event=Xr,Ll=mr.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ta.NO_ERROR=0,Ta.TIMEOUT=8,Ta.HTTP_ERROR=6,Js=mr.ErrorCode=Ta,i0.COMPLETE="complete",_p=mr.EventType=i0,Zg.EventType=Wo,Wo.OPEN="a",Wo.CLOSE="b",Wo.ERROR="c",Wo.MESSAGE="d",_t.prototype.listen=_t.prototype.J,bo=mr.WebChannel=Zg,X2=mr.FetchXmlHttpFactory=Oa,We.prototype.listenOnce=We.prototype.K,We.prototype.getLastError=We.prototype.Ha,We.prototype.getLastErrorCode=We.prototype.ya,We.prototype.getStatus=We.prototype.ca,We.prototype.getResponseJson=We.prototype.La,We.prototype.getResponseText=We.prototype.la,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Fa,vp=mr.XhrIo=We}).apply(typeof Vl<"u"?Vl:typeof self<"u"?self:typeof window<"u"?window:{});var cC="@firebase/firestore",lC="4.9.2";var pt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");var $o="12.3.0";var Ai=new _o("@firebase/firestore");function wo(){return Ai.logLevel}function Q(n,...e){if(Ai.logLevel<=Ie.DEBUG){let t=e.map(mg);Ai.debug(`Firestore (${$o}): ${n}`,...t)}}function yr(n,...e){if(Ai.logLevel<=Ie.ERROR){let t=e.map(mg);Ai.error(`Firestore (${$o}): ${n}`,...t)}}function To(n,...e){if(Ai.logLevel<=Ie.WARN){let t=e.map(mg);Ai.warn(`Firestore (${$o}): ${n}`,...t)}}function mg(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function re(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,ex(n,r,t)}function ex(n,e,t){let r=`FIRESTORE (${$o}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw yr(r),new Error(r)}function Oe(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||ex(e,i,r)}function ce(n,e){return n}var L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},G=class extends dr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var gr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Hl=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Tp=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(pt.UNAUTHENTICATED))}shutdown(){}},Pp=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Ap=class{constructor(e){this.t=e,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Oe(this.o===void 0,42304);let r=this.i,i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve(),o=new gr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new gr,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let l=o;e.enqueueRetryable(()=>B(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},a=l=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?a(l):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new gr)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Oe(typeof r.accessToken=="string",31837,{l:r}),new Hl(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string",2055,{h:e}),new pt(e)}},Op=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},Np=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Op(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Gl=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Rp=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tC(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Oe(this.o===void 0,3512);let r=o=>{o.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,Q("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Gl(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Oe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Gl(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Z2(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var ra=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=Z2(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function be(n,e){return n<e?-1:n>e?1:0}function kp(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),o=e.charAt(r);if(i!==o)return xp(i)===xp(o)?be(i,o):xp(i)?1:-1}return be(n.length,e.length)}var eR=55296,tR=57343;function xp(n){let e=n.charCodeAt(0);return e>=eR&&e<=tR}function Po(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var uC="__name__",Wl=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&re(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&re(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return be(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):kp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return pr.fromString(e.substring(4,e.length-2))}},Ge=class n extends Wl{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new G(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},nR=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Yt=class n extends Wl{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return nR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===uC}static keyField(){return new n([uC])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new G(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new G(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new G(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new G(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ne=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ge.fromString(e))}static fromName(e){return new n(Ge.fromString(e).popFirst(5))}static empty(){return new n(Ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ge.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ge(e.slice()))}};function tx(n,e,t){if(!t)throw new G(L.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function rR(n,e,t,r){if(e===!0&&r===!0)throw new G(L.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function dC(n){if(!ne.isDocumentKey(n))throw new G(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function hC(n){if(ne.isDocumentKey(n))throw new G(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function nx(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Iu(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":re(12329,{type:typeof n})}function xn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new G(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Iu(n);throw new G(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function iR(n,e){if(e<=0)throw new G(L.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function ct(n,e){let t={typeString:n};return e&&(t.value=e),t}function ma(n,e){if(!nx(n))throw new G(L.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new G(L.INVALID_ARGUMENT,t);return!0}var fC=-62135596800,pC=1e6,lt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*pC);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new G(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new G(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<fC)throw new G(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/pC}_compareTo(e){return this.seconds===e.seconds?be(this.nanoseconds,e.nanoseconds):be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ma(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-fC;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};lt._jsonSchemaVersion="firestore/timestamp/1.0",lt._jsonSchema={type:ct("string",lt._jsonSchemaVersion),seconds:ct("number"),nanoseconds:ct("number")};var le=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new lt(0,0))}static max(){return new n(new lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ia=-1,Fp=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Fp.UNKNOWN_ID=-1;function oR(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=le.fromTimestamp(r===1e9?new lt(t+1,0):new lt(t,r));return new Oi(i,ne.empty(),e)}function sR(n){return new Oi(n.readTime,n.key,ia)}var Oi=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(le.min(),ne.empty(),ia)}static max(){return new n(le.max(),ne.empty(),ia)}};function aR(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ne.comparator(n.documentKey,e.documentKey),t!==0?t:be(n.largestBatchId,e.largestBatchId))}var cR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Vp=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function zo(n){return B(this,null,function*(){if(n.code!==L.FAILED_PRECONDITION||n.message!==cR)throw n;Q("LocalStore","Unexpectedly lost primary lease")})}var $=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},l=>r(l))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let l=0;l<o;l++){let u=l;t(e[u]).next(p=>{s[u]=p,++a,a===o&&r(s)},p=>i(p))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function lR(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function qo(n){return n.name==="IndexedDbTransactionError"}var gg=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),yg=-1;function Du(n){return n==null}function oa(n){return n===0&&1/n==-1/0}function uR(n){return typeof n=="number"&&Number.isInteger(n)&&!oa(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var rx="";function dR(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=mC(e)),e=hR(n.get(t),e);return mC(e)}function hR(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case rx:t+="";break;default:t+=o}}return t}function mC(n){return n+rx+""}var fR="remoteDocuments",ix="owner";var ox="mutationQueues";var sx="mutations";var ax="documentMutations",pR="remoteDocumentsV14";var cx="remoteDocumentGlobal";var lx="targets";var ux="targetDocuments";var dx="targetGlobal",hx="collectionParents";var fx="clientMetadata";var px="bundles";var mx="namedQueries";var mR="indexConfiguration";var gR="indexState";var yR="indexEntries";var gx="documentOverlays";var vR="globals";var _R=[ox,sx,ax,fR,lx,ix,dx,ux,fx,cx,hx,px,mx],cB=[..._R,gx],bR=[ox,sx,ax,pR,lx,ix,dx,ux,fx,cx,hx,px,mx,gx],wR=bR,CR=[...wR,mR,gR,yR];var lB=[...CR,vR];function gC(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Jr(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function yx(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ye=class n{constructor(e,t){this.comparator=e,this.root=t||qn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Io(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Io(this.root,e,this.comparator,!1)}getReverseIterator(){return new Io(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Io(this.root,e,this.comparator,!0)}},Io=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},qn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw re(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw re(27949);return e+(this.isRed()?0:1)}};qn.EMPTY=null,qn.RED=!0,qn.BLACK=!1;qn.EMPTY=new class{constructor(){this.size=0}get key(){throw re(57766)}get value(){throw re(16141)}get color(){throw re(16727)}get left(){throw re(29726)}get right(){throw re(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new qn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var mt=class n{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ql(this.data.getIterator())}getIteratorFrom(e){return new Ql(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Ql=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var ln=class n{constructor(e){this.fields=e,e.sort(Yt.comparator)}static empty(){return new n([])}unionWith(e){let t=new mt(Yt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Po(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Kl=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Et=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Kl("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Et.EMPTY_BYTE_STRING=new Et("");var xR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vr(n){if(Oe(!!n,39018),typeof n=="string"){let e=0,t=xR.exec(n);if(Oe(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:He(n.seconds),nanos:He(n.nanos)}}function He(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function _r(n){return typeof n=="string"?Et.fromBase64String(n):Et.fromUint8Array(n)}var vx="server_timestamp",_x="__type__",bx="__previous_value__",wx="__local_write_time__";function vg(n){return(n?.mapValue?.fields||{})[_x]?.stringValue===vx}function Su(n){let e=n.mapValue.fields[bx];return vg(e)?Su(e):e}function sa(n){let e=vr(n.mapValue.fields[wx].timestampValue);return new lt(e.seconds,e.nanos)}var Lp=class{constructor(e,t,r,i,o,s,a,l,u,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=p}},Yl="(default)",Jl=class n{constructor(e,t){this.projectId=e,this.database=t||Yl}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Yl}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var _g="__type__",Cx="__max__",jl={mapValue:{fields:{__type__:{stringValue:Cx}}}},bg="__vector__",Ao="value";function Gr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?vg(n)?4:Ex(n)?9007199254740991:xx(n)?10:11:re(28295,{value:n})}function Wn(n,e){if(n===e)return!0;let t=Gr(n);if(t!==Gr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return sa(n).isEqual(sa(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=vr(i.timestampValue),a=vr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return _r(i.bytesValue).isEqual(_r(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return He(i.geoPointValue.latitude)===He(o.geoPointValue.latitude)&&He(i.geoPointValue.longitude)===He(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return He(i.integerValue)===He(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=He(i.doubleValue),a=He(o.doubleValue);return s===a?oa(s)===oa(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Po(n.arrayValue.values||[],e.arrayValue.values||[],Wn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(gC(s)!==gC(a))return!1;for(let l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!Wn(s[l],a[l])))return!1;return!0}(n,e);default:return re(52216,{left:n})}}function aa(n,e){return(n.values||[]).find(t=>Wn(t,e))!==void 0}function Oo(n,e){if(n===e)return 0;let t=Gr(n),r=Gr(e);if(t!==r)return be(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return be(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=He(o.integerValue||o.doubleValue),l=He(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return yC(n.timestampValue,e.timestampValue);case 4:return yC(sa(n),sa(e));case 5:return kp(n.stringValue,e.stringValue);case 6:return function(o,s){let a=_r(o),l=_r(s);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),l=s.split("/");for(let u=0;u<a.length&&u<l.length;u++){let p=be(a[u],l[u]);if(p!==0)return p}return be(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=be(He(o.latitude),He(s.latitude));return a!==0?a:be(He(o.longitude),He(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return vC(n.arrayValue,e.arrayValue);case 10:return function(o,s){let a=o.fields||{},l=s.fields||{},u=a[Ao]?.arrayValue,p=l[Ao]?.arrayValue,y=be(u?.values?.length||0,p?.values?.length||0);return y!==0?y:vC(u,p)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===jl.mapValue&&s===jl.mapValue)return 0;if(o===jl.mapValue)return 1;if(s===jl.mapValue)return-1;let a=o.fields||{},l=Object.keys(a),u=s.fields||{},p=Object.keys(u);l.sort(),p.sort();for(let y=0;y<l.length&&y<p.length;++y){let b=kp(l[y],p[y]);if(b!==0)return b;let w=Oo(a[l[y]],u[p[y]]);if(w!==0)return w}return be(l.length,p.length)}(n.mapValue,e.mapValue);default:throw re(23264,{he:t})}}function yC(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return be(n,e);let t=vr(n),r=vr(e),i=be(t.seconds,r.seconds);return i!==0?i:be(t.nanos,r.nanos)}function vC(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Oo(t[i],r[i]);if(o)return o}return be(t.length,r.length)}function No(n){return jp(n)}function jp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=vr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return _r(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ne.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=jp(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${jp(t.fields[s])}`;return i+"}"}(n.mapValue):re(61005,{value:n})}function $l(n){switch(Gr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Su(n);return e?16+$l(e):16;case 5:return 2*n.stringValue.length;case 6:return _r(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+$l(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Jr(r.fields,(o,s)=>{i+=o.length+$l(s)}),i}(n.mapValue);default:throw re(13486,{value:n})}}function _C(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Bp(n){return!!n&&"integerValue"in n}function wg(n){return!!n&&"arrayValue"in n}function bC(n){return!!n&&"nullValue"in n}function wC(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function zl(n){return!!n&&"mapValue"in n}function xx(n){return(n?.mapValue?.fields||{})[_g]?.stringValue===bg}function Zs(n){if(n.geoPointValue)return{geoPointValue:ee({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:ee({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Jr(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Zs(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Zs(n.arrayValue.values[t]);return e}return ee({},n)}function Ex(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Cx}var dB={mapValue:{fields:{[_g]:{stringValue:bg},[Ao]:{arrayValue:{}}}}};var Kt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!zl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zs(t)}setAll(e){let t=Yt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Zs(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());zl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];zl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Jr(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Zs(this.value))}};function Ix(n){let e=[];return Jr(n.fields,(t,r)=>{let i=new Yt([t]);if(zl(r)){let o=Ix(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new ln(e)}var En=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,le.min(),le.min(),le.min(),Kt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,le.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,le.min(),le.min(),Kt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,le.min(),le.min(),Kt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ro=class{constructor(e,t){this.position=e,this.inclusive=t}};function CC(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=ne.comparator(ne.fromName(s.referenceValue),t.key):r=Oo(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function xC(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Wn(n.position[t],e.position[t]))return!1;return!0}var Ni=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function ER(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Xl=class{},at=class n extends Xl{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new $p(e,t,r):t==="array-contains"?new Hp(e,r):t==="in"?new Gp(e,r):t==="not-in"?new Wp(e,r):t==="array-contains-any"?new Qp(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new zp(e,r):new qp(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Oo(t,this.value)):t!==null&&Gr(this.value)===Gr(t)&&this.matchesComparison(Oo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},In=class n extends Xl{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return Dx(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function Dx(n){return n.op==="and"}function Sx(n){return IR(n)&&Dx(n)}function IR(n){for(let e of n.filters)if(e instanceof In)return!1;return!0}function Up(n){if(n instanceof at)return n.field.canonicalString()+n.op.toString()+No(n.value);if(Sx(n))return n.filters.map(e=>Up(e)).join(",");{let e=n.filters.map(t=>Up(t)).join(",");return`${n.op}(${e})`}}function Mx(n,e){return n instanceof at?function(r,i){return i instanceof at&&r.op===i.op&&r.field.isEqual(i.field)&&Wn(r.value,i.value)}(n,e):n instanceof In?function(r,i){return i instanceof In&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&Mx(s,i.filters[a]),!0):!1}(n,e):void re(19439)}function Tx(n){return n instanceof at?function(t){return`${t.field.canonicalString()} ${t.op} ${No(t.value)}`}(n):n instanceof In?function(t){return t.op.toString()+" {"+t.getFilters().map(Tx).join(" ,")+"}"}(n):"Filter"}var $p=class extends at{constructor(e,t,r){super(e,t,r),this.key=ne.fromName(r.referenceValue)}matches(e){let t=ne.comparator(e.key,this.key);return this.matchesComparison(t)}},zp=class extends at{constructor(e,t){super(e,"in",t),this.keys=Px("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},qp=class extends at{constructor(e,t){super(e,"not-in",t),this.keys=Px("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Px(n,e){return(e.arrayValue?.values||[]).map(t=>ne.fromName(t.referenceValue))}var Hp=class extends at{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return wg(t)&&aa(t.arrayValue,this.value)}},Gp=class extends at{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&aa(this.value.arrayValue,t)}},Wp=class extends at{constructor(e,t){super(e,"not-in",t)}matches(e){if(aa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!aa(this.value.arrayValue,t)}},Qp=class extends at{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!wg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>aa(this.value.arrayValue,r))}};var Kp=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Te=null}};function EC(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Kp(n,e,t,r,i,o,s)}function Cg(n){let e=ce(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Up(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Du(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>No(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>No(r)).join(",")),e.Te=t}return e.Te}function xg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!ER(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Mx(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!xC(n.startAt,e.startAt)&&xC(n.endAt,e.endAt)}function Yp(n){return ne.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Wr=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function DR(n,e,t,r,i,o,s,a){return new Wr(n,e,t,r,i,o,s,a)}function Eg(n){return new Wr(n)}function IC(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Ax(n){return n.collectionGroup!==null}function ea(n){let e=ce(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new mt(Yt.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Ni(o,r))}),t.has(Yt.keyField().canonicalString())||e.Ie.push(new Ni(Yt.keyField(),r))}return e.Ie}function Hn(n){let e=ce(n);return e.Ee||(e.Ee=SR(e,ea(n))),e.Ee}function SR(n,e){if(n.limitType==="F")return EC(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Ni(i.field,o)});let t=n.endAt?new Ro(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ro(n.startAt.position,n.startAt.inclusive):null;return EC(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Jp(n,e){let t=n.filters.concat([e]);return new Wr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Zl(n,e,t){return new Wr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Mu(n,e){return xg(Hn(n),Hn(e))&&n.limitType===e.limitType}function Ox(n){return`${Cg(Hn(n))}|lt:${n.limitType}`}function Co(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Tx(i)).join(", ")}]`),Du(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>No(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>No(i)).join(",")),`Target(${r})`}(Hn(n))}; limitType=${n.limitType})`}function Tu(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ne.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of ea(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,l){let u=CC(s,a,l);return s.inclusive?u<=0:u<0}(r.startAt,ea(r),i)||r.endAt&&!function(s,a,l){let u=CC(s,a,l);return s.inclusive?u>=0:u>0}(r.endAt,ea(r),i))}(n,e)}function MR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Nx(n){return(e,t)=>{let r=!1;for(let i of ea(n)){let o=TR(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function TR(n,e,t){let r=n.field.isKeyField()?ne.comparator(e.key,t.key):function(o,s,a){let l=s.data.field(o),u=a.data.field(o);return l!==null&&u!==null?Oo(l,u):re(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return re(19790,{direction:n.dir})}}var br=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Jr(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return yx(this.inner)}size(){return this.innerSize}};var PR=new Ye(ne.comparator);function wr(){return PR}var Rx=new Ye(ne.comparator);function Xs(...n){let e=Rx;for(let t of n)e=e.insert(t.key,t);return e}function kx(n){let e=Rx;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Si(){return ta()}function Fx(){return ta()}function ta(){return new br(n=>n.toString(),(n,e)=>n.isEqual(e))}var AR=new Ye(ne.comparator),OR=new mt(ne.comparator);function we(...n){let e=OR;for(let t of n)e=e.add(t);return e}var NR=new mt(be);function RR(){return NR}function Ig(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oa(e)?"-0":e}}function Vx(n){return{integerValue:""+n}}function kR(n,e){return uR(e)?Vx(e):Ig(n,e)}var ko=class{constructor(){this._=void 0}};function FR(n,e,t){return n instanceof Fo?function(i,o){let s={fields:{[_x]:{stringValue:vx},[wx]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&vg(o)&&(o=Su(o)),o&&(s.fields[bx]=o),{mapValue:s}}(t,e):n instanceof Ri?jx(n,e):n instanceof ki?Bx(n,e):function(i,o){let s=Lx(i,o),a=DC(s)+DC(i.Ae);return Bp(s)&&Bp(i.Ae)?Vx(a):Ig(i.serializer,a)}(n,e)}function VR(n,e,t){return n instanceof Ri?jx(n,e):n instanceof ki?Bx(n,e):t}function Lx(n,e){return n instanceof Vo?function(r){return Bp(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Fo=class extends ko{},Ri=class extends ko{constructor(e){super(),this.elements=e}};function jx(n,e){let t=Ux(e);for(let r of n.elements)t.some(i=>Wn(i,r))||t.push(r);return{arrayValue:{values:t}}}var ki=class extends ko{constructor(e){super(),this.elements=e}};function Bx(n,e){let t=Ux(e);for(let r of n.elements)t=t.filter(i=>!Wn(i,r));return{arrayValue:{values:t}}}var Vo=class extends ko{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function DC(n){return He(n.integerValue||n.doubleValue)}function Ux(n){return wg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function LR(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Ri&&i instanceof Ri||r instanceof ki&&i instanceof ki?Po(r.elements,i.elements,Wn):r instanceof Vo&&i instanceof Vo?Wn(r.Ae,i.Ae):r instanceof Fo&&i instanceof Fo}(n.transform,e.transform)}var Xp=class{constructor(e,t){this.version=e,this.transformResults=t}},Jt=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function ql(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Lo=class{};function $x(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new jo(n.key,Jt.none()):new Fi(n.key,n.data,Jt.none());{let t=n.data,r=Kt.empty(),i=new mt(Yt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Qn(n.key,r,new ln(i.toArray()),Jt.none())}}function jR(n,e,t){n instanceof Fi?function(i,o,s){let a=i.value.clone(),l=MC(i.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Qn?function(i,o,s){if(!ql(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=MC(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(zx(i)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function na(n,e,t,r){return n instanceof Fi?function(o,s,a,l){if(!ql(o.precondition,s))return a;let u=o.value.clone(),p=TC(o.fieldTransforms,l,s);return u.setAll(p),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof Qn?function(o,s,a,l){if(!ql(o.precondition,s))return a;let u=TC(o.fieldTransforms,l,s),p=s.data;return p.setAll(zx(o)),p.setAll(u),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(n,e,t,r):function(o,s,a){return ql(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function BR(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=Lx(r.transform,i||null);o!=null&&(t===null&&(t=Kt.empty()),t.set(r.field,o))}return t||null}function SC(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Po(r,i,(o,s)=>LR(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Fi=class extends Lo{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Qn=class extends Lo{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function zx(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function MC(n,e,t){let r=new Map;Oe(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,VR(s,a,t[i]))}return r}function TC(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,FR(o,s,e))}return r}var jo=class extends Lo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Zp=class extends Lo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var em=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&jR(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=na(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=na(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Fx();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let l=$x(s,a);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),we())}isEqual(e){return this.batchId===e.batchId&&Po(this.mutations,e.mutations,(t,r)=>SC(t,r))&&Po(this.baseMutations,e.baseMutations,(t,r)=>SC(t,r))}},tm=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Oe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return AR}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var nm=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var rm=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var ot,De;function UR(n){switch(n){case L.OK:return re(64938);case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0;default:return re(15467,{code:n})}}function qx(n){if(n===void 0)return yr("GRPC error has no .code"),L.UNKNOWN;switch(n){case ot.OK:return L.OK;case ot.CANCELLED:return L.CANCELLED;case ot.UNKNOWN:return L.UNKNOWN;case ot.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case ot.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case ot.INTERNAL:return L.INTERNAL;case ot.UNAVAILABLE:return L.UNAVAILABLE;case ot.UNAUTHENTICATED:return L.UNAUTHENTICATED;case ot.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case ot.NOT_FOUND:return L.NOT_FOUND;case ot.ALREADY_EXISTS:return L.ALREADY_EXISTS;case ot.PERMISSION_DENIED:return L.PERMISSION_DENIED;case ot.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case ot.ABORTED:return L.ABORTED;case ot.OUT_OF_RANGE:return L.OUT_OF_RANGE;case ot.UNIMPLEMENTED:return L.UNIMPLEMENTED;case ot.DATA_LOSS:return L.DATA_LOSS;default:return re(39323,{code:n})}}(De=ot||(ot={}))[De.OK=0]="OK",De[De.CANCELLED=1]="CANCELLED",De[De.UNKNOWN=2]="UNKNOWN",De[De.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",De[De.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",De[De.NOT_FOUND=5]="NOT_FOUND",De[De.ALREADY_EXISTS=6]="ALREADY_EXISTS",De[De.PERMISSION_DENIED=7]="PERMISSION_DENIED",De[De.UNAUTHENTICATED=16]="UNAUTHENTICATED",De[De.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",De[De.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",De[De.ABORTED=10]="ABORTED",De[De.OUT_OF_RANGE=11]="OUT_OF_RANGE",De[De.UNIMPLEMENTED=12]="UNIMPLEMENTED",De[De.INTERNAL=13]="INTERNAL",De[De.UNAVAILABLE=14]="UNAVAILABLE",De[De.DATA_LOSS=15]="DATA_LOSS";var $R=null;function zR(){return new TextEncoder}var qR=new pr([4294967295,4294967295],0);function PC(n){let e=zR().encode(n),t=new yp;return t.update(e),new Uint8Array(t.digest())}function AC(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new pr([t,r],0),new pr([i,o],0)]}var im=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Mi(`Invalid padding: ${t}`);if(r<0)throw new Mi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Mi(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Mi(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=pr.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(pr.fromNumber(r)));return i.compare(qR)===1&&(i=new pr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=PC(e),[r,i]=AC(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.ge===0)return;let t=PC(e),[r,i]=AC(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.Se(s)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Mi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var eu=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,ca.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(le.min(),i,new Ye(be),wr(),we())}},ca=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,we(),we(),we())}};var Do=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},tu=class{constructor(e,t){this.targetId=e,this.Ce=t}},nu=class{constructor(e,t,r=Et.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},ru=class{constructor(){this.ve=0,this.Fe=OC(),this.Me=Et.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=we(),t=we(),r=we();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:re(38017,{changeType:o})}}),new ca(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=OC()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Oe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},om=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=wr(),this.Je=Bl(),this.He=Bl(),this.Ye=new Ye(be)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:re(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let o=i.target;if(Yp(o))if(r===0){let s=new ne(o.path);this.et(t,s,En.newNoDocument(s,le.min()))}else Oe(r===1,20013,{expectedCount:r});else{let s=this._t(t);if(s!==r){let a=this.ut(e),l=a?this.ct(a,e,s):1;if(l!==0){this.it(t);let u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,u)}$R?.lt(function(p,y,b,w,N){let V={localCacheCount:p,existenceFilterCount:y.count,databaseId:b.database,projectId:b.projectId},F=y.unchangedNames;return F&&(V.bloomFilter={applied:N===0,hashCount:F?.hashCount??0,bitmapLength:F?.bits?.bitmap?.length??0,padding:F?.bits?.padding??0,mightContain:W=>w?.mightContain(W)??!1}),V}(s,e.Ce,this.Ge.ht(),a,l))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=_r(r).toUint8Array()}catch(l){if(l instanceof Kl)return To("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new im(s,i,o)}catch(l){return To(l instanceof Mi?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Ge.ht(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.et(t,o,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((o,s)=>{let a=this.ot(s);if(a){if(o.current&&Yp(a.target)){let l=new ne(a.target.path);this.It(l).has(s)||this.Et(s,l)||this.et(s,l,En.newNoDocument(l,e))}o.Be&&(t.set(s,o.ke()),o.qe())}});let r=we();this.He.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{let u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new eu(e,t,this.Ye,this.je,r);return this.je=wr(),this.Je=Bl(),this.He=Bl(),this.Ye=new Ye(be),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new ru,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new mt(be),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new mt(be),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||Q("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ru),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function Bl(){return new Ye(ne.comparator)}function OC(){return new Ye(ne.comparator)}var HR={asc:"ASCENDING",desc:"DESCENDING"},GR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WR={and:"AND",or:"OR"},sm=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function am(n,e){return n.useProto3Json||Du(e)?e:{value:e}}function iu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Hx(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function QR(n,e){return iu(n,e.toTimestamp())}function Gn(n){return Oe(!!n,49232),le.fromTimestamp(function(t){let r=vr(t);return new lt(r.seconds,r.nanos)}(n))}function Dg(n,e){return cm(n,e).canonicalString()}function cm(n,e){let t=function(i){return new Ge(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Gx(n){let e=Ge.fromString(n);return Oe(Jx(e),10190,{key:e.toString()}),e}function lm(n,e){return Dg(n.databaseId,e.path)}function Ep(n,e){let t=Gx(e);if(t.get(1)!==n.databaseId.projectId)throw new G(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new G(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ne(Qx(t))}function Wx(n,e){return Dg(n.databaseId,e)}function KR(n){let e=Gx(n);return e.length===4?Ge.emptyPath():Qx(e)}function um(n){return new Ge(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Qx(n){return Oe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function NC(n,e,t){return{name:lm(n,e),fields:t.value.mapValue.fields}}function YR(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:re(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,p){return u.useProto3Json?(Oe(p===void 0||typeof p=="string",58123),Et.fromBase64String(p||"")):(Oe(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),Et.fromUint8Array(p||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let p=u.code===void 0?L.UNKNOWN:qx(u.code);return new G(p,u.message||"")}(s);t=new nu(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Ep(n,r.document.name),o=Gn(r.document.updateTime),s=r.document.createTime?Gn(r.document.createTime):le.min(),a=new Kt({mapValue:{fields:r.document.fields}}),l=En.newFoundDocument(i,o,s,a),u=r.targetIds||[],p=r.removedTargetIds||[];t=new Do(u,p,l.key,l)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Ep(n,r.document),o=r.readTime?Gn(r.readTime):le.min(),s=En.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Do([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Ep(n,r.document),o=r.removedTargetIds||[];t=new Do([],o,i,null)}else{if(!("filter"in e))return re(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new rm(i,o),a=r.targetId;t=new tu(a,s)}}return t}function JR(n,e){let t;if(e instanceof Fi)t={update:NC(n,e.key,e.value)};else if(e instanceof jo)t={delete:lm(n,e.key)};else if(e instanceof Qn)t={update:NC(n,e.key,e.data),updateMask:sk(e.fieldMask)};else{if(!(e instanceof Zp))return re(16599,{Vt:e.type});t={verify:lm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Fo)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ri)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ki)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Vo)return{fieldPath:s.field.canonicalString(),increment:a.Ae};throw re(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:QR(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:re(27497)}(n,e.precondition)),t}function XR(n,e){return n&&n.length>0?(Oe(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?Gn(i.updateTime):Gn(o);return s.isEqual(le.min())&&(s=Gn(o)),new Xp(s,i.transformResults||[])}(t,e))):[]}function ZR(n,e){return{documents:[Wx(n,e.path)]}}function ek(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Wx(n,i);let o=function(u){if(u.length!==0)return Yx(In.create(u,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(p=>function(b){return{field:xo(b.field),direction:rk(b.dir)}}(p))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=am(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:t,parent:i}}function tk(n){let e=KR(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Oe(r===1,65062);let p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let o=[];t.where&&(o=function(y){let b=Kx(y);return b instanceof In&&Sx(b)?b.getFilters():[b]}(t.where));let s=[];t.orderBy&&(s=function(y){return y.map(b=>function(N){return new Ni(Eo(N.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(b))}(t.orderBy));let a=null;t.limit&&(a=function(y){let b;return b=typeof y=="object"?y.value:y,Du(b)?null:b}(t.limit));let l=null;t.startAt&&(l=function(y){let b=!!y.before,w=y.values||[];return new Ro(w,b)}(t.startAt));let u=null;return t.endAt&&(u=function(y){let b=!y.before,w=y.values||[];return new Ro(w,b)}(t.endAt)),DR(e,i,s,o,a,"F",l,u)}function nk(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Kx(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Eo(t.unaryFilter.field);return at.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Eo(t.unaryFilter.field);return at.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Eo(t.unaryFilter.field);return at.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Eo(t.unaryFilter.field);return at.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return re(61313);default:return re(60726)}}(n):n.fieldFilter!==void 0?function(t){return at.create(Eo(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return re(58110);default:return re(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return In.create(t.compositeFilter.filters.map(r=>Kx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return re(1026)}}(t.compositeFilter.op))}(n):re(30097,{filter:n})}function rk(n){return HR[n]}function ik(n){return GR[n]}function ok(n){return WR[n]}function xo(n){return{fieldPath:n.canonicalString()}}function Eo(n){return Yt.fromServerFormat(n.fieldPath)}function Yx(n){return n instanceof at?function(t){if(t.op==="=="){if(wC(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NAN"}};if(bC(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(wC(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NOT_NAN"}};if(bC(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xo(t.field),op:ik(t.op),value:t.value}}}(n):n instanceof In?function(t){let r=t.getFilters().map(i=>Yx(i));return r.length===1?r[0]:{compositeFilter:{op:ok(t.op),filters:r}}}(n):re(54877,{filter:n})}function sk(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Jx(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var la=class n{constructor(e,t,r,i,o=le.min(),s=le.min(),a=Et.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var dm=class{constructor(e){this.yt=e}};function ak(n){let e=tk({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Zl(e,e.limit,"L"):e}var ou=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(He(e.integerValue));else if("doubleValue"in e){let r=He(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),oa(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=vr(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(_r(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?Ex(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):xx(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):re(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=Ao,o=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(He(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),ne.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};ou.Kt=new ou;var hm=class{constructor(){this.Cn=new fm}addToCollectionParentIndex(e,t){return this.Cn.add(t),$.resolve()}getCollectionParents(e,t){return $.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return $.resolve()}deleteFieldIndex(e,t){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,t){return $.resolve()}getDocumentsMatchingTarget(e,t){return $.resolve(null)}getIndexType(e,t){return $.resolve(0)}getFieldIndexes(e,t){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,t){return $.resolve(Oi.min())}getMinOffsetFromCollectionGroup(e,t){return $.resolve(Oi.min())}updateCollectionGroup(e,t,r){return $.resolve()}updateIndexEntries(e,t){return $.resolve()}},fm=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new mt(Ge.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new mt(Ge.comparator)).toArray()}};var hB=new Uint8Array(0);var RC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Xx=41943040,cn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};cn.DEFAULT_COLLECTION_PERCENTILE=10,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cn.DEFAULT=new cn(Xx,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cn.DISABLED=new cn(-1,0,0);var ua=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var kC="LruGarbageCollector",ck=1048576;function FC([n,e],[t,r]){let i=be(n,t);return i===0?be(e,r):i}var pm=class{constructor(e){this.Ir=e,this.buffer=new mt(FC),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();FC(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},mm=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Q(kC,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>B(this,null,function*(){this.Rr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){qo(t)?Q(kC,"Ignoring IndexedDB error during garbage collection: ",t):yield zo(t)}yield this.Vr(3e5)}))}},gm=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return $.resolve(gg.ce);let r=new pm(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Q("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(RC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),RC):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,s,a,l,u,p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(Q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),i=this.params.maximumSequenceNumbersToCollect):i=y,s=Date.now(),this.nthSequenceNumber(e,i))).next(y=>(r=y,a=Date.now(),this.removeTargets(e,r,t))).next(y=>(o=y,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(u=Date.now(),wo()<=Ie.DEBUG&&Q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-p}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(l-a)+`ms
	Removed ${y} documents in `+(u-l)+`ms
Total Duration: ${u-p}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:y})))}};function lk(n,e){return new gm(n,e)}var ym=class{constructor(){this.changes=new br(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,En.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?$.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var vm=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var _m=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&na(r.mutation,i,ln.empty(),lt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,we()).next(()=>r))}getLocalViewOfDocuments(e,t,r=we()){let i=Si();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Xs();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Si();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,we()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=wr(),s=ta(),a=function(){return ta()}();return t.forEach((l,u)=>{let p=r.get(u.key);i.has(u.key)&&(p===void 0||p.mutation instanceof Qn)?o=o.insert(u.key,u):p!==void 0?(s.set(u.key,p.mutation.getFieldMask()),na(p.mutation,u,p.mutation.getFieldMask(),lt.now())):s.set(u.key,ln.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((u,p)=>s.set(u,p)),t.forEach((u,p)=>a.set(u,new vm(p,s.get(u)??null))),a))}recalculateAndSaveOverlays(e,t){let r=ta(),i=new Ye((s,a)=>s-a),o=we();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(l=>{let u=t.get(l);if(u===null)return;let p=r.get(l)||ln.empty();p=a.applyToLocalView(u,p),r.set(l,p);let y=(i.get(a.batchId)||we()).add(l);i=i.insert(a.batchId,y)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let l=a.getNext(),u=l.key,p=l.value,y=Fx();p.forEach(b=>{if(!o.has(b)){let w=$x(t.get(b),r.get(b));w!==null&&y.set(b,w),o=o.add(b)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,y))}return $.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return ne.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ax(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):$.resolve(Si()),a=ia,l=o;return s.next(u=>$.forEach(u,(p,y)=>(a<y.largestBatchId&&(a=y.largestBatchId),o.get(p)?$.resolve():this.remoteDocumentCache.getEntry(e,p).next(b=>{l=l.insert(p,b)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,l,u,we())).next(p=>({batchId:a,changes:kx(p)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ne(t)).next(r=>{let i=Xs();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Xs();return this.indexManager.getCollectionParents(e,o).next(a=>$.forEach(a,l=>{let u=function(y,b){return new Wr(b,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(t,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(p=>{p.forEach((y,b)=>{s=s.insert(y,b)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((l,u)=>{let p=u.getKey();s.get(p)===null&&(s=s.insert(p,En.newInvalidDocument(p)))});let a=Xs();return s.forEach((l,u)=>{let p=o.get(l);p!==void 0&&na(p.mutation,u,ln.empty(),lt.now()),Tu(t,u)&&(a=a.insert(l,u))}),a})}};var bm=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return $.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Gn(i.createTime)}}(t)),$.resolve()}getNamedQuery(e,t){return $.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(i){return{name:i.name,query:ak(i.bundledQuery),readTime:Gn(i.readTime)}}(t)),$.resolve()}};var wm=class{constructor(){this.overlays=new Ye(ne.comparator),this.qr=new Map}getOverlay(e,t){return $.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Si();return $.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),$.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),$.resolve()}getOverlaysForCollection(e,t,r){let i=Si(),o=t.length+1,s=new ne(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let l=a.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return $.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ye((u,p)=>u-p),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let p=o.get(u.largestBatchId);p===null&&(p=Si(),o=o.insert(u.largestBatchId,p)),p.set(u.getKey(),u)}}let a=Si(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,p)=>a.set(u,p)),!(a.size()>=i)););return $.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new nm(t,r));let o=this.qr.get(t);o===void 0&&(o=we(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}};var Cm=class{constructor(){this.sessionToken=Et.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,$.resolve()}};var da=class{constructor(){this.Qr=new mt(st.$r),this.Ur=new mt(st.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new st(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new st(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new ne(new Ge([])),r=new st(t,e),i=new st(t,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new ne(new Ge([])),r=new st(t,e),i=new st(t,e+1),o=we();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new st(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},st=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ne.comparator(e.key,t.key)||be(e.Yr,t.Yr)}static Kr(e,t){return be(e.Yr,t.Yr)||ne.comparator(e.key,t.key)}};var xm=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new mt(st.$r)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new em(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Zr=this.Zr.add(new st(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return $.resolve(s)}lookupMutationBatch(e,t){return $.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),o=i<0?0:i;return $.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?yg:this.tr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new st(t,0),i=new st(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{let a=this.Xr(s.Yr);o.push(a)}),$.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mt(be);return t.forEach(i=>{let o=new st(i,0),s=new st(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],a=>{r=r.add(a.Yr)})}),$.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;ne.isDocumentKey(o)||(o=o.child(""));let s=new st(new ne(o),0),a=new mt(be);return this.Zr.forEachWhile(l=>{let u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Yr)),!0)},s),$.resolve(this.ti(a))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Oe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return $.forEach(t.mutations,i=>{let o=new st(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new st(t,0),i=this.Zr.firstAfterOrEqual(r);return $.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Em=class{constructor(e){this.ri=e,this.docs=function(){return new Ye(ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return $.resolve(r?r.document.mutableCopy():En.newInvalidDocument(t))}getEntries(e,t){let r=wr();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():En.newInvalidDocument(i))}),$.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=wr(),s=t.path,a=new ne(s.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){let{key:u,value:{document:p}}=l.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||aR(sR(p),r)<=0||(i.has(p.key)||Tu(t,p))&&(o=o.insert(p.key,p.mutableCopy()))}return $.resolve(o)}getAllFromCollectionGroup(e,t,r,i){re(9500)}ii(e,t){return $.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Im(this)}getSize(e){return $.resolve(this.size)}},Im=class extends ym{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),$.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var Dm=class{constructor(e){this.persistence=e,this.si=new br(t=>Cg(t),xg),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.oi=0,this._i=new da,this.targetCount=0,this.ai=ua.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),$.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new ua(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,$.resolve()}updateTargetData(e,t){return this.Pr(t),$.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),$.waitFor(o).next(()=>i)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return $.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),$.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),$.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),$.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return $.resolve(r)}containsKey(e,t){return $.resolve(this._i.containsKey(t))}};var su=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new gg(0),this.li=!1,this.li=!0,this.hi=new Cm,this.referenceDelegate=e(this),this.Pi=new Dm(this),this.indexManager=new hm,this.remoteDocumentCache=function(i){return new Em(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new dm(t),this.Ii=new bm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new wm,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new xm(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){Q("MemoryPersistence","Starting transaction:",e);let i=new Sm(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,t){return $.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},Sm=class extends Vp{constructor(e){super(),this.currentSequenceNumber=e}},Mm=class n{constructor(e){this.persistence=e,this.Ri=new da,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw re(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),$.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),$.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.fi,r=>{let i=ne.fromPath(r);return this.gi(e,i).next(o=>{o||t.removeEntry(i,le.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return $.or([()=>$.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},au=class n{constructor(e,t){this.persistence=e,this.pi=new br(r=>dR(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=lk(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return $.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return $.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?$.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,t).next(a=>{a||(r++,o.removeEntry(s,le.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),$.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),$.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),$.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=$l(e.data.value)),t}br(e,t,r){return $.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return $.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Tm=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=we(),i=we();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Pm=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Am=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Bw()?8:lR(jw())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ys(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Pm;return this.Ss(e,t,s).next(a=>{if(o.result=a,this.Vs)return this.bs(e,t,s,a.size)})}).next(()=>o.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(wo()<=Ie.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",Co(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$.resolve()):(wo()<=Ie.DEBUG&&Q("QueryEngine","Query:",Co(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(wo()<=Ie.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",Co(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hn(t))):$.resolve())}ys(e,t){if(IC(t))return $.resolve(null);let r=Hn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Zl(t,null,"F"),r=Hn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=we(...o);return this.ps.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{let u=this.Ds(t,a);return this.Cs(t,u,s,l.readTime)?this.ys(e,Zl(t,null,"F")):this.vs(e,u,t,l)}))})))}ws(e,t,r,i){return IC(t)||i.isEqual(le.min())?$.resolve(null):this.ps.getDocuments(e,r).next(o=>{let s=this.Ds(t,o);return this.Cs(t,s,r,i)?$.resolve(null):(wo()<=Ie.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Co(t)),this.vs(e,s,t,oR(i,ia)).next(a=>a))})}Ds(e,t){let r=new mt(Nx(e));return t.forEach((i,o)=>{Tu(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return wo()<=Ie.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",Co(t)),this.ps.getDocumentsMatchingQuery(e,t,Oi.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Sg="LocalStore",uk=3e8,Om=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Ye(be),this.xs=new br(o=>Cg(o),xg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _m(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function dk(n,e,t,r){return new Om(n,e,t,r)}function Zx(n,e){return B(this,null,function*(){let t=ce(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],l=we();for(let u of i){s.push(u.batchId);for(let p of u.mutations)l=l.add(p.key)}for(let u of o){a.push(u.batchId);for(let p of u.mutations)l=l.add(p.key)}return t.localDocuments.getDocuments(r,l).next(u=>({Ls:u,removedBatchIds:s,addedBatchIds:a}))})})})}function hk(n,e){let t=ce(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,u,p){let y=u.batch,b=y.keys(),w=$.resolve();return b.forEach(N=>{w=w.next(()=>p.getEntry(l,N)).next(V=>{let F=u.docVersions.get(N);Oe(F!==null,48541),V.version.compareTo(F)<0&&(y.applyToRemoteDocument(V,u),V.isValidDocument()&&(V.setReadTime(u.commitVersion),p.addEntry(V)))})}),w.next(()=>a.mutationQueue.removeMutationBatch(l,y))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=we();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function eE(n){let e=ce(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function fk(n,e){let t=ce(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let a=[];e.targetChanges.forEach((p,y)=>{let b=i.get(y);if(!b)return;a.push(t.Pi.removeMatchingKeys(o,p.removedDocuments,y).next(()=>t.Pi.addMatchingKeys(o,p.addedDocuments,y)));let w=b.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?w=w.withResumeToken(Et.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):p.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(p.resumeToken,r)),i=i.insert(y,w),function(V,F,W){return V.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=uk?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0}(b,w,p)&&a.push(t.Pi.updateTargetData(o,w))});let l=wr(),u=we();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,p))}),a.push(pk(o,s,e.documentUpdates).next(p=>{l=p.ks,u=p.qs})),!r.isEqual(le.min())){let p=t.Pi.getLastRemoteSnapshotVersion(o).next(y=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(p)}return $.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,l,u)).next(()=>l)}).then(o=>(t.Ms=i,o))}function pk(n,e,t){let r=we(),i=we();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=wr();return t.forEach((a,l)=>{let u=o.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(le.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):Q(Sg,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ks:s,qs:i}})}function mk(n,e){let t=ce(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=yg),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function gk(n,e){let t=ce(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(o=>o?(i=o,$.resolve(i)):t.Pi.allocateTargetId(r).next(s=>(i=new la(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}function Nm(n,e,t){return B(this,null,function*(){let r=ce(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!qo(s))throw s;Q(Sg,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)})}function VC(n,e,t){let r=ce(n),i=le.min(),o=we();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,u,p){let y=ce(l),b=y.xs.get(p);return b!==void 0?$.resolve(y.Ms.get(b)):y.Pi.getTargetData(u,p)}(r,s,Hn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,t?i:le.min(),t?o:we())).next(a=>(yk(r,MR(e),a),{documents:a,Qs:o})))}function yk(n,e,t){let r=n.Os.get(e)||le.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Os.set(e,r)}var cu=class{constructor(){this.activeTargetIds=RR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Rm=class{constructor(){this.Mo=new cu,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new cu,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var km=class{Oo(e){}shutdown(){}};var LC="ConnectivityMonitor",lu=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Q(LC,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){Q(LC,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Ul=null;function Fm(){return Ul===null?Ul=function(){return 268435456+Math.round(2147483648*Math.random())}():Ul++,"0x"+Ul.toString(16)}var Ip="RestConnection",vk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Vm=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Yl?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){let s=Fm(),a=this.zo(e,t.toUriEncodedString());Q(Ip,`Sending RPC '${e}' ${s}:`,a,r);let l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,o);let{host:u}=new URL(a),p=Nl(u);return this.Jo(e,a,l,r,p).then(y=>(Q(Ip,`Received RPC '${e}' ${s}: `,y),y),y=>{throw To(Ip,`RPC '${e}' ${s} failed with error: `,y,"url: ",a,"request:",r),y})}Ho(e,t,r,i,o,s){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+$o}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,t){let r=vk[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var Lm=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var xt="WebChannelConnection",jm=class extends Vm{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){let s=Fm();return new Promise((a,l)=>{let u=new vp;u.setWithCredentials(!0),u.listenOnce(_p.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Js.NO_ERROR:let y=u.getResponseJson();Q(xt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(y)),a(y);break;case Js.TIMEOUT:Q(xt,`RPC '${e}' ${s} timed out`),l(new G(L.DEADLINE_EXCEEDED,"Request time out"));break;case Js.HTTP_ERROR:let b=u.getStatus();if(Q(xt,`RPC '${e}' ${s} failed with status:`,b,"response text:",u.getResponseText()),b>0){let w=u.getResponseJson();Array.isArray(w)&&(w=w[0]);let N=w?.error;if(N&&N.status&&N.message){let V=function(W){let ie=W.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(ie)>=0?ie:L.UNKNOWN}(N.status);l(new G(V,N.message))}else l(new G(L.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new G(L.UNAVAILABLE,"Connection failed."));break;default:re(9055,{l_:e,streamId:s,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Q(xt,`RPC '${e}' ${s} completed.`)}});let p=JSON.stringify(i);Q(xt,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",p,r,15)})}T_(e,t,r){let i=Fm(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Cp(),a=wp(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;let p=o.join("");Q(xt,`Creating RPC '${e}' stream ${i}: ${p}`,l);let y=s.createWebChannel(p,l);this.I_(y);let b=!1,w=!1,N=new Lm({Yo:F=>{w?Q(xt,`Not sending because RPC '${e}' stream ${i} is closed:`,F):(b||(Q(xt,`Opening RPC '${e}' stream ${i} transport.`),y.open(),b=!0),Q(xt,`RPC '${e}' stream ${i} sending:`,F),y.send(F))},Zo:()=>y.close()}),V=(F,W,ie)=>{F.listen(W,X=>{try{ie(X)}catch(Se){setTimeout(()=>{throw Se},0)}})};return V(y,bo.EventType.OPEN,()=>{w||(Q(xt,`RPC '${e}' stream ${i} transport opened.`),N.o_())}),V(y,bo.EventType.CLOSE,()=>{w||(w=!0,Q(xt,`RPC '${e}' stream ${i} transport closed`),N.a_(),this.E_(y))}),V(y,bo.EventType.ERROR,F=>{w||(w=!0,To(xt,`RPC '${e}' stream ${i} transport errored. Name:`,F.name,"Message:",F.message),N.a_(new G(L.UNAVAILABLE,"The operation could not be completed")))}),V(y,bo.EventType.MESSAGE,F=>{if(!w){let W=F.data[0];Oe(!!W,16349);let ie=W,X=ie?.error||ie[0]?.error;if(X){Q(xt,`RPC '${e}' stream ${i} received error:`,X);let Se=X.status,Fe=function(C){let E=ot[C];if(E!==void 0)return qx(E)}(Se),Me=X.message;Fe===void 0&&(Fe=L.INTERNAL,Me="Unknown error status: "+Se+" with message "+X.message),w=!0,N.a_(new G(Fe,Me)),y.close()}else Q(xt,`RPC '${e}' stream ${i} received:`,W),N.u_(W)}}),V(a,bp.STAT_EVENT,F=>{F.stat===Ll.PROXY?Q(xt,`RPC '${e}' stream ${i} detected buffering proxy`):F.stat===Ll.NOPROXY&&Q(xt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{N.__()},0),N}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function Dp(){return typeof document<"u"?document:null}function Pu(n){return new sm(n,!0)}var uu=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&Q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var jC="PersistentStream",du=class{constructor(e,t,r,i,o,s,a,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new uu(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}stop(){return B(this,null,function*(){this.x_()&&(yield this.close(0))})}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}k_(){return B(this,null,function*(){if(this.O_())return this.close(0)})}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return B(this,null,function*(){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===L.RESOURCE_EXHAUSTED?(yr(t.toString()),yr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.r_(t)})}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new G(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(()=>B(this,null,function*(){this.state=0,this.start()}))}z_(e){return Q(jC,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(Q(jC,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Bm=class extends du{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=YR(this.serializer,e),r=function(o){if(!("targetChange"in o))return le.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?le.min():s.readTime?Gn(s.readTime):le.min()}(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=um(this.serializer),t.addTarget=function(o,s){let a,l=s.target;if(a=Yp(l)?{documents:ZR(o,l)}:{query:ek(o,l).ft},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=Hx(o,s.resumeToken);let u=am(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(le.min())>0){a.readTime=iu(o,s.snapshotVersion.toTimestamp());let u=am(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=nk(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=um(this.serializer),t.removeTarget=e,this.q_(t)}},Um=class extends du{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Oe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Oe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Oe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=XR(e.writeResults,e.commitTime),r=Gn(e.commitTime);return this.listener.na(r,t)}ra(){let e={};e.database=um(this.serializer),this.q_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>JR(this.serializer,r))};this.q_(t)}};var $m=class{},zm=class extends $m{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new G(L.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,cm(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(L.UNKNOWN,o.toString())})}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Ho(e,cm(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(L.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},qm=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(yr(t),this.aa=!1):Q("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Vi="RemoteStore",Hm=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(()=>B(this,null,function*(){ji(this)&&(Q(Vi,"Restarting streams for network reachability change."),yield function(l){return B(this,null,function*(){let u=ce(l);u.Ea.add(4),yield ga(u),u.Ra.set("Unknown"),u.Ea.delete(4),yield Au(u)})}(this))}))}),this.Ra=new qm(r,i)}};function Au(n){return B(this,null,function*(){if(ji(n))for(let e of n.da)yield e(!0)})}function ga(n){return B(this,null,function*(){for(let e of n.da)yield e(!1)})}function tE(n,e){let t=ce(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Ag(t)?Pg(t):Ho(t).O_()&&Tg(t,e))}function Mg(n,e){let t=ce(n),r=Ho(t);t.Ia.delete(e),r.O_()&&nE(t,e),t.Ia.size===0&&(r.O_()?r.L_():ji(t)&&t.Ra.set("Unknown"))}function Tg(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ho(n).Y_(e)}function nE(n,e){n.Va.Ue(e),Ho(n).Z_(e)}function Pg(n){n.Va=new om({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ho(n).start(),n.Ra.ua()}function Ag(n){return ji(n)&&!Ho(n).x_()&&n.Ia.size>0}function ji(n){return ce(n).Ea.size===0}function rE(n){n.Va=void 0}function _k(n){return B(this,null,function*(){n.Ra.set("Online")})}function bk(n){return B(this,null,function*(){n.Ia.forEach((e,t)=>{Tg(n,e)})})}function wk(n,e){return B(this,null,function*(){rE(n),Ag(n)?(n.Ra.ha(e),Pg(n)):n.Ra.set("Unknown")})}function Ck(n,e,t){return B(this,null,function*(){if(n.Ra.set("Online"),e instanceof nu&&e.state===2&&e.cause)try{yield function(i,o){return B(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ia.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ia.delete(a),i.Va.removeTarget(a))})}(n,e)}catch(r){Q(Vi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield hu(n,r)}else if(e instanceof Do?n.Va.Ze(e):e instanceof tu?n.Va.st(e):n.Va.tt(e),!t.isEqual(le.min()))try{let r=yield eE(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Va.Tt(s);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){let p=o.Ia.get(u);p&&o.Ia.set(u,p.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,u)=>{let p=o.Ia.get(l);if(!p)return;o.Ia.set(l,p.withResumeToken(Et.EMPTY_BYTE_STRING,p.snapshotVersion)),nE(o,l);let y=new la(p.target,l,u,p.sequenceNumber);Tg(o,y)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){Q(Vi,"Failed to raise snapshot:",r),yield hu(n,r)}})}function hu(n,e,t){return B(this,null,function*(){if(!qo(e))throw e;n.Ea.add(1),yield ga(n),n.Ra.set("Offline"),t||(t=()=>eE(n.localStore)),n.asyncQueue.enqueueRetryable(()=>B(this,null,function*(){Q(Vi,"Retrying IndexedDB access"),yield t(),n.Ea.delete(1),yield Au(n)}))})}function iE(n,e){return e().catch(t=>hu(n,t,e))}function Ou(n){return B(this,null,function*(){let e=ce(n),t=Qr(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:yg;for(;xk(e);)try{let i=yield mk(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,Ek(e,i)}catch(i){yield hu(e,i)}oE(e)&&sE(e)})}function xk(n){return ji(n)&&n.Ta.length<10}function Ek(n,e){n.Ta.push(e);let t=Qr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function oE(n){return ji(n)&&!Qr(n).x_()&&n.Ta.length>0}function sE(n){Qr(n).start()}function Ik(n){return B(this,null,function*(){Qr(n).ra()})}function Dk(n){return B(this,null,function*(){let e=Qr(n);for(let t of n.Ta)e.ea(t.mutations)})}function Sk(n,e,t){return B(this,null,function*(){let r=n.Ta.shift(),i=tm.from(r,e,t);yield iE(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Ou(n)})}function Mk(n,e){return B(this,null,function*(){e&&Qr(n).X_&&(yield function(r,i){return B(this,null,function*(){if(function(s){return UR(s)&&s!==L.ABORTED}(i.code)){let o=r.Ta.shift();Qr(r).B_(),yield iE(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Ou(r)}})}(n,e)),oE(n)&&sE(n)})}function BC(n,e){return B(this,null,function*(){let t=ce(n);t.asyncQueue.verifyOperationInProgress(),Q(Vi,"RemoteStore received new credentials");let r=ji(t);t.Ea.add(3),yield ga(t),r&&t.Ra.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),yield Au(t)})}function Tk(n,e){return B(this,null,function*(){let t=ce(n);e?(t.Ea.delete(2),yield Au(t)):e||(t.Ea.add(2),yield ga(t),t.Ra.set("Unknown"))})}function Ho(n){return n.ma||(n.ma=function(t,r,i){let o=ce(t);return o.sa(),new Bm(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Xo:_k.bind(null,n),t_:bk.bind(null,n),r_:wk.bind(null,n),H_:Ck.bind(null,n)}),n.da.push(e=>B(this,null,function*(){e?(n.ma.B_(),Ag(n)?Pg(n):n.Ra.set("Unknown")):(yield n.ma.stop(),rE(n))}))),n.ma}function Qr(n){return n.fa||(n.fa=function(t,r,i){let o=ce(t);return o.sa(),new Um(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:Ik.bind(null,n),r_:Mk.bind(null,n),ta:Dk.bind(null,n),na:Sk.bind(null,n)}),n.da.push(e=>B(this,null,function*(){e?(n.fa.B_(),yield Ou(n)):(yield n.fa.stop(),n.Ta.length>0&&(Q(Vi,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}var Gm=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Og(n,e){if(yr("AsyncQueue",`${e}: ${n}`),qo(n))return new G(L.UNAVAILABLE,`${e}: ${n}`);throw n}var fu=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ne.comparator(t.key,r.key):(t,r)=>ne.comparator(t.key,r.key),this.keyedMap=Xs(),this.sortedSet=new Ye(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var pu=class{constructor(){this.ga=new Ye(ne.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):re(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},Bo=class n{constructor(e,t,r,i,o,s,a,l,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,fu.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Wm=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},Qm=class{constructor(){this.queries=UC(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=ce(t),o=i.queries;i.queries=UC(),o.forEach((s,a)=>{for(let l of a.Sa)l.onError(r)})})(this,new G(L.ABORTED,"Firestore shutting down"))}};function UC(){return new br(n=>Ox(n),Mu)}function Pk(n,e){return B(this,null,function*(){let t=ce(n),r=3,i=e.query,o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new Wm,r=e.Da()?0:1);try{switch(r){case 0:o.wa=yield t.onListen(i,!0);break;case 1:o.wa=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Og(s,`Initialization of query '${Co(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&Ng(t)})}function Ak(n,e){return B(this,null,function*(){let t=ce(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function Ok(n,e){let t=ce(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.Sa)a.Fa(i)&&(r=!0);s.wa=i}}r&&Ng(t)}function Nk(n,e,t){let r=ce(n),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(t);r.queries.delete(e)}function Ng(n){n.Ca.forEach(e=>{e.next()})}var Km,$C;($C=Km||(Km={})).Ma="default",$C.Cache="cache";var Ym=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Bo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Bo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Km.Cache}};var mu=class{constructor(e){this.key=e}},gu=class{constructor(e){this.key=e}},Jm=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=we(),this.mutatedKeys=we(),this.eu=Nx(e),this.tu=new fu(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new pu,i=t?t.tu:this.tu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,y)=>{let b=i.get(p),w=Tu(this.query,y)?y:null,N=!!b&&this.mutatedKeys.has(b.key),V=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations),F=!1;b&&w?b.data.isEqual(w.data)?N!==V&&(r.track({type:3,doc:w}),F=!0):this.su(b,w)||(r.track({type:2,doc:w}),F=!0,(l&&this.eu(w,l)>0||u&&this.eu(w,u)<0)&&(a=!0)):!b&&w?(r.track({type:0,doc:w}),F=!0):b&&!w&&(r.track({type:1,doc:b}),F=!0,(l||u)&&(a=!0)),F&&(w?(s=s.add(w),o=V?o.add(p):o.delete(p)):(s=s.delete(p),o=o.delete(p)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let p=this.query.limitType==="F"?s.last():s.first();s=s.delete(p.key),o=o.delete(p.key),r.track({type:1,doc:p})}return{tu:s,iu:r,Cs:a,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((p,y)=>function(w,N){let V=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re(20277,{Rt:F})}};return V(w)-V(N)}(p.type,y.type)||this.eu(p.doc,y.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,s.length!==0||u?{snapshot:new Bo(this.query,e.tu,o,s,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new pu,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=we(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new gu(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new mu(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=we();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Bo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},Rg="SyncEngine",Xm=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Zm=class{constructor(e){this.key=e,this.hu=!1}},eg=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new br(a=>Ox(a),Mu),this.Iu=new Map,this.Eu=new Set,this.du=new Ye(ne.comparator),this.Au=new Map,this.Ru=new da,this.Vu={},this.mu=new Map,this.fu=ua.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};function Rk(n,e,t=!0){return B(this,null,function*(){let r=hE(n),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=yield aE(r,e,t,!0),i})}function kk(n,e){return B(this,null,function*(){let t=hE(n);yield aE(t,e,!0,!1)})}function aE(n,e,t,r){return B(this,null,function*(){let i=yield gk(n.localStore,Hn(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield Fk(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&tE(n.remoteStore,i),a})}function Fk(n,e,t,r,i){return B(this,null,function*(){n.pu=(y,b,w)=>function(V,F,W,ie){return B(this,null,function*(){let X=F.view.ru(W);X.Cs&&(X=yield VC(V.localStore,F.query,!1).then(({documents:M})=>F.view.ru(M,X)));let Se=ie&&ie.targetChanges.get(F.targetId),Fe=ie&&ie.targetMismatches.get(F.targetId)!=null,Me=F.view.applyChanges(X,V.isPrimaryClient,Se,Fe);return qC(V,F.targetId,Me.au),Me.snapshot})}(n,y,b,w);let o=yield VC(n.localStore,e,!0),s=new Jm(e,o.Qs),a=s.ru(o.documents),l=ca.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=s.applyChanges(a,n.isPrimaryClient,l);qC(n,t,u.au);let p=new Xm(e,t,s);return n.Tu.set(e,p),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),u.snapshot})}function Vk(n,e,t){return B(this,null,function*(){let r=ce(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!Mu(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Nm(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Mg(r.remoteStore,i.targetId),tg(r,i.targetId)}).catch(zo))):(tg(r,i.targetId),yield Nm(r.localStore,i.targetId,!0))})}function Lk(n,e){return B(this,null,function*(){let t=ce(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Mg(t.remoteStore,r.targetId))})}function jk(n,e,t){return B(this,null,function*(){let r=Gk(n);try{let i=yield function(s,a){let l=ce(s),u=lt.now(),p=a.reduce((w,N)=>w.add(N.key),we()),y,b;return l.persistence.runTransaction("Locally write mutations","readwrite",w=>{let N=wr(),V=we();return l.Ns.getEntries(w,p).next(F=>{N=F,N.forEach((W,ie)=>{ie.isValidDocument()||(V=V.add(W))})}).next(()=>l.localDocuments.getOverlayedDocuments(w,N)).next(F=>{y=F;let W=[];for(let ie of a){let X=BR(ie,y.get(ie.key).overlayedDocument);X!=null&&W.push(new Qn(ie.key,X,Ix(X.value.mapValue),Jt.exists(!0)))}return l.mutationQueue.addMutationBatch(w,u,W,a)}).next(F=>{b=F;let W=F.applyToLocalDocumentSet(y,V);return l.documentOverlayCache.saveOverlays(w,F.batchId,W)})}).then(()=>({batchId:b.batchId,changes:kx(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,l){let u=s.Vu[s.currentUser.toKey()];u||(u=new Ye(be)),u=u.insert(a,l),s.Vu[s.currentUser.toKey()]=u}(r,i.batchId,t),yield ya(r,i.changes),yield Ou(r.remoteStore)}catch(i){let o=Og(i,"Failed to persist write");t.reject(o)}})}function cE(n,e){return B(this,null,function*(){let t=ce(n);try{let r=yield fk(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Au.get(o);s&&(Oe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?Oe(s.hu,14607):i.removedDocuments.size>0&&(Oe(s.hu,42227),s.hu=!1))}),yield ya(t,r,e)}catch(r){yield zo(r)}})}function zC(n,e,t){let r=ce(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let l=ce(s);l.onlineState=a;let u=!1;l.queries.forEach((p,y)=>{for(let b of y.Sa)b.va(a)&&(u=!0)}),u&&Ng(l)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Bk(n,e,t){return B(this,null,function*(){let r=ce(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new Ye(ne.comparator);s=s.insert(o,En.newNoDocument(o,le.min()));let a=we().add(o),l=new eu(le.min(),new Map,new Ye(be),s,a);yield cE(r,l),r.du=r.du.remove(o),r.Au.delete(e),kg(r)}else yield Nm(r.localStore,e,!1).then(()=>tg(r,e,t)).catch(zo)})}function Uk(n,e){return B(this,null,function*(){let t=ce(n),r=e.batch.batchId;try{let i=yield hk(t.localStore,e);uE(t,r,null),lE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ya(t,i)}catch(i){yield zo(i)}})}function $k(n,e,t){return B(this,null,function*(){let r=ce(n);try{let i=yield function(s,a){let l=ce(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let p;return l.mutationQueue.lookupMutationBatch(u,a).next(y=>(Oe(y!==null,37113),p=y.keys(),l.mutationQueue.removeMutationBatch(u,y))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,p,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,p)).next(()=>l.localDocuments.getDocuments(u,p))})}(r.localStore,e);uE(r,e,t),lE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ya(r,i)}catch(i){yield zo(i)}})}function lE(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function uE(n,e,t){let r=ce(n),i=r.Vu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function tg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||dE(n,r)})}function dE(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(Mg(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),kg(n))}function qC(n,e,t){for(let r of t)r instanceof mu?(n.Ru.addReference(r.key,e),zk(n,r)):r instanceof gu?(Q(Rg,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||dE(n,r.key)):re(19791,{wu:r})}function zk(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(Q(Rg,"New document in limbo: "+t),n.Eu.add(r),kg(n))}function kg(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new ne(Ge.fromString(e)),r=n.fu.next();n.Au.set(r,new Zm(t)),n.du=n.du.insert(t,r),tE(n.remoteStore,new la(Hn(Eg(t.path)),r,"TargetPurposeLimboResolution",gg.ce))}}function ya(n,e,t){return B(this,null,function*(){let r=ce(n),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{s.push(r.pu(l,e,t).then(u=>{if((u||t)&&r.isPrimaryClient){let p=u?!u.fromCache:t?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(u){i.push(u);let p=Tm.As(l.targetId,u);o.push(p)}}))}),yield Promise.all(s),r.Pu.H_(i),yield function(l,u){return B(this,null,function*(){let p=ce(l);try{yield p.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>$.forEach(u,b=>$.forEach(b.Es,w=>p.persistence.referenceDelegate.addReference(y,b.targetId,w)).next(()=>$.forEach(b.ds,w=>p.persistence.referenceDelegate.removeReference(y,b.targetId,w)))))}catch(y){if(!qo(y))throw y;Q(Sg,"Failed to update sequence numbers: "+y)}for(let y of u){let b=y.targetId;if(!y.fromCache){let w=p.Ms.get(b),N=w.snapshotVersion,V=w.withLastLimboFreeSnapshotVersion(N);p.Ms=p.Ms.insert(b,V)}}})}(r.localStore,o))})}function qk(n,e){return B(this,null,function*(){let t=ce(n);if(!t.currentUser.isEqual(e)){Q(Rg,"User change. New user:",e.toKey());let r=yield Zx(t.localStore,e);t.currentUser=e,function(o,s){o.mu.forEach(a=>{a.forEach(l=>{l.reject(new G(L.CANCELLED,s))})}),o.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ya(t,r.Ls)}})}function Hk(n,e){let t=ce(n),r=t.Au.get(e);if(r&&r.hu)return we().add(r.key);{let i=we(),o=t.Iu.get(e);if(!o)return i;for(let s of o){let a=t.Tu.get(s);i=i.unionWith(a.view.nu)}return i}}function hE(n){let e=ce(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=cE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Hk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Bk.bind(null,e),e.Pu.H_=Ok.bind(null,e.eventManager),e.Pu.yu=Nk.bind(null,e.eventManager),e}function Gk(n){let e=ce(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Uk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$k.bind(null,e),e}var fE=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return B(this,null,function*(){this.serializer=Pu(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)})}Fu(t,r){return null}Mu(t,r){return null}vu(t){return dk(this.persistence,new Am,t.initialUser,this.serializer)}Cu(t){return new su(Mm.mi,this.serializer)}Du(t){return new Rm}terminate(){return B(this,null,function*(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),ng=class extends fE{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Oe(this.persistence.referenceDelegate instanceof au,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new mm(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?cn.withCacheSize(this.cacheSizeBytes):cn.DEFAULT;return new su(r=>au.mi(r,t),this.serializer)}};var Wk=(()=>{class n{initialize(t,r){return B(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>zC(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=qk.bind(null,this.syncEngine),yield Tk(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Qm}()}createDatastore(t){let r=Pu(t.databaseInfo.databaseId),i=function(s){return new jm(s)}(t.databaseInfo);return function(s,a,l,u){return new zm(s,a,l,u)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,l){return new Hm(i,o,s,a,l)}(this.localStore,this.datastore,t.asyncQueue,r=>zC(this.syncEngine,r,0),function(){return lu.v()?new lu:new km}())}createSyncEngine(t,r){return function(o,s,a,l,u,p,y){let b=new eg(o,s,a,l,u,p);return y&&(b.gu=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return B(this,null,function*(){yield function(r){return B(this,null,function*(){let i=ce(r);Q(Vi,"RemoteStore shutting down."),i.Ea.add(5),yield ga(i),i.Aa.shutdown(),i.Ra.set("Unknown")})}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()})}}return n.provider={build:()=>new n},n})();var rg=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):yr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Kr="FirestoreClient",ig=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=pt.UNAUTHENTICATED,this.clientId=ra.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>B(this,null,function*(){Q(Kr,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(Q(Kr,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>B(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Og(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Sp(n,e){return B(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),Q(Kr,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>B(this,null,function*(){r.isEqual(i)||(yield Zx(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function HC(n,e){return B(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Qk(n);Q(Kr,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>BC(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>BC(e.remoteStore,i)),n._onlineComponents=e})}function Qk(n){return B(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Q(Kr,"Using user provided OfflineComponentProvider");try{yield Sp(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===L.FAILED_PRECONDITION||i.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;To("Error using user provided cache. Falling back to memory cache: "+t),yield Sp(n,new fE)}}else Q(Kr,"Using default OfflineComponentProvider"),yield Sp(n,new ng(void 0));return n._offlineComponents})}function pE(n){return B(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(Q(Kr,"Using user provided OnlineComponentProvider"),yield HC(n,n._uninitializedComponentsProvider._online)):(Q(Kr,"Using default OnlineComponentProvider"),yield HC(n,new Wk))),n._onlineComponents})}function Kk(n){return pE(n).then(e=>e.syncEngine)}function GC(n){return B(this,null,function*(){let e=yield pE(n),t=e.eventManager;return t.onListen=Rk.bind(null,e.syncEngine),t.onUnlisten=Vk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=kk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Lk.bind(null,e.syncEngine),t})}function mE(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var WC=new Map;var gE="firestore.googleapis.com",QC=!0,yu=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new G(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gE,this.ssl=QC}else this.host=e.host,this.ssl=e.ssl??QC;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Xx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ck)throw new G(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mE(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new G(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new G(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new G(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Uo=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yu({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yu(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Tp;switch(r.type){case"firstParty":return new Np(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return B(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=WC.get(t);r&&(Q("ComponentProvider","Removing Datastore"),WC.delete(t),r.terminate())}(this),Promise.resolve()}};function Yk(n,e,t,r={}){n=xn(n,Uo);let i=Nl(e),o=n._getSettings(),s=ue(ee({},o),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;i&&(Fw(`https://${a}`),Lw("Firestore",!0)),o.host!==gE&&o.host!==a&&To("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=ue(ee({},o),{host:a,ssl:i,emulatorOptions:r});if(!vo(l,s)&&(n._setSettings(l),r.mockUserToken)){let u,p;if(typeof r.mockUserToken=="string")u=r.mockUserToken,p=pt.MOCK_USER;else{u=Vw(r.mockUserToken,n._app?.options.projectId);let y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new G(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new pt(y)}n._authCredentials=new Pp(new Hl(u,p))}}var Yr=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},gt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $r(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(ma(t,n._jsonSchema))return new n(e,r||null,new ne(Ge.fromString(t.referencePath)))}};gt._jsonSchemaVersion="firestore/documentReference/1.0",gt._jsonSchema={type:ct("string",gt._jsonSchemaVersion),referencePath:ct("string")};var $r=class n extends Yr{constructor(e,t,r){super(e,t,Eg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new gt(this.firestore,null,new ne(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Dn(n,e,...t){if(n=Qt(n),tx("collection","path",e),n instanceof Uo){let r=Ge.fromString(e,...t);return hC(r),new $r(n,null,r)}{if(!(n instanceof gt||n instanceof $r))throw new G(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ge.fromString(e,...t));return hC(r),new $r(n.firestore,null,r)}}function Cr(n,e,...t){if(n=Qt(n),arguments.length===1&&(e=ra.newId()),tx("doc","path",e),n instanceof Uo){let r=Ge.fromString(e,...t);return dC(r),new gt(n,null,new ne(r))}{if(!(n instanceof gt||n instanceof $r))throw new G(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ge.fromString(e,...t));return dC(r),new gt(n.firestore,n instanceof $r?n.converter:null,new ne(r))}}var KC="AsyncQueue",vu=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new uu(this,"async_queue_retry"),this._c=()=>{let r=Dp();r&&Q(KC,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=Dp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=Dp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new gr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}lc(){return B(this,null,function*(){if(this.Xu.length!==0){try{yield this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!qo(e))throw e;Q(KC,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}})}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,yr("INTERNAL UNHANDLED ERROR: ",YC(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=Gm.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&re(47125,{Pc:YC(this.nc)})}verifyOperationInProgress(){}Tc(){return B(this,null,function*(){let e;do e=this.ac,yield e;while(e!==this.ac)})}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function YC(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function JC(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Kn=class extends Uo{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new vu,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return B(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new vu(e),this._firestoreClient=void 0,yield e}})}};function Nu(n,e){let t=typeof n=="object"?n:rC(),r=typeof n=="string"?n:e||Yl,i=eC(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=kw("firestore");o&&Yk(i,...o)}return i}function Fg(n){if(n._terminated)throw new G(L.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Jk(n),n._firestoreClient}function Jk(n){let e=n._freezeSettings(),t=function(i,o,s,a){return new Lp(i,o,s,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,mE(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)}(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new ig(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}}(n._componentsProvider))}var zr=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Et.fromBase64String(e))}catch(t){throw new G(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ma(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};zr._jsonSchemaVersion="firestore/bytes/1.0",zr._jsonSchema={type:ct("string",zr._jsonSchemaVersion),bytes:ct("string")};var Li=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new G(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ha=class{constructor(e){this._methodName=e}};var qr=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new G(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new G(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return be(this._lat,e._lat)||be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(ma(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};qr._jsonSchemaVersion="firestore/geoPoint/1.0",qr._jsonSchema={type:ct("string",qr._jsonSchemaVersion),latitude:ct("number"),longitude:ct("number")};var Hr=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ma(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new G(L.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Hr._jsonSchemaVersion="firestore/vectorValue/1.0",Hr._jsonSchema={type:ct("string",Hr._jsonSchemaVersion),vectorValues:ct("object")};var Xk=/^__.*__$/,og=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Qn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Fi(e,this.data,t,this.fieldTransforms)}},_u=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Qn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function yE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re(40011,{Ac:n})}}var sg=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new n(ee(ee({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return wu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(yE(this.Ac)&&Xk.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},ag=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Pu(e)}Cc(e,t,r,i=!1){return new sg({Ac:e,methodName:t,Dc:r,path:Yt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function va(n){let e=n._freezeSettings(),t=Pu(n._databaseId);return new ag(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Vg(n,e,t,r,i,o={}){let s=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);Lg("Data must be an object, but it was:",s,r);let a=bE(r,s),l,u;if(o.merge)l=new ln(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let p=[];for(let y of o.mergeFields){let b=cg(e,y,t);if(!s.contains(b))throw new G(L.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);CE(p,b)||p.push(b)}l=new ln(p),u=s.fieldTransforms.filter(y=>l.covers(y.field))}else l=null,u=s.fieldTransforms;return new og(new Kt(a),l,u)}var bu=class n extends ha{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function vE(n,e,t,r){let i=n.Cc(1,e,t);Lg("Data must be an object, but it was:",i,r);let o=[],s=Kt.empty();Jr(r,(l,u)=>{let p=jg(e,l,t);u=Qt(u);let y=i.yc(p);if(u instanceof bu)o.push(p);else{let b=_a(u,y);b!=null&&(o.push(p),s.set(p,b))}});let a=new ln(o);return new _u(s,a,i.fieldTransforms)}function _E(n,e,t,r,i,o){let s=n.Cc(1,e,t),a=[cg(e,r,t)],l=[i];if(o.length%2!=0)throw new G(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<o.length;b+=2)a.push(cg(e,o[b])),l.push(o[b+1]);let u=[],p=Kt.empty();for(let b=a.length-1;b>=0;--b)if(!CE(u,a[b])){let w=a[b],N=l[b];N=Qt(N);let V=s.yc(w);if(N instanceof bu)u.push(w);else{let F=_a(N,V);F!=null&&(u.push(w),p.set(w,F))}}let y=new ln(u);return new _u(p,y,s.fieldTransforms)}function Zk(n,e,t,r=!1){return _a(t,n.Cc(r?4:3,e))}function _a(n,e){if(wE(n=Qt(n)))return Lg("Unsupported field value:",e,n),bE(n,e);if(n instanceof ha)return function(r,i){if(!yE(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let l=_a(a,i.wc(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Qt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return kR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=lt.fromDate(r);return{timestampValue:iu(i.serializer,o)}}if(r instanceof lt){let o=new lt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:iu(i.serializer,o)}}if(r instanceof qr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zr)return{bytesValue:Hx(i.serializer,r._byteString)};if(r instanceof gt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Dg(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Hr)return function(s,a){return{mapValue:{fields:{[_g]:{stringValue:bg},[Ao]:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return Ig(a.serializer,u)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Iu(r)}`)}(n,e)}function bE(n,e){let t={};return yx(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jr(n,(r,i)=>{let o=_a(i,e.mc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function wE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof lt||n instanceof qr||n instanceof zr||n instanceof gt||n instanceof ha||n instanceof Hr)}function Lg(n,e,t){if(!wE(t)||!nx(t)){let r=Iu(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function cg(n,e,t){if((e=Qt(e))instanceof Li)return e._internalPath;if(typeof e=="string")return jg(n,e);throw wu("Field path arguments must be of type string or ",n,!1,void 0,t)}var eF=new RegExp("[~\\*/\\[\\]]");function jg(n,e,t){if(e.search(eF)>=0)throw wu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Li(...e.split("."))._internalPath}catch{throw wu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function wu(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new G(L.INVALID_ARGUMENT,a+n+l)}function CE(n,e){return n.some(t=>t.isEqual(e))}var Cu=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new lg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Ru("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},lg=class extends Cu{data(){return super.data()}};function Ru(n,e){return typeof e=="string"?jg(n,e):e instanceof Li?e._internalPath:e._delegate._internalPath}function tF(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new G(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var fa=class{},pa=class extends fa{};function ba(n,e,...t){let r=[];e instanceof fa&&r.push(e),r=r.concat(t),function(o){let s=o.filter(l=>l instanceof ug).length,a=o.filter(l=>l instanceof xu).length;if(s>1||s>0&&a>0)throw new G(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var xu=class n extends pa{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return EE(e._query,t),new Yr(e.firestore,e.converter,Jp(e._query,t))}_parse(e){let t=va(e.firestore);return function(o,s,a,l,u,p,y){let b;if(u.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new G(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){ZC(y,p);let N=[];for(let V of y)N.push(XC(l,o,V));b={arrayValue:{values:N}}}else b=XC(l,o,y)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||ZC(y,p),b=Zk(a,s,y,p==="in"||p==="not-in");return at.create(u,p,b)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function ku(n,e,t){let r=e,i=Ru("where",n);return xu._create(i,r,t)}var ug=class n extends fa{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:In.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let l of a)EE(s,l),s=Jp(s,l)}(e._query,t),new Yr(e.firestore,e.converter,Jp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var dg=class n extends pa{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new G(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new G(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ni(o,s)}(e._query,this._field,this._direction);return new Yr(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Wr(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function xE(n,e="asc"){let t=e,r=Ru("orderBy",n);return dg._create(r,t)}var hg=class n extends pa{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Yr(e.firestore,e.converter,Zl(e._query,this._limit,this._limitType))}};function wa(n){return iR("limit",n),hg._create("limit",n,"F")}function XC(n,e,t){if(typeof(t=Qt(t))=="string"){if(t==="")throw new G(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ax(e)&&t.indexOf("/")!==-1)throw new G(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Ge.fromString(t));if(!ne.isDocumentKey(r))throw new G(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _C(n,new ne(r))}if(t instanceof gt)return _C(n,t._key);throw new G(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Iu(t)}.`)}function ZC(n,e){if(!Array.isArray(n)||n.length===0)throw new G(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function EE(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new G(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var fg=class{convertValue(e,t="none"){switch(Gr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return He(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(_r(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw re(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Jr(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){let t=e.fields?.[Ao].arrayValue?.values?.map(r=>He(r.doubleValue));return new Hr(t)}convertGeoPoint(e){return new qr(He(e.latitude),He(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Su(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(sa(e));default:return null}}convertTimestamp(e){let t=vr(e);return new lt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ge.fromString(e);Oe(Jx(r),9688,{name:e});let i=new Jl(r.get(1),r.get(3)),o=new ne(r.popFirst(5));return i.isEqual(t)||yr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Bg(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Ti=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Pi=class n extends Cu{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new So(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Ru("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new G(L.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Pi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Pi._jsonSchema={type:ct("string",Pi._jsonSchemaVersion),bundleSource:ct("string","DocumentSnapshot"),bundleName:ct("string"),bundle:ct("string")};var So=class extends Pi{data(e={}){return super.data(e)}},Mo=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ti(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new So(this._firestore,this._userDataWriter,r.key,r,new Ti(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new G(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let l=new So(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ti(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let l=new So(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ti(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,p=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),p=s.indexOf(a.doc.key)),{type:nF(a.type),doc:l,oldIndex:u,newIndex:p}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new G(L.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ra.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function nF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re(61501,{type:n})}}Mo._jsonSchemaVersion="firestore/querySnapshot/1.0",Mo._jsonSchema={type:ct("string",Mo._jsonSchemaVersion),bundleSource:ct("string","QuerySnapshot"),bundleName:ct("string"),bundle:ct("string")};var Eu=class extends fg{constructor(e){super(),this.firestore=e}convertBytes(e){return new zr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new gt(this.firestore,null,t)}};function IE(n,e,t){n=xn(n,gt);let r=xn(n.firestore,Kn),i=Bg(n.converter,e,t);return xa(r,[Vg(va(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Jt.none())])}function Fu(n,e,t,...r){n=xn(n,gt);let i=xn(n.firestore,Kn),o=va(i),s;return s=typeof(e=Qt(e))=="string"||e instanceof Li?_E(o,"updateDoc",n._key,e,t,r):vE(o,"updateDoc",n._key,e),xa(i,[s.toMutation(n._key,Jt.exists(!0))])}function DE(n){return xa(xn(n.firestore,Kn),[new jo(n._key,Jt.none())])}function Ca(n,e){let t=xn(n.firestore,Kn),r=Cr(n),i=Bg(n.converter,e);return xa(t,[Vg(va(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Jt.exists(!1))]).then(()=>r)}function xr(n,...e){n=Qt(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||JC(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(JC(e[r])){let l=e[r];e[r]=l.next?.bind(l),e[r+1]=l.error?.bind(l),e[r+2]=l.complete?.bind(l)}let o,s,a;if(n instanceof gt)s=xn(n.firestore,Kn),a=Eg(n._key.path),o={next:l=>{e[r]&&e[r](rF(s,n,l))},error:e[r+1],complete:e[r+2]};else{let l=xn(n,Yr);s=xn(l.firestore,Kn),a=l._query;let u=new Eu(s);o={next:p=>{e[r]&&e[r](new Mo(s,u,l,p))},error:e[r+1],complete:e[r+2]},tF(n._query)}return function(u,p,y,b){let w=new rg(b),N=new Ym(p,w,y);return u.asyncQueue.enqueueAndForget(()=>B(this,null,function*(){return Pk(yield GC(u),N)})),()=>{w.Nu(),u.asyncQueue.enqueueAndForget(()=>B(this,null,function*(){return Ak(yield GC(u),N)}))}}(Fg(s),a,i,o)}function xa(n,e){return function(r,i){let o=new gr;return r.asyncQueue.enqueueAndForget(()=>B(this,null,function*(){return jk(yield Kk(r),i,o)})),o.promise}(Fg(n),e)}function rF(n,e,t){let r=t.docs.get(e._key),i=new Eu(n);return new Pi(n,i,e._key,r,new Ti(t.hasPendingWrites,t.fromCache),e.converter)}var pg=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=va(e)}set(e,t,r){this._verifyNotCommitted();let i=Mp(e,this._firestore),o=Bg(i.converter,t,r),s=Vg(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Jt.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Mp(e,this._firestore),s;return s=typeof(t=Qt(t))=="string"||t instanceof Li?_E(this._dataReader,"WriteBatch.update",o._key,t,r,i):vE(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Jt.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Mp(e,this._firestore);return this._mutations=this._mutations.concat(new jo(t._key,Jt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new G(L.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Mp(n,e){if((n=Qt(n)).firestore!==e)throw new G(L.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function SE(n){return Fg(n=xn(n,Kn)),new pg(n,e=>xa(n,e))}(function(e,t=!0){(function(i){$o=i})(nC),Qs(new hr("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Kn(new Ap(r.getProvider("auth-internal")),new Rp(s,r.getProvider("app-check-internal")),function(u,p){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new G(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jl(u.options.projectId,p)}(s,i),s);return o=ee({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ur(cC,lC,e),Ur(cC,lC,"esm2020")})();var Vu=(()=>{class n{constructor(){this.app=Ys(Ft.firebaseConfig),this.db=Nu(this.app),this.messagesSubject=new Je([]),this.messages$=this.messagesSubject.asObservable(),this.logoutSubject=new Je(void 0),this.logout$=this.logoutSubject.asObservable(),this.listenForMessages()}listenForMessages(){let t=Dn(this.db,"messages"),r=ba(t,xE("timestamp","asc"),wa(100));xr(r,i=>{let o=i.docs.map(s=>{let a=s.data();return{id:s.id,text:a.text,senderName:a.senderName,timestamp:a.timestamp.toDate(),userId:a.userId,conversationId:a.conversationId,audioBase64:a.audioBase64,isRead:a.isRead||!1}});this.messagesSubject.next(o)},i=>{console.error("Error listening to messages:",i)})}sendMessage(t,r,i){return B(this,null,function*(){let o=Dn(this.db,"messages"),s=localStorage.getItem("jjm_user_id")||null;yield Ca(o,{text:t,senderName:r,conversationId:i,timestamp:new Date,userId:s,isRead:!1})})}sendAudioMessage(t,r,i){return B(this,null,function*(){let o=Dn(this.db,"messages"),s=localStorage.getItem("jjm_user_id")||null;yield Ca(o,{text:"\u{1F3A4} Voice Message",senderName:r,audioBase64:t,conversationId:i,timestamp:new Date,userId:s,isRead:!1})})}deleteMessage(t){return B(this,null,function*(){let r=Cr(this.db,"messages",t);yield DE(r)})}markAsRead(t){return B(this,null,function*(){let r=SE(this.db);t.forEach(i=>{let o=Cr(this.db,"messages",i);r.update(o,{isRead:!0})}),yield r.commit()})}getMessages(){return this.messages$}triggerLogout(){this.logoutSubject.next()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var TE=(()=>{class n{constructor(){this.app=Ys(Ft.firebaseConfig),this.db=Nu(this.app),this.peerConnection=null,this.localStream=null,this.remoteStream=null,this.callDocSubscription=null,this.offerCandidatesSubscription=null,this.answerCandidatesSubscription=null,this.incomingCall$=new Tn,this.callStatus$=new Je("idle"),this.remoteStream$=new Je(null),this.currentCallId=null,this.candidateQueue=[],this.servers={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:stun1.l.google.com:19302","stun:stun2.l.google.com:19302","stun:stun3.l.google.com:19302","stun:stun4.l.google.com:19302"]}]}}initializeCall(t,r){return B(this,null,function*(){this.currentCallId=null,this.callStatus$.next("calling");let i=Cr(Dn(this.db,"calls"));this.currentCallId=i.id,yield this.setupLocalMedia(),this.setupPeerConnection(this.currentCallId),this.localStream&&this.localStream.getTracks().forEach(l=>{this.peerConnection&&this.localStream&&this.peerConnection.addTrack(l,this.localStream)});let o=yield this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!1});yield this.peerConnection.setLocalDescription(o);let s={id:this.currentCallId,conversationId:t,callerName:r,status:"offering",offer:{type:o.type,sdp:o.sdp},timestamp:new Date};yield IE(i,s),this.callDocSubscription=xr(i,l=>B(this,null,function*(){let u=l.data();if(!(!this.peerConnection||!u)){if(this.peerConnection.signalingState==="have-local-offer"&&u.answer){let p=new RTCSessionDescription(u.answer);yield this.peerConnection.setRemoteDescription(p),this.callStatus$.next("connected"),this.candidateQueue.forEach(y=>{this.peerConnection?.addIceCandidate(y).catch(b=>console.error("Error adding buffered candidate",b))}),this.candidateQueue=[]}(u.status==="ended"||u.status==="rejected")&&this.endCallInternal()}}));let a=Dn(i,"answerCandidates");this.answerCandidatesSubscription=xr(a,l=>{l.docChanges().forEach(u=>{if(u.type==="added"){let p=u.doc.data(),y=new RTCIceCandidate(p);this.peerConnection?.remoteDescription?this.peerConnection.addIceCandidate(y).catch(b=>console.error("Error adding candidate",b)):(console.log("Buffering candidate..."),this.candidateQueue.push(y))}})})})}answerCall(t){return B(this,null,function*(){this.currentCallId=t.id,this.callStatus$.next("connected");let r=Cr(this.db,"calls",t.id);yield this.setupLocalMedia(),this.setupPeerConnection(t.id),this.localStream.getTracks().forEach(l=>{this.peerConnection.addTrack(l,this.localStream)});let i=t.offer;yield this.peerConnection.setRemoteDescription(new RTCSessionDescription(i));let o=yield this.peerConnection.createAnswer();yield this.peerConnection.setLocalDescription(o);let s={type:o.type,sdp:o.sdp};yield Fu(r,{answer:s,status:"answered"});let a=Dn(r,"offerCandidates");this.offerCandidatesSubscription=xr(a,l=>{l.docChanges().forEach(u=>{if(u.type==="added"){let p=u.doc.data(),y=new RTCIceCandidate(p);this.peerConnection?.remoteDescription&&this.peerConnection.addIceCandidate(y).catch(b=>console.error("Error adding offer candidate",b))}})}),this.callDocSubscription=xr(r,l=>{let u=l.data();u&&u.status==="ended"&&this.endCallInternal()})})}endCall(){return B(this,null,function*(){if(this.currentCallId){let t=Cr(this.db,"calls",this.currentCallId);yield Fu(t,{status:"ended"}).catch(()=>{})}this.endCallInternal()})}rejectCall(t){let r=Cr(this.db,"calls",t);Fu(r,{status:"rejected"}).catch(()=>{})}endCallInternal(){this.callStatus$.next("idle"),this.remoteStream$.next(null),this.localStream&&(this.localStream.getTracks().forEach(t=>t.stop()),this.localStream=null),this.remoteStream&&(this.remoteStream.getTracks().forEach(t=>t.stop()),this.remoteStream=null),this.peerConnection&&(this.peerConnection.close(),this.peerConnection=null),this.callDocSubscription&&(this.callDocSubscription(),this.callDocSubscription=null),this.offerCandidatesSubscription&&(this.offerCandidatesSubscription(),this.offerCandidatesSubscription=null),this.answerCandidatesSubscription&&(this.answerCandidatesSubscription(),this.answerCandidatesSubscription=null),this.currentCallId=null}setupLocalMedia(){return B(this,null,function*(){try{this.localStream=yield navigator.mediaDevices.getUserMedia({video:!1,audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}}),console.log("CallService: Local media acquired",this.localStream),this.localStream.getAudioTracks().forEach(t=>{console.log("Local Track:",t.label,t.readyState,t.enabled,t.muted),t.enabled=!0})}catch(t){throw console.error("CallService: Error getting user media",t),t}})}setupPeerConnection(t){this.peerConnection=new RTCPeerConnection(this.servers),this.peerConnection.oniceconnectionstatechange=()=>{let r=this.peerConnection?.iceConnectionState;console.log("CallService: ICE Connection State Change:",r),(r==="failed"||r==="disconnected")&&console.warn("CallService: Peer connection failed/disconnected. Check firewall/network."),r==="connected"&&console.log("CallService: P2P Connection Established!")},this.peerConnection.onicecandidateerror=r=>{console.error("CallService: ICE Candidate Error:",r.errorCode,r.errorText,r.url)},this.peerConnection.onicecandidate=r=>{if(r.candidate){console.log("CallService: Generated ICE Candidate:",r.candidate.type,r.candidate.address);let i="offerCandidates";this.peerConnection?.localDescription&&this.peerConnection.localDescription.type==="answer"&&(i="answerCandidates");let o=Dn(this.db,"calls",t,i);Ca(o,r.candidate.toJSON())}},this.peerConnection.ontrack=r=>{console.log("CallService: Received remote track",r.streams[0]);let i=r.streams[0];this.remoteStream=i,this.remoteStream$.next(i)}}listenForIncomingCalls(t){this.callDocSubscription;let r=Dn(this.db,"calls"),i=ba(r,ku("conversationId","==",t),ku("status","==","offering"),wa(1));return xr(i,o=>{o.docChanges().forEach(s=>{if(s.type==="added"){let a=s.doc.data();a.id=s.doc.id,this.incomingCall$.next(a)}s.type==="removed"&&this.incomingCall$.next(null)})})}listenForAllIncomingCalls(){let t=Dn(this.db,"calls"),r=ba(t,ku("status","==","offering"),wa(1));return xr(r,i=>{i.docChanges().forEach(o=>{if(o.type==="added"){let s=o.doc.data();s.id=o.doc.id,this.incomingCall$.next(s)}o.type==="removed"&&this.incomingCall$.next(null)})})}toggleMic(t){this.localStream&&this.localStream.getAudioTracks().forEach(r=>{r.enabled=!t})}setAudioOutput(t,r){return B(this,null,function*(){if("setSinkId"in r)try{return yield r.setSinkId(t),console.log(`Audio output set to ${t}`),!0}catch(i){return console.error("Error setting audio output:",i),!1}return console.warn("setSinkId not supported in this browser."),!1})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var oF=["messagesContainer"],sF=["remoteAudio"];function aF(n,e){if(n&1){let t=te();f(0,"div",5)(1,"div",6)(2,"h2"),g(3,"\u{1F4CB} Customer Information"),h(),f(4,"p",7),g(5,"Please provide your information to use the chat"),h(),f(6,"form",8),j("ngSubmit",function(){R(t);let i=I();return k(i.registerCustomer())}),f(7,"div",9)(8,"label",10),g(9,"Full Name *"),h(),f(10,"input",11),J("ngModelChange",function(i){R(t);let o=I();return Z(o.customerInfo.name,i)||(o.customerInfo.name=i),k(i)}),h()(),f(11,"div",9)(12,"label",12),g(13,"Phone Number *"),h(),f(14,"input",13),J("ngModelChange",function(i){R(t);let o=I();return Z(o.customerInfo.phoneNumber,i)||(o.customerInfo.phoneNumber=i),k(i)}),h()(),f(15,"div",9)(16,"label",14),g(17,"Delivery Address *"),h(),f(18,"textarea",15),J("ngModelChange",function(i){R(t);let o=I();return Z(o.customerInfo.address,i)||(o.customerInfo.address=i),k(i)}),h()(),f(19,"div",9)(20,"label"),g(21,"GPS Coordinates"),h(),f(22,"div",16)(23,"input",17),J("ngModelChange",function(i){R(t);let o=I();return Z(o.customerInfo.gpsCoordinates,i)||(o.customerInfo.gpsCoordinates=i),k(i)}),h(),f(24,"button",18),j("click",function(){R(t);let i=I();return k(i.getLocation())}),g(25,"\u{1F4CD}"),h()()(),f(26,"button",19),g(27," Start Chat "),h()()()()}if(n&2){let t=I();v(10),Y("ngModel",t.customerInfo.name),v(4),Y("ngModel",t.customerInfo.phoneNumber),v(4),Y("ngModel",t.customerInfo.address),D("readonly",t.isLocationReadOnly),v(5),Y("ngModel",t.customerInfo.gpsCoordinates),D("readonly",t.isLocationReadOnly)}}function cF(n,e){if(n&1&&(f(0,"div",50),g(1),h()),n&2){let t=I().$implicit,r=I(3);v(),H(r.unreadCounts[t])}}function lF(n,e){if(n&1){let t=te();f(0,"div",44),j("click",function(){let i=R(t).$implicit,o=I(3);return k(o.selectConversation(i))}),f(1,"div",45),g(2),h(),f(3,"div",46)(4,"span",47),g(5),h(),f(6,"span",48),g(7,"Click to view chat"),h()(),U(8,cF,2,1,"div",49),h()}if(n&2){let t=e.$implicit,r=I(3);_e("active",r.currentConversationId===t),v(2),H(r.getDisplayName(t).charAt(0).toUpperCase()),v(3),H(r.getDisplayName(t)),v(3),D("ngIf",r.unreadCounts[t]>0)}}function uF(n,e){n&1&&(f(0,"div",51),g(1," No conversations yet. "),h())}function dF(n,e){if(n&1&&(f(0,"div",40)(1,"div",41),g(2," Conversations "),h(),f(3,"div",42),U(4,lF,9,5,"div",43)(5,uF,2,0,"div",34),h()()),n&2){let t=I(2);v(4),D("ngForOf",t.conversations),v(),D("ngIf",t.conversations.length===0)}}function hF(n,e){if(n&1&&(f(0,"div"),g(1),h()),n&2){let t=I(3);v(),q("\u{1F4CD} ",t.getUserAddress(t.currentConversationId),"")}}function fF(n,e){if(n&1&&(f(0,"a",55),g(1),h()),n&2){let t=I(3);D("href","https://www.google.com/maps/search/?api=1&query="+t.getUserGps(t.currentConversationId),yn),v(),q(" \u{1F30D} ",t.getUserGps(t.currentConversationId)," ")}}function pF(n,e){if(n&1&&(f(0,"div",52),U(1,hF,2,1,"div",53)(2,fF,2,2,"a",54),h()),n&2){let t=I(2);v(),D("ngIf",t.getUserAddress(t.currentConversationId)),v(),D("ngIf",t.getUserGps(t.currentConversationId))}}function mF(n,e){if(n&1){let t=te();f(0,"button",56),j("click",function(){R(t);let i=I(2);return k(i.logout())}),g(1," \u{1F6AA} "),h()}}function gF(n,e){if(n&1){let t=te();f(0,"div",57)(1,"div",58)(2,"h3"),g(3,"\u{1F4DE} Incoming Call"),h(),f(4,"p"),g(5),h(),f(6,"div",59)(7,"button",60),j("click",function(){R(t);let i=I(2);return k(i.acceptCall())}),g(8,"Accept"),h(),f(9,"button",61),j("click",function(){R(t);let i=I(2);return k(i.rejectCall())}),g(10,"Reject"),h()()()()}if(n&2){let t=I(2);v(5),q("",t.incomingCall.callerName," is calling...")}}function yF(n,e){if(n&1){let t=te();f(0,"button",72),j("click",function(){R(t);let i=I(3);return k(i.toggleMic())}),g(1),h()}if(n&2){let t=I(3);_e("active",t.isMicMuted),v(),q(" ",t.isMicMuted?"\u{1F507}":"\u{1F399}\uFE0F"," ")}}function vF(n,e){if(n&1){let t=te();f(0,"div",62)(1,"div",58)(2,"div",63),g(3,"\u{1F464}"),h(),f(4,"h3"),g(5),h(),f(6,"p"),g(7),h(),f(8,"div",64),xe(9,"audio",65,1),h(),f(11,"div",66),xe(12,"div",67),h(),f(13,"div",68)(14,"button",69),j("click",function(){R(t);let i=I(2);return k(i.toggleSpeaker())}),g(15),h(),U(16,yF,2,3,"button",70),h(),f(17,"div",59)(18,"button",71),j("click",function(){R(t);let i=I(2);return k(i.endCall())}),g(19,"End Call"),h()()()()}if(n&2){let t=I(2);v(5),H(t.callStatus==="calling"?"Calling...":"Connected"),v(2),H(t.isAppUser?t.currentConversationId:"Support"),v(2),D("srcObject",t.remoteStream),v(3),_n("width",t.audioLevel,"%"),v(2),_e("active",t.isSpeakerOn),v(),q(" ",t.isSpeakerOn?"\u{1F50A}":"\u{1F508}"," "),v(),D("ngIf",t.isAppUser)}}function _F(n,e){if(n&1&&(f(0,"div",51),g(1),h()),n&2){let t=I(2);v(),q(" ",t.isAppUser&&!t.currentConversationId?"Select a conversation to start chatting.":"No messages yet. Start the conversation!"," ")}}function bF(n,e){if(n&1&&(f(0,"span",83),g(1),h()),n&2){let t=I().$implicit,r=I(2);v(),q(" \u{1F4CD} ",r.getUserAddress(t.senderName)," ")}}function wF(n,e){if(n&1&&(f(0,"a",84),g(1),h()),n&2){let t=I().$implicit,r=I(2);D("href","https://www.google.com/maps/search/?api=1&query="+r.getUserGps(t.senderName),yn),v(),q(" \u{1F30D} ",r.getUserGps(t.senderName)," ")}}function CF(n,e){if(n&1&&(f(0,"div",85),g(1),h()),n&2){let t=I().$implicit;v(),H(t.text)}}function xF(n,e){if(n&1&&(f(0,"div",86),xe(1,"audio",87),h()),n&2){let t=I().$implicit;v(),D("src",t.audioBase64,yn)}}function EF(n,e){if(n&1){let t=te();f(0,"button",88),j("click",function(){R(t);let i=I().$implicit,o=I(2);return k(o.deleteMessage(i))}),g(1," \u{1F5D1}\uFE0F "),h()}}function IF(n,e){if(n&1&&(f(0,"div",73)(1,"div",74)(2,"span",75),g(3),h(),f(4,"div",76),U(5,bF,2,1,"span",77)(6,wF,2,2,"a",78),f(7,"span",79),g(8),h()()(),U(9,CF,2,1,"div",80)(10,xF,2,1,"div",81)(11,EF,2,0,"button",82),h()),n&2){let t=e.$implicit,r=I(2);_e("my-message",r.isMyMessage(t))("other-message",!r.isMyMessage(t)),v(3),H(t.senderName),v(2),D("ngIf",!r.isMyMessage(t)&&r.getUserAddress(t.senderName)),v(),D("ngIf",!r.isMyMessage(t)&&r.getUserGps(t.senderName)),v(2),H(r.formatTime(t.timestamp)),v(),D("ngIf",t.text),v(),D("ngIf",t.audioBase64),v(),D("ngIf",r.isMyMessage(t))}}function DF(n,e){if(n&1){let t=te();f(0,"div",20),U(1,dF,6,2,"div",21),f(2,"div",22)(3,"div",23)(4,"div",24)(5,"h2"),g(6),h(),U(7,pF,3,2,"div",25),f(8,"div",26)(9,"span",27),g(10),h(),f(11,"button",28),j("click",function(){R(t);let i=I();return k(i.changeInfo())}),g(12," \u270F\uFE0F "),h(),U(13,mF,2,0,"button",29),f(14,"button",30),j("click",function(){R(t);let i=I();return k(i.startCall())}),g(15," \u{1F4DE} "),h()()()(),U(16,gF,11,1,"div",31)(17,vF,20,9,"div",32),f(18,"div",33,0),U(20,_F,2,1,"div",34)(21,IF,12,11,"div",35),h(),f(22,"div",36)(23,"input",37),J("ngModelChange",function(i){R(t);let o=I();return Z(o.newMessage,i)||(o.newMessage=i),k(i)}),j("keyup.enter",function(){R(t);let i=I();return k(i.sendMessage())}),h(),f(24,"button",38),j("click",function(){R(t);let i=I();return k(i.sendMessage())}),g(25," Send "),h(),f(26,"button",39),j("mousedown",function(i){R(t);let o=I();return k(o.startRecording(i))})("mouseup",function(i){R(t);let o=I();return k(o.stopRecording(i))})("mouseleave",function(i){R(t);let o=I();return k(o.stopRecording(i))})("touchstart",function(i){R(t);let o=I();return k(o.startRecording(i))})("touchend",function(i){R(t);let o=I();return k(o.stopRecording(i))}),g(27),h()()()()}if(n&2){let t=I();v(),D("ngIf",t.isAppUser),v(5),q(" \u{1F4AC} ",t.isAppUser&&t.currentConversationId?"Chat with "+t.getDisplayName(t.currentConversationId):"Customer Support Chat"," "),v(),D("ngIf",t.isAppUser&&t.currentConversationId),v(3),H(t.senderName),v(3),D("ngIf",!t.isAppUser),v(),D("disabled",t.isAppUser&&!t.currentConversationId),v(2),D("ngIf",t.callStatus==="incoming"&&t.incomingCall),v(),D("ngIf",t.callStatus==="connected"||t.callStatus==="calling"),v(3),D("ngIf",t.messages.length===0),v(),D("ngForOf",t.messages),v(2),Y("ngModel",t.newMessage),D("disabled",t.isAppUser&&!t.currentConversationId),v(),D("disabled",!t.newMessage.trim()||t.isAppUser&&!t.currentConversationId),v(2),_e("recording",t.isRecording),D("disabled",t.isAppUser&&!t.currentConversationId),v(),q(" ",t.isRecording?"\u{1F534}":"\u{1F399}\uFE0F"," ")}}var PE=(()=>{class n{constructor(t,r,i,o){this.chatService=t,this.customerService=r,this.userService=i,this.callService=o,this.messages=[],this.newMessage="",this.senderName="",this.isOpen=!1,this.totalUnreadCountChange=new jt,this.isLocationReadOnly=!0,this.shouldScroll=!1,this.userNamesCache=new Map,this.userAddressesCache=new Map,this.userGpsCache=new Map,this.isRegistered=!1,this.customerInfo={name:"",phoneNumber:"",address:"N/A",gpsCoordinates:"N/A"},this.allCustomers=[],this.errorMessage="",this.isAppUser=!1,this.currentConversationId="",this.conversations=[],this.callStatus="idle",this.incomingCall=null,this.remoteStream=null,this.notificationAudioContext=null,this.audioUnlocked=!1,this.allMessagesCached=[],this.unreadCounts={},this.conversationMessageCounts={},this.isSpeakerOn=!1,this.isMicMuted=!1,this.audioLevel=0,this.audioContext=null,this.analyser=null,this.source=null,this.dataArray=null,this.animationFrameId=null,this.ringInterval=null,this.isRecording=!1,this.mediaRecorder=null,this.audioChunks=[],this.requestNotificationPermission()}ngOnChanges(t){t.isOpen&&this.isOpen&&(this.updateFilteredMessages(!1),this.shouldScroll=!0)}requestNotificationPermission(){"Notification"in window&&Notification.requestPermission()}onVisibilityChange(){document.hidden||(document.title="JJM Inventory")}unlockAudioContext(){if(this.audioUnlocked)return;if(!this.notificationAudioContext){let r=window.AudioContext||window.webkitAudioContext;this.notificationAudioContext=new r}let t=this.notificationAudioContext;if(t){t.state==="suspended"&&t.resume();try{let r=t.createBuffer(1,1,22050),i=t.createBufferSource();i.buffer=r,i.connect(t.destination),i.start(0),this.audioUnlocked=!0,console.log("ChatComponent: AudioContext unlocked via user interaction.")}catch(r){console.error("ChatComponent: Failed to unlock audio",r)}}}onUserInteraction(){this.unlockAudioContext()}ngOnInit(){this.customerSubscription=this.customerService.getCustomers().subscribe({next:t=>{this.allCustomers=t,this.checkLoginAndStatus()},error:t=>{console.error("Failed to load customers",t),this.checkLoginAndStatus()}}),this.logoutSubscription=this.chatService.logout$.subscribe(()=>{this.performForceLogout()}),this.callStatusSubscription=this.callService.callStatus$.subscribe(t=>{this.callStatus=t,t!=="incoming"&&this.stopRinging()}),this.incomingCallSubscription=this.callService.incomingCall$.subscribe(t=>{if(!t){this.callStatus==="incoming"&&(this.incomingCall=null,this.callStatus="idle",this.stopRinging());return}this.callStatus==="idle"&&t.callerName!==this.senderName&&(this.incomingCall=t,this.callStatus="incoming",this.startRinging())}),this.callService.remoteStream$.subscribe(t=>{this.remoteStream=t,t&&this.remoteAudio&&setTimeout(()=>{let r=this.remoteAudio.nativeElement;r.srcObject=t,r.muted=!1,r.volume=1;let i=t.getAudioTracks();i.length>0?(console.log("ChatComponent: Audio track found",i[0].label,"Enabled:",i[0].enabled,"Muted:",i[0].muted),i[0].enabled=!0):console.warn("ChatComponent: No audio tracks in stream!"),r.onloadedmetadata=()=>{console.log("ChatComponent: Audio metadata loaded, attempting play..."),r.play().then(()=>{console.log("ChatComponent: Audio playing successfully"),this.setupAudioVisualizer(t)}).catch(o=>console.error("ChatComponent: Error playing audio:",o))}},100)})}performForceLogout(){localStorage.removeItem("chatCustomerInfo"),localStorage.removeItem("chatUserName"),this.isRegistered=!1,this.isAppUser=!1,this.senderName="",this.conversations=[],this.currentConversationId="",this.customerInfo={name:"",phoneNumber:"",address:"N/A",gpsCoordinates:"N/A"},this.messages=[]}checkLoginAndStatus(){let t=localStorage.getItem("jjm_logged_in")==="true",r=localStorage.getItem("jjm_username"),i=localStorage.getItem("jjm_user_id");if(t){if(this.isAppUser=!0,this.isRegistered=!0,this.errorMessage="",this.senderName=r||"User",this.loadMessages(),this.incomingCallListener&&this.incomingCallListener(),this.incomingCallListener=this.callService.listenForAllIncomingCalls(),i){let s=this.userService.getUserById(i);s?this.senderName=s.fullName||s.username:this.userService.users$.pipe(si(1)).subscribe(a=>{let l=a.find(u=>u.id===i);l&&(this.senderName=l.fullName||l.username)})}return}let o=localStorage.getItem("chatCustomerInfo");if(o){let s=JSON.parse(o);this.allCustomers.find(l=>l.name.toLowerCase()===s.name.toLowerCase())?(this.customerInfo=s,this.senderName=this.customerInfo.name,this.isRegistered=!0,this.loadMessages(),this.incomingCallListener&&this.incomingCallListener(),this.incomingCallListener=this.callService.listenForIncomingCalls(this.senderName)):(localStorage.removeItem("chatCustomerInfo"),localStorage.removeItem("chatUserName"),this.isRegistered=!1,this.getLocation(!0))}else this.getLocation(!0)}ngAfterViewChecked(){this.shouldScroll&&(this.scrollToBottom(),this.shouldScroll=!1)}ngOnDestroy(){this.customerSubscription&&this.customerSubscription.unsubscribe(),this.logoutSubscription&&this.logoutSubscription.unsubscribe(),this.incomingCallSubscription&&this.incomingCallSubscription.unsubscribe(),this.callStatusSubscription&&this.callStatusSubscription.unsubscribe(),this.incomingCallListener&&this.incomingCallListener()}registerCustomer(){if(this.errorMessage="",!this.customerInfo.name.trim()){alert("Please enter your name");return}if(!this.customerInfo.phoneNumber.trim()){alert("Please enter your phone number");return}if(!this.customerInfo.address.trim()){alert("Please enter your address");return}if(!/^[\d\s\-\+\(\)]+$/.test(this.customerInfo.phoneNumber)){alert("Please enter a valid phone number");return}if(this.allCustomers.length>0){if(!this.allCustomers.find(i=>i.name.toLowerCase()===this.customerInfo.name.trim().toLowerCase())){alert("Access Denied: You must be a registered customer to use the chat.");return}}else console.warn("Customer verification skipped: Customer list is empty or failed to load.");localStorage.setItem("chatCustomerInfo",JSON.stringify(this.customerInfo)),localStorage.setItem("chatUserName",this.customerInfo.name),this.senderName=this.customerInfo.name,this.isRegistered=!0,this.isRegistered=!0,this.loadMessages(),this.callService.listenForIncomingCalls(this.senderName)}notifyUser(t){this.isMyMessage(t)||(this.playNotificationSound(),document.hidden&&"Notification"in window&&Notification.permission==="granted"&&(new Notification("New Message",{body:t.text||"You received a new audio message",icon:"/assets/icons/icon-72x72.png"}),document.title=`New Message from ${t.senderName}`))}loadMessages(){if(this.messagesSubscription){this.updateFilteredMessages(!1);return}this.messagesSubscription=this.chatService.getMessages().subscribe({next:t=>{if(this.allMessagesCached=t,this.isAppUser){let i=new Map,o=new Set,s=new Map;t.forEach(a=>{a.conversationId&&(o.add(a.conversationId),i.set(a.conversationId,(i.get(a.conversationId)||0)+1),s.set(a.conversationId,a))}),this.conversations=Array.from(o),this.userService.users$.pipe(si(1)).subscribe(a=>{this.conversations.forEach(l=>{if(!this.userNamesCache.has(l)||!this.userAddressesCache.get(l)||!this.userGpsCache.get(l)){let u=a.find(p=>p.username===l||p.fullName===l||p.id===l);if(u)this.userNamesCache.set(l,u.fullName||u.username),this.userAddressesCache.set(l,u.address||""),this.userGpsCache.set(l,u.gpsCoordinates||"");else{let p=this.allCustomers.find(y=>y.name===l);p?(this.userNamesCache.set(l,p.name),this.userAddressesCache.set(l,p.deliveryAddress),this.userGpsCache.set(l,p.gpsCoordinates||"")):this.userNamesCache.set(l,l)}}})}),this.conversations.forEach(a=>{let l=i.get(a)||0,u=this.conversationMessageCounts[a]||0;if(this.unreadCounts[a]=t.filter(p=>p.conversationId===a&&!p.isRead&&!this.isMyMessage(p)).length,l>u){let p=s.get(a);p&&this.notifyUser(p)}this.conversationMessageCounts[a]=l})}let r=0;this.isAppUser?r=Object.values(this.unreadCounts).reduce((i,o)=>i+o,0):r=t.filter(i=>!i.isRead&&!this.isMyMessage(i)).length,this.totalUnreadCountChange.emit(r),this.updateFilteredMessages(!this.isAppUser)},error:t=>{console.error("Error loading messages:",t)}})}getDisplayName(t){return this.userNamesCache.get(t)||t}getUserAddress(t){return this.userAddressesCache.get(t)||""}getUserGps(t){return this.userGpsCache.get(t)||""}updateFilteredMessages(t){let r=this.isAppUser?this.currentConversationId:this.senderName,i=this.allMessagesCached.filter(l=>r?l.conversationId===r:!1),o=this.messages.length,s=i.length,a=o>0;if(this.messages=i,this.isOpen&&r){let l=i.filter(u=>!u.isRead&&!this.isMyMessage(u)).map(u=>u.id);l.length>0&&this.chatService.markAsRead(l)}if(t&&a&&s>o){let l=i[s-1];this.isMyMessage(l)||(this.playNotificationSound(),document.hidden&&"Notification"in window&&Notification.permission==="granted"&&(new Notification("New Message",{body:l.text||"You received a new audio message",icon:"/assets/icons/icon-72x72.png"}),document.title=`(${s-o}) New Message - JJM Inventory`))}(!a||s>o)&&(this.shouldScroll=!0,setTimeout(()=>this.scrollToBottom(),100))}playNotificationSound(){try{let t=this.notificationAudioContext;if(!t){let a=window.AudioContext||window.webkitAudioContext;a&&(t=new a)}if(!t)return;t.state==="suspended"&&t.resume().catch(a=>console.warn("Could not resume audio context",a));let r=t.currentTime,i=t.createOscillator(),o=t.createOscillator(),s=t.createGain();i.type="sine",o.type="sine",i.frequency.setValueAtTime(1200,r),o.frequency.setValueAtTime(2400,r),i.connect(s),o.connect(s),s.connect(t.destination),s.gain.setValueAtTime(0,r),s.gain.linearRampToValueAtTime(.5,r+.02),s.gain.exponentialRampToValueAtTime(.01,r+.6),i.start(r),o.start(r),i.stop(r+.6),o.stop(r+.6)}catch(t){console.warn("Audio playback failed",t)}}startRinging(){if(this.ringInterval)return;let t=()=>{try{let r=window.AudioContext||window.webkitAudioContext,i=new r,o=i.createOscillator(),s=i.createOscillator(),a=i.createGain();o.connect(a),s.connect(a),a.connect(i.destination),o.frequency.value=440,s.frequency.value=480,a.gain.setValueAtTime(0,i.currentTime),a.gain.linearRampToValueAtTime(.5,i.currentTime+.1),a.gain.setValueAtTime(.5,i.currentTime+1.8),a.gain.linearRampToValueAtTime(0,i.currentTime+2),o.start(i.currentTime),s.start(i.currentTime),o.stop(i.currentTime+2),s.stop(i.currentTime+2),setTimeout(()=>{i.state!=="closed"&&i.close()},2500)}catch(r){console.warn("Ring playback failed",r)}};t(),this.ringInterval=setInterval(t,4e3)}stopRinging(){this.ringInterval&&(clearInterval(this.ringInterval),this.ringInterval=null)}sendMessage(){if(!this.newMessage.trim())return;let t=this.isAppUser?this.currentConversationId:this.senderName;if(this.isAppUser&&!t){alert("Please select a conversation first.");return}this.chatService.sendMessage(this.newMessage,this.senderName,t).then(()=>{this.newMessage="",this.shouldScroll=!0}).catch(r=>{console.error("Error sending message:",r),alert("Failed to send message. Please try again.")})}getLocation(t=!1){"geolocation"in navigator?navigator.geolocation.getCurrentPosition(r=>{let i=r.coords.latitude,o=r.coords.longitude;this.customerInfo.gpsCoordinates=`${i.toFixed(6)}, ${o.toFixed(6)}`,this.customerInfo.address||this.fetchAddressFromGps(i,o)},r=>{console.error("Error getting location",r),t||(this.isLocationReadOnly=!1,alert("Unable to retrieve location. Please enter manually."))}):t||(this.isLocationReadOnly=!1,alert("Geolocation is not supported by your browser."))}fetchAddressFromGps(t,r){return B(this,null,function*(){try{let i=yield fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${t}&lon=${r}`);if(i.ok){let o=yield i.json();o.display_name&&(this.customerInfo.address=o.display_name)}}catch(i){console.warn("Failed to reverse geocode",i)}})}selectConversation(t){this.currentConversationId=t,this.unreadCounts[t]=0,this.updateFilteredMessages(!1)}scrollToBottom(){if(this.messagesContainer)try{this.messagesContainer.nativeElement.scrollTop=this.messagesContainer.nativeElement.scrollHeight}catch(t){console.error("Scroll error:",t)}}formatTime(t){return new Date(t).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})}isMyMessage(t){let r=localStorage.getItem("jjm_user_id");return this.isAppUser&&r&&t.userId===r?!0:t.senderName===this.senderName}changeInfo(){alert("Do you want to update your customer information?"),this.isRegistered=!1}startRecording(t){t&&(t.preventDefault(),t.stopPropagation()),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!0}).then(r=>{this.mediaRecorder=new MediaRecorder(r),this.mediaRecorder.start(),this.isRecording=!0,this.audioChunks=[],this.mediaRecorder.addEventListener("dataavailable",i=>{i.data.size>0&&this.audioChunks.push(i.data)}),this.mediaRecorder.addEventListener("stop",()=>{let i=new Blob(this.audioChunks,{type:"audio/webm"}),o=new FileReader;o.readAsDataURL(i),o.onloadend=()=>{let s=o.result;s&&this.sendAudio(s)},r.getTracks().forEach(s=>s.stop())})}).catch(r=>{console.error("Error accessing microphone:",r),alert("Could not access microphone. Please allow permissions."),this.isRecording=!1}):alert("Audio recording is not supported in this browser.")}stopRecording(t){t&&(t.preventDefault(),t.stopPropagation()),this.mediaRecorder&&this.isRecording&&(this.mediaRecorder.stop(),this.isRecording=!1)}cancelRecording(){this.mediaRecorder&&this.isRecording&&this.stopRecording()}sendAudio(t){let r=this.isAppUser?this.currentConversationId:this.senderName;if(this.isAppUser&&!r){alert("Please select a conversation first.");return}this.chatService.sendAudioMessage(t,this.senderName,r).then(()=>{this.shouldScroll=!0}).catch(i=>{console.error("Error sending audio message:",i),alert("Failed to send audio message.")})}deleteMessage(t){this.isMyMessage(t)&&confirm("Are you sure you want to delete this message?")&&this.chatService.deleteMessage(t.id).catch(r=>{console.error("Error deleting message:",r),alert("Failed to delete message.")})}logout(){if(this.isAppUser){alert("You cannot logout of chat while logged into the application.");return}confirm("Are you sure you want to logout? Your information will be cleared.")&&(localStorage.removeItem("chatCustomerInfo"),localStorage.removeItem("chatUserName"),this.isRegistered=!1,this.customerInfo={name:"",phoneNumber:"",address:""},this.messages=[])}startCall(){let t=this.isAppUser?this.currentConversationId:this.senderName;if(!t){alert("Cannot start call: Unknown conversation.");return}this.callService.initializeCall(t,this.senderName)}acceptCall(){this.incomingCall&&(this.callService.answerCall(this.incomingCall),this.incomingCall=null)}rejectCall(){this.incomingCall&&(this.callService.rejectCall(this.incomingCall.id),this.incomingCall=null,this.callStatus="idle",this.stopRinging())}endCall(){this.callService.endCall(),this.isSpeakerOn=!1,this.isMicMuted=!1,this.cleanupAudioVisualizer()}setupAudioVisualizer(t){this.cleanupAudioVisualizer();try{let r=window.AudioContext||window.webkitAudioContext;this.audioContext=new r,this.audioContext.state==="suspended"&&(console.log("ChatComponent: AudioContext suspended. Attempting to resume..."),this.audioContext.resume().then(()=>console.log("ChatComponent: AudioContext resumed!"))),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=64,this.source=this.audioContext.createMediaStreamSource(t),this.source.connect(this.analyser),this.dataArray=new Uint8Array(this.analyser.frequencyBinCount);let i=()=>{if(!this.analyser||!this.dataArray)return;this.analyser.getByteFrequencyData(this.dataArray);let o=0;for(let a=0;a<this.dataArray.length;a++)o+=this.dataArray[a];let s=o/this.dataArray.length;this.audioLevel=Math.min(100,Math.max(0,s/255*300)),this.animationFrameId=requestAnimationFrame(i)};i()}catch(r){console.error("Error setting up visualizer",r)}}cleanupAudioVisualizer(){this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),this.source&&(this.source.disconnect(),this.source=null),this.audioContext&&(this.audioContext.close().catch(()=>{}),this.audioContext=null),this.audioLevel=0}toggleSpeaker(){return B(this,null,function*(){if(this.isSpeakerOn=!this.isSpeakerOn,this.remoteAudio&&this.remoteAudio.nativeElement){let r=(yield navigator.mediaDevices.enumerateDevices()).filter(i=>i.kind==="audiooutput");if(r.length>1&&this.isSpeakerOn){let i=r[0].deviceId==="default"?r[1].deviceId:r[0].deviceId;yield this.callService.setAudioOutput(i,this.remoteAudio.nativeElement)}else yield this.callService.setAudioOutput("default",this.remoteAudio.nativeElement)}})}toggleMic(){this.isMicMuted=!this.isMicMuted,this.callService.toggleMic(this.isMicMuted)}static{this.\u0275fac=function(r){return new(r||n)(K(Vu),K(go),K(yo),K(TE))}}static{this.\u0275cmp=Ve({type:n,selectors:[["app-chat"]],viewQuery:function(r,i){if(r&1&&(_f(oF,5),_f(sF,5)),r&2){let o;bf(o=wf())&&(i.messagesContainer=o.first),bf(o=wf())&&(i.remoteAudio=o.first)}},hostBindings:function(r,i){r&1&&j("visibilitychange",function(){return i.onVisibilityChange()},!1,Is)("click",function(){return i.onUserInteraction()},!1,Is)("touchstart",function(){return i.onUserInteraction()},!1,Is)("keydown",function(){return i.onUserInteraction()},!1,Is)},inputs:{isOpen:"isOpen"},outputs:{totalUnreadCountChange:"totalUnreadCountChange"},standalone:!0,features:[Ci,Le],decls:3,vars:2,consts:[["messagesContainer",""],["remoteAudio",""],[1,"chat-container"],["class","registration-container",4,"ngIf"],["class","chat-wrapper",4,"ngIf"],[1,"registration-container"],[1,"registration-card"],[1,"registration-subtitle"],[1,"registration-form",3,"ngSubmit"],[1,"form-group"],["for","customerName"],["type","text","id","customerName","name","customerName","placeholder","Enter your full name","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","phoneNumber"],["type","tel","id","phoneNumber","name","phoneNumber","placeholder","e.g., +1 234 567 8900","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","address"],["id","address","name","address","placeholder","Address will be detected automatically...","rows","3","required","",1,"form-textarea",3,"ngModelChange","ngModel","readonly"],[2,"display","flex","gap","8px"],["type","text","name","gpsCoordinates","placeholder","Lat, Lng (Auto-detected)",1,"form-input",3,"ngModelChange","ngModel","readonly"],["type","button",1,"btn-location",3,"click"],["type","submit",1,"btn-register"],[1,"chat-wrapper"],["class","chat-sidebar",4,"ngIf"],[1,"chat-main-area"],[1,"chat-header"],[1,"header-content"],["class","header-details-subtitle",4,"ngIf"],[1,"user-info"],[1,"user-name"],["title","Edit information",1,"btn-edit",3,"click"],["class","btn-logout","title","Logout",3,"click",4,"ngIf"],["title","Start Audio Call",1,"btn-call",3,"click","disabled"],["class","call-overlay incoming",4,"ngIf"],["class","call-overlay active",4,"ngIf"],[1,"messages-container"],["class","no-messages",4,"ngIf"],["class","message",3,"my-message","other-message",4,"ngFor","ngForOf"],[1,"input-container"],["type","text","placeholder","Type a message...",1,"message-input",3,"ngModelChange","keyup.enter","ngModel","disabled"],[1,"btn-send",3,"click","disabled"],["title","Hold to talk",1,"btn-mic",3,"mousedown","mouseup","mouseleave","touchstart","touchend","disabled"],[1,"chat-sidebar"],[1,"sidebar-header"],[1,"conversation-list"],["class","conversation-item",3,"active","click",4,"ngFor","ngForOf"],[1,"conversation-item",3,"click"],[1,"conv-avatar"],[1,"conv-info"],[1,"conversation-name"],[1,"conversation-preview"],["class","active-indicator",4,"ngIf"],[1,"active-indicator"],[1,"no-messages"],[1,"header-details-subtitle"],[4,"ngIf"],["target","_blank","style","color: inherit; text-decoration: none; display: flex; align-items: center; gap: 4px;",3,"href",4,"ngIf"],["target","_blank",2,"color","inherit","text-decoration","none","display","flex","align-items","center","gap","4px",3,"href"],["title","Logout",1,"btn-logout",3,"click"],[1,"call-overlay","incoming"],[1,"call-content"],[1,"call-actions"],[1,"btn-accept",3,"click"],[1,"btn-reject",3,"click"],[1,"call-overlay","active"],[1,"call-avatar","pulsing"],[2,"opacity","0","height","0","width","0","overflow","hidden","position","absolute","pointer-events","none"],["autoplay","","playsinline","","controls","",3,"srcObject"],["title","Audio Signal Strength",1,"volume-meter"],[1,"volume-bar"],[1,"call-utilities"],["title","Toggle Speaker",1,"btn-round",3,"click"],["class","btn-round","title","Toggle Microphone",3,"active","click",4,"ngIf"],[1,"btn-end",3,"click"],["title","Toggle Microphone",1,"btn-round",3,"click"],[1,"message"],[1,"message-header"],[1,"sender-name"],[1,"message-meta"],["class","message-address",4,"ngIf"],["class","message-address gps-link","target","_blank","title","View on Google Maps",3,"href",4,"ngIf"],[1,"message-time"],["class","message-text",4,"ngIf"],["class","message-audio",4,"ngIf"],["class","btn-delete-msg","title","Delete message",3,"click",4,"ngIf"],[1,"message-address"],["target","_blank","title","View on Google Maps",1,"message-address","gps-link",3,"href"],[1,"message-text"],[1,"message-audio"],["controls","",3,"src"],["title","Delete message",1,"btn-delete-msg",3,"click"]],template:function(r,i){r&1&&(f(0,"div",2),U(1,aF,28,6,"div",3)(2,DF,28,17,"div",4),h()),r&2&&(v(),D("ngIf",!i.isRegistered),v(),D("ngIf",i.isRegistered))},dependencies:[ke,tt,Ke,it,Un,nt,rt,Bn,Wt,Ze,Cn],styles:[".chat-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;background:var(--color-surface);overflow:hidden}.registration-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;padding:var(--space-lg);background:linear-gradient(135deg,#3b82f60d,#9333ea0d);overflow-y:auto;scroll-behavior:smooth}.registration-card[_ngcontent-%COMP%]{background:var(--color-surface);border-radius:var(--radius-lg);padding:var(--space-xl);max-width:500px;width:100%;box-shadow:0 10px 25px #0000001a;animation:_ngcontent-%COMP%_fadeInUp .5s ease-out}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.registration-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 var(--space-sm) 0;font-size:1.875rem;font-weight:700;text-align:center;background:linear-gradient(135deg,var(--color-primary),var(--color-accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.registration-subtitle[_ngcontent-%COMP%]{text-align:center;color:var(--color-text-muted);margin-bottom:var(--space-xl);font-size:.9375rem}.registration-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xs)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;font-size:.9375rem;color:var(--color-text)}.form-input[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{padding:.75rem 1rem;border:2px solid var(--color-border);border-radius:var(--radius-md);font-size:.9375rem;font-family:inherit;background:var(--color-bg);color:var(--color-text);transition:all .2s}.form-input[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f61a}.form-textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.btn-register[_ngcontent-%COMP%]{margin-top:var(--space-md);padding:.875rem 1.5rem;background:linear-gradient(135deg,var(--color-primary),var(--color-accent));color:#fff;border:none;border-radius:var(--radius-md);font-weight:600;font-size:1rem;cursor:pointer;transition:all .3s;box-shadow:0 4px 12px #3b82f64d}.btn-register[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 16px #3b82f666}.btn-register[_ngcontent-%COMP%]:active{transform:translateY(0)}.active-indicator[_ngcontent-%COMP%]{background-color:#ef4444;color:#fff;min-width:22px;height:22px;border-radius:11px;display:flex;align-items:center;justify-content:center;font-size:.75rem;font-weight:700;padding:0 6px;box-shadow:0 2px 5px #ef444466;animation:_ngcontent-%COMP%_bounceIn .3s cubic-bezier(.175,.885,.32,1.275)}@keyframes _ngcontent-%COMP%_bounceIn{0%{transform:scale(0);opacity:0}60%{transform:scale(1.2)}to{transform:scale(1);opacity:1}}.chat-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:100%}.chat-sidebar[_ngcontent-%COMP%]{width:280px;background:var(--color-surface);border-right:1px solid var(--color-border);display:flex;flex-direction:column}.chat-main-area[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;height:100%;position:relative}.sidebar-header[_ngcontent-%COMP%]{padding:var(--space-md);border-bottom:1px solid var(--color-border);font-weight:600;background:var(--color-bg)}.conversation-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:12px;display:flex;flex-direction:column;gap:8px}.conversation-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:10px 15px;border-radius:16px;background:#ffffff08;border:1px solid transparent;cursor:pointer;transition:all .2s cubic-bezier(.4,0,.2,1);margin-bottom:0}.conversation-item[_ngcontent-%COMP%]:hover{background:#ffffff14;transform:translateY(-1px);box-shadow:0 4px 12px #0000000d}.conversation-item.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-primary),var(--color-accent));border-color:transparent;box-shadow:0 4px 15px #3b82f64d}.conv-avatar[_ngcontent-%COMP%]{width:42px;height:42px;border-radius:50%;background:linear-gradient(135deg,#e0e7ff,#c7d2fe);color:#4f46e5;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1.1rem;flex-shrink:0;box-shadow:0 2px 5px #0000001a;transition:all .2s}.conversation-item.active[_ngcontent-%COMP%]   .conv-avatar[_ngcontent-%COMP%]{background:#fff;color:var(--color-primary);transform:scale(1.05)}.conv-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow:hidden;flex:1}.conversation-name[_ngcontent-%COMP%]{font-weight:600;font-size:.95rem;color:var(--color-text);margin-bottom:2px;transition:color .2s}.conversation-preview[_ngcontent-%COMP%]{font-size:.8rem;color:var(--color-text-muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;transition:color .2s}.conversation-item.active[_ngcontent-%COMP%]   .conversation-name[_ngcontent-%COMP%]{color:#fff}.conversation-item.active[_ngcontent-%COMP%]   .conversation-preview[_ngcontent-%COMP%]{color:#ffffffe6}.chat-header[_ngcontent-%COMP%]{padding:var(--space-lg);padding-bottom:2rem;background:linear-gradient(135deg,var(--color-primary),var(--color-accent));color:#fff;border-bottom:2px solid var(--color-border);position:relative;z-index:10;flex-shrink:0}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:var(--space-md)}.chat-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:600}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);position:relative;z-index:20}.user-name[_ngcontent-%COMP%]{font-weight:500;padding:.5rem 1rem;background:#fff3;border-radius:20px;font-size:.9375rem}.btn-edit[_ngcontent-%COMP%], .btn-logout[_ngcontent-%COMP%]{background:#ffffff4d;border:2px solid rgba(255,255,255,.5);padding:.625rem;border-radius:50%;cursor:pointer;font-size:1.125rem;transition:all .2s;line-height:1;position:relative;z-index:30;pointer-events:auto;color:#fff;min-width:36px;min-height:36px;display:flex;align-items:center;justify-content:center}.btn-edit[_ngcontent-%COMP%]:hover, .btn-logout[_ngcontent-%COMP%]:hover{background:#ffffff80;transform:scale(1.15);border-color:#fff}.messages-container[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:var(--space-lg);background:var(--color-bg);display:flex;flex-direction:column;gap:var(--space-md)}.no-messages[_ngcontent-%COMP%]{text-align:center;color:var(--color-text-muted);padding:var(--space-xl);font-style:italic}.message[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-width:70%;animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.my-message[_ngcontent-%COMP%]{align-self:flex-end}.other-message[_ngcontent-%COMP%]{align-self:flex-start}.message-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;gap:var(--space-sm)}.sender-name[_ngcontent-%COMP%]{font-weight:600;font-size:.875rem;color:var(--color-text-muted)}.my-message[_ngcontent-%COMP%]   .sender-name[_ngcontent-%COMP%]{color:var(--color-primary)}.header-details-subtitle[_ngcontent-%COMP%]{position:absolute;top:70%;left:20px;font-size:.75rem;color:#ffffffd9;display:flex;flex-direction:column;gap:2px}.btn-location[_ngcontent-%COMP%]{padding:.5rem;font-size:1.25rem;background:var(--color-surface);border:1px solid var(--color-border);border-radius:var(--radius-md);cursor:pointer;transition:all .2s}.btn-location[_ngcontent-%COMP%]:hover{background:var(--color-bg);transform:scale(1.05)}.message-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.message-address[_ngcontent-%COMP%]{font-size:.7rem;color:var(--color-text-muted);background:#0000000d;padding:2px 6px;border-radius:4px;max-width:150px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.gps-link[_ngcontent-%COMP%]{text-decoration:none;cursor:pointer;transition:background-color .2s}.gps-link[_ngcontent-%COMP%]:hover{background:#0000001a;text-decoration:underline;color:var(--color-primary)}.message-time[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted)}.message-text[_ngcontent-%COMP%]{padding:.75rem 1rem;border-radius:12px;word-wrap:break-word;line-height:1.5}.my-message[_ngcontent-%COMP%]   .message-text[_ngcontent-%COMP%]{background:var(--color-primary);color:#fff;border-bottom-right-radius:4px}.other-message[_ngcontent-%COMP%]   .message-text[_ngcontent-%COMP%]{background:var(--color-surface);color:var(--color-text);border:1px solid var(--color-border);border-bottom-left-radius:4px}.input-container[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm);padding:var(--space-lg);background:var(--color-surface);border-top:1px solid var(--color-border)}.message-input[_ngcontent-%COMP%]{flex:1;padding:.75rem 1rem;border:1px solid var(--color-border);border-radius:24px;font-size:.9375rem;background:var(--color-bg);color:var(--color-text);transition:all .2s}.message-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f61a}.btn-send[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:var(--color-primary);color:#fff;border:none;border-radius:24px;font-weight:600;cursor:pointer;transition:all .2s}.btn-send[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--color-accent);transform:translateY(-1px);box-shadow:0 4px 8px #00000026}.btn-send[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--color-bg)}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--color-border);border-radius:4px}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--color-text-muted)}.registration-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.registration-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--color-bg)}.registration-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--color-border);border-radius:4px}.registration-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--color-text-muted)}textarea[readonly][_ngcontent-%COMP%], input[readonly][_ngcontent-%COMP%]{background-color:var(--color-bg);cursor:not-allowed;opacity:.8;color:var(--color-text-muted);border-color:var(--color-border)}@media (max-width: 640px){.message[_ngcontent-%COMP%]{max-width:85%}.chat-wrapper[_ngcontent-%COMP%]{flex-direction:column}.chat-sidebar[_ngcontent-%COMP%]{width:100%;height:auto;min-height:85px;flex-shrink:0;border-right:none;border-bottom:1px solid var(--color-border);display:flex;flex-direction:column}.conversation-list[_ngcontent-%COMP%]{flex-direction:row;overflow-x:auto;overflow-y:hidden;padding:10px;gap:12px}.conversation-item[_ngcontent-%COMP%]{padding:4px;border-radius:50%;background:transparent;flex-shrink:0;position:relative}.conv-info[_ngcontent-%COMP%]{display:none}.conv-avatar[_ngcontent-%COMP%]{width:48px;height:48px;font-size:1.25rem}.active-indicator[_ngcontent-%COMP%]{position:absolute;top:-2px;right:-2px;min-width:18px;height:18px;font-size:.7rem;border:2px solid var(--color-surface)}.chat-main-area[_ngcontent-%COMP%]{height:100%;overflow:hidden}.chat-header[_ngcontent-%COMP%]{padding:var(--space-md);padding-right:60px}.chat-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem;max-width:60%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.header-content[_ngcontent-%COMP%]{flex-direction:row;align-items:center}.user-info[_ngcontent-%COMP%]{font-size:.8rem}.btn-edit[_ngcontent-%COMP%], .btn-logout[_ngcontent-%COMP%]{padding:.4rem;min-width:32px;min-height:32px}.registration-card[_ngcontent-%COMP%]{padding:var(--space-lg)}.registration-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}}.btn-mic[_ngcontent-%COMP%]{width:46px;height:46px;border-radius:50%;border:none;background:var(--color-surface);border:1px solid var(--color-border);font-size:1.25rem;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center;flex-shrink:0;-webkit-user-select:none;user-select:none;touch-action:manipulation}.btn-mic[_ngcontent-%COMP%]:hover{background:var(--color-bg);transform:scale(1.05)}.btn-mic[_ngcontent-%COMP%]:active{transform:scale(.95)}.btn-mic.recording[_ngcontent-%COMP%]{background:#ef4444;border-color:#ef4444;color:#fff;transform:scale(1.1);animation:_ngcontent-%COMP%_pulse 1.5s infinite}@keyframes _ngcontent-%COMP%_pulse{0%{box-shadow:0 0 #ef444466}70%{box-shadow:0 0 0 10px #ef444400}to{box-shadow:0 0 #ef444400}}.message-audio[_ngcontent-%COMP%]{padding:.25rem;border-radius:12px;background:transparent;width:100%}audio[_ngcontent-%COMP%]{height:36px;max-width:100%;border-radius:18px}.btn-delete-msg[_ngcontent-%COMP%]{align-self:flex-end;background:transparent;border:none;font-size:.8rem;opacity:.5;cursor:pointer;padding:0;margin-top:4px;transition:opacity .2s}.btn-delete-msg[_ngcontent-%COMP%]:hover{opacity:1;transform:scale(1.1)}.btn-call[_ngcontent-%COMP%]{background:#10b98133;border:1px solid rgba(16,185,129,.5);color:#10b981;padding:.625rem;border-radius:50%;cursor:pointer;font-size:1.125rem;transition:all .2s;min-width:36px;min-height:36px;display:flex;align-items:center;justify-content:center}.btn-call[_ngcontent-%COMP%]:hover:not(:disabled){background:#10b98166;transform:scale(1.15);color:#fff;border-color:#fff}.btn-call[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;filter:grayscale(1)}.call-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#000000d9;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);z-index:100;display:flex;align-items:center;justify-content:center;animation:fadeIn .3s}.call-content[_ngcontent-%COMP%]{background:var(--color-surface);padding:2rem;border-radius:20px;text-align:center;width:90%;max-width:350px;box-shadow:0 20px 50px #00000080;border:1px solid var(--color-border)}.call-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:1rem 0;font-size:1.5rem}.call-avatar[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem;display:inline-block}.pulsing[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse-avatar 2s infinite}@keyframes _ngcontent-%COMP%_pulse-avatar{0%{transform:scale(1);opacity:1;text-shadow:0 0 0 rgba(16,185,129,.7)}50%{transform:scale(1.1);opacity:.8;text-shadow:0 0 20px rgba(16,185,129,0)}to{transform:scale(1);opacity:1;text-shadow:0 0 0 rgba(16,185,129,0)}}.call-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1rem;margin-top:2rem}.btn-accept[_ngcontent-%COMP%], .btn-reject[_ngcontent-%COMP%], .btn-end[_ngcontent-%COMP%]{padding:.8rem 1.5rem;border-radius:30px;font-weight:600;border:none;cursor:pointer;transition:transform .2s;color:#fff}.btn-accept[_ngcontent-%COMP%]{background:#10b981}.btn-reject[_ngcontent-%COMP%], .btn-end[_ngcontent-%COMP%]{background:#ef4444}.btn-accept[_ngcontent-%COMP%]:hover, .btn-reject[_ngcontent-%COMP%]:hover, .btn-end[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.call-utilities[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1.5rem;margin-bottom:2rem}.volume-meter[_ngcontent-%COMP%]{width:200px;height:6px;background:#fff3;border-radius:3px;margin:0 auto 1.5rem;overflow:hidden;position:relative}.volume-bar[_ngcontent-%COMP%]{height:100%;background:#10b981;width:0%;transition:width .1s linear}.btn-round[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;border:1px solid var(--color-border);background:var(--color-surface);font-size:1.5rem;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s;color:var(--color-text)}.btn-round[_ngcontent-%COMP%]:hover{background:var(--color-bg);transform:scale(1.1)}.btn-round.active[_ngcontent-%COMP%]{background:#fff;color:#000;border-color:#fff}"]})}}return n})();function SF(n,e){n&1&&(f(0,"div",10),g(1," Loading users... "),h())}function MF(n,e){if(n&1){let t=te();f(0,"tr")(1,"td")(2,"div",13)(3,"span",14),g(4),h(),g(5),h()(),f(6,"td"),g(7),h(),f(8,"td"),g(9),h(),f(10,"td")(11,"span",15),g(12),ae(13,"titlecase"),h()(),f(14,"td"),g(15),ae(16,"date"),h(),f(17,"td")(18,"div",16)(19,"button",17),j("click",function(){let i=R(t).$implicit,o=I(2);return k(o.openEditModal(i))}),g(20,"\u270F\uFE0F"),h(),f(21,"button",18),j("click",function(){let i=R(t).$implicit,o=I(2);return k(o.deleteUser(i.id))}),g(22,"\u{1F5D1}\uFE0F"),h()()()()}if(n&2){let t=e.$implicit;v(4),H(t.username.charAt(0).toUpperCase()),v(),q(" ",t.username," "),v(2),H(t.fullName),v(2),H(t.address||"-"),v(2),_e("admin",t.role==="admin"),v(),q(" ",Ss(13,8,t.role)," "),v(3),H(ge(16,10,t.createdAt,"mediumDate"))}}function TF(n,e){if(n&1&&(f(0,"table",11)(1,"thead")(2,"tr")(3,"th"),g(4,"Username"),h(),f(5,"th"),g(6,"Full Name"),h(),f(7,"th"),g(8,"Address"),h(),f(9,"th"),g(10,"Role"),h(),f(11,"th"),g(12,"Created At"),h(),f(13,"th"),g(14,"Actions"),h()()(),f(15,"tbody"),U(16,MF,23,13,"tr",12),h()()),n&2){let t=I();v(16),D("ngForOf",t.users)}}function PF(n,e){n&1&&(f(0,"div",19)(1,"p"),g(2,"No users found. (This shouldn't happen as default admin exists)"),h()())}function AF(n,e){n&1&&(f(0,"small",35),g(1,"Only enter if you wish to change it."),h())}function OF(n,e){if(n&1){let t=te();f(0,"div",20)(1,"div",21)(2,"h3"),g(3),h(),f(4,"div",22)(5,"label"),g(6,"Username"),h(),f(7,"input",23),J("ngModelChange",function(i){R(t);let o=I();return Z(o.currentUser.username,i)||(o.currentUser.username=i),k(i)}),h()(),f(8,"div",22)(9,"label"),g(10,"Full Name"),h(),f(11,"input",24),J("ngModelChange",function(i){R(t);let o=I();return Z(o.currentUser.fullName,i)||(o.currentUser.fullName=i),k(i)}),h()(),f(12,"div",22)(13,"label"),g(14,"Address"),h(),f(15,"input",25),J("ngModelChange",function(i){R(t);let o=I();return Z(o.currentUser.address,i)||(o.currentUser.address=i),k(i)}),h()(),f(16,"div",22)(17,"label"),g(18,"GPS Coordinates"),h(),f(19,"input",26),J("ngModelChange",function(i){R(t);let o=I();return Z(o.currentUser.gpsCoordinates,i)||(o.currentUser.gpsCoordinates=i),k(i)}),h()(),f(20,"div",22)(21,"label"),g(22,"Password"),h(),f(23,"input",27),J("ngModelChange",function(i){R(t);let o=I();return Z(o.formPassword,i)||(o.formPassword=i),k(i)}),h(),U(24,AF,2,0,"small",28),h(),f(25,"div",22)(26,"label"),g(27,"Role"),h(),f(28,"select",29),J("ngModelChange",function(i){R(t);let o=I();return Z(o.currentUser.role,i)||(o.currentUser.role=i),k(i)}),f(29,"option",30),g(30,"User"),h(),f(31,"option",31),g(32,"Admin"),h()()(),f(33,"div",32)(34,"button",33),j("click",function(){R(t);let i=I();return k(i.closeModal())}),g(35,"Cancel"),h(),f(36,"button",34),j("click",function(){R(t);let i=I();return k(i.saveUser())}),g(37),h()()()()}if(n&2){let t=I();v(3),H(t.isEditing?"Edit User":"Add New User"),v(4),Y("ngModel",t.currentUser.username),v(4),Y("ngModel",t.currentUser.fullName),v(4),Y("ngModel",t.currentUser.address),v(4),Y("ngModel",t.currentUser.gpsCoordinates),v(4),Y("ngModel",t.formPassword),D("placeholder",t.isEditing?"Leave blank to keep current":"Enter password"),v(),D("ngIf",t.isEditing),v(4),Y("ngModel",t.currentUser.role),v(9),H(t.isEditing?"Update":"Create")}}var AE=(()=>{class n{constructor(t){this.userService=t,this.users=[],this.isLoading=!1,this.isModalOpen=!1,this.isEditing=!1,this.currentUser={username:"",fullName:"",role:"user"},this.formPassword=""}ngOnInit(){this.loadUsers()}loadUsers(){this.isLoading=!0;let t=localStorage.getItem("jjm_user_id");this.userService.getUsers().subscribe(r=>{t?this.users=r.filter(i=>i.userId===t):this.users=r,this.isLoading=!1})}openAddModal(){this.isEditing=!1,this.formPassword="",this.currentUser={username:"",fullName:"",role:"user"},this.isModalOpen=!0}openEditModal(t){this.isEditing=!0,this.formPassword="",this.currentUser=ee({},t),this.isModalOpen=!0}closeModal(){this.isModalOpen=!1}saveUser(){if(!this.currentUser.username||!this.currentUser.role){alert("Please fill in username and role.");return}if(!this.isEditing&&!this.formPassword){alert("Password is required for new users.");return}if(this.isEditing&&this.currentUser.id){let t={id:this.currentUser.id,username:this.currentUser.username,fullName:this.currentUser.fullName,address:this.currentUser.address,gpsCoordinates:this.currentUser.gpsCoordinates,role:this.currentUser.role};this.formPassword&&(t.password=this.formPassword),this.userService.updateUser(t).subscribe(()=>{this.closeModal()})}else{let t=localStorage.getItem("jjm_user_id")||"system",r=ue(ee({},this.currentUser),{password:this.formPassword,createdBy:t,userId:t});this.userService.addUser(r).subscribe(()=>{this.closeModal()})}}deleteUser(t){confirm("Are you sure you want to delete this user?")&&this.userService.deleteUser(t).subscribe()}static{this.\u0275fac=function(r){return new(r||n)(K(yo))}}static{this.\u0275cmp=Ve({type:n,selectors:[["app-user-management"]],standalone:!0,features:[Le],decls:16,vars:4,consts:[[1,"user-management-container"],[1,"page-header"],[1,"header-text"],[1,"subtitle"],[1,"btn-add",3,"click"],[1,"users-list-container"],["class","loading-state",4,"ngIf"],["class","users-table",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"loading-state"],[1,"users-table"],[4,"ngFor","ngForOf"],[1,"user-name-cell"],[1,"avatar"],[1,"role-badge"],[1,"actions"],["title","Edit",1,"btn-icon","edit",3,"click"],["title","Delete",1,"btn-icon","delete",3,"click"],[1,"empty-state"],[1,"modal-overlay"],[1,"modal-card"],[1,"form-group"],["type","text","placeholder","Enter username",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter full name",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter address (Optional)",3,"ngModelChange","ngModel"],["type","text","placeholder","Lat, Lng (Optional)",3,"ngModelChange","ngModel"],["type","text",3,"ngModelChange","ngModel","placeholder"],["class","hint",4,"ngIf"],[3,"ngModelChange","ngModel"],["value","user"],["value","admin"],[1,"modal-actions"],[1,"btn-cancel",3,"click"],[1,"btn-save",3,"click"],[1,"hint"]],template:function(r,i){r&1&&(f(0,"div",0)(1,"header",1)(2,"div",2)(3,"h2"),g(4,"\u{1F465} User Management"),h(),f(5,"p",3),g(6,"Manage system access and roles"),h()(),f(7,"button",4),j("click",function(){return i.openAddModal()}),f(8,"span"),g(9,"+"),h(),g(10," Add User "),h()(),f(11,"div",5),U(12,SF,2,0,"div",6)(13,TF,17,1,"table",7)(14,PF,3,0,"div",8),h(),U(15,OF,38,10,"div",9),h()),r&2&&(v(12),D("ngIf",i.isLoading),v(),D("ngIf",!i.isLoading&&i.users.length>0),v(),D("ngIf",!i.isLoading&&i.users.length===0),v(),D("ngIf",i.isModalOpen))},dependencies:[ke,tt,Ke,fl,jn,it,sn,an,nt,kt,rt,Ze],styles:[".user-management-container[_ngcontent-%COMP%]{padding:var(--space-xl);max-width:1200px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--space-xl);background:var(--color-surface);padding:var(--space-lg);border-radius:var(--radius-lg);box-shadow:var(--shadow-sm);border:1px solid var(--color-border)}.header-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;color:var(--color-text)}.subtitle[_ngcontent-%COMP%]{margin:4px 0 0;color:var(--color-text-muted);font-size:.875rem}.btn-add[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);padding:.75rem 1.5rem;background:var(--color-primary);color:#fff;border:none;border-radius:var(--radius-md);font-weight:600;cursor:pointer;transition:all .2s}.btn-add[_ngcontent-%COMP%]:hover{background:var(--color-accent);transform:translateY(-2px);box-shadow:var(--shadow-md)}.users-list-container[_ngcontent-%COMP%]{background:var(--color-surface);border-radius:var(--radius-lg);border:1px solid var(--color-border);overflow:hidden;box-shadow:var(--shadow-sm)}.users-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.users-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .users-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:var(--space-md) var(--space-lg);text-align:left;border-bottom:1px solid var(--color-border)}.users-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:var(--color-bg);font-weight:600;color:var(--color-text-muted);font-size:.875rem;text-transform:uppercase;letter-spacing:.5px}.users-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:var(--color-bg)}.user-name-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;font-weight:500}.avatar[_ngcontent-%COMP%]{width:32px;height:32px;background:var(--color-primary);color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.875rem;font-weight:700}.role-badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:999px;font-size:.75rem;font-weight:600;background:var(--color-bg);color:var(--color-text);border:1px solid var(--color-border)}.role-badge.admin[_ngcontent-%COMP%]{background:#3b82f61a;color:var(--color-primary);border-color:#3b82f633}.loading-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{padding:var(--space-2xl);text-align:center;color:var(--color-text-muted)}.actions[_ngcontent-%COMP%]{display:flex;gap:8px}.btn-icon[_ngcontent-%COMP%]{padding:6px;background:transparent;border:none;cursor:pointer;border-radius:4px;transition:background .2s}.btn-icon[_ngcontent-%COMP%]:hover{background:#0000000d}.btn-icon.delete[_ngcontent-%COMP%]:hover{background:#ef44441a}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.modal-card[_ngcontent-%COMP%]{background:var(--color-surface);padding:var(--space-xl);border-radius:var(--radius-lg);width:400px;max-width:90%;box-shadow:var(--shadow-xl);animation:_ngcontent-%COMP%_slideUp .3s cubic-bezier(.16,1,.3,1)}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 var(--space-lg) 0;font-size:1.25rem;color:var(--color-text)}.form-group[_ngcontent-%COMP%]{margin-bottom:var(--space-lg)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:var(--space-xs);font-weight:500;font-size:.875rem;color:var(--color-text)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-bg);color:var(--color-text);font-size:.9375rem}.hint[_ngcontent-%COMP%]{display:block;margin-top:4px;font-size:.75rem;color:var(--color-text-muted)}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:var(--space-md);margin-top:var(--space-xl)}.btn-cancel[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:transparent;border:1px solid var(--color-border);color:var(--color-text);border-radius:var(--radius-md);cursor:pointer;font-weight:500}.btn-save[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:var(--color-primary);color:#fff;border:none;border-radius:var(--radius-md);cursor:pointer;font-weight:600}"]})}}return n})();var OE=(()=>{class n{constructor(t){this.http=t,this.apiUrl=Ft.apiUrl}addReservation(t){return B(this,null,function*(){let r="RES-"+Date.now()+"-"+Math.floor(Math.random()*1e3),i=t.items.map(o=>{let s={productId:o.productId,productName:o.productName,category:"Reservation",price:o.price,quantitySold:o.quantity,total:o.price*o.quantity,cashReceived:0,change:0,timestamp:new Date().toISOString(),deliveryDate:t.pickupDate.toISOString(),deliveryNotes:`RESERVATION: ${t.customerName} (${t.customerContact}).
${t.notes||""}. Address: ${t.customerAddress||"N/A"}`,customerId:"",pending:!0,reservationStatus:"pending_confirmation",userId:"guest",orderId:r};return bd(this.http.post(`${this.apiUrl}/sales`,s))});return yield Promise.all(i),"reservation-submitted"})}static{this.\u0275fac=function(r){return new(r||n)(se(wn))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function RF(n,e){if(n&1){let t=te();f(0,"div",5)(1,"div",6),g(2,"\u2705"),h(),f(3,"p"),g(4),h(),f(5,"button",7),j("click",function(){R(t);let i=I();return k(i.successMessage="")}),g(6,"Make Another Reservation"),h()()}if(n&2){let t=I();v(4),H(t.successMessage)}}function kF(n,e){if(n&1&&(f(0,"option",32),g(1),h()),n&2){let t=e.$implicit;D("value",t),v(),H(t)}}function FF(n,e){if(n&1&&xe(0,"img",47),n&2){let t=I().$implicit;D("src",t.imageUrl,yn)("alt",t.name)}}function VF(n,e){n&1&&(f(0,"div",48),g(1,"\u{1F4E6}"),h())}function LF(n,e){if(n&1){let t=te();f(0,"div",33)(1,"div",34),U(2,FF,1,2,"img",35)(3,VF,2,0,"div",36),h(),f(4,"div",37)(5,"h4",38),g(6),h(),f(7,"div",39)(8,"span",40),g(9),ae(10,"number"),h(),f(11,"span",41),g(12),h()(),f(13,"div",42)(14,"div",43)(15,"button",44),j("click",function(){let i=R(t).$implicit,o=I(2);return k(o.decrementQty(i))}),g(16,"-"),h(),f(17,"input",45),j("input",function(i){let o=R(t).$implicit,s=I(2);return k(s.manualQty(o,i))}),h(),f(18,"button",44),j("click",function(){let i=R(t).$implicit,o=I(2);return k(o.incrementQty(i))}),g(19,"+"),h()(),f(20,"button",46),j("click",function(){let i=R(t).$implicit,o=I(2);return k(o.addToOrder(i))}),g(21,"Add"),h()()()()}if(n&2){let t=e.$implicit,r=I(2);v(2),D("ngIf",t.imageUrl),v(),D("ngIf",!t.imageUrl),v(3),H(t.name),v(3),q("\u20B1",ge(10,9,t.price,"1.2-2"),""),v(2),_e("low",t.quantity<10),v(),q("Stock: ",t.quantity,""),v(5),D("value",r.getQty(t))("max",t.quantity)}}function jF(n,e){if(n&1){let t=te();f(0,"div",58)(1,"div",59)(2,"span",60),g(3),h(),f(4,"span",61),g(5),ae(6,"number"),h()(),f(7,"div",62),g(8),ae(9,"number"),f(10,"button",63),j("click",function(){let i=R(t).index,o=I(3);return k(o.removeFromOrder(i))}),g(11,"\u2715"),h()()()}if(n&2){let t=e.$implicit;v(3),H(t.product.name),v(2),rn("",t.quantity," x \u20B1",ge(6,4,t.product.price,"1.2-2"),""),v(3),q(" \u20B1",ge(9,7,t.product.price*t.quantity,"1.2-2")," ")}}function BF(n,e){if(n&1){let t=te();f(0,"section",49)(1,"h3"),g(2,"Order Summary"),h(),f(3,"div",50),U(4,jF,12,10,"div",51),h(),f(5,"div",52)(6,"span"),g(7,"Total Amount:"),h(),f(8,"span",53),g(9),ae(10,"number"),h()(),f(11,"div",11)(12,"label",54),g(13,"Additional Notes"),h(),f(14,"textarea",55),J("ngModelChange",function(i){R(t);let o=I(2);return Z(o.notes,i)||(o.notes=i),k(i)}),h()(),f(15,"div",56)(16,"button",57),j("click",function(){R(t);let i=I(2);return k(i.submitReservation())}),g(17),h()()()}if(n&2){let t=I(2);v(4),D("ngForOf",t.orderItems),v(5),q("\u20B1",ge(10,5,t.totalAmount,"1.2-2"),""),v(5),Y("ngModel",t.notes),v(2),D("disabled",t.isSubmitting),v(),q(" ",t.isSubmitting?"Submitting...":"Confirm Reservation"," ")}}function UF(n,e){n&1&&(f(0,"div",64)(1,"p"),g(2,"Your cart is empty. Add items above."),h()())}function $F(n,e){if(n&1){let t=te();f(0,"div",8)(1,"section",9)(2,"h3"),g(3,"\u{1F4CB} Customer Information"),h(),f(4,"div",10)(5,"div",11)(6,"label",12),g(7,"Full Name *"),h(),f(8,"input",13),J("ngModelChange",function(i){R(t);let o=I();return Z(o.customerName,i)||(o.customerName=i),k(i)}),h()(),f(9,"div",11)(10,"label",14),g(11,"Phone Number *"),h(),f(12,"input",15),J("ngModelChange",function(i){R(t);let o=I();return Z(o.customerContact,i)||(o.customerContact=i),k(i)}),h()(),f(13,"div",16)(14,"label",17),g(15,"Delivery Address *"),h(),f(16,"input",18),J("ngModelChange",function(i){R(t);let o=I();return Z(o.customerAddress,i)||(o.customerAddress=i),k(i)}),h()(),f(17,"div",16)(18,"label",19),g(19,"Payment Option (Optional)"),h(),f(20,"select",20),J("ngModelChange",function(i){R(t);let o=I();return Z(o.paymentOption,i)||(o.paymentOption=i),k(i)}),f(21,"option",21),g(22,"Select Payment Method"),h(),U(23,kF,2,2,"option",22),h()()(),f(24,"h3",23),g(25,"\u{1F69A} Pickup/Delivery Date"),h(),f(26,"div",10)(27,"div",11)(28,"label",24),g(29,"Date *"),h(),f(30,"input",25),J("ngModelChange",function(i){R(t);let o=I();return Z(o.pickupDate,i)||(o.pickupDate=i),k(i)}),h()(),f(31,"div",11)(32,"label",26),g(33,"Time"),h(),f(34,"input",27),J("ngModelChange",function(i){R(t);let o=I();return Z(o.pickupTime,i)||(o.pickupTime=i),k(i)}),h()()()(),f(35,"section",9)(36,"h3"),g(37,"Select Items"),h(),f(38,"div",28),U(39,LF,22,12,"div",29),h()(),U(40,BF,18,8,"section",30)(41,UF,3,0,"div",31),h()}if(n&2){let t=I();v(8),Y("ngModel",t.customerName),v(4),Y("ngModel",t.customerContact),v(4),Y("ngModel",t.customerAddress),v(4),Y("ngModel",t.paymentOption),v(3),D("ngForOf",t.paymentOptions),v(7),Y("ngModel",t.pickupDate),v(4),Y("ngModel",t.pickupTime),v(5),D("ngForOf",t.products),v(),D("ngIf",t.orderItems.length>0),v(),D("ngIf",t.orderItems.length===0)}}var NE=(()=>{class n{constructor(t,r){this.inventoryService=t,this.reservationService=r,this.products=[],this.customerName="",this.customerContact="",this.customerAddress="",this.notes="",this.paymentOption="",this.paymentOptions=["Cash on Delivery","Gcash","Bank Transfer"],this.pickupDate="",this.pickupTime="",this.orderItems=[],this.selectedProduct=null,this.selectedQuantity=1,this.isSubmitting=!1,this.successMessage="",this.tempQuantities={}}ngOnInit(){let t=new Date;t.setDate(t.getDate()+1),this.pickupDate=t.toISOString().split("T")[0],this.loadProducts()}loadProducts(){this.inventoryService.getProducts().subscribe(t=>{this.products=t.filter(r=>r.quantity>0)})}getQty(t){return this.tempQuantities[t.id]||1}incrementQty(t){let r=this.getQty(t);r<t.quantity&&(this.tempQuantities[t.id]=r+1)}decrementQty(t){let r=this.getQty(t);r>1&&(this.tempQuantities[t.id]=r-1)}manualQty(t,r){let i=parseInt(r.target.value,10);!isNaN(i)&&i>=1&&i<=t.quantity&&(this.tempQuantities[t.id]=i)}addToOrder(t){let r=this.getQty(t),i=this.orderItems.find(s=>s.product.id===t.id),o=i?i.quantity:0;if(o+r>t.quantity){alert(`Cannot add more. You already have ${o} in cart. Max stock is ${t.quantity}.`);return}i?i.quantity+=r:this.orderItems.push({product:t,quantity:r}),this.tempQuantities[t.id]=1}removeFromOrder(t){this.orderItems.splice(t,1)}get totalAmount(){return this.orderItems.reduce((t,r)=>t+r.product.price*r.quantity,0)}submitReservation(){return B(this,null,function*(){if(this.orderItems.length===0||!this.customerName||!this.customerContact||!this.pickupDate||!this.customerAddress){alert("Please fill in all required fields and add items to your reservation.");return}this.isSubmitting=!0;try{let t=new Date(this.pickupDate+(this.pickupTime?"T"+this.pickupTime:"T00:00:00")),r=`Payment: ${this.paymentOption||"Not Specified"}
Address: ${this.customerAddress}

${this.notes}`;yield this.reservationService.addReservation({customerName:this.customerName,customerContact:this.customerContact,reservationDate:new Date,pickupDate:t,status:"pending",items:this.orderItems.map(i=>({productId:i.product.id,productName:i.product.name,quantity:i.quantity,price:i.product.price})),totalAmount:this.totalAmount,notes:r}),this.successMessage="Reservation submitted successfully! We will contact you shortly.",this.resetForm()}catch(t){console.error("Error submitting reservation",t),alert("Failed to submit reservation. Please try again.")}finally{this.isSubmitting=!1}})}resetForm(){this.orderItems=[],this.customerName="",this.customerContact="",this.customerAddress="",this.paymentOption="",this.notes="",this.selectedProduct=null,this.pickupTime=""}static{this.\u0275fac=function(r){return new(r||n)(K(Vt),K(OE))}}static{this.\u0275cmp=Ve({type:n,selectors:[["app-reservation"]],standalone:!0,features:[Le],decls:9,vars:2,consts:[[1,"reservation-page"],[1,"reservation-container"],[1,"reservation-header"],["class","success-alert",4,"ngIf"],["class","reservation-form",4,"ngIf"],[1,"success-alert"],[1,"success-icon"],[1,"btn-primary",3,"click"],[1,"reservation-form"],[1,"form-section"],[1,"form-grid"],[1,"form-group"],["for","name"],["type","text","id","name","placeholder","Enter your name","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","contact"],["type","text","id","contact","placeholder","Phone number","required","",1,"form-input",3,"ngModelChange","ngModel"],[1,"form-group","full-width",2,"grid-column","1 / -1"],["for","address"],["type","text","id","address","placeholder","Street, City, Province","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","payment"],["id","payment",1,"form-input",2,"height","42px",3,"ngModelChange","ngModel"],["value","","selected",""],[3,"value",4,"ngFor","ngForOf"],[2,"margin-top","var(--space-lg)"],["for","date"],["type","date","id","date","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","time"],["type","time","id","time",1,"form-input",3,"ngModelChange","ngModel"],[1,"product-grid"],["class","product-card",4,"ngFor","ngForOf"],["class","form-section summary-section",4,"ngIf"],["class","empty-cart-msg",4,"ngIf"],[3,"value"],[1,"product-card"],[1,"card-image"],["loading","lazy",3,"src","alt",4,"ngIf"],["class","placeholder-img",4,"ngIf"],[1,"card-content"],[1,"card-title"],[1,"card-meta"],[1,"price"],[1,"stock"],[1,"card-actions"],[1,"qty-control"],[1,"qty-btn",3,"click"],["type","number","min","1",1,"qty-input-sm",3,"input","value","max"],[1,"btn-add-card",3,"click"],["loading","lazy",3,"src","alt"],[1,"placeholder-img"],[1,"form-section","summary-section"],[1,"order-list"],["class","order-item",4,"ngFor","ngForOf"],[1,"order-total"],[1,"total-price"],["for","notes"],["id","notes","rows","3","placeholder","Any special requests?",1,"form-textarea",3,"ngModelChange","ngModel"],[1,"actions"],[1,"btn-submit",3,"click","disabled"],[1,"order-item"],[1,"item-info"],[1,"item-name"],[1,"item-details"],[1,"item-total"],["title","Remove",1,"btn-remove",3,"click"],[1,"empty-cart-msg"]],template:function(r,i){r&1&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),g(4,"\u{1F4C5} Make a Reservation"),h(),f(5,"p"),g(6,"Reserve items for pickup or delivery."),h()(),U(7,RF,7,1,"div",3)(8,$F,42,10,"div",4),h()()),r&2&&(v(7),D("ngIf",i.successMessage),v(),D("ngIf",!i.successMessage))},dependencies:[ke,tt,Ke,ho,it,sn,an,nt,kt,rt,Wt,Ze],styles:[".reservation-page[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;padding:var(--space-md);background:var(--color-bg);background-image:radial-gradient(var(--color-border) 1px,transparent 1px);background-size:20px 20px}.reservation-container[_ngcontent-%COMP%]{width:100%;max-width:800px;background:var(--color-surface);border-radius:var(--radius-xl);box-shadow:0 4px 6px #0000001a;overflow:hidden;border:1px solid var(--color-border)}.reservation-header[_ngcontent-%COMP%]{padding:var(--space-xl) var(--space-lg);background:linear-gradient(135deg,var(--color-primary),var(--color-primary-dark));color:#fff;text-align:center}.reservation-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:var(--space-md);color:#fff}.reservation-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{opacity:.9;font-size:1.1rem}.reservation-form[_ngcontent-%COMP%]{padding:var(--space-xl)}.form-section[_ngcontent-%COMP%]{margin-bottom:var(--space-2xl);padding-bottom:var(--space-lg);border-bottom:1px solid var(--color-border)}.form-section[_ngcontent-%COMP%]:last-child{border-bottom:none;margin-bottom:0;padding-bottom:0}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:var(--color-text);margin-bottom:var(--space-md);text-transform:uppercase;letter-spacing:.5px}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:var(--space-md)}.form-group[_ngcontent-%COMP%]{margin-bottom:var(--space-md)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:var(--space-xs);color:var(--color-text);font-weight:500}.form-input[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{width:100%;padding:var(--space-sm);border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-bg);color:var(--color-text);font-size:1rem;transition:border-color .2s}.form-input[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{border-color:var(--color-primary);outline:none;box-shadow:0 0 0 3px #2563eb1a}.product-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:var(--space-sm);max-height:500px;overflow-y:auto;padding-right:4px}.product-card[_ngcontent-%COMP%]{background:var(--color-surface);border:1px solid var(--color-border);border-radius:var(--radius-md);overflow:hidden;transition:transform .2s,box-shadow .2s;display:flex;flex-direction:column}.product-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.card-image[_ngcontent-%COMP%]{height:100px;background:var(--color-bg);display:flex;align-items:center;justify-content:center;overflow:hidden}.card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.placeholder-img[_ngcontent-%COMP%]{font-size:2rem;opacity:.5}.card-content[_ngcontent-%COMP%]{padding:var(--space-sm);flex:1;display:flex;flex-direction:column}.card-title[_ngcontent-%COMP%]{margin:0 0 2px;font-size:.9rem;font-weight:600;color:var(--color-text)}.card-meta[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--space-sm);font-size:.8rem}.price[_ngcontent-%COMP%]{font-weight:700;color:var(--color-primary)}.stock[_ngcontent-%COMP%]{color:var(--color-text-muted)}.stock.low[_ngcontent-%COMP%]{color:var(--color-warning)}.card-actions[_ngcontent-%COMP%]{margin-top:auto;display:flex;gap:4px;align-items:center}.qty-control[_ngcontent-%COMP%]{display:flex;align-items:center;border:1px solid var(--color-border);border-radius:4px;overflow:hidden}.qty-btn[_ngcontent-%COMP%]{background:var(--color-bg);border:none;width:20px;height:24px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.8rem}.qty-btn[_ngcontent-%COMP%]:hover{background:var(--color-border)}.qty-input-sm[_ngcontent-%COMP%]{width:28px;border:none;text-align:center;font-size:.85rem;padding:0;height:24px;appearance:textfield}.qty-input-sm[_ngcontent-%COMP%]::-webkit-outer-spin-button, .qty-input-sm[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.btn-add-card[_ngcontent-%COMP%]{flex:1;background:var(--color-primary);color:#fff;border:none;border-radius:4px;height:26px;font-weight:600;cursor:pointer;transition:background .2s;font-size:.85rem}.btn-add-card[_ngcontent-%COMP%]:hover{background:var(--color-primary-dark)}.summary-section[_ngcontent-%COMP%]{background:var(--color-bg);padding:var(--space-lg);border-radius:var(--radius-lg)}.order-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm);margin-bottom:var(--space-lg)}.order-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--space-sm);background:var(--color-surface);border-radius:var(--radius-md);border:1px solid var(--color-border)}.item-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.item-name[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text)}.item-details[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-muted)}.item-total[_ngcontent-%COMP%]{font-weight:600;color:var(--color-primary);display:flex;align-items:center;gap:var(--space-sm)}.btn-remove[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;border:none;background:var(--color-danger);color:#fff;font-size:.75rem;cursor:pointer;display:flex;align-items:center;justify-content:center;opacity:.8;transition:.2s}.btn-remove[_ngcontent-%COMP%]:hover{opacity:1;transform:scale(1.1)}.order-total[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-top:var(--space-md);border-top:2px dashed var(--color-border);margin-bottom:var(--space-lg);font-size:1.25rem;font-weight:700;color:var(--color-text)}.total-price[_ngcontent-%COMP%]{color:var(--color-primary)}.actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.btn-submit[_ngcontent-%COMP%]{padding:var(--space-md) var(--space-2xl);background:var(--color-primary);color:#fff;border:none;border-radius:var(--radius-md);font-size:1.1rem;font-weight:600;cursor:pointer;box-shadow:0 4px 6px #0000001a;transition:transform .2s,box-shadow .2s}.btn-submit[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 12px #00000026}.btn-submit[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:wait}.empty-cart-msg[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl);color:var(--color-text-muted);font-style:italic}.success-alert[_ngcontent-%COMP%]{text-align:center;padding:var(--space-3xl) var(--space-xl)}.success-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:var(--space-md)}.success-alert[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.25rem;color:var(--color-text);margin-bottom:var(--space-xl)}.btn-primary[_ngcontent-%COMP%]{padding:var(--space-md) var(--space-xl);background:var(--color-primary);color:#fff;border:none;border-radius:var(--radius-md);font-weight:600;cursor:pointer}@media (max-width: 640px){.reservation-page[_ngcontent-%COMP%]{padding:0}.reservation-container[_ngcontent-%COMP%]{border-radius:0;min-height:100vh;border:none}.add-item-row[_ngcontent-%COMP%]{flex-wrap:wrap}.btn-add[_ngcontent-%COMP%]{width:100%;margin-bottom:0}}"]})}}return n})();function zF(n,e){n&1&&xe(0,"app-reservation")}function qF(n,e){n&1&&xe(0,"app-login")}function HF(n,e){if(n&1){let t=te();f(0,"div",11)(1,"div",12)(2,"button",13),j("click",function(){R(t);let i=I();return k(i.showReservation=!i.showReservation)}),g(3),h()(),U(4,zF,1,0,"app-reservation",1)(5,qF,1,0,"app-login",1),h()}if(n&2){let t=I();v(3),q(" ",t.showReservation?"\u2190 Back to Login":"\u{1F4C5} Make a Reservation"," "),v(),D("ngIf",t.showReservation),v(),D("ngIf",!t.showReservation)}}function GF(n,e){if(n&1){let t=te();f(0,"button",28),j("click",function(){R(t);let i=I(2);return k(i.setActiveTab("users"))}),f(1,"span",29),g(2,"\u{1F464}"),h(),f(3,"span",30),g(4,"Users"),h()()}if(n&2){let t=I(2);_e("active",t.activeTab==="users")}}function WF(n,e){n&1&&(f(0,"div",35)(1,"div",36),xe(2,"app-landing"),h()())}function QF(n,e){n&1&&(f(0,"div",35)(1,"div",36),xe(2,"app-product-form"),h()())}function KF(n,e){n&1&&(f(0,"div",35)(1,"div",36),xe(2,"app-pos-calculator"),h()())}function YF(n,e){n&1&&(f(0,"div",35)(1,"div",36),xe(2,"app-inventory-list"),h()())}function JF(n,e){n&1&&(f(0,"div",35)(1,"div",36),xe(2,"app-customer-form"),h()())}function XF(n,e){n&1&&(f(0,"div",35)(1,"div",36),xe(2,"app-expenses"),h()())}function ZF(n,e){n&1&&(f(0,"div",35)(1,"div",36),xe(2,"app-reports"),h()())}function eV(n,e){n&1&&(f(0,"div",35)(1,"div",36),xe(2,"app-activity-logs"),h()())}function tV(n,e){n&1&&(f(0,"div",35)(1,"div",36),xe(2,"app-user-management"),h()())}function nV(n,e){if(n&1){let t=te();f(0,"div")(1,"header",14)(2,"div",15)(3,"div",16)(4,"div",17)(5,"div",18),g(6,"\u{1F4E6}"),h(),f(7,"div",19)(8,"h1"),g(9,"JJM Inventory"),h(),f(10,"p",20),g(11,"Smart Business Management"),h()()(),f(12,"div",21)(13,"button",22),j("click",function(){R(t);let i=I();return k(i.toggleTheme())}),f(14,"span",23),g(15),h()(),f(16,"button",24),j("click",function(){R(t);let i=I();return k(i.logout())}),f(17,"span",25),g(18,"\u{1F6AA}"),h(),f(19,"span",26),g(20,"Logout"),h()()()()()(),f(21,"main",15)(22,"nav",27)(23,"button",28),j("click",function(){R(t);let i=I();return k(i.setActiveTab("home"))}),f(24,"span",29),g(25,"\u{1F3E0}"),h(),f(26,"span",30),g(27,"Home"),h()(),f(28,"button",28),j("click",function(){R(t);let i=I();return k(i.setActiveTab("add-product"))}),f(29,"span",29),g(30,"\u{1F4E6}"),h(),f(31,"span",30),g(32,"Add Product"),h()(),f(33,"button",28),j("click",function(){R(t);let i=I();return k(i.setActiveTab("sell"))}),f(34,"span",29),g(35,"\u{1F4B0}"),h(),f(36,"span",30),g(37,"Sell"),h()(),f(38,"button",28),j("click",function(){R(t);let i=I();return k(i.setActiveTab("inventory"))}),f(39,"span",29),g(40,"\u{1F4CA}"),h(),f(41,"span",30),g(42,"Inventory"),h()(),f(43,"button",28),j("click",function(){R(t);let i=I();return k(i.setActiveTab("customers"))}),f(44,"span",29),g(45,"\u{1F465}"),h(),f(46,"span",30),g(47,"Customers"),h()(),f(48,"button",28),j("click",function(){R(t);let i=I();return k(i.setActiveTab("expenses"))}),f(49,"span",29),g(50,"\u{1F4B8}"),h(),f(51,"span",30),g(52,"Expenses"),h()(),f(53,"button",28),j("click",function(){R(t);let i=I();return k(i.setActiveTab("reports"))}),f(54,"span",29),g(55,"\u{1F4C8}"),h(),f(56,"span",30),g(57,"Reports"),h()(),f(58,"button",28),j("click",function(){R(t);let i=I();return k(i.setActiveTab("logs"))}),f(59,"span",29),g(60,"\u{1F4CB}"),h(),f(61,"span",30),g(62,"Activity Logs"),h()(),U(63,GF,5,2,"button",31),h(),f(64,"div",32),U(65,WF,3,0,"div",33)(66,QF,3,0,"div",33)(67,KF,3,0,"div",33)(68,YF,3,0,"div",33)(69,JF,3,0,"div",33)(70,XF,3,0,"div",33)(71,ZF,3,0,"div",33)(72,eV,3,0,"div",33)(73,tV,3,0,"div",33),h()(),f(74,"footer",34)(75,"div",15)(76,"p"),g(77,"\xA9 2024 JJM Inventory. All rights reserved."),h()()()()}if(n&2){let t=I();v(13),D("title",t.isDarkTheme?"Switch to Light Mode":"Switch to Dark Mode"),v(2),H(t.isDarkTheme?"\u2600\uFE0F":"\u{1F319}"),v(8),_e("active",t.activeTab==="home"),v(5),_e("active",t.activeTab==="add-product"),v(5),_e("active",t.activeTab==="sell"),v(5),_e("active",t.activeTab==="inventory"),v(5),_e("active",t.activeTab==="customers"),v(5),_e("active",t.activeTab==="expenses"),v(5),_e("active",t.activeTab==="reports"),v(5),_e("active",t.activeTab==="logs"),v(5),D("ngIf",t.userRole==="admin"),v(2),D("ngIf",t.activeTab==="home"),v(),D("ngIf",t.activeTab==="add-product"),v(),D("ngIf",t.activeTab==="sell"),v(),D("ngIf",t.activeTab==="inventory"),v(),D("ngIf",t.activeTab==="customers"),v(),D("ngIf",t.activeTab==="expenses"),v(),D("ngIf",t.activeTab==="reports"),v(),D("ngIf",t.activeTab==="logs"),v(),D("ngIf",t.activeTab==="users"&&t.userRole==="admin")}}function rV(n,e){if(n&1&&(f(0,"span",37),g(1),h()),n&2){let t=I();v(),H(t.totalUnreadMessages)}}var RE=(()=>{class n{constructor(t,r){this.inventoryService=t,this.chatService=r,this.title="JJM Inventory",this.activeTab="home",this.isDarkTheme=!1,this.isLoggedIn=!1,this.userRole="",this.isChatOpen=!1,this.totalUnreadMessages=0,this.showReservation=!1,this.isLoggedIn=localStorage.getItem("jjm_logged_in")==="true",this.userRole=localStorage.getItem("jjm_role")||"user";let i=localStorage.getItem("jjm_theme");this.isDarkTheme=i==="dark",this.applyTheme(),window.inventoryService=this.inventoryService}setActiveTab(t){t==="users"&&this.userRole!=="admin"||(this.activeTab=t)}toggleTheme(){this.isDarkTheme=!this.isDarkTheme,this.applyTheme(),localStorage.setItem("jjm_theme",this.isDarkTheme?"dark":"light")}logout(){this.chatService.triggerLogout(),localStorage.removeItem("jjm_logged_in"),localStorage.removeItem("jjm_username"),localStorage.removeItem("jjm_user_id"),localStorage.removeItem("jjm_role"),localStorage.removeItem("chatCustomerInfo"),localStorage.removeItem("chatUserName"),this.isLoggedIn=!1,window.location.reload()}applyTheme(){this.isDarkTheme?document.body.classList.add("dark-theme"):document.body.classList.remove("dark-theme")}toggleChat(){this.isChatOpen=!this.isChatOpen}static{this.\u0275fac=function(r){return new(r||n)(K(Vt),K(Vu))}}static{this.\u0275cmp=Ve({type:n,selectors:[["app-root"]],standalone:!0,features:[Le],decls:14,vars:8,consts:[["class","public-container",4,"ngIf"],[4,"ngIf"],[1,"chat-widget"],["title","Open Chat",1,"chat-toggle-button",3,"click"],[1,"chat-icon"],[1,"chat-label"],["class","notification-badge",4,"ngIf"],[1,"chat-modal"],[1,"chat-modal-content"],[3,"totalUnreadCountChange","isOpen"],["title","Close Chat",1,"chat-modal-close",3,"click"],[1,"public-container"],[1,"public-nav"],[1,"btn-public-toggle",3,"click"],[1,"header"],[1,"container"],[1,"header-content"],[1,"logo-section"],[1,"logo-icon"],[1,"brand-info"],[1,"tagline"],[1,"header-actions"],[1,"theme-toggle",3,"click","title"],[1,"theme-icon"],["title","Logout",1,"logout-button",3,"click"],[1,"logout-icon"],[1,"logout-text"],[1,"tabs"],[1,"tab-button",3,"click"],[1,"tab-icon"],[1,"tab-label"],["class","tab-button",3,"active","click",4,"ngIf"],[1,"tab-content"],["class","tab-pane",4,"ngIf"],[1,"footer"],[1,"tab-pane"],[1,"tab-pane-content"],[1,"notification-badge"]],template:function(r,i){r&1&&(U(0,HF,6,3,"div",0)(1,nV,78,28,"div",1),f(2,"div",2)(3,"button",3),j("click",function(){return i.toggleChat()}),f(4,"span",4),g(5,"\u{1F4AC}"),h(),f(6,"span",5),g(7,"Chat"),h()(),U(8,rV,2,1,"span",6),f(9,"div",7)(10,"div",8)(11,"app-chat",9),j("totalUnreadCountChange",function(s){return i.totalUnreadMessages=s}),h()(),f(12,"button",10),j("click",function(){return i.toggleChat()}),g(13,"\u2715"),h()()()),r&2&&(D("ngIf",!i.isLoggedIn),v(),D("ngIf",i.isLoggedIn),v(2),_e("active",i.isChatOpen),v(5),D("ngIf",i.totalUnreadMessages>0),v(),_e("open",i.isChatOpen),v(2),D("isOpen",i.isChatOpen))},dependencies:[ke,Ke,_w,bw,ww,Cw,xw,Ew,Iw,Dw,Sw,PE,AE,NE],styles:['.public-nav[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;z-index:1000}.btn-public-toggle[_ngcontent-%COMP%]{padding:10px 20px;background:var(--color-surface);color:var(--color-text);border:1px solid var(--color-border);border-radius:var(--radius-xl);cursor:pointer;font-weight:600;font-size:.95rem;box-shadow:var(--shadow-md);transition:all .3s ease;display:flex;align-items:center;gap:8px;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}.btn-public-toggle[_ngcontent-%COMP%]:hover{background:var(--color-primary);color:#fff;border-color:var(--color-primary);transform:translateY(-2px);box-shadow:var(--shadow-lg)}.header[_ngcontent-%COMP%]{background:var(--color-surface);border-bottom:1px solid var(--color-border);padding:var(--space-lg) 0;position:sticky;top:0;z-index:100;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background:#fffffff2}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.logo-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-md)}.logo-icon[_ngcontent-%COMP%]{font-size:2.5rem;animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-5px)}}.brand-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--color-text);margin:0;font-size:1.5rem;font-weight:700;letter-spacing:-.5px}.tagline[_ngcontent-%COMP%]{color:var(--color-text-muted);font-size:.75rem;margin:0;font-weight:500}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-md)}.theme-toggle[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:var(--radius-xl);background:var(--color-bg);border:1px solid var(--color-border);display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all var(--transition-base);padding:0}.theme-toggle[_ngcontent-%COMP%]:hover{background:var(--color-primary);border-color:var(--color-primary);transform:rotate(180deg) scale(1.1);box-shadow:var(--shadow-md)}.theme-icon[_ngcontent-%COMP%]{font-size:1.25rem;transition:transform var(--transition-base)}.logout-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);padding:var(--space-sm) var(--space-md);background:#ef44441a;border:1px solid rgba(239,68,68,.3);border-radius:var(--radius-lg);color:var(--color-danger);font-weight:600;cursor:pointer;transition:all var(--transition-base)}.logout-button[_ngcontent-%COMP%]:hover{background:var(--color-danger);border-color:var(--color-danger);color:#fff;transform:translateY(-2px);box-shadow:0 4px 12px #ef44444d}.logout-icon[_ngcontent-%COMP%]{font-size:1.125rem}.logout-text[_ngcontent-%COMP%]{font-size:.875rem}.tabs[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm);margin-top:var(--space-2xl);margin-bottom:var(--space-xl);padding:var(--space-sm);background:var(--color-bg);border-radius:var(--radius-xl);flex-wrap:wrap;box-shadow:inset 0 2px 4px #0000000d}.tab-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);padding:var(--space-md) var(--space-lg);background:transparent;border:none;border-radius:var(--radius-lg);color:var(--color-text-muted);font-size:.9375rem;font-weight:600;cursor:pointer;transition:all var(--transition-base);white-space:nowrap;position:relative;overflow:hidden}.tab-button[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(59,130,246,.15),transparent);transition:left .5s ease}.tab-button[_ngcontent-%COMP%]:hover:before{left:100%}.tab-button[_ngcontent-%COMP%]:hover{background:#3b82f614;color:var(--color-primary);transform:translateY(-2px);box-shadow:0 4px 12px #3b82f626}.tab-button.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-primary),var(--color-primary-light));color:#fff;box-shadow:0 4px 12px #3b82f64d}.tab-button.active[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,var(--color-primary-dark),var(--color-primary));transform:translateY(-2px) scale(1.02)}.tab-icon[_ngcontent-%COMP%]{font-size:1.25rem;transition:transform var(--transition-base);filter:drop-shadow(0 2px 4px rgba(0,0,0,.1))}.tab-button[_ngcontent-%COMP%]:hover   .tab-icon[_ngcontent-%COMP%]{transform:scale(1.15) rotate(5deg)}.tab-button.active[_ngcontent-%COMP%]   .tab-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_iconPulse .6s ease;filter:drop-shadow(0 2px 8px rgba(255,255,255,.5))}.tab-label[_ngcontent-%COMP%]{font-weight:600;letter-spacing:.3px}@keyframes _ngcontent-%COMP%_iconPulse{0%,to{transform:scale(1)}50%{transform:scale(1.2)}}.tab-content[_ngcontent-%COMP%]{min-height:calc(100vh - 400px);padding-bottom:var(--space-md);position:relative}.tab-pane[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInUp .4s cubic-bezier(.16,1,.3,1)}.tab-pane-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}@keyframes _ngcontent-%COMP%_slideInUp{0%{opacity:0;transform:translateY(30px) scale(.98)}to{opacity:1;transform:translateY(0) scale(1)}}.footer[_ngcontent-%COMP%]{background:var(--color-surface);border-top:1px solid var(--color-border);padding:var(--space-lg) 0;margin-top:var(--space-lg)}.footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;color:var(--color-text-muted);font-size:.875rem}@media (max-width: 768px){.tab-button[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);font-size:.875rem}.tab-icon[_ngcontent-%COMP%]{font-size:1rem}.tab-label[_ngcontent-%COMP%]{display:none}}.chat-widget[_ngcontent-%COMP%]{position:fixed;bottom:24px;right:24px;z-index:1000}.chat-toggle-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);padding:var(--space-md) var(--space-lg);background:linear-gradient(135deg,#3b82f6,#2563eb);border:none;border-radius:var(--radius-xl);color:#fff;font-weight:600;font-size:.9375rem;cursor:pointer;box-shadow:0 8px 24px #3b82f666;transition:all var(--transition-base);position:relative;overflow:hidden}.chat-toggle-button[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);transition:left .6s ease}.chat-toggle-button[_ngcontent-%COMP%]:hover:before{left:100%}.chat-toggle-button[_ngcontent-%COMP%]:hover{transform:translateY(-4px) scale(1.05);box-shadow:0 12px 32px #3b82f680}.chat-toggle-button.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626);box-shadow:0 8px 24px #ef444466}.chat-toggle-button.active[_ngcontent-%COMP%]:hover{box-shadow:0 12px 32px #ef444480}.chat-icon[_ngcontent-%COMP%]{font-size:1.5rem;animation:_ngcontent-%COMP%_bounce 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-4px)}}.chat-label[_ngcontent-%COMP%]{font-weight:700;letter-spacing:.3px}.chat-modal[_ngcontent-%COMP%]{position:fixed;bottom:100px;right:24px;width:850px;max-width:calc(100vw - 48px);height:650px;max-height:calc(100vh - 120px);opacity:0;transform:translateY(20px) scale(.95);pointer-events:none;transition:all .3s cubic-bezier(.16,1,.3,1);display:flex;flex-direction:column;z-index:2000}.chat-modal.open[_ngcontent-%COMP%]{opacity:1;transform:translateY(0) scale(1);pointer-events:all}.chat-modal-close[_ngcontent-%COMP%]{position:absolute;top:-50px;right:0;width:36px;height:36px;border-radius:var(--radius-lg);background:#00000080;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);color:#fff;font-size:1.25rem;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all var(--transition-base);padding:0;z-index:100;box-shadow:0 4px 12px #0000004d}.chat-modal-close[_ngcontent-%COMP%]:hover{background:#ef4444cc;transform:rotate(90deg) scale(1.1);box-shadow:0 6px 16px #ef444466}.chat-modal-content[_ngcontent-%COMP%]{flex:1;background:var(--color-surface);border-radius:var(--radius-xl);box-shadow:0 20px 60px #0000004d;border:1px solid var(--color-border);overflow:hidden;height:100%}@media (max-width: 768px){.chat-widget[_ngcontent-%COMP%]{bottom:16px;right:16px}.chat-toggle-button[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md)}.chat-label[_ngcontent-%COMP%]{display:none}.chat-modal[_ngcontent-%COMP%]{position:fixed;inset:0;width:100%;height:100%;max-width:100%;max-height:100%;border-radius:0;z-index:2000}.chat-modal-close[_ngcontent-%COMP%]{top:16px;right:auto;left:16px;width:44px;height:44px}}.notification-badge[_ngcontent-%COMP%]{position:absolute;top:-6px;right:-6px;background:#ef4444;color:#fff;padding:2px 8px;border-radius:12px;font-size:.8rem;font-weight:700;box-shadow:0 4px 6px #0000004d;animation:_ngcontent-%COMP%_badgePop .3s ease-out;display:inline-flex;align-items:center;justify-content:center;min-width:20px;z-index:1001;pointer-events:none;transition:transform .3s ease;border:2px solid white}.chat-toggle-button[_ngcontent-%COMP%]:hover + .notification-badge[_ngcontent-%COMP%]{transform:translateY(-4px) scale(1.05)}@keyframes _ngcontent-%COMP%_badgePop{0%{transform:scale(0)}to{transform:scale(1)}}']})}}return n})();Gb(RE,Wb).catch(n=>console.error(n));
