var E1=Object.defineProperty,I1=Object.defineProperties;var D1=Object.getOwnPropertyDescriptors;var K0=Object.getOwnPropertySymbols;var S1=Object.prototype.hasOwnProperty,M1=Object.prototype.propertyIsEnumerable;var Y0=(n,e,t)=>e in n?E1(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ee=(n,e)=>{for(var t in e||={})S1.call(e,t)&&Y0(n,t,e[t]);if(K0)for(var t of K0(e))M1.call(e,t)&&Y0(n,t,e[t]);return n},ue=(n,e)=>I1(n,D1(e));var B=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(u){i(u)}},s=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});var J0=null;var hd=1,fd=Symbol("SIGNAL");function Te(n){let e=J0;return J0=n,e}var X0={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function T1(n){if(!(gd(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===hd)){if(!n.producerMustRecompute(n)&&!pd(n)){n.dirty=!1,n.lastCleanEpoch=hd;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=hd}}function Z0(n){return n&&(n.nextProducerIndex=0),Te(n)}function ev(n,e){if(Te(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(gd(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)md(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function pd(n){$a(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(T1(t),r!==t.version))return!0}return!1}function tv(n){if($a(n),gd(n))for(let e=0;e<n.producerNode.length;e++)md(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function md(n,e){if(P1(n),$a(n),n.liveConsumerNode.length===1)for(let r=0;r<n.producerNode.length;r++)md(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];$a(i),i.producerIndexOfThis[r]=e}}function gd(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function $a(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function P1(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function A1(){throw new Error}var O1=A1;function nv(n){O1=n}function ye(n){return typeof n=="function"}function Hi(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var za=Hi(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ls(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var At=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ye(r))try{r()}catch(o){e=o instanceof za?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{rv(o)}catch(s){e=e??[],s instanceof za?e=[...e,...s.errors]:e.push(s)}}if(e)throw new za(e)}}add(e){var t;if(e&&e!==this)if(this.closed)rv(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ls(t,e)}remove(e){let{_finalizers:t}=this;t&&ls(t,e),e instanceof n&&e._removeParent(this)}};At.EMPTY=(()=>{let n=new At;return n.closed=!0,n})();var vd=At.EMPTY;function qa(n){return n instanceof At||n&&"closed"in n&&ye(n.remove)&&ye(n.add)&&ye(n.unsubscribe)}function rv(n){ye(n)?n():n.unsubscribe()}var dn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Gi={setTimeout(n,e,...t){let{delegate:r}=Gi;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Gi;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ha(n){Gi.setTimeout(()=>{let{onUnhandledError:e}=dn;if(e)e(n);else throw n})}function yd(){}var iv=_d("C",void 0,void 0);function ov(n){return _d("E",void 0,n)}function sv(n){return _d("N",n,void 0)}function _d(n,e,t){return{kind:n,value:e,error:t}}var oi=null;function Wi(n){if(dn.useDeprecatedSynchronousErrorHandling){let e=!oi;if(e&&(oi={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=oi;if(oi=null,t)throw r}}else n()}function av(n){dn.useDeprecatedSynchronousErrorHandling&&oi&&(oi.errorThrown=!0,oi.error=n)}var si=class extends At{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,qa(e)&&e.add(this)):this.destination=k1}static create(e,t,r){return new Nr(e,t,r)}next(e){this.isStopped?Cd(sv(e),this):this._next(e)}error(e){this.isStopped?Cd(ov(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Cd(iv,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},N1=Function.prototype.bind;function bd(n,e){return N1.call(n,e)}var wd=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Ga(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Ga(r)}else Ga(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Ga(t)}}},Nr=class extends si{constructor(e,t,r){super();let i;if(ye(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&dn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&bd(e.next,o),error:e.error&&bd(e.error,o),complete:e.complete&&bd(e.complete,o)}):i=e}this.destination=new wd(i)}};function Ga(n){dn.useDeprecatedSynchronousErrorHandling?av(n):Ha(n)}function R1(n){throw n}function Cd(n,e){let{onStoppedNotification:t}=dn;t&&Gi.setTimeout(()=>t(n,e))}var k1={closed:!0,next:yd,error:R1,complete:yd};var Qi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function cv(n){return n}function lv(n){return n.length===0?cv:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var $e=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=V1(t)?t:new Nr(t,r,i);return Wi(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=uv(r),new r((i,o)=>{let s=new Nr({next:a=>{try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Qi](){return this}pipe(...t){return lv(t)(this)}toPromise(t){return t=uv(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function uv(n){var e;return(e=n??dn.Promise)!==null&&e!==void 0?e:Promise}function F1(n){return n&&ye(n.next)&&ye(n.error)&&ye(n.complete)}function V1(n){return n&&n instanceof si||F1(n)&&qa(n)}function L1(n){return ye(n?.lift)}function Ct(n){return e=>{if(L1(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function wt(n,e,t,r,i){return new xd(n,e,t,r,i)}var xd=class extends si{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var dv=Hi(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Pn=(()=>{class n extends $e{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Wa(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new dv}next(t){Wi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Wi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Wi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?vd:(this.currentObservers=null,o.push(t),new At(()=>{this.currentObservers=null,ls(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new $e;return t.source=this,t}}return n.create=(e,t)=>new Wa(e,t),n})(),Wa=class extends Pn{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:vd}};var Qe=class extends Pn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var hv=new $e(n=>n.complete());function fv(n){return n&&ye(n.schedule)}function pv(n){return n[n.length-1]}function mv(n){return ye(pv(n))?n.pop():void 0}function gv(n){return fv(pv(n))?n.pop():void 0}function yv(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(p){try{u(r.next(p))}catch(v){s(v)}}function l(p){try{u(r.throw(p))}catch(v){s(v)}}function u(p){p.done?o(p.value):i(p.value).then(a,l)}u((r=r.apply(n,e||[])).next())})}function vv(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ai(n){return this instanceof ai?(this.v=n,this):new ai(n)}function _v(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(C){return function(O){return Promise.resolve(O).then(C,v)}}function a(C,O){r[C]&&(i[C]=function(V){return new Promise(function(F,W){o.push([C,V,F,W])>1||l(C,V)})},O&&(i[C]=O(i[C])))}function l(C,O){try{u(r[C](O))}catch(V){b(o[0][3],V)}}function u(C){C.value instanceof ai?Promise.resolve(C.value.v).then(p,v):b(o[0][2],C)}function p(C){l("next",C)}function v(C){l("throw",C)}function b(C,O){C(O),o.shift(),o.length&&l(o[0][0],o[0][1])}}function bv(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof vv=="function"?vv(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(u){o({value:u,done:a})},s)}}var Qa=n=>n&&typeof n.length=="number"&&typeof n!="function";function Ka(n){return ye(n?.then)}function Ya(n){return ye(n[Qi])}function Ja(n){return Symbol.asyncIterator&&ye(n?.[Symbol.asyncIterator])}function Xa(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function j1(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Za=j1();function ec(n){return ye(n?.[Za])}function tc(n){return _v(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield ai(t.read());if(i)return yield ai(void 0);yield yield ai(r)}}finally{t.releaseLock()}})}function nc(n){return ye(n?.getReader)}function Ot(n){if(n instanceof $e)return n;if(n!=null){if(Ya(n))return B1(n);if(Qa(n))return U1(n);if(Ka(n))return $1(n);if(Ja(n))return Cv(n);if(ec(n))return z1(n);if(nc(n))return q1(n)}throw Xa(n)}function B1(n){return new $e(e=>{let t=n[Qi]();if(ye(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function U1(n){return new $e(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function $1(n){return new $e(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Ha)})}function z1(n){return new $e(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function Cv(n){return new $e(e=>{H1(n,e).catch(t=>e.error(t))})}function q1(n){return Cv(tc(n))}function H1(n,e){var t,r,i,o;return yv(this,void 0,void 0,function*(){try{for(t=bv(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function en(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function rc(n,e=0){return Ct((t,r)=>{t.subscribe(wt(r,i=>en(r,n,()=>r.next(i),e),()=>en(r,n,()=>r.complete(),e),i=>en(r,n,()=>r.error(i),e)))})}function ic(n,e=0){return Ct((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function wv(n,e){return Ot(n).pipe(ic(e),rc(e))}function xv(n,e){return Ot(n).pipe(ic(e),rc(e))}function Ev(n,e){return new $e(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function Iv(n,e){return new $e(t=>{let r;return en(t,e,()=>{r=n[Za](),en(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ye(r?.return)&&r.return()})}function oc(n,e){if(!n)throw new Error("Iterable cannot be null");return new $e(t=>{en(t,e,()=>{let r=n[Symbol.asyncIterator]();en(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Dv(n,e){return oc(tc(n),e)}function Sv(n,e){if(n!=null){if(Ya(n))return wv(n,e);if(Qa(n))return Ev(n,e);if(Ka(n))return xv(n,e);if(Ja(n))return oc(n,e);if(ec(n))return Iv(n,e);if(nc(n))return Dv(n,e)}throw Xa(n)}function An(n,e){return e?Sv(n,e):Ot(n)}function sc(...n){let e=gv(n);return An(n,e)}var Mv=Hi(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Ed(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let o=new Nr({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new Mv)}});n.subscribe(o)})}function ft(n,e){return Ct((t,r)=>{let i=0;t.subscribe(wt(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:G1}=Array;function W1(n,e){return G1(e)?n(...e):n(e)}function Tv(n){return ft(e=>W1(n,e))}var{isArray:Q1}=Array,{getPrototypeOf:K1,prototype:Y1,keys:J1}=Object;function Pv(n){if(n.length===1){let e=n[0];if(Q1(e))return{args:e,keys:null};if(X1(e)){let t=J1(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function X1(n){return n&&typeof n=="object"&&K1(n)===Y1}function Av(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Ov(n,e,t,r,i,o,s,a){let l=[],u=0,p=0,v=!1,b=()=>{v&&!l.length&&!u&&e.complete()},C=V=>u<r?O(V):l.push(V),O=V=>{o&&e.next(V),u++;let F=!1;Ot(t(V,p++)).subscribe(wt(e,W=>{i?.(W),o?C(W):e.next(W)},()=>{F=!0},void 0,()=>{if(F)try{for(u--;l.length&&u<r;){let W=l.shift();s?en(e,s,()=>O(W)):O(W)}b()}catch(W){e.error(W)}}))};return n.subscribe(wt(e,C,()=>{v=!0,b()})),()=>{a?.()}}function ac(n,e,t=1/0){return ye(e)?ac((r,i)=>ft((o,s)=>e(r,o,i,s))(Ot(n(r,i))),t):(typeof e=="number"&&(t=e),Ct((r,i)=>Ov(r,i,n,t)))}function Id(...n){let e=mv(n),{args:t,keys:r}=Pv(n),i=new $e(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),l=s,u=s;for(let p=0;p<s;p++){let v=!1;Ot(t[p]).subscribe(wt(o,b=>{v||(v=!0,u--),a[p]=b},()=>l--,void 0,()=>{(!l||!v)&&(u||o.next(r?Av(r,a):a),o.complete())}))}});return e?i.pipe(Tv(e)):i}function Dd(n,e){return Ct((t,r)=>{let i=0;t.subscribe(wt(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Sd(n,e){return ye(e)?ac(n,e,1):ac(n,1)}function ci(n){return n<=0?()=>hv:Ct((e,t)=>{let r=0;e.subscribe(wt(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Md(n){return Ct((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Ki(n,e){return Ct((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(wt(r,l=>{i?.unsubscribe();let u=0,p=o++;Ot(n(l,p)).subscribe(i=wt(r,v=>r.next(e?e(l,v,p,u++):v),()=>{i=null,a()}))},()=>{s=!0,a()}))})}var py="https://g.co/ng/security#xss",fe=class extends Error{constructor(e,t){super(Vc(e,t)),this.code=e}};function Vc(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Cs(n){return{toString:n}.toString()}var cc="__parameters__";function Z1(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function my(n,e,t){return Cs(()=>{let r=Z1(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(l,u,p){let v=l.hasOwnProperty(cc)?l[cc]:Object.defineProperty(l,cc,{value:[]})[cc];for(;v.length<=p;)v.push(null);return(v[p]=v[p]||[]).push(s),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Xn=globalThis;function qe(n){for(let e in n)if(n[e]===qe)return e;throw Error("Could not find renamed property on target object.")}function eI(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ut(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Ut).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function Hd(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var tI=qe({__forward_ref__:qe});function nn(n){return n.__forward_ref__=nn,n.toString=function(){return Ut(this())},n}function St(n){return gy(n)?n():n}function gy(n){return typeof n=="function"&&n.hasOwnProperty(tI)&&n.__forward_ref__===nn}function de(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function wi(n){return{providers:n.providers||[],imports:n.imports||[]}}function Lh(n){return Nv(n,vy)||Nv(n,yy)}function Nv(n,e){return n.hasOwnProperty(e)?n[e]:null}function nI(n){let e=n&&(n[vy]||n[yy]);return e||null}function Rv(n){return n&&(n.hasOwnProperty(kv)||n.hasOwnProperty(rI))?n[kv]:null}var vy=qe({\u0275prov:qe}),kv=qe({\u0275inj:qe}),yy=qe({ngInjectableDef:qe}),rI=qe({ngInjectorDef:qe}),ve=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=de({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function _y(n){return n&&!!n.\u0275providers}var iI=qe({\u0275cmp:qe}),oI=qe({\u0275dir:qe}),sI=qe({\u0275pipe:qe});var vc=qe({\u0275fac:qe}),us=qe({__NG_ELEMENT_ID__:qe}),Fv=qe({__NG_ENV_ID__:qe});function Zn(n){return typeof n=="string"?n:n==null?"":String(n)}function aI(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Zn(n)}function cI(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new fe(-200,n)}function jh(n,e){throw new fe(-201,!1)}var xe=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(xe||{}),Gd;function by(){return Gd}function Nt(n){let e=Gd;return Gd=n,e}function Cy(n,e,t){let r=Lh(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&xe.Optional)return null;if(e!==void 0)return e;jh(n,"Injector")}var lI={},ds=lI,Wd="__NG_DI_FLAG__",yc="ngTempTokenPath",uI="ngTokenPath",dI=/\n/gm,hI="\u0275",Vv="__source",Zi;function fI(){return Zi}function Rr(n){let e=Zi;return Zi=n,e}function pI(n,e=xe.Default){if(Zi===void 0)throw new fe(-203,!1);return Zi===null?Cy(n,void 0,e):Zi.get(n,e&xe.Optional?null:void 0,e)}function se(n,e=xe.Default){return(by()||pI)(St(n),e)}function ze(n,e=xe.Default){return se(n,Lc(e))}function Lc(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Qd(n){let e=[];for(let t=0;t<n.length;t++){let r=St(n[t]);if(Array.isArray(r)){if(r.length===0)throw new fe(900,!1);let i,o=xe.Default;for(let s=0;s<r.length;s++){let a=r[s],l=mI(a);typeof l=="number"?l===-1?i=a.token:o|=l:i=a}e.push(se(i,o))}else e.push(se(r))}return e}function wy(n,e){return n[Wd]=e,n.prototype[Wd]=e,n}function mI(n){return n[Wd]}function gI(n,e,t,r){let i=n[yc];throw e[Vv]&&i.unshift(e[Vv]),n.message=vI(`
`+n.message,i,t,r),n[uI]=i,n[yc]=null,n}function vI(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==hI?n.slice(2):n;let i=Ut(e);if(Array.isArray(e))i=e.map(Ut).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Ut(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(dI,`
  `)}`}var xy=wy(my("Optional"),8);var yI=wy(my("SkipSelf"),4);function hi(n,e){let t=n.hasOwnProperty(vc);return t?n[vc]:null}function _I(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function bI(n){return n.flat(Number.POSITIVE_INFINITY)}function Bh(n,e){n.forEach(t=>Array.isArray(t)?Bh(t,e):e(t))}function Ey(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function _c(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function CI(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function Uh(n,e,t){let r=ws(n,e);return r>=0?n[r|1]=t:(r=~r,CI(n,r,e,t)),r}function Td(n,e){let t=ws(n,e);if(t>=0)return n[t|1]}function ws(n,e){return wI(n,e,1)}function wI(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var to={},Rt=[],hs=new ve(""),Iy=new ve("",-1),Dy=new ve(""),bc=class{get(e,t=ds){if(t===ds){let r=new Error(`NullInjectorError: No provider for ${Ut(e)}!`);throw r.name="NullInjectorError",r}return t}},Sy=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Sy||{}),Rn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Rn||{}),tn=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(tn||{});function xI(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function Kd(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];II(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function EI(n){return n===3||n===4||n===6}function II(n){return n.charCodeAt(0)===64}function fs(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?Lv(n,t,i,null,e[++r]):Lv(n,t,i,null,null))}}return n}function Lv(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var My="ng-template";function DI(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&xI(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if($h(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function $h(n){return n.type===4&&n.value!==My}function SI(n,e,t){let r=n.type===4&&!t?My:n.value;return e===r}function MI(n,e,t){let r=4,i=n.attrs,o=i!==null?AI(i):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!hn(r)&&!hn(l))return!1;if(s&&hn(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!SI(n,l,t)||l===""&&e.length===1){if(hn(r))return!1;s=!0}}else if(r&8){if(i===null||!DI(n,i,l,t)){if(hn(r))return!1;s=!0}}else{let u=e[++a],p=TI(l,i,$h(n),t);if(p===-1){if(hn(r))return!1;s=!0;continue}if(u!==""){let v;if(p>o?v="":v=i[p+1].toLowerCase(),r&2&&u!==v){if(hn(r))return!1;s=!0}}}}return hn(r)||s}function hn(n){return(n&1)===0}function TI(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return OI(e,n)}function PI(n,e,t=!1){for(let r=0;r<e.length;r++)if(MI(n,e[r],t))return!0;return!1}function AI(n){for(let e=0;e<n.length;e++){let t=n[e];if(EI(t))return e}return n.length}function OI(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function jv(n,e){return n?":not("+e.trim()+")":e}function NI(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!hn(s)&&(e+=jv(o,i),i=""),r=s,o=o||!hn(r);t++}return i!==""&&(e+=jv(o,i)),e}function RI(n){return n.map(NI).join(",")}function kI(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!hn(i))break;i=o}r++}return{attrs:e,classes:t}}function Re(n){return Cs(()=>{let e=Ay(n),t=ue(ee({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Sy.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Rn.Emulated,styles:n.styles||Rt,_:null,schemas:n.schemas||null,tView:null,id:""});Oy(t);let r=n.dependencies;return t.directiveDefs=Uv(r,!1),t.pipeDefs=Uv(r,!0),t.id=jI(t),t})}function FI(n){return no(n)||Ty(n)}function VI(n){return n!==null}function xi(n){return Cs(()=>({type:n.type,bootstrap:n.bootstrap||Rt,declarations:n.declarations||Rt,imports:n.imports||Rt,exports:n.exports||Rt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Bv(n,e){if(n==null)return to;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=tn.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==tn.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Xe(n){return Cs(()=>{let e=Ay(n);return Oy(e),e})}function xs(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function no(n){return n[iI]||null}function Ty(n){return n[oI]||null}function Py(n){return n[sI]||null}function LI(n){let e=no(n)||Ty(n)||Py(n);return e!==null?e.standalone:!1}function Ay(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||to,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Rt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Bv(n.inputs,e),outputs:Bv(n.outputs),debugInfo:null}}function Oy(n){n.features?.forEach(e=>e(n))}function Uv(n,e){if(!n)return null;let t=e?Py:FI;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(VI)}function jI(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function jc(n){return{\u0275providers:n}}function BI(...n){return{\u0275providers:Ny(!0,n),\u0275fromNgModule:!0}}function Ny(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Bh(e,s=>{let a=s;Yd(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Ry(i,o),t}function Ry(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];zh(i,o=>{e(o,r)})}}function Yd(n,e,t,r){if(n=St(n),!n)return!1;let i=null,o=Rv(n),s=!o&&no(n);if(!o&&!s){let l=n.ngModule;if(o=Rv(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of l)Yd(u,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{Bh(o.imports,p=>{Yd(p,e,t,r)&&(u||=[],u.push(p))})}finally{}u!==void 0&&Ry(u,e)}if(!a){let u=hi(i)||(()=>new i);e({provide:i,useFactory:u,deps:Rt},i),e({provide:Dy,useValue:i,multi:!0},i),e({provide:hs,useValue:()=>se(i),multi:!0},i)}let l=o.providers;if(l!=null&&!a){let u=n;zh(l,p=>{e(p,u)})}}else return!1;return i!==n&&n.providers!==void 0}function zh(n,e){for(let t of n)_y(t)&&(t=t.\u0275providers),Array.isArray(t)?zh(t,e):e(t)}var UI=qe({provide:String,useValue:qe});function ky(n){return n!==null&&typeof n=="object"&&UI in n}function $I(n){return!!(n&&n.useExisting)}function zI(n){return!!(n&&n.useFactory)}function ro(n){return typeof n=="function"}function qI(n){return!!n.useClass}var Bc=new ve(""),dc={},HI={},Pd;function qh(){return Pd===void 0&&(Pd=new bc),Pd}var kn=class{},ps=class extends kn{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Xd(e,s=>this.processProvider(s)),this.records.set(Iy,Yi(void 0,this)),i.has("environment")&&this.records.set(kn,Yi(void 0,this));let o=this.records.get(Bc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Dy,Rt,xe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Te(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Te(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Rr(this),r=Nt(void 0),i;try{return e()}finally{Rr(t),Nt(r)}}get(e,t=ds,r=xe.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Fv))return e[Fv](this);r=Lc(r);let i,o=Rr(this),s=Nt(void 0);try{if(!(r&xe.SkipSelf)){let l=this.records.get(e);if(l===void 0){let u=YI(e)&&Lh(e);u&&this.injectableDefInScope(u)?l=Yi(Jd(e),dc):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=r&xe.Self?qh():this.parent;return t=r&xe.Optional&&t===ds?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[yc]=a[yc]||[]).unshift(Ut(e)),o)throw a;return gI(a,e,"R3InjectorError",this.source)}else throw a}finally{Nt(s),Rr(o)}}resolveInjectorInitializers(){let e=Te(null),t=Rr(this),r=Nt(void 0),i;try{let o=this.get(hs,Rt,xe.Self);for(let s of o)s()}finally{Rr(t),Nt(r),Te(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Ut(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new fe(205,!1)}processProvider(e){e=St(e);let t=ro(e)?e:St(e&&e.provide),r=WI(e);if(!ro(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Yi(void 0,dc,!0),i.factory=()=>Qd(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Te(null);try{return t.value===dc&&(t.value=HI,t.value=t.factory()),typeof t.value=="object"&&t.value&&KI(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Te(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=St(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Jd(n){let e=Lh(n),t=e!==null?e.factory:hi(n);if(t!==null)return t;if(n instanceof ve)throw new fe(204,!1);if(n instanceof Function)return GI(n);throw new fe(204,!1)}function GI(n){if(n.length>0)throw new fe(204,!1);let t=nI(n);return t!==null?()=>t.factory(n):()=>new n}function WI(n){if(ky(n))return Yi(void 0,n.useValue);{let e=Fy(n);return Yi(e,dc)}}function Fy(n,e,t){let r;if(ro(n)){let i=St(n);return hi(i)||Jd(i)}else if(ky(n))r=()=>St(n.useValue);else if(zI(n))r=()=>n.useFactory(...Qd(n.deps||[]));else if($I(n))r=()=>se(St(n.useExisting));else{let i=St(n&&(n.useClass||n.provide));if(QI(n))r=()=>new i(...Qd(n.deps));else return hi(i)||Jd(i)}return r}function Yi(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function QI(n){return!!n.deps}function KI(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function YI(n){return typeof n=="function"||typeof n=="object"&&n instanceof ve}function Xd(n,e){for(let t of n)Array.isArray(t)?Xd(t,e):t&&_y(t)?Xd(t.\u0275providers,e):e(t)}function Vy(n,e){n instanceof ps&&n.assertNotDestroyed();let t,r=Rr(n),i=Nt(void 0);try{return e()}finally{Rr(r),Nt(i)}}function JI(){return by()!==void 0||fI()!=null}function XI(n){return typeof n=="function"}var rr=0,pe=1,oe=2,yt=3,pn=4,vn=5,Cc=6,ms=7,mn=8,io=9,gn=10,et=11,gs=12,$v=13,co=14,Fn=15,Es=16,Ji=17,er=18,Uc=19,Ly=20,kr=21,Ad=22,fi=23,zt=25,jy=1;var pi=7,wc=8,oo=9,$t=10,Hh=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Hh||{});function ui(n){return Array.isArray(n)&&typeof n[jy]=="object"}function ir(n){return Array.isArray(n)&&n[jy]===!0}function By(n){return(n.flags&4)!==0}function $c(n){return n.componentOffset>-1}function Gh(n){return(n.flags&1)===1}function Fr(n){return!!n.template}function ZI(n){return(n[oe]&512)!==0}var Zd=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function Uy(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Ei(){return $y}function $y(n){return n.type.prototype.ngOnChanges&&(n.setInput=tD),eD}Ei.ngInherit=!0;function eD(){let n=qy(this),e=n?.current;if(e){let t=n.previous;if(t===to)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function tD(n,e,t,r,i){let o=this.declaredInputs[r],s=qy(n)||nD(n,{previous:to,current:null}),a=s.current||(s.current={}),l=s.previous,u=l[o];a[o]=new Zd(u&&u.currentValue,t,l===to),Uy(n,e,i,t)}var zy="__ngSimpleChanges__";function qy(n){return n[zy]||null}function nD(n,e){return n[zy]=e}var zv=null;var On=function(n,e,t){zv?.(n,e,t)},rD="svg",iD="math",oD=!1;function sD(){return oD}function Vn(n){for(;Array.isArray(n);)n=n[rr];return n}function Hy(n,e){return Vn(e[n])}function rn(n,e){return Vn(e[n.index])}function Gy(n,e){return n.data[e]}function zc(n,e){return n[e]}function Vr(n,e){let t=e[n];return ui(t)?t:t[rr]}function aD(n){return(n[oe]&4)===4}function Wh(n){return(n[oe]&128)===128}function cD(n){return ir(n[yt])}function xc(n,e){return e==null?null:n[e]}function Wy(n){n[Ji]=0}function lD(n){n[oe]&1024||(n[oe]|=1024,Wh(n)&&vs(n))}function uD(n,e){for(;n>0;)e=e[co],n--;return e}function Qh(n){return!!(n[oe]&9216||n[fi]?.dirty)}function eh(n){n[gn].changeDetectionScheduler?.notify(1),Qh(n)?vs(n):n[oe]&64&&(sD()?(n[oe]|=1024,vs(n)):n[gn].changeDetectionScheduler?.notify())}function vs(n){n[gn].changeDetectionScheduler?.notify();let e=ys(n);for(;e!==null&&!(e[oe]&8192||(e[oe]|=8192,!Wh(e)));)e=ys(e)}function Qy(n,e){if((n[oe]&256)===256)throw new fe(911,!1);n[kr]===null&&(n[kr]=[]),n[kr].push(e)}function dD(n,e){if(n[kr]===null)return;let t=n[kr].indexOf(e);t!==-1&&n[kr].splice(t,1)}function ys(n){let e=n[yt];return ir(e)?e[yt]:e}var me={lFrame:n_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function hD(){return me.lFrame.elementDepthCount}function fD(){me.lFrame.elementDepthCount++}function pD(){me.lFrame.elementDepthCount--}function Ky(){return me.bindingsEnabled}function mD(){return me.skipHydrationRootTNode!==null}function gD(n){return me.skipHydrationRootTNode===n}function vD(){me.skipHydrationRootTNode=null}function Ee(){return me.lFrame.lView}function _t(){return me.lFrame.tView}function R(n){return me.lFrame.contextLView=n,n[mn]}function k(n){return me.lFrame.contextLView=null,n}function qt(){let n=Yy();for(;n!==null&&n.type===64;)n=n.parent;return n}function Yy(){return me.lFrame.currentTNode}function yD(){let n=me.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Is(n,e){let t=me.lFrame;t.currentTNode=n,t.isParent=e}function Jy(){return me.lFrame.isParent}function _D(){me.lFrame.isParent=!1}function bD(){return me.lFrame.contextLView}function Kh(){let n=me.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Xy(){return me.lFrame.bindingIndex}function CD(n){return me.lFrame.bindingIndex=n}function qc(){return me.lFrame.bindingIndex++}function Hc(n){let e=me.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function wD(){return me.lFrame.inI18n}function xD(n,e){let t=me.lFrame;t.bindingIndex=t.bindingRootIndex=n,th(e)}function ED(){return me.lFrame.currentDirectiveIndex}function th(n){me.lFrame.currentDirectiveIndex=n}function ID(n){let e=me.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Zy(){return me.lFrame.currentQueryIndex}function Yh(n){me.lFrame.currentQueryIndex=n}function DD(n){let e=n[pe];return e.type===2?e.declTNode:e.type===1?n[vn]:null}function e_(n,e,t){if(t&xe.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&xe.Host);)if(i=DD(o),i===null||(o=o[co],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=me.lFrame=t_();return r.currentTNode=e,r.lView=n,!0}function Jh(n){let e=t_(),t=n[pe];me.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function t_(){let n=me.lFrame,e=n===null?null:n.child;return e===null?n_(n):e}function n_(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function r_(){let n=me.lFrame;return me.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var i_=r_;function Xh(){let n=r_();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function SD(n){return(me.lFrame.contextLView=uD(n,me.lFrame.contextLView))[mn]}function or(){return me.lFrame.selectedIndex}function mi(n){me.lFrame.selectedIndex=n}function Zh(){let n=me.lFrame;return Gy(n.tView,n.selectedIndex)}function MD(){return me.lFrame.currentNamespace}var o_=!0;function ef(){return o_}function tf(n){o_=n}function TD(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=$y(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function nf(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:p}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),p!=null&&(n.destroyHooks??=[]).push(t,p)}}function hc(n,e,t){s_(n,e,3,t)}function fc(n,e,t,r){(n[oe]&3)===t&&s_(n,e,t,r)}function Od(n,e){let t=n[oe];(t&3)===e&&(t&=16383,t+=1,n[oe]=t)}function s_(n,e,t,r){let i=r!==void 0?n[Ji]&65535:0,o=r??-1,s=e.length-1,a=0;for(let l=i;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(n[Ji]+=65536),(a<o||o==-1)&&(PD(n,t,e,l),n[Ji]=(n[Ji]&4294901760)+l+2),l++}function qv(n,e){On(4,n,e);let t=Te(null);try{e.call(n)}finally{Te(t),On(5,n,e)}}function PD(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[oe]>>14<n[Ji]>>16&&(n[oe]&3)===e&&(n[oe]+=16384,qv(a,o)):qv(a,o)}var eo=-1,gi=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function AD(n){return n instanceof gi}function OD(n){return(n.flags&8)!==0}function ND(n){return(n.flags&16)!==0}function a_(n){return n!==eo}function Ec(n){return n&32767}function RD(n){return n>>16}function Ic(n,e){let t=RD(n),r=e;for(;t>0;)r=r[co],t--;return r}var nh=!0;function Dc(n){let e=nh;return nh=n,e}var kD=256,c_=kD-1,l_=5,FD=0,Nn={};function VD(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(us)&&(r=t[us]),r==null&&(r=t[us]=FD++);let i=r&c_,o=1<<i;e.data[n+(i>>l_)]|=o}function Sc(n,e){let t=u_(n,e);if(t!==-1)return t;let r=e[pe];r.firstCreatePass&&(n.injectorIndex=e.length,Nd(r.data,n),Nd(e,null),Nd(r.blueprint,null));let i=rf(n,e),o=n.injectorIndex;if(a_(i)){let s=Ec(i),a=Ic(i,e),l=a[pe].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|l[s+u]}return e[o+8]=i,o}function Nd(n,e){n.push(0,0,0,0,0,0,0,0,e)}function u_(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function rf(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=m_(i),r===null)return eo;if(t++,i=i[co],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return eo}function rh(n,e,t){VD(n,e,t)}function d_(n,e,t){if(t&xe.Optional||n!==void 0)return n;jh(e,"NodeInjector")}function h_(n,e,t,r){if(t&xe.Optional&&r===void 0&&(r=null),!(t&(xe.Self|xe.Host))){let i=n[io],o=Nt(void 0);try{return i?i.get(e,r,t&xe.Optional):Cy(e,r,t&xe.Optional)}finally{Nt(o)}}return d_(r,e,t)}function f_(n,e,t,r=xe.Default,i){if(n!==null){if(e[oe]&2048&&!(r&xe.Self)){let s=UD(n,e,t,r,Nn);if(s!==Nn)return s}let o=p_(n,e,t,r,Nn);if(o!==Nn)return o}return h_(e,t,r,i)}function p_(n,e,t,r,i){let o=jD(t);if(typeof o=="function"){if(!e_(e,n,r))return r&xe.Host?d_(i,t,r):h_(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&xe.Optional))jh(t);else return s}finally{i_()}}else if(typeof o=="number"){let s=null,a=u_(n,e),l=eo,u=r&xe.Host?e[Fn][vn]:null;for((a===-1||r&xe.SkipSelf)&&(l=a===-1?rf(n,e):e[a+8],l===eo||!Gv(r,!1)?a=-1:(s=e[pe],a=Ec(l),e=Ic(l,e)));a!==-1;){let p=e[pe];if(Hv(o,a,p.data)){let v=LD(a,e,t,s,r,u);if(v!==Nn)return v}l=e[a+8],l!==eo&&Gv(r,e[pe].data[a+8]===u)&&Hv(o,a,e)?(s=p,a=Ec(l),e=Ic(l,e)):a=-1}}return i}function LD(n,e,t,r,i,o){let s=e[pe],a=s.data[n+8],l=r==null?$c(a)&&nh:r!=s&&(a.type&3)!==0,u=i&xe.Host&&o===a,p=pc(a,s,t,l,u);return p!==null?vi(e,s,p,a):Nn}function pc(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,l=n.directiveStart,u=n.directiveEnd,p=o>>20,v=r?a:a+p,b=i?a+p:u;for(let C=v;C<b;C++){let O=s[C];if(C<l&&t===O||C>=l&&O.type===t)return C}if(i){let C=s[l];if(C&&Fr(C)&&C.type===t)return l}return null}function vi(n,e,t,r){let i=n[t],o=e.data;if(AD(i)){let s=i;s.resolving&&cI(aI(o[t]));let a=Dc(s.canSeeViewProviders);s.resolving=!0;let l,u=s.injectImpl?Nt(s.injectImpl):null,p=e_(n,r,xe.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&TD(t,o[t],e)}finally{u!==null&&Nt(u),Dc(a),s.resolving=!1,i_()}}return i}function jD(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(us)?n[us]:void 0;return typeof e=="number"?e>=0?e&c_:BD:e}function Hv(n,e,t){let r=1<<n;return!!(t[e+(n>>l_)]&r)}function Gv(n,e){return!(n&xe.Self)&&!(n&xe.Host&&e)}var di=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return f_(this._tNode,this._lView,e,Lc(r),t)}};function BD(){return new di(qt(),Ee())}function Lr(n){return Cs(()=>{let e=n.prototype.constructor,t=e[vc]||ih(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[vc]||ih(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function ih(n){return gy(n)?()=>{let e=ih(St(n));return e&&e()}:hi(n)}function UD(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[oe]&2048&&!(s[oe]&512);){let a=p_(o,s,t,r|xe.Self,Nn);if(a!==Nn)return a;let l=o.parent;if(!l){let u=s[Ly];if(u){let p=u.get(t,Nn,r);if(p!==Nn)return p}l=m_(s),s=s[co]}o=l}return i}function m_(n){let e=n[pe],t=e.type;return t===2?e.declTNode:t===1?n[vn]:null}function Wv(n,e=null,t=null,r){let i=$D(n,e,t,r);return i.resolveInjectorInitializers(),i}function $D(n,e=null,t=null,r,i=new Set){let o=[t||Rt,BI(n)];return r=r||(typeof n=="object"?void 0:Ut(n)),new ps(o,e||qh(),r||null,i)}var Gc=(()=>{class n{static{this.THROW_IF_NOT_FOUND=ds}static{this.NULL=new bc}static create(t,r){if(Array.isArray(t))return Wv({name:""},r,t,"");{let i=t.name??"";return Wv({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=de({token:n,providedIn:"any",factory:()=>se(Iy)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();var zD="ngOriginalError";function Rd(n){return n[zD]}var tr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Rd(e);for(;t&&Rd(t);)t=Rd(t);return t||null}},g_=new ve("",{providedIn:"root",factory:()=>ze(tr).handleError.bind(void 0)}),v_=(()=>{class n{static{this.__NG_ELEMENT_ID__=qD}static{this.__NG_ENV_ID__=t=>t}}return n})(),oh=class extends v_{constructor(e){super(),this._lView=e}onDestroy(e){return Qy(this._lView,e),()=>dD(this._lView,e)}};function qD(){return new oh(Ee())}function HD(){return lo(qt(),Ee())}function lo(n,e){return new yn(rn(n,e))}var yn=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=HD}}return n})();function GD(n){return n instanceof yn?n.nativeElement:n}var sh=class extends Pn{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,JI()&&(this.destroyRef=ze(v_,{optional:!0})??void 0)}emit(e){let t=Te(null);try{super.next(e)}finally{Te(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=kd(o),i&&(i=kd(i)),s&&(s=kd(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof At&&e.add(a),a}};function kd(n){return e=>{setTimeout(n,void 0,e)}}var Bt=sh;function WD(){return this._results[Symbol.iterator]()}var ah=class n{get changes(){return this._changes??=new Bt}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=WD)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=bI(e);(this._changesDetected=!_I(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function y_(n){return(n.flags&128)===128}var __=new Map,QD=0;function KD(){return QD++}function YD(n){__.set(n[Uc],n)}function JD(n){__.delete(n[Uc])}var Qv="__ngContext__";function yi(n,e){ui(e)?(n[Qv]=e[Uc],YD(e)):n[Qv]=e}function b_(n){return w_(n[gs])}function C_(n){return w_(n[pn])}function w_(n){for(;n!==null&&!ir(n);)n=n[pn];return n}var ch;function x_(n){ch=n}function XD(){if(ch!==void 0)return ch;if(typeof document<"u")return document;throw new fe(210,!1)}var of=new ve("",{providedIn:"root",factory:()=>ZD}),ZD="ng",sf=new ve(""),jr=new ve("",{providedIn:"platform",factory:()=>"unknown"});var af=new ve("",{providedIn:"root",factory:()=>XD().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var eS="h",tS="b";var nS=()=>null;function cf(n,e,t=!1){return nS(n,e,t)}var E_=!1,rS=new ve("",{providedIn:"root",factory:()=>E_});var Mc=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${py})`}};function Ds(n){return n instanceof Mc?n.changingThisBreaksApplicationSecurity:n}function I_(n,e){let t=iS(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${py})`)}return t===e}function iS(n){return n instanceof Mc&&n.getTypeName()||null}var oS=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function D_(n){return n=String(n),n.match(oS)?n:"unsafe:"+n}var lf=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(lf||{});function _n(n){let e=sS();return e?e.sanitize(lf.URL,n)||"":I_(n,"URL")?Ds(n):D_(Zn(n))}function sS(){let n=Ee();return n&&n[gn].sanitizer}function Ss(n){return n.ownerDocument}var nr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(nr||{}),aS;function uf(n,e){return aS(n,e)}function Xi(n,e,t,r,i){if(r!=null){let o,s=!1;ir(r)?o=r:ui(r)&&(s=!0,r=r[rr]);let a=Vn(r);n===0&&t!==null?i==null?A_(e,t,a):Tc(e,t,a,i||null,!0):n===1&&t!==null?Tc(e,t,a,i||null,!0):n===2?ES(e,a,s):n===3&&e.destroyNode(a),o!=null&&DS(e,n,o,t,i)}}function cS(n,e){return n.createText(e)}function lS(n,e,t){n.setValue(e,t)}function S_(n,e,t){return n.createElement(e,t)}function uS(n,e){M_(n,e),e[rr]=null,e[vn]=null}function dS(n,e,t,r,i,o){r[rr]=i,r[vn]=e,Wc(n,r,t,1,i,o)}function M_(n,e){e[gn].changeDetectionScheduler?.notify(1),Wc(n,e,e[et],2,null,null)}function hS(n){let e=n[gs];if(!e)return Fd(n[pe],n);for(;e;){let t=null;if(ui(e))t=e[gs];else{let r=e[$t];r&&(t=r)}if(!t){for(;e&&!e[pn]&&e!==n;)ui(e)&&Fd(e[pe],e),e=e[yt];e===null&&(e=n),ui(e)&&Fd(e[pe],e),t=e&&e[pn]}e=t}}function fS(n,e,t,r){let i=$t+r,o=t.length;r>0&&(t[i-1][pn]=e),r<o-$t?(e[pn]=t[i],Ey(t,$t+r,e)):(t.push(e),e[pn]=null),e[yt]=t;let s=e[Es];s!==null&&t!==s&&pS(s,e);let a=e[er];a!==null&&a.insertView(n),eh(e),e[oe]|=128}function pS(n,e){let t=n[oo],i=e[yt][yt][Fn];e[Fn]!==i&&(n[oe]|=Hh.HasTransplantedViews),t===null?n[oo]=[e]:t.push(e)}function T_(n,e){let t=n[oo],r=t.indexOf(e);t.splice(r,1)}function lh(n,e){if(n.length<=$t)return;let t=$t+e,r=n[t];if(r){let i=r[Es];i!==null&&i!==n&&T_(i,r),e>0&&(n[t-1][pn]=r[pn]);let o=_c(n,$t+e);uS(r[pe],r);let s=o[er];s!==null&&s.detachView(o[pe]),r[yt]=null,r[pn]=null,r[oe]&=-129}return r}function P_(n,e){if(!(e[oe]&256)){let t=e[et];t.destroyNode&&Wc(n,e,t,3,null,null),hS(e)}}function Fd(n,e){if(e[oe]&256)return;let t=Te(null);try{e[oe]&=-129,e[oe]|=256,e[fi]&&tv(e[fi]),gS(n,e),mS(n,e),e[pe].type===1&&e[et].destroy();let r=e[Es];if(r!==null&&ir(e[yt])){r!==e[yt]&&T_(r,e);let i=e[er];i!==null&&i.detachView(n)}JD(e)}finally{Te(t)}}function mS(n,e){let t=n.cleanup,r=e[ms];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[ms]=null);let i=e[kr];if(i!==null){e[kr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function gS(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof gi)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],l=o[s+1];On(4,a,l);try{l.call(a)}finally{On(5,a,l)}}else{On(4,i,o);try{o.call(i)}finally{On(5,i,o)}}}}}function vS(n,e,t){return yS(n,e.parent,t)}function yS(n,e,t){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return t[rr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Rn.None||o===Rn.Emulated)return null}return rn(r,t)}}function Tc(n,e,t,r,i){n.insertBefore(e,t,r,i)}function A_(n,e,t){n.appendChild(e,t)}function Kv(n,e,t,r,i){r!==null?Tc(n,e,t,r,i):A_(n,e,t)}function _S(n,e,t,r){n.removeChild(e,t,r)}function df(n,e){return n.parentNode(e)}function bS(n,e){return n.nextSibling(e)}function CS(n,e,t){return xS(n,e,t)}function wS(n,e,t){return n.type&40?rn(n,t):null}var xS=wS,Yv;function hf(n,e,t,r){let i=vS(n,r,e),o=e[et],s=r.parent||e[vn],a=CS(s,r,e);if(i!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)Kv(o,i,t[l],a,!1);else Kv(o,i,t,a,!1);Yv!==void 0&&Yv(o,r,e,t,i)}function mc(n,e){if(e!==null){let t=e.type;if(t&3)return rn(e,n);if(t&4)return uh(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return mc(n,r);{let i=n[e.index];return ir(i)?uh(-1,i):Vn(i)}}else{if(t&32)return uf(e,n)()||Vn(n[e.index]);{let r=O_(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ys(n[Fn]);return mc(i,r)}else return mc(n,e.next)}}}return null}function O_(n,e){if(e!==null){let r=n[Fn][vn],i=e.projection;return r.projection[i]}return null}function uh(n,e){let t=$t+n+1;if(t<e.length){let r=e[t],i=r[pe].firstChild;if(i!==null)return mc(r,i)}return e[pi]}function ES(n,e,t){let r=df(n,e);r&&_S(n,r,e,t)}function ff(n,e,t,r,i,o,s){for(;t!=null;){let a=r[t.index],l=t.type;if(s&&e===0&&(a&&yi(Vn(a),r),t.flags|=2),(t.flags&32)!==32)if(l&8)ff(n,e,t.child,r,i,o,!1),Xi(e,n,i,a,o);else if(l&32){let u=uf(t,r),p;for(;p=u();)Xi(e,n,i,p,o);Xi(e,n,i,a,o)}else l&16?IS(n,e,r,t,i,o):Xi(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Wc(n,e,t,r,i,o){ff(t,r,n.firstChild,e,i,o,!1)}function IS(n,e,t,r,i,o){let s=t[Fn],l=s[vn].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let p=l[u];Xi(e,n,i,p,o)}else{let u=l,p=s[yt];y_(r)&&(u.flags|=128),ff(n,e,u,p,i,o,!0)}}function DS(n,e,t,r,i){let o=t[pi],s=Vn(t);o!==s&&Xi(e,n,r,o,i);for(let a=$t;a<t.length;a++){let l=t[a];Wc(l[pe],l,n,e,r,o)}}function SS(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:nr.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=nr.Important),n.setStyle(t,r,i,o))}}function MS(n,e,t){n.setAttribute(e,"style",t)}function N_(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function R_(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Kd(n,e,r),i!==null&&N_(n,e,i),o!==null&&MS(n,e,o)}var Ht={};function y(n=1){k_(_t(),Ee(),or()+n,!1)}function k_(n,e,t,r){if(!r)if((e[oe]&3)===3){let o=n.preOrderCheckHooks;o!==null&&hc(e,o,t)}else{let o=n.preOrderHooks;o!==null&&fc(e,o,0,t)}mi(t)}function Q(n,e=xe.Default){let t=Ee();if(t===null)return se(n,e);let r=qt();return f_(r,t,St(n),e)}function F_(n,e,t,r,i,o){let s=Te(null);try{let a=null;i&tn.SignalBased&&(a=e[r][fd]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&tn.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):Uy(e,a,r,o)}finally{Te(s)}}function TS(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)mi(~i);else{let o=i,s=t[++r],a=t[++r];xD(s,o);let l=e[o];a(2,l)}}}finally{mi(-1)}}function Qc(n,e,t,r,i,o,s,a,l,u,p){let v=e.blueprint.slice();return v[rr]=i,v[oe]=r|4|128|8|64,(u!==null||n&&n[oe]&2048)&&(v[oe]|=2048),Wy(v),v[yt]=v[co]=n,v[mn]=t,v[gn]=s||n&&n[gn],v[et]=a||n&&n[et],v[io]=l||n&&n[io]||null,v[vn]=o,v[Uc]=KD(),v[Cc]=p,v[Ly]=u,v[Fn]=e.type==2?n[Fn]:v,v}function Kc(n,e,t,r,i){let o=n.data[e];if(o===null)o=PS(n,e,t,r,i),wD()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=yD();o.injectorIndex=s===null?-1:s.injectorIndex}return Is(o,!0),o}function PS(n,e,t,r,i){let o=Yy(),s=Jy(),a=s?o:o&&o.parent,l=n.data[e]=FS(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=l),o!==null&&(s?o.child==null&&l.parent!==null&&(o.child=l):o.next===null&&(o.next=l,l.prev=o)),l}function V_(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function L_(n,e,t,r,i){let o=or(),s=r&2;try{mi(-1),s&&e.length>zt&&k_(n,e,zt,!1),On(s?2:0,i),t(r,i)}finally{mi(o),On(s?3:1,i)}}function j_(n,e,t){if(By(e)){let r=Te(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let l=t[s];a.contentQueries(1,l,s)}}}finally{Te(r)}}}function B_(n,e,t){Ky()&&($S(n,e,t,rn(t,e)),(t.flags&64)===64&&G_(n,e,t))}function U_(n,e,t=rn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function $_(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=pf(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function pf(n,e,t,r,i,o,s,a,l,u,p){let v=zt+r,b=v+i,C=AS(v,b),O=typeof u=="function"?u():u;return C[pe]={type:n,blueprint:C,template:t,queries:null,viewQuery:a,declTNode:e,data:C.slice().fill(null,v),bindingStartIndex:v,expandoStartIndex:b,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:O,incompleteFirstPass:!1,ssrId:p}}function AS(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Ht);return t}function OS(n,e,t,r){let o=r.get(rS,E_)||t===Rn.ShadowDom,s=n.selectRootElement(e,o);return NS(s),s}function NS(n){RS(n)}var RS=()=>null;function kS(n,e,t,r){let i=K_(e);i.push(t),n.firstCreatePass&&Y_(n).push(r,i.length-1)}function FS(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return mD()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Jv(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,l=tn.None;Array.isArray(s)?(a=s[0],l=s[1]):a=s;let u=o;if(i!==null){if(!i.hasOwnProperty(o))continue;u=i[o]}n===0?Xv(r,t,u,a,l):Xv(r,t,u,a)}return r}function Xv(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function VS(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],l=null,u=null;for(let p=r;p<i;p++){let v=o[p],b=t?t.get(v):null,C=b?b.inputs:null,O=b?b.outputs:null;l=Jv(0,v.inputs,p,l,C),u=Jv(1,v.outputs,p,u,O);let V=l!==null&&s!==null&&!$h(e)?ZS(l,p,s):null;a.push(V)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=u}function LS(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function z_(n,e,t,r,i,o,s,a){let l=rn(e,t),u=e.inputs,p;!a&&u!=null&&(p=u[r])?(mf(n,t,p,r,i),$c(e)&&jS(t,e.index)):e.type&3?(r=LS(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(l,r,i)):e.type&12}function jS(n,e){let t=Vr(e,n);t[oe]&16||(t[oe]|=64)}function q_(n,e,t,r){if(Ky()){let i=r===null?null:{"":-1},o=qS(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&H_(n,e,t,s,i,a),i&&HS(t,r,i)}t.mergedAttrs=fs(t.mergedAttrs,t.attrs)}function H_(n,e,t,r,i,o){for(let u=0;u<r.length;u++)rh(Sc(t,e),n,r[u].type);WS(t,n.data.length,r.length);for(let u=0;u<r.length;u++){let p=r[u];p.providersResolver&&p.providersResolver(p)}let s=!1,a=!1,l=V_(n,e,r.length,null);for(let u=0;u<r.length;u++){let p=r[u];t.mergedAttrs=fs(t.mergedAttrs,p.hostAttrs),QS(n,t,e,l,p),GS(l,p,i),p.contentQueries!==null&&(t.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(t.flags|=64);let v=p.type.prototype;!s&&(v.ngOnChanges||v.ngOnInit||v.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(v.ngOnChanges||v.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}VS(n,t,o)}function BS(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;US(s)!=a&&s.push(a),s.push(t,r,o)}}function US(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function $S(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;$c(t)&&KS(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Sc(t,e),yi(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let l=n.data[a],u=vi(e,n,a,t);if(yi(u,e),s!==null&&XS(e,a-i,u,l,t,s),Fr(l)){let p=Vr(t.index,e);p[mn]=vi(e,n,a,t)}}}function G_(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=ED();try{mi(o);for(let a=r;a<i;a++){let l=n.data[a],u=e[a];th(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&zS(l,u)}}finally{mi(-1),th(s)}}function zS(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function qS(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(PI(e,s.selectors,!1))if(r||(r=[]),Fr(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let l=a.length;dh(n,e,l)}else r.unshift(s),dh(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function dh(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function HS(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new fe(-301,!1);r.push(e[i],o)}}}function GS(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Fr(e)&&(t[""]=n)}}function WS(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function QS(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=hi(i.type,!0)),s=new gi(o,Fr(i),Q);n.blueprint[r]=s,t[r]=s,BS(n,e,r,V_(n,t,i.hostVars,Ht),i)}function KS(n,e,t){let r=rn(e,n),i=$_(t),o=n[gn].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=Yc(n,Qc(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function YS(n,e,t,r,i,o){let s=rn(n,e);JS(e[et],s,o,n.value,t,r,i)}function JS(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Zn(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function XS(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let l=s[a++],u=s[a++],p=s[a++],v=s[a++];F_(r,t,l,u,p,v)}}function ZS(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function W_(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function Q_(n,e){let t=n.contentQueries;if(t!==null){let r=Te(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];Yh(o),a.contentQueries(2,e[s],s)}}}finally{Te(r)}}}function Yc(n,e){return n[gs]?n[$v][pn]=e:n[gs]=e,n[$v]=e,e}function hh(n,e,t){Yh(0);let r=Te(null);try{e(n,t)}finally{Te(r)}}function K_(n){return n[ms]||(n[ms]=[])}function Y_(n){return n.cleanup||(n.cleanup=[])}function J_(n,e){let t=n[io],r=t?t.get(tr,null):null;r&&r.handleError(e)}function mf(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],l=t[o++],u=e[s],p=n.data[s];F_(p,u,r,a,l,i)}}function gf(n,e,t){let r=Hy(e,n);lS(n[et],r,t)}function eM(n,e){let t=Vr(e,n),r=t[pe];tM(r,t);let i=t[rr];i!==null&&t[Cc]===null&&(t[Cc]=cf(i,t[io])),vf(r,t,t[mn])}function tM(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function vf(n,e,t){Jh(e);try{let r=n.viewQuery;r!==null&&hh(1,r,t);let i=n.template;i!==null&&L_(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[er]?.finishViewCreation(n),n.staticContentQueries&&Q_(n,e),n.staticViewQueries&&hh(2,n.viewQuery,t);let o=n.components;o!==null&&nM(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[oe]&=-5,Xh()}}function nM(n,e){for(let t=0;t<e.length;t++)eM(n,e[t])}function rM(n,e,t,r){let i=Te(null);try{let o=e.tView,a=n[oe]&4096?4096:16,l=Qc(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];l[Es]=u;let p=n[er];return p!==null&&(l[er]=p.createEmbeddedView(o)),vf(o,l,t),l}finally{Te(i)}}function Zv(n,e){return!e||e.firstChild===null||y_(n)}function iM(n,e,t,r=!0){let i=e[pe];if(fS(i,e,n,t),r){let s=uh(t,n),a=e[et],l=df(a,n[pi]);l!==null&&dS(i,n[vn],a,e,l,s)}let o=e[Cc];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Pc(n,e,t,r,i=!1){for(;t!==null;){let o=e[t.index];o!==null&&r.push(Vn(o)),ir(o)&&oM(o,r);let s=t.type;if(s&8)Pc(n,e,t.child,r);else if(s&32){let a=uf(t,e),l;for(;l=a();)r.push(l)}else if(s&16){let a=O_(e,t);if(Array.isArray(a))r.push(...a);else{let l=ys(e[Fn]);Pc(l[pe],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function oM(n,e){for(let t=$t;t<n.length;t++){let r=n[t],i=r[pe].firstChild;i!==null&&Pc(r[pe],r,i,e)}n[pi]!==n[rr]&&e.push(n[pi])}var X_=[];function sM(n){return n[fi]??aM(n)}function aM(n){let e=X_.pop()??Object.create(lM);return e.lView=n,e}function cM(n){n.lView[fi]!==n&&(n.lView=null,X_.push(n))}var lM=ue(ee({},X0),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{vs(n.lView)},consumerOnSignalRead(){this.lView[fi]=this}}),Z_=100;function eb(n,e=!0,t=0){let r=n[gn],i=r.rendererFactory,o=!1;o||i.begin?.();try{uM(n,t)}catch(s){throw e&&J_(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function uM(n,e){fh(n,e);let t=0;for(;Qh(n);){if(t===Z_)throw new fe(103,!1);t++,fh(n,1)}}function dM(n,e,t,r){let i=e[oe];if((i&256)===256)return;let o=!1;!o&&e[gn].inlineEffectRunner?.flush(),Jh(e);let s=null,a=null;!o&&hM(n)&&(a=sM(e),s=Z0(a));try{Wy(e),CD(n.bindingStartIndex),t!==null&&L_(n,e,t,2,r);let l=(i&3)===3;if(!o)if(l){let v=n.preOrderCheckHooks;v!==null&&hc(e,v,null)}else{let v=n.preOrderHooks;v!==null&&fc(e,v,0,null),Od(e,0)}if(fM(e),tb(e,0),n.contentQueries!==null&&Q_(n,e),!o)if(l){let v=n.contentCheckHooks;v!==null&&hc(e,v)}else{let v=n.contentHooks;v!==null&&fc(e,v,1),Od(e,1)}TS(n,e);let u=n.components;u!==null&&rb(e,u,0);let p=n.viewQuery;if(p!==null&&hh(2,p,r),!o)if(l){let v=n.viewCheckHooks;v!==null&&hc(e,v)}else{let v=n.viewHooks;v!==null&&fc(e,v,2),Od(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Ad]){for(let v of e[Ad])v();e[Ad]=null}o||(e[oe]&=-73)}catch(l){throw vs(e),l}finally{a!==null&&(ev(a,s),cM(a)),Xh()}}function hM(n){return n.type!==2}function tb(n,e){for(let t=b_(n);t!==null;t=C_(t))for(let r=$t;r<t.length;r++){let i=t[r];nb(i,e)}}function fM(n){for(let e=b_(n);e!==null;e=C_(e)){if(!(e[oe]&Hh.HasTransplantedViews))continue;let t=e[oo];for(let r=0;r<t.length;r++){let i=t[r],o=i[yt];lD(i)}}}function pM(n,e,t){let r=Vr(e,n);nb(r,t)}function nb(n,e){Wh(n)&&fh(n,e)}function fh(n,e){let r=n[pe],i=n[oe],o=n[fi],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&pd(o)),o&&(o.dirty=!1),n[oe]&=-9217,s)dM(r,n,r.template,n[mn]);else if(i&8192){tb(n,1);let a=r.components;a!==null&&rb(n,a,1)}}function rb(n,e,t){for(let r=0;r<e.length;r++)pM(n,e[r],t)}function yf(n){for(n[gn].changeDetectionScheduler?.notify();n;){n[oe]|=64;let e=ys(n);if(ZI(n)&&!e)return n;n=e}return null}var _i=class{get rootNodes(){let e=this._lView,t=e[pe];return Pc(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[mn]}set context(e){this._lView[mn]=e}get destroyed(){return(this._lView[oe]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[yt];if(ir(e)){let t=e[wc],r=t?t.indexOf(this):-1;r>-1&&(lh(e,r),_c(t,r))}this._attachedToViewContainer=!1}P_(this._lView[pe],this._lView)}onDestroy(e){Qy(this._lView,e)}markForCheck(){yf(this._cdRefInjectingView||this._lView)}detach(){this._lView[oe]&=-129}reattach(){eh(this._lView),this._lView[oe]|=128}detectChanges(){this._lView[oe]|=1024,eb(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new fe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,M_(this._lView[pe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new fe(902,!1);this._appRef=e,eh(this._lView)}},bi=(()=>{class n{static{this.__NG_ELEMENT_ID__=vM}}return n})(),mM=bi,gM=class extends mM{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=rM(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new _i(i)}};function vM(){return Jc(qt(),Ee())}function Jc(n,e){return n.type&4?new gM(e,n,lo(n,e)):null}var E5=new RegExp(`^(\\d+)*(${tS}|${eS})*(.*)`);var yM=()=>null;function ey(n,e){return yM(n,e)}var ph=class{},mh=class{},Ac=class{};function _M(n){let e=Error(`No component factory found for ${Ut(n)}.`);return e[bM]=n,e}var bM="ngComponent";var gh=class{resolveComponentFactory(e){throw _M(e)}},_f=(()=>{class n{static{this.NULL=new gh}}return n})(),_s=class{},Ii=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>CM()}}return n})();function CM(){let n=Ee(),e=qt(),t=Vr(e.index,n);return(ui(t)?t:n)[et]}var wM=(()=>{class n{static{this.\u0275prov=de({token:n,providedIn:"root",factory:()=>null})}}return n})(),Vd={};var ty=new Set;function bf(n){ty.has(n)||(ty.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function ny(...n){}function xM(){let n=typeof Xn.requestAnimationFrame=="function",e=Xn[n?"requestAnimationFrame":"setTimeout"],t=Xn[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}var vt=class n{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Bt(!1),this.onMicrotaskEmpty=new Bt(!1),this.onStable=new Bt(!1),this.onError=new Bt(!1),typeof Zone>"u")throw new fe(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=xM().nativeRequestAnimationFrame,DM(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new fe(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new fe(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,EM,ny,ny);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},EM={};function Cf(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function IM(n){n.isCheckStableRunning||n.lastRequestAnimationFrameId!==-1||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Xn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,vh(n),n.isCheckStableRunning=!0,Cf(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),vh(n))}function DM(n){let e=()=>{IM(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,s,a)=>{if(SM(a))return t.invokeTask(i,o,s,a);try{return ry(n),t.invokeTask(i,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),iy(n)}},onInvoke:(t,r,i,o,s,a,l)=>{try{return ry(n),t.invoke(i,o,s,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),iy(n)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,vh(n),Cf(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function vh(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.lastRequestAnimationFrameId!==-1?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function ry(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function iy(n){n._nesting--,Cf(n)}function SM(n){return!Array.isArray(n)||n.length!==1?!1:n[0].data?.__ignore_ng_zone__===!0}var ib=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let t=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of t)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=de({token:n,providedIn:"root",factory:()=>new n})}}return n})();function yh(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Hd(i,a);else if(o==2){let l=a,u=e[++s];r=Hd(r,l+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var _h=class extends _f{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=no(e);return new Oc(t,this.ngModule)}};function oy(n){let e=[];for(let t in n){if(!n.hasOwnProperty(t))continue;let r=n[t];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:t})}return e}function MM(n){let e=n.toLowerCase();return e==="svg"?rD:e==="math"?iD:null}var bh=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Lc(r);let i=this.injector.get(e,Vd,r);return i!==Vd||t===Vd?i:this.parentInjector.get(e,t,r)}},Oc=class extends Ac{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=oy(e.inputs);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return oy(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=RI(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=Te(null);try{i=i||this.ngModule;let s=i instanceof kn?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new bh(e,s):e,l=a.get(_s,null);if(l===null)throw new fe(407,!1);let u=a.get(wM,null),p=a.get(ib,null),v=a.get(ph,null),b={rendererFactory:l,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:p,changeDetectionScheduler:v},C=l.createRenderer(null,this.componentDef),O=this.componentDef.selectors[0][0]||"div",V=r?OS(C,r,this.componentDef.encapsulation,a):S_(C,O,MM(O)),F=512;this.componentDef.signals?F|=4096:this.componentDef.onPush||(F|=16);let W=null;V!==null&&(W=cf(V,a,!0));let ie=pf(0,null,null,1,0,null,null,null,null,null,null),X=Qc(null,ie,null,F,null,null,b,C,a,null,W);Jh(X);let Se,Le;try{let Me=this.componentDef,M,w=null;Me.findHostDirectiveDefs?(M=[],w=new Map,Me.findHostDirectiveDefs(Me,M,w),M.push(Me)):M=[Me];let E=TM(X,V),T=PM(E,V,Me,M,X,b,C);Le=Gy(ie,zt),V&&NM(C,Me,V,r),t!==void 0&&RM(Le,this.ngContentSelectors,t),Se=OM(T,Me,M,w,X,[kM]),vf(ie,X,null)}finally{Xh()}return new Ch(this.componentType,Se,lo(Le,X),X,Le)}finally{Te(o)}}},Ch=class extends mh{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new _i(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;mf(o[pe],o,i,e,t),this.previousInputValues.set(e,t);let s=Vr(this._tNode.index,o);yf(s)}}get injector(){return new di(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function TM(n,e){let t=n[pe],r=zt;return n[r]=e,Kc(t,r,2,"#host",null)}function PM(n,e,t,r,i,o,s){let a=i[pe];AM(r,n,e,s);let l=null;e!==null&&(l=cf(e,i[io]));let u=o.rendererFactory.createRenderer(e,t),p=16;t.signals?p=4096:t.onPush&&(p=64);let v=Qc(i,$_(t),null,p,i[n.index],n,o,u,null,null,l);return a.firstCreatePass&&dh(a,n,r.length-1),Yc(i,v),i[n.index]=v}function AM(n,e,t,r){for(let i of n)e.mergedAttrs=fs(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(yh(e,e.mergedAttrs,!0),t!==null&&R_(r,t,e))}function OM(n,e,t,r,i,o){let s=qt(),a=i[pe],l=rn(s,i);H_(a,i,s,t,null,r);for(let p=0;p<t.length;p++){let v=s.directiveStart+p,b=vi(i,a,v,s);yi(b,i)}G_(a,i,s),l&&yi(l,i);let u=vi(i,a,s.directiveStart+s.componentOffset,s);if(n[mn]=i[mn]=u,o!==null)for(let p of o)p(u,e);return j_(a,s,i),u}function NM(n,e,t,r){if(r)Kd(n,t,["ng-version","17.3.12"]);else{let{attrs:i,classes:o}=kI(e.selectors[0]);i&&Kd(n,t,i),o&&o.length>0&&N_(n,t,o.join(" "))}}function RM(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function kM(){let n=qt();nf(Ee()[pe],n)}var uo=(()=>{class n{static{this.__NG_ELEMENT_ID__=FM}}return n})();function FM(){let n=qt();return sb(n,Ee())}var VM=uo,ob=class extends VM{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return lo(this._hostTNode,this._hostLView)}get injector(){return new di(this._hostTNode,this._hostLView)}get parentInjector(){let e=rf(this._hostTNode,this._hostLView);if(a_(e)){let t=Ic(e,this._hostLView),r=Ec(e),i=t[pe].data[r+8];return new di(i,t)}else return new di(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=sy(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-$t}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=ey(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,Zv(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!XI(e),a;if(s)a=t;else{let O=t||{};a=O.index,r=O.injector,i=O.projectableNodes,o=O.environmentInjector||O.ngModuleRef}let l=s?e:new Oc(no(e)),u=r||this.parentInjector;if(!o&&l.ngModule==null){let V=(s?u:this.parentInjector).get(kn,null);V&&(o=V)}let p=no(l.componentType??{}),v=ey(this._lContainer,p?.id??null),b=v?.firstChild??null,C=l.create(u,i,b,o);return this.insertImpl(C.hostView,a,Zv(this._hostTNode,v)),C}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(cD(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[yt],u=new ob(l,l[vn],l[yt]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return iM(s,i,o,r),e.attachToViewContainerRef(),Ey(Ld(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=sy(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=lh(this._lContainer,t);r&&(_c(Ld(this._lContainer),t),P_(r[pe],r))}detach(e){let t=this._adjustIndex(e,-1),r=lh(this._lContainer,t);return r&&_c(Ld(this._lContainer),t)!=null?new _i(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function sy(n){return n[wc]}function Ld(n){return n[wc]||(n[wc]=[])}function sb(n,e){let t,r=e[n.index];return ir(r)?t=r:(t=W_(r,e,null,n),e[n.index]=t,Yc(e,t)),jM(t,e,n,r),new ob(t,n,e)}function LM(n,e){let t=n[et],r=t.createComment(""),i=rn(e,n),o=df(t,i);return Tc(t,o,r,bS(t,i),!1),r}var jM=$M,BM=()=>!1;function UM(n,e,t){return BM(n,e,t)}function $M(n,e,t,r){if(n[pi])return;let i;t.type&8?i=Vn(r):i=LM(e,t),n[pi]=i}var wh=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},xh=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)wf(e,t).matches!==null&&this.queries[t].setDirty()}},Eh=class{constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=YM(e):this.predicate=e}},Ih=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Dh=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,zM(t,o)),this.matchTNodeWithReadOption(e,t,pc(t,e,o,!1,!1))}else r===bi?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,pc(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===yn||i===uo||i===bi&&t.type&4)this.addMatch(t.index,-2);else{let o=pc(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function zM(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function qM(n,e){return n.type&11?lo(n,e):n.type&4?Jc(n,e):null}function HM(n,e,t,r){return t===-1?qM(e,n):t===-2?GM(n,e,r):vi(n,n[pe],t,e)}function GM(n,e,t){if(t===yn)return lo(e,n);if(t===bi)return Jc(e,n);if(t===uo)return sb(e,n)}function ab(n,e,t,r){let i=e[er].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let u=s[l];if(u<0)a.push(null);else{let p=o[u];a.push(HM(e,p,s[l+1],t.metadata.read))}}i.matches=a}return i.matches}function Sh(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=ab(n,e,i,t);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)r.push(s[a/2]);else{let u=o[a+1],p=e[-l];for(let v=$t;v<p.length;v++){let b=p[v];b[Es]===b[yt]&&Sh(b[pe],b,u,r)}if(p[oo]!==null){let v=p[oo];for(let b=0;b<v.length;b++){let C=v[b];Sh(C[pe],C,u,r)}}}}}return r}function WM(n,e){return n[er].queries[e].queryList}function QM(n,e,t){let r=new ah((t&4)===4);return kS(n,e,r,r.destroy),(e[er]??=new xh).queries.push(new wh(r))-1}function KM(n,e,t){let r=_t();return r.firstCreatePass&&(JM(r,new Eh(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),QM(r,Ee(),e)}function YM(n){return n.split(",").map(e=>e.trim())}function JM(n,e,t){n.queries===null&&(n.queries=new Ih),n.queries.track(new Dh(e,t))}function wf(n,e){return n.queries.getByIndex(e)}function XM(n,e){let t=n[pe],r=wf(t,e);return r.crossesNgTemplate?Sh(t,n,e,[]):ab(t,n,r,e)}function ZM(n){return typeof n=="function"&&n[fd]!==void 0}function cb(n){return ZM(n)&&typeof n.set=="function"}function eT(n){return Object.getPrototypeOf(n.prototype).constructor}function kt(n){let e=eT(n.type),t=!0,r=[n];for(;e;){let i;if(Fr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new fe(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=lc(n.inputs),s.inputTransforms=lc(n.inputTransforms),s.declaredInputs=lc(n.declaredInputs),s.outputs=lc(n.outputs);let a=i.hostBindings;a&&oT(n,a);let l=i.viewQuery,u=i.contentQueries;if(l&&rT(n,l),u&&iT(n,u),tT(n,i),eI(n.outputs,i.outputs),Fr(i)&&i.data.animation){let p=n.data;p.animation=(p.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===kt&&(t=!1)}}e=Object.getPrototypeOf(e)}nT(r)}function tT(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function nT(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=fs(i.hostAttrs,t=fs(t,i.hostAttrs))}}function lc(n){return n===to?{}:n===Rt?[]:n}function rT(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function iT(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function oT(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}var so=class{};var Nc=class extends so{constructor(e){super(),this.componentFactoryResolver=new _h(this),this.instance=null;let t=new ps([...e.providers,{provide:so,useValue:this},{provide:_f,useValue:this.componentFactoryResolver}],e.parent||qh(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function sT(n,e,t=null){return new Nc({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var Xc=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Qe(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function lb(n){return cT(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function aT(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function cT(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function xf(n,e,t){return n[e]=t}function Ln(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Ef(n,e,t,r){let i=Ln(n,e,t);return Ln(n,e+1,r)||i}function ub(n,e,t,r,i){let o=Ef(n,e,t,r);return Ln(n,e+2,i)||o}function lT(n){return(n.flags&32)===32}function uT(n,e,t,r,i,o,s,a,l){let u=e.consts,p=Kc(e,n,4,s||null,xc(u,a));q_(e,t,p,xc(u,l)),nf(e,p);let v=p.tView=pf(2,p,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,p),v.queries=e.queries.embeddedTView(p)),p}function U(n,e,t,r,i,o,s,a){let l=Ee(),u=_t(),p=n+zt,v=u.firstCreatePass?uT(p,u,l,e,t,r,i,o,s):u.data[p];Is(v,!1);let b=dT(u,l,v,n);ef()&&hf(u,l,b,v),yi(b,l);let C=W_(b,l,b,v);return l[p]=C,Yc(l,C),UM(C,v,l),Gh(v)&&B_(u,l,v),s!=null&&U_(l,v,a),U}var dT=hT;function hT(n,e,t,r){return tf(!0),e[et].createComment("")}function Ms(n,e,t,r){let i=Ee(),o=qc();if(Ln(i,o,e)){let s=_t(),a=Zh();YS(a,i,n,e,t,r)}return Ms}function fT(n,e,t,r){return Ln(n,qc(),t)?e+Zn(t)+r:Ht}function pT(n,e,t,r,i,o){let s=Xy(),a=Ef(n,s,t,i);return Hc(2),a?e+Zn(t)+r+Zn(i)+o:Ht}function mT(n,e,t,r,i,o,s,a){let l=Xy(),u=ub(n,l,t,i,s);return Hc(3),u?e+Zn(t)+r+Zn(i)+o+Zn(s)+a:Ht}function uc(n,e){return n<<17|e<<2}function Ci(n){return n>>17&32767}function gT(n){return(n&2)==2}function vT(n,e){return n&131071|e<<17}function Mh(n){return n|2}function ao(n){return(n&131068)>>2}function jd(n,e){return n&-131069|e<<2}function yT(n){return(n&1)===1}function Th(n){return n|1}function _T(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ci(s),l=ao(s);n[r]=t;let u=!1,p;if(Array.isArray(t)){let v=t;p=v[1],(p===null||ws(v,p)>0)&&(u=!0)}else p=t;if(i)if(l!==0){let b=Ci(n[a+1]);n[r+1]=uc(b,a),b!==0&&(n[b+1]=jd(n[b+1],r)),n[a+1]=vT(n[a+1],r)}else n[r+1]=uc(a,0),a!==0&&(n[a+1]=jd(n[a+1],r)),a=r;else n[r+1]=uc(l,0),a===0?a=r:n[l+1]=jd(n[l+1],r),l=r;u&&(n[r+1]=Mh(n[r+1])),ay(n,p,r,!0),ay(n,p,r,!1),bT(e,p,n,r,o),s=uc(a,l),o?e.classBindings=s:e.styleBindings=s}function bT(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&ws(o,e)>=0&&(t[r+1]=Th(t[r+1]))}function ay(n,e,t,r){let i=n[t+1],o=e===null,s=r?Ci(i):ao(i),a=!1;for(;s!==0&&(a===!1||o);){let l=n[s],u=n[s+1];CT(l,e)&&(a=!0,n[s+1]=r?Th(u):Mh(u)),s=r?Ci(u):ao(u)}a&&(n[t+1]=r?Mh(i):Th(i))}function CT(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?ws(n,e)>=0:!1}var fn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function wT(n){return n.substring(fn.key,fn.keyEnd)}function xT(n){return ET(n),db(n,hb(n,0,fn.textEnd))}function db(n,e){let t=fn.textEnd;return t===e?-1:(e=fn.keyEnd=IT(n,fn.key=e,t),hb(n,e,t))}function ET(n){fn.key=0,fn.keyEnd=0,fn.value=0,fn.valueEnd=0,fn.textEnd=n.length}function hb(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function IT(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function D(n,e,t){let r=Ee(),i=qc();if(Ln(r,i,e)){let o=_t(),s=Zh();z_(o,s,r,n,e,r[et],t,!1)}return D}function Ph(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";mf(n,t,o[s],s,r)}function bn(n,e,t){return fb(n,e,t,!1),bn}function _e(n,e){return fb(n,e,null,!0),_e}function If(n){ST(NT,DT,n,!0)}function DT(n,e){for(let t=xT(e);t>=0;t=db(e,t))Uh(n,wT(e),!0)}function fb(n,e,t,r){let i=Ee(),o=_t(),s=Hc(2);if(o.firstUpdatePass&&mb(o,n,s,r),e!==Ht&&Ln(i,s,e)){let a=o.data[or()];gb(o,a,i,i[et],n,i[s+1]=kT(e,t),r,s)}}function ST(n,e,t,r){let i=_t(),o=Hc(2);i.firstUpdatePass&&mb(i,null,o,r);let s=Ee();if(t!==Ht&&Ln(s,o,t)){let a=i.data[or()];if(vb(a,r)&&!pb(i,o)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(t=Hd(l,t||"")),Ph(i,a,s,t,r)}else RT(i,a,s,s[et],s[o+1],s[o+1]=OT(n,e,t),r,o)}}function pb(n,e){return e>=n.expandoStartIndex}function mb(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[or()],s=pb(n,t);vb(o,r)&&e===null&&!s&&(e=!1),e=MT(i,o,e,r),_T(i,o,e,t,s,r)}}function MT(n,e,t,r){let i=ID(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Bd(null,n,e,t,r),t=bs(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Bd(i,n,e,t,r),o===null){let l=TT(n,e,r);l!==void 0&&Array.isArray(l)&&(l=Bd(null,n,e,l[1],r),l=bs(l,e.attrs,r),PT(n,e,r,l))}else o=AT(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function TT(n,e,t){let r=t?e.classBindings:e.styleBindings;if(ao(r)!==0)return n[Ci(r)]}function PT(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Ci(i)]=r}function AT(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=bs(r,s,t)}return bs(r,e.attrs,t)}function Bd(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=bs(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function bs(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Uh(n,s,t?!0:e[++o]))}return n===void 0?null:n}function OT(n,e,t){if(t==null||t==="")return Rt;let r=[],i=Ds(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function NT(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&Uh(n,r,t)}function RT(n,e,t,r,i,o,s,a){i===Ht&&(i=Rt);let l=0,u=0,p=0<i.length?i[0]:null,v=0<o.length?o[0]:null;for(;p!==null||v!==null;){let b=l<i.length?i[l+1]:void 0,C=u<o.length?o[u+1]:void 0,O=null,V;p===v?(l+=2,u+=2,b!==C&&(O=v,V=C)):v===null||p!==null&&p<v?(l+=2,O=p):(u+=2,O=v,V=C),O!==null&&gb(n,e,t,r,O,V,s,a),p=l<i.length?i[l]:null,v=u<o.length?o[u]:null}}function gb(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let l=n.data,u=l[a+1],p=yT(u)?cy(l,e,t,i,ao(u),s):void 0;if(!Rc(p)){Rc(o)||gT(u)&&(o=cy(l,null,t,i,a,s));let v=Hy(or(),t);SS(r,s,v,i,o)}}function cy(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let l=n[i],u=Array.isArray(l),p=u?l[1]:l,v=p===null,b=t[i+1];b===Ht&&(b=v?Rt:void 0);let C=v?Td(b,r):p===r?b:void 0;if(u&&!Rc(C)&&(C=Td(l,r)),Rc(C)&&(a=C,s))return a;let O=n[i+1];i=s?Ci(O):ao(O)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=Td(l,r))}return a}function Rc(n){return n!==void 0}function kT(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Ut(Ds(n)))),n}function vb(n,e){return(n.flags&(e?8:16))!==0}function FT(n,e,t,r,i,o){let s=e.consts,a=xc(s,i),l=Kc(e,n,2,r,a);return q_(e,t,l,xc(s,o)),l.attrs!==null&&yh(l,l.attrs,!1),l.mergedAttrs!==null&&yh(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function h(n,e,t,r){let i=Ee(),o=_t(),s=zt+n,a=i[et],l=o.firstCreatePass?FT(s,o,i,e,t,r):o.data[s],u=VT(o,i,l,a,e,n);i[s]=u;let p=Gh(l);return Is(l,!0),R_(a,u,l),!lT(l)&&ef()&&hf(o,i,u,l),hD()===0&&yi(u,i),fD(),p&&(B_(o,i,l),j_(o,l,i)),r!==null&&U_(i,l),h}function f(){let n=qt();Jy()?_D():(n=n.parent,Is(n,!1));let e=n;gD(e)&&vD(),pD();let t=_t();return t.firstCreatePass&&(nf(t,n),By(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&OD(e)&&Ph(t,e,Ee(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&ND(e)&&Ph(t,e,Ee(),e.stylesWithoutHost,!1),f}function be(n,e,t,r){return h(n,e,t,r),f(),be}var VT=(n,e,t,r,i,o)=>(tf(!0),S_(r,i,MD()));function te(){return Ee()}var li=void 0;function LT(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var jT=["en",[["a","p"],["AM","PM"],li],[["AM","PM"],li,li],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],li,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],li,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",li,"{1} 'at' {0}",li],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",LT],Ud={};function Gt(n){let e=BT(n),t=ly(e);if(t)return t;let r=e.split("-")[0];if(t=ly(r),t)return t;if(r==="en")return jT;throw new fe(701,!1)}function ly(n){return n in Ud||(Ud[n]=Xn.ng&&Xn.ng.common&&Xn.ng.common.locales&&Xn.ng.common.locales[n]),Ud[n]}var Ye=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Ye||{});function BT(n){return n.toLowerCase().replace(/_/g,"-")}var kc="en-US";var UT=kc;function $T(n){typeof n=="string"&&(UT=n.toLowerCase().replace(/_/g,"-"))}function j(n,e,t,r){let i=Ee(),o=_t(),s=qt();return yb(o,i,i[et],s,n,e,r),j}function zT(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[ms],l=i[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function yb(n,e,t,r,i,o,s){let a=Gh(r),u=n.firstCreatePass&&Y_(n),p=e[mn],v=K_(e),b=!0;if(r.type&3||s){let V=rn(r,e),F=s?s(V):V,W=v.length,ie=s?Se=>s(Vn(Se[r.index])):r.index,X=null;if(!s&&a&&(X=zT(n,e,i,r.index)),X!==null){let Se=X.__ngLastListenerFn__||X;Se.__ngNextListenerFn__=o,X.__ngLastListenerFn__=o,b=!1}else{o=dy(r,e,p,o,!1);let Se=t.listen(F,i,o);v.push(o,Se),u&&u.push(i,ie,W,W+1)}}else o=dy(r,e,p,o,!1);let C=r.outputs,O;if(b&&C!==null&&(O=C[i])){let V=O.length;if(V)for(let F=0;F<V;F+=2){let W=O[F],ie=O[F+1],Le=e[W][ie].subscribe(o),Me=v.length;v.push(o,Le),u&&u.push(i,r.index,Me,-(Me+1))}}}function uy(n,e,t,r){let i=Te(null);try{return On(6,e,t),t(r)!==!1}catch(o){return J_(n,o),!1}finally{On(7,e,t),Te(i)}}function dy(n,e,t,r,i){return function o(s){if(s===Function)return r;let a=n.componentOffset>-1?Vr(n.index,e):e;yf(a);let l=uy(e,t,r,s),u=o.__ngNextListenerFn__;for(;u;)l=uy(e,t,u,s)&&l,u=u.__ngNextListenerFn__;return i&&l===!1&&s.preventDefault(),l}}function I(n=1){return SD(n)}function Df(n,e,t){KM(n,e,t)}function Sf(n){let e=Ee(),t=_t(),r=Zy();Yh(r+1);let i=wf(t,r);if(n.dirty&&aD(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=XM(e,r);n.reset(o,GD),n.notifyOnChanges()}return!0}return!1}function Mf(){return WM(Ee(),Zy())}function qT(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function sr(n){let e=bD();return zc(e,zt+n)}function g(n,e=""){let t=Ee(),r=_t(),i=n+zt,o=r.firstCreatePass?Kc(r,i,1,e,null):r.data[i],s=HT(r,t,o,e,n);t[i]=s,ef()&&hf(r,t,s,o),Is(o,!1)}var HT=(n,e,t,r,i)=>(tf(!0),cS(e[et],r));function q(n){return z("",n,""),q}function z(n,e,t){let r=Ee(),i=fT(r,n,e,t);return i!==Ht&&gf(r,or(),i),z}function on(n,e,t,r,i){let o=Ee(),s=pT(o,n,e,t,r,i);return s!==Ht&&gf(o,or(),s),on}function Tf(n,e,t,r,i,o,s){let a=Ee(),l=mT(a,n,e,t,r,i,o,s);return l!==Ht&&gf(a,or(),l),Tf}function Y(n,e,t){cb(e)&&(e=e());let r=Ee(),i=qc();if(Ln(r,i,e)){let o=_t(),s=Zh();z_(o,s,r,n,e,r[et],t,!1)}return Y}function Z(n,e){let t=cb(n);return t&&n.set(e),t}function J(n,e){let t=Ee(),r=_t(),i=qt();return yb(r,t,t[et],i,n,e),J}function GT(n,e,t){let r=_t();if(r.firstCreatePass){let i=Fr(n);Ah(t,r.data,r.blueprint,i,!0),Ah(e,r.data,r.blueprint,i,!1)}}function Ah(n,e,t,r,i){if(n=St(n),Array.isArray(n))for(let o=0;o<n.length;o++)Ah(n[o],e,t,r,i);else{let o=_t(),s=Ee(),a=qt(),l=ro(n)?n:St(n.provide),u=Fy(n),p=a.providerIndexes&1048575,v=a.directiveStart,b=a.providerIndexes>>20;if(ro(n)||!n.multi){let C=new gi(u,i,Q),O=zd(l,e,i?p:p+b,v);O===-1?(rh(Sc(a,s),o,l),$d(o,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(C),s.push(C)):(t[O]=C,s[O]=C)}else{let C=zd(l,e,p+b,v),O=zd(l,e,p,p+b),V=C>=0&&t[C],F=O>=0&&t[O];if(i&&!F||!i&&!V){rh(Sc(a,s),o,l);let W=KT(i?QT:WT,t.length,i,r,u);!i&&F&&(t[O].providerFactory=W),$d(o,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(W),s.push(W)}else{let W=_b(t[i?O:C],u,!i&&r);$d(o,n,C>-1?C:O,W)}!i&&r&&F&&t[O].componentProviders++}}}function $d(n,e,t,r){let i=ro(e),o=qI(e);if(i||o){let l=(o?St(e.useClass):e).prototype.ngOnDestroy;if(l){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let p=u.indexOf(t);p===-1?u.push(t,[r,l]):u[p+1].push(r,l)}else u.push(t,l)}}}function _b(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function zd(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function WT(n,e,t,r){return Oh(this.multi,[])}function QT(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=vi(t,t[pe],this.providerFactory.index,r);o=a.slice(0,s),Oh(i,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],Oh(i,o);return o}function Oh(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function KT(n,e,t,r,i){let o=new gi(n,t,Q);return o.multi=[],o.index=e,o.componentProviders=0,_b(o,i,r&&!t),o}function jn(n,e=[]){return t=>{t.providersResolver=(r,i)=>GT(r,i?i(n):n,e)}}var YT=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Ny(!1,t.type),i=r.length>0?sT([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=de({token:n,providedIn:"environment",factory:()=>new n(se(kn))})}}return n})();function ke(n){bf("NgStandalone"),n.getStandaloneInjector=e=>e.get(YT).getOrCreateStandaloneInjector(n)}function Pf(n,e){let t=n[e];return t===Ht?void 0:t}function JT(n,e,t,r,i,o){let s=e+t;return Ln(n,s,i)?xf(n,s+1,o?r.call(o,i):r(i)):Pf(n,s+1)}function XT(n,e,t,r,i,o,s){let a=e+t;return Ef(n,a,i,o)?xf(n,a+2,s?r.call(s,i,o):r(i,o)):Pf(n,a+2)}function ZT(n,e,t,r,i,o,s,a){let l=e+t;return ub(n,l,i,o,s)?xf(n,l+3,a?r.call(a,i,o,s):r(i,o,s)):Pf(n,l+3)}function ae(n,e){let t=_t(),r,i=n+zt;t.firstCreatePass?(r=eP(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=hi(r.type,!0)),s,a=Nt(Q);try{let l=Dc(!1),u=o();return Dc(l),qT(t,Ee(),i,u),u}finally{Nt(a)}}function eP(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Ts(n,e,t){let r=n+zt,i=Ee(),o=zc(i,r);return Af(i,r)?JT(i,Kh(),e,o.transform,t,o):o.transform(t)}function ge(n,e,t,r){let i=n+zt,o=Ee(),s=zc(o,i);return Af(o,i)?XT(o,Kh(),e,s.transform,t,r,s):s.transform(t,r)}function bb(n,e,t,r,i){let o=n+zt,s=Ee(),a=zc(s,o);return Af(s,o)?ZT(s,Kh(),e,a.transform,t,r,i,a):a.transform(t,r,i)}function Af(n,e){return n[pe].data[e].pure}function ar(n,e){return Jc(n,e)}var Cb=new ve("");function Ps(n){return!!n&&typeof n.then=="function"}function wb(n){return!!n&&typeof n.subscribe=="function"}var tP=new ve(""),xb=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=ze(tP,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(Ps(o))t.push(o);else if(wb(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Eb=new ve("");function nP(){nv(()=>{throw new fe(600,!1)})}function rP(n){return n.isBoundToModule}function iP(n,e,t){try{let r=t();return Ps(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var Zc=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ze(g_),this.afterRenderEffectManager=ze(ib),this.externalTestViews=new Set,this.beforeRender=new Pn,this.afterTick=new Pn,this.componentTypes=[],this.components=[],this.isStable=ze(Xc).hasPendingTasks.pipe(ft(t=>!t)),this._injector=ze(kn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Ac;if(!this._injector.get(xb).done){let b=!i&&LI(t),C=!1;throw new fe(405,C)}let s;i?s=t:s=this._injector.get(_f).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=rP(s)?void 0:this._injector.get(so),l=r||s.selector,u=s.create(Gc.NULL,[],l,a),p=u.location.nativeElement,v=u.injector.get(Cb,null);return v?.registerApplication(p),u.onDestroy(()=>{this.detachView(u.hostView),qd(this.components,u),v?.unregisterApplication(p)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(t){if(this._runningTick)throw new fe(101,!1);let r=Te(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(t)}catch(i){this.internalErrorHandler(i)}finally{this.afterTick.next(),this._runningTick=!1,Te(r)}}detectChangesInAttachedViews(t){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===Z_)throw new fe(103,!1);if(t){let o=r===0;this.beforeRender.next(o);for(let{_lView:s,notifyErrorHandler:a}of this._views)oP(s,o,a)}if(r++,i.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Nh(o))&&(i.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Nh(o))))break}}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;qd(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Eb,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>qd(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new fe(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function qd(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function oP(n,e,t){!e&&!Nh(n)||sP(n,t,e)}function Nh(n){return Qh(n)}function sP(n,e,t){let r;t?(r=0,n[oe]|=1024):n[oe]&64?r=0:r=1,eb(n,e,r)}var aP=(()=>{class n{constructor(){this.zone=ze(vt),this.applicationRef=ze(Zc)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function cP(n){return[{provide:vt,useFactory:n},{provide:hs,multi:!0,useFactory:()=>{let e=ze(aP,{optional:!0});return()=>e.initialize()}},{provide:hs,multi:!0,useFactory:()=>{let e=ze(hP);return()=>{e.initialize()}}},{provide:g_,useFactory:lP}]}function lP(){let n=ze(vt),e=ze(tr);return t=>n.runOutsideAngular(()=>e.handleError(t))}function uP(n){let e=cP(()=>new vt(dP(n)));return jc([[],e])}function dP(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var hP=(()=>{class n{constructor(){this.subscription=new At,this.initialized=!1,this.zone=ze(vt),this.pendingTasks=ze(Xc)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{vt.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{vt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function fP(){return typeof $localize<"u"&&$localize.locale||kc}var As=new ve("",{providedIn:"root",factory:()=>ze(As,xe.Optional|xe.SkipSelf)||fP()});var Ib=new ve("");var gc=null;function pP(n=[],e){return Gc.create({name:e,providers:[{provide:Bc,useValue:"platform"},{provide:Ib,useValue:new Set([()=>gc=null])},...n]})}function mP(n=[]){if(gc)return gc;let e=pP(n);return gc=e,nP(),gP(e),e}function gP(n){n.get(sf,null)?.forEach(t=>t())}var el=(()=>{class n{static{this.__NG_ELEMENT_ID__=vP}}return n})();function vP(n){return yP(qt(),Ee(),(n&16)===16)}function yP(n,e,t){if($c(n)&&!t){let r=Vr(n.index,e);return new _i(r,r)}else if(n.type&47){let r=e[Fn];return new _i(r,e)}return null}var Rh=class{constructor(){}supports(e){return lb(e)}create(e){return new kh(e)}},_P=(n,e)=>e,kh=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||_P}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<hy(r,i,o)?t:r,a=hy(s,i,o),l=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,p=l-i;if(u!=p){for(let b=0;b<u;b++){let C=b<o.length?o[b]:o[b]=0,O=C+b;p<=O&&O<u&&(o[b]=C+1)}let v=s.previousIndex;o[v]=p-u}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!lb(e))throw new fe(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,aT(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Fh(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Fc),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Fc),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Fh=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Vh=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Fc=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Vh,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function hy(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function fy(){return new Of([new Rh])}var Of=(()=>{class n{static{this.\u0275prov=de({token:n,providedIn:"root",factory:fy})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||fy()),deps:[[n,new yI,new xy]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new fe(901,!1)}}return n})();function Db(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=mP(r),o=[uP(),...t||[]],a=new Nc({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get(vt);return l.run(()=>{a.resolveInjectorInitializers();let u=a.get(tr,null),p;l.runOutsideAngular(()=>{p=l.onError.subscribe({next:C=>{u.handleError(C)}})});let v=()=>a.destroy(),b=i.get(Ib);return b.add(v),a.onDestroy(()=>{p.unsubscribe(),b.delete(v)}),iP(u,l,()=>{let C=a.get(xb);return C.runInitializers(),C.donePromise.then(()=>{let O=a.get(As,kc);$T(O||kc);let V=a.get(Zc);return e!==void 0&&V.bootstrap(e),V})})})}catch(e){return Promise.reject(e)}}function tl(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var Ob=null;function fo(){return Ob}function Nb(n){Ob??=n}var ul=class{};var Bn=new ve("");var Rb=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(Rb||{});var Mt=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Mt||{}),Ve=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Ve||{}),Wt=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Wt||{}),Qt={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function bP(n){return Gt(n)[Ye.LocaleId]}function CP(n,e,t){let r=Gt(n),i=[r[Ye.DayPeriodsFormat],r[Ye.DayPeriodsStandalone]],o=sn(i,e);return sn(o,t)}function wP(n,e,t){let r=Gt(n),i=[r[Ye.DaysFormat],r[Ye.DaysStandalone]],o=sn(i,e);return sn(o,t)}function xP(n,e,t){let r=Gt(n),i=[r[Ye.MonthsFormat],r[Ye.MonthsStandalone]],o=sn(i,e);return sn(o,t)}function EP(n,e){let r=Gt(n)[Ye.Eras];return sn(r,e)}function nl(n,e){let t=Gt(n);return sn(t[Ye.DateFormat],e)}function rl(n,e){let t=Gt(n);return sn(t[Ye.TimeFormat],e)}function il(n,e){let r=Gt(n)[Ye.DateTimeFormat];return sn(r,e)}function lr(n,e){let t=Gt(n),r=t[Ye.NumberSymbols][e];if(typeof r>"u"){if(e===Qt.CurrencyDecimal)return t[Ye.NumberSymbols][Qt.Decimal];if(e===Qt.CurrencyGroup)return t[Ye.NumberSymbols][Qt.Group]}return r}function IP(n,e){return Gt(n)[Ye.NumberFormats][e]}function kb(n){if(!n[Ye.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Ye.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function DP(n){let e=Gt(n);return kb(e),(e[Ye.ExtraData][2]||[]).map(r=>typeof r=="string"?Nf(r):[Nf(r[0]),Nf(r[1])])}function SP(n,e,t){let r=Gt(n);kb(r);let i=[r[Ye.ExtraData][0],r[Ye.ExtraData][1]],o=sn(i,e)||[];return sn(o,t)||[]}function sn(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function Nf(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var MP=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,ol={},TP=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,ur=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(ur||{}),Ae=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(Ae||{}),Pe=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(Pe||{});function PP(n,e,t,r){let i=jP(n);e=cr(t,e)||e;let s=[],a;for(;e;)if(a=TP.exec(e),a){s=s.concat(a.slice(1));let p=s.pop();if(!p)break;e=p}else{s.push(e);break}let l=i.getTimezoneOffset();r&&(l=Vb(r,l),i=LP(i,r,!0));let u="";return s.forEach(p=>{let v=FP(p);u+=v?v(i,t,l):p==="''"?"'":p.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function dl(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function cr(n,e){let t=bP(n);if(ol[t]??={},ol[t][e])return ol[t][e];let r="";switch(e){case"shortDate":r=nl(n,Wt.Short);break;case"mediumDate":r=nl(n,Wt.Medium);break;case"longDate":r=nl(n,Wt.Long);break;case"fullDate":r=nl(n,Wt.Full);break;case"shortTime":r=rl(n,Wt.Short);break;case"mediumTime":r=rl(n,Wt.Medium);break;case"longTime":r=rl(n,Wt.Long);break;case"fullTime":r=rl(n,Wt.Full);break;case"short":let i=cr(n,"shortTime"),o=cr(n,"shortDate");r=sl(il(n,Wt.Short),[i,o]);break;case"medium":let s=cr(n,"mediumTime"),a=cr(n,"mediumDate");r=sl(il(n,Wt.Medium),[s,a]);break;case"long":let l=cr(n,"longTime"),u=cr(n,"longDate");r=sl(il(n,Wt.Long),[l,u]);break;case"full":let p=cr(n,"fullTime"),v=cr(n,"fullDate");r=sl(il(n,Wt.Full),[p,v]);break}return r&&(ol[t][e]=r),r}function sl(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function Cn(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function AP(n,e){return Cn(n,3).substring(0,e)}function tt(n,e,t=0,r=!1,i=!1){return function(o,s){let a=OP(n,o);if((t>0||a>-t)&&(a+=t),n===Ae.Hours)a===0&&t===-12&&(a=12);else if(n===Ae.FractionalSeconds)return AP(a,e);let l=lr(s,Qt.MinusSign);return Cn(a,e,l,r,i)}}function OP(n,e){switch(n){case Ae.FullYear:return e.getFullYear();case Ae.Month:return e.getMonth();case Ae.Date:return e.getDate();case Ae.Hours:return e.getHours();case Ae.Minutes:return e.getMinutes();case Ae.Seconds:return e.getSeconds();case Ae.FractionalSeconds:return e.getMilliseconds();case Ae.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function Be(n,e,t=Mt.Format,r=!1){return function(i,o){return NP(i,o,n,e,t,r)}}function NP(n,e,t,r,i,o){switch(t){case Pe.Months:return xP(e,i,r)[n.getMonth()];case Pe.Days:return wP(e,i,r)[n.getDay()];case Pe.DayPeriods:let s=n.getHours(),a=n.getMinutes();if(o){let u=DP(e),p=SP(e,i,r),v=u.findIndex(b=>{if(Array.isArray(b)){let[C,O]=b,V=s>=C.hours&&a>=C.minutes,F=s<O.hours||s===O.hours&&a<O.minutes;if(C.hours<O.hours){if(V&&F)return!0}else if(V||F)return!0}else if(b.hours===s&&b.minutes===a)return!0;return!1});if(v!==-1)return p[v]}return CP(e,i,r)[s<12?0:1];case Pe.Eras:return EP(e,r)[n.getFullYear()<=0?0:1];default:let l=t;throw new Error(`unexpected translation type ${l}`)}}function al(n){return function(e,t,r){let i=-1*r,o=lr(t,Qt.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case ur.Short:return(i>=0?"+":"")+Cn(s,2,o)+Cn(Math.abs(i%60),2,o);case ur.ShortGMT:return"GMT"+(i>=0?"+":"")+Cn(s,1,o);case ur.Long:return"GMT"+(i>=0?"+":"")+Cn(s,2,o)+":"+Cn(Math.abs(i%60),2,o);case ur.Extended:return r===0?"Z":(i>=0?"+":"")+Cn(s,2,o)+":"+Cn(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var RP=0,ll=4;function kP(n){let e=dl(n,RP,1).getDay();return dl(n,0,1+(e<=ll?ll:ll+7)-e)}function Fb(n){let e=n.getDay(),t=e===0?-3:ll-e;return dl(n.getFullYear(),n.getMonth(),n.getDate()+t)}function Rf(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=Fb(t),s=kP(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Cn(i,n,lr(r,Qt.MinusSign))}}function cl(n,e=!1){return function(t,r){let o=Fb(t).getFullYear();return Cn(o,n,lr(r,Qt.MinusSign),e)}}var kf={};function FP(n){if(kf[n])return kf[n];let e;switch(n){case"G":case"GG":case"GGG":e=Be(Pe.Eras,Ve.Abbreviated);break;case"GGGG":e=Be(Pe.Eras,Ve.Wide);break;case"GGGGG":e=Be(Pe.Eras,Ve.Narrow);break;case"y":e=tt(Ae.FullYear,1,0,!1,!0);break;case"yy":e=tt(Ae.FullYear,2,0,!0,!0);break;case"yyy":e=tt(Ae.FullYear,3,0,!1,!0);break;case"yyyy":e=tt(Ae.FullYear,4,0,!1,!0);break;case"Y":e=cl(1);break;case"YY":e=cl(2,!0);break;case"YYY":e=cl(3);break;case"YYYY":e=cl(4);break;case"M":case"L":e=tt(Ae.Month,1,1);break;case"MM":case"LL":e=tt(Ae.Month,2,1);break;case"MMM":e=Be(Pe.Months,Ve.Abbreviated);break;case"MMMM":e=Be(Pe.Months,Ve.Wide);break;case"MMMMM":e=Be(Pe.Months,Ve.Narrow);break;case"LLL":e=Be(Pe.Months,Ve.Abbreviated,Mt.Standalone);break;case"LLLL":e=Be(Pe.Months,Ve.Wide,Mt.Standalone);break;case"LLLLL":e=Be(Pe.Months,Ve.Narrow,Mt.Standalone);break;case"w":e=Rf(1);break;case"ww":e=Rf(2);break;case"W":e=Rf(1,!0);break;case"d":e=tt(Ae.Date,1);break;case"dd":e=tt(Ae.Date,2);break;case"c":case"cc":e=tt(Ae.Day,1);break;case"ccc":e=Be(Pe.Days,Ve.Abbreviated,Mt.Standalone);break;case"cccc":e=Be(Pe.Days,Ve.Wide,Mt.Standalone);break;case"ccccc":e=Be(Pe.Days,Ve.Narrow,Mt.Standalone);break;case"cccccc":e=Be(Pe.Days,Ve.Short,Mt.Standalone);break;case"E":case"EE":case"EEE":e=Be(Pe.Days,Ve.Abbreviated);break;case"EEEE":e=Be(Pe.Days,Ve.Wide);break;case"EEEEE":e=Be(Pe.Days,Ve.Narrow);break;case"EEEEEE":e=Be(Pe.Days,Ve.Short);break;case"a":case"aa":case"aaa":e=Be(Pe.DayPeriods,Ve.Abbreviated);break;case"aaaa":e=Be(Pe.DayPeriods,Ve.Wide);break;case"aaaaa":e=Be(Pe.DayPeriods,Ve.Narrow);break;case"b":case"bb":case"bbb":e=Be(Pe.DayPeriods,Ve.Abbreviated,Mt.Standalone,!0);break;case"bbbb":e=Be(Pe.DayPeriods,Ve.Wide,Mt.Standalone,!0);break;case"bbbbb":e=Be(Pe.DayPeriods,Ve.Narrow,Mt.Standalone,!0);break;case"B":case"BB":case"BBB":e=Be(Pe.DayPeriods,Ve.Abbreviated,Mt.Format,!0);break;case"BBBB":e=Be(Pe.DayPeriods,Ve.Wide,Mt.Format,!0);break;case"BBBBB":e=Be(Pe.DayPeriods,Ve.Narrow,Mt.Format,!0);break;case"h":e=tt(Ae.Hours,1,-12);break;case"hh":e=tt(Ae.Hours,2,-12);break;case"H":e=tt(Ae.Hours,1);break;case"HH":e=tt(Ae.Hours,2);break;case"m":e=tt(Ae.Minutes,1);break;case"mm":e=tt(Ae.Minutes,2);break;case"s":e=tt(Ae.Seconds,1);break;case"ss":e=tt(Ae.Seconds,2);break;case"S":e=tt(Ae.FractionalSeconds,1);break;case"SS":e=tt(Ae.FractionalSeconds,2);break;case"SSS":e=tt(Ae.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=al(ur.Short);break;case"ZZZZZ":e=al(ur.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=al(ur.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=al(ur.Long);break;default:return null}return kf[n]=e,e}function Vb(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function VP(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function LP(n,e,t){let r=t?-1:1,i=n.getTimezoneOffset(),o=Vb(e,i);return VP(n,r*(o-i))}function jP(n){if(Sb(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return dl(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(MP))return BP(r)}let e=new Date(n);if(!Sb(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function BP(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,l=Number(n[6]||0),u=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,l,u),e}function Sb(n){return n instanceof Date&&!isNaN(n.valueOf())}var UP=/^(\d+)?\.((\d+)(-(\d+))?)?$/,Mb=22,hl=".",Os="0",$P=";",zP=",",Ff="#";function qP(n,e,t,r,i,o,s=!1){let a="",l=!1;if(!isFinite(n))a=lr(t,Qt.Infinity);else{let u=QP(n);s&&(u=WP(u));let p=e.minInt,v=e.minFrac,b=e.maxFrac;if(o){let ie=o.match(UP);if(ie===null)throw new Error(`${o} is not a valid digit info`);let X=ie[1],Se=ie[3],Le=ie[5];X!=null&&(p=Vf(X)),Se!=null&&(v=Vf(Se)),Le!=null?b=Vf(Le):Se!=null&&v>b&&(b=v)}KP(u,v,b);let C=u.digits,O=u.integerLen,V=u.exponent,F=[];for(l=C.every(ie=>!ie);O<p;O++)C.unshift(0);for(;O<0;O++)C.unshift(0);O>0?F=C.splice(O,C.length):(F=C,C=[0]);let W=[];for(C.length>=e.lgSize&&W.unshift(C.splice(-e.lgSize,C.length).join(""));C.length>e.gSize;)W.unshift(C.splice(-e.gSize,C.length).join(""));C.length&&W.unshift(C.join("")),a=W.join(lr(t,r)),F.length&&(a+=lr(t,i)+F.join("")),V&&(a+=lr(t,Qt.Exponential)+"+"+V)}return n<0&&!l?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function HP(n,e,t){let r=IP(e,Rb.Decimal),i=GP(r,lr(e,Qt.MinusSign));return qP(n,i,e,Qt.Group,Qt.Decimal,t)}function GP(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split($P),i=r[0],o=r[1],s=i.indexOf(hl)!==-1?i.split(hl):[i.substring(0,i.lastIndexOf(Os)+1),i.substring(i.lastIndexOf(Os)+1)],a=s[0],l=s[1]||"";t.posPre=a.substring(0,a.indexOf(Ff));for(let p=0;p<l.length;p++){let v=l.charAt(p);v===Os?t.minFrac=t.maxFrac=p+1:v===Ff?t.maxFrac=p+1:t.posSuf+=v}let u=a.split(zP);if(t.gSize=u[1]?u[1].length:0,t.lgSize=u[2]||u[1]?(u[2]||u[1]).length:0,o){let p=i.length-t.posPre.length-t.posSuf.length,v=o.indexOf(Ff);t.negPre=o.substring(0,v).replace(/'/g,""),t.negSuf=o.slice(v+p).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function WP(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function QP(n){let e=Math.abs(n)+"",t=0,r,i,o,s,a;for((i=e.indexOf(hl))>-1&&(e=e.replace(hl,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===Os;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===Os;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>Mb&&(r=r.splice(0,Mb-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function KP(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen,o=Math.min(Math.max(e,i),t),s=o+n.integerLen,a=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let v=s;v<r.length;v++)r[v]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let v=1;v<s;v++)r[v]=0}if(a>=5)if(s-1<0){for(let v=0;v>s;v--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let l=o!==0,u=e+n.integerLen,p=r.reduceRight(function(v,b,C,O){return b=b+v,O[C]=b<10?b:b-10,l&&(O[C]===0&&C>=u?O.pop():l=!1),b>=10?1:0},0);p&&(r.unshift(p),n.integerLen++)}function Vf(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function fl(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Lf=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},nt=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Lf(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),Tb(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);Tb(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Q(uo),Q(bi),Q(Of))}}static{this.\u0275dir=Xe({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function Tb(n,e){n.context.$implicit=e.item}var He=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new jf,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Pb("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Pb("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Q(uo),Q(bi))}}static{this.\u0275dir=Xe({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),jf=class{constructor(){this.$implicit=null,this.ngIf=null}};function Pb(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Ut(e)}'.`)}function pl(n,e){return new fe(2100,!1)}var YP=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,ml=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw pl(n,t);return t.replace(YP,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=xs({name:"titlecase",type:n,pure:!0,standalone:!0})}}return n})();var JP="mediumDate",XP=new ve(""),ZP=new ve(""),Un=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??JP,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return PP(t,s,o||this.locale,a)}catch(s){throw pl(n,s.message)}}static{this.\u0275fac=function(r){return new(r||n)(Q(As,16),Q(XP,24),Q(ZP,24))}}static{this.\u0275pipe=xs({name:"date",type:n,pure:!0,standalone:!0})}}return n})();var po=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!eA(t))return null;i||=this._locale;try{let o=tA(t);return HP(o,i,r)}catch(o){throw pl(n,o.message)}}static{this.\u0275fac=function(r){return new(r||n)(Q(As,16))}}static{this.\u0275pipe=xs({name:"number",type:n,pure:!0,standalone:!0})}}return n})();function eA(n){return!(n==null||n===""||n!==n)}function tA(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var Lb=(()=>{class n{transform(t,r,i){if(t==null)return null;if(!this.supports(t))throw pl(n,t);return t.slice(r,i)}supports(t){return typeof t=="string"||Array.isArray(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=xs({name:"slice",type:n,pure:!1,standalone:!0})}}return n})();var Ne=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=xi({type:n})}static{this.\u0275inj=wi({})}}return n})(),jb="browser",nA="server";function gl(n){return n===nA}var ho=class{};var Rs=class{},yl=class{},Di=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Uf=class{encodeKey(e){return Bb(e)}encodeValue(e){return Bb(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function oA(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],l=t.get(s)||[];l.push(a),t.set(s,l)}),t}var sA=/%(\d[a-f0-9])/gi,aA={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Bb(n){return encodeURIComponent(n).replace(sA,(e,t)=>aA[t]??e)}function vl(n){return`${n}`}var Br=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Uf,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=oA(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(vl):[vl(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(vl(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(vl(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var $f=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function cA(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Ub(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function $b(n){return typeof Blob<"u"&&n instanceof Blob}function zb(n){return typeof FormData<"u"&&n instanceof FormData}function lA(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Ns=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(cA(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Di,this.context??=new $f,!this.params)this.params=new Br,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),l=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Ub(this.body)||$b(this.body)||zb(this.body)||lA(this.body)?this.body:this.body instanceof Br?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||zb(this.body)?null:$b(this.body)?this.body.type||null:Ub(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Br?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,u=e.headers||this.headers,p=e.params||this.params,v=e.context??this.context;return e.setHeaders!==void 0&&(u=Object.keys(e.setHeaders).reduce((b,C)=>b.set(C,e.setHeaders[C]),u)),e.setParams&&(p=Object.keys(e.setParams).reduce((b,C)=>b.set(C,e.setParams[C]),p)),new n(t,r,s,{params:p,headers:u,context:v,reportProgress:l,responseType:i,withCredentials:a,transferCache:o})}},mo=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(mo||{}),ks=class{constructor(e,t=Cl.Ok,r="OK"){this.headers=e.headers||new Di,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},zf=class n extends ks{constructor(e={}){super(e),this.type=mo.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},_l=class n extends ks{constructor(e={}){super(e),this.type=mo.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},bl=class extends ks{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},Cl=function(n){return n[n.Continue=100]="Continue",n[n.SwitchingProtocols=101]="SwitchingProtocols",n[n.Processing=102]="Processing",n[n.EarlyHints=103]="EarlyHints",n[n.Ok=200]="Ok",n[n.Created=201]="Created",n[n.Accepted=202]="Accepted",n[n.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",n[n.NoContent=204]="NoContent",n[n.ResetContent=205]="ResetContent",n[n.PartialContent=206]="PartialContent",n[n.MultiStatus=207]="MultiStatus",n[n.AlreadyReported=208]="AlreadyReported",n[n.ImUsed=226]="ImUsed",n[n.MultipleChoices=300]="MultipleChoices",n[n.MovedPermanently=301]="MovedPermanently",n[n.Found=302]="Found",n[n.SeeOther=303]="SeeOther",n[n.NotModified=304]="NotModified",n[n.UseProxy=305]="UseProxy",n[n.Unused=306]="Unused",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n[n.BadRequest=400]="BadRequest",n[n.Unauthorized=401]="Unauthorized",n[n.PaymentRequired=402]="PaymentRequired",n[n.Forbidden=403]="Forbidden",n[n.NotFound=404]="NotFound",n[n.MethodNotAllowed=405]="MethodNotAllowed",n[n.NotAcceptable=406]="NotAcceptable",n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",n[n.RequestTimeout=408]="RequestTimeout",n[n.Conflict=409]="Conflict",n[n.Gone=410]="Gone",n[n.LengthRequired=411]="LengthRequired",n[n.PreconditionFailed=412]="PreconditionFailed",n[n.PayloadTooLarge=413]="PayloadTooLarge",n[n.UriTooLong=414]="UriTooLong",n[n.UnsupportedMediaType=415]="UnsupportedMediaType",n[n.RangeNotSatisfiable=416]="RangeNotSatisfiable",n[n.ExpectationFailed=417]="ExpectationFailed",n[n.ImATeapot=418]="ImATeapot",n[n.MisdirectedRequest=421]="MisdirectedRequest",n[n.UnprocessableEntity=422]="UnprocessableEntity",n[n.Locked=423]="Locked",n[n.FailedDependency=424]="FailedDependency",n[n.TooEarly=425]="TooEarly",n[n.UpgradeRequired=426]="UpgradeRequired",n[n.PreconditionRequired=428]="PreconditionRequired",n[n.TooManyRequests=429]="TooManyRequests",n[n.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",n[n.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",n[n.InternalServerError=500]="InternalServerError",n[n.NotImplemented=501]="NotImplemented",n[n.BadGateway=502]="BadGateway",n[n.ServiceUnavailable=503]="ServiceUnavailable",n[n.GatewayTimeout=504]="GatewayTimeout",n[n.HttpVersionNotSupported=505]="HttpVersionNotSupported",n[n.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",n[n.InsufficientStorage=507]="InsufficientStorage",n[n.LoopDetected=508]="LoopDetected",n[n.NotExtended=510]="NotExtended",n[n.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",n}(Cl||{});function Bf(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var wn=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof Ns)o=t;else{let l;i.headers instanceof Di?l=i.headers:l=new Di(i.headers);let u;i.params&&(i.params instanceof Br?u=i.params:u=new Br({fromObject:i.params})),o=new Ns(t,r,i.body!==void 0?i.body:null,{headers:l,context:i.context,params:u,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=sc(o).pipe(Sd(l=>this.handler.handle(l)));if(t instanceof Ns||i.observe==="events")return s;let a=s.pipe(Dd(l=>l instanceof _l));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(ft(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(ft(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(ft(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return a.pipe(ft(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new Br().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Bf(i,r))}post(t,r,i={}){return this.request("POST",t,Bf(i,r))}put(t,r,i={}){return this.request("PUT",t,Bf(i,r))}static{this.\u0275fac=function(r){return new(r||n)(se(Rs))}}static{this.\u0275prov=de({token:n,factory:n.\u0275fac})}}return n})();function uA(n,e){return e(n)}function dA(n,e,t){return(r,i)=>Vy(t,()=>e(r,o=>n(o,i)))}var Gb=new ve(""),hA=new ve(""),fA=new ve("");var qb=(()=>{class n extends Rs{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=ze(Xc);let i=ze(fA,{optional:!0});this.backend=i??t}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(Gb),...this.injector.get(hA,[])]));this.chain=i.reduceRight((o,s)=>dA(o,s,this.injector),uA)}let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Md(()=>this.pendingTasks.remove(r)))}static{this.\u0275fac=function(r){return new(r||n)(se(yl),se(kn))}}static{this.\u0275prov=de({token:n,factory:n.\u0275fac})}}return n})();var pA=/^\)\]\}',?\n/;function mA(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var Hb=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new fe(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?An(r.\u0275loadImpl()):sc(null)).pipe(Ki(()=>new $e(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((V,F)=>s.setRequestHeader(V,F.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let V=t.detectContentTypeHeader();V!==null&&s.setRequestHeader("Content-Type",V)}if(t.responseType){let V=t.responseType.toLowerCase();s.responseType=V!=="json"?V:"text"}let a=t.serializeBody(),l=null,u=()=>{if(l!==null)return l;let V=s.statusText||"OK",F=new Di(s.getAllResponseHeaders()),W=mA(s)||t.url;return l=new zf({headers:F,status:s.status,statusText:V,url:W}),l},p=()=>{let{headers:V,status:F,statusText:W,url:ie}=u(),X=null;F!==Cl.NoContent&&(X=typeof s.response>"u"?s.responseText:s.response),F===0&&(F=X?Cl.Ok:0);let Se=F>=200&&F<300;if(t.responseType==="json"&&typeof X=="string"){let Le=X;X=X.replace(pA,"");try{X=X!==""?JSON.parse(X):null}catch(Me){X=Le,Se&&(Se=!1,X={error:Me,text:X})}}Se?(o.next(new _l({body:X,headers:V,status:F,statusText:W,url:ie||void 0})),o.complete()):o.error(new bl({error:X,headers:V,status:F,statusText:W,url:ie||void 0}))},v=V=>{let{url:F}=u(),W=new bl({error:V,status:s.status||0,statusText:s.statusText||"Unknown Error",url:F||void 0});o.error(W)},b=!1,C=V=>{b||(o.next(u()),b=!0);let F={type:mo.DownloadProgress,loaded:V.loaded};V.lengthComputable&&(F.total=V.total),t.responseType==="text"&&s.responseText&&(F.partialText=s.responseText),o.next(F)},O=V=>{let F={type:mo.UploadProgress,loaded:V.loaded};V.lengthComputable&&(F.total=V.total),o.next(F)};return s.addEventListener("load",p),s.addEventListener("error",v),s.addEventListener("timeout",v),s.addEventListener("abort",v),t.reportProgress&&(s.addEventListener("progress",C),a!==null&&s.upload&&s.upload.addEventListener("progress",O)),s.send(a),o.next({type:mo.Sent}),()=>{s.removeEventListener("error",v),s.removeEventListener("abort",v),s.removeEventListener("load",p),s.removeEventListener("timeout",v),t.reportProgress&&(s.removeEventListener("progress",C),a!==null&&s.upload&&s.upload.removeEventListener("progress",O)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(se(ho))}}static{this.\u0275prov=de({token:n,factory:n.\u0275fac})}}return n})(),Wb=new ve(""),gA="XSRF-TOKEN",vA=new ve("",{providedIn:"root",factory:()=>gA}),yA="X-XSRF-TOKEN",_A=new ve("",{providedIn:"root",factory:()=>yA}),wl=class{},bA=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=fl(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(se(Bn),se(jr),se(vA))}}static{this.\u0275prov=de({token:n,factory:n.\u0275fac})}}return n})();function CA(n,e){let t=n.url.toLowerCase();if(!ze(Wb)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=ze(wl).getToken(),i=ze(_A);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function Qb(...n){let e=[wn,Hb,qb,{provide:Rs,useExisting:qb},{provide:yl,useExisting:Hb},{provide:Gb,useValue:CA,multi:!0},{provide:Wb,useValue:!0},{provide:wl,useClass:bA}];for(let t of n)e.push(...t.\u0275providers);return jc(e)}var Gf=class extends ul{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Wf=class n extends Gf{static makeCurrent(){Nb(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=xA();return t==null?null:EA(t)}resetBaseElement(){Vs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return fl(document.cookie,e)}},Vs=null;function xA(){return Vs=Vs||document.querySelector("base"),Vs?Vs.getAttribute("href"):null}function EA(n){return new URL(n,document.baseURI).pathname}var IA=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=de({token:n,factory:n.\u0275fac})}}return n})(),Qf=new ve(""),Xb=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new fe(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(se(Qf),se(vt))}}static{this.\u0275prov=de({token:n,factory:n.\u0275fac})}}return n})(),xl=class{constructor(e){this._doc=e}},qf="ng-app-id",Zb=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=gl(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${qf}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(qf),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(qf,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(se(Bn),se(of),se(af,8),se(jr))}}static{this.\u0275prov=de({token:n,factory:n.\u0275fac})}}return n})(),Hf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Yf=/%COMP%/g,eC="%COMP%",DA=`_nghost-${eC}`,SA=`_ngcontent-${eC}`,MA=!0,TA=new ve("",{providedIn:"root",factory:()=>MA});function PA(n){return SA.replace(Yf,n)}function AA(n){return DA.replace(Yf,n)}function tC(n,e){return e.map(t=>t.replace(Yf,n))}var Kb=(()=>{class n{constructor(t,r,i,o,s,a,l,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=gl(a),this.defaultRenderer=new Ls(t,s,l,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Rn.ShadowDom&&(r=ue(ee({},r),{encapsulation:Rn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof El?i.applyToHost(t):i instanceof js&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,v=this.platformIsServer;switch(r.encapsulation){case Rn.Emulated:o=new El(l,u,r,this.appId,p,s,a,v);break;case Rn.ShadowDom:return new Kf(l,u,t,r,s,a,this.nonce,v);default:o=new js(l,u,r,p,s,a,v);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(se(Xb),se(Zb),se(of),se(TA),se(Bn),se(jr),se(vt),se(af))}}static{this.\u0275prov=de({token:n,factory:n.\u0275fac})}}return n})(),Ls=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Hf[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Yb(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Yb(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new fe(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Hf[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Hf[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(nr.DashCase|nr.Important)?e.style.setProperty(t,r,i&nr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&nr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=fo().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function Yb(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Kf=class extends Ls{constructor(e,t,r,i,o,s,a,l){super(e,o,s,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=tC(i.id,i.styles);for(let p of u){let v=document.createElement("style");a&&v.setAttribute("nonce",a),v.textContent=p,this.shadowRoot.appendChild(v)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},js=class extends Ls{constructor(e,t,r,i,o,s,a,l){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=l?tC(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},El=class extends js{constructor(e,t,r,i,o,s,a,l){let u=i+"-"+r.id;super(e,t,r,o,s,a,l,u),this.contentAttr=PA(u),this.hostAttr=AA(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},OA=(()=>{class n extends xl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(se(Bn))}}static{this.\u0275prov=de({token:n,factory:n.\u0275fac})}}return n})(),Jb=["alt","control","meta","shift"],NA={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},RA={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},kA=(()=>{class n extends xl{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>fo().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Jb.forEach(u=>{let p=r.indexOf(u);p>-1&&(r.splice(p,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(t,r){let i=NA[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Jb.forEach(s=>{if(s!==i){let a=RA[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(se(Bn))}}static{this.\u0275prov=de({token:n,factory:n.\u0275fac})}}return n})();function nC(n,e){return Db(ee({rootComponent:n},FA(e)))}function FA(n){return{appProviders:[...UA,...n?.providers??[]],platformProviders:BA}}function VA(){Wf.makeCurrent()}function LA(){return new tr}function jA(){return x_(document),document}var BA=[{provide:jr,useValue:jb},{provide:sf,useValue:VA,multi:!0},{provide:Bn,useFactory:jA,deps:[]}];var UA=[{provide:Bc,useValue:"root"},{provide:tr,useFactory:LA,deps:[]},{provide:Qf,useClass:OA,multi:!0,deps:[Bn,vt,jr]},{provide:Qf,useClass:kA,multi:!0,deps:[Bn]},Kb,Zb,Xb,{provide:_s,useExisting:Kb},{provide:ho,useClass:IA,deps:[]},[]];var rC={providers:[Qb()]};var fC=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(Q(Ii),Q(yn))}}static{this.\u0275dir=Xe({type:n})}}return n})(),Al=(()=>{class n extends fC{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Lr(n)))(i||n)}})()}static{this.\u0275dir=Xe({type:n,features:[kt]})}}return n})(),Hs=new ve("");var $A={provide:Hs,useExisting:nn(()=>rt),multi:!0};function zA(){let n=fo()?fo().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var qA=new ve(""),rt=(()=>{class n extends fC{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!zA())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(Q(Ii),Q(yn),Q(qA,8))}}static{this.\u0275dir=Xe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&j("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[jn([$A]),kt]})}}return n})();function zs(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var Gs=new ve(""),pC=new ve("");function HA(n){return e=>{if(zs(e.value)||zs(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function GA(n){return e=>{if(zs(e.value)||zs(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function WA(n){return zs(n.value)?{required:!0}:null}function iC(n){return null}function mC(n){return n!=null}function gC(n){return Ps(n)?An(n):n}function vC(n){let e={};return n.forEach(t=>{e=t!=null?ee(ee({},e),t):e}),Object.keys(e).length===0?null:e}function yC(n,e){return e.map(t=>t(n))}function QA(n){return!n.validate}function _C(n){return n.map(e=>QA(e)?e:t=>e.validate(t))}function KA(n){if(!n)return null;let e=n.filter(mC);return e.length==0?null:function(t){return vC(yC(t,e))}}function Xf(n){return n!=null?KA(_C(n)):null}function YA(n){if(!n)return null;let e=n.filter(mC);return e.length==0?null:function(t){let r=yC(t,e).map(gC);return Id(r).pipe(ft(vC))}}function Zf(n){return n!=null?YA(_C(n)):null}function oC(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function JA(n){return n._rawValidators}function XA(n){return n._rawAsyncValidators}function Jf(n){return n?Array.isArray(n)?n:[n]:[]}function Dl(n,e){return Array.isArray(n)?n.includes(e):n===e}function sC(n,e){let t=Jf(e);return Jf(n).forEach(i=>{Dl(t,i)||t.push(i)}),t}function aC(n,e){return Jf(e).filter(t=>!Dl(n,t))}var Sl=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Xf(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Zf(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},vo=class extends Sl{get formDirective(){return null}get path(){return null}},qs=class extends Sl{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Ml=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},ZA={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Kj=ue(ee({},ZA),{"[class.ng-submitted]":"isSubmitted"}),it=(()=>{class n extends Ml{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Q(qs,2))}}static{this.\u0275dir=Xe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&_e("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[kt]})}}return n})(),$n=(()=>{class n extends Ml{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Q(vo,10))}}static{this.\u0275dir=Xe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&_e("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[kt]})}}return n})();var Bs="VALID",Il="INVALID",go="PENDING",Us="DISABLED";function bC(n){return(Ol(n)?n.validators:n)||null}function eO(n){return Array.isArray(n)?Xf(n):n||null}function CC(n,e){return(Ol(e)?e.asyncValidators:n)||null}function tO(n){return Array.isArray(n)?Zf(n):n||null}function Ol(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function nO(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new fe(1e3,"");if(!r[t])throw new fe(1001,"")}function rO(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new fe(1002,"")})}var Tl=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Bs}get invalid(){return this.status===Il}get pending(){return this.status==go}get disabled(){return this.status===Us}get enabled(){return this.status!==Us}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(sC(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(sC(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(aC(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(aC(e,this._rawAsyncValidators))}hasValidator(e){return Dl(this._rawValidators,e)}hasAsyncValidator(e){return Dl(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=go,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Us,this.errors=null,this._forEachChild(r=>{r.disable(ue(ee({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ue(ee({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Bs,this._forEachChild(r=>{r.enable(ue(ee({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ue(ee({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Bs||this.status===go)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Us:Bs}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=go,this._hasOwnPendingAsyncValidator=!0;let t=gC(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Bt,this.statusChanges=new Bt}_calculateStatus(){return this._allControlsDisabled()?Us:this.errors?Il:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(go)?go:this._anyControlsHaveStatus(Il)?Il:Bs}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ol(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=eO(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=tO(this._rawAsyncValidators)}},Pl=class extends Tl{constructor(e,t,r){super(bC(t),CC(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){rO(this,!0,e),Object.keys(e).forEach(r=>{nO(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var ep=new ve("CallSetDisabledState",{providedIn:"root",factory:()=>tp}),tp="always";function iO(n,e){return[...e.path,n]}function wC(n,e,t=tp){xC(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),sO(n,e),cO(n,e),aO(n,e),oO(n,e)}function cC(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function oO(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function xC(n,e){let t=JA(n);e.validator!==null?n.setValidators(oC(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=XA(n);e.asyncValidator!==null?n.setAsyncValidators(oC(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();cC(e._rawValidators,i),cC(e._rawAsyncValidators,i)}function sO(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&EC(n,e)})}function aO(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&EC(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function EC(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function cO(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function lO(n,e){n==null,xC(n,e)}function uO(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function dO(n){return Object.getPrototypeOf(n.constructor)===Al}function hO(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function fO(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===rt?t=o:dO(o)?r=o:i=o}),i||r||t||null}var pO={provide:vo,useExisting:nn(()=>xn)},$s=Promise.resolve(),xn=(()=>{class n extends vo{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Bt,this.form=new Pl({},Xf(t),Zf(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){$s.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),wC(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){$s.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){$s.then(()=>{let r=this._findContainer(t.path),i=new Pl({});lO(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){$s.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){$s.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,hO(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(Q(Gs,10),Q(pC,10),Q(ep,8))}}static{this.\u0275dir=Xe({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&j("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[tn.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[jn([pO]),kt]})}}return n})();function lC(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function uC(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var mO=class extends Tl{constructor(e=null,t,r){super(bC(t),CC(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ol(t)&&(t.nonNullable||t.initialValueIsDefault)&&(uC(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){lC(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){lC(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){uC(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var gO={provide:qs,useExisting:nn(()=>Ze)},dC=Promise.resolve(),Ze=(()=>{class n extends qs{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new mO,this._registered=!1,this.name="",this.update=new Bt,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=fO(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),uO(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){wC(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){dC.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&tl(r);dC.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?iO(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(Q(vo,9),Q(Gs,10),Q(pC,10),Q(Hs,10),Q(el,8),Q(ep,8))}}static{this.\u0275dir=Xe({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[tn.None,"disabled","isDisabled"],model:[tn.None,"ngModel","model"],options:[tn.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[jn([gO]),kt,Ei]})}}return n})(),zn=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Xe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),vO={provide:Hs,useExisting:nn(()=>dr),multi:!0},dr=(()=>{class n extends Al{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Lr(n)))(i||n)}})()}static{this.\u0275dir=Xe({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&j("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[jn([vO]),kt]})}}return n})();var yO={provide:Hs,useExisting:nn(()=>Ft),multi:!0};function IC(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function _O(n){return n.split(":")[0]}var Ft=(()=>{class n extends Al{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=IC(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=_O(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Lr(n)))(i||n)}})()}static{this.\u0275dir=Xe({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&j("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[jn([yO]),kt]})}}return n})(),an=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(IC(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(Q(yn),Q(Ii),Q(Ft,9))}}static{this.\u0275dir=Xe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),bO={provide:Hs,useExisting:nn(()=>DC),multi:!0};function hC(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function CO(n){return n.split(":")[0]}var DC=(()=>{class n extends Al{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let l=s[a],u=this._getOptionValue(l.value);i.push(u)}}else{let s=r.options;for(let a=0;a<s.length;a++){let l=s[a];if(l.selected){let u=this._getOptionValue(l.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=CO(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Lr(n)))(i||n)}})()}static{this.\u0275dir=Xe({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&j("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[jn([bO]),kt]})}}return n})(),cn=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(hC(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(hC(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(Q(yn),Q(Ii),Q(DC,9))}}static{this.\u0275dir=Xe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();function SC(n){return typeof n=="number"?n:parseFloat(n)}var np=(()=>{class n{constructor(){this._validator=iC}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):iC,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Xe({type:n,features:[Ei]})}}return n})(),wO={provide:Gs,useExisting:nn(()=>rp),multi:!0},rp=(()=>{class n extends np{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=t=>SC(t),this.createValidator=t=>GA(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Lr(n)))(i||n)}})()}static{this.\u0275dir=Xe({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Ms("max",i._enabled?i.max:null)},inputs:{max:"max"},features:[jn([wO]),kt]})}}return n})(),xO={provide:Gs,useExisting:nn(()=>hr),multi:!0},hr=(()=>{class n extends np{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>SC(t),this.createValidator=t=>HA(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Lr(n)))(i||n)}})()}static{this.\u0275dir=Xe({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Ms("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[jn([xO]),kt]})}}return n})(),EO={provide:Gs,useExisting:nn(()=>Kt),multi:!0};var Kt=(()=>{class n extends np{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=tl,this.createValidator=t=>WA}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Lr(n)))(i||n)}})()}static{this.\u0275dir=Xe({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Ms("required",i._enabled?"":null)},inputs:{required:"required"},features:[jn([EO]),kt]})}}return n})();var IO=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=xi({type:n})}static{this.\u0275inj=wi({})}}return n})();var ot=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:ep,useValue:t.callSetDisabledState??tp}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=xi({type:n})}static{this.\u0275inj=wi({imports:[IO]})}}return n})();var Vt={production:!0,apiUrl:"https://inventory-three-theta.vercel.app/api",socketUrl:"https://your-websocket-server.com",firebaseConfig:{apiKey:"AIzaSyDJL01CQ2KJGqni6Q3EPR8Yv1CPW6cXezk",authDomain:"inventory-8b0ad.firebaseapp.com",projectId:"inventory-8b0ad",storageBucket:"inventory-8b0ad.firebasestorage.app",messagingSenderId:"165252469952",appId:"1:165252469952:web:1dec34907cc003fd2c4925",measurementId:"G-YK1FRTQT8P"}};var Nl=(()=>{class n{constructor(t){this.http=t,this.apiUrl=Vt.apiUrl,this.logsSubject=new Qe([]),this.logs$=this.logsSubject.asObservable(),this.fetchLogs()}getCurrentUserId(){return localStorage.getItem("jjm_user_id")||"guest"}fetchLogs(){let t=this.getCurrentUserId();this.http.get(`${this.apiUrl}/logs?limit=200&userId=${t}`).subscribe({next:r=>this.logsSubject.next(r),error:r=>console.error("Error fetching logs:",r)})}logActivity(t,r,i,o,s){let a={action:t,entityType:r,entityId:i,entityName:o,details:s,userId:this.getCurrentUserId()};console.log("Logging activity:",a),this.http.post(`${this.apiUrl}/logs`,a).subscribe({next:l=>{console.log("Activity logged successfully:",l);let u=this.logsSubject.value;this.logsSubject.next([l,...u])},error:l=>{console.error("Error logging activity:",l),console.error("Failed log data:",a)}})}getLogs(){return this.logs$}refreshLogs(){this.fetchLogs()}cleanupOldLogs(){return this.http.post(`${this.apiUrl}/cleanup-logs`,{})}static{this.\u0275fac=function(r){return new(r||n)(se(wn))}}static{this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Lt=(()=>{class n{constructor(t,r){this.http=t,this.loggingService=r,this.apiUrl=Vt.apiUrl,this.productsSubject=new Qe([]),this.salesSubject=new Qe([]),this.expensesSubject=new Qe([]),this.products$=this.productsSubject.asObservable(),this.sales$=this.salesSubject.asObservable(),this.expenses$=this.expensesSubject.asObservable(),this.loadInitialData()}getCurrentUser(){return localStorage.getItem("jjm_user_id")||"guest"}reloadData(){this.loadInitialData()}loadInitialData(){this.fetchProducts(),this.fetchSales(),this.fetchExpenses()}fetchProducts(){let t=this.getCurrentUser(),r=`${this.apiUrl}/products`;t&&t!=="guest"&&(r+=`?userId=${t}`),this.http.get(r).subscribe({next:i=>this.productsSubject.next(i),error:i=>console.error("Error fetching products:",i)})}fetchSales(){let t=this.getCurrentUser();this.http.get(`${this.apiUrl}/sales?userId=${t}`).subscribe({next:r=>{let i=r.map(o=>this.transformSale(o));this.salesSubject.next(i)},error:r=>console.error("Error fetching sales:",r)})}fetchExpenses(){let t=this.getCurrentUser();this.http.get(`${this.apiUrl}/expenses?userId=${t}`).subscribe({next:r=>this.expensesSubject.next(r),error:r=>console.error("Error fetching expenses:",r)})}getProducts(){return this.products$}getSales(){return this.sales$}getExpenses(){return this.expenses$}addExpense(t){let r=ue(ee({},t),{userId:this.getCurrentUser()});this.http.post(`${this.apiUrl}/expenses`,r).subscribe({next:i=>{let o=this.expensesSubject.value;this.expensesSubject.next([...o,i]),this.loggingService.logActivity("create","expense",i.id,i.productName,`$${i.price.toFixed(2)}`)},error:i=>console.error("Error adding expense:",i)})}addProduct(t){let r=ue(ee({},t),{userId:this.getCurrentUser()});this.http.post(`${this.apiUrl}/products`,r).subscribe({next:i=>{let o=this.productsSubject.value;this.productsSubject.next([...o,i]),this.loggingService.logActivity("create","product",i.id,i.name)},error:i=>console.error("Error adding product:",i)})}recordSale(t,r,i,o,s,a,l=0,u="amount",p){let b=this.productsSubject.value.find(F=>F.id===t);if(!b)throw new Error("Product not found");if(b.quantity<r)throw new Error("Insufficient quantity");let C=b.price*r;l>0&&(u==="percent"?C=C-C*(l/100):C=C-l),C=Math.max(0,Math.round(C*100)/100);let O=i-C;if(O<0)throw new Error("Insufficient cash");let V={productId:b.id,productName:b.name,category:b.category,price:b.price,quantitySold:r,total:C,cashReceived:i,change:O,deliveryDate:o,deliveryNotes:s,customerId:a,pending:!0,discount:l,discountType:u,userId:this.getCurrentUser(),orderId:p};this.http.post(`${this.apiUrl}/sales`,V).subscribe({next:F=>{let W=this.salesSubject.value;this.salesSubject.next([...W,this.transformSale(F)]),this.loggingService.logActivity("create","sale",F.id,b.name,`Sold ${r} units (Pending Delivery)`)},error:F=>console.error("Error recording sale:",F)})}completePendingSale(t){let r=this.salesSubject.value,i=r.find(o=>o.id===t);if(!i){console.error("Sale not found via ID");return}this.http.put(`${this.apiUrl}/sales/${t}`,{pending:!1}).subscribe({next:()=>{let o=r.map(l=>l.id===t?ue(ee({},l),{pending:!1}):l);this.salesSubject.next(o);let a=this.productsSubject.value.find(l=>l.id===i.productId);if(a){let l=ue(ee({},a),{quantity:a.quantity-i.quantitySold});this.updateProduct(l)}this.loggingService.logActivity("complete","sale",t,i.productName,`Marked as delivered & Deducted ${i.quantitySold} units`)},error:o=>console.error("Error completing sale:",o)})}updateSale(t){this.http.put(`${this.apiUrl}/sales/${t.id}`,t).subscribe({next:r=>{let o=this.salesSubject.value.map(s=>s.id===t.id?this.transformSale(r):s);this.salesSubject.next(o),this.loggingService.logActivity("update","sale",t.id,t.productName,"Updated delivery details")},error:r=>console.error("Error updating sale:",r)})}confirmReservation(t){if(!this.productsSubject.value.find(s=>s.id===t.productId)){console.error("Product not found for confirmation stock deduction");return}let o=ue(ee({},t),{reservationStatus:"confirmed"});this.http.put(`${this.apiUrl}/sales/${t.id}`,o).subscribe({next:s=>{let l=this.salesSubject.value.map(u=>u.id===t.id?this.transformSale(o):u);this.salesSubject.next(l),this.loggingService.logActivity("update","sale",t.id,t.productName,"Confirmed reservation (Stock deduction pending delivery)")},error:s=>console.error("Error confirming reservation:",s)})}transformSale(t){return ue(ee({},t),{timestamp:this.parseDate(t.timestamp),deliveryDate:t.deliveryDate?this.parseDate(t.deliveryDate):void 0})}parseDate(t){return t?t instanceof Date?t:typeof t=="string"?new Date(t):typeof t=="object"&&t._seconds!==void 0?new Date(t._seconds*1e3):new Date(t):new Date}restockProduct(t,r){let o=this.productsSubject.value.find(s=>s.id===t);if(o){let s=ue(ee({},o),{quantity:o.quantity+r});this.updateProduct(s),this.loggingService.logActivity("restock","product",t,o.name,`Added ${r} units`)}}deleteSale(t){this.http.delete(`${this.apiUrl}/sales/${t}`).subscribe({next:()=>{let i=this.salesSubject.value.filter(o=>o.id!==t);this.salesSubject.next(i),this.loggingService.logActivity("delete","sale",t,"Reservation/Sale","Deleted sale record")},error:r=>console.error("Error deleting sale:",r)})}updateProduct(t){this.http.put(`${this.apiUrl}/products/${t.id}`,t).subscribe({next:()=>{let i=this.productsSubject.value.map(a=>a.id===t.id?t:a);this.productsSubject.next(i);let o=this.salesSubject.value,s=o.filter(a=>a.productId===t.id&&a.productName!==t.name);if(s.length>0){let a=o.map(l=>l.productId===t.id?ue(ee({},l),{productName:t.name}):l);this.salesSubject.next(a),s.forEach(l=>{let u=ue(ee({},l),{productName:t.name});this.http.put(`${this.apiUrl}/sales/${l.id}`,u).subscribe({error:p=>console.error(`Error updating sale ${l.id} name:`,p)})})}this.loggingService.logActivity("update","product",t.id,t.name)},error:r=>console.error("Error updating product:",r)})}clearAllData(){this.productsSubject.next([]),this.salesSubject.next([]),this.expensesSubject.next([])}migrateFromLocalStorage(){let t=localStorage.getItem("jjm_products"),r=localStorage.getItem("jjm_sales"),i=localStorage.getItem("jjm_expenses");t&&JSON.parse(t).forEach(s=>this.addProduct(s)),r&&JSON.parse(r).forEach(s=>{this.http.post(`${this.apiUrl}/sales`,s).subscribe({error:a=>console.error("Error migrating sale:",a)})}),i&&JSON.parse(i).forEach(s=>this.addExpense(s)),console.log("Migration started...")}static{this.\u0275fac=function(r){return new(r||n)(se(wn),se(Nl))}}static{this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function DO(n,e){if(n&1){let t=te();h(0,"div",23),be(1,"img",24),h(2,"button",25),j("click",function(){R(t);let i=I();return k(i.removeImage())}),g(3," \u2715 "),f()()}if(n&2){let t=I();y(),D("src",t.imagePreview,_n)}}function SO(n,e){if(n&1){let t=te();h(0,"div",26)(1,"input",27),j("change",function(i){R(t);let o=I();return k(o.onImageChange(i))}),f(),h(2,"label",28)(3,"span",29),g(4,"\u{1F4F7}"),f(),h(5,"span",30),g(6,"Click to upload image"),f(),h(7,"span",31),g(8,"PNG, JPG, GIF up to 5MB"),f()()()}}var TC=(()=>{class n{constructor(t){this.inventoryService=t,this.product={name:"",category:"",price:0,quantity:0,imageUrl:""},this.imagePreview=null}onImageChange(t){let r=t.target;if(r.files&&r.files[0]){let i=r.files[0],o=new FileReader;o.onload=s=>{this.imagePreview=s.target?.result,this.product.imageUrl=s.target?.result},o.readAsDataURL(i)}}removeImage(){this.imagePreview=null,this.product.imageUrl=""}onSubmit(){this.isValid()&&(this.inventoryService.addProduct({name:this.product.name,category:this.product.category,price:this.product.price,quantity:this.product.quantity,imageUrl:this.product.imageUrl}),this.product={name:"",category:"",price:0,quantity:0,imageUrl:""},this.imagePreview=null)}isValid(){return!!(this.product.name&&this.product.category&&this.product.price>0&&this.product.quantity>0)}static{this.\u0275fac=function(r){return new(r||n)(Q(Lt))}}static{this.\u0275cmp=Re({type:n,selectors:[["app-product-form"]],standalone:!0,features:[ke],decls:42,vars:7,consts:[[1,"card"],[1,"form",3,"ngSubmit"],[1,"image-upload-section"],[1,"image-upload-label"],["class","image-preview-container",4,"ngIf"],["class","image-upload-area",4,"ngIf"],[1,"form-group"],["for","productName"],["type","text","id","productName","name","name","placeholder","Enter product name","required","",3,"ngModelChange","ngModel"],["for","category"],["id","category","name","category","required","",3,"ngModelChange","ngModel"],["value",""],["value","Lechon"],["value","Hollow blocks"],["value","Sand and Gravel"],["value","Copra"],["value","Others"],[1,"form-row"],["for","price"],["type","number","id","price","name","price","placeholder","0.00","min","0","step","0.01","required","",3,"ngModelChange","ngModel"],["for","quantity"],["type","number","id","quantity","name","quantity","placeholder","0","min","1","required","",3,"ngModelChange","ngModel"],["type","submit",1,"btn-primary",3,"disabled"],[1,"image-preview-container"],["alt","Product preview","loading","lazy",1,"image-preview",3,"src"],["type","button",1,"remove-image-btn",3,"click"],[1,"image-upload-area"],["type","file","id","productImage","accept","image/*",1,"file-input",3,"change"],["for","productImage",1,"file-input-label"],[1,"upload-icon"],[1,"upload-text"],[1,"upload-hint"]],template:function(r,i){r&1&&(h(0,"div",0)(1,"h3"),g(2,"Add New Product"),f(),h(3,"form",1),j("ngSubmit",function(){return i.onSubmit()}),h(4,"div",2)(5,"label",3),g(6,"Product Image (Optional)"),f(),U(7,DO,4,1,"div",4)(8,SO,9,0,"div",5),f(),h(9,"div",6)(10,"label",7),g(11,"Product Name"),f(),h(12,"input",8),J("ngModelChange",function(s){return Z(i.product.name,s)||(i.product.name=s),s}),f()(),h(13,"div",6)(14,"label",9),g(15,"Category"),f(),h(16,"select",10),J("ngModelChange",function(s){return Z(i.product.category,s)||(i.product.category=s),s}),h(17,"option",11),g(18,"-- Select Category --"),f(),h(19,"option",12),g(20,"Lechon"),f(),h(21,"option",13),g(22,"Hollow blocks"),f(),h(23,"option",14),g(24,"Sand and Gravel"),f(),h(25,"option",15),g(26,"Copra"),f(),h(27,"option",16),g(28,"Others"),f()()(),h(29,"div",17)(30,"div",6)(31,"label",18),g(32,"Price"),f(),h(33,"input",19),J("ngModelChange",function(s){return Z(i.product.price,s)||(i.product.price=s),s}),f()(),h(34,"div",6)(35,"label",20),g(36,"Quantity"),f(),h(37,"input",21),J("ngModelChange",function(s){return Z(i.product.quantity,s)||(i.product.quantity=s),s}),f()()(),h(38,"button",22)(39,"span"),g(40,"\u2795"),f(),g(41," Add Product "),f()()()),r&2&&(y(7),D("ngIf",i.imagePreview),y(),D("ngIf",!i.imagePreview),y(4),Y("ngModel",i.product.name),y(4),Y("ngModel",i.product.category),y(17),Y("ngModel",i.product.price),y(4),Y("ngModel",i.product.quantity),y(),D("disabled",!i.isValid()))},dependencies:[Ne,He,ot,zn,an,cn,rt,dr,Ft,it,$n,Kt,hr,Ze,xn],styles:[".form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg);margin-top:var(--space-lg)}.image-upload-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.image-upload-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.image-preview-container[_ngcontent-%COMP%]{position:relative;width:100%;max-width:300px;margin:0 auto}.image-preview[_ngcontent-%COMP%]{width:100%;height:200px;object-fit:cover;border-radius:var(--radius-lg);border:2px solid var(--color-border)}.remove-image-btn[_ngcontent-%COMP%]{position:absolute;top:var(--space-sm);right:var(--space-sm);width:32px;height:32px;padding:0;background:var(--color-danger);color:#fff;border:none;border-radius:50%;font-size:1.25rem;cursor:pointer;display:flex;align-items:center;justify-content:center;box-shadow:var(--shadow-md)}.remove-image-btn[_ngcontent-%COMP%]:hover{background:#dc2626;transform:scale(1.1)}.image-upload-area[_ngcontent-%COMP%]{width:100%}.file-input[_ngcontent-%COMP%]{display:none}.file-input-label[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:var(--space-sm);padding:var(--space-2xl);border:2px dashed var(--color-border);border-radius:var(--radius-lg);background:var(--color-bg);cursor:pointer;transition:all var(--transition-base)}.file-input-label[_ngcontent-%COMP%]:hover{border-color:var(--color-primary);background:#1e40af0d}.upload-icon[_ngcontent-%COMP%]{font-size:3rem}.upload-text[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text)}.upload-hint[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--space-lg)}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:var(--space-md) var(--space-lg);font-size:1rem;margin-top:var(--space-sm)}@media (max-width: 640px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return n})();var Ur=(()=>{class n{constructor(t){this.http=t,this.apiUrl=Vt.apiUrl,this.customersSubject=new Qe([]),this.customers$=this.customersSubject.asObservable(),this.loadInitialData()}loadInitialData(){this.fetchCustomers()}getCurrentUser(){return localStorage.getItem("jjm_user_id")||"guest"}reloadData(){this.loadInitialData()}fetchCustomers(){let t=this.getCurrentUser();this.http.get(`${this.apiUrl}/customers?userId=${t}`).subscribe({next:r=>this.customersSubject.next(r),error:r=>console.error("Error fetching customers:",r)})}getCustomers(){return this.customers$}addCustomer(t){let r=ue(ee({},t),{userId:this.getCurrentUser()});this.http.post(`${this.apiUrl}/customers`,r).subscribe({next:i=>{let o=this.customersSubject.value;this.customersSubject.next([...o,i])},error:i=>console.error("Error adding customer:",i)})}updateCustomer(t,r){this.http.put(`${this.apiUrl}/customers/${t}`,r).subscribe({next:()=>{let o=this.customersSubject.value.map(s=>s.id===t?ee(ee({},s),r):s);this.customersSubject.next(o)},error:i=>console.error("Error updating customer:",i)})}deleteCustomer(t){this.http.delete(`${this.apiUrl}/customers/${t}`).subscribe({next:()=>{let i=this.customersSubject.value.filter(o=>o.id!==t);this.customersSubject.next(i)},error:r=>console.error("Error deleting customer:",r)})}getCustomerById(t){return this.customersSubject.value.find(r=>r.id===t)}static{this.\u0275fac=function(r){return new(r||n)(se(wn))}}static{this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var kl=(()=>{class n{constructor(){this.dialogSubject=new Qe({isOpen:!1,config:null,resolve:null}),this.dialog$=this.dialogSubject.asObservable()}alert(t,r,i="info"){return new Promise(o=>{this.dialogSubject.next({isOpen:!0,config:{title:r||this.getDefaultTitle(i),message:t,type:i,confirmText:"OK",showCancel:!1},resolve:o})})}confirm(t,r){return new Promise(i=>{this.dialogSubject.next({isOpen:!0,config:{title:r||"Confirm",message:t,type:"confirm",confirmText:"Confirm",cancelText:"Cancel",showCancel:!0},resolve:i})})}success(t,r){return this.alert(t,r,"success")}error(t,r){return this.alert(t,r,"error")}warning(t,r){return this.alert(t,r,"warning")}info(t,r){return this.alert(t,r,"info")}close(t){let r=this.dialogSubject.value;r.resolve&&r.resolve(t),this.dialogSubject.next({isOpen:!1,config:null,resolve:null})}getDefaultTitle(t){switch(t){case"success":return"Success";case"error":return"Error";case"warning":return"Warning";case"info":default:return"Information"}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function MO(n,e){if(n&1&&(h(0,"option",43),g(1),f()),n&2){let t=e.$implicit;D("value",t.id),y(),z(" ",t.name," ")}}function TO(n,e){if(n&1&&(h(0,"option",43),g(1),ae(2,"number"),f()),n&2){let t=e.$implicit;D("value",t.id),y(),Tf(" ",t.name," - $",ge(2,4,t.price,"1.2-2")," (Stock: ",t.quantity,") ")}}function PO(n,e){if(n&1&&(h(0,"div",44),g(1),f()),n&2){let t=I();y(),z("\u26A0\uFE0F ",t.errorMessage,"")}}function AO(n,e){if(n&1&&(h(0,"div",49),g(1),f()),n&2){let t=I().$implicit;y(),z(" Disc: -",t.discountType==="percent"?t.discount+"%":"$"+t.discount," ")}}function OO(n,e){if(n&1){let t=te();h(0,"tr")(1,"td")(2,"div",45),g(3),f(),U(4,AO,2,1,"div",46),f(),h(5,"td",25),g(6),ae(7,"number"),f(),h(8,"td",26),g(9),f(),h(10,"td",47),g(11),ae(12,"number"),f(),h(13,"td",26)(14,"button",48),j("click",function(){let i=R(t).index,o=I();return k(o.removeFromCart(i))}),g(15,"\u2715"),f()()()}if(n&2){let t=e.$implicit;y(3),q(t.product.name),y(),D("ngIf",t.discount>0),y(2),z("$",ge(7,5,t.product.price,"1.2-2"),""),y(3),q(t.quantity),y(2),z("$",ge(12,8,t.total,"1.2-2"),"")}}function NO(n,e){n&1&&(h(0,"tr")(1,"td",50),g(2,"Cart is empty. Add items above."),f()())}function RO(n,e){if(n&1){let t=te();h(0,"div",51)(1,"div",52)(2,"h4"),g(3,"\u{1F69A} Delivery Options"),f(),h(4,"div",3)(5,"div",4)(6,"label"),g(7,"Date"),f(),h(8,"input",53),J("ngModelChange",function(i){R(t);let o=I();return Z(o.deliveryDate,i)||(o.deliveryDate=i),k(i)}),f()(),h(9,"div",4)(10,"label"),g(11,"Time"),f(),h(12,"input",54),J("ngModelChange",function(i){R(t);let o=I();return Z(o.deliveryTime,i)||(o.deliveryTime=i),k(i)}),f()()(),h(13,"div",4)(14,"textarea",55),J("ngModelChange",function(i){R(t);let o=I();return Z(o.deliveryNotes,i)||(o.deliveryNotes=i),k(i)}),f()()(),h(15,"div",56)(16,"h4"),g(17,"\u{1F4B0} Payment"),f(),h(18,"div",57)(19,"span"),g(20,"Total Due:"),f(),h(21,"span"),g(22),ae(23,"number"),f()(),h(24,"div",58)(25,"label"),g(26,"Cash Received ($)"),f(),h(27,"input",59),J("ngModelChange",function(i){R(t);let o=I();return Z(o.cashReceived,i)||(o.cashReceived=i),k(i)}),f()(),h(28,"div",60)(29,"span"),g(30,"Change:"),f(),h(31,"span"),g(32),ae(33,"number"),f()(),h(34,"button",61),j("click",function(){R(t);let i=I();return k(i.checkout())}),g(35," Complete Order "),f()()()}if(n&2){let t=I();y(8),Y("ngModel",t.deliveryDate),D("min",t.minDate),y(4),Y("ngModel",t.deliveryTime),y(2),Y("ngModel",t.deliveryNotes),y(8),z("$",ge(23,10,t.total,"1.2-2"),""),y(5),Y("ngModel",t.cashReceived),y(),_e("negative",t.change<0),y(4),z("$",ge(33,13,t.change,"1.2-2"),""),y(2),D("disabled",!t.isValid())}}function kO(n,e){if(n&1){let t=te();h(0,"button",62),j("click",function(){R(t);let i=I();return k(i.deliveryFilterDate="")}),g(1,"\u274C"),f()}}function FO(n,e){if(n&1&&(h(0,"span",81),g(1),f()),n&2){let t=I().$implicit;y(),q(t.sales[0].productName)}}function VO(n,e){if(n&1&&(h(0,"span",81),g(1),ae(2,"slice"),f()),n&2){let t=I().$implicit;y(),on("Order #",bb(2,2,t.orderId,4,12),"... (",t.sales.length," items)")}}function LO(n,e){n&1&&(h(0,"span",82),g(1,"\u26A0\uFE0F RESERVATION"),f())}function jO(n,e){n&1&&(h(0,"span",83),g(1,"\u2705 CONFIRMED"),f())}function BO(n,e){if(n&1&&(h(0,"div",86),g(1),h(2,"span",87),g(3),f()()),n&2){let t=e.$implicit;y(),z(" \u2022 ",t.productName," "),y(2),z("(x",t.quantitySold,")")}}function UO(n,e){if(n&1&&(h(0,"div",84),U(1,BO,4,2,"div",85),f()),n&2){let t=I().$implicit;y(),D("ngForOf",t.sales)}}function $O(n,e){if(n&1&&(h(0,"span"),g(1),f()),n&2){let t=I().$implicit;y(),z("Qty: ",t.quantityTotal,"")}}function zO(n,e){if(n&1&&(h(0,"span"),g(1),f()),n&2){let t=I().$implicit;y(),z("Total Qty: ",t.quantityTotal,"")}}function qO(n,e){if(n&1&&(h(0,"div",88)(1,"div",89),g(2,"\u{1F464} Customer Details"),f(),h(3,"div",90)(4,"span",91),g(5,"Name:"),f(),h(6,"span",92),g(7),f()(),h(8,"div",90)(9,"span",91),g(10,"Phone:"),f(),h(11,"span",92),g(12),f()(),h(13,"div",90)(14,"span",91),g(15,"Address:"),f(),h(16,"span",92),g(17),f()()()),n&2){let t=I().$implicit;y(7),q(t.customer.name),y(5),q(t.customer.phoneNumber),y(5),q(t.customer.deliveryAddress)}}function HO(n,e){if(n&1&&(h(0,"span"),g(1),f()),n&2){let t=I(2).$implicit;y(),z("\u{1F4DD} ",t.deliveryNotes,"")}}function GO(n,e){if(n&1&&(h(0,"div",93)(1,"span"),g(2),ae(3,"date"),f(),h(4,"span"),g(5),ae(6,"date"),f(),U(7,HO,2,1,"span",28),f()),n&2){let t=I().$implicit;y(2),z("\u{1F4C5} Due: ",ge(3,3,t.deliveryDate,"mediumDate"),""),y(3),z("\u{1F4C5} Time: ",ge(6,6,t.deliveryDate,"shortTime"),""),y(2),D("ngIf",t.deliveryNotes)}}function WO(n,e){if(n&1){let t=te();h(0,"button",94),j("click",function(){R(t);let i=I().$implicit,o=I();return k(o.confirmGroupReservation(i.sales))}),g(1," \u{1F4DD} Confirm "),f()}}function QO(n,e){if(n&1){let t=te();h(0,"button",95),j("click",function(){R(t);let i=I().$implicit,o=I();return k(o.markGroupAsDelivered(i.sales))}),g(1," \u{1F69A} Mark Delivered "),f()}}function KO(n,e){if(n&1){let t=te();h(0,"div",63)(1,"div",64)(2,"div",65)(3,"div",66),U(4,FO,2,1,"span",67)(5,VO,3,6,"span",67),f(),U(6,LO,2,0,"span",68)(7,jO,2,0,"span",69),h(8,"span",70),g(9),ae(10,"date"),f()(),U(11,UO,2,1,"div",71),h(12,"div",72),U(13,$O,2,1,"span",28)(14,zO,2,1,"span",28),h(15,"span",73),g(16),ae(17,"number"),f()(),U(18,qO,18,3,"div",74)(19,GO,8,9,"div",75),f(),h(20,"div",76)(21,"button",77),j("click",function(){let i=R(t).$implicit,o=I();return k(o.openEditModal(i.sales[0]))}),g(22,"\u270F\uFE0F Edit"),f(),U(23,WO,2,0,"button",78),h(24,"button",79),j("click",function(){let i=R(t).$implicit,o=I();return k(o.cancelGroupOrder(i.sales))}),g(25," \u{1F5D1}\uFE0F Cancel "),f(),U(26,QO,2,0,"button",80),f()()}if(n&2){let t=e.$implicit;y(4),D("ngIf",!t.isGroup),y(),D("ngIf",t.isGroup),y(),D("ngIf",t.status==="pending_confirmation"),y(),D("ngIf",t.status==="confirmed"),y(2),q(ge(10,13,t.timestamp,"short")),y(2),D("ngIf",t.isGroup),y(2),D("ngIf",!t.isGroup),y(),D("ngIf",t.isGroup),y(2),z("Due: $",ge(17,16,t.total,"1.2-2"),""),y(2),D("ngIf",t.customer),y(),D("ngIf",t.deliveryDate),y(4),D("ngIf",t.status==="pending_confirmation"),y(3),D("ngIf",t.status!=="pending_confirmation")}}function YO(n,e){if(n&1){let t=te();h(0,"div",96),j("click",function(){R(t);let i=I();return k(i.closeEditModal())}),h(1,"div",97),j("click",function(i){return R(t),k(i.stopPropagation())}),h(2,"div",98)(3,"h3"),g(4,"Edit Delivery Details"),f(),h(5,"button",99),j("click",function(){R(t);let i=I();return k(i.closeEditModal())}),g(6,"\xD7"),f()(),h(7,"div",100)(8,"div",4)(9,"label",101),g(10,"Delivery Date"),f(),h(11,"input",102),J("ngModelChange",function(i){R(t);let o=I();return Z(o.editDeliveryDate,i)||(o.editDeliveryDate=i),k(i)}),f()(),h(12,"div",4)(13,"label",103),g(14,"Delivery Time"),f(),h(15,"input",104),J("ngModelChange",function(i){R(t);let o=I();return Z(o.editDeliveryTime,i)||(o.editDeliveryTime=i),k(i)}),f()(),h(16,"div",4)(17,"label",105),g(18,"Notes"),f(),h(19,"textarea",106),J("ngModelChange",function(i){R(t);let o=I();return Z(o.editDeliveryNotes,i)||(o.editDeliveryNotes=i),k(i)}),f()()(),h(20,"div",107)(21,"button",108),j("click",function(){R(t);let i=I();return k(i.closeEditModal())}),g(22,"Cancel"),f(),h(23,"button",109),j("click",function(){R(t);let i=I();return k(i.saveEdit())}),g(24,"Save Changes"),f()()()()}if(n&2){let t=I();y(11),Y("ngModel",t.editDeliveryDate),D("min",t.minDate),y(4),Y("ngModel",t.editDeliveryTime),y(4),Y("ngModel",t.editDeliveryNotes)}}var AC=(()=>{class n{constructor(t,r,i){this.inventoryService=t,this.customerService=r,this.dialogService=i,this.products=[],this.customers=[],this.pendingSales=[],this.selectedProductId="",this.selectedCustomerId="",this.quantity=1,this.cashReceived=0,this.discount=0,this.discountType="amount",this.errorMessage="",this.cart=[],this.deliveryDate="",this.deliveryTime="",this.deliveryNotes="",this.minDate="",this.deliveryFilterDate="",this.statusFilter="all",this.isEditModalOpen=!1,this.editingSale=null,this.editDeliveryDate="",this.editDeliveryTime="",this.editDeliveryNotes="",this.alarmInterval=null;let o=new Date,s=o.getFullYear(),a=String(o.getMonth()+1).padStart(2,"0"),l=String(o.getDate()).padStart(2,"0");this.minDate=`${s}-${a}-${l}`,this.deliveryDate=this.minDate}ngOnInit(){this.inventoryService.getProducts().subscribe(t=>{this.products=t.filter(r=>r.quantity>0)}),this.customerService.getCustomers().subscribe(t=>{this.customers=t}),this.inventoryService.getSales().subscribe(t=>{this.pendingSales=t.filter(r=>r.pending===!0),this.startAlarmChecks()}),this.discount=0}startAlarmChecks(){setInterval(()=>this.checkPendingDeliveryAlarms(),60*60*1e3),this.checkPendingDeliveryAlarms()}get filteredPendingSales(){let t=this.pendingSales;return this.statusFilter==="reservation"&&(t=t.filter(r=>r.reservationStatus==="pending_confirmation")),this.deliveryFilterDate&&(t=t.filter(r=>{if(!r.deliveryDate)return!1;let i=new Date(r.deliveryDate),o=i.getFullYear(),s=String(i.getMonth()+1).padStart(2,"0"),a=String(i.getDate()).padStart(2,"0");return`${o}-${s}-${a}`===this.deliveryFilterDate})),t.slice().sort((r,i)=>{let o=r.reservationStatus==="pending_confirmation",s=i.reservationStatus==="pending_confirmation";if(o&&!s)return-1;if(!o&&s)return 1;let a=r.deliveryDate?new Date(r.deliveryDate).getTime():1/0,l=i.deliveryDate?new Date(i.deliveryDate).getTime():1/0;return a-l})}checkPendingDeliveryAlarms(){let t=new Date;this.pendingSales.forEach(r=>{if(!r.deliveryDate)return;let o=new Date(r.deliveryDate).getTime()-t.getTime(),s=Math.floor(o/(1e3*60*60*24));(s===1||s===2||s<0)&&this.triggerAlarm(r,s)})}triggerAlarm(t,r){let o=new Date(t.deliveryDate).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}),s=`\u26A0\uFE0F Delivery for "${t.productName}" is due in ${r} day(s) (${o}).`;this.playLoopingAlarm(),this.dialogService.alert(s,"Delivery Reminder","warning").then(()=>{this.stopAlarm()})}playLoopingAlarm(){this.stopAlarm(),this.playBeep(),this.alarmInterval=setInterval(()=>{this.playBeep()},2e3)}stopAlarm(){this.alarmInterval&&(clearInterval(this.alarmInterval),this.alarmInterval=null)}playBeep(){try{let t=new(window.AudioContext||window.webkitAudioContext),r=t.createOscillator(),i=t.createOscillator(),o=t.createGain();r.type="sine",i.type="sine",r.frequency.setValueAtTime(523.25,t.currentTime),i.frequency.setValueAtTime(659.25,t.currentTime),r.connect(o),i.connect(o),o.connect(t.destination),o.gain.setValueAtTime(0,t.currentTime),o.gain.linearRampToValueAtTime(.15,t.currentTime+.05),o.gain.linearRampToValueAtTime(.15,t.currentTime+.4),o.gain.exponentialRampToValueAtTime(.01,t.currentTime+.8),r.start(t.currentTime),i.start(t.currentTime),r.stop(t.currentTime+.8),i.stop(t.currentTime+.8)}catch(t){console.error("Audio alarm failed",t)}}get selectedProduct(){return this.products.find(t=>t.id===this.selectedProductId)}get selectedCustomer(){return this.customers.find(t=>t.id===this.selectedCustomerId)}getCustomerById(t){if(t)return this.customers.find(r=>r.id===t)}get maxQuantity(){return this.selectedProduct?.quantity||0}onProductChange(){this.quantity=1,this.errorMessage="",this.discount=0}addToCart(){if(this.errorMessage="",!this.selectedProduct){this.errorMessage="Please select a product";return}if(this.quantity<1||this.quantity>this.maxQuantity){this.errorMessage=`Quantity must be between 1 and ${this.maxQuantity}`;return}let t=this.cart.filter(i=>i.product.id===this.selectedProduct.id).reduce((i,o)=>i+o.quantity,0);if(t+this.quantity>this.maxQuantity){this.errorMessage=`Cannot add more. Total in cart (${t}) + new (${this.quantity}) exceeds stock (${this.maxQuantity})`;return}let r=this.selectedProduct.price*this.quantity;this.discount>0&&(this.discountType==="percent"?r=r-r*(this.discount/100):r=r-this.discount),r=Math.max(0,Math.round(r*100)/100),this.cart.push({product:this.selectedProduct,quantity:this.quantity,discount:this.discount,discountType:this.discountType,total:r}),this.quantity=1,this.discount=0,this.discountType="amount",this.selectedProductId=""}removeFromCart(t){this.cart.splice(t,1)}get total(){return this.cart.reduce((t,r)=>t+r.total,0)}get change(){return this.cashReceived-this.total}isValid(){return this.cart.length>0&&this.cashReceived>=this.total}get groupedPendingSales(){let t=new Map,r=[];this.filteredPendingSales.forEach(o=>{o.orderId?(t.has(o.orderId)||t.set(o.orderId,[]),t.get(o.orderId).push(o)):r.push(o)});let i=[];return t.forEach((o,s)=>{let a=o[0];i.push({isGroup:!0,orderId:s,sales:o,total:o.reduce((l,u)=>l+u.total,0),customerName:this.getCustomerById(a.customerId)?.name||"Walk-in",customer:this.getCustomerById(a.customerId),deliveryDate:a.deliveryDate,timestamp:a.timestamp,status:a.reservationStatus,productNames:o.map(l=>l.productName).join(", "),deliveryNotes:a.deliveryNotes,quantityTotal:o.reduce((l,u)=>l+u.quantitySold,0)})}),r.forEach(o=>{i.push({isGroup:!1,id:o.id,sales:[o],total:o.total,customerName:this.getCustomerById(o.customerId)?.name||"Walk-in",customer:this.getCustomerById(o.customerId),deliveryDate:o.deliveryDate,timestamp:o.timestamp,status:o.reservationStatus,productNames:o.productName,deliveryNotes:o.deliveryNotes,quantityTotal:o.quantitySold})}),i.sort((o,s)=>{let a=o.status==="pending_confirmation",l=s.status==="pending_confirmation";if(a&&!l)return-1;if(!a&&l)return 1;let u=o.deliveryDate?new Date(o.deliveryDate).getTime():1/0,p=s.deliveryDate?new Date(s.deliveryDate).getTime():1/0;return u-p})}checkout(){if(this.errorMessage="",this.cart.length===0){this.errorMessage="Cart is empty";return}if(this.cashReceived<this.total){this.errorMessage="Insufficient cash received";return}let t=this.cashReceived-this.total,r="ORD-"+Date.now()+"-"+Math.floor(Math.random()*1e3);try{this.cart.forEach((i,o)=>{let s=i.total;o===0&&(s+=t);let a;this.deliveryDate&&(this.deliveryTime?a=new Date(`${this.deliveryDate}T${this.deliveryTime}`):a=new Date(this.deliveryDate)),this.inventoryService.recordSale(i.product.id,i.quantity,s,a,this.deliveryNotes||void 0,this.selectedCustomerId||void 0,i.discount,i.discountType,r)}),this.cart=[],this.cashReceived=0,this.deliveryDate=this.minDate,this.deliveryTime="",this.deliveryNotes="",this.selectedCustomerId="",this.errorMessage=""}catch(i){this.errorMessage=i.message||"Error processing sales"}}markAsDelivered(t){confirm("Are you sure you want to mark this item as delivered?")&&this.inventoryService.completePendingSale(t)}confirmReservation(t){confirm("Confirming this reservation will deduct items from inventory. Continue?")&&this.inventoryService.confirmReservation(t)}deleteReservation(t){confirm("Are you sure you want to remove this reservation?")&&this.inventoryService.deleteSale(t.id)}openEditModal(t){if(this.editingSale=t,this.isEditModalOpen=!0,t.deliveryDate){let r=new Date(t.deliveryDate),i=r.getFullYear(),o=String(r.getMonth()+1).padStart(2,"0"),s=String(r.getDate()).padStart(2,"0");this.editDeliveryDate=`${i}-${o}-${s}`,this.editDeliveryTime=r.toTimeString().substring(0,5)}else this.editDeliveryDate="",this.editDeliveryTime="";this.editDeliveryNotes=t.deliveryNotes||""}closeEditModal(){this.isEditModalOpen=!1,this.editingSale=null,this.editDeliveryDate="",this.editDeliveryTime="",this.editDeliveryNotes=""}saveEdit(){if(!this.editingSale)return;let t;this.editDeliveryDate&&(this.editDeliveryTime?t=new Date(`${this.editDeliveryDate}T${this.editDeliveryTime}`):t=new Date(this.editDeliveryDate));let r=this.editingSale.orderId;if(r)this.pendingSales.filter(o=>o.orderId===r).forEach(o=>{let s=ue(ee({},o),{deliveryDate:t,deliveryNotes:this.editDeliveryNotes});this.inventoryService.updateSale(s)});else{let i=ue(ee({},this.editingSale),{deliveryDate:t,deliveryNotes:this.editDeliveryNotes});this.inventoryService.updateSale(i)}this.closeEditModal()}markGroupAsDelivered(t){confirm(`Mark ${t.length} items as delivered?
This will deduct stock and complete the order.`)&&t.forEach(r=>this.inventoryService.completePendingSale(r.id))}confirmGroupReservation(t){confirm(`Confirm reservation for ${t.length} items? This will deduct stock upon delivery.`)&&t.forEach(r=>this.inventoryService.confirmReservation(r))}cancelGroupOrder(t){confirm(`Cancel order for ${t.length} items? This cannot be undone.`)&&t.forEach(r=>this.inventoryService.deleteSale(r.id))}static{this.\u0275fac=function(r){return new(r||n)(Q(Lt),Q(Ur),Q(kl))}}static{this.\u0275cmp=Re({type:n,selectors:[["app-pos-calculator"]],standalone:!0,features:[ke],decls:76,vars:19,consts:[[1,"card"],[1,"pos-layout"],[1,"selection-panel"],[1,"form-row"],[1,"form-group"],["for","customer"],["id","customer",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","flex-grow"],["for","product"],["id","product",3,"ngModelChange","change","ngModel"],[1,"form-row","align-end"],[1,"form-group","small-width"],["for","qty"],["type","number","id","qty",3,"ngModelChange","ngModel","min","max"],[1,"discount-row"],["type","number","placeholder","0",1,"small-input",3,"ngModelChange","ngModel"],[1,"small-select",3,"ngModelChange","ngModel"],["value","amount"],["value","percent"],[1,"btn-primary","btn-add",3,"click","disabled"],["class","error-message",4,"ngIf"],[1,"cart-container"],[1,"cart-table"],[1,"text-right"],[1,"text-center"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","checkout-panel",4,"ngIf"],[1,"card","pending-deliveries"],[1,"filter-row"],[1,"filter-group"],["for","deliveryFilter"],["type","date","id","deliveryFilter","name","deliveryFilter",3,"ngModelChange","ngModel"],["class","btn-clear","title","Clear Date",3,"click",4,"ngIf"],["for","statusFilter"],["id","statusFilter",1,"status-select",3,"ngModelChange","ngModel"],["value","all"],["value","reservation"],[1,"pending-list"],["class","pending-item",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],[3,"value"],[1,"error-message"],[1,"cart-prod-name"],["class","cart-prod-disc",4,"ngIf"],[1,"text-right","font-bold"],["title","Remove",1,"btn-remove-sm",3,"click"],[1,"cart-prod-disc"],["colspan","5",1,"empty-cart-cell"],[1,"checkout-panel"],[1,"delivery-card"],["type","date",3,"ngModelChange","ngModel","min"],["type","time",3,"ngModelChange","ngModel"],["placeholder","Delivery notes...","rows","2",3,"ngModelChange","ngModel"],[1,"payment-card"],[1,"summary-line","total-line"],[1,"form-group","cash-group"],["type","number","placeholder","0.00",1,"cash-input",3,"ngModelChange","ngModel"],[1,"summary-line","change-line"],[1,"btn-checkout",3,"click","disabled"],["title","Clear Date",1,"btn-clear",3,"click"],[1,"pending-item"],[1,"pending-details"],[1,"pending-header"],[1,"header-left"],["class","product-name",4,"ngIf"],["class","status-badge warning",4,"ngIf"],["class","status-badge success",4,"ngIf"],[1,"sale-date"],["class","multi-item-list",4,"ngIf"],[1,"pending-info"],[1,"total-price"],["class","customer-details",4,"ngIf"],["class","delivery-info",4,"ngIf"],[1,"pending-actions"],[1,"btn-edit",3,"click"],["class","btn-confirm","title","Confirm Reservation",3,"click",4,"ngIf"],["title","Cancel Order",1,"btn-delete",3,"click"],["class","btn-deliver",3,"click",4,"ngIf"],[1,"product-name"],[1,"status-badge","warning"],[1,"status-badge","success"],[1,"multi-item-list"],["class","sub-item",4,"ngFor","ngForOf"],[1,"sub-item"],[1,"sub-qty"],[1,"customer-details"],[1,"customer-header"],[1,"customer-row"],[1,"customer-label"],[1,"customer-value"],[1,"delivery-info"],["title","Confirm Reservation",1,"btn-confirm",3,"click"],[1,"btn-deliver",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],["for","editDate"],["type","date","id","editDate",1,"date-input",3,"ngModelChange","ngModel","min"],["for","editTime"],["type","time","id","editTime",1,"time-input",3,"ngModelChange","ngModel"],["for","editNotes"],["id","editNotes","rows","3",1,"textarea-input",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn-cancel",3,"click"],[1,"btn-save",3,"click"]],template:function(r,i){r&1&&(h(0,"div",0)(1,"h3"),g(2,"Point of Sale"),f(),h(3,"div",1)(4,"div",2)(5,"div",3)(6,"div",4)(7,"label",5),g(8,"Select Customer"),f(),h(9,"select",6),J("ngModelChange",function(s){return Z(i.selectedCustomerId,s)||(i.selectedCustomerId=s),s}),h(10,"option",7),g(11,"-- Walk-in Customer --"),f(),U(12,MO,2,2,"option",8),f()(),h(13,"div",9)(14,"label",10),g(15,"Select Product"),f(),h(16,"select",11),J("ngModelChange",function(s){return Z(i.selectedProductId,s)||(i.selectedProductId=s),s}),j("change",function(){return i.onProductChange()}),h(17,"option",7),g(18,"-- Choose a product --"),f(),U(19,TO,3,7,"option",8),f()()(),h(20,"div",12)(21,"div",13)(22,"label",14),g(23,"Quantity"),f(),h(24,"input",15),J("ngModelChange",function(s){return Z(i.quantity,s)||(i.quantity=s),s}),f()(),h(25,"div",4)(26,"label"),g(27,"Discount"),f(),h(28,"div",16)(29,"input",17),J("ngModelChange",function(s){return Z(i.discount,s)||(i.discount=s),s}),f(),h(30,"select",18),J("ngModelChange",function(s){return Z(i.discountType,s)||(i.discountType=s),s}),h(31,"option",19),g(32,"$"),f(),h(33,"option",20),g(34,"%"),f()()()(),h(35,"div",4)(36,"button",21),j("click",function(){return i.addToCart()}),g(37," \u2795 Add to Cart "),f()()()(),U(38,PO,2,1,"div",22),h(39,"div",23)(40,"table",24)(41,"thead")(42,"tr")(43,"th"),g(44,"Product"),f(),h(45,"th",25),g(46,"Price"),f(),h(47,"th",26),g(48,"Qty"),f(),h(49,"th",25),g(50,"Total"),f(),be(51,"th"),f()(),h(52,"tbody"),U(53,OO,16,11,"tr",27)(54,NO,3,0,"tr",28),f()()(),U(55,RO,36,16,"div",29),f()(),h(56,"div",30)(57,"h3"),g(58,"\u{1F69A} Pending Deliveries"),f(),h(59,"div",31)(60,"div",32)(61,"label",33),g(62,"Date:"),f(),h(63,"input",34),J("ngModelChange",function(s){return Z(i.deliveryFilterDate,s)||(i.deliveryFilterDate=s),s}),f(),U(64,kO,2,0,"button",35),f(),h(65,"div",32)(66,"label",36),g(67,"Show:"),f(),h(68,"select",37),J("ngModelChange",function(s){return Z(i.statusFilter,s)||(i.statusFilter=s),s}),h(69,"option",38),g(70,"All Deliveries"),f(),h(71,"option",39),g(72,"\u26A0\uFE0F Reservations"),f()()()(),h(73,"div",40),U(74,KO,27,19,"div",41),f()(),U(75,YO,25,4,"div",42)),r&2&&(y(9),Y("ngModel",i.selectedCustomerId),y(3),D("ngForOf",i.customers),y(4),Y("ngModel",i.selectedProductId),y(3),D("ngForOf",i.products),y(5),Y("ngModel",i.quantity),D("min",1)("max",i.maxQuantity),y(5),Y("ngModel",i.discount),y(),Y("ngModel",i.discountType),y(6),D("disabled",!i.selectedProductId),y(2),D("ngIf",i.errorMessage),y(15),D("ngForOf",i.cart),y(),D("ngIf",i.cart.length===0),y(),D("ngIf",i.cart.length>0),y(8),Y("ngModel",i.deliveryFilterDate),y(),D("ngIf",i.deliveryFilterDate),y(4),Y("ngModel",i.statusFilter),y(6),D("ngForOf",i.groupedPendingSales),y(),D("ngIf",i.isEditModalOpen))},dependencies:[Ne,nt,He,Lb,po,Un,ot,an,cn,rt,dr,Ft,it,hr,rp,Ze],styles:[".form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg);margin-top:var(--space-lg)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--space-lg)}.delivery-section[_ngcontent-%COMP%]{background:var(--color-bg);padding:var(--space-lg);border-radius:var(--radius-lg);border:2px dashed var(--color-border);margin-top:var(--space-md)}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);font-size:1rem;font-weight:600;color:var(--color-text);margin-bottom:var(--space-lg)}.section-icon[_ngcontent-%COMP%]{font-size:1.25rem}.date-input[_ngcontent-%COMP%], .time-input[_ngcontent-%COMP%]{cursor:pointer}.textarea-input[_ngcontent-%COMP%]{font-family:inherit;font-size:.9375rem;padding:var(--space-sm) var(--space-md);border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-surface);color:var(--color-text);transition:all var(--transition-base);width:100%;resize:vertical;min-height:80px}.textarea-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f61a}.textarea-input[_ngcontent-%COMP%]::placeholder{color:var(--color-text-muted)}.customer-info-display[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f61a,#9333ea1a);border:2px solid var(--color-primary);border-radius:var(--radius-lg);padding:var(--space-lg);margin-bottom:var(--space-lg)}.info-header[_ngcontent-%COMP%]{font-weight:600;font-size:1rem;color:var(--color-primary);margin-bottom:var(--space-md);display:flex;align-items:center;gap:var(--space-sm)}.info-row[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm);padding:var(--space-xs) 0;font-size:.875rem}.info-label[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text-muted);min-width:120px}.info-value[_ngcontent-%COMP%]{color:var(--color-text);flex:1}.transaction-summary[_ngcontent-%COMP%]{background:var(--color-bg);border-radius:var(--radius-md);padding:var(--space-lg);margin-top:var(--space-md)}.summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--space-sm) 0;font-size:1.125rem}.summary-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text-muted)}.summary-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text);font-size:1.25rem}.change-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:var(--color-success)}.change-row.negative[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:var(--color-danger)}.delivery-info[_ngcontent-%COMP%]{border-top:1px solid var(--color-border);margin-top:var(--space-sm);padding-top:var(--space-md)}.delivery-info[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1rem;color:var(--color-primary)}.error-message[_ngcontent-%COMP%]{background:#fee;color:var(--color-danger);padding:var(--space-md);border-radius:var(--radius-md);font-size:.875rem;border:1px solid rgba(239,68,68,.2)}.btn-success[_ngcontent-%COMP%]{background:var(--color-success)}.btn-success[_ngcontent-%COMP%]:hover{background:#059669}@media (max-width: 640px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}.pending-deliveries[_ngcontent-%COMP%]{margin-top:var(--space-xl);border-top:4px solid var(--color-warning)}.pending-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm);margin-top:var(--space-md)}.pending-item[_ngcontent-%COMP%]{background:var(--color-bg);border:1px solid var(--color-border);border-radius:var(--radius-md);padding:var(--space-sm);display:flex;justify-content:space-between;align-items:flex-start;gap:var(--space-md)}.pending-details[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:2px}.pending-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:4px}.header-left[_ngcontent-%COMP%]{display:flex;flex-direction:column}.product-name[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text);font-size:1rem}.sale-date[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted);white-space:nowrap}.multi-item-list[_ngcontent-%COMP%]{background:#00000005;border-radius:4px;padding:4px 8px;margin-bottom:4px;border-left:2px solid var(--color-border)}.sub-item[_ngcontent-%COMP%]{font-size:.85rem;color:var(--color-text);line-height:1.3}.sub-qty[_ngcontent-%COMP%]{color:var(--color-text-muted);font-size:.8rem}.pending-info[_ngcontent-%COMP%]{display:flex;gap:var(--space-md);font-size:.9rem;color:var(--color-text);align-items:center;background:var(--color-surface);padding:4px 8px;border-radius:4px;width:fit-content}.total-price[_ngcontent-%COMP%]{color:var(--color-primary);font-weight:600}.delivery-info[_ngcontent-%COMP%]{margin-top:4px;padding-top:4px;border-top:1px dashed var(--color-border);font-size:.85rem;color:var(--color-primary);display:grid;grid-template-columns:auto auto 1fr;gap:8px}.btn-deliver[_ngcontent-%COMP%]{background:var(--color-success);color:#fff;border:none;padding:6px 12px;border-radius:var(--radius-md);font-weight:500;font-size:.9rem;cursor:pointer;transition:all var(--transition-base);white-space:nowrap;height:fit-content}.btn-deliver[_ngcontent-%COMP%]:hover{background:#059669;transform:translateY(-1px)}@media (max-width: 640px){.pending-item[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.delivery-info[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:2px}.btn-deliver[_ngcontent-%COMP%]{width:100%;margin-top:8px}}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.modal-content[_ngcontent-%COMP%]{background-color:var(--color-surface);padding:2rem;border-radius:12px;width:90%;max-width:500px;box-shadow:0 10px 25px #0003;animation:_ngcontent-%COMP%_slideIn .3s ease-out;color:var(--color-text)}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translateY(-20px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;border-bottom:1px solid var(--color-border);padding-bottom:1rem}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--color-text)}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:var(--color-text-muted)}.modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.modal-footer[_ngcontent-%COMP%]{margin-top:2rem;display:flex;justify-content:flex-end;gap:1rem;padding-top:1rem;border-top:1px solid var(--color-border)}.btn-cancel[_ngcontent-%COMP%]{padding:.5rem 1rem;border:1px solid var(--color-border);background-color:var(--color-surface);color:var(--color-text);border-radius:6px;cursor:pointer;font-weight:500;transition:background-color .2s}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:var(--color-bg)}.btn-save[_ngcontent-%COMP%]{padding:.5rem 1rem;background-color:#4caf50;color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:500}.btn-save[_ngcontent-%COMP%]:hover{background-color:#45a049}.pending-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;margin-left:1rem}.btn-edit[_ngcontent-%COMP%]{padding:.5rem 1rem;background-color:#2196f3;color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:500;transition:background-color .2s}.btn-edit[_ngcontent-%COMP%]:hover{background-color:#1976d2}.customer-details[_ngcontent-%COMP%]{margin-top:4px;padding:4px 8px;background:linear-gradient(135deg,#8b5cf61a,#6366f11a);border-left:3px solid #8b5cf6;border-radius:4px;font-size:.85rem}.customer-header[_ngcontent-%COMP%]{font-weight:600;color:#8b5cf6;margin-bottom:2px;font-size:.85rem;display:inline-block;margin-right:8px}.customer-row[_ngcontent-%COMP%]{display:inline-flex;gap:4px;margin-right:12px;font-size:.85rem}.customer-label[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text-muted);min-width:auto}.customer-value[_ngcontent-%COMP%]{color:var(--color-text);font-weight:400}.radio-group[_ngcontent-%COMP%]{display:flex;background:var(--color-bg);padding:4px;border-radius:8px;border:1px solid var(--color-border);gap:4px}.radio-label[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;padding:8px 12px;cursor:pointer;font-size:.9rem;font-weight:500;color:var(--color-text-muted);border-radius:6px;transition:all .2s ease;text-align:center;-webkit-user-select:none;user-select:none}.radio-label[_ngcontent-%COMP%]:hover{background:var(--color-surface);color:var(--color-text)}.radio-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.radio-label[_ngcontent-%COMP%]:has(input:checked){background:var(--color-primary);color:#fff;box-shadow:0 2px 4px #0000001a}.discount-value[_ngcontent-%COMP%]{color:var(--color-danger);font-weight:600}.total-row[_ngcontent-%COMP%]{border-top:1px solid var(--color-border);margin-top:var(--space-sm);padding-top:var(--space-md)}.status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:.75rem;font-weight:600;text-transform:uppercase}.status-badge.warning[_ngcontent-%COMP%]{background:#fef3c7;color:#d97706;border:1px solid #fcd34d}.btn-confirm[_ngcontent-%COMP%]{padding:.5rem 1rem;background-color:#f59e0b;color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:500;transition:all .2s;white-space:nowrap}.btn-delete[_ngcontent-%COMP%]{padding:.5rem 1rem;background-color:#ef4444;color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:500;transition:all .2s;white-space:nowrap}.btn-delete[_ngcontent-%COMP%]:hover{background-color:#dc2626;transform:translateY(-1px)}.pos-layout[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg)}.selection-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md);padding-bottom:var(--space-md);border-bottom:1px dashed var(--color-border)}.flex-grow[_ngcontent-%COMP%]{flex:1}.align-end[_ngcontent-%COMP%]{align-items:flex-end}.small-width[_ngcontent-%COMP%]{width:80px}.discount-row[_ngcontent-%COMP%]{display:flex;gap:4px}.small-input[_ngcontent-%COMP%]{width:80px;padding:8px;border:1px solid var(--color-border);border-radius:6px}.small-select[_ngcontent-%COMP%]{padding:8px;border:1px solid var(--color-border);border-radius:6px;background:var(--color-surface)}.btn-add[_ngcontent-%COMP%]{padding:10px 20px;background:var(--color-primary);color:#fff;border:none;border-radius:6px;font-weight:600;cursor:pointer;transition:all .2s;height:42px}.btn-add[_ngcontent-%COMP%]:disabled{background:var(--color-border);cursor:not-allowed}.btn-add[_ngcontent-%COMP%]:not(:disabled):hover{filter:brightness(1.1);transform:translateY(-1px)}.cart-container[_ngcontent-%COMP%]{overflow-x:auto;border:1px solid var(--color-border);border-radius:8px;background:var(--color-surface)}.cart-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:.9rem}.cart-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:var(--color-bg);padding:10px;text-align:left;font-weight:600;color:var(--color-text-muted);border-bottom:1px solid var(--color-border)}.cart-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;border-bottom:1px solid var(--color-border);vertical-align:middle}.cart-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.text-right[_ngcontent-%COMP%]{text-align:right}.text-center[_ngcontent-%COMP%]{text-align:center}.font-bold[_ngcontent-%COMP%]{font-weight:600}.cart-prod-name[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text)}.cart-prod-disc[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-danger)}.btn-remove-sm[_ngcontent-%COMP%]{background:none;border:none;color:var(--color-text-muted);cursor:pointer;padding:4px 8px;border-radius:4px}.btn-remove-sm[_ngcontent-%COMP%]:hover{background:#fee;color:var(--color-danger)}.empty-cart-cell[_ngcontent-%COMP%]{padding:2rem;text-align:center;color:var(--color-text-muted);font-style:italic}.checkout-panel[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--space-lg);margin-top:var(--space-md)}@media (max-width: 768px){.checkout-panel[_ngcontent-%COMP%]{grid-template-columns:1fr}}.delivery-card[_ngcontent-%COMP%], .payment-card[_ngcontent-%COMP%]{background:var(--color-surface);border:1px solid var(--color-border);border-radius:8px;padding:var(--space-md);display:flex;flex-direction:column;gap:var(--space-md)}.delivery-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .payment-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:1rem;color:var(--color-primary);border-bottom:1px solid var(--color-border);padding-bottom:8px}.cash-group[_ngcontent-%COMP%]{margin:var(--space-sm) 0}.cash-input[_ngcontent-%COMP%]{font-size:1.2rem;padding:10px;border:2px solid var(--color-border);border-radius:6px;width:100%}.cash-input[_ngcontent-%COMP%]:focus{border-color:var(--color-success);outline:none}.total-line[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:1.2rem;font-weight:700;color:var(--color-text)}.change-line[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:1.1rem;font-weight:600;color:var(--color-success);padding-top:var(--space-sm);border-top:1px dashed var(--color-border)}.change-line.negative[_ngcontent-%COMP%]{color:var(--color-danger)}.btn-checkout[_ngcontent-%COMP%]{margin-top:auto;width:100%;padding:12px;background:var(--color-success);color:#fff;border:none;border-radius:6px;font-size:1.1rem;font-weight:700;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center;gap:8px}.btn-checkout[_ngcontent-%COMP%]:not(:disabled):hover{background:#059669;transform:translateY(-2px);box-shadow:0 4px 6px #0000001a}.btn-checkout[_ngcontent-%COMP%]:disabled{background:var(--color-border);cursor:not-allowed;opacity:.7}"]})}}return n})();function JO(n,e){if(n&1&&(h(0,"div",32)(1,"div",33),g(2),f(),h(3,"div",34),be(4,"div",35),f(),h(5,"div",36),g(6),f()()),n&2){let t=e.$implicit,r=I();y(2),q(t.category),y(2),bn("width",t.total/r.totalSalesValue*100,"%"),D("title","$"+t.total.toFixed(2)),y(2),on("$",t.total.toFixed(2)," (",t.count,")")}}function XO(n,e){n&1&&(h(0,"div",37),g(1," No sales data yet "),f())}function ZO(n,e){if(n&1&&(h(0,"div",50),be(1,"img",51),f()),n&2){let t=I().$implicit;y(),D("src",t.imageUrl,_n)("alt",t.name)}}function eN(n,e){n&1&&(h(0,"div",52)(1,"span",53),g(2,"\u{1F4E6}"),f()())}function tN(n,e){if(n&1){let t=te();h(0,"div",40),U(1,ZO,2,2,"div",41)(2,eN,3,0,"div",42),h(3,"div",43)(4,"div",44),g(5),f(),h(6,"div",45),g(7),f()(),h(8,"div",46)(9,"div",47),g(10),f(),h(11,"div",48),g(12),f(),h(13,"button",49),j("click",function(){let i=R(t).$implicit,o=I(2);return k(o.openEditModal(i))}),g(14," \u270F\uFE0F Edit "),f()()()}if(n&2){let t=e.$implicit;y(),D("ngIf",t.imageUrl),y(),D("ngIf",!t.imageUrl),y(3),q(t.name),y(2),q(t.category),y(3),z("$",t.price.toFixed(2),""),y(2),z("Stock: ",t.quantity,"")}}function nN(n,e){if(n&1&&(h(0,"div",38),U(1,tN,15,6,"div",39),f()),n&2){let t=I();y(),D("ngForOf",t.paginatedAvailableProducts)}}function rN(n,e){if(n&1&&(h(0,"option",59),g(1),f()),n&2){let t=e.$implicit;D("value",t),y(),q(t)}}function iN(n,e){if(n&1){let t=te();h(0,"button",64),j("click",function(){let i=R(t).$implicit,o=I(3);return k(o.goToAvailablePage(i))}),g(1),f()}if(n&2){let t=e.$implicit,r=I(3);_e("active",t===r.availableProductsPage),y(),z(" ",t," ")}}function oN(n,e){if(n&1){let t=te();h(0,"div",60)(1,"button",61),j("click",function(){R(t);let i=I(2);return k(i.prevAvailablePage())}),g(2," \u2190 Prev "),f(),h(3,"div",62),U(4,iN,2,3,"button",63),f(),h(5,"button",61),j("click",function(){R(t);let i=I(2);return k(i.nextAvailablePage())}),g(6," Next \u2192 "),f()()}if(n&2){let t=I(2);y(),D("disabled",t.availableProductsPage===1),y(3),D("ngForOf",t.getPageNumbers(t.availableProductsTotalPages)),y(),D("disabled",t.availableProductsPage===t.availableProductsTotalPages)}}function sN(n,e){if(n&1){let t=te();h(0,"div",54)(1,"div",55)(2,"label",56),g(3,"Show:"),f(),h(4,"select",57),J("ngModelChange",function(i){R(t);let o=I();return Z(o.availableProductsPageSize,i)||(o.availableProductsPageSize=i),k(i)}),j("change",function(){R(t);let i=I();return k(i.onAvailablePageSizeChange())}),U(5,rN,2,2,"option",28),f(),h(6,"span"),g(7,"per page"),f()(),U(8,oN,7,3,"div",58),f()}if(n&2){let t=I();y(4),Y("ngModel",t.availableProductsPageSize),y(),D("ngForOf",t.pageSizeOptions),y(3),D("ngIf",t.availableProductsTotalPages>1)}}function aN(n,e){n&1&&(h(0,"div",65)(1,"p"),g(2,"No available products"),f()())}function cN(n,e){if(n&1&&(h(0,"span",80),g(1),f()),n&2){let t=I().$implicit;y(),z("(",t.quantityCount," items)")}}function lN(n,e){if(n&1&&(h(0,"div",81),g(1),f()),n&2){let t=I().$implicit;y(),on(" ",t.items[0].quantitySold," \xD7 $",t.items[0].price.toFixed(2)," ")}}function uN(n,e){if(n&1&&(h(0,"div",83),g(1),f()),n&2){let t=e.$implicit;y(),on(" \u2022 ",t.productName," (x",t.quantitySold,") ")}}function dN(n,e){if(n&1&&(h(0,"div",81),U(1,uN,2,2,"div",82),f()),n&2){let t=I().$implicit;y(),D("ngForOf",t.items)}}function hN(n,e){if(n&1&&(h(0,"span"),g(1),ae(2,"date"),f()),n&2){let t=I().$implicit;y(),z("(",ge(2,1,t.deliveryDate,"shortDate"),")")}}function fN(n,e){if(n&1&&(h(0,"div",70)(1,"div",71)(2,"div",72),g(3),U(4,cN,2,1,"span",73),f(),U(5,lN,2,2,"div",74)(6,dN,2,1,"div",74),h(7,"div",75),g(8," Pending Delivery "),U(9,hN,3,4,"span",76),f()(),h(10,"div",77)(11,"div",78),g(12),f(),h(13,"div",79),g(14),ae(15,"date"),f()()()),n&2){let t=e.$implicit;y(3),z(" ",t.productName," "),y(),D("ngIf",t.isGroup),y(),D("ngIf",!t.isGroup),y(),D("ngIf",t.isGroup),y(3),D("ngIf",t.deliveryDate),y(3),z("$",t.total.toFixed(2),""),y(2),q(ge(15,7,t.timestamp,"short"))}}function pN(n,e){if(n&1&&(h(0,"div",66)(1,"h3")(2,"span",5),g(3,"\u{1F69A}"),f(),g(4," Pending Deliveries "),h(5,"span",67),g(6),f()(),h(7,"div",68),U(8,fN,16,10,"div",69),f()()),n&2){let t=I();y(6),q(t.pendingSales.length),y(2),D("ngForOf",t.groupedPendingSales)}}function mN(n,e){if(n&1&&(h(0,"option",59),g(1),f()),n&2){let t=e.$implicit;D("value",t),y(),q(t)}}function gN(n,e){if(n&1&&(h(0,"div",85),g(1),ae(2,"date"),f()),n&2){let t=I().$implicit;y(),z(" \u{1F69A} ",ge(2,1,t.deliveryDate,"MMM d, y")," ")}}function vN(n,e){if(n&1&&(h(0,"div",70)(1,"div",71)(2,"div",72),g(3),f(),h(4,"div",81),g(5),f(),U(6,gN,3,4,"div",84),f(),h(7,"div",77)(8,"div",78),g(9),f(),h(10,"div",79),g(11),ae(12,"date"),f()()()),n&2){let t=e.$implicit;y(3),q(t.productName),y(2),on(" ",t.quantitySold," \xD7 $",t.price.toFixed(2)," "),y(),D("ngIf",t.deliveryDate),y(3),z("$",t.total.toFixed(2),""),y(2),q(ge(12,6,t.timestamp,"short"))}}function yN(n,e){if(n&1&&(h(0,"div",68),U(1,vN,13,9,"div",69),f()),n&2){let t=I();y(),D("ngForOf",t.paginatedSales)}}function _N(n,e){if(n&1&&(h(0,"option",59),g(1),f()),n&2){let t=e.$implicit;D("value",t),y(),q(t)}}function bN(n,e){if(n&1){let t=te();h(0,"button",64),j("click",function(){let i=R(t).$implicit,o=I(3);return k(o.goToSalesPage(i))}),g(1),f()}if(n&2){let t=e.$implicit,r=I(3);_e("active",t===r.salesPage),y(),z(" ",t," ")}}function CN(n,e){if(n&1){let t=te();h(0,"div",60)(1,"button",61),j("click",function(){R(t);let i=I(2);return k(i.prevSalesPage())}),g(2," \u2190 Prev "),f(),h(3,"div",62),U(4,bN,2,3,"button",63),f(),h(5,"button",61),j("click",function(){R(t);let i=I(2);return k(i.nextSalesPage())}),g(6," Next \u2192 "),f()()}if(n&2){let t=I(2);y(),D("disabled",t.salesPage===1),y(3),D("ngForOf",t.getPageNumbers(t.salesTotalPages)),y(),D("disabled",t.salesPage===t.salesTotalPages)}}function wN(n,e){if(n&1){let t=te();h(0,"div",54)(1,"div",55)(2,"label",86),g(3,"Show:"),f(),h(4,"select",87),J("ngModelChange",function(i){R(t);let o=I();return Z(o.salesPageSize,i)||(o.salesPageSize=i),k(i)}),j("change",function(){R(t);let i=I();return k(i.onSalesPageSizeChange())}),U(5,_N,2,2,"option",28),f(),h(6,"span"),g(7,"per page"),f()(),U(8,CN,7,3,"div",58),f()}if(n&2){let t=I();y(4),Y("ngModel",t.salesPageSize),y(),D("ngForOf",t.pageSizeOptions),y(3),D("ngIf",t.salesTotalPages>1)}}function xN(n,e){n&1&&(h(0,"div",65)(1,"p"),g(2,"No sales yet"),f()())}function EN(n,e){if(n&1&&(h(0,"div",50),be(1,"img",51),f()),n&2){let t=I().$implicit;y(),D("src",t.imageUrl,_n)("alt",t.name)}}function IN(n,e){n&1&&(h(0,"div",52)(1,"span",53),g(2,"\u{1F4E6}"),f()())}function DN(n,e){if(n&1&&(h(0,"option",59),g(1),f()),n&2){let t=e.$implicit;D("value",t),y(),q(t)}}function SN(n,e){if(n&1){let t=te();h(0,"button",64),j("click",function(){let i=R(t).$implicit,o=I(5);return k(o.goToOutOfStockPage(i))}),g(1),f()}if(n&2){let t=e.$implicit,r=I(5);_e("active",t===r.outOfStockPage),y(),z(" ",t," ")}}function MN(n,e){if(n&1){let t=te();h(0,"div",60)(1,"button",61),j("click",function(){R(t);let i=I(4);return k(i.prevOutOfStockPage())}),g(2," \u2190 Prev "),f(),h(3,"div",62),U(4,SN,2,3,"button",63),f(),h(5,"button",61),j("click",function(){R(t);let i=I(4);return k(i.nextOutOfStockPage())}),g(6," Next \u2192 "),f()()}if(n&2){let t=I(4);y(),D("disabled",t.outOfStockPage===1),y(3),D("ngForOf",t.getPageNumbers(t.outOfStockTotalPages)),y(),D("disabled",t.outOfStockPage===t.outOfStockTotalPages)}}function TN(n,e){if(n&1){let t=te();h(0,"div",54)(1,"div",55)(2,"label",94),g(3,"Show:"),f(),h(4,"select",95),J("ngModelChange",function(i){R(t);let o=I(3);return Z(o.outOfStockPageSize,i)||(o.outOfStockPageSize=i),k(i)}),j("change",function(){R(t);let i=I(3);return k(i.onOutOfStockPageSizeChange())}),U(5,DN,2,2,"option",28),f(),h(6,"span"),g(7,"per page"),f()(),U(8,MN,7,3,"div",58),f()}if(n&2){let t=I(3);y(4),Y("ngModel",t.outOfStockPageSize),y(),D("ngForOf",t.pageSizeOptions),y(3),D("ngIf",t.outOfStockTotalPages>1)}}function PN(n,e){if(n&1){let t=te();h(0,"div",90),U(1,EN,2,2,"div",41)(2,IN,3,0,"div",42),h(3,"div",43)(4,"div",44),g(5),h(6,"div")(7,"div",45),g(8),f()(),h(9,"div",46)(10,"div",47),g(11),f(),h(12,"div",91),g(13,"Out of Stock"),f(),h(14,"div",92)(15,"button",93),j("click",function(){let i=R(t).$implicit,o=I(2);return k(o.onRestock(i))}),g(16," \u2795 Restock "),f()()()()(),U(17,TN,9,3,"div",22),f()}if(n&2){let t=e.$implicit,r=I(2);y(),D("ngIf",t.imageUrl),y(),D("ngIf",!t.imageUrl),y(3),z(" ",t.name,""),y(3),q(t.category),y(3),z("$",t.price.toFixed(2),""),y(6),D("ngIf",r.outOfStockTotalPages>1||r.outOfStockProducts.length>10)}}function AN(n,e){if(n&1&&(h(0,"div",88)(1,"h3")(2,"span",5),g(3,"\u26A0\uFE0F"),f(),g(4," Out of Stock "),h(5,"span",67),g(6),f()(),h(7,"div",38),U(8,PN,18,6,"div",89),f()()),n&2){let t=I();y(6),q(t.outOfStockProducts.length),y(2),D("ngForOf",t.paginatedOutOfStockProducts)}}function ON(n,e){if(n&1){let t=te();h(0,"div",96),j("click",function(){R(t);let i=I();return k(i.closeEditModal())}),h(1,"div",97),j("click",function(i){return R(t),k(i.stopPropagation())}),h(2,"div",98)(3,"h3"),g(4,"Edit Product"),f(),h(5,"button",99),j("click",function(){R(t);let i=I();return k(i.closeEditModal())}),g(6,"\xD7"),f()(),h(7,"div",100)(8,"div",101)(9,"label",102),g(10,"Product Name"),f(),h(11,"input",103),J("ngModelChange",function(i){R(t);let o=I();return Z(o.editProductName,i)||(o.editProductName=i),k(i)}),f()(),h(12,"div",101)(13,"label",104),g(14,"Stock Quantity"),f(),h(15,"input",105),J("ngModelChange",function(i){R(t);let o=I();return Z(o.editProductQuantity,i)||(o.editProductQuantity=i),k(i)}),f()(),h(16,"div",101)(17,"label",106),g(18,"Price"),f(),h(19,"input",107),J("ngModelChange",function(i){R(t);let o=I();return Z(o.editProductPrice,i)||(o.editProductPrice=i),k(i)}),f()()(),h(20,"div",108)(21,"button",109),j("click",function(){R(t);let i=I();return k(i.closeEditModal())}),g(22,"Cancel"),f(),h(23,"button",110),j("click",function(){R(t);let i=I();return k(i.saveProductEdit())}),g(24,"Save Changes"),f()()()()}if(n&2){let t=I();y(11),Y("ngModel",t.editProductName),y(4),Y("ngModel",t.editProductQuantity),y(4),Y("ngModel",t.editProductPrice)}}var OC=(()=>{class n{constructor(t){this.inventoryService=t,this.products=[],this.sales=[],this.selectedCategory="All",this.categories=["All","Lechon","Hollow blocks","Sand and Gravel","Copra","Others"],this.pageSizeOptions=[10,20,50,100],this.availableProductsPage=1,this.availableProductsPageSize=10,this.salesPage=1,this.salesPageSize=10,this.outOfStockPage=1,this.outOfStockPageSize=10,this.isEditModalOpen=!1,this.editingProduct=null,this.editProductName="",this.editProductQuantity=0,this.editProductPrice=0}ngOnInit(){this.inventoryService.getProducts().subscribe(t=>{this.products=t}),this.inventoryService.getSales().subscribe(t=>{this.sales=t})}get pendingSales(){return this.sales.filter(t=>t.pending===!0)}get groupedPendingSales(){let t=new Map,r=[];this.pendingSales.forEach(o=>{o.orderId?(t.has(o.orderId)||t.set(o.orderId,[]),t.get(o.orderId).push(o)):r.push(o)});let i=[];return t.forEach((o,s)=>{let a=o[0];i.push({isGroup:!0,orderId:s,sales:o,total:o.reduce((l,u)=>l+u.total,0),productName:`Order #${s.substring(4,10)}...`,quantityCount:o.length,items:o,timestamp:a.timestamp,deliveryDate:a.deliveryDate,pending:!0})}),r.forEach(o=>{i.push({isGroup:!1,sales:[o],total:o.total,productName:o.productName,quantityCount:1,items:[o],timestamp:o.timestamp,deliveryDate:o.deliveryDate,pending:!0})}),i.sort((o,s)=>{let a=o.deliveryDate?new Date(o.deliveryDate).getTime():1/0,l=s.deliveryDate?new Date(s.deliveryDate).getTime():1/0;return a-l})}get filteredSales(){let t=this.sales.filter(r=>r.pending!==!0);return this.selectedCategory==="All"?t:t.filter(r=>r.category===this.selectedCategory)}get availableProducts(){return this.products.filter(t=>t.quantity>0)}get paginatedAvailableProducts(){let t=(this.availableProductsPage-1)*this.availableProductsPageSize,r=t+this.availableProductsPageSize;return this.availableProducts.slice(t,r)}get availableProductsTotalPages(){return Math.ceil(this.availableProducts.length/this.availableProductsPageSize)}get outOfStockProducts(){return this.products.filter(t=>t.quantity===0)}get paginatedOutOfStockProducts(){let t=(this.outOfStockPage-1)*this.outOfStockPageSize,r=t+this.outOfStockPageSize;return this.outOfStockProducts.slice(t,r)}get outOfStockTotalPages(){return Math.ceil(this.outOfStockProducts.length/this.outOfStockPageSize)}get paginatedSales(){let t=(this.salesPage-1)*this.salesPageSize,r=t+this.salesPageSize;return this.filteredSales.slice(t,r)}get salesTotalPages(){return Math.ceil(this.filteredSales.length/this.salesPageSize)}get salesByCategory(){let t=new Map;return this.sales.filter(r=>!r.pending).forEach(r=>{let i=t.get(r.category)||{total:0,count:0};t.set(r.category,{total:i.total+r.total,count:i.count+1})}),Array.from(t.entries()).map(([r,i])=>({category:r,total:i.total,count:i.count}))}get totalInventoryValue(){return this.products.reduce((t,r)=>t+r.price*r.quantity,0)}get totalSalesValue(){return this.sales.filter(t=>!t.pending).reduce((t,r)=>t+r.total,0)}nextAvailablePage(){this.availableProductsPage<this.availableProductsTotalPages&&this.availableProductsPage++}prevAvailablePage(){this.availableProductsPage>1&&this.availableProductsPage--}goToAvailablePage(t){t>=1&&t<=this.availableProductsTotalPages&&(this.availableProductsPage=t)}nextSalesPage(){this.salesPage<this.salesTotalPages&&this.salesPage++}prevSalesPage(){this.salesPage>1&&this.salesPage--}goToSalesPage(t){t>=1&&t<=this.salesTotalPages&&(this.salesPage=t)}nextOutOfStockPage(){this.outOfStockPage<this.outOfStockTotalPages&&this.outOfStockPage++}prevOutOfStockPage(){this.outOfStockPage>1&&this.outOfStockPage--}goToOutOfStockPage(t){this.outOfStockPage=t}onAvailablePageSizeChange(){this.availableProductsPage=1}onSalesPageSizeChange(){this.salesPage=1}onOutOfStockPageSizeChange(){this.outOfStockPage=1}getPageNumbers(t){return Array.from({length:t},(r,i)=>i+1)}onRestock(t){let r=prompt(`Enter quantity to add for ${t.name}:`);if(r){let i=parseInt(r,10);!isNaN(i)&&i>0?this.inventoryService.restockProduct(t.id,i):alert("Please enter a valid number greater than 0")}}openEditModal(t){this.editingProduct=t,this.editProductName=t.name,this.editProductQuantity=t.quantity,this.editProductPrice=t.price,this.isEditModalOpen=!0}closeEditModal(){this.isEditModalOpen=!1,this.editingProduct=null,this.editProductName="",this.editProductQuantity=0,this.editProductPrice=0}saveProductEdit(){if(!this.editingProduct)return;if(!this.editProductName.trim()){alert("Product name cannot be empty");return}if(this.editProductQuantity<0){alert("Quantity cannot be negative");return}if(this.editProductPrice<0){alert("Price cannot be negative");return}let t=ue(ee({},this.editingProduct),{name:this.editProductName,quantity:this.editProductQuantity,price:this.editProductPrice});this.inventoryService.updateProduct(t),this.closeEditModal()}static{this.\u0275fac=function(r){return new(r||n)(Q(Lt))}}static{this.\u0275cmp=Re({type:n,selectors:[["app-inventory-list"]],standalone:!0,features:[ke],decls:63,vars:17,consts:[["noAvailable",""],["noSales",""],[1,"inventory-section"],[1,"inventory-content"],[1,"card","analytics-card"],[1,"icon"],[1,"analytics-grid"],[1,"chart-container"],[1,"bar-chart"],["class","bar-item",4,"ngFor","ngForOf"],["class","empty-chart",4,"ngIf"],[1,"stats-grid"],[1,"stat-card"],[1,"stat-icon"],[1,"stat-info"],[1,"stat-label"],[1,"stat-value"],[1,"stat-card","success"],[1,"lists-container"],[1,"card"],[1,"badge"],["class","product-list",4,"ngIf","ngIfElse"],["class","pagination",4,"ngIf"],["class","card pending-section",4,"ngIf"],[1,"section-header"],[1,"filter-group"],["for","categoryFilter"],["id","categoryFilter",1,"category-filter",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","sales-list",4,"ngIf","ngIfElse"],["class","card out-of-stock-section",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"bar-item"],[1,"bar-label"],[1,"bar-wrapper"],[1,"bar-fill",3,"title"],[1,"bar-value"],[1,"empty-chart"],[1,"product-list"],["class","product-item",4,"ngFor","ngForOf"],[1,"product-item"],["class","product-image-wrapper",4,"ngIf"],["class","product-image-wrapper placeholder",4,"ngIf"],[1,"product-info"],[1,"product-name"],[1,"product-category"],[1,"product-details"],[1,"product-price"],[1,"product-stock"],[1,"btn-edit-sm",3,"click"],[1,"product-image-wrapper"],["loading","lazy",1,"product-image",3,"src","alt"],[1,"product-image-wrapper","placeholder"],[1,"placeholder-icon"],[1,"pagination"],[1,"pagination-size"],["for","availablePageSize"],["id","availablePageSize",1,"page-size-select",3,"ngModelChange","change","ngModel"],["class","pagination-controls",4,"ngIf"],[3,"value"],[1,"pagination-controls"],[1,"pagination-btn",3,"click","disabled"],[1,"pagination-pages"],["class","pagination-page",3,"active","click",4,"ngFor","ngForOf"],[1,"pagination-page",3,"click"],[1,"empty-state"],[1,"card","pending-section"],[1,"badge","warning"],[1,"sales-list"],["class","sale-item",4,"ngFor","ngForOf"],[1,"sale-item"],[1,"sale-info"],[1,"sale-name"],["style","font-size:0.8em; color:gray",4,"ngIf"],["class","sale-details-text",4,"ngIf"],[1,"delivery-badge","warning"],[4,"ngIf"],[1,"sale-amount"],[1,"sale-total"],[1,"sale-date"],[2,"font-size","0.8em","color","gray"],[1,"sale-details-text"],["style","font-size:0.9em; margin-bottom:2px",4,"ngFor","ngForOf"],[2,"font-size","0.9em","margin-bottom","2px"],["class","delivery-badge",4,"ngIf"],[1,"delivery-badge"],["for","salesPageSize"],["id","salesPageSize",1,"page-size-select",3,"ngModelChange","change","ngModel"],[1,"card","out-of-stock-section"],["class","product-item dimmed",4,"ngFor","ngForOf"],[1,"product-item","dimmed"],[1,"product-stock","out"],[1,"product-actions"],[1,"btn-restock",3,"click"],["for","outOfStockPageSize"],["id","outOfStockPageSize",1,"page-size-select",3,"ngModelChange","change","ngModel"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"form-group"],["for","editName"],["type","text","id","editName",1,"text-input",3,"ngModelChange","ngModel"],["for","editQuantity"],["type","number","id","editQuantity","min","0",1,"number-input",3,"ngModelChange","ngModel"],["for","editPrice"],["type","number","id","editPrice","min","0","step","0.01",1,"number-input",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn-cancel",3,"click"],[1,"btn-save",3,"click"]],template:function(r,i){if(r&1){let o=te();h(0,"div",2)(1,"div",3)(2,"div",4)(3,"h3")(4,"span",5),g(5,"\u{1F4C8}"),f(),g(6," Sales Analytics "),f(),h(7,"div",6)(8,"div",7)(9,"h4"),g(10,"Sales by Category"),f(),h(11,"div",8),U(12,JO,7,6,"div",9)(13,XO,2,0,"div",10),f()()()(),h(14,"div",11)(15,"div",12)(16,"div",13),g(17,"\u{1F4B0}"),f(),h(18,"div",14)(19,"div",15),g(20,"Total Inventory Value"),f(),h(21,"div",16),g(22),f()()(),h(23,"div",17)(24,"div",13),g(25,"\u{1F4CA}"),f(),h(26,"div",14)(27,"div",15),g(28,"Total Sales"),f(),h(29,"div",16),g(30),f()()()(),h(31,"div",18)(32,"div",19)(33,"h3")(34,"span",5),g(35,"\u{1F4E6}"),f(),g(36," Available Inventory "),h(37,"span",20),g(38),f()(),U(39,nN,2,1,"div",21)(40,sN,9,3,"div",22)(41,aN,3,0,"ng-template",null,0,ar),f(),U(43,pN,9,2,"div",23),h(44,"div",19)(45,"div",24)(46,"h3")(47,"span",5),g(48,"\u{1F4B0}"),f(),g(49," Sales History "),h(50,"span",20),g(51),f()(),h(52,"div",25)(53,"label",26),g(54,"Filter by Category:"),f(),h(55,"select",27),J("ngModelChange",function(a){return R(o),Z(i.selectedCategory,a)||(i.selectedCategory=a),k(a)}),j("change",function(){return R(o),k(i.salesPage=1)}),U(56,mN,2,2,"option",28),f()()(),U(57,yN,2,1,"div",29)(58,wN,9,3,"div",22)(59,xN,3,0,"ng-template",null,1,ar),f(),U(61,AN,9,2,"div",30)(62,ON,25,3,"div",31),f()()()}if(r&2){let o=sr(42),s=sr(60);y(12),D("ngForOf",i.salesByCategory),y(),D("ngIf",i.salesByCategory.length===0),y(9),z("$",i.totalInventoryValue.toFixed(2),""),y(8),z("$",i.totalSalesValue.toFixed(2),""),y(8),q(i.availableProducts.length),y(),D("ngIf",i.availableProducts.length>0)("ngIfElse",o),y(),D("ngIf",i.availableProductsTotalPages>1||i.availableProducts.length>10),y(3),D("ngIf",i.pendingSales.length>0),y(8),q(i.filteredSales.length),y(4),Y("ngModel",i.selectedCategory),y(),D("ngForOf",i.categories),y(),D("ngIf",i.sales.length>0)("ngIfElse",s),y(),D("ngIf",i.salesTotalPages>1||i.filteredSales.length>10),y(3),D("ngIf",i.outOfStockProducts.length>0),y(),D("ngIf",i.isEditModalOpen)}},dependencies:[Ne,nt,He,Un,ot,an,cn,rt,dr,Ft,it,hr,Ze],styles:[".inventory-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xl)}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:var(--space-lg);margin-bottom:var(--space-2xl)}.analytics-card[_ngcontent-%COMP%]{margin-bottom:var(--space-2xl)}.analytics-grid[_ngcontent-%COMP%]{margin-top:var(--space-lg)}.chart-container[_ngcontent-%COMP%]{background:var(--color-bg);padding:var(--space-lg);border-radius:var(--radius-md)}.chart-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 var(--space-lg) 0;color:var(--color-text);font-size:1rem}.bar-chart[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md)}.bar-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:80px 1fr 120px;gap:var(--space-sm);align-items:center}.bar-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.bar-wrapper[_ngcontent-%COMP%]{height:24px;background:var(--color-surface);border-radius:var(--radius-md);overflow:hidden;border:1px solid var(--color-border)}.bar-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,var(--color-primary),var(--color-success));transition:width .3s ease;min-width:2%}.bar-value[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:var(--color-text);text-align:right}.empty-chart[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl);color:var(--color-text-muted);font-style:italic}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:var(--space-md);margin-bottom:var(--space-lg)}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.filter-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm)}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.category-filter[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-surface);color:var(--color-text);font-size:.875rem;cursor:pointer;transition:all var(--transition-base)}.category-filter[_ngcontent-%COMP%]:hover{border-color:var(--color-primary)}.category-filter[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f61a}.stat-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-primary),var(--color-primary-dark));color:#fff;padding:var(--space-xl);border-radius:var(--radius-lg);box-shadow:var(--shadow-lg);display:flex;align-items:center;gap:var(--space-lg)}.stat-card.success[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-success),#059669)}.stat-icon[_ngcontent-%COMP%]{font-size:2.5rem}.stat-info[_ngcontent-%COMP%]{flex:1}.stat-label[_ngcontent-%COMP%]{font-size:.875rem;opacity:.9;margin-bottom:var(--space-sm)}.stat-value[_ngcontent-%COMP%]{font-size:2rem;font-weight:700}.lists-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(500px,1fr));gap:var(--space-xl)}h3[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);margin-bottom:var(--space-lg)}.icon[_ngcontent-%COMP%]{font-size:1.5rem}.badge[_ngcontent-%COMP%]{margin-left:auto;background:var(--color-bg);color:var(--color-primary);padding:var(--space-xs) var(--space-md);border-radius:var(--radius-xl);font-size:.875rem;font-weight:600}.badge.warning[_ngcontent-%COMP%]{background:#fef3c7;color:var(--color-warning)}.product-list[_ngcontent-%COMP%], .sales-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md)}.product-item[_ngcontent-%COMP%], .sale-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:var(--space-md);padding:var(--space-md);background:var(--color-bg);border-radius:var(--radius-md);transition:all var(--transition-base)}.product-image-wrapper[_ngcontent-%COMP%]{flex-shrink:0;width:60px;height:60px;border-radius:var(--radius-md);overflow:hidden;background:var(--color-surface);border:1px solid var(--color-border);display:flex;align-items:center;justify-content:center}.product-image-wrapper.placeholder[_ngcontent-%COMP%]{background:var(--color-bg)}.product-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.placeholder-icon[_ngcontent-%COMP%]{font-size:1.5rem;opacity:.5}.product-item[_ngcontent-%COMP%]:hover, .sale-item[_ngcontent-%COMP%]:hover{background:#e0e7ff;transform:translate(4px)}.product-item.dimmed[_ngcontent-%COMP%]{opacity:.5}.product-info[_ngcontent-%COMP%], .sale-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xs);flex:1;align-self:flex-start;padding-top:4px}.product-name[_ngcontent-%COMP%], .sale-name[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text)}.product-category[_ngcontent-%COMP%], .sale-details-text[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-muted)}.delivery-badge[_ngcontent-%COMP%]{display:inline-block;margin-top:var(--space-xs);padding:var(--space-xs) var(--space-sm);background:#10b9811a;color:var(--color-success);border-radius:var(--radius-sm);font-size:.75rem;font-weight:500}.product-details[_ngcontent-%COMP%], .sale-amount[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:var(--space-xs)}.product-price[_ngcontent-%COMP%], .sale-total[_ngcontent-%COMP%]{font-weight:600;font-size:1.125rem;color:var(--color-primary)}.product-stock[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-success);font-weight:500}.product-stock.out[_ngcontent-%COMP%]{color:var(--color-danger)}.sale-date[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl);color:var(--color-text-muted)}.out-of-stock-section[_ngcontent-%COMP%]{border:2px solid rgba(239,68,68,.2)}.pagination[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md);margin-top:var(--space-lg);padding-top:var(--space-lg);border-top:1px solid var(--color-border)}.pagination-size[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);font-size:.875rem;color:var(--color-text)}.pagination-size[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500}.page-size-select[_ngcontent-%COMP%]{padding:var(--space-xs) var(--space-sm);border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-surface);color:var(--color-text);font-size:.875rem;cursor:pointer;transition:all var(--transition-base)}.page-size-select[_ngcontent-%COMP%]:hover{border-color:var(--color-primary)}.page-size-select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f61a}.pagination-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:var(--space-sm)}.pagination-btn[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);background:var(--color-surface);border:1px solid var(--color-border);color:var(--color-text);border-radius:var(--radius-md);font-size:.875rem;font-weight:500;cursor:pointer;transition:all var(--transition-base)}.pagination-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--color-primary);color:#fff;border-color:var(--color-primary);transform:translateY(-1px)}.pagination-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed;transform:none}.pagination-pages[_ngcontent-%COMP%]{display:flex;gap:var(--space-xs);flex-wrap:wrap;justify-content:center}.pagination-page[_ngcontent-%COMP%]{min-width:36px;height:36px;padding:var(--space-xs) var(--space-sm);background:var(--color-surface);border:1px solid var(--color-border);color:var(--color-text);border-radius:var(--radius-md);font-size:.875rem;font-weight:500;cursor:pointer;transition:all var(--transition-base);display:flex;align-items:center;justify-content:center}.pagination-page[_ngcontent-%COMP%]:hover{background:var(--color-bg);border-color:var(--color-primary);transform:translateY(-1px)}.pagination-page.active[_ngcontent-%COMP%]{background:var(--color-primary);color:#fff;border-color:var(--color-primary)}@media (max-width: 768px){.lists-container[_ngcontent-%COMP%]{grid-template-columns:1fr}.pagination[_ngcontent-%COMP%]{flex-wrap:wrap}.pagination-pages[_ngcontent-%COMP%]{order:3;width:100%;margin-top:var(--space-sm)}h3[_ngcontent-%COMP%]{font-size:1.25rem}.product-name[_ngcontent-%COMP%], .sale-name[_ngcontent-%COMP%]{font-size:.95rem}.product-category[_ngcontent-%COMP%], .sale-details-text[_ngcontent-%COMP%]{font-size:.8rem}.product-price[_ngcontent-%COMP%], .sale-total[_ngcontent-%COMP%]{font-size:1rem}.product-stock[_ngcontent-%COMP%], .sale-date[_ngcontent-%COMP%]{font-size:.75rem}.stat-value[_ngcontent-%COMP%]{font-size:1.5rem}.stat-label[_ngcontent-%COMP%]{font-size:.8rem}}.btn-restock[_ngcontent-%COMP%]{margin-top:var(--space-xs);padding:var(--space-xs) var(--space-sm);background:var(--color-primary-light);color:#fff;border:none;border-radius:var(--radius-sm);font-size:.75rem;font-weight:500;cursor:pointer;transition:all var(--transition-base)}.btn-restock[_ngcontent-%COMP%]:hover{background:var(--color-primary);transform:translateY(-1px)}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.modal-content[_ngcontent-%COMP%]{background-color:var(--color-surface);padding:2rem;border-radius:12px;width:90%;max-width:500px;box-shadow:0 10px 25px #0003;animation:_ngcontent-%COMP%_slideIn .3s ease-out;color:var(--color-text)}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translateY(-20px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;border-bottom:1px solid var(--color-border);padding-bottom:1rem}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--color-text)}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:var(--color-text-muted)}.modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.modal-footer[_ngcontent-%COMP%]{margin-top:2rem;display:flex;justify-content:flex-end;gap:1rem;padding-top:1rem;border-top:1px solid var(--color-border)}.btn-cancel[_ngcontent-%COMP%]{padding:.5rem 1rem;border:1px solid var(--color-border);background-color:var(--color-surface);color:var(--color-text);border-radius:6px;cursor:pointer;font-weight:500;transition:background-color .2s}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:var(--color-bg)}.btn-save[_ngcontent-%COMP%]{padding:.5rem 1rem;background-color:#4caf50;color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:500}.btn-save[_ngcontent-%COMP%]:hover{background-color:#45a049}.btn-edit-sm[_ngcontent-%COMP%]{padding:.25rem .5rem;background-color:transparent;color:var(--color-primary);border:1px solid var(--color-primary);border-radius:4px;cursor:pointer;font-size:.75rem;font-weight:500;transition:all .2s;margin-left:.5rem}.btn-edit-sm[_ngcontent-%COMP%]:hover{background-color:var(--color-primary);color:#fff}.product-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-top:.5rem}"]})}}return n})();function NN(n,e){if(n&1){let t=te();h(0,"button",17),j("click",function(){R(t);let i=I();return k(i.cancelEdit())}),g(1," Cancel "),f()}}function RN(n,e){if(n&1){let t=te();h(0,"div",20)(1,"div",21)(2,"div",22),g(3),f(),h(4,"div",23)(5,"div",24)(6,"span",25),g(7,"\u{1F4DE}"),f(),h(8,"span"),g(9),f()(),h(10,"div",24)(11,"span",25),g(12,"\u{1F4CD}"),f(),h(13,"span"),g(14),f()()()(),h(15,"div",26)(16,"button",27),j("click",function(){let i=R(t).$implicit,o=I(2);return k(o.editCustomer(i))}),g(17," \u270F\uFE0F "),f(),h(18,"button",28),j("click",function(){let i=R(t).$implicit,o=I(2);return k(o.deleteCustomer(i.id))}),g(19," \u{1F5D1}\uFE0F "),f()()()}if(n&2){let t=e.$implicit,r=I(2);_e("editing",t.id===r.editingId),y(3),q(t.name),y(6),q(t.phoneNumber),y(5),q(t.deliveryAddress),y(2),D("disabled",!!r.editingId&&r.editingId!==t.id),y(2),D("disabled",!!r.editingId)}}function kN(n,e){if(n&1&&(h(0,"div",18),U(1,RN,20,7,"div",19),f()),n&2){let t=I();y(),D("ngForOf",t.customers)}}function FN(n,e){n&1&&(h(0,"div",29)(1,"p"),g(2,"No customers registered yet"),f()())}var NC=(()=>{class n{constructor(t){this.customerService=t,this.customers=[],this.editingId=null,this.customer={name:"",phoneNumber:"",deliveryAddress:""}}ngOnInit(){this.customerService.getCustomers().subscribe(t=>{this.customers=t})}onSubmit(){this.isValid()&&(this.editingId?(this.customerService.updateCustomer(this.editingId,{name:this.customer.name,phoneNumber:this.customer.phoneNumber,deliveryAddress:this.customer.deliveryAddress}),this.editingId=null):this.customerService.addCustomer({name:this.customer.name,phoneNumber:this.customer.phoneNumber,deliveryAddress:this.customer.deliveryAddress}),this.resetForm())}editCustomer(t){this.editingId=t.id,this.customer={name:t.name,phoneNumber:t.phoneNumber||"",deliveryAddress:t.deliveryAddress||""}}cancelEdit(){this.editingId=null,this.resetForm()}resetForm(){this.customer={name:"",phoneNumber:"",deliveryAddress:""}}deleteCustomer(t){confirm("Are you sure you want to delete this customer?")&&(this.customerService.deleteCustomer(t),this.editingId===t&&this.cancelEdit())}isValid(){return!!(this.customer.name&&this.customer.phoneNumber&&this.customer.deliveryAddress)}static{this.\u0275fac=function(r){return new(r||n)(Q(Ur))}}static{this.\u0275cmp=Re({type:n,selectors:[["app-customer-form"]],standalone:!0,features:[ke],decls:33,vars:11,consts:[["noCustomers",""],[1,"customer-container"],[1,"card"],[1,"form",3,"ngSubmit"],[1,"form-group"],["for","customerName"],["type","text","id","customerName","name","name","placeholder","Enter customer name","required","",3,"ngModelChange","ngModel"],["for","phoneNumber"],["type","tel","id","phoneNumber","name","phoneNumber","placeholder","e.g., +1 234 567 8900","required","",3,"ngModelChange","ngModel"],["for","deliveryAddress"],["id","deliveryAddress","name","deliveryAddress","placeholder","Enter full delivery address","rows","3","required","",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","button","class","btn-secondary",3,"click",4,"ngIf"],["type","submit",1,"btn-primary",3,"disabled"],[1,"icon"],[1,"badge"],["class","customer-list",4,"ngIf","ngIfElse"],["type","button",1,"btn-secondary",3,"click"],[1,"customer-list"],["class","customer-item",3,"editing",4,"ngFor","ngForOf"],[1,"customer-item"],[1,"customer-info"],[1,"customer-name"],[1,"customer-details"],[1,"detail-row"],[1,"detail-icon"],[1,"customer-actions"],[1,"btn-edit",3,"click","disabled"],[1,"btn-delete",3,"click","disabled"],[1,"empty-state"]],template:function(r,i){if(r&1){let o=te();h(0,"div",1)(1,"div",2)(2,"h3"),g(3),f(),h(4,"form",3),j("ngSubmit",function(){return R(o),k(i.onSubmit())}),h(5,"div",4)(6,"label",5),g(7,"Customer Name *"),f(),h(8,"input",6),J("ngModelChange",function(a){return R(o),Z(i.customer.name,a)||(i.customer.name=a),k(a)}),f()(),h(9,"div",4)(10,"label",7),g(11,"Phone Number *"),f(),h(12,"input",8),J("ngModelChange",function(a){return R(o),Z(i.customer.phoneNumber,a)||(i.customer.phoneNumber=a),k(a)}),f()(),h(13,"div",4)(14,"label",9),g(15,"Delivery Address *"),f(),h(16,"textarea",10),J("ngModelChange",function(a){return R(o),Z(i.customer.deliveryAddress,a)||(i.customer.deliveryAddress=a),k(a)}),f()(),h(17,"div",11),U(18,NN,2,0,"button",12),h(19,"button",13)(20,"span"),g(21),f(),g(22),f()()()(),h(23,"div",2)(24,"h3")(25,"span",14),g(26,"\u{1F465}"),f(),g(27," Registered Customers "),h(28,"span",15),g(29),f()(),U(30,kN,2,1,"div",16)(31,FN,3,0,"ng-template",null,0,ar),f()()}if(r&2){let o=sr(32);y(3),q(i.editingId?"Edit Customer":"Register New Customer"),y(5),Y("ngModel",i.customer.name),y(4),Y("ngModel",i.customer.phoneNumber),y(4),Y("ngModel",i.customer.deliveryAddress),y(2),D("ngIf",i.editingId),y(),D("disabled",!i.isValid()),y(2),q(i.editingId?"\u{1F4BE}":"\u{1F464}"),y(),z(" ",i.editingId?"Update Customer":"Add Customer"," "),y(7),q(i.customers.length),y(),D("ngIf",i.customers.length>0)("ngIfElse",o)}},dependencies:[Ne,nt,He,ot,zn,rt,it,$n,Kt,Ze,xn],styles:[".customer-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-2xl)}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg);margin-top:var(--space-lg)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font-family:inherit;font-size:.9375rem;padding:var(--space-sm) var(--space-md);border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-surface);color:var(--color-text);transition:all var(--transition-base);width:100%;resize:vertical}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f61a}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--space-lg)}.icon[_ngcontent-%COMP%]{font-size:1.5rem}.badge[_ngcontent-%COMP%]{margin-left:auto;background:var(--color-bg);color:var(--color-primary);padding:var(--space-xs) var(--space-md);border-radius:var(--radius-xl);font-size:.875rem;font-weight:600}.customer-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;margin-top:var(--space-md)}.customer-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:var(--space-sm);padding:var(--space-xs) var(--space-sm);background:var(--color-bg);border-radius:var(--radius-md);border:1px solid var(--color-border);transition:all var(--transition-base)}.customer-item[_ngcontent-%COMP%]:hover{background:#e0e7ff;transform:translate(2px)}.customer-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:2px}.customer-name[_ngcontent-%COMP%]{font-weight:600;font-size:.95rem;color:var(--color-text)}.customer-details[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;gap:var(--space-lg);align-items:center}.detail-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:.8rem;color:var(--color-text-muted)}.detail-icon[_ngcontent-%COMP%]{font-size:.9rem}.customer-actions[_ngcontent-%COMP%]{display:flex;gap:var(--space-xs)}.btn-delete[_ngcontent-%COMP%]{padding:0;background:transparent;border:1px solid var(--color-border);color:var(--color-danger);border-radius:var(--radius-md);font-size:.9rem;cursor:pointer;transition:all var(--transition-base);width:28px;height:28px;display:flex;align-items:center;justify-content:center}.btn-delete[_ngcontent-%COMP%]:hover{background:var(--color-danger);border-color:var(--color-danger);transform:scale(1.1)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl);color:var(--color-text-muted)}@media (max-width: 640px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}.form-actions[_ngcontent-%COMP%]{display:flex;gap:var(--space-md);justify-content:flex-end}.btn-secondary[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-xl);background:transparent;border:1px solid var(--color-border);color:var(--color-text);border-radius:var(--radius-md);font-weight:600;cursor:pointer;transition:all var(--transition-base)}.btn-secondary[_ngcontent-%COMP%]:hover{background:var(--color-bg);border-color:var(--color-text)}.btn-edit[_ngcontent-%COMP%]{padding:0;background:transparent;border:1px solid var(--color-border);color:var(--color-primary);border-radius:var(--radius-md);font-size:.9rem;cursor:pointer;transition:all var(--transition-base);width:28px;height:28px;display:flex;align-items:center;justify-content:center}.btn-edit[_ngcontent-%COMP%]:hover{background:var(--color-primary);color:#fff;border-color:var(--color-primary);transform:scale(1.1)}.btn-edit[_ngcontent-%COMP%]:disabled, .btn-delete[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;transform:none}.customer-item.editing[_ngcontent-%COMP%]{border-color:var(--color-primary);background:var(--color-surface);box-shadow:0 0 0 2px #3b82f61a}"]})}}return n})();function VN(n,e){if(n&1&&(h(0,"div",26),g(1),f()),n&2){let t=I().$implicit;y(),q(t.notes)}}function LN(n,e){if(n&1&&(h(0,"div",19)(1,"div",20)(2,"div",21),g(3),f(),U(4,VN,2,1,"div",22),h(5,"div",23),g(6),ae(7,"date"),f()(),h(8,"div",24)(9,"div",25),g(10),f()()()),n&2){let t=e.$implicit;y(3),q(t.productName),y(),D("ngIf",t.notes),y(2),q(ge(7,4,t.timestamp,"medium")),y(4),z("$",t.price.toFixed(2),"")}}function jN(n,e){if(n&1&&(h(0,"div",17),U(1,LN,11,7,"div",18),f()),n&2){let t=I();y(),D("ngForOf",t.expenses)}}function BN(n,e){n&1&&(h(0,"div",27)(1,"p"),g(2,"No expenses recorded yet"),f()())}var RC=(()=>{class n{constructor(t){this.inventoryService=t,this.expenses=[],this.productName="",this.price=null,this.notes=""}ngOnInit(){this.inventoryService.getExpenses().subscribe(t=>{this.expenses=t})}get totalExpenses(){return this.expenses.reduce((t,r)=>t+r.price,0)}addExpense(){this.productName&&this.price&&this.price>0&&(this.inventoryService.addExpense({productName:this.productName,price:this.price,notes:this.notes}),this.productName="",this.price=null,this.notes="")}static{this.\u0275fac=function(r){return new(r||n)(Q(Lt))}}static{this.\u0275cmp=Re({type:n,selectors:[["app-expenses"]],standalone:!0,features:[ke],decls:36,vars:8,consts:[["noExpenses",""],[1,"expenses-section"],[1,"card"],[1,"icon"],[1,"form",3,"ngSubmit"],[1,"form-group"],["for","productName"],["type","text","id","productName","name","productName","placeholder","e.g., Raw materials, Utilities, etc.","required","",3,"ngModelChange","ngModel"],["for","price"],["type","number","id","price","name","price","min","0","step","0.01","placeholder","0.00","required","",3,"ngModelChange","ngModel"],["for","notes"],["id","notes","name","notes","placeholder","Additional details about this expense...","rows","3",3,"ngModelChange","ngModel"],["type","submit",1,"btn-primary",3,"disabled"],[1,"section-header"],[1,"badge"],[1,"total-badge"],["class","expenses-list",4,"ngIf","ngIfElse"],[1,"expenses-list"],["class","expense-item",4,"ngFor","ngForOf"],[1,"expense-item"],[1,"expense-info"],[1,"expense-name"],["class","expense-notes",4,"ngIf"],[1,"expense-date"],[1,"expense-amount"],[1,"expense-price"],[1,"expense-notes"],[1,"empty-state"]],template:function(r,i){if(r&1){let o=te();h(0,"div",1)(1,"div",2)(2,"h3")(3,"span",3),g(4,"\u{1F4B8}"),f(),g(5," Add Expense "),f(),h(6,"form",4),j("ngSubmit",function(){return R(o),k(i.addExpense())}),h(7,"div",5)(8,"label",6),g(9,"Product/Item Name"),f(),h(10,"input",7),J("ngModelChange",function(a){return R(o),Z(i.productName,a)||(i.productName=a),k(a)}),f()(),h(11,"div",5)(12,"label",8),g(13,"Price/Amount"),f(),h(14,"input",9),J("ngModelChange",function(a){return R(o),Z(i.price,a)||(i.price=a),k(a)}),f()(),h(15,"div",5)(16,"label",10),g(17,"Notes (Optional)"),f(),h(18,"textarea",11),J("ngModelChange",function(a){return R(o),Z(i.notes,a)||(i.notes=a),k(a)}),f()(),h(19,"button",12)(20,"span"),g(21,"\u2795"),f(),g(22," Add Expense "),f()()(),h(23,"div",2)(24,"div",13)(25,"h3")(26,"span",3),g(27,"\u{1F4CB}"),f(),g(28," Expense History "),h(29,"span",14),g(30),f()(),h(31,"div",15),g(32),f()(),U(33,jN,2,1,"div",16)(34,BN,3,0,"ng-template",null,0,ar),f()()}if(r&2){let o=sr(35);y(10),Y("ngModel",i.productName),y(4),Y("ngModel",i.price),y(4),Y("ngModel",i.notes),y(),D("disabled",!i.productName||!i.price||i.price<=0),y(11),q(i.expenses.length),y(2),z(" Total: $",i.totalExpenses.toFixed(2)," "),y(),D("ngIf",i.expenses.length>0)("ngIfElse",o)}},dependencies:[Ne,nt,He,Un,ot,zn,rt,dr,it,$n,Kt,hr,Ze,xn],styles:[".expenses-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xl)}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg);margin-top:var(--space-lg)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font-family:inherit;font-size:.9375rem;padding:var(--space-sm) var(--space-md);border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-surface);color:var(--color-text);transition:all var(--transition-base);width:100%;resize:vertical;min-height:80px}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f61a}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:var(--space-md);margin-bottom:var(--space-lg)}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;display:flex;align-items:center;gap:var(--space-sm)}.icon[_ngcontent-%COMP%]{font-size:1.5rem}.badge[_ngcontent-%COMP%]{margin-left:auto;background:var(--color-bg);color:var(--color-primary);padding:var(--space-xs) var(--space-md);border-radius:var(--radius-xl);font-size:.875rem;font-weight:600}.total-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-success),#059669);color:#fff;padding:var(--space-sm) var(--space-lg);border-radius:var(--radius-lg);font-size:1.125rem;font-weight:700;box-shadow:var(--shadow-md)}.expenses-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md)}.expense-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:var(--space-md);padding:var(--space-md);background:var(--color-bg);border-radius:var(--radius-md);transition:all var(--transition-base);border:1px solid var(--color-border)}.expense-item[_ngcontent-%COMP%]:hover{background:#fee;transform:translate(4px);border-color:var(--color-danger)}.expense-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xs);flex:1}.expense-name[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text)}.expense-notes[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-muted);font-style:italic}.expense-date[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted)}.expense-amount[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:var(--space-xs)}.expense-price[_ngcontent-%COMP%]{font-weight:600;font-size:1.125rem;color:var(--color-danger)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl);color:var(--color-text-muted)}@media (max-width: 640px){.section-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.total-badge[_ngcontent-%COMP%]{width:100%;text-align:center}}"]})}}return n})();var kC=(()=>{class n{constructor(t){this.inventoryService=t,this.sales=[],this.expenses=[]}ngOnInit(){this.inventoryService.getSales().subscribe(t=>{this.sales=t}),this.inventoryService.getExpenses().subscribe(t=>{this.expenses=t})}get totalIncome(){return this.sales.filter(t=>t.pending!==!0).reduce((t,r)=>t+r.total,0)}get totalExpenses(){return this.expenses.reduce((t,r)=>t+r.price,0)}get netProfit(){return this.totalIncome-this.totalExpenses}get incomePercentage(){let t=this.totalIncome+this.totalExpenses;return t>0?this.totalIncome/t*100:0}get expensePercentage(){let t=this.totalIncome+this.totalExpenses;return t>0?this.totalExpenses/t*100:0}get profitMargin(){return this.totalIncome>0?this.netProfit/this.totalIncome*100:0}get completedSalesCount(){return this.sales.filter(t=>t.pending!==!0).length}get pendingSalesCount(){return this.sales.filter(t=>t.pending===!0).length}get averageSale(){let t=this.completedSalesCount;return t>0?this.totalIncome/t:0}static{this.\u0275fac=function(r){return new(r||n)(Q(Lt))}}static{this.\u0275cmp=Re({type:n,selectors:[["app-reports"]],standalone:!0,features:[ke],decls:119,vars:62,consts:[[1,"reports-section"],[1,"summary-grid"],[1,"summary-card","income"],[1,"card-icon"],[1,"card-content"],[1,"card-label"],[1,"card-value"],[1,"summary-card","expense"],[1,"summary-card","profit"],[1,"summary-card","margin"],[1,"card","chart-card"],[1,"icon"],[1,"comparison-chart"],[1,"chart-row"],[1,"chart-label"],[1,"chart-bar-wrapper"],[1,"chart-bar","income-bar",3,"title"],[1,"chart-value"],[1,"chart-bar","expense-bar",3,"title"],[1,"chart-legend"],[1,"legend-item"],[1,"legend-color","income-color"],[1,"legend-color","expense-color"],[1,"breakdown-grid"],[1,"card"],[1,"breakdown-stats"],[1,"stat-row"],[1,"stat-label"],[1,"stat-value"]],template:function(r,i){r&1&&(h(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),g(4,"\u{1F4B0}"),f(),h(5,"div",4)(6,"div",5),g(7,"Total Income"),f(),h(8,"div",6),g(9),ae(10,"number"),f()()(),h(11,"div",7)(12,"div",3),g(13,"\u{1F4B8}"),f(),h(14,"div",4)(15,"div",5),g(16,"Total Expenses"),f(),h(17,"div",6),g(18),ae(19,"number"),f()()(),h(20,"div",8)(21,"div",3),g(22),f(),h(23,"div",4)(24,"div",5),g(25,"Net Profit"),f(),h(26,"div",6),g(27),ae(28,"number"),f()()(),h(29,"div",9)(30,"div",3),g(31,"\u{1F4CA}"),f(),h(32,"div",4)(33,"div",5),g(34,"Profit Margin"),f(),h(35,"div",6),g(36),ae(37,"number"),f()()()(),h(38,"div",10)(39,"h3")(40,"span",11),g(41,"\u{1F4CA}"),f(),g(42," Income vs Expenses "),f(),h(43,"div",12)(44,"div",13)(45,"div",14),g(46,"Income"),f(),h(47,"div",15),be(48,"div",16),ae(49,"number"),f(),h(50,"div",17),g(51),ae(52,"number"),f()(),h(53,"div",13)(54,"div",14),g(55,"Expenses"),f(),h(56,"div",15),be(57,"div",18),ae(58,"number"),f(),h(59,"div",17),g(60),ae(61,"number"),f()()(),h(62,"div",19)(63,"div",20),be(64,"span",21),h(65,"span"),g(66),ae(67,"number"),f()(),h(68,"div",20),be(69,"span",22),h(70,"span"),g(71),ae(72,"number"),f()()()(),h(73,"div",23)(74,"div",24)(75,"h3")(76,"span",11),g(77,"\u{1F4B5}"),f(),g(78," Income Breakdown "),f(),h(79,"div",25)(80,"div",26)(81,"span",27),g(82,"Total Sales:"),f(),h(83,"span",28),g(84),f()(),h(85,"div",26)(86,"span",27),g(87,"Pending Deliveries:"),f(),h(88,"span",28),g(89),f()(),h(90,"div",26)(91,"span",27),g(92,"Average Sale:"),f(),h(93,"span",28),g(94),ae(95,"number"),f()()()(),h(96,"div",24)(97,"h3")(98,"span",11),g(99,"\u{1F4B3}"),f(),g(100," Expense Breakdown "),f(),h(101,"div",25)(102,"div",26)(103,"span",27),g(104,"Total Expenses:"),f(),h(105,"span",28),g(106),f()(),h(107,"div",26)(108,"span",27),g(109,"Average Expense:"),f(),h(110,"span",28),g(111),ae(112,"number"),f()(),h(113,"div",26)(114,"span",27),g(115,"Expense Ratio:"),f(),h(116,"span",28),g(117),ae(118,"number"),f()()()()()()),r&2&&(y(9),z("$",ge(10,23,i.totalIncome,"1.2-2"),""),y(9),z("$",ge(19,26,i.totalExpenses,"1.2-2"),""),y(2),_e("negative",i.netProfit<0),y(2),q(i.netProfit>=0?"\u{1F4C8}":"\u{1F4C9}"),y(5),z("$",ge(28,29,i.netProfit,"1.2-2"),""),y(9),z("",ge(37,32,i.profitMargin,"1.1-1"),"%"),y(12),bn("width",i.incomePercentage,"%"),D("title","$"+ge(49,35,i.totalIncome,"1.2-2")),y(3),z("$",ge(52,38,i.totalIncome,"1.2-2"),""),y(6),bn("width",i.expensePercentage,"%"),D("title","$"+ge(58,41,i.totalExpenses,"1.2-2")),y(3),z("$",ge(61,44,i.totalExpenses,"1.2-2"),""),y(6),z("Income (",ge(67,47,i.incomePercentage,"1.1-1"),"%)"),y(5),z("Expenses (",ge(72,50,i.expensePercentage,"1.1-1"),"%)"),y(13),q(i.completedSalesCount),y(5),q(i.pendingSalesCount),y(5),z("$",ge(95,53,i.averageSale,"1.2-2"),""),y(12),q(i.expenses.length),y(5),z("$",i.expenses.length>0?i.totalExpenses/i.expenses.length:ge(112,56,0,"1.2-2"),""),y(6),z("",ge(118,59,i.expensePercentage,"1.1-1"),"%"))},dependencies:[Ne,po],styles:[".reports-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xl)}.summary-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:var(--space-lg)}.summary-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-primary),var(--color-primary-dark));color:#fff;padding:var(--space-xl);border-radius:var(--radius-lg);box-shadow:var(--shadow-lg);display:flex;align-items:center;gap:var(--space-lg);transition:all var(--transition-base);min-width:0;overflow:hidden}.summary-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:var(--shadow-xl)}.summary-card.income[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-success),#059669)}.summary-card.expense[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-danger),#dc2626)}.summary-card.profit[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#1e40af)}.summary-card.profit.negative[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706)}.summary-card.margin[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#6d28d9)}.card-icon[_ngcontent-%COMP%]{font-size:3rem;opacity:.9;flex-shrink:0}.card-content[_ngcontent-%COMP%]{flex:1;min-width:0;overflow:hidden}.card-label[_ngcontent-%COMP%]{font-size:.875rem;opacity:.9;margin-bottom:var(--space-xs);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.card-value[_ngcontent-%COMP%]{font-size:clamp(1rem,3vw,1.5rem);font-weight:700;word-break:break-all;overflow-wrap:break-word}.chart-card[_ngcontent-%COMP%]{margin-top:var(--space-lg)}.icon[_ngcontent-%COMP%]{font-size:1.5rem}h3[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);margin-bottom:var(--space-lg)}.comparison-chart[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg);margin:var(--space-xl) 0}.chart-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:100px 1fr 120px;gap:var(--space-md);align-items:center}.chart-label[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text)}.chart-bar-wrapper[_ngcontent-%COMP%]{height:40px;background:var(--color-bg);border-radius:var(--radius-md);overflow:hidden;border:1px solid var(--color-border)}.chart-bar[_ngcontent-%COMP%]{height:100%;transition:width .5s ease;min-width:2%;display:flex;align-items:center;justify-content:flex-end;padding-right:var(--space-sm);color:#fff;font-weight:600}.income-bar[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--color-success),#10b981)}.expense-bar[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--color-danger),#ef4444)}.chart-value[_ngcontent-%COMP%]{font-weight:700;font-size:1.125rem;color:var(--color-text);text-align:right}.chart-legend[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:var(--space-xl);margin-top:var(--space-lg);padding-top:var(--space-lg);border-top:1px solid var(--color-border)}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);font-size:.875rem;color:var(--color-text)}.legend-color[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:var(--radius-sm)}.income-color[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-success),#10b981)}.expense-color[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-danger),#ef4444)}.breakdown-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:var(--space-lg)}.breakdown-stats[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md);margin-top:var(--space-lg)}.stat-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--space-sm) 0;border-bottom:1px solid var(--color-border)}.stat-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.stat-label[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-muted)}.stat-value[_ngcontent-%COMP%]{font-weight:600;font-size:1rem;color:var(--color-text)}@media (max-width: 768px){.summary-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.chart-row[_ngcontent-%COMP%]{grid-template-columns:80px 1fr 100px}.chart-legend[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.breakdown-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return n})();function UN(n,e){if(n&1&&(h(0,"div",22)(1,"div",23),g(2),f(),h(3,"h3",24),g(4),f(),h(5,"p",25),g(6),f()()),n&2){let t=e.$implicit;y(2),q(t.icon),y(2),q(t.title),y(2),q(t.description)}}var FC=(()=>{class n{constructor(){this.features=[{icon:"\u{1F4E6}",title:"Smart Inventory",description:"Add, track, and manage your products with real-time stock updates."},{icon:"\u{1F4B0}",title:"Advanced POS",description:"Seamless sales processing with pending delivery scheduling and alarms."},{icon:"\u{1F4DE}",title:"Live Communication",description:"Real-time chat and crystal clear audio calls for instant support."},{icon:"\u{1F30D}",title:"GPS Location",description:"Integrated location sharing for precise delivery coordination."},{icon:"\u{1F4CA}",title:"Analytics & Reports",description:"Visualize income, expenses, and profit margins with detailed charts."},{icon:"\u{1F4CB}",title:"Activity Logs",description:"Complete audit trail of all system actions for security and accountability."},{icon:"\u{1F465}",title:"Customer CRM",description:"Maintain detailed customer profiles and purchase history."},{icon:"\u{1F4B8}",title:"Expense Tracking",description:"Monitor operational costs to ensure maximum profitability."}]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Re({type:n,selectors:[["app-landing"]],standalone:!0,features:[ke],decls:43,vars:1,consts:[[1,"landing-page"],[1,"hero-section"],[1,"hero-content"],[1,"hero-icon"],[1,"hero-title"],[1,"hero-subtitle"],[1,"hero-description"],[1,"hero-stats"],[1,"stat-item"],[1,"stat-icon"],[1,"stat-text"],[1,"features-section"],[1,"section-title"],[1,"section-subtitle"],[1,"features-grid"],["class","feature-card",4,"ngFor","ngForOf"],[1,"cta-section"],[1,"cta-content"],[1,"cta-title"],[1,"cta-description"],[1,"cta-arrow"],[1,"arrow-icon"],[1,"feature-card"],[1,"feature-icon"],[1,"feature-title"],[1,"feature-description"]],template:function(r,i){r&1&&(h(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),g(4,"\u{1F4E6}"),f(),h(5,"h1",4),g(6,"Welcome to JJM Inventory"),f(),h(7,"p",5),g(8,"Your complete business management solution"),f(),h(9,"p",6),g(10," Streamline your inventory, sales, and customer management all in one place. Track expenses, monitor profits, and grow your business with confidence. "),f(),h(11,"div",7)(12,"div",8)(13,"div",9),g(14,"\u26A1"),f(),h(15,"div",10),g(16,"Fast & Efficient"),f()(),h(17,"div",8)(18,"div",9),g(19,"\u{1F512}"),f(),h(20,"div",10),g(21,"Secure & Reliable"),f()(),h(22,"div",8)(23,"div",9),g(24,"\u{1F4F1}"),f(),h(25,"div",10),g(26,"Fully Responsive"),f()()()()(),h(27,"div",11)(28,"h2",12),g(29,"Powerful Features"),f(),h(30,"p",13),g(31,"Everything you need to manage your business effectively"),f(),h(32,"div",14),U(33,UN,7,3,"div",15),f()(),h(34,"div",16)(35,"div",17)(36,"h2",18),g(37,"Ready to Get Started?"),f(),h(38,"p",19),g(39," Choose a tab above to begin managing your inventory, processing sales, or viewing reports. "),f(),h(40,"div",20)(41,"span",21),g(42,"\u2191"),f()()()()()),r&2&&(y(33),D("ngForOf",i.features))},dependencies:[Ne,nt],styles:['.landing-page[_ngcontent-%COMP%]{min-height:calc(100vh - 300px);animation:_ngcontent-%COMP%_fadeIn .6s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.hero-section[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl) 0;background:linear-gradient(135deg,#3b82f60d,#9333ea0d);border-radius:var(--radius-lg);margin-bottom:var(--space-2xl)}.hero-content[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:0 var(--space-lg)}.hero-icon[_ngcontent-%COMP%]{font-size:5rem;margin-bottom:var(--space-lg);animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-15px)}}.hero-title[_ngcontent-%COMP%]{font-size:3rem;font-weight:700;color:var(--color-text);margin-bottom:var(--space-md);background:linear-gradient(135deg,var(--color-primary),var(--color-primary-light));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.hero-subtitle[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--color-text-muted);margin-bottom:var(--space-lg);font-weight:500}.hero-description[_ngcontent-%COMP%]{font-size:1.125rem;color:var(--color-text-muted);line-height:1.8;margin-bottom:var(--space-2xl);max-width:600px;margin-left:auto;margin-right:auto}.hero-stats[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:var(--space-2xl);flex-wrap:wrap;margin-top:var(--space-2xl)}.stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);padding:var(--space-md) var(--space-lg);background:var(--color-surface);border-radius:var(--radius-lg);box-shadow:var(--shadow-sm);transition:all var(--transition-base)}.stat-item[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:var(--shadow-md)}.stat-icon[_ngcontent-%COMP%]{font-size:1.5rem}.stat-text[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text)}.features-section[_ngcontent-%COMP%]{padding:var(--space-2xl) 0}.section-title[_ngcontent-%COMP%]{text-align:center;font-size:2.5rem;font-weight:700;color:var(--color-text);margin-bottom:var(--space-md)}.section-subtitle[_ngcontent-%COMP%]{text-align:center;font-size:1.125rem;color:var(--color-text-muted);margin-bottom:var(--space-2xl)}.features-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:var(--space-xl);margin-top:var(--space-2xl)}.feature-card[_ngcontent-%COMP%]{background:var(--color-surface);padding:var(--space-xl);border-radius:var(--radius-lg);border:1px solid var(--color-border);transition:all var(--transition-base);text-align:center;position:relative;overflow:hidden}.feature-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(59,130,246,.1),transparent);transition:left .6s ease}.feature-card[_ngcontent-%COMP%]:hover:before{left:100%}.feature-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:var(--shadow-xl);border-color:var(--color-primary)}.feature-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:var(--space-md);transition:transform var(--transition-base)}.feature-card[_ngcontent-%COMP%]:hover   .feature-icon[_ngcontent-%COMP%]{transform:scale(1.2) rotate(5deg)}.feature-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--color-text);margin-bottom:var(--space-sm)}.feature-description[_ngcontent-%COMP%]{font-size:.9375rem;color:var(--color-text-muted);line-height:1.6}.cta-section[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl) 0;margin-top:var(--space-2xl)}.cta-content[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:var(--space-2xl);background:linear-gradient(135deg,var(--color-primary),var(--color-primary-dark));border-radius:var(--radius-lg);color:#fff;box-shadow:var(--shadow-xl)}.cta-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:var(--space-md)}.cta-description[_ngcontent-%COMP%]{font-size:1.125rem;margin-bottom:var(--space-lg);opacity:.95}.cta-arrow[_ngcontent-%COMP%]{margin-top:var(--space-xl)}.arrow-icon[_ngcontent-%COMP%]{font-size:3rem;display:inline-block;animation:_ngcontent-%COMP%_bounce 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}@media (max-width: 768px){.hero-title[_ngcontent-%COMP%]{font-size:2rem}.hero-subtitle[_ngcontent-%COMP%]{font-size:1.25rem}.hero-description[_ngcontent-%COMP%]{font-size:1rem}.hero-stats[_ngcontent-%COMP%]{flex-direction:column;gap:var(--space-md)}.section-title[_ngcontent-%COMP%]{font-size:2rem}.features-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.cta-title[_ngcontent-%COMP%]{font-size:1.5rem}}']})}}return n})();var yo=(()=>{class n{constructor(t){this.http=t,this.apiUrl=Vt.apiUrl,this.usersSubject=new Qe([]),this.users$=this.usersSubject.asObservable(),this.loadUsers()}hashPassword(t){return B(this,null,function*(){let i=new TextEncoder().encode(t),o=yield crypto.subtle.digest("SHA-256",i);return Array.from(new Uint8Array(o)).map(s=>s.toString(16).padStart(2,"0")).join("")})}loadUsers(){this.http.get(`${this.apiUrl}/users`).subscribe({next:t=>{let r=t.map(i=>this.transformUser(i));r.length===0?this.initializeDefaultAdmin():this.usersSubject.next(r)},error:t=>{console.error("Error fetching users:",t),t.status===404&&this.initializeDefaultAdmin()}})}initializeDefaultAdmin(){return B(this,null,function*(){if(this.usersSubject.value.length>0)return;let r={id:"admin-1",username:"jjm143256789",fullName:"System Administrator",password:yield this.hashPassword("Gr*l0v3R"),role:"admin",createdAt:new Date};this.http.post(`${this.apiUrl}/users`,r).subscribe({next:i=>{let o=this.transformUser(i);this.usersSubject.next([o])},error:i=>{console.warn("Could not save default admin to backend, using local only",i),this.usersSubject.next([r])}})})}getUsers(){return this.users$}addUser(t){let r=ue(ee({},t),{createdAt:new Date,userId:t.userId||localStorage.getItem("jjm_user_id")||"system"});return An(this.hashPassword(t.password||"")).pipe(Ki(i=>(r.password=i,this.http.post(`${this.apiUrl}/users`,r))),ft(i=>{let o=this.transformUser(i),s=this.usersSubject.value;return this.usersSubject.next([...s,o]),o}))}updateUser(t){return new $e(r=>{B(this,null,function*(){let o=ee({},t);o.password&&(o.password=yield this.hashPassword(o.password)),this.http.put(`${this.apiUrl}/users/${o.id}`,o).subscribe({next:s=>{let a=this.transformUser(s),u=this.usersSubject.value.map(p=>p.id===a.id?a:p);this.usersSubject.next(u),r.next(a),r.complete()},error:s=>r.error(s)})})})}deleteUser(t){return this.http.delete(`${this.apiUrl}/users/${t}`).pipe(ft(()=>{let r=this.usersSubject.value;this.usersSubject.next(r.filter(i=>i.id!==t))}))}getUserById(t){return this.usersSubject.value.find(r=>r.id===t)}validateCredentials(t,r){return An(this.hashPassword(r)).pipe(Ki(i=>this.users$.pipe(ci(1),ft(o=>o.find(a=>a.username===t&&a.password===i)||null))))}transformUser(t){return ue(ee({},t),{createdAt:this.parseDate(t.createdAt)})}parseDate(t){return t?t instanceof Date?t:typeof t=="string"?new Date(t):typeof t=="object"&&t._seconds!==void 0?new Date(t._seconds*1e3):new Date(t):new Date}static{this.\u0275fac=function(r){return new(r||n)(se(wn))}}static{this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function $N(n,e){if(n&1&&be(0,"div",18),n&2){let t=e.$implicit;bn("left",t.x,"%")("top",t.y,"%")("width",t.size,"px")("height",t.size,"px")("animation-delay",t.delay,"s")}}function zN(n,e){if(n&1&&(h(0,"div",19)(1,"span",20),g(2,"\u26A0\uFE0F"),f(),g(3),f()),n&2){let t=I();y(3),z(" ",t.errorMessage," ")}}function qN(n,e){n&1&&(h(0,"span"),g(1,"Sign In"),f())}function HN(n,e){n&1&&(h(0,"span",21),be(1,"span",22),g(2," Signing in... "),f())}var VC=(()=>{class n{constructor(t){this.userService=t,this.username="",this.password="",this.errorMessage="",this.isLoading=!1,this.bubbles=[]}ngOnInit(){this.generateBubbles()}ngOnDestroy(){}onMouseMove(t){document.querySelectorAll(".bubble").forEach(i=>{let o=i,s=o.getBoundingClientRect(),a=s.left+s.width/2,l=s.top+s.height/2,u=t.clientX-a,p=t.clientY-l,v=Math.sqrt(u*u+p*p);if(v<250){let b=(250-v)/250,C=u/v*b*50,O=p/v*b*50;o.style.transform=`translate(${C}px, ${O}px) scale(${1+b*.3})`}else o.style.transform="translate(0, 0) scale(1)"})}generateBubbles(){for(let t=0;t<15;t++)this.bubbles.push({x:Math.random()*100,y:Math.random()*100,size:Math.random()*100+50,delay:Math.random()*5})}onLogin(){if(this.errorMessage="",!this.username||!this.password){this.errorMessage="Please enter both username and password";return}this.isLoading=!0,setTimeout(()=>{this.userService.validateCredentials(this.username,this.password).subscribe(t=>{t?(localStorage.setItem("jjm_logged_in","true"),localStorage.setItem("jjm_username",this.username),localStorage.setItem("jjm_user_id",t.id),localStorage.setItem("jjm_role",t.role),window.location.reload()):(this.errorMessage="Invalid username or password",this.isLoading=!1)})},800)}static{this.\u0275fac=function(r){return new(r||n)(Q(yo))}}static{this.\u0275cmp=Re({type:n,selectors:[["app-login"]],hostBindings:function(r,i){r&1&&j("mousemove",function(s){return i.onMouseMove(s)})},standalone:!0,features:[ke],decls:24,vars:9,consts:[[1,"login-container"],[1,"bubbles-container"],["class","bubble",3,"left","top","width","height","animation-delay",4,"ngFor","ngForOf"],[1,"login-card"],[1,"login-header"],[1,"logo-icon"],[1,"login-title"],[1,"login-subtitle"],[1,"login-form",3,"ngSubmit"],[1,"form-group"],["for","username"],["type","text","id","username","name","username","placeholder","Enter your username","required","",3,"ngModelChange","ngModel","disabled"],["for","password"],["type","password","id","password","name","password","placeholder","Enter your password","required","",3,"ngModelChange","ngModel","disabled"],["class","error-message",4,"ngIf"],["type","submit",1,"login-button",3,"disabled"],[4,"ngIf"],["class","loading-spinner",4,"ngIf"],[1,"bubble"],[1,"error-message"],[1,"error-icon"],[1,"loading-spinner"],[1,"spinner"]],template:function(r,i){r&1&&(h(0,"div",0)(1,"div",1),U(2,$N,1,10,"div",2),f(),h(3,"div",3)(4,"div",4)(5,"div",5),g(6,"\u{1F4E6}"),f(),h(7,"h1",6),g(8,"JJM Inventory"),f(),h(9,"p",7),g(10,"Sign in to your account"),f()(),h(11,"form",8),j("ngSubmit",function(){return i.onLogin()}),h(12,"div",9)(13,"label",10),g(14,"Username"),f(),h(15,"input",11),J("ngModelChange",function(s){return Z(i.username,s)||(i.username=s),s}),f()(),h(16,"div",9)(17,"label",12),g(18,"Password"),f(),h(19,"input",13),J("ngModelChange",function(s){return Z(i.password,s)||(i.password=s),s}),f()(),U(20,zN,4,1,"div",14),h(21,"button",15),U(22,qN,2,0,"span",16)(23,HN,3,0,"span",17),f()()()()),r&2&&(y(2),D("ngForOf",i.bubbles),y(13),Y("ngModel",i.username),D("disabled",i.isLoading),y(4),Y("ngModel",i.password),D("disabled",i.isLoading),y(),D("ngIf",i.errorMessage),y(),D("disabled",i.isLoading),y(),D("ngIf",!i.isLoading),y(),D("ngIf",i.isLoading))},dependencies:[Ne,nt,He,ot,zn,rt,it,$n,Kt,Ze,xn],styles:['.login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:var(--color-bg);padding:var(--space-lg);position:relative;overflow:hidden}.bubbles-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;z-index:0}.bubble[_ngcontent-%COMP%]{position:absolute;border-radius:50%;background:radial-gradient(circle at 30% 30%,#3b82f64d,#9333ea33);-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);animation:_ngcontent-%COMP%_float 8s ease-in-out infinite;transition:transform .15s ease-out;box-shadow:inset 0 0 20px #fff3,0 8px 32px #3b82f633;border:1px solid rgba(255,255,255,.1)}.bubble[_ngcontent-%COMP%]:before{content:"";position:absolute;top:10%;left:10%;width:40%;height:40%;background:radial-gradient(circle,rgba(255,255,255,.4),transparent);border-radius:50%}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0) rotate(0)}25%{transform:translateY(-20px) rotate(90deg)}50%{transform:translateY(0) rotate(180deg)}75%{transform:translateY(20px) rotate(270deg)}}.login-card[_ngcontent-%COMP%]{background:var(--color-surface);border-radius:var(--radius-xl);box-shadow:0 20px 60px #0000004d;padding:var(--space-2xl);width:100%;max-width:420px;animation:_ngcontent-%COMP%_slideIn .5s cubic-bezier(.16,1,.3,1);position:relative;z-index:1}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(30px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--space-2xl)}.logo-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:var(--space-md);animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.login-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--color-text);margin-bottom:var(--space-xs);background:linear-gradient(135deg,var(--color-primary),var(--color-primary-light));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.login-subtitle[_ngcontent-%COMP%]{color:var(--color-text-muted);font-size:.9375rem;margin:0}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:var(--color-text)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:var(--space-md);font-size:1rem;border:2px solid var(--color-border);border-radius:var(--radius-md);transition:all var(--transition-base);background:var(--color-surface)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 4px #3b82f61a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.error-message[_ngcontent-%COMP%]{background:#fee;color:var(--color-danger);padding:var(--space-md);border-radius:var(--radius-md);font-size:.875rem;border:1px solid rgba(239,68,68,.2);display:flex;align-items:center;gap:var(--space-sm);animation:_ngcontent-%COMP%_shake .4s ease}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-10px)}75%{transform:translate(10px)}}.error-icon[_ngcontent-%COMP%]{font-size:1.25rem}.login-button[_ngcontent-%COMP%]{padding:var(--space-md) var(--space-xl);font-size:1rem;font-weight:600;background:linear-gradient(135deg,var(--color-primary),var(--color-primary-light));color:#fff;border:none;border-radius:var(--radius-md);cursor:pointer;transition:all var(--transition-base);box-shadow:0 4px 12px #3b82f64d}.login-button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 20px #3b82f666}.login-button[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.login-button[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.loading-spinner[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:var(--space-sm)}.spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.login-footer[_ngcontent-%COMP%]{margin-top:var(--space-2xl);padding-top:var(--space-lg);border-top:1px solid var(--color-border);text-align:center}.demo-credentials[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-muted);line-height:1.6;margin:0}.demo-credentials[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--color-text)}.demo-credentials[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background:var(--color-bg);padding:2px 6px;border-radius:var(--radius-sm);font-family:Courier New,monospace;color:var(--color-primary);font-weight:600}@media (max-width: 480px){.login-card[_ngcontent-%COMP%]{padding:var(--space-xl)}.login-title[_ngcontent-%COMP%]{font-size:1.5rem}.logo-icon[_ngcontent-%COMP%]{font-size:3rem}}']})}}return n})();function GN(n,e){if(n&1&&(h(0,"option",18),g(1),ae(2,"titlecase"),f()),n&2){let t=e.$implicit;D("value",t),y(),z(" ",Ts(2,2,t)," ")}}function WN(n,e){if(n&1&&(h(0,"option",18),g(1),ae(2,"titlecase"),f()),n&2){let t=e.$implicit;D("value",t),y(),z(" ",Ts(2,2,t)," ")}}function QN(n,e){if(n&1&&(h(0,"span",33),g(1),f()),n&2){let t=I().$implicit;y(),z("\u2022 ",t.details,"")}}function KN(n,e){if(n&1&&(h(0,"div",21)(1,"div",22)(2,"span",23),g(3),f(),h(4,"span",24),g(5),f()(),h(6,"div",25)(7,"div",26)(8,"span",27),g(9),f(),h(10,"span",28),g(11),f()(),h(12,"div",29)(13,"span",30),g(14),f(),U(15,QN,2,1,"span",31),f()(),h(16,"div",32),g(17),ae(18,"date"),f()()),n&2){let t=e.$implicit,r=I(2);y(3),q(r.getEntityIcon(t.entityType)),y(2),q(r.getActionIcon(t.action)),y(4),q(t.entityName),y(2),q(t.action),y(3),q(t.entityType),y(),D("ngIf",t.details),y(2),z(" ",ge(18,7,t==null?null:t.timestamp,"medium")," ")}}function YN(n,e){if(n&1&&(h(0,"div",19),U(1,KN,19,10,"div",20),f()),n&2){let t=I();y(),D("ngForOf",t.paginatedLogs)}}function JN(n,e){n&1&&(h(0,"div",34)(1,"p"),g(2,"No activity logs found"),f()())}function XN(n,e){if(n&1){let t=te();h(0,"div",35)(1,"button",36),j("click",function(){R(t);let i=I();return k(i.prevPage())}),g(2," \u2190 Prev "),f(),h(3,"span",37),g(4),f(),h(5,"button",36),j("click",function(){R(t);let i=I();return k(i.nextPage())}),g(6," Next \u2192 "),f()()}if(n&2){let t=I();y(),D("disabled",t.currentPage===1),y(3),on(" Page ",t.currentPage," of ",t.totalPages," "),y(),D("disabled",t.currentPage===t.totalPages)}}var LC=(()=>{class n{constructor(t){this.loggingService=t,this.logs=[],this.filteredLogs=[],this.selectedEntityType="all",this.selectedAction="all",this.currentPage=1,this.pageSize=20,this.entityTypes=["all","product","sale","expense","customer"],this.actions=["all","create","update","delete","restock","complete"]}ngOnInit(){this.loggingService.getLogs().subscribe(t=>{this.logs=t.map(r=>ue(ee({},r),{timestamp:new Date(r.timestamp?._seconds*1e3||new Date)})),this.applyFilters()})}applyFilters(){this.filteredLogs=this.logs.filter(t=>{let r=this.selectedEntityType==="all"||t.entityType===this.selectedEntityType,i=this.selectedAction==="all"||t.action===this.selectedAction;return r&&i}),this.currentPage=1}get paginatedLogs(){let t=(this.currentPage-1)*this.pageSize,r=t+this.pageSize;return this.filteredLogs.slice(t,r)}get totalPages(){return Math.ceil(this.filteredLogs.length/this.pageSize)}nextPage(){this.currentPage<this.totalPages&&this.currentPage++}prevPage(){this.currentPage>1&&this.currentPage--}refreshLogs(){this.loggingService.refreshLogs()}cleanupOldLogs(){confirm("This will delete all logs older than 30 days. Continue?")&&this.loggingService.cleanupOldLogs().subscribe({next:t=>{alert(`Cleanup completed! Deleted ${t.deletedCount} logs.`),this.refreshLogs()},error:t=>{console.error("Cleanup error:",t),alert("Failed to cleanup logs")}})}getActionIcon(t){return{create:"\u2795",update:"\u270F\uFE0F",delete:"\u{1F5D1}\uFE0F",restock:"\u{1F4E6}",complete:"\u2705"}[t]||"\u{1F4DD}"}getEntityIcon(t){return{product:"\u{1F4E6}",sale:"\u{1F4B0}",expense:"\u{1F4B8}",customer:"\u{1F464}"}[t]||"\u{1F4C4}"}static{this.\u0275fac=function(r){return new(r||n)(Q(Nl))}}static{this.\u0275cmp=Re({type:n,selectors:[["app-activity-logs"]],standalone:!0,features:[ke],decls:29,vars:8,consts:[["noLogs",""],[1,"activity-logs-section"],[1,"card"],[1,"header-section"],[1,"icon"],[1,"badge"],[1,"header-actions"],[1,"btn-refresh",3,"click"],[1,"btn-cleanup",3,"click"],[1,"filters-section"],[1,"filter-group"],["for","entityFilter"],["id","entityFilter",1,"filter-select",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","actionFilter"],["id","actionFilter",1,"filter-select",3,"ngModelChange","change","ngModel"],["class","logs-list",4,"ngIf","ngIfElse"],["class","pagination",4,"ngIf"],[3,"value"],[1,"logs-list"],["class","log-item",4,"ngFor","ngForOf"],[1,"log-item"],[1,"log-icon"],[1,"entity-icon"],[1,"action-icon"],[1,"log-info"],[1,"log-header"],[1,"log-entity"],[1,"log-action-badge"],[1,"log-details"],[1,"log-type"],["class","log-description",4,"ngIf"],[1,"log-timestamp"],[1,"log-description"],[1,"empty-state"],[1,"pagination"],[1,"pagination-btn",3,"click","disabled"],[1,"page-info"]],template:function(r,i){if(r&1){let o=te();h(0,"div",1)(1,"div",2)(2,"div",3)(3,"h3")(4,"span",4),g(5,"\u{1F4CB}"),f(),g(6," Activity Logs "),h(7,"span",5),g(8),f()(),h(9,"div",6)(10,"button",7),j("click",function(){return R(o),k(i.refreshLogs())}),g(11," \u{1F504} Refresh "),f(),h(12,"button",8),j("click",function(){return R(o),k(i.cleanupOldLogs())}),g(13," \u{1F5D1}\uFE0F Cleanup Old Logs "),f()()(),h(14,"div",9)(15,"div",10)(16,"label",11),g(17,"Entity Type:"),f(),h(18,"select",12),J("ngModelChange",function(a){return R(o),Z(i.selectedEntityType,a)||(i.selectedEntityType=a),k(a)}),j("change",function(){return R(o),k(i.applyFilters())}),U(19,GN,3,4,"option",13),f()(),h(20,"div",10)(21,"label",14),g(22,"Action:"),f(),h(23,"select",15),J("ngModelChange",function(a){return R(o),Z(i.selectedAction,a)||(i.selectedAction=a),k(a)}),j("change",function(){return R(o),k(i.applyFilters())}),U(24,WN,3,4,"option",13),f()()(),U(25,YN,2,1,"div",16)(26,JN,3,0,"ng-template",null,0,ar)(28,XN,7,4,"div",17),f()()}if(r&2){let o=sr(27);y(8),q(i.filteredLogs.length),y(10),Y("ngModel",i.selectedEntityType),y(),D("ngForOf",i.entityTypes),y(4),Y("ngModel",i.selectedAction),y(),D("ngForOf",i.actions),y(),D("ngIf",i.paginatedLogs.length>0)("ngIfElse",o),y(3),D("ngIf",i.totalPages>1)}},dependencies:[Ne,nt,He,ml,Un,ot,an,cn,Ft,it,Ze],styles:[".activity-logs-section[_ngcontent-%COMP%]{padding:var(--space-lg)}.header-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--space-lg);flex-wrap:wrap;gap:var(--space-md)}.header-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);margin:0}.header-actions[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm)}.btn-refresh[_ngcontent-%COMP%], .btn-cleanup[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);border:1px solid var(--color-border);background:var(--color-surface);color:var(--color-text);border-radius:var(--radius-md);cursor:pointer;font-size:.875rem;font-weight:500;transition:all var(--transition-base)}.btn-refresh[_ngcontent-%COMP%]:hover{background:var(--color-primary);color:#fff;border-color:var(--color-primary)}.btn-cleanup[_ngcontent-%COMP%]{background:var(--color-danger);color:#fff;border-color:var(--color-danger)}.btn-cleanup[_ngcontent-%COMP%]:hover{background:#dc2626}.filters-section[_ngcontent-%COMP%]{display:flex;gap:var(--space-lg);margin-bottom:var(--space-lg);padding:var(--space-md);background:var(--color-bg);border-radius:var(--radius-md);flex-wrap:wrap}.filter-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm)}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.filter-select[_ngcontent-%COMP%]{padding:var(--space-xs) var(--space-sm);border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-surface);color:var(--color-text);font-size:.875rem;cursor:pointer}.logs-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.log-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);padding:8px 12px;background:var(--color-bg);border-radius:var(--radius-sm);border:1px solid var(--color-border);transition:all var(--transition-base)}.log-item[_ngcontent-%COMP%]:hover{background:var(--color-surface);transform:translate(2px)}.log-icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:4px;font-size:1rem;min-width:40px;justify-content:center}.entity-icon[_ngcontent-%COMP%]{font-size:1.1rem}.action-icon[_ngcontent-%COMP%]{font-size:.9rem}.log-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:row;align-items:center;gap:var(--space-sm);flex-wrap:wrap}.log-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-xs)}.log-entity[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text);font-size:.9rem}.log-action-badge[_ngcontent-%COMP%]{padding:1px 6px;background:var(--color-primary);color:#fff;border-radius:var(--radius-sm);font-size:.7rem;font-weight:500;text-transform:uppercase}.log-details[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-xs);font-size:.85rem;color:var(--color-text-muted)}.log-type[_ngcontent-%COMP%]{text-transform:capitalize;font-weight:500}.log-description[_ngcontent-%COMP%]{font-style:italic;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:400px}.log-timestamp[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted);white-space:nowrap}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl);color:var(--color-text-muted)}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:var(--space-md);margin-top:var(--space-lg);padding-top:var(--space-lg);border-top:1px solid var(--color-border)}.pagination-btn[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);background:var(--color-surface);border:1px solid var(--color-border);color:var(--color-text);border-radius:var(--radius-md);font-size:.875rem;font-weight:500;cursor:pointer;transition:all var(--transition-base)}.pagination-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--color-primary);color:#fff;border-color:var(--color-primary)}.pagination-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.page-info[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text);font-weight:500}@media (max-width: 768px){.header-section[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.filters-section[_ngcontent-%COMP%]{flex-direction:column}.log-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.log-timestamp[_ngcontent-%COMP%]{align-self:flex-end}}"]})}}return n})();var jC=()=>{};var $C=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},ZN=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},zC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,l=i+2<n.length,u=l?n[i+2]:0,p=o>>2,v=(o&3)<<4|a>>4,b=(a&15)<<2|u>>6,C=u&63;l||(C=64,s||(b=64)),r.push(t[p],t[v],t[b],t[C])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray($C(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):ZN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let v=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||u==null||v==null)throw new op;let b=o<<2|a>>4;if(r.push(b),u!==64){let C=a<<4&240|u>>2;if(r.push(C),v!==64){let O=u<<6&192|v;r.push(O)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},op=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},e2=function(n){let e=$C(n);return zC.encodeByteArray(e,!0)},Qs=function(n){return e2(n).replace(/\./g,"")},qC=function(n){try{return zC.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function HC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var t2=()=>HC().__FIREBASE_DEFAULTS__,n2=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},r2=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&qC(n[1]);return e&&JSON.parse(e)},sp=()=>{try{return jC()||t2()||n2()||r2()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},i2=n=>sp()?.emulatorHosts?.[n],GC=n=>{let e=i2(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},ap=()=>sp()?.config;var Fl=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Vl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function WC(n){return B(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function QC(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=ee({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Qs(JSON.stringify(t)),Qs(JSON.stringify(s)),""].join(".")}var Ws={};function o2(){let n={prod:[],emulator:[]};for(let e of Object.keys(Ws))Ws[e]?n.emulator.push(e):n.prod.push(e);return n}function s2(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var BC=!1;function KC(n,e){if(typeof window>"u"||typeof document>"u"||!Vl(window.location.host)||Ws[n]===e||Ws[n]||BC)return;Ws[n]=e;function t(b){return`__firebase__banner__${b}`}let r="__firebase__banner",o=o2().prod.length>0;function s(){let b=document.getElementById(r);b&&b.remove()}function a(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function l(b,C){b.setAttribute("width","24"),b.setAttribute("id",C),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function u(){let b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{BC=!0,s()},b}function p(b,C){b.setAttribute("id",C),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function v(){let b=s2(r),C=t("text"),O=document.getElementById(C)||document.createElement("span"),V=t("learnmore"),F=document.getElementById(V)||document.createElement("a"),W=t("preprendIcon"),ie=document.getElementById(W)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){let X=b.element;a(X),p(F,V);let Se=u();l(ie,W),X.append(ie,O,F,Se),document.body.appendChild(X)}o?(O.innerText="Preview backend disconnected.",ie.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ie.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}function YC(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function a2(){let n=sp()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function JC(){return!a2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cp(){try{return typeof indexedDB=="object"}catch{return!1}}function XC(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var c2="FirebaseError",fr=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=c2,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ks.prototype.create)}},Ks=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?l2(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new fr(i,a,r)}};function l2(n,e){return n.replace(u2,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var u2=/\{\$([^}]+)}/g;function _o(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(UC(o)&&UC(s)){if(!_o(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function UC(n){return n!==null&&typeof n=="object"}var $6=4*60*60*1e3;function Yt(n){return n&&n._delegate?n._delegate:n}var pr=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Mi="[DEFAULT]";var lp=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Fl;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(h2(e))try{this.getOrInitializeService({instanceIdentifier:Mi})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Mi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return B(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Mi){return this.instances.has(e)}getOptions(e=Mi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:d2(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Mi){return this.component?this.component.multipleInstances?e:Mi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function d2(n){return n===Mi?void 0:n}function h2(n){return n.instantiationMode==="EAGER"}var Ll=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new lp(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var f2=[],Ie=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Ie||{}),p2={debug:Ie.DEBUG,verbose:Ie.VERBOSE,info:Ie.INFO,warn:Ie.WARN,error:Ie.ERROR,silent:Ie.SILENT},m2=Ie.INFO,g2={[Ie.DEBUG]:"log",[Ie.VERBOSE]:"log",[Ie.INFO]:"info",[Ie.WARN]:"warn",[Ie.ERROR]:"error"},v2=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=g2[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},bo=class{constructor(e){this.name=e,this._logLevel=m2,this._logHandler=v2,this._userLogHandler=null,f2.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?p2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ie.DEBUG,...e),this._logHandler(this,Ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ie.VERBOSE,...e),this._logHandler(this,Ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ie.INFO,...e),this._logHandler(this,Ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ie.WARN,...e),this._logHandler(this,Ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ie.ERROR,...e),this._logHandler(this,Ie.ERROR,...e)}};var y2=(n,e)=>e.some(t=>n instanceof t),ZC,ew;function _2(){return ZC||(ZC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function b2(){return ew||(ew=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var tw=new WeakMap,dp=new WeakMap,nw=new WeakMap,up=new WeakMap,fp=new WeakMap;function C2(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Hn(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&tw.set(t,n)}).catch(()=>{}),fp.set(e,n),e}function w2(n){if(dp.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});dp.set(n,e)}var hp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return dp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||nw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Hn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function rw(n){hp=n(hp)}function x2(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(jl(this),e,...t);return nw.set(r,e.sort?e.sort():[e]),Hn(r)}:b2().includes(n)?function(...e){return n.apply(jl(this),e),Hn(tw.get(this))}:function(...e){return Hn(n.apply(jl(this),e))}}function E2(n){return typeof n=="function"?x2(n):(n instanceof IDBTransaction&&w2(n),y2(n,_2())?new Proxy(n,hp):n)}function Hn(n){if(n instanceof IDBRequest)return C2(n);if(up.has(n))return up.get(n);let e=E2(n);return e!==n&&(up.set(n,e),fp.set(e,n)),e}var jl=n=>fp.get(n);function ow(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=Hn(s);return r&&s.addEventListener("upgradeneeded",l=>{r(Hn(s.result),l.oldVersion,l.newVersion,Hn(s.transaction),l)}),t&&s.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var I2=["get","getKey","getAll","getAllKeys","count"],D2=["put","add","delete","clear"],pp=new Map;function iw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(pp.get(e))return pp.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=D2.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||I2.includes(t)))return;let o=function(s,...a){return B(this,null,function*(){let l=this.transaction(s,i?"readwrite":"readonly"),u=l.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[t](...a),i&&l.done]))[0]})};return pp.set(e,o),o}rw(n=>ue(ee({},n),{get:(e,t,r)=>iw(e,t)||n.get(e,t,r),has:(e,t)=>!!iw(e,t)||n.has(e,t)}));var gp=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(S2(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function S2(n){return n.getComponent()?.type==="VERSION"}var vp="@firebase/app",sw="0.14.6";var mr=new bo("@firebase/app"),M2="@firebase/app-compat",T2="@firebase/analytics-compat",P2="@firebase/analytics",A2="@firebase/app-check-compat",O2="@firebase/app-check",N2="@firebase/auth",R2="@firebase/auth-compat",k2="@firebase/database",F2="@firebase/data-connect",V2="@firebase/database-compat",L2="@firebase/functions",j2="@firebase/functions-compat",B2="@firebase/installations",U2="@firebase/installations-compat",$2="@firebase/messaging",z2="@firebase/messaging-compat",q2="@firebase/performance",H2="@firebase/performance-compat",G2="@firebase/remote-config",W2="@firebase/remote-config-compat",Q2="@firebase/storage",K2="@firebase/storage-compat",Y2="@firebase/firestore",J2="@firebase/ai",X2="@firebase/firestore-compat",Z2="firebase",eR="12.6.0";var yp="[DEFAULT]",tR={[vp]:"fire-core",[M2]:"fire-core-compat",[P2]:"fire-analytics",[T2]:"fire-analytics-compat",[O2]:"fire-app-check",[A2]:"fire-app-check-compat",[N2]:"fire-auth",[R2]:"fire-auth-compat",[k2]:"fire-rtdb",[F2]:"fire-data-connect",[V2]:"fire-rtdb-compat",[L2]:"fire-fn",[j2]:"fire-fn-compat",[B2]:"fire-iid",[U2]:"fire-iid-compat",[$2]:"fire-fcm",[z2]:"fire-fcm-compat",[q2]:"fire-perf",[H2]:"fire-perf-compat",[G2]:"fire-rc",[W2]:"fire-rc-compat",[Q2]:"fire-gcs",[K2]:"fire-gcs-compat",[Y2]:"fire-fst",[X2]:"fire-fst-compat",[J2]:"fire-vertex","fire-js":"fire-js",[Z2]:"fire-js-all"};var Bl=new Map,nR=new Map,_p=new Map;function aw(n,e){try{n.container.addComponent(e)}catch(t){mr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ys(n){let e=n.name;if(_p.has(e))return mr.debug(`There were multiple attempts to register component ${e}.`),!1;_p.set(e,n);for(let t of Bl.values())aw(t,n);for(let t of nR.values())aw(t,n);return!0}function dw(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function hw(n){return n==null?!1:n.settings!==void 0}var rR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$r=new Ks("app","Firebase",rR);var bp=class{constructor(e,t,r){this._isDeleted=!1,this._options=ee({},e),this._config=ee({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new pr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $r.create("app-deleted",{appName:this._name})}};var fw=eR;function Xs(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=ee({name:yp,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw $r.create("bad-app-name",{appName:String(i)});if(t||(t=ap()),!t)throw $r.create("no-options");let o=Bl.get(i);if(o){if(_o(t,o.options)&&_o(r,o.config))return o;throw $r.create("duplicate-app",{appName:i})}let s=new Ll(i);for(let l of _p.values())s.addComponent(l);let a=new bp(t,r,s);return Bl.set(i,a),a}function pw(n=yp){let e=Bl.get(n);if(!e&&n===yp&&ap())return Xs();if(!e)throw $r.create("no-app",{appName:n});return e}function zr(n,e,t){let r=tR[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mr.warn(s.join(" "));return}Ys(new pr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var iR="firebase-heartbeat-database",oR=1,Js="firebase-heartbeat-store",mp=null;function mw(){return mp||(mp=ow(iR,oR,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Js)}catch(t){console.warn(t)}}}}).catch(n=>{throw $r.create("idb-open",{originalErrorMessage:n.message})})),mp}function sR(n){return B(this,null,function*(){try{let t=(yield mw()).transaction(Js),r=yield t.objectStore(Js).get(gw(n));return yield t.done,r}catch(e){if(e instanceof fr)mr.warn(e.message);else{let t=$r.create("idb-get",{originalErrorMessage:e?.message});mr.warn(t.message)}}})}function cw(n,e){return B(this,null,function*(){try{let r=(yield mw()).transaction(Js,"readwrite");yield r.objectStore(Js).put(e,gw(n)),yield r.done}catch(t){if(t instanceof fr)mr.warn(t.message);else{let r=$r.create("idb-set",{originalErrorMessage:t?.message});mr.warn(r.message)}}})}function gw(n){return`${n.name}!${n.options.appId}`}var aR=1024,cR=30,Cp=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new wp(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return B(this,null,function*(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=lw();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>cR){let i=uR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){mr.warn(e)}})}getHeartbeatsHeader(){return B(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=lw(),{heartbeatsToSend:t,unsentEntries:r}=lR(this._heartbeatsCache.heartbeats),i=Qs(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return mr.warn(e),""}})}};function lw(){return new Date().toISOString().substring(0,10)}function lR(n,e=aR){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),uw(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),uw(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var wp=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return B(this,null,function*(){return cp()?XC().then(()=>!0).catch(()=>!1):!1})}read(){return B(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield sR(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return B(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return cw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return B(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return cw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function uw(n){return Qs(JSON.stringify({version:2,heartbeats:n})).length}function uR(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function dR(n){Ys(new pr("platform-logger",e=>new gp(e),"PRIVATE")),Ys(new pr("heartbeat",e=>new Cp(e),"PRIVATE")),zr(vp,sw,n),zr(vp,sw,"esm2020"),zr("fire-js","")}dR("");var hR="firebase",fR="12.6.0";zr(hR,fR,"app");var vw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},yw={};var gr,xp;(function(){var n;function e(M,w){function E(){}E.prototype=w.prototype,M.F=w.prototype,M.prototype=new E,M.prototype.constructor=M,M.D=function(T,S,A){for(var x=Array(arguments.length-2),Pt=2;Pt<arguments.length;Pt++)x[Pt-2]=arguments[Pt];return w.prototype[S].apply(T,x)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,w,E){E||(E=0);let T=Array(16);if(typeof w=="string")for(var S=0;S<16;++S)T[S]=w.charCodeAt(E++)|w.charCodeAt(E++)<<8|w.charCodeAt(E++)<<16|w.charCodeAt(E++)<<24;else for(S=0;S<16;++S)T[S]=w[E++]|w[E++]<<8|w[E++]<<16|w[E++]<<24;w=M.g[0],E=M.g[1],S=M.g[2];let A=M.g[3],x;x=w+(A^E&(S^A))+T[0]+3614090360&4294967295,w=E+(x<<7&4294967295|x>>>25),x=A+(S^w&(E^S))+T[1]+3905402710&4294967295,A=w+(x<<12&4294967295|x>>>20),x=S+(E^A&(w^E))+T[2]+606105819&4294967295,S=A+(x<<17&4294967295|x>>>15),x=E+(w^S&(A^w))+T[3]+3250441966&4294967295,E=S+(x<<22&4294967295|x>>>10),x=w+(A^E&(S^A))+T[4]+4118548399&4294967295,w=E+(x<<7&4294967295|x>>>25),x=A+(S^w&(E^S))+T[5]+1200080426&4294967295,A=w+(x<<12&4294967295|x>>>20),x=S+(E^A&(w^E))+T[6]+2821735955&4294967295,S=A+(x<<17&4294967295|x>>>15),x=E+(w^S&(A^w))+T[7]+4249261313&4294967295,E=S+(x<<22&4294967295|x>>>10),x=w+(A^E&(S^A))+T[8]+1770035416&4294967295,w=E+(x<<7&4294967295|x>>>25),x=A+(S^w&(E^S))+T[9]+2336552879&4294967295,A=w+(x<<12&4294967295|x>>>20),x=S+(E^A&(w^E))+T[10]+4294925233&4294967295,S=A+(x<<17&4294967295|x>>>15),x=E+(w^S&(A^w))+T[11]+2304563134&4294967295,E=S+(x<<22&4294967295|x>>>10),x=w+(A^E&(S^A))+T[12]+1804603682&4294967295,w=E+(x<<7&4294967295|x>>>25),x=A+(S^w&(E^S))+T[13]+4254626195&4294967295,A=w+(x<<12&4294967295|x>>>20),x=S+(E^A&(w^E))+T[14]+2792965006&4294967295,S=A+(x<<17&4294967295|x>>>15),x=E+(w^S&(A^w))+T[15]+1236535329&4294967295,E=S+(x<<22&4294967295|x>>>10),x=w+(S^A&(E^S))+T[1]+4129170786&4294967295,w=E+(x<<5&4294967295|x>>>27),x=A+(E^S&(w^E))+T[6]+3225465664&4294967295,A=w+(x<<9&4294967295|x>>>23),x=S+(w^E&(A^w))+T[11]+643717713&4294967295,S=A+(x<<14&4294967295|x>>>18),x=E+(A^w&(S^A))+T[0]+3921069994&4294967295,E=S+(x<<20&4294967295|x>>>12),x=w+(S^A&(E^S))+T[5]+3593408605&4294967295,w=E+(x<<5&4294967295|x>>>27),x=A+(E^S&(w^E))+T[10]+38016083&4294967295,A=w+(x<<9&4294967295|x>>>23),x=S+(w^E&(A^w))+T[15]+3634488961&4294967295,S=A+(x<<14&4294967295|x>>>18),x=E+(A^w&(S^A))+T[4]+3889429448&4294967295,E=S+(x<<20&4294967295|x>>>12),x=w+(S^A&(E^S))+T[9]+568446438&4294967295,w=E+(x<<5&4294967295|x>>>27),x=A+(E^S&(w^E))+T[14]+3275163606&4294967295,A=w+(x<<9&4294967295|x>>>23),x=S+(w^E&(A^w))+T[3]+4107603335&4294967295,S=A+(x<<14&4294967295|x>>>18),x=E+(A^w&(S^A))+T[8]+1163531501&4294967295,E=S+(x<<20&4294967295|x>>>12),x=w+(S^A&(E^S))+T[13]+2850285829&4294967295,w=E+(x<<5&4294967295|x>>>27),x=A+(E^S&(w^E))+T[2]+4243563512&4294967295,A=w+(x<<9&4294967295|x>>>23),x=S+(w^E&(A^w))+T[7]+1735328473&4294967295,S=A+(x<<14&4294967295|x>>>18),x=E+(A^w&(S^A))+T[12]+2368359562&4294967295,E=S+(x<<20&4294967295|x>>>12),x=w+(E^S^A)+T[5]+4294588738&4294967295,w=E+(x<<4&4294967295|x>>>28),x=A+(w^E^S)+T[8]+2272392833&4294967295,A=w+(x<<11&4294967295|x>>>21),x=S+(A^w^E)+T[11]+1839030562&4294967295,S=A+(x<<16&4294967295|x>>>16),x=E+(S^A^w)+T[14]+4259657740&4294967295,E=S+(x<<23&4294967295|x>>>9),x=w+(E^S^A)+T[1]+2763975236&4294967295,w=E+(x<<4&4294967295|x>>>28),x=A+(w^E^S)+T[4]+1272893353&4294967295,A=w+(x<<11&4294967295|x>>>21),x=S+(A^w^E)+T[7]+4139469664&4294967295,S=A+(x<<16&4294967295|x>>>16),x=E+(S^A^w)+T[10]+3200236656&4294967295,E=S+(x<<23&4294967295|x>>>9),x=w+(E^S^A)+T[13]+681279174&4294967295,w=E+(x<<4&4294967295|x>>>28),x=A+(w^E^S)+T[0]+3936430074&4294967295,A=w+(x<<11&4294967295|x>>>21),x=S+(A^w^E)+T[3]+3572445317&4294967295,S=A+(x<<16&4294967295|x>>>16),x=E+(S^A^w)+T[6]+76029189&4294967295,E=S+(x<<23&4294967295|x>>>9),x=w+(E^S^A)+T[9]+3654602809&4294967295,w=E+(x<<4&4294967295|x>>>28),x=A+(w^E^S)+T[12]+3873151461&4294967295,A=w+(x<<11&4294967295|x>>>21),x=S+(A^w^E)+T[15]+530742520&4294967295,S=A+(x<<16&4294967295|x>>>16),x=E+(S^A^w)+T[2]+3299628645&4294967295,E=S+(x<<23&4294967295|x>>>9),x=w+(S^(E|~A))+T[0]+4096336452&4294967295,w=E+(x<<6&4294967295|x>>>26),x=A+(E^(w|~S))+T[7]+1126891415&4294967295,A=w+(x<<10&4294967295|x>>>22),x=S+(w^(A|~E))+T[14]+2878612391&4294967295,S=A+(x<<15&4294967295|x>>>17),x=E+(A^(S|~w))+T[5]+4237533241&4294967295,E=S+(x<<21&4294967295|x>>>11),x=w+(S^(E|~A))+T[12]+1700485571&4294967295,w=E+(x<<6&4294967295|x>>>26),x=A+(E^(w|~S))+T[3]+2399980690&4294967295,A=w+(x<<10&4294967295|x>>>22),x=S+(w^(A|~E))+T[10]+4293915773&4294967295,S=A+(x<<15&4294967295|x>>>17),x=E+(A^(S|~w))+T[1]+2240044497&4294967295,E=S+(x<<21&4294967295|x>>>11),x=w+(S^(E|~A))+T[8]+1873313359&4294967295,w=E+(x<<6&4294967295|x>>>26),x=A+(E^(w|~S))+T[15]+4264355552&4294967295,A=w+(x<<10&4294967295|x>>>22),x=S+(w^(A|~E))+T[6]+2734768916&4294967295,S=A+(x<<15&4294967295|x>>>17),x=E+(A^(S|~w))+T[13]+1309151649&4294967295,E=S+(x<<21&4294967295|x>>>11),x=w+(S^(E|~A))+T[4]+4149444226&4294967295,w=E+(x<<6&4294967295|x>>>26),x=A+(E^(w|~S))+T[11]+3174756917&4294967295,A=w+(x<<10&4294967295|x>>>22),x=S+(w^(A|~E))+T[2]+718787259&4294967295,S=A+(x<<15&4294967295|x>>>17),x=E+(A^(S|~w))+T[9]+3951481745&4294967295,M.g[0]=M.g[0]+w&4294967295,M.g[1]=M.g[1]+(S+(x<<21&4294967295|x>>>11))&4294967295,M.g[2]=M.g[2]+S&4294967295,M.g[3]=M.g[3]+A&4294967295}r.prototype.v=function(M,w){w===void 0&&(w=M.length);let E=w-this.blockSize,T=this.C,S=this.h,A=0;for(;A<w;){if(S==0)for(;A<=E;)i(this,M,A),A+=this.blockSize;if(typeof M=="string"){for(;A<w;)if(T[S++]=M.charCodeAt(A++),S==this.blockSize){i(this,T),S=0;break}}else for(;A<w;)if(T[S++]=M[A++],S==this.blockSize){i(this,T),S=0;break}}this.h=S,this.o+=w},r.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var w=1;w<M.length-8;++w)M[w]=0;w=this.o*8;for(var E=M.length-8;E<M.length;++E)M[E]=w&255,w/=256;for(this.v(M),M=Array(16),w=0,E=0;E<4;++E)for(let T=0;T<32;T+=8)M[w++]=this.g[E]>>>T&255;return M};function o(M,w){var E=a;return Object.prototype.hasOwnProperty.call(E,M)?E[M]:E[M]=w(M)}function s(M,w){this.h=w;let E=[],T=!0;for(let S=M.length-1;S>=0;S--){let A=M[S]|0;T&&A==w||(E[S]=A,T=!1)}this.g=E}var a={};function l(M){return-128<=M&&M<128?o(M,function(w){return new s([w|0],w<0?-1:0)}):new s([M|0],M<0?-1:0)}function u(M){if(isNaN(M)||!isFinite(M))return v;if(M<0)return F(u(-M));let w=[],E=1;for(let T=0;M>=E;T++)w[T]=M/E|0,E*=4294967296;return new s(w,0)}function p(M,w){if(M.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(M.charAt(0)=="-")return F(p(M.substring(1),w));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');let E=u(Math.pow(w,8)),T=v;for(let A=0;A<M.length;A+=8){var S=Math.min(8,M.length-A);let x=parseInt(M.substring(A,A+S),w);S<8?(S=u(Math.pow(w,S)),T=T.j(S).add(u(x))):(T=T.j(E),T=T.add(u(x)))}return T}var v=l(0),b=l(1),C=l(16777216);n=s.prototype,n.m=function(){if(V(this))return-F(this).m();let M=0,w=1;for(let E=0;E<this.g.length;E++){let T=this.i(E);M+=(T>=0?T:4294967296+T)*w,w*=4294967296}return M},n.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(O(this))return"0";if(V(this))return"-"+F(this).toString(M);let w=u(Math.pow(M,6));var E=this;let T="";for(;;){let S=Se(E,w).g;E=W(E,S.j(w));let A=((E.g.length>0?E.g[0]:E.h)>>>0).toString(M);if(E=S,O(E))return A+T;for(;A.length<6;)A="0"+A;T=A+T}},n.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function O(M){if(M.h!=0)return!1;for(let w=0;w<M.g.length;w++)if(M.g[w]!=0)return!1;return!0}function V(M){return M.h==-1}n.l=function(M){return M=W(this,M),V(M)?-1:O(M)?0:1};function F(M){let w=M.g.length,E=[];for(let T=0;T<w;T++)E[T]=~M.g[T];return new s(E,~M.h).add(b)}n.abs=function(){return V(this)?F(this):this},n.add=function(M){let w=Math.max(this.g.length,M.g.length),E=[],T=0;for(let S=0;S<=w;S++){let A=T+(this.i(S)&65535)+(M.i(S)&65535),x=(A>>>16)+(this.i(S)>>>16)+(M.i(S)>>>16);T=x>>>16,A&=65535,x&=65535,E[S]=x<<16|A}return new s(E,E[E.length-1]&-2147483648?-1:0)};function W(M,w){return M.add(F(w))}n.j=function(M){if(O(this)||O(M))return v;if(V(this))return V(M)?F(this).j(F(M)):F(F(this).j(M));if(V(M))return F(this.j(F(M)));if(this.l(C)<0&&M.l(C)<0)return u(this.m()*M.m());let w=this.g.length+M.g.length,E=[];for(var T=0;T<2*w;T++)E[T]=0;for(T=0;T<this.g.length;T++)for(let S=0;S<M.g.length;S++){let A=this.i(T)>>>16,x=this.i(T)&65535,Pt=M.i(S)>>>16,Dr=M.i(S)&65535;E[2*T+2*S]+=x*Dr,ie(E,2*T+2*S),E[2*T+2*S+1]+=A*Dr,ie(E,2*T+2*S+1),E[2*T+2*S+1]+=x*Pt,ie(E,2*T+2*S+1),E[2*T+2*S+2]+=A*Pt,ie(E,2*T+2*S+2)}for(M=0;M<w;M++)E[M]=E[2*M+1]<<16|E[2*M];for(M=w;M<2*w;M++)E[M]=0;return new s(E,0)};function ie(M,w){for(;(M[w]&65535)!=M[w];)M[w+1]+=M[w]>>>16,M[w]&=65535,w++}function X(M,w){this.g=M,this.h=w}function Se(M,w){if(O(w))throw Error("division by zero");if(O(M))return new X(v,v);if(V(M))return w=Se(F(M),w),new X(F(w.g),F(w.h));if(V(w))return w=Se(M,F(w)),new X(F(w.g),w.h);if(M.g.length>30){if(V(M)||V(w))throw Error("slowDivide_ only works with positive integers.");for(var E=b,T=w;T.l(M)<=0;)E=Le(E),T=Le(T);var S=Me(E,1),A=Me(T,1);for(T=Me(T,2),E=Me(E,2);!O(T);){var x=A.add(T);x.l(M)<=0&&(S=S.add(E),A=x),T=Me(T,1),E=Me(E,1)}return w=W(M,S.j(w)),new X(S,w)}for(S=v;M.l(w)>=0;){for(E=Math.max(1,Math.floor(M.m()/w.m())),T=Math.ceil(Math.log(E)/Math.LN2),T=T<=48?1:Math.pow(2,T-48),A=u(E),x=A.j(w);V(x)||x.l(M)>0;)E-=T,A=u(E),x=A.j(w);O(A)&&(A=b),S=S.add(A),M=W(M,x)}return new X(S,M)}n.B=function(M){return Se(this,M).h},n.and=function(M){let w=Math.max(this.g.length,M.g.length),E=[];for(let T=0;T<w;T++)E[T]=this.i(T)&M.i(T);return new s(E,this.h&M.h)},n.or=function(M){let w=Math.max(this.g.length,M.g.length),E=[];for(let T=0;T<w;T++)E[T]=this.i(T)|M.i(T);return new s(E,this.h|M.h)},n.xor=function(M){let w=Math.max(this.g.length,M.g.length),E=[];for(let T=0;T<w;T++)E[T]=this.i(T)^M.i(T);return new s(E,this.h^M.h)};function Le(M){let w=M.g.length+1,E=[];for(let T=0;T<w;T++)E[T]=M.i(T)<<1|M.i(T-1)>>>31;return new s(E,M.h)}function Me(M,w){let E=w>>5;w%=32;let T=M.g.length-E,S=[];for(let A=0;A<T;A++)S[A]=w>0?M.i(A+E)>>>w|M.i(A+E+1)<<32-w:M.i(A+E);return new s(S,M.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,xp=yw.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=p,gr=yw.Integer=s}).apply(typeof vw<"u"?vw:typeof self<"u"?self:typeof window<"u"?window:{});var Ul=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},vr={};var Ep,pR,Co,Ip,Zs,$l,Dp,Sp,Mp;(function(){var n,e=Object.defineProperty;function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ul=="object"&&Ul];for(var d=0;d<c.length;++d){var m=c[d];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var m=r;c=c.split(".");for(var _=0;_<c.length-1;_++){var P=c[_];if(!(P in m))break e;m=m[P]}c=c[c.length-1],_=m[c],d=d(_),d!=_&&d!=null&&e(m,c,{configurable:!0,writable:!0,value:d})}}i("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(c){return c||function(d){var m=[],_;for(_ in d)Object.prototype.hasOwnProperty.call(d,_)&&m.push([_,d[_]]);return m}});var o=o||{},s=this||self;function a(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function l(c,d,m){return c.call.apply(c.bind,arguments)}function u(c,d,m){return u=l,u.apply(null,arguments)}function p(c,d){var m=Array.prototype.slice.call(arguments,1);return function(){var _=m.slice();return _.push.apply(_,arguments),c.apply(this,_)}}function v(c,d){function m(){}m.prototype=d.prototype,c.Z=d.prototype,c.prototype=new m,c.prototype.constructor=c,c.Ob=function(_,P,N){for(var H=Array(arguments.length-2),he=2;he<arguments.length;he++)H[he-2]=arguments[he];return d.prototype[P].apply(_,H)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function C(c){let d=c.length;if(d>0){let m=Array(d);for(let _=0;_<d;_++)m[_]=c[_];return m}return[]}function O(c,d){for(let _=1;_<arguments.length;_++){let P=arguments[_];var m=typeof P;if(m=m!="object"?m:P?Array.isArray(P)?"array":m:"null",m=="array"||m=="object"&&typeof P.length=="number"){m=c.length||0;let N=P.length||0;c.length=m+N;for(let H=0;H<N;H++)c[m+H]=P[H]}else c.push(P)}}class V{constructor(d,m){this.i=d,this.j=m,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function F(c){s.setTimeout(()=>{throw c},0)}function W(){var c=M;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class ie{constructor(){this.h=this.g=null}add(d,m){let _=X.get();_.set(d,m),this.h?this.h.next=_:this.g=_,this.h=_}}var X=new V(()=>new Se,c=>c.reset());class Se{constructor(){this.next=this.g=this.h=null}set(d,m){this.h=d,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Le,Me=!1,M=new ie,w=()=>{let c=Promise.resolve(void 0);Le=()=>{c.then(E)}};function E(){for(var c;c=W();){try{c.h.call(c.g)}catch(m){F(m)}var d=X;d.j(c),d.h<100&&(d.h++,c.next=d.g,d.g=c)}Me=!1}function T(){this.u=this.u,this.C=this.C}T.prototype.u=!1,T.prototype.dispose=function(){this.u||(this.u=!0,this.N())},T.prototype[Symbol.dispose]=function(){this.dispose()},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function S(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}S.prototype.h=function(){this.defaultPrevented=!0};var A=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let m=()=>{};s.addEventListener("test",m,d),s.removeEventListener("test",m,d)}catch{}return c}();function x(c){return/^[\s\xa0]*$/.test(c)}function Pt(c,d){S.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,d)}v(Pt,S),Pt.prototype.init=function(c,d){let m=this.type=c.type,_=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget,d||(m=="mouseover"?d=c.fromElement:m=="mouseout"&&(d=c.toElement)),this.relatedTarget=d,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Pt.Z.h.call(this)},Pt.prototype.h=function(){Pt.Z.h.call(this);let c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Dr="closure_listenable_"+(Math.random()*1e6|0),WE=0;function QE(c,d,m,_,P){this.listener=c,this.proxy=null,this.src=d,this.type=m,this.capture=!!_,this.ha=P,this.key=++WE,this.da=this.fa=!1}function Da(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Sa(c,d,m){for(let _ in c)d.call(m,c[_],_,c)}function KE(c,d){for(let m in c)d.call(void 0,c[m],m,c)}function Wg(c){let d={};for(let m in c)d[m]=c[m];return d}let Qg="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Kg(c,d){let m,_;for(let P=1;P<arguments.length;P++){_=arguments[P];for(m in _)c[m]=_[m];for(let N=0;N<Qg.length;N++)m=Qg[N],Object.prototype.hasOwnProperty.call(_,m)&&(c[m]=_[m])}}function Ma(c){this.src=c,this.g={},this.h=0}Ma.prototype.add=function(c,d,m,_,P){let N=c.toString();c=this.g[N],c||(c=this.g[N]=[],this.h++);let H=zu(c,d,_,P);return H>-1?(d=c[H],m||(d.fa=!1)):(d=new QE(d,this.src,N,!!_,P),d.fa=m,c.push(d)),d};function $u(c,d){let m=d.type;if(m in c.g){var _=c.g[m],P=Array.prototype.indexOf.call(_,d,void 0),N;(N=P>=0)&&Array.prototype.splice.call(_,P,1),N&&(Da(d),c.g[m].length==0&&(delete c.g[m],c.h--))}}function zu(c,d,m,_){for(let P=0;P<c.length;++P){let N=c[P];if(!N.da&&N.listener==d&&N.capture==!!m&&N.ha==_)return P}return-1}var qu="closure_lm_"+(Math.random()*1e6|0),Hu={};function Yg(c,d,m,_,P){if(_&&_.once)return Xg(c,d,m,_,P);if(Array.isArray(d)){for(let N=0;N<d.length;N++)Yg(c,d[N],m,_,P);return null}return m=Ku(m),c&&c[Dr]?c.J(d,m,a(_)?!!_.capture:!!_,P):Jg(c,d,m,!1,_,P)}function Jg(c,d,m,_,P,N){if(!d)throw Error("Invalid event type");let H=a(P)?!!P.capture:!!P,he=Wu(c);if(he||(c[qu]=he=new Ma(c)),m=he.add(d,m,_,H,N),m.proxy)return m;if(_=YE(),m.proxy=_,_.src=c,_.listener=m,c.addEventListener)A||(P=H),P===void 0&&(P=!1),c.addEventListener(d.toString(),_,P);else if(c.attachEvent)c.attachEvent(e0(d.toString()),_);else if(c.addListener&&c.removeListener)c.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return m}function YE(){function c(m){return d.call(c.src,c.listener,m)}let d=JE;return c}function Xg(c,d,m,_,P){if(Array.isArray(d)){for(let N=0;N<d.length;N++)Xg(c,d[N],m,_,P);return null}return m=Ku(m),c&&c[Dr]?c.K(d,m,a(_)?!!_.capture:!!_,P):Jg(c,d,m,!0,_,P)}function Zg(c,d,m,_,P){if(Array.isArray(d))for(var N=0;N<d.length;N++)Zg(c,d[N],m,_,P);else _=a(_)?!!_.capture:!!_,m=Ku(m),c&&c[Dr]?(c=c.i,N=String(d).toString(),N in c.g&&(d=c.g[N],m=zu(d,m,_,P),m>-1&&(Da(d[m]),Array.prototype.splice.call(d,m,1),d.length==0&&(delete c.g[N],c.h--)))):c&&(c=Wu(c))&&(d=c.g[d.toString()],c=-1,d&&(c=zu(d,m,_,P)),(m=c>-1?d[c]:null)&&Gu(m))}function Gu(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Dr])$u(d.i,c);else{var m=c.type,_=c.proxy;d.removeEventListener?d.removeEventListener(m,_,c.capture):d.detachEvent?d.detachEvent(e0(m),_):d.addListener&&d.removeListener&&d.removeListener(_),(m=Wu(d))?($u(m,c),m.h==0&&(m.src=null,d[qu]=null)):Da(c)}}}function e0(c){return c in Hu?Hu[c]:Hu[c]="on"+c}function JE(c,d){if(c.da)c=!0;else{d=new Pt(d,this);let m=c.listener,_=c.ha||c.src;c.fa&&Gu(c),c=m.call(_,d)}return c}function Wu(c){return c=c[qu],c instanceof Ma?c:null}var Qu="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ku(c){return typeof c=="function"?c:(c[Qu]||(c[Qu]=function(d){return c.handleEvent(d)}),c[Qu])}function bt(){T.call(this),this.i=new Ma(this),this.M=this,this.G=null}v(bt,T),bt.prototype[Dr]=!0,bt.prototype.removeEventListener=function(c,d,m,_){Zg(this,c,d,m,_)};function It(c,d){var m,_=c.G;if(_)for(m=[];_;_=_.G)m.push(_);if(c=c.M,_=d.type||d,typeof d=="string")d=new S(d,c);else if(d instanceof S)d.target=d.target||c;else{var P=d;d=new S(_,c),Kg(d,P)}P=!0;let N,H;if(m)for(H=m.length-1;H>=0;H--)N=d.g=m[H],P=Ta(N,_,!0,d)&&P;if(N=d.g=c,P=Ta(N,_,!0,d)&&P,P=Ta(N,_,!1,d)&&P,m)for(H=0;H<m.length;H++)N=d.g=m[H],P=Ta(N,_,!1,d)&&P}bt.prototype.N=function(){if(bt.Z.N.call(this),this.i){var c=this.i;for(let d in c.g){let m=c.g[d];for(let _=0;_<m.length;_++)Da(m[_]);delete c.g[d],c.h--}}this.G=null},bt.prototype.J=function(c,d,m,_){return this.i.add(String(c),d,!1,m,_)},bt.prototype.K=function(c,d,m,_){return this.i.add(String(c),d,!0,m,_)};function Ta(c,d,m,_){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();let P=!0;for(let N=0;N<d.length;++N){let H=d[N];if(H&&!H.da&&H.capture==m){let he=H.listener,dt=H.ha||H.src;H.fa&&$u(c.i,H),P=he.call(dt,_)!==!1&&P}}return P&&!_.defaultPrevented}function XE(c,d){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=u(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:s.setTimeout(c,d||0)}function t0(c){c.g=XE(()=>{c.g=null,c.i&&(c.i=!1,t0(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class ZE extends T{constructor(d,m){super(),this.m=d,this.l=m,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:t0(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wo(c){T.call(this),this.h=c,this.g={}}v(Wo,T);var n0=[];function r0(c){Sa(c.g,function(d,m){this.g.hasOwnProperty(m)&&Gu(d)},c),c.g={}}Wo.prototype.N=function(){Wo.Z.N.call(this),r0(this)},Wo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yu=s.JSON.stringify,e1=s.JSON.parse,t1=class{stringify(c){return s.JSON.stringify(c,void 0)}parse(c){return s.JSON.parse(c,void 0)}};function i0(){}function o0(){}var Qo={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ju(){S.call(this,"d")}v(Ju,S);function Xu(){S.call(this,"c")}v(Xu,S);var ei={},s0=null;function Pa(){return s0=s0||new bt}ei.Ia="serverreachability";function a0(c){S.call(this,ei.Ia,c)}v(a0,S);function Ko(c){let d=Pa();It(d,new a0(d))}ei.STAT_EVENT="statevent";function c0(c,d){S.call(this,ei.STAT_EVENT,c),this.stat=d}v(c0,S);function Dt(c){let d=Pa();It(d,new c0(d,c))}ei.Ja="timingevent";function l0(c,d){S.call(this,ei.Ja,c),this.size=d}v(l0,S);function Yo(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){c()},d)}function Jo(){this.g=!0}Jo.prototype.ua=function(){this.g=!1};function n1(c,d,m,_,P,N){c.info(function(){if(c.g)if(N){var H="",he=N.split("&");for(let Fe=0;Fe<he.length;Fe++){var dt=he[Fe].split("=");if(dt.length>1){let ht=dt[0];dt=dt[1];let Tn=ht.split("_");H=Tn.length>=2&&Tn[1]=="type"?H+(ht+"="+dt+"&"):H+(ht+"=redacted&")}}}else H=null;else H=N;return"XMLHTTP REQ ("+_+") [attempt "+P+"]: "+d+`
`+m+`
`+H})}function r1(c,d,m,_,P,N,H){c.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+P+"]: "+d+`
`+m+`
`+N+" "+H})}function $i(c,d,m,_){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+o1(c,m)+(_?" "+_:"")})}function i1(c,d){c.info(function(){return"TIMEOUT: "+d})}Jo.prototype.info=function(){};function o1(c,d){if(!c.g)return d;if(!d)return null;try{let N=JSON.parse(d);if(N){for(c=0;c<N.length;c++)if(Array.isArray(N[c])){var m=N[c];if(!(m.length<2)){var _=m[1];if(Array.isArray(_)&&!(_.length<1)){var P=_[0];if(P!="noop"&&P!="stop"&&P!="close")for(let H=1;H<_.length;H++)_[H]=""}}}}return Yu(N)}catch{return d}}var Aa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},u0={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},d0;function Zu(){}v(Zu,i0),Zu.prototype.g=function(){return new XMLHttpRequest},d0=new Zu;function Xo(c){return encodeURIComponent(String(c))}function s1(c){var d=1;c=c.split(":");let m=[];for(;d>0&&c.length;)m.push(c.shift()),d--;return c.length&&m.push(c.join(":")),m}function Sr(c,d,m,_){this.j=c,this.i=d,this.l=m,this.S=_||1,this.V=new Wo(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new h0}function h0(){this.i=null,this.g="",this.h=!1}var f0={},ed={};function td(c,d,m){c.M=1,c.A=Na(Mn(d)),c.u=m,c.R=!0,p0(c,null)}function p0(c,d){c.F=Date.now(),Oa(c),c.B=Mn(c.A);var m=c.B,_=c.S;Array.isArray(_)||(_=[String(_)]),S0(m.i,"t",_),c.C=0,m=c.j.L,c.h=new h0,c.g=H0(c.j,m?d:null,!c.u),c.P>0&&(c.O=new ZE(u(c.Y,c,c.g),c.P)),d=c.V,m=c.g,_=c.ba;var P="readystatechange";Array.isArray(P)||(P&&(n0[0]=P.toString()),P=n0);for(let N=0;N<P.length;N++){let H=Yg(m,P[N],_||d.handleEvent,!1,d.h||d);if(!H)break;d.g[H.key]=H}d=c.J?Wg(c.J):{},c.u?(c.v||(c.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,d)):(c.v="GET",c.g.ea(c.B,c.v,null,d)),Ko(),n1(c.i,c.v,c.B,c.l,c.S,c.u)}Sr.prototype.ba=function(c){c=c.target;let d=this.O;d&&Pr(c)==3?d.j():this.Y(c)},Sr.prototype.Y=function(c){try{if(c==this.g)e:{let he=Pr(this.g),dt=this.g.ya(),Fe=this.g.ca();if(!(he<3)&&(he!=3||this.g&&(this.h.h||this.g.la()||R0(this.g)))){this.K||he!=4||dt==7||(dt==8||Fe<=0?Ko(3):Ko(2)),nd(this);var d=this.g.ca();this.X=d;var m=a1(this);if(this.o=d==200,r1(this.i,this.v,this.B,this.l,this.S,he,d),this.o){if(this.U&&!this.L){t:{if(this.g){var _,P=this.g;if((_=P.g?P.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(_)){var N=_;break t}}N=null}if(c=N)$i(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,rd(this,c);else{this.o=!1,this.m=3,Dt(12),ti(this),Zo(this);break e}}if(this.R){c=!0;let ht;for(;!this.K&&this.C<m.length;)if(ht=c1(this,m),ht==ed){he==4&&(this.m=4,Dt(14),c=!1),$i(this.i,this.l,null,"[Incomplete Response]");break}else if(ht==f0){this.m=4,Dt(15),$i(this.i,this.l,m,"[Invalid Chunk]"),c=!1;break}else $i(this.i,this.l,ht,null),rd(this,ht);if(m0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),he!=4||m.length!=0||this.h.h||(this.m=1,Dt(16),c=!1),this.o=this.o&&c,!c)$i(this.i,this.l,m,"[Invalid Chunked Response]"),ti(this),Zo(this);else if(m.length>0&&!this.W){this.W=!0;var H=this.j;H.g==this&&H.aa&&!H.P&&(H.j.info("Great, no buffering proxy detected. Bytes received: "+m.length),ud(H),H.P=!0,Dt(11))}}else $i(this.i,this.l,m,null),rd(this,m);he==4&&ti(this),this.o&&!this.K&&(he==4?U0(this.j,this):(this.o=!1,Oa(this)))}else w1(this.g),d==400&&m.indexOf("Unknown SID")>0?(this.m=3,Dt(12)):(this.m=0,Dt(13)),ti(this),Zo(this)}}}catch{}finally{}};function a1(c){if(!m0(c))return c.g.la();let d=R0(c.g);if(d==="")return"";let m="",_=d.length,P=Pr(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return ti(c),Zo(c),"";c.h.i=new s.TextDecoder}for(let N=0;N<_;N++)c.h.h=!0,m+=c.h.i.decode(d[N],{stream:!(P&&N==_-1)});return d.length=0,c.h.g+=m,c.C=0,c.h.g}function m0(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function c1(c,d){var m=c.C,_=d.indexOf(`
`,m);return _==-1?ed:(m=Number(d.substring(m,_)),isNaN(m)?f0:(_+=1,_+m>d.length?ed:(d=d.slice(_,_+m),c.C=_+m,d)))}Sr.prototype.cancel=function(){this.K=!0,ti(this)};function Oa(c){c.T=Date.now()+c.H,g0(c,c.H)}function g0(c,d){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Yo(u(c.aa,c),d)}function nd(c){c.D&&(s.clearTimeout(c.D),c.D=null)}Sr.prototype.aa=function(){this.D=null;let c=Date.now();c-this.T>=0?(i1(this.i,this.B),this.M!=2&&(Ko(),Dt(17)),ti(this),this.m=2,Zo(this)):g0(this,this.T-c)};function Zo(c){c.j.I==0||c.K||U0(c.j,c)}function ti(c){nd(c);var d=c.O;d&&typeof d.dispose=="function"&&d.dispose(),c.O=null,r0(c.V),c.g&&(d=c.g,c.g=null,d.abort(),d.dispose())}function rd(c,d){try{var m=c.j;if(m.I!=0&&(m.g==c||id(m.h,c))){if(!c.L&&id(m.h,c)&&m.I==3){try{var _=m.Ba.g.parse(d)}catch{_=null}if(Array.isArray(_)&&_.length==3){var P=_;if(P[0]==0){e:if(!m.v){if(m.g)if(m.g.F+3e3<c.F)ja(m),Va(m);else break e;ld(m),Dt(18)}}else m.xa=P[1],0<m.xa-m.K&&P[2]<37500&&m.F&&m.A==0&&!m.C&&(m.C=Yo(u(m.Va,m),6e3));_0(m.h)<=1&&m.ta&&(m.ta=void 0)}else ri(m,11)}else if((c.L||m.g==c)&&ja(m),!x(d))for(P=m.Ba.g.parse(d),d=0;d<P.length;d++){let Fe=P[d],ht=Fe[0];if(!(ht<=m.K))if(m.K=ht,Fe=Fe[1],m.I==2)if(Fe[0]=="c"){m.M=Fe[1],m.ba=Fe[2];let Tn=Fe[3];Tn!=null&&(m.ka=Tn,m.j.info("VER="+m.ka));let ii=Fe[4];ii!=null&&(m.za=ii,m.j.info("SVER="+m.za));let Ar=Fe[5];Ar!=null&&typeof Ar=="number"&&Ar>0&&(_=1.5*Ar,m.O=_,m.j.info("backChannelRequestTimeoutMs_="+_)),_=m;let Or=c.g;if(Or){let Ua=Or.g?Or.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ua){var N=_.h;N.g||Ua.indexOf("spdy")==-1&&Ua.indexOf("quic")==-1&&Ua.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(od(N,N.h),N.h=null))}if(_.G){let dd=Or.g?Or.g.getResponseHeader("X-HTTP-Session-Id"):null;dd&&(_.wa=dd,Ue(_.J,_.G,dd))}}m.I=3,m.l&&m.l.ra(),m.aa&&(m.T=Date.now()-c.F,m.j.info("Handshake RTT: "+m.T+"ms")),_=m;var H=c;if(_.na=q0(_,_.L?_.ba:null,_.W),H.L){b0(_.h,H);var he=H,dt=_.O;dt&&(he.H=dt),he.D&&(nd(he),Oa(he)),_.g=H}else j0(_);m.i.length>0&&La(m)}else Fe[0]!="stop"&&Fe[0]!="close"||ri(m,7);else m.I==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?ri(m,7):cd(m):Fe[0]!="noop"&&m.l&&m.l.qa(Fe),m.A=0)}}Ko(4)}catch{}}var l1=class{constructor(c,d){this.g=c,this.map=d}};function v0(c){this.l=c||10,s.PerformanceNavigationTiming?(c=s.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function y0(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function _0(c){return c.h?1:c.g?c.g.size:0}function id(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function od(c,d){c.g?c.g.add(d):c.h=d}function b0(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}v0.prototype.cancel=function(){if(this.i=C0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function C0(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let m of c.g.values())d=d.concat(m.G);return d}return C(c.i)}var w0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function u1(c,d){if(c){c=c.split("&");for(let m=0;m<c.length;m++){let _=c[m].indexOf("="),P,N=null;_>=0?(P=c[m].substring(0,_),N=c[m].substring(_+1)):P=c[m],d(P,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function Mr(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;c instanceof Mr?(this.l=c.l,es(this,c.j),this.o=c.o,this.g=c.g,ts(this,c.u),this.h=c.h,sd(this,M0(c.i)),this.m=c.m):c&&(d=String(c).match(w0))?(this.l=!1,es(this,d[1]||"",!0),this.o=ns(d[2]||""),this.g=ns(d[3]||"",!0),ts(this,d[4]),this.h=ns(d[5]||"",!0),sd(this,d[6]||"",!0),this.m=ns(d[7]||"")):(this.l=!1,this.i=new is(null,this.l))}Mr.prototype.toString=function(){let c=[];var d=this.j;d&&c.push(rs(d,x0,!0),":");var m=this.g;return(m||d=="file")&&(c.push("//"),(d=this.o)&&c.push(rs(d,x0,!0),"@"),c.push(Xo(m).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.u,m!=null&&c.push(":",String(m))),(m=this.h)&&(this.g&&m.charAt(0)!="/"&&c.push("/"),c.push(rs(m,m.charAt(0)=="/"?f1:h1,!0))),(m=this.i.toString())&&c.push("?",m),(m=this.m)&&c.push("#",rs(m,m1)),c.join("")},Mr.prototype.resolve=function(c){let d=Mn(this),m=!!c.j;m?es(d,c.j):m=!!c.o,m?d.o=c.o:m=!!c.g,m?d.g=c.g:m=c.u!=null;var _=c.h;if(m)ts(d,c.u);else if(m=!!c.h){if(_.charAt(0)!="/")if(this.g&&!this.h)_="/"+_;else{var P=d.h.lastIndexOf("/");P!=-1&&(_=d.h.slice(0,P+1)+_)}if(P=_,P==".."||P==".")_="";else if(P.indexOf("./")!=-1||P.indexOf("/.")!=-1){_=P.lastIndexOf("/",0)==0,P=P.split("/");let N=[];for(let H=0;H<P.length;){let he=P[H++];he=="."?_&&H==P.length&&N.push(""):he==".."?((N.length>1||N.length==1&&N[0]!="")&&N.pop(),_&&H==P.length&&N.push("")):(N.push(he),_=!0)}_=N.join("/")}else _=P}return m?d.h=_:m=c.i.toString()!=="",m?sd(d,M0(c.i)):m=!!c.m,m&&(d.m=c.m),d};function Mn(c){return new Mr(c)}function es(c,d,m){c.j=m?ns(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function ts(c,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);c.u=d}else c.u=null}function sd(c,d,m){d instanceof is?(c.i=d,g1(c.i,c.l)):(m||(d=rs(d,p1)),c.i=new is(d,c.l))}function Ue(c,d,m){c.i.set(d,m)}function Na(c){return Ue(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function ns(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function rs(c,d,m){return typeof c=="string"?(c=encodeURI(c).replace(d,d1),m&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function d1(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var x0=/[#\/\?@]/g,h1=/[#\?:]/g,f1=/[#\?]/g,p1=/[#\?@]/g,m1=/#/g;function is(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function ni(c){c.g||(c.g=new Map,c.h=0,c.i&&u1(c.i,function(d,m){c.add(decodeURIComponent(d.replace(/\+/g," ")),m)}))}n=is.prototype,n.add=function(c,d){ni(this),this.i=null,c=zi(this,c);let m=this.g.get(c);return m||this.g.set(c,m=[]),m.push(d),this.h+=1,this};function E0(c,d){ni(c),d=zi(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function I0(c,d){return ni(c),d=zi(c,d),c.g.has(d)}n.forEach=function(c,d){ni(this),this.g.forEach(function(m,_){m.forEach(function(P){c.call(d,P,_,this)},this)},this)};function D0(c,d){ni(c);let m=[];if(typeof d=="string")I0(c,d)&&(m=m.concat(c.g.get(zi(c,d))));else for(c=Array.from(c.g.values()),d=0;d<c.length;d++)m=m.concat(c[d]);return m}n.set=function(c,d){return ni(this),this.i=null,c=zi(this,c),I0(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=D0(this,c),c.length>0?String(c[0]):d):d};function S0(c,d,m){E0(c,d),m.length>0&&(c.i=null,c.g.set(zi(c,d),C(m)),c.h+=m.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(let _=0;_<d.length;_++){var m=d[_];let P=Xo(m);m=D0(this,m);for(let N=0;N<m.length;N++){let H=P;m[N]!==""&&(H+="="+Xo(m[N])),c.push(H)}}return this.i=c.join("&")};function M0(c){let d=new is;return d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),d}function zi(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function g1(c,d){d&&!c.j&&(ni(c),c.i=null,c.g.forEach(function(m,_){let P=_.toLowerCase();_!=P&&(E0(this,_),S0(this,P,m))},c)),c.j=d}function v1(c,d){let m=new Jo;if(s.Image){let _=new Image;_.onload=p(Tr,m,"TestLoadImage: loaded",!0,d,_),_.onerror=p(Tr,m,"TestLoadImage: error",!1,d,_),_.onabort=p(Tr,m,"TestLoadImage: abort",!1,d,_),_.ontimeout=p(Tr,m,"TestLoadImage: timeout",!1,d,_),s.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=c}else d(!1)}function y1(c,d){let m=new Jo,_=new AbortController,P=setTimeout(()=>{_.abort(),Tr(m,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:_.signal}).then(N=>{clearTimeout(P),N.ok?Tr(m,"TestPingServer: ok",!0,d):Tr(m,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(P),Tr(m,"TestPingServer: error",!1,d)})}function Tr(c,d,m,_,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),_(m)}catch{}}function _1(){this.g=new t1}function Ra(c){this.i=c.Sb||null,this.h=c.ab||!1}v(Ra,i0),Ra.prototype.g=function(){return new ka(this.i,this.h)};function ka(c,d){bt.call(this),this.H=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(ka,bt),n=ka.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=d,this.readyState=1,ss(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(d.body=c),(this.H||s).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,os(this)),this.readyState=0},n.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ss(this)),this.g&&(this.readyState=3,ss(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;T0(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function T0(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}n.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?os(this):ss(this),this.readyState==3&&T0(this)}},n.Oa=function(c){this.g&&(this.response=this.responseText=c,os(this))},n.Na=function(c){this.g&&(this.response=c,os(this))},n.ga=function(){this.g&&os(this)};function os(c){c.readyState=4,c.l=null,c.j=null,c.B=null,ss(c)}n.setRequestHeader=function(c,d){this.A.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var m=d.next();!m.done;)m=m.value,c.push(m[0]+": "+m[1]),m=d.next();return c.join(`\r
`)};function ss(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ka.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function P0(c){let d="";return Sa(c,function(m,_){d+=_,d+=":",d+=m,d+=`\r
`}),d}function ad(c,d,m){e:{for(_ in m){var _=!1;break e}_=!0}_||(m=P0(m),typeof c=="string"?m!=null&&Xo(m):Ue(c,d,m))}function Ke(c){bt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(Ke,bt);var b1=/^https?$/i,C1=["POST","PUT"];n=Ke.prototype,n.Fa=function(c){this.H=c},n.ea=function(c,d,m,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():d0.g(),this.g.onreadystatechange=b(u(this.Ca,this));try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(N){A0(this,N);return}if(c=m||"",m=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var P in _)m.set(P,_[P]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(let N of _.keys())m.set(N,_.get(N));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(m.keys()).find(N=>N.toLowerCase()=="content-type"),P=s.FormData&&c instanceof s.FormData,!(Array.prototype.indexOf.call(C1,d,void 0)>=0)||_||P||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[N,H]of m)this.g.setRequestHeader(N,H);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(N){A0(this,N)}};function A0(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.o=5,O0(c),Fa(c)}function O0(c){c.A||(c.A=!0,It(c,"complete"),It(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,It(this,"complete"),It(this,"abort"),Fa(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fa(this,!0)),Ke.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?N0(this):this.Xa())},n.Xa=function(){N0(this)};function N0(c){if(c.h&&typeof o<"u"){if(c.v&&Pr(c)==4)setTimeout(c.Ca.bind(c),0);else if(It(c,"readystatechange"),Pr(c)==4){c.h=!1;try{let N=c.ca();e:switch(N){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var m;if(!(m=d)){var _;if(_=N===0){let H=String(c.D).match(w0)[1]||null;!H&&s.self&&s.self.location&&(H=s.self.location.protocol.slice(0,-1)),_=!b1.test(H?H.toLowerCase():"")}m=_}if(m)It(c,"complete"),It(c,"success");else{c.o=6;try{var P=Pr(c)>2?c.g.statusText:""}catch{P=""}c.l=P+" ["+c.ca()+"]",O0(c)}}finally{Fa(c)}}}}function Fa(c,d){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);let m=c.g;c.g=null,d||It(c,"ready");try{m.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Pr(c){return c.g?c.g.readyState:0}n.ca=function(){try{return Pr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),e1(d)}};function R0(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function w1(c){let d={};c=(c.g&&Pr(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<c.length;_++){if(x(c[_]))continue;var m=s1(c[_]);let P=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();let N=d[P]||[];d[P]=N,N.push(m)}KE(d,function(_){return _.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function as(c,d,m){return m&&m.internalChannelParams&&m.internalChannelParams[c]||d}function k0(c){this.za=0,this.i=[],this.j=new Jo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=as("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=as("baseRetryDelayMs",5e3,c),this.Za=as("retryDelaySeedMs",1e4,c),this.Ta=as("forwardChannelMaxRetries",2,c),this.va=as("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new v0(c&&c.concurrentRequestLimit),this.Ba=new _1,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=k0.prototype,n.ka=8,n.I=1,n.connect=function(c,d,m,_){Dt(0),this.W=c,this.H=d||{},m&&_!==void 0&&(this.H.OSID=m,this.H.OAID=_),this.F=this.X,this.J=q0(this,null,this.W),La(this)};function cd(c){if(F0(c),c.I==3){var d=c.V++,m=Mn(c.J);if(Ue(m,"SID",c.M),Ue(m,"RID",d),Ue(m,"TYPE","terminate"),cs(c,m),d=new Sr(c,c.j,d),d.M=2,d.A=Na(Mn(m)),m=!1,s.navigator&&s.navigator.sendBeacon)try{m=s.navigator.sendBeacon(d.A.toString(),"")}catch{}!m&&s.Image&&(new Image().src=d.A,m=!0),m||(d.g=H0(d.j,null),d.g.ea(d.A)),d.F=Date.now(),Oa(d)}z0(c)}function Va(c){c.g&&(ud(c),c.g.cancel(),c.g=null)}function F0(c){Va(c),c.v&&(s.clearTimeout(c.v),c.v=null),ja(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&s.clearTimeout(c.m),c.m=null)}function La(c){if(!y0(c.h)&&!c.m){c.m=!0;var d=c.Ea;Le||w(),Me||(Le(),Me=!0),M.add(d,c),c.D=0}}function x1(c,d){return _0(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=d.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Yo(u(c.Ea,c,d),$0(c,c.D)),c.D++,!0)}n.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;let P=new Sr(this,this.j,c),N=this.o;if(this.U&&(N?(N=Wg(N),Kg(N,this.U)):N=this.U),this.u!==null||this.R||(P.J=N,N=null),this.S)e:{for(var d=0,m=0;m<this.i.length;m++){t:{var _=this.i[m];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(d+=_,d>4096){d=m;break e}if(d===4096||m===this.i.length-1){d=m+1;break e}}d=1e3}else d=1e3;d=L0(this,P,d),m=Mn(this.J),Ue(m,"RID",c),Ue(m,"CVER",22),this.G&&Ue(m,"X-HTTP-Session-Id",this.G),cs(this,m),N&&(this.R?d="headers="+Xo(P0(N))+"&"+d:this.u&&ad(m,this.u,N)),od(this.h,P),this.Ra&&Ue(m,"TYPE","init"),this.S?(Ue(m,"$req",d),Ue(m,"SID","null"),P.U=!0,td(P,m,null)):td(P,m,d),this.I=2}}else this.I==3&&(c?V0(this,c):this.i.length==0||y0(this.h)||V0(this))};function V0(c,d){var m;d?m=d.l:m=c.V++;let _=Mn(c.J);Ue(_,"SID",c.M),Ue(_,"RID",m),Ue(_,"AID",c.K),cs(c,_),c.u&&c.o&&ad(_,c.u,c.o),m=new Sr(c,c.j,m,c.D+1),c.u===null&&(m.J=c.o),d&&(c.i=d.G.concat(c.i)),d=L0(c,m,1e3),m.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),od(c.h,m),td(m,_,d)}function cs(c,d){c.H&&Sa(c.H,function(m,_){Ue(d,_,m)}),c.l&&Sa({},function(m,_){Ue(d,_,m)})}function L0(c,d,m){m=Math.min(c.i.length,m);let _=c.l?u(c.l.Ka,c.l,c):null;e:{var P=c.i;let he=-1;for(;;){let dt=["count="+m];he==-1?m>0?(he=P[0].g,dt.push("ofs="+he)):he=0:dt.push("ofs="+he);let Fe=!0;for(let ht=0;ht<m;ht++){var N=P[ht].g;let Tn=P[ht].map;if(N-=he,N<0)he=Math.max(0,P[ht].g-100),Fe=!1;else try{N="req"+N+"_"||"";try{var H=Tn instanceof Map?Tn:Object.entries(Tn);for(let[ii,Ar]of H){let Or=Ar;a(Ar)&&(Or=Yu(Ar)),dt.push(N+ii+"="+encodeURIComponent(Or))}}catch(ii){throw dt.push(N+"type="+encodeURIComponent("_badmap")),ii}}catch{_&&_(Tn)}}if(Fe){H=dt.join("&");break e}}H=void 0}return c=c.i.splice(0,m),d.G=c,H}function j0(c){if(!c.g&&!c.v){c.Y=1;var d=c.Da;Le||w(),Me||(Le(),Me=!0),M.add(d,c),c.A=0}}function ld(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Yo(u(c.Da,c),$0(c,c.A)),c.A++,!0)}n.Da=function(){if(this.v=null,B0(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Yo(u(this.Wa,this),c)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Dt(10),Va(this),B0(this))};function ud(c){c.B!=null&&(s.clearTimeout(c.B),c.B=null)}function B0(c){c.g=new Sr(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var d=Mn(c.na);Ue(d,"RID","rpc"),Ue(d,"SID",c.M),Ue(d,"AID",c.K),Ue(d,"CI",c.F?"0":"1"),!c.F&&c.ia&&Ue(d,"TO",c.ia),Ue(d,"TYPE","xmlhttp"),cs(c,d),c.u&&c.o&&ad(d,c.u,c.o),c.O&&(c.g.H=c.O);var m=c.g;c=c.ba,m.M=1,m.A=Na(Mn(d)),m.u=null,m.R=!0,p0(m,c)}n.Va=function(){this.C!=null&&(this.C=null,Va(this),ld(this),Dt(19))};function ja(c){c.C!=null&&(s.clearTimeout(c.C),c.C=null)}function U0(c,d){var m=null;if(c.g==d){ja(c),ud(c),c.g=null;var _=2}else if(id(c.h,d))m=d.G,b0(c.h,d),_=1;else return;if(c.I!=0){if(d.o)if(_==1){m=d.u?d.u.length:0,d=Date.now()-d.F;var P=c.D;_=Pa(),It(_,new l0(_,m)),La(c)}else j0(c);else if(P=d.m,P==3||P==0&&d.X>0||!(_==1&&x1(c,d)||_==2&&ld(c)))switch(m&&m.length>0&&(d=c.h,d.i=d.i.concat(m)),P){case 1:ri(c,5);break;case 4:ri(c,10);break;case 3:ri(c,6);break;default:ri(c,2)}}}function $0(c,d){let m=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(m*=2),m*d}function ri(c,d){if(c.j.info("Error code "+d),d==2){var m=u(c.bb,c),_=c.Ua;let P=!_;_=new Mr(_||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||es(_,"https"),Na(_),P?v1(_.toString(),m):y1(_.toString(),m)}else Dt(2);c.I=0,c.l&&c.l.pa(d),z0(c),F0(c)}n.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function z0(c){if(c.I=0,c.ja=[],c.l){let d=C0(c.h);(d.length!=0||c.i.length!=0)&&(O(c.ja,d),O(c.ja,c.i),c.h.i.length=0,C(c.i),c.i.length=0),c.l.oa()}}function q0(c,d,m){var _=m instanceof Mr?Mn(m):new Mr(m);if(_.g!="")d&&(_.g=d+"."+_.g),ts(_,_.u);else{var P=s.location;_=P.protocol,d=d?d+"."+P.hostname:P.hostname,P=+P.port;let N=new Mr(null);_&&es(N,_),d&&(N.g=d),P&&ts(N,P),m&&(N.h=m),_=N}return m=c.G,d=c.wa,m&&d&&Ue(_,m,d),Ue(_,"VER",c.ka),cs(c,_),_}function H0(c,d,m){if(d&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Aa&&!c.ma?new Ke(new Ra({ab:m})):new Ke(c.ma),d.Fa(c.L),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function G0(){}n=G0.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ba(){}Ba.prototype.g=function(c,d){return new jt(c,d)};function jt(c,d){bt.call(this),this.g=new k0(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(c?c["X-WebChannel-Client-Profile"]=d.sa:c={"X-WebChannel-Client-Profile":d.sa}),this.g.U=c,(c=d&&d.Qb)&&!x(c)&&(this.g.u=c),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!x(d)&&(this.g.G=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new qi(this)}v(jt,bt),jt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},jt.prototype.close=function(){cd(this.g)},jt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var m={};m.__data__=c,c=m}else this.v&&(m={},m.__data__=Yu(c),c=m);d.i.push(new l1(d.Ya++,c)),d.I==3&&La(d)},jt.prototype.N=function(){this.g.l=null,delete this.j,cd(this.g),delete this.g,jt.Z.N.call(this)};function W0(c){Ju.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let m in d){c=m;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}v(W0,Ju);function Q0(){Xu.call(this),this.status=1}v(Q0,Xu);function qi(c){this.g=c}v(qi,G0),qi.prototype.ra=function(){It(this.g,"a")},qi.prototype.qa=function(c){It(this.g,new W0(c))},qi.prototype.pa=function(c){It(this.g,new Q0)},qi.prototype.oa=function(){It(this.g,"b")},Ba.prototype.createWebChannel=Ba.prototype.g,jt.prototype.send=jt.prototype.o,jt.prototype.open=jt.prototype.m,jt.prototype.close=jt.prototype.close,Mp=vr.createWebChannelTransport=function(){return new Ba},Sp=vr.getStatEventTarget=function(){return Pa()},Dp=vr.Event=ei,$l=vr.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Aa.NO_ERROR=0,Aa.TIMEOUT=8,Aa.HTTP_ERROR=6,Zs=vr.ErrorCode=Aa,u0.COMPLETE="complete",Ip=vr.EventType=u0,o0.EventType=Qo,Qo.OPEN="a",Qo.CLOSE="b",Qo.ERROR="c",Qo.MESSAGE="d",bt.prototype.listen=bt.prototype.J,Co=vr.WebChannel=o0,pR=vr.FetchXmlHttpFactory=Ra,Ke.prototype.listenOnce=Ke.prototype.K,Ke.prototype.getLastError=Ke.prototype.Ha,Ke.prototype.getLastErrorCode=Ke.prototype.ya,Ke.prototype.getStatus=Ke.prototype.ca,Ke.prototype.getResponseJson=Ke.prototype.La,Ke.prototype.getResponseText=Ke.prototype.la,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Fa,Ep=vr.XhrIo=Ke}).apply(typeof Ul<"u"?Ul:typeof self<"u"?self:typeof window<"u"?window:{});var _w="@firebase/firestore",bw="4.9.2";var pt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");var zo="12.3.0";var Ni=new bo("@firebase/firestore");function wo(){return Ni.logLevel}function K(n,...e){if(Ni.logLevel<=Ie.DEBUG){let t=e.map(Cg);Ni.debug(`Firestore (${zo}): ${n}`,...t)}}function _r(n,...e){if(Ni.logLevel<=Ie.ERROR){let t=e.map(Cg);Ni.error(`Firestore (${zo}): ${n}`,...t)}}function Po(n,...e){if(Ni.logLevel<=Ie.WARN){let t=e.map(Cg);Ni.warn(`Firestore (${zo}): ${n}`,...t)}}function Cg(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function re(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,dx(n,r,t)}function dx(n,e,t){let r=`FIRESTORE (${zo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw _r(r),new Error(r)}function Oe(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||dx(e,i,r)}function ce(n,e){return n}var L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},G=class extends fr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var yr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Kl=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},kp=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(pt.UNAUTHENTICATED))}shutdown(){}},Fp=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Vp=class{constructor(e){this.t=e,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Oe(this.o===void 0,42304);let r=this.i,i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve(),o=new yr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new yr,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let l=o;e.enqueueRetryable(()=>B(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},a=l=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?a(l):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new yr)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Oe(typeof r.accessToken=="string",31837,{l:r}),new Kl(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string",2055,{h:e}),new pt(e)}},Lp=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},jp=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Lp(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Yl=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Bp=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hw(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Oe(this.o===void 0,3512);let r=o=>{o.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,K("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Yl(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Oe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Yl(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function mR(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var oa=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=mR(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function Ce(n,e){return n<e?-1:n>e?1:0}function Up(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),o=e.charAt(r);if(i!==o)return Tp(i)===Tp(o)?Ce(i,o):Tp(i)?1:-1}return Ce(n.length,e.length)}var gR=55296,vR=57343;function Tp(n){let e=n.charCodeAt(0);return e>=gR&&e<=vR}function Ao(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Cw="__name__",Jl=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&re(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&re(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Ce(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):Up(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return gr.fromString(e.substring(4,e.length-2))}},We=class n extends Jl{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new G(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},yR=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Xt=class n extends Jl{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return yR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Cw}static keyField(){return new n([Cw])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new G(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new G(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new G(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new G(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ne=class n{constructor(e){this.path=e}static fromPath(e){return new n(We.fromString(e))}static fromName(e){return new n(We.fromString(e).popFirst(5))}static empty(){return new n(We.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&We.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return We.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new We(e.slice()))}};function hx(n,e,t){if(!t)throw new G(L.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function _R(n,e,t,r){if(e===!0&&r===!0)throw new G(L.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ww(n){if(!ne.isDocumentKey(n))throw new G(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function xw(n){if(ne.isDocumentKey(n))throw new G(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function fx(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Tu(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":re(12329,{type:typeof n})}function En(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new G(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Tu(n);throw new G(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function bR(n,e){if(e<=0)throw new G(L.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function lt(n,e){let t={typeString:n};return e&&(t.value=e),t}function va(n,e){if(!fx(n))throw new G(L.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new G(L.INVALID_ARGUMENT,t);return!0}var Ew=-62135596800,Iw=1e6,ut=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Iw);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new G(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new G(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ew)throw new G(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Iw}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(va(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-Ew;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};ut._jsonSchemaVersion="firestore/timestamp/1.0",ut._jsonSchema={type:lt("string",ut._jsonSchemaVersion),seconds:lt("number"),nanoseconds:lt("number")};var le=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new ut(0,0))}static max(){return new n(new ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var sa=-1,$p=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};$p.UNKNOWN_ID=-1;function CR(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=le.fromTimestamp(r===1e9?new ut(t+1,0):new ut(t,r));return new Ri(i,ne.empty(),e)}function wR(n){return new Ri(n.readTime,n.key,sa)}var Ri=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(le.min(),ne.empty(),sa)}static max(){return new n(le.max(),ne.empty(),sa)}};function xR(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ne.comparator(n.documentKey,e.documentKey),t!==0?t:Ce(n.largestBatchId,e.largestBatchId))}var ER="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",zp=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function qo(n){return B(this,null,function*(){if(n.code!==L.FAILED_PRECONDITION||n.message!==ER)throw n;K("LocalStore","Unexpectedly lost primary lease")})}var $=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},l=>r(l))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let l=0;l<o;l++){let u=l;t(e[u]).next(p=>{s[u]=p,++a,a===o&&r(s)},p=>i(p))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function IR(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ho(n){return n.name==="IndexedDbTransactionError"}var wg=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),xg=-1;function Pu(n){return n==null}function aa(n){return n===0&&1/n==-1/0}function DR(n){return typeof n=="number"&&Number.isInteger(n)&&!aa(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var px="";function SR(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Dw(e)),e=MR(n.get(t),e);return Dw(e)}function MR(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case px:t+="";break;default:t+=o}}return t}function Dw(n){return n+px+""}var TR="remoteDocuments",mx="owner";var gx="mutationQueues";var vx="mutations";var yx="documentMutations",PR="remoteDocumentsV14";var _x="remoteDocumentGlobal";var bx="targets";var Cx="targetDocuments";var wx="targetGlobal",xx="collectionParents";var Ex="clientMetadata";var Ix="bundles";var Dx="namedQueries";var AR="indexConfiguration";var OR="indexState";var NR="indexEntries";var Sx="documentOverlays";var RR="globals";var kR=[gx,vx,yx,TR,bx,mx,wx,Cx,Ex,_x,xx,Ix,Dx],SB=[...kR,Sx],FR=[gx,vx,yx,PR,bx,mx,wx,Cx,Ex,_x,xx,Ix,Dx,Sx],VR=FR,LR=[...VR,AR,OR,NR];var MB=[...LR,RR];function Sw(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Zr(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Mx(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Je=class n{constructor(e,t){this.comparator=e,this.root=t||Gn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Do(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Do(this.root,e,this.comparator,!1)}getReverseIterator(){return new Do(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Do(this.root,e,this.comparator,!0)}},Do=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Gn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw re(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw re(27949);return e+(this.isRed()?0:1)}};Gn.EMPTY=null,Gn.RED=!0,Gn.BLACK=!1;Gn.EMPTY=new class{constructor(){this.size=0}get key(){throw re(57766)}get value(){throw re(16141)}get color(){throw re(16727)}get left(){throw re(29726)}get right(){throw re(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Gn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var mt=class n{constructor(e){this.comparator=e,this.data=new Je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Xl(this.data.getIterator())}getIteratorFrom(e){return new Xl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Xl=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var un=class n{constructor(e){this.fields=e,e.sort(Xt.comparator)}static empty(){return new n([])}unionWith(e){let t=new mt(Xt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ao(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Zl=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Et=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Zl("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Et.EMPTY_BYTE_STRING=new Et("");var jR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function br(n){if(Oe(!!n,39018),typeof n=="string"){let e=0,t=jR.exec(n);if(Oe(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ge(n.seconds),nanos:Ge(n.nanos)}}function Ge(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Cr(n){return typeof n=="string"?Et.fromBase64String(n):Et.fromUint8Array(n)}var Tx="server_timestamp",Px="__type__",Ax="__previous_value__",Ox="__local_write_time__";function Eg(n){return(n?.mapValue?.fields||{})[Px]?.stringValue===Tx}function Au(n){let e=n.mapValue.fields[Ax];return Eg(e)?Au(e):e}function ca(n){let e=br(n.mapValue.fields[Ox].timestampValue);return new ut(e.seconds,e.nanos)}var qp=class{constructor(e,t,r,i,o,s,a,l,u,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=p}},eu="(default)",tu=class n{constructor(e,t){this.projectId=e,this.database=t||eu}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===eu}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Ig="__type__",Nx="__max__",zl={mapValue:{fields:{__type__:{stringValue:Nx}}}},Dg="__vector__",Oo="value";function Qr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Eg(n)?4:kx(n)?9007199254740991:Rx(n)?10:11:re(28295,{value:n})}function Kn(n,e){if(n===e)return!0;let t=Qr(n);if(t!==Qr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ca(n).isEqual(ca(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=br(i.timestampValue),a=br(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Cr(i.bytesValue).isEqual(Cr(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Ge(i.geoPointValue.latitude)===Ge(o.geoPointValue.latitude)&&Ge(i.geoPointValue.longitude)===Ge(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ge(i.integerValue)===Ge(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ge(i.doubleValue),a=Ge(o.doubleValue);return s===a?aa(s)===aa(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Ao(n.arrayValue.values||[],e.arrayValue.values||[],Kn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(Sw(s)!==Sw(a))return!1;for(let l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!Kn(s[l],a[l])))return!1;return!0}(n,e);default:return re(52216,{left:n})}}function la(n,e){return(n.values||[]).find(t=>Kn(t,e))!==void 0}function No(n,e){if(n===e)return 0;let t=Qr(n),r=Qr(e);if(t!==r)return Ce(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ce(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Ge(o.integerValue||o.doubleValue),l=Ge(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return Mw(n.timestampValue,e.timestampValue);case 4:return Mw(ca(n),ca(e));case 5:return Up(n.stringValue,e.stringValue);case 6:return function(o,s){let a=Cr(o),l=Cr(s);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),l=s.split("/");for(let u=0;u<a.length&&u<l.length;u++){let p=Ce(a[u],l[u]);if(p!==0)return p}return Ce(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=Ce(Ge(o.latitude),Ge(s.latitude));return a!==0?a:Ce(Ge(o.longitude),Ge(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Tw(n.arrayValue,e.arrayValue);case 10:return function(o,s){let a=o.fields||{},l=s.fields||{},u=a[Oo]?.arrayValue,p=l[Oo]?.arrayValue,v=Ce(u?.values?.length||0,p?.values?.length||0);return v!==0?v:Tw(u,p)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===zl.mapValue&&s===zl.mapValue)return 0;if(o===zl.mapValue)return 1;if(s===zl.mapValue)return-1;let a=o.fields||{},l=Object.keys(a),u=s.fields||{},p=Object.keys(u);l.sort(),p.sort();for(let v=0;v<l.length&&v<p.length;++v){let b=Up(l[v],p[v]);if(b!==0)return b;let C=No(a[l[v]],u[p[v]]);if(C!==0)return C}return Ce(l.length,p.length)}(n.mapValue,e.mapValue);default:throw re(23264,{he:t})}}function Mw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ce(n,e);let t=br(n),r=br(e),i=Ce(t.seconds,r.seconds);return i!==0?i:Ce(t.nanos,r.nanos)}function Tw(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=No(t[i],r[i]);if(o)return o}return Ce(t.length,r.length)}function Ro(n){return Hp(n)}function Hp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=br(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Cr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ne.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Hp(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Hp(t.fields[s])}`;return i+"}"}(n.mapValue):re(61005,{value:n})}function Gl(n){switch(Qr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Au(n);return e?16+Gl(e):16;case 5:return 2*n.stringValue.length;case 6:return Cr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Gl(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Zr(r.fields,(o,s)=>{i+=o.length+Gl(s)}),i}(n.mapValue);default:throw re(13486,{value:n})}}function Pw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Gp(n){return!!n&&"integerValue"in n}function Sg(n){return!!n&&"arrayValue"in n}function Aw(n){return!!n&&"nullValue"in n}function Ow(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Wl(n){return!!n&&"mapValue"in n}function Rx(n){return(n?.mapValue?.fields||{})[Ig]?.stringValue===Dg}function ta(n){if(n.geoPointValue)return{geoPointValue:ee({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:ee({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Zr(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ta(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ta(n.arrayValue.values[t]);return e}return ee({},n)}function kx(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Nx}var PB={mapValue:{fields:{[Ig]:{stringValue:Dg},[Oo]:{arrayValue:{}}}}};var Jt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Wl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ta(t)}setAll(e){let t=Xt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=ta(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Wl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Kn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Wl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Zr(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(ta(this.value))}};function Fx(n){let e=[];return Zr(n.fields,(t,r)=>{let i=new Xt([t]);if(Wl(r)){let o=Fx(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new un(e)}var In=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,le.min(),le.min(),le.min(),Jt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,le.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,le.min(),le.min(),Jt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,le.min(),le.min(),Jt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ko=class{constructor(e,t){this.position=e,this.inclusive=t}};function Nw(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=ne.comparator(ne.fromName(s.referenceValue),t.key):r=No(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Rw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Kn(n.position[t],e.position[t]))return!1;return!0}var ki=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function BR(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var nu=class{},ct=class n extends nu{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Qp(e,t,r):t==="array-contains"?new Jp(e,r):t==="in"?new Xp(e,r):t==="not-in"?new Zp(e,r):t==="array-contains-any"?new em(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Kp(e,r):new Yp(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(No(t,this.value)):t!==null&&Qr(this.value)===Qr(t)&&this.matchesComparison(No(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Dn=class n extends nu{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return Vx(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function Vx(n){return n.op==="and"}function Lx(n){return UR(n)&&Vx(n)}function UR(n){for(let e of n.filters)if(e instanceof Dn)return!1;return!0}function Wp(n){if(n instanceof ct)return n.field.canonicalString()+n.op.toString()+Ro(n.value);if(Lx(n))return n.filters.map(e=>Wp(e)).join(",");{let e=n.filters.map(t=>Wp(t)).join(",");return`${n.op}(${e})`}}function jx(n,e){return n instanceof ct?function(r,i){return i instanceof ct&&r.op===i.op&&r.field.isEqual(i.field)&&Kn(r.value,i.value)}(n,e):n instanceof Dn?function(r,i){return i instanceof Dn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&jx(s,i.filters[a]),!0):!1}(n,e):void re(19439)}function Bx(n){return n instanceof ct?function(t){return`${t.field.canonicalString()} ${t.op} ${Ro(t.value)}`}(n):n instanceof Dn?function(t){return t.op.toString()+" {"+t.getFilters().map(Bx).join(" ,")+"}"}(n):"Filter"}var Qp=class extends ct{constructor(e,t,r){super(e,t,r),this.key=ne.fromName(r.referenceValue)}matches(e){let t=ne.comparator(e.key,this.key);return this.matchesComparison(t)}},Kp=class extends ct{constructor(e,t){super(e,"in",t),this.keys=Ux("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Yp=class extends ct{constructor(e,t){super(e,"not-in",t),this.keys=Ux("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Ux(n,e){return(e.arrayValue?.values||[]).map(t=>ne.fromName(t.referenceValue))}var Jp=class extends ct{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Sg(t)&&la(t.arrayValue,this.value)}},Xp=class extends ct{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&la(this.value.arrayValue,t)}},Zp=class extends ct{constructor(e,t){super(e,"not-in",t)}matches(e){if(la(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!la(this.value.arrayValue,t)}},em=class extends ct{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Sg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>la(this.value.arrayValue,r))}};var tm=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Te=null}};function kw(n,e=null,t=[],r=[],i=null,o=null,s=null){return new tm(n,e,t,r,i,o,s)}function Mg(n){let e=ce(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Wp(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Pu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ro(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ro(r)).join(",")),e.Te=t}return e.Te}function Tg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!BR(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!jx(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Rw(n.startAt,e.startAt)&&Rw(n.endAt,e.endAt)}function nm(n){return ne.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Kr=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function $R(n,e,t,r,i,o,s,a){return new Kr(n,e,t,r,i,o,s,a)}function Pg(n){return new Kr(n)}function Fw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function $x(n){return n.collectionGroup!==null}function na(n){let e=ce(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new mt(Xt.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new ki(o,r))}),t.has(Xt.keyField().canonicalString())||e.Ie.push(new ki(Xt.keyField(),r))}return e.Ie}function Wn(n){let e=ce(n);return e.Ee||(e.Ee=zR(e,na(n))),e.Ee}function zR(n,e){if(n.limitType==="F")return kw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ki(i.field,o)});let t=n.endAt?new ko(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ko(n.startAt.position,n.startAt.inclusive):null;return kw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function rm(n,e){let t=n.filters.concat([e]);return new Kr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ru(n,e,t){return new Kr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ou(n,e){return Tg(Wn(n),Wn(e))&&n.limitType===e.limitType}function zx(n){return`${Mg(Wn(n))}|lt:${n.limitType}`}function xo(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Bx(i)).join(", ")}]`),Pu(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Ro(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Ro(i)).join(",")),`Target(${r})`}(Wn(n))}; limitType=${n.limitType})`}function Nu(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ne.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of na(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,l){let u=Nw(s,a,l);return s.inclusive?u<=0:u<0}(r.startAt,na(r),i)||r.endAt&&!function(s,a,l){let u=Nw(s,a,l);return s.inclusive?u>=0:u>0}(r.endAt,na(r),i))}(n,e)}function qR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function qx(n){return(e,t)=>{let r=!1;for(let i of na(n)){let o=HR(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function HR(n,e,t){let r=n.field.isKeyField()?ne.comparator(e.key,t.key):function(o,s,a){let l=s.data.field(o),u=a.data.field(o);return l!==null&&u!==null?No(l,u):re(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return re(19790,{direction:n.dir})}}var wr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Zr(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return Mx(this.inner)}size(){return this.innerSize}};var GR=new Je(ne.comparator);function xr(){return GR}var Hx=new Je(ne.comparator);function ea(...n){let e=Hx;for(let t of n)e=e.insert(t.key,t);return e}function Gx(n){let e=Hx;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ti(){return ra()}function Wx(){return ra()}function ra(){return new wr(n=>n.toString(),(n,e)=>n.isEqual(e))}var WR=new Je(ne.comparator),QR=new mt(ne.comparator);function we(...n){let e=QR;for(let t of n)e=e.add(t);return e}var KR=new mt(Ce);function YR(){return KR}function Ag(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:aa(e)?"-0":e}}function Qx(n){return{integerValue:""+n}}function JR(n,e){return DR(e)?Qx(e):Ag(n,e)}var Fo=class{constructor(){this._=void 0}};function XR(n,e,t){return n instanceof Vo?function(i,o){let s={fields:{[Px]:{stringValue:Tx},[Ox]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Eg(o)&&(o=Au(o)),o&&(s.fields[Ax]=o),{mapValue:s}}(t,e):n instanceof Fi?Yx(n,e):n instanceof Vi?Jx(n,e):function(i,o){let s=Kx(i,o),a=Vw(s)+Vw(i.Ae);return Gp(s)&&Gp(i.Ae)?Qx(a):Ag(i.serializer,a)}(n,e)}function ZR(n,e,t){return n instanceof Fi?Yx(n,e):n instanceof Vi?Jx(n,e):t}function Kx(n,e){return n instanceof Lo?function(r){return Gp(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Vo=class extends Fo{},Fi=class extends Fo{constructor(e){super(),this.elements=e}};function Yx(n,e){let t=Xx(e);for(let r of n.elements)t.some(i=>Kn(i,r))||t.push(r);return{arrayValue:{values:t}}}var Vi=class extends Fo{constructor(e){super(),this.elements=e}};function Jx(n,e){let t=Xx(e);for(let r of n.elements)t=t.filter(i=>!Kn(i,r));return{arrayValue:{values:t}}}var Lo=class extends Fo{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function Vw(n){return Ge(n.integerValue||n.doubleValue)}function Xx(n){return Sg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function ek(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Fi&&i instanceof Fi||r instanceof Vi&&i instanceof Vi?Ao(r.elements,i.elements,Kn):r instanceof Lo&&i instanceof Lo?Kn(r.Ae,i.Ae):r instanceof Vo&&i instanceof Vo}(n.transform,e.transform)}var im=class{constructor(e,t){this.version=e,this.transformResults=t}},Zt=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ql(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var jo=class{};function Zx(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Bo(n.key,Zt.none()):new Li(n.key,n.data,Zt.none());{let t=n.data,r=Jt.empty(),i=new mt(Xt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Yn(n.key,r,new un(i.toArray()),Zt.none())}}function tk(n,e,t){n instanceof Li?function(i,o,s){let a=i.value.clone(),l=jw(i.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Yn?function(i,o,s){if(!Ql(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=jw(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(eE(i)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function ia(n,e,t,r){return n instanceof Li?function(o,s,a,l){if(!Ql(o.precondition,s))return a;let u=o.value.clone(),p=Bw(o.fieldTransforms,l,s);return u.setAll(p),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof Yn?function(o,s,a,l){if(!Ql(o.precondition,s))return a;let u=Bw(o.fieldTransforms,l,s),p=s.data;return p.setAll(eE(o)),p.setAll(u),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(n,e,t,r):function(o,s,a){return Ql(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function nk(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=Kx(r.transform,i||null);o!=null&&(t===null&&(t=Jt.empty()),t.set(r.field,o))}return t||null}function Lw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ao(r,i,(o,s)=>ek(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Li=class extends jo{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Yn=class extends jo{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function eE(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function jw(n,e,t){let r=new Map;Oe(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,ZR(s,a,t[i]))}return r}function Bw(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,XR(o,s,e))}return r}var Bo=class extends jo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},om=class extends jo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var sm=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&tk(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=ia(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=ia(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Wx();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let l=Zx(s,a);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),we())}isEqual(e){return this.batchId===e.batchId&&Ao(this.mutations,e.mutations,(t,r)=>Lw(t,r))&&Ao(this.baseMutations,e.baseMutations,(t,r)=>Lw(t,r))}},am=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Oe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return WR}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var cm=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var lm=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var st,De;function rk(n){switch(n){case L.OK:return re(64938);case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0;default:return re(15467,{code:n})}}function tE(n){if(n===void 0)return _r("GRPC error has no .code"),L.UNKNOWN;switch(n){case st.OK:return L.OK;case st.CANCELLED:return L.CANCELLED;case st.UNKNOWN:return L.UNKNOWN;case st.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case st.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case st.INTERNAL:return L.INTERNAL;case st.UNAVAILABLE:return L.UNAVAILABLE;case st.UNAUTHENTICATED:return L.UNAUTHENTICATED;case st.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case st.NOT_FOUND:return L.NOT_FOUND;case st.ALREADY_EXISTS:return L.ALREADY_EXISTS;case st.PERMISSION_DENIED:return L.PERMISSION_DENIED;case st.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case st.ABORTED:return L.ABORTED;case st.OUT_OF_RANGE:return L.OUT_OF_RANGE;case st.UNIMPLEMENTED:return L.UNIMPLEMENTED;case st.DATA_LOSS:return L.DATA_LOSS;default:return re(39323,{code:n})}}(De=st||(st={}))[De.OK=0]="OK",De[De.CANCELLED=1]="CANCELLED",De[De.UNKNOWN=2]="UNKNOWN",De[De.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",De[De.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",De[De.NOT_FOUND=5]="NOT_FOUND",De[De.ALREADY_EXISTS=6]="ALREADY_EXISTS",De[De.PERMISSION_DENIED=7]="PERMISSION_DENIED",De[De.UNAUTHENTICATED=16]="UNAUTHENTICATED",De[De.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",De[De.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",De[De.ABORTED=10]="ABORTED",De[De.OUT_OF_RANGE=11]="OUT_OF_RANGE",De[De.UNIMPLEMENTED=12]="UNIMPLEMENTED",De[De.INTERNAL=13]="INTERNAL",De[De.UNAVAILABLE=14]="UNAVAILABLE",De[De.DATA_LOSS=15]="DATA_LOSS";var ik=null;function ok(){return new TextEncoder}var sk=new gr([4294967295,4294967295],0);function Uw(n){let e=ok().encode(n),t=new xp;return t.update(e),new Uint8Array(t.digest())}function $w(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new gr([t,r],0),new gr([i,o],0)]}var um=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Pi(`Invalid padding: ${t}`);if(r<0)throw new Pi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Pi(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Pi(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=gr.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(gr.fromNumber(r)));return i.compare(sk)===1&&(i=new gr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=Uw(e),[r,i]=$w(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.ge===0)return;let t=Uw(e),[r,i]=$w(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.Se(s)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Pi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var iu=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,ua.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(le.min(),i,new Je(Ce),xr(),we())}},ua=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,we(),we(),we())}};var So=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},ou=class{constructor(e,t){this.targetId=e,this.Ce=t}},su=class{constructor(e,t,r=Et.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},au=class{constructor(){this.ve=0,this.Fe=zw(),this.Me=Et.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=we(),t=we(),r=we();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:re(38017,{changeType:o})}}),new ua(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=zw()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Oe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},dm=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=xr(),this.Je=ql(),this.He=ql(),this.Ye=new Je(Ce)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:re(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let o=i.target;if(nm(o))if(r===0){let s=new ne(o.path);this.et(t,s,In.newNoDocument(s,le.min()))}else Oe(r===1,20013,{expectedCount:r});else{let s=this._t(t);if(s!==r){let a=this.ut(e),l=a?this.ct(a,e,s):1;if(l!==0){this.it(t);let u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,u)}ik?.lt(function(p,v,b,C,O){let V={localCacheCount:p,existenceFilterCount:v.count,databaseId:b.database,projectId:b.projectId},F=v.unchangedNames;return F&&(V.bloomFilter={applied:O===0,hashCount:F?.hashCount??0,bitmapLength:F?.bits?.bitmap?.length??0,padding:F?.bits?.padding??0,mightContain:W=>C?.mightContain(W)??!1}),V}(s,e.Ce,this.Ge.ht(),a,l))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Cr(r).toUint8Array()}catch(l){if(l instanceof Zl)return Po("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new um(s,i,o)}catch(l){return Po(l instanceof Pi?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Ge.ht(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.et(t,o,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((o,s)=>{let a=this.ot(s);if(a){if(o.current&&nm(a.target)){let l=new ne(a.target.path);this.It(l).has(s)||this.Et(s,l)||this.et(s,l,In.newNoDocument(l,e))}o.Be&&(t.set(s,o.ke()),o.qe())}});let r=we();this.He.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{let u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new iu(e,t,this.Ye,this.je,r);return this.je=xr(),this.Je=ql(),this.He=ql(),this.Ye=new Je(Ce),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new au,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new mt(Ce),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new mt(Ce),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||K("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new au),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function ql(){return new Je(ne.comparator)}function zw(){return new Je(ne.comparator)}var ak={asc:"ASCENDING",desc:"DESCENDING"},ck={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lk={and:"AND",or:"OR"},hm=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function fm(n,e){return n.useProto3Json||Pu(e)?e:{value:e}}function cu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function uk(n,e){return cu(n,e.toTimestamp())}function Qn(n){return Oe(!!n,49232),le.fromTimestamp(function(t){let r=br(t);return new ut(r.seconds,r.nanos)}(n))}function Og(n,e){return pm(n,e).canonicalString()}function pm(n,e){let t=function(i){return new We(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function rE(n){let e=We.fromString(n);return Oe(cE(e),10190,{key:e.toString()}),e}function mm(n,e){return Og(n.databaseId,e.path)}function Pp(n,e){let t=rE(e);if(t.get(1)!==n.databaseId.projectId)throw new G(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new G(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ne(oE(t))}function iE(n,e){return Og(n.databaseId,e)}function dk(n){let e=rE(n);return e.length===4?We.emptyPath():oE(e)}function gm(n){return new We(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function oE(n){return Oe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function qw(n,e,t){return{name:mm(n,e),fields:t.value.mapValue.fields}}function hk(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:re(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,p){return u.useProto3Json?(Oe(p===void 0||typeof p=="string",58123),Et.fromBase64String(p||"")):(Oe(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),Et.fromUint8Array(p||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let p=u.code===void 0?L.UNKNOWN:tE(u.code);return new G(p,u.message||"")}(s);t=new su(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Pp(n,r.document.name),o=Qn(r.document.updateTime),s=r.document.createTime?Qn(r.document.createTime):le.min(),a=new Jt({mapValue:{fields:r.document.fields}}),l=In.newFoundDocument(i,o,s,a),u=r.targetIds||[],p=r.removedTargetIds||[];t=new So(u,p,l.key,l)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Pp(n,r.document),o=r.readTime?Qn(r.readTime):le.min(),s=In.newNoDocument(i,o),a=r.removedTargetIds||[];t=new So([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Pp(n,r.document),o=r.removedTargetIds||[];t=new So([],o,i,null)}else{if(!("filter"in e))return re(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new lm(i,o),a=r.targetId;t=new ou(a,s)}}return t}function fk(n,e){let t;if(e instanceof Li)t={update:qw(n,e.key,e.value)};else if(e instanceof Bo)t={delete:mm(n,e.key)};else if(e instanceof Yn)t={update:qw(n,e.key,e.data),updateMask:wk(e.fieldMask)};else{if(!(e instanceof om))return re(16599,{Vt:e.type});t={verify:mm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Vo)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Fi)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Vi)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Lo)return{fieldPath:s.field.canonicalString(),increment:a.Ae};throw re(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:uk(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:re(27497)}(n,e.precondition)),t}function pk(n,e){return n&&n.length>0?(Oe(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?Qn(i.updateTime):Qn(o);return s.isEqual(le.min())&&(s=Qn(o)),new im(s,i.transformResults||[])}(t,e))):[]}function mk(n,e){return{documents:[iE(n,e.path)]}}function gk(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=iE(n,i);let o=function(u){if(u.length!==0)return aE(Dn.create(u,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(p=>function(b){return{field:Eo(b.field),direction:_k(b.dir)}}(p))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=fm(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:t,parent:i}}function vk(n){let e=dk(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Oe(r===1,65062);let p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let o=[];t.where&&(o=function(v){let b=sE(v);return b instanceof Dn&&Lx(b)?b.getFilters():[b]}(t.where));let s=[];t.orderBy&&(s=function(v){return v.map(b=>function(O){return new ki(Io(O.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction))}(b))}(t.orderBy));let a=null;t.limit&&(a=function(v){let b;return b=typeof v=="object"?v.value:v,Pu(b)?null:b}(t.limit));let l=null;t.startAt&&(l=function(v){let b=!!v.before,C=v.values||[];return new ko(C,b)}(t.startAt));let u=null;return t.endAt&&(u=function(v){let b=!v.before,C=v.values||[];return new ko(C,b)}(t.endAt)),$R(e,i,s,o,a,"F",l,u)}function yk(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function sE(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Io(t.unaryFilter.field);return ct.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Io(t.unaryFilter.field);return ct.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Io(t.unaryFilter.field);return ct.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Io(t.unaryFilter.field);return ct.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return re(61313);default:return re(60726)}}(n):n.fieldFilter!==void 0?function(t){return ct.create(Io(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return re(58110);default:return re(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Dn.create(t.compositeFilter.filters.map(r=>sE(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return re(1026)}}(t.compositeFilter.op))}(n):re(30097,{filter:n})}function _k(n){return ak[n]}function bk(n){return ck[n]}function Ck(n){return lk[n]}function Eo(n){return{fieldPath:n.canonicalString()}}function Io(n){return Xt.fromServerFormat(n.fieldPath)}function aE(n){return n instanceof ct?function(t){if(t.op==="=="){if(Ow(t.value))return{unaryFilter:{field:Eo(t.field),op:"IS_NAN"}};if(Aw(t.value))return{unaryFilter:{field:Eo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ow(t.value))return{unaryFilter:{field:Eo(t.field),op:"IS_NOT_NAN"}};if(Aw(t.value))return{unaryFilter:{field:Eo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Eo(t.field),op:bk(t.op),value:t.value}}}(n):n instanceof Dn?function(t){let r=t.getFilters().map(i=>aE(i));return r.length===1?r[0]:{compositeFilter:{op:Ck(t.op),filters:r}}}(n):re(54877,{filter:n})}function wk(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function cE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var da=class n{constructor(e,t,r,i,o=le.min(),s=le.min(),a=Et.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var vm=class{constructor(e){this.yt=e}};function xk(n){let e=vk({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ru(e,e.limit,"L"):e}var lu=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Ge(e.integerValue));else if("doubleValue"in e){let r=Ge(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),aa(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=br(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Cr(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?kx(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Rx(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):re(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=Oo,o=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Ge(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),ne.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};lu.Kt=new lu;var ym=class{constructor(){this.Cn=new _m}addToCollectionParentIndex(e,t){return this.Cn.add(t),$.resolve()}getCollectionParents(e,t){return $.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return $.resolve()}deleteFieldIndex(e,t){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,t){return $.resolve()}getDocumentsMatchingTarget(e,t){return $.resolve(null)}getIndexType(e,t){return $.resolve(0)}getFieldIndexes(e,t){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,t){return $.resolve(Ri.min())}getMinOffsetFromCollectionGroup(e,t){return $.resolve(Ri.min())}updateCollectionGroup(e,t,r){return $.resolve()}updateIndexEntries(e,t){return $.resolve()}},_m=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new mt(We.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new mt(We.comparator)).toArray()}};var AB=new Uint8Array(0);var Hw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},lE=41943040,ln=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};ln.DEFAULT_COLLECTION_PERCENTILE=10,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ln.DEFAULT=new ln(lE,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ln.DISABLED=new ln(-1,0,0);var ha=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var Gw="LruGarbageCollector",Ek=1048576;function Ww([n,e],[t,r]){let i=Ce(n,t);return i===0?Ce(e,r):i}var bm=class{constructor(e){this.Ir=e,this.buffer=new mt(Ww),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();Ww(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Cm=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){K(Gw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>B(this,null,function*(){this.Rr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ho(t)?K(Gw,"Ignoring IndexedDB error during garbage collection: ",t):yield qo(t)}yield this.Vr(3e5)}))}},wm=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return $.resolve(wg.ce);let r=new bm(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(K("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(Hw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(K("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Hw):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,s,a,l,u,p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(K("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),i=this.params.maximumSequenceNumbersToCollect):i=v,s=Date.now(),this.nthSequenceNumber(e,i))).next(v=>(r=v,a=Date.now(),this.removeTargets(e,r,t))).next(v=>(o=v,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(u=Date.now(),wo()<=Ie.DEBUG&&K("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-p}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(l-a)+`ms
	Removed ${v} documents in `+(u-l)+`ms
Total Duration: ${u-p}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:v})))}};function Ik(n,e){return new wm(n,e)}var xm=class{constructor(){this.changes=new wr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,In.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?$.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Em=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Im=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&ia(r.mutation,i,un.empty(),ut.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,we()).next(()=>r))}getLocalViewOfDocuments(e,t,r=we()){let i=Ti();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=ea();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Ti();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,we()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=xr(),s=ra(),a=function(){return ra()}();return t.forEach((l,u)=>{let p=r.get(u.key);i.has(u.key)&&(p===void 0||p.mutation instanceof Yn)?o=o.insert(u.key,u):p!==void 0?(s.set(u.key,p.mutation.getFieldMask()),ia(p.mutation,u,p.mutation.getFieldMask(),ut.now())):s.set(u.key,un.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((u,p)=>s.set(u,p)),t.forEach((u,p)=>a.set(u,new Em(p,s.get(u)??null))),a))}recalculateAndSaveOverlays(e,t){let r=ra(),i=new Je((s,a)=>s-a),o=we();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(l=>{let u=t.get(l);if(u===null)return;let p=r.get(l)||un.empty();p=a.applyToLocalView(u,p),r.set(l,p);let v=(i.get(a.batchId)||we()).add(l);i=i.insert(a.batchId,v)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let l=a.getNext(),u=l.key,p=l.value,v=Wx();p.forEach(b=>{if(!o.has(b)){let C=Zx(t.get(b),r.get(b));C!==null&&v.set(b,C),o=o.add(b)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,v))}return $.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return ne.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):$x(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):$.resolve(Ti()),a=sa,l=o;return s.next(u=>$.forEach(u,(p,v)=>(a<v.largestBatchId&&(a=v.largestBatchId),o.get(p)?$.resolve():this.remoteDocumentCache.getEntry(e,p).next(b=>{l=l.insert(p,b)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,l,u,we())).next(p=>({batchId:a,changes:Gx(p)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ne(t)).next(r=>{let i=ea();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=ea();return this.indexManager.getCollectionParents(e,o).next(a=>$.forEach(a,l=>{let u=function(v,b){return new Kr(b,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(p=>{p.forEach((v,b)=>{s=s.insert(v,b)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((l,u)=>{let p=u.getKey();s.get(p)===null&&(s=s.insert(p,In.newInvalidDocument(p)))});let a=ea();return s.forEach((l,u)=>{let p=o.get(l);p!==void 0&&ia(p.mutation,u,un.empty(),ut.now()),Nu(t,u)&&(a=a.insert(l,u))}),a})}};var Dm=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return $.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Qn(i.createTime)}}(t)),$.resolve()}getNamedQuery(e,t){return $.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(i){return{name:i.name,query:xk(i.bundledQuery),readTime:Qn(i.readTime)}}(t)),$.resolve()}};var Sm=class{constructor(){this.overlays=new Je(ne.comparator),this.qr=new Map}getOverlay(e,t){return $.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Ti();return $.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),$.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),$.resolve()}getOverlaysForCollection(e,t,r){let i=Ti(),o=t.length+1,s=new ne(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let l=a.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return $.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Je((u,p)=>u-p),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let p=o.get(u.largestBatchId);p===null&&(p=Ti(),o=o.insert(u.largestBatchId,p)),p.set(u.getKey(),u)}}let a=Ti(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,p)=>a.set(u,p)),!(a.size()>=i)););return $.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new cm(t,r));let o=this.qr.get(t);o===void 0&&(o=we(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}};var Mm=class{constructor(){this.sessionToken=Et.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,$.resolve()}};var fa=class{constructor(){this.Qr=new mt(at.$r),this.Ur=new mt(at.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new at(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new at(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new ne(new We([])),r=new at(t,e),i=new at(t,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new ne(new We([])),r=new at(t,e),i=new at(t,e+1),o=we();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new at(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},at=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ne.comparator(e.key,t.key)||Ce(e.Yr,t.Yr)}static Kr(e,t){return Ce(e.Yr,t.Yr)||ne.comparator(e.key,t.key)}};var Tm=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new mt(at.$r)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new sm(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Zr=this.Zr.add(new at(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return $.resolve(s)}lookupMutationBatch(e,t){return $.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),o=i<0?0:i;return $.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?xg:this.tr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new at(t,0),i=new at(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{let a=this.Xr(s.Yr);o.push(a)}),$.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mt(Ce);return t.forEach(i=>{let o=new at(i,0),s=new at(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],a=>{r=r.add(a.Yr)})}),$.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;ne.isDocumentKey(o)||(o=o.child(""));let s=new at(new ne(o),0),a=new mt(Ce);return this.Zr.forEachWhile(l=>{let u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Yr)),!0)},s),$.resolve(this.ti(a))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Oe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return $.forEach(t.mutations,i=>{let o=new at(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new at(t,0),i=this.Zr.firstAfterOrEqual(r);return $.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Pm=class{constructor(e){this.ri=e,this.docs=function(){return new Je(ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return $.resolve(r?r.document.mutableCopy():In.newInvalidDocument(t))}getEntries(e,t){let r=xr();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():In.newInvalidDocument(i))}),$.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=xr(),s=t.path,a=new ne(s.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){let{key:u,value:{document:p}}=l.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||xR(wR(p),r)<=0||(i.has(p.key)||Nu(t,p))&&(o=o.insert(p.key,p.mutableCopy()))}return $.resolve(o)}getAllFromCollectionGroup(e,t,r,i){re(9500)}ii(e,t){return $.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Am(this)}getSize(e){return $.resolve(this.size)}},Am=class extends xm{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),$.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var Om=class{constructor(e){this.persistence=e,this.si=new wr(t=>Mg(t),Tg),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.oi=0,this._i=new fa,this.targetCount=0,this.ai=ha.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),$.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new ha(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,$.resolve()}updateTargetData(e,t){return this.Pr(t),$.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),$.waitFor(o).next(()=>i)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return $.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),$.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),$.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),$.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return $.resolve(r)}containsKey(e,t){return $.resolve(this._i.containsKey(t))}};var uu=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new wg(0),this.li=!1,this.li=!0,this.hi=new Mm,this.referenceDelegate=e(this),this.Pi=new Om(this),this.indexManager=new ym,this.remoteDocumentCache=function(i){return new Pm(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new vm(t),this.Ii=new Dm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Sm,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new Tm(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){K("MemoryPersistence","Starting transaction:",e);let i=new Nm(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,t){return $.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},Nm=class extends zp{constructor(e){super(),this.currentSequenceNumber=e}},Rm=class n{constructor(e){this.persistence=e,this.Ri=new fa,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw re(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),$.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),$.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.fi,r=>{let i=ne.fromPath(r);return this.gi(e,i).next(o=>{o||t.removeEntry(i,le.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return $.or([()=>$.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},du=class n{constructor(e,t){this.persistence=e,this.pi=new wr(r=>SR(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Ik(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return $.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return $.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?$.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,t).next(a=>{a||(r++,o.removeEntry(s,le.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),$.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),$.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),$.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Gl(e.data.value)),t}br(e,t,r){return $.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return $.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var km=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=we(),i=we();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Fm=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Vm=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return JC()?8:IR(YC())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ys(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Fm;return this.Ss(e,t,s).next(a=>{if(o.result=a,this.Vs)return this.bs(e,t,s,a.size)})}).next(()=>o.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(wo()<=Ie.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",xo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$.resolve()):(wo()<=Ie.DEBUG&&K("QueryEngine","Query:",xo(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(wo()<=Ie.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",xo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wn(t))):$.resolve())}ys(e,t){if(Fw(t))return $.resolve(null);let r=Wn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=ru(t,null,"F"),r=Wn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=we(...o);return this.ps.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{let u=this.Ds(t,a);return this.Cs(t,u,s,l.readTime)?this.ys(e,ru(t,null,"F")):this.vs(e,u,t,l)}))})))}ws(e,t,r,i){return Fw(t)||i.isEqual(le.min())?$.resolve(null):this.ps.getDocuments(e,r).next(o=>{let s=this.Ds(t,o);return this.Cs(t,s,r,i)?$.resolve(null):(wo()<=Ie.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),xo(t)),this.vs(e,s,t,CR(i,sa)).next(a=>a))})}Ds(e,t){let r=new mt(qx(e));return t.forEach((i,o)=>{Nu(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return wo()<=Ie.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",xo(t)),this.ps.getDocumentsMatchingQuery(e,t,Ri.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Ng="LocalStore",Dk=3e8,Lm=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Je(Ce),this.xs=new wr(o=>Mg(o),Tg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Im(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function Sk(n,e,t,r){return new Lm(n,e,t,r)}function uE(n,e){return B(this,null,function*(){let t=ce(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],l=we();for(let u of i){s.push(u.batchId);for(let p of u.mutations)l=l.add(p.key)}for(let u of o){a.push(u.batchId);for(let p of u.mutations)l=l.add(p.key)}return t.localDocuments.getDocuments(r,l).next(u=>({Ls:u,removedBatchIds:s,addedBatchIds:a}))})})})}function Mk(n,e){let t=ce(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,u,p){let v=u.batch,b=v.keys(),C=$.resolve();return b.forEach(O=>{C=C.next(()=>p.getEntry(l,O)).next(V=>{let F=u.docVersions.get(O);Oe(F!==null,48541),V.version.compareTo(F)<0&&(v.applyToRemoteDocument(V,u),V.isValidDocument()&&(V.setReadTime(u.commitVersion),p.addEntry(V)))})}),C.next(()=>a.mutationQueue.removeMutationBatch(l,v))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=we();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function dE(n){let e=ce(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function Tk(n,e){let t=ce(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let a=[];e.targetChanges.forEach((p,v)=>{let b=i.get(v);if(!b)return;a.push(t.Pi.removeMatchingKeys(o,p.removedDocuments,v).next(()=>t.Pi.addMatchingKeys(o,p.addedDocuments,v)));let C=b.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?C=C.withResumeToken(Et.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):p.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(p.resumeToken,r)),i=i.insert(v,C),function(V,F,W){return V.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=Dk?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0}(b,C,p)&&a.push(t.Pi.updateTargetData(o,C))});let l=xr(),u=we();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,p))}),a.push(Pk(o,s,e.documentUpdates).next(p=>{l=p.ks,u=p.qs})),!r.isEqual(le.min())){let p=t.Pi.getLastRemoteSnapshotVersion(o).next(v=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(p)}return $.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,l,u)).next(()=>l)}).then(o=>(t.Ms=i,o))}function Pk(n,e,t){let r=we(),i=we();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=xr();return t.forEach((a,l)=>{let u=o.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(le.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):K(Ng,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ks:s,qs:i}})}function Ak(n,e){let t=ce(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=xg),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ok(n,e){let t=ce(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(o=>o?(i=o,$.resolve(i)):t.Pi.allocateTargetId(r).next(s=>(i=new da(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}function jm(n,e,t){return B(this,null,function*(){let r=ce(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Ho(s))throw s;K(Ng,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)})}function Qw(n,e,t){let r=ce(n),i=le.min(),o=we();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,u,p){let v=ce(l),b=v.xs.get(p);return b!==void 0?$.resolve(v.Ms.get(b)):v.Pi.getTargetData(u,p)}(r,s,Wn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,t?i:le.min(),t?o:we())).next(a=>(Nk(r,qR(e),a),{documents:a,Qs:o})))}function Nk(n,e,t){let r=n.Os.get(e)||le.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Os.set(e,r)}var hu=class{constructor(){this.activeTargetIds=YR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Bm=class{constructor(){this.Mo=new hu,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new hu,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Um=class{Oo(e){}shutdown(){}};var Kw="ConnectivityMonitor",fu=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){K(Kw,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){K(Kw,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Hl=null;function $m(){return Hl===null?Hl=function(){return 268435456+Math.round(2147483648*Math.random())}():Hl++,"0x"+Hl.toString(16)}var Ap="RestConnection",Rk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},zm=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===eu?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){let s=$m(),a=this.zo(e,t.toUriEncodedString());K(Ap,`Sending RPC '${e}' ${s}:`,a,r);let l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,o);let{host:u}=new URL(a),p=Vl(u);return this.Jo(e,a,l,r,p).then(v=>(K(Ap,`Received RPC '${e}' ${s}: `,v),v),v=>{throw Po(Ap,`RPC '${e}' ${s} failed with error: `,v,"url: ",a,"request:",r),v})}Ho(e,t,r,i,o,s){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+zo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,t){let r=Rk[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var qm=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var xt="WebChannelConnection",Hm=class extends zm{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){let s=$m();return new Promise((a,l)=>{let u=new Ep;u.setWithCredentials(!0),u.listenOnce(Ip.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Zs.NO_ERROR:let v=u.getResponseJson();K(xt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(v)),a(v);break;case Zs.TIMEOUT:K(xt,`RPC '${e}' ${s} timed out`),l(new G(L.DEADLINE_EXCEEDED,"Request time out"));break;case Zs.HTTP_ERROR:let b=u.getStatus();if(K(xt,`RPC '${e}' ${s} failed with status:`,b,"response text:",u.getResponseText()),b>0){let C=u.getResponseJson();Array.isArray(C)&&(C=C[0]);let O=C?.error;if(O&&O.status&&O.message){let V=function(W){let ie=W.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(ie)>=0?ie:L.UNKNOWN}(O.status);l(new G(V,O.message))}else l(new G(L.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new G(L.UNAVAILABLE,"Connection failed."));break;default:re(9055,{l_:e,streamId:s,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{K(xt,`RPC '${e}' ${s} completed.`)}});let p=JSON.stringify(i);K(xt,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",p,r,15)})}T_(e,t,r){let i=$m(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Mp(),a=Sp(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;let p=o.join("");K(xt,`Creating RPC '${e}' stream ${i}: ${p}`,l);let v=s.createWebChannel(p,l);this.I_(v);let b=!1,C=!1,O=new qm({Yo:F=>{C?K(xt,`Not sending because RPC '${e}' stream ${i} is closed:`,F):(b||(K(xt,`Opening RPC '${e}' stream ${i} transport.`),v.open(),b=!0),K(xt,`RPC '${e}' stream ${i} sending:`,F),v.send(F))},Zo:()=>v.close()}),V=(F,W,ie)=>{F.listen(W,X=>{try{ie(X)}catch(Se){setTimeout(()=>{throw Se},0)}})};return V(v,Co.EventType.OPEN,()=>{C||(K(xt,`RPC '${e}' stream ${i} transport opened.`),O.o_())}),V(v,Co.EventType.CLOSE,()=>{C||(C=!0,K(xt,`RPC '${e}' stream ${i} transport closed`),O.a_(),this.E_(v))}),V(v,Co.EventType.ERROR,F=>{C||(C=!0,Po(xt,`RPC '${e}' stream ${i} transport errored. Name:`,F.name,"Message:",F.message),O.a_(new G(L.UNAVAILABLE,"The operation could not be completed")))}),V(v,Co.EventType.MESSAGE,F=>{if(!C){let W=F.data[0];Oe(!!W,16349);let ie=W,X=ie?.error||ie[0]?.error;if(X){K(xt,`RPC '${e}' stream ${i} received error:`,X);let Se=X.status,Le=function(w){let E=st[w];if(E!==void 0)return tE(E)}(Se),Me=X.message;Le===void 0&&(Le=L.INTERNAL,Me="Unknown error status: "+Se+" with message "+X.message),C=!0,O.a_(new G(Le,Me)),v.close()}else K(xt,`RPC '${e}' stream ${i} received:`,W),O.u_(W)}}),V(a,Dp.STAT_EVENT,F=>{F.stat===$l.PROXY?K(xt,`RPC '${e}' stream ${i} detected buffering proxy`):F.stat===$l.NOPROXY&&K(xt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{O.__()},0),O}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function Op(){return typeof document<"u"?document:null}function Ru(n){return new hm(n,!0)}var pu=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&K("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var Yw="PersistentStream",mu=class{constructor(e,t,r,i,o,s,a,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new pu(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}stop(){return B(this,null,function*(){this.x_()&&(yield this.close(0))})}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}k_(){return B(this,null,function*(){if(this.O_())return this.close(0)})}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return B(this,null,function*(){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===L.RESOURCE_EXHAUSTED?(_r(t.toString()),_r("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.r_(t)})}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new G(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(()=>B(this,null,function*(){this.state=0,this.start()}))}z_(e){return K(Yw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(K(Yw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Gm=class extends mu{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=hk(this.serializer,e),r=function(o){if(!("targetChange"in o))return le.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?le.min():s.readTime?Qn(s.readTime):le.min()}(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=gm(this.serializer),t.addTarget=function(o,s){let a,l=s.target;if(a=nm(l)?{documents:mk(o,l)}:{query:gk(o,l).ft},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=nE(o,s.resumeToken);let u=fm(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(le.min())>0){a.readTime=cu(o,s.snapshotVersion.toTimestamp());let u=fm(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=yk(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=gm(this.serializer),t.removeTarget=e,this.q_(t)}},Wm=class extends mu{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Oe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Oe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Oe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=pk(e.writeResults,e.commitTime),r=Qn(e.commitTime);return this.listener.na(r,t)}ra(){let e={};e.database=gm(this.serializer),this.q_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>fk(this.serializer,r))};this.q_(t)}};var Qm=class{},Km=class extends Qm{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new G(L.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,pm(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(L.UNKNOWN,o.toString())})}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Ho(e,pm(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(L.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},Ym=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(_r(t),this.aa=!1):K("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var ji="RemoteStore",Jm=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(()=>B(this,null,function*(){Ui(this)&&(K(ji,"Restarting streams for network reachability change."),yield function(l){return B(this,null,function*(){let u=ce(l);u.Ea.add(4),yield ya(u),u.Ra.set("Unknown"),u.Ea.delete(4),yield ku(u)})}(this))}))}),this.Ra=new Ym(r,i)}};function ku(n){return B(this,null,function*(){if(Ui(n))for(let e of n.da)yield e(!0)})}function ya(n){return B(this,null,function*(){for(let e of n.da)yield e(!1)})}function hE(n,e){let t=ce(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Vg(t)?Fg(t):Go(t).O_()&&kg(t,e))}function Rg(n,e){let t=ce(n),r=Go(t);t.Ia.delete(e),r.O_()&&fE(t,e),t.Ia.size===0&&(r.O_()?r.L_():Ui(t)&&t.Ra.set("Unknown"))}function kg(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Go(n).Y_(e)}function fE(n,e){n.Va.Ue(e),Go(n).Z_(e)}function Fg(n){n.Va=new dm({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Go(n).start(),n.Ra.ua()}function Vg(n){return Ui(n)&&!Go(n).x_()&&n.Ia.size>0}function Ui(n){return ce(n).Ea.size===0}function pE(n){n.Va=void 0}function kk(n){return B(this,null,function*(){n.Ra.set("Online")})}function Fk(n){return B(this,null,function*(){n.Ia.forEach((e,t)=>{kg(n,e)})})}function Vk(n,e){return B(this,null,function*(){pE(n),Vg(n)?(n.Ra.ha(e),Fg(n)):n.Ra.set("Unknown")})}function Lk(n,e,t){return B(this,null,function*(){if(n.Ra.set("Online"),e instanceof su&&e.state===2&&e.cause)try{yield function(i,o){return B(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ia.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ia.delete(a),i.Va.removeTarget(a))})}(n,e)}catch(r){K(ji,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield gu(n,r)}else if(e instanceof So?n.Va.Ze(e):e instanceof ou?n.Va.st(e):n.Va.tt(e),!t.isEqual(le.min()))try{let r=yield dE(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Va.Tt(s);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){let p=o.Ia.get(u);p&&o.Ia.set(u,p.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,u)=>{let p=o.Ia.get(l);if(!p)return;o.Ia.set(l,p.withResumeToken(Et.EMPTY_BYTE_STRING,p.snapshotVersion)),fE(o,l);let v=new da(p.target,l,u,p.sequenceNumber);kg(o,v)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){K(ji,"Failed to raise snapshot:",r),yield gu(n,r)}})}function gu(n,e,t){return B(this,null,function*(){if(!Ho(e))throw e;n.Ea.add(1),yield ya(n),n.Ra.set("Offline"),t||(t=()=>dE(n.localStore)),n.asyncQueue.enqueueRetryable(()=>B(this,null,function*(){K(ji,"Retrying IndexedDB access"),yield t(),n.Ea.delete(1),yield ku(n)}))})}function mE(n,e){return e().catch(t=>gu(n,t,e))}function Fu(n){return B(this,null,function*(){let e=ce(n),t=Yr(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:xg;for(;jk(e);)try{let i=yield Ak(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,Bk(e,i)}catch(i){yield gu(e,i)}gE(e)&&vE(e)})}function jk(n){return Ui(n)&&n.Ta.length<10}function Bk(n,e){n.Ta.push(e);let t=Yr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function gE(n){return Ui(n)&&!Yr(n).x_()&&n.Ta.length>0}function vE(n){Yr(n).start()}function Uk(n){return B(this,null,function*(){Yr(n).ra()})}function $k(n){return B(this,null,function*(){let e=Yr(n);for(let t of n.Ta)e.ea(t.mutations)})}function zk(n,e,t){return B(this,null,function*(){let r=n.Ta.shift(),i=am.from(r,e,t);yield mE(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Fu(n)})}function qk(n,e){return B(this,null,function*(){e&&Yr(n).X_&&(yield function(r,i){return B(this,null,function*(){if(function(s){return rk(s)&&s!==L.ABORTED}(i.code)){let o=r.Ta.shift();Yr(r).B_(),yield mE(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Fu(r)}})}(n,e)),gE(n)&&vE(n)})}function Jw(n,e){return B(this,null,function*(){let t=ce(n);t.asyncQueue.verifyOperationInProgress(),K(ji,"RemoteStore received new credentials");let r=Ui(t);t.Ea.add(3),yield ya(t),r&&t.Ra.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),yield ku(t)})}function Hk(n,e){return B(this,null,function*(){let t=ce(n);e?(t.Ea.delete(2),yield ku(t)):e||(t.Ea.add(2),yield ya(t),t.Ra.set("Unknown"))})}function Go(n){return n.ma||(n.ma=function(t,r,i){let o=ce(t);return o.sa(),new Gm(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Xo:kk.bind(null,n),t_:Fk.bind(null,n),r_:Vk.bind(null,n),H_:Lk.bind(null,n)}),n.da.push(e=>B(this,null,function*(){e?(n.ma.B_(),Vg(n)?Fg(n):n.Ra.set("Unknown")):(yield n.ma.stop(),pE(n))}))),n.ma}function Yr(n){return n.fa||(n.fa=function(t,r,i){let o=ce(t);return o.sa(),new Wm(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:Uk.bind(null,n),r_:qk.bind(null,n),ta:$k.bind(null,n),na:zk.bind(null,n)}),n.da.push(e=>B(this,null,function*(){e?(n.fa.B_(),yield Fu(n)):(yield n.fa.stop(),n.Ta.length>0&&(K(ji,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}var Xm=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Lg(n,e){if(_r("AsyncQueue",`${e}: ${n}`),Ho(n))return new G(L.UNAVAILABLE,`${e}: ${n}`);throw n}var vu=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ne.comparator(t.key,r.key):(t,r)=>ne.comparator(t.key,r.key),this.keyedMap=ea(),this.sortedSet=new Je(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var yu=class{constructor(){this.ga=new Je(ne.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):re(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},Uo=class n{constructor(e,t,r,i,o,s,a,l,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,vu.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ou(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Zm=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},eg=class{constructor(){this.queries=Xw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=ce(t),o=i.queries;i.queries=Xw(),o.forEach((s,a)=>{for(let l of a.Sa)l.onError(r)})})(this,new G(L.ABORTED,"Firestore shutting down"))}};function Xw(){return new wr(n=>zx(n),Ou)}function Gk(n,e){return B(this,null,function*(){let t=ce(n),r=3,i=e.query,o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new Zm,r=e.Da()?0:1);try{switch(r){case 0:o.wa=yield t.onListen(i,!0);break;case 1:o.wa=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Lg(s,`Initialization of query '${xo(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&jg(t)})}function Wk(n,e){return B(this,null,function*(){let t=ce(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function Qk(n,e){let t=ce(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.Sa)a.Fa(i)&&(r=!0);s.wa=i}}r&&jg(t)}function Kk(n,e,t){let r=ce(n),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(t);r.queries.delete(e)}function jg(n){n.Ca.forEach(e=>{e.next()})}var tg,Zw;(Zw=tg||(tg={})).Ma="default",Zw.Cache="cache";var ng=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Uo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Uo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==tg.Cache}};var _u=class{constructor(e){this.key=e}},bu=class{constructor(e){this.key=e}},rg=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=we(),this.mutatedKeys=we(),this.eu=qx(e),this.tu=new vu(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new yu,i=t?t.tu:this.tu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,v)=>{let b=i.get(p),C=Nu(this.query,v)?v:null,O=!!b&&this.mutatedKeys.has(b.key),V=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations),F=!1;b&&C?b.data.isEqual(C.data)?O!==V&&(r.track({type:3,doc:C}),F=!0):this.su(b,C)||(r.track({type:2,doc:C}),F=!0,(l&&this.eu(C,l)>0||u&&this.eu(C,u)<0)&&(a=!0)):!b&&C?(r.track({type:0,doc:C}),F=!0):b&&!C&&(r.track({type:1,doc:b}),F=!0,(l||u)&&(a=!0)),F&&(C?(s=s.add(C),o=V?o.add(p):o.delete(p)):(s=s.delete(p),o=o.delete(p)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let p=this.query.limitType==="F"?s.last():s.first();s=s.delete(p.key),o=o.delete(p.key),r.track({type:1,doc:p})}return{tu:s,iu:r,Cs:a,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((p,v)=>function(C,O){let V=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re(20277,{Rt:F})}};return V(C)-V(O)}(p.type,v.type)||this.eu(p.doc,v.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,s.length!==0||u?{snapshot:new Uo(this.query,e.tu,o,s,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new yu,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=we(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new bu(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new _u(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=we();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Uo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},Bg="SyncEngine",ig=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},og=class{constructor(e){this.key=e,this.hu=!1}},sg=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new wr(a=>zx(a),Ou),this.Iu=new Map,this.Eu=new Set,this.du=new Je(ne.comparator),this.Au=new Map,this.Ru=new fa,this.Vu={},this.mu=new Map,this.fu=ha.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};function Yk(n,e,t=!0){return B(this,null,function*(){let r=xE(n),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=yield yE(r,e,t,!0),i})}function Jk(n,e){return B(this,null,function*(){let t=xE(n);yield yE(t,e,!0,!1)})}function yE(n,e,t,r){return B(this,null,function*(){let i=yield Ok(n.localStore,Wn(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield Xk(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&hE(n.remoteStore,i),a})}function Xk(n,e,t,r,i){return B(this,null,function*(){n.pu=(v,b,C)=>function(V,F,W,ie){return B(this,null,function*(){let X=F.view.ru(W);X.Cs&&(X=yield Qw(V.localStore,F.query,!1).then(({documents:M})=>F.view.ru(M,X)));let Se=ie&&ie.targetChanges.get(F.targetId),Le=ie&&ie.targetMismatches.get(F.targetId)!=null,Me=F.view.applyChanges(X,V.isPrimaryClient,Se,Le);return tx(V,F.targetId,Me.au),Me.snapshot})}(n,v,b,C);let o=yield Qw(n.localStore,e,!0),s=new rg(e,o.Qs),a=s.ru(o.documents),l=ua.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=s.applyChanges(a,n.isPrimaryClient,l);tx(n,t,u.au);let p=new ig(e,t,s);return n.Tu.set(e,p),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),u.snapshot})}function Zk(n,e,t){return B(this,null,function*(){let r=ce(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!Ou(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield jm(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Rg(r.remoteStore,i.targetId),ag(r,i.targetId)}).catch(qo))):(ag(r,i.targetId),yield jm(r.localStore,i.targetId,!0))})}function eF(n,e){return B(this,null,function*(){let t=ce(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Rg(t.remoteStore,r.targetId))})}function tF(n,e,t){return B(this,null,function*(){let r=cF(n);try{let i=yield function(s,a){let l=ce(s),u=ut.now(),p=a.reduce((C,O)=>C.add(O.key),we()),v,b;return l.persistence.runTransaction("Locally write mutations","readwrite",C=>{let O=xr(),V=we();return l.Ns.getEntries(C,p).next(F=>{O=F,O.forEach((W,ie)=>{ie.isValidDocument()||(V=V.add(W))})}).next(()=>l.localDocuments.getOverlayedDocuments(C,O)).next(F=>{v=F;let W=[];for(let ie of a){let X=nk(ie,v.get(ie.key).overlayedDocument);X!=null&&W.push(new Yn(ie.key,X,Fx(X.value.mapValue),Zt.exists(!0)))}return l.mutationQueue.addMutationBatch(C,u,W,a)}).next(F=>{b=F;let W=F.applyToLocalDocumentSet(v,V);return l.documentOverlayCache.saveOverlays(C,F.batchId,W)})}).then(()=>({batchId:b.batchId,changes:Gx(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,l){let u=s.Vu[s.currentUser.toKey()];u||(u=new Je(Ce)),u=u.insert(a,l),s.Vu[s.currentUser.toKey()]=u}(r,i.batchId,t),yield _a(r,i.changes),yield Fu(r.remoteStore)}catch(i){let o=Lg(i,"Failed to persist write");t.reject(o)}})}function _E(n,e){return B(this,null,function*(){let t=ce(n);try{let r=yield Tk(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Au.get(o);s&&(Oe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?Oe(s.hu,14607):i.removedDocuments.size>0&&(Oe(s.hu,42227),s.hu=!1))}),yield _a(t,r,e)}catch(r){yield qo(r)}})}function ex(n,e,t){let r=ce(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let l=ce(s);l.onlineState=a;let u=!1;l.queries.forEach((p,v)=>{for(let b of v.Sa)b.va(a)&&(u=!0)}),u&&jg(l)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function nF(n,e,t){return B(this,null,function*(){let r=ce(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new Je(ne.comparator);s=s.insert(o,In.newNoDocument(o,le.min()));let a=we().add(o),l=new iu(le.min(),new Map,new Je(Ce),s,a);yield _E(r,l),r.du=r.du.remove(o),r.Au.delete(e),Ug(r)}else yield jm(r.localStore,e,!1).then(()=>ag(r,e,t)).catch(qo)})}function rF(n,e){return B(this,null,function*(){let t=ce(n),r=e.batch.batchId;try{let i=yield Mk(t.localStore,e);CE(t,r,null),bE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield _a(t,i)}catch(i){yield qo(i)}})}function iF(n,e,t){return B(this,null,function*(){let r=ce(n);try{let i=yield function(s,a){let l=ce(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let p;return l.mutationQueue.lookupMutationBatch(u,a).next(v=>(Oe(v!==null,37113),p=v.keys(),l.mutationQueue.removeMutationBatch(u,v))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,p,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,p)).next(()=>l.localDocuments.getDocuments(u,p))})}(r.localStore,e);CE(r,e,t),bE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield _a(r,i)}catch(i){yield qo(i)}})}function bE(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function CE(n,e,t){let r=ce(n),i=r.Vu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function ag(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||wE(n,r)})}function wE(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(Rg(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Ug(n))}function tx(n,e,t){for(let r of t)r instanceof _u?(n.Ru.addReference(r.key,e),oF(n,r)):r instanceof bu?(K(Bg,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||wE(n,r.key)):re(19791,{wu:r})}function oF(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(K(Bg,"New document in limbo: "+t),n.Eu.add(r),Ug(n))}function Ug(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new ne(We.fromString(e)),r=n.fu.next();n.Au.set(r,new og(t)),n.du=n.du.insert(t,r),hE(n.remoteStore,new da(Wn(Pg(t.path)),r,"TargetPurposeLimboResolution",wg.ce))}}function _a(n,e,t){return B(this,null,function*(){let r=ce(n),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{s.push(r.pu(l,e,t).then(u=>{if((u||t)&&r.isPrimaryClient){let p=u?!u.fromCache:t?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(u){i.push(u);let p=km.As(l.targetId,u);o.push(p)}}))}),yield Promise.all(s),r.Pu.H_(i),yield function(l,u){return B(this,null,function*(){let p=ce(l);try{yield p.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>$.forEach(u,b=>$.forEach(b.Es,C=>p.persistence.referenceDelegate.addReference(v,b.targetId,C)).next(()=>$.forEach(b.ds,C=>p.persistence.referenceDelegate.removeReference(v,b.targetId,C)))))}catch(v){if(!Ho(v))throw v;K(Ng,"Failed to update sequence numbers: "+v)}for(let v of u){let b=v.targetId;if(!v.fromCache){let C=p.Ms.get(b),O=C.snapshotVersion,V=C.withLastLimboFreeSnapshotVersion(O);p.Ms=p.Ms.insert(b,V)}}})}(r.localStore,o))})}function sF(n,e){return B(this,null,function*(){let t=ce(n);if(!t.currentUser.isEqual(e)){K(Bg,"User change. New user:",e.toKey());let r=yield uE(t.localStore,e);t.currentUser=e,function(o,s){o.mu.forEach(a=>{a.forEach(l=>{l.reject(new G(L.CANCELLED,s))})}),o.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield _a(t,r.Ls)}})}function aF(n,e){let t=ce(n),r=t.Au.get(e);if(r&&r.hu)return we().add(r.key);{let i=we(),o=t.Iu.get(e);if(!o)return i;for(let s of o){let a=t.Tu.get(s);i=i.unionWith(a.view.nu)}return i}}function xE(n){let e=ce(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=_E.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nF.bind(null,e),e.Pu.H_=Qk.bind(null,e.eventManager),e.Pu.yu=Kk.bind(null,e.eventManager),e}function cF(n){let e=ce(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iF.bind(null,e),e}var EE=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return B(this,null,function*(){this.serializer=Ru(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)})}Fu(t,r){return null}Mu(t,r){return null}vu(t){return Sk(this.persistence,new Vm,t.initialUser,this.serializer)}Cu(t){return new uu(Rm.mi,this.serializer)}Du(t){return new Bm}terminate(){return B(this,null,function*(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),cg=class extends EE{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Oe(this.persistence.referenceDelegate instanceof du,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Cm(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new uu(r=>du.mi(r,t),this.serializer)}};var lF=(()=>{class n{initialize(t,r){return B(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>ex(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=sF.bind(null,this.syncEngine),yield Hk(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new eg}()}createDatastore(t){let r=Ru(t.databaseInfo.databaseId),i=function(s){return new Hm(s)}(t.databaseInfo);return function(s,a,l,u){return new Km(s,a,l,u)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,l){return new Jm(i,o,s,a,l)}(this.localStore,this.datastore,t.asyncQueue,r=>ex(this.syncEngine,r,0),function(){return fu.v()?new fu:new Um}())}createSyncEngine(t,r){return function(o,s,a,l,u,p,v){let b=new sg(o,s,a,l,u,p);return v&&(b.gu=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return B(this,null,function*(){yield function(r){return B(this,null,function*(){let i=ce(r);K(ji,"RemoteStore shutting down."),i.Ea.add(5),yield ya(i),i.Aa.shutdown(),i.Ra.set("Unknown")})}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()})}}return n.provider={build:()=>new n},n})();var lg=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):_r("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Jr="FirestoreClient",ug=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=pt.UNAUTHENTICATED,this.clientId=oa.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>B(this,null,function*(){K(Jr,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(K(Jr,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>B(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Lg(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Np(n,e){return B(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),K(Jr,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>B(this,null,function*(){r.isEqual(i)||(yield uE(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function nx(n,e){return B(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield uF(n);K(Jr,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Jw(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Jw(e.remoteStore,i)),n._onlineComponents=e})}function uF(n){return B(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){K(Jr,"Using user provided OfflineComponentProvider");try{yield Np(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===L.FAILED_PRECONDITION||i.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Po("Error using user provided cache. Falling back to memory cache: "+t),yield Np(n,new EE)}}else K(Jr,"Using default OfflineComponentProvider"),yield Np(n,new cg(void 0));return n._offlineComponents})}function IE(n){return B(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(K(Jr,"Using user provided OnlineComponentProvider"),yield nx(n,n._uninitializedComponentsProvider._online)):(K(Jr,"Using default OnlineComponentProvider"),yield nx(n,new lF))),n._onlineComponents})}function dF(n){return IE(n).then(e=>e.syncEngine)}function rx(n){return B(this,null,function*(){let e=yield IE(n),t=e.eventManager;return t.onListen=Yk.bind(null,e.syncEngine),t.onUnlisten=Zk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Jk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=eF.bind(null,e.syncEngine),t})}function DE(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var ix=new Map;var SE="firestore.googleapis.com",ox=!0,Cu=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new G(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=SE,this.ssl=ox}else this.host=e.host,this.ssl=e.ssl??ox;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=lE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Ek)throw new G(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_R("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=DE(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new G(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new G(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new G(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},$o=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Cu({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Cu(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new kp;switch(r.type){case"firstParty":return new jp(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return B(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=ix.get(t);r&&(K("ComponentProvider","Removing Datastore"),ix.delete(t),r.terminate())}(this),Promise.resolve()}};function hF(n,e,t,r={}){n=En(n,$o);let i=Vl(e),o=n._getSettings(),s=ue(ee({},o),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;i&&(WC(`https://${a}`),KC("Firestore",!0)),o.host!==SE&&o.host!==a&&Po("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=ue(ee({},o),{host:a,ssl:i,emulatorOptions:r});if(!_o(l,s)&&(n._setSettings(l),r.mockUserToken)){let u,p;if(typeof r.mockUserToken=="string")u=r.mockUserToken,p=pt.MOCK_USER;else{u=QC(r.mockUserToken,n._app?.options.projectId);let v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new G(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new pt(v)}n._authCredentials=new Fp(new Kl(u,p))}}var Xr=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},gt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(va(t,n._jsonSchema))return new n(e,r||null,new ne(We.fromString(t.referencePath)))}};gt._jsonSchemaVersion="firestore/documentReference/1.0",gt._jsonSchema={type:lt("string",gt._jsonSchemaVersion),referencePath:lt("string")};var qr=class n extends Xr{constructor(e,t,r){super(e,t,Pg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new gt(this.firestore,null,new ne(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Sn(n,e,...t){if(n=Yt(n),hx("collection","path",e),n instanceof $o){let r=We.fromString(e,...t);return xw(r),new qr(n,null,r)}{if(!(n instanceof gt||n instanceof qr))throw new G(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(We.fromString(e,...t));return xw(r),new qr(n.firestore,null,r)}}function Er(n,e,...t){if(n=Yt(n),arguments.length===1&&(e=oa.newId()),hx("doc","path",e),n instanceof $o){let r=We.fromString(e,...t);return ww(r),new gt(n,null,new ne(r))}{if(!(n instanceof gt||n instanceof qr))throw new G(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(We.fromString(e,...t));return ww(r),new gt(n.firestore,n instanceof qr?n.converter:null,new ne(r))}}var sx="AsyncQueue",wu=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new pu(this,"async_queue_retry"),this._c=()=>{let r=Op();r&&K(sx,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=Op();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=Op();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new yr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}lc(){return B(this,null,function*(){if(this.Xu.length!==0){try{yield this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ho(e))throw e;K(sx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}})}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,_r("INTERNAL UNHANDLED ERROR: ",ax(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=Xm.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&re(47125,{Pc:ax(this.nc)})}verifyOperationInProgress(){}Tc(){return B(this,null,function*(){let e;do e=this.ac,yield e;while(e!==this.ac)})}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function ax(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function cx(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Jn=class extends $o{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new wu,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return B(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new wu(e),this._firestoreClient=void 0,yield e}})}};function Vu(n,e){let t=typeof n=="object"?n:pw(),r=typeof n=="string"?n:e||eu,i=dw(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=GC("firestore");o&&hF(i,...o)}return i}function $g(n){if(n._terminated)throw new G(L.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||fF(n),n._firestoreClient}function fF(n){let e=n._freezeSettings(),t=function(i,o,s,a){return new qp(i,o,s,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,DE(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)}(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new ug(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}}(n._componentsProvider))}var Hr=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Et.fromBase64String(e))}catch(t){throw new G(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(va(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Hr._jsonSchemaVersion="firestore/bytes/1.0",Hr._jsonSchema={type:lt("string",Hr._jsonSchemaVersion),bytes:lt("string")};var Bi=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new G(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var pa=class{constructor(e){this._methodName=e}};var Gr=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new G(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new G(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(va(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Gr._jsonSchemaVersion="firestore/geoPoint/1.0",Gr._jsonSchema={type:lt("string",Gr._jsonSchemaVersion),latitude:lt("number"),longitude:lt("number")};var Wr=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(va(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new G(L.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Wr._jsonSchemaVersion="firestore/vectorValue/1.0",Wr._jsonSchema={type:lt("string",Wr._jsonSchemaVersion),vectorValues:lt("object")};var pF=/^__.*__$/,dg=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Yn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Li(e,this.data,t,this.fieldTransforms)}},xu=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Yn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function ME(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re(40011,{Ac:n})}}var hg=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new n(ee(ee({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Iu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(ME(this.Ac)&&pF.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},fg=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ru(e)}Cc(e,t,r,i=!1){return new hg({Ac:e,methodName:t,Dc:r,path:Xt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ba(n){let e=n._freezeSettings(),t=Ru(n._databaseId);return new fg(n._databaseId,!!e.ignoreUndefinedProperties,t)}function zg(n,e,t,r,i,o={}){let s=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);qg("Data must be an object, but it was:",s,r);let a=AE(r,s),l,u;if(o.merge)l=new un(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let p=[];for(let v of o.mergeFields){let b=pg(e,v,t);if(!s.contains(b))throw new G(L.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);NE(p,b)||p.push(b)}l=new un(p),u=s.fieldTransforms.filter(v=>l.covers(v.field))}else l=null,u=s.fieldTransforms;return new dg(new Jt(a),l,u)}var Eu=class n extends pa{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function TE(n,e,t,r){let i=n.Cc(1,e,t);qg("Data must be an object, but it was:",i,r);let o=[],s=Jt.empty();Zr(r,(l,u)=>{let p=Hg(e,l,t);u=Yt(u);let v=i.yc(p);if(u instanceof Eu)o.push(p);else{let b=Ca(u,v);b!=null&&(o.push(p),s.set(p,b))}});let a=new un(o);return new xu(s,a,i.fieldTransforms)}function PE(n,e,t,r,i,o){let s=n.Cc(1,e,t),a=[pg(e,r,t)],l=[i];if(o.length%2!=0)throw new G(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<o.length;b+=2)a.push(pg(e,o[b])),l.push(o[b+1]);let u=[],p=Jt.empty();for(let b=a.length-1;b>=0;--b)if(!NE(u,a[b])){let C=a[b],O=l[b];O=Yt(O);let V=s.yc(C);if(O instanceof Eu)u.push(C);else{let F=Ca(O,V);F!=null&&(u.push(C),p.set(C,F))}}let v=new un(u);return new xu(p,v,s.fieldTransforms)}function mF(n,e,t,r=!1){return Ca(t,n.Cc(r?4:3,e))}function Ca(n,e){if(OE(n=Yt(n)))return qg("Unsupported field value:",e,n),AE(n,e);if(n instanceof pa)return function(r,i){if(!ME(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let l=Ca(a,i.wc(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Yt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return JR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=ut.fromDate(r);return{timestampValue:cu(i.serializer,o)}}if(r instanceof ut){let o=new ut(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:cu(i.serializer,o)}}if(r instanceof Gr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Hr)return{bytesValue:nE(i.serializer,r._byteString)};if(r instanceof gt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Og(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Wr)return function(s,a){return{mapValue:{fields:{[Ig]:{stringValue:Dg},[Oo]:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return Ag(a.serializer,u)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Tu(r)}`)}(n,e)}function AE(n,e){let t={};return Mx(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zr(n,(r,i)=>{let o=Ca(i,e.mc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function OE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ut||n instanceof Gr||n instanceof Hr||n instanceof gt||n instanceof pa||n instanceof Wr)}function qg(n,e,t){if(!OE(t)||!fx(t)){let r=Tu(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function pg(n,e,t){if((e=Yt(e))instanceof Bi)return e._internalPath;if(typeof e=="string")return Hg(n,e);throw Iu("Field path arguments must be of type string or ",n,!1,void 0,t)}var gF=new RegExp("[~\\*/\\[\\]]");function Hg(n,e,t){if(e.search(gF)>=0)throw Iu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Bi(...e.split("."))._internalPath}catch{throw Iu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Iu(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new G(L.INVALID_ARGUMENT,a+n+l)}function NE(n,e){return n.some(t=>t.isEqual(e))}var Du=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new mg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Lu("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},mg=class extends Du{data(){return super.data()}};function Lu(n,e){return typeof e=="string"?Hg(n,e):e instanceof Bi?e._internalPath:e._delegate._internalPath}function vF(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new G(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ma=class{},ga=class extends ma{};function wa(n,e,...t){let r=[];e instanceof ma&&r.push(e),r=r.concat(t),function(o){let s=o.filter(l=>l instanceof gg).length,a=o.filter(l=>l instanceof Su).length;if(s>1||s>0&&a>0)throw new G(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Su=class n extends ga{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return kE(e._query,t),new Xr(e.firestore,e.converter,rm(e._query,t))}_parse(e){let t=ba(e.firestore);return function(o,s,a,l,u,p,v){let b;if(u.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new G(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){ux(v,p);let O=[];for(let V of v)O.push(lx(l,o,V));b={arrayValue:{values:O}}}else b=lx(l,o,v)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||ux(v,p),b=mF(a,s,v,p==="in"||p==="not-in");return ct.create(u,p,b)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function ju(n,e,t){let r=e,i=Lu("where",n);return Su._create(i,r,t)}var gg=class n extends ma{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Dn.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let l of a)kE(s,l),s=rm(s,l)}(e._query,t),new Xr(e.firestore,e.converter,rm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var vg=class n extends ga{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new G(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new G(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ki(o,s)}(e._query,this._field,this._direction);return new Xr(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Kr(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function RE(n,e="asc"){let t=e,r=Lu("orderBy",n);return vg._create(r,t)}var yg=class n extends ga{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Xr(e.firestore,e.converter,ru(e._query,this._limit,this._limitType))}};function xa(n){return bR("limit",n),yg._create("limit",n,"F")}function lx(n,e,t){if(typeof(t=Yt(t))=="string"){if(t==="")throw new G(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$x(e)&&t.indexOf("/")!==-1)throw new G(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(We.fromString(t));if(!ne.isDocumentKey(r))throw new G(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Pw(n,new ne(r))}if(t instanceof gt)return Pw(n,t._key);throw new G(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Tu(t)}.`)}function ux(n,e){if(!Array.isArray(n)||n.length===0)throw new G(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kE(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new G(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var _g=class{convertValue(e,t="none"){switch(Qr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ge(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Cr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw re(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Zr(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){let t=e.fields?.[Oo].arrayValue?.values?.map(r=>Ge(r.doubleValue));return new Wr(t)}convertGeoPoint(e){return new Gr(Ge(e.latitude),Ge(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Au(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ca(e));default:return null}}convertTimestamp(e){let t=br(e);return new ut(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=We.fromString(e);Oe(cE(r),9688,{name:e});let i=new tu(r.get(1),r.get(3)),o=new ne(r.popFirst(5));return i.isEqual(t)||_r(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Gg(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Ai=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Oi=class n extends Du{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Mo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Lu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new G(L.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Oi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Oi._jsonSchema={type:lt("string",Oi._jsonSchemaVersion),bundleSource:lt("string","DocumentSnapshot"),bundleName:lt("string"),bundle:lt("string")};var Mo=class extends Oi{data(e={}){return super.data(e)}},To=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ai(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Mo(this._firestore,this._userDataWriter,r.key,r,new Ai(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new G(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let l=new Mo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ai(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let l=new Mo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ai(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,p=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),p=s.indexOf(a.doc.key)),{type:yF(a.type),doc:l,oldIndex:u,newIndex:p}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new G(L.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=oa.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function yF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re(61501,{type:n})}}To._jsonSchemaVersion="firestore/querySnapshot/1.0",To._jsonSchema={type:lt("string",To._jsonSchemaVersion),bundleSource:lt("string","QuerySnapshot"),bundleName:lt("string"),bundle:lt("string")};var Mu=class extends _g{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new gt(this.firestore,null,t)}};function FE(n,e,t){n=En(n,gt);let r=En(n.firestore,Jn),i=Gg(n.converter,e,t);return Ia(r,[zg(ba(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Zt.none())])}function Bu(n,e,t,...r){n=En(n,gt);let i=En(n.firestore,Jn),o=ba(i),s;return s=typeof(e=Yt(e))=="string"||e instanceof Bi?PE(o,"updateDoc",n._key,e,t,r):TE(o,"updateDoc",n._key,e),Ia(i,[s.toMutation(n._key,Zt.exists(!0))])}function VE(n){return Ia(En(n.firestore,Jn),[new Bo(n._key,Zt.none())])}function Ea(n,e){let t=En(n.firestore,Jn),r=Er(n),i=Gg(n.converter,e);return Ia(t,[zg(ba(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Zt.exists(!1))]).then(()=>r)}function Ir(n,...e){n=Yt(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||cx(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(cx(e[r])){let l=e[r];e[r]=l.next?.bind(l),e[r+1]=l.error?.bind(l),e[r+2]=l.complete?.bind(l)}let o,s,a;if(n instanceof gt)s=En(n.firestore,Jn),a=Pg(n._key.path),o={next:l=>{e[r]&&e[r](_F(s,n,l))},error:e[r+1],complete:e[r+2]};else{let l=En(n,Xr);s=En(l.firestore,Jn),a=l._query;let u=new Mu(s);o={next:p=>{e[r]&&e[r](new To(s,u,l,p))},error:e[r+1],complete:e[r+2]},vF(n._query)}return function(u,p,v,b){let C=new lg(b),O=new ng(p,C,v);return u.asyncQueue.enqueueAndForget(()=>B(this,null,function*(){return Gk(yield rx(u),O)})),()=>{C.Nu(),u.asyncQueue.enqueueAndForget(()=>B(this,null,function*(){return Wk(yield rx(u),O)}))}}($g(s),a,i,o)}function Ia(n,e){return function(r,i){let o=new yr;return r.asyncQueue.enqueueAndForget(()=>B(this,null,function*(){return tF(yield dF(r),i,o)})),o.promise}($g(n),e)}function _F(n,e,t){let r=t.docs.get(e._key),i=new Mu(n);return new Oi(n,i,e._key,r,new Ai(t.hasPendingWrites,t.fromCache),e.converter)}var bg=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ba(e)}set(e,t,r){this._verifyNotCommitted();let i=Rp(e,this._firestore),o=Gg(i.converter,t,r),s=zg(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Zt.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Rp(e,this._firestore),s;return s=typeof(t=Yt(t))=="string"||t instanceof Bi?PE(this._dataReader,"WriteBatch.update",o._key,t,r,i):TE(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Zt.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Rp(e,this._firestore);return this._mutations=this._mutations.concat(new Bo(t._key,Zt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new G(L.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Rp(n,e){if((n=Yt(n)).firestore!==e)throw new G(L.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function LE(n){return $g(n=En(n,Jn)),new bg(n,e=>Ia(n,e))}(function(e,t=!0){(function(i){zo=i})(fw),Ys(new pr("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Jn(new Vp(r.getProvider("auth-internal")),new Bp(s,r.getProvider("app-check-internal")),function(u,p){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new G(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tu(u.options.projectId,p)}(s,i),s);return o=ee({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),zr(_w,bw,e),zr(_w,bw,"esm2020")})();var Uu=(()=>{class n{constructor(){this.app=Xs(Vt.firebaseConfig),this.db=Vu(this.app),this.messagesSubject=new Qe([]),this.messages$=this.messagesSubject.asObservable(),this.logoutSubject=new Qe(void 0),this.logout$=this.logoutSubject.asObservable(),this.listenForMessages()}listenForMessages(){let t=Sn(this.db,"messages"),r=wa(t,RE("timestamp","asc"),xa(100));Ir(r,i=>{let o=i.docs.map(s=>{let a=s.data();return{id:s.id,text:a.text,senderName:a.senderName,timestamp:a.timestamp.toDate(),userId:a.userId,conversationId:a.conversationId,audioBase64:a.audioBase64,isRead:a.isRead||!1}});this.messagesSubject.next(o)},i=>{console.error("Error listening to messages:",i)})}sendMessage(t,r,i){return B(this,null,function*(){let o=Sn(this.db,"messages"),s=localStorage.getItem("jjm_user_id")||null;yield Ea(o,{text:t,senderName:r,conversationId:i,timestamp:new Date,userId:s,isRead:!1})})}sendAudioMessage(t,r,i){return B(this,null,function*(){let o=Sn(this.db,"messages"),s=localStorage.getItem("jjm_user_id")||null;yield Ea(o,{text:"\u{1F3A4} Voice Message",senderName:r,audioBase64:t,conversationId:i,timestamp:new Date,userId:s,isRead:!1})})}deleteMessage(t){return B(this,null,function*(){let r=Er(this.db,"messages",t);yield VE(r)})}markAsRead(t){return B(this,null,function*(){let r=LE(this.db);t.forEach(i=>{let o=Er(this.db,"messages",i);r.update(o,{isRead:!0})}),yield r.commit()})}getMessages(){return this.messages$}triggerLogout(){this.logoutSubject.next()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var BE=(()=>{class n{constructor(){this.app=Xs(Vt.firebaseConfig),this.db=Vu(this.app),this.peerConnection=null,this.localStream=null,this.remoteStream=null,this.callDocSubscription=null,this.offerCandidatesSubscription=null,this.answerCandidatesSubscription=null,this.incomingCall$=new Pn,this.callStatus$=new Qe("idle"),this.remoteStream$=new Qe(null),this.currentCallId=null,this.candidateQueue=[],this.servers={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:stun1.l.google.com:19302","stun:stun2.l.google.com:19302","stun:stun3.l.google.com:19302","stun:stun4.l.google.com:19302"]}]}}initializeCall(t,r){return B(this,null,function*(){this.currentCallId=null,this.callStatus$.next("calling");let i=Er(Sn(this.db,"calls"));this.currentCallId=i.id,yield this.setupLocalMedia(),this.setupPeerConnection(this.currentCallId),this.localStream&&this.localStream.getTracks().forEach(l=>{this.peerConnection&&this.localStream&&this.peerConnection.addTrack(l,this.localStream)});let o=yield this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!1});yield this.peerConnection.setLocalDescription(o);let s={id:this.currentCallId,conversationId:t,callerName:r,status:"offering",offer:{type:o.type,sdp:o.sdp},timestamp:new Date};yield FE(i,s),this.callDocSubscription=Ir(i,l=>B(this,null,function*(){let u=l.data();if(!(!this.peerConnection||!u)){if(this.peerConnection.signalingState==="have-local-offer"&&u.answer){let p=new RTCSessionDescription(u.answer);yield this.peerConnection.setRemoteDescription(p),this.callStatus$.next("connected"),this.candidateQueue.forEach(v=>{this.peerConnection?.addIceCandidate(v).catch(b=>console.error("Error adding buffered candidate",b))}),this.candidateQueue=[]}(u.status==="ended"||u.status==="rejected")&&this.endCallInternal()}}));let a=Sn(i,"answerCandidates");this.answerCandidatesSubscription=Ir(a,l=>{l.docChanges().forEach(u=>{if(u.type==="added"){let p=u.doc.data(),v=new RTCIceCandidate(p);this.peerConnection?.remoteDescription?this.peerConnection.addIceCandidate(v).catch(b=>console.error("Error adding candidate",b)):(console.log("Buffering candidate..."),this.candidateQueue.push(v))}})})})}answerCall(t){return B(this,null,function*(){this.currentCallId=t.id,this.callStatus$.next("connected");let r=Er(this.db,"calls",t.id);yield this.setupLocalMedia(),this.setupPeerConnection(t.id),this.localStream.getTracks().forEach(l=>{this.peerConnection.addTrack(l,this.localStream)});let i=t.offer;yield this.peerConnection.setRemoteDescription(new RTCSessionDescription(i));let o=yield this.peerConnection.createAnswer();yield this.peerConnection.setLocalDescription(o);let s={type:o.type,sdp:o.sdp};yield Bu(r,{answer:s,status:"answered"});let a=Sn(r,"offerCandidates");this.offerCandidatesSubscription=Ir(a,l=>{l.docChanges().forEach(u=>{if(u.type==="added"){let p=u.doc.data(),v=new RTCIceCandidate(p);this.peerConnection?.remoteDescription&&this.peerConnection.addIceCandidate(v).catch(b=>console.error("Error adding offer candidate",b))}})}),this.callDocSubscription=Ir(r,l=>{let u=l.data();u&&u.status==="ended"&&this.endCallInternal()})})}endCall(){return B(this,null,function*(){if(this.currentCallId){let t=Er(this.db,"calls",this.currentCallId);yield Bu(t,{status:"ended"}).catch(()=>{})}this.endCallInternal()})}rejectCall(t){let r=Er(this.db,"calls",t);Bu(r,{status:"rejected"}).catch(()=>{})}endCallInternal(){this.callStatus$.next("idle"),this.remoteStream$.next(null),this.localStream&&(this.localStream.getTracks().forEach(t=>t.stop()),this.localStream=null),this.remoteStream&&(this.remoteStream.getTracks().forEach(t=>t.stop()),this.remoteStream=null),this.peerConnection&&(this.peerConnection.close(),this.peerConnection=null),this.callDocSubscription&&(this.callDocSubscription(),this.callDocSubscription=null),this.offerCandidatesSubscription&&(this.offerCandidatesSubscription(),this.offerCandidatesSubscription=null),this.answerCandidatesSubscription&&(this.answerCandidatesSubscription(),this.answerCandidatesSubscription=null),this.currentCallId=null}setupLocalMedia(){return B(this,null,function*(){try{this.localStream=yield navigator.mediaDevices.getUserMedia({video:!1,audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}}),console.log("CallService: Local media acquired",this.localStream),this.localStream.getAudioTracks().forEach(t=>{console.log("Local Track:",t.label,t.readyState,t.enabled,t.muted),t.enabled=!0})}catch(t){throw console.error("CallService: Error getting user media",t),t}})}setupPeerConnection(t){this.peerConnection=new RTCPeerConnection(this.servers),this.peerConnection.oniceconnectionstatechange=()=>{let r=this.peerConnection?.iceConnectionState;console.log("CallService: ICE Connection State Change:",r),(r==="failed"||r==="disconnected")&&console.warn("CallService: Peer connection failed/disconnected. Check firewall/network."),r==="connected"&&console.log("CallService: P2P Connection Established!")},this.peerConnection.onicecandidateerror=r=>{console.error("CallService: ICE Candidate Error:",r.errorCode,r.errorText,r.url)},this.peerConnection.onicecandidate=r=>{if(r.candidate){console.log("CallService: Generated ICE Candidate:",r.candidate.type,r.candidate.address);let i="offerCandidates";this.peerConnection?.localDescription&&this.peerConnection.localDescription.type==="answer"&&(i="answerCandidates");let o=Sn(this.db,"calls",t,i);Ea(o,r.candidate.toJSON())}},this.peerConnection.ontrack=r=>{console.log("CallService: Received remote track",r.streams[0]);let i=r.streams[0];this.remoteStream=i,this.remoteStream$.next(i)}}listenForIncomingCalls(t){this.callDocSubscription;let r=Sn(this.db,"calls"),i=wa(r,ju("conversationId","==",t),ju("status","==","offering"),xa(1));return Ir(i,o=>{o.docChanges().forEach(s=>{if(s.type==="added"){let a=s.doc.data();a.id=s.doc.id,this.incomingCall$.next(a)}s.type==="removed"&&this.incomingCall$.next(null)})})}listenForAllIncomingCalls(){let t=Sn(this.db,"calls"),r=wa(t,ju("status","==","offering"),xa(1));return Ir(r,i=>{i.docChanges().forEach(o=>{if(o.type==="added"){let s=o.doc.data();s.id=o.doc.id,this.incomingCall$.next(s)}o.type==="removed"&&this.incomingCall$.next(null)})})}toggleMic(t){this.localStream&&this.localStream.getAudioTracks().forEach(r=>{r.enabled=!t})}setAudioOutput(t,r){return B(this,null,function*(){if("setSinkId"in r)try{return yield r.setSinkId(t),console.log(`Audio output set to ${t}`),!0}catch(i){return console.error("Error setting audio output:",i),!1}return console.warn("setSinkId not supported in this browser."),!1})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var CF=["messagesContainer"],wF=["remoteAudio"];function xF(n,e){if(n&1){let t=te();h(0,"div",5)(1,"div",6)(2,"h2"),g(3,"\u{1F4CB} Customer Information"),f(),h(4,"p",7),g(5,"Please provide your information to use the chat"),f(),h(6,"form",8),j("ngSubmit",function(){R(t);let i=I();return k(i.registerCustomer())}),h(7,"div",9)(8,"label",10),g(9,"Full Name *"),f(),h(10,"input",11),J("ngModelChange",function(i){R(t);let o=I();return Z(o.customerInfo.name,i)||(o.customerInfo.name=i),k(i)}),f()(),h(11,"div",9)(12,"label",12),g(13,"Phone Number *"),f(),h(14,"input",13),J("ngModelChange",function(i){R(t);let o=I();return Z(o.customerInfo.phoneNumber,i)||(o.customerInfo.phoneNumber=i),k(i)}),f()(),h(15,"div",9)(16,"label",14),g(17,"Delivery Address *"),f(),h(18,"textarea",15),J("ngModelChange",function(i){R(t);let o=I();return Z(o.customerInfo.address,i)||(o.customerInfo.address=i),k(i)}),f()(),h(19,"div",9)(20,"label"),g(21,"GPS Coordinates"),f(),h(22,"div",16)(23,"input",17),J("ngModelChange",function(i){R(t);let o=I();return Z(o.customerInfo.gpsCoordinates,i)||(o.customerInfo.gpsCoordinates=i),k(i)}),f(),h(24,"button",18),j("click",function(){R(t);let i=I();return k(i.getLocation())}),g(25,"\u{1F4CD}"),f()()(),h(26,"button",19),g(27," Start Chat "),f()()()()}if(n&2){let t=I();y(10),Y("ngModel",t.customerInfo.name),y(4),Y("ngModel",t.customerInfo.phoneNumber),y(4),Y("ngModel",t.customerInfo.address),D("readonly",t.isLocationReadOnly),y(5),Y("ngModel",t.customerInfo.gpsCoordinates),D("readonly",t.isLocationReadOnly)}}function EF(n,e){if(n&1&&(h(0,"div",50),g(1),f()),n&2){let t=I().$implicit,r=I(3);y(),q(r.unreadCounts[t])}}function IF(n,e){if(n&1){let t=te();h(0,"div",44),j("click",function(){let i=R(t).$implicit,o=I(3);return k(o.selectConversation(i))}),h(1,"div",45),g(2),f(),h(3,"div",46)(4,"span",47),g(5),f(),h(6,"span",48),g(7,"Click to view chat"),f()(),U(8,EF,2,1,"div",49),f()}if(n&2){let t=e.$implicit,r=I(3);_e("active",r.currentConversationId===t),y(2),q(r.getDisplayName(t).charAt(0).toUpperCase()),y(3),q(r.getDisplayName(t)),y(3),D("ngIf",r.unreadCounts[t]>0)}}function DF(n,e){n&1&&(h(0,"div",51),g(1," No conversations yet. "),f())}function SF(n,e){if(n&1&&(h(0,"div",40)(1,"div",41),g(2," Conversations "),f(),h(3,"div",42),U(4,IF,9,5,"div",43)(5,DF,2,0,"div",34),f()()),n&2){let t=I(2);y(4),D("ngForOf",t.conversations),y(),D("ngIf",t.conversations.length===0)}}function MF(n,e){if(n&1&&(h(0,"div"),g(1),f()),n&2){let t=I(3);y(),z("\u{1F4CD} ",t.getUserAddress(t.currentConversationId),"")}}function TF(n,e){if(n&1&&(h(0,"a",55),g(1),f()),n&2){let t=I(3);D("href","https://www.google.com/maps/search/?api=1&query="+t.getUserGps(t.currentConversationId),_n),y(),z(" \u{1F30D} ",t.getUserGps(t.currentConversationId)," ")}}function PF(n,e){if(n&1&&(h(0,"div",52),U(1,MF,2,1,"div",53)(2,TF,2,2,"a",54),f()),n&2){let t=I(2);y(),D("ngIf",t.getUserAddress(t.currentConversationId)),y(),D("ngIf",t.getUserGps(t.currentConversationId))}}function AF(n,e){if(n&1){let t=te();h(0,"button",56),j("click",function(){R(t);let i=I(2);return k(i.logout())}),g(1," \u{1F6AA} "),f()}}function OF(n,e){if(n&1){let t=te();h(0,"div",57)(1,"div",58)(2,"h3"),g(3,"\u{1F4DE} Incoming Call"),f(),h(4,"p"),g(5),f(),h(6,"div",59)(7,"button",60),j("click",function(){R(t);let i=I(2);return k(i.acceptCall())}),g(8,"Accept"),f(),h(9,"button",61),j("click",function(){R(t);let i=I(2);return k(i.rejectCall())}),g(10,"Reject"),f()()()()}if(n&2){let t=I(2);y(5),z("",t.incomingCall.callerName," is calling...")}}function NF(n,e){if(n&1){let t=te();h(0,"button",72),j("click",function(){R(t);let i=I(3);return k(i.toggleMic())}),g(1),f()}if(n&2){let t=I(3);_e("active",t.isMicMuted),y(),z(" ",t.isMicMuted?"\u{1F507}":"\u{1F399}\uFE0F"," ")}}function RF(n,e){if(n&1){let t=te();h(0,"div",62)(1,"div",58)(2,"div",63),g(3,"\u{1F464}"),f(),h(4,"h3"),g(5),f(),h(6,"p"),g(7),f(),h(8,"div",64),be(9,"audio",65,1),f(),h(11,"div",66),be(12,"div",67),f(),h(13,"div",68)(14,"button",69),j("click",function(){R(t);let i=I(2);return k(i.toggleSpeaker())}),g(15),f(),U(16,NF,2,3,"button",70),f(),h(17,"div",59)(18,"button",71),j("click",function(){R(t);let i=I(2);return k(i.endCall())}),g(19,"End Call"),f()()()()}if(n&2){let t=I(2);y(5),q(t.callStatus==="calling"?"Calling...":"Connected"),y(2),q(t.isAppUser?t.currentConversationId:"Support"),y(2),D("srcObject",t.remoteStream),y(3),bn("width",t.audioLevel,"%"),y(2),_e("active",t.isSpeakerOn),y(),z(" ",t.isSpeakerOn?"\u{1F50A}":"\u{1F508}"," "),y(),D("ngIf",t.isAppUser)}}function kF(n,e){if(n&1&&(h(0,"div",51),g(1),f()),n&2){let t=I(2);y(),z(" ",t.isAppUser&&!t.currentConversationId?"Select a conversation to start chatting.":"No messages yet. Start the conversation!"," ")}}function FF(n,e){if(n&1&&(h(0,"span",83),g(1),f()),n&2){let t=I().$implicit,r=I(2);y(),z(" \u{1F4CD} ",r.getUserAddress(t.senderName)," ")}}function VF(n,e){if(n&1&&(h(0,"a",84),g(1),f()),n&2){let t=I().$implicit,r=I(2);D("href","https://www.google.com/maps/search/?api=1&query="+r.getUserGps(t.senderName),_n),y(),z(" \u{1F30D} ",r.getUserGps(t.senderName)," ")}}function LF(n,e){if(n&1&&(h(0,"div",85),g(1),f()),n&2){let t=I().$implicit;y(),q(t.text)}}function jF(n,e){if(n&1&&(h(0,"div",86),be(1,"audio",87),f()),n&2){let t=I().$implicit;y(),D("src",t.audioBase64,_n)}}function BF(n,e){if(n&1){let t=te();h(0,"button",88),j("click",function(){R(t);let i=I().$implicit,o=I(2);return k(o.deleteMessage(i))}),g(1," \u{1F5D1}\uFE0F "),f()}}function UF(n,e){if(n&1&&(h(0,"div",73)(1,"div",74)(2,"span",75),g(3),f(),h(4,"div",76),U(5,FF,2,1,"span",77)(6,VF,2,2,"a",78),h(7,"span",79),g(8),f()()(),U(9,LF,2,1,"div",80)(10,jF,2,1,"div",81)(11,BF,2,0,"button",82),f()),n&2){let t=e.$implicit,r=I(2);_e("my-message",r.isMyMessage(t))("other-message",!r.isMyMessage(t)),y(3),q(t.senderName),y(2),D("ngIf",!r.isMyMessage(t)&&r.getUserAddress(t.senderName)),y(),D("ngIf",!r.isMyMessage(t)&&r.getUserGps(t.senderName)),y(2),q(r.formatTime(t.timestamp)),y(),D("ngIf",t.text),y(),D("ngIf",t.audioBase64),y(),D("ngIf",r.isMyMessage(t))}}function $F(n,e){if(n&1){let t=te();h(0,"div",20),U(1,SF,6,2,"div",21),h(2,"div",22)(3,"div",23)(4,"div",24)(5,"h2"),g(6),f(),U(7,PF,3,2,"div",25),h(8,"div",26)(9,"span",27),g(10),f(),h(11,"button",28),j("click",function(){R(t);let i=I();return k(i.changeInfo())}),g(12," \u270F\uFE0F "),f(),U(13,AF,2,0,"button",29),h(14,"button",30),j("click",function(){R(t);let i=I();return k(i.startCall())}),g(15," \u{1F4DE} "),f()()()(),U(16,OF,11,1,"div",31)(17,RF,20,9,"div",32),h(18,"div",33,0),U(20,kF,2,1,"div",34)(21,UF,12,11,"div",35),f(),h(22,"div",36)(23,"input",37),J("ngModelChange",function(i){R(t);let o=I();return Z(o.newMessage,i)||(o.newMessage=i),k(i)}),j("keyup.enter",function(){R(t);let i=I();return k(i.sendMessage())}),f(),h(24,"button",38),j("click",function(){R(t);let i=I();return k(i.sendMessage())}),g(25," Send "),f(),h(26,"button",39),j("mousedown",function(i){R(t);let o=I();return k(o.startRecording(i))})("mouseup",function(i){R(t);let o=I();return k(o.stopRecording(i))})("mouseleave",function(i){R(t);let o=I();return k(o.stopRecording(i))})("touchstart",function(i){R(t);let o=I();return k(o.startRecording(i))})("touchend",function(i){R(t);let o=I();return k(o.stopRecording(i))}),g(27),f()()()()}if(n&2){let t=I();y(),D("ngIf",t.isAppUser),y(5),z(" \u{1F4AC} ",t.isAppUser&&t.currentConversationId?"Chat with "+t.getDisplayName(t.currentConversationId):"Customer Support Chat"," "),y(),D("ngIf",t.isAppUser&&t.currentConversationId),y(3),q(t.senderName),y(3),D("ngIf",!t.isAppUser),y(),D("disabled",t.isAppUser&&!t.currentConversationId),y(2),D("ngIf",t.callStatus==="incoming"&&t.incomingCall),y(),D("ngIf",t.callStatus==="connected"||t.callStatus==="calling"),y(3),D("ngIf",t.messages.length===0),y(),D("ngForOf",t.messages),y(2),Y("ngModel",t.newMessage),D("disabled",t.isAppUser&&!t.currentConversationId),y(),D("disabled",!t.newMessage.trim()||t.isAppUser&&!t.currentConversationId),y(2),_e("recording",t.isRecording),D("disabled",t.isAppUser&&!t.currentConversationId),y(),z(" ",t.isRecording?"\u{1F534}":"\u{1F399}\uFE0F"," ")}}var UE=(()=>{class n{constructor(t,r,i,o){this.chatService=t,this.customerService=r,this.userService=i,this.callService=o,this.messages=[],this.newMessage="",this.senderName="",this.isOpen=!1,this.totalUnreadCountChange=new Bt,this.isLocationReadOnly=!0,this.shouldScroll=!1,this.userNamesCache=new Map,this.userAddressesCache=new Map,this.userGpsCache=new Map,this.isRegistered=!1,this.customerInfo={name:"",phoneNumber:"",address:"N/A",gpsCoordinates:"N/A"},this.allCustomers=[],this.errorMessage="",this.isAppUser=!1,this.currentConversationId="",this.conversations=[],this.callStatus="idle",this.incomingCall=null,this.remoteStream=null,this.notificationAudioContext=null,this.audioUnlocked=!1,this.allMessagesCached=[],this.unreadCounts={},this.conversationMessageCounts={},this.isSpeakerOn=!1,this.isMicMuted=!1,this.audioLevel=0,this.audioContext=null,this.analyser=null,this.source=null,this.dataArray=null,this.animationFrameId=null,this.ringInterval=null,this.isRecording=!1,this.mediaRecorder=null,this.audioChunks=[],this.requestNotificationPermission()}ngOnChanges(t){if(t.isOpen&&this.isOpen){let r=localStorage.getItem("chatCustomerInfo");if(r&&!this.isRegistered)try{let i=JSON.parse(r);i.expiresAt&&Date.now()>i.expiresAt?(localStorage.removeItem("chatCustomerInfo"),localStorage.removeItem("chatUserName"),console.log("Chat credentials expired, cleared from storage")):this.checkLoginAndStatus()}catch(i){console.error("Error parsing chat credentials",i),localStorage.removeItem("chatCustomerInfo"),localStorage.removeItem("chatUserName")}this.updateFilteredMessages(!1),this.shouldScroll=!0}}requestNotificationPermission(){"Notification"in window&&Notification.requestPermission()}onVisibilityChange(){document.hidden||(document.title="JJM Inventory")}unlockAudioContext(){if(this.audioUnlocked)return;if(!this.notificationAudioContext){let r=window.AudioContext||window.webkitAudioContext;this.notificationAudioContext=new r}let t=this.notificationAudioContext;if(t){t.state==="suspended"&&t.resume();try{let r=t.createBuffer(1,1,22050),i=t.createBufferSource();i.buffer=r,i.connect(t.destination),i.start(0),this.audioUnlocked=!0,console.log("ChatComponent: AudioContext unlocked via user interaction.")}catch(r){console.error("ChatComponent: Failed to unlock audio",r)}}}onUserInteraction(){this.unlockAudioContext()}ngOnInit(){this.customerSubscription=this.customerService.getCustomers().subscribe({next:t=>{this.allCustomers=t,this.checkLoginAndStatus()},error:t=>{console.error("Failed to load customers",t),this.checkLoginAndStatus()}}),this.logoutSubscription=this.chatService.logout$.subscribe(()=>{this.performForceLogout()}),this.callStatusSubscription=this.callService.callStatus$.subscribe(t=>{this.callStatus=t,t!=="incoming"&&this.stopRinging()}),this.incomingCallSubscription=this.callService.incomingCall$.subscribe(t=>{if(!t){this.callStatus==="incoming"&&(this.incomingCall=null,this.callStatus="idle",this.stopRinging());return}this.callStatus==="idle"&&t.callerName!==this.senderName&&(this.incomingCall=t,this.callStatus="incoming",this.startRinging())}),this.callService.remoteStream$.subscribe(t=>{this.remoteStream=t,t&&this.remoteAudio&&setTimeout(()=>{let r=this.remoteAudio.nativeElement;r.srcObject=t,r.muted=!1,r.volume=1;let i=t.getAudioTracks();i.length>0?(console.log("ChatComponent: Audio track found",i[0].label,"Enabled:",i[0].enabled,"Muted:",i[0].muted),i[0].enabled=!0):console.warn("ChatComponent: No audio tracks in stream!"),r.onloadedmetadata=()=>{console.log("ChatComponent: Audio metadata loaded, attempting play..."),r.play().then(()=>{console.log("ChatComponent: Audio playing successfully"),this.setupAudioVisualizer(t)}).catch(o=>console.error("ChatComponent: Error playing audio:",o))}},100)})}performForceLogout(){localStorage.removeItem("chatCustomerInfo"),localStorage.removeItem("chatUserName"),this.isRegistered=!1,this.isAppUser=!1,this.senderName="",this.conversations=[],this.currentConversationId="",this.customerInfo={name:"",phoneNumber:"",address:"N/A",gpsCoordinates:"N/A"},this.messages=[]}checkLoginAndStatus(){let t=localStorage.getItem("jjm_logged_in")==="true",r=localStorage.getItem("jjm_username"),i=localStorage.getItem("jjm_user_id");if(t){if(this.isAppUser=!0,this.isRegistered=!0,this.errorMessage="",this.senderName=r||"User",this.loadMessages(),this.incomingCallListener&&this.incomingCallListener(),this.incomingCallListener=this.callService.listenForAllIncomingCalls(),i){let s=this.userService.getUserById(i);s?this.senderName=s.fullName||s.username:this.userService.users$.pipe(ci(1)).subscribe(a=>{let l=a.find(u=>u.id===i);l&&(this.senderName=l.fullName||l.username)})}return}let o=localStorage.getItem("chatCustomerInfo");if(o){let s=JSON.parse(o);if(s.expiresAt&&Date.now()>s.expiresAt){localStorage.removeItem("chatCustomerInfo"),localStorage.removeItem("chatUserName"),this.isRegistered=!1,this.getLocation(!0),console.log("Chat credentials expired after 2 hours");return}this.customerInfo=s,this.senderName=this.customerInfo.name,this.isRegistered=!0,this.loadMessages(),this.incomingCallListener&&this.incomingCallListener(),this.incomingCallListener=this.callService.listenForIncomingCalls(this.senderName),this.allCustomers.find(l=>l.phoneNumber===s.phoneNumber)||console.log("Customer not yet in database, but logged in via localStorage")}else this.getLocation(!0)}ngAfterViewChecked(){this.shouldScroll&&(this.scrollToBottom(),this.shouldScroll=!1)}ngOnDestroy(){this.customerSubscription&&this.customerSubscription.unsubscribe(),this.logoutSubscription&&this.logoutSubscription.unsubscribe(),this.incomingCallSubscription&&this.incomingCallSubscription.unsubscribe(),this.callStatusSubscription&&this.callStatusSubscription.unsubscribe(),this.incomingCallListener&&this.incomingCallListener()}registerCustomer(){if(this.errorMessage="",!this.customerInfo.name.trim()){alert("Please enter your name");return}if(!this.customerInfo.phoneNumber.trim()){alert("Please enter your phone number");return}if(!this.customerInfo.address.trim()){alert("Please enter your address");return}if(!/^[\d\s\-\+\(\)]+$/.test(this.customerInfo.phoneNumber)){alert("Please enter a valid phone number");return}if(this.allCustomers.length>0){if(!this.allCustomers.find(i=>i.name.toLowerCase()===this.customerInfo.name.trim().toLowerCase())){alert("Access Denied: You must be a registered customer to use the chat.");return}}else console.warn("Customer verification skipped: Customer list is empty or failed to load.");localStorage.setItem("chatCustomerInfo",JSON.stringify(this.customerInfo)),localStorage.setItem("chatUserName",this.customerInfo.name),this.senderName=this.customerInfo.name,this.isRegistered=!0,this.isRegistered=!0,this.loadMessages(),this.callService.listenForIncomingCalls(this.senderName)}notifyUser(t){this.isMyMessage(t)||(this.playNotificationSound(),document.hidden&&"Notification"in window&&Notification.permission==="granted"&&(new Notification("New Message",{body:t.text||"You received a new audio message",icon:"/assets/icons/icon-72x72.png"}),document.title=`New Message from ${t.senderName}`))}loadMessages(){if(this.messagesSubscription){this.updateFilteredMessages(!1);return}this.messagesSubscription=this.chatService.getMessages().subscribe({next:t=>{if(this.allMessagesCached=t,this.isAppUser){let i=new Map,o=new Set,s=new Map;t.forEach(a=>{a.conversationId&&(o.add(a.conversationId),i.set(a.conversationId,(i.get(a.conversationId)||0)+1),s.set(a.conversationId,a))}),this.conversations=Array.from(o),this.userService.users$.pipe(ci(1)).subscribe(a=>{this.conversations.forEach(l=>{if(!this.userNamesCache.has(l)||!this.userAddressesCache.get(l)||!this.userGpsCache.get(l)){let u=a.find(p=>p.username===l||p.fullName===l||p.id===l);if(u)this.userNamesCache.set(l,u.fullName||u.username),this.userAddressesCache.set(l,u.address||""),this.userGpsCache.set(l,u.gpsCoordinates||"");else{let p=this.allCustomers.find(v=>v.name===l);p?(this.userNamesCache.set(l,p.name),this.userAddressesCache.set(l,p.deliveryAddress),this.userGpsCache.set(l,p.gpsCoordinates||"")):this.userNamesCache.set(l,l)}}})}),this.conversations.forEach(a=>{let l=i.get(a)||0,u=this.conversationMessageCounts[a]||0;if(this.unreadCounts[a]=t.filter(p=>p.conversationId===a&&!p.isRead&&!this.isMyMessage(p)).length,l>u){let p=s.get(a);p&&this.notifyUser(p)}this.conversationMessageCounts[a]=l})}let r=0;this.isAppUser?r=Object.values(this.unreadCounts).reduce((i,o)=>i+o,0):r=t.filter(i=>!i.isRead&&!this.isMyMessage(i)).length,this.totalUnreadCountChange.emit(r),this.updateFilteredMessages(!this.isAppUser)},error:t=>{console.error("Error loading messages:",t)}})}getDisplayName(t){return this.userNamesCache.get(t)||t}getUserAddress(t){return this.userAddressesCache.get(t)||""}getUserGps(t){return this.userGpsCache.get(t)||""}updateFilteredMessages(t){let r=this.isAppUser?this.currentConversationId:this.senderName,i=this.allMessagesCached.filter(l=>r?l.conversationId===r:!1),o=this.messages.length,s=i.length,a=o>0;if(this.messages=i,this.isOpen&&r){let l=i.filter(u=>!u.isRead&&!this.isMyMessage(u)).map(u=>u.id);l.length>0&&this.chatService.markAsRead(l)}if(t&&a&&s>o){let l=i[s-1];this.isMyMessage(l)||(this.playNotificationSound(),document.hidden&&"Notification"in window&&Notification.permission==="granted"&&(new Notification("New Message",{body:l.text||"You received a new audio message",icon:"/assets/icons/icon-72x72.png"}),document.title=`(${s-o}) New Message - JJM Inventory`))}(!a||s>o)&&(this.shouldScroll=!0,setTimeout(()=>this.scrollToBottom(),100))}playNotificationSound(){try{let t=this.notificationAudioContext;if(!t){let a=window.AudioContext||window.webkitAudioContext;a&&(t=new a)}if(!t)return;t.state==="suspended"&&t.resume().catch(a=>console.warn("Could not resume audio context",a));let r=t.currentTime,i=t.createOscillator(),o=t.createOscillator(),s=t.createGain();i.type="sine",o.type="sine",i.frequency.setValueAtTime(1200,r),o.frequency.setValueAtTime(2400,r),i.connect(s),o.connect(s),s.connect(t.destination),s.gain.setValueAtTime(0,r),s.gain.linearRampToValueAtTime(.5,r+.02),s.gain.exponentialRampToValueAtTime(.01,r+.6),i.start(r),o.start(r),i.stop(r+.6),o.stop(r+.6)}catch(t){console.warn("Audio playback failed",t)}}startRinging(){if(this.ringInterval)return;let t=()=>{try{let r=window.AudioContext||window.webkitAudioContext,i=new r,o=i.createOscillator(),s=i.createOscillator(),a=i.createGain();o.connect(a),s.connect(a),a.connect(i.destination),o.frequency.value=440,s.frequency.value=480,a.gain.setValueAtTime(0,i.currentTime),a.gain.linearRampToValueAtTime(.5,i.currentTime+.1),a.gain.setValueAtTime(.5,i.currentTime+1.8),a.gain.linearRampToValueAtTime(0,i.currentTime+2),o.start(i.currentTime),s.start(i.currentTime),o.stop(i.currentTime+2),s.stop(i.currentTime+2),setTimeout(()=>{i.state!=="closed"&&i.close()},2500)}catch(r){console.warn("Ring playback failed",r)}};t(),this.ringInterval=setInterval(t,4e3)}stopRinging(){this.ringInterval&&(clearInterval(this.ringInterval),this.ringInterval=null)}sendMessage(){if(!this.newMessage.trim())return;let t=this.isAppUser?this.currentConversationId:this.senderName;if(this.isAppUser&&!t){alert("Please select a conversation first.");return}this.chatService.sendMessage(this.newMessage,this.senderName,t).then(()=>{this.newMessage="",this.shouldScroll=!0}).catch(r=>{console.error("Error sending message:",r),alert("Failed to send message. Please try again.")})}getLocation(t=!1){"geolocation"in navigator?navigator.geolocation.getCurrentPosition(r=>{let i=r.coords.latitude,o=r.coords.longitude;this.customerInfo.gpsCoordinates=`${i.toFixed(6)}, ${o.toFixed(6)}`,this.customerInfo.address||this.fetchAddressFromGps(i,o)},r=>{console.error("Error getting location",r),t||(this.isLocationReadOnly=!1,alert("Unable to retrieve location. Please enter manually."))}):t||(this.isLocationReadOnly=!1,alert("Geolocation is not supported by your browser."))}fetchAddressFromGps(t,r){return B(this,null,function*(){try{let i=yield fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${t}&lon=${r}`);if(i.ok){let o=yield i.json();o.display_name&&(this.customerInfo.address=o.display_name)}}catch(i){console.warn("Failed to reverse geocode",i)}})}selectConversation(t){this.currentConversationId=t,this.unreadCounts[t]=0,this.updateFilteredMessages(!1)}scrollToBottom(){if(this.messagesContainer)try{this.messagesContainer.nativeElement.scrollTop=this.messagesContainer.nativeElement.scrollHeight}catch(t){console.error("Scroll error:",t)}}formatTime(t){return new Date(t).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})}isMyMessage(t){let r=localStorage.getItem("jjm_user_id");return this.isAppUser&&r&&t.userId===r?!0:t.senderName===this.senderName}changeInfo(){alert("Do you want to update your customer information?"),this.isRegistered=!1}startRecording(t){t&&(t.preventDefault(),t.stopPropagation()),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!0}).then(r=>{this.mediaRecorder=new MediaRecorder(r),this.mediaRecorder.start(),this.isRecording=!0,this.audioChunks=[],this.mediaRecorder.addEventListener("dataavailable",i=>{i.data.size>0&&this.audioChunks.push(i.data)}),this.mediaRecorder.addEventListener("stop",()=>{let i=new Blob(this.audioChunks,{type:"audio/webm"}),o=new FileReader;o.readAsDataURL(i),o.onloadend=()=>{let s=o.result;s&&this.sendAudio(s)},r.getTracks().forEach(s=>s.stop())})}).catch(r=>{console.error("Error accessing microphone:",r),alert("Could not access microphone. Please allow permissions."),this.isRecording=!1}):alert("Audio recording is not supported in this browser.")}stopRecording(t){t&&(t.preventDefault(),t.stopPropagation()),this.mediaRecorder&&this.isRecording&&(this.mediaRecorder.stop(),this.isRecording=!1)}cancelRecording(){this.mediaRecorder&&this.isRecording&&this.stopRecording()}sendAudio(t){let r=this.isAppUser?this.currentConversationId:this.senderName;if(this.isAppUser&&!r){alert("Please select a conversation first.");return}this.chatService.sendAudioMessage(t,this.senderName,r).then(()=>{this.shouldScroll=!0}).catch(i=>{console.error("Error sending audio message:",i),alert("Failed to send audio message.")})}deleteMessage(t){this.isMyMessage(t)&&confirm("Are you sure you want to delete this message?")&&this.chatService.deleteMessage(t.id).catch(r=>{console.error("Error deleting message:",r),alert("Failed to delete message.")})}logout(){if(this.isAppUser){alert("You cannot logout of chat while logged into the application.");return}confirm("Are you sure you want to logout? Your information will be cleared.")&&(localStorage.removeItem("chatCustomerInfo"),localStorage.removeItem("chatUserName"),this.isRegistered=!1,this.customerInfo={name:"",phoneNumber:"",address:""},this.messages=[])}startCall(){let t=this.isAppUser?this.currentConversationId:this.senderName;if(!t){alert("Cannot start call: Unknown conversation.");return}this.callService.initializeCall(t,this.senderName)}acceptCall(){this.incomingCall&&(this.callService.answerCall(this.incomingCall),this.incomingCall=null)}rejectCall(){this.incomingCall&&(this.callService.rejectCall(this.incomingCall.id),this.incomingCall=null,this.callStatus="idle",this.stopRinging())}endCall(){this.callService.endCall(),this.isSpeakerOn=!1,this.isMicMuted=!1,this.cleanupAudioVisualizer()}setupAudioVisualizer(t){this.cleanupAudioVisualizer();try{let r=window.AudioContext||window.webkitAudioContext;this.audioContext=new r,this.audioContext.state==="suspended"&&(console.log("ChatComponent: AudioContext suspended. Attempting to resume..."),this.audioContext.resume().then(()=>console.log("ChatComponent: AudioContext resumed!"))),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=64,this.source=this.audioContext.createMediaStreamSource(t),this.source.connect(this.analyser),this.dataArray=new Uint8Array(this.analyser.frequencyBinCount);let i=()=>{if(!this.analyser||!this.dataArray)return;this.analyser.getByteFrequencyData(this.dataArray);let o=0;for(let a=0;a<this.dataArray.length;a++)o+=this.dataArray[a];let s=o/this.dataArray.length;this.audioLevel=Math.min(100,Math.max(0,s/255*300)),this.animationFrameId=requestAnimationFrame(i)};i()}catch(r){console.error("Error setting up visualizer",r)}}cleanupAudioVisualizer(){this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),this.source&&(this.source.disconnect(),this.source=null),this.audioContext&&(this.audioContext.close().catch(()=>{}),this.audioContext=null),this.audioLevel=0}toggleSpeaker(){return B(this,null,function*(){if(this.isSpeakerOn=!this.isSpeakerOn,this.remoteAudio&&this.remoteAudio.nativeElement){let r=(yield navigator.mediaDevices.enumerateDevices()).filter(i=>i.kind==="audiooutput");if(r.length>1&&this.isSpeakerOn){let i=r[0].deviceId==="default"?r[1].deviceId:r[0].deviceId;yield this.callService.setAudioOutput(i,this.remoteAudio.nativeElement)}else yield this.callService.setAudioOutput("default",this.remoteAudio.nativeElement)}})}toggleMic(){this.isMicMuted=!this.isMicMuted,this.callService.toggleMic(this.isMicMuted)}static{this.\u0275fac=function(r){return new(r||n)(Q(Uu),Q(Ur),Q(yo),Q(BE))}}static{this.\u0275cmp=Re({type:n,selectors:[["app-chat"]],viewQuery:function(r,i){if(r&1&&(Df(CF,5),Df(wF,5)),r&2){let o;Sf(o=Mf())&&(i.messagesContainer=o.first),Sf(o=Mf())&&(i.remoteAudio=o.first)}},hostBindings:function(r,i){r&1&&j("visibilitychange",function(){return i.onVisibilityChange()},!1,Ss)("click",function(){return i.onUserInteraction()},!1,Ss)("touchstart",function(){return i.onUserInteraction()},!1,Ss)("keydown",function(){return i.onUserInteraction()},!1,Ss)},inputs:{isOpen:"isOpen"},outputs:{totalUnreadCountChange:"totalUnreadCountChange"},standalone:!0,features:[Ei,ke],decls:3,vars:2,consts:[["messagesContainer",""],["remoteAudio",""],[1,"chat-container"],["class","registration-container",4,"ngIf"],["class","chat-wrapper",4,"ngIf"],[1,"registration-container"],[1,"registration-card"],[1,"registration-subtitle"],[1,"registration-form",3,"ngSubmit"],[1,"form-group"],["for","customerName"],["type","text","id","customerName","name","customerName","placeholder","Enter your full name","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","phoneNumber"],["type","tel","id","phoneNumber","name","phoneNumber","placeholder","e.g., +1 234 567 8900","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","address"],["id","address","name","address","placeholder","Address will be detected automatically...","rows","3","required","",1,"form-textarea",3,"ngModelChange","ngModel","readonly"],[2,"display","flex","gap","8px"],["type","text","name","gpsCoordinates","placeholder","Lat, Lng (Auto-detected)",1,"form-input",3,"ngModelChange","ngModel","readonly"],["type","button",1,"btn-location",3,"click"],["type","submit",1,"btn-register"],[1,"chat-wrapper"],["class","chat-sidebar",4,"ngIf"],[1,"chat-main-area"],[1,"chat-header"],[1,"header-content"],["class","header-details-subtitle",4,"ngIf"],[1,"user-info"],[1,"user-name"],["title","Edit information",1,"btn-edit",3,"click"],["class","btn-logout","title","Logout",3,"click",4,"ngIf"],["title","Start Audio Call",1,"btn-call",3,"click","disabled"],["class","call-overlay incoming",4,"ngIf"],["class","call-overlay active",4,"ngIf"],[1,"messages-container"],["class","no-messages",4,"ngIf"],["class","message",3,"my-message","other-message",4,"ngFor","ngForOf"],[1,"input-container"],["type","text","placeholder","Type a message...",1,"message-input",3,"ngModelChange","keyup.enter","ngModel","disabled"],[1,"btn-send",3,"click","disabled"],["title","Hold to talk",1,"btn-mic",3,"mousedown","mouseup","mouseleave","touchstart","touchend","disabled"],[1,"chat-sidebar"],[1,"sidebar-header"],[1,"conversation-list"],["class","conversation-item",3,"active","click",4,"ngFor","ngForOf"],[1,"conversation-item",3,"click"],[1,"conv-avatar"],[1,"conv-info"],[1,"conversation-name"],[1,"conversation-preview"],["class","active-indicator",4,"ngIf"],[1,"active-indicator"],[1,"no-messages"],[1,"header-details-subtitle"],[4,"ngIf"],["target","_blank","style","color: inherit; text-decoration: none; display: flex; align-items: center; gap: 4px;",3,"href",4,"ngIf"],["target","_blank",2,"color","inherit","text-decoration","none","display","flex","align-items","center","gap","4px",3,"href"],["title","Logout",1,"btn-logout",3,"click"],[1,"call-overlay","incoming"],[1,"call-content"],[1,"call-actions"],[1,"btn-accept",3,"click"],[1,"btn-reject",3,"click"],[1,"call-overlay","active"],[1,"call-avatar","pulsing"],[2,"opacity","0","height","0","width","0","overflow","hidden","position","absolute","pointer-events","none"],["autoplay","","playsinline","","controls","",3,"srcObject"],["title","Audio Signal Strength",1,"volume-meter"],[1,"volume-bar"],[1,"call-utilities"],["title","Toggle Speaker",1,"btn-round",3,"click"],["class","btn-round","title","Toggle Microphone",3,"active","click",4,"ngIf"],[1,"btn-end",3,"click"],["title","Toggle Microphone",1,"btn-round",3,"click"],[1,"message"],[1,"message-header"],[1,"sender-name"],[1,"message-meta"],["class","message-address",4,"ngIf"],["class","message-address gps-link","target","_blank","title","View on Google Maps",3,"href",4,"ngIf"],[1,"message-time"],["class","message-text",4,"ngIf"],["class","message-audio",4,"ngIf"],["class","btn-delete-msg","title","Delete message",3,"click",4,"ngIf"],[1,"message-address"],["target","_blank","title","View on Google Maps",1,"message-address","gps-link",3,"href"],[1,"message-text"],[1,"message-audio"],["controls","",3,"src"],["title","Delete message",1,"btn-delete-msg",3,"click"]],template:function(r,i){r&1&&(h(0,"div",2),U(1,xF,28,6,"div",3)(2,$F,28,17,"div",4),f()),r&2&&(y(),D("ngIf",!i.isRegistered),y(),D("ngIf",i.isRegistered))},dependencies:[Ne,nt,He,ot,zn,rt,it,$n,Kt,Ze,xn],styles:[".chat-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;background:var(--color-surface);overflow:hidden}.registration-container[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:center;min-height:100%;padding:var(--space-lg);background:linear-gradient(135deg,#3b82f60d,#9333ea0d);overflow-y:auto;scroll-behavior:smooth}.registration-card[_ngcontent-%COMP%]{background:var(--color-surface);border-radius:var(--radius-lg);padding:var(--space-xl);max-width:500px;width:100%;margin:auto;box-shadow:0 10px 25px #0000001a;animation:_ngcontent-%COMP%_fadeInUp .5s ease-out}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.registration-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 var(--space-sm) 0;font-size:1.875rem;font-weight:700;text-align:center;color:var(--color-primary)}.registration-subtitle[_ngcontent-%COMP%]{text-align:center;color:var(--color-text-muted);margin-bottom:var(--space-xl);font-size:.9375rem}.registration-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xs)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;font-size:.9375rem;color:var(--color-text)}.form-input[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{padding:.75rem 1rem;border:2px solid var(--color-border);border-radius:var(--radius-md);font-size:.9375rem;font-family:inherit;background:var(--color-bg);color:var(--color-text);transition:all .2s}.form-input[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f61a}.form-textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.btn-register[_ngcontent-%COMP%]{margin-top:var(--space-md);padding:.875rem 1.5rem;background:linear-gradient(135deg,var(--color-primary),var(--color-accent));color:#fff;border:none;border-radius:var(--radius-md);font-weight:600;font-size:1rem;cursor:pointer;transition:all .3s;box-shadow:0 4px 12px #3b82f64d}.btn-register[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 16px #3b82f666}.btn-register[_ngcontent-%COMP%]:active{transform:translateY(0)}.active-indicator[_ngcontent-%COMP%]{background-color:#ef4444;color:#fff;min-width:22px;height:22px;border-radius:11px;display:flex;align-items:center;justify-content:center;font-size:.75rem;font-weight:700;padding:0 6px;box-shadow:0 2px 5px #ef444466;animation:_ngcontent-%COMP%_bounceIn .3s cubic-bezier(.175,.885,.32,1.275)}@keyframes _ngcontent-%COMP%_bounceIn{0%{transform:scale(0);opacity:0}60%{transform:scale(1.2)}to{transform:scale(1);opacity:1}}.chat-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:100%}.chat-sidebar[_ngcontent-%COMP%]{width:280px;background:var(--color-surface);border-right:1px solid var(--color-border);display:flex;flex-direction:column}.chat-main-area[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;height:100%;position:relative}.sidebar-header[_ngcontent-%COMP%]{padding:var(--space-md);border-bottom:1px solid var(--color-border);font-weight:600;background:var(--color-bg)}.conversation-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:12px;display:flex;flex-direction:column;gap:8px}.conversation-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:10px 15px;border-radius:16px;background:#ffffff08;border:1px solid transparent;cursor:pointer;transition:all .2s cubic-bezier(.4,0,.2,1);margin-bottom:0}.conversation-item[_ngcontent-%COMP%]:hover{background:#ffffff14;transform:translateY(-1px);box-shadow:0 4px 12px #0000000d}.conversation-item.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-primary),var(--color-accent));border-color:transparent;box-shadow:0 4px 15px #3b82f64d}.conv-avatar[_ngcontent-%COMP%]{width:42px;height:42px;border-radius:50%;background:linear-gradient(135deg,#e0e7ff,#c7d2fe);color:#4f46e5;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1.1rem;flex-shrink:0;box-shadow:0 2px 5px #0000001a;transition:all .2s}.conversation-item.active[_ngcontent-%COMP%]   .conv-avatar[_ngcontent-%COMP%]{background:var(--color-surface);color:var(--color-primary);transform:scale(1.05);border:2px solid var(--color-primary)}.conv-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow:hidden;flex:1}.conversation-name[_ngcontent-%COMP%]{font-weight:600;font-size:.95rem;color:var(--color-text);margin-bottom:2px;transition:color .2s}.conversation-preview[_ngcontent-%COMP%]{font-size:.8rem;color:var(--color-text-muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;transition:color .2s}.conversation-item.active[_ngcontent-%COMP%]   .conversation-name[_ngcontent-%COMP%]{color:var(--color-text);font-weight:700}.conversation-item.active[_ngcontent-%COMP%]   .conversation-preview[_ngcontent-%COMP%]{color:#ffffffe6}.chat-header[_ngcontent-%COMP%]{padding:var(--space-lg);padding-bottom:2rem;background:linear-gradient(135deg,var(--color-primary),var(--color-accent));border-bottom:2px solid var(--color-border);position:relative;z-index:10;flex-shrink:0}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:var(--space-md);color:inherit}.chat-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:600}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);position:relative;z-index:20}.user-name[_ngcontent-%COMP%]{font-weight:500;padding:.5rem 1rem;background:#fff3;border-radius:20px;font-size:.9375rem}.btn-edit[_ngcontent-%COMP%], .btn-logout[_ngcontent-%COMP%]{background:#ffffff4d;border:2px solid rgba(255,255,255,.5);padding:.625rem;border-radius:50%;cursor:pointer;font-size:1.125rem;transition:all .2s;line-height:1;position:relative;z-index:30;pointer-events:auto;color:#fff;min-width:36px;min-height:36px;display:flex;align-items:center;justify-content:center}.btn-edit[_ngcontent-%COMP%]:hover, .btn-logout[_ngcontent-%COMP%]:hover{background:#ffffff80;transform:scale(1.15);border-color:#fff}.messages-container[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:var(--space-lg);background:var(--color-bg);display:flex;flex-direction:column;gap:var(--space-md)}.no-messages[_ngcontent-%COMP%]{text-align:center;color:var(--color-text-muted);padding:var(--space-xl);font-style:italic}.message[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-width:70%;animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.my-message[_ngcontent-%COMP%]{align-self:flex-end}.other-message[_ngcontent-%COMP%]{align-self:flex-start}.message-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;gap:var(--space-sm)}.sender-name[_ngcontent-%COMP%]{font-weight:600;font-size:.875rem;color:var(--color-text-muted)}.my-message[_ngcontent-%COMP%]   .sender-name[_ngcontent-%COMP%]{color:var(--color-primary)}.header-details-subtitle[_ngcontent-%COMP%]{position:absolute;top:70%;left:20px;font-size:.75rem;color:#fffffff2;display:flex;flex-direction:column;gap:2px}.btn-location[_ngcontent-%COMP%]{padding:.5rem;font-size:1.25rem;background:var(--color-surface);border:1px solid var(--color-border);border-radius:var(--radius-md);cursor:pointer;transition:all .2s}.btn-location[_ngcontent-%COMP%]:hover{background:var(--color-bg);transform:scale(1.05)}.message-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.message-address[_ngcontent-%COMP%]{font-size:.7rem;color:var(--color-text-muted);background:var(--color-border);padding:2px 6px;border-radius:4px;max-width:150px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.gps-link[_ngcontent-%COMP%]{text-decoration:none;cursor:pointer;transition:background-color .2s}.gps-link[_ngcontent-%COMP%]:hover{background:var(--color-bg);text-decoration:underline;color:var(--color-primary)}.message-time[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted)}.message-text[_ngcontent-%COMP%]{padding:.75rem 1rem;border-radius:12px;word-wrap:break-word;line-height:1.5}.my-message[_ngcontent-%COMP%]   .message-text[_ngcontent-%COMP%]{background:var(--color-primary);color:#fff;border-bottom-right-radius:4px}.other-message[_ngcontent-%COMP%]   .message-text[_ngcontent-%COMP%]{background:var(--color-surface);color:var(--color-text);border:1px solid var(--color-border);border-bottom-left-radius:4px}.input-container[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm);padding:var(--space-lg);background:var(--color-surface);border-top:1px solid var(--color-border)}.message-input[_ngcontent-%COMP%]{flex:1;padding:.75rem 1rem;border:1px solid var(--color-border);border-radius:24px;font-size:.9375rem;background:var(--color-bg);color:var(--color-text);transition:all .2s}.message-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f61a}.btn-send[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:var(--color-primary);color:#fff;border:none;border-radius:24px;font-weight:600;cursor:pointer;transition:all .2s}.btn-send[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--color-accent);transform:translateY(-1px);box-shadow:0 4px 8px #00000026}.btn-send[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--color-bg)}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--color-border);border-radius:4px}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--color-text-muted)}.registration-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.registration-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--color-bg)}.registration-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--color-border);border-radius:4px}.registration-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--color-text-muted)}textarea[readonly][_ngcontent-%COMP%], input[readonly][_ngcontent-%COMP%]{background-color:var(--color-bg);cursor:not-allowed;opacity:.8;color:var(--color-text-muted);border-color:var(--color-border)}@media (max-width: 640px){.message[_ngcontent-%COMP%]{max-width:85%}.chat-wrapper[_ngcontent-%COMP%]{flex-direction:column}.chat-sidebar[_ngcontent-%COMP%]{width:100%;height:auto;min-height:85px;flex-shrink:0;border-right:none;border-bottom:1px solid var(--color-border);display:flex;flex-direction:column}.conversation-list[_ngcontent-%COMP%]{flex-direction:row;overflow-x:auto;overflow-y:hidden;padding:10px;gap:12px}.conversation-item[_ngcontent-%COMP%]{padding:4px;border-radius:50%;background:transparent;flex-shrink:0;position:relative}.conv-info[_ngcontent-%COMP%]{display:none}.conv-avatar[_ngcontent-%COMP%]{width:48px;height:48px;font-size:1.25rem}.active-indicator[_ngcontent-%COMP%]{position:absolute;top:-2px;right:-2px;min-width:18px;height:18px;font-size:.7rem;border:2px solid var(--color-surface)}.chat-main-area[_ngcontent-%COMP%]{height:100%;overflow:hidden}.chat-header[_ngcontent-%COMP%]{padding:var(--space-md);padding-right:60px}.chat-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem;max-width:60%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.header-content[_ngcontent-%COMP%]{flex-direction:row;align-items:center}.user-info[_ngcontent-%COMP%]{font-size:.8rem}.btn-edit[_ngcontent-%COMP%], .btn-logout[_ngcontent-%COMP%]{padding:.4rem;min-width:32px;min-height:32px}.registration-card[_ngcontent-%COMP%]{padding:var(--space-lg)}.registration-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}}.btn-mic[_ngcontent-%COMP%]{width:46px;height:46px;border-radius:50%;border:none;background:var(--color-surface);border:1px solid var(--color-border);font-size:1.25rem;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center;flex-shrink:0;-webkit-user-select:none;user-select:none;touch-action:manipulation}.btn-mic[_ngcontent-%COMP%]:hover{background:var(--color-bg);transform:scale(1.05)}.btn-mic[_ngcontent-%COMP%]:active{transform:scale(.95)}.btn-mic.recording[_ngcontent-%COMP%]{background:#ef4444;border-color:#ef4444;color:#fff;transform:scale(1.1);animation:_ngcontent-%COMP%_pulse 1.5s infinite}@keyframes _ngcontent-%COMP%_pulse{0%{box-shadow:0 0 #ef444466}70%{box-shadow:0 0 0 10px #ef444400}to{box-shadow:0 0 #ef444400}}.message-audio[_ngcontent-%COMP%]{padding:.25rem;border-radius:12px;background:transparent;width:100%}audio[_ngcontent-%COMP%]{height:36px;max-width:100%;border-radius:18px}.btn-delete-msg[_ngcontent-%COMP%]{align-self:flex-end;background:transparent;border:none;font-size:.8rem;opacity:.5;cursor:pointer;padding:0;margin-top:4px;transition:opacity .2s}.btn-delete-msg[_ngcontent-%COMP%]:hover{opacity:1;transform:scale(1.1)}.btn-call[_ngcontent-%COMP%]{background:#10b98133;border:1px solid rgba(16,185,129,.5);color:#10b981;padding:.625rem;border-radius:50%;cursor:pointer;font-size:1.125rem;transition:all .2s;min-width:36px;min-height:36px;display:flex;align-items:center;justify-content:center}.btn-call[_ngcontent-%COMP%]:hover:not(:disabled){background:#10b98166;transform:scale(1.15);color:#fff;border-color:#fff}.btn-call[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;filter:grayscale(1)}.call-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#000000d9;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);z-index:100;display:flex;align-items:center;justify-content:center;animation:fadeIn .3s}.call-content[_ngcontent-%COMP%]{background:var(--color-surface);padding:2rem;border-radius:20px;text-align:center;width:90%;max-width:350px;box-shadow:0 20px 50px #00000080;border:1px solid var(--color-border)}.call-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:1rem 0;font-size:1.5rem}.call-avatar[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem;display:inline-block}.pulsing[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse-avatar 2s infinite}@keyframes _ngcontent-%COMP%_pulse-avatar{0%{transform:scale(1);opacity:1;text-shadow:0 0 0 rgba(16,185,129,.7)}50%{transform:scale(1.1);opacity:.8;text-shadow:0 0 20px rgba(16,185,129,0)}to{transform:scale(1);opacity:1;text-shadow:0 0 0 rgba(16,185,129,0)}}.call-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1rem;margin-top:2rem}.btn-accept[_ngcontent-%COMP%], .btn-reject[_ngcontent-%COMP%], .btn-end[_ngcontent-%COMP%]{padding:.8rem 1.5rem;border-radius:30px;font-weight:600;border:none;cursor:pointer;transition:transform .2s;color:#fff}.btn-accept[_ngcontent-%COMP%]{background:#10b981}.btn-reject[_ngcontent-%COMP%], .btn-end[_ngcontent-%COMP%]{background:#ef4444}.btn-accept[_ngcontent-%COMP%]:hover, .btn-reject[_ngcontent-%COMP%]:hover, .btn-end[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.call-utilities[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1.5rem;margin-bottom:2rem}.volume-meter[_ngcontent-%COMP%]{width:200px;height:6px;background:#fff3;border-radius:3px;margin:0 auto 1.5rem;overflow:hidden;position:relative}.volume-bar[_ngcontent-%COMP%]{height:100%;background:#10b981;width:0%;transition:width .1s linear}.btn-round[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;border:1px solid var(--color-border);background:var(--color-surface);font-size:1.5rem;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s;color:var(--color-text)}.btn-round[_ngcontent-%COMP%]:hover{background:var(--color-bg);transform:scale(1.1)}.btn-round.active[_ngcontent-%COMP%]{background:var(--color-surface);color:var(--color-primary);border-color:var(--color-primary)}"]})}}return n})();function zF(n,e){n&1&&(h(0,"div",10),g(1," Loading users... "),f())}function qF(n,e){if(n&1){let t=te();h(0,"tr")(1,"td")(2,"div",13)(3,"span",14),g(4),f(),g(5),f()(),h(6,"td"),g(7),f(),h(8,"td"),g(9),f(),h(10,"td")(11,"span",15),g(12),ae(13,"titlecase"),f()(),h(14,"td"),g(15),ae(16,"date"),f(),h(17,"td")(18,"div",16)(19,"button",17),j("click",function(){let i=R(t).$implicit,o=I(2);return k(o.openEditModal(i))}),g(20,"\u270F\uFE0F"),f(),h(21,"button",18),j("click",function(){let i=R(t).$implicit,o=I(2);return k(o.deleteUser(i.id))}),g(22,"\u{1F5D1}\uFE0F"),f()()()()}if(n&2){let t=e.$implicit;y(4),q(t.username.charAt(0).toUpperCase()),y(),z(" ",t.username," "),y(2),q(t.fullName),y(2),q(t.address||"-"),y(2),_e("admin",t.role==="admin"),y(),z(" ",Ts(13,8,t.role)," "),y(3),q(ge(16,10,t.createdAt,"mediumDate"))}}function HF(n,e){if(n&1&&(h(0,"table",11)(1,"thead")(2,"tr")(3,"th"),g(4,"Username"),f(),h(5,"th"),g(6,"Full Name"),f(),h(7,"th"),g(8,"Address"),f(),h(9,"th"),g(10,"Role"),f(),h(11,"th"),g(12,"Created At"),f(),h(13,"th"),g(14,"Actions"),f()()(),h(15,"tbody"),U(16,qF,23,13,"tr",12),f()()),n&2){let t=I();y(16),D("ngForOf",t.users)}}function GF(n,e){n&1&&(h(0,"div",19)(1,"p"),g(2,"No users found. (This shouldn't happen as default admin exists)"),f()())}function WF(n,e){n&1&&(h(0,"small",35),g(1,"Only enter if you wish to change it."),f())}function QF(n,e){if(n&1){let t=te();h(0,"div",20)(1,"div",21)(2,"h3"),g(3),f(),h(4,"div",22)(5,"label"),g(6,"Username"),f(),h(7,"input",23),J("ngModelChange",function(i){R(t);let o=I();return Z(o.currentUser.username,i)||(o.currentUser.username=i),k(i)}),f()(),h(8,"div",22)(9,"label"),g(10,"Full Name"),f(),h(11,"input",24),J("ngModelChange",function(i){R(t);let o=I();return Z(o.currentUser.fullName,i)||(o.currentUser.fullName=i),k(i)}),f()(),h(12,"div",22)(13,"label"),g(14,"Address"),f(),h(15,"input",25),J("ngModelChange",function(i){R(t);let o=I();return Z(o.currentUser.address,i)||(o.currentUser.address=i),k(i)}),f()(),h(16,"div",22)(17,"label"),g(18,"GPS Coordinates"),f(),h(19,"input",26),J("ngModelChange",function(i){R(t);let o=I();return Z(o.currentUser.gpsCoordinates,i)||(o.currentUser.gpsCoordinates=i),k(i)}),f()(),h(20,"div",22)(21,"label"),g(22,"Password"),f(),h(23,"input",27),J("ngModelChange",function(i){R(t);let o=I();return Z(o.formPassword,i)||(o.formPassword=i),k(i)}),f(),U(24,WF,2,0,"small",28),f(),h(25,"div",22)(26,"label"),g(27,"Role"),f(),h(28,"select",29),J("ngModelChange",function(i){R(t);let o=I();return Z(o.currentUser.role,i)||(o.currentUser.role=i),k(i)}),h(29,"option",30),g(30,"User"),f(),h(31,"option",31),g(32,"Admin"),f()()(),h(33,"div",32)(34,"button",33),j("click",function(){R(t);let i=I();return k(i.closeModal())}),g(35,"Cancel"),f(),h(36,"button",34),j("click",function(){R(t);let i=I();return k(i.saveUser())}),g(37),f()()()()}if(n&2){let t=I();y(3),q(t.isEditing?"Edit User":"Add New User"),y(4),Y("ngModel",t.currentUser.username),y(4),Y("ngModel",t.currentUser.fullName),y(4),Y("ngModel",t.currentUser.address),y(4),Y("ngModel",t.currentUser.gpsCoordinates),y(4),Y("ngModel",t.formPassword),D("placeholder",t.isEditing?"Leave blank to keep current":"Enter password"),y(),D("ngIf",t.isEditing),y(4),Y("ngModel",t.currentUser.role),y(9),q(t.isEditing?"Update":"Create")}}var $E=(()=>{class n{constructor(t){this.userService=t,this.users=[],this.isLoading=!1,this.isModalOpen=!1,this.isEditing=!1,this.currentUser={username:"",fullName:"",role:"user"},this.formPassword=""}ngOnInit(){this.loadUsers()}loadUsers(){this.isLoading=!0;let t=localStorage.getItem("jjm_user_id");this.userService.getUsers().subscribe(r=>{t?this.users=r.filter(i=>i.userId===t):this.users=r,this.isLoading=!1})}openAddModal(){this.isEditing=!1,this.formPassword="",this.currentUser={username:"",fullName:"",role:"user"},this.isModalOpen=!0}openEditModal(t){this.isEditing=!0,this.formPassword="",this.currentUser=ee({},t),this.isModalOpen=!0}closeModal(){this.isModalOpen=!1}saveUser(){if(!this.currentUser.username||!this.currentUser.role){alert("Please fill in username and role.");return}if(!this.isEditing&&!this.formPassword){alert("Password is required for new users.");return}if(this.isEditing&&this.currentUser.id){let t={id:this.currentUser.id,username:this.currentUser.username,fullName:this.currentUser.fullName,address:this.currentUser.address,gpsCoordinates:this.currentUser.gpsCoordinates,role:this.currentUser.role};this.formPassword&&(t.password=this.formPassword),this.userService.updateUser(t).subscribe(()=>{this.closeModal()})}else{let t=localStorage.getItem("jjm_user_id")||"system",r=ue(ee({},this.currentUser),{password:this.formPassword,createdBy:t,userId:t});this.userService.addUser(r).subscribe(()=>{this.closeModal()})}}deleteUser(t){confirm("Are you sure you want to delete this user?")&&this.userService.deleteUser(t).subscribe()}static{this.\u0275fac=function(r){return new(r||n)(Q(yo))}}static{this.\u0275cmp=Re({type:n,selectors:[["app-user-management"]],standalone:!0,features:[ke],decls:16,vars:4,consts:[[1,"user-management-container"],[1,"page-header"],[1,"header-text"],[1,"subtitle"],[1,"btn-add",3,"click"],[1,"users-list-container"],["class","loading-state",4,"ngIf"],["class","users-table",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"loading-state"],[1,"users-table"],[4,"ngFor","ngForOf"],[1,"user-name-cell"],[1,"avatar"],[1,"role-badge"],[1,"actions"],["title","Edit",1,"btn-icon","edit",3,"click"],["title","Delete",1,"btn-icon","delete",3,"click"],[1,"empty-state"],[1,"modal-overlay"],[1,"modal-card"],[1,"form-group"],["type","text","placeholder","Enter username",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter full name",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter address (Optional)",3,"ngModelChange","ngModel"],["type","text","placeholder","Lat, Lng (Optional)",3,"ngModelChange","ngModel"],["type","text",3,"ngModelChange","ngModel","placeholder"],["class","hint",4,"ngIf"],[3,"ngModelChange","ngModel"],["value","user"],["value","admin"],[1,"modal-actions"],[1,"btn-cancel",3,"click"],[1,"btn-save",3,"click"],[1,"hint"]],template:function(r,i){r&1&&(h(0,"div",0)(1,"header",1)(2,"div",2)(3,"h2"),g(4,"\u{1F465} User Management"),f(),h(5,"p",3),g(6,"Manage system access and roles"),f()(),h(7,"button",4),j("click",function(){return i.openAddModal()}),h(8,"span"),g(9,"+"),f(),g(10," Add User "),f()(),h(11,"div",5),U(12,zF,2,0,"div",6)(13,HF,17,1,"table",7)(14,GF,3,0,"div",8),f(),U(15,QF,38,10,"div",9),f()),r&2&&(y(12),D("ngIf",i.isLoading),y(),D("ngIf",!i.isLoading&&i.users.length>0),y(),D("ngIf",!i.isLoading&&i.users.length===0),y(),D("ngIf",i.isModalOpen))},dependencies:[Ne,nt,He,ml,Un,ot,an,cn,rt,Ft,it,Ze],styles:[".user-management-container[_ngcontent-%COMP%]{padding:var(--space-xl);max-width:1200px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--space-xl);background:var(--color-surface);padding:var(--space-lg);border-radius:var(--radius-lg);box-shadow:var(--shadow-sm);border:1px solid var(--color-border)}.header-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;color:var(--color-text)}.subtitle[_ngcontent-%COMP%]{margin:4px 0 0;color:var(--color-text-muted);font-size:.875rem}.btn-add[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);padding:.75rem 1.5rem;background:var(--color-primary);color:#fff;border:none;border-radius:var(--radius-md);font-weight:600;cursor:pointer;transition:all .2s}.btn-add[_ngcontent-%COMP%]:hover{background:var(--color-accent);transform:translateY(-2px);box-shadow:var(--shadow-md)}.users-list-container[_ngcontent-%COMP%]{background:var(--color-surface);border-radius:var(--radius-lg);border:1px solid var(--color-border);overflow:hidden;box-shadow:var(--shadow-sm)}.users-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.users-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .users-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:var(--space-md) var(--space-lg);text-align:left;border-bottom:1px solid var(--color-border)}.users-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:var(--color-bg);font-weight:600;color:var(--color-text-muted);font-size:.875rem;text-transform:uppercase;letter-spacing:.5px}.users-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:var(--color-bg)}.user-name-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;font-weight:500}.avatar[_ngcontent-%COMP%]{width:32px;height:32px;background:var(--color-primary);color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.875rem;font-weight:700}.role-badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:999px;font-size:.75rem;font-weight:600;background:var(--color-bg);color:var(--color-text);border:1px solid var(--color-border)}.role-badge.admin[_ngcontent-%COMP%]{background:#3b82f61a;color:var(--color-primary);border-color:#3b82f633}.loading-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{padding:var(--space-2xl);text-align:center;color:var(--color-text-muted)}.actions[_ngcontent-%COMP%]{display:flex;gap:8px}.btn-icon[_ngcontent-%COMP%]{padding:6px;background:transparent;border:none;cursor:pointer;border-radius:4px;transition:background .2s}.btn-icon[_ngcontent-%COMP%]:hover{background:#0000000d}.btn-icon.delete[_ngcontent-%COMP%]:hover{background:#ef44441a}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.modal-card[_ngcontent-%COMP%]{background:var(--color-surface);padding:var(--space-xl);border-radius:var(--radius-lg);width:400px;max-width:90%;box-shadow:var(--shadow-xl);animation:_ngcontent-%COMP%_slideUp .3s cubic-bezier(.16,1,.3,1)}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 var(--space-lg) 0;font-size:1.25rem;color:var(--color-text)}.form-group[_ngcontent-%COMP%]{margin-bottom:var(--space-lg)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:var(--space-xs);font-weight:500;font-size:.875rem;color:var(--color-text)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-bg);color:var(--color-text);font-size:.9375rem}.hint[_ngcontent-%COMP%]{display:block;margin-top:4px;font-size:.75rem;color:var(--color-text-muted)}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:var(--space-md);margin-top:var(--space-xl)}.btn-cancel[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:transparent;border:1px solid var(--color-border);color:var(--color-text);border-radius:var(--radius-md);cursor:pointer;font-weight:500}.btn-save[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:var(--color-primary);color:#fff;border:none;border-radius:var(--radius-md);cursor:pointer;font-weight:600}"]})}}return n})();var zE=(()=>{class n{constructor(t){this.http=t,this.apiUrl=Vt.apiUrl}addReservation(t){return B(this,null,function*(){let r="RES-"+Date.now()+"-"+Math.floor(Math.random()*1e3),i=t.items.map(o=>{let s={productId:o.productId,productName:o.productName,category:"Reservation",price:o.price,quantitySold:o.quantity,total:o.price*o.quantity,cashReceived:0,change:0,timestamp:new Date().toISOString(),deliveryDate:t.pickupDate.toISOString(),deliveryNotes:`RESERVATION: ${t.customerName} (${t.customerContact}).
${t.notes||""}. Address: ${t.customerAddress||"N/A"}`,customerId:"",pending:!0,reservationStatus:"pending_confirmation",userId:"guest",orderId:r};return Ed(this.http.post(`${this.apiUrl}/sales`,s))});return yield Promise.all(i),"reservation-submitted"})}static{this.\u0275fac=function(r){return new(r||n)(se(wn))}}static{this.\u0275prov=de({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function YF(n,e){if(n&1){let t=te();h(0,"div",5)(1,"div",6),g(2,"\u2705"),f(),h(3,"p"),g(4),f(),h(5,"button",7),j("click",function(){R(t);let i=I();return k(i.successMessage="")}),g(6,"Make Another Reservation"),f()()}if(n&2){let t=I();y(4),q(t.successMessage)}}function JF(n,e){if(n&1&&(h(0,"option",32),g(1),f()),n&2){let t=e.$implicit;D("value",t),y(),q(t)}}function XF(n,e){if(n&1&&be(0,"img",47),n&2){let t=I().$implicit;D("src",t.imageUrl,_n)("alt",t.name)}}function ZF(n,e){n&1&&(h(0,"div",48),g(1,"\u{1F4E6}"),f())}function eV(n,e){if(n&1){let t=te();h(0,"div",33)(1,"div",34),U(2,XF,1,2,"img",35)(3,ZF,2,0,"div",36),f(),h(4,"div",37)(5,"h4",38),g(6),f(),h(7,"div",39)(8,"span",40),g(9),ae(10,"number"),f(),h(11,"span",41),g(12),f()(),h(13,"div",42)(14,"div",43)(15,"button",44),j("click",function(){let i=R(t).$implicit,o=I(2);return k(o.decrementQty(i))}),g(16,"-"),f(),h(17,"input",45),j("input",function(i){let o=R(t).$implicit,s=I(2);return k(s.manualQty(o,i))}),f(),h(18,"button",44),j("click",function(){let i=R(t).$implicit,o=I(2);return k(o.incrementQty(i))}),g(19,"+"),f()(),h(20,"button",46),j("click",function(){let i=R(t).$implicit,o=I(2);return k(o.addToOrder(i))}),g(21,"Add"),f()()()()}if(n&2){let t=e.$implicit,r=I(2);y(2),D("ngIf",t.imageUrl),y(),D("ngIf",!t.imageUrl),y(3),q(t.name),y(3),z("\u20B1",ge(10,9,t.price,"1.2-2"),""),y(2),_e("low",t.quantity<10),y(),z("Stock: ",t.quantity,""),y(5),D("value",r.getQty(t))("max",t.quantity)}}function tV(n,e){if(n&1){let t=te();h(0,"div",58)(1,"div",59)(2,"span",60),g(3),f(),h(4,"span",61),g(5),ae(6,"number"),f()(),h(7,"div",62),g(8),ae(9,"number"),h(10,"button",63),j("click",function(){let i=R(t).index,o=I(3);return k(o.removeFromOrder(i))}),g(11,"\u2715"),f()()()}if(n&2){let t=e.$implicit;y(3),q(t.product.name),y(2),on("",t.quantity," x \u20B1",ge(6,4,t.product.price,"1.2-2"),""),y(3),z(" \u20B1",ge(9,7,t.product.price*t.quantity,"1.2-2")," ")}}function nV(n,e){if(n&1){let t=te();h(0,"section",49)(1,"h3"),g(2,"Order Summary"),f(),h(3,"div",50),U(4,tV,12,10,"div",51),f(),h(5,"div",52)(6,"span"),g(7,"Total Amount:"),f(),h(8,"span",53),g(9),ae(10,"number"),f()(),h(11,"div",11)(12,"label",54),g(13,"Additional Notes"),f(),h(14,"textarea",55),J("ngModelChange",function(i){R(t);let o=I(2);return Z(o.notes,i)||(o.notes=i),k(i)}),f()(),h(15,"div",56)(16,"button",57),j("click",function(){R(t);let i=I(2);return k(i.submitReservation())}),g(17),f()()()}if(n&2){let t=I(2);y(4),D("ngForOf",t.orderItems),y(5),z("\u20B1",ge(10,5,t.totalAmount,"1.2-2"),""),y(5),Y("ngModel",t.notes),y(2),D("disabled",t.isSubmitting),y(),z(" ",t.isSubmitting?"Submitting...":"Confirm Reservation"," ")}}function rV(n,e){n&1&&(h(0,"div",64)(1,"p"),g(2,"Your cart is empty. Add items above."),f()())}function iV(n,e){if(n&1){let t=te();h(0,"div",8)(1,"section",9)(2,"h3"),g(3,"\u{1F4CB} Customer Information"),f(),h(4,"div",10)(5,"div",11)(6,"label",12),g(7,"Full Name *"),f(),h(8,"input",13),J("ngModelChange",function(i){R(t);let o=I();return Z(o.customerName,i)||(o.customerName=i),k(i)}),f()(),h(9,"div",11)(10,"label",14),g(11,"Phone Number *"),f(),h(12,"input",15),J("ngModelChange",function(i){R(t);let o=I();return Z(o.customerContact,i)||(o.customerContact=i),k(i)}),f()(),h(13,"div",16)(14,"label",17),g(15,"Delivery Address *"),f(),h(16,"input",18),J("ngModelChange",function(i){R(t);let o=I();return Z(o.customerAddress,i)||(o.customerAddress=i),k(i)}),f()(),h(17,"div",16)(18,"label",19),g(19,"Payment Option (Optional)"),f(),h(20,"select",20),J("ngModelChange",function(i){R(t);let o=I();return Z(o.paymentOption,i)||(o.paymentOption=i),k(i)}),h(21,"option",21),g(22,"Select Payment Method"),f(),U(23,JF,2,2,"option",22),f()()(),h(24,"h3",23),g(25,"\u{1F69A} Pickup/Delivery Date"),f(),h(26,"div",10)(27,"div",11)(28,"label",24),g(29,"Date *"),f(),h(30,"input",25),J("ngModelChange",function(i){R(t);let o=I();return Z(o.pickupDate,i)||(o.pickupDate=i),k(i)}),f()(),h(31,"div",11)(32,"label",26),g(33,"Time"),f(),h(34,"input",27),J("ngModelChange",function(i){R(t);let o=I();return Z(o.pickupTime,i)||(o.pickupTime=i),k(i)}),f()()()(),h(35,"section",9)(36,"h3"),g(37,"Select Items"),f(),h(38,"div",28),U(39,eV,22,12,"div",29),f()(),U(40,nV,18,8,"section",30)(41,rV,3,0,"div",31),f()}if(n&2){let t=I();y(8),Y("ngModel",t.customerName),y(4),Y("ngModel",t.customerContact),y(4),Y("ngModel",t.customerAddress),y(4),Y("ngModel",t.paymentOption),y(3),D("ngForOf",t.paymentOptions),y(7),Y("ngModel",t.pickupDate),y(4),Y("ngModel",t.pickupTime),y(5),D("ngForOf",t.products),y(),D("ngIf",t.orderItems.length>0),y(),D("ngIf",t.orderItems.length===0)}}var qE=(()=>{class n{constructor(t,r,i){this.inventoryService=t,this.reservationService=r,this.customerService=i,this.products=[],this.customerName="",this.customerContact="",this.customerAddress="",this.notes="",this.paymentOption="",this.paymentOptions=["Cash on Delivery","Gcash","Bank Transfer"],this.pickupDate="",this.pickupTime="",this.orderItems=[],this.selectedProduct=null,this.selectedQuantity=1,this.isSubmitting=!1,this.successMessage="",this.tempQuantities={}}ngOnInit(){let t=new Date;t.setDate(t.getDate()+1),this.pickupDate=t.toISOString().split("T")[0],this.loadProducts()}loadProducts(){this.inventoryService.getProducts().subscribe(t=>{this.products=t.filter(r=>r.quantity>0)})}getQty(t){return this.tempQuantities[t.id]||1}incrementQty(t){let r=this.getQty(t);r<t.quantity&&(this.tempQuantities[t.id]=r+1)}decrementQty(t){let r=this.getQty(t);r>1&&(this.tempQuantities[t.id]=r-1)}manualQty(t,r){let i=parseInt(r.target.value,10);!isNaN(i)&&i>=1&&i<=t.quantity&&(this.tempQuantities[t.id]=i)}addToOrder(t){let r=this.getQty(t),i=this.orderItems.find(s=>s.product.id===t.id),o=i?i.quantity:0;if(o+r>t.quantity){alert(`Cannot add more. You already have ${o} in cart. Max stock is ${t.quantity}.`);return}i?i.quantity+=r:this.orderItems.push({product:t,quantity:r}),this.tempQuantities[t.id]=1}removeFromOrder(t){this.orderItems.splice(t,1)}get totalAmount(){return this.orderItems.reduce((t,r)=>t+r.product.price*r.quantity,0)}submitReservation(){return B(this,null,function*(){if(this.orderItems.length===0||!this.customerName||!this.customerContact||!this.pickupDate||!this.customerAddress){alert("Please fill in all required fields and add items to your reservation.");return}this.isSubmitting=!0;try{let t=new Date(this.pickupDate+(this.pickupTime?"T"+this.pickupTime:"T00:00:00")),r=`Payment: ${this.paymentOption||"Not Specified"}
Address: ${this.customerAddress}

${this.notes}`,i=null;this.customerService.getCustomers().subscribe(s=>{i=s.find(a=>a.phoneNumber===this.customerContact)}),yield new Promise(s=>setTimeout(s,100)),i||this.customerService.addCustomer({name:this.customerName,phoneNumber:this.customerContact,deliveryAddress:this.customerAddress}),yield this.reservationService.addReservation({customerName:this.customerName,customerContact:this.customerContact,customerAddress:this.customerAddress,reservationDate:new Date,pickupDate:t,status:"pending",items:this.orderItems.map(s=>({productId:s.product.id,productName:s.product.name,quantity:s.quantity,price:s.product.price})),totalAmount:this.totalAmount,notes:r});let o={name:this.customerName,phoneNumber:this.customerContact,address:this.customerAddress,gpsCoordinates:"",expiresAt:Date.now()+2*60*60*1e3};localStorage.setItem("chatCustomerInfo",JSON.stringify(o)),localStorage.setItem("chatUserName",this.customerName),this.successMessage="Reservation submitted successfully! We will contact you shortly. You can now chat with us!",this.resetForm()}catch(t){console.error("Error submitting reservation",t),alert("Failed to submit reservation. Please try again.")}finally{this.isSubmitting=!1}})}resetForm(){this.orderItems=[],this.customerName="",this.customerContact="",this.customerAddress="",this.paymentOption="",this.notes="",this.selectedProduct=null,this.pickupTime=""}static{this.\u0275fac=function(r){return new(r||n)(Q(Lt),Q(zE),Q(Ur))}}static{this.\u0275cmp=Re({type:n,selectors:[["app-reservation"]],standalone:!0,features:[ke],decls:9,vars:2,consts:[[1,"reservation-page"],[1,"reservation-container"],[1,"reservation-header"],["class","success-alert",4,"ngIf"],["class","reservation-form",4,"ngIf"],[1,"success-alert"],[1,"success-icon"],[1,"btn-primary",3,"click"],[1,"reservation-form"],[1,"form-section"],[1,"form-grid"],[1,"form-group"],["for","name"],["type","text","id","name","placeholder","Enter your name","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","contact"],["type","text","id","contact","placeholder","Phone number","required","",1,"form-input",3,"ngModelChange","ngModel"],[1,"form-group","full-width",2,"grid-column","1 / -1"],["for","address"],["type","text","id","address","placeholder","Street, City, Province","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","payment"],["id","payment",1,"form-input",2,"height","42px",3,"ngModelChange","ngModel"],["value","","selected",""],[3,"value",4,"ngFor","ngForOf"],[2,"margin-top","var(--space-lg)"],["for","date"],["type","date","id","date","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","time"],["type","time","id","time",1,"form-input",3,"ngModelChange","ngModel"],[1,"product-grid"],["class","product-card",4,"ngFor","ngForOf"],["class","form-section summary-section",4,"ngIf"],["class","empty-cart-msg",4,"ngIf"],[3,"value"],[1,"product-card"],[1,"card-image"],["loading","lazy",3,"src","alt",4,"ngIf"],["class","placeholder-img",4,"ngIf"],[1,"card-content"],[1,"card-title"],[1,"card-meta"],[1,"price"],[1,"stock"],[1,"card-actions"],[1,"qty-control"],["type","button",1,"qty-btn",3,"click"],["type","number","min","1",1,"qty-input-sm",3,"input","value","max"],[1,"btn-add-card",3,"click"],["loading","lazy",3,"src","alt"],[1,"placeholder-img"],[1,"form-section","summary-section"],[1,"order-list"],["class","order-item",4,"ngFor","ngForOf"],[1,"order-total"],[1,"total-price"],["for","notes"],["id","notes","rows","3","placeholder","Any special requests?",1,"form-textarea",3,"ngModelChange","ngModel"],[1,"actions"],[1,"btn-submit",3,"click","disabled"],[1,"order-item"],[1,"item-info"],[1,"item-name"],[1,"item-details"],[1,"item-total"],["title","Remove",1,"btn-remove",3,"click"],[1,"empty-cart-msg"]],template:function(r,i){r&1&&(h(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),g(4,"\u{1F4C5} Make a Reservation"),f(),h(5,"p"),g(6,"Reserve items for pickup or delivery."),f()(),U(7,YF,7,1,"div",3)(8,iV,42,10,"div",4),f()()),r&2&&(y(7),D("ngIf",i.successMessage),y(),D("ngIf",!i.successMessage))},dependencies:[Ne,nt,He,po,ot,an,cn,rt,Ft,it,Kt,Ze],styles:[".reservation-page[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;padding:var(--space-md);background:var(--color-bg);background-image:radial-gradient(var(--color-border) 1px,transparent 1px);background-size:20px 20px}.reservation-container[_ngcontent-%COMP%]{width:100%;max-width:800px;background:var(--color-surface);border-radius:var(--radius-xl);box-shadow:0 4px 6px #0000001a;overflow:hidden;border:1px solid var(--color-border)}.reservation-header[_ngcontent-%COMP%]{padding:var(--space-xl) var(--space-lg);background:linear-gradient(135deg,var(--color-primary),var(--color-primary-dark));color:#fff;text-align:center}.reservation-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:var(--space-md);color:#fff}.reservation-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{opacity:.9;font-size:1.1rem}.reservation-form[_ngcontent-%COMP%]{padding:var(--space-xl)}.form-section[_ngcontent-%COMP%]{margin-bottom:var(--space-2xl);padding-bottom:var(--space-lg);border-bottom:1px solid var(--color-border)}.form-section[_ngcontent-%COMP%]:last-child{border-bottom:none;margin-bottom:0;padding-bottom:0}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:var(--color-text);margin-bottom:var(--space-md);text-transform:uppercase;letter-spacing:.5px}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:var(--space-md)}.form-group[_ngcontent-%COMP%]{margin-bottom:var(--space-md)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:var(--space-xs);color:var(--color-text);font-weight:500}.form-input[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{width:100%;padding:var(--space-sm);border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-bg);color:var(--color-text);font-size:1rem;transition:border-color .2s}.form-input[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{border-color:var(--color-primary);outline:none;box-shadow:0 0 0 3px #2563eb1a}.product-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:var(--space-sm);max-height:500px;overflow-y:auto;padding-right:4px}.product-card[_ngcontent-%COMP%]{background:var(--color-surface);border:1px solid var(--color-border);border-radius:var(--radius-md);overflow:hidden;transition:transform .2s,box-shadow .2s;display:flex;flex-direction:column}.product-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.card-image[_ngcontent-%COMP%]{height:100px;background:var(--color-bg);display:flex;align-items:center;justify-content:center;overflow:hidden}.card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.placeholder-img[_ngcontent-%COMP%]{font-size:2rem;opacity:.5}.card-content[_ngcontent-%COMP%]{padding:var(--space-sm);flex:1;display:flex;flex-direction:column}.card-title[_ngcontent-%COMP%]{margin:0 0 2px;font-size:.9rem;font-weight:600;color:var(--color-text)}.card-meta[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--space-sm);font-size:.8rem}.price[_ngcontent-%COMP%]{font-weight:700;color:var(--color-primary)}.stock[_ngcontent-%COMP%]{color:var(--color-text-muted)}.stock.low[_ngcontent-%COMP%]{color:var(--color-warning)}.card-actions[_ngcontent-%COMP%]{margin-top:auto;display:flex;flex-direction:column;gap:6px;align-items:stretch}.qty-control[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;border:1px solid var(--color-border);border-radius:4px;overflow:hidden;background:var(--color-bg)}.qty-btn[_ngcontent-%COMP%]{background:var(--color-bg);border:none;width:24px;height:24px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.8rem;z-index:2}.qty-btn[_ngcontent-%COMP%]:hover{background:var(--color-border)}.qty-input-sm[_ngcontent-%COMP%]{width:30px;border:none;text-align:center;font-size:.85rem;padding:0;height:24px;appearance:textfield}.qty-input-sm[_ngcontent-%COMP%]::-webkit-outer-spin-button, .qty-input-sm[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.btn-add-card[_ngcontent-%COMP%]{flex:1;background:var(--color-primary);color:#fff;border:none;border-radius:4px;height:26px;font-weight:600;cursor:pointer;transition:background .2s;font-size:.85rem}.btn-add-card[_ngcontent-%COMP%]:hover{background:var(--color-primary-dark)}.summary-section[_ngcontent-%COMP%]{background:var(--color-bg);padding:var(--space-lg);border-radius:var(--radius-lg)}.order-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm);margin-bottom:var(--space-lg)}.order-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--space-sm);background:var(--color-surface);border-radius:var(--radius-md);border:1px solid var(--color-border)}.item-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.item-name[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text)}.item-details[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-muted)}.item-total[_ngcontent-%COMP%]{font-weight:600;color:var(--color-primary);display:flex;align-items:center;gap:var(--space-sm)}.btn-remove[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;border:none;background:var(--color-danger);color:#fff;font-size:.75rem;cursor:pointer;display:flex;align-items:center;justify-content:center;opacity:.8;transition:.2s}.btn-remove[_ngcontent-%COMP%]:hover{opacity:1;transform:scale(1.1)}.order-total[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-top:var(--space-md);border-top:2px dashed var(--color-border);margin-bottom:var(--space-lg);font-size:1.25rem;font-weight:700;color:var(--color-text)}.total-price[_ngcontent-%COMP%]{color:var(--color-primary)}.actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.btn-submit[_ngcontent-%COMP%]{padding:var(--space-md) var(--space-2xl);background:var(--color-primary);color:#fff;border:none;border-radius:var(--radius-md);font-size:1.1rem;font-weight:600;cursor:pointer;box-shadow:0 4px 6px #0000001a;transition:transform .2s,box-shadow .2s}.btn-submit[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 12px #00000026}.btn-submit[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:wait}.empty-cart-msg[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl);color:var(--color-text-muted);font-style:italic}.success-alert[_ngcontent-%COMP%]{text-align:center;padding:var(--space-3xl) var(--space-xl)}.success-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:var(--space-md)}.success-alert[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.25rem;color:var(--color-text);margin-bottom:var(--space-xl)}.btn-primary[_ngcontent-%COMP%]{padding:var(--space-md) var(--space-xl);background:var(--color-primary);color:#fff;border:none;border-radius:var(--radius-md);font-weight:600;cursor:pointer}@media (max-width: 640px){.reservation-page[_ngcontent-%COMP%]{padding:0}.reservation-container[_ngcontent-%COMP%]{border-radius:0;min-height:100vh;border:none}.add-item-row[_ngcontent-%COMP%]{flex-wrap:wrap}.btn-add[_ngcontent-%COMP%]{width:100%;margin-bottom:0}}"]})}}return n})();function oV(n,e){if(n&1){let t=te();h(0,"button",11),j("click",function(){R(t);let i=I(2);return k(i.onCancel())}),g(1),f()}if(n&2){let t=I(2);y(),z(" ",(t.dialogState.config==null?null:t.dialogState.config.cancelText)||"Cancel"," ")}}function sV(n,e){if(n&1){let t=te();h(0,"div",1),j("click",function(i){R(t);let o=I();return k(o.onBackdropClick(i))}),h(1,"div",2)(2,"div",3)(3,"div",4),g(4),f(),h(5,"h2",5),g(6),f()(),h(7,"div",6)(8,"p",7),g(9),f()(),h(10,"div",8),U(11,oV,2,1,"button",9),h(12,"button",10),j("click",function(){R(t);let i=I();return k(i.onConfirm())}),g(13),f()()()()}if(n&2){let t=I();y(),D("@dialogAnimation",void 0),y(),If("dialog-header-"+(t.dialogState.config==null?null:t.dialogState.config.type)),y(2),q(t.getIcon()),y(2),q(t.dialogState.config==null?null:t.dialogState.config.title),y(3),q(t.dialogState.config==null?null:t.dialogState.config.message),y(2),D("ngIf",t.dialogState.config==null?null:t.dialogState.config.showCancel),y(),If("dialog-btn-"+(t.dialogState.config==null?null:t.dialogState.config.type)),y(),z(" ",(t.dialogState.config==null?null:t.dialogState.config.confirmText)||"OK"," ")}}var HE=(()=>{class n{constructor(t){this.dialogService=t,this.dialogState={isOpen:!1,config:null,resolve:null}}ngOnInit(){this.subscription=this.dialogService.dialog$.subscribe(t=>{this.dialogState=t})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}onConfirm(){this.dialogService.close(!0)}onCancel(){this.dialogService.close(!1)}onBackdropClick(t){t.target===t.currentTarget&&this.onCancel()}getIcon(){switch(this.dialogState.config?.type){case"success":return"\u2705";case"error":return"\u274C";case"warning":return"\u26A0\uFE0F";case"confirm":return"\u2753";case"info":default:return"\u2139\uFE0F"}}static{this.\u0275fac=function(r){return new(r||n)(Q(kl))}}static{this.\u0275cmp=Re({type:n,selectors:[["app-dialog"]],standalone:!0,features:[ke],decls:1,vars:1,consts:[["class","dialog-overlay",3,"click",4,"ngIf"],[1,"dialog-overlay",3,"click"],[1,"dialog-container"],[1,"dialog-header"],[1,"dialog-icon"],[1,"dialog-title"],[1,"dialog-body"],[1,"dialog-message"],[1,"dialog-footer"],["class","dialog-btn dialog-btn-cancel",3,"click",4,"ngIf"],[1,"dialog-btn","dialog-btn-confirm",3,"click"],[1,"dialog-btn","dialog-btn-cancel",3,"click"]],template:function(r,i){r&1&&U(0,sV,14,10,"div",0),r&2&&D("ngIf",i.dialogState.isOpen)},dependencies:[Ne,He],styles:[".dialog-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0009;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:10000;animation:_ngcontent-%COMP%_fadeIn .2s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.dialog-container[_ngcontent-%COMP%]{background:var(--color-surface);border-radius:var(--radius-xl);box-shadow:0 20px 60px #0000004d;max-width:500px;width:90%;overflow:hidden;animation:_ngcontent-%COMP%_slideIn .3s cubic-bezier(.175,.885,.32,1.275)}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:scale(.9) translateY(-20px)}to{opacity:1;transform:scale(1) translateY(0)}}.dialog-header[_ngcontent-%COMP%]{padding:var(--space-xl);border-bottom:1px solid var(--color-border);display:flex;align-items:center;gap:var(--space-md)}.dialog-header-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f61a,#3b82f60d)}.dialog-header-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b9811a,#10b9810d)}.dialog-header-warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b1a,#f59e0b0d)}.dialog-header-error[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef44441a,#ef44440d)}.dialog-header-confirm[_ngcontent-%COMP%]{background:linear-gradient(135deg,#9333ea1a,#9333ea0d)}.dialog-icon[_ngcontent-%COMP%]{font-size:2rem;line-height:1}.dialog-title[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:600;color:var(--color-text)}.dialog-body[_ngcontent-%COMP%]{padding:var(--space-xl)}.dialog-message[_ngcontent-%COMP%]{margin:0;font-size:1rem;line-height:1.6;color:var(--color-text);white-space:pre-wrap}.dialog-footer[_ngcontent-%COMP%]{padding:var(--space-lg) var(--space-xl);border-top:1px solid var(--color-border);display:flex;justify-content:flex-end;gap:var(--space-md);background:var(--color-bg)}.dialog-btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border-radius:var(--radius-md);font-weight:600;font-size:.9375rem;cursor:pointer;transition:all .2s;border:none;min-width:100px}.dialog-btn-cancel[_ngcontent-%COMP%]{background:var(--color-border);color:var(--color-text)}.dialog-btn-cancel[_ngcontent-%COMP%]:hover{background:var(--color-secondary);color:#fff;transform:translateY(-2px);box-shadow:0 4px 8px #00000026}.dialog-btn-confirm[_ngcontent-%COMP%]{background:var(--color-primary);color:#fff}.dialog-btn-confirm[_ngcontent-%COMP%]:hover{background:var(--color-primary-dark);transform:translateY(-2px);box-shadow:0 4px 12px #3b82f64d}.dialog-btn-success[_ngcontent-%COMP%]{background:var(--color-success)}.dialog-btn-success[_ngcontent-%COMP%]:hover{background:#059669;box-shadow:0 4px 12px #10b9814d}.dialog-btn-error[_ngcontent-%COMP%]{background:var(--color-danger)}.dialog-btn-error[_ngcontent-%COMP%]:hover{background:#dc2626;box-shadow:0 4px 12px #ef44444d}.dialog-btn-warning[_ngcontent-%COMP%]{background:var(--color-warning);color:#fff}.dialog-btn-warning[_ngcontent-%COMP%]:hover{background:#d97706;box-shadow:0 4px 12px #f59e0b4d}.dialog-btn-info[_ngcontent-%COMP%]{background:var(--color-primary)}@media (max-width: 640px){.dialog-container[_ngcontent-%COMP%]{width:95%;max-width:none}.dialog-header[_ngcontent-%COMP%], .dialog-body[_ngcontent-%COMP%]{padding:var(--space-lg)}.dialog-footer[_ngcontent-%COMP%]{flex-direction:column-reverse;padding:var(--space-md)}.dialog-btn[_ngcontent-%COMP%]{width:100%}}"]})}}return n})();function aV(n,e){n&1&&be(0,"app-reservation")}function cV(n,e){n&1&&be(0,"app-login")}function lV(n,e){if(n&1){let t=te();h(0,"div",11)(1,"div",12)(2,"button",13),j("click",function(){R(t);let i=I();return k(i.showReservation=!i.showReservation)}),g(3),f()(),U(4,aV,1,0,"app-reservation",1)(5,cV,1,0,"app-login",1),f()}if(n&2){let t=I();y(3),z(" ",t.showReservation?"\u2190 Back to Login":"\u{1F4C5} Make a Reservation"," "),y(),D("ngIf",t.showReservation),y(),D("ngIf",!t.showReservation)}}function uV(n,e){if(n&1){let t=te();h(0,"button",28),j("click",function(){R(t);let i=I(2);return k(i.setActiveTab("users"))}),h(1,"span",29),g(2,"\u{1F464}"),f(),h(3,"span",30),g(4,"Users"),f()()}if(n&2){let t=I(2);_e("active",t.activeTab==="users")}}function dV(n,e){n&1&&(h(0,"div",35)(1,"div",36),be(2,"app-landing"),f()())}function hV(n,e){n&1&&(h(0,"div",35)(1,"div",36),be(2,"app-product-form"),f()())}function fV(n,e){n&1&&(h(0,"div",35)(1,"div",36),be(2,"app-pos-calculator"),f()())}function pV(n,e){n&1&&(h(0,"div",35)(1,"div",36),be(2,"app-inventory-list"),f()())}function mV(n,e){n&1&&(h(0,"div",35)(1,"div",36),be(2,"app-customer-form"),f()())}function gV(n,e){n&1&&(h(0,"div",35)(1,"div",36),be(2,"app-expenses"),f()())}function vV(n,e){n&1&&(h(0,"div",35)(1,"div",36),be(2,"app-reports"),f()())}function yV(n,e){n&1&&(h(0,"div",35)(1,"div",36),be(2,"app-activity-logs"),f()())}function _V(n,e){n&1&&(h(0,"div",35)(1,"div",36),be(2,"app-user-management"),f()())}function bV(n,e){if(n&1){let t=te();h(0,"div")(1,"header",14)(2,"div",15)(3,"div",16)(4,"div",17)(5,"div",18),g(6,"\u{1F4E6}"),f(),h(7,"div",19)(8,"h1"),g(9,"JJM Inventory"),f(),h(10,"p",20),g(11,"Smart Business Management"),f()()(),h(12,"div",21)(13,"button",22),j("click",function(){R(t);let i=I();return k(i.toggleTheme())}),h(14,"span",23),g(15),f()(),h(16,"button",24),j("click",function(){R(t);let i=I();return k(i.logout())}),h(17,"span",25),g(18,"\u{1F6AA}"),f(),h(19,"span",26),g(20,"Logout"),f()()()()()(),h(21,"main",15)(22,"nav",27)(23,"button",28),j("click",function(){R(t);let i=I();return k(i.setActiveTab("home"))}),h(24,"span",29),g(25,"\u{1F3E0}"),f(),h(26,"span",30),g(27,"Home"),f()(),h(28,"button",28),j("click",function(){R(t);let i=I();return k(i.setActiveTab("add-product"))}),h(29,"span",29),g(30,"\u{1F4E6}"),f(),h(31,"span",30),g(32,"Add Product"),f()(),h(33,"button",28),j("click",function(){R(t);let i=I();return k(i.setActiveTab("sell"))}),h(34,"span",29),g(35,"\u{1F4B0}"),f(),h(36,"span",30),g(37,"Sell"),f()(),h(38,"button",28),j("click",function(){R(t);let i=I();return k(i.setActiveTab("inventory"))}),h(39,"span",29),g(40,"\u{1F4CA}"),f(),h(41,"span",30),g(42,"Inventory"),f()(),h(43,"button",28),j("click",function(){R(t);let i=I();return k(i.setActiveTab("customers"))}),h(44,"span",29),g(45,"\u{1F465}"),f(),h(46,"span",30),g(47,"Customers"),f()(),h(48,"button",28),j("click",function(){R(t);let i=I();return k(i.setActiveTab("expenses"))}),h(49,"span",29),g(50,"\u{1F4B8}"),f(),h(51,"span",30),g(52,"Expenses"),f()(),h(53,"button",28),j("click",function(){R(t);let i=I();return k(i.setActiveTab("reports"))}),h(54,"span",29),g(55,"\u{1F4C8}"),f(),h(56,"span",30),g(57,"Reports"),f()(),h(58,"button",28),j("click",function(){R(t);let i=I();return k(i.setActiveTab("logs"))}),h(59,"span",29),g(60,"\u{1F4CB}"),f(),h(61,"span",30),g(62,"Activity Logs"),f()(),U(63,uV,5,2,"button",31),f(),h(64,"div",32),U(65,dV,3,0,"div",33)(66,hV,3,0,"div",33)(67,fV,3,0,"div",33)(68,pV,3,0,"div",33)(69,mV,3,0,"div",33)(70,gV,3,0,"div",33)(71,vV,3,0,"div",33)(72,yV,3,0,"div",33)(73,_V,3,0,"div",33),f()(),h(74,"footer",34)(75,"div",15)(76,"p"),g(77,"\xA9 2024 JJM Inventory. All rights reserved."),f()()()()}if(n&2){let t=I();y(13),D("title",t.isDarkTheme?"Switch to Light Mode":"Switch to Dark Mode"),y(2),q(t.isDarkTheme?"\u2600\uFE0F":"\u{1F319}"),y(8),_e("active",t.activeTab==="home"),y(5),_e("active",t.activeTab==="add-product"),y(5),_e("active",t.activeTab==="sell"),y(5),_e("active",t.activeTab==="inventory"),y(5),_e("active",t.activeTab==="customers"),y(5),_e("active",t.activeTab==="expenses"),y(5),_e("active",t.activeTab==="reports"),y(5),_e("active",t.activeTab==="logs"),y(5),D("ngIf",t.userRole==="admin"),y(2),D("ngIf",t.activeTab==="home"),y(),D("ngIf",t.activeTab==="add-product"),y(),D("ngIf",t.activeTab==="sell"),y(),D("ngIf",t.activeTab==="inventory"),y(),D("ngIf",t.activeTab==="customers"),y(),D("ngIf",t.activeTab==="expenses"),y(),D("ngIf",t.activeTab==="reports"),y(),D("ngIf",t.activeTab==="logs"),y(),D("ngIf",t.activeTab==="users"&&t.userRole==="admin")}}function CV(n,e){if(n&1&&(h(0,"span",37),g(1),f()),n&2){let t=I();y(),q(t.totalUnreadMessages)}}var GE=(()=>{class n{constructor(t,r){this.inventoryService=t,this.chatService=r,this.title="JJM Inventory",this.activeTab="home",this.isDarkTheme=!1,this.isLoggedIn=!1,this.userRole="",this.isChatOpen=!1,this.totalUnreadMessages=0,this.showReservation=!1,this.isLoggedIn=localStorage.getItem("jjm_logged_in")==="true",this.userRole=localStorage.getItem("jjm_role")||"user";let i=localStorage.getItem("jjm_theme");this.isDarkTheme=i==="dark",this.applyTheme(),window.inventoryService=this.inventoryService}setActiveTab(t){t==="users"&&this.userRole!=="admin"||(this.activeTab=t)}toggleTheme(){this.isDarkTheme=!this.isDarkTheme,this.applyTheme(),localStorage.setItem("jjm_theme",this.isDarkTheme?"dark":"light")}logout(){this.chatService.triggerLogout(),localStorage.removeItem("jjm_logged_in"),localStorage.removeItem("jjm_username"),localStorage.removeItem("jjm_user_id"),localStorage.removeItem("jjm_role"),localStorage.removeItem("chatCustomerInfo"),localStorage.removeItem("chatUserName"),this.isLoggedIn=!1,window.location.reload()}applyTheme(){this.isDarkTheme?document.body.classList.add("dark-theme"):document.body.classList.remove("dark-theme")}toggleChat(){this.isChatOpen=!this.isChatOpen}static{this.\u0275fac=function(r){return new(r||n)(Q(Lt),Q(Uu))}}static{this.\u0275cmp=Re({type:n,selectors:[["app-root"]],standalone:!0,features:[ke],decls:15,vars:8,consts:[["class","public-container",4,"ngIf"],[4,"ngIf"],[1,"chat-widget"],["title","Open Chat",1,"chat-toggle-button",3,"click"],[1,"chat-icon"],[1,"chat-label"],["class","notification-badge",4,"ngIf"],[1,"chat-modal"],[1,"chat-modal-content"],[3,"totalUnreadCountChange","isOpen"],["title","Close Chat",1,"chat-modal-close",3,"click"],[1,"public-container"],[1,"public-nav"],[1,"btn-public-toggle",3,"click"],[1,"header"],[1,"container"],[1,"header-content"],[1,"logo-section"],[1,"logo-icon"],[1,"brand-info"],[1,"tagline"],[1,"header-actions"],[1,"theme-toggle",3,"click","title"],[1,"theme-icon"],["title","Logout",1,"logout-button",3,"click"],[1,"logout-icon"],[1,"logout-text"],[1,"tabs"],[1,"tab-button",3,"click"],[1,"tab-icon"],[1,"tab-label"],["class","tab-button",3,"active","click",4,"ngIf"],[1,"tab-content"],["class","tab-pane",4,"ngIf"],[1,"footer"],[1,"tab-pane"],[1,"tab-pane-content"],[1,"notification-badge"]],template:function(r,i){r&1&&(U(0,lV,6,3,"div",0)(1,bV,78,28,"div",1),h(2,"div",2)(3,"button",3),j("click",function(){return i.toggleChat()}),h(4,"span",4),g(5,"\u{1F4AC}"),f(),h(6,"span",5),g(7,"Chat"),f()(),U(8,CV,2,1,"span",6),h(9,"div",7)(10,"div",8)(11,"app-chat",9),j("totalUnreadCountChange",function(s){return i.totalUnreadMessages=s}),f()(),h(12,"button",10),j("click",function(){return i.toggleChat()}),g(13,"\u2715"),f()()(),be(14,"app-dialog")),r&2&&(D("ngIf",!i.isLoggedIn),y(),D("ngIf",i.isLoggedIn),y(2),_e("active",i.isChatOpen),y(5),D("ngIf",i.totalUnreadMessages>0),y(),_e("open",i.isChatOpen),y(2),D("isOpen",i.isChatOpen))},dependencies:[Ne,He,TC,AC,OC,NC,RC,kC,FC,VC,LC,UE,$E,qE,HE],styles:['.public-nav[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;z-index:1000}.btn-public-toggle[_ngcontent-%COMP%]{padding:10px 20px;background:var(--color-surface);color:var(--color-text);border:1px solid var(--color-border);border-radius:var(--radius-xl);cursor:pointer;font-weight:600;font-size:.95rem;box-shadow:var(--shadow-md);transition:all .3s ease;display:flex;align-items:center;gap:8px;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}.btn-public-toggle[_ngcontent-%COMP%]:hover{background:var(--color-primary);color:#fff;border-color:var(--color-primary);transform:translateY(-2px);box-shadow:var(--shadow-lg)}.header[_ngcontent-%COMP%]{background:var(--color-surface);border-bottom:1px solid var(--color-border);padding:var(--space-lg) 0;position:sticky;top:0;z-index:100;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background:#fffffff2}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.logo-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-md)}.logo-icon[_ngcontent-%COMP%]{font-size:2.5rem;animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-5px)}}.brand-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--color-text);margin:0;font-size:1.5rem;font-weight:700;letter-spacing:-.5px}.tagline[_ngcontent-%COMP%]{color:var(--color-text-muted);font-size:.75rem;margin:0;font-weight:500}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-md)}.theme-toggle[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:var(--radius-xl);background:var(--color-bg);border:1px solid var(--color-border);display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all var(--transition-base);padding:0}.theme-toggle[_ngcontent-%COMP%]:hover{background:var(--color-primary);border-color:var(--color-primary);transform:rotate(180deg) scale(1.1);box-shadow:var(--shadow-md)}.theme-icon[_ngcontent-%COMP%]{font-size:1.25rem;transition:transform var(--transition-base)}.logout-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);padding:var(--space-sm) var(--space-md);background:#ef44441a;border:1px solid rgba(239,68,68,.3);border-radius:var(--radius-lg);color:var(--color-danger);font-weight:600;cursor:pointer;transition:all var(--transition-base)}.logout-button[_ngcontent-%COMP%]:hover{background:var(--color-danger);border-color:var(--color-danger);color:#fff;transform:translateY(-2px);box-shadow:0 4px 12px #ef44444d}.logout-icon[_ngcontent-%COMP%]{font-size:1.125rem}.logout-text[_ngcontent-%COMP%]{font-size:.875rem}.tabs[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm);margin-top:var(--space-2xl);margin-bottom:var(--space-xl);padding:var(--space-sm);background:var(--color-bg);border-radius:var(--radius-xl);flex-wrap:wrap;box-shadow:inset 0 2px 4px #0000000d}.tab-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);padding:var(--space-md) var(--space-lg);background:transparent;border:none;border-radius:var(--radius-lg);color:var(--color-text-muted);font-size:.9375rem;font-weight:600;cursor:pointer;transition:all var(--transition-base);white-space:nowrap;position:relative;overflow:hidden}.tab-button[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(59,130,246,.15),transparent);transition:left .5s ease}.tab-button[_ngcontent-%COMP%]:hover:before{left:100%}.tab-button[_ngcontent-%COMP%]:hover{background:#3b82f614;color:var(--color-primary);transform:translateY(-2px);box-shadow:0 4px 12px #3b82f626}.tab-button.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-primary),var(--color-primary-light));color:#fff;box-shadow:0 4px 12px #3b82f64d}.tab-button.active[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,var(--color-primary-dark),var(--color-primary));transform:translateY(-2px) scale(1.02)}.tab-icon[_ngcontent-%COMP%]{font-size:1.25rem;transition:transform var(--transition-base);filter:drop-shadow(0 2px 4px rgba(0,0,0,.1))}.tab-button[_ngcontent-%COMP%]:hover   .tab-icon[_ngcontent-%COMP%]{transform:scale(1.15) rotate(5deg)}.tab-button.active[_ngcontent-%COMP%]   .tab-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_iconPulse .6s ease;filter:drop-shadow(0 2px 8px rgba(255,255,255,.5))}.tab-label[_ngcontent-%COMP%]{font-weight:600;letter-spacing:.3px}@keyframes _ngcontent-%COMP%_iconPulse{0%,to{transform:scale(1)}50%{transform:scale(1.2)}}.tab-content[_ngcontent-%COMP%]{min-height:calc(100vh - 400px);padding-bottom:var(--space-md);position:relative}.tab-pane[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInUp .4s cubic-bezier(.16,1,.3,1)}.tab-pane-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}@keyframes _ngcontent-%COMP%_slideInUp{0%{opacity:0;transform:translateY(30px) scale(.98)}to{opacity:1;transform:translateY(0) scale(1)}}.footer[_ngcontent-%COMP%]{background:var(--color-surface);border-top:1px solid var(--color-border);padding:var(--space-lg) 0;margin-top:var(--space-lg)}.footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;color:var(--color-text-muted);font-size:.875rem}@media (max-width: 768px){.tab-button[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);font-size:.875rem}.tab-icon[_ngcontent-%COMP%]{font-size:1rem}.tab-label[_ngcontent-%COMP%]{display:none}}.chat-widget[_ngcontent-%COMP%]{position:fixed;bottom:24px;right:24px;z-index:1000}.chat-toggle-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);padding:var(--space-md) var(--space-lg);background:linear-gradient(135deg,#3b82f6,#2563eb);border:none;border-radius:var(--radius-xl);color:#fff;font-weight:600;font-size:.9375rem;cursor:pointer;box-shadow:0 8px 24px #3b82f666;transition:all var(--transition-base);position:relative;overflow:hidden}.chat-toggle-button[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);transition:left .6s ease}.chat-toggle-button[_ngcontent-%COMP%]:hover:before{left:100%}.chat-toggle-button[_ngcontent-%COMP%]:hover{transform:translateY(-4px) scale(1.05);box-shadow:0 12px 32px #3b82f680}.chat-toggle-button.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626);box-shadow:0 8px 24px #ef444466}.chat-toggle-button.active[_ngcontent-%COMP%]:hover{box-shadow:0 12px 32px #ef444480}.chat-icon[_ngcontent-%COMP%]{font-size:1.5rem;animation:_ngcontent-%COMP%_bounce 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-4px)}}.chat-label[_ngcontent-%COMP%]{font-weight:700;letter-spacing:.3px}.chat-modal[_ngcontent-%COMP%]{position:fixed;bottom:100px;right:24px;width:850px;max-width:calc(100vw - 48px);height:650px;max-height:calc(100vh - 120px);opacity:0;transform:translateY(20px) scale(.95);pointer-events:none;transition:all .3s cubic-bezier(.16,1,.3,1);display:flex;flex-direction:column;z-index:2000}.chat-modal.open[_ngcontent-%COMP%]{opacity:1;transform:translateY(0) scale(1);pointer-events:all}.chat-modal-close[_ngcontent-%COMP%]{position:absolute;top:-50px;right:0;width:36px;height:36px;border-radius:var(--radius-lg);background:#00000080;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);color:#fff;font-size:1.25rem;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all var(--transition-base);padding:0;z-index:100;box-shadow:0 4px 12px #0000004d}.chat-modal-close[_ngcontent-%COMP%]:hover{background:#ef4444cc;transform:rotate(90deg) scale(1.1);box-shadow:0 6px 16px #ef444466}.chat-modal-content[_ngcontent-%COMP%]{flex:1;background:var(--color-surface);border-radius:var(--radius-xl);box-shadow:0 20px 60px #0000004d;border:1px solid var(--color-border);overflow:hidden;height:100%}@media (max-width: 768px){.chat-widget[_ngcontent-%COMP%]{bottom:16px;right:16px}.chat-toggle-button[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md)}.chat-label[_ngcontent-%COMP%]{display:none}.chat-modal[_ngcontent-%COMP%]{position:fixed;inset:0;width:100%;height:100%;max-width:100%;max-height:100%;border-radius:0;z-index:2000}.chat-modal-close[_ngcontent-%COMP%]{top:16px;right:auto;left:16px;width:44px;height:44px}}.notification-badge[_ngcontent-%COMP%]{position:absolute;top:-6px;right:-6px;background:#ef4444;color:#fff;padding:2px 8px;border-radius:12px;font-size:.8rem;font-weight:700;box-shadow:0 4px 6px #0000004d;animation:_ngcontent-%COMP%_badgePop .3s ease-out;display:inline-flex;align-items:center;justify-content:center;min-width:20px;z-index:1001;pointer-events:none;transition:transform .3s ease;border:2px solid white}.chat-toggle-button[_ngcontent-%COMP%]:hover + .notification-badge[_ngcontent-%COMP%]{transform:translateY(-4px) scale(1.05)}@keyframes _ngcontent-%COMP%_badgePop{0%{transform:scale(0)}to{transform:scale(1)}}']})}}return n})();nC(GE,rC).catch(n=>console.error(n));
