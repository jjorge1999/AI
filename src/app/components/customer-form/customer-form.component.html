<div class="customer-container">
  <!-- Customer Registration Form -->
  <div class="card">
    <h3>{{ editingId ? "Edit Customer" : "Register New Customer" }}</h3>
    <form (ngSubmit)="onSubmit()" class="form">
      <div class="form-group">
        <label for="customerName">Customer Name *</label>
        <input
          type="text"
          id="customerName"
          [(ngModel)]="customer.name"
          name="name"
          placeholder="Enter customer name"
          required
        />
      </div>

      <div class="form-group">
        <label for="phoneNumber">Phone Number *</label>
        <input
          type="tel"
          id="phoneNumber"
          [(ngModel)]="customer.phoneNumber"
          name="phoneNumber"
          placeholder="e.g., +1 234 567 8900"
          required
        />
      </div>

      <div class="form-group">
        <label for="deliveryAddress">Delivery Address *</label>
        <textarea
          id="deliveryAddress"
          [(ngModel)]="customer.deliveryAddress"
          name="deliveryAddress"
          placeholder="Enter full delivery address"
          rows="3"
          required
        ></textarea>
      </div>

      <div class="form-actions">
        <button
          type="button"
          *ngIf="editingId"
          (click)="cancelEdit()"
          class="btn-secondary"
        >
          Cancel
        </button>
        <button type="submit" [disabled]="!isValid()" class="btn-primary">
          <span>{{ editingId ? "ğŸ’¾" : "ğŸ‘¤" }}</span>
          {{ editingId ? "Update Customer" : "Add Customer" }}
        </button>
      </div>
    </form>
  </div>

  <!-- Customer List -->
  <div class="card">
    <h3>
      <span class="icon">ğŸ‘¥</span>
      Registered Customers
      <span class="badge">{{ customers.length }}</span>
    </h3>

    <div class="customer-list" *ngIf="customers.length > 0; else noCustomers">
      <div
        class="customer-item"
        *ngFor="let cust of paginatedCustomers"
        [class.editing]="cust.id === editingId"
      >
        <div class="customer-info">
          <div class="customer-name">{{ cust.name }}</div>
          <div class="customer-details">
            <div class="detail-row">
              <span class="detail-icon">ğŸ“</span>
              <span>{{ cust.phoneNumber }}</span>
            </div>
            <div class="detail-row">
              <span class="detail-icon">ğŸ“</span>
              <span>{{ cust.deliveryAddress }}</span>
            </div>
          </div>
        </div>
        <div class="customer-actions">
          <button
            class="btn-edit"
            (click)="editCustomer(cust)"
            [disabled]="!!editingId && editingId !== cust.id"
          >
            âœï¸
          </button>
          <button
            class="btn-delete"
            (click)="deleteCustomer(cust.id)"
            [disabled]="!!editingId"
          >
            ğŸ—‘ï¸
          </button>
        </div>
      </div>
    </div>
    
    <!-- Pagination Controls -->
    <div class="pagination" *ngIf="totalPages > 1 || customers.length > 5">
      <div class="pagination-size">
        <label for="pageSize">Show:</label>
        <select 
          id="pageSize"
          [(ngModel)]="pageSize"
          (change)="currentPage = 1"
          class="page-size-select"
        >
          <option *ngFor="let size of pageSizeOptions" [value]="size">{{ size }}</option>
        </select>
        <span>per page</span>
      </div>

      <div class="pagination-controls" *ngIf="totalPages > 1">
        <button 
          class="pagination-btn" 
          [disabled]="currentPage === 1"
          (click)="prevPage()"
        >
          â† Prev
        </button>
        
        <div class="pagination-pages">
          <button 
            *ngFor="let page of getPageNumbers()"
            class="pagination-page"
            [class.active]="page === currentPage"
            (click)="goToPage(page)"
          >
            {{ page }}
          </button>
        </div>

        <button 
          class="pagination-btn" 
          [disabled]="currentPage === totalPages"
          (click)="nextPage()"
        >
          Next â†’
        </button>
      </div>
    </div>

    <ng-template #noCustomers>
      <div class="empty-state">
        <p>No customers registered yet</p>
      </div>
    </ng-template>
  </div>
</div>
