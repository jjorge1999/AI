<!-- Loading State -->
<div *ngIf="isLoading" class="ads-loading-container">
  <div class="ads-loading-spinner">
    <span class="material-icon spin">hourglass_empty</span>
  </div>
  <p>Loading ads...</p>
</div>

<!-- Ads Slider -->
<div 
  *ngIf="!isLoading && activeAds.length > 0" 
  class="ads-slider-container"
  (mouseenter)="onMouseEnter()"
  (mouseleave)="onMouseLeave()"
>
  <!-- Slider Wrapper -->
  <div class="slider-wrapper">
    <!-- Current Ad Display -->
    <div 
      *ngIf="currentAd" 
      class="ad-slide"
      [class.fadeIn]="isTransitioning"
      (click)="onAdClick(currentAd)"
      [class.clickable]="currentAd.targetUrl"
    >
      <!-- Image Ad -->
      <img 
        *ngIf="currentAd.type === 'image'"
        [src]="currentAd.mediaBase64"
        [alt]="currentAd.title"
        class="ad-media"
        loading="lazy"
        (error)="onMediaError(currentAd)"
      />

      <!-- Video Ad -->
      <video 
        *ngIf="currentAd.type === 'video'"
        #videoPlayer
        [src]="currentAd.mediaBase64"
        class="ad-media"
        autoplay
        muted
        playsinline
        (ended)="onVideoEnded()"
        (error)="onMediaError(currentAd)"
      ></video>

      <!-- Ad Overlay Info -->
      <div class="ad-overlay">
        <div class="ad-info">
          <h3 class="ad-title">{{ currentAd.title }}</h3>
          <p *ngIf="currentAd.description" class="ad-description">
            {{ currentAd.description }}
          </p>
        </div>
        
        <!-- External Link Indicator -->
        <span *ngIf="currentAd.targetUrl" class="link-indicator">
          <span class="material-icon">open_in_new</span>
          Visit
        </span>
      </div>
    </div>

    <!-- Navigation Arrows -->
    <button 
      *ngIf="activeAds.length > 1"
      class="nav-btn prev-btn" 
      (click)="prevSlide()"
      aria-label="Previous ad"
    >
      <span class="material-icon">chevron_left</span>
    </button>
    <button 
      *ngIf="activeAds.length > 1"
      class="nav-btn next-btn" 
      (click)="nextSlide()"
      aria-label="Next ad"
    >
      <span class="material-icon">chevron_right</span>
    </button>

    <!-- Slide Indicators -->
    <div *ngIf="activeAds.length > 1" class="slide-indicators">
      <button
        *ngFor="let ad of activeAds; let i = index"
        [class.active]="i === currentAdIndex"
        (click)="goToSlide(i)"
        [attr.aria-label]="'Go to slide ' + (i + 1)"
        class="indicator-dot"
      ></button>
    </div>
  </div>

  <!-- Ad Counter -->
  <div *ngIf="activeAds.length > 1" class="ad-counter">
    {{ currentAdIndex + 1 }} / {{ activeAds.length }}
  </div>
</div>

<!-- Empty State -->
<div *ngIf="!isLoading && activeAds.length === 0" class="ads-empty-placeholder">
  <span class="material-icon">campaign</span>
  <p>No ads to display</p>
</div>
