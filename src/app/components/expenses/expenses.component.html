<div class="expenses-section">
  <div class="card">
    <h3>
      <span class="icon">üí∏</span>
      Add Expense
    </h3>

    <form (ngSubmit)="addExpense()" class="form">
      <div class="form-group">
        <label for="productName">Product/Item Name</label>
        <input
          type="text"
          id="productName"
          [(ngModel)]="productName"
          name="productName"
          placeholder="e.g., Raw materials, Utilities, etc."
          required
        />
      </div>

      <div class="form-group">
        <label for="price">Price/Amount</label>
        <input
          type="number"
          id="price"
          [(ngModel)]="price"
          name="price"
          min="0"
          step="0.01"
          placeholder="0.00"
          required
        />
      </div>

      <div class="form-group">
        <label for="notes">Notes (Optional)</label>
        <textarea
          id="notes"
          [(ngModel)]="notes"
          name="notes"
          placeholder="Additional details about this expense..."
          rows="3"
        ></textarea>
      </div>

      <button type="submit" class="btn-primary" [disabled]="!productName || !price || price <= 0">
        <span>‚ûï</span>
        Add Expense
      </button>
    </form>
  </div>

  <div class="card">
    <div class="section-header">
      <h3>
        <span class="icon">üìã</span>
        Expense History
        <span class="badge">{{ expenses.length }}</span>
      </h3>
      <div class="total-badge">
        Total: ‚Ç±{{ totalExpenses | number:'1.2-2' }}
      </div>
    </div>

    <div class="expenses-list" *ngIf="expenses.length > 0; else noExpenses">
      <table class="expenses-table">
        <thead>
          <tr>
            <th>Product/Item</th>
            <th>Notes</th>
            <th>Date</th>
            <th class="text-right">Amount</th>
            <th class="text-center">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let expense of paginatedExpenses">
            <td class="expense-name">{{ expense.productName }}</td>
            <td class="expense-notes">{{ expense.notes || '‚Äî' }}</td>
            <td class="expense-date">{{ expense.timestamp | date:'short' }}</td>
            <td class="expense-price text-right">‚Ç±{{ expense.price | number:'1.2-2' }}</td>
            <td class="text-center">
              <button 
                class="btn-delete" 
                (click)="deleteExpense(expense)"
                title="Delete expense"
              >
                üóëÔ∏è
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Pagination Controls -->
    <div class="pagination" *ngIf="totalPages > 1 || expenses.length > 5">
      <div class="pagination-size">
        <label for="pageSize">Show:</label>
        <select 
          id="pageSize"
          [(ngModel)]="pageSize"
          (change)="currentPage = 1"
          class="page-size-select"
        >
          <option *ngFor="let size of pageSizeOptions" [value]="size">{{ size }}</option>
        </select>
        <span>per page</span>
      </div>

      <div class="pagination-controls" *ngIf="totalPages > 1">
        <button 
          class="pagination-btn" 
          [disabled]="currentPage === 1"
          (click)="prevPage()"
        >
          ‚Üê Prev
        </button>
        
        <div class="pagination-pages">
          <button 
            *ngFor="let page of getPageNumbers()"
            class="pagination-page"
            [class.active]="page === currentPage"
            (click)="goToPage(page)"
          >
            {{ page }}
          </button>
        </div>

        <button 
          class="pagination-btn" 
          [disabled]="currentPage === totalPages"
          (click)="nextPage()"
        >
          Next ‚Üí
        </button>
      </div>
    </div>

    <ng-template #noExpenses>
      <div class="empty-state">
        <p>No expenses recorded yet</p>
      </div>
    </ng-template>
  </div>
</div>
