var sx=Object.defineProperty,ax=Object.defineProperties;var cx=Object.getOwnPropertyDescriptors;var Ly=Object.getOwnPropertySymbols;var lx=Object.prototype.hasOwnProperty,ux=Object.prototype.propertyIsEnumerable;var jy=(n,e,t)=>e in n?sx(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,J=(n,e)=>{for(var t in e||={})lx.call(e,t)&&jy(n,t,e[t]);if(Ly)for(var t of Ly(e))ux.call(e,t)&&jy(n,t,e[t]);return n},ue=(n,e)=>ax(n,cx(e));var j=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{c(t.next(l))}catch(u){i(u)}},s=l=>{try{c(t.throw(l))}catch(u){i(u)}},c=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);c((t=t.apply(n,e)).next())});var By=null;var ad=1,cd=Symbol("SIGNAL");function Se(n){let e=By;return By=n,e}var Uy={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function dx(n){if(!(dd(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===ad)){if(!n.producerMustRecompute(n)&&!ld(n)){n.dirty=!1,n.lastCleanEpoch=ad;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=ad}}function $y(n){return n&&(n.nextProducerIndex=0),Se(n)}function zy(n,e){if(Se(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(dd(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)ud(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function ld(n){La(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(dx(t),r!==t.version))return!0}return!1}function Hy(n){if(La(n),dd(n))for(let e=0;e<n.producerNode.length;e++)ud(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function ud(n,e){if(hx(n),La(n),n.liveConsumerNode.length===1)for(let r=0;r<n.producerNode.length;r++)ud(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];La(i),i.producerIndexOfThis[r]=e}}function dd(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function La(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function hx(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function fx(){throw new Error}var px=fx;function qy(n){px=n}function ge(n){return typeof n=="function"}function ja(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Ba=ja(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function cs(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Pt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ge(r))try{r()}catch(o){e=o instanceof Ba?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Gy(o)}catch(s){e=e??[],s instanceof Ba?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Ba(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Gy(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&cs(t,e)}remove(e){let{_finalizers:t}=this;t&&cs(t,e),e instanceof n&&e._removeParent(this)}};Pt.EMPTY=(()=>{let n=new Pt;return n.closed=!0,n})();var hd=Pt.EMPTY;function Ua(n){return n instanceof Pt||n&&"closed"in n&&ge(n.remove)&&ge(n.add)&&ge(n.unsubscribe)}function Gy(n){ge(n)?n():n.unsubscribe()}var dn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ui={setTimeout(n,e,...t){let{delegate:r}=Ui;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ui;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function $a(n){Ui.setTimeout(()=>{let{onUnhandledError:e}=dn;if(e)e(n);else throw n})}function fd(){}var Wy=pd("C",void 0,void 0);function Ky(n){return pd("E",void 0,n)}function Qy(n){return pd("N",n,void 0)}function pd(n,e,t){return{kind:n,value:e,error:t}}var ri=null;function $i(n){if(dn.useDeprecatedSynchronousErrorHandling){let e=!ri;if(e&&(ri={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ri;if(ri=null,t)throw r}}else n()}function Yy(n){dn.useDeprecatedSynchronousErrorHandling&&ri&&(ri.errorThrown=!0,ri.error=n)}var ii=class extends Pt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ua(e)&&e.add(this)):this.destination=yx}static create(e,t,r){return new zi(e,t,r)}next(e){this.isStopped?gd(Qy(e),this):this._next(e)}error(e){this.isStopped?gd(Ky(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?gd(Wy,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},mx=Function.prototype.bind;function md(n,e){return mx.call(n,e)}var yd=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){za(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){za(r)}else za(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){za(t)}}},zi=class extends ii{constructor(e,t,r){super();let i;if(ge(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&dn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&md(e.next,o),error:e.error&&md(e.error,o),complete:e.complete&&md(e.complete,o)}):i=e}this.destination=new yd(i)}};function za(n){dn.useDeprecatedSynchronousErrorHandling?Yy(n):$a(n)}function gx(n){throw n}function gd(n,e){let{onStoppedNotification:t}=dn;t&&Ui.setTimeout(()=>t(n,e))}var yx={closed:!0,next:fd,error:gx,complete:fd};var Hi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Jy(n){return n}function Xy(n){return n.length===0?Jy:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var je=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=_x(t)?t:new zi(t,r,i);return $i(()=>{let{operator:s,source:c}=this;o.add(s?s.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Zy(r),new r((i,o)=>{let s=new zi({next:c=>{try{t(c)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Hi](){return this}pipe(...t){return Xy(t)(this)}toPromise(t){return t=Zy(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function Zy(n){var e;return(e=n??dn.Promise)!==null&&e!==void 0?e:Promise}function vx(n){return n&&ge(n.next)&&ge(n.error)&&ge(n.complete)}function _x(n){return n&&n instanceof ii||vx(n)&&Ua(n)}function bx(n){return ge(n?.lift)}function bt(n){return e=>{if(bx(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function wt(n,e,t,r,i){return new vd(n,e,t,r,i)}var vd=class extends ii{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(c){try{t(c)}catch(l){e.error(l)}}:super._next,this._error=i?function(c){try{i(c)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var ev=ja(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Sn=(()=>{class n extends je{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Ha(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new ev}next(t){$i(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){$i(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){$i(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?hd:(this.currentObservers=null,o.push(t),new Pt(()=>{this.currentObservers=null,cs(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new je;return t.source=this,t}}return n.create=(e,t)=>new Ha(e,t),n})(),Ha=class extends Sn{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:hd}};var Je=class extends Sn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var tv=new je(n=>n.complete());function nv(n){return n&&ge(n.schedule)}function rv(n){return n[n.length-1]}function iv(n){return ge(rv(n))?n.pop():void 0}function ov(n){return nv(rv(n))?n.pop():void 0}function av(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(p){try{u(r.next(p))}catch(g){s(g)}}function l(p){try{u(r.throw(p))}catch(g){s(g)}}function u(p){p.done?o(p.value):i(p.value).then(c,l)}u((r=r.apply(n,e||[])).next())})}function sv(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function oi(n){return this instanceof oi?(this.v=n,this):new oi(n)}function cv(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(C){return function(N){return Promise.resolve(N).then(C,g)}}function c(C,N){r[C]&&(i[C]=function(R){return new Promise(function(k,G){o.push([C,R,k,G])>1||l(C,R)})},N&&(i[C]=N(i[C])))}function l(C,N){try{u(r[C](N))}catch(R){b(o[0][3],R)}}function u(C){C.value instanceof oi?Promise.resolve(C.value.v).then(p,g):b(o[0][2],C)}function p(C){l("next",C)}function g(C){l("throw",C)}function b(C,N){C(N),o.shift(),o.length&&l(o[0][0],o[0][1])}}function lv(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof sv=="function"?sv(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(c,l){s=n[o](s),i(c,l,s.done,s.value)})}}function i(o,s,c,l){Promise.resolve(l).then(function(u){o({value:u,done:c})},s)}}var qa=n=>n&&typeof n.length=="number"&&typeof n!="function";function Ga(n){return ge(n?.then)}function Wa(n){return ge(n[Hi])}function Ka(n){return Symbol.asyncIterator&&ge(n?.[Symbol.asyncIterator])}function Qa(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function wx(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ya=wx();function Ja(n){return ge(n?.[Ya])}function Xa(n){return cv(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield oi(t.read());if(i)return yield oi(void 0);yield yield oi(r)}}finally{t.releaseLock()}})}function Za(n){return ge(n?.getReader)}function Ot(n){if(n instanceof je)return n;if(n!=null){if(Wa(n))return Cx(n);if(qa(n))return Ex(n);if(Ga(n))return Ix(n);if(Ka(n))return uv(n);if(Ja(n))return xx(n);if(Za(n))return Dx(n)}throw Qa(n)}function Cx(n){return new je(e=>{let t=n[Hi]();if(ge(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Ex(n){return new je(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Ix(n){return new je(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,$a)})}function xx(n){return new je(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function uv(n){return new je(e=>{Sx(n,e).catch(t=>e.error(t))})}function Dx(n){return uv(Xa(n))}function Sx(n,e){var t,r,i,o;return av(this,void 0,void 0,function*(){try{for(t=lv(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Yt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function ec(n,e=0){return bt((t,r)=>{t.subscribe(wt(r,i=>Yt(r,n,()=>r.next(i),e),()=>Yt(r,n,()=>r.complete(),e),i=>Yt(r,n,()=>r.error(i),e)))})}function tc(n,e=0){return bt((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function dv(n,e){return Ot(n).pipe(tc(e),ec(e))}function hv(n,e){return Ot(n).pipe(tc(e),ec(e))}function fv(n,e){return new je(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function pv(n,e){return new je(t=>{let r;return Yt(t,e,()=>{r=n[Ya](),Yt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ge(r?.return)&&r.return()})}function nc(n,e){if(!n)throw new Error("Iterable cannot be null");return new je(t=>{Yt(t,e,()=>{let r=n[Symbol.asyncIterator]();Yt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function mv(n,e){return nc(Xa(n),e)}function gv(n,e){if(n!=null){if(Wa(n))return dv(n,e);if(qa(n))return fv(n,e);if(Ga(n))return hv(n,e);if(Ka(n))return nc(n,e);if(Ja(n))return pv(n,e);if(Za(n))return mv(n,e)}throw Qa(n)}function Tn(n,e){return e?gv(n,e):Ot(n)}function rc(...n){let e=ov(n);return Tn(n,e)}function lt(n,e){return bt((t,r)=>{let i=0;t.subscribe(wt(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:Tx}=Array;function Mx(n,e){return Tx(e)?n(...e):n(e)}function yv(n){return lt(e=>Mx(n,e))}var{isArray:Ax}=Array,{getPrototypeOf:Px,prototype:Ox,keys:Nx}=Object;function vv(n){if(n.length===1){let e=n[0];if(Ax(e))return{args:e,keys:null};if(Rx(e)){let t=Nx(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function Rx(n){return n&&typeof n=="object"&&Px(n)===Ox}function _v(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function bv(n,e,t,r,i,o,s,c){let l=[],u=0,p=0,g=!1,b=()=>{g&&!l.length&&!u&&e.complete()},C=R=>u<r?N(R):l.push(R),N=R=>{o&&e.next(R),u++;let k=!1;Ot(t(R,p++)).subscribe(wt(e,G=>{i?.(G),o?C(G):e.next(G)},()=>{k=!0},void 0,()=>{if(k)try{for(u--;l.length&&u<r;){let G=l.shift();s?Yt(e,s,()=>N(G)):N(G)}b()}catch(G){e.error(G)}}))};return n.subscribe(wt(e,C,()=>{g=!0,b()})),()=>{c?.()}}function ic(n,e,t=1/0){return ge(e)?ic((r,i)=>lt((o,s)=>e(r,o,i,s))(Ot(n(r,i))),t):(typeof e=="number"&&(t=e),bt((r,i)=>bv(r,i,n,t)))}function _d(...n){let e=iv(n),{args:t,keys:r}=vv(n),i=new je(o=>{let{length:s}=t;if(!s){o.complete();return}let c=new Array(s),l=s,u=s;for(let p=0;p<s;p++){let g=!1;Ot(t[p]).subscribe(wt(o,b=>{g||(g=!0,u--),c[p]=b},()=>l--,void 0,()=>{(!l||!g)&&(u||o.next(r?_v(r,c):c),o.complete())}))}});return e?i.pipe(yv(e)):i}function bd(n,e){return bt((t,r)=>{let i=0;t.subscribe(wt(r,o=>n.call(e,o,i++)&&r.next(o)))})}function wd(n,e){return ge(e)?ic(n,e,1):ic(n,1)}function si(n){return n<=0?()=>tv:bt((e,t)=>{let r=0;e.subscribe(wt(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Cd(n){return bt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function qi(n,e){return bt((t,r)=>{let i=null,o=0,s=!1,c=()=>s&&!i&&r.complete();t.subscribe(wt(r,l=>{i?.unsubscribe();let u=0,p=o++;Ot(n(l,p)).subscribe(i=wt(r,g=>r.next(e?e(l,g,p,u++):g),()=>{i=null,c()}))},()=>{s=!0,c()}))})}var i0="https://g.co/ng/security#xss",de=class extends Error{constructor(e,t){super(Rc(e,t)),this.code=e}};function Rc(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function bs(n){return{toString:n}.toString()}var oc="__parameters__";function kx(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function o0(n,e,t){return bs(()=>{let r=kx(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return c.annotation=s,c;function c(l,u,p){let g=l.hasOwnProperty(oc)?l[oc]:Object.defineProperty(l,oc,{value:[]})[oc];for(;g.length<=p;)g.push(null);return(g[p]=g[p]||[]).push(s),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Gn=globalThis;function Be(n){for(let e in n)if(n[e]===Be)return e;throw Error("Could not find renamed property on target object.")}function Fx(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ft(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Ft).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function wv(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var Vx=Be({__forward_ref__:Be});function Lt(n){return n.__forward_ref__=Lt,n.toString=function(){return Ft(this())},n}function St(n){return s0(n)?n():n}function s0(n){return typeof n=="function"&&n.hasOwnProperty(Vx)&&n.__forward_ref__===Lt}function me(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function bi(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ah(n){return Cv(n,a0)||Cv(n,c0)}function Cv(n,e){return n.hasOwnProperty(e)?n[e]:null}function Lx(n){let e=n&&(n[a0]||n[c0]);return e||null}function Ev(n){return n&&(n.hasOwnProperty(Iv)||n.hasOwnProperty(jx))?n[Iv]:null}var a0=Be({\u0275prov:Be}),Iv=Be({\u0275inj:Be}),c0=Be({ngInjectableDef:Be}),jx=Be({ngInjectorDef:Be}),pe=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=me({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function l0(n){return n&&!!n.\u0275providers}var Bx=Be({\u0275cmp:Be}),Ux=Be({\u0275dir:Be}),$x=Be({\u0275pipe:Be});var pc=Be({\u0275fac:Be}),ls=Be({__NG_ELEMENT_ID__:Be}),xv=Be({__NG_ENV_ID__:Be});function Wn(n){return typeof n=="string"?n:n==null?"":String(n)}function zx(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Wn(n)}function Hx(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new de(-200,n)}function Ph(n,e){throw new de(-201,!1)}var _e=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(_e||{}),jd;function u0(){return jd}function Nt(n){let e=jd;return jd=n,e}function d0(n,e,t){let r=Ah(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&_e.Optional)return null;if(e!==void 0)return e;Ph(n,"Injector")}var qx={},us=qx,Bd="__NG_DI_FLAG__",mc="ngTempTokenPath",Gx="ngTokenPath",Wx=/\n/gm,Kx="\u0275",Dv="__source",Qi;function Qx(){return Qi}function Pr(n){let e=Qi;return Qi=n,e}function Yx(n,e=_e.Default){if(Qi===void 0)throw new de(-203,!1);return Qi===null?d0(n,void 0,e):Qi.get(n,e&_e.Optional?null:void 0,e)}function oe(n,e=_e.Default){return(u0()||Yx)(St(n),e)}function Fe(n,e=_e.Default){return oe(n,kc(e))}function kc(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Ud(n){let e=[];for(let t=0;t<n.length;t++){let r=St(n[t]);if(Array.isArray(r)){if(r.length===0)throw new de(900,!1);let i,o=_e.Default;for(let s=0;s<r.length;s++){let c=r[s],l=Jx(c);typeof l=="number"?l===-1?i=c.token:o|=l:i=c}e.push(oe(i,o))}else e.push(oe(r))}return e}function h0(n,e){return n[Bd]=e,n.prototype[Bd]=e,n}function Jx(n){return n[Bd]}function Xx(n,e,t,r){let i=n[mc];throw e[Dv]&&i.unshift(e[Dv]),n.message=Zx(`
`+n.message,i,t,r),n[Gx]=i,n[mc]=null,n}function Zx(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==Kx?n.slice(2):n;let i=Ft(e);if(Array.isArray(e))i=e.map(Ft).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let c=e[s];o.push(s+":"+(typeof c=="string"?JSON.stringify(c):Ft(c)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Wx,`
  `)}`}var f0=h0(o0("Optional"),8);var eD=h0(o0("SkipSelf"),4);function ui(n,e){let t=n.hasOwnProperty(pc);return t?n[pc]:null}function tD(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function nD(n){return n.flat(Number.POSITIVE_INFINITY)}function Oh(n,e){n.forEach(t=>Array.isArray(t)?Oh(t,e):e(t))}function p0(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function gc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function rD(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function iD(n,e,t){let r=ws(n,e);return r>=0?n[r|1]=t:(r=~r,rD(n,r,e,t)),r}function Ed(n,e){let t=ws(n,e);if(t>=0)return n[t|1]}function ws(n,e){return oD(n,e,1)}function oD(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Ji={},Jt=[],ds=new pe(""),m0=new pe("",-1),g0=new pe(""),yc=class{get(e,t=us){if(t===us){let r=new Error(`NullInjectorError: No provider for ${Ft(e)}!`);throw r.name="NullInjectorError",r}return t}},y0=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(y0||{}),Pn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Pn||{}),Xt=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Xt||{});function sD(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function $d(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],c=t[r++];n.setAttribute(e,s,c,o)}else{let o=i,s=t[++r];cD(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function aD(n){return n===3||n===4||n===6}function cD(n){return n.charCodeAt(0)===64}function hs(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?Sv(n,t,i,null,e[++r]):Sv(n,t,i,null,null))}}return n}function Sv(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let c=n[o++];if(typeof c=="number"){if(c===e){s=-1;break}else if(c>e){s=o-1;break}}}for(;o<n.length;){let c=n[o];if(typeof c=="number")break;if(c===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var v0="ng-template";function lD(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&sD(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Nh(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Nh(n){return n.type===4&&n.value!==v0}function uD(n,e,t){let r=n.type===4&&!t?v0:n.value;return e===r}function dD(n,e,t){let r=4,i=n.attrs,o=i!==null?pD(i):0,s=!1;for(let c=0;c<e.length;c++){let l=e[c];if(typeof l=="number"){if(!s&&!hn(r)&&!hn(l))return!1;if(s&&hn(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!uD(n,l,t)||l===""&&e.length===1){if(hn(r))return!1;s=!0}}else if(r&8){if(i===null||!lD(n,i,l,t)){if(hn(r))return!1;s=!0}}else{let u=e[++c],p=hD(l,i,Nh(n),t);if(p===-1){if(hn(r))return!1;s=!0;continue}if(u!==""){let g;if(p>o?g="":g=i[p+1].toLowerCase(),r&2&&u!==g){if(hn(r))return!1;s=!0}}}}return hn(r)||s}function hn(n){return(n&1)===0}function hD(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return mD(e,n)}function fD(n,e,t=!1){for(let r=0;r<e.length;r++)if(dD(n,e[r],t))return!0;return!1}function pD(n){for(let e=0;e<n.length;e++){let t=n[e];if(aD(t))return e}return n.length}function mD(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function Tv(n,e){return n?":not("+e.trim()+")":e}function gD(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let c=n[++t];i+="["+s+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!hn(s)&&(e+=Tv(o,i),i=""),r=s,o=o||!hn(r);t++}return i!==""&&(e+=Tv(o,i)),e}function yD(n){return n.map(gD).join(",")}function vD(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!hn(i))break;i=o}r++}return{attrs:e,classes:t}}function $e(n){return bs(()=>{let e=w0(n),t=ue(J({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===y0.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Pn.Emulated,styles:n.styles||Jt,_:null,schemas:n.schemas||null,tView:null,id:""});C0(t);let r=n.dependencies;return t.directiveDefs=Av(r,!1),t.pipeDefs=Av(r,!0),t.id=CD(t),t})}function _D(n){return Xi(n)||_0(n)}function bD(n){return n!==null}function wi(n){return bs(()=>({type:n.type,bootstrap:n.bootstrap||Jt,declarations:n.declarations||Jt,imports:n.imports||Jt,exports:n.exports||Jt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Mv(n,e){if(n==null)return Ji;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,c=Xt.None;Array.isArray(i)?(c=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=c!==Xt.None?[r,c]:r,e[o]=s):t[o]=r}return t}function We(n){return bs(()=>{let e=w0(n);return C0(e),e})}function Fc(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Xi(n){return n[Bx]||null}function _0(n){return n[Ux]||null}function b0(n){return n[$x]||null}function wD(n){let e=Xi(n)||_0(n)||b0(n);return e!==null?e.standalone:!1}function w0(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Ji,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Jt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Mv(n.inputs,e),outputs:Mv(n.outputs),debugInfo:null}}function C0(n){n.features?.forEach(e=>e(n))}function Av(n,e){if(!n)return null;let t=e?b0:_D;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(bD)}function CD(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Vc(n){return{\u0275providers:n}}function ED(...n){return{\u0275providers:E0(!0,n),\u0275fromNgModule:!0}}function E0(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Oh(e,s=>{let c=s;zd(c,o,[],r)&&(i||=[],i.push(c))}),i!==void 0&&I0(i,o),t}function I0(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Rh(i,o=>{e(o,r)})}}function zd(n,e,t,r){if(n=St(n),!n)return!1;let i=null,o=Ev(n),s=!o&&Xi(n);if(!o&&!s){let l=n.ngModule;if(o=Ev(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=n}let c=r.has(i);if(s){if(c)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of l)zd(u,e,t,r)}}else if(o){if(o.imports!=null&&!c){r.add(i);let u;try{Oh(o.imports,p=>{zd(p,e,t,r)&&(u||=[],u.push(p))})}finally{}u!==void 0&&I0(u,e)}if(!c){let u=ui(i)||(()=>new i);e({provide:i,useFactory:u,deps:Jt},i),e({provide:g0,useValue:i,multi:!0},i),e({provide:ds,useValue:()=>oe(i),multi:!0},i)}let l=o.providers;if(l!=null&&!c){let u=n;Rh(l,p=>{e(p,u)})}}else return!1;return i!==n&&n.providers!==void 0}function Rh(n,e){for(let t of n)l0(t)&&(t=t.\u0275providers),Array.isArray(t)?Rh(t,e):e(t)}var ID=Be({provide:String,useValue:Be});function x0(n){return n!==null&&typeof n=="object"&&ID in n}function xD(n){return!!(n&&n.useExisting)}function DD(n){return!!(n&&n.useFactory)}function Zi(n){return typeof n=="function"}function SD(n){return!!n.useClass}var Lc=new pe(""),cc={},TD={},Id;function kh(){return Id===void 0&&(Id=new yc),Id}var On=class{},fs=class extends On{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,qd(e,s=>this.processProvider(s)),this.records.set(m0,Gi(void 0,this)),i.has("environment")&&this.records.set(On,Gi(void 0,this));let o=this.records.get(Lc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(g0,Jt,_e.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Se(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Se(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Pr(this),r=Nt(void 0),i;try{return e()}finally{Pr(t),Nt(r)}}get(e,t=us,r=_e.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(xv))return e[xv](this);r=kc(r);let i,o=Pr(this),s=Nt(void 0);try{if(!(r&_e.SkipSelf)){let l=this.records.get(e);if(l===void 0){let u=ND(e)&&Ah(e);u&&this.injectableDefInScope(u)?l=Gi(Hd(e),cc):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let c=r&_e.Self?kh():this.parent;return t=r&_e.Optional&&t===us?null:t,c.get(e,t)}catch(c){if(c.name==="NullInjectorError"){if((c[mc]=c[mc]||[]).unshift(Ft(e)),o)throw c;return Xx(c,e,"R3InjectorError",this.source)}else throw c}finally{Nt(s),Pr(o)}}resolveInjectorInitializers(){let e=Se(null),t=Pr(this),r=Nt(void 0),i;try{let o=this.get(ds,Jt,_e.Self);for(let s of o)s()}finally{Pr(t),Nt(r),Se(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Ft(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new de(205,!1)}processProvider(e){e=St(e);let t=Zi(e)?e:St(e&&e.provide),r=AD(e);if(!Zi(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Gi(void 0,cc,!0),i.factory=()=>Ud(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Se(null);try{return t.value===cc&&(t.value=TD,t.value=t.factory()),typeof t.value=="object"&&t.value&&OD(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Se(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=St(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Hd(n){let e=Ah(n),t=e!==null?e.factory:ui(n);if(t!==null)return t;if(n instanceof pe)throw new de(204,!1);if(n instanceof Function)return MD(n);throw new de(204,!1)}function MD(n){if(n.length>0)throw new de(204,!1);let t=Lx(n);return t!==null?()=>t.factory(n):()=>new n}function AD(n){if(x0(n))return Gi(void 0,n.useValue);{let e=D0(n);return Gi(e,cc)}}function D0(n,e,t){let r;if(Zi(n)){let i=St(n);return ui(i)||Hd(i)}else if(x0(n))r=()=>St(n.useValue);else if(DD(n))r=()=>n.useFactory(...Ud(n.deps||[]));else if(xD(n))r=()=>oe(St(n.useExisting));else{let i=St(n&&(n.useClass||n.provide));if(PD(n))r=()=>new i(...Ud(n.deps));else return ui(i)||Hd(i)}return r}function Gi(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function PD(n){return!!n.deps}function OD(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function ND(n){return typeof n=="function"||typeof n=="object"&&n instanceof pe}function qd(n,e){for(let t of n)Array.isArray(t)?qd(t,e):t&&l0(t)?qd(t.\u0275providers,e):e(t)}function S0(n,e){n instanceof fs&&n.assertNotDestroyed();let t,r=Pr(n),i=Nt(void 0);try{return e()}finally{Pr(r),Nt(i)}}function RD(){return u0()!==void 0||Qx()!=null}function kD(n){return typeof n=="function"}var Xn=0,he=1,ie=2,vt=3,fn=4,gn=5,vc=6,ps=7,pn=8,eo=9,mn=10,st=11,ms=12,Pv=13,io=14,Nn=15,Cs=16,Wi=17,Kn=18,jc=19,T0=20,Or=21,xd=22,di=23,Zt=25,M0=1;var hi=7,_c=8,to=9,Vt=10,Fh=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Fh||{});function ci(n){return Array.isArray(n)&&typeof n[M0]=="object"}function Zn(n){return Array.isArray(n)&&n[M0]===!0}function A0(n){return(n.flags&4)!==0}function Bc(n){return n.componentOffset>-1}function Vh(n){return(n.flags&1)===1}function Nr(n){return!!n.template}function FD(n){return(n[ie]&512)!==0}var Gd=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function P0(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Ci(){return O0}function O0(n){return n.type.prototype.ngOnChanges&&(n.setInput=LD),VD}Ci.ngInherit=!0;function VD(){let n=R0(this),e=n?.current;if(e){let t=n.previous;if(t===Ji)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function LD(n,e,t,r,i){let o=this.declaredInputs[r],s=R0(n)||jD(n,{previous:Ji,current:null}),c=s.current||(s.current={}),l=s.previous,u=l[o];c[o]=new Gd(u&&u.currentValue,t,l===Ji),P0(n,e,i,t)}var N0="__ngSimpleChanges__";function R0(n){return n[N0]||null}function jD(n,e){return n[N0]=e}var Ov=null;var Mn=function(n,e,t){Ov?.(n,e,t)},BD="svg",UD="math",$D=!1;function zD(){return $D}function Rn(n){for(;Array.isArray(n);)n=n[Xn];return n}function k0(n,e){return Rn(e[n])}function en(n,e){return Rn(e[n.index])}function F0(n,e){return n.data[e]}function Lh(n,e){return n[e]}function Rr(n,e){let t=e[n];return ci(t)?t:t[Xn]}function HD(n){return(n[ie]&4)===4}function jh(n){return(n[ie]&128)===128}function qD(n){return Zn(n[vt])}function bc(n,e){return e==null?null:n[e]}function V0(n){n[Wi]=0}function GD(n){n[ie]&1024||(n[ie]|=1024,jh(n)&&gs(n))}function WD(n,e){for(;n>0;)e=e[io],n--;return e}function Bh(n){return!!(n[ie]&9216||n[di]?.dirty)}function Wd(n){n[mn].changeDetectionScheduler?.notify(1),Bh(n)?gs(n):n[ie]&64&&(zD()?(n[ie]|=1024,gs(n)):n[mn].changeDetectionScheduler?.notify())}function gs(n){n[mn].changeDetectionScheduler?.notify();let e=ys(n);for(;e!==null&&!(e[ie]&8192||(e[ie]|=8192,!jh(e)));)e=ys(e)}function L0(n,e){if((n[ie]&256)===256)throw new de(911,!1);n[Or]===null&&(n[Or]=[]),n[Or].push(e)}function KD(n,e){if(n[Or]===null)return;let t=n[Or].indexOf(e);t!==-1&&n[Or].splice(t,1)}function ys(n){let e=n[vt];return Zn(e)?e[vt]:e}var fe={lFrame:W0(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function QD(){return fe.lFrame.elementDepthCount}function YD(){fe.lFrame.elementDepthCount++}function JD(){fe.lFrame.elementDepthCount--}function j0(){return fe.bindingsEnabled}function XD(){return fe.skipHydrationRootTNode!==null}function ZD(n){return fe.skipHydrationRootTNode===n}function e1(){fe.skipHydrationRootTNode=null}function Ie(){return fe.lFrame.lView}function Ct(){return fe.lFrame.tView}function V(n){return fe.lFrame.contextLView=n,n[pn]}function L(n){return fe.lFrame.contextLView=null,n}function jt(){let n=B0();for(;n!==null&&n.type===64;)n=n.parent;return n}function B0(){return fe.lFrame.currentTNode}function t1(){let n=fe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Es(n,e){let t=fe.lFrame;t.currentTNode=n,t.isParent=e}function U0(){return fe.lFrame.isParent}function n1(){fe.lFrame.isParent=!1}function r1(){return fe.lFrame.contextLView}function $0(){let n=fe.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function z0(){return fe.lFrame.bindingIndex}function i1(n){return fe.lFrame.bindingIndex=n}function Uc(){return fe.lFrame.bindingIndex++}function Uh(n){let e=fe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function o1(){return fe.lFrame.inI18n}function s1(n,e){let t=fe.lFrame;t.bindingIndex=t.bindingRootIndex=n,Kd(e)}function a1(){return fe.lFrame.currentDirectiveIndex}function Kd(n){fe.lFrame.currentDirectiveIndex=n}function c1(n){let e=fe.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function H0(){return fe.lFrame.currentQueryIndex}function $h(n){fe.lFrame.currentQueryIndex=n}function l1(n){let e=n[he];return e.type===2?e.declTNode:e.type===1?n[gn]:null}function q0(n,e,t){if(t&_e.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&_e.Host);)if(i=l1(o),i===null||(o=o[io],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=fe.lFrame=G0();return r.currentTNode=e,r.lView=n,!0}function zh(n){let e=G0(),t=n[he];fe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function G0(){let n=fe.lFrame,e=n===null?null:n.child;return e===null?W0(n):e}function W0(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function K0(){let n=fe.lFrame;return fe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Q0=K0;function Hh(){let n=K0();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function u1(n){return(fe.lFrame.contextLView=WD(n,fe.lFrame.contextLView))[pn]}function kr(){return fe.lFrame.selectedIndex}function fi(n){fe.lFrame.selectedIndex=n}function qh(){let n=fe.lFrame;return F0(n.tView,n.selectedIndex)}function d1(){return fe.lFrame.currentNamespace}var Y0=!0;function Gh(){return Y0}function Wh(n){Y0=n}function h1(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=O0(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Kh(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:c,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:p}=o;s&&(n.contentHooks??=[]).push(-t,s),c&&((n.contentHooks??=[]).push(t,c),(n.contentCheckHooks??=[]).push(t,c)),l&&(n.viewHooks??=[]).push(-t,l),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),p!=null&&(n.destroyHooks??=[]).push(t,p)}}function lc(n,e,t){J0(n,e,3,t)}function uc(n,e,t,r){(n[ie]&3)===t&&J0(n,e,t,r)}function Dd(n,e){let t=n[ie];(t&3)===e&&(t&=16383,t+=1,n[ie]=t)}function J0(n,e,t,r){let i=r!==void 0?n[Wi]&65535:0,o=r??-1,s=e.length-1,c=0;for(let l=i;l<s;l++)if(typeof e[l+1]=="number"){if(c=e[l],r!=null&&c>=r)break}else e[l]<0&&(n[Wi]+=65536),(c<o||o==-1)&&(f1(n,t,e,l),n[Wi]=(n[Wi]&4294901760)+l+2),l++}function Nv(n,e){Mn(4,n,e);let t=Se(null);try{e.call(n)}finally{Se(t),Mn(5,n,e)}}function f1(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],c=n[s];i?n[ie]>>14<n[Wi]>>16&&(n[ie]&3)===e&&(n[ie]+=16384,Nv(c,o)):Nv(c,o)}var Yi=-1,pi=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function p1(n){return n instanceof pi}function m1(n){return(n.flags&8)!==0}function g1(n){return(n.flags&16)!==0}function X0(n){return n!==Yi}function wc(n){return n&32767}function y1(n){return n>>16}function Cc(n,e){let t=y1(n),r=e;for(;t>0;)r=r[io],t--;return r}var Qd=!0;function Ec(n){let e=Qd;return Qd=n,e}var v1=256,Z0=v1-1,e_=5,_1=0,An={};function b1(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ls)&&(r=t[ls]),r==null&&(r=t[ls]=_1++);let i=r&Z0,o=1<<i;e.data[n+(i>>e_)]|=o}function Ic(n,e){let t=t_(n,e);if(t!==-1)return t;let r=e[he];r.firstCreatePass&&(n.injectorIndex=e.length,Sd(r.data,n),Sd(e,null),Sd(r.blueprint,null));let i=Qh(n,e),o=n.injectorIndex;if(X0(i)){let s=wc(i),c=Cc(i,e),l=c[he].data;for(let u=0;u<8;u++)e[o+u]=c[s+u]|l[s+u]}return e[o+8]=i,o}function Sd(n,e){n.push(0,0,0,0,0,0,0,0,e)}function t_(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Qh(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=s_(i),r===null)return Yi;if(t++,i=i[io],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Yi}function Yd(n,e,t){b1(n,e,t)}function n_(n,e,t){if(t&_e.Optional||n!==void 0)return n;Ph(e,"NodeInjector")}function r_(n,e,t,r){if(t&_e.Optional&&r===void 0&&(r=null),!(t&(_e.Self|_e.Host))){let i=n[eo],o=Nt(void 0);try{return i?i.get(e,r,t&_e.Optional):d0(e,r,t&_e.Optional)}finally{Nt(o)}}return n_(r,e,t)}function i_(n,e,t,r=_e.Default,i){if(n!==null){if(e[ie]&2048&&!(r&_e.Self)){let s=I1(n,e,t,r,An);if(s!==An)return s}let o=o_(n,e,t,r,An);if(o!==An)return o}return r_(e,t,r,i)}function o_(n,e,t,r,i){let o=C1(t);if(typeof o=="function"){if(!q0(e,n,r))return r&_e.Host?n_(i,t,r):r_(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&_e.Optional))Ph(t);else return s}finally{Q0()}}else if(typeof o=="number"){let s=null,c=t_(n,e),l=Yi,u=r&_e.Host?e[Nn][gn]:null;for((c===-1||r&_e.SkipSelf)&&(l=c===-1?Qh(n,e):e[c+8],l===Yi||!kv(r,!1)?c=-1:(s=e[he],c=wc(l),e=Cc(l,e)));c!==-1;){let p=e[he];if(Rv(o,c,p.data)){let g=w1(c,e,t,s,r,u);if(g!==An)return g}l=e[c+8],l!==Yi&&kv(r,e[he].data[c+8]===u)&&Rv(o,c,e)?(s=p,c=wc(l),e=Cc(l,e)):c=-1}}return i}function w1(n,e,t,r,i,o){let s=e[he],c=s.data[n+8],l=r==null?Bc(c)&&Qd:r!=s&&(c.type&3)!==0,u=i&_e.Host&&o===c,p=dc(c,s,t,l,u);return p!==null?mi(e,s,p,c):An}function dc(n,e,t,r,i){let o=n.providerIndexes,s=e.data,c=o&1048575,l=n.directiveStart,u=n.directiveEnd,p=o>>20,g=r?c:c+p,b=i?c+p:u;for(let C=g;C<b;C++){let N=s[C];if(C<l&&t===N||C>=l&&N.type===t)return C}if(i){let C=s[l];if(C&&Nr(C)&&C.type===t)return l}return null}function mi(n,e,t,r){let i=n[t],o=e.data;if(p1(i)){let s=i;s.resolving&&Hx(zx(o[t]));let c=Ec(s.canSeeViewProviders);s.resolving=!0;let l,u=s.injectImpl?Nt(s.injectImpl):null,p=q0(n,r,_e.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&h1(t,o[t],e)}finally{u!==null&&Nt(u),Ec(c),s.resolving=!1,Q0()}}return i}function C1(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ls)?n[ls]:void 0;return typeof e=="number"?e>=0?e&Z0:E1:e}function Rv(n,e,t){let r=1<<n;return!!(t[e+(n>>e_)]&r)}function kv(n,e){return!(n&_e.Self)&&!(n&_e.Host&&e)}var li=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return i_(this._tNode,this._lView,e,kc(r),t)}};function E1(){return new li(jt(),Ie())}function Fr(n){return bs(()=>{let e=n.prototype.constructor,t=e[pc]||Jd(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[pc]||Jd(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Jd(n){return s0(n)?()=>{let e=Jd(St(n));return e&&e()}:ui(n)}function I1(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ie]&2048&&!(s[ie]&512);){let c=o_(o,s,t,r|_e.Self,An);if(c!==An)return c;let l=o.parent;if(!l){let u=s[T0];if(u){let p=u.get(t,An,r);if(p!==An)return p}l=s_(s),s=s[io]}o=l}return i}function s_(n){let e=n[he],t=e.type;return t===2?e.declTNode:t===1?n[gn]:null}function Fv(n,e=null,t=null,r){let i=x1(n,e,t,r);return i.resolveInjectorInitializers(),i}function x1(n,e=null,t=null,r,i=new Set){let o=[t||Jt,ED(n)];return r=r||(typeof n=="object"?void 0:Ft(n)),new fs(o,e||kh(),r||null,i)}var Is=(()=>{class n{static{this.THROW_IF_NOT_FOUND=us}static{this.NULL=new yc}static create(t,r){if(Array.isArray(t))return Fv({name:""},r,t,"");{let i=t.name??"";return Fv({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=me({token:n,providedIn:"any",factory:()=>oe(m0)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();var D1="ngOriginalError";function Td(n){return n[D1]}var Qn=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Td(e);for(;t&&Td(t);)t=Td(t);return t||null}},a_=new pe("",{providedIn:"root",factory:()=>Fe(Qn).handleError.bind(void 0)}),c_=(()=>{class n{static{this.__NG_ELEMENT_ID__=S1}static{this.__NG_ENV_ID__=t=>t}}return n})(),Xd=class extends c_{constructor(e){super(),this._lView=e}onDestroy(e){return L0(this._lView,e),()=>KD(this._lView,e)}};function S1(){return new Xd(Ie())}function T1(){return oo(jt(),Ie())}function oo(n,e){return new tn(en(n,e))}var tn=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=T1}}return n})();function M1(n){return n instanceof tn?n.nativeElement:n}var Zd=class extends Sn{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,RD()&&(this.destroyRef=Fe(c_,{optional:!0})??void 0)}emit(e){let t=Se(null);try{super.next(e)}finally{Se(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=Md(o),i&&(i=Md(i)),s&&(s=Md(s)));let c=super.subscribe({next:i,error:o,complete:s});return e instanceof Pt&&e.add(c),c}};function Md(n){return e=>{setTimeout(n,void 0,e)}}var kt=Zd;function A1(){return this._results[Symbol.iterator]()}var eh=class n{get changes(){return this._changes??=new kt}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=A1)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=nD(e);(this._changesDetected=!tD(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function l_(n){return(n.flags&128)===128}var u_=new Map,P1=0;function O1(){return P1++}function N1(n){u_.set(n[jc],n)}function R1(n){u_.delete(n[jc])}var Vv="__ngContext__";function gi(n,e){ci(e)?(n[Vv]=e[jc],N1(e)):n[Vv]=e}function d_(n){return f_(n[ms])}function h_(n){return f_(n[fn])}function f_(n){for(;n!==null&&!Zn(n);)n=n[fn];return n}var th;function p_(n){th=n}function k1(){if(th!==void 0)return th;if(typeof document<"u")return document;throw new de(210,!1)}var Yh=new pe("",{providedIn:"root",factory:()=>F1}),F1="ng",Jh=new pe(""),Vr=new pe("",{providedIn:"platform",factory:()=>"unknown"});var Xh=new pe("",{providedIn:"root",factory:()=>k1().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var V1="h",L1="b";var j1=()=>null;function Zh(n,e,t=!1){return j1(n,e,t)}var m_=!1,B1=new pe("",{providedIn:"root",factory:()=>m_});var xc=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${i0})`}};function $c(n){return n instanceof xc?n.changingThisBreaksApplicationSecurity:n}function g_(n,e){let t=U1(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${i0})`)}return t===e}function U1(n){return n instanceof xc&&n.getTypeName()||null}var $1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function y_(n){return n=String(n),n.match($1)?n:"unsafe:"+n}var ef=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(ef||{});function er(n){let e=z1();return e?e.sanitize(ef.URL,n)||"":g_(n,"URL")?$c(n):y_(Wn(n))}function z1(){let n=Ie();return n&&n[mn].sanitizer}function xs(n){return n.ownerDocument}var Yn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Yn||{}),H1;function tf(n,e){return H1(n,e)}function Ki(n,e,t,r,i){if(r!=null){let o,s=!1;Zn(r)?o=r:ci(r)&&(s=!0,r=r[Xn]);let c=Rn(r);n===0&&t!==null?i==null?C_(e,t,c):Dc(e,t,c,i||null,!0):n===1&&t!==null?Dc(e,t,c,i||null,!0):n===2?aS(e,c,s):n===3&&e.destroyNode(c),o!=null&&lS(e,n,o,t,i)}}function q1(n,e){return n.createText(e)}function G1(n,e,t){n.setValue(e,t)}function v_(n,e,t){return n.createElement(e,t)}function W1(n,e){__(n,e),e[Xn]=null,e[gn]=null}function K1(n,e,t,r,i,o){r[Xn]=i,r[gn]=e,zc(n,r,t,1,i,o)}function __(n,e){e[mn].changeDetectionScheduler?.notify(1),zc(n,e,e[st],2,null,null)}function Q1(n){let e=n[ms];if(!e)return Ad(n[he],n);for(;e;){let t=null;if(ci(e))t=e[ms];else{let r=e[Vt];r&&(t=r)}if(!t){for(;e&&!e[fn]&&e!==n;)ci(e)&&Ad(e[he],e),e=e[vt];e===null&&(e=n),ci(e)&&Ad(e[he],e),t=e&&e[fn]}e=t}}function Y1(n,e,t,r){let i=Vt+r,o=t.length;r>0&&(t[i-1][fn]=e),r<o-Vt?(e[fn]=t[i],p0(t,Vt+r,e)):(t.push(e),e[fn]=null),e[vt]=t;let s=e[Cs];s!==null&&t!==s&&J1(s,e);let c=e[Kn];c!==null&&c.insertView(n),Wd(e),e[ie]|=128}function J1(n,e){let t=n[to],i=e[vt][vt][Nn];e[Nn]!==i&&(n[ie]|=Fh.HasTransplantedViews),t===null?n[to]=[e]:t.push(e)}function b_(n,e){let t=n[to],r=t.indexOf(e);t.splice(r,1)}function nh(n,e){if(n.length<=Vt)return;let t=Vt+e,r=n[t];if(r){let i=r[Cs];i!==null&&i!==n&&b_(i,r),e>0&&(n[t-1][fn]=r[fn]);let o=gc(n,Vt+e);W1(r[he],r);let s=o[Kn];s!==null&&s.detachView(o[he]),r[vt]=null,r[fn]=null,r[ie]&=-129}return r}function w_(n,e){if(!(e[ie]&256)){let t=e[st];t.destroyNode&&zc(n,e,t,3,null,null),Q1(e)}}function Ad(n,e){if(e[ie]&256)return;let t=Se(null);try{e[ie]&=-129,e[ie]|=256,e[di]&&Hy(e[di]),Z1(n,e),X1(n,e),e[he].type===1&&e[st].destroy();let r=e[Cs];if(r!==null&&Zn(e[vt])){r!==e[vt]&&b_(r,e);let i=e[Kn];i!==null&&i.detachView(n)}R1(e)}finally{Se(t)}}function X1(n,e){let t=n.cleanup,r=e[ps];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[ps]=null);let i=e[Or];if(i!==null){e[Or]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function Z1(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof pi)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let c=i[o[s]],l=o[s+1];Mn(4,c,l);try{l.call(c)}finally{Mn(5,c,l)}}else{Mn(4,i,o);try{o.call(i)}finally{Mn(5,i,o)}}}}}function eS(n,e,t){return tS(n,e.parent,t)}function tS(n,e,t){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return t[Xn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Pn.None||o===Pn.Emulated)return null}return en(r,t)}}function Dc(n,e,t,r,i){n.insertBefore(e,t,r,i)}function C_(n,e,t){n.appendChild(e,t)}function Lv(n,e,t,r,i){r!==null?Dc(n,e,t,r,i):C_(n,e,t)}function nS(n,e,t,r){n.removeChild(e,t,r)}function nf(n,e){return n.parentNode(e)}function rS(n,e){return n.nextSibling(e)}function iS(n,e,t){return sS(n,e,t)}function oS(n,e,t){return n.type&40?en(n,t):null}var sS=oS,jv;function rf(n,e,t,r){let i=eS(n,r,e),o=e[st],s=r.parent||e[gn],c=iS(s,r,e);if(i!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)Lv(o,i,t[l],c,!1);else Lv(o,i,t,c,!1);jv!==void 0&&jv(o,r,e,t,i)}function hc(n,e){if(e!==null){let t=e.type;if(t&3)return en(e,n);if(t&4)return rh(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return hc(n,r);{let i=n[e.index];return Zn(i)?rh(-1,i):Rn(i)}}else{if(t&32)return tf(e,n)()||Rn(n[e.index]);{let r=E_(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ys(n[Nn]);return hc(i,r)}else return hc(n,e.next)}}}return null}function E_(n,e){if(e!==null){let r=n[Nn][gn],i=e.projection;return r.projection[i]}return null}function rh(n,e){let t=Vt+n+1;if(t<e.length){let r=e[t],i=r[he].firstChild;if(i!==null)return hc(r,i)}return e[hi]}function aS(n,e,t){let r=nf(n,e);r&&nS(n,r,e,t)}function of(n,e,t,r,i,o,s){for(;t!=null;){let c=r[t.index],l=t.type;if(s&&e===0&&(c&&gi(Rn(c),r),t.flags|=2),(t.flags&32)!==32)if(l&8)of(n,e,t.child,r,i,o,!1),Ki(e,n,i,c,o);else if(l&32){let u=tf(t,r),p;for(;p=u();)Ki(e,n,i,p,o);Ki(e,n,i,c,o)}else l&16?cS(n,e,r,t,i,o):Ki(e,n,i,c,o);t=s?t.projectionNext:t.next}}function zc(n,e,t,r,i,o){of(t,r,n.firstChild,e,i,o,!1)}function cS(n,e,t,r,i,o){let s=t[Nn],l=s[gn].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let p=l[u];Ki(e,n,i,p,o)}else{let u=l,p=s[vt];l_(r)&&(u.flags|=128),of(n,e,u,p,i,o,!0)}}function lS(n,e,t,r,i){let o=t[hi],s=Rn(t);o!==s&&Ki(e,n,r,o,i);for(let c=Vt;c<t.length;c++){let l=t[c];zc(l[he],l,n,e,r,o)}}function uS(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Yn.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Yn.Important),n.setStyle(t,r,i,o))}}function dS(n,e,t){n.setAttribute(e,"style",t)}function I_(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function x_(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&$d(n,e,r),i!==null&&I_(n,e,i),o!==null&&dS(n,e,o)}var yn={};function v(n=1){D_(Ct(),Ie(),kr()+n,!1)}function D_(n,e,t,r){if(!r)if((e[ie]&3)===3){let o=n.preOrderCheckHooks;o!==null&&lc(e,o,t)}else{let o=n.preOrderHooks;o!==null&&uc(e,o,0,t)}fi(t)}function W(n,e=_e.Default){let t=Ie();if(t===null)return oe(n,e);let r=jt();return i_(r,t,St(n),e)}function S_(n,e,t,r,i,o){let s=Se(null);try{let c=null;i&Xt.SignalBased&&(c=e[r][cd]),c!==null&&c.transformFn!==void 0&&(o=c.transformFn(o)),i&Xt.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,c,o,t,r):P0(e,c,r,o)}finally{Se(s)}}function hS(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)fi(~i);else{let o=i,s=t[++r],c=t[++r];s1(s,o);let l=e[o];c(2,l)}}}finally{fi(-1)}}function Hc(n,e,t,r,i,o,s,c,l,u,p){let g=e.blueprint.slice();return g[Xn]=i,g[ie]=r|4|128|8|64,(u!==null||n&&n[ie]&2048)&&(g[ie]|=2048),V0(g),g[vt]=g[io]=n,g[pn]=t,g[mn]=s||n&&n[mn],g[st]=c||n&&n[st],g[eo]=l||n&&n[eo]||null,g[gn]=o,g[jc]=O1(),g[vc]=p,g[T0]=u,g[Nn]=e.type==2?n[Nn]:g,g}function qc(n,e,t,r,i){let o=n.data[e];if(o===null)o=fS(n,e,t,r,i),o1()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=t1();o.injectorIndex=s===null?-1:s.injectorIndex}return Es(o,!0),o}function fS(n,e,t,r,i){let o=B0(),s=U0(),c=s?o:o&&o.parent,l=n.data[e]=_S(n,c,t,e,r,i);return n.firstChild===null&&(n.firstChild=l),o!==null&&(s?o.child==null&&l.parent!==null&&(o.child=l):o.next===null&&(o.next=l,l.prev=o)),l}function T_(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function M_(n,e,t,r,i){let o=kr(),s=r&2;try{fi(-1),s&&e.length>Zt&&D_(n,e,Zt,!1),Mn(s?2:0,i),t(r,i)}finally{fi(o),Mn(s?3:1,i)}}function A_(n,e,t){if(A0(e)){let r=Se(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let c=n.data[s];if(c.contentQueries){let l=t[s];c.contentQueries(1,l,s)}}}finally{Se(r)}}}function P_(n,e,t){j0()&&(xS(n,e,t,en(t,e)),(t.flags&64)===64&&V_(n,e,t))}function O_(n,e,t=en){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],c=s===-1?t(e,n):n[s];n[i++]=c}}}function N_(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=sf(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function sf(n,e,t,r,i,o,s,c,l,u,p){let g=Zt+r,b=g+i,C=pS(g,b),N=typeof u=="function"?u():u;return C[he]={type:n,blueprint:C,template:t,queries:null,viewQuery:c,declTNode:e,data:C.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:b,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:N,incompleteFirstPass:!1,ssrId:p}}function pS(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:yn);return t}function mS(n,e,t,r){let o=r.get(B1,m_)||t===Pn.ShadowDom,s=n.selectRootElement(e,o);return gS(s),s}function gS(n){yS(n)}var yS=()=>null;function vS(n,e,t,r){let i=B_(e);i.push(t),n.firstCreatePass&&U_(n).push(r,i.length-1)}function _S(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,c=0;return XD()&&(c|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Bv(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let c,l=Xt.None;Array.isArray(s)?(c=s[0],l=s[1]):c=s;let u=o;if(i!==null){if(!i.hasOwnProperty(o))continue;u=i[o]}n===0?Uv(r,t,u,c,l):Uv(r,t,u,c)}return r}function Uv(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function bS(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,c=[],l=null,u=null;for(let p=r;p<i;p++){let g=o[p],b=t?t.get(g):null,C=b?b.inputs:null,N=b?b.outputs:null;l=Bv(0,g.inputs,p,l,C),u=Bv(1,g.outputs,p,u,N);let R=l!==null&&s!==null&&!Nh(e)?FS(l,p,s):null;c.push(R)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=c,e.inputs=l,e.outputs=u}function wS(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function R_(n,e,t,r,i,o,s,c){let l=en(e,t),u=e.inputs,p;!c&&u!=null&&(p=u[r])?(af(n,t,p,r,i),Bc(e)&&CS(t,e.index)):e.type&3?(r=wS(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(l,r,i)):e.type&12}function CS(n,e){let t=Rr(e,n);t[ie]&16||(t[ie]|=64)}function k_(n,e,t,r){if(j0()){let i=r===null?null:{"":-1},o=SS(n,t),s,c;o===null?s=c=null:[s,c]=o,s!==null&&F_(n,e,t,s,i,c),i&&TS(t,r,i)}t.mergedAttrs=hs(t.mergedAttrs,t.attrs)}function F_(n,e,t,r,i,o){for(let u=0;u<r.length;u++)Yd(Ic(t,e),n,r[u].type);AS(t,n.data.length,r.length);for(let u=0;u<r.length;u++){let p=r[u];p.providersResolver&&p.providersResolver(p)}let s=!1,c=!1,l=T_(n,e,r.length,null);for(let u=0;u<r.length;u++){let p=r[u];t.mergedAttrs=hs(t.mergedAttrs,p.hostAttrs),PS(n,t,e,l,p),MS(l,p,i),p.contentQueries!==null&&(t.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(t.flags|=64);let g=p.type.prototype;!s&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!c&&(g.ngOnChanges||g.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),c=!0),l++}bS(n,t,o)}function ES(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let c=~e.index;IS(s)!=c&&s.push(c),s.push(t,r,o)}}function IS(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function xS(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Bc(t)&&OS(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Ic(t,e),gi(r,e);let s=t.initialInputs;for(let c=i;c<o;c++){let l=n.data[c],u=mi(e,n,c,t);if(gi(u,e),s!==null&&kS(e,c-i,u,l,t,s),Nr(l)){let p=Rr(t.index,e);p[pn]=mi(e,n,c,t)}}}function V_(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=a1();try{fi(o);for(let c=r;c<i;c++){let l=n.data[c],u=e[c];Kd(c),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&DS(l,u)}}finally{fi(-1),Kd(s)}}function DS(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function SS(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(fD(e,s.selectors,!1))if(r||(r=[]),Nr(s))if(s.findHostDirectiveDefs!==null){let c=[];i=i||new Map,s.findHostDirectiveDefs(s,c,i),r.unshift(...c,s);let l=c.length;ih(n,e,l)}else r.unshift(s),ih(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function ih(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function TS(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new de(-301,!1);r.push(e[i],o)}}}function MS(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Nr(e)&&(t[""]=n)}}function AS(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function PS(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=ui(i.type,!0)),s=new pi(o,Nr(i),W);n.blueprint[r]=s,t[r]=s,ES(n,e,r,T_(n,t,i.hostVars,yn),i)}function OS(n,e,t){let r=en(e,n),i=N_(t),o=n[mn].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let c=Gc(n,Hc(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=c}function NS(n,e,t,r,i,o){let s=en(n,e);RS(e[st],s,o,n.value,t,r,i)}function RS(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let c=s==null?Wn(o):s(o,r||"",i);n.setAttribute(e,i,c,t)}}function kS(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let c=0;c<s.length;){let l=s[c++],u=s[c++],p=s[c++],g=s[c++];S_(r,t,l,u,p,g)}}function FS(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let c=0;c<s.length;c+=3)if(s[c]===e){r.push(o,s[c+1],s[c+2],t[i+1]);break}}i+=2}return r}function L_(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function j_(n,e){let t=n.contentQueries;if(t!==null){let r=Se(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let c=n.data[s];$h(o),c.contentQueries(2,e[s],s)}}}finally{Se(r)}}}function Gc(n,e){return n[ms]?n[Pv][fn]=e:n[ms]=e,n[Pv]=e,e}function oh(n,e,t){$h(0);let r=Se(null);try{e(n,t)}finally{Se(r)}}function B_(n){return n[ps]||(n[ps]=[])}function U_(n){return n.cleanup||(n.cleanup=[])}function $_(n,e){let t=n[eo],r=t?t.get(Qn,null):null;r&&r.handleError(e)}function af(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],c=t[o++],l=t[o++],u=e[s],p=n.data[s];S_(p,u,r,c,l,i)}}function cf(n,e,t){let r=k0(e,n);G1(n[st],r,t)}function VS(n,e){let t=Rr(e,n),r=t[he];LS(r,t);let i=t[Xn];i!==null&&t[vc]===null&&(t[vc]=Zh(i,t[eo])),lf(r,t,t[pn])}function LS(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function lf(n,e,t){zh(e);try{let r=n.viewQuery;r!==null&&oh(1,r,t);let i=n.template;i!==null&&M_(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Kn]?.finishViewCreation(n),n.staticContentQueries&&j_(n,e),n.staticViewQueries&&oh(2,n.viewQuery,t);let o=n.components;o!==null&&jS(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ie]&=-5,Hh()}}function jS(n,e){for(let t=0;t<e.length;t++)VS(n,e[t])}function BS(n,e,t,r){let i=Se(null);try{let o=e.tView,c=n[ie]&4096?4096:16,l=Hc(n,o,t,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];l[Cs]=u;let p=n[Kn];return p!==null&&(l[Kn]=p.createEmbeddedView(o)),lf(o,l,t),l}finally{Se(i)}}function $v(n,e){return!e||e.firstChild===null||l_(n)}function US(n,e,t,r=!0){let i=e[he];if(Y1(i,e,n,t),r){let s=rh(t,n),c=e[st],l=nf(c,n[hi]);l!==null&&K1(i,n[gn],c,e,l,s)}let o=e[vc];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Sc(n,e,t,r,i=!1){for(;t!==null;){let o=e[t.index];o!==null&&r.push(Rn(o)),Zn(o)&&$S(o,r);let s=t.type;if(s&8)Sc(n,e,t.child,r);else if(s&32){let c=tf(t,e),l;for(;l=c();)r.push(l)}else if(s&16){let c=E_(e,t);if(Array.isArray(c))r.push(...c);else{let l=ys(e[Nn]);Sc(l[he],l,c,r,!0)}}t=i?t.projectionNext:t.next}return r}function $S(n,e){for(let t=Vt;t<n.length;t++){let r=n[t],i=r[he].firstChild;i!==null&&Sc(r[he],r,i,e)}n[hi]!==n[Xn]&&e.push(n[hi])}var z_=[];function zS(n){return n[di]??HS(n)}function HS(n){let e=z_.pop()??Object.create(GS);return e.lView=n,e}function qS(n){n.lView[di]!==n&&(n.lView=null,z_.push(n))}var GS=ue(J({},Uy),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{gs(n.lView)},consumerOnSignalRead(){this.lView[di]=this}}),H_=100;function q_(n,e=!0,t=0){let r=n[mn],i=r.rendererFactory,o=!1;o||i.begin?.();try{WS(n,t)}catch(s){throw e&&$_(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function WS(n,e){sh(n,e);let t=0;for(;Bh(n);){if(t===H_)throw new de(103,!1);t++,sh(n,1)}}function KS(n,e,t,r){let i=e[ie];if((i&256)===256)return;let o=!1;!o&&e[mn].inlineEffectRunner?.flush(),zh(e);let s=null,c=null;!o&&QS(n)&&(c=zS(e),s=$y(c));try{V0(e),i1(n.bindingStartIndex),t!==null&&M_(n,e,t,2,r);let l=(i&3)===3;if(!o)if(l){let g=n.preOrderCheckHooks;g!==null&&lc(e,g,null)}else{let g=n.preOrderHooks;g!==null&&uc(e,g,0,null),Dd(e,0)}if(YS(e),G_(e,0),n.contentQueries!==null&&j_(n,e),!o)if(l){let g=n.contentCheckHooks;g!==null&&lc(e,g)}else{let g=n.contentHooks;g!==null&&uc(e,g,1),Dd(e,1)}hS(n,e);let u=n.components;u!==null&&K_(e,u,0);let p=n.viewQuery;if(p!==null&&oh(2,p,r),!o)if(l){let g=n.viewCheckHooks;g!==null&&lc(e,g)}else{let g=n.viewHooks;g!==null&&uc(e,g,2),Dd(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[xd]){for(let g of e[xd])g();e[xd]=null}o||(e[ie]&=-73)}catch(l){throw gs(e),l}finally{c!==null&&(zy(c,s),qS(c)),Hh()}}function QS(n){return n.type!==2}function G_(n,e){for(let t=d_(n);t!==null;t=h_(t))for(let r=Vt;r<t.length;r++){let i=t[r];W_(i,e)}}function YS(n){for(let e=d_(n);e!==null;e=h_(e)){if(!(e[ie]&Fh.HasTransplantedViews))continue;let t=e[to];for(let r=0;r<t.length;r++){let i=t[r],o=i[vt];GD(i)}}}function JS(n,e,t){let r=Rr(e,n);W_(r,t)}function W_(n,e){jh(n)&&sh(n,e)}function sh(n,e){let r=n[he],i=n[ie],o=n[di],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&ld(o)),o&&(o.dirty=!1),n[ie]&=-9217,s)KS(r,n,r.template,n[pn]);else if(i&8192){G_(n,1);let c=r.components;c!==null&&K_(n,c,1)}}function K_(n,e,t){for(let r=0;r<e.length;r++)JS(n,e[r],t)}function uf(n){for(n[mn].changeDetectionScheduler?.notify();n;){n[ie]|=64;let e=ys(n);if(FD(n)&&!e)return n;n=e}return null}var yi=class{get rootNodes(){let e=this._lView,t=e[he];return Sc(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[pn]}set context(e){this._lView[pn]=e}get destroyed(){return(this._lView[ie]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[vt];if(Zn(e)){let t=e[_c],r=t?t.indexOf(this):-1;r>-1&&(nh(e,r),gc(t,r))}this._attachedToViewContainer=!1}w_(this._lView[he],this._lView)}onDestroy(e){L0(this._lView,e)}markForCheck(){uf(this._cdRefInjectingView||this._lView)}detach(){this._lView[ie]&=-129}reattach(){Wd(this._lView),this._lView[ie]|=128}detectChanges(){this._lView[ie]|=1024,q_(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new de(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,__(this._lView[he],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new de(902,!1);this._appRef=e,Wd(this._lView)}},vi=(()=>{class n{static{this.__NG_ELEMENT_ID__=eT}}return n})(),XS=vi,ZS=class extends XS{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=BS(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new yi(i)}};function eT(){return Wc(jt(),Ie())}function Wc(n,e){return n.type&4?new ZS(e,n,oo(n,e)):null}var E4=new RegExp(`^(\\d+)*(${L1}|${V1})*(.*)`);var tT=()=>null;function zv(n,e){return tT(n,e)}var ah=class{},ch=class{},Tc=class{};function nT(n){let e=Error(`No component factory found for ${Ft(n)}.`);return e[rT]=n,e}var rT="ngComponent";var lh=class{resolveComponentFactory(e){throw nT(e)}},df=(()=>{class n{static{this.NULL=new lh}}return n})(),vs=class{},Lr=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>iT()}}return n})();function iT(){let n=Ie(),e=jt(),t=Rr(e.index,n);return(ci(t)?t:n)[st]}var oT=(()=>{class n{static{this.\u0275prov=me({token:n,providedIn:"root",factory:()=>null})}}return n})(),Pd={};var Hv=new Set;function hf(n){Hv.has(n)||(Hv.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function qv(...n){}function sT(){let n=typeof Gn.requestAnimationFrame=="function",e=Gn[n?"requestAnimationFrame":"setTimeout"],t=Gn[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}var yt=class n{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new kt(!1),this.onMicrotaskEmpty=new kt(!1),this.onStable=new kt(!1),this.onError=new kt(!1),typeof Zone>"u")throw new de(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=sT().nativeRequestAnimationFrame,lT(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new de(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new de(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,aT,qv,qv);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},aT={};function ff(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function cT(n){n.isCheckStableRunning||n.lastRequestAnimationFrameId!==-1||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Gn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,uh(n),n.isCheckStableRunning=!0,ff(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),uh(n))}function lT(n){let e=()=>{cT(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,s,c)=>{if(uT(c))return t.invokeTask(i,o,s,c);try{return Gv(n),t.invokeTask(i,o,s,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Wv(n)}},onInvoke:(t,r,i,o,s,c,l)=>{try{return Gv(n),t.invoke(i,o,s,c,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),Wv(n)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,uh(n),ff(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function uh(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.lastRequestAnimationFrameId!==-1?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Gv(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Wv(n){n._nesting--,ff(n)}function uT(n){return!Array.isArray(n)||n.length!==1?!1:n[0].data?.__ignore_ng_zone__===!0}var Q_=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let t=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of t)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=me({token:n,providedIn:"root",factory:()=>new n})}}return n})();function dh(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let c=e[s];if(typeof c=="number")o=c;else if(o==1)i=wv(i,c);else if(o==2){let l=c,u=e[++s];r=wv(r,l+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var hh=class extends df{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Xi(e);return new Mc(t,this.ngModule)}};function Kv(n){let e=[];for(let t in n){if(!n.hasOwnProperty(t))continue;let r=n[t];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:t})}return e}function dT(n){let e=n.toLowerCase();return e==="svg"?BD:e==="math"?UD:null}var fh=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=kc(r);let i=this.injector.get(e,Pd,r);return i!==Pd||t===Pd?i:this.parentInjector.get(e,t,r)}},Mc=class extends Tc{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=Kv(e.inputs);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return Kv(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=yD(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=Se(null);try{i=i||this.ngModule;let s=i instanceof On?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let c=s?new fh(e,s):e,l=c.get(vs,null);if(l===null)throw new de(407,!1);let u=c.get(oT,null),p=c.get(Q_,null),g=c.get(ah,null),b={rendererFactory:l,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:p,changeDetectionScheduler:g},C=l.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",R=r?mS(C,r,this.componentDef.encapsulation,c):v_(C,N,dT(N)),k=512;this.componentDef.signals?k|=4096:this.componentDef.onPush||(k|=16);let G=null;R!==null&&(G=Zh(R,c,!0));let re=sf(0,null,null,1,0,null,null,null,null,null,null),Y=Hc(null,re,null,k,null,null,b,C,c,null,G);zh(Y);let Ee,ke;try{let xe=this.componentDef,D,w=null;xe.findHostDirectiveDefs?(D=[],w=new Map,xe.findHostDirectiveDefs(xe,D,w),D.push(xe)):D=[xe];let I=hT(Y,R),S=fT(I,R,xe,D,Y,b,C);ke=F0(re,Zt),R&&gT(C,xe,R,r),t!==void 0&&yT(ke,this.ngContentSelectors,t),Ee=mT(S,xe,D,w,Y,[vT]),lf(re,Y,null)}finally{Hh()}return new ph(this.componentType,Ee,oo(ke,Y),Y,ke)}finally{Se(o)}}},ph=class extends ch{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new yi(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;af(o[he],o,i,e,t),this.previousInputValues.set(e,t);let s=Rr(this._tNode.index,o);uf(s)}}get injector(){return new li(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function hT(n,e){let t=n[he],r=Zt;return n[r]=e,qc(t,r,2,"#host",null)}function fT(n,e,t,r,i,o,s){let c=i[he];pT(r,n,e,s);let l=null;e!==null&&(l=Zh(e,i[eo]));let u=o.rendererFactory.createRenderer(e,t),p=16;t.signals?p=4096:t.onPush&&(p=64);let g=Hc(i,N_(t),null,p,i[n.index],n,o,u,null,null,l);return c.firstCreatePass&&ih(c,n,r.length-1),Gc(i,g),i[n.index]=g}function pT(n,e,t,r){for(let i of n)e.mergedAttrs=hs(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(dh(e,e.mergedAttrs,!0),t!==null&&x_(r,t,e))}function mT(n,e,t,r,i,o){let s=jt(),c=i[he],l=en(s,i);F_(c,i,s,t,null,r);for(let p=0;p<t.length;p++){let g=s.directiveStart+p,b=mi(i,c,g,s);gi(b,i)}V_(c,i,s),l&&gi(l,i);let u=mi(i,c,s.directiveStart+s.componentOffset,s);if(n[pn]=i[pn]=u,o!==null)for(let p of o)p(u,e);return A_(c,s,i),u}function gT(n,e,t,r){if(r)$d(n,t,["ng-version","17.3.12"]);else{let{attrs:i,classes:o}=vD(e.selectors[0]);i&&$d(n,t,i),o&&o.length>0&&I_(n,t,o.join(" "))}}function yT(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function vT(){let n=jt();Kh(Ie()[he],n)}var so=(()=>{class n{static{this.__NG_ELEMENT_ID__=_T}}return n})();function _T(){let n=jt();return J_(n,Ie())}var bT=so,Y_=class extends bT{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return oo(this._hostTNode,this._hostLView)}get injector(){return new li(this._hostTNode,this._hostLView)}get parentInjector(){let e=Qh(this._hostTNode,this._hostLView);if(X0(e)){let t=Cc(e,this._hostLView),r=wc(e),i=t[he].data[r+8];return new li(i,t)}else return new li(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=Qv(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Vt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=zv(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(c,i,$v(this._hostTNode,s)),c}createComponent(e,t,r,i,o){let s=e&&!kD(e),c;if(s)c=t;else{let N=t||{};c=N.index,r=N.injector,i=N.projectableNodes,o=N.environmentInjector||N.ngModuleRef}let l=s?e:new Mc(Xi(e)),u=r||this.parentInjector;if(!o&&l.ngModule==null){let R=(s?u:this.parentInjector).get(On,null);R&&(o=R)}let p=Xi(l.componentType??{}),g=zv(this._lContainer,p?.id??null),b=g?.firstChild??null,C=l.create(u,i,b,o);return this.insertImpl(C.hostView,c,$v(this._hostTNode,g)),C}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(qD(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let l=i[vt],u=new Y_(l,l[gn],l[vt]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return US(s,i,o,r),e.attachToViewContainerRef(),p0(Od(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=Qv(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=nh(this._lContainer,t);r&&(gc(Od(this._lContainer),t),w_(r[he],r))}detach(e){let t=this._adjustIndex(e,-1),r=nh(this._lContainer,t);return r&&gc(Od(this._lContainer),t)!=null?new yi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Qv(n){return n[_c]}function Od(n){return n[_c]||(n[_c]=[])}function J_(n,e){let t,r=e[n.index];return Zn(r)?t=r:(t=L_(r,e,null,n),e[n.index]=t,Gc(e,t)),CT(t,e,n,r),new Y_(t,n,e)}function wT(n,e){let t=n[st],r=t.createComment(""),i=en(e,n),o=nf(t,i);return Dc(t,o,r,rS(t,i),!1),r}var CT=xT,ET=()=>!1;function IT(n,e,t){return ET(n,e,t)}function xT(n,e,t,r){if(n[hi])return;let i;t.type&8?i=Rn(r):i=wT(e,t),n[hi]=i}var mh=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},gh=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),c=this.queries[s.indexInDeclarationView];i.push(c.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)pf(e,t).matches!==null&&this.queries[t].setDirty()}},yh=class{constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=NT(e):this.predicate=e}},vh=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},_h=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,DT(t,o)),this.matchTNodeWithReadOption(e,t,dc(t,e,o,!1,!1))}else r===vi?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,dc(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===tn||i===so||i===vi&&t.type&4)this.addMatch(t.index,-2);else{let o=dc(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function DT(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function ST(n,e){return n.type&11?oo(n,e):n.type&4?Wc(n,e):null}function TT(n,e,t,r){return t===-1?ST(e,n):t===-2?MT(n,e,r):mi(n,n[he],t,e)}function MT(n,e,t){if(t===tn)return oo(e,n);if(t===vi)return Wc(e,n);if(t===so)return J_(e,n)}function X_(n,e,t,r){let i=e[Kn].queries[r];if(i.matches===null){let o=n.data,s=t.matches,c=[];for(let l=0;s!==null&&l<s.length;l+=2){let u=s[l];if(u<0)c.push(null);else{let p=o[u];c.push(TT(e,p,s[l+1],t.metadata.read))}}i.matches=c}return i.matches}function bh(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=X_(n,e,i,t);for(let c=0;c<o.length;c+=2){let l=o[c];if(l>0)r.push(s[c/2]);else{let u=o[c+1],p=e[-l];for(let g=Vt;g<p.length;g++){let b=p[g];b[Cs]===b[vt]&&bh(b[he],b,u,r)}if(p[to]!==null){let g=p[to];for(let b=0;b<g.length;b++){let C=g[b];bh(C[he],C,u,r)}}}}}return r}function AT(n,e){return n[Kn].queries[e].queryList}function PT(n,e,t){let r=new eh((t&4)===4);return vS(n,e,r,r.destroy),(e[Kn]??=new gh).queries.push(new mh(r))-1}function OT(n,e,t){let r=Ct();return r.firstCreatePass&&(RT(r,new yh(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),PT(r,Ie(),e)}function NT(n){return n.split(",").map(e=>e.trim())}function RT(n,e,t){n.queries===null&&(n.queries=new vh),n.queries.track(new _h(e,t))}function pf(n,e){return n.queries.getByIndex(e)}function kT(n,e){let t=n[he],r=pf(t,e);return r.crossesNgTemplate?bh(t,n,e,[]):X_(t,n,r,e)}function FT(n){return typeof n=="function"&&n[cd]!==void 0}function Z_(n){return FT(n)&&typeof n.set=="function"}function VT(n){return Object.getPrototypeOf(n.prototype).constructor}function Tt(n){let e=VT(n.type),t=!0,r=[n];for(;e;){let i;if(Nr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new de(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=sc(n.inputs),s.inputTransforms=sc(n.inputTransforms),s.declaredInputs=sc(n.declaredInputs),s.outputs=sc(n.outputs);let c=i.hostBindings;c&&$T(n,c);let l=i.viewQuery,u=i.contentQueries;if(l&&BT(n,l),u&&UT(n,u),LT(n,i),Fx(n.outputs,i.outputs),Nr(i)&&i.data.animation){let p=n.data;p.animation=(p.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let c=o[s];c&&c.ngInherit&&c(n),c===Tt&&(t=!1)}}e=Object.getPrototypeOf(e)}jT(r)}function LT(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function jT(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=hs(i.hostAttrs,t=hs(t,i.hostAttrs))}}function sc(n){return n===Ji?{}:n===Jt?[]:n}function BT(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function UT(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function $T(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}var no=class{};var Ac=class extends no{constructor(e){super(),this.componentFactoryResolver=new hh(this),this.instance=null;let t=new fs([...e.providers,{provide:no,useValue:this},{provide:df,useValue:this.componentFactoryResolver}],e.parent||kh(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function zT(n,e,t=null){return new Ac({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var Kc=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Je(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function eb(n){return qT(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function HT(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function qT(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function tb(n,e,t){return n[e]=t}function Jn(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function mf(n,e,t,r){let i=Jn(n,e,t);return Jn(n,e+1,r)||i}function GT(n,e,t,r,i){let o=mf(n,e,t,r);return Jn(n,e+2,i)||o}function WT(n){return(n.flags&32)===32}function KT(n,e,t,r,i,o,s,c,l){let u=e.consts,p=qc(e,n,4,s||null,bc(u,c));k_(e,t,p,bc(u,l)),Kh(e,p);let g=p.tView=sf(2,p,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,p),g.queries=e.queries.embeddedTView(p)),p}function $(n,e,t,r,i,o,s,c){let l=Ie(),u=Ct(),p=n+Zt,g=u.firstCreatePass?KT(p,u,l,e,t,r,i,o,s):u.data[p];Es(g,!1);let b=QT(u,l,g,n);Gh()&&rf(u,l,b,g),gi(b,l);let C=L_(b,l,b,g);return l[p]=C,Gc(l,C),IT(C,g,l),Vh(g)&&P_(u,l,g),s!=null&&O_(l,g,c),$}var QT=YT;function YT(n,e,t,r){return Wh(!0),e[st].createComment("")}function Ds(n,e,t,r){let i=Ie(),o=Uc();if(Jn(i,o,e)){let s=Ct(),c=qh();NS(c,i,n,e,t,r)}return Ds}function JT(n,e,t,r){return Jn(n,Uc(),t)?e+Wn(t)+r:yn}function XT(n,e,t,r,i,o){let s=z0(),c=mf(n,s,t,i);return Uh(2),c?e+Wn(t)+r+Wn(i)+o:yn}function ZT(n,e,t,r,i,o,s,c){let l=z0(),u=GT(n,l,t,i,s);return Uh(3),u?e+Wn(t)+r+Wn(i)+o+Wn(s)+c:yn}function ac(n,e){return n<<17|e<<2}function _i(n){return n>>17&32767}function eM(n){return(n&2)==2}function tM(n,e){return n&131071|e<<17}function wh(n){return n|2}function ro(n){return(n&131068)>>2}function Nd(n,e){return n&-131069|e<<2}function nM(n){return(n&1)===1}function Ch(n){return n|1}function rM(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,c=_i(s),l=ro(s);n[r]=t;let u=!1,p;if(Array.isArray(t)){let g=t;p=g[1],(p===null||ws(g,p)>0)&&(u=!0)}else p=t;if(i)if(l!==0){let b=_i(n[c+1]);n[r+1]=ac(b,c),b!==0&&(n[b+1]=Nd(n[b+1],r)),n[c+1]=tM(n[c+1],r)}else n[r+1]=ac(c,0),c!==0&&(n[c+1]=Nd(n[c+1],r)),c=r;else n[r+1]=ac(l,0),c===0?c=r:n[l+1]=Nd(n[l+1],r),l=r;u&&(n[r+1]=wh(n[r+1])),Yv(n,p,r,!0),Yv(n,p,r,!1),iM(e,p,n,r,o),s=ac(c,l),o?e.classBindings=s:e.styleBindings=s}function iM(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&ws(o,e)>=0&&(t[r+1]=Ch(t[r+1]))}function Yv(n,e,t,r){let i=n[t+1],o=e===null,s=r?_i(i):ro(i),c=!1;for(;s!==0&&(c===!1||o);){let l=n[s],u=n[s+1];oM(l,e)&&(c=!0,n[s+1]=r?Ch(u):wh(u)),s=r?_i(u):ro(u)}c&&(n[t+1]=r?wh(i):Ch(i))}function oM(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?ws(n,e)>=0:!1}function M(n,e,t){let r=Ie(),i=Uc();if(Jn(r,i,e)){let o=Ct(),s=qh();R_(o,s,r,n,e,r[st],t,!1)}return M}function Jv(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";af(n,t,o[s],s,r)}function vn(n,e,t){return nb(n,e,t,!1),vn}function be(n,e){return nb(n,e,null,!0),be}function nb(n,e,t,r){let i=Ie(),o=Ct(),s=Uh(2);if(o.firstUpdatePass&&aM(o,n,s,r),e!==yn&&Jn(i,s,e)){let c=o.data[kr()];hM(o,c,i,i[st],n,i[s+1]=fM(e,t),r,s)}}function sM(n,e){return e>=n.expandoStartIndex}function aM(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[kr()],s=sM(n,t);pM(o,r)&&e===null&&!s&&(e=!1),e=cM(i,o,e,r),rM(i,o,e,t,s,r)}}function cM(n,e,t,r){let i=c1(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Rd(null,n,e,t,r),t=_s(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Rd(i,n,e,t,r),o===null){let l=lM(n,e,r);l!==void 0&&Array.isArray(l)&&(l=Rd(null,n,e,l[1],r),l=_s(l,e.attrs,r),uM(n,e,r,l))}else o=dM(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function lM(n,e,t){let r=t?e.classBindings:e.styleBindings;if(ro(r)!==0)return n[_i(r)]}function uM(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[_i(i)]=r}function dM(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=_s(r,s,t)}return _s(r,e.attrs,t)}function Rd(n,e,t,r,i){let o=null,s=t.directiveEnd,c=t.directiveStylingLast;for(c===-1?c=t.directiveStart:c++;c<s&&(o=e[c],r=_s(r,o.hostAttrs,i),o!==n);)c++;return n!==null&&(t.directiveStylingLast=c),r}function _s(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),iD(n,s,t?!0:e[++o]))}return n===void 0?null:n}function hM(n,e,t,r,i,o,s,c){if(!(e.type&3))return;let l=n.data,u=l[c+1],p=nM(u)?Xv(l,e,t,i,ro(u),s):void 0;if(!Pc(p)){Pc(o)||eM(u)&&(o=Xv(l,null,t,i,c,s));let g=k0(kr(),t);uS(r,s,g,i,o)}}function Xv(n,e,t,r,i,o){let s=e===null,c;for(;i>0;){let l=n[i],u=Array.isArray(l),p=u?l[1]:l,g=p===null,b=t[i+1];b===yn&&(b=g?Jt:void 0);let C=g?Ed(b,r):p===r?b:void 0;if(u&&!Pc(C)&&(C=Ed(l,r)),Pc(C)&&(c=C,s))return c;let N=n[i+1];i=s?_i(N):ro(N)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(c=Ed(l,r))}return c}function Pc(n){return n!==void 0}function fM(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Ft($c(n)))),n}function pM(n,e){return(n.flags&(e?8:16))!==0}function mM(n,e,t,r,i,o){let s=e.consts,c=bc(s,i),l=qc(e,n,2,r,c);return k_(e,t,l,bc(s,o)),l.attrs!==null&&dh(l,l.attrs,!1),l.mergedAttrs!==null&&dh(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function f(n,e,t,r){let i=Ie(),o=Ct(),s=Zt+n,c=i[st],l=o.firstCreatePass?mM(s,o,i,e,t,r):o.data[s],u=gM(o,i,l,c,e,n);i[s]=u;let p=Vh(l);return Es(l,!0),x_(c,u,l),!WT(l)&&Gh()&&rf(o,i,u,l),QD()===0&&gi(u,i),YD(),p&&(P_(o,i,l),A_(o,l,i)),r!==null&&O_(i,l),f}function h(){let n=jt();U0()?n1():(n=n.parent,Es(n,!1));let e=n;ZD(e)&&e1(),JD();let t=Ct();return t.firstCreatePass&&(Kh(t,n),A0(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&m1(e)&&Jv(t,e,Ie(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&g1(e)&&Jv(t,e,Ie(),e.stylesWithoutHost,!1),h}function Ae(n,e,t,r){return f(n,e,t,r),h(),Ae}var gM=(n,e,t,r,i,o)=>(Wh(!0),v_(r,i,d1()));function se(){return Ie()}var ai=void 0;function yM(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var vM=["en",[["a","p"],["AM","PM"],ai],[["AM","PM"],ai,ai],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ai,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ai,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ai,"{1} 'at' {0}",ai],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",yM],kd={};function Bt(n){let e=_M(n),t=Zv(e);if(t)return t;let r=e.split("-")[0];if(t=Zv(r),t)return t;if(r==="en")return vM;throw new de(701,!1)}function Zv(n){return n in kd||(kd[n]=Gn.ng&&Gn.ng.common&&Gn.ng.common.locales&&Gn.ng.common.locales[n]),kd[n]}var Ke=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Ke||{});function _M(n){return n.toLowerCase().replace(/_/g,"-")}var Oc="en-US";var bM=Oc;function wM(n){typeof n=="string"&&(bM=n.toLowerCase().replace(/_/g,"-"))}function B(n,e,t,r){let i=Ie(),o=Ct(),s=jt();return rb(o,i,i[st],s,n,e,r),B}function CM(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let c=e[ps],l=i[o+2];return c.length>l?c[l]:null}typeof s=="string"&&(o+=2)}return null}function rb(n,e,t,r,i,o,s){let c=Vh(r),u=n.firstCreatePass&&U_(n),p=e[pn],g=B_(e),b=!0;if(r.type&3||s){let R=en(r,e),k=s?s(R):R,G=g.length,re=s?Ee=>s(Rn(Ee[r.index])):r.index,Y=null;if(!s&&c&&(Y=CM(n,e,i,r.index)),Y!==null){let Ee=Y.__ngLastListenerFn__||Y;Ee.__ngNextListenerFn__=o,Y.__ngLastListenerFn__=o,b=!1}else{o=t0(r,e,p,o,!1);let Ee=t.listen(k,i,o);g.push(o,Ee),u&&u.push(i,re,G,G+1)}}else o=t0(r,e,p,o,!1);let C=r.outputs,N;if(b&&C!==null&&(N=C[i])){let R=N.length;if(R)for(let k=0;k<R;k+=2){let G=N[k],re=N[k+1],ke=e[G][re].subscribe(o),xe=g.length;g.push(o,ke),u&&u.push(i,r.index,xe,-(xe+1))}}}function e0(n,e,t,r){let i=Se(null);try{return Mn(6,e,t),t(r)!==!1}catch(o){return $_(n,o),!1}finally{Mn(7,e,t),Se(i)}}function t0(n,e,t,r,i){return function o(s){if(s===Function)return r;let c=n.componentOffset>-1?Rr(n.index,e):e;uf(c);let l=e0(e,t,r,s),u=o.__ngNextListenerFn__;for(;u;)l=e0(e,t,u,s)&&l,u=u.__ngNextListenerFn__;return i&&l===!1&&s.preventDefault(),l}}function A(n=1){return u1(n)}function gf(n,e,t){OT(n,e,t)}function yf(n){let e=Ie(),t=Ct(),r=H0();$h(r+1);let i=pf(t,r);if(n.dirty&&HD(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=kT(e,r);n.reset(o,M1),n.notifyOnChanges()}return!0}return!1}function vf(){return AT(Ie(),H0())}function EM(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function tr(n){let e=r1();return Lh(e,Zt+n)}function y(n,e=""){let t=Ie(),r=Ct(),i=n+Zt,o=r.firstCreatePass?qc(r,i,1,e,null):r.data[i],s=IM(r,t,o,e,n);t[i]=s,Gh()&&rf(r,t,s,o),Es(o,!1)}var IM=(n,e,t,r,i)=>(Wh(!0),q1(e[st],r));function H(n){return Q("",n,""),H}function Q(n,e,t){let r=Ie(),i=JT(r,n,e,t);return i!==yn&&cf(r,kr(),i),Q}function nr(n,e,t,r,i){let o=Ie(),s=XT(o,n,e,t,r,i);return s!==yn&&cf(o,kr(),s),nr}function _f(n,e,t,r,i,o,s){let c=Ie(),l=ZT(c,n,e,t,r,i,o,s);return l!==yn&&cf(c,kr(),l),_f}function X(n,e,t){Z_(e)&&(e=e());let r=Ie(),i=Uc();if(Jn(r,i,e)){let o=Ct(),s=qh();R_(o,s,r,n,e,r[st],t,!1)}return X}function ee(n,e){let t=Z_(n);return t&&n.set(e),t}function Z(n,e){let t=Ie(),r=Ct(),i=jt();return rb(r,t,t[st],i,n,e),Z}function xM(n,e,t){let r=Ct();if(r.firstCreatePass){let i=Nr(n);Eh(t,r.data,r.blueprint,i,!0),Eh(e,r.data,r.blueprint,i,!1)}}function Eh(n,e,t,r,i){if(n=St(n),Array.isArray(n))for(let o=0;o<n.length;o++)Eh(n[o],e,t,r,i);else{let o=Ct(),s=Ie(),c=jt(),l=Zi(n)?n:St(n.provide),u=D0(n),p=c.providerIndexes&1048575,g=c.directiveStart,b=c.providerIndexes>>20;if(Zi(n)||!n.multi){let C=new pi(u,i,W),N=Vd(l,e,i?p:p+b,g);N===-1?(Yd(Ic(c,s),o,l),Fd(o,n,e.length),e.push(l),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(C),s.push(C)):(t[N]=C,s[N]=C)}else{let C=Vd(l,e,p+b,g),N=Vd(l,e,p,p+b),R=C>=0&&t[C],k=N>=0&&t[N];if(i&&!k||!i&&!R){Yd(Ic(c,s),o,l);let G=TM(i?SM:DM,t.length,i,r,u);!i&&k&&(t[N].providerFactory=G),Fd(o,n,e.length,0),e.push(l),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(G),s.push(G)}else{let G=ib(t[i?N:C],u,!i&&r);Fd(o,n,C>-1?C:N,G)}!i&&r&&k&&t[N].componentProviders++}}}function Fd(n,e,t,r){let i=Zi(e),o=SD(e);if(i||o){let l=(o?St(e.useClass):e).prototype.ngOnDestroy;if(l){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let p=u.indexOf(t);p===-1?u.push(t,[r,l]):u[p+1].push(r,l)}else u.push(t,l)}}}function ib(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Vd(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function DM(n,e,t,r){return Ih(this.multi,[])}function SM(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,c=mi(t,t[he],this.providerFactory.index,r);o=c.slice(0,s),Ih(i,o);for(let l=s;l<c.length;l++)o.push(c[l])}else o=[],Ih(i,o);return o}function Ih(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function TM(n,e,t,r,i){let o=new pi(n,t,W);return o.multi=[],o.index=e,o.componentProviders=0,ib(o,i,r&&!t),o}function _n(n,e=[]){return t=>{t.providersResolver=(r,i)=>xM(r,i?i(n):n,e)}}var MM=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=E0(!1,t.type),i=r.length>0?zT([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=me({token:n,providedIn:"environment",factory:()=>new n(oe(On))})}}return n})();function ze(n){hf("NgStandalone"),n.getStandaloneInjector=e=>e.get(MM).getOrCreateStandaloneInjector(n)}function ob(n,e){let t=n[e];return t===yn?void 0:t}function AM(n,e,t,r,i,o){let s=e+t;return Jn(n,s,i)?tb(n,s+1,o?r.call(o,i):r(i)):ob(n,s+1)}function PM(n,e,t,r,i,o,s){let c=e+t;return mf(n,c,i,o)?tb(n,c+2,s?r.call(s,i,o):r(i,o)):ob(n,c+2)}function De(n,e){let t=Ct(),r,i=n+Zt;t.firstCreatePass?(r=OM(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=ui(r.type,!0)),s,c=Nt(W);try{let l=Ec(!1),u=o();return Ec(l),EM(t,Ie(),i,u),u}finally{Nt(c)}}function OM(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Ss(n,e,t){let r=n+Zt,i=Ie(),o=Lh(i,r);return sb(i,r)?AM(i,$0(),e,o.transform,t,o):o.transform(t)}function Oe(n,e,t,r){let i=n+Zt,o=Ie(),s=Lh(o,i);return sb(o,i)?PM(o,$0(),e,s.transform,t,r,s):s.transform(t,r)}function sb(n,e){return n[he].data[e].pure}function rr(n,e){return Wc(n,e)}var ab=new pe("");function Ts(n){return!!n&&typeof n.then=="function"}function cb(n){return!!n&&typeof n.subscribe=="function"}var NM=new pe(""),lb=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=Fe(NM,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(Ts(o))t.push(o);else if(cb(o)){let s=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ub=new pe("");function RM(){qy(()=>{throw new de(600,!1)})}function kM(n){return n.isBoundToModule}function FM(n,e,t){try{let r=t();return Ts(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var Qc=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Fe(a_),this.afterRenderEffectManager=Fe(Q_),this.externalTestViews=new Set,this.beforeRender=new Sn,this.afterTick=new Sn,this.componentTypes=[],this.components=[],this.isStable=Fe(Kc).hasPendingTasks.pipe(lt(t=>!t)),this._injector=Fe(On)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Tc;if(!this._injector.get(lb).done){let b=!i&&wD(t),C=!1;throw new de(405,C)}let s;i?s=t:s=this._injector.get(df).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let c=kM(s)?void 0:this._injector.get(no),l=r||s.selector,u=s.create(Is.NULL,[],l,c),p=u.location.nativeElement,g=u.injector.get(ab,null);return g?.registerApplication(p),u.onDestroy(()=>{this.detachView(u.hostView),Ld(this.components,u),g?.unregisterApplication(p)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(t){if(this._runningTick)throw new de(101,!1);let r=Se(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(t)}catch(i){this.internalErrorHandler(i)}finally{this.afterTick.next(),this._runningTick=!1,Se(r)}}detectChangesInAttachedViews(t){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===H_)throw new de(103,!1);if(t){let o=r===0;this.beforeRender.next(o);for(let{_lView:s,notifyErrorHandler:c}of this._views)VM(s,o,c)}if(r++,i.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>xh(o))&&(i.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>xh(o))))break}}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Ld(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(ub,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Ld(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new de(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Ld(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function VM(n,e,t){!e&&!xh(n)||LM(n,t,e)}function xh(n){return Bh(n)}function LM(n,e,t){let r;t?(r=0,n[ie]|=1024):n[ie]&64?r=0:r=1,q_(n,e,r)}var jM=(()=>{class n{constructor(){this.zone=Fe(yt),this.applicationRef=Fe(Qc)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function BM(n){return[{provide:yt,useFactory:n},{provide:ds,multi:!0,useFactory:()=>{let e=Fe(jM,{optional:!0});return()=>e.initialize()}},{provide:ds,multi:!0,useFactory:()=>{let e=Fe(HM);return()=>{e.initialize()}}},{provide:a_,useFactory:UM}]}function UM(){let n=Fe(yt),e=Fe(Qn);return t=>n.runOutsideAngular(()=>e.handleError(t))}function $M(n){let e=BM(()=>new yt(zM(n)));return Vc([[],e])}function zM(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var HM=(()=>{class n{constructor(){this.subscription=new Pt,this.initialized=!1,this.zone=Fe(yt),this.pendingTasks=Fe(Kc)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{yt.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{yt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function qM(){return typeof $localize<"u"&&$localize.locale||Oc}var Ms=new pe("",{providedIn:"root",factory:()=>Fe(Ms,_e.Optional|_e.SkipSelf)||qM()});var db=new pe("");var fc=null;function GM(n=[],e){return Is.create({name:e,providers:[{provide:Lc,useValue:"platform"},{provide:db,useValue:new Set([()=>fc=null])},...n]})}function WM(n=[]){if(fc)return fc;let e=GM(n);return fc=e,RM(),KM(e),e}function KM(n){n.get(Jh,null)?.forEach(t=>t())}var Yc=(()=>{class n{static{this.__NG_ELEMENT_ID__=QM}}return n})();function QM(n){return YM(jt(),Ie(),(n&16)===16)}function YM(n,e,t){if(Bc(n)&&!t){let r=Rr(n.index,e);return new yi(r,r)}else if(n.type&47){let r=e[Nn];return new yi(r,e)}return null}var Dh=class{constructor(){}supports(e){return eb(e)}create(e){return new Sh(e)}},JM=(n,e)=>e,Sh=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||JM}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<n0(r,i,o)?t:r,c=n0(s,i,o),l=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let u=c-i,p=l-i;if(u!=p){for(let b=0;b<u;b++){let C=b<o.length?o[b]:o[b]=0,N=C+b;p<=N&&N<u&&(o[b]=C+1)}let g=s.previousIndex;o[g]=p-u}}c!==l&&e(s,c,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!eb(e))throw new de(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let c=0;c<this.length;c++)o=e[c],s=this._trackByFn(c,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,c),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,c)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,HT(e,c=>{s=this._trackByFn(i,c),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,c,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,c,s,i)),Object.is(t.item,c)||this._addIdentityChange(t,c)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Th(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Nc),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Nc),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Th=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Mh=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Nc=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Mh,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function n0(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function r0(){return new bf([new Dh])}var bf=(()=>{class n{static{this.\u0275prov=me({token:n,providedIn:"root",factory:r0})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||r0()),deps:[[n,new eD,new f0]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new de(901,!1)}}return n})();function hb(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=WM(r),o=[$M(),...t||[]],c=new Ac({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,l=c.get(yt);return l.run(()=>{c.resolveInjectorInitializers();let u=c.get(Qn,null),p;l.runOutsideAngular(()=>{p=l.onError.subscribe({next:C=>{u.handleError(C)}})});let g=()=>c.destroy(),b=i.get(db);return b.add(g),c.onDestroy(()=>{p.unsubscribe(),b.delete(g)}),FM(u,l,()=>{let C=c.get(lb);return C.runInitializers(),C.donePromise.then(()=>{let N=c.get(Ms,Oc);wM(N||Oc);let R=c.get(Qc);return e!==void 0&&R.bootstrap(e),R})})})}catch(e){return Promise.reject(e)}}function Jc(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var vb=null;function co(){return vb}function _b(n){vb??=n}var sl=class{};var kn=new pe("");var bb=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(bb||{});var Mt=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Mt||{}),Re=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Re||{}),Ut=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Ut||{}),$t={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function XM(n){return Bt(n)[Ke.LocaleId]}function ZM(n,e,t){let r=Bt(n),i=[r[Ke.DayPeriodsFormat],r[Ke.DayPeriodsStandalone]],o=nn(i,e);return nn(o,t)}function eA(n,e,t){let r=Bt(n),i=[r[Ke.DaysFormat],r[Ke.DaysStandalone]],o=nn(i,e);return nn(o,t)}function tA(n,e,t){let r=Bt(n),i=[r[Ke.MonthsFormat],r[Ke.MonthsStandalone]],o=nn(i,e);return nn(o,t)}function nA(n,e){let r=Bt(n)[Ke.Eras];return nn(r,e)}function Xc(n,e){let t=Bt(n);return nn(t[Ke.DateFormat],e)}function Zc(n,e){let t=Bt(n);return nn(t[Ke.TimeFormat],e)}function el(n,e){let r=Bt(n)[Ke.DateTimeFormat];return nn(r,e)}function or(n,e){let t=Bt(n),r=t[Ke.NumberSymbols][e];if(typeof r>"u"){if(e===$t.CurrencyDecimal)return t[Ke.NumberSymbols][$t.Decimal];if(e===$t.CurrencyGroup)return t[Ke.NumberSymbols][$t.Group]}return r}function rA(n,e){return Bt(n)[Ke.NumberFormats][e]}function wb(n){if(!n[Ke.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Ke.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function iA(n){let e=Bt(n);return wb(e),(e[Ke.ExtraData][2]||[]).map(r=>typeof r=="string"?wf(r):[wf(r[0]),wf(r[1])])}function oA(n,e,t){let r=Bt(n);wb(r);let i=[r[Ke.ExtraData][0],r[Ke.ExtraData][1]],o=nn(i,e)||[];return nn(o,t)||[]}function nn(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function wf(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var sA=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,tl={},aA=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,sr=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(sr||{}),Me=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(Me||{}),Te=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(Te||{});function cA(n,e,t,r){let i=yA(n);e=ir(t,e)||e;let s=[],c;for(;e;)if(c=aA.exec(e),c){s=s.concat(c.slice(1));let p=s.pop();if(!p)break;e=p}else{s.push(e);break}let l=i.getTimezoneOffset();r&&(l=Eb(r,l),i=gA(i,r,!0));let u="";return s.forEach(p=>{let g=pA(p);u+=g?g(i,t,l):p==="''"?"'":p.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function al(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function ir(n,e){let t=XM(n);if(tl[t]??={},tl[t][e])return tl[t][e];let r="";switch(e){case"shortDate":r=Xc(n,Ut.Short);break;case"mediumDate":r=Xc(n,Ut.Medium);break;case"longDate":r=Xc(n,Ut.Long);break;case"fullDate":r=Xc(n,Ut.Full);break;case"shortTime":r=Zc(n,Ut.Short);break;case"mediumTime":r=Zc(n,Ut.Medium);break;case"longTime":r=Zc(n,Ut.Long);break;case"fullTime":r=Zc(n,Ut.Full);break;case"short":let i=ir(n,"shortTime"),o=ir(n,"shortDate");r=nl(el(n,Ut.Short),[i,o]);break;case"medium":let s=ir(n,"mediumTime"),c=ir(n,"mediumDate");r=nl(el(n,Ut.Medium),[s,c]);break;case"long":let l=ir(n,"longTime"),u=ir(n,"longDate");r=nl(el(n,Ut.Long),[l,u]);break;case"full":let p=ir(n,"fullTime"),g=ir(n,"fullDate");r=nl(el(n,Ut.Full),[p,g]);break}return r&&(tl[t][e]=r),r}function nl(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function bn(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function lA(n,e){return bn(n,3).substring(0,e)}function Xe(n,e,t=0,r=!1,i=!1){return function(o,s){let c=uA(n,o);if((t>0||c>-t)&&(c+=t),n===Me.Hours)c===0&&t===-12&&(c=12);else if(n===Me.FractionalSeconds)return lA(c,e);let l=or(s,$t.MinusSign);return bn(c,e,l,r,i)}}function uA(n,e){switch(n){case Me.FullYear:return e.getFullYear();case Me.Month:return e.getMonth();case Me.Date:return e.getDate();case Me.Hours:return e.getHours();case Me.Minutes:return e.getMinutes();case Me.Seconds:return e.getSeconds();case Me.FractionalSeconds:return e.getMilliseconds();case Me.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function Ve(n,e,t=Mt.Format,r=!1){return function(i,o){return dA(i,o,n,e,t,r)}}function dA(n,e,t,r,i,o){switch(t){case Te.Months:return tA(e,i,r)[n.getMonth()];case Te.Days:return eA(e,i,r)[n.getDay()];case Te.DayPeriods:let s=n.getHours(),c=n.getMinutes();if(o){let u=iA(e),p=oA(e,i,r),g=u.findIndex(b=>{if(Array.isArray(b)){let[C,N]=b,R=s>=C.hours&&c>=C.minutes,k=s<N.hours||s===N.hours&&c<N.minutes;if(C.hours<N.hours){if(R&&k)return!0}else if(R||k)return!0}else if(b.hours===s&&b.minutes===c)return!0;return!1});if(g!==-1)return p[g]}return ZM(e,i,r)[s<12?0:1];case Te.Eras:return nA(e,r)[n.getFullYear()<=0?0:1];default:let l=t;throw new Error(`unexpected translation type ${l}`)}}function rl(n){return function(e,t,r){let i=-1*r,o=or(t,$t.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case sr.Short:return(i>=0?"+":"")+bn(s,2,o)+bn(Math.abs(i%60),2,o);case sr.ShortGMT:return"GMT"+(i>=0?"+":"")+bn(s,1,o);case sr.Long:return"GMT"+(i>=0?"+":"")+bn(s,2,o)+":"+bn(Math.abs(i%60),2,o);case sr.Extended:return r===0?"Z":(i>=0?"+":"")+bn(s,2,o)+":"+bn(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var hA=0,ol=4;function fA(n){let e=al(n,hA,1).getDay();return al(n,0,1+(e<=ol?ol:ol+7)-e)}function Cb(n){let e=n.getDay(),t=e===0?-3:ol-e;return al(n.getFullYear(),n.getMonth(),n.getDate()+t)}function Cf(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=Cb(t),s=fA(o.getFullYear()),c=o.getTime()-s.getTime();i=1+Math.round(c/6048e5)}return bn(i,n,or(r,$t.MinusSign))}}function il(n,e=!1){return function(t,r){let o=Cb(t).getFullYear();return bn(o,n,or(r,$t.MinusSign),e)}}var Ef={};function pA(n){if(Ef[n])return Ef[n];let e;switch(n){case"G":case"GG":case"GGG":e=Ve(Te.Eras,Re.Abbreviated);break;case"GGGG":e=Ve(Te.Eras,Re.Wide);break;case"GGGGG":e=Ve(Te.Eras,Re.Narrow);break;case"y":e=Xe(Me.FullYear,1,0,!1,!0);break;case"yy":e=Xe(Me.FullYear,2,0,!0,!0);break;case"yyy":e=Xe(Me.FullYear,3,0,!1,!0);break;case"yyyy":e=Xe(Me.FullYear,4,0,!1,!0);break;case"Y":e=il(1);break;case"YY":e=il(2,!0);break;case"YYY":e=il(3);break;case"YYYY":e=il(4);break;case"M":case"L":e=Xe(Me.Month,1,1);break;case"MM":case"LL":e=Xe(Me.Month,2,1);break;case"MMM":e=Ve(Te.Months,Re.Abbreviated);break;case"MMMM":e=Ve(Te.Months,Re.Wide);break;case"MMMMM":e=Ve(Te.Months,Re.Narrow);break;case"LLL":e=Ve(Te.Months,Re.Abbreviated,Mt.Standalone);break;case"LLLL":e=Ve(Te.Months,Re.Wide,Mt.Standalone);break;case"LLLLL":e=Ve(Te.Months,Re.Narrow,Mt.Standalone);break;case"w":e=Cf(1);break;case"ww":e=Cf(2);break;case"W":e=Cf(1,!0);break;case"d":e=Xe(Me.Date,1);break;case"dd":e=Xe(Me.Date,2);break;case"c":case"cc":e=Xe(Me.Day,1);break;case"ccc":e=Ve(Te.Days,Re.Abbreviated,Mt.Standalone);break;case"cccc":e=Ve(Te.Days,Re.Wide,Mt.Standalone);break;case"ccccc":e=Ve(Te.Days,Re.Narrow,Mt.Standalone);break;case"cccccc":e=Ve(Te.Days,Re.Short,Mt.Standalone);break;case"E":case"EE":case"EEE":e=Ve(Te.Days,Re.Abbreviated);break;case"EEEE":e=Ve(Te.Days,Re.Wide);break;case"EEEEE":e=Ve(Te.Days,Re.Narrow);break;case"EEEEEE":e=Ve(Te.Days,Re.Short);break;case"a":case"aa":case"aaa":e=Ve(Te.DayPeriods,Re.Abbreviated);break;case"aaaa":e=Ve(Te.DayPeriods,Re.Wide);break;case"aaaaa":e=Ve(Te.DayPeriods,Re.Narrow);break;case"b":case"bb":case"bbb":e=Ve(Te.DayPeriods,Re.Abbreviated,Mt.Standalone,!0);break;case"bbbb":e=Ve(Te.DayPeriods,Re.Wide,Mt.Standalone,!0);break;case"bbbbb":e=Ve(Te.DayPeriods,Re.Narrow,Mt.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ve(Te.DayPeriods,Re.Abbreviated,Mt.Format,!0);break;case"BBBB":e=Ve(Te.DayPeriods,Re.Wide,Mt.Format,!0);break;case"BBBBB":e=Ve(Te.DayPeriods,Re.Narrow,Mt.Format,!0);break;case"h":e=Xe(Me.Hours,1,-12);break;case"hh":e=Xe(Me.Hours,2,-12);break;case"H":e=Xe(Me.Hours,1);break;case"HH":e=Xe(Me.Hours,2);break;case"m":e=Xe(Me.Minutes,1);break;case"mm":e=Xe(Me.Minutes,2);break;case"s":e=Xe(Me.Seconds,1);break;case"ss":e=Xe(Me.Seconds,2);break;case"S":e=Xe(Me.FractionalSeconds,1);break;case"SS":e=Xe(Me.FractionalSeconds,2);break;case"SSS":e=Xe(Me.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=rl(sr.Short);break;case"ZZZZZ":e=rl(sr.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=rl(sr.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=rl(sr.Long);break;default:return null}return Ef[n]=e,e}function Eb(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function mA(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function gA(n,e,t){let r=t?-1:1,i=n.getTimezoneOffset(),o=Eb(e,i);return mA(n,r*(o-i))}function yA(n){if(fb(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(c=>+c);return al(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(sA))return vA(r)}let e=new Date(n);if(!fb(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function vA(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,c=Number(n[5]||0)-r,l=Number(n[6]||0),u=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,c,l,u),e}function fb(n){return n instanceof Date&&!isNaN(n.valueOf())}var _A=/^(\d+)?\.((\d+)(-(\d+))?)?$/,pb=22,cl=".",As="0",bA=";",wA=",",If="#";function CA(n,e,t,r,i,o,s=!1){let c="",l=!1;if(!isFinite(n))c=or(t,$t.Infinity);else{let u=DA(n);s&&(u=xA(u));let p=e.minInt,g=e.minFrac,b=e.maxFrac;if(o){let re=o.match(_A);if(re===null)throw new Error(`${o} is not a valid digit info`);let Y=re[1],Ee=re[3],ke=re[5];Y!=null&&(p=xf(Y)),Ee!=null&&(g=xf(Ee)),ke!=null?b=xf(ke):Ee!=null&&g>b&&(b=g)}SA(u,g,b);let C=u.digits,N=u.integerLen,R=u.exponent,k=[];for(l=C.every(re=>!re);N<p;N++)C.unshift(0);for(;N<0;N++)C.unshift(0);N>0?k=C.splice(N,C.length):(k=C,C=[0]);let G=[];for(C.length>=e.lgSize&&G.unshift(C.splice(-e.lgSize,C.length).join(""));C.length>e.gSize;)G.unshift(C.splice(-e.gSize,C.length).join(""));C.length&&G.unshift(C.join("")),c=G.join(or(t,r)),k.length&&(c+=or(t,i)+k.join("")),R&&(c+=or(t,$t.Exponential)+"+"+R)}return n<0&&!l?c=e.negPre+c+e.negSuf:c=e.posPre+c+e.posSuf,c}function EA(n,e,t){let r=rA(e,bb.Decimal),i=IA(r,or(e,$t.MinusSign));return CA(n,i,e,$t.Group,$t.Decimal,t)}function IA(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(bA),i=r[0],o=r[1],s=i.indexOf(cl)!==-1?i.split(cl):[i.substring(0,i.lastIndexOf(As)+1),i.substring(i.lastIndexOf(As)+1)],c=s[0],l=s[1]||"";t.posPre=c.substring(0,c.indexOf(If));for(let p=0;p<l.length;p++){let g=l.charAt(p);g===As?t.minFrac=t.maxFrac=p+1:g===If?t.maxFrac=p+1:t.posSuf+=g}let u=c.split(wA);if(t.gSize=u[1]?u[1].length:0,t.lgSize=u[2]||u[1]?(u[2]||u[1]).length:0,o){let p=i.length-t.posPre.length-t.posSuf.length,g=o.indexOf(If);t.negPre=o.substring(0,g).replace(/'/g,""),t.negSuf=o.slice(g+p).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function xA(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function DA(n){let e=Math.abs(n)+"",t=0,r,i,o,s,c;for((i=e.indexOf(cl))>-1&&(e=e.replace(cl,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===As;o++);if(o===(c=e.length))r=[0],i=1;else{for(c--;e.charAt(c)===As;)c--;for(i-=o,r=[],s=0;o<=c;o++,s++)r[s]=Number(e.charAt(o))}return i>pb&&(r=r.splice(0,pb-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function SA(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen,o=Math.min(Math.max(e,i),t),s=o+n.integerLen,c=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let g=s;g<r.length;g++)r[g]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let g=1;g<s;g++)r[g]=0}if(c>=5)if(s-1<0){for(let g=0;g>s;g--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let l=o!==0,u=e+n.integerLen,p=r.reduceRight(function(g,b,C,N){return b=b+g,N[C]=b<10?b:b-10,l&&(N[C]===0&&C>=u?N.pop():l=!1),b>=10?1:0},0);p&&(r.unshift(p),n.integerLen++)}function xf(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function ll(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Df=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ut=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Df(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let c=r.get(o);r.move(c,s),mb(c,i)}});for(let i=0,o=r.length;i<o;i++){let c=r.get(i).context;c.index=i,c.count=o,c.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);mb(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(W(so),W(vi),W(bf))}}static{this.\u0275dir=We({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function mb(n,e){n.context.$implicit=e.item}var Ze=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Sf,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){gb("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){gb("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(W(so),W(vi))}}static{this.\u0275dir=We({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),Sf=class{constructor(){this.$implicit=null,this.ngIf=null}};function gb(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Ft(e)}'.`)}function Tf(n,e){return new de(2100,!1)}var TA=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,ul=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw Tf(n,t);return t.replace(TA,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=Fc({name:"titlecase",type:n,pure:!0,standalone:!0})}}return n})();var MA="mediumDate",AA=new pe(""),PA=new pe(""),Fn=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??MA,c=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return cA(t,s,o||this.locale,c)}catch(s){throw Tf(n,s.message)}}static{this.\u0275fac=function(r){return new(r||n)(W(Ms,16),W(AA,24),W(PA,24))}}static{this.\u0275pipe=Fc({name:"date",type:n,pure:!0,standalone:!0})}}return n})();var Ib=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!OA(t))return null;i||=this._locale;try{let o=NA(t);return EA(o,i,r)}catch(o){throw Tf(n,o.message)}}static{this.\u0275fac=function(r){return new(r||n)(W(Ms,16))}}static{this.\u0275pipe=Fc({name:"number",type:n,pure:!0,standalone:!0})}}return n})();function OA(n){return!(n==null||n===""||n!==n)}function NA(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var Ue=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=wi({type:n})}static{this.\u0275inj=bi({})}}return n})(),xb="browser",RA="server";function dl(n){return n===RA}var ao=class{};var Os=class{},fl=class{},Ei=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(c=>o.indexOf(c)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Af=class{encodeKey(e){return Db(e)}encodeValue(e){return Db(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function VA(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,c]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],l=t.get(s)||[];l.push(c),t.set(s,l)}),t}var LA=/%(\d[a-f0-9])/gi,jA={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Db(n){return encodeURIComponent(n).replace(LA,(e,t)=>jA[t]??e)}function hl(n){return`${n}`}var jr=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Af,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=VA(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(hl):[hl(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(hl(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(hl(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Pf=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function BA(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Sb(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Tb(n){return typeof Blob<"u"&&n instanceof Blob}function Mb(n){return typeof FormData<"u"&&n instanceof FormData}function UA(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Ps=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(BA(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Ei,this.context??=new Pf,!this.params)this.params=new jr,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let c=t.indexOf("?"),l=c===-1?"?":c<t.length-1?"&":"";this.urlWithParams=t+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Sb(this.body)||Tb(this.body)||Mb(this.body)||UA(this.body)?this.body:this.body instanceof jr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Mb(this.body)?null:Tb(this.body)?this.body.type||null:Sb(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof jr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,c=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,u=e.headers||this.headers,p=e.params||this.params,g=e.context??this.context;return e.setHeaders!==void 0&&(u=Object.keys(e.setHeaders).reduce((b,C)=>b.set(C,e.setHeaders[C]),u)),e.setParams&&(p=Object.keys(e.setParams).reduce((b,C)=>b.set(C,e.setParams[C]),p)),new n(t,r,s,{params:p,headers:u,context:g,reportProgress:l,responseType:i,withCredentials:c,transferCache:o})}},lo=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(lo||{}),Ns=class{constructor(e,t=gl.Ok,r="OK"){this.headers=e.headers||new Ei,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Of=class n extends Ns{constructor(e={}){super(e),this.type=lo.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},pl=class n extends Ns{constructor(e={}){super(e),this.type=lo.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ml=class extends Ns{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},gl=function(n){return n[n.Continue=100]="Continue",n[n.SwitchingProtocols=101]="SwitchingProtocols",n[n.Processing=102]="Processing",n[n.EarlyHints=103]="EarlyHints",n[n.Ok=200]="Ok",n[n.Created=201]="Created",n[n.Accepted=202]="Accepted",n[n.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",n[n.NoContent=204]="NoContent",n[n.ResetContent=205]="ResetContent",n[n.PartialContent=206]="PartialContent",n[n.MultiStatus=207]="MultiStatus",n[n.AlreadyReported=208]="AlreadyReported",n[n.ImUsed=226]="ImUsed",n[n.MultipleChoices=300]="MultipleChoices",n[n.MovedPermanently=301]="MovedPermanently",n[n.Found=302]="Found",n[n.SeeOther=303]="SeeOther",n[n.NotModified=304]="NotModified",n[n.UseProxy=305]="UseProxy",n[n.Unused=306]="Unused",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n[n.BadRequest=400]="BadRequest",n[n.Unauthorized=401]="Unauthorized",n[n.PaymentRequired=402]="PaymentRequired",n[n.Forbidden=403]="Forbidden",n[n.NotFound=404]="NotFound",n[n.MethodNotAllowed=405]="MethodNotAllowed",n[n.NotAcceptable=406]="NotAcceptable",n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",n[n.RequestTimeout=408]="RequestTimeout",n[n.Conflict=409]="Conflict",n[n.Gone=410]="Gone",n[n.LengthRequired=411]="LengthRequired",n[n.PreconditionFailed=412]="PreconditionFailed",n[n.PayloadTooLarge=413]="PayloadTooLarge",n[n.UriTooLong=414]="UriTooLong",n[n.UnsupportedMediaType=415]="UnsupportedMediaType",n[n.RangeNotSatisfiable=416]="RangeNotSatisfiable",n[n.ExpectationFailed=417]="ExpectationFailed",n[n.ImATeapot=418]="ImATeapot",n[n.MisdirectedRequest=421]="MisdirectedRequest",n[n.UnprocessableEntity=422]="UnprocessableEntity",n[n.Locked=423]="Locked",n[n.FailedDependency=424]="FailedDependency",n[n.TooEarly=425]="TooEarly",n[n.UpgradeRequired=426]="UpgradeRequired",n[n.PreconditionRequired=428]="PreconditionRequired",n[n.TooManyRequests=429]="TooManyRequests",n[n.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",n[n.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",n[n.InternalServerError=500]="InternalServerError",n[n.NotImplemented=501]="NotImplemented",n[n.BadGateway=502]="BadGateway",n[n.ServiceUnavailable=503]="ServiceUnavailable",n[n.GatewayTimeout=504]="GatewayTimeout",n[n.HttpVersionNotSupported=505]="HttpVersionNotSupported",n[n.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",n[n.InsufficientStorage=507]="InsufficientStorage",n[n.LoopDetected=508]="LoopDetected",n[n.NotExtended=510]="NotExtended",n[n.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",n}(gl||{});function Mf(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var ar=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof Ps)o=t;else{let l;i.headers instanceof Ei?l=i.headers:l=new Ei(i.headers);let u;i.params&&(i.params instanceof jr?u=i.params:u=new jr({fromObject:i.params})),o=new Ps(t,r,i.body!==void 0?i.body:null,{headers:l,context:i.context,params:u,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=rc(o).pipe(wd(l=>this.handler.handle(l)));if(t instanceof Ps||i.observe==="events")return s;let c=s.pipe(bd(l=>l instanceof pl));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(lt(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(lt(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(lt(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(lt(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new jr().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Mf(i,r))}post(t,r,i={}){return this.request("POST",t,Mf(i,r))}put(t,r,i={}){return this.request("PUT",t,Mf(i,r))}static{this.\u0275fac=function(r){return new(r||n)(oe(Os))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})();function $A(n,e){return e(n)}function zA(n,e,t){return(r,i)=>S0(t,()=>e(r,o=>n(o,i)))}var Ob=new pe(""),HA=new pe(""),qA=new pe("");var Ab=(()=>{class n extends Os{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=Fe(Kc);let i=Fe(qA,{optional:!0});this.backend=i??t}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(Ob),...this.injector.get(HA,[])]));this.chain=i.reduceRight((o,s)=>zA(o,s,this.injector),$A)}let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Cd(()=>this.pendingTasks.remove(r)))}static{this.\u0275fac=function(r){return new(r||n)(oe(fl),oe(On))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})();var GA=/^\)\]\}',?\n/;function WA(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var Pb=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new de(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Tn(r.\u0275loadImpl()):rc(null)).pipe(qi(()=>new je(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((R,k)=>s.setRequestHeader(R,k.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let R=t.detectContentTypeHeader();R!==null&&s.setRequestHeader("Content-Type",R)}if(t.responseType){let R=t.responseType.toLowerCase();s.responseType=R!=="json"?R:"text"}let c=t.serializeBody(),l=null,u=()=>{if(l!==null)return l;let R=s.statusText||"OK",k=new Ei(s.getAllResponseHeaders()),G=WA(s)||t.url;return l=new Of({headers:k,status:s.status,statusText:R,url:G}),l},p=()=>{let{headers:R,status:k,statusText:G,url:re}=u(),Y=null;k!==gl.NoContent&&(Y=typeof s.response>"u"?s.responseText:s.response),k===0&&(k=Y?gl.Ok:0);let Ee=k>=200&&k<300;if(t.responseType==="json"&&typeof Y=="string"){let ke=Y;Y=Y.replace(GA,"");try{Y=Y!==""?JSON.parse(Y):null}catch(xe){Y=ke,Ee&&(Ee=!1,Y={error:xe,text:Y})}}Ee?(o.next(new pl({body:Y,headers:R,status:k,statusText:G,url:re||void 0})),o.complete()):o.error(new ml({error:Y,headers:R,status:k,statusText:G,url:re||void 0}))},g=R=>{let{url:k}=u(),G=new ml({error:R,status:s.status||0,statusText:s.statusText||"Unknown Error",url:k||void 0});o.error(G)},b=!1,C=R=>{b||(o.next(u()),b=!0);let k={type:lo.DownloadProgress,loaded:R.loaded};R.lengthComputable&&(k.total=R.total),t.responseType==="text"&&s.responseText&&(k.partialText=s.responseText),o.next(k)},N=R=>{let k={type:lo.UploadProgress,loaded:R.loaded};R.lengthComputable&&(k.total=R.total),o.next(k)};return s.addEventListener("load",p),s.addEventListener("error",g),s.addEventListener("timeout",g),s.addEventListener("abort",g),t.reportProgress&&(s.addEventListener("progress",C),c!==null&&s.upload&&s.upload.addEventListener("progress",N)),s.send(c),o.next({type:lo.Sent}),()=>{s.removeEventListener("error",g),s.removeEventListener("abort",g),s.removeEventListener("load",p),s.removeEventListener("timeout",g),t.reportProgress&&(s.removeEventListener("progress",C),c!==null&&s.upload&&s.upload.removeEventListener("progress",N)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(oe(ao))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})(),Nb=new pe(""),KA="XSRF-TOKEN",QA=new pe("",{providedIn:"root",factory:()=>KA}),YA="X-XSRF-TOKEN",JA=new pe("",{providedIn:"root",factory:()=>YA}),yl=class{},XA=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ll(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(oe(kn),oe(Vr),oe(QA))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})();function ZA(n,e){let t=n.url.toLowerCase();if(!Fe(Nb)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=Fe(yl).getToken(),i=Fe(JA);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function Rb(...n){let e=[ar,Pb,Ab,{provide:Os,useExisting:Ab},{provide:fl,useExisting:Pb},{provide:Ob,useValue:ZA,multi:!0},{provide:Nb,useValue:!0},{provide:yl,useClass:XA}];for(let t of n)e.push(...t.\u0275providers);return Vc(e)}var kf=class extends sl{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Ff=class n extends kf{static makeCurrent(){_b(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=tP();return t==null?null:nP(t)}resetBaseElement(){Rs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ll(document.cookie,e)}},Rs=null;function tP(){return Rs=Rs||document.querySelector("base"),Rs?Rs.getAttribute("href"):null}function nP(n){return new URL(n,document.baseURI).pathname}var rP=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})(),Vf=new pe(""),Lb=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new de(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(oe(Vf),oe(yt))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})(),_l=class{constructor(e){this._doc=e}},Nf="ng-app-id",jb=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=dl(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Nf}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(Nf),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Nf,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(oe(kn),oe(Yh),oe(Xh,8),oe(Vr))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})(),Rf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},jf=/%COMP%/g,Bb="%COMP%",iP=`_nghost-${Bb}`,oP=`_ngcontent-${Bb}`,sP=!0,aP=new pe("",{providedIn:"root",factory:()=>sP});function cP(n){return oP.replace(jf,n)}function lP(n){return iP.replace(jf,n)}function Ub(n,e){return e.map(t=>t.replace(jf,n))}var kb=(()=>{class n{constructor(t,r,i,o,s,c,l,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=dl(c),this.defaultRenderer=new ks(t,s,l,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Pn.ShadowDom&&(r=ue(J({},r),{encapsulation:Pn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof bl?i.applyToHost(t):i instanceof Fs&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case Pn.Emulated:o=new bl(l,u,r,this.appId,p,s,c,g);break;case Pn.ShadowDom:return new Lf(l,u,t,r,s,c,this.nonce,g);default:o=new Fs(l,u,r,p,s,c,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(oe(Lb),oe(jb),oe(Yh),oe(aP),oe(kn),oe(Vr),oe(yt),oe(Xh))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})(),ks=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Rf[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Fb(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Fb(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new de(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Rf[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Rf[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Yn.DashCase|Yn.Important)?e.style.setProperty(t,r,i&Yn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Yn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=co().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function Fb(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Lf=class extends ks{constructor(e,t,r,i,o,s,c,l){super(e,o,s,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=Ub(i.id,i.styles);for(let p of u){let g=document.createElement("style");c&&g.setAttribute("nonce",c),g.textContent=p,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Fs=class extends ks{constructor(e,t,r,i,o,s,c,l){super(e,o,s,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=l?Ub(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},bl=class extends Fs{constructor(e,t,r,i,o,s,c,l){let u=i+"-"+r.id;super(e,t,r,o,s,c,l,u),this.contentAttr=cP(u),this.hostAttr=lP(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},uP=(()=>{class n extends _l{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(oe(kn))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})(),Vb=["alt","control","meta","shift"],dP={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},hP={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},fP=(()=>{class n extends _l{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>co().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),s="code."),Vb.forEach(u=>{let p=r.indexOf(u);p>-1&&(r.splice(p,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(t,r){let i=dP[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Vb.forEach(s=>{if(s!==i){let c=hP[s];c(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(oe(kn))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac})}}return n})();function $b(n,e){return hb(J({rootComponent:n},pP(e)))}function pP(n){return{appProviders:[..._P,...n?.providers??[]],platformProviders:vP}}function mP(){Ff.makeCurrent()}function gP(){return new Qn}function yP(){return p_(document),document}var vP=[{provide:Vr,useValue:xb},{provide:Jh,useValue:mP,multi:!0},{provide:kn,useFactory:yP,deps:[]}];var _P=[{provide:Lc,useValue:"root"},{provide:Qn,useFactory:gP,deps:[]},{provide:Vf,useClass:uP,multi:!0,deps:[kn,yt,Vr]},{provide:Vf,useClass:fP,multi:!0,deps:[kn]},kb,jb,Lb,{provide:vs,useExisting:kb},{provide:ao,useClass:rP,deps:[]},[]];var zb={providers:[Rb()]};var Zb=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(W(Lr),W(tn))}}static{this.\u0275dir=We({type:n})}}return n})(),Us=(()=>{class n extends Zb{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Fr(n)))(i||n)}})()}static{this.\u0275dir=We({type:n,features:[Tt]})}}return n})(),po=new pe("");var bP={provide:po,useExisting:Lt(()=>dt),multi:!0};function wP(){let n=co()?co().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var CP=new pe(""),dt=(()=>{class n extends Zb{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!wP())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(W(Lr),W(tn),W(CP,8))}}static{this.\u0275dir=We({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&B("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[_n([bP]),Tt]})}}return n})();function Bs(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var $s=new pe(""),ew=new pe("");function EP(n){return e=>{if(Bs(e.value)||Bs(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function IP(n){return e=>{if(Bs(e.value)||Bs(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function xP(n){return Bs(n.value)?{required:!0}:null}function Hb(n){return null}function tw(n){return n!=null}function nw(n){return Ts(n)?Tn(n):n}function rw(n){let e={};return n.forEach(t=>{e=t!=null?J(J({},e),t):e}),Object.keys(e).length===0?null:e}function iw(n,e){return e.map(t=>t(n))}function DP(n){return!n.validate}function ow(n){return n.map(e=>DP(e)?e:t=>e.validate(t))}function SP(n){if(!n)return null;let e=n.filter(tw);return e.length==0?null:function(t){return rw(iw(t,e))}}function Uf(n){return n!=null?SP(ow(n)):null}function TP(n){if(!n)return null;let e=n.filter(tw);return e.length==0?null:function(t){let r=iw(t,e).map(nw);return _d(r).pipe(lt(rw))}}function $f(n){return n!=null?TP(ow(n)):null}function qb(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function MP(n){return n._rawValidators}function AP(n){return n._rawAsyncValidators}function Bf(n){return n?Array.isArray(n)?n:[n]:[]}function Cl(n,e){return Array.isArray(n)?n.includes(e):n===e}function Gb(n,e){let t=Bf(e);return Bf(n).forEach(i=>{Cl(t,i)||t.push(i)}),t}function Wb(n,e){return Bf(e).filter(t=>!Cl(n,t))}var El=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Uf(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=$f(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},ho=class extends El{get formDirective(){return null}get path(){return null}},fo=class extends El{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Il=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},PP={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},K5=ue(J({},PP),{"[class.ng-submitted]":"isSubmitted"}),ht=(()=>{class n extends Il{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(W(fo,2))}}static{this.\u0275dir=We({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&be("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Tt]})}}return n})(),rn=(()=>{class n extends Il{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(W(ho,10))}}static{this.\u0275dir=We({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&be("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Tt]})}}return n})();var Vs="VALID",wl="INVALID",uo="PENDING",Ls="DISABLED";function sw(n){return(Sl(n)?n.validators:n)||null}function OP(n){return Array.isArray(n)?Uf(n):n||null}function aw(n,e){return(Sl(e)?e.asyncValidators:n)||null}function NP(n){return Array.isArray(n)?$f(n):n||null}function Sl(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function RP(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new de(1e3,"");if(!r[t])throw new de(1001,"")}function kP(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new de(1002,"")})}var xl=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Vs}get invalid(){return this.status===wl}get pending(){return this.status==uo}get disabled(){return this.status===Ls}get enabled(){return this.status!==Ls}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Gb(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Gb(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Wb(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Wb(e,this._rawAsyncValidators))}hasValidator(e){return Cl(this._rawValidators,e)}hasAsyncValidator(e){return Cl(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=uo,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ls,this.errors=null,this._forEachChild(r=>{r.disable(ue(J({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ue(J({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Vs,this._forEachChild(r=>{r.enable(ue(J({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ue(J({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Vs||this.status===uo)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ls:Vs}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=uo,this._hasOwnPendingAsyncValidator=!0;let t=nw(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new kt,this.statusChanges=new kt}_calculateStatus(){return this._allControlsDisabled()?Ls:this.errors?wl:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(uo)?uo:this._anyControlsHaveStatus(wl)?wl:Vs}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Sl(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=OP(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=NP(this._rawAsyncValidators)}},Dl=class extends xl{constructor(e,t,r){super(sw(t),aw(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){kP(this,!0,e),Object.keys(e).forEach(r=>{RP(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Tl=new pe("CallSetDisabledState",{providedIn:"root",factory:()=>Ml}),Ml="always";function FP(n,e){return[...e.path,n]}function cw(n,e,t=Ml){lw(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),LP(n,e),BP(n,e),jP(n,e),VP(n,e)}function Kb(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function VP(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function lw(n,e){let t=MP(n);e.validator!==null?n.setValidators(qb(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=AP(n);e.asyncValidator!==null?n.setAsyncValidators(qb(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Kb(e._rawValidators,i),Kb(e._rawAsyncValidators,i)}function LP(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&uw(n,e)})}function jP(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&uw(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function uw(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function BP(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function UP(n,e){n==null,lw(n,e)}function $P(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function zP(n){return Object.getPrototypeOf(n.constructor)===Us}function HP(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function qP(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===dt?t=o:zP(o)?r=o:i=o}),i||r||t||null}var GP={provide:ho,useExisting:Lt(()=>Ht)},js=Promise.resolve(),Ht=(()=>{class n extends ho{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new kt,this.form=new Dl({},Uf(t),$f(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){js.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),cw(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){js.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){js.then(()=>{let r=this._findContainer(t.path),i=new Dl({});UP(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){js.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){js.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,HP(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(W($s,10),W(ew,10),W(Tl,8))}}static{this.\u0275dir=We({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&B("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[Xt.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_n([GP]),Tt]})}}return n})();function Qb(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Yb(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var WP=class extends xl{constructor(e=null,t,r){super(sw(t),aw(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Sl(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Yb(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Qb(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Qb(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Yb(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var KP={provide:fo,useExisting:Lt(()=>at)},Jb=Promise.resolve(),at=(()=>{class n extends fo{constructor(t,r,i,o,s,c){super(),this._changeDetectorRef=s,this.callSetDisabledState=c,this.control=new WP,this._registered=!1,this.name="",this.update=new kt,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=qP(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),$P(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){cw(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Jb.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Jc(r);Jb.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?FP(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(W(ho,9),W($s,10),W(ew,10),W(po,10),W(Yc,8),W(Tl,8))}}static{this.\u0275dir=We({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Xt.None,"disabled","isDisabled"],model:[Xt.None,"ngModel","model"],options:[Xt.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[_n([KP]),Tt,Ci]})}}return n})(),on=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=We({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),QP={provide:po,useExisting:Lt(()=>cr),multi:!0},cr=(()=>{class n extends Us{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Fr(n)))(i||n)}})()}static{this.\u0275dir=We({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&B("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[_n([QP]),Tt]})}}return n})(),YP={provide:po,useExisting:Lt(()=>zf),multi:!0};var JP=(()=>{class n{constructor(){this._accessors=[]}add(t,r){this._accessors.push([t,r])}remove(t){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===t){this._accessors.splice(r,1);return}}select(t){this._accessors.forEach(r=>{this._isSameGroup(r,t)&&r[1]!==t&&r[1].fireUncheck(t.value)})}_isSameGroup(t,r){return t[0].control?t[0]._parent===r._control._parent&&t[1].name===r.name:!1}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),zf=(()=>{class n extends Us{constructor(t,r,i,o){super(t,r),this._registry=i,this._injector=o,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=Fe(Tl,{optional:!0})??Ml}ngOnInit(){this._control=this._injector.get(fo),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}setDisabledState(t){(this.setDisabledStateFired||t||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",t),this.setDisabledStateFired=!0}fireUncheck(t){this.writeValue(t)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}static{this.\u0275fac=function(r){return new(r||n)(W(Lr),W(tn),W(JP),W(Is))}}static{this.\u0275dir=We({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(r,i){r&1&&B("change",function(){return i.onChange()})("blur",function(){return i.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[_n([YP]),Tt]})}}return n})();var XP={provide:po,useExisting:Lt(()=>sn),multi:!0};function dw(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function ZP(n){return n.split(":")[0]}var sn=(()=>{class n extends Us{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=dw(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=ZP(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Fr(n)))(i||n)}})()}static{this.\u0275dir=We({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&B("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[_n([XP]),Tt]})}}return n})(),Vn=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(dw(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(W(tn),W(Lr),W(sn,9))}}static{this.\u0275dir=We({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),eO={provide:po,useExisting:Lt(()=>hw),multi:!0};function Xb(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function tO(n){return n.split(":")[0]}var hw=(()=>{class n extends Us{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let c=0;c<s.length;c++){let l=s[c],u=this._getOptionValue(l.value);i.push(u)}}else{let s=r.options;for(let c=0;c<s.length;c++){let l=s[c];if(l.selected){let u=this._getOptionValue(l.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=tO(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Fr(n)))(i||n)}})()}static{this.\u0275dir=We({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&B("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[_n([eO]),Tt]})}}return n})(),Ln=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(Xb(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Xb(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(W(tn),W(Lr),W(hw,9))}}static{this.\u0275dir=We({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();function fw(n){return typeof n=="number"?n:parseFloat(n)}var Hf=(()=>{class n{constructor(){this._validator=Hb}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Hb,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=We({type:n,features:[Ci]})}}return n})(),nO={provide:$s,useExisting:Lt(()=>qf),multi:!0},qf=(()=>{class n extends Hf{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=t=>fw(t),this.createValidator=t=>IP(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Fr(n)))(i||n)}})()}static{this.\u0275dir=We({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Ds("max",i._enabled?i.max:null)},inputs:{max:"max"},features:[_n([nO]),Tt]})}}return n})(),rO={provide:$s,useExisting:Lt(()=>lr),multi:!0},lr=(()=>{class n extends Hf{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>fw(t),this.createValidator=t=>EP(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Fr(n)))(i||n)}})()}static{this.\u0275dir=We({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Ds("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[_n([rO]),Tt]})}}return n})(),iO={provide:$s,useExisting:Lt(()=>qt),multi:!0};var qt=(()=>{class n extends Hf{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Jc,this.createValidator=t=>xP}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Fr(n)))(i||n)}})()}static{this.\u0275dir=We({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Ds("required",i._enabled?"":null)},inputs:{required:"required"},features:[_n([iO]),Tt]})}}return n})();var oO=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=wi({type:n})}static{this.\u0275inj=bi({})}}return n})();var ft=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Tl,useValue:t.callSetDisabledState??Ml}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=wi({type:n})}static{this.\u0275inj=bi({imports:[oO]})}}return n})();var an={production:!0,apiUrl:"https://inventory-three-theta.vercel.app/api",socketUrl:"https://your-websocket-server.com",firebaseConfig:{apiKey:"AIzaSyDJL01CQ2KJGqni6Q3EPR8Yv1CPW6cXezk",authDomain:"inventory-8b0ad.firebaseapp.com",projectId:"inventory-8b0ad",storageBucket:"inventory-8b0ad.firebasestorage.app",messagingSenderId:"165252469952",appId:"1:165252469952:web:1dec34907cc003fd2c4925",measurementId:"G-YK1FRTQT8P"}};var Al=(()=>{class n{constructor(t){this.http=t,this.apiUrl=an.apiUrl,this.logsSubject=new Je([]),this.logs$=this.logsSubject.asObservable(),this.fetchLogs()}getCurrentUserId(){return localStorage.getItem("jjm_user_id")||"guest"}fetchLogs(){let t=this.getCurrentUserId();this.http.get(`${this.apiUrl}/logs?limit=200&userId=${t}`).subscribe({next:r=>this.logsSubject.next(r),error:r=>console.error("Error fetching logs:",r)})}logActivity(t,r,i,o,s){let c={action:t,entityType:r,entityId:i,entityName:o,details:s,userId:this.getCurrentUserId()};console.log("Logging activity:",c),this.http.post(`${this.apiUrl}/logs`,c).subscribe({next:l=>{console.log("Activity logged successfully:",l);let u=this.logsSubject.value;this.logsSubject.next([l,...u])},error:l=>{console.error("Error logging activity:",l),console.error("Failed log data:",c)}})}getLogs(){return this.logs$}refreshLogs(){this.fetchLogs()}cleanupOldLogs(){return this.http.post(`${this.apiUrl}/cleanup-logs`,{})}static{this.\u0275fac=function(r){return new(r||n)(oe(ar))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var cn=(()=>{class n{constructor(t,r){this.http=t,this.loggingService=r,this.apiUrl=an.apiUrl,this.productsSubject=new Je([]),this.salesSubject=new Je([]),this.expensesSubject=new Je([]),this.products$=this.productsSubject.asObservable(),this.sales$=this.salesSubject.asObservable(),this.expenses$=this.expensesSubject.asObservable(),this.loadInitialData()}getCurrentUser(){return localStorage.getItem("jjm_user_id")||"guest"}reloadData(){this.loadInitialData()}loadInitialData(){this.fetchProducts(),this.fetchSales(),this.fetchExpenses()}fetchProducts(){let t=this.getCurrentUser();this.http.get(`${this.apiUrl}/products?userId=${t}`).subscribe({next:r=>this.productsSubject.next(r),error:r=>console.error("Error fetching products:",r)})}fetchSales(){let t=this.getCurrentUser();this.http.get(`${this.apiUrl}/sales?userId=${t}`).subscribe({next:r=>{let i=r.map(o=>this.transformSale(o));this.salesSubject.next(i)},error:r=>console.error("Error fetching sales:",r)})}fetchExpenses(){let t=this.getCurrentUser();this.http.get(`${this.apiUrl}/expenses?userId=${t}`).subscribe({next:r=>this.expensesSubject.next(r),error:r=>console.error("Error fetching expenses:",r)})}getProducts(){return this.products$}getSales(){return this.sales$}getExpenses(){return this.expenses$}addExpense(t){let r=ue(J({},t),{userId:this.getCurrentUser()});this.http.post(`${this.apiUrl}/expenses`,r).subscribe({next:i=>{let o=this.expensesSubject.value;this.expensesSubject.next([...o,i]),this.loggingService.logActivity("create","expense",i.id,i.productName,`$${i.price.toFixed(2)}`)},error:i=>console.error("Error adding expense:",i)})}addProduct(t){let r=ue(J({},t),{userId:this.getCurrentUser()});this.http.post(`${this.apiUrl}/products`,r).subscribe({next:i=>{let o=this.productsSubject.value;this.productsSubject.next([...o,i]),this.loggingService.logActivity("create","product",i.id,i.name)},error:i=>console.error("Error adding product:",i)})}recordSale(t,r,i,o,s,c,l=0,u="amount"){let g=this.productsSubject.value.find(R=>R.id===t);if(!g)throw new Error("Product not found");if(g.quantity<r)throw new Error("Insufficient quantity");let b=g.price*r;l>0&&(u==="percent"?b=b-b*(l/100):b=b-l),b=Math.max(0,Math.round(b*100)/100);let C=i-b;if(C<0)throw new Error("Insufficient cash");let N={productId:g.id,productName:g.name,category:g.category,price:g.price,quantitySold:r,total:b,cashReceived:i,change:C,deliveryDate:o,deliveryNotes:s,customerId:c,pending:!0,discount:l,discountType:u,userId:this.getCurrentUser()};this.http.post(`${this.apiUrl}/sales`,N).subscribe({next:R=>{let k=this.salesSubject.value;this.salesSubject.next([...k,this.transformSale(R)]);let G=ue(J({},g),{quantity:g.quantity-r});this.updateProduct(G),this.loggingService.logActivity("create","sale",R.id,g.name,`Sold ${r} units`)},error:R=>console.error("Error recording sale:",R)})}completePendingSale(t){this.http.put(`${this.apiUrl}/sales/${t}`,{pending:!1}).subscribe({next:()=>{let r=this.salesSubject.value,i=r.find(s=>s.id===t),o=r.map(s=>s.id===t?ue(J({},s),{pending:!1}):s);this.salesSubject.next(o),i&&this.loggingService.logActivity("complete","sale",t,i.productName,"Marked as delivered")},error:r=>console.error("Error completing sale:",r)})}updateSale(t){this.http.put(`${this.apiUrl}/sales/${t.id}`,t).subscribe({next:r=>{let o=this.salesSubject.value.map(s=>s.id===t.id?this.transformSale(r):s);this.salesSubject.next(o),this.loggingService.logActivity("update","sale",t.id,t.productName,"Updated delivery details")},error:r=>console.error("Error updating sale:",r)})}transformSale(t){return ue(J({},t),{timestamp:this.parseDate(t.timestamp),deliveryDate:t.deliveryDate?this.parseDate(t.deliveryDate):void 0})}parseDate(t){return t?t instanceof Date?t:typeof t=="string"?new Date(t):typeof t=="object"&&t._seconds!==void 0?new Date(t._seconds*1e3):new Date(t):new Date}restockProduct(t,r){let o=this.productsSubject.value.find(s=>s.id===t);if(o){let s=ue(J({},o),{quantity:o.quantity+r});this.updateProduct(s),this.loggingService.logActivity("restock","product",t,o.name,`Added ${r} units`)}}updateProduct(t){this.http.put(`${this.apiUrl}/products/${t.id}`,t).subscribe({next:()=>{let i=this.productsSubject.value.map(c=>c.id===t.id?t:c);this.productsSubject.next(i);let o=this.salesSubject.value,s=o.filter(c=>c.productId===t.id&&c.productName!==t.name);if(s.length>0){let c=o.map(l=>l.productId===t.id?ue(J({},l),{productName:t.name}):l);this.salesSubject.next(c),s.forEach(l=>{let u=ue(J({},l),{productName:t.name});this.http.put(`${this.apiUrl}/sales/${l.id}`,u).subscribe({error:p=>console.error(`Error updating sale ${l.id} name:`,p)})})}this.loggingService.logActivity("update","product",t.id,t.name)},error:r=>console.error("Error updating product:",r)})}clearAllData(){this.productsSubject.next([]),this.salesSubject.next([]),this.expensesSubject.next([])}migrateFromLocalStorage(){let t=localStorage.getItem("jjm_products"),r=localStorage.getItem("jjm_sales"),i=localStorage.getItem("jjm_expenses");t&&JSON.parse(t).forEach(s=>this.addProduct(s)),r&&JSON.parse(r).forEach(s=>{this.http.post(`${this.apiUrl}/sales`,s).subscribe({error:c=>console.error("Error migrating sale:",c)})}),i&&JSON.parse(i).forEach(s=>this.addExpense(s)),console.log("Migration started...")}static{this.\u0275fac=function(r){return new(r||n)(oe(ar),oe(Al))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function sO(n,e){if(n&1){let t=se();f(0,"div",23),Ae(1,"img",24),f(2,"button",25),B("click",function(){V(t);let i=A();return L(i.removeImage())}),y(3," \u2715 "),h()()}if(n&2){let t=A();v(),M("src",t.imagePreview,er)}}function aO(n,e){if(n&1){let t=se();f(0,"div",26)(1,"input",27),B("change",function(i){V(t);let o=A();return L(o.onImageChange(i))}),h(),f(2,"label",28)(3,"span",29),y(4,"\u{1F4F7}"),h(),f(5,"span",30),y(6,"Click to upload image"),h(),f(7,"span",31),y(8,"PNG, JPG, GIF up to 5MB"),h()()()}}var mw=(()=>{class n{constructor(t){this.inventoryService=t,this.product={name:"",category:"",price:0,quantity:0,imageUrl:""},this.imagePreview=null}onImageChange(t){let r=t.target;if(r.files&&r.files[0]){let i=r.files[0],o=new FileReader;o.onload=s=>{this.imagePreview=s.target?.result,this.product.imageUrl=s.target?.result},o.readAsDataURL(i)}}removeImage(){this.imagePreview=null,this.product.imageUrl=""}onSubmit(){this.isValid()&&(this.inventoryService.addProduct({name:this.product.name,category:this.product.category,price:this.product.price,quantity:this.product.quantity,imageUrl:this.product.imageUrl}),this.product={name:"",category:"",price:0,quantity:0,imageUrl:""},this.imagePreview=null)}isValid(){return!!(this.product.name&&this.product.category&&this.product.price>0&&this.product.quantity>0)}static{this.\u0275fac=function(r){return new(r||n)(W(cn))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-product-form"]],standalone:!0,features:[ze],decls:42,vars:7,consts:[[1,"card"],[1,"form",3,"ngSubmit"],[1,"image-upload-section"],[1,"image-upload-label"],["class","image-preview-container",4,"ngIf"],["class","image-upload-area",4,"ngIf"],[1,"form-group"],["for","productName"],["type","text","id","productName","name","name","placeholder","Enter product name","required","",3,"ngModelChange","ngModel"],["for","category"],["id","category","name","category","required","",3,"ngModelChange","ngModel"],["value",""],["value","Lechon"],["value","Hollow blocks"],["value","Sand and Gravel"],["value","Copra"],["value","Others"],[1,"form-row"],["for","price"],["type","number","id","price","name","price","placeholder","0.00","min","0","step","0.01","required","",3,"ngModelChange","ngModel"],["for","quantity"],["type","number","id","quantity","name","quantity","placeholder","0","min","1","required","",3,"ngModelChange","ngModel"],["type","submit",1,"btn-primary",3,"disabled"],[1,"image-preview-container"],["alt","Product preview","loading","lazy",1,"image-preview",3,"src"],["type","button",1,"remove-image-btn",3,"click"],[1,"image-upload-area"],["type","file","id","productImage","accept","image/*",1,"file-input",3,"change"],["for","productImage",1,"file-input-label"],[1,"upload-icon"],[1,"upload-text"],[1,"upload-hint"]],template:function(r,i){r&1&&(f(0,"div",0)(1,"h3"),y(2,"Add New Product"),h(),f(3,"form",1),B("ngSubmit",function(){return i.onSubmit()}),f(4,"div",2)(5,"label",3),y(6,"Product Image (Optional)"),h(),$(7,sO,4,1,"div",4)(8,aO,9,0,"div",5),h(),f(9,"div",6)(10,"label",7),y(11,"Product Name"),h(),f(12,"input",8),Z("ngModelChange",function(s){return ee(i.product.name,s)||(i.product.name=s),s}),h()(),f(13,"div",6)(14,"label",9),y(15,"Category"),h(),f(16,"select",10),Z("ngModelChange",function(s){return ee(i.product.category,s)||(i.product.category=s),s}),f(17,"option",11),y(18,"-- Select Category --"),h(),f(19,"option",12),y(20,"Lechon"),h(),f(21,"option",13),y(22,"Hollow blocks"),h(),f(23,"option",14),y(24,"Sand and Gravel"),h(),f(25,"option",15),y(26,"Copra"),h(),f(27,"option",16),y(28,"Others"),h()()(),f(29,"div",17)(30,"div",6)(31,"label",18),y(32,"Price"),h(),f(33,"input",19),Z("ngModelChange",function(s){return ee(i.product.price,s)||(i.product.price=s),s}),h()(),f(34,"div",6)(35,"label",20),y(36,"Quantity"),h(),f(37,"input",21),Z("ngModelChange",function(s){return ee(i.product.quantity,s)||(i.product.quantity=s),s}),h()()(),f(38,"button",22)(39,"span"),y(40,"\u2795"),h(),y(41," Add Product "),h()()()),r&2&&(v(7),M("ngIf",i.imagePreview),v(),M("ngIf",!i.imagePreview),v(4),X("ngModel",i.product.name),v(4),X("ngModel",i.product.category),v(17),X("ngModel",i.product.price),v(4),X("ngModel",i.product.quantity),v(),M("disabled",!i.isValid()))},dependencies:[Ue,Ze,ft,on,Vn,Ln,dt,cr,sn,ht,rn,qt,lr,at,Ht],styles:[".form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg);margin-top:var(--space-lg)}.image-upload-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.image-upload-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.image-preview-container[_ngcontent-%COMP%]{position:relative;width:100%;max-width:300px;margin:0 auto}.image-preview[_ngcontent-%COMP%]{width:100%;height:200px;object-fit:cover;border-radius:var(--radius-lg);border:2px solid var(--color-border)}.remove-image-btn[_ngcontent-%COMP%]{position:absolute;top:var(--space-sm);right:var(--space-sm);width:32px;height:32px;padding:0;background:var(--color-danger);color:#fff;border:none;border-radius:50%;font-size:1.25rem;cursor:pointer;display:flex;align-items:center;justify-content:center;box-shadow:var(--shadow-md)}.remove-image-btn[_ngcontent-%COMP%]:hover{background:#dc2626;transform:scale(1.1)}.image-upload-area[_ngcontent-%COMP%]{width:100%}.file-input[_ngcontent-%COMP%]{display:none}.file-input-label[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:var(--space-sm);padding:var(--space-2xl);border:2px dashed var(--color-border);border-radius:var(--radius-lg);background:var(--color-bg);cursor:pointer;transition:all var(--transition-base)}.file-input-label[_ngcontent-%COMP%]:hover{border-color:var(--color-primary);background:#1e40af0d}.upload-icon[_ngcontent-%COMP%]{font-size:3rem}.upload-text[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text)}.upload-hint[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--space-lg)}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:var(--space-md) var(--space-lg);font-size:1rem;margin-top:var(--space-sm)}@media (max-width: 640px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return n})();var go=(()=>{class n{constructor(t){this.http=t,this.apiUrl=an.apiUrl,this.customersSubject=new Je([]),this.customers$=this.customersSubject.asObservable(),this.loadInitialData()}loadInitialData(){this.fetchCustomers()}getCurrentUser(){return localStorage.getItem("jjm_user_id")||"guest"}reloadData(){this.loadInitialData()}fetchCustomers(){let t=this.getCurrentUser();this.http.get(`${this.apiUrl}/customers?userId=${t}`).subscribe({next:r=>this.customersSubject.next(r),error:r=>console.error("Error fetching customers:",r)})}getCustomers(){return this.customers$}addCustomer(t){let r=ue(J({},t),{userId:this.getCurrentUser()});this.http.post(`${this.apiUrl}/customers`,r).subscribe({next:i=>{let o=this.customersSubject.value;this.customersSubject.next([...o,i])},error:i=>console.error("Error adding customer:",i)})}updateCustomer(t,r){this.http.put(`${this.apiUrl}/customers/${t}`,r).subscribe({next:()=>{let o=this.customersSubject.value.map(s=>s.id===t?J(J({},s),r):s);this.customersSubject.next(o)},error:i=>console.error("Error updating customer:",i)})}deleteCustomer(t){this.http.delete(`${this.apiUrl}/customers/${t}`).subscribe({next:()=>{let i=this.customersSubject.value.filter(o=>o.id!==t);this.customersSubject.next(i)},error:r=>console.error("Error deleting customer:",r)})}getCustomerById(t){return this.customersSubject.value.find(r=>r.id===t)}static{this.\u0275fac=function(r){return new(r||n)(oe(ar))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function cO(n,e){if(n&1&&(f(0,"option",41),y(1),h()),n&2){let t=e.$implicit;M("value",t.id),v(),nr(" ",t.name," - ",t.phoneNumber," ")}}function lO(n,e){if(n&1&&(f(0,"div",42)(1,"div",43),y(2,"\u{1F4CB} Customer Information"),h(),f(3,"div",44)(4,"span",45),y(5,"Name:"),h(),f(6,"span",46),y(7),h()(),f(8,"div",44)(9,"span",45),y(10,"Phone:"),h(),f(11,"span",46),y(12),h()(),f(13,"div",44)(14,"span",45),y(15,"Address:"),h(),f(16,"span",46),y(17),h()()()),n&2){let t=A();v(7),H(t.selectedCustomer.name),v(5),H(t.selectedCustomer.phoneNumber),v(5),H(t.selectedCustomer.deliveryAddress)}}function uO(n,e){if(n&1&&(f(0,"option",41),y(1),h()),n&2){let t=e.$implicit;M("value",t.id),v(),_f(" ",t.name," - $",t.price.toFixed(2)," (Stock: ",t.quantity,") ")}}function dO(n,e){if(n&1&&(f(0,"div",48)(1,"span",49),y(2,"Discount:"),h(),f(3,"span",55),y(4),h()()),n&2){let t=A(2);v(4),Q("- $",(t.subtotal-t.total).toFixed(2),"")}}function hO(n,e){if(n&1&&(f(0,"span"),y(1),h()),n&2){let t=A(3);v(),Q(" at ",t.deliveryTime,"")}}function fO(n,e){if(n&1&&(f(0,"div",56)(1,"span",49),y(2,"\u{1F4C5} Delivery:"),h(),f(3,"span",50),y(4),De(5,"date"),$(6,hO,2,1,"span",57),h()()),n&2){let t=A(2);v(4),H(Oe(5,2,t.deliveryDate,"mediumDate")),v(2),M("ngIf",t.deliveryTime)}}function pO(n,e){if(n&1&&(f(0,"div",47)(1,"div",48)(2,"span",49),y(3,"Subtotal:"),h(),f(4,"span",50),y(5),h()(),$(6,dO,5,1,"div",51),f(7,"div",52)(8,"span",49),y(9,"Total:"),h(),f(10,"span",50),y(11),h()(),f(12,"div",53)(13,"span",49),y(14,"Change:"),h(),f(15,"span",50),y(16),h()(),$(17,fO,7,5,"div",54),h()),n&2){let t=A();v(5),Q("$",t.subtotal.toFixed(2),""),v(),M("ngIf",t.discount>0),v(5),Q("$",t.total.toFixed(2),""),v(),be("negative",t.change<0),v(4),Q("$",t.change.toFixed(2),""),v(),M("ngIf",t.deliveryDate)}}function mO(n,e){if(n&1&&(f(0,"div",58),y(1),h()),n&2){let t=A();v(),Q("\u26A0\uFE0F ",t.errorMessage,"")}}function gO(n,e){if(n&1&&(f(0,"div",70)(1,"div",71),y(2,"\u{1F464} Customer Details"),h(),f(3,"div",72)(4,"span",73),y(5,"Name:"),h(),f(6,"span",74),y(7),h()(),f(8,"div",72)(9,"span",73),y(10,"Phone:"),h(),f(11,"span",74),y(12),h()(),f(13,"div",72)(14,"span",73),y(15,"Address:"),h(),f(16,"span",74),y(17),h()()()),n&2){let t=e.ngIf;v(7),H(t.name),v(5),H(t.phoneNumber),v(5),H(t.deliveryAddress)}}function yO(n,e){if(n&1&&(f(0,"span"),y(1),h()),n&2){let t=A(2).$implicit;v(),Q("\u{1F4DD} ",t.deliveryNotes,"")}}function vO(n,e){if(n&1&&(f(0,"div",75)(1,"span"),y(2),De(3,"date"),h(),f(4,"span"),y(5),De(6,"date"),h(),$(7,yO,2,1,"span",57),h()),n&2){let t=A().$implicit;v(2),Q("\u{1F4C5} Due: ",Oe(3,3,t.deliveryDate,"mediumDate"),""),v(3),Q("\u{1F4C5} Time: ",Oe(6,6,t.deliveryDate,"shortTime"),""),v(2),M("ngIf",t.deliveryNotes)}}function _O(n,e){if(n&1){let t=se();f(0,"div",59)(1,"div",60)(2,"div",61)(3,"span",62),y(4),h(),f(5,"span",63),y(6),De(7,"date"),h()(),f(8,"div",64)(9,"span"),y(10),h(),f(11,"span"),y(12),h()(),$(13,gO,18,3,"div",65)(14,vO,8,9,"div",66),h(),f(15,"div",67)(16,"button",68),B("click",function(){let i=V(t).$implicit,o=A();return L(o.openEditModal(i))}),y(17,"\u270F\uFE0F Edit"),h(),f(18,"button",69),B("click",function(){let i=V(t).$implicit,o=A();return L(o.markAsDelivered(i.id))}),y(19,"\u2705 Mark Delivered"),h()()()}if(n&2){let t=e.$implicit,r=A();v(4),H(t.productName),v(2),H(Oe(7,6,t.timestamp,"short")),v(4),Q("Qty: ",t.quantitySold,""),v(2),Q("Total: $",t.total.toFixed(2),""),v(),M("ngIf",r.getCustomerById(t.customerId)),v(),M("ngIf",t.deliveryDate)}}function bO(n,e){if(n&1){let t=se();f(0,"div",76),B("click",function(){V(t);let i=A();return L(i.closeEditModal())}),f(1,"div",77),B("click",function(i){return V(t),L(i.stopPropagation())}),f(2,"div",78)(3,"h3"),y(4,"Edit Delivery Details"),h(),f(5,"button",79),B("click",function(){V(t);let i=A();return L(i.closeEditModal())}),y(6,"\xD7"),h()(),f(7,"div",80)(8,"div",2)(9,"label",81),y(10,"Delivery Date"),h(),f(11,"input",82),Z("ngModelChange",function(i){V(t);let o=A();return ee(o.editDeliveryDate,i)||(o.editDeliveryDate=i),L(i)}),h()(),f(12,"div",2)(13,"label",83),y(14,"Delivery Time"),h(),f(15,"input",84),Z("ngModelChange",function(i){V(t);let o=A();return ee(o.editDeliveryTime,i)||(o.editDeliveryTime=i),L(i)}),h()(),f(16,"div",2)(17,"label",85),y(18,"Notes"),h(),f(19,"textarea",86),Z("ngModelChange",function(i){V(t);let o=A();return ee(o.editDeliveryNotes,i)||(o.editDeliveryNotes=i),L(i)}),h()()(),f(20,"div",87)(21,"button",88),B("click",function(){V(t);let i=A();return L(i.closeEditModal())}),y(22,"Cancel"),h(),f(23,"button",89),B("click",function(){V(t);let i=A();return L(i.saveEdit())}),y(24,"Save Changes"),h()()()()}if(n&2){let t=A();v(11),X("ngModel",t.editDeliveryDate),M("min",t.minDate),v(4),X("ngModel",t.editDeliveryTime),v(4),X("ngModel",t.editDeliveryNotes)}}var gw=(()=>{class n{constructor(t,r){this.inventoryService=t,this.customerService=r,this.products=[],this.customers=[],this.pendingSales=[],this.selectedProductId="",this.selectedCustomerId="",this.quantity=1,this.cashReceived=0,this.discount=0,this.discountType="amount",this.errorMessage="",this.deliveryDate="",this.deliveryTime="",this.deliveryNotes="",this.minDate="",this.deliveryFilterDate="",this.isEditModalOpen=!1,this.editingSale=null,this.editDeliveryDate="",this.editDeliveryTime="",this.editDeliveryNotes="";let i=new Date,o=i.getFullYear(),s=String(i.getMonth()+1).padStart(2,"0"),c=String(i.getDate()).padStart(2,"0");this.minDate=`${o}-${s}-${c}`,this.deliveryDate=this.minDate}ngOnInit(){this.inventoryService.getProducts().subscribe(t=>{this.products=t.filter(r=>r.quantity>0)}),this.customerService.getCustomers().subscribe(t=>{this.customers=t}),this.inventoryService.getSales().subscribe(t=>{this.pendingSales=t.filter(r=>r.pending===!0),this.startAlarmChecks()}),this.discount=0}startAlarmChecks(){setInterval(()=>this.checkPendingDeliveryAlarms(),60*60*1e3),this.checkPendingDeliveryAlarms()}get filteredPendingSales(){let t=this.pendingSales;return this.deliveryFilterDate&&(t=t.filter(r=>{if(!r.deliveryDate)return!1;let i=new Date(r.deliveryDate),o=i.getFullYear(),s=String(i.getMonth()+1).padStart(2,"0"),c=String(i.getDate()).padStart(2,"0");return`${o}-${s}-${c}`===this.deliveryFilterDate})),t.slice().sort((r,i)=>{let o=r.deliveryDate?new Date(r.deliveryDate).getTime():1/0,s=i.deliveryDate?new Date(i.deliveryDate).getTime():1/0;return o-s})}checkPendingDeliveryAlarms(){let t=new Date;this.pendingSales.forEach(r=>{if(!r.deliveryDate)return;let o=new Date(r.deliveryDate).getTime()-t.getTime(),s=Math.floor(o/(1e3*60*60*24));(s===1||s===2)&&this.triggerAlarm(r,s)})}triggerAlarm(t,r){let o=new Date(t.deliveryDate).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}),s=`\u26A0\uFE0F Delivery for "${t.productName}" is due in ${r} day(s) (${o}).`;this.playBeep(),alert(s)}playBeep(){try{let t=new(window.AudioContext||window.webkitAudioContext),r=t.createOscillator(),i=t.createGain();r.type="square",r.frequency.setValueAtTime(1e3,t.currentTime),i.gain.setValueAtTime(.5,t.currentTime),r.connect(i),i.connect(t.destination),r.start(),r.stop(t.currentTime+2)}catch(t){console.error("Audio alarm failed",t)}}get selectedProduct(){return this.products.find(t=>t.id===this.selectedProductId)}get selectedCustomer(){return this.customers.find(t=>t.id===this.selectedCustomerId)}getCustomerById(t){if(t)return this.customers.find(r=>r.id===t)}get subtotal(){return this.selectedProduct?this.selectedProduct.price*this.quantity:0}get total(){let t=this.subtotal;return this.discount>0&&(this.discountType==="percent"?t=t-t*(this.discount/100):t=t-this.discount),Math.max(0,Math.round(t*100)/100)}get change(){return this.cashReceived-this.total}get maxQuantity(){return this.selectedProduct?.quantity||0}onProductChange(){this.quantity=1,this.errorMessage="",this.discount=0}processSale(){if(this.errorMessage="",!this.selectedProductId){this.errorMessage="Please select a product";return}if(this.quantity<1||this.quantity>this.maxQuantity){this.errorMessage=`Quantity must be between 1 and ${this.maxQuantity}`;return}if(this.cashReceived<this.total){this.errorMessage="Insufficient cash received";return}try{let t;this.deliveryDate&&(this.deliveryTime?t=new Date(`${this.deliveryDate}T${this.deliveryTime}`):t=new Date(this.deliveryDate)),this.inventoryService.recordSale(this.selectedProductId,this.quantity,this.cashReceived,t,this.deliveryNotes||void 0,this.selectedCustomerId||void 0,this.discount,this.discountType),this.selectedProductId="",this.quantity=1,this.cashReceived=0,this.discount=0,this.discountType="amount",this.deliveryDate=this.minDate,this.deliveryTime="",this.deliveryNotes=""}catch(t){this.errorMessage=t.message||"Error processing sale"}}isValid(){return!!(this.selectedProductId&&this.quantity>=1&&this.quantity<=this.maxQuantity&&this.cashReceived>=this.total)}markAsDelivered(t){confirm("Are you sure you want to mark this item as delivered?")&&this.inventoryService.completePendingSale(t)}openEditModal(t){if(this.editingSale=t,this.isEditModalOpen=!0,t.deliveryDate){let r=new Date(t.deliveryDate),i=r.getFullYear(),o=String(r.getMonth()+1).padStart(2,"0"),s=String(r.getDate()).padStart(2,"0");this.editDeliveryDate=`${i}-${o}-${s}`,this.editDeliveryTime=r.toTimeString().substring(0,5)}else this.editDeliveryDate="",this.editDeliveryTime="";this.editDeliveryNotes=t.deliveryNotes||""}closeEditModal(){this.isEditModalOpen=!1,this.editingSale=null,this.editDeliveryDate="",this.editDeliveryTime="",this.editDeliveryNotes=""}saveEdit(){if(!this.editingSale)return;let t;this.editDeliveryDate&&(this.editDeliveryTime?t=new Date(`${this.editDeliveryDate}T${this.editDeliveryTime}`):t=new Date(this.editDeliveryDate));let r=ue(J({},this.editingSale),{deliveryDate:t,deliveryNotes:this.editDeliveryNotes});this.inventoryService.updateSale(r),this.closeEditModal()}static{this.\u0275fac=function(r){return new(r||n)(W(cn),W(go))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-pos-calculator"]],standalone:!0,features:[ze],decls:81,vars:22,consts:[[1,"card"],[1,"form",3,"ngSubmit"],[1,"form-group"],["for","customer"],["id","customer","name","customer",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","customer-info-display",4,"ngIf"],["for","product"],["id","product","name","product","required","",3,"ngModelChange","change","ngModel"],[1,"form-row"],["for","quantity"],["type","number","id","quantity","name","quantity","placeholder","1","required","",3,"ngModelChange","ngModel","min","max"],["for","cash"],["type","number","id","cash","name","cash","min","0","step","0.01","placeholder","0.00","required","",3,"ngModelChange","ngModel"],[1,"radio-group"],[1,"radio-label"],["type","radio","name","discountType","value","amount",3,"ngModelChange","ngModel"],["type","radio","name","discountType","value","percent",3,"ngModelChange","ngModel"],["for","discount"],["type","number","id","discount","name","discount","min","0","placeholder","0",3,"ngModelChange","ngModel"],[1,"delivery-section"],[1,"section-title"],[1,"section-icon"],["for","deliveryDate"],["type","date","id","deliveryDate","name","deliveryDate",1,"date-input",3,"ngModelChange","ngModel","min"],["for","deliveryTime"],["type","time","id","deliveryTime","name","deliveryTime",1,"time-input",3,"ngModelChange","ngModel"],["for","deliveryNotes"],["id","deliveryNotes","name","deliveryNotes","placeholder","Special instructions, address, contact info...","rows","3",1,"textarea-input",3,"ngModelChange","ngModel"],["class","transaction-summary",4,"ngIf"],["class","error-message",4,"ngIf"],["type","submit",1,"btn-primary","btn-success",3,"disabled"],[1,"card","pending-deliveries"],[1,"filter-row"],["for","deliveryFilter"],[1,"btn-primary",3,"click"],["type","date","id","deliveryFilter","name","deliveryFilter",3,"ngModelChange","ngModel"],[1,"pending-list"],["class","pending-item",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],[3,"value"],[1,"customer-info-display"],[1,"info-header"],[1,"info-row"],[1,"info-label"],[1,"info-value"],[1,"transaction-summary"],[1,"summary-row"],[1,"label"],[1,"value"],["class","summary-row",4,"ngIf"],[1,"summary-row","total-row"],[1,"summary-row","change-row"],["class","summary-row delivery-info",4,"ngIf"],[1,"value","discount-value"],[1,"summary-row","delivery-info"],[4,"ngIf"],[1,"error-message"],[1,"pending-item"],[1,"pending-details"],[1,"pending-header"],[1,"product-name"],[1,"sale-date"],[1,"pending-info"],["class","customer-details",4,"ngIf"],["class","delivery-info",4,"ngIf"],[1,"pending-actions"],[1,"btn-edit",3,"click"],[1,"btn-deliver",3,"click"],[1,"customer-details"],[1,"customer-header"],[1,"customer-row"],[1,"customer-label"],[1,"customer-value"],[1,"delivery-info"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],["for","editDate"],["type","date","id","editDate",1,"date-input",3,"ngModelChange","ngModel","min"],["for","editTime"],["type","time","id","editTime",1,"time-input",3,"ngModelChange","ngModel"],["for","editNotes"],["id","editNotes","rows","3",1,"textarea-input",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn-cancel",3,"click"],[1,"btn-save",3,"click"]],template:function(r,i){r&1&&(f(0,"div",0)(1,"h3"),y(2,"Point of Sale"),h(),f(3,"form",1),B("ngSubmit",function(){return i.processSale()}),f(4,"div",2)(5,"label",3),y(6,"Select Customer (Optional)"),h(),f(7,"select",4),Z("ngModelChange",function(s){return ee(i.selectedCustomerId,s)||(i.selectedCustomerId=s),s}),f(8,"option",5),y(9,"-- Walk-in Customer --"),h(),$(10,cO,2,3,"option",6),h()(),$(11,lO,18,3,"div",7),f(12,"div",2)(13,"label",8),y(14,"Select Product"),h(),f(15,"select",9),Z("ngModelChange",function(s){return ee(i.selectedProductId,s)||(i.selectedProductId=s),s}),B("change",function(){return i.onProductChange()}),f(16,"option",5),y(17,"-- Choose a product --"),h(),$(18,uO,2,4,"option",6),h()(),f(19,"div",10)(20,"div",2)(21,"label",11),y(22,"Quantity"),h(),f(23,"input",12),Z("ngModelChange",function(s){return ee(i.quantity,s)||(i.quantity=s),s}),h()(),f(24,"div",2)(25,"label",13),y(26,"Cash Received"),h(),f(27,"input",14),Z("ngModelChange",function(s){return ee(i.cashReceived,s)||(i.cashReceived=s),s}),h()()(),f(28,"div",10)(29,"div",2)(30,"label"),y(31,"Discount Type"),h(),f(32,"div",15)(33,"label",16)(34,"input",17),Z("ngModelChange",function(s){return ee(i.discountType,s)||(i.discountType=s),s}),h(),y(35," Amount ($)"),h(),f(36,"label",16)(37,"input",18),Z("ngModelChange",function(s){return ee(i.discountType,s)||(i.discountType=s),s}),h(),y(38," Percent (%)"),h()()(),f(39,"div",2)(40,"label",19),y(41,"Discount Value"),h(),f(42,"input",20),Z("ngModelChange",function(s){return ee(i.discount,s)||(i.discount=s),s}),h()()(),f(43,"div",21)(44,"h4",22)(45,"span",23),y(46,"\u{1F69A}"),h(),y(47," Delivery Schedule (Optional)"),h(),f(48,"div",10)(49,"div",2)(50,"label",24),y(51,"Delivery Date"),h(),f(52,"input",25),Z("ngModelChange",function(s){return ee(i.deliveryDate,s)||(i.deliveryDate=s),s}),h()(),f(53,"div",2)(54,"label",26),y(55,"Delivery Time"),h(),f(56,"input",27),Z("ngModelChange",function(s){return ee(i.deliveryTime,s)||(i.deliveryTime=s),s}),h()()(),f(57,"div",2)(58,"label",28),y(59,"Delivery Notes"),h(),f(60,"textarea",29),Z("ngModelChange",function(s){return ee(i.deliveryNotes,s)||(i.deliveryNotes=s),s}),h()()(),$(61,pO,18,7,"div",30)(62,mO,2,1,"div",31),f(63,"button",32)(64,"span"),y(65,"\u{1F4B0}"),h(),y(66," Complete Sale"),h()()(),f(67,"div",33)(68,"h3"),y(69,"\u{1F69A} Pending Deliveries"),h(),f(70,"div",34)(71,"label",35),y(72,"Filter by Delivery Date:"),h(),f(73,"button",36),B("click",function(){return i.deliveryFilterDate=""}),f(74,"span"),y(75,"\u274C"),h(),y(76," Clear"),h(),f(77,"input",37),Z("ngModelChange",function(s){return ee(i.deliveryFilterDate,s)||(i.deliveryFilterDate=s),s}),h()(),f(78,"div",38),$(79,_O,20,9,"div",39),h()(),$(80,bO,25,4,"div",40)),r&2&&(v(7),X("ngModel",i.selectedCustomerId),v(3),M("ngForOf",i.customers),v(),M("ngIf",i.selectedCustomerId&&i.selectedCustomer),v(4),X("ngModel",i.selectedProductId),v(3),M("ngForOf",i.products),v(5),X("ngModel",i.quantity),M("min",1)("max",i.maxQuantity),v(4),X("ngModel",i.cashReceived),v(7),X("ngModel",i.discountType),v(3),X("ngModel",i.discountType),v(5),X("ngModel",i.discount),v(10),X("ngModel",i.deliveryDate),M("min",i.minDate),v(4),X("ngModel",i.deliveryTime),v(4),X("ngModel",i.deliveryNotes),v(),M("ngIf",i.selectedProduct),v(),M("ngIf",i.errorMessage),v(),M("disabled",!i.isValid()),v(14),X("ngModel",i.deliveryFilterDate),v(2),M("ngForOf",i.filteredPendingSales),v(),M("ngIf",i.isEditModalOpen))},dependencies:[Ue,ut,Ze,Fn,ft,on,Vn,Ln,dt,cr,sn,zf,ht,rn,qt,lr,qf,at,Ht],styles:[".form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg);margin-top:var(--space-lg)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--space-lg)}.delivery-section[_ngcontent-%COMP%]{background:var(--color-bg);padding:var(--space-lg);border-radius:var(--radius-lg);border:2px dashed var(--color-border);margin-top:var(--space-md)}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);font-size:1rem;font-weight:600;color:var(--color-text);margin-bottom:var(--space-lg)}.section-icon[_ngcontent-%COMP%]{font-size:1.25rem}.date-input[_ngcontent-%COMP%], .time-input[_ngcontent-%COMP%]{cursor:pointer}.textarea-input[_ngcontent-%COMP%]{font-family:inherit;font-size:.9375rem;padding:var(--space-sm) var(--space-md);border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-surface);color:var(--color-text);transition:all var(--transition-base);width:100%;resize:vertical;min-height:80px}.textarea-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f61a}.textarea-input[_ngcontent-%COMP%]::placeholder{color:var(--color-text-muted)}.customer-info-display[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f61a,#9333ea1a);border:2px solid var(--color-primary);border-radius:var(--radius-lg);padding:var(--space-lg);margin-bottom:var(--space-lg)}.info-header[_ngcontent-%COMP%]{font-weight:600;font-size:1rem;color:var(--color-primary);margin-bottom:var(--space-md);display:flex;align-items:center;gap:var(--space-sm)}.info-row[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm);padding:var(--space-xs) 0;font-size:.875rem}.info-label[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text-muted);min-width:120px}.info-value[_ngcontent-%COMP%]{color:var(--color-text);flex:1}.transaction-summary[_ngcontent-%COMP%]{background:var(--color-bg);border-radius:var(--radius-md);padding:var(--space-lg);margin-top:var(--space-md)}.summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--space-sm) 0;font-size:1.125rem}.summary-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text-muted)}.summary-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text);font-size:1.25rem}.change-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:var(--color-success)}.change-row.negative[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:var(--color-danger)}.delivery-info[_ngcontent-%COMP%]{border-top:1px solid var(--color-border);margin-top:var(--space-sm);padding-top:var(--space-md)}.delivery-info[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1rem;color:var(--color-primary)}.error-message[_ngcontent-%COMP%]{background:#fee;color:var(--color-danger);padding:var(--space-md);border-radius:var(--radius-md);font-size:.875rem;border:1px solid rgba(239,68,68,.2)}.btn-success[_ngcontent-%COMP%]{background:var(--color-success)}.btn-success[_ngcontent-%COMP%]:hover{background:#059669}@media (max-width: 640px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}.pending-deliveries[_ngcontent-%COMP%]{margin-top:var(--space-xl);border-top:4px solid var(--color-warning)}.pending-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md);margin-top:var(--space-lg)}.pending-item[_ngcontent-%COMP%]{background:var(--color-bg);border:1px solid var(--color-border);border-radius:var(--radius-md);padding:var(--space-md);display:flex;justify-content:space-between;align-items:center;gap:var(--space-md)}.pending-details[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:var(--space-xs)}.pending-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--space-xs)}.product-name[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text)}.sale-date[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted)}.pending-info[_ngcontent-%COMP%]{display:flex;gap:var(--space-lg);font-size:.875rem;color:var(--color-text-muted)}.delivery-info[_ngcontent-%COMP%]{margin-top:var(--space-xs);padding-top:var(--space-xs);border-top:1px dashed var(--color-border);font-size:.875rem;color:var(--color-primary);display:flex;flex-direction:column;gap:2px}.btn-deliver[_ngcontent-%COMP%]{background:var(--color-success);color:#fff;border:none;padding:var(--space-sm) var(--space-md);border-radius:var(--radius-md);font-weight:500;cursor:pointer;transition:all var(--transition-base);white-space:nowrap}.btn-deliver[_ngcontent-%COMP%]:hover{background:#059669;transform:translateY(-1px)}@media (max-width: 640px){.pending-item[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.btn-deliver[_ngcontent-%COMP%]{width:100%}}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.modal-content[_ngcontent-%COMP%]{background-color:var(--color-surface);padding:2rem;border-radius:12px;width:90%;max-width:500px;box-shadow:0 10px 25px #0003;animation:_ngcontent-%COMP%_slideIn .3s ease-out;color:var(--color-text)}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translateY(-20px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;border-bottom:1px solid var(--color-border);padding-bottom:1rem}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--color-text)}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:var(--color-text-muted)}.modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.modal-footer[_ngcontent-%COMP%]{margin-top:2rem;display:flex;justify-content:flex-end;gap:1rem;padding-top:1rem;border-top:1px solid var(--color-border)}.btn-cancel[_ngcontent-%COMP%]{padding:.5rem 1rem;border:1px solid var(--color-border);background-color:var(--color-surface);color:var(--color-text);border-radius:6px;cursor:pointer;font-weight:500;transition:background-color .2s}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:var(--color-bg)}.btn-save[_ngcontent-%COMP%]{padding:.5rem 1rem;background-color:#4caf50;color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:500}.btn-save[_ngcontent-%COMP%]:hover{background-color:#45a049}.pending-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;margin-left:1rem}.btn-edit[_ngcontent-%COMP%]{padding:.5rem 1rem;background-color:#2196f3;color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:500;transition:background-color .2s}.btn-edit[_ngcontent-%COMP%]:hover{background-color:#1976d2}.customer-details[_ngcontent-%COMP%]{margin-top:.75rem;padding:.75rem;background:linear-gradient(135deg,#8b5cf61a,#6366f11a);border-left:3px solid #8b5cf6;border-radius:6px}.customer-header[_ngcontent-%COMP%]{font-weight:600;color:#8b5cf6;margin-bottom:.5rem;font-size:.95rem}.customer-row[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-bottom:.25rem;font-size:.9rem}.customer-label[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text-muted);min-width:60px}.customer-value[_ngcontent-%COMP%]{color:var(--color-text);font-weight:400}.radio-group[_ngcontent-%COMP%]{display:flex;background:var(--color-bg);padding:4px;border-radius:8px;border:1px solid var(--color-border);gap:4px}.radio-label[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;padding:8px 12px;cursor:pointer;font-size:.9rem;font-weight:500;color:var(--color-text-muted);border-radius:6px;transition:all .2s ease;text-align:center;-webkit-user-select:none;user-select:none}.radio-label[_ngcontent-%COMP%]:hover{background:var(--color-surface);color:var(--color-text)}.radio-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.radio-label[_ngcontent-%COMP%]:has(input:checked){background:var(--color-primary);color:#fff;box-shadow:0 2px 4px #0000001a}.discount-value[_ngcontent-%COMP%]{color:var(--color-danger);font-weight:600}.total-row[_ngcontent-%COMP%]{border-top:1px solid var(--color-border);margin-top:var(--space-sm);padding-top:var(--space-md)}"]})}}return n})();function wO(n,e){if(n&1&&(f(0,"div",32)(1,"div",33),y(2),h(),f(3,"div",34),Ae(4,"div",35),h(),f(5,"div",36),y(6),h()()),n&2){let t=e.$implicit,r=A();v(2),H(t.category),v(2),vn("width",t.total/r.totalSalesValue*100,"%"),M("title","$"+t.total.toFixed(2)),v(2),nr("$",t.total.toFixed(2)," (",t.count,")")}}function CO(n,e){n&1&&(f(0,"div",37),y(1," No sales data yet "),h())}function EO(n,e){if(n&1&&(f(0,"div",50),Ae(1,"img",51),h()),n&2){let t=A().$implicit;v(),M("src",t.imageUrl,er)("alt",t.name)}}function IO(n,e){n&1&&(f(0,"div",52)(1,"span",53),y(2,"\u{1F4E6}"),h()())}function xO(n,e){if(n&1){let t=se();f(0,"div",40),$(1,EO,2,2,"div",41)(2,IO,3,0,"div",42),f(3,"div",43)(4,"div",44),y(5),h(),f(6,"div",45),y(7),h()(),f(8,"div",46)(9,"div",47),y(10),h(),f(11,"div",48),y(12),h(),f(13,"button",49),B("click",function(){let i=V(t).$implicit,o=A(2);return L(o.openEditModal(i))}),y(14," \u270F\uFE0F Edit "),h()()()}if(n&2){let t=e.$implicit;v(),M("ngIf",t.imageUrl),v(),M("ngIf",!t.imageUrl),v(3),H(t.name),v(2),H(t.category),v(3),Q("$",t.price.toFixed(2),""),v(2),Q("Stock: ",t.quantity,"")}}function DO(n,e){if(n&1&&(f(0,"div",38),$(1,xO,15,6,"div",39),h()),n&2){let t=A();v(),M("ngForOf",t.paginatedAvailableProducts)}}function SO(n,e){if(n&1&&(f(0,"option",59),y(1),h()),n&2){let t=e.$implicit;M("value",t),v(),H(t)}}function TO(n,e){if(n&1){let t=se();f(0,"button",64),B("click",function(){let i=V(t).$implicit,o=A(3);return L(o.goToAvailablePage(i))}),y(1),h()}if(n&2){let t=e.$implicit,r=A(3);be("active",t===r.availableProductsPage),v(),Q(" ",t," ")}}function MO(n,e){if(n&1){let t=se();f(0,"div",60)(1,"button",61),B("click",function(){V(t);let i=A(2);return L(i.prevAvailablePage())}),y(2," \u2190 Prev "),h(),f(3,"div",62),$(4,TO,2,3,"button",63),h(),f(5,"button",61),B("click",function(){V(t);let i=A(2);return L(i.nextAvailablePage())}),y(6," Next \u2192 "),h()()}if(n&2){let t=A(2);v(),M("disabled",t.availableProductsPage===1),v(3),M("ngForOf",t.getPageNumbers(t.availableProductsTotalPages)),v(),M("disabled",t.availableProductsPage===t.availableProductsTotalPages)}}function AO(n,e){if(n&1){let t=se();f(0,"div",54)(1,"div",55)(2,"label",56),y(3,"Show:"),h(),f(4,"select",57),Z("ngModelChange",function(i){V(t);let o=A();return ee(o.availableProductsPageSize,i)||(o.availableProductsPageSize=i),L(i)}),B("change",function(){V(t);let i=A();return L(i.onAvailablePageSizeChange())}),$(5,SO,2,2,"option",28),h(),f(6,"span"),y(7,"per page"),h()(),$(8,MO,7,3,"div",58),h()}if(n&2){let t=A();v(4),X("ngModel",t.availableProductsPageSize),v(),M("ngForOf",t.pageSizeOptions),v(3),M("ngIf",t.availableProductsTotalPages>1)}}function PO(n,e){n&1&&(f(0,"div",65)(1,"p"),y(2,"No available products"),h()())}function OO(n,e){if(n&1&&(f(0,"div",70)(1,"div",71)(2,"div",72),y(3),h(),f(4,"div",73),y(5),h(),f(6,"div",74),y(7," Pending Delivery "),h()(),f(8,"div",75)(9,"div",76),y(10),h(),f(11,"div",77),y(12),De(13,"date"),h()()()),n&2){let t=e.$implicit;v(3),H(t.productName),v(2),nr(" ",t.quantitySold," \xD7 $",t.price.toFixed(2)," "),v(5),Q("$",t.total.toFixed(2),""),v(2),H(Oe(13,5,t.timestamp,"medium"))}}function NO(n,e){if(n&1&&(f(0,"div",66)(1,"h3")(2,"span",5),y(3,"\u{1F69A}"),h(),y(4," Pending Deliveries "),f(5,"span",67),y(6),h()(),f(7,"div",68),$(8,OO,14,8,"div",69),h()()),n&2){let t=A();v(6),H(t.pendingSales.length),v(2),M("ngForOf",t.pendingSales)}}function RO(n,e){if(n&1&&(f(0,"option",59),y(1),h()),n&2){let t=e.$implicit;M("value",t),v(),H(t)}}function kO(n,e){if(n&1&&(f(0,"div",79),y(1),De(2,"date"),h()),n&2){let t=A().$implicit;v(),Q(" \u{1F69A} ",Oe(2,1,t.deliveryDate,"MMM d, y")," ")}}function FO(n,e){if(n&1&&(f(0,"div",70)(1,"div",71)(2,"div",72),y(3),h(),f(4,"div",73),y(5),h(),$(6,kO,3,4,"div",78),h(),f(7,"div",75)(8,"div",76),y(9),h(),f(10,"div",77),y(11),De(12,"date"),h()()()),n&2){let t=e.$implicit;v(3),H(t.productName),v(2),nr(" ",t.quantitySold," \xD7 $",t.price.toFixed(2)," "),v(),M("ngIf",t.deliveryDate),v(3),Q("$",t.total.toFixed(2),""),v(2),H(Oe(12,6,t.timestamp,"short"))}}function VO(n,e){if(n&1&&(f(0,"div",68),$(1,FO,13,9,"div",69),h()),n&2){let t=A();v(),M("ngForOf",t.paginatedSales)}}function LO(n,e){if(n&1&&(f(0,"option",59),y(1),h()),n&2){let t=e.$implicit;M("value",t),v(),H(t)}}function jO(n,e){if(n&1){let t=se();f(0,"button",64),B("click",function(){let i=V(t).$implicit,o=A(3);return L(o.goToSalesPage(i))}),y(1),h()}if(n&2){let t=e.$implicit,r=A(3);be("active",t===r.salesPage),v(),Q(" ",t," ")}}function BO(n,e){if(n&1){let t=se();f(0,"div",60)(1,"button",61),B("click",function(){V(t);let i=A(2);return L(i.prevSalesPage())}),y(2," \u2190 Prev "),h(),f(3,"div",62),$(4,jO,2,3,"button",63),h(),f(5,"button",61),B("click",function(){V(t);let i=A(2);return L(i.nextSalesPage())}),y(6," Next \u2192 "),h()()}if(n&2){let t=A(2);v(),M("disabled",t.salesPage===1),v(3),M("ngForOf",t.getPageNumbers(t.salesTotalPages)),v(),M("disabled",t.salesPage===t.salesTotalPages)}}function UO(n,e){if(n&1){let t=se();f(0,"div",54)(1,"div",55)(2,"label",80),y(3,"Show:"),h(),f(4,"select",81),Z("ngModelChange",function(i){V(t);let o=A();return ee(o.salesPageSize,i)||(o.salesPageSize=i),L(i)}),B("change",function(){V(t);let i=A();return L(i.onSalesPageSizeChange())}),$(5,LO,2,2,"option",28),h(),f(6,"span"),y(7,"per page"),h()(),$(8,BO,7,3,"div",58),h()}if(n&2){let t=A();v(4),X("ngModel",t.salesPageSize),v(),M("ngForOf",t.pageSizeOptions),v(3),M("ngIf",t.salesTotalPages>1)}}function $O(n,e){n&1&&(f(0,"div",65)(1,"p"),y(2,"No sales yet"),h()())}function zO(n,e){if(n&1&&(f(0,"div",50),Ae(1,"img",51),h()),n&2){let t=A().$implicit;v(),M("src",t.imageUrl,er)("alt",t.name)}}function HO(n,e){n&1&&(f(0,"div",52)(1,"span",53),y(2,"\u{1F4E6}"),h()())}function qO(n,e){if(n&1&&(f(0,"option",59),y(1),h()),n&2){let t=e.$implicit;M("value",t),v(),H(t)}}function GO(n,e){if(n&1){let t=se();f(0,"button",64),B("click",function(){let i=V(t).$implicit,o=A(5);return L(o.goToOutOfStockPage(i))}),y(1),h()}if(n&2){let t=e.$implicit,r=A(5);be("active",t===r.outOfStockPage),v(),Q(" ",t," ")}}function WO(n,e){if(n&1){let t=se();f(0,"div",60)(1,"button",61),B("click",function(){V(t);let i=A(4);return L(i.prevOutOfStockPage())}),y(2," \u2190 Prev "),h(),f(3,"div",62),$(4,GO,2,3,"button",63),h(),f(5,"button",61),B("click",function(){V(t);let i=A(4);return L(i.nextOutOfStockPage())}),y(6," Next \u2192 "),h()()}if(n&2){let t=A(4);v(),M("disabled",t.outOfStockPage===1),v(3),M("ngForOf",t.getPageNumbers(t.outOfStockTotalPages)),v(),M("disabled",t.outOfStockPage===t.outOfStockTotalPages)}}function KO(n,e){if(n&1){let t=se();f(0,"div",54)(1,"div",55)(2,"label",88),y(3,"Show:"),h(),f(4,"select",89),Z("ngModelChange",function(i){V(t);let o=A(3);return ee(o.outOfStockPageSize,i)||(o.outOfStockPageSize=i),L(i)}),B("change",function(){V(t);let i=A(3);return L(i.onOutOfStockPageSizeChange())}),$(5,qO,2,2,"option",28),h(),f(6,"span"),y(7,"per page"),h()(),$(8,WO,7,3,"div",58),h()}if(n&2){let t=A(3);v(4),X("ngModel",t.outOfStockPageSize),v(),M("ngForOf",t.pageSizeOptions),v(3),M("ngIf",t.outOfStockTotalPages>1)}}function QO(n,e){if(n&1){let t=se();f(0,"div",84),$(1,zO,2,2,"div",41)(2,HO,3,0,"div",42),f(3,"div",43)(4,"div",44),y(5),f(6,"div")(7,"div",45),y(8),h()(),f(9,"div",46)(10,"div",47),y(11),h(),f(12,"div",85),y(13,"Out of Stock"),h(),f(14,"div",86)(15,"button",87),B("click",function(){let i=V(t).$implicit,o=A(2);return L(o.onRestock(i))}),y(16," \u2795 Restock "),h()()()()(),$(17,KO,9,3,"div",22),h()}if(n&2){let t=e.$implicit,r=A(2);v(),M("ngIf",t.imageUrl),v(),M("ngIf",!t.imageUrl),v(3),Q(" ",t.name,""),v(3),H(t.category),v(3),Q("$",t.price.toFixed(2),""),v(6),M("ngIf",r.outOfStockTotalPages>1||r.outOfStockProducts.length>10)}}function YO(n,e){if(n&1&&(f(0,"div",82)(1,"h3")(2,"span",5),y(3,"\u26A0\uFE0F"),h(),y(4," Out of Stock "),f(5,"span",67),y(6),h()(),f(7,"div",38),$(8,QO,18,6,"div",83),h()()),n&2){let t=A();v(6),H(t.outOfStockProducts.length),v(2),M("ngForOf",t.paginatedOutOfStockProducts)}}function JO(n,e){if(n&1){let t=se();f(0,"div",90),B("click",function(){V(t);let i=A();return L(i.closeEditModal())}),f(1,"div",91),B("click",function(i){return V(t),L(i.stopPropagation())}),f(2,"div",92)(3,"h3"),y(4,"Edit Product"),h(),f(5,"button",93),B("click",function(){V(t);let i=A();return L(i.closeEditModal())}),y(6,"\xD7"),h()(),f(7,"div",94)(8,"div",95)(9,"label",96),y(10,"Product Name"),h(),f(11,"input",97),Z("ngModelChange",function(i){V(t);let o=A();return ee(o.editProductName,i)||(o.editProductName=i),L(i)}),h()(),f(12,"div",95)(13,"label",98),y(14,"Stock Quantity"),h(),f(15,"input",99),Z("ngModelChange",function(i){V(t);let o=A();return ee(o.editProductQuantity,i)||(o.editProductQuantity=i),L(i)}),h()(),f(16,"div",95)(17,"label",100),y(18,"Price"),h(),f(19,"input",101),Z("ngModelChange",function(i){V(t);let o=A();return ee(o.editProductPrice,i)||(o.editProductPrice=i),L(i)}),h()()(),f(20,"div",102)(21,"button",103),B("click",function(){V(t);let i=A();return L(i.closeEditModal())}),y(22,"Cancel"),h(),f(23,"button",104),B("click",function(){V(t);let i=A();return L(i.saveProductEdit())}),y(24,"Save Changes"),h()()()()}if(n&2){let t=A();v(11),X("ngModel",t.editProductName),v(4),X("ngModel",t.editProductQuantity),v(4),X("ngModel",t.editProductPrice)}}var yw=(()=>{class n{constructor(t){this.inventoryService=t,this.products=[],this.sales=[],this.selectedCategory="All",this.categories=["All","Lechon","Hollow blocks","Sand and Gravel","Copra","Others"],this.pageSizeOptions=[10,20,50,100],this.availableProductsPage=1,this.availableProductsPageSize=10,this.salesPage=1,this.salesPageSize=10,this.outOfStockPage=1,this.outOfStockPageSize=10,this.isEditModalOpen=!1,this.editingProduct=null,this.editProductName="",this.editProductQuantity=0,this.editProductPrice=0}ngOnInit(){this.inventoryService.getProducts().subscribe(t=>{this.products=t}),this.inventoryService.getSales().subscribe(t=>{this.sales=t})}get pendingSales(){return this.sales.filter(t=>t.pending===!0)}get filteredSales(){let t=this.sales.filter(r=>r.pending!==!0);return this.selectedCategory==="All"?t:t.filter(r=>r.category===this.selectedCategory)}get availableProducts(){return this.products.filter(t=>t.quantity>0)}get paginatedAvailableProducts(){let t=(this.availableProductsPage-1)*this.availableProductsPageSize,r=t+this.availableProductsPageSize;return this.availableProducts.slice(t,r)}get availableProductsTotalPages(){return Math.ceil(this.availableProducts.length/this.availableProductsPageSize)}get outOfStockProducts(){return this.products.filter(t=>t.quantity===0)}get paginatedOutOfStockProducts(){let t=(this.outOfStockPage-1)*this.outOfStockPageSize,r=t+this.outOfStockPageSize;return this.outOfStockProducts.slice(t,r)}get outOfStockTotalPages(){return Math.ceil(this.outOfStockProducts.length/this.outOfStockPageSize)}get paginatedSales(){let t=(this.salesPage-1)*this.salesPageSize,r=t+this.salesPageSize;return this.filteredSales.slice(t,r)}get salesTotalPages(){return Math.ceil(this.filteredSales.length/this.salesPageSize)}get salesByCategory(){let t=new Map;return this.sales.forEach(r=>{let i=t.get(r.category)||{total:0,count:0};t.set(r.category,{total:i.total+r.total,count:i.count+1})}),Array.from(t.entries()).map(([r,i])=>({category:r,total:i.total,count:i.count}))}get totalInventoryValue(){return this.products.reduce((t,r)=>t+r.price*r.quantity,0)}get totalSalesValue(){return this.sales.reduce((t,r)=>t+r.total,0)}nextAvailablePage(){this.availableProductsPage<this.availableProductsTotalPages&&this.availableProductsPage++}prevAvailablePage(){this.availableProductsPage>1&&this.availableProductsPage--}goToAvailablePage(t){t>=1&&t<=this.availableProductsTotalPages&&(this.availableProductsPage=t)}nextSalesPage(){this.salesPage<this.salesTotalPages&&this.salesPage++}prevSalesPage(){this.salesPage>1&&this.salesPage--}goToSalesPage(t){t>=1&&t<=this.salesTotalPages&&(this.salesPage=t)}nextOutOfStockPage(){this.outOfStockPage<this.outOfStockTotalPages&&this.outOfStockPage++}prevOutOfStockPage(){this.outOfStockPage>1&&this.outOfStockPage--}goToOutOfStockPage(t){this.outOfStockPage=t}onAvailablePageSizeChange(){this.availableProductsPage=1}onSalesPageSizeChange(){this.salesPage=1}onOutOfStockPageSizeChange(){this.outOfStockPage=1}getPageNumbers(t){return Array.from({length:t},(r,i)=>i+1)}onRestock(t){let r=prompt(`Enter quantity to add for ${t.name}:`);if(r){let i=parseInt(r,10);!isNaN(i)&&i>0?this.inventoryService.restockProduct(t.id,i):alert("Please enter a valid number greater than 0")}}openEditModal(t){this.editingProduct=t,this.editProductName=t.name,this.editProductQuantity=t.quantity,this.editProductPrice=t.price,this.isEditModalOpen=!0}closeEditModal(){this.isEditModalOpen=!1,this.editingProduct=null,this.editProductName="",this.editProductQuantity=0,this.editProductPrice=0}saveProductEdit(){if(!this.editingProduct)return;if(!this.editProductName.trim()){alert("Product name cannot be empty");return}if(this.editProductQuantity<0){alert("Quantity cannot be negative");return}if(this.editProductPrice<0){alert("Price cannot be negative");return}let t=ue(J({},this.editingProduct),{name:this.editProductName,quantity:this.editProductQuantity,price:this.editProductPrice});this.inventoryService.updateProduct(t),this.closeEditModal()}static{this.\u0275fac=function(r){return new(r||n)(W(cn))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-inventory-list"]],standalone:!0,features:[ze],decls:63,vars:17,consts:[["noAvailable",""],["noSales",""],[1,"inventory-section"],[1,"inventory-content"],[1,"card","analytics-card"],[1,"icon"],[1,"analytics-grid"],[1,"chart-container"],[1,"bar-chart"],["class","bar-item",4,"ngFor","ngForOf"],["class","empty-chart",4,"ngIf"],[1,"stats-grid"],[1,"stat-card"],[1,"stat-icon"],[1,"stat-info"],[1,"stat-label"],[1,"stat-value"],[1,"stat-card","success"],[1,"lists-container"],[1,"card"],[1,"badge"],["class","product-list",4,"ngIf","ngIfElse"],["class","pagination",4,"ngIf"],["class","card pending-section",4,"ngIf"],[1,"section-header"],[1,"filter-group"],["for","categoryFilter"],["id","categoryFilter",1,"category-filter",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","sales-list",4,"ngIf","ngIfElse"],["class","card out-of-stock-section",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"bar-item"],[1,"bar-label"],[1,"bar-wrapper"],[1,"bar-fill",3,"title"],[1,"bar-value"],[1,"empty-chart"],[1,"product-list"],["class","product-item",4,"ngFor","ngForOf"],[1,"product-item"],["class","product-image-wrapper",4,"ngIf"],["class","product-image-wrapper placeholder",4,"ngIf"],[1,"product-info"],[1,"product-name"],[1,"product-category"],[1,"product-details"],[1,"product-price"],[1,"product-stock"],[1,"btn-edit-sm",3,"click"],[1,"product-image-wrapper"],["loading","lazy",1,"product-image",3,"src","alt"],[1,"product-image-wrapper","placeholder"],[1,"placeholder-icon"],[1,"pagination"],[1,"pagination-size"],["for","availablePageSize"],["id","availablePageSize",1,"page-size-select",3,"ngModelChange","change","ngModel"],["class","pagination-controls",4,"ngIf"],[3,"value"],[1,"pagination-controls"],[1,"pagination-btn",3,"click","disabled"],[1,"pagination-pages"],["class","pagination-page",3,"active","click",4,"ngFor","ngForOf"],[1,"pagination-page",3,"click"],[1,"empty-state"],[1,"card","pending-section"],[1,"badge","warning"],[1,"sales-list"],["class","sale-item",4,"ngFor","ngForOf"],[1,"sale-item"],[1,"sale-info"],[1,"sale-name"],[1,"sale-details-text"],[1,"delivery-badge","warning"],[1,"sale-amount"],[1,"sale-total"],[1,"sale-date"],["class","delivery-badge",4,"ngIf"],[1,"delivery-badge"],["for","salesPageSize"],["id","salesPageSize",1,"page-size-select",3,"ngModelChange","change","ngModel"],[1,"card","out-of-stock-section"],["class","product-item dimmed",4,"ngFor","ngForOf"],[1,"product-item","dimmed"],[1,"product-stock","out"],[1,"product-actions"],[1,"btn-restock",3,"click"],["for","outOfStockPageSize"],["id","outOfStockPageSize",1,"page-size-select",3,"ngModelChange","change","ngModel"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"form-group"],["for","editName"],["type","text","id","editName",1,"text-input",3,"ngModelChange","ngModel"],["for","editQuantity"],["type","number","id","editQuantity","min","0",1,"number-input",3,"ngModelChange","ngModel"],["for","editPrice"],["type","number","id","editPrice","min","0","step","0.01",1,"number-input",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn-cancel",3,"click"],[1,"btn-save",3,"click"]],template:function(r,i){if(r&1){let o=se();f(0,"div",2)(1,"div",3)(2,"div",4)(3,"h3")(4,"span",5),y(5,"\u{1F4C8}"),h(),y(6," Sales Analytics "),h(),f(7,"div",6)(8,"div",7)(9,"h4"),y(10,"Sales by Category"),h(),f(11,"div",8),$(12,wO,7,6,"div",9)(13,CO,2,0,"div",10),h()()()(),f(14,"div",11)(15,"div",12)(16,"div",13),y(17,"\u{1F4B0}"),h(),f(18,"div",14)(19,"div",15),y(20,"Total Inventory Value"),h(),f(21,"div",16),y(22),h()()(),f(23,"div",17)(24,"div",13),y(25,"\u{1F4CA}"),h(),f(26,"div",14)(27,"div",15),y(28,"Total Sales"),h(),f(29,"div",16),y(30),h()()()(),f(31,"div",18)(32,"div",19)(33,"h3")(34,"span",5),y(35,"\u{1F4E6}"),h(),y(36," Available Inventory "),f(37,"span",20),y(38),h()(),$(39,DO,2,1,"div",21)(40,AO,9,3,"div",22)(41,PO,3,0,"ng-template",null,0,rr),h(),$(43,NO,9,2,"div",23),f(44,"div",19)(45,"div",24)(46,"h3")(47,"span",5),y(48,"\u{1F4B0}"),h(),y(49," Sales History "),f(50,"span",20),y(51),h()(),f(52,"div",25)(53,"label",26),y(54,"Filter by Category:"),h(),f(55,"select",27),Z("ngModelChange",function(c){return V(o),ee(i.selectedCategory,c)||(i.selectedCategory=c),L(c)}),B("change",function(){return V(o),L(i.salesPage=1)}),$(56,RO,2,2,"option",28),h()()(),$(57,VO,2,1,"div",29)(58,UO,9,3,"div",22)(59,$O,3,0,"ng-template",null,1,rr),h(),$(61,YO,9,2,"div",30)(62,JO,25,3,"div",31),h()()()}if(r&2){let o=tr(42),s=tr(60);v(12),M("ngForOf",i.salesByCategory),v(),M("ngIf",i.salesByCategory.length===0),v(9),Q("$",i.totalInventoryValue.toFixed(2),""),v(8),Q("$",i.totalSalesValue.toFixed(2),""),v(8),H(i.availableProducts.length),v(),M("ngIf",i.availableProducts.length>0)("ngIfElse",o),v(),M("ngIf",i.availableProductsTotalPages>1||i.availableProducts.length>10),v(3),M("ngIf",i.pendingSales.length>0),v(8),H(i.filteredSales.length),v(4),X("ngModel",i.selectedCategory),v(),M("ngForOf",i.categories),v(),M("ngIf",i.sales.length>0)("ngIfElse",s),v(),M("ngIf",i.salesTotalPages>1||i.filteredSales.length>10),v(3),M("ngIf",i.outOfStockProducts.length>0),v(),M("ngIf",i.isEditModalOpen)}},dependencies:[Ue,ut,Ze,Fn,ft,Vn,Ln,dt,cr,sn,ht,lr,at],styles:[".inventory-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xl)}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:var(--space-lg);margin-bottom:var(--space-2xl)}.analytics-card[_ngcontent-%COMP%]{margin-bottom:var(--space-2xl)}.analytics-grid[_ngcontent-%COMP%]{margin-top:var(--space-lg)}.chart-container[_ngcontent-%COMP%]{background:var(--color-bg);padding:var(--space-lg);border-radius:var(--radius-md)}.chart-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 var(--space-lg) 0;color:var(--color-text);font-size:1rem}.bar-chart[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md)}.bar-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:80px 1fr 120px;gap:var(--space-sm);align-items:center}.bar-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.bar-wrapper[_ngcontent-%COMP%]{height:24px;background:var(--color-surface);border-radius:var(--radius-md);overflow:hidden;border:1px solid var(--color-border)}.bar-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,var(--color-primary),var(--color-success));transition:width .3s ease;min-width:2%}.bar-value[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:var(--color-text);text-align:right}.empty-chart[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl);color:var(--color-text-muted);font-style:italic}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:var(--space-md);margin-bottom:var(--space-lg)}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.filter-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm)}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.category-filter[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-surface);color:var(--color-text);font-size:.875rem;cursor:pointer;transition:all var(--transition-base)}.category-filter[_ngcontent-%COMP%]:hover{border-color:var(--color-primary)}.category-filter[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f61a}.stat-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-primary),var(--color-primary-dark));color:#fff;padding:var(--space-xl);border-radius:var(--radius-lg);box-shadow:var(--shadow-lg);display:flex;align-items:center;gap:var(--space-lg)}.stat-card.success[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-success),#059669)}.stat-icon[_ngcontent-%COMP%]{font-size:2.5rem}.stat-info[_ngcontent-%COMP%]{flex:1}.stat-label[_ngcontent-%COMP%]{font-size:.875rem;opacity:.9;margin-bottom:var(--space-sm)}.stat-value[_ngcontent-%COMP%]{font-size:2rem;font-weight:700}.lists-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(500px,1fr));gap:var(--space-xl)}h3[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);margin-bottom:var(--space-lg)}.icon[_ngcontent-%COMP%]{font-size:1.5rem}.badge[_ngcontent-%COMP%]{margin-left:auto;background:var(--color-bg);color:var(--color-primary);padding:var(--space-xs) var(--space-md);border-radius:var(--radius-xl);font-size:.875rem;font-weight:600}.badge.warning[_ngcontent-%COMP%]{background:#fef3c7;color:var(--color-warning)}.product-list[_ngcontent-%COMP%], .sales-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md)}.product-item[_ngcontent-%COMP%], .sale-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:var(--space-md);padding:var(--space-md);background:var(--color-bg);border-radius:var(--radius-md);transition:all var(--transition-base)}.product-image-wrapper[_ngcontent-%COMP%]{flex-shrink:0;width:60px;height:60px;border-radius:var(--radius-md);overflow:hidden;background:var(--color-surface);border:1px solid var(--color-border);display:flex;align-items:center;justify-content:center}.product-image-wrapper.placeholder[_ngcontent-%COMP%]{background:var(--color-bg)}.product-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.placeholder-icon[_ngcontent-%COMP%]{font-size:1.5rem;opacity:.5}.product-item[_ngcontent-%COMP%]:hover, .sale-item[_ngcontent-%COMP%]:hover{background:#e0e7ff;transform:translate(4px)}.product-item.dimmed[_ngcontent-%COMP%]{opacity:.5}.product-info[_ngcontent-%COMP%], .sale-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xs);flex:1;align-self:flex-start;padding-top:4px}.product-name[_ngcontent-%COMP%], .sale-name[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text)}.product-category[_ngcontent-%COMP%], .sale-details-text[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-muted)}.delivery-badge[_ngcontent-%COMP%]{display:inline-block;margin-top:var(--space-xs);padding:var(--space-xs) var(--space-sm);background:#10b9811a;color:var(--color-success);border-radius:var(--radius-sm);font-size:.75rem;font-weight:500}.product-details[_ngcontent-%COMP%], .sale-amount[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:var(--space-xs)}.product-price[_ngcontent-%COMP%], .sale-total[_ngcontent-%COMP%]{font-weight:600;font-size:1.125rem;color:var(--color-primary)}.product-stock[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-success);font-weight:500}.product-stock.out[_ngcontent-%COMP%]{color:var(--color-danger)}.sale-date[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl);color:var(--color-text-muted)}.out-of-stock-section[_ngcontent-%COMP%]{border:2px solid rgba(239,68,68,.2)}.pagination[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md);margin-top:var(--space-lg);padding-top:var(--space-lg);border-top:1px solid var(--color-border)}.pagination-size[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);font-size:.875rem;color:var(--color-text)}.pagination-size[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500}.page-size-select[_ngcontent-%COMP%]{padding:var(--space-xs) var(--space-sm);border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-surface);color:var(--color-text);font-size:.875rem;cursor:pointer;transition:all var(--transition-base)}.page-size-select[_ngcontent-%COMP%]:hover{border-color:var(--color-primary)}.page-size-select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f61a}.pagination-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:var(--space-sm)}.pagination-btn[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);background:var(--color-surface);border:1px solid var(--color-border);color:var(--color-text);border-radius:var(--radius-md);font-size:.875rem;font-weight:500;cursor:pointer;transition:all var(--transition-base)}.pagination-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--color-primary);color:#fff;border-color:var(--color-primary);transform:translateY(-1px)}.pagination-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed;transform:none}.pagination-pages[_ngcontent-%COMP%]{display:flex;gap:var(--space-xs);flex-wrap:wrap;justify-content:center}.pagination-page[_ngcontent-%COMP%]{min-width:36px;height:36px;padding:var(--space-xs) var(--space-sm);background:var(--color-surface);border:1px solid var(--color-border);color:var(--color-text);border-radius:var(--radius-md);font-size:.875rem;font-weight:500;cursor:pointer;transition:all var(--transition-base);display:flex;align-items:center;justify-content:center}.pagination-page[_ngcontent-%COMP%]:hover{background:var(--color-bg);border-color:var(--color-primary);transform:translateY(-1px)}.pagination-page.active[_ngcontent-%COMP%]{background:var(--color-primary);color:#fff;border-color:var(--color-primary)}@media (max-width: 768px){.lists-container[_ngcontent-%COMP%]{grid-template-columns:1fr}.pagination[_ngcontent-%COMP%]{flex-wrap:wrap}.pagination-pages[_ngcontent-%COMP%]{order:3;width:100%;margin-top:var(--space-sm)}h3[_ngcontent-%COMP%]{font-size:1.25rem}.product-name[_ngcontent-%COMP%], .sale-name[_ngcontent-%COMP%]{font-size:.95rem}.product-category[_ngcontent-%COMP%], .sale-details-text[_ngcontent-%COMP%]{font-size:.8rem}.product-price[_ngcontent-%COMP%], .sale-total[_ngcontent-%COMP%]{font-size:1rem}.product-stock[_ngcontent-%COMP%], .sale-date[_ngcontent-%COMP%]{font-size:.75rem}.stat-value[_ngcontent-%COMP%]{font-size:1.5rem}.stat-label[_ngcontent-%COMP%]{font-size:.8rem}}.btn-restock[_ngcontent-%COMP%]{margin-top:var(--space-xs);padding:var(--space-xs) var(--space-sm);background:var(--color-primary-light);color:#fff;border:none;border-radius:var(--radius-sm);font-size:.75rem;font-weight:500;cursor:pointer;transition:all var(--transition-base)}.btn-restock[_ngcontent-%COMP%]:hover{background:var(--color-primary);transform:translateY(-1px)}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.modal-content[_ngcontent-%COMP%]{background-color:var(--color-surface);padding:2rem;border-radius:12px;width:90%;max-width:500px;box-shadow:0 10px 25px #0003;animation:_ngcontent-%COMP%_slideIn .3s ease-out;color:var(--color-text)}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translateY(-20px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;border-bottom:1px solid var(--color-border);padding-bottom:1rem}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--color-text)}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:var(--color-text-muted)}.modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.modal-footer[_ngcontent-%COMP%]{margin-top:2rem;display:flex;justify-content:flex-end;gap:1rem;padding-top:1rem;border-top:1px solid var(--color-border)}.btn-cancel[_ngcontent-%COMP%]{padding:.5rem 1rem;border:1px solid var(--color-border);background-color:var(--color-surface);color:var(--color-text);border-radius:6px;cursor:pointer;font-weight:500;transition:background-color .2s}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:var(--color-bg)}.btn-save[_ngcontent-%COMP%]{padding:.5rem 1rem;background-color:#4caf50;color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:500}.btn-save[_ngcontent-%COMP%]:hover{background-color:#45a049}.btn-edit-sm[_ngcontent-%COMP%]{padding:.25rem .5rem;background-color:transparent;color:var(--color-primary);border:1px solid var(--color-primary);border-radius:4px;cursor:pointer;font-size:.75rem;font-weight:500;transition:all .2s;margin-left:.5rem}.btn-edit-sm[_ngcontent-%COMP%]:hover{background-color:var(--color-primary);color:#fff}.product-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-top:.5rem}"]})}}return n})();function XO(n,e){if(n&1){let t=se();f(0,"button",17),B("click",function(){V(t);let i=A();return L(i.cancelEdit())}),y(1," Cancel "),h()}}function ZO(n,e){if(n&1){let t=se();f(0,"div",20)(1,"div",21)(2,"div",22),y(3),h(),f(4,"div",23)(5,"div",24)(6,"span",25),y(7,"\u{1F4DE}"),h(),f(8,"span"),y(9),h()(),f(10,"div",24)(11,"span",25),y(12,"\u{1F4CD}"),h(),f(13,"span"),y(14),h()()()(),f(15,"div",26)(16,"button",27),B("click",function(){let i=V(t).$implicit,o=A(2);return L(o.editCustomer(i))}),y(17," \u270F\uFE0F "),h(),f(18,"button",28),B("click",function(){let i=V(t).$implicit,o=A(2);return L(o.deleteCustomer(i.id))}),y(19," \u{1F5D1}\uFE0F "),h()()()}if(n&2){let t=e.$implicit,r=A(2);be("editing",t.id===r.editingId),v(3),H(t.name),v(6),H(t.phoneNumber),v(5),H(t.deliveryAddress),v(2),M("disabled",!!r.editingId&&r.editingId!==t.id),v(2),M("disabled",!!r.editingId)}}function eN(n,e){if(n&1&&(f(0,"div",18),$(1,ZO,20,7,"div",19),h()),n&2){let t=A();v(),M("ngForOf",t.customers)}}function tN(n,e){n&1&&(f(0,"div",29)(1,"p"),y(2,"No customers registered yet"),h()())}var vw=(()=>{class n{constructor(t){this.customerService=t,this.customers=[],this.editingId=null,this.customer={name:"",phoneNumber:"",deliveryAddress:""}}ngOnInit(){this.customerService.getCustomers().subscribe(t=>{this.customers=t})}onSubmit(){this.isValid()&&(this.editingId?(this.customerService.updateCustomer(this.editingId,{name:this.customer.name,phoneNumber:this.customer.phoneNumber,deliveryAddress:this.customer.deliveryAddress}),this.editingId=null):this.customerService.addCustomer({name:this.customer.name,phoneNumber:this.customer.phoneNumber,deliveryAddress:this.customer.deliveryAddress}),this.resetForm())}editCustomer(t){this.editingId=t.id,this.customer={name:t.name,phoneNumber:t.phoneNumber||"",deliveryAddress:t.deliveryAddress||""}}cancelEdit(){this.editingId=null,this.resetForm()}resetForm(){this.customer={name:"",phoneNumber:"",deliveryAddress:""}}deleteCustomer(t){confirm("Are you sure you want to delete this customer?")&&(this.customerService.deleteCustomer(t),this.editingId===t&&this.cancelEdit())}isValid(){return!!(this.customer.name&&this.customer.phoneNumber&&this.customer.deliveryAddress)}static{this.\u0275fac=function(r){return new(r||n)(W(go))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-customer-form"]],standalone:!0,features:[ze],decls:33,vars:11,consts:[["noCustomers",""],[1,"customer-container"],[1,"card"],[1,"form",3,"ngSubmit"],[1,"form-group"],["for","customerName"],["type","text","id","customerName","name","name","placeholder","Enter customer name","required","",3,"ngModelChange","ngModel"],["for","phoneNumber"],["type","tel","id","phoneNumber","name","phoneNumber","placeholder","e.g., +1 234 567 8900","required","",3,"ngModelChange","ngModel"],["for","deliveryAddress"],["id","deliveryAddress","name","deliveryAddress","placeholder","Enter full delivery address","rows","3","required","",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","button","class","btn-secondary",3,"click",4,"ngIf"],["type","submit",1,"btn-primary",3,"disabled"],[1,"icon"],[1,"badge"],["class","customer-list",4,"ngIf","ngIfElse"],["type","button",1,"btn-secondary",3,"click"],[1,"customer-list"],["class","customer-item",3,"editing",4,"ngFor","ngForOf"],[1,"customer-item"],[1,"customer-info"],[1,"customer-name"],[1,"customer-details"],[1,"detail-row"],[1,"detail-icon"],[1,"customer-actions"],[1,"btn-edit",3,"click","disabled"],[1,"btn-delete",3,"click","disabled"],[1,"empty-state"]],template:function(r,i){if(r&1){let o=se();f(0,"div",1)(1,"div",2)(2,"h3"),y(3),h(),f(4,"form",3),B("ngSubmit",function(){return V(o),L(i.onSubmit())}),f(5,"div",4)(6,"label",5),y(7,"Customer Name *"),h(),f(8,"input",6),Z("ngModelChange",function(c){return V(o),ee(i.customer.name,c)||(i.customer.name=c),L(c)}),h()(),f(9,"div",4)(10,"label",7),y(11,"Phone Number *"),h(),f(12,"input",8),Z("ngModelChange",function(c){return V(o),ee(i.customer.phoneNumber,c)||(i.customer.phoneNumber=c),L(c)}),h()(),f(13,"div",4)(14,"label",9),y(15,"Delivery Address *"),h(),f(16,"textarea",10),Z("ngModelChange",function(c){return V(o),ee(i.customer.deliveryAddress,c)||(i.customer.deliveryAddress=c),L(c)}),h()(),f(17,"div",11),$(18,XO,2,0,"button",12),f(19,"button",13)(20,"span"),y(21),h(),y(22),h()()()(),f(23,"div",2)(24,"h3")(25,"span",14),y(26,"\u{1F465}"),h(),y(27," Registered Customers "),f(28,"span",15),y(29),h()(),$(30,eN,2,1,"div",16)(31,tN,3,0,"ng-template",null,0,rr),h()()}if(r&2){let o=tr(32);v(3),H(i.editingId?"Edit Customer":"Register New Customer"),v(5),X("ngModel",i.customer.name),v(4),X("ngModel",i.customer.phoneNumber),v(4),X("ngModel",i.customer.deliveryAddress),v(2),M("ngIf",i.editingId),v(),M("disabled",!i.isValid()),v(2),H(i.editingId?"\u{1F4BE}":"\u{1F464}"),v(),Q(" ",i.editingId?"Update Customer":"Add Customer"," "),v(7),H(i.customers.length),v(),M("ngIf",i.customers.length>0)("ngIfElse",o)}},dependencies:[Ue,ut,Ze,ft,on,dt,ht,rn,qt,at,Ht],styles:[".customer-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-2xl)}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg);margin-top:var(--space-lg)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font-family:inherit;font-size:.9375rem;padding:var(--space-sm) var(--space-md);border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-surface);color:var(--color-text);transition:all var(--transition-base);width:100%;resize:vertical}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f61a}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--space-lg)}.icon[_ngcontent-%COMP%]{font-size:1.5rem}.badge[_ngcontent-%COMP%]{margin-left:auto;background:var(--color-bg);color:var(--color-primary);padding:var(--space-xs) var(--space-md);border-radius:var(--radius-xl);font-size:.875rem;font-weight:600}.customer-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md);margin-top:var(--space-lg)}.customer-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:var(--space-md);padding:var(--space-lg);background:var(--color-bg);border-radius:var(--radius-md);border:1px solid var(--color-border);transition:all var(--transition-base)}.customer-item[_ngcontent-%COMP%]:hover{background:#e0e7ff;transform:translate(4px)}.customer-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:var(--space-sm)}.customer-name[_ngcontent-%COMP%]{font-weight:600;font-size:1.125rem;color:var(--color-text)}.customer-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xs)}.detail-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);font-size:.875rem;color:var(--color-text-muted)}.detail-icon[_ngcontent-%COMP%]{font-size:1rem}.customer-actions[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm)}.btn-delete[_ngcontent-%COMP%]{padding:var(--space-sm);background:transparent;border:1px solid var(--color-border);color:var(--color-danger);border-radius:var(--radius-md);font-size:1.25rem;cursor:pointer;transition:all var(--transition-base);width:40px;height:40px;display:flex;align-items:center;justify-content:center}.btn-delete[_ngcontent-%COMP%]:hover{background:var(--color-danger);border-color:var(--color-danger);transform:scale(1.1)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl);color:var(--color-text-muted)}@media (max-width: 640px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}.form-actions[_ngcontent-%COMP%]{display:flex;gap:var(--space-md);justify-content:flex-end}.btn-secondary[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-xl);background:transparent;border:1px solid var(--color-border);color:var(--color-text);border-radius:var(--radius-md);font-weight:600;cursor:pointer;transition:all var(--transition-base)}.btn-secondary[_ngcontent-%COMP%]:hover{background:var(--color-bg);border-color:var(--color-text)}.btn-edit[_ngcontent-%COMP%]{padding:var(--space-sm);background:transparent;border:1px solid var(--color-border);color:var(--color-primary);border-radius:var(--radius-md);font-size:1.25rem;cursor:pointer;transition:all var(--transition-base);width:40px;height:40px;display:flex;align-items:center;justify-content:center}.btn-edit[_ngcontent-%COMP%]:hover{background:var(--color-primary);color:#fff;border-color:var(--color-primary);transform:scale(1.1)}.btn-edit[_ngcontent-%COMP%]:disabled, .btn-delete[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;transform:none}.customer-item.editing[_ngcontent-%COMP%]{border-color:var(--color-primary);background:var(--color-surface);box-shadow:0 0 0 2px #3b82f61a}"]})}}return n})();function nN(n,e){if(n&1&&(f(0,"div",26),y(1),h()),n&2){let t=A().$implicit;v(),H(t.notes)}}function rN(n,e){if(n&1&&(f(0,"div",19)(1,"div",20)(2,"div",21),y(3),h(),$(4,nN,2,1,"div",22),f(5,"div",23),y(6),De(7,"date"),h()(),f(8,"div",24)(9,"div",25),y(10),h()()()),n&2){let t=e.$implicit;v(3),H(t.productName),v(),M("ngIf",t.notes),v(2),H(Oe(7,4,t.timestamp,"medium")),v(4),Q("$",t.price.toFixed(2),"")}}function iN(n,e){if(n&1&&(f(0,"div",17),$(1,rN,11,7,"div",18),h()),n&2){let t=A();v(),M("ngForOf",t.expenses)}}function oN(n,e){n&1&&(f(0,"div",27)(1,"p"),y(2,"No expenses recorded yet"),h()())}var _w=(()=>{class n{constructor(t){this.inventoryService=t,this.expenses=[],this.productName="",this.price=null,this.notes=""}ngOnInit(){this.inventoryService.getExpenses().subscribe(t=>{this.expenses=t})}get totalExpenses(){return this.expenses.reduce((t,r)=>t+r.price,0)}addExpense(){this.productName&&this.price&&this.price>0&&(this.inventoryService.addExpense({productName:this.productName,price:this.price,notes:this.notes}),this.productName="",this.price=null,this.notes="")}static{this.\u0275fac=function(r){return new(r||n)(W(cn))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-expenses"]],standalone:!0,features:[ze],decls:36,vars:8,consts:[["noExpenses",""],[1,"expenses-section"],[1,"card"],[1,"icon"],[1,"form",3,"ngSubmit"],[1,"form-group"],["for","productName"],["type","text","id","productName","name","productName","placeholder","e.g., Raw materials, Utilities, etc.","required","",3,"ngModelChange","ngModel"],["for","price"],["type","number","id","price","name","price","min","0","step","0.01","placeholder","0.00","required","",3,"ngModelChange","ngModel"],["for","notes"],["id","notes","name","notes","placeholder","Additional details about this expense...","rows","3",3,"ngModelChange","ngModel"],["type","submit",1,"btn-primary",3,"disabled"],[1,"section-header"],[1,"badge"],[1,"total-badge"],["class","expenses-list",4,"ngIf","ngIfElse"],[1,"expenses-list"],["class","expense-item",4,"ngFor","ngForOf"],[1,"expense-item"],[1,"expense-info"],[1,"expense-name"],["class","expense-notes",4,"ngIf"],[1,"expense-date"],[1,"expense-amount"],[1,"expense-price"],[1,"expense-notes"],[1,"empty-state"]],template:function(r,i){if(r&1){let o=se();f(0,"div",1)(1,"div",2)(2,"h3")(3,"span",3),y(4,"\u{1F4B8}"),h(),y(5," Add Expense "),h(),f(6,"form",4),B("ngSubmit",function(){return V(o),L(i.addExpense())}),f(7,"div",5)(8,"label",6),y(9,"Product/Item Name"),h(),f(10,"input",7),Z("ngModelChange",function(c){return V(o),ee(i.productName,c)||(i.productName=c),L(c)}),h()(),f(11,"div",5)(12,"label",8),y(13,"Price/Amount"),h(),f(14,"input",9),Z("ngModelChange",function(c){return V(o),ee(i.price,c)||(i.price=c),L(c)}),h()(),f(15,"div",5)(16,"label",10),y(17,"Notes (Optional)"),h(),f(18,"textarea",11),Z("ngModelChange",function(c){return V(o),ee(i.notes,c)||(i.notes=c),L(c)}),h()(),f(19,"button",12)(20,"span"),y(21,"\u2795"),h(),y(22," Add Expense "),h()()(),f(23,"div",2)(24,"div",13)(25,"h3")(26,"span",3),y(27,"\u{1F4CB}"),h(),y(28," Expense History "),f(29,"span",14),y(30),h()(),f(31,"div",15),y(32),h()(),$(33,iN,2,1,"div",16)(34,oN,3,0,"ng-template",null,0,rr),h()()}if(r&2){let o=tr(35);v(10),X("ngModel",i.productName),v(4),X("ngModel",i.price),v(4),X("ngModel",i.notes),v(),M("disabled",!i.productName||!i.price||i.price<=0),v(11),H(i.expenses.length),v(2),Q(" Total: $",i.totalExpenses.toFixed(2)," "),v(),M("ngIf",i.expenses.length>0)("ngIfElse",o)}},dependencies:[Ue,ut,Ze,Fn,ft,on,dt,cr,ht,rn,qt,lr,at,Ht],styles:[".expenses-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xl)}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg);margin-top:var(--space-lg)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font-family:inherit;font-size:.9375rem;padding:var(--space-sm) var(--space-md);border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-surface);color:var(--color-text);transition:all var(--transition-base);width:100%;resize:vertical;min-height:80px}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f61a}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:var(--space-md);margin-bottom:var(--space-lg)}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;display:flex;align-items:center;gap:var(--space-sm)}.icon[_ngcontent-%COMP%]{font-size:1.5rem}.badge[_ngcontent-%COMP%]{margin-left:auto;background:var(--color-bg);color:var(--color-primary);padding:var(--space-xs) var(--space-md);border-radius:var(--radius-xl);font-size:.875rem;font-weight:600}.total-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-success),#059669);color:#fff;padding:var(--space-sm) var(--space-lg);border-radius:var(--radius-lg);font-size:1.125rem;font-weight:700;box-shadow:var(--shadow-md)}.expenses-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md)}.expense-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:var(--space-md);padding:var(--space-md);background:var(--color-bg);border-radius:var(--radius-md);transition:all var(--transition-base);border:1px solid var(--color-border)}.expense-item[_ngcontent-%COMP%]:hover{background:#fee;transform:translate(4px);border-color:var(--color-danger)}.expense-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xs);flex:1}.expense-name[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text)}.expense-notes[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-muted);font-style:italic}.expense-date[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted)}.expense-amount[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:var(--space-xs)}.expense-price[_ngcontent-%COMP%]{font-weight:600;font-size:1.125rem;color:var(--color-danger)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl);color:var(--color-text-muted)}@media (max-width: 640px){.section-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.total-badge[_ngcontent-%COMP%]{width:100%;text-align:center}}"]})}}return n})();var bw=(()=>{class n{constructor(t){this.inventoryService=t,this.sales=[],this.expenses=[]}ngOnInit(){this.inventoryService.getSales().subscribe(t=>{this.sales=t}),this.inventoryService.getExpenses().subscribe(t=>{this.expenses=t})}get totalIncome(){return this.sales.filter(t=>t.pending!==!0).reduce((t,r)=>t+r.total,0)}get totalExpenses(){return this.expenses.reduce((t,r)=>t+r.price,0)}get netProfit(){return this.totalIncome-this.totalExpenses}get incomePercentage(){let t=this.totalIncome+this.totalExpenses;return t>0?this.totalIncome/t*100:0}get expensePercentage(){let t=this.totalIncome+this.totalExpenses;return t>0?this.totalExpenses/t*100:0}get profitMargin(){return this.totalIncome>0?this.netProfit/this.totalIncome*100:0}get completedSalesCount(){return this.sales.filter(t=>t.pending!==!0).length}get pendingSalesCount(){return this.sales.filter(t=>t.pending===!0).length}get averageSale(){let t=this.completedSalesCount;return t>0?this.totalIncome/t:0}static{this.\u0275fac=function(r){return new(r||n)(W(cn))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-reports"]],standalone:!0,features:[ze],decls:119,vars:62,consts:[[1,"reports-section"],[1,"summary-grid"],[1,"summary-card","income"],[1,"card-icon"],[1,"card-content"],[1,"card-label"],[1,"card-value"],[1,"summary-card","expense"],[1,"summary-card","profit"],[1,"summary-card","margin"],[1,"card","chart-card"],[1,"icon"],[1,"comparison-chart"],[1,"chart-row"],[1,"chart-label"],[1,"chart-bar-wrapper"],[1,"chart-bar","income-bar",3,"title"],[1,"chart-value"],[1,"chart-bar","expense-bar",3,"title"],[1,"chart-legend"],[1,"legend-item"],[1,"legend-color","income-color"],[1,"legend-color","expense-color"],[1,"breakdown-grid"],[1,"card"],[1,"breakdown-stats"],[1,"stat-row"],[1,"stat-label"],[1,"stat-value"]],template:function(r,i){r&1&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),y(4,"\u{1F4B0}"),h(),f(5,"div",4)(6,"div",5),y(7,"Total Income"),h(),f(8,"div",6),y(9),De(10,"number"),h()()(),f(11,"div",7)(12,"div",3),y(13,"\u{1F4B8}"),h(),f(14,"div",4)(15,"div",5),y(16,"Total Expenses"),h(),f(17,"div",6),y(18),De(19,"number"),h()()(),f(20,"div",8)(21,"div",3),y(22),h(),f(23,"div",4)(24,"div",5),y(25,"Net Profit"),h(),f(26,"div",6),y(27),De(28,"number"),h()()(),f(29,"div",9)(30,"div",3),y(31,"\u{1F4CA}"),h(),f(32,"div",4)(33,"div",5),y(34,"Profit Margin"),h(),f(35,"div",6),y(36),De(37,"number"),h()()()(),f(38,"div",10)(39,"h3")(40,"span",11),y(41,"\u{1F4CA}"),h(),y(42," Income vs Expenses "),h(),f(43,"div",12)(44,"div",13)(45,"div",14),y(46,"Income"),h(),f(47,"div",15),Ae(48,"div",16),De(49,"number"),h(),f(50,"div",17),y(51),De(52,"number"),h()(),f(53,"div",13)(54,"div",14),y(55,"Expenses"),h(),f(56,"div",15),Ae(57,"div",18),De(58,"number"),h(),f(59,"div",17),y(60),De(61,"number"),h()()(),f(62,"div",19)(63,"div",20),Ae(64,"span",21),f(65,"span"),y(66),De(67,"number"),h()(),f(68,"div",20),Ae(69,"span",22),f(70,"span"),y(71),De(72,"number"),h()()()(),f(73,"div",23)(74,"div",24)(75,"h3")(76,"span",11),y(77,"\u{1F4B5}"),h(),y(78," Income Breakdown "),h(),f(79,"div",25)(80,"div",26)(81,"span",27),y(82,"Total Sales:"),h(),f(83,"span",28),y(84),h()(),f(85,"div",26)(86,"span",27),y(87,"Pending Deliveries:"),h(),f(88,"span",28),y(89),h()(),f(90,"div",26)(91,"span",27),y(92,"Average Sale:"),h(),f(93,"span",28),y(94),De(95,"number"),h()()()(),f(96,"div",24)(97,"h3")(98,"span",11),y(99,"\u{1F4B3}"),h(),y(100," Expense Breakdown "),h(),f(101,"div",25)(102,"div",26)(103,"span",27),y(104,"Total Expenses:"),h(),f(105,"span",28),y(106),h()(),f(107,"div",26)(108,"span",27),y(109,"Average Expense:"),h(),f(110,"span",28),y(111),De(112,"number"),h()(),f(113,"div",26)(114,"span",27),y(115,"Expense Ratio:"),h(),f(116,"span",28),y(117),De(118,"number"),h()()()()()()),r&2&&(v(9),Q("$",Oe(10,23,i.totalIncome,"1.2-2"),""),v(9),Q("$",Oe(19,26,i.totalExpenses,"1.2-2"),""),v(2),be("negative",i.netProfit<0),v(2),H(i.netProfit>=0?"\u{1F4C8}":"\u{1F4C9}"),v(5),Q("$",Oe(28,29,i.netProfit,"1.2-2"),""),v(9),Q("",Oe(37,32,i.profitMargin,"1.1-1"),"%"),v(12),vn("width",i.incomePercentage,"%"),M("title","$"+Oe(49,35,i.totalIncome,"1.2-2")),v(3),Q("$",Oe(52,38,i.totalIncome,"1.2-2"),""),v(6),vn("width",i.expensePercentage,"%"),M("title","$"+Oe(58,41,i.totalExpenses,"1.2-2")),v(3),Q("$",Oe(61,44,i.totalExpenses,"1.2-2"),""),v(6),Q("Income (",Oe(67,47,i.incomePercentage,"1.1-1"),"%)"),v(5),Q("Expenses (",Oe(72,50,i.expensePercentage,"1.1-1"),"%)"),v(13),H(i.completedSalesCount),v(5),H(i.pendingSalesCount),v(5),Q("$",Oe(95,53,i.averageSale,"1.2-2"),""),v(12),H(i.expenses.length),v(5),Q("$",i.expenses.length>0?i.totalExpenses/i.expenses.length:Oe(112,56,0,"1.2-2"),""),v(6),Q("",Oe(118,59,i.expensePercentage,"1.1-1"),"%"))},dependencies:[Ue,Ib],styles:[".reports-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xl)}.summary-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:var(--space-lg)}.summary-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-primary),var(--color-primary-dark));color:#fff;padding:var(--space-xl);border-radius:var(--radius-lg);box-shadow:var(--shadow-lg);display:flex;align-items:center;gap:var(--space-lg);transition:all var(--transition-base);min-width:0;overflow:hidden}.summary-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:var(--shadow-xl)}.summary-card.income[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-success),#059669)}.summary-card.expense[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-danger),#dc2626)}.summary-card.profit[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#1e40af)}.summary-card.profit.negative[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706)}.summary-card.margin[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#6d28d9)}.card-icon[_ngcontent-%COMP%]{font-size:3rem;opacity:.9;flex-shrink:0}.card-content[_ngcontent-%COMP%]{flex:1;min-width:0;overflow:hidden}.card-label[_ngcontent-%COMP%]{font-size:.875rem;opacity:.9;margin-bottom:var(--space-xs);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.card-value[_ngcontent-%COMP%]{font-size:clamp(1rem,3vw,1.5rem);font-weight:700;word-break:break-all;overflow-wrap:break-word}.chart-card[_ngcontent-%COMP%]{margin-top:var(--space-lg)}.icon[_ngcontent-%COMP%]{font-size:1.5rem}h3[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);margin-bottom:var(--space-lg)}.comparison-chart[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg);margin:var(--space-xl) 0}.chart-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:100px 1fr 120px;gap:var(--space-md);align-items:center}.chart-label[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text)}.chart-bar-wrapper[_ngcontent-%COMP%]{height:40px;background:var(--color-bg);border-radius:var(--radius-md);overflow:hidden;border:1px solid var(--color-border)}.chart-bar[_ngcontent-%COMP%]{height:100%;transition:width .5s ease;min-width:2%;display:flex;align-items:center;justify-content:flex-end;padding-right:var(--space-sm);color:#fff;font-weight:600}.income-bar[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--color-success),#10b981)}.expense-bar[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--color-danger),#ef4444)}.chart-value[_ngcontent-%COMP%]{font-weight:700;font-size:1.125rem;color:var(--color-text);text-align:right}.chart-legend[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:var(--space-xl);margin-top:var(--space-lg);padding-top:var(--space-lg);border-top:1px solid var(--color-border)}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);font-size:.875rem;color:var(--color-text)}.legend-color[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:var(--radius-sm)}.income-color[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-success),#10b981)}.expense-color[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-danger),#ef4444)}.breakdown-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:var(--space-lg)}.breakdown-stats[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md);margin-top:var(--space-lg)}.stat-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--space-sm) 0;border-bottom:1px solid var(--color-border)}.stat-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.stat-label[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-muted)}.stat-value[_ngcontent-%COMP%]{font-weight:600;font-size:1rem;color:var(--color-text)}@media (max-width: 768px){.summary-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.chart-row[_ngcontent-%COMP%]{grid-template-columns:80px 1fr 100px}.chart-legend[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.breakdown-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return n})();function sN(n,e){if(n&1&&(f(0,"div",22)(1,"div",23),y(2),h(),f(3,"h3",24),y(4),h(),f(5,"p",25),y(6),h()()),n&2){let t=e.$implicit;v(2),H(t.icon),v(2),H(t.title),v(2),H(t.description)}}var ww=(()=>{class n{constructor(){this.features=[{icon:"\u{1F4E6}",title:"Smart Inventory",description:"Add, track, and manage your products with real-time stock updates."},{icon:"\u{1F4B0}",title:"Advanced POS",description:"Seamless sales processing with pending delivery scheduling and alarms."},{icon:"\u{1F4DE}",title:"Live Communication",description:"Real-time chat and crystal clear audio calls for instant support."},{icon:"\u{1F30D}",title:"GPS Location",description:"Integrated location sharing for precise delivery coordination."},{icon:"\u{1F4CA}",title:"Analytics & Reports",description:"Visualize income, expenses, and profit margins with detailed charts."},{icon:"\u{1F4CB}",title:"Activity Logs",description:"Complete audit trail of all system actions for security and accountability."},{icon:"\u{1F465}",title:"Customer CRM",description:"Maintain detailed customer profiles and purchase history."},{icon:"\u{1F4B8}",title:"Expense Tracking",description:"Monitor operational costs to ensure maximum profitability."}]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=$e({type:n,selectors:[["app-landing"]],standalone:!0,features:[ze],decls:43,vars:1,consts:[[1,"landing-page"],[1,"hero-section"],[1,"hero-content"],[1,"hero-icon"],[1,"hero-title"],[1,"hero-subtitle"],[1,"hero-description"],[1,"hero-stats"],[1,"stat-item"],[1,"stat-icon"],[1,"stat-text"],[1,"features-section"],[1,"section-title"],[1,"section-subtitle"],[1,"features-grid"],["class","feature-card",4,"ngFor","ngForOf"],[1,"cta-section"],[1,"cta-content"],[1,"cta-title"],[1,"cta-description"],[1,"cta-arrow"],[1,"arrow-icon"],[1,"feature-card"],[1,"feature-icon"],[1,"feature-title"],[1,"feature-description"]],template:function(r,i){r&1&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),y(4,"\u{1F4E6}"),h(),f(5,"h1",4),y(6,"Welcome to JJM Inventory"),h(),f(7,"p",5),y(8,"Your complete business management solution"),h(),f(9,"p",6),y(10," Streamline your inventory, sales, and customer management all in one place. Track expenses, monitor profits, and grow your business with confidence. "),h(),f(11,"div",7)(12,"div",8)(13,"div",9),y(14,"\u26A1"),h(),f(15,"div",10),y(16,"Fast & Efficient"),h()(),f(17,"div",8)(18,"div",9),y(19,"\u{1F512}"),h(),f(20,"div",10),y(21,"Secure & Reliable"),h()(),f(22,"div",8)(23,"div",9),y(24,"\u{1F4F1}"),h(),f(25,"div",10),y(26,"Fully Responsive"),h()()()()(),f(27,"div",11)(28,"h2",12),y(29,"Powerful Features"),h(),f(30,"p",13),y(31,"Everything you need to manage your business effectively"),h(),f(32,"div",14),$(33,sN,7,3,"div",15),h()(),f(34,"div",16)(35,"div",17)(36,"h2",18),y(37,"Ready to Get Started?"),h(),f(38,"p",19),y(39," Choose a tab above to begin managing your inventory, processing sales, or viewing reports. "),h(),f(40,"div",20)(41,"span",21),y(42,"\u2191"),h()()()()()),r&2&&(v(33),M("ngForOf",i.features))},dependencies:[Ue,ut],styles:['.landing-page[_ngcontent-%COMP%]{min-height:calc(100vh - 300px);animation:_ngcontent-%COMP%_fadeIn .6s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.hero-section[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl) 0;background:linear-gradient(135deg,#3b82f60d,#9333ea0d);border-radius:var(--radius-lg);margin-bottom:var(--space-2xl)}.hero-content[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:0 var(--space-lg)}.hero-icon[_ngcontent-%COMP%]{font-size:5rem;margin-bottom:var(--space-lg);animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-15px)}}.hero-title[_ngcontent-%COMP%]{font-size:3rem;font-weight:700;color:var(--color-text);margin-bottom:var(--space-md);background:linear-gradient(135deg,var(--color-primary),var(--color-primary-light));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.hero-subtitle[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--color-text-muted);margin-bottom:var(--space-lg);font-weight:500}.hero-description[_ngcontent-%COMP%]{font-size:1.125rem;color:var(--color-text-muted);line-height:1.8;margin-bottom:var(--space-2xl);max-width:600px;margin-left:auto;margin-right:auto}.hero-stats[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:var(--space-2xl);flex-wrap:wrap;margin-top:var(--space-2xl)}.stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);padding:var(--space-md) var(--space-lg);background:var(--color-surface);border-radius:var(--radius-lg);box-shadow:var(--shadow-sm);transition:all var(--transition-base)}.stat-item[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:var(--shadow-md)}.stat-icon[_ngcontent-%COMP%]{font-size:1.5rem}.stat-text[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text)}.features-section[_ngcontent-%COMP%]{padding:var(--space-2xl) 0}.section-title[_ngcontent-%COMP%]{text-align:center;font-size:2.5rem;font-weight:700;color:var(--color-text);margin-bottom:var(--space-md)}.section-subtitle[_ngcontent-%COMP%]{text-align:center;font-size:1.125rem;color:var(--color-text-muted);margin-bottom:var(--space-2xl)}.features-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:var(--space-xl);margin-top:var(--space-2xl)}.feature-card[_ngcontent-%COMP%]{background:var(--color-surface);padding:var(--space-xl);border-radius:var(--radius-lg);border:1px solid var(--color-border);transition:all var(--transition-base);text-align:center;position:relative;overflow:hidden}.feature-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(59,130,246,.1),transparent);transition:left .6s ease}.feature-card[_ngcontent-%COMP%]:hover:before{left:100%}.feature-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:var(--shadow-xl);border-color:var(--color-primary)}.feature-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:var(--space-md);transition:transform var(--transition-base)}.feature-card[_ngcontent-%COMP%]:hover   .feature-icon[_ngcontent-%COMP%]{transform:scale(1.2) rotate(5deg)}.feature-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--color-text);margin-bottom:var(--space-sm)}.feature-description[_ngcontent-%COMP%]{font-size:.9375rem;color:var(--color-text-muted);line-height:1.6}.cta-section[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl) 0;margin-top:var(--space-2xl)}.cta-content[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:var(--space-2xl);background:linear-gradient(135deg,var(--color-primary),var(--color-primary-dark));border-radius:var(--radius-lg);color:#fff;box-shadow:var(--shadow-xl)}.cta-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:var(--space-md)}.cta-description[_ngcontent-%COMP%]{font-size:1.125rem;margin-bottom:var(--space-lg);opacity:.95}.cta-arrow[_ngcontent-%COMP%]{margin-top:var(--space-xl)}.arrow-icon[_ngcontent-%COMP%]{font-size:3rem;display:inline-block;animation:_ngcontent-%COMP%_bounce 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}@media (max-width: 768px){.hero-title[_ngcontent-%COMP%]{font-size:2rem}.hero-subtitle[_ngcontent-%COMP%]{font-size:1.25rem}.hero-description[_ngcontent-%COMP%]{font-size:1rem}.hero-stats[_ngcontent-%COMP%]{flex-direction:column;gap:var(--space-md)}.section-title[_ngcontent-%COMP%]{font-size:2rem}.features-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.cta-title[_ngcontent-%COMP%]{font-size:1.5rem}}']})}}return n})();var yo=(()=>{class n{constructor(t){this.http=t,this.apiUrl=an.apiUrl,this.usersSubject=new Je([]),this.users$=this.usersSubject.asObservable(),this.loadUsers()}hashPassword(t){return j(this,null,function*(){let i=new TextEncoder().encode(t),o=yield crypto.subtle.digest("SHA-256",i);return Array.from(new Uint8Array(o)).map(s=>s.toString(16).padStart(2,"0")).join("")})}loadUsers(){this.http.get(`${this.apiUrl}/users`).subscribe({next:t=>{let r=t.map(i=>this.transformUser(i));r.length===0?this.initializeDefaultAdmin():this.usersSubject.next(r)},error:t=>{console.error("Error fetching users:",t),t.status===404&&this.initializeDefaultAdmin()}})}initializeDefaultAdmin(){return j(this,null,function*(){if(this.usersSubject.value.length>0)return;let r={id:"admin-1",username:"jjm143256789",fullName:"System Administrator",password:yield this.hashPassword("Gr*l0v3R"),role:"admin",createdAt:new Date};this.http.post(`${this.apiUrl}/users`,r).subscribe({next:i=>{let o=this.transformUser(i);this.usersSubject.next([o])},error:i=>{console.warn("Could not save default admin to backend, using local only",i),this.usersSubject.next([r])}})})}getUsers(){return this.users$}addUser(t){let r=ue(J({},t),{createdAt:new Date,userId:t.userId||localStorage.getItem("jjm_user_id")||"system"});return Tn(this.hashPassword(t.password||"")).pipe(qi(i=>(r.password=i,this.http.post(`${this.apiUrl}/users`,r))),lt(i=>{let o=this.transformUser(i),s=this.usersSubject.value;return this.usersSubject.next([...s,o]),o}))}updateUser(t){return new je(r=>{j(this,null,function*(){let o=J({},t);o.password&&(o.password=yield this.hashPassword(o.password)),this.http.put(`${this.apiUrl}/users/${o.id}`,o).subscribe({next:s=>{let c=this.transformUser(s),u=this.usersSubject.value.map(p=>p.id===c.id?c:p);this.usersSubject.next(u),r.next(c),r.complete()},error:s=>r.error(s)})})})}deleteUser(t){return this.http.delete(`${this.apiUrl}/users/${t}`).pipe(lt(()=>{let r=this.usersSubject.value;this.usersSubject.next(r.filter(i=>i.id!==t))}))}getUserById(t){return this.usersSubject.value.find(r=>r.id===t)}validateCredentials(t,r){return Tn(this.hashPassword(r)).pipe(qi(i=>this.users$.pipe(si(1),lt(o=>o.find(c=>c.username===t&&c.password===i)||null))))}transformUser(t){return ue(J({},t),{createdAt:this.parseDate(t.createdAt)})}parseDate(t){return t?t instanceof Date?t:typeof t=="string"?new Date(t):typeof t=="object"&&t._seconds!==void 0?new Date(t._seconds*1e3):new Date(t):new Date}static{this.\u0275fac=function(r){return new(r||n)(oe(ar))}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function aN(n,e){if(n&1&&Ae(0,"div",18),n&2){let t=e.$implicit;vn("left",t.x,"%")("top",t.y,"%")("width",t.size,"px")("height",t.size,"px")("animation-delay",t.delay,"s")}}function cN(n,e){if(n&1&&(f(0,"div",19)(1,"span",20),y(2,"\u26A0\uFE0F"),h(),y(3),h()),n&2){let t=A();v(3),Q(" ",t.errorMessage," ")}}function lN(n,e){n&1&&(f(0,"span"),y(1,"Sign In"),h())}function uN(n,e){n&1&&(f(0,"span",21),Ae(1,"span",22),y(2," Signing in... "),h())}var Cw=(()=>{class n{constructor(t){this.userService=t,this.username="",this.password="",this.errorMessage="",this.isLoading=!1,this.bubbles=[]}ngOnInit(){this.generateBubbles()}ngOnDestroy(){}onMouseMove(t){document.querySelectorAll(".bubble").forEach(i=>{let o=i,s=o.getBoundingClientRect(),c=s.left+s.width/2,l=s.top+s.height/2,u=t.clientX-c,p=t.clientY-l,g=Math.sqrt(u*u+p*p);if(g<250){let b=(250-g)/250,C=u/g*b*50,N=p/g*b*50;o.style.transform=`translate(${C}px, ${N}px) scale(${1+b*.3})`}else o.style.transform="translate(0, 0) scale(1)"})}generateBubbles(){for(let t=0;t<15;t++)this.bubbles.push({x:Math.random()*100,y:Math.random()*100,size:Math.random()*100+50,delay:Math.random()*5})}onLogin(){if(this.errorMessage="",!this.username||!this.password){this.errorMessage="Please enter both username and password";return}this.isLoading=!0,setTimeout(()=>{this.userService.validateCredentials(this.username,this.password).subscribe(t=>{t?(localStorage.setItem("jjm_logged_in","true"),localStorage.setItem("jjm_username",this.username),localStorage.setItem("jjm_user_id",t.id),localStorage.setItem("jjm_role",t.role),window.location.reload()):(this.errorMessage="Invalid username or password",this.isLoading=!1)})},800)}static{this.\u0275fac=function(r){return new(r||n)(W(yo))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-login"]],hostBindings:function(r,i){r&1&&B("mousemove",function(s){return i.onMouseMove(s)})},standalone:!0,features:[ze],decls:24,vars:9,consts:[[1,"login-container"],[1,"bubbles-container"],["class","bubble",3,"left","top","width","height","animation-delay",4,"ngFor","ngForOf"],[1,"login-card"],[1,"login-header"],[1,"logo-icon"],[1,"login-title"],[1,"login-subtitle"],[1,"login-form",3,"ngSubmit"],[1,"form-group"],["for","username"],["type","text","id","username","name","username","placeholder","Enter your username","required","",3,"ngModelChange","ngModel","disabled"],["for","password"],["type","password","id","password","name","password","placeholder","Enter your password","required","",3,"ngModelChange","ngModel","disabled"],["class","error-message",4,"ngIf"],["type","submit",1,"login-button",3,"disabled"],[4,"ngIf"],["class","loading-spinner",4,"ngIf"],[1,"bubble"],[1,"error-message"],[1,"error-icon"],[1,"loading-spinner"],[1,"spinner"]],template:function(r,i){r&1&&(f(0,"div",0)(1,"div",1),$(2,aN,1,10,"div",2),h(),f(3,"div",3)(4,"div",4)(5,"div",5),y(6,"\u{1F4E6}"),h(),f(7,"h1",6),y(8,"JJM Inventory"),h(),f(9,"p",7),y(10,"Sign in to your account"),h()(),f(11,"form",8),B("ngSubmit",function(){return i.onLogin()}),f(12,"div",9)(13,"label",10),y(14,"Username"),h(),f(15,"input",11),Z("ngModelChange",function(s){return ee(i.username,s)||(i.username=s),s}),h()(),f(16,"div",9)(17,"label",12),y(18,"Password"),h(),f(19,"input",13),Z("ngModelChange",function(s){return ee(i.password,s)||(i.password=s),s}),h()(),$(20,cN,4,1,"div",14),f(21,"button",15),$(22,lN,2,0,"span",16)(23,uN,3,0,"span",17),h()()()()),r&2&&(v(2),M("ngForOf",i.bubbles),v(13),X("ngModel",i.username),M("disabled",i.isLoading),v(4),X("ngModel",i.password),M("disabled",i.isLoading),v(),M("ngIf",i.errorMessage),v(),M("disabled",i.isLoading),v(),M("ngIf",!i.isLoading),v(),M("ngIf",i.isLoading))},dependencies:[Ue,ut,Ze,ft,on,dt,ht,rn,qt,at,Ht],styles:['.login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:var(--color-bg);padding:var(--space-lg);position:relative;overflow:hidden}.bubbles-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;z-index:0}.bubble[_ngcontent-%COMP%]{position:absolute;border-radius:50%;background:radial-gradient(circle at 30% 30%,#3b82f64d,#9333ea33);-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);animation:_ngcontent-%COMP%_float 8s ease-in-out infinite;transition:transform .15s ease-out;box-shadow:inset 0 0 20px #fff3,0 8px 32px #3b82f633;border:1px solid rgba(255,255,255,.1)}.bubble[_ngcontent-%COMP%]:before{content:"";position:absolute;top:10%;left:10%;width:40%;height:40%;background:radial-gradient(circle,rgba(255,255,255,.4),transparent);border-radius:50%}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0) rotate(0)}25%{transform:translateY(-20px) rotate(90deg)}50%{transform:translateY(0) rotate(180deg)}75%{transform:translateY(20px) rotate(270deg)}}.login-card[_ngcontent-%COMP%]{background:var(--color-surface);border-radius:var(--radius-xl);box-shadow:0 20px 60px #0000004d;padding:var(--space-2xl);width:100%;max-width:420px;animation:_ngcontent-%COMP%_slideIn .5s cubic-bezier(.16,1,.3,1);position:relative;z-index:1}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(30px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--space-2xl)}.logo-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:var(--space-md);animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.login-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--color-text);margin-bottom:var(--space-xs);background:linear-gradient(135deg,var(--color-primary),var(--color-primary-light));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.login-subtitle[_ngcontent-%COMP%]{color:var(--color-text-muted);font-size:.9375rem;margin:0}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:var(--color-text)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:var(--space-md);font-size:1rem;border:2px solid var(--color-border);border-radius:var(--radius-md);transition:all var(--transition-base);background:var(--color-surface)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 4px #3b82f61a}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.error-message[_ngcontent-%COMP%]{background:#fee;color:var(--color-danger);padding:var(--space-md);border-radius:var(--radius-md);font-size:.875rem;border:1px solid rgba(239,68,68,.2);display:flex;align-items:center;gap:var(--space-sm);animation:_ngcontent-%COMP%_shake .4s ease}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-10px)}75%{transform:translate(10px)}}.error-icon[_ngcontent-%COMP%]{font-size:1.25rem}.login-button[_ngcontent-%COMP%]{padding:var(--space-md) var(--space-xl);font-size:1rem;font-weight:600;background:linear-gradient(135deg,var(--color-primary),var(--color-primary-light));color:#fff;border:none;border-radius:var(--radius-md);cursor:pointer;transition:all var(--transition-base);box-shadow:0 4px 12px #3b82f64d}.login-button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 20px #3b82f666}.login-button[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.login-button[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.loading-spinner[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:var(--space-sm)}.spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.login-footer[_ngcontent-%COMP%]{margin-top:var(--space-2xl);padding-top:var(--space-lg);border-top:1px solid var(--color-border);text-align:center}.demo-credentials[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-muted);line-height:1.6;margin:0}.demo-credentials[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--color-text)}.demo-credentials[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background:var(--color-bg);padding:2px 6px;border-radius:var(--radius-sm);font-family:Courier New,monospace;color:var(--color-primary);font-weight:600}@media (max-width: 480px){.login-card[_ngcontent-%COMP%]{padding:var(--space-xl)}.login-title[_ngcontent-%COMP%]{font-size:1.5rem}.logo-icon[_ngcontent-%COMP%]{font-size:3rem}}']})}}return n})();function dN(n,e){if(n&1&&(f(0,"option",18),y(1),De(2,"titlecase"),h()),n&2){let t=e.$implicit;M("value",t),v(),Q(" ",Ss(2,2,t)," ")}}function hN(n,e){if(n&1&&(f(0,"option",18),y(1),De(2,"titlecase"),h()),n&2){let t=e.$implicit;M("value",t),v(),Q(" ",Ss(2,2,t)," ")}}function fN(n,e){if(n&1&&(f(0,"span",33),y(1),h()),n&2){let t=A().$implicit;v(),Q("\u2022 ",t.details,"")}}function pN(n,e){if(n&1&&(f(0,"div",21)(1,"div",22)(2,"span",23),y(3),h(),f(4,"span",24),y(5),h()(),f(6,"div",25)(7,"div",26)(8,"span",27),y(9),h(),f(10,"span",28),y(11),h()(),f(12,"div",29)(13,"span",30),y(14),h(),$(15,fN,2,1,"span",31),h()(),f(16,"div",32),y(17),De(18,"date"),h()()),n&2){let t=e.$implicit,r=A(2);v(3),H(r.getEntityIcon(t.entityType)),v(2),H(r.getActionIcon(t.action)),v(4),H(t.entityName),v(2),H(t.action),v(3),H(t.entityType),v(),M("ngIf",t.details),v(2),Q(" ",Oe(18,7,t==null?null:t.timestamp,"medium")," ")}}function mN(n,e){if(n&1&&(f(0,"div",19),$(1,pN,19,10,"div",20),h()),n&2){let t=A();v(),M("ngForOf",t.paginatedLogs)}}function gN(n,e){n&1&&(f(0,"div",34)(1,"p"),y(2,"No activity logs found"),h()())}function yN(n,e){if(n&1){let t=se();f(0,"div",35)(1,"button",36),B("click",function(){V(t);let i=A();return L(i.prevPage())}),y(2," \u2190 Prev "),h(),f(3,"span",37),y(4),h(),f(5,"button",36),B("click",function(){V(t);let i=A();return L(i.nextPage())}),y(6," Next \u2192 "),h()()}if(n&2){let t=A();v(),M("disabled",t.currentPage===1),v(3),nr(" Page ",t.currentPage," of ",t.totalPages," "),v(),M("disabled",t.currentPage===t.totalPages)}}var Ew=(()=>{class n{constructor(t){this.loggingService=t,this.logs=[],this.filteredLogs=[],this.selectedEntityType="all",this.selectedAction="all",this.currentPage=1,this.pageSize=20,this.entityTypes=["all","product","sale","expense","customer"],this.actions=["all","create","update","delete","restock","complete"]}ngOnInit(){this.loggingService.getLogs().subscribe(t=>{this.logs=t.map(r=>ue(J({},r),{timestamp:new Date(r.timestamp?._seconds*1e3||new Date)})),this.applyFilters()})}applyFilters(){this.filteredLogs=this.logs.filter(t=>{let r=this.selectedEntityType==="all"||t.entityType===this.selectedEntityType,i=this.selectedAction==="all"||t.action===this.selectedAction;return r&&i}),this.currentPage=1}get paginatedLogs(){let t=(this.currentPage-1)*this.pageSize,r=t+this.pageSize;return this.filteredLogs.slice(t,r)}get totalPages(){return Math.ceil(this.filteredLogs.length/this.pageSize)}nextPage(){this.currentPage<this.totalPages&&this.currentPage++}prevPage(){this.currentPage>1&&this.currentPage--}refreshLogs(){this.loggingService.refreshLogs()}cleanupOldLogs(){confirm("This will delete all logs older than 30 days. Continue?")&&this.loggingService.cleanupOldLogs().subscribe({next:t=>{alert(`Cleanup completed! Deleted ${t.deletedCount} logs.`),this.refreshLogs()},error:t=>{console.error("Cleanup error:",t),alert("Failed to cleanup logs")}})}getActionIcon(t){return{create:"\u2795",update:"\u270F\uFE0F",delete:"\u{1F5D1}\uFE0F",restock:"\u{1F4E6}",complete:"\u2705"}[t]||"\u{1F4DD}"}getEntityIcon(t){return{product:"\u{1F4E6}",sale:"\u{1F4B0}",expense:"\u{1F4B8}",customer:"\u{1F464}"}[t]||"\u{1F4C4}"}static{this.\u0275fac=function(r){return new(r||n)(W(Al))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-activity-logs"]],standalone:!0,features:[ze],decls:29,vars:8,consts:[["noLogs",""],[1,"activity-logs-section"],[1,"card"],[1,"header-section"],[1,"icon"],[1,"badge"],[1,"header-actions"],[1,"btn-refresh",3,"click"],[1,"btn-cleanup",3,"click"],[1,"filters-section"],[1,"filter-group"],["for","entityFilter"],["id","entityFilter",1,"filter-select",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","actionFilter"],["id","actionFilter",1,"filter-select",3,"ngModelChange","change","ngModel"],["class","logs-list",4,"ngIf","ngIfElse"],["class","pagination",4,"ngIf"],[3,"value"],[1,"logs-list"],["class","log-item",4,"ngFor","ngForOf"],[1,"log-item"],[1,"log-icon"],[1,"entity-icon"],[1,"action-icon"],[1,"log-info"],[1,"log-header"],[1,"log-entity"],[1,"log-action-badge"],[1,"log-details"],[1,"log-type"],["class","log-description",4,"ngIf"],[1,"log-timestamp"],[1,"log-description"],[1,"empty-state"],[1,"pagination"],[1,"pagination-btn",3,"click","disabled"],[1,"page-info"]],template:function(r,i){if(r&1){let o=se();f(0,"div",1)(1,"div",2)(2,"div",3)(3,"h3")(4,"span",4),y(5,"\u{1F4CB}"),h(),y(6," Activity Logs "),f(7,"span",5),y(8),h()(),f(9,"div",6)(10,"button",7),B("click",function(){return V(o),L(i.refreshLogs())}),y(11," \u{1F504} Refresh "),h(),f(12,"button",8),B("click",function(){return V(o),L(i.cleanupOldLogs())}),y(13," \u{1F5D1}\uFE0F Cleanup Old Logs "),h()()(),f(14,"div",9)(15,"div",10)(16,"label",11),y(17,"Entity Type:"),h(),f(18,"select",12),Z("ngModelChange",function(c){return V(o),ee(i.selectedEntityType,c)||(i.selectedEntityType=c),L(c)}),B("change",function(){return V(o),L(i.applyFilters())}),$(19,dN,3,4,"option",13),h()(),f(20,"div",10)(21,"label",14),y(22,"Action:"),h(),f(23,"select",15),Z("ngModelChange",function(c){return V(o),ee(i.selectedAction,c)||(i.selectedAction=c),L(c)}),B("change",function(){return V(o),L(i.applyFilters())}),$(24,hN,3,4,"option",13),h()()(),$(25,mN,2,1,"div",16)(26,gN,3,0,"ng-template",null,0,rr)(28,yN,7,4,"div",17),h()()}if(r&2){let o=tr(27);v(8),H(i.filteredLogs.length),v(10),X("ngModel",i.selectedEntityType),v(),M("ngForOf",i.entityTypes),v(4),X("ngModel",i.selectedAction),v(),M("ngForOf",i.actions),v(),M("ngIf",i.paginatedLogs.length>0)("ngIfElse",o),v(3),M("ngIf",i.totalPages>1)}},dependencies:[Ue,ut,Ze,ul,Fn,ft,Vn,Ln,sn,ht,at],styles:[".activity-logs-section[_ngcontent-%COMP%]{padding:var(--space-lg)}.header-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--space-lg);flex-wrap:wrap;gap:var(--space-md)}.header-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);margin:0}.header-actions[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm)}.btn-refresh[_ngcontent-%COMP%], .btn-cleanup[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);border:1px solid var(--color-border);background:var(--color-surface);color:var(--color-text);border-radius:var(--radius-md);cursor:pointer;font-size:.875rem;font-weight:500;transition:all var(--transition-base)}.btn-refresh[_ngcontent-%COMP%]:hover{background:var(--color-primary);color:#fff;border-color:var(--color-primary)}.btn-cleanup[_ngcontent-%COMP%]{background:var(--color-danger);color:#fff;border-color:var(--color-danger)}.btn-cleanup[_ngcontent-%COMP%]:hover{background:#dc2626}.filters-section[_ngcontent-%COMP%]{display:flex;gap:var(--space-lg);margin-bottom:var(--space-lg);padding:var(--space-md);background:var(--color-bg);border-radius:var(--radius-md);flex-wrap:wrap}.filter-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm)}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.filter-select[_ngcontent-%COMP%]{padding:var(--space-xs) var(--space-sm);border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-surface);color:var(--color-text);font-size:.875rem;cursor:pointer}.logs-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.log-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-md);padding:var(--space-md);background:var(--color-bg);border-radius:var(--radius-md);border:1px solid var(--color-border);transition:all var(--transition-base)}.log-item[_ngcontent-%COMP%]:hover{background:var(--color-surface);transform:translate(4px)}.log-icon[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:2px;font-size:1.25rem}.entity-icon[_ngcontent-%COMP%]{font-size:1.5rem}.action-icon[_ngcontent-%COMP%]{font-size:1rem}.log-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:var(--space-xs)}.log-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm)}.log-entity[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text);font-size:1rem}.log-action-badge[_ngcontent-%COMP%]{padding:2px 8px;background:var(--color-primary);color:#fff;border-radius:var(--radius-sm);font-size:.75rem;font-weight:500;text-transform:uppercase}.log-details[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-xs);font-size:.875rem;color:var(--color-text-muted)}.log-type[_ngcontent-%COMP%]{text-transform:capitalize;font-weight:500}.log-description[_ngcontent-%COMP%]{font-style:italic}.log-timestamp[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted);white-space:nowrap}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl);color:var(--color-text-muted)}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:var(--space-md);margin-top:var(--space-lg);padding-top:var(--space-lg);border-top:1px solid var(--color-border)}.pagination-btn[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);background:var(--color-surface);border:1px solid var(--color-border);color:var(--color-text);border-radius:var(--radius-md);font-size:.875rem;font-weight:500;cursor:pointer;transition:all var(--transition-base)}.pagination-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--color-primary);color:#fff;border-color:var(--color-primary)}.pagination-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.page-info[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text);font-weight:500}@media (max-width: 768px){.header-section[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.filters-section[_ngcontent-%COMP%]{flex-direction:column}.log-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.log-timestamp[_ngcontent-%COMP%]{align-self:flex-end}}"]})}}return n})();var Iw=()=>{};var Sw=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},vN=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],c=n[t++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Tw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,c=s?n[i+1]:0,l=i+2<n.length,u=l?n[i+2]:0,p=o>>2,g=(o&3)<<4|c>>4,b=(c&15)<<2|u>>6,C=u&63;l||(C=64,s||(b=64)),r.push(t[p],t[g],t[b],t[C])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Sw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):vN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||c==null||u==null||g==null)throw new Kf;let b=o<<2|c>>4;if(r.push(b),u!==64){let C=c<<4&240|u>>2;if(r.push(C),g!==64){let N=u<<6&192|g;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Kf=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},_N=function(n){let e=Sw(n);return Tw.encodeByteArray(e,!0)},Hs=function(n){return _N(n).replace(/\./g,"")},Mw=function(n){try{return Tw.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Aw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var bN=()=>Aw().__FIREBASE_DEFAULTS__,wN=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},CN=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Mw(n[1]);return e&&JSON.parse(e)},Qf=()=>{try{return Iw()||bN()||wN()||CN()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},EN=n=>Qf()?.emulatorHosts?.[n],Pw=n=>{let e=EN(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Yf=()=>Qf()?.config;var Pl=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Ol(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Ow(n){return j(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function Nw(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=J({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Hs(JSON.stringify(t)),Hs(JSON.stringify(s)),""].join(".")}var zs={};function IN(){let n={prod:[],emulator:[]};for(let e of Object.keys(zs))zs[e]?n.emulator.push(e):n.prod.push(e);return n}function xN(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var xw=!1;function Rw(n,e){if(typeof window>"u"||typeof document>"u"||!Ol(window.location.host)||zs[n]===e||zs[n]||xw)return;zs[n]=e;function t(b){return`__firebase__banner__${b}`}let r="__firebase__banner",o=IN().prod.length>0;function s(){let b=document.getElementById(r);b&&b.remove()}function c(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function l(b,C){b.setAttribute("width","24"),b.setAttribute("id",C),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function u(){let b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{xw=!0,s()},b}function p(b,C){b.setAttribute("id",C),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function g(){let b=xN(r),C=t("text"),N=document.getElementById(C)||document.createElement("span"),R=t("learnmore"),k=document.getElementById(R)||document.createElement("a"),G=t("preprendIcon"),re=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){let Y=b.element;c(Y),p(k,R);let Ee=u();l(re,G),Y.append(re,N,k,Ee),document.body.appendChild(Y)}o?(N.innerText="Preview backend disconnected.",re.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(re.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function kw(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function DN(){let n=Qf()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Fw(){return!DN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Jf(){try{return typeof indexedDB=="object"}catch{return!1}}function Vw(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var SN="FirebaseError",dr=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=SN,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qs.prototype.create)}},qs=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?TN(o,r):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new dr(i,c,r)}};function TN(n,e){return n.replace(MN,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var MN=/\{\$([^}]+)}/g;function vo(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(Dw(o)&&Dw(s)){if(!vo(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function Dw(n){return n!==null&&typeof n=="object"}var Bj=4*60*60*1e3;function Gt(n){return n&&n._delegate?n._delegate:n}var hr=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ii="[DEFAULT]";var Xf=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Pl;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PN(e))try{this.getOrInitializeService({instanceIdentifier:Ii})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ii){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return j(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ii){return this.instances.has(e)}getOptions(e=Ii){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&s.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:AN(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ii){return this.component?this.component.multipleInstances?e:Ii:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function AN(n){return n===Ii?void 0:n}function PN(n){return n.instantiationMode==="EAGER"}var Nl=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Xf(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var ON=[],we=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(we||{}),NN={debug:we.DEBUG,verbose:we.VERBOSE,info:we.INFO,warn:we.WARN,error:we.ERROR,silent:we.SILENT},RN=we.INFO,kN={[we.DEBUG]:"log",[we.VERBOSE]:"log",[we.INFO]:"info",[we.WARN]:"warn",[we.ERROR]:"error"},FN=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=kN[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},_o=class{constructor(e){this.name=e,this._logLevel=RN,this._logHandler=FN,this._userLogHandler=null,ON.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in we))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?NN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,we.DEBUG,...e),this._logHandler(this,we.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,we.VERBOSE,...e),this._logHandler(this,we.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,we.INFO,...e),this._logHandler(this,we.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,we.WARN,...e),this._logHandler(this,we.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,we.ERROR,...e),this._logHandler(this,we.ERROR,...e)}};var VN=(n,e)=>e.some(t=>n instanceof t),Lw,jw;function LN(){return Lw||(Lw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jN(){return jw||(jw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Bw=new WeakMap,ep=new WeakMap,Uw=new WeakMap,Zf=new WeakMap,np=new WeakMap;function BN(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(jn(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&Bw.set(t,n)}).catch(()=>{}),np.set(e,n),e}function UN(n){if(ep.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});ep.set(n,e)}var tp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ep.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Uw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return jn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function $w(n){tp=n(tp)}function $N(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Rl(this),e,...t);return Uw.set(r,e.sort?e.sort():[e]),jn(r)}:jN().includes(n)?function(...e){return n.apply(Rl(this),e),jn(Bw.get(this))}:function(...e){return jn(n.apply(Rl(this),e))}}function zN(n){return typeof n=="function"?$N(n):(n instanceof IDBTransaction&&UN(n),VN(n,LN())?new Proxy(n,tp):n)}function jn(n){if(n instanceof IDBRequest)return BN(n);if(Zf.has(n))return Zf.get(n);let e=zN(n);return e!==n&&(Zf.set(n,e),np.set(e,n)),e}var Rl=n=>np.get(n);function Hw(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),c=jn(s);return r&&s.addEventListener("upgradeneeded",l=>{r(jn(s.result),l.oldVersion,l.newVersion,jn(s.transaction),l)}),t&&s.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),c.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),c}var HN=["get","getKey","getAll","getAllKeys","count"],qN=["put","add","delete","clear"],rp=new Map;function zw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(rp.get(e))return rp.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=qN.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||HN.includes(t)))return;let o=function(s,...c){return j(this,null,function*(){let l=this.transaction(s,i?"readwrite":"readonly"),u=l.store;return r&&(u=u.index(c.shift())),(yield Promise.all([u[t](...c),i&&l.done]))[0]})};return rp.set(e,o),o}$w(n=>ue(J({},n),{get:(e,t,r)=>zw(e,t)||n.get(e,t,r),has:(e,t)=>!!zw(e,t)||n.has(e,t)}));var op=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(GN(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function GN(n){return n.getComponent()?.type==="VERSION"}var sp="@firebase/app",qw="0.14.6";var fr=new _o("@firebase/app"),WN="@firebase/app-compat",KN="@firebase/analytics-compat",QN="@firebase/analytics",YN="@firebase/app-check-compat",JN="@firebase/app-check",XN="@firebase/auth",ZN="@firebase/auth-compat",eR="@firebase/database",tR="@firebase/data-connect",nR="@firebase/database-compat",rR="@firebase/functions",iR="@firebase/functions-compat",oR="@firebase/installations",sR="@firebase/installations-compat",aR="@firebase/messaging",cR="@firebase/messaging-compat",lR="@firebase/performance",uR="@firebase/performance-compat",dR="@firebase/remote-config",hR="@firebase/remote-config-compat",fR="@firebase/storage",pR="@firebase/storage-compat",mR="@firebase/firestore",gR="@firebase/ai",yR="@firebase/firestore-compat",vR="firebase",_R="12.6.0";var ap="[DEFAULT]",bR={[sp]:"fire-core",[WN]:"fire-core-compat",[QN]:"fire-analytics",[KN]:"fire-analytics-compat",[JN]:"fire-app-check",[YN]:"fire-app-check-compat",[XN]:"fire-auth",[ZN]:"fire-auth-compat",[eR]:"fire-rtdb",[tR]:"fire-data-connect",[nR]:"fire-rtdb-compat",[rR]:"fire-fn",[iR]:"fire-fn-compat",[oR]:"fire-iid",[sR]:"fire-iid-compat",[aR]:"fire-fcm",[cR]:"fire-fcm-compat",[lR]:"fire-perf",[uR]:"fire-perf-compat",[dR]:"fire-rc",[hR]:"fire-rc-compat",[fR]:"fire-gcs",[pR]:"fire-gcs-compat",[mR]:"fire-fst",[yR]:"fire-fst-compat",[gR]:"fire-vertex","fire-js":"fire-js",[vR]:"fire-js-all"};var kl=new Map,wR=new Map,cp=new Map;function Gw(n,e){try{n.container.addComponent(e)}catch(t){fr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Gs(n){let e=n.name;if(cp.has(e))return fr.debug(`There were multiple attempts to register component ${e}.`),!1;cp.set(e,n);for(let t of kl.values())Gw(t,n);for(let t of wR.values())Gw(t,n);return!0}function Yw(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Jw(n){return n==null?!1:n.settings!==void 0}var CR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Br=new qs("app","Firebase",CR);var lp=class{constructor(e,t,r){this._isDeleted=!1,this._options=J({},e),this._config=J({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Br.create("app-deleted",{appName:this._name})}};var Xw=_R;function Ks(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=J({name:ap,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Br.create("bad-app-name",{appName:String(i)});if(t||(t=Yf()),!t)throw Br.create("no-options");let o=kl.get(i);if(o){if(vo(t,o.options)&&vo(r,o.config))return o;throw Br.create("duplicate-app",{appName:i})}let s=new Nl(i);for(let l of cp.values())s.addComponent(l);let c=new lp(t,r,s);return kl.set(i,c),c}function Zw(n=ap){let e=kl.get(n);if(!e&&n===ap&&Yf())return Ks();if(!e)throw Br.create("no-app",{appName:n});return e}function Ur(n,e,t){let r=bR[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fr.warn(s.join(" "));return}Gs(new hr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var ER="firebase-heartbeat-database",IR=1,Ws="firebase-heartbeat-store",ip=null;function eC(){return ip||(ip=Hw(ER,IR,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ws)}catch(t){console.warn(t)}}}}).catch(n=>{throw Br.create("idb-open",{originalErrorMessage:n.message})})),ip}function xR(n){return j(this,null,function*(){try{let t=(yield eC()).transaction(Ws),r=yield t.objectStore(Ws).get(tC(n));return yield t.done,r}catch(e){if(e instanceof dr)fr.warn(e.message);else{let t=Br.create("idb-get",{originalErrorMessage:e?.message});fr.warn(t.message)}}})}function Ww(n,e){return j(this,null,function*(){try{let r=(yield eC()).transaction(Ws,"readwrite");yield r.objectStore(Ws).put(e,tC(n)),yield r.done}catch(t){if(t instanceof dr)fr.warn(t.message);else{let r=Br.create("idb-set",{originalErrorMessage:t?.message});fr.warn(r.message)}}})}function tC(n){return`${n.name}!${n.options.appId}`}var DR=1024,SR=30,up=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new dp(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return j(this,null,function*(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Kw();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>SR){let i=MR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){fr.warn(e)}})}getHeartbeatsHeader(){return j(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=Kw(),{heartbeatsToSend:t,unsentEntries:r}=TR(this._heartbeatsCache.heartbeats),i=Hs(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return fr.warn(e),""}})}};function Kw(){return new Date().toISOString().substring(0,10)}function TR(n,e=DR){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Qw(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Qw(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var dp=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return j(this,null,function*(){return Jf()?Vw().then(()=>!0).catch(()=>!1):!1})}read(){return j(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield xR(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return j(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Ww(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return j(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Ww(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function Qw(n){return Hs(JSON.stringify({version:2,heartbeats:n})).length}function MR(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function AR(n){Gs(new hr("platform-logger",e=>new op(e),"PRIVATE")),Gs(new hr("heartbeat",e=>new up(e),"PRIVATE")),Ur(sp,qw,n),Ur(sp,qw,"esm2020"),Ur("fire-js","")}AR("");var PR="firebase",OR="12.6.0";Ur(PR,OR,"app");var nC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},rC={};var pr,hp;(function(){var n;function e(D,w){function I(){}I.prototype=w.prototype,D.F=w.prototype,D.prototype=new I,D.prototype.constructor=D,D.D=function(S,x,P){for(var E=Array(arguments.length-2),At=2;At<arguments.length;At++)E[At-2]=arguments[At];return w.prototype[x].apply(S,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,w,I){I||(I=0);let S=Array(16);if(typeof w=="string")for(var x=0;x<16;++x)S[x]=w.charCodeAt(I++)|w.charCodeAt(I++)<<8|w.charCodeAt(I++)<<16|w.charCodeAt(I++)<<24;else for(x=0;x<16;++x)S[x]=w[I++]|w[I++]<<8|w[I++]<<16|w[I++]<<24;w=D.g[0],I=D.g[1],x=D.g[2];let P=D.g[3],E;E=w+(P^I&(x^P))+S[0]+3614090360&4294967295,w=I+(E<<7&4294967295|E>>>25),E=P+(x^w&(I^x))+S[1]+3905402710&4294967295,P=w+(E<<12&4294967295|E>>>20),E=x+(I^P&(w^I))+S[2]+606105819&4294967295,x=P+(E<<17&4294967295|E>>>15),E=I+(w^x&(P^w))+S[3]+3250441966&4294967295,I=x+(E<<22&4294967295|E>>>10),E=w+(P^I&(x^P))+S[4]+4118548399&4294967295,w=I+(E<<7&4294967295|E>>>25),E=P+(x^w&(I^x))+S[5]+1200080426&4294967295,P=w+(E<<12&4294967295|E>>>20),E=x+(I^P&(w^I))+S[6]+2821735955&4294967295,x=P+(E<<17&4294967295|E>>>15),E=I+(w^x&(P^w))+S[7]+4249261313&4294967295,I=x+(E<<22&4294967295|E>>>10),E=w+(P^I&(x^P))+S[8]+1770035416&4294967295,w=I+(E<<7&4294967295|E>>>25),E=P+(x^w&(I^x))+S[9]+2336552879&4294967295,P=w+(E<<12&4294967295|E>>>20),E=x+(I^P&(w^I))+S[10]+4294925233&4294967295,x=P+(E<<17&4294967295|E>>>15),E=I+(w^x&(P^w))+S[11]+2304563134&4294967295,I=x+(E<<22&4294967295|E>>>10),E=w+(P^I&(x^P))+S[12]+1804603682&4294967295,w=I+(E<<7&4294967295|E>>>25),E=P+(x^w&(I^x))+S[13]+4254626195&4294967295,P=w+(E<<12&4294967295|E>>>20),E=x+(I^P&(w^I))+S[14]+2792965006&4294967295,x=P+(E<<17&4294967295|E>>>15),E=I+(w^x&(P^w))+S[15]+1236535329&4294967295,I=x+(E<<22&4294967295|E>>>10),E=w+(x^P&(I^x))+S[1]+4129170786&4294967295,w=I+(E<<5&4294967295|E>>>27),E=P+(I^x&(w^I))+S[6]+3225465664&4294967295,P=w+(E<<9&4294967295|E>>>23),E=x+(w^I&(P^w))+S[11]+643717713&4294967295,x=P+(E<<14&4294967295|E>>>18),E=I+(P^w&(x^P))+S[0]+3921069994&4294967295,I=x+(E<<20&4294967295|E>>>12),E=w+(x^P&(I^x))+S[5]+3593408605&4294967295,w=I+(E<<5&4294967295|E>>>27),E=P+(I^x&(w^I))+S[10]+38016083&4294967295,P=w+(E<<9&4294967295|E>>>23),E=x+(w^I&(P^w))+S[15]+3634488961&4294967295,x=P+(E<<14&4294967295|E>>>18),E=I+(P^w&(x^P))+S[4]+3889429448&4294967295,I=x+(E<<20&4294967295|E>>>12),E=w+(x^P&(I^x))+S[9]+568446438&4294967295,w=I+(E<<5&4294967295|E>>>27),E=P+(I^x&(w^I))+S[14]+3275163606&4294967295,P=w+(E<<9&4294967295|E>>>23),E=x+(w^I&(P^w))+S[3]+4107603335&4294967295,x=P+(E<<14&4294967295|E>>>18),E=I+(P^w&(x^P))+S[8]+1163531501&4294967295,I=x+(E<<20&4294967295|E>>>12),E=w+(x^P&(I^x))+S[13]+2850285829&4294967295,w=I+(E<<5&4294967295|E>>>27),E=P+(I^x&(w^I))+S[2]+4243563512&4294967295,P=w+(E<<9&4294967295|E>>>23),E=x+(w^I&(P^w))+S[7]+1735328473&4294967295,x=P+(E<<14&4294967295|E>>>18),E=I+(P^w&(x^P))+S[12]+2368359562&4294967295,I=x+(E<<20&4294967295|E>>>12),E=w+(I^x^P)+S[5]+4294588738&4294967295,w=I+(E<<4&4294967295|E>>>28),E=P+(w^I^x)+S[8]+2272392833&4294967295,P=w+(E<<11&4294967295|E>>>21),E=x+(P^w^I)+S[11]+1839030562&4294967295,x=P+(E<<16&4294967295|E>>>16),E=I+(x^P^w)+S[14]+4259657740&4294967295,I=x+(E<<23&4294967295|E>>>9),E=w+(I^x^P)+S[1]+2763975236&4294967295,w=I+(E<<4&4294967295|E>>>28),E=P+(w^I^x)+S[4]+1272893353&4294967295,P=w+(E<<11&4294967295|E>>>21),E=x+(P^w^I)+S[7]+4139469664&4294967295,x=P+(E<<16&4294967295|E>>>16),E=I+(x^P^w)+S[10]+3200236656&4294967295,I=x+(E<<23&4294967295|E>>>9),E=w+(I^x^P)+S[13]+681279174&4294967295,w=I+(E<<4&4294967295|E>>>28),E=P+(w^I^x)+S[0]+3936430074&4294967295,P=w+(E<<11&4294967295|E>>>21),E=x+(P^w^I)+S[3]+3572445317&4294967295,x=P+(E<<16&4294967295|E>>>16),E=I+(x^P^w)+S[6]+76029189&4294967295,I=x+(E<<23&4294967295|E>>>9),E=w+(I^x^P)+S[9]+3654602809&4294967295,w=I+(E<<4&4294967295|E>>>28),E=P+(w^I^x)+S[12]+3873151461&4294967295,P=w+(E<<11&4294967295|E>>>21),E=x+(P^w^I)+S[15]+530742520&4294967295,x=P+(E<<16&4294967295|E>>>16),E=I+(x^P^w)+S[2]+3299628645&4294967295,I=x+(E<<23&4294967295|E>>>9),E=w+(x^(I|~P))+S[0]+4096336452&4294967295,w=I+(E<<6&4294967295|E>>>26),E=P+(I^(w|~x))+S[7]+1126891415&4294967295,P=w+(E<<10&4294967295|E>>>22),E=x+(w^(P|~I))+S[14]+2878612391&4294967295,x=P+(E<<15&4294967295|E>>>17),E=I+(P^(x|~w))+S[5]+4237533241&4294967295,I=x+(E<<21&4294967295|E>>>11),E=w+(x^(I|~P))+S[12]+1700485571&4294967295,w=I+(E<<6&4294967295|E>>>26),E=P+(I^(w|~x))+S[3]+2399980690&4294967295,P=w+(E<<10&4294967295|E>>>22),E=x+(w^(P|~I))+S[10]+4293915773&4294967295,x=P+(E<<15&4294967295|E>>>17),E=I+(P^(x|~w))+S[1]+2240044497&4294967295,I=x+(E<<21&4294967295|E>>>11),E=w+(x^(I|~P))+S[8]+1873313359&4294967295,w=I+(E<<6&4294967295|E>>>26),E=P+(I^(w|~x))+S[15]+4264355552&4294967295,P=w+(E<<10&4294967295|E>>>22),E=x+(w^(P|~I))+S[6]+2734768916&4294967295,x=P+(E<<15&4294967295|E>>>17),E=I+(P^(x|~w))+S[13]+1309151649&4294967295,I=x+(E<<21&4294967295|E>>>11),E=w+(x^(I|~P))+S[4]+4149444226&4294967295,w=I+(E<<6&4294967295|E>>>26),E=P+(I^(w|~x))+S[11]+3174756917&4294967295,P=w+(E<<10&4294967295|E>>>22),E=x+(w^(P|~I))+S[2]+718787259&4294967295,x=P+(E<<15&4294967295|E>>>17),E=I+(P^(x|~w))+S[9]+3951481745&4294967295,D.g[0]=D.g[0]+w&4294967295,D.g[1]=D.g[1]+(x+(E<<21&4294967295|E>>>11))&4294967295,D.g[2]=D.g[2]+x&4294967295,D.g[3]=D.g[3]+P&4294967295}r.prototype.v=function(D,w){w===void 0&&(w=D.length);let I=w-this.blockSize,S=this.C,x=this.h,P=0;for(;P<w;){if(x==0)for(;P<=I;)i(this,D,P),P+=this.blockSize;if(typeof D=="string"){for(;P<w;)if(S[x++]=D.charCodeAt(P++),x==this.blockSize){i(this,S),x=0;break}}else for(;P<w;)if(S[x++]=D[P++],x==this.blockSize){i(this,S),x=0;break}}this.h=x,this.o+=w},r.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var w=1;w<D.length-8;++w)D[w]=0;w=this.o*8;for(var I=D.length-8;I<D.length;++I)D[I]=w&255,w/=256;for(this.v(D),D=Array(16),w=0,I=0;I<4;++I)for(let S=0;S<32;S+=8)D[w++]=this.g[I]>>>S&255;return D};function o(D,w){var I=c;return Object.prototype.hasOwnProperty.call(I,D)?I[D]:I[D]=w(D)}function s(D,w){this.h=w;let I=[],S=!0;for(let x=D.length-1;x>=0;x--){let P=D[x]|0;S&&P==w||(I[x]=P,S=!1)}this.g=I}var c={};function l(D){return-128<=D&&D<128?o(D,function(w){return new s([w|0],w<0?-1:0)}):new s([D|0],D<0?-1:0)}function u(D){if(isNaN(D)||!isFinite(D))return g;if(D<0)return k(u(-D));let w=[],I=1;for(let S=0;D>=I;S++)w[S]=D/I|0,I*=4294967296;return new s(w,0)}function p(D,w){if(D.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(D.charAt(0)=="-")return k(p(D.substring(1),w));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');let I=u(Math.pow(w,8)),S=g;for(let P=0;P<D.length;P+=8){var x=Math.min(8,D.length-P);let E=parseInt(D.substring(P,P+x),w);x<8?(x=u(Math.pow(w,x)),S=S.j(x).add(u(E))):(S=S.j(I),S=S.add(u(E)))}return S}var g=l(0),b=l(1),C=l(16777216);n=s.prototype,n.m=function(){if(R(this))return-k(this).m();let D=0,w=1;for(let I=0;I<this.g.length;I++){let S=this.i(I);D+=(S>=0?S:4294967296+S)*w,w*=4294967296}return D},n.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(N(this))return"0";if(R(this))return"-"+k(this).toString(D);let w=u(Math.pow(D,6));var I=this;let S="";for(;;){let x=Ee(I,w).g;I=G(I,x.j(w));let P=((I.g.length>0?I.g[0]:I.h)>>>0).toString(D);if(I=x,N(I))return P+S;for(;P.length<6;)P="0"+P;S=P+S}},n.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function N(D){if(D.h!=0)return!1;for(let w=0;w<D.g.length;w++)if(D.g[w]!=0)return!1;return!0}function R(D){return D.h==-1}n.l=function(D){return D=G(this,D),R(D)?-1:N(D)?0:1};function k(D){let w=D.g.length,I=[];for(let S=0;S<w;S++)I[S]=~D.g[S];return new s(I,~D.h).add(b)}n.abs=function(){return R(this)?k(this):this},n.add=function(D){let w=Math.max(this.g.length,D.g.length),I=[],S=0;for(let x=0;x<=w;x++){let P=S+(this.i(x)&65535)+(D.i(x)&65535),E=(P>>>16)+(this.i(x)>>>16)+(D.i(x)>>>16);S=E>>>16,P&=65535,E&=65535,I[x]=E<<16|P}return new s(I,I[I.length-1]&-2147483648?-1:0)};function G(D,w){return D.add(k(w))}n.j=function(D){if(N(this)||N(D))return g;if(R(this))return R(D)?k(this).j(k(D)):k(k(this).j(D));if(R(D))return k(this.j(k(D)));if(this.l(C)<0&&D.l(C)<0)return u(this.m()*D.m());let w=this.g.length+D.g.length,I=[];for(var S=0;S<2*w;S++)I[S]=0;for(S=0;S<this.g.length;S++)for(let x=0;x<D.g.length;x++){let P=this.i(S)>>>16,E=this.i(S)&65535,At=D.i(x)>>>16,Ir=D.i(x)&65535;I[2*S+2*x]+=E*Ir,re(I,2*S+2*x),I[2*S+2*x+1]+=P*Ir,re(I,2*S+2*x+1),I[2*S+2*x+1]+=E*At,re(I,2*S+2*x+1),I[2*S+2*x+2]+=P*At,re(I,2*S+2*x+2)}for(D=0;D<w;D++)I[D]=I[2*D+1]<<16|I[2*D];for(D=w;D<2*w;D++)I[D]=0;return new s(I,0)};function re(D,w){for(;(D[w]&65535)!=D[w];)D[w+1]+=D[w]>>>16,D[w]&=65535,w++}function Y(D,w){this.g=D,this.h=w}function Ee(D,w){if(N(w))throw Error("division by zero");if(N(D))return new Y(g,g);if(R(D))return w=Ee(k(D),w),new Y(k(w.g),k(w.h));if(R(w))return w=Ee(D,k(w)),new Y(k(w.g),w.h);if(D.g.length>30){if(R(D)||R(w))throw Error("slowDivide_ only works with positive integers.");for(var I=b,S=w;S.l(D)<=0;)I=ke(I),S=ke(S);var x=xe(I,1),P=xe(S,1);for(S=xe(S,2),I=xe(I,2);!N(S);){var E=P.add(S);E.l(D)<=0&&(x=x.add(I),P=E),S=xe(S,1),I=xe(I,1)}return w=G(D,x.j(w)),new Y(x,w)}for(x=g;D.l(w)>=0;){for(I=Math.max(1,Math.floor(D.m()/w.m())),S=Math.ceil(Math.log(I)/Math.LN2),S=S<=48?1:Math.pow(2,S-48),P=u(I),E=P.j(w);R(E)||E.l(D)>0;)I-=S,P=u(I),E=P.j(w);N(P)&&(P=b),x=x.add(P),D=G(D,E)}return new Y(x,D)}n.B=function(D){return Ee(this,D).h},n.and=function(D){let w=Math.max(this.g.length,D.g.length),I=[];for(let S=0;S<w;S++)I[S]=this.i(S)&D.i(S);return new s(I,this.h&D.h)},n.or=function(D){let w=Math.max(this.g.length,D.g.length),I=[];for(let S=0;S<w;S++)I[S]=this.i(S)|D.i(S);return new s(I,this.h|D.h)},n.xor=function(D){let w=Math.max(this.g.length,D.g.length),I=[];for(let S=0;S<w;S++)I[S]=this.i(S)^D.i(S);return new s(I,this.h^D.h)};function ke(D){let w=D.g.length+1,I=[];for(let S=0;S<w;S++)I[S]=D.i(S)<<1|D.i(S-1)>>>31;return new s(I,D.h)}function xe(D,w){let I=w>>5;w%=32;let S=D.g.length-I,x=[];for(let P=0;P<S;P++)x[P]=w>0?D.i(P+I)>>>w|D.i(P+I+1)<<32-w:D.i(P+I);return new s(x,D.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,hp=rC.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=p,pr=rC.Integer=s}).apply(typeof nC<"u"?nC:typeof self<"u"?self:typeof window<"u"?window:{});var Fl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},mr={};var fp,NR,bo,pp,Qs,Vl,mp,gp,yp;(function(){var n,e=Object.defineProperty;function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fl=="object"&&Fl];for(var d=0;d<a.length;++d){var m=a[d];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=t(this);function i(a,d){if(d)e:{var m=r;a=a.split(".");for(var _=0;_<a.length-1;_++){var T=a[_];if(!(T in m))break e;m=m[T]}a=a[a.length-1],_=m[a],d=d(_),d!=_&&d!=null&&e(m,a,{configurable:!0,writable:!0,value:d})}}i("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(a){return a||function(d){var m=[],_;for(_ in d)Object.prototype.hasOwnProperty.call(d,_)&&m.push([_,d[_]]);return m}});var o=o||{},s=this||self;function c(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function l(a,d,m){return a.call.apply(a.bind,arguments)}function u(a,d,m){return u=l,u.apply(null,arguments)}function p(a,d){var m=Array.prototype.slice.call(arguments,1);return function(){var _=m.slice();return _.push.apply(_,arguments),a.apply(this,_)}}function g(a,d){function m(){}m.prototype=d.prototype,a.Z=d.prototype,a.prototype=new m,a.prototype.constructor=a,a.Ob=function(_,T,O){for(var z=Array(arguments.length-2),le=2;le<arguments.length;le++)z[le-2]=arguments[le];return d.prototype[T].apply(_,z)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function C(a){let d=a.length;if(d>0){let m=Array(d);for(let _=0;_<d;_++)m[_]=a[_];return m}return[]}function N(a,d){for(let _=1;_<arguments.length;_++){let T=arguments[_];var m=typeof T;if(m=m!="object"?m:T?Array.isArray(T)?"array":m:"null",m=="array"||m=="object"&&typeof T.length=="number"){m=a.length||0;let O=T.length||0;a.length=m+O;for(let z=0;z<O;z++)a[m+z]=T[z]}else a.push(T)}}class R{constructor(d,m){this.i=d,this.j=m,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function k(a){s.setTimeout(()=>{throw a},0)}function G(){var a=D;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class re{constructor(){this.h=this.g=null}add(d,m){let _=Y.get();_.set(d,m),this.h?this.h.next=_:this.g=_,this.h=_}}var Y=new R(()=>new Ee,a=>a.reset());class Ee{constructor(){this.next=this.g=this.h=null}set(d,m){this.h=d,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let ke,xe=!1,D=new re,w=()=>{let a=Promise.resolve(void 0);ke=()=>{a.then(I)}};function I(){for(var a;a=G();){try{a.h.call(a.g)}catch(m){k(m)}var d=Y;d.j(a),d.h<100&&(d.h++,a.next=d.g,d.g=a)}xe=!1}function S(){this.u=this.u,this.C=this.C}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let m=()=>{};s.addEventListener("test",m,d),s.removeEventListener("test",m,d)}catch{}return a}();function E(a){return/^[\s\xa0]*$/.test(a)}function At(a,d){x.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,d)}g(At,x),At.prototype.init=function(a,d){let m=this.type=a.type,_=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget,d||(m=="mouseover"?d=a.fromElement:m=="mouseout"&&(d=a.toElement)),this.relatedTarget=d,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&At.Z.h.call(this)},At.prototype.h=function(){At.Z.h.call(this);let a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Ir="closure_listenable_"+(Math.random()*1e6|0),MI=0;function AI(a,d,m,_,T){this.listener=a,this.proxy=null,this.src=d,this.type=m,this.capture=!!_,this.ha=T,this.key=++MI,this.da=this.fa=!1}function Ca(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Ea(a,d,m){for(let _ in a)d.call(m,a[_],_,a)}function PI(a,d){for(let m in a)d.call(void 0,a[m],m,a)}function Fg(a){let d={};for(let m in a)d[m]=a[m];return d}let Vg="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Lg(a,d){let m,_;for(let T=1;T<arguments.length;T++){_=arguments[T];for(m in _)a[m]=_[m];for(let O=0;O<Vg.length;O++)m=Vg[O],Object.prototype.hasOwnProperty.call(_,m)&&(a[m]=_[m])}}function Ia(a){this.src=a,this.g={},this.h=0}Ia.prototype.add=function(a,d,m,_,T){let O=a.toString();a=this.g[O],a||(a=this.g[O]=[],this.h++);let z=Lu(a,d,_,T);return z>-1?(d=a[z],m||(d.fa=!1)):(d=new AI(d,this.src,O,!!_,T),d.fa=m,a.push(d)),d};function Vu(a,d){let m=d.type;if(m in a.g){var _=a.g[m],T=Array.prototype.indexOf.call(_,d,void 0),O;(O=T>=0)&&Array.prototype.splice.call(_,T,1),O&&(Ca(d),a.g[m].length==0&&(delete a.g[m],a.h--))}}function Lu(a,d,m,_){for(let T=0;T<a.length;++T){let O=a[T];if(!O.da&&O.listener==d&&O.capture==!!m&&O.ha==_)return T}return-1}var ju="closure_lm_"+(Math.random()*1e6|0),Bu={};function jg(a,d,m,_,T){if(_&&_.once)return Ug(a,d,m,_,T);if(Array.isArray(d)){for(let O=0;O<d.length;O++)jg(a,d[O],m,_,T);return null}return m=Hu(m),a&&a[Ir]?a.J(d,m,c(_)?!!_.capture:!!_,T):Bg(a,d,m,!1,_,T)}function Bg(a,d,m,_,T,O){if(!d)throw Error("Invalid event type");let z=c(T)?!!T.capture:!!T,le=$u(a);if(le||(a[ju]=le=new Ia(a)),m=le.add(d,m,_,z,O),m.proxy)return m;if(_=OI(),m.proxy=_,_.src=a,_.listener=m,a.addEventListener)P||(T=z),T===void 0&&(T=!1),a.addEventListener(d.toString(),_,T);else if(a.attachEvent)a.attachEvent(zg(d.toString()),_);else if(a.addListener&&a.removeListener)a.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return m}function OI(){function a(m){return d.call(a.src,a.listener,m)}let d=NI;return a}function Ug(a,d,m,_,T){if(Array.isArray(d)){for(let O=0;O<d.length;O++)Ug(a,d[O],m,_,T);return null}return m=Hu(m),a&&a[Ir]?a.K(d,m,c(_)?!!_.capture:!!_,T):Bg(a,d,m,!0,_,T)}function $g(a,d,m,_,T){if(Array.isArray(d))for(var O=0;O<d.length;O++)$g(a,d[O],m,_,T);else _=c(_)?!!_.capture:!!_,m=Hu(m),a&&a[Ir]?(a=a.i,O=String(d).toString(),O in a.g&&(d=a.g[O],m=Lu(d,m,_,T),m>-1&&(Ca(d[m]),Array.prototype.splice.call(d,m,1),d.length==0&&(delete a.g[O],a.h--)))):a&&(a=$u(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Lu(d,m,_,T)),(m=a>-1?d[a]:null)&&Uu(m))}function Uu(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[Ir])Vu(d.i,a);else{var m=a.type,_=a.proxy;d.removeEventListener?d.removeEventListener(m,_,a.capture):d.detachEvent?d.detachEvent(zg(m),_):d.addListener&&d.removeListener&&d.removeListener(_),(m=$u(d))?(Vu(m,a),m.h==0&&(m.src=null,d[ju]=null)):Ca(a)}}}function zg(a){return a in Bu?Bu[a]:Bu[a]="on"+a}function NI(a,d){if(a.da)a=!0;else{d=new At(d,this);let m=a.listener,_=a.ha||a.src;a.fa&&Uu(a),a=m.call(_,d)}return a}function $u(a){return a=a[ju],a instanceof Ia?a:null}var zu="__closure_events_fn_"+(Math.random()*1e9>>>0);function Hu(a){return typeof a=="function"?a:(a[zu]||(a[zu]=function(d){return a.handleEvent(d)}),a[zu])}function _t(){S.call(this),this.i=new Ia(this),this.M=this,this.G=null}g(_t,S),_t.prototype[Ir]=!0,_t.prototype.removeEventListener=function(a,d,m,_){$g(this,a,d,m,_)};function xt(a,d){var m,_=a.G;if(_)for(m=[];_;_=_.G)m.push(_);if(a=a.M,_=d.type||d,typeof d=="string")d=new x(d,a);else if(d instanceof x)d.target=d.target||a;else{var T=d;d=new x(_,a),Lg(d,T)}T=!0;let O,z;if(m)for(z=m.length-1;z>=0;z--)O=d.g=m[z],T=xa(O,_,!0,d)&&T;if(O=d.g=a,T=xa(O,_,!0,d)&&T,T=xa(O,_,!1,d)&&T,m)for(z=0;z<m.length;z++)O=d.g=m[z],T=xa(O,_,!1,d)&&T}_t.prototype.N=function(){if(_t.Z.N.call(this),this.i){var a=this.i;for(let d in a.g){let m=a.g[d];for(let _=0;_<m.length;_++)Ca(m[_]);delete a.g[d],a.h--}}this.G=null},_t.prototype.J=function(a,d,m,_){return this.i.add(String(a),d,!1,m,_)},_t.prototype.K=function(a,d,m,_){return this.i.add(String(a),d,!0,m,_)};function xa(a,d,m,_){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();let T=!0;for(let O=0;O<d.length;++O){let z=d[O];if(z&&!z.da&&z.capture==m){let le=z.listener,ot=z.ha||z.src;z.fa&&Vu(a.i,z),T=le.call(ot,_)!==!1&&T}}return T&&!_.defaultPrevented}function RI(a,d){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=u(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:s.setTimeout(a,d||0)}function Hg(a){a.g=RI(()=>{a.g=null,a.i&&(a.i=!1,Hg(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class kI extends S{constructor(d,m){super(),this.m=d,this.l=m,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Hg(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Go(a){S.call(this),this.h=a,this.g={}}g(Go,S);var qg=[];function Gg(a){Ea(a.g,function(d,m){this.g.hasOwnProperty(m)&&Uu(d)},a),a.g={}}Go.prototype.N=function(){Go.Z.N.call(this),Gg(this)},Go.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qu=s.JSON.stringify,FI=s.JSON.parse,VI=class{stringify(a){return s.JSON.stringify(a,void 0)}parse(a){return s.JSON.parse(a,void 0)}};function Wg(){}function Kg(){}var Wo={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Gu(){x.call(this,"d")}g(Gu,x);function Wu(){x.call(this,"c")}g(Wu,x);var Xr={},Qg=null;function Da(){return Qg=Qg||new _t}Xr.Ia="serverreachability";function Yg(a){x.call(this,Xr.Ia,a)}g(Yg,x);function Ko(a){let d=Da();xt(d,new Yg(d))}Xr.STAT_EVENT="statevent";function Jg(a,d){x.call(this,Xr.STAT_EVENT,a),this.stat=d}g(Jg,x);function Dt(a){let d=Da();xt(d,new Jg(d,a))}Xr.Ja="timingevent";function Xg(a,d){x.call(this,Xr.Ja,a),this.size=d}g(Xg,x);function Qo(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){a()},d)}function Yo(){this.g=!0}Yo.prototype.ua=function(){this.g=!1};function LI(a,d,m,_,T,O){a.info(function(){if(a.g)if(O){var z="",le=O.split("&");for(let Ne=0;Ne<le.length;Ne++){var ot=le[Ne].split("=");if(ot.length>1){let ct=ot[0];ot=ot[1];let Dn=ct.split("_");z=Dn.length>=2&&Dn[1]=="type"?z+(ct+"="+ot+"&"):z+(ct+"=redacted&")}}}else z=null;else z=O;return"XMLHTTP REQ ("+_+") [attempt "+T+"]: "+d+`
`+m+`
`+z})}function jI(a,d,m,_,T,O,z){a.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+T+"]: "+d+`
`+m+`
`+O+" "+z})}function Li(a,d,m,_){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+UI(a,m)+(_?" "+_:"")})}function BI(a,d){a.info(function(){return"TIMEOUT: "+d})}Yo.prototype.info=function(){};function UI(a,d){if(!a.g)return d;if(!d)return null;try{let O=JSON.parse(d);if(O){for(a=0;a<O.length;a++)if(Array.isArray(O[a])){var m=O[a];if(!(m.length<2)){var _=m[1];if(Array.isArray(_)&&!(_.length<1)){var T=_[0];if(T!="noop"&&T!="stop"&&T!="close")for(let z=1;z<_.length;z++)_[z]=""}}}}return qu(O)}catch{return d}}var Sa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Zg={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ey;function Ku(){}g(Ku,Wg),Ku.prototype.g=function(){return new XMLHttpRequest},ey=new Ku;function Jo(a){return encodeURIComponent(String(a))}function $I(a){var d=1;a=a.split(":");let m=[];for(;d>0&&a.length;)m.push(a.shift()),d--;return a.length&&m.push(a.join(":")),m}function xr(a,d,m,_){this.j=a,this.i=d,this.l=m,this.S=_||1,this.V=new Go(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ty}function ty(){this.i=null,this.g="",this.h=!1}var ny={},Qu={};function Yu(a,d,m){a.M=1,a.A=Ma(xn(d)),a.u=m,a.R=!0,ry(a,null)}function ry(a,d){a.F=Date.now(),Ta(a),a.B=xn(a.A);var m=a.B,_=a.S;Array.isArray(_)||(_=[String(_)]),gy(m.i,"t",_),a.C=0,m=a.j.L,a.h=new ty,a.g=Ry(a.j,m?d:null,!a.u),a.P>0&&(a.O=new kI(u(a.Y,a,a.g),a.P)),d=a.V,m=a.g,_=a.ba;var T="readystatechange";Array.isArray(T)||(T&&(qg[0]=T.toString()),T=qg);for(let O=0;O<T.length;O++){let z=jg(m,T[O],_||d.handleEvent,!1,d.h||d);if(!z)break;d.g[z.key]=z}d=a.J?Fg(a.J):{},a.u?(a.v||(a.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,d)):(a.v="GET",a.g.ea(a.B,a.v,null,d)),Ko(),LI(a.i,a.v,a.B,a.l,a.S,a.u)}xr.prototype.ba=function(a){a=a.target;let d=this.O;d&&Tr(a)==3?d.j():this.Y(a)},xr.prototype.Y=function(a){try{if(a==this.g)e:{let le=Tr(this.g),ot=this.g.ya(),Ne=this.g.ca();if(!(le<3)&&(le!=3||this.g&&(this.h.h||this.g.la()||Ey(this.g)))){this.K||le!=4||ot==7||(ot==8||Ne<=0?Ko(3):Ko(2)),Ju(this);var d=this.g.ca();this.X=d;var m=zI(this);if(this.o=d==200,jI(this.i,this.v,this.B,this.l,this.S,le,d),this.o){if(this.U&&!this.L){t:{if(this.g){var _,T=this.g;if((_=T.g?T.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(_)){var O=_;break t}}O=null}if(a=O)Li(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Xu(this,a);else{this.o=!1,this.m=3,Dt(12),Zr(this),Xo(this);break e}}if(this.R){a=!0;let ct;for(;!this.K&&this.C<m.length;)if(ct=HI(this,m),ct==Qu){le==4&&(this.m=4,Dt(14),a=!1),Li(this.i,this.l,null,"[Incomplete Response]");break}else if(ct==ny){this.m=4,Dt(15),Li(this.i,this.l,m,"[Invalid Chunk]"),a=!1;break}else Li(this.i,this.l,ct,null),Xu(this,ct);if(iy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),le!=4||m.length!=0||this.h.h||(this.m=1,Dt(16),a=!1),this.o=this.o&&a,!a)Li(this.i,this.l,m,"[Invalid Chunked Response]"),Zr(this),Xo(this);else if(m.length>0&&!this.W){this.W=!0;var z=this.j;z.g==this&&z.aa&&!z.P&&(z.j.info("Great, no buffering proxy detected. Bytes received: "+m.length),od(z),z.P=!0,Dt(11))}}else Li(this.i,this.l,m,null),Xu(this,m);le==4&&Zr(this),this.o&&!this.K&&(le==4?Ay(this.j,this):(this.o=!1,Ta(this)))}else ix(this.g),d==400&&m.indexOf("Unknown SID")>0?(this.m=3,Dt(12)):(this.m=0,Dt(13)),Zr(this),Xo(this)}}}catch{}finally{}};function zI(a){if(!iy(a))return a.g.la();let d=Ey(a.g);if(d==="")return"";let m="",_=d.length,T=Tr(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Zr(a),Xo(a),"";a.h.i=new s.TextDecoder}for(let O=0;O<_;O++)a.h.h=!0,m+=a.h.i.decode(d[O],{stream:!(T&&O==_-1)});return d.length=0,a.h.g+=m,a.C=0,a.h.g}function iy(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function HI(a,d){var m=a.C,_=d.indexOf(`
`,m);return _==-1?Qu:(m=Number(d.substring(m,_)),isNaN(m)?ny:(_+=1,_+m>d.length?Qu:(d=d.slice(_,_+m),a.C=_+m,d)))}xr.prototype.cancel=function(){this.K=!0,Zr(this)};function Ta(a){a.T=Date.now()+a.H,oy(a,a.H)}function oy(a,d){if(a.D!=null)throw Error("WatchDog timer not null");a.D=Qo(u(a.aa,a),d)}function Ju(a){a.D&&(s.clearTimeout(a.D),a.D=null)}xr.prototype.aa=function(){this.D=null;let a=Date.now();a-this.T>=0?(BI(this.i,this.B),this.M!=2&&(Ko(),Dt(17)),Zr(this),this.m=2,Xo(this)):oy(this,this.T-a)};function Xo(a){a.j.I==0||a.K||Ay(a.j,a)}function Zr(a){Ju(a);var d=a.O;d&&typeof d.dispose=="function"&&d.dispose(),a.O=null,Gg(a.V),a.g&&(d=a.g,a.g=null,d.abort(),d.dispose())}function Xu(a,d){try{var m=a.j;if(m.I!=0&&(m.g==a||Zu(m.h,a))){if(!a.L&&Zu(m.h,a)&&m.I==3){try{var _=m.Ba.g.parse(d)}catch{_=null}if(Array.isArray(_)&&_.length==3){var T=_;if(T[0]==0){e:if(!m.v){if(m.g)if(m.g.F+3e3<a.F)ka(m),Na(m);else break e;id(m),Dt(18)}}else m.xa=T[1],0<m.xa-m.K&&T[2]<37500&&m.F&&m.A==0&&!m.C&&(m.C=Qo(u(m.Va,m),6e3));cy(m.h)<=1&&m.ta&&(m.ta=void 0)}else ti(m,11)}else if((a.L||m.g==a)&&ka(m),!E(d))for(T=m.Ba.g.parse(d),d=0;d<T.length;d++){let Ne=T[d],ct=Ne[0];if(!(ct<=m.K))if(m.K=ct,Ne=Ne[1],m.I==2)if(Ne[0]=="c"){m.M=Ne[1],m.ba=Ne[2];let Dn=Ne[3];Dn!=null&&(m.ka=Dn,m.j.info("VER="+m.ka));let ni=Ne[4];ni!=null&&(m.za=ni,m.j.info("SVER="+m.za));let Mr=Ne[5];Mr!=null&&typeof Mr=="number"&&Mr>0&&(_=1.5*Mr,m.O=_,m.j.info("backChannelRequestTimeoutMs_="+_)),_=m;let Ar=a.g;if(Ar){let Va=Ar.g?Ar.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Va){var O=_.h;O.g||Va.indexOf("spdy")==-1&&Va.indexOf("quic")==-1&&Va.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(ed(O,O.h),O.h=null))}if(_.G){let sd=Ar.g?Ar.g.getResponseHeader("X-HTTP-Session-Id"):null;sd&&(_.wa=sd,Le(_.J,_.G,sd))}}m.I=3,m.l&&m.l.ra(),m.aa&&(m.T=Date.now()-a.F,m.j.info("Handshake RTT: "+m.T+"ms")),_=m;var z=a;if(_.na=Ny(_,_.L?_.ba:null,_.W),z.L){ly(_.h,z);var le=z,ot=_.O;ot&&(le.H=ot),le.D&&(Ju(le),Ta(le)),_.g=z}else Ty(_);m.i.length>0&&Ra(m)}else Ne[0]!="stop"&&Ne[0]!="close"||ti(m,7);else m.I==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?ti(m,7):rd(m):Ne[0]!="noop"&&m.l&&m.l.qa(Ne),m.A=0)}}Ko(4)}catch{}}var qI=class{constructor(a,d){this.g=a,this.map=d}};function sy(a){this.l=a||10,s.PerformanceNavigationTiming?(a=s.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ay(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function cy(a){return a.h?1:a.g?a.g.size:0}function Zu(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function ed(a,d){a.g?a.g.add(d):a.h=d}function ly(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}sy.prototype.cancel=function(){if(this.i=uy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function uy(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let m of a.g.values())d=d.concat(m.G);return d}return C(a.i)}var dy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function GI(a,d){if(a){a=a.split("&");for(let m=0;m<a.length;m++){let _=a[m].indexOf("="),T,O=null;_>=0?(T=a[m].substring(0,_),O=a[m].substring(_+1)):T=a[m],d(T,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function Dr(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;a instanceof Dr?(this.l=a.l,Zo(this,a.j),this.o=a.o,this.g=a.g,es(this,a.u),this.h=a.h,td(this,yy(a.i)),this.m=a.m):a&&(d=String(a).match(dy))?(this.l=!1,Zo(this,d[1]||"",!0),this.o=ts(d[2]||""),this.g=ts(d[3]||"",!0),es(this,d[4]),this.h=ts(d[5]||"",!0),td(this,d[6]||"",!0),this.m=ts(d[7]||"")):(this.l=!1,this.i=new rs(null,this.l))}Dr.prototype.toString=function(){let a=[];var d=this.j;d&&a.push(ns(d,hy,!0),":");var m=this.g;return(m||d=="file")&&(a.push("//"),(d=this.o)&&a.push(ns(d,hy,!0),"@"),a.push(Jo(m).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.u,m!=null&&a.push(":",String(m))),(m=this.h)&&(this.g&&m.charAt(0)!="/"&&a.push("/"),a.push(ns(m,m.charAt(0)=="/"?QI:KI,!0))),(m=this.i.toString())&&a.push("?",m),(m=this.m)&&a.push("#",ns(m,JI)),a.join("")},Dr.prototype.resolve=function(a){let d=xn(this),m=!!a.j;m?Zo(d,a.j):m=!!a.o,m?d.o=a.o:m=!!a.g,m?d.g=a.g:m=a.u!=null;var _=a.h;if(m)es(d,a.u);else if(m=!!a.h){if(_.charAt(0)!="/")if(this.g&&!this.h)_="/"+_;else{var T=d.h.lastIndexOf("/");T!=-1&&(_=d.h.slice(0,T+1)+_)}if(T=_,T==".."||T==".")_="";else if(T.indexOf("./")!=-1||T.indexOf("/.")!=-1){_=T.lastIndexOf("/",0)==0,T=T.split("/");let O=[];for(let z=0;z<T.length;){let le=T[z++];le=="."?_&&z==T.length&&O.push(""):le==".."?((O.length>1||O.length==1&&O[0]!="")&&O.pop(),_&&z==T.length&&O.push("")):(O.push(le),_=!0)}_=O.join("/")}else _=T}return m?d.h=_:m=a.i.toString()!=="",m?td(d,yy(a.i)):m=!!a.m,m&&(d.m=a.m),d};function xn(a){return new Dr(a)}function Zo(a,d,m){a.j=m?ts(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function es(a,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);a.u=d}else a.u=null}function td(a,d,m){d instanceof rs?(a.i=d,XI(a.i,a.l)):(m||(d=ns(d,YI)),a.i=new rs(d,a.l))}function Le(a,d,m){a.i.set(d,m)}function Ma(a){return Le(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function ts(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ns(a,d,m){return typeof a=="string"?(a=encodeURI(a).replace(d,WI),m&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function WI(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var hy=/[#\/\?@]/g,KI=/[#\?:]/g,QI=/[#\?]/g,YI=/[#\?@]/g,JI=/#/g;function rs(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function ei(a){a.g||(a.g=new Map,a.h=0,a.i&&GI(a.i,function(d,m){a.add(decodeURIComponent(d.replace(/\+/g," ")),m)}))}n=rs.prototype,n.add=function(a,d){ei(this),this.i=null,a=ji(this,a);let m=this.g.get(a);return m||this.g.set(a,m=[]),m.push(d),this.h+=1,this};function fy(a,d){ei(a),d=ji(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function py(a,d){return ei(a),d=ji(a,d),a.g.has(d)}n.forEach=function(a,d){ei(this),this.g.forEach(function(m,_){m.forEach(function(T){a.call(d,T,_,this)},this)},this)};function my(a,d){ei(a);let m=[];if(typeof d=="string")py(a,d)&&(m=m.concat(a.g.get(ji(a,d))));else for(a=Array.from(a.g.values()),d=0;d<a.length;d++)m=m.concat(a[d]);return m}n.set=function(a,d){return ei(this),this.i=null,a=ji(this,a),py(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},n.get=function(a,d){return a?(a=my(this,a),a.length>0?String(a[0]):d):d};function gy(a,d,m){fy(a,d),m.length>0&&(a.i=null,a.g.set(ji(a,d),C(m)),a.h+=m.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(let _=0;_<d.length;_++){var m=d[_];let T=Jo(m);m=my(this,m);for(let O=0;O<m.length;O++){let z=T;m[O]!==""&&(z+="="+Jo(m[O])),a.push(z)}}return this.i=a.join("&")};function yy(a){let d=new rs;return d.i=a.i,a.g&&(d.g=new Map(a.g),d.h=a.h),d}function ji(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function XI(a,d){d&&!a.j&&(ei(a),a.i=null,a.g.forEach(function(m,_){let T=_.toLowerCase();_!=T&&(fy(this,_),gy(this,T,m))},a)),a.j=d}function ZI(a,d){let m=new Yo;if(s.Image){let _=new Image;_.onload=p(Sr,m,"TestLoadImage: loaded",!0,d,_),_.onerror=p(Sr,m,"TestLoadImage: error",!1,d,_),_.onabort=p(Sr,m,"TestLoadImage: abort",!1,d,_),_.ontimeout=p(Sr,m,"TestLoadImage: timeout",!1,d,_),s.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=a}else d(!1)}function ex(a,d){let m=new Yo,_=new AbortController,T=setTimeout(()=>{_.abort(),Sr(m,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:_.signal}).then(O=>{clearTimeout(T),O.ok?Sr(m,"TestPingServer: ok",!0,d):Sr(m,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(T),Sr(m,"TestPingServer: error",!1,d)})}function Sr(a,d,m,_,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),_(m)}catch{}}function tx(){this.g=new VI}function Aa(a){this.i=a.Sb||null,this.h=a.ab||!1}g(Aa,Wg),Aa.prototype.g=function(){return new Pa(this.i,this.h)};function Pa(a,d){_t.call(this),this.H=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(Pa,_t),n=Pa.prototype,n.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=d,this.readyState=1,os(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(d.body=a),(this.H||s).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,is(this)),this.readyState=0},n.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,os(this)),this.g&&(this.readyState=3,os(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;vy(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function vy(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}n.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?is(this):os(this),this.readyState==3&&vy(this)}},n.Oa=function(a){this.g&&(this.response=this.responseText=a,is(this))},n.Na=function(a){this.g&&(this.response=a,is(this))},n.ga=function(){this.g&&is(this)};function is(a){a.readyState=4,a.l=null,a.j=null,a.B=null,os(a)}n.setRequestHeader=function(a,d){this.A.append(a,d)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var m=d.next();!m.done;)m=m.value,a.push(m[0]+": "+m[1]),m=d.next();return a.join(`\r
`)};function os(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Pa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function _y(a){let d="";return Ea(a,function(m,_){d+=_,d+=":",d+=m,d+=`\r
`}),d}function nd(a,d,m){e:{for(_ in m){var _=!1;break e}_=!0}_||(m=_y(m),typeof a=="string"?m!=null&&Jo(m):Le(a,d,m))}function Ge(a){_t.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(Ge,_t);var nx=/^https?$/i,rx=["POST","PUT"];n=Ge.prototype,n.Fa=function(a){this.H=a},n.ea=function(a,d,m,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ey.g(),this.g.onreadystatechange=b(u(this.Ca,this));try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(O){by(this,O);return}if(a=m||"",m=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var T in _)m.set(T,_[T]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(let O of _.keys())m.set(O,_.get(O));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(m.keys()).find(O=>O.toLowerCase()=="content-type"),T=s.FormData&&a instanceof s.FormData,!(Array.prototype.indexOf.call(rx,d,void 0)>=0)||_||T||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[O,z]of m)this.g.setRequestHeader(O,z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(O){by(this,O)}};function by(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.o=5,wy(a),Oa(a)}function wy(a){a.A||(a.A=!0,xt(a,"complete"),xt(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,xt(this,"complete"),xt(this,"abort"),Oa(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oa(this,!0)),Ge.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Cy(this):this.Xa())},n.Xa=function(){Cy(this)};function Cy(a){if(a.h&&typeof o<"u"){if(a.v&&Tr(a)==4)setTimeout(a.Ca.bind(a),0);else if(xt(a,"readystatechange"),Tr(a)==4){a.h=!1;try{let O=a.ca();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var m;if(!(m=d)){var _;if(_=O===0){let z=String(a.D).match(dy)[1]||null;!z&&s.self&&s.self.location&&(z=s.self.location.protocol.slice(0,-1)),_=!nx.test(z?z.toLowerCase():"")}m=_}if(m)xt(a,"complete"),xt(a,"success");else{a.o=6;try{var T=Tr(a)>2?a.g.statusText:""}catch{T=""}a.l=T+" ["+a.ca()+"]",wy(a)}}finally{Oa(a)}}}}function Oa(a,d){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);let m=a.g;a.g=null,d||xt(a,"ready");try{m.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Tr(a){return a.g?a.g.readyState:0}n.ca=function(){try{return Tr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),FI(d)}};function Ey(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function ix(a){let d={};a=(a.g&&Tr(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<a.length;_++){if(E(a[_]))continue;var m=$I(a[_]);let T=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();let O=d[T]||[];d[T]=O,O.push(m)}PI(d,function(_){return _.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ss(a,d,m){return m&&m.internalChannelParams&&m.internalChannelParams[a]||d}function Iy(a){this.za=0,this.i=[],this.j=new Yo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ss("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ss("baseRetryDelayMs",5e3,a),this.Za=ss("retryDelaySeedMs",1e4,a),this.Ta=ss("forwardChannelMaxRetries",2,a),this.va=ss("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new sy(a&&a.concurrentRequestLimit),this.Ba=new tx,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Iy.prototype,n.ka=8,n.I=1,n.connect=function(a,d,m,_){Dt(0),this.W=a,this.H=d||{},m&&_!==void 0&&(this.H.OSID=m,this.H.OAID=_),this.F=this.X,this.J=Ny(this,null,this.W),Ra(this)};function rd(a){if(xy(a),a.I==3){var d=a.V++,m=xn(a.J);if(Le(m,"SID",a.M),Le(m,"RID",d),Le(m,"TYPE","terminate"),as(a,m),d=new xr(a,a.j,d),d.M=2,d.A=Ma(xn(m)),m=!1,s.navigator&&s.navigator.sendBeacon)try{m=s.navigator.sendBeacon(d.A.toString(),"")}catch{}!m&&s.Image&&(new Image().src=d.A,m=!0),m||(d.g=Ry(d.j,null),d.g.ea(d.A)),d.F=Date.now(),Ta(d)}Oy(a)}function Na(a){a.g&&(od(a),a.g.cancel(),a.g=null)}function xy(a){Na(a),a.v&&(s.clearTimeout(a.v),a.v=null),ka(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&s.clearTimeout(a.m),a.m=null)}function Ra(a){if(!ay(a.h)&&!a.m){a.m=!0;var d=a.Ea;ke||w(),xe||(ke(),xe=!0),D.add(d,a),a.D=0}}function ox(a,d){return cy(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=d.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=Qo(u(a.Ea,a,d),Py(a,a.D)),a.D++,!0)}n.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;let T=new xr(this,this.j,a),O=this.o;if(this.U&&(O?(O=Fg(O),Lg(O,this.U)):O=this.U),this.u!==null||this.R||(T.J=O,O=null),this.S)e:{for(var d=0,m=0;m<this.i.length;m++){t:{var _=this.i[m];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(d+=_,d>4096){d=m;break e}if(d===4096||m===this.i.length-1){d=m+1;break e}}d=1e3}else d=1e3;d=Sy(this,T,d),m=xn(this.J),Le(m,"RID",a),Le(m,"CVER",22),this.G&&Le(m,"X-HTTP-Session-Id",this.G),as(this,m),O&&(this.R?d="headers="+Jo(_y(O))+"&"+d:this.u&&nd(m,this.u,O)),ed(this.h,T),this.Ra&&Le(m,"TYPE","init"),this.S?(Le(m,"$req",d),Le(m,"SID","null"),T.U=!0,Yu(T,m,null)):Yu(T,m,d),this.I=2}}else this.I==3&&(a?Dy(this,a):this.i.length==0||ay(this.h)||Dy(this))};function Dy(a,d){var m;d?m=d.l:m=a.V++;let _=xn(a.J);Le(_,"SID",a.M),Le(_,"RID",m),Le(_,"AID",a.K),as(a,_),a.u&&a.o&&nd(_,a.u,a.o),m=new xr(a,a.j,m,a.D+1),a.u===null&&(m.J=a.o),d&&(a.i=d.G.concat(a.i)),d=Sy(a,m,1e3),m.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),ed(a.h,m),Yu(m,_,d)}function as(a,d){a.H&&Ea(a.H,function(m,_){Le(d,_,m)}),a.l&&Ea({},function(m,_){Le(d,_,m)})}function Sy(a,d,m){m=Math.min(a.i.length,m);let _=a.l?u(a.l.Ka,a.l,a):null;e:{var T=a.i;let le=-1;for(;;){let ot=["count="+m];le==-1?m>0?(le=T[0].g,ot.push("ofs="+le)):le=0:ot.push("ofs="+le);let Ne=!0;for(let ct=0;ct<m;ct++){var O=T[ct].g;let Dn=T[ct].map;if(O-=le,O<0)le=Math.max(0,T[ct].g-100),Ne=!1;else try{O="req"+O+"_"||"";try{var z=Dn instanceof Map?Dn:Object.entries(Dn);for(let[ni,Mr]of z){let Ar=Mr;c(Mr)&&(Ar=qu(Mr)),ot.push(O+ni+"="+encodeURIComponent(Ar))}}catch(ni){throw ot.push(O+"type="+encodeURIComponent("_badmap")),ni}}catch{_&&_(Dn)}}if(Ne){z=ot.join("&");break e}}z=void 0}return a=a.i.splice(0,m),d.G=a,z}function Ty(a){if(!a.g&&!a.v){a.Y=1;var d=a.Da;ke||w(),xe||(ke(),xe=!0),D.add(d,a),a.A=0}}function id(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=Qo(u(a.Da,a),Py(a,a.A)),a.A++,!0)}n.Da=function(){if(this.v=null,My(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=Qo(u(this.Wa,this),a)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Dt(10),Na(this),My(this))};function od(a){a.B!=null&&(s.clearTimeout(a.B),a.B=null)}function My(a){a.g=new xr(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var d=xn(a.na);Le(d,"RID","rpc"),Le(d,"SID",a.M),Le(d,"AID",a.K),Le(d,"CI",a.F?"0":"1"),!a.F&&a.ia&&Le(d,"TO",a.ia),Le(d,"TYPE","xmlhttp"),as(a,d),a.u&&a.o&&nd(d,a.u,a.o),a.O&&(a.g.H=a.O);var m=a.g;a=a.ba,m.M=1,m.A=Ma(xn(d)),m.u=null,m.R=!0,ry(m,a)}n.Va=function(){this.C!=null&&(this.C=null,Na(this),id(this),Dt(19))};function ka(a){a.C!=null&&(s.clearTimeout(a.C),a.C=null)}function Ay(a,d){var m=null;if(a.g==d){ka(a),od(a),a.g=null;var _=2}else if(Zu(a.h,d))m=d.G,ly(a.h,d),_=1;else return;if(a.I!=0){if(d.o)if(_==1){m=d.u?d.u.length:0,d=Date.now()-d.F;var T=a.D;_=Da(),xt(_,new Xg(_,m)),Ra(a)}else Ty(a);else if(T=d.m,T==3||T==0&&d.X>0||!(_==1&&ox(a,d)||_==2&&id(a)))switch(m&&m.length>0&&(d=a.h,d.i=d.i.concat(m)),T){case 1:ti(a,5);break;case 4:ti(a,10);break;case 3:ti(a,6);break;default:ti(a,2)}}}function Py(a,d){let m=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(m*=2),m*d}function ti(a,d){if(a.j.info("Error code "+d),d==2){var m=u(a.bb,a),_=a.Ua;let T=!_;_=new Dr(_||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Zo(_,"https"),Ma(_),T?ZI(_.toString(),m):ex(_.toString(),m)}else Dt(2);a.I=0,a.l&&a.l.pa(d),Oy(a),xy(a)}n.bb=function(a){a?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function Oy(a){if(a.I=0,a.ja=[],a.l){let d=uy(a.h);(d.length!=0||a.i.length!=0)&&(N(a.ja,d),N(a.ja,a.i),a.h.i.length=0,C(a.i),a.i.length=0),a.l.oa()}}function Ny(a,d,m){var _=m instanceof Dr?xn(m):new Dr(m);if(_.g!="")d&&(_.g=d+"."+_.g),es(_,_.u);else{var T=s.location;_=T.protocol,d=d?d+"."+T.hostname:T.hostname,T=+T.port;let O=new Dr(null);_&&Zo(O,_),d&&(O.g=d),T&&es(O,T),m&&(O.h=m),_=O}return m=a.G,d=a.wa,m&&d&&Le(_,m,d),Le(_,"VER",a.ka),as(a,_),_}function Ry(a,d,m){if(d&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Aa&&!a.ma?new Ge(new Aa({ab:m})):new Ge(a.ma),d.Fa(a.L),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ky(){}n=ky.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Fa(){}Fa.prototype.g=function(a,d){return new Rt(a,d)};function Rt(a,d){_t.call(this),this.g=new Iy(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(a?a["X-WebChannel-Client-Profile"]=d.sa:a={"X-WebChannel-Client-Profile":d.sa}),this.g.U=a,(a=d&&d.Qb)&&!E(a)&&(this.g.u=a),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!E(d)&&(this.g.G=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new Bi(this)}g(Rt,_t),Rt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Rt.prototype.close=function(){rd(this.g)},Rt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var m={};m.__data__=a,a=m}else this.v&&(m={},m.__data__=qu(a),a=m);d.i.push(new qI(d.Ya++,a)),d.I==3&&Ra(d)},Rt.prototype.N=function(){this.g.l=null,delete this.j,rd(this.g),delete this.g,Rt.Z.N.call(this)};function Fy(a){Gu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let m in d){a=m;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}g(Fy,Gu);function Vy(){Wu.call(this),this.status=1}g(Vy,Wu);function Bi(a){this.g=a}g(Bi,ky),Bi.prototype.ra=function(){xt(this.g,"a")},Bi.prototype.qa=function(a){xt(this.g,new Fy(a))},Bi.prototype.pa=function(a){xt(this.g,new Vy)},Bi.prototype.oa=function(){xt(this.g,"b")},Fa.prototype.createWebChannel=Fa.prototype.g,Rt.prototype.send=Rt.prototype.o,Rt.prototype.open=Rt.prototype.m,Rt.prototype.close=Rt.prototype.close,yp=mr.createWebChannelTransport=function(){return new Fa},gp=mr.getStatEventTarget=function(){return Da()},mp=mr.Event=Xr,Vl=mr.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Sa.NO_ERROR=0,Sa.TIMEOUT=8,Sa.HTTP_ERROR=6,Qs=mr.ErrorCode=Sa,Zg.COMPLETE="complete",pp=mr.EventType=Zg,Kg.EventType=Wo,Wo.OPEN="a",Wo.CLOSE="b",Wo.ERROR="c",Wo.MESSAGE="d",_t.prototype.listen=_t.prototype.J,bo=mr.WebChannel=Kg,NR=mr.FetchXmlHttpFactory=Aa,Ge.prototype.listenOnce=Ge.prototype.K,Ge.prototype.getLastError=Ge.prototype.Ha,Ge.prototype.getLastErrorCode=Ge.prototype.ya,Ge.prototype.getStatus=Ge.prototype.ca,Ge.prototype.getResponseJson=Ge.prototype.La,Ge.prototype.getResponseText=Ge.prototype.la,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Fa,fp=mr.XhrIo=Ge}).apply(typeof Fl<"u"?Fl:typeof self<"u"?self:typeof window<"u"?window:{});var iC="@firebase/firestore",oC="4.9.2";var pt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");var $o="12.3.0";var Mi=new _o("@firebase/firestore");function wo(){return Mi.logLevel}function K(n,...e){if(Mi.logLevel<=we.DEBUG){let t=e.map(ug);Mi.debug(`Firestore (${$o}): ${n}`,...t)}}function yr(n,...e){if(Mi.logLevel<=we.ERROR){let t=e.map(ug);Mi.error(`Firestore (${$o}): ${n}`,...t)}}function Mo(n,...e){if(Mi.logLevel<=we.WARN){let t=e.map(ug);Mi.warn(`Firestore (${$o}): ${n}`,...t)}}function ug(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function ne(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,YC(n,r,t)}function YC(n,e,t){let r=`FIRESTORE (${$o}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw yr(r),new Error(r)}function Pe(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||YC(e,i,r)}function ae(n,e){return n}var F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},q=class extends dr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var gr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Hl=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Ip=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(pt.UNAUTHENTICATED))}shutdown(){}},xp=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Dp=class{constructor(e){this.t=e,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Pe(this.o===void 0,42304);let r=this.i,i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve(),o=new gr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new gr,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let l=o;e.enqueueRetryable(()=>j(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},c=l=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new gr)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pe(typeof r.accessToken=="string",31837,{l:r}),new Hl(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Pe(e===null||typeof e=="string",2055,{h:e}),new pt(e)}},Sp=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},Tp=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Sp(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ql=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Mp=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Jw(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Pe(this.o===void 0,3512);let r=o=>{o.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,K("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ql(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Pe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ql(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function RR(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var ta=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=RR(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function ye(n,e){return n<e?-1:n>e?1:0}function Ap(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),o=e.charAt(r);if(i!==o)return vp(i)===vp(o)?ye(i,o):vp(i)?1:-1}return ye(n.length,e.length)}var kR=55296,FR=57343;function vp(n){let e=n.charCodeAt(0);return e>=kR&&e<=FR}function Ao(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var sC="__name__",Gl=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ne(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ne(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return ye(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):Ap(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return pr.fromString(e.substring(4,e.length-2))}},qe=class n extends Gl{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new q(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},VR=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Kt=class n extends Gl{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return VR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===sC}static keyField(){return new n([sC])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new q(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new q(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new q(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(r+=c,i++):(o(),i++)}if(o(),s)throw new q(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var te=class n{constructor(e){this.path=e}static fromPath(e){return new n(qe.fromString(e))}static fromName(e){return new n(qe.fromString(e).popFirst(5))}static empty(){return new n(qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return qe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new qe(e.slice()))}};function JC(n,e,t){if(!t)throw new q(F.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function LR(n,e,t,r){if(e===!0&&r===!0)throw new q(F.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function aC(n){if(!te.isDocumentKey(n))throw new q(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function cC(n){if(te.isDocumentKey(n))throw new q(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function XC(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Iu(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ne(12329,{type:typeof n})}function wn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new q(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Iu(n);throw new q(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function jR(n,e){if(e<=0)throw new q(F.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function rt(n,e){let t={typeString:n};return e&&(t.value=e),t}function fa(n,e){if(!XC(n))throw new q(F.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new q(F.INVALID_ARGUMENT,t);return!0}var lC=-62135596800,uC=1e6,it=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*uC);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<lC)throw new q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/uC}_compareTo(e){return this.seconds===e.seconds?ye(this.nanoseconds,e.nanoseconds):ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(fa(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-lC;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};it._jsonSchemaVersion="firestore/timestamp/1.0",it._jsonSchema={type:rt("string",it._jsonSchemaVersion),seconds:rt("number"),nanoseconds:rt("number")};var ce=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new it(0,0))}static max(){return new n(new it(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var na=-1,Pp=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Pp.UNKNOWN_ID=-1;function BR(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ce.fromTimestamp(r===1e9?new it(t+1,0):new it(t,r));return new Ai(i,te.empty(),e)}function UR(n){return new Ai(n.readTime,n.key,na)}var Ai=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ce.min(),te.empty(),na)}static max(){return new n(ce.max(),te.empty(),na)}};function $R(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=te.comparator(n.documentKey,e.documentKey),t!==0?t:ye(n.largestBatchId,e.largestBatchId))}var zR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Op=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function zo(n){return j(this,null,function*(){if(n.code!==F.FAILED_PRECONDITION||n.message!==zR)throw n;K("LocalStore","Unexpectedly lost primary lease")})}var U=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(c=>{++i,c.next(()=>{++o,s&&o===i&&t()},l=>r(l))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),c=0;for(let l=0;l<o;l++){let u=l;t(e[u]).next(p=>{s[u]=p,++c,c===o&&r(s)},p=>i(p))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function HR(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ho(n){return n.name==="IndexedDbTransactionError"}var dg=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),hg=-1;function xu(n){return n==null}function ra(n){return n===0&&1/n==-1/0}function qR(n){return typeof n=="number"&&Number.isInteger(n)&&!ra(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var ZC="";function GR(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=dC(e)),e=WR(n.get(t),e);return dC(e)}function WR(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case ZC:t+="";break;default:t+=o}}return t}function dC(n){return n+ZC+""}var KR="remoteDocuments",eE="owner";var tE="mutationQueues";var nE="mutations";var rE="documentMutations",QR="remoteDocumentsV14";var iE="remoteDocumentGlobal";var oE="targets";var sE="targetDocuments";var aE="targetGlobal",cE="collectionParents";var lE="clientMetadata";var uE="bundles";var dE="namedQueries";var YR="indexConfiguration";var JR="indexState";var XR="indexEntries";var hE="documentOverlays";var ZR="globals";var e2=[tE,nE,rE,KR,oE,eE,aE,sE,lE,iE,cE,uE,dE],x6=[...e2,hE],t2=[tE,nE,rE,QR,oE,eE,aE,sE,lE,iE,cE,uE,dE,hE],n2=t2,r2=[...n2,YR,JR,XR];var D6=[...r2,ZR];function hC(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Jr(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function fE(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ye=class n{constructor(e,t){this.comparator=e,this.root=t||Bn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Bn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xo(this.root,e,this.comparator,!1)}getReverseIterator(){return new xo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xo(this.root,e,this.comparator,!0)}},xo=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Bn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ne(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw ne(27949);return e+(this.isRed()?0:1)}};Bn.EMPTY=null,Bn.RED=!0,Bn.BLACK=!1;Bn.EMPTY=new class{constructor(){this.size=0}get key(){throw ne(57766)}get value(){throw ne(16141)}get color(){throw ne(16727)}get left(){throw ne(29726)}get right(){throw ne(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Bn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var mt=class n{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Wl(this.data.getIterator())}getIteratorFrom(e){return new Wl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Wl=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var un=class n{constructor(e){this.fields=e,e.sort(Kt.comparator)}static empty(){return new n([])}unionWith(e){let t=new mt(Kt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ao(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Kl=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var It=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Kl("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};It.EMPTY_BYTE_STRING=new It("");var i2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vr(n){if(Pe(!!n,39018),typeof n=="string"){let e=0,t=i2.exec(n);if(Pe(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:He(n.seconds),nanos:He(n.nanos)}}function He(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function _r(n){return typeof n=="string"?It.fromBase64String(n):It.fromUint8Array(n)}var pE="server_timestamp",mE="__type__",gE="__previous_value__",yE="__local_write_time__";function fg(n){return(n?.mapValue?.fields||{})[mE]?.stringValue===pE}function Du(n){let e=n.mapValue.fields[gE];return fg(e)?Du(e):e}function ia(n){let e=vr(n.mapValue.fields[yE].timestampValue);return new it(e.seconds,e.nanos)}var Np=class{constructor(e,t,r,i,o,s,c,l,u,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=p}},Ql="(default)",Yl=class n{constructor(e,t){this.projectId=e,this.database=t||Ql}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Ql}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var pg="__type__",vE="__max__",Ll={mapValue:{fields:{__type__:{stringValue:vE}}}},mg="__vector__",Po="value";function Gr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?fg(n)?4:bE(n)?9007199254740991:_E(n)?10:11:ne(28295,{value:n})}function zn(n,e){if(n===e)return!0;let t=Gr(n);if(t!==Gr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ia(n).isEqual(ia(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=vr(i.timestampValue),c=vr(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return _r(i.bytesValue).isEqual(_r(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return He(i.geoPointValue.latitude)===He(o.geoPointValue.latitude)&&He(i.geoPointValue.longitude)===He(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return He(i.integerValue)===He(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=He(i.doubleValue),c=He(o.doubleValue);return s===c?ra(s)===ra(c):isNaN(s)&&isNaN(c)}return!1}(n,e);case 9:return Ao(n.arrayValue.values||[],e.arrayValue.values||[],zn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},c=o.mapValue.fields||{};if(hC(s)!==hC(c))return!1;for(let l in s)if(s.hasOwnProperty(l)&&(c[l]===void 0||!zn(s[l],c[l])))return!1;return!0}(n,e);default:return ne(52216,{left:n})}}function oa(n,e){return(n.values||[]).find(t=>zn(t,e))!==void 0}function Oo(n,e){if(n===e)return 0;let t=Gr(n),r=Gr(e);if(t!==r)return ye(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ye(n.booleanValue,e.booleanValue);case 2:return function(o,s){let c=He(o.integerValue||o.doubleValue),l=He(s.integerValue||s.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(n,e);case 3:return fC(n.timestampValue,e.timestampValue);case 4:return fC(ia(n),ia(e));case 5:return Ap(n.stringValue,e.stringValue);case 6:return function(o,s){let c=_r(o),l=_r(s);return c.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let c=o.split("/"),l=s.split("/");for(let u=0;u<c.length&&u<l.length;u++){let p=ye(c[u],l[u]);if(p!==0)return p}return ye(c.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let c=ye(He(o.latitude),He(s.latitude));return c!==0?c:ye(He(o.longitude),He(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return pC(n.arrayValue,e.arrayValue);case 10:return function(o,s){let c=o.fields||{},l=s.fields||{},u=c[Po]?.arrayValue,p=l[Po]?.arrayValue,g=ye(u?.values?.length||0,p?.values?.length||0);return g!==0?g:pC(u,p)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Ll.mapValue&&s===Ll.mapValue)return 0;if(o===Ll.mapValue)return 1;if(s===Ll.mapValue)return-1;let c=o.fields||{},l=Object.keys(c),u=s.fields||{},p=Object.keys(u);l.sort(),p.sort();for(let g=0;g<l.length&&g<p.length;++g){let b=Ap(l[g],p[g]);if(b!==0)return b;let C=Oo(c[l[g]],u[p[g]]);if(C!==0)return C}return ye(l.length,p.length)}(n.mapValue,e.mapValue);default:throw ne(23264,{he:t})}}function fC(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ye(n,e);let t=vr(n),r=vr(e),i=ye(t.seconds,r.seconds);return i!==0?i:ye(t.nanos,r.nanos)}function pC(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Oo(t[i],r[i]);if(o)return o}return ye(t.length,r.length)}function No(n){return Rp(n)}function Rp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=vr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return _r(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return te.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Rp(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Rp(t.fields[s])}`;return i+"}"}(n.mapValue):ne(61005,{value:n})}function Ul(n){switch(Gr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Du(n);return e?16+Ul(e):16;case 5:return 2*n.stringValue.length;case 6:return _r(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Ul(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Jr(r.fields,(o,s)=>{i+=o.length+Ul(s)}),i}(n.mapValue);default:throw ne(13486,{value:n})}}function mC(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function kp(n){return!!n&&"integerValue"in n}function gg(n){return!!n&&"arrayValue"in n}function gC(n){return!!n&&"nullValue"in n}function yC(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function $l(n){return!!n&&"mapValue"in n}function _E(n){return(n?.mapValue?.fields||{})[pg]?.stringValue===mg}function Js(n){if(n.geoPointValue)return{geoPointValue:J({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:J({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Jr(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Js(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Js(n.arrayValue.values[t]);return e}return J({},n)}function bE(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===vE}var T6={mapValue:{fields:{[pg]:{stringValue:mg},[Po]:{arrayValue:{}}}}};var Wt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!$l(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Js(t)}setAll(e){let t=Kt.emptyPath(),r={},i=[];e.forEach((s,c)=>{if(!t.isImmediateParentOf(c)){let l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=c.popLast()}s?r[c.lastSegment()]=Js(s):i.push(c.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());$l(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return zn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];$l(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Jr(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Js(this.value))}};function wE(n){let e=[];return Jr(n.fields,(t,r)=>{let i=new Kt([t]);if($l(r)){let o=wE(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new un(e)}var Cn=class n{constructor(e,t,r,i,o,s,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new n(e,0,ce.min(),ce.min(),ce.min(),Wt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ce.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ce.min(),ce.min(),Wt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ce.min(),ce.min(),Wt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ro=class{constructor(e,t){this.position=e,this.inclusive=t}};function vC(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=te.comparator(te.fromName(s.referenceValue),t.key):r=Oo(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function _C(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!zn(n.position[t],e.position[t]))return!1;return!0}var Pi=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function o2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Jl=class{},nt=class n extends Jl{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Vp(e,t,r):t==="array-contains"?new Bp(e,r):t==="in"?new Up(e,r):t==="not-in"?new $p(e,r):t==="array-contains-any"?new zp(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Lp(e,r):new jp(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Oo(t,this.value)):t!==null&&Gr(this.value)===Gr(t)&&this.matchesComparison(Oo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},En=class n extends Jl{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return CE(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function CE(n){return n.op==="and"}function EE(n){return s2(n)&&CE(n)}function s2(n){for(let e of n.filters)if(e instanceof En)return!1;return!0}function Fp(n){if(n instanceof nt)return n.field.canonicalString()+n.op.toString()+No(n.value);if(EE(n))return n.filters.map(e=>Fp(e)).join(",");{let e=n.filters.map(t=>Fp(t)).join(",");return`${n.op}(${e})`}}function IE(n,e){return n instanceof nt?function(r,i){return i instanceof nt&&r.op===i.op&&r.field.isEqual(i.field)&&zn(r.value,i.value)}(n,e):n instanceof En?function(r,i){return i instanceof En&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,c)=>o&&IE(s,i.filters[c]),!0):!1}(n,e):void ne(19439)}function xE(n){return n instanceof nt?function(t){return`${t.field.canonicalString()} ${t.op} ${No(t.value)}`}(n):n instanceof En?function(t){return t.op.toString()+" {"+t.getFilters().map(xE).join(" ,")+"}"}(n):"Filter"}var Vp=class extends nt{constructor(e,t,r){super(e,t,r),this.key=te.fromName(r.referenceValue)}matches(e){let t=te.comparator(e.key,this.key);return this.matchesComparison(t)}},Lp=class extends nt{constructor(e,t){super(e,"in",t),this.keys=DE("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},jp=class extends nt{constructor(e,t){super(e,"not-in",t),this.keys=DE("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function DE(n,e){return(e.arrayValue?.values||[]).map(t=>te.fromName(t.referenceValue))}var Bp=class extends nt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return gg(t)&&oa(t.arrayValue,this.value)}},Up=class extends nt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&oa(this.value.arrayValue,t)}},$p=class extends nt{constructor(e,t){super(e,"not-in",t)}matches(e){if(oa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!oa(this.value.arrayValue,t)}},zp=class extends nt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!gg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>oa(this.value.arrayValue,r))}};var Hp=class{constructor(e,t=null,r=[],i=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=c,this.Te=null}};function bC(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Hp(n,e,t,r,i,o,s)}function yg(n){let e=ae(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Fp(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),xu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>No(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>No(r)).join(",")),e.Te=t}return e.Te}function vg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!o2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!IE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!_C(n.startAt,e.startAt)&&_C(n.endAt,e.endAt)}function qp(n){return te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Wr=class{constructor(e,t=null,r=[],i=[],o=null,s="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function a2(n,e,t,r,i,o,s,c){return new Wr(n,e,t,r,i,o,s,c)}function _g(n){return new Wr(n)}function wC(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function SE(n){return n.collectionGroup!==null}function Xs(n){let e=ae(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new mt(Kt.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(c=c.add(u.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Pi(o,r))}),t.has(Kt.keyField().canonicalString())||e.Ie.push(new Pi(Kt.keyField(),r))}return e.Ie}function Un(n){let e=ae(n);return e.Ee||(e.Ee=c2(e,Xs(n))),e.Ee}function c2(n,e){if(n.limitType==="F")return bC(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Pi(i.field,o)});let t=n.endAt?new Ro(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ro(n.startAt.position,n.startAt.inclusive):null;return bC(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Gp(n,e){let t=n.filters.concat([e]);return new Wr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Xl(n,e,t){return new Wr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Su(n,e){return vg(Un(n),Un(e))&&n.limitType===e.limitType}function TE(n){return`${yg(Un(n))}|lt:${n.limitType}`}function Co(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>xE(i)).join(", ")}]`),xu(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>No(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>No(i)).join(",")),`Target(${r})`}(Un(n))}; limitType=${n.limitType})`}function Tu(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):te.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Xs(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,c,l){let u=vC(s,c,l);return s.inclusive?u<=0:u<0}(r.startAt,Xs(r),i)||r.endAt&&!function(s,c,l){let u=vC(s,c,l);return s.inclusive?u>=0:u>0}(r.endAt,Xs(r),i))}(n,e)}function l2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ME(n){return(e,t)=>{let r=!1;for(let i of Xs(n)){let o=u2(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function u2(n,e,t){let r=n.field.isKeyField()?te.comparator(e.key,t.key):function(o,s,c){let l=s.data.field(o),u=c.data.field(o);return l!==null&&u!==null?Oo(l,u):ne(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ne(19790,{direction:n.dir})}}var br=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Jr(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return fE(this.inner)}size(){return this.innerSize}};var d2=new Ye(te.comparator);function wr(){return d2}var AE=new Ye(te.comparator);function Ys(...n){let e=AE;for(let t of n)e=e.insert(t.key,t);return e}function PE(n){let e=AE;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function xi(){return Zs()}function OE(){return Zs()}function Zs(){return new br(n=>n.toString(),(n,e)=>n.isEqual(e))}var h2=new Ye(te.comparator),f2=new mt(te.comparator);function ve(...n){let e=f2;for(let t of n)e=e.add(t);return e}var p2=new mt(ye);function m2(){return p2}function bg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ra(e)?"-0":e}}function NE(n){return{integerValue:""+n}}function g2(n,e){return qR(e)?NE(e):bg(n,e)}var ko=class{constructor(){this._=void 0}};function y2(n,e,t){return n instanceof Fo?function(i,o){let s={fields:{[mE]:{stringValue:pE},[yE]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&fg(o)&&(o=Du(o)),o&&(s.fields[gE]=o),{mapValue:s}}(t,e):n instanceof Oi?kE(n,e):n instanceof Ni?FE(n,e):function(i,o){let s=RE(i,o),c=CC(s)+CC(i.Ae);return kp(s)&&kp(i.Ae)?NE(c):bg(i.serializer,c)}(n,e)}function v2(n,e,t){return n instanceof Oi?kE(n,e):n instanceof Ni?FE(n,e):t}function RE(n,e){return n instanceof Vo?function(r){return kp(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Fo=class extends ko{},Oi=class extends ko{constructor(e){super(),this.elements=e}};function kE(n,e){let t=VE(e);for(let r of n.elements)t.some(i=>zn(i,r))||t.push(r);return{arrayValue:{values:t}}}var Ni=class extends ko{constructor(e){super(),this.elements=e}};function FE(n,e){let t=VE(e);for(let r of n.elements)t=t.filter(i=>!zn(i,r));return{arrayValue:{values:t}}}var Vo=class extends ko{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function CC(n){return He(n.integerValue||n.doubleValue)}function VE(n){return gg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function _2(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Oi&&i instanceof Oi||r instanceof Ni&&i instanceof Ni?Ao(r.elements,i.elements,zn):r instanceof Vo&&i instanceof Vo?zn(r.Ae,i.Ae):r instanceof Fo&&i instanceof Fo}(n.transform,e.transform)}var Wp=class{constructor(e,t){this.version=e,this.transformResults=t}},Qt=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function zl(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Lo=class{};function LE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new jo(n.key,Qt.none()):new Ri(n.key,n.data,Qt.none());{let t=n.data,r=Wt.empty(),i=new mt(Kt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Hn(n.key,r,new un(i.toArray()),Qt.none())}}function b2(n,e,t){n instanceof Ri?function(i,o,s){let c=i.value.clone(),l=IC(i.fieldTransforms,o,s.transformResults);c.setAll(l),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Hn?function(i,o,s){if(!zl(i.precondition,o))return void o.convertToUnknownDocument(s.version);let c=IC(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(jE(i)),l.setAll(c),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function ea(n,e,t,r){return n instanceof Ri?function(o,s,c,l){if(!zl(o.precondition,s))return c;let u=o.value.clone(),p=xC(o.fieldTransforms,l,s);return u.setAll(p),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof Hn?function(o,s,c,l){if(!zl(o.precondition,s))return c;let u=xC(o.fieldTransforms,l,s),p=s.data;return p.setAll(jE(o)),p.setAll(u),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(o,s,c){return zl(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c}(n,e,t)}function w2(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=RE(r.transform,i||null);o!=null&&(t===null&&(t=Wt.empty()),t.set(r.field,o))}return t||null}function EC(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ao(r,i,(o,s)=>_2(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Ri=class extends Lo{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Hn=class extends Lo{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function jE(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function IC(n,e,t){let r=new Map;Pe(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,c=e.data.field(o.field);r.set(o.field,v2(s,c,t[i]))}return r}function xC(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,y2(o,s,e))}return r}var jo=class extends Lo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Kp=class extends Lo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Qp=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&b2(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=ea(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=ea(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=OE();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=t.has(i.key)?null:c;let l=LE(s,c);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(ce.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ve())}isEqual(e){return this.batchId===e.batchId&&Ao(this.mutations,e.mutations,(t,r)=>EC(t,r))&&Ao(this.baseMutations,e.baseMutations,(t,r)=>EC(t,r))}},Yp=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Pe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return h2}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Jp=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Xp=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var et,Ce;function C2(n){switch(n){case F.OK:return ne(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return ne(15467,{code:n})}}function BE(n){if(n===void 0)return yr("GRPC error has no .code"),F.UNKNOWN;switch(n){case et.OK:return F.OK;case et.CANCELLED:return F.CANCELLED;case et.UNKNOWN:return F.UNKNOWN;case et.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case et.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case et.INTERNAL:return F.INTERNAL;case et.UNAVAILABLE:return F.UNAVAILABLE;case et.UNAUTHENTICATED:return F.UNAUTHENTICATED;case et.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case et.NOT_FOUND:return F.NOT_FOUND;case et.ALREADY_EXISTS:return F.ALREADY_EXISTS;case et.PERMISSION_DENIED:return F.PERMISSION_DENIED;case et.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case et.ABORTED:return F.ABORTED;case et.OUT_OF_RANGE:return F.OUT_OF_RANGE;case et.UNIMPLEMENTED:return F.UNIMPLEMENTED;case et.DATA_LOSS:return F.DATA_LOSS;default:return ne(39323,{code:n})}}(Ce=et||(et={}))[Ce.OK=0]="OK",Ce[Ce.CANCELLED=1]="CANCELLED",Ce[Ce.UNKNOWN=2]="UNKNOWN",Ce[Ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ce[Ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ce[Ce.NOT_FOUND=5]="NOT_FOUND",Ce[Ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ce[Ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ce[Ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ce[Ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ce[Ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ce[Ce.ABORTED=10]="ABORTED",Ce[Ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ce[Ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ce[Ce.INTERNAL=13]="INTERNAL",Ce[Ce.UNAVAILABLE=14]="UNAVAILABLE",Ce[Ce.DATA_LOSS=15]="DATA_LOSS";var E2=null;function I2(){return new TextEncoder}var x2=new pr([4294967295,4294967295],0);function DC(n){let e=I2().encode(n),t=new hp;return t.update(e),new Uint8Array(t.digest())}function SC(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new pr([t,r],0),new pr([i,o],0)]}var Zp=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Di(`Invalid padding: ${t}`);if(r<0)throw new Di(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Di(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Di(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=pr.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(pr.fromNumber(r)));return i.compare(x2)===1&&(i=new pr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=DC(e),[r,i]=SC(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(c=>s.insert(c)),s}insert(e){if(this.ge===0)return;let t=DC(e),[r,i]=SC(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.Se(s)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Di=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Zl=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,sa.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ce.min(),i,new Ye(ye),wr(),ve())}},sa=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ve(),ve(),ve())}};var Do=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},eu=class{constructor(e,t){this.targetId=e,this.Ce=t}},tu=class{constructor(e,t,r=It.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},nu=class{constructor(){this.ve=0,this.Fe=TC(),this.Me=It.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ve(),t=ve(),r=ve();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ne(38017,{changeType:o})}}),new sa(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=TC()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Pe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},em=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=wr(),this.Je=jl(),this.He=jl(),this.Ye=new Ye(ye)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:ne(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let o=i.target;if(qp(o))if(r===0){let s=new te(o.path);this.et(t,s,Cn.newNoDocument(s,ce.min()))}else Pe(r===1,20013,{expectedCount:r});else{let s=this._t(t);if(s!==r){let c=this.ut(e),l=c?this.ct(c,e,s):1;if(l!==0){this.it(t);let u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,u)}E2?.lt(function(p,g,b,C,N){let R={localCacheCount:p,existenceFilterCount:g.count,databaseId:b.database,projectId:b.projectId},k=g.unchangedNames;return k&&(R.bloomFilter={applied:N===0,hashCount:k?.hashCount??0,bitmapLength:k?.bits?.bitmap?.length??0,padding:k?.bits?.padding??0,mightContain:G=>C?.mightContain(G)??!1}),R}(s,e.Ce,this.Ge.ht(),c,l))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,c;try{s=_r(r).toUint8Array()}catch(l){if(l instanceof Kl)return Mo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new Zp(s,i,o)}catch(l){return Mo(l instanceof Di?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Ge.ht(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.et(t,o,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((o,s)=>{let c=this.ot(s);if(c){if(o.current&&qp(c.target)){let l=new te(c.target.path);this.It(l).has(s)||this.Et(s,l)||this.et(s,l,Cn.newNoDocument(l,e))}o.Be&&(t.set(s,o.ke()),o.qe())}});let r=ve();this.He.forEach((o,s)=>{let c=!0;s.forEachWhile(l=>{let u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new Zl(e,t,this.Ye,this.je,r);return this.je=wr(),this.Je=jl(),this.He=jl(),this.Ye=new Ye(ye),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new nu,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new mt(ye),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new mt(ye),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||K("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new nu),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function jl(){return new Ye(te.comparator)}function TC(){return new Ye(te.comparator)}var D2={asc:"ASCENDING",desc:"DESCENDING"},S2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},T2={and:"AND",or:"OR"},tm=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function nm(n,e){return n.useProto3Json||xu(e)?e:{value:e}}function ru(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function UE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function M2(n,e){return ru(n,e.toTimestamp())}function $n(n){return Pe(!!n,49232),ce.fromTimestamp(function(t){let r=vr(t);return new it(r.seconds,r.nanos)}(n))}function wg(n,e){return rm(n,e).canonicalString()}function rm(n,e){let t=function(i){return new qe(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function $E(n){let e=qe.fromString(n);return Pe(WE(e),10190,{key:e.toString()}),e}function im(n,e){return wg(n.databaseId,e.path)}function _p(n,e){let t=$E(e);if(t.get(1)!==n.databaseId.projectId)throw new q(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new q(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new te(HE(t))}function zE(n,e){return wg(n.databaseId,e)}function A2(n){let e=$E(n);return e.length===4?qe.emptyPath():HE(e)}function om(n){return new qe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function HE(n){return Pe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function MC(n,e,t){return{name:im(n,e),fields:t.value.mapValue.fields}}function P2(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ne(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,p){return u.useProto3Json?(Pe(p===void 0||typeof p=="string",58123),It.fromBase64String(p||"")):(Pe(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),It.fromUint8Array(p||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&function(u){let p=u.code===void 0?F.UNKNOWN:BE(u.code);return new q(p,u.message||"")}(s);t=new tu(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=_p(n,r.document.name),o=$n(r.document.updateTime),s=r.document.createTime?$n(r.document.createTime):ce.min(),c=new Wt({mapValue:{fields:r.document.fields}}),l=Cn.newFoundDocument(i,o,s,c),u=r.targetIds||[],p=r.removedTargetIds||[];t=new Do(u,p,l.key,l)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=_p(n,r.document),o=r.readTime?$n(r.readTime):ce.min(),s=Cn.newNoDocument(i,o),c=r.removedTargetIds||[];t=new Do([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=_p(n,r.document),o=r.removedTargetIds||[];t=new Do([],o,i,null)}else{if(!("filter"in e))return ne(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Xp(i,o),c=r.targetId;t=new eu(c,s)}}return t}function O2(n,e){let t;if(e instanceof Ri)t={update:MC(n,e.key,e.value)};else if(e instanceof jo)t={delete:im(n,e.key)};else if(e instanceof Hn)t={update:MC(n,e.key,e.data),updateMask:U2(e.fieldMask)};else{if(!(e instanceof Kp))return ne(16599,{Vt:e.type});t={verify:im(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let c=s.transform;if(c instanceof Fo)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Oi)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ni)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Vo)return{fieldPath:s.field.canonicalString(),increment:c.Ae};throw ne(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:M2(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ne(27497)}(n,e.precondition)),t}function N2(n,e){return n&&n.length>0?(Pe(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?$n(i.updateTime):$n(o);return s.isEqual(ce.min())&&(s=$n(o)),new Wp(s,i.transformResults||[])}(t,e))):[]}function R2(n,e){return{documents:[zE(n,e.path)]}}function k2(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=zE(n,i);let o=function(u){if(u.length!==0)return GE(En.create(u,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(p=>function(b){return{field:Eo(b.field),direction:L2(b.dir)}}(p))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let c=nm(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:t,parent:i}}function F2(n){let e=A2(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Pe(r===1,65062);let p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let o=[];t.where&&(o=function(g){let b=qE(g);return b instanceof En&&EE(b)?b.getFilters():[b]}(t.where));let s=[];t.orderBy&&(s=function(g){return g.map(b=>function(N){return new Pi(Io(N.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(b))}(t.orderBy));let c=null;t.limit&&(c=function(g){let b;return b=typeof g=="object"?g.value:g,xu(b)?null:b}(t.limit));let l=null;t.startAt&&(l=function(g){let b=!!g.before,C=g.values||[];return new Ro(C,b)}(t.startAt));let u=null;return t.endAt&&(u=function(g){let b=!g.before,C=g.values||[];return new Ro(C,b)}(t.endAt)),a2(e,i,s,o,c,"F",l,u)}function V2(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function qE(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Io(t.unaryFilter.field);return nt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Io(t.unaryFilter.field);return nt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Io(t.unaryFilter.field);return nt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Io(t.unaryFilter.field);return nt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ne(61313);default:return ne(60726)}}(n):n.fieldFilter!==void 0?function(t){return nt.create(Io(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ne(58110);default:return ne(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return En.create(t.compositeFilter.filters.map(r=>qE(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ne(1026)}}(t.compositeFilter.op))}(n):ne(30097,{filter:n})}function L2(n){return D2[n]}function j2(n){return S2[n]}function B2(n){return T2[n]}function Eo(n){return{fieldPath:n.canonicalString()}}function Io(n){return Kt.fromServerFormat(n.fieldPath)}function GE(n){return n instanceof nt?function(t){if(t.op==="=="){if(yC(t.value))return{unaryFilter:{field:Eo(t.field),op:"IS_NAN"}};if(gC(t.value))return{unaryFilter:{field:Eo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(yC(t.value))return{unaryFilter:{field:Eo(t.field),op:"IS_NOT_NAN"}};if(gC(t.value))return{unaryFilter:{field:Eo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Eo(t.field),op:j2(t.op),value:t.value}}}(n):n instanceof En?function(t){let r=t.getFilters().map(i=>GE(i));return r.length===1?r[0]:{compositeFilter:{op:B2(t.op),filters:r}}}(n):ne(54877,{filter:n})}function U2(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function WE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var aa=class n{constructor(e,t,r,i,o=ce.min(),s=ce.min(),c=It.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var sm=class{constructor(e){this.yt=e}};function $2(n){let e=F2({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Xl(e,e.limit,"L"):e}var iu=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(He(e.integerValue));else if("doubleValue"in e){let r=He(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),ra(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=vr(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(_r(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?bE(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):_E(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):ne(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=Po,o=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(He(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),te.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};iu.Kt=new iu;var am=class{constructor(){this.Cn=new cm}addToCollectionParentIndex(e,t){return this.Cn.add(t),U.resolve()}getCollectionParents(e,t){return U.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return U.resolve()}deleteFieldIndex(e,t){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,t){return U.resolve()}getDocumentsMatchingTarget(e,t){return U.resolve(null)}getIndexType(e,t){return U.resolve(0)}getFieldIndexes(e,t){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,t){return U.resolve(Ai.min())}getMinOffsetFromCollectionGroup(e,t){return U.resolve(Ai.min())}updateCollectionGroup(e,t,r){return U.resolve()}updateIndexEntries(e,t){return U.resolve()}},cm=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new mt(qe.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new mt(qe.comparator)).toArray()}};var M6=new Uint8Array(0);var AC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},KE=41943040,ln=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};ln.DEFAULT_COLLECTION_PERCENTILE=10,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ln.DEFAULT=new ln(KE,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ln.DISABLED=new ln(-1,0,0);var ca=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var PC="LruGarbageCollector",z2=1048576;function OC([n,e],[t,r]){let i=ye(n,t);return i===0?ye(e,r):i}var lm=class{constructor(e){this.Ir=e,this.buffer=new mt(OC),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();OC(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},um=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){K(PC,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>j(this,null,function*(){this.Rr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ho(t)?K(PC,"Ignoring IndexedDB error during garbage collection: ",t):yield zo(t)}yield this.Vr(3e5)}))}},dm=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return U.resolve(dg.ce);let r=new lm(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(K("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(AC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(K("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),AC):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,s,c,l,u,p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(K("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,s=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,c=Date.now(),this.removeTargets(e,r,t))).next(g=>(o=g,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(u=Date.now(),wo()<=we.DEBUG&&K("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-p}ms
	Determined least recently used ${i} in `+(c-s)+`ms
	Removed ${o} targets in `+(l-c)+`ms
	Removed ${g} documents in `+(u-l)+`ms
Total Duration: ${u-p}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:g})))}};function H2(n,e){return new dm(n,e)}var hm=class{constructor(){this.changes=new br(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?U.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var fm=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var pm=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&ea(r.mutation,i,un.empty(),it.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ve()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ve()){let i=xi();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Ys();return o.forEach((c,l)=>{s=s.insert(c,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=xi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ve()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,c)=>{t.set(s,c)})})}computeViews(e,t,r,i){let o=wr(),s=Zs(),c=function(){return Zs()}();return t.forEach((l,u)=>{let p=r.get(u.key);i.has(u.key)&&(p===void 0||p.mutation instanceof Hn)?o=o.insert(u.key,u):p!==void 0?(s.set(u.key,p.mutation.getFieldMask()),ea(p.mutation,u,p.mutation.getFieldMask(),it.now())):s.set(u.key,un.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((u,p)=>s.set(u,p)),t.forEach((u,p)=>c.set(u,new fm(p,s.get(u)??null))),c))}recalculateAndSaveOverlays(e,t){let r=Zs(),i=new Ye((s,c)=>s-c),o=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let c of s)c.keys().forEach(l=>{let u=t.get(l);if(u===null)return;let p=r.get(l)||un.empty();p=c.applyToLocalView(u,p),r.set(l,p);let g=(i.get(c.batchId)||ve()).add(l);i=i.insert(c.batchId,g)})}).next(()=>{let s=[],c=i.getReverseIterator();for(;c.hasNext();){let l=c.getNext(),u=l.key,p=l.value,g=OE();p.forEach(b=>{if(!o.has(b)){let C=LE(t.get(b),r.get(b));C!==null&&g.set(b,C),o=o.add(b)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,g))}return U.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return te.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):SE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):U.resolve(xi()),c=na,l=o;return s.next(u=>U.forEach(u,(p,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),o.get(p)?U.resolve():this.remoteDocumentCache.getEntry(e,p).next(b=>{l=l.insert(p,b)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,l,u,ve())).next(p=>({batchId:c,changes:PE(p)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new te(t)).next(r=>{let i=Ys();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Ys();return this.indexManager.getCollectionParents(e,o).next(c=>U.forEach(c,l=>{let u=function(g,b){return new Wr(b,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(p=>{p.forEach((g,b)=>{s=s.insert(g,b)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((l,u)=>{let p=u.getKey();s.get(p)===null&&(s=s.insert(p,Cn.newInvalidDocument(p)))});let c=Ys();return s.forEach((l,u)=>{let p=o.get(l);p!==void 0&&ea(p.mutation,u,un.empty(),it.now()),Tu(t,u)&&(c=c.insert(l,u))}),c})}};var mm=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return U.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:$n(i.createTime)}}(t)),U.resolve()}getNamedQuery(e,t){return U.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(i){return{name:i.name,query:$2(i.bundledQuery),readTime:$n(i.readTime)}}(t)),U.resolve()}};var gm=class{constructor(){this.overlays=new Ye(te.comparator),this.qr=new Map}getOverlay(e,t){return U.resolve(this.overlays.get(t))}getOverlays(e,t){let r=xi();return U.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),U.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),U.resolve()}getOverlaysForCollection(e,t,r){let i=xi(),o=t.length+1,s=new te(t.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let l=c.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return U.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ye((u,p)=>u-p),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let p=o.get(u.largestBatchId);p===null&&(p=xi(),o=o.insert(u.largestBatchId,p)),p.set(u.getKey(),u)}}let c=xi(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,p)=>c.set(u,p)),!(c.size()>=i)););return U.resolve(c)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Jp(t,r));let o=this.qr.get(t);o===void 0&&(o=ve(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}};var ym=class{constructor(){this.sessionToken=It.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,U.resolve()}};var la=class{constructor(){this.Qr=new mt(tt.$r),this.Ur=new mt(tt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new tt(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new tt(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new te(new qe([])),r=new tt(t,e),i=new tt(t,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new te(new qe([])),r=new tt(t,e),i=new tt(t,e+1),o=ve();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new tt(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},tt=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return te.comparator(e.key,t.key)||ye(e.Yr,t.Yr)}static Kr(e,t){return ye(e.Yr,t.Yr)||te.comparator(e.key,t.key)}};var vm=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new mt(tt.$r)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Qp(o,t,r,i);this.mutationQueue.push(s);for(let c of i)this.Zr=this.Zr.add(new tt(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return U.resolve(s)}lookupMutationBatch(e,t){return U.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),o=i<0?0:i;return U.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?hg:this.tr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new tt(t,0),i=new tt(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{let c=this.Xr(s.Yr);o.push(c)}),U.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mt(ye);return t.forEach(i=>{let o=new tt(i,0),s=new tt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],c=>{r=r.add(c.Yr)})}),U.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;te.isDocumentKey(o)||(o=o.child(""));let s=new tt(new te(o),0),c=new mt(ye);return this.Zr.forEachWhile(l=>{let u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(c=c.add(l.Yr)),!0)},s),U.resolve(this.ti(c))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Pe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return U.forEach(t.mutations,i=>{let o=new tt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new tt(t,0),i=this.Zr.firstAfterOrEqual(r);return U.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var _m=class{constructor(e){this.ri=e,this.docs=function(){return new Ye(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return U.resolve(r?r.document.mutableCopy():Cn.newInvalidDocument(t))}getEntries(e,t){let r=wr();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Cn.newInvalidDocument(i))}),U.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=wr(),s=t.path,c=new te(s.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){let{key:u,value:{document:p}}=l.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||$R(UR(p),r)<=0||(i.has(p.key)||Tu(t,p))&&(o=o.insert(p.key,p.mutableCopy()))}return U.resolve(o)}getAllFromCollectionGroup(e,t,r,i){ne(9500)}ii(e,t){return U.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new bm(this)}getSize(e){return U.resolve(this.size)}},bm=class extends hm{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),U.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var wm=class{constructor(e){this.persistence=e,this.si=new br(t=>yg(t),vg),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.oi=0,this._i=new la,this.targetCount=0,this.ai=ca.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),U.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new ca(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,U.resolve()}updateTargetData(e,t){return this.Pr(t),U.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.si.forEach((s,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),U.waitFor(o).next(()=>i)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return U.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),U.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),U.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),U.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return U.resolve(r)}containsKey(e,t){return U.resolve(this._i.containsKey(t))}};var ou=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new dg(0),this.li=!1,this.li=!0,this.hi=new ym,this.referenceDelegate=e(this),this.Pi=new wm(this),this.indexManager=new am,this.remoteDocumentCache=function(i){return new _m(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new sm(t),this.Ii=new mm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new gm,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new vm(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){K("MemoryPersistence","Starting transaction:",e);let i=new Cm(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,t){return U.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},Cm=class extends Op{constructor(e){super(),this.currentSequenceNumber=e}},Em=class n{constructor(e){this.persistence=e,this.Ri=new la,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw ne(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),U.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),U.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.fi,r=>{let i=te.fromPath(r);return this.gi(e,i).next(o=>{o||t.removeEntry(i,ce.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return U.or([()=>U.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},su=class n{constructor(e,t){this.persistence=e,this.pi=new br(r=>GR(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=H2(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return U.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return U.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?U.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,t).next(c=>{c||(r++,o.removeEntry(s,ce.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),U.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),U.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ul(e.data.value)),t}br(e,t,r){return U.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return U.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Im=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=ve(),i=ve();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var xm=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Dm=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Fw()?8:HR(kw())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ys(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new xm;return this.Ss(e,t,s).next(c=>{if(o.result=c,this.Vs)return this.bs(e,t,s,c.size)})}).next(()=>o.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(wo()<=we.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",Co(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),U.resolve()):(wo()<=we.DEBUG&&K("QueryEngine","Query:",Co(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(wo()<=we.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",Co(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Un(t))):U.resolve())}ys(e,t){if(wC(t))return U.resolve(null);let r=Un(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Xl(t,null,"F"),r=Un(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ve(...o);return this.ps.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,r).next(l=>{let u=this.Ds(t,c);return this.Cs(t,u,s,l.readTime)?this.ys(e,Xl(t,null,"F")):this.vs(e,u,t,l)}))})))}ws(e,t,r,i){return wC(t)||i.isEqual(ce.min())?U.resolve(null):this.ps.getDocuments(e,r).next(o=>{let s=this.Ds(t,o);return this.Cs(t,s,r,i)?U.resolve(null):(wo()<=we.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Co(t)),this.vs(e,s,t,BR(i,na)).next(c=>c))})}Ds(e,t){let r=new mt(ME(e));return t.forEach((i,o)=>{Tu(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return wo()<=we.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",Co(t)),this.ps.getDocumentsMatchingQuery(e,t,Ai.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Cg="LocalStore",q2=3e8,Sm=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Ye(ye),this.xs=new br(o=>yg(o),vg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pm(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function G2(n,e,t,r){return new Sm(n,e,t,r)}function QE(n,e){return j(this,null,function*(){let t=ae(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],c=[],l=ve();for(let u of i){s.push(u.batchId);for(let p of u.mutations)l=l.add(p.key)}for(let u of o){c.push(u.batchId);for(let p of u.mutations)l=l.add(p.key)}return t.localDocuments.getDocuments(r,l).next(u=>({Ls:u,removedBatchIds:s,addedBatchIds:c}))})})})}function W2(n,e){let t=ae(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return function(c,l,u,p){let g=u.batch,b=g.keys(),C=U.resolve();return b.forEach(N=>{C=C.next(()=>p.getEntry(l,N)).next(R=>{let k=u.docVersions.get(N);Pe(k!==null,48541),R.version.compareTo(k)<0&&(g.applyToRemoteDocument(R,u),R.isValidDocument()&&(R.setReadTime(u.commitVersion),p.addEntry(R)))})}),C.next(()=>c.mutationQueue.removeMutationBatch(l,g))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let l=ve();for(let u=0;u<c.mutationResults.length;++u)c.mutationResults[u].transformResults.length>0&&(l=l.add(c.batch.mutations[u].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function YE(n){let e=ae(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function K2(n,e){let t=ae(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let c=[];e.targetChanges.forEach((p,g)=>{let b=i.get(g);if(!b)return;c.push(t.Pi.removeMatchingKeys(o,p.removedDocuments,g).next(()=>t.Pi.addMatchingKeys(o,p.addedDocuments,g)));let C=b.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?C=C.withResumeToken(It.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):p.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(p.resumeToken,r)),i=i.insert(g,C),function(R,k,G){return R.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=q2?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0}(b,C,p)&&c.push(t.Pi.updateTargetData(o,C))});let l=wr(),u=ve();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,p))}),c.push(Q2(o,s,e.documentUpdates).next(p=>{l=p.ks,u=p.qs})),!r.isEqual(ce.min())){let p=t.Pi.getLastRemoteSnapshotVersion(o).next(g=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(p)}return U.waitFor(c).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,l,u)).next(()=>l)}).then(o=>(t.Ms=i,o))}function Q2(n,e,t){let r=ve(),i=ve();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=wr();return t.forEach((c,l)=>{let u=o.get(c);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(c)),l.isNoDocument()&&l.version.isEqual(ce.min())?(e.removeEntry(c,l.readTime),s=s.insert(c,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),s=s.insert(c,l)):K(Cg,"Ignoring outdated watch update for ",c,". Current version:",u.version," Watch version:",l.version)}),{ks:s,qs:i}})}function Y2(n,e){let t=ae(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=hg),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function J2(n,e){let t=ae(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(o=>o?(i=o,U.resolve(i)):t.Pi.allocateTargetId(r).next(s=>(i=new aa(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}function Tm(n,e,t){return j(this,null,function*(){let r=ae(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Ho(s))throw s;K(Cg,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)})}function NC(n,e,t){let r=ae(n),i=ce.min(),o=ve();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,u,p){let g=ae(l),b=g.xs.get(p);return b!==void 0?U.resolve(g.Ms.get(b)):g.Pi.getTargetData(u,p)}(r,s,Un(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,c.targetId).next(l=>{o=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,t?i:ce.min(),t?o:ve())).next(c=>(X2(r,l2(e),c),{documents:c,Qs:o})))}function X2(n,e,t){let r=n.Os.get(e)||ce.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Os.set(e,r)}var au=class{constructor(){this.activeTargetIds=m2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Mm=class{constructor(){this.Mo=new au,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new au,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Am=class{Oo(e){}shutdown(){}};var RC="ConnectivityMonitor",cu=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){K(RC,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){K(RC,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Bl=null;function Pm(){return Bl===null?Bl=function(){return 268435456+Math.round(2147483648*Math.random())}():Bl++,"0x"+Bl.toString(16)}var bp="RestConnection",Z2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Om=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Ql?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){let s=Pm(),c=this.zo(e,t.toUriEncodedString());K(bp,`Sending RPC '${e}' ${s}:`,c,r);let l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,o);let{host:u}=new URL(c),p=Ol(u);return this.Jo(e,c,l,r,p).then(g=>(K(bp,`Received RPC '${e}' ${s}: `,g),g),g=>{throw Mo(bp,`RPC '${e}' ${s} failed with error: `,g,"url: ",c,"request:",r),g})}Ho(e,t,r,i,o,s){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+$o}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,t){let r=Z2[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var Nm=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var Et="WebChannelConnection",Rm=class extends Om{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){let s=Pm();return new Promise((c,l)=>{let u=new fp;u.setWithCredentials(!0),u.listenOnce(pp.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Qs.NO_ERROR:let g=u.getResponseJson();K(Et,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(g)),c(g);break;case Qs.TIMEOUT:K(Et,`RPC '${e}' ${s} timed out`),l(new q(F.DEADLINE_EXCEEDED,"Request time out"));break;case Qs.HTTP_ERROR:let b=u.getStatus();if(K(Et,`RPC '${e}' ${s} failed with status:`,b,"response text:",u.getResponseText()),b>0){let C=u.getResponseJson();Array.isArray(C)&&(C=C[0]);let N=C?.error;if(N&&N.status&&N.message){let R=function(G){let re=G.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(re)>=0?re:F.UNKNOWN}(N.status);l(new q(R,N.message))}else l(new q(F.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new q(F.UNAVAILABLE,"Connection failed."));break;default:ne(9055,{l_:e,streamId:s,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{K(Et,`RPC '${e}' ${s} completed.`)}});let p=JSON.stringify(i);K(Et,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",p,r,15)})}T_(e,t,r){let i=Pm(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=yp(),c=gp(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;let p=o.join("");K(Et,`Creating RPC '${e}' stream ${i}: ${p}`,l);let g=s.createWebChannel(p,l);this.I_(g);let b=!1,C=!1,N=new Nm({Yo:k=>{C?K(Et,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(b||(K(Et,`Opening RPC '${e}' stream ${i} transport.`),g.open(),b=!0),K(Et,`RPC '${e}' stream ${i} sending:`,k),g.send(k))},Zo:()=>g.close()}),R=(k,G,re)=>{k.listen(G,Y=>{try{re(Y)}catch(Ee){setTimeout(()=>{throw Ee},0)}})};return R(g,bo.EventType.OPEN,()=>{C||(K(Et,`RPC '${e}' stream ${i} transport opened.`),N.o_())}),R(g,bo.EventType.CLOSE,()=>{C||(C=!0,K(Et,`RPC '${e}' stream ${i} transport closed`),N.a_(),this.E_(g))}),R(g,bo.EventType.ERROR,k=>{C||(C=!0,Mo(Et,`RPC '${e}' stream ${i} transport errored. Name:`,k.name,"Message:",k.message),N.a_(new q(F.UNAVAILABLE,"The operation could not be completed")))}),R(g,bo.EventType.MESSAGE,k=>{if(!C){let G=k.data[0];Pe(!!G,16349);let re=G,Y=re?.error||re[0]?.error;if(Y){K(Et,`RPC '${e}' stream ${i} received error:`,Y);let Ee=Y.status,ke=function(w){let I=et[w];if(I!==void 0)return BE(I)}(Ee),xe=Y.message;ke===void 0&&(ke=F.INTERNAL,xe="Unknown error status: "+Ee+" with message "+Y.message),C=!0,N.a_(new q(ke,xe)),g.close()}else K(Et,`RPC '${e}' stream ${i} received:`,G),N.u_(G)}}),R(c,mp.STAT_EVENT,k=>{k.stat===Vl.PROXY?K(Et,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===Vl.NOPROXY&&K(Et,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{N.__()},0),N}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function wp(){return typeof document<"u"?document:null}function Mu(n){return new tm(n,!0)}var lu=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&K("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var kC="PersistentStream",uu=class{constructor(e,t,r,i,o,s,c,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new lu(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}stop(){return j(this,null,function*(){this.x_()&&(yield this.close(0))})}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}k_(){return j(this,null,function*(){if(this.O_())return this.close(0)})}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return j(this,null,function*(){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===F.RESOURCE_EXHAUSTED?(yr(t.toString()),yr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.r_(t)})}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new q(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(()=>j(this,null,function*(){this.state=0,this.start()}))}z_(e){return K(kC,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(K(kC,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},km=class extends uu{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=P2(this.serializer,e),r=function(o){if(!("targetChange"in o))return ce.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ce.min():s.readTime?$n(s.readTime):ce.min()}(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=om(this.serializer),t.addTarget=function(o,s){let c,l=s.target;if(c=qp(l)?{documents:R2(o,l)}:{query:k2(o,l).ft},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=UE(o,s.resumeToken);let u=nm(o,s.expectedCount);u!==null&&(c.expectedCount=u)}else if(s.snapshotVersion.compareTo(ce.min())>0){c.readTime=ru(o,s.snapshotVersion.toTimestamp());let u=nm(o,s.expectedCount);u!==null&&(c.expectedCount=u)}return c}(this.serializer,e);let r=V2(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=om(this.serializer),t.removeTarget=e,this.q_(t)}},Fm=class extends uu{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Pe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Pe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Pe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=N2(e.writeResults,e.commitTime),r=$n(e.commitTime);return this.listener.na(r,t)}ra(){let e={};e.database=om(this.serializer),this.q_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>O2(this.serializer,r))};this.q_(t)}};var Vm=class{},Lm=class extends Vm{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new q(F.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,rm(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(F.UNKNOWN,o.toString())})}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.Ho(e,rm(t,r),i,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new q(F.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},jm=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(yr(t),this.aa=!1):K("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var ki="RemoteStore",Bm=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(()=>j(this,null,function*(){Vi(this)&&(K(ki,"Restarting streams for network reachability change."),yield function(l){return j(this,null,function*(){let u=ae(l);u.Ea.add(4),yield pa(u),u.Ra.set("Unknown"),u.Ea.delete(4),yield Au(u)})}(this))}))}),this.Ra=new jm(r,i)}};function Au(n){return j(this,null,function*(){if(Vi(n))for(let e of n.da)yield e(!0)})}function pa(n){return j(this,null,function*(){for(let e of n.da)yield e(!1)})}function JE(n,e){let t=ae(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Dg(t)?xg(t):qo(t).O_()&&Ig(t,e))}function Eg(n,e){let t=ae(n),r=qo(t);t.Ia.delete(e),r.O_()&&XE(t,e),t.Ia.size===0&&(r.O_()?r.L_():Vi(t)&&t.Ra.set("Unknown"))}function Ig(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}qo(n).Y_(e)}function XE(n,e){n.Va.Ue(e),qo(n).Z_(e)}function xg(n){n.Va=new em({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),qo(n).start(),n.Ra.ua()}function Dg(n){return Vi(n)&&!qo(n).x_()&&n.Ia.size>0}function Vi(n){return ae(n).Ea.size===0}function ZE(n){n.Va=void 0}function ek(n){return j(this,null,function*(){n.Ra.set("Online")})}function tk(n){return j(this,null,function*(){n.Ia.forEach((e,t)=>{Ig(n,e)})})}function nk(n,e){return j(this,null,function*(){ZE(n),Dg(n)?(n.Ra.ha(e),xg(n)):n.Ra.set("Unknown")})}function rk(n,e,t){return j(this,null,function*(){if(n.Ra.set("Online"),e instanceof tu&&e.state===2&&e.cause)try{yield function(i,o){return j(this,null,function*(){let s=o.cause;for(let c of o.targetIds)i.Ia.has(c)&&(yield i.remoteSyncer.rejectListen(c,s),i.Ia.delete(c),i.Va.removeTarget(c))})}(n,e)}catch(r){K(ki,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield du(n,r)}else if(e instanceof Do?n.Va.Ze(e):e instanceof eu?n.Va.st(e):n.Va.tt(e),!t.isEqual(ce.min()))try{let r=yield YE(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let c=o.Va.Tt(s);return c.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){let p=o.Ia.get(u);p&&o.Ia.set(u,p.withResumeToken(l.resumeToken,s))}}),c.targetMismatches.forEach((l,u)=>{let p=o.Ia.get(l);if(!p)return;o.Ia.set(l,p.withResumeToken(It.EMPTY_BYTE_STRING,p.snapshotVersion)),XE(o,l);let g=new aa(p.target,l,u,p.sequenceNumber);Ig(o,g)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){K(ki,"Failed to raise snapshot:",r),yield du(n,r)}})}function du(n,e,t){return j(this,null,function*(){if(!Ho(e))throw e;n.Ea.add(1),yield pa(n),n.Ra.set("Offline"),t||(t=()=>YE(n.localStore)),n.asyncQueue.enqueueRetryable(()=>j(this,null,function*(){K(ki,"Retrying IndexedDB access"),yield t(),n.Ea.delete(1),yield Au(n)}))})}function eI(n,e){return e().catch(t=>du(n,t,e))}function Pu(n){return j(this,null,function*(){let e=ae(n),t=Kr(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:hg;for(;ik(e);)try{let i=yield Y2(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,ok(e,i)}catch(i){yield du(e,i)}tI(e)&&nI(e)})}function ik(n){return Vi(n)&&n.Ta.length<10}function ok(n,e){n.Ta.push(e);let t=Kr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function tI(n){return Vi(n)&&!Kr(n).x_()&&n.Ta.length>0}function nI(n){Kr(n).start()}function sk(n){return j(this,null,function*(){Kr(n).ra()})}function ak(n){return j(this,null,function*(){let e=Kr(n);for(let t of n.Ta)e.ea(t.mutations)})}function ck(n,e,t){return j(this,null,function*(){let r=n.Ta.shift(),i=Yp.from(r,e,t);yield eI(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Pu(n)})}function lk(n,e){return j(this,null,function*(){e&&Kr(n).X_&&(yield function(r,i){return j(this,null,function*(){if(function(s){return C2(s)&&s!==F.ABORTED}(i.code)){let o=r.Ta.shift();Kr(r).B_(),yield eI(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Pu(r)}})}(n,e)),tI(n)&&nI(n)})}function FC(n,e){return j(this,null,function*(){let t=ae(n);t.asyncQueue.verifyOperationInProgress(),K(ki,"RemoteStore received new credentials");let r=Vi(t);t.Ea.add(3),yield pa(t),r&&t.Ra.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),yield Au(t)})}function uk(n,e){return j(this,null,function*(){let t=ae(n);e?(t.Ea.delete(2),yield Au(t)):e||(t.Ea.add(2),yield pa(t),t.Ra.set("Unknown"))})}function qo(n){return n.ma||(n.ma=function(t,r,i){let o=ae(t);return o.sa(),new km(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Xo:ek.bind(null,n),t_:tk.bind(null,n),r_:nk.bind(null,n),H_:rk.bind(null,n)}),n.da.push(e=>j(this,null,function*(){e?(n.ma.B_(),Dg(n)?xg(n):n.Ra.set("Unknown")):(yield n.ma.stop(),ZE(n))}))),n.ma}function Kr(n){return n.fa||(n.fa=function(t,r,i){let o=ae(t);return o.sa(),new Fm(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:sk.bind(null,n),r_:lk.bind(null,n),ta:ak.bind(null,n),na:ck.bind(null,n)}),n.da.push(e=>j(this,null,function*(){e?(n.fa.B_(),yield Pu(n)):(yield n.fa.stop(),n.Ta.length>0&&(K(ki,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}var Um=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,c=new n(e,t,s,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Sg(n,e){if(yr("AsyncQueue",`${e}: ${n}`),Ho(n))return new q(F.UNAVAILABLE,`${e}: ${n}`);throw n}var hu=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||te.comparator(t.key,r.key):(t,r)=>te.comparator(t.key,r.key),this.keyedMap=Ys(),this.sortedSet=new Ye(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var fu=class{constructor(){this.ga=new Ye(te.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ne(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},Bo=class n{constructor(e,t,r,i,o,s,c,l,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(c=>{s.push({type:0,doc:c})}),new n(e,t,hu.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Su(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var $m=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},zm=class{constructor(){this.queries=VC(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=ae(t),o=i.queries;i.queries=VC(),o.forEach((s,c)=>{for(let l of c.Sa)l.onError(r)})})(this,new q(F.ABORTED,"Firestore shutting down"))}};function VC(){return new br(n=>TE(n),Su)}function dk(n,e){return j(this,null,function*(){let t=ae(n),r=3,i=e.query,o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new $m,r=e.Da()?0:1);try{switch(r){case 0:o.wa=yield t.onListen(i,!0);break;case 1:o.wa=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let c=Sg(s,`Initialization of query '${Co(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&Tg(t)})}function hk(n,e){return j(this,null,function*(){let t=ae(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function fk(n,e){let t=ae(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let c of s.Sa)c.Fa(i)&&(r=!0);s.wa=i}}r&&Tg(t)}function pk(n,e,t){let r=ae(n),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(t);r.queries.delete(e)}function Tg(n){n.Ca.forEach(e=>{e.next()})}var Hm,LC;(LC=Hm||(Hm={})).Ma="default",LC.Cache="cache";var qm=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Bo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Bo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Hm.Cache}};var pu=class{constructor(e){this.key=e}},mu=class{constructor(e){this.key=e}},Gm=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ve(),this.mutatedKeys=ve(),this.eu=ME(e),this.tu=new hu(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new fu,i=t?t.tu:this.tu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,c=!1,l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,g)=>{let b=i.get(p),C=Tu(this.query,g)?g:null,N=!!b&&this.mutatedKeys.has(b.key),R=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations),k=!1;b&&C?b.data.isEqual(C.data)?N!==R&&(r.track({type:3,doc:C}),k=!0):this.su(b,C)||(r.track({type:2,doc:C}),k=!0,(l&&this.eu(C,l)>0||u&&this.eu(C,u)<0)&&(c=!0)):!b&&C?(r.track({type:0,doc:C}),k=!0):b&&!C&&(r.track({type:1,doc:b}),k=!0,(l||u)&&(c=!0)),k&&(C?(s=s.add(C),o=R?o.add(p):o.delete(p)):(s=s.delete(p),o=o.delete(p)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let p=this.query.limitType==="F"?s.last():s.first();s=s.delete(p.key),o=o.delete(p.key),r.track({type:1,doc:p})}return{tu:s,iu:r,Cs:c,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((p,g)=>function(C,N){let R=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne(20277,{Rt:k})}};return R(C)-R(N)}(p.type,g.type)||this.eu(p.doc,g.doc)),this.ou(r),i=i??!1;let c=t&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,s.length!==0||u?{snapshot:new Bo(this.query,e.tu,o,s,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new fu,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=ve(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new mu(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new pu(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=ve();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Bo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},Mg="SyncEngine",Wm=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Km=class{constructor(e){this.key=e,this.hu=!1}},Qm=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new br(c=>TE(c),Su),this.Iu=new Map,this.Eu=new Set,this.du=new Ye(te.comparator),this.Au=new Map,this.Ru=new la,this.Vu={},this.mu=new Map,this.fu=ca.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};function mk(n,e,t=!0){return j(this,null,function*(){let r=cI(n),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=yield rI(r,e,t,!0),i})}function gk(n,e){return j(this,null,function*(){let t=cI(n);yield rI(t,e,!0,!1)})}function rI(n,e,t,r){return j(this,null,function*(){let i=yield J2(n.localStore,Un(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),c;return r&&(c=yield yk(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&JE(n.remoteStore,i),c})}function yk(n,e,t,r,i){return j(this,null,function*(){n.pu=(g,b,C)=>function(R,k,G,re){return j(this,null,function*(){let Y=k.view.ru(G);Y.Cs&&(Y=yield NC(R.localStore,k.query,!1).then(({documents:D})=>k.view.ru(D,Y)));let Ee=re&&re.targetChanges.get(k.targetId),ke=re&&re.targetMismatches.get(k.targetId)!=null,xe=k.view.applyChanges(Y,R.isPrimaryClient,Ee,ke);return BC(R,k.targetId,xe.au),xe.snapshot})}(n,g,b,C);let o=yield NC(n.localStore,e,!0),s=new Gm(e,o.Qs),c=s.ru(o.documents),l=sa.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=s.applyChanges(c,n.isPrimaryClient,l);BC(n,t,u.au);let p=new Wm(e,t,s);return n.Tu.set(e,p),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),u.snapshot})}function vk(n,e,t){return j(this,null,function*(){let r=ae(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!Su(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Tm(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Eg(r.remoteStore,i.targetId),Ym(r,i.targetId)}).catch(zo))):(Ym(r,i.targetId),yield Tm(r.localStore,i.targetId,!0))})}function _k(n,e){return j(this,null,function*(){let t=ae(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Eg(t.remoteStore,r.targetId))})}function bk(n,e,t){return j(this,null,function*(){let r=Sk(n);try{let i=yield function(s,c){let l=ae(s),u=it.now(),p=c.reduce((C,N)=>C.add(N.key),ve()),g,b;return l.persistence.runTransaction("Locally write mutations","readwrite",C=>{let N=wr(),R=ve();return l.Ns.getEntries(C,p).next(k=>{N=k,N.forEach((G,re)=>{re.isValidDocument()||(R=R.add(G))})}).next(()=>l.localDocuments.getOverlayedDocuments(C,N)).next(k=>{g=k;let G=[];for(let re of c){let Y=w2(re,g.get(re.key).overlayedDocument);Y!=null&&G.push(new Hn(re.key,Y,wE(Y.value.mapValue),Qt.exists(!0)))}return l.mutationQueue.addMutationBatch(C,u,G,c)}).next(k=>{b=k;let G=k.applyToLocalDocumentSet(g,R);return l.documentOverlayCache.saveOverlays(C,k.batchId,G)})}).then(()=>({batchId:b.batchId,changes:PE(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,c,l){let u=s.Vu[s.currentUser.toKey()];u||(u=new Ye(ye)),u=u.insert(c,l),s.Vu[s.currentUser.toKey()]=u}(r,i.batchId,t),yield ma(r,i.changes),yield Pu(r.remoteStore)}catch(i){let o=Sg(i,"Failed to persist write");t.reject(o)}})}function iI(n,e){return j(this,null,function*(){let t=ae(n);try{let r=yield K2(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Au.get(o);s&&(Pe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?Pe(s.hu,14607):i.removedDocuments.size>0&&(Pe(s.hu,42227),s.hu=!1))}),yield ma(t,r,e)}catch(r){yield zo(r)}})}function jC(n,e,t){let r=ae(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((o,s)=>{let c=s.view.va(e);c.snapshot&&i.push(c.snapshot)}),function(s,c){let l=ae(s);l.onlineState=c;let u=!1;l.queries.forEach((p,g)=>{for(let b of g.Sa)b.va(c)&&(u=!0)}),u&&Tg(l)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function wk(n,e,t){return j(this,null,function*(){let r=ae(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new Ye(te.comparator);s=s.insert(o,Cn.newNoDocument(o,ce.min()));let c=ve().add(o),l=new Zl(ce.min(),new Map,new Ye(ye),s,c);yield iI(r,l),r.du=r.du.remove(o),r.Au.delete(e),Ag(r)}else yield Tm(r.localStore,e,!1).then(()=>Ym(r,e,t)).catch(zo)})}function Ck(n,e){return j(this,null,function*(){let t=ae(n),r=e.batch.batchId;try{let i=yield W2(t.localStore,e);sI(t,r,null),oI(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ma(t,i)}catch(i){yield zo(i)}})}function Ek(n,e,t){return j(this,null,function*(){let r=ae(n);try{let i=yield function(s,c){let l=ae(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let p;return l.mutationQueue.lookupMutationBatch(u,c).next(g=>(Pe(g!==null,37113),p=g.keys(),l.mutationQueue.removeMutationBatch(u,g))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,p,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,p)).next(()=>l.localDocuments.getDocuments(u,p))})}(r.localStore,e);sI(r,e,t),oI(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ma(r,i)}catch(i){yield zo(i)}})}function oI(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function sI(n,e,t){let r=ae(n),i=r.Vu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Ym(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||aI(n,r)})}function aI(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(Eg(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Ag(n))}function BC(n,e,t){for(let r of t)r instanceof pu?(n.Ru.addReference(r.key,e),Ik(n,r)):r instanceof mu?(K(Mg,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||aI(n,r.key)):ne(19791,{wu:r})}function Ik(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(K(Mg,"New document in limbo: "+t),n.Eu.add(r),Ag(n))}function Ag(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new te(qe.fromString(e)),r=n.fu.next();n.Au.set(r,new Km(t)),n.du=n.du.insert(t,r),JE(n.remoteStore,new aa(Un(_g(t.path)),r,"TargetPurposeLimboResolution",dg.ce))}}function ma(n,e,t){return j(this,null,function*(){let r=ae(n),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((c,l)=>{s.push(r.pu(l,e,t).then(u=>{if((u||t)&&r.isPrimaryClient){let p=u?!u.fromCache:t?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(u){i.push(u);let p=Im.As(l.targetId,u);o.push(p)}}))}),yield Promise.all(s),r.Pu.H_(i),yield function(l,u){return j(this,null,function*(){let p=ae(l);try{yield p.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>U.forEach(u,b=>U.forEach(b.Es,C=>p.persistence.referenceDelegate.addReference(g,b.targetId,C)).next(()=>U.forEach(b.ds,C=>p.persistence.referenceDelegate.removeReference(g,b.targetId,C)))))}catch(g){if(!Ho(g))throw g;K(Cg,"Failed to update sequence numbers: "+g)}for(let g of u){let b=g.targetId;if(!g.fromCache){let C=p.Ms.get(b),N=C.snapshotVersion,R=C.withLastLimboFreeSnapshotVersion(N);p.Ms=p.Ms.insert(b,R)}}})}(r.localStore,o))})}function xk(n,e){return j(this,null,function*(){let t=ae(n);if(!t.currentUser.isEqual(e)){K(Mg,"User change. New user:",e.toKey());let r=yield QE(t.localStore,e);t.currentUser=e,function(o,s){o.mu.forEach(c=>{c.forEach(l=>{l.reject(new q(F.CANCELLED,s))})}),o.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ma(t,r.Ls)}})}function Dk(n,e){let t=ae(n),r=t.Au.get(e);if(r&&r.hu)return ve().add(r.key);{let i=ve(),o=t.Iu.get(e);if(!o)return i;for(let s of o){let c=t.Tu.get(s);i=i.unionWith(c.view.nu)}return i}}function cI(n){let e=ae(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=iI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Dk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wk.bind(null,e),e.Pu.H_=fk.bind(null,e.eventManager),e.Pu.yu=pk.bind(null,e.eventManager),e}function Sk(n){let e=ae(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ck.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ek.bind(null,e),e}var lI=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return j(this,null,function*(){this.serializer=Mu(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)})}Fu(t,r){return null}Mu(t,r){return null}vu(t){return G2(this.persistence,new Dm,t.initialUser,this.serializer)}Cu(t){return new ou(Em.mi,this.serializer)}Du(t){return new Mm}terminate(){return j(this,null,function*(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),Jm=class extends lI{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Pe(this.persistence.referenceDelegate instanceof su,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new um(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new ou(r=>su.mi(r,t),this.serializer)}};var Tk=(()=>{class n{initialize(t,r){return j(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>jC(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=xk.bind(null,this.syncEngine),yield uk(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new zm}()}createDatastore(t){let r=Mu(t.databaseInfo.databaseId),i=function(s){return new Rm(s)}(t.databaseInfo);return function(s,c,l,u){return new Lm(s,c,l,u)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,c,l){return new Bm(i,o,s,c,l)}(this.localStore,this.datastore,t.asyncQueue,r=>jC(this.syncEngine,r,0),function(){return cu.v()?new cu:new Am}())}createSyncEngine(t,r){return function(o,s,c,l,u,p,g){let b=new Qm(o,s,c,l,u,p);return g&&(b.gu=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return j(this,null,function*(){yield function(r){return j(this,null,function*(){let i=ae(r);K(ki,"RemoteStore shutting down."),i.Ea.add(5),yield pa(i),i.Aa.shutdown(),i.Ra.set("Unknown")})}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()})}}return n.provider={build:()=>new n},n})();var Xm=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):yr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Qr="FirestoreClient",Zm=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=pt.UNAUTHENTICATED,this.clientId=ta.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>j(this,null,function*(){K(Qr,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(K(Qr,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>j(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Sg(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Cp(n,e){return j(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),K(Qr,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>j(this,null,function*(){r.isEqual(i)||(yield QE(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function UC(n,e){return j(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Mk(n);K(Qr,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>FC(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>FC(e.remoteStore,i)),n._onlineComponents=e})}function Mk(n){return j(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){K(Qr,"Using user provided OfflineComponentProvider");try{yield Cp(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Mo("Error using user provided cache. Falling back to memory cache: "+t),yield Cp(n,new lI)}}else K(Qr,"Using default OfflineComponentProvider"),yield Cp(n,new Jm(void 0));return n._offlineComponents})}function uI(n){return j(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(K(Qr,"Using user provided OnlineComponentProvider"),yield UC(n,n._uninitializedComponentsProvider._online)):(K(Qr,"Using default OnlineComponentProvider"),yield UC(n,new Tk))),n._onlineComponents})}function Ak(n){return uI(n).then(e=>e.syncEngine)}function $C(n){return j(this,null,function*(){let e=yield uI(n),t=e.eventManager;return t.onListen=mk.bind(null,e.syncEngine),t.onUnlisten=vk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=gk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=_k.bind(null,e.syncEngine),t})}function dI(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var zC=new Map;var hI="firestore.googleapis.com",HC=!0,gu=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new q(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hI,this.ssl=HC}else this.host=e.host,this.ssl=e.ssl??HC;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=KE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<z2)throw new q(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}LR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dI(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Uo=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gu({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gu(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Ip;switch(r.type){case"firstParty":return new Tp(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return j(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=zC.get(t);r&&(K("ComponentProvider","Removing Datastore"),zC.delete(t),r.terminate())}(this),Promise.resolve()}};function Pk(n,e,t,r={}){n=wn(n,Uo);let i=Ol(e),o=n._getSettings(),s=ue(J({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;i&&(Ow(`https://${c}`),Rw("Firestore",!0)),o.host!==hI&&o.host!==c&&Mo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=ue(J({},o),{host:c,ssl:i,emulatorOptions:r});if(!vo(l,s)&&(n._setSettings(l),r.mockUserToken)){let u,p;if(typeof r.mockUserToken=="string")u=r.mockUserToken,p=pt.MOCK_USER;else{u=Nw(r.mockUserToken,n._app?.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new q(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new pt(g)}n._authCredentials=new xp(new Hl(u,p))}}var Yr=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},gt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $r(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(fa(t,n._jsonSchema))return new n(e,r||null,new te(qe.fromString(t.referencePath)))}};gt._jsonSchemaVersion="firestore/documentReference/1.0",gt._jsonSchema={type:rt("string",gt._jsonSchemaVersion),referencePath:rt("string")};var $r=class n extends Yr{constructor(e,t,r){super(e,t,_g(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new gt(this.firestore,null,new te(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function In(n,e,...t){if(n=Gt(n),JC("collection","path",e),n instanceof Uo){let r=qe.fromString(e,...t);return cC(r),new $r(n,null,r)}{if(!(n instanceof gt||n instanceof $r))throw new q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(qe.fromString(e,...t));return cC(r),new $r(n.firestore,null,r)}}function Cr(n,e,...t){if(n=Gt(n),arguments.length===1&&(e=ta.newId()),JC("doc","path",e),n instanceof Uo){let r=qe.fromString(e,...t);return aC(r),new gt(n,null,new te(r))}{if(!(n instanceof gt||n instanceof $r))throw new q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(qe.fromString(e,...t));return aC(r),new gt(n.firestore,n instanceof $r?n.converter:null,new te(r))}}var qC="AsyncQueue",yu=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new lu(this,"async_queue_retry"),this._c=()=>{let r=wp();r&&K(qC,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=wp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=wp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new gr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}lc(){return j(this,null,function*(){if(this.Xu.length!==0){try{yield this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ho(e))throw e;K(qC,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}})}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,yr("INTERNAL UNHANDLED ERROR: ",GC(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=Um.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&ne(47125,{Pc:GC(this.nc)})}verifyOperationInProgress(){}Tc(){return j(this,null,function*(){let e;do e=this.ac,yield e;while(e!==this.ac)})}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function GC(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function WC(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var qn=class extends Uo{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new yu,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return j(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new yu(e),this._firestoreClient=void 0,yield e}})}};function Ou(n,e){let t=typeof n=="object"?n:Zw(),r=typeof n=="string"?n:e||Ql,i=Yw(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=Pw("firestore");o&&Pk(i,...o)}return i}function Pg(n){if(n._terminated)throw new q(F.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Ok(n),n._firestoreClient}function Ok(n){let e=n._freezeSettings(),t=function(i,o,s,c){return new Np(i,o,s,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,dI(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Zm(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}}(n._componentsProvider))}var zr=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(It.fromBase64String(e))}catch(t){throw new q(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(It.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(fa(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};zr._jsonSchemaVersion="firestore/bytes/1.0",zr._jsonSchema={type:rt("string",zr._jsonSchemaVersion),bytes:rt("string")};var Fi=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new q(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ua=class{constructor(e){this._methodName=e}};var Hr=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new q(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new q(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ye(this._lat,e._lat)||ye(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(fa(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Hr._jsonSchemaVersion="firestore/geoPoint/1.0",Hr._jsonSchema={type:rt("string",Hr._jsonSchemaVersion),latitude:rt("number"),longitude:rt("number")};var qr=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(fa(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new q(F.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};qr._jsonSchemaVersion="firestore/vectorValue/1.0",qr._jsonSchema={type:rt("string",qr._jsonSchemaVersion),vectorValues:rt("object")};var Nk=/^__.*__$/,eg=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Hn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ri(e,this.data,t,this.fieldTransforms)}},vu=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Hn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function fI(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne(40011,{Ac:n})}}var tg=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new n(J(J({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return bu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(fI(this.Ac)&&Nk.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},ng=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Mu(e)}Cc(e,t,r,i=!1){return new tg({Ac:e,methodName:t,Dc:r,path:Kt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ga(n){let e=n._freezeSettings(),t=Mu(n._databaseId);return new ng(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Og(n,e,t,r,i,o={}){let s=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);Ng("Data must be an object, but it was:",s,r);let c=gI(r,s),l,u;if(o.merge)l=new un(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let p=[];for(let g of o.mergeFields){let b=rg(e,g,t);if(!s.contains(b))throw new q(F.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);vI(p,b)||p.push(b)}l=new un(p),u=s.fieldTransforms.filter(g=>l.covers(g.field))}else l=null,u=s.fieldTransforms;return new eg(new Wt(c),l,u)}var _u=class n extends ua{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function pI(n,e,t,r){let i=n.Cc(1,e,t);Ng("Data must be an object, but it was:",i,r);let o=[],s=Wt.empty();Jr(r,(l,u)=>{let p=Rg(e,l,t);u=Gt(u);let g=i.yc(p);if(u instanceof _u)o.push(p);else{let b=ya(u,g);b!=null&&(o.push(p),s.set(p,b))}});let c=new un(o);return new vu(s,c,i.fieldTransforms)}function mI(n,e,t,r,i,o){let s=n.Cc(1,e,t),c=[rg(e,r,t)],l=[i];if(o.length%2!=0)throw new q(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<o.length;b+=2)c.push(rg(e,o[b])),l.push(o[b+1]);let u=[],p=Wt.empty();for(let b=c.length-1;b>=0;--b)if(!vI(u,c[b])){let C=c[b],N=l[b];N=Gt(N);let R=s.yc(C);if(N instanceof _u)u.push(C);else{let k=ya(N,R);k!=null&&(u.push(C),p.set(C,k))}}let g=new un(u);return new vu(p,g,s.fieldTransforms)}function Rk(n,e,t,r=!1){return ya(t,n.Cc(r?4:3,e))}function ya(n,e){if(yI(n=Gt(n)))return Ng("Unsupported field value:",e,n),gI(n,e);if(n instanceof ua)return function(r,i){if(!fI(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let c of r){let l=ya(c,i.wc(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Gt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return g2(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=it.fromDate(r);return{timestampValue:ru(i.serializer,o)}}if(r instanceof it){let o=new it(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ru(i.serializer,o)}}if(r instanceof Hr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zr)return{bytesValue:UE(i.serializer,r._byteString)};if(r instanceof gt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:wg(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof qr)return function(s,c){return{mapValue:{fields:{[pg]:{stringValue:mg},[Po]:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw c.Sc("VectorValues must only contain numeric values.");return bg(c.serializer,u)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Iu(r)}`)}(n,e)}function gI(n,e){let t={};return fE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jr(n,(r,i)=>{let o=ya(i,e.mc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function yI(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof it||n instanceof Hr||n instanceof zr||n instanceof gt||n instanceof ua||n instanceof qr)}function Ng(n,e,t){if(!yI(t)||!XC(t)){let r=Iu(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function rg(n,e,t){if((e=Gt(e))instanceof Fi)return e._internalPath;if(typeof e=="string")return Rg(n,e);throw bu("Field path arguments must be of type string or ",n,!1,void 0,t)}var kk=new RegExp("[~\\*/\\[\\]]");function Rg(n,e,t){if(e.search(kk)>=0)throw bu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Fi(...e.split("."))._internalPath}catch{throw bu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function bu(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new q(F.INVALID_ARGUMENT,c+n+l)}function vI(n,e){return n.some(t=>t.isEqual(e))}var wu=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new ig(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Nu("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},ig=class extends wu{data(){return super.data()}};function Nu(n,e){return typeof e=="string"?Rg(n,e):e instanceof Fi?e._internalPath:e._delegate._internalPath}function Fk(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new q(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var da=class{},ha=class extends da{};function va(n,e,...t){let r=[];e instanceof da&&r.push(e),r=r.concat(t),function(o){let s=o.filter(l=>l instanceof og).length,c=o.filter(l=>l instanceof Cu).length;if(s>1||s>0&&c>0)throw new q(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Cu=class n extends ha{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return bI(e._query,t),new Yr(e.firestore,e.converter,Gp(e._query,t))}_parse(e){let t=ga(e.firestore);return function(o,s,c,l,u,p,g){let b;if(u.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new q(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){QC(g,p);let N=[];for(let R of g)N.push(KC(l,o,R));b={arrayValue:{values:N}}}else b=KC(l,o,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||QC(g,p),b=Rk(c,s,g,p==="in"||p==="not-in");return nt.create(u,p,b)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function Ru(n,e,t){let r=e,i=Nu("where",n);return Cu._create(i,r,t)}var og=class n extends da{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:En.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,c=o.getFlattenedFilters();for(let l of c)bI(s,l),s=Gp(s,l)}(e._query,t),new Yr(e.firestore,e.converter,Gp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var sg=class n extends ha{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new q(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new q(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Pi(o,s)}(e._query,this._field,this._direction);return new Yr(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Wr(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function _I(n,e="asc"){let t=e,r=Nu("orderBy",n);return sg._create(r,t)}var ag=class n extends ha{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Yr(e.firestore,e.converter,Xl(e._query,this._limit,this._limitType))}};function _a(n){return jR("limit",n),ag._create("limit",n,"F")}function KC(n,e,t){if(typeof(t=Gt(t))=="string"){if(t==="")throw new q(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!SE(e)&&t.indexOf("/")!==-1)throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(qe.fromString(t));if(!te.isDocumentKey(r))throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return mC(n,new te(r))}if(t instanceof gt)return mC(n,t._key);throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Iu(t)}.`)}function QC(n,e){if(!Array.isArray(n)||n.length===0)throw new q(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bI(n,e){let t=function(i,o){for(let s of i)for(let c of s.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new q(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var cg=class{convertValue(e,t="none"){switch(Gr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return He(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(_r(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ne(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Jr(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){let t=e.fields?.[Po].arrayValue?.values?.map(r=>He(r.doubleValue));return new qr(t)}convertGeoPoint(e){return new Hr(He(e.latitude),He(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Du(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ia(e));default:return null}}convertTimestamp(e){let t=vr(e);return new it(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=qe.fromString(e);Pe(WE(r),9688,{name:e});let i=new Yl(r.get(1),r.get(3)),o=new te(r.popFirst(5));return i.isEqual(t)||yr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function kg(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Si=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ti=class n extends wu{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new So(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Nu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new q(F.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Ti._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ti._jsonSchema={type:rt("string",Ti._jsonSchemaVersion),bundleSource:rt("string","DocumentSnapshot"),bundleName:rt("string"),bundle:rt("string")};var So=class extends Ti{data(e={}){return super.data(e)}},To=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Si(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new So(this._firestore,this._userDataWriter,r.key,r,new Si(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new q(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>{let l=new So(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Si(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let l=new So(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Si(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,p=-1;return c.type!==0&&(u=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),p=s.indexOf(c.doc.key)),{type:Vk(c.type),doc:l,oldIndex:u,newIndex:p}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new q(F.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ta.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function Vk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne(61501,{type:n})}}To._jsonSchemaVersion="firestore/querySnapshot/1.0",To._jsonSchema={type:rt("string",To._jsonSchemaVersion),bundleSource:rt("string","QuerySnapshot"),bundleName:rt("string"),bundle:rt("string")};var Eu=class extends cg{constructor(e){super(),this.firestore=e}convertBytes(e){return new zr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new gt(this.firestore,null,t)}};function wI(n,e,t){n=wn(n,gt);let r=wn(n.firestore,qn),i=kg(n.converter,e,t);return wa(r,[Og(ga(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Qt.none())])}function ku(n,e,t,...r){n=wn(n,gt);let i=wn(n.firestore,qn),o=ga(i),s;return s=typeof(e=Gt(e))=="string"||e instanceof Fi?mI(o,"updateDoc",n._key,e,t,r):pI(o,"updateDoc",n._key,e),wa(i,[s.toMutation(n._key,Qt.exists(!0))])}function CI(n){return wa(wn(n.firestore,qn),[new jo(n._key,Qt.none())])}function ba(n,e){let t=wn(n.firestore,qn),r=Cr(n),i=kg(n.converter,e);return wa(t,[Og(ga(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Qt.exists(!1))]).then(()=>r)}function Er(n,...e){n=Gt(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||WC(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(WC(e[r])){let l=e[r];e[r]=l.next?.bind(l),e[r+1]=l.error?.bind(l),e[r+2]=l.complete?.bind(l)}let o,s,c;if(n instanceof gt)s=wn(n.firestore,qn),c=_g(n._key.path),o={next:l=>{e[r]&&e[r](Lk(s,n,l))},error:e[r+1],complete:e[r+2]};else{let l=wn(n,Yr);s=wn(l.firestore,qn),c=l._query;let u=new Eu(s);o={next:p=>{e[r]&&e[r](new To(s,u,l,p))},error:e[r+1],complete:e[r+2]},Fk(n._query)}return function(u,p,g,b){let C=new Xm(b),N=new qm(p,C,g);return u.asyncQueue.enqueueAndForget(()=>j(this,null,function*(){return dk(yield $C(u),N)})),()=>{C.Nu(),u.asyncQueue.enqueueAndForget(()=>j(this,null,function*(){return hk(yield $C(u),N)}))}}(Pg(s),c,i,o)}function wa(n,e){return function(r,i){let o=new gr;return r.asyncQueue.enqueueAndForget(()=>j(this,null,function*(){return bk(yield Ak(r),i,o)})),o.promise}(Pg(n),e)}function Lk(n,e,t){let r=t.docs.get(e._key),i=new Eu(n);return new Ti(n,i,e._key,r,new Si(t.hasPendingWrites,t.fromCache),e.converter)}var lg=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ga(e)}set(e,t,r){this._verifyNotCommitted();let i=Ep(e,this._firestore),o=kg(i.converter,t,r),s=Og(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Qt.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Ep(e,this._firestore),s;return s=typeof(t=Gt(t))=="string"||t instanceof Fi?mI(this._dataReader,"WriteBatch.update",o._key,t,r,i):pI(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Qt.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Ep(e,this._firestore);return this._mutations=this._mutations.concat(new jo(t._key,Qt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new q(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ep(n,e){if((n=Gt(n)).firestore!==e)throw new q(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function EI(n){return Pg(n=wn(n,qn)),new lg(n,e=>wa(n,e))}(function(e,t=!0){(function(i){$o=i})(Xw),Gs(new hr("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),c=new qn(new Dp(r.getProvider("auth-internal")),new Mp(s,r.getProvider("app-check-internal")),function(u,p){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new q(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yl(u.options.projectId,p)}(s,i),s);return o=J({useFetchStreams:t},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Ur(iC,oC,e),Ur(iC,oC,"esm2020")})();var Fu=(()=>{class n{constructor(){this.app=Ks(an.firebaseConfig),this.db=Ou(this.app),this.messagesSubject=new Je([]),this.messages$=this.messagesSubject.asObservable(),this.logoutSubject=new Je(void 0),this.logout$=this.logoutSubject.asObservable(),this.listenForMessages()}listenForMessages(){let t=In(this.db,"messages"),r=va(t,_I("timestamp","asc"),_a(100));Er(r,i=>{let o=i.docs.map(s=>{let c=s.data();return{id:s.id,text:c.text,senderName:c.senderName,timestamp:c.timestamp.toDate(),userId:c.userId,conversationId:c.conversationId,audioBase64:c.audioBase64,isRead:c.isRead||!1}});this.messagesSubject.next(o)},i=>{console.error("Error listening to messages:",i)})}sendMessage(t,r,i){return j(this,null,function*(){let o=In(this.db,"messages"),s=localStorage.getItem("jjm_user_id")||null;yield ba(o,{text:t,senderName:r,conversationId:i,timestamp:new Date,userId:s,isRead:!1})})}sendAudioMessage(t,r,i){return j(this,null,function*(){let o=In(this.db,"messages"),s=localStorage.getItem("jjm_user_id")||null;yield ba(o,{text:"\u{1F3A4} Voice Message",senderName:r,audioBase64:t,conversationId:i,timestamp:new Date,userId:s,isRead:!1})})}deleteMessage(t){return j(this,null,function*(){let r=Cr(this.db,"messages",t);yield CI(r)})}markAsRead(t){return j(this,null,function*(){let r=EI(this.db);t.forEach(i=>{let o=Cr(this.db,"messages",i);r.update(o,{isRead:!0})}),yield r.commit()})}getMessages(){return this.messages$}triggerLogout(){this.logoutSubject.next()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var xI=(()=>{class n{constructor(){this.app=Ks(an.firebaseConfig),this.db=Ou(this.app),this.peerConnection=null,this.localStream=null,this.remoteStream=null,this.callDocSubscription=null,this.offerCandidatesSubscription=null,this.answerCandidatesSubscription=null,this.incomingCall$=new Sn,this.callStatus$=new Je("idle"),this.remoteStream$=new Je(null),this.currentCallId=null,this.candidateQueue=[],this.servers={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:stun1.l.google.com:19302","stun:stun2.l.google.com:19302","stun:stun3.l.google.com:19302","stun:stun4.l.google.com:19302"]}]}}initializeCall(t,r){return j(this,null,function*(){this.currentCallId=null,this.callStatus$.next("calling");let i=Cr(In(this.db,"calls"));this.currentCallId=i.id,yield this.setupLocalMedia(),this.setupPeerConnection(this.currentCallId),this.localStream&&this.localStream.getTracks().forEach(l=>{this.peerConnection&&this.localStream&&this.peerConnection.addTrack(l,this.localStream)});let o=yield this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!1});yield this.peerConnection.setLocalDescription(o);let s={id:this.currentCallId,conversationId:t,callerName:r,status:"offering",offer:{type:o.type,sdp:o.sdp},timestamp:new Date};yield wI(i,s),this.callDocSubscription=Er(i,l=>j(this,null,function*(){let u=l.data();if(!(!this.peerConnection||!u)){if(this.peerConnection.signalingState==="have-local-offer"&&u.answer){let p=new RTCSessionDescription(u.answer);yield this.peerConnection.setRemoteDescription(p),this.callStatus$.next("connected"),this.candidateQueue.forEach(g=>{this.peerConnection?.addIceCandidate(g).catch(b=>console.error("Error adding buffered candidate",b))}),this.candidateQueue=[]}(u.status==="ended"||u.status==="rejected")&&this.endCallInternal()}}));let c=In(i,"answerCandidates");this.answerCandidatesSubscription=Er(c,l=>{l.docChanges().forEach(u=>{if(u.type==="added"){let p=u.doc.data(),g=new RTCIceCandidate(p);this.peerConnection?.remoteDescription?this.peerConnection.addIceCandidate(g).catch(b=>console.error("Error adding candidate",b)):(console.log("Buffering candidate..."),this.candidateQueue.push(g))}})})})}answerCall(t){return j(this,null,function*(){this.currentCallId=t.id,this.callStatus$.next("connected");let r=Cr(this.db,"calls",t.id);yield this.setupLocalMedia(),this.setupPeerConnection(t.id),this.localStream.getTracks().forEach(l=>{this.peerConnection.addTrack(l,this.localStream)});let i=t.offer;yield this.peerConnection.setRemoteDescription(new RTCSessionDescription(i));let o=yield this.peerConnection.createAnswer();yield this.peerConnection.setLocalDescription(o);let s={type:o.type,sdp:o.sdp};yield ku(r,{answer:s,status:"answered"});let c=In(r,"offerCandidates");this.offerCandidatesSubscription=Er(c,l=>{l.docChanges().forEach(u=>{if(u.type==="added"){let p=u.doc.data(),g=new RTCIceCandidate(p);this.peerConnection?.remoteDescription&&this.peerConnection.addIceCandidate(g).catch(b=>console.error("Error adding offer candidate",b))}})}),this.callDocSubscription=Er(r,l=>{let u=l.data();u&&u.status==="ended"&&this.endCallInternal()})})}endCall(){return j(this,null,function*(){if(this.currentCallId){let t=Cr(this.db,"calls",this.currentCallId);yield ku(t,{status:"ended"}).catch(()=>{})}this.endCallInternal()})}rejectCall(t){let r=Cr(this.db,"calls",t);ku(r,{status:"rejected"}).catch(()=>{})}endCallInternal(){this.callStatus$.next("idle"),this.remoteStream$.next(null),this.localStream&&(this.localStream.getTracks().forEach(t=>t.stop()),this.localStream=null),this.remoteStream&&(this.remoteStream.getTracks().forEach(t=>t.stop()),this.remoteStream=null),this.peerConnection&&(this.peerConnection.close(),this.peerConnection=null),this.callDocSubscription&&(this.callDocSubscription(),this.callDocSubscription=null),this.offerCandidatesSubscription&&(this.offerCandidatesSubscription(),this.offerCandidatesSubscription=null),this.answerCandidatesSubscription&&(this.answerCandidatesSubscription(),this.answerCandidatesSubscription=null),this.currentCallId=null}setupLocalMedia(){return j(this,null,function*(){try{this.localStream=yield navigator.mediaDevices.getUserMedia({video:!1,audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}}),console.log("CallService: Local media acquired",this.localStream),this.localStream.getAudioTracks().forEach(t=>{console.log("Local Track:",t.label,t.readyState,t.enabled,t.muted),t.enabled=!0})}catch(t){throw console.error("CallService: Error getting user media",t),t}})}setupPeerConnection(t){this.peerConnection=new RTCPeerConnection(this.servers),this.peerConnection.oniceconnectionstatechange=()=>{let r=this.peerConnection?.iceConnectionState;console.log("CallService: ICE Connection State Change:",r),(r==="failed"||r==="disconnected")&&console.warn("CallService: Peer connection failed/disconnected. Check firewall/network."),r==="connected"&&console.log("CallService: P2P Connection Established!")},this.peerConnection.onicecandidateerror=r=>{console.error("CallService: ICE Candidate Error:",r.errorCode,r.errorText,r.url)},this.peerConnection.onicecandidate=r=>{if(r.candidate){console.log("CallService: Generated ICE Candidate:",r.candidate.type,r.candidate.address);let i="offerCandidates";this.peerConnection?.localDescription&&this.peerConnection.localDescription.type==="answer"&&(i="answerCandidates");let o=In(this.db,"calls",t,i);ba(o,r.candidate.toJSON())}},this.peerConnection.ontrack=r=>{console.log("CallService: Received remote track",r.streams[0]);let i=r.streams[0];this.remoteStream=i,this.remoteStream$.next(i)}}listenForIncomingCalls(t){this.callDocSubscription;let r=In(this.db,"calls"),i=va(r,Ru("conversationId","==",t),Ru("status","==","offering"),_a(1));return Er(i,o=>{o.docChanges().forEach(s=>{if(s.type==="added"){let c=s.doc.data();c.id=s.doc.id,this.incomingCall$.next(c)}s.type==="removed"&&this.incomingCall$.next(null)})})}listenForAllIncomingCalls(){let t=In(this.db,"calls"),r=va(t,Ru("status","==","offering"),_a(1));return Er(r,i=>{i.docChanges().forEach(o=>{if(o.type==="added"){let s=o.doc.data();s.id=o.doc.id,this.incomingCall$.next(s)}o.type==="removed"&&this.incomingCall$.next(null)})})}toggleMic(t){this.localStream&&this.localStream.getAudioTracks().forEach(r=>{r.enabled=!t})}setAudioOutput(t,r){return j(this,null,function*(){if("setSinkId"in r)try{return yield r.setSinkId(t),console.log(`Audio output set to ${t}`),!0}catch(i){return console.error("Error setting audio output:",i),!1}return console.warn("setSinkId not supported in this browser."),!1})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=me({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Bk=["messagesContainer"],Uk=["remoteAudio"];function $k(n,e){if(n&1){let t=se();f(0,"div",5)(1,"div",6)(2,"h2"),y(3,"\u{1F4CB} Customer Information"),h(),f(4,"p",7),y(5,"Please provide your information to use the chat"),h(),f(6,"form",8),B("ngSubmit",function(){V(t);let i=A();return L(i.registerCustomer())}),f(7,"div",9)(8,"label",10),y(9,"Full Name *"),h(),f(10,"input",11),Z("ngModelChange",function(i){V(t);let o=A();return ee(o.customerInfo.name,i)||(o.customerInfo.name=i),L(i)}),h()(),f(11,"div",9)(12,"label",12),y(13,"Phone Number *"),h(),f(14,"input",13),Z("ngModelChange",function(i){V(t);let o=A();return ee(o.customerInfo.phoneNumber,i)||(o.customerInfo.phoneNumber=i),L(i)}),h()(),f(15,"div",9)(16,"label",14),y(17,"Delivery Address *"),h(),f(18,"textarea",15),Z("ngModelChange",function(i){V(t);let o=A();return ee(o.customerInfo.address,i)||(o.customerInfo.address=i),L(i)}),h()(),f(19,"div",9)(20,"label"),y(21,"GPS Coordinates"),h(),f(22,"div",16)(23,"input",17),Z("ngModelChange",function(i){V(t);let o=A();return ee(o.customerInfo.gpsCoordinates,i)||(o.customerInfo.gpsCoordinates=i),L(i)}),h(),f(24,"button",18),B("click",function(){V(t);let i=A();return L(i.getLocation())}),y(25,"\u{1F4CD}"),h()()(),f(26,"button",19),y(27," Start Chat "),h()()()()}if(n&2){let t=A();v(10),X("ngModel",t.customerInfo.name),v(4),X("ngModel",t.customerInfo.phoneNumber),v(4),X("ngModel",t.customerInfo.address),M("readonly",t.isLocationReadOnly),v(5),X("ngModel",t.customerInfo.gpsCoordinates),M("readonly",t.isLocationReadOnly)}}function zk(n,e){if(n&1&&(f(0,"div",50),y(1),h()),n&2){let t=A().$implicit,r=A(3);v(),H(r.unreadCounts[t])}}function Hk(n,e){if(n&1){let t=se();f(0,"div",44),B("click",function(){let i=V(t).$implicit,o=A(3);return L(o.selectConversation(i))}),f(1,"div",45),y(2),h(),f(3,"div",46)(4,"span",47),y(5),h(),f(6,"span",48),y(7,"Click to view chat"),h()(),$(8,zk,2,1,"div",49),h()}if(n&2){let t=e.$implicit,r=A(3);be("active",r.currentConversationId===t),v(2),H(r.getDisplayName(t).charAt(0).toUpperCase()),v(3),H(r.getDisplayName(t)),v(3),M("ngIf",r.unreadCounts[t]>0)}}function qk(n,e){n&1&&(f(0,"div",51),y(1," No conversations yet. "),h())}function Gk(n,e){if(n&1&&(f(0,"div",40)(1,"div",41),y(2," Conversations "),h(),f(3,"div",42),$(4,Hk,9,5,"div",43)(5,qk,2,0,"div",34),h()()),n&2){let t=A(2);v(4),M("ngForOf",t.conversations),v(),M("ngIf",t.conversations.length===0)}}function Wk(n,e){if(n&1&&(f(0,"div"),y(1),h()),n&2){let t=A(3);v(),Q("\u{1F4CD} ",t.getUserAddress(t.currentConversationId),"")}}function Kk(n,e){if(n&1&&(f(0,"a",55),y(1),h()),n&2){let t=A(3);M("href","https://www.google.com/maps/search/?api=1&query="+t.getUserGps(t.currentConversationId),er),v(),Q(" \u{1F30D} ",t.getUserGps(t.currentConversationId)," ")}}function Qk(n,e){if(n&1&&(f(0,"div",52),$(1,Wk,2,1,"div",53)(2,Kk,2,2,"a",54),h()),n&2){let t=A(2);v(),M("ngIf",t.getUserAddress(t.currentConversationId)),v(),M("ngIf",t.getUserGps(t.currentConversationId))}}function Yk(n,e){if(n&1){let t=se();f(0,"button",56),B("click",function(){V(t);let i=A(2);return L(i.logout())}),y(1," \u{1F6AA} "),h()}}function Jk(n,e){if(n&1){let t=se();f(0,"div",57)(1,"div",58)(2,"h3"),y(3,"\u{1F4DE} Incoming Call"),h(),f(4,"p"),y(5),h(),f(6,"div",59)(7,"button",60),B("click",function(){V(t);let i=A(2);return L(i.acceptCall())}),y(8,"Accept"),h(),f(9,"button",61),B("click",function(){V(t);let i=A(2);return L(i.rejectCall())}),y(10,"Reject"),h()()()()}if(n&2){let t=A(2);v(5),Q("",t.incomingCall.callerName," is calling...")}}function Xk(n,e){if(n&1){let t=se();f(0,"button",72),B("click",function(){V(t);let i=A(3);return L(i.toggleMic())}),y(1),h()}if(n&2){let t=A(3);be("active",t.isMicMuted),v(),Q(" ",t.isMicMuted?"\u{1F507}":"\u{1F399}\uFE0F"," ")}}function Zk(n,e){if(n&1){let t=se();f(0,"div",62)(1,"div",58)(2,"div",63),y(3,"\u{1F464}"),h(),f(4,"h3"),y(5),h(),f(6,"p"),y(7),h(),f(8,"div",64),Ae(9,"audio",65,1),h(),f(11,"div",66),Ae(12,"div",67),h(),f(13,"div",68)(14,"button",69),B("click",function(){V(t);let i=A(2);return L(i.toggleSpeaker())}),y(15),h(),$(16,Xk,2,3,"button",70),h(),f(17,"div",59)(18,"button",71),B("click",function(){V(t);let i=A(2);return L(i.endCall())}),y(19,"End Call"),h()()()()}if(n&2){let t=A(2);v(5),H(t.callStatus==="calling"?"Calling...":"Connected"),v(2),H(t.isAppUser?t.currentConversationId:"Support"),v(2),M("srcObject",t.remoteStream),v(3),vn("width",t.audioLevel,"%"),v(2),be("active",t.isSpeakerOn),v(),Q(" ",t.isSpeakerOn?"\u{1F50A}":"\u{1F508}"," "),v(),M("ngIf",t.isAppUser)}}function eF(n,e){if(n&1&&(f(0,"div",51),y(1),h()),n&2){let t=A(2);v(),Q(" ",t.isAppUser&&!t.currentConversationId?"Select a conversation to start chatting.":"No messages yet. Start the conversation!"," ")}}function tF(n,e){if(n&1&&(f(0,"span",83),y(1),h()),n&2){let t=A().$implicit,r=A(2);v(),Q(" \u{1F4CD} ",r.getUserAddress(t.senderName)," ")}}function nF(n,e){if(n&1&&(f(0,"a",84),y(1),h()),n&2){let t=A().$implicit,r=A(2);M("href","https://www.google.com/maps/search/?api=1&query="+r.getUserGps(t.senderName),er),v(),Q(" \u{1F30D} ",r.getUserGps(t.senderName)," ")}}function rF(n,e){if(n&1&&(f(0,"div",85),y(1),h()),n&2){let t=A().$implicit;v(),H(t.text)}}function iF(n,e){if(n&1&&(f(0,"div",86),Ae(1,"audio",87),h()),n&2){let t=A().$implicit;v(),M("src",t.audioBase64,er)}}function oF(n,e){if(n&1){let t=se();f(0,"button",88),B("click",function(){V(t);let i=A().$implicit,o=A(2);return L(o.deleteMessage(i))}),y(1," \u{1F5D1}\uFE0F "),h()}}function sF(n,e){if(n&1&&(f(0,"div",73)(1,"div",74)(2,"span",75),y(3),h(),f(4,"div",76),$(5,tF,2,1,"span",77)(6,nF,2,2,"a",78),f(7,"span",79),y(8),h()()(),$(9,rF,2,1,"div",80)(10,iF,2,1,"div",81)(11,oF,2,0,"button",82),h()),n&2){let t=e.$implicit,r=A(2);be("my-message",r.isMyMessage(t))("other-message",!r.isMyMessage(t)),v(3),H(t.senderName),v(2),M("ngIf",!r.isMyMessage(t)&&r.getUserAddress(t.senderName)),v(),M("ngIf",!r.isMyMessage(t)&&r.getUserGps(t.senderName)),v(2),H(r.formatTime(t.timestamp)),v(),M("ngIf",t.text),v(),M("ngIf",t.audioBase64),v(),M("ngIf",r.isMyMessage(t))}}function aF(n,e){if(n&1){let t=se();f(0,"div",20),$(1,Gk,6,2,"div",21),f(2,"div",22)(3,"div",23)(4,"div",24)(5,"h2"),y(6),h(),$(7,Qk,3,2,"div",25),f(8,"div",26)(9,"span",27),y(10),h(),f(11,"button",28),B("click",function(){V(t);let i=A();return L(i.changeInfo())}),y(12," \u270F\uFE0F "),h(),$(13,Yk,2,0,"button",29),f(14,"button",30),B("click",function(){V(t);let i=A();return L(i.startCall())}),y(15," \u{1F4DE} "),h()()()(),$(16,Jk,11,1,"div",31)(17,Zk,20,9,"div",32),f(18,"div",33,0),$(20,eF,2,1,"div",34)(21,sF,12,11,"div",35),h(),f(22,"div",36)(23,"input",37),Z("ngModelChange",function(i){V(t);let o=A();return ee(o.newMessage,i)||(o.newMessage=i),L(i)}),B("keyup.enter",function(){V(t);let i=A();return L(i.sendMessage())}),h(),f(24,"button",38),B("click",function(){V(t);let i=A();return L(i.sendMessage())}),y(25," Send "),h(),f(26,"button",39),B("mousedown",function(i){V(t);let o=A();return L(o.startRecording(i))})("mouseup",function(i){V(t);let o=A();return L(o.stopRecording(i))})("mouseleave",function(i){V(t);let o=A();return L(o.stopRecording(i))})("touchstart",function(i){V(t);let o=A();return L(o.startRecording(i))})("touchend",function(i){V(t);let o=A();return L(o.stopRecording(i))}),y(27),h()()()()}if(n&2){let t=A();v(),M("ngIf",t.isAppUser),v(5),Q(" \u{1F4AC} ",t.isAppUser&&t.currentConversationId?"Chat with "+t.getDisplayName(t.currentConversationId):"Customer Support Chat"," "),v(),M("ngIf",t.isAppUser&&t.currentConversationId),v(3),H(t.senderName),v(3),M("ngIf",!t.isAppUser),v(),M("disabled",t.isAppUser&&!t.currentConversationId),v(2),M("ngIf",t.callStatus==="incoming"&&t.incomingCall),v(),M("ngIf",t.callStatus==="connected"||t.callStatus==="calling"),v(3),M("ngIf",t.messages.length===0),v(),M("ngForOf",t.messages),v(2),X("ngModel",t.newMessage),M("disabled",t.isAppUser&&!t.currentConversationId),v(),M("disabled",!t.newMessage.trim()||t.isAppUser&&!t.currentConversationId),v(2),be("recording",t.isRecording),M("disabled",t.isAppUser&&!t.currentConversationId),v(),Q(" ",t.isRecording?"\u{1F534}":"\u{1F399}\uFE0F"," ")}}var DI=(()=>{class n{constructor(t,r,i,o){this.chatService=t,this.customerService=r,this.userService=i,this.callService=o,this.messages=[],this.newMessage="",this.senderName="",this.isOpen=!1,this.totalUnreadCountChange=new kt,this.isLocationReadOnly=!0,this.shouldScroll=!1,this.userNamesCache=new Map,this.userAddressesCache=new Map,this.userGpsCache=new Map,this.isRegistered=!1,this.customerInfo={name:"",phoneNumber:"",address:"N/A",gpsCoordinates:"N/A"},this.allCustomers=[],this.errorMessage="",this.isAppUser=!1,this.currentConversationId="",this.conversations=[],this.callStatus="idle",this.incomingCall=null,this.remoteStream=null,this.notificationAudioContext=null,this.audioUnlocked=!1,this.allMessagesCached=[],this.unreadCounts={},this.conversationMessageCounts={},this.isSpeakerOn=!1,this.isMicMuted=!1,this.audioLevel=0,this.audioContext=null,this.analyser=null,this.source=null,this.dataArray=null,this.animationFrameId=null,this.ringInterval=null,this.isRecording=!1,this.mediaRecorder=null,this.audioChunks=[],this.requestNotificationPermission()}ngOnChanges(t){t.isOpen&&this.isOpen&&(this.updateFilteredMessages(!1),this.shouldScroll=!0)}requestNotificationPermission(){"Notification"in window&&Notification.requestPermission()}onVisibilityChange(){document.hidden||(document.title="JJM Inventory")}unlockAudioContext(){if(this.audioUnlocked)return;if(!this.notificationAudioContext){let r=window.AudioContext||window.webkitAudioContext;this.notificationAudioContext=new r}let t=this.notificationAudioContext;if(t){t.state==="suspended"&&t.resume();try{let r=t.createBuffer(1,1,22050),i=t.createBufferSource();i.buffer=r,i.connect(t.destination),i.start(0),this.audioUnlocked=!0,console.log("ChatComponent: AudioContext unlocked via user interaction.")}catch(r){console.error("ChatComponent: Failed to unlock audio",r)}}}onUserInteraction(){this.unlockAudioContext()}ngOnInit(){this.customerSubscription=this.customerService.getCustomers().subscribe({next:t=>{this.allCustomers=t,this.checkLoginAndStatus()},error:t=>{console.error("Failed to load customers",t),this.checkLoginAndStatus()}}),this.logoutSubscription=this.chatService.logout$.subscribe(()=>{this.performForceLogout()}),this.callStatusSubscription=this.callService.callStatus$.subscribe(t=>{this.callStatus=t,t!=="incoming"&&this.stopRinging()}),this.incomingCallSubscription=this.callService.incomingCall$.subscribe(t=>{if(!t){this.callStatus==="incoming"&&(this.incomingCall=null,this.callStatus="idle",this.stopRinging());return}this.callStatus==="idle"&&t.callerName!==this.senderName&&(this.incomingCall=t,this.callStatus="incoming",this.startRinging())}),this.callService.remoteStream$.subscribe(t=>{this.remoteStream=t,t&&this.remoteAudio&&setTimeout(()=>{let r=this.remoteAudio.nativeElement;r.srcObject=t,r.muted=!1,r.volume=1;let i=t.getAudioTracks();i.length>0?(console.log("ChatComponent: Audio track found",i[0].label,"Enabled:",i[0].enabled,"Muted:",i[0].muted),i[0].enabled=!0):console.warn("ChatComponent: No audio tracks in stream!"),r.onloadedmetadata=()=>{console.log("ChatComponent: Audio metadata loaded, attempting play..."),r.play().then(()=>{console.log("ChatComponent: Audio playing successfully"),this.setupAudioVisualizer(t)}).catch(o=>console.error("ChatComponent: Error playing audio:",o))}},100)})}performForceLogout(){localStorage.removeItem("chatCustomerInfo"),localStorage.removeItem("chatUserName"),this.isRegistered=!1,this.isAppUser=!1,this.senderName="",this.conversations=[],this.currentConversationId="",this.customerInfo={name:"",phoneNumber:"",address:"N/A",gpsCoordinates:"N/A"},this.messages=[]}checkLoginAndStatus(){let t=localStorage.getItem("jjm_logged_in")==="true",r=localStorage.getItem("jjm_username"),i=localStorage.getItem("jjm_user_id");if(t){if(this.isAppUser=!0,this.isRegistered=!0,this.errorMessage="",this.senderName=r||"User",this.loadMessages(),this.incomingCallListener&&this.incomingCallListener(),this.incomingCallListener=this.callService.listenForAllIncomingCalls(),i){let s=this.userService.getUserById(i);s?this.senderName=s.fullName||s.username:this.userService.users$.pipe(si(1)).subscribe(c=>{let l=c.find(u=>u.id===i);l&&(this.senderName=l.fullName||l.username)})}return}let o=localStorage.getItem("chatCustomerInfo");if(o){let s=JSON.parse(o);this.allCustomers.find(l=>l.name.toLowerCase()===s.name.toLowerCase())?(this.customerInfo=s,this.senderName=this.customerInfo.name,this.isRegistered=!0,this.loadMessages(),this.incomingCallListener&&this.incomingCallListener(),this.incomingCallListener=this.callService.listenForIncomingCalls(this.senderName)):(localStorage.removeItem("chatCustomerInfo"),localStorage.removeItem("chatUserName"),this.isRegistered=!1,this.getLocation(!0))}else this.getLocation(!0)}ngAfterViewChecked(){this.shouldScroll&&(this.scrollToBottom(),this.shouldScroll=!1)}ngOnDestroy(){this.customerSubscription&&this.customerSubscription.unsubscribe(),this.logoutSubscription&&this.logoutSubscription.unsubscribe(),this.incomingCallSubscription&&this.incomingCallSubscription.unsubscribe(),this.callStatusSubscription&&this.callStatusSubscription.unsubscribe(),this.incomingCallListener&&this.incomingCallListener()}registerCustomer(){if(this.errorMessage="",!this.customerInfo.name.trim()){alert("Please enter your name");return}if(!this.customerInfo.phoneNumber.trim()){alert("Please enter your phone number");return}if(!this.customerInfo.address.trim()){alert("Please enter your address");return}if(!/^[\d\s\-\+\(\)]+$/.test(this.customerInfo.phoneNumber)){alert("Please enter a valid phone number");return}if(this.allCustomers.length>0){if(!this.allCustomers.find(i=>i.name.toLowerCase()===this.customerInfo.name.trim().toLowerCase())){alert("Access Denied: You must be a registered customer to use the chat.");return}}else console.warn("Customer verification skipped: Customer list is empty or failed to load.");localStorage.setItem("chatCustomerInfo",JSON.stringify(this.customerInfo)),localStorage.setItem("chatUserName",this.customerInfo.name),this.senderName=this.customerInfo.name,this.isRegistered=!0,this.isRegistered=!0,this.loadMessages(),this.callService.listenForIncomingCalls(this.senderName)}notifyUser(t){this.isMyMessage(t)||(this.playNotificationSound(),document.hidden&&"Notification"in window&&Notification.permission==="granted"&&(new Notification("New Message",{body:t.text||"You received a new audio message",icon:"/assets/icons/icon-72x72.png"}),document.title=`New Message from ${t.senderName}`))}loadMessages(){if(this.messagesSubscription){this.updateFilteredMessages(!1);return}this.messagesSubscription=this.chatService.getMessages().subscribe({next:t=>{if(this.allMessagesCached=t,this.isAppUser){let i=new Map,o=new Set,s=new Map;t.forEach(c=>{c.conversationId&&(o.add(c.conversationId),i.set(c.conversationId,(i.get(c.conversationId)||0)+1),s.set(c.conversationId,c))}),this.conversations=Array.from(o),this.userService.users$.pipe(si(1)).subscribe(c=>{this.conversations.forEach(l=>{if(!this.userNamesCache.has(l)||!this.userAddressesCache.get(l)||!this.userGpsCache.get(l)){let u=c.find(p=>p.username===l||p.fullName===l||p.id===l);if(u)this.userNamesCache.set(l,u.fullName||u.username),this.userAddressesCache.set(l,u.address||""),this.userGpsCache.set(l,u.gpsCoordinates||"");else{let p=this.allCustomers.find(g=>g.name===l);p?(this.userNamesCache.set(l,p.name),this.userAddressesCache.set(l,p.deliveryAddress),this.userGpsCache.set(l,p.gpsCoordinates||"")):this.userNamesCache.set(l,l)}}})}),this.conversations.forEach(c=>{let l=i.get(c)||0,u=this.conversationMessageCounts[c]||0;if(this.unreadCounts[c]=t.filter(p=>p.conversationId===c&&!p.isRead&&!this.isMyMessage(p)).length,l>u){let p=s.get(c);p&&this.notifyUser(p)}this.conversationMessageCounts[c]=l})}let r=0;this.isAppUser?r=Object.values(this.unreadCounts).reduce((i,o)=>i+o,0):r=t.filter(i=>!i.isRead&&!this.isMyMessage(i)).length,this.totalUnreadCountChange.emit(r),this.updateFilteredMessages(!this.isAppUser)},error:t=>{console.error("Error loading messages:",t)}})}getDisplayName(t){return this.userNamesCache.get(t)||t}getUserAddress(t){return this.userAddressesCache.get(t)||""}getUserGps(t){return this.userGpsCache.get(t)||""}updateFilteredMessages(t){let r=this.isAppUser?this.currentConversationId:this.senderName,i=this.allMessagesCached.filter(l=>r?l.conversationId===r:!1),o=this.messages.length,s=i.length,c=o>0;if(this.messages=i,this.isOpen&&r){let l=i.filter(u=>!u.isRead&&!this.isMyMessage(u)).map(u=>u.id);l.length>0&&this.chatService.markAsRead(l)}if(t&&c&&s>o){let l=i[s-1];this.isMyMessage(l)||(this.playNotificationSound(),document.hidden&&"Notification"in window&&Notification.permission==="granted"&&(new Notification("New Message",{body:l.text||"You received a new audio message",icon:"/assets/icons/icon-72x72.png"}),document.title=`(${s-o}) New Message - JJM Inventory`))}(!c||s>o)&&(this.shouldScroll=!0,setTimeout(()=>this.scrollToBottom(),100))}playNotificationSound(){try{let t=this.notificationAudioContext;if(!t){let c=window.AudioContext||window.webkitAudioContext;c&&(t=new c)}if(!t)return;t.state==="suspended"&&t.resume().catch(c=>console.warn("Could not resume audio context",c));let r=t.currentTime,i=t.createOscillator(),o=t.createOscillator(),s=t.createGain();i.type="sine",o.type="sine",i.frequency.setValueAtTime(1200,r),o.frequency.setValueAtTime(2400,r),i.connect(s),o.connect(s),s.connect(t.destination),s.gain.setValueAtTime(0,r),s.gain.linearRampToValueAtTime(.5,r+.02),s.gain.exponentialRampToValueAtTime(.01,r+.6),i.start(r),o.start(r),i.stop(r+.6),o.stop(r+.6)}catch(t){console.warn("Audio playback failed",t)}}startRinging(){if(this.ringInterval)return;let t=()=>{try{let r=window.AudioContext||window.webkitAudioContext,i=new r,o=i.createOscillator(),s=i.createOscillator(),c=i.createGain();o.connect(c),s.connect(c),c.connect(i.destination),o.frequency.value=440,s.frequency.value=480,c.gain.setValueAtTime(0,i.currentTime),c.gain.linearRampToValueAtTime(.5,i.currentTime+.1),c.gain.setValueAtTime(.5,i.currentTime+1.8),c.gain.linearRampToValueAtTime(0,i.currentTime+2),o.start(i.currentTime),s.start(i.currentTime),o.stop(i.currentTime+2),s.stop(i.currentTime+2),setTimeout(()=>{i.state!=="closed"&&i.close()},2500)}catch(r){console.warn("Ring playback failed",r)}};t(),this.ringInterval=setInterval(t,4e3)}stopRinging(){this.ringInterval&&(clearInterval(this.ringInterval),this.ringInterval=null)}sendMessage(){if(!this.newMessage.trim())return;let t=this.isAppUser?this.currentConversationId:this.senderName;if(this.isAppUser&&!t){alert("Please select a conversation first.");return}this.chatService.sendMessage(this.newMessage,this.senderName,t).then(()=>{this.newMessage="",this.shouldScroll=!0}).catch(r=>{console.error("Error sending message:",r),alert("Failed to send message. Please try again.")})}getLocation(t=!1){"geolocation"in navigator?navigator.geolocation.getCurrentPosition(r=>{let i=r.coords.latitude,o=r.coords.longitude;this.customerInfo.gpsCoordinates=`${i.toFixed(6)}, ${o.toFixed(6)}`,this.customerInfo.address||this.fetchAddressFromGps(i,o)},r=>{console.error("Error getting location",r),t||(this.isLocationReadOnly=!1,alert("Unable to retrieve location. Please enter manually."))}):t||(this.isLocationReadOnly=!1,alert("Geolocation is not supported by your browser."))}fetchAddressFromGps(t,r){return j(this,null,function*(){try{let i=yield fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${t}&lon=${r}`);if(i.ok){let o=yield i.json();o.display_name&&(this.customerInfo.address=o.display_name)}}catch(i){console.warn("Failed to reverse geocode",i)}})}selectConversation(t){this.currentConversationId=t,this.unreadCounts[t]=0,this.updateFilteredMessages(!1)}scrollToBottom(){try{this.messagesContainer.nativeElement.scrollTop=this.messagesContainer.nativeElement.scrollHeight}catch(t){console.error("Scroll error:",t)}}formatTime(t){return new Date(t).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})}isMyMessage(t){return t.senderName===this.senderName}changeInfo(){alert("Do you want to update your customer information?"),this.isRegistered=!1}startRecording(t){t&&(t.preventDefault(),t.stopPropagation()),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!0}).then(r=>{this.mediaRecorder=new MediaRecorder(r),this.mediaRecorder.start(),this.isRecording=!0,this.audioChunks=[],this.mediaRecorder.addEventListener("dataavailable",i=>{i.data.size>0&&this.audioChunks.push(i.data)}),this.mediaRecorder.addEventListener("stop",()=>{let i=new Blob(this.audioChunks,{type:"audio/webm"}),o=new FileReader;o.readAsDataURL(i),o.onloadend=()=>{let s=o.result;s&&this.sendAudio(s)},r.getTracks().forEach(s=>s.stop())})}).catch(r=>{console.error("Error accessing microphone:",r),alert("Could not access microphone. Please allow permissions."),this.isRecording=!1}):alert("Audio recording is not supported in this browser.")}stopRecording(t){t&&(t.preventDefault(),t.stopPropagation()),this.mediaRecorder&&this.isRecording&&(this.mediaRecorder.stop(),this.isRecording=!1)}cancelRecording(){this.mediaRecorder&&this.isRecording&&this.stopRecording()}sendAudio(t){let r=this.isAppUser?this.currentConversationId:this.senderName;if(this.isAppUser&&!r){alert("Please select a conversation first.");return}this.chatService.sendAudioMessage(t,this.senderName,r).then(()=>{this.shouldScroll=!0}).catch(i=>{console.error("Error sending audio message:",i),alert("Failed to send audio message.")})}deleteMessage(t){this.isMyMessage(t)&&confirm("Are you sure you want to delete this message?")&&this.chatService.deleteMessage(t.id).catch(r=>{console.error("Error deleting message:",r),alert("Failed to delete message.")})}logout(){if(this.isAppUser){alert("You cannot logout of chat while logged into the application.");return}confirm("Are you sure you want to logout? Your information will be cleared.")&&(localStorage.removeItem("chatCustomerInfo"),localStorage.removeItem("chatUserName"),this.isRegistered=!1,this.customerInfo={name:"",phoneNumber:"",address:""},this.messages=[])}startCall(){let t=this.isAppUser?this.currentConversationId:this.senderName;if(!t){alert("Cannot start call: Unknown conversation.");return}this.callService.initializeCall(t,this.senderName)}acceptCall(){this.incomingCall&&(this.callService.answerCall(this.incomingCall),this.incomingCall=null)}rejectCall(){this.incomingCall&&(this.callService.rejectCall(this.incomingCall.id),this.incomingCall=null,this.callStatus="idle",this.stopRinging())}endCall(){this.callService.endCall(),this.isSpeakerOn=!1,this.isMicMuted=!1,this.cleanupAudioVisualizer()}setupAudioVisualizer(t){this.cleanupAudioVisualizer();try{let r=window.AudioContext||window.webkitAudioContext;this.audioContext=new r,this.audioContext.state==="suspended"&&(console.log("ChatComponent: AudioContext suspended. Attempting to resume..."),this.audioContext.resume().then(()=>console.log("ChatComponent: AudioContext resumed!"))),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=64,this.source=this.audioContext.createMediaStreamSource(t),this.source.connect(this.analyser),this.dataArray=new Uint8Array(this.analyser.frequencyBinCount);let i=()=>{if(!this.analyser||!this.dataArray)return;this.analyser.getByteFrequencyData(this.dataArray);let o=0;for(let c=0;c<this.dataArray.length;c++)o+=this.dataArray[c];let s=o/this.dataArray.length;this.audioLevel=Math.min(100,Math.max(0,s/255*300)),this.animationFrameId=requestAnimationFrame(i)};i()}catch(r){console.error("Error setting up visualizer",r)}}cleanupAudioVisualizer(){this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),this.source&&(this.source.disconnect(),this.source=null),this.audioContext&&(this.audioContext.close().catch(()=>{}),this.audioContext=null),this.audioLevel=0}toggleSpeaker(){return j(this,null,function*(){if(this.isSpeakerOn=!this.isSpeakerOn,this.remoteAudio&&this.remoteAudio.nativeElement){let r=(yield navigator.mediaDevices.enumerateDevices()).filter(i=>i.kind==="audiooutput");if(r.length>1&&this.isSpeakerOn){let i=r[0].deviceId==="default"?r[1].deviceId:r[0].deviceId;yield this.callService.setAudioOutput(i,this.remoteAudio.nativeElement)}else yield this.callService.setAudioOutput("default",this.remoteAudio.nativeElement)}})}toggleMic(){this.isMicMuted=!this.isMicMuted,this.callService.toggleMic(this.isMicMuted)}static{this.\u0275fac=function(r){return new(r||n)(W(Fu),W(go),W(yo),W(xI))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-chat"]],viewQuery:function(r,i){if(r&1&&(gf(Bk,5),gf(Uk,5)),r&2){let o;yf(o=vf())&&(i.messagesContainer=o.first),yf(o=vf())&&(i.remoteAudio=o.first)}},hostBindings:function(r,i){r&1&&B("visibilitychange",function(){return i.onVisibilityChange()},!1,xs)("click",function(){return i.onUserInteraction()},!1,xs)("touchstart",function(){return i.onUserInteraction()},!1,xs)("keydown",function(){return i.onUserInteraction()},!1,xs)},inputs:{isOpen:"isOpen"},outputs:{totalUnreadCountChange:"totalUnreadCountChange"},standalone:!0,features:[Ci,ze],decls:3,vars:2,consts:[["messagesContainer",""],["remoteAudio",""],[1,"chat-container"],["class","registration-container",4,"ngIf"],["class","chat-wrapper",4,"ngIf"],[1,"registration-container"],[1,"registration-card"],[1,"registration-subtitle"],[1,"registration-form",3,"ngSubmit"],[1,"form-group"],["for","customerName"],["type","text","id","customerName","name","customerName","placeholder","Enter your full name","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","phoneNumber"],["type","tel","id","phoneNumber","name","phoneNumber","placeholder","e.g., +1 234 567 8900","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","address"],["id","address","name","address","placeholder","Address will be detected automatically...","rows","3","required","",1,"form-textarea",3,"ngModelChange","ngModel","readonly"],[2,"display","flex","gap","8px"],["type","text","name","gpsCoordinates","placeholder","Lat, Lng (Auto-detected)",1,"form-input",3,"ngModelChange","ngModel","readonly"],["type","button",1,"btn-location",3,"click"],["type","submit",1,"btn-register"],[1,"chat-wrapper"],["class","chat-sidebar",4,"ngIf"],[1,"chat-main-area"],[1,"chat-header"],[1,"header-content"],["class","header-details-subtitle",4,"ngIf"],[1,"user-info"],[1,"user-name"],["title","Edit information",1,"btn-edit",3,"click"],["class","btn-logout","title","Logout",3,"click",4,"ngIf"],["title","Start Audio Call",1,"btn-call",3,"click","disabled"],["class","call-overlay incoming",4,"ngIf"],["class","call-overlay active",4,"ngIf"],[1,"messages-container"],["class","no-messages",4,"ngIf"],["class","message",3,"my-message","other-message",4,"ngFor","ngForOf"],[1,"input-container"],["type","text","placeholder","Type a message...",1,"message-input",3,"ngModelChange","keyup.enter","ngModel","disabled"],[1,"btn-send",3,"click","disabled"],["title","Hold to talk",1,"btn-mic",3,"mousedown","mouseup","mouseleave","touchstart","touchend","disabled"],[1,"chat-sidebar"],[1,"sidebar-header"],[1,"conversation-list"],["class","conversation-item",3,"active","click",4,"ngFor","ngForOf"],[1,"conversation-item",3,"click"],[1,"conv-avatar"],[1,"conv-info"],[1,"conversation-name"],[1,"conversation-preview"],["class","active-indicator",4,"ngIf"],[1,"active-indicator"],[1,"no-messages"],[1,"header-details-subtitle"],[4,"ngIf"],["target","_blank","style","color: inherit; text-decoration: none; display: flex; align-items: center; gap: 4px;",3,"href",4,"ngIf"],["target","_blank",2,"color","inherit","text-decoration","none","display","flex","align-items","center","gap","4px",3,"href"],["title","Logout",1,"btn-logout",3,"click"],[1,"call-overlay","incoming"],[1,"call-content"],[1,"call-actions"],[1,"btn-accept",3,"click"],[1,"btn-reject",3,"click"],[1,"call-overlay","active"],[1,"call-avatar","pulsing"],[2,"opacity","0","height","0","width","0","overflow","hidden","position","absolute","pointer-events","none"],["autoplay","","playsinline","","controls","",3,"srcObject"],["title","Audio Signal Strength",1,"volume-meter"],[1,"volume-bar"],[1,"call-utilities"],["title","Toggle Speaker",1,"btn-round",3,"click"],["class","btn-round","title","Toggle Microphone",3,"active","click",4,"ngIf"],[1,"btn-end",3,"click"],["title","Toggle Microphone",1,"btn-round",3,"click"],[1,"message"],[1,"message-header"],[1,"sender-name"],[1,"message-meta"],["class","message-address",4,"ngIf"],["class","message-address gps-link","target","_blank","title","View on Google Maps",3,"href",4,"ngIf"],[1,"message-time"],["class","message-text",4,"ngIf"],["class","message-audio",4,"ngIf"],["class","btn-delete-msg","title","Delete message",3,"click",4,"ngIf"],[1,"message-address"],["target","_blank","title","View on Google Maps",1,"message-address","gps-link",3,"href"],[1,"message-text"],[1,"message-audio"],["controls","",3,"src"],["title","Delete message",1,"btn-delete-msg",3,"click"]],template:function(r,i){r&1&&(f(0,"div",2),$(1,$k,28,6,"div",3)(2,aF,28,17,"div",4),h()),r&2&&(v(),M("ngIf",!i.isRegistered),v(),M("ngIf",i.isRegistered))},dependencies:[Ue,ut,Ze,ft,on,dt,ht,rn,qt,at,Ht],styles:[".chat-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;background:var(--color-surface);overflow:hidden}.registration-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;padding:var(--space-lg);background:linear-gradient(135deg,#3b82f60d,#9333ea0d);overflow-y:auto;scroll-behavior:smooth}.registration-card[_ngcontent-%COMP%]{background:var(--color-surface);border-radius:var(--radius-lg);padding:var(--space-xl);max-width:500px;width:100%;box-shadow:0 10px 25px #0000001a;animation:_ngcontent-%COMP%_fadeInUp .5s ease-out}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.registration-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 var(--space-sm) 0;font-size:1.875rem;font-weight:700;text-align:center;background:linear-gradient(135deg,var(--color-primary),var(--color-accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.registration-subtitle[_ngcontent-%COMP%]{text-align:center;color:var(--color-text-muted);margin-bottom:var(--space-xl);font-size:.9375rem}.registration-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xs)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;font-size:.9375rem;color:var(--color-text)}.form-input[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{padding:.75rem 1rem;border:2px solid var(--color-border);border-radius:var(--radius-md);font-size:.9375rem;font-family:inherit;background:var(--color-bg);color:var(--color-text);transition:all .2s}.form-input[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f61a}.form-textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.btn-register[_ngcontent-%COMP%]{margin-top:var(--space-md);padding:.875rem 1.5rem;background:linear-gradient(135deg,var(--color-primary),var(--color-accent));color:#fff;border:none;border-radius:var(--radius-md);font-weight:600;font-size:1rem;cursor:pointer;transition:all .3s;box-shadow:0 4px 12px #3b82f64d}.btn-register[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 16px #3b82f666}.btn-register[_ngcontent-%COMP%]:active{transform:translateY(0)}.active-indicator[_ngcontent-%COMP%]{background-color:#ef4444;color:#fff;min-width:22px;height:22px;border-radius:11px;display:flex;align-items:center;justify-content:center;font-size:.75rem;font-weight:700;padding:0 6px;box-shadow:0 2px 5px #ef444466;animation:_ngcontent-%COMP%_bounceIn .3s cubic-bezier(.175,.885,.32,1.275)}@keyframes _ngcontent-%COMP%_bounceIn{0%{transform:scale(0);opacity:0}60%{transform:scale(1.2)}to{transform:scale(1);opacity:1}}.chat-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:100%}.chat-sidebar[_ngcontent-%COMP%]{width:280px;background:var(--color-surface);border-right:1px solid var(--color-border);display:flex;flex-direction:column}.chat-main-area[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;height:100%;position:relative}.sidebar-header[_ngcontent-%COMP%]{padding:var(--space-md);border-bottom:1px solid var(--color-border);font-weight:600;background:var(--color-bg)}.conversation-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:12px;display:flex;flex-direction:column;gap:8px}.conversation-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:10px 15px;border-radius:16px;background:#ffffff08;border:1px solid transparent;cursor:pointer;transition:all .2s cubic-bezier(.4,0,.2,1);margin-bottom:0}.conversation-item[_ngcontent-%COMP%]:hover{background:#ffffff14;transform:translateY(-1px);box-shadow:0 4px 12px #0000000d}.conversation-item.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-primary),var(--color-accent));border-color:transparent;box-shadow:0 4px 15px #3b82f64d}.conv-avatar[_ngcontent-%COMP%]{width:42px;height:42px;border-radius:50%;background:linear-gradient(135deg,#e0e7ff,#c7d2fe);color:#4f46e5;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1.1rem;flex-shrink:0;box-shadow:0 2px 5px #0000001a;transition:all .2s}.conversation-item.active[_ngcontent-%COMP%]   .conv-avatar[_ngcontent-%COMP%]{background:#fff;color:var(--color-primary);transform:scale(1.05)}.conv-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow:hidden;flex:1}.conversation-name[_ngcontent-%COMP%]{font-weight:600;font-size:.95rem;color:var(--color-text);margin-bottom:2px;transition:color .2s}.conversation-preview[_ngcontent-%COMP%]{font-size:.8rem;color:var(--color-text-muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;transition:color .2s}.conversation-item.active[_ngcontent-%COMP%]   .conversation-name[_ngcontent-%COMP%]{color:#fff}.conversation-item.active[_ngcontent-%COMP%]   .conversation-preview[_ngcontent-%COMP%]{color:#ffffffe6}.chat-header[_ngcontent-%COMP%]{padding:var(--space-lg);padding-bottom:2rem;background:linear-gradient(135deg,var(--color-primary),var(--color-accent));color:#fff;border-bottom:2px solid var(--color-border);position:relative;z-index:10;flex-shrink:0}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:var(--space-md)}.chat-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:600}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);position:relative;z-index:20}.user-name[_ngcontent-%COMP%]{font-weight:500;padding:.5rem 1rem;background:#fff3;border-radius:20px;font-size:.9375rem}.btn-edit[_ngcontent-%COMP%], .btn-logout[_ngcontent-%COMP%]{background:#ffffff4d;border:2px solid rgba(255,255,255,.5);padding:.625rem;border-radius:50%;cursor:pointer;font-size:1.125rem;transition:all .2s;line-height:1;position:relative;z-index:30;pointer-events:auto;color:#fff;min-width:36px;min-height:36px;display:flex;align-items:center;justify-content:center}.btn-edit[_ngcontent-%COMP%]:hover, .btn-logout[_ngcontent-%COMP%]:hover{background:#ffffff80;transform:scale(1.15);border-color:#fff}.messages-container[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:var(--space-lg);background:var(--color-bg);display:flex;flex-direction:column;gap:var(--space-md)}.no-messages[_ngcontent-%COMP%]{text-align:center;color:var(--color-text-muted);padding:var(--space-xl);font-style:italic}.message[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-width:70%;animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.my-message[_ngcontent-%COMP%]{align-self:flex-end}.other-message[_ngcontent-%COMP%]{align-self:flex-start}.message-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;gap:var(--space-sm)}.sender-name[_ngcontent-%COMP%]{font-weight:600;font-size:.875rem;color:var(--color-text-muted)}.my-message[_ngcontent-%COMP%]   .sender-name[_ngcontent-%COMP%]{color:var(--color-primary)}.header-details-subtitle[_ngcontent-%COMP%]{position:absolute;top:70%;left:20px;font-size:.75rem;color:#ffffffd9;display:flex;flex-direction:column;gap:2px}.btn-location[_ngcontent-%COMP%]{padding:.5rem;font-size:1.25rem;background:var(--color-surface);border:1px solid var(--color-border);border-radius:var(--radius-md);cursor:pointer;transition:all .2s}.btn-location[_ngcontent-%COMP%]:hover{background:var(--color-bg);transform:scale(1.05)}.message-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.message-address[_ngcontent-%COMP%]{font-size:.7rem;color:var(--color-text-muted);background:#0000000d;padding:2px 6px;border-radius:4px;max-width:150px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.gps-link[_ngcontent-%COMP%]{text-decoration:none;cursor:pointer;transition:background-color .2s}.gps-link[_ngcontent-%COMP%]:hover{background:#0000001a;text-decoration:underline;color:var(--color-primary)}.message-time[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted)}.message-text[_ngcontent-%COMP%]{padding:.75rem 1rem;border-radius:12px;word-wrap:break-word;line-height:1.5}.my-message[_ngcontent-%COMP%]   .message-text[_ngcontent-%COMP%]{background:var(--color-primary);color:#fff;border-bottom-right-radius:4px}.other-message[_ngcontent-%COMP%]   .message-text[_ngcontent-%COMP%]{background:var(--color-surface);color:var(--color-text);border:1px solid var(--color-border);border-bottom-left-radius:4px}.input-container[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm);padding:var(--space-lg);background:var(--color-surface);border-top:1px solid var(--color-border)}.message-input[_ngcontent-%COMP%]{flex:1;padding:.75rem 1rem;border:1px solid var(--color-border);border-radius:24px;font-size:.9375rem;background:var(--color-bg);color:var(--color-text);transition:all .2s}.message-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f61a}.btn-send[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:var(--color-primary);color:#fff;border:none;border-radius:24px;font-weight:600;cursor:pointer;transition:all .2s}.btn-send[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--color-accent);transform:translateY(-1px);box-shadow:0 4px 8px #00000026}.btn-send[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--color-bg)}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--color-border);border-radius:4px}.messages-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--color-text-muted)}.registration-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.registration-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--color-bg)}.registration-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--color-border);border-radius:4px}.registration-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--color-text-muted)}textarea[readonly][_ngcontent-%COMP%], input[readonly][_ngcontent-%COMP%]{background-color:var(--color-bg);cursor:not-allowed;opacity:.8;color:var(--color-text-muted);border-color:var(--color-border)}@media (max-width: 640px){.message[_ngcontent-%COMP%]{max-width:85%}.chat-wrapper[_ngcontent-%COMP%]{flex-direction:column}.chat-sidebar[_ngcontent-%COMP%]{width:100%;height:auto;min-height:85px;flex-shrink:0;border-right:none;border-bottom:1px solid var(--color-border);display:flex;flex-direction:column}.conversation-list[_ngcontent-%COMP%]{flex-direction:row;overflow-x:auto;overflow-y:hidden;padding:10px;gap:12px}.conversation-item[_ngcontent-%COMP%]{padding:4px;border-radius:50%;background:transparent;flex-shrink:0;position:relative}.conv-info[_ngcontent-%COMP%]{display:none}.conv-avatar[_ngcontent-%COMP%]{width:48px;height:48px;font-size:1.25rem}.active-indicator[_ngcontent-%COMP%]{position:absolute;top:-2px;right:-2px;min-width:18px;height:18px;font-size:.7rem;border:2px solid var(--color-surface)}.chat-main-area[_ngcontent-%COMP%]{height:100%;overflow:hidden}.chat-header[_ngcontent-%COMP%]{padding:var(--space-md);padding-right:60px}.chat-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem;max-width:60%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.header-content[_ngcontent-%COMP%]{flex-direction:row;align-items:center}.user-info[_ngcontent-%COMP%]{font-size:.8rem}.btn-edit[_ngcontent-%COMP%], .btn-logout[_ngcontent-%COMP%]{padding:.4rem;min-width:32px;min-height:32px}.registration-card[_ngcontent-%COMP%]{padding:var(--space-lg)}.registration-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}}.btn-mic[_ngcontent-%COMP%]{width:46px;height:46px;border-radius:50%;border:none;background:var(--color-surface);border:1px solid var(--color-border);font-size:1.25rem;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center;flex-shrink:0;-webkit-user-select:none;user-select:none;touch-action:manipulation}.btn-mic[_ngcontent-%COMP%]:hover{background:var(--color-bg);transform:scale(1.05)}.btn-mic[_ngcontent-%COMP%]:active{transform:scale(.95)}.btn-mic.recording[_ngcontent-%COMP%]{background:#ef4444;border-color:#ef4444;color:#fff;transform:scale(1.1);animation:_ngcontent-%COMP%_pulse 1.5s infinite}@keyframes _ngcontent-%COMP%_pulse{0%{box-shadow:0 0 #ef444466}70%{box-shadow:0 0 0 10px #ef444400}to{box-shadow:0 0 #ef444400}}.message-audio[_ngcontent-%COMP%]{padding:.25rem;border-radius:12px;background:transparent;width:100%}audio[_ngcontent-%COMP%]{height:36px;max-width:100%;border-radius:18px}.btn-delete-msg[_ngcontent-%COMP%]{align-self:flex-end;background:transparent;border:none;font-size:.8rem;opacity:.5;cursor:pointer;padding:0;margin-top:4px;transition:opacity .2s}.btn-delete-msg[_ngcontent-%COMP%]:hover{opacity:1;transform:scale(1.1)}.btn-call[_ngcontent-%COMP%]{background:#10b98133;border:1px solid rgba(16,185,129,.5);color:#10b981;padding:.625rem;border-radius:50%;cursor:pointer;font-size:1.125rem;transition:all .2s;min-width:36px;min-height:36px;display:flex;align-items:center;justify-content:center}.btn-call[_ngcontent-%COMP%]:hover:not(:disabled){background:#10b98166;transform:scale(1.15);color:#fff;border-color:#fff}.btn-call[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;filter:grayscale(1)}.call-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#000000d9;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);z-index:100;display:flex;align-items:center;justify-content:center;animation:fadeIn .3s}.call-content[_ngcontent-%COMP%]{background:var(--color-surface);padding:2rem;border-radius:20px;text-align:center;width:90%;max-width:350px;box-shadow:0 20px 50px #00000080;border:1px solid var(--color-border)}.call-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:1rem 0;font-size:1.5rem}.call-avatar[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem;display:inline-block}.pulsing[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse-avatar 2s infinite}@keyframes _ngcontent-%COMP%_pulse-avatar{0%{transform:scale(1);opacity:1;text-shadow:0 0 0 rgba(16,185,129,.7)}50%{transform:scale(1.1);opacity:.8;text-shadow:0 0 20px rgba(16,185,129,0)}to{transform:scale(1);opacity:1;text-shadow:0 0 0 rgba(16,185,129,0)}}.call-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1rem;margin-top:2rem}.btn-accept[_ngcontent-%COMP%], .btn-reject[_ngcontent-%COMP%], .btn-end[_ngcontent-%COMP%]{padding:.8rem 1.5rem;border-radius:30px;font-weight:600;border:none;cursor:pointer;transition:transform .2s;color:#fff}.btn-accept[_ngcontent-%COMP%]{background:#10b981}.btn-reject[_ngcontent-%COMP%], .btn-end[_ngcontent-%COMP%]{background:#ef4444}.btn-accept[_ngcontent-%COMP%]:hover, .btn-reject[_ngcontent-%COMP%]:hover, .btn-end[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.call-utilities[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1.5rem;margin-bottom:2rem}.volume-meter[_ngcontent-%COMP%]{width:200px;height:6px;background:#fff3;border-radius:3px;margin:0 auto 1.5rem;overflow:hidden;position:relative}.volume-bar[_ngcontent-%COMP%]{height:100%;background:#10b981;width:0%;transition:width .1s linear}.btn-round[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;border:1px solid var(--color-border);background:var(--color-surface);font-size:1.5rem;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s;color:var(--color-text)}.btn-round[_ngcontent-%COMP%]:hover{background:var(--color-bg);transform:scale(1.1)}.btn-round.active[_ngcontent-%COMP%]{background:#fff;color:#000;border-color:#fff}"]})}}return n})();function cF(n,e){n&1&&(f(0,"div",10),y(1," Loading users... "),h())}function lF(n,e){if(n&1){let t=se();f(0,"tr")(1,"td")(2,"div",13)(3,"span",14),y(4),h(),y(5),h()(),f(6,"td"),y(7),h(),f(8,"td"),y(9),h(),f(10,"td")(11,"span",15),y(12),De(13,"titlecase"),h()(),f(14,"td"),y(15),De(16,"date"),h(),f(17,"td")(18,"div",16)(19,"button",17),B("click",function(){let i=V(t).$implicit,o=A(2);return L(o.openEditModal(i))}),y(20,"\u270F\uFE0F"),h(),f(21,"button",18),B("click",function(){let i=V(t).$implicit,o=A(2);return L(o.deleteUser(i.id))}),y(22,"\u{1F5D1}\uFE0F"),h()()()()}if(n&2){let t=e.$implicit;v(4),H(t.username.charAt(0).toUpperCase()),v(),Q(" ",t.username," "),v(2),H(t.fullName),v(2),H(t.address||"-"),v(2),be("admin",t.role==="admin"),v(),Q(" ",Ss(13,8,t.role)," "),v(3),H(Oe(16,10,t.createdAt,"mediumDate"))}}function uF(n,e){if(n&1&&(f(0,"table",11)(1,"thead")(2,"tr")(3,"th"),y(4,"Username"),h(),f(5,"th"),y(6,"Full Name"),h(),f(7,"th"),y(8,"Address"),h(),f(9,"th"),y(10,"Role"),h(),f(11,"th"),y(12,"Created At"),h(),f(13,"th"),y(14,"Actions"),h()()(),f(15,"tbody"),$(16,lF,23,13,"tr",12),h()()),n&2){let t=A();v(16),M("ngForOf",t.users)}}function dF(n,e){n&1&&(f(0,"div",19)(1,"p"),y(2,"No users found. (This shouldn't happen as default admin exists)"),h()())}function hF(n,e){n&1&&(f(0,"small",35),y(1,"Only enter if you wish to change it."),h())}function fF(n,e){if(n&1){let t=se();f(0,"div",20)(1,"div",21)(2,"h3"),y(3),h(),f(4,"div",22)(5,"label"),y(6,"Username"),h(),f(7,"input",23),Z("ngModelChange",function(i){V(t);let o=A();return ee(o.currentUser.username,i)||(o.currentUser.username=i),L(i)}),h()(),f(8,"div",22)(9,"label"),y(10,"Full Name"),h(),f(11,"input",24),Z("ngModelChange",function(i){V(t);let o=A();return ee(o.currentUser.fullName,i)||(o.currentUser.fullName=i),L(i)}),h()(),f(12,"div",22)(13,"label"),y(14,"Address"),h(),f(15,"input",25),Z("ngModelChange",function(i){V(t);let o=A();return ee(o.currentUser.address,i)||(o.currentUser.address=i),L(i)}),h()(),f(16,"div",22)(17,"label"),y(18,"GPS Coordinates"),h(),f(19,"input",26),Z("ngModelChange",function(i){V(t);let o=A();return ee(o.currentUser.gpsCoordinates,i)||(o.currentUser.gpsCoordinates=i),L(i)}),h()(),f(20,"div",22)(21,"label"),y(22,"Password"),h(),f(23,"input",27),Z("ngModelChange",function(i){V(t);let o=A();return ee(o.formPassword,i)||(o.formPassword=i),L(i)}),h(),$(24,hF,2,0,"small",28),h(),f(25,"div",22)(26,"label"),y(27,"Role"),h(),f(28,"select",29),Z("ngModelChange",function(i){V(t);let o=A();return ee(o.currentUser.role,i)||(o.currentUser.role=i),L(i)}),f(29,"option",30),y(30,"User"),h(),f(31,"option",31),y(32,"Admin"),h()()(),f(33,"div",32)(34,"button",33),B("click",function(){V(t);let i=A();return L(i.closeModal())}),y(35,"Cancel"),h(),f(36,"button",34),B("click",function(){V(t);let i=A();return L(i.saveUser())}),y(37),h()()()()}if(n&2){let t=A();v(3),H(t.isEditing?"Edit User":"Add New User"),v(4),X("ngModel",t.currentUser.username),v(4),X("ngModel",t.currentUser.fullName),v(4),X("ngModel",t.currentUser.address),v(4),X("ngModel",t.currentUser.gpsCoordinates),v(4),X("ngModel",t.formPassword),M("placeholder",t.isEditing?"Leave blank to keep current":"Enter password"),v(),M("ngIf",t.isEditing),v(4),X("ngModel",t.currentUser.role),v(9),H(t.isEditing?"Update":"Create")}}var SI=(()=>{class n{constructor(t){this.userService=t,this.users=[],this.isLoading=!1,this.isModalOpen=!1,this.isEditing=!1,this.currentUser={username:"",fullName:"",role:"user"},this.formPassword=""}ngOnInit(){this.loadUsers()}loadUsers(){this.isLoading=!0;let t=localStorage.getItem("jjm_user_id");this.userService.getUsers().subscribe(r=>{t?this.users=r.filter(i=>i.userId===t):this.users=r,this.isLoading=!1})}openAddModal(){this.isEditing=!1,this.formPassword="",this.currentUser={username:"",fullName:"",role:"user"},this.isModalOpen=!0}openEditModal(t){this.isEditing=!0,this.formPassword="",this.currentUser=J({},t),this.isModalOpen=!0}closeModal(){this.isModalOpen=!1}saveUser(){if(!this.currentUser.username||!this.currentUser.role){alert("Please fill in username and role.");return}if(!this.isEditing&&!this.formPassword){alert("Password is required for new users.");return}if(this.isEditing&&this.currentUser.id){let t={id:this.currentUser.id,username:this.currentUser.username,fullName:this.currentUser.fullName,address:this.currentUser.address,gpsCoordinates:this.currentUser.gpsCoordinates,role:this.currentUser.role};this.formPassword&&(t.password=this.formPassword),this.userService.updateUser(t).subscribe(()=>{this.closeModal()})}else{let t=localStorage.getItem("jjm_user_id")||"system",r=ue(J({},this.currentUser),{password:this.formPassword,createdBy:t,userId:t});this.userService.addUser(r).subscribe(()=>{this.closeModal()})}}deleteUser(t){confirm("Are you sure you want to delete this user?")&&this.userService.deleteUser(t).subscribe()}static{this.\u0275fac=function(r){return new(r||n)(W(yo))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-user-management"]],standalone:!0,features:[ze],decls:16,vars:4,consts:[[1,"user-management-container"],[1,"page-header"],[1,"header-text"],[1,"subtitle"],[1,"btn-add",3,"click"],[1,"users-list-container"],["class","loading-state",4,"ngIf"],["class","users-table",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[1,"loading-state"],[1,"users-table"],[4,"ngFor","ngForOf"],[1,"user-name-cell"],[1,"avatar"],[1,"role-badge"],[1,"actions"],["title","Edit",1,"btn-icon","edit",3,"click"],["title","Delete",1,"btn-icon","delete",3,"click"],[1,"empty-state"],[1,"modal-overlay"],[1,"modal-card"],[1,"form-group"],["type","text","placeholder","Enter username",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter full name",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter address (Optional)",3,"ngModelChange","ngModel"],["type","text","placeholder","Lat, Lng (Optional)",3,"ngModelChange","ngModel"],["type","text",3,"ngModelChange","ngModel","placeholder"],["class","hint",4,"ngIf"],[3,"ngModelChange","ngModel"],["value","user"],["value","admin"],[1,"modal-actions"],[1,"btn-cancel",3,"click"],[1,"btn-save",3,"click"],[1,"hint"]],template:function(r,i){r&1&&(f(0,"div",0)(1,"header",1)(2,"div",2)(3,"h2"),y(4,"\u{1F465} User Management"),h(),f(5,"p",3),y(6,"Manage system access and roles"),h()(),f(7,"button",4),B("click",function(){return i.openAddModal()}),f(8,"span"),y(9,"+"),h(),y(10," Add User "),h()(),f(11,"div",5),$(12,cF,2,0,"div",6)(13,uF,17,1,"table",7)(14,dF,3,0,"div",8),h(),$(15,fF,38,10,"div",9),h()),r&2&&(v(12),M("ngIf",i.isLoading),v(),M("ngIf",!i.isLoading&&i.users.length>0),v(),M("ngIf",!i.isLoading&&i.users.length===0),v(),M("ngIf",i.isModalOpen))},dependencies:[Ue,ut,Ze,ul,Fn,ft,Vn,Ln,dt,sn,ht,at],styles:[".user-management-container[_ngcontent-%COMP%]{padding:var(--space-xl);max-width:1200px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--space-xl);background:var(--color-surface);padding:var(--space-lg);border-radius:var(--radius-lg);box-shadow:var(--shadow-sm);border:1px solid var(--color-border)}.header-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;color:var(--color-text)}.subtitle[_ngcontent-%COMP%]{margin:4px 0 0;color:var(--color-text-muted);font-size:.875rem}.btn-add[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);padding:.75rem 1.5rem;background:var(--color-primary);color:#fff;border:none;border-radius:var(--radius-md);font-weight:600;cursor:pointer;transition:all .2s}.btn-add[_ngcontent-%COMP%]:hover{background:var(--color-accent);transform:translateY(-2px);box-shadow:var(--shadow-md)}.users-list-container[_ngcontent-%COMP%]{background:var(--color-surface);border-radius:var(--radius-lg);border:1px solid var(--color-border);overflow:hidden;box-shadow:var(--shadow-sm)}.users-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.users-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .users-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:var(--space-md) var(--space-lg);text-align:left;border-bottom:1px solid var(--color-border)}.users-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:var(--color-bg);font-weight:600;color:var(--color-text-muted);font-size:.875rem;text-transform:uppercase;letter-spacing:.5px}.users-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:var(--color-bg)}.user-name-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;font-weight:500}.avatar[_ngcontent-%COMP%]{width:32px;height:32px;background:var(--color-primary);color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.875rem;font-weight:700}.role-badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:999px;font-size:.75rem;font-weight:600;background:var(--color-bg);color:var(--color-text);border:1px solid var(--color-border)}.role-badge.admin[_ngcontent-%COMP%]{background:#3b82f61a;color:var(--color-primary);border-color:#3b82f633}.loading-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{padding:var(--space-2xl);text-align:center;color:var(--color-text-muted)}.actions[_ngcontent-%COMP%]{display:flex;gap:8px}.btn-icon[_ngcontent-%COMP%]{padding:6px;background:transparent;border:none;cursor:pointer;border-radius:4px;transition:background .2s}.btn-icon[_ngcontent-%COMP%]:hover{background:#0000000d}.btn-icon.delete[_ngcontent-%COMP%]:hover{background:#ef44441a}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.modal-card[_ngcontent-%COMP%]{background:var(--color-surface);padding:var(--space-xl);border-radius:var(--radius-lg);width:400px;max-width:90%;box-shadow:var(--shadow-xl);animation:_ngcontent-%COMP%_slideUp .3s cubic-bezier(.16,1,.3,1)}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 var(--space-lg) 0;font-size:1.25rem;color:var(--color-text)}.form-group[_ngcontent-%COMP%]{margin-bottom:var(--space-lg)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:var(--space-xs);font-weight:500;font-size:.875rem;color:var(--color-text)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-bg);color:var(--color-text);font-size:.9375rem}.hint[_ngcontent-%COMP%]{display:block;margin-top:4px;font-size:.75rem;color:var(--color-text-muted)}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:var(--space-md);margin-top:var(--space-xl)}.btn-cancel[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:transparent;border:1px solid var(--color-border);color:var(--color-text);border-radius:var(--radius-md);cursor:pointer;font-weight:500}.btn-save[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:var(--color-primary);color:#fff;border:none;border-radius:var(--radius-md);cursor:pointer;font-weight:600}"]})}}return n})();function pF(n,e){n&1&&Ae(0,"app-login")}function mF(n,e){if(n&1){let t=se();f(0,"button",24),B("click",function(){V(t);let i=A(2);return L(i.setActiveTab("users"))}),f(1,"span",25),y(2,"\u{1F464}"),h(),f(3,"span",26),y(4,"Users"),h()()}if(n&2){let t=A(2);be("active",t.activeTab==="users")}}function gF(n,e){n&1&&(f(0,"div",31)(1,"div",32),Ae(2,"app-landing"),h()())}function yF(n,e){n&1&&(f(0,"div",31)(1,"div",32),Ae(2,"app-product-form"),h()())}function vF(n,e){n&1&&(f(0,"div",31)(1,"div",32),Ae(2,"app-pos-calculator"),h()())}function _F(n,e){n&1&&(f(0,"div",31)(1,"div",32),Ae(2,"app-inventory-list"),h()())}function bF(n,e){n&1&&(f(0,"div",31)(1,"div",32),Ae(2,"app-customer-form"),h()())}function wF(n,e){n&1&&(f(0,"div",31)(1,"div",32),Ae(2,"app-expenses"),h()())}function CF(n,e){n&1&&(f(0,"div",31)(1,"div",32),Ae(2,"app-reports"),h()())}function EF(n,e){n&1&&(f(0,"div",31)(1,"div",32),Ae(2,"app-activity-logs"),h()())}function IF(n,e){n&1&&(f(0,"div",31)(1,"div",32),Ae(2,"app-user-management"),h()())}function xF(n,e){if(n&1){let t=se();f(0,"div")(1,"header",10)(2,"div",11)(3,"div",12)(4,"div",13)(5,"div",14),y(6,"\u{1F4E6}"),h(),f(7,"div",15)(8,"h1"),y(9,"JJM Inventory"),h(),f(10,"p",16),y(11,"Smart Business Management"),h()()(),f(12,"div",17)(13,"button",18),B("click",function(){V(t);let i=A();return L(i.toggleTheme())}),f(14,"span",19),y(15),h()(),f(16,"button",20),B("click",function(){V(t);let i=A();return L(i.logout())}),f(17,"span",21),y(18,"\u{1F6AA}"),h(),f(19,"span",22),y(20,"Logout"),h()()()()()(),f(21,"main",11)(22,"nav",23)(23,"button",24),B("click",function(){V(t);let i=A();return L(i.setActiveTab("home"))}),f(24,"span",25),y(25,"\u{1F3E0}"),h(),f(26,"span",26),y(27,"Home"),h()(),f(28,"button",24),B("click",function(){V(t);let i=A();return L(i.setActiveTab("add-product"))}),f(29,"span",25),y(30,"\u{1F4E6}"),h(),f(31,"span",26),y(32,"Add Product"),h()(),f(33,"button",24),B("click",function(){V(t);let i=A();return L(i.setActiveTab("sell"))}),f(34,"span",25),y(35,"\u{1F4B0}"),h(),f(36,"span",26),y(37,"Sell"),h()(),f(38,"button",24),B("click",function(){V(t);let i=A();return L(i.setActiveTab("inventory"))}),f(39,"span",25),y(40,"\u{1F4CA}"),h(),f(41,"span",26),y(42,"Inventory"),h()(),f(43,"button",24),B("click",function(){V(t);let i=A();return L(i.setActiveTab("customers"))}),f(44,"span",25),y(45,"\u{1F465}"),h(),f(46,"span",26),y(47,"Customers"),h()(),f(48,"button",24),B("click",function(){V(t);let i=A();return L(i.setActiveTab("expenses"))}),f(49,"span",25),y(50,"\u{1F4B8}"),h(),f(51,"span",26),y(52,"Expenses"),h()(),f(53,"button",24),B("click",function(){V(t);let i=A();return L(i.setActiveTab("reports"))}),f(54,"span",25),y(55,"\u{1F4C8}"),h(),f(56,"span",26),y(57,"Reports"),h()(),f(58,"button",24),B("click",function(){V(t);let i=A();return L(i.setActiveTab("logs"))}),f(59,"span",25),y(60,"\u{1F4CB}"),h(),f(61,"span",26),y(62,"Activity Logs"),h()(),$(63,mF,5,2,"button",27),h(),f(64,"div",28),$(65,gF,3,0,"div",29)(66,yF,3,0,"div",29)(67,vF,3,0,"div",29)(68,_F,3,0,"div",29)(69,bF,3,0,"div",29)(70,wF,3,0,"div",29)(71,CF,3,0,"div",29)(72,EF,3,0,"div",29)(73,IF,3,0,"div",29),h()(),f(74,"footer",30)(75,"div",11)(76,"p"),y(77,"\xA9 2024 JJM Inventory. All rights reserved."),h()()()()}if(n&2){let t=A();v(13),M("title",t.isDarkTheme?"Switch to Light Mode":"Switch to Dark Mode"),v(2),H(t.isDarkTheme?"\u2600\uFE0F":"\u{1F319}"),v(8),be("active",t.activeTab==="home"),v(5),be("active",t.activeTab==="add-product"),v(5),be("active",t.activeTab==="sell"),v(5),be("active",t.activeTab==="inventory"),v(5),be("active",t.activeTab==="customers"),v(5),be("active",t.activeTab==="expenses"),v(5),be("active",t.activeTab==="reports"),v(5),be("active",t.activeTab==="logs"),v(5),M("ngIf",t.userRole==="admin"),v(2),M("ngIf",t.activeTab==="home"),v(),M("ngIf",t.activeTab==="add-product"),v(),M("ngIf",t.activeTab==="sell"),v(),M("ngIf",t.activeTab==="inventory"),v(),M("ngIf",t.activeTab==="customers"),v(),M("ngIf",t.activeTab==="expenses"),v(),M("ngIf",t.activeTab==="reports"),v(),M("ngIf",t.activeTab==="logs"),v(),M("ngIf",t.activeTab==="users"&&t.userRole==="admin")}}function DF(n,e){if(n&1&&(f(0,"span",33),y(1),h()),n&2){let t=A();v(),H(t.totalUnreadMessages)}}var TI=(()=>{class n{constructor(t,r){this.inventoryService=t,this.chatService=r,this.title="JJM Inventory",this.activeTab="home",this.isDarkTheme=!1,this.isLoggedIn=!1,this.userRole="",this.isChatOpen=!1,this.totalUnreadMessages=0,this.isLoggedIn=localStorage.getItem("jjm_logged_in")==="true",this.userRole=localStorage.getItem("jjm_role")||"user";let i=localStorage.getItem("jjm_theme");this.isDarkTheme=i==="dark",this.applyTheme(),window.inventoryService=this.inventoryService}setActiveTab(t){t==="users"&&this.userRole!=="admin"||(this.activeTab=t)}toggleTheme(){this.isDarkTheme=!this.isDarkTheme,this.applyTheme(),localStorage.setItem("jjm_theme",this.isDarkTheme?"dark":"light")}logout(){this.chatService.triggerLogout(),localStorage.removeItem("jjm_logged_in"),localStorage.removeItem("jjm_username"),localStorage.removeItem("jjm_user_id"),localStorage.removeItem("jjm_role"),localStorage.removeItem("chatCustomerInfo"),localStorage.removeItem("chatUserName"),this.isLoggedIn=!1,window.location.reload()}applyTheme(){this.isDarkTheme?document.body.classList.add("dark-theme"):document.body.classList.remove("dark-theme")}toggleChat(){this.isChatOpen=!this.isChatOpen}static{this.\u0275fac=function(r){return new(r||n)(W(cn),W(Fu))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-root"]],standalone:!0,features:[ze],decls:14,vars:8,consts:[[4,"ngIf"],[1,"chat-widget"],["title","Open Chat",1,"chat-toggle-button",3,"click"],[1,"chat-icon"],[1,"chat-label"],["class","notification-badge",4,"ngIf"],[1,"chat-modal"],[1,"chat-modal-content"],[3,"totalUnreadCountChange","isOpen"],["title","Close Chat",1,"chat-modal-close",3,"click"],[1,"header"],[1,"container"],[1,"header-content"],[1,"logo-section"],[1,"logo-icon"],[1,"brand-info"],[1,"tagline"],[1,"header-actions"],[1,"theme-toggle",3,"click","title"],[1,"theme-icon"],["title","Logout",1,"logout-button",3,"click"],[1,"logout-icon"],[1,"logout-text"],[1,"tabs"],[1,"tab-button",3,"click"],[1,"tab-icon"],[1,"tab-label"],["class","tab-button",3,"active","click",4,"ngIf"],[1,"tab-content"],["class","tab-pane",4,"ngIf"],[1,"footer"],[1,"tab-pane"],[1,"tab-pane-content"],[1,"notification-badge"]],template:function(r,i){r&1&&($(0,pF,1,0,"app-login",0)(1,xF,78,28,"div",0),f(2,"div",1)(3,"button",2),B("click",function(){return i.toggleChat()}),f(4,"span",3),y(5,"\u{1F4AC}"),h(),f(6,"span",4),y(7,"Chat"),h()(),$(8,DF,2,1,"span",5),f(9,"div",6)(10,"div",7)(11,"app-chat",8),B("totalUnreadCountChange",function(s){return i.totalUnreadMessages=s}),h()(),f(12,"button",9),B("click",function(){return i.toggleChat()}),y(13,"\u2715"),h()()()),r&2&&(M("ngIf",!i.isLoggedIn),v(),M("ngIf",i.isLoggedIn),v(2),be("active",i.isChatOpen),v(5),M("ngIf",i.totalUnreadMessages>0),v(),be("open",i.isChatOpen),v(2),M("isOpen",i.isChatOpen))},dependencies:[Ue,Ze,mw,gw,yw,vw,_w,bw,ww,Cw,Ew,DI,SI],styles:['.header[_ngcontent-%COMP%]{background:var(--color-surface);border-bottom:1px solid var(--color-border);padding:var(--space-lg) 0;position:sticky;top:0;z-index:100;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background:#fffffff2}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.logo-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-md)}.logo-icon[_ngcontent-%COMP%]{font-size:2.5rem;animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-5px)}}.brand-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--color-text);margin:0;font-size:1.5rem;font-weight:700;letter-spacing:-.5px}.tagline[_ngcontent-%COMP%]{color:var(--color-text-muted);font-size:.75rem;margin:0;font-weight:500}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-md)}.theme-toggle[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:var(--radius-xl);background:var(--color-bg);border:1px solid var(--color-border);display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all var(--transition-base);padding:0}.theme-toggle[_ngcontent-%COMP%]:hover{background:var(--color-primary);border-color:var(--color-primary);transform:rotate(180deg) scale(1.1);box-shadow:var(--shadow-md)}.theme-icon[_ngcontent-%COMP%]{font-size:1.25rem;transition:transform var(--transition-base)}.logout-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);padding:var(--space-sm) var(--space-md);background:#ef44441a;border:1px solid rgba(239,68,68,.3);border-radius:var(--radius-lg);color:var(--color-danger);font-weight:600;cursor:pointer;transition:all var(--transition-base)}.logout-button[_ngcontent-%COMP%]:hover{background:var(--color-danger);border-color:var(--color-danger);color:#fff;transform:translateY(-2px);box-shadow:0 4px 12px #ef44444d}.logout-icon[_ngcontent-%COMP%]{font-size:1.125rem}.logout-text[_ngcontent-%COMP%]{font-size:.875rem}.tabs[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm);margin-top:var(--space-2xl);margin-bottom:var(--space-xl);padding:var(--space-sm);background:var(--color-bg);border-radius:var(--radius-xl);flex-wrap:wrap;box-shadow:inset 0 2px 4px #0000000d}.tab-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);padding:var(--space-md) var(--space-lg);background:transparent;border:none;border-radius:var(--radius-lg);color:var(--color-text-muted);font-size:.9375rem;font-weight:600;cursor:pointer;transition:all var(--transition-base);white-space:nowrap;position:relative;overflow:hidden}.tab-button[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(59,130,246,.15),transparent);transition:left .5s ease}.tab-button[_ngcontent-%COMP%]:hover:before{left:100%}.tab-button[_ngcontent-%COMP%]:hover{background:#3b82f614;color:var(--color-primary);transform:translateY(-2px);box-shadow:0 4px 12px #3b82f626}.tab-button.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-primary),var(--color-primary-light));color:#fff;box-shadow:0 4px 12px #3b82f64d}.tab-button.active[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,var(--color-primary-dark),var(--color-primary));transform:translateY(-2px) scale(1.02)}.tab-icon[_ngcontent-%COMP%]{font-size:1.25rem;transition:transform var(--transition-base);filter:drop-shadow(0 2px 4px rgba(0,0,0,.1))}.tab-button[_ngcontent-%COMP%]:hover   .tab-icon[_ngcontent-%COMP%]{transform:scale(1.15) rotate(5deg)}.tab-button.active[_ngcontent-%COMP%]   .tab-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_iconPulse .6s ease;filter:drop-shadow(0 2px 8px rgba(255,255,255,.5))}.tab-label[_ngcontent-%COMP%]{font-weight:600;letter-spacing:.3px}@keyframes _ngcontent-%COMP%_iconPulse{0%,to{transform:scale(1)}50%{transform:scale(1.2)}}.tab-content[_ngcontent-%COMP%]{min-height:calc(100vh - 400px);padding-bottom:var(--space-md);position:relative}.tab-pane[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInUp .4s cubic-bezier(.16,1,.3,1)}.tab-pane-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}@keyframes _ngcontent-%COMP%_slideInUp{0%{opacity:0;transform:translateY(30px) scale(.98)}to{opacity:1;transform:translateY(0) scale(1)}}.footer[_ngcontent-%COMP%]{background:var(--color-surface);border-top:1px solid var(--color-border);padding:var(--space-lg) 0;margin-top:var(--space-lg)}.footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;color:var(--color-text-muted);font-size:.875rem}@media (max-width: 768px){.tab-button[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);font-size:.875rem}.tab-icon[_ngcontent-%COMP%]{font-size:1rem}.tab-label[_ngcontent-%COMP%]{display:none}}.chat-widget[_ngcontent-%COMP%]{position:fixed;bottom:24px;right:24px;z-index:1000}.chat-toggle-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);padding:var(--space-md) var(--space-lg);background:linear-gradient(135deg,#3b82f6,#2563eb);border:none;border-radius:var(--radius-xl);color:#fff;font-weight:600;font-size:.9375rem;cursor:pointer;box-shadow:0 8px 24px #3b82f666;transition:all var(--transition-base);position:relative;overflow:hidden}.chat-toggle-button[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);transition:left .6s ease}.chat-toggle-button[_ngcontent-%COMP%]:hover:before{left:100%}.chat-toggle-button[_ngcontent-%COMP%]:hover{transform:translateY(-4px) scale(1.05);box-shadow:0 12px 32px #3b82f680}.chat-toggle-button.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626);box-shadow:0 8px 24px #ef444466}.chat-toggle-button.active[_ngcontent-%COMP%]:hover{box-shadow:0 12px 32px #ef444480}.chat-icon[_ngcontent-%COMP%]{font-size:1.5rem;animation:_ngcontent-%COMP%_bounce 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-4px)}}.chat-label[_ngcontent-%COMP%]{font-weight:700;letter-spacing:.3px}.chat-modal[_ngcontent-%COMP%]{position:fixed;bottom:100px;right:24px;width:850px;max-width:calc(100vw - 48px);height:650px;max-height:calc(100vh - 120px);opacity:0;transform:translateY(20px) scale(.95);pointer-events:none;transition:all .3s cubic-bezier(.16,1,.3,1);display:flex;flex-direction:column;z-index:2000}.chat-modal.open[_ngcontent-%COMP%]{opacity:1;transform:translateY(0) scale(1);pointer-events:all}.chat-modal-close[_ngcontent-%COMP%]{position:absolute;top:-50px;right:0;width:36px;height:36px;border-radius:var(--radius-lg);background:#00000080;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);color:#fff;font-size:1.25rem;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all var(--transition-base);padding:0;z-index:100;box-shadow:0 4px 12px #0000004d}.chat-modal-close[_ngcontent-%COMP%]:hover{background:#ef4444cc;transform:rotate(90deg) scale(1.1);box-shadow:0 6px 16px #ef444466}.chat-modal-content[_ngcontent-%COMP%]{flex:1;background:var(--color-surface);border-radius:var(--radius-xl);box-shadow:0 20px 60px #0000004d;border:1px solid var(--color-border);overflow:hidden;height:100%}@media (max-width: 768px){.chat-widget[_ngcontent-%COMP%]{bottom:16px;right:16px}.chat-toggle-button[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md)}.chat-label[_ngcontent-%COMP%]{display:none}.chat-modal[_ngcontent-%COMP%]{position:fixed;inset:0;width:100%;height:100%;max-width:100%;max-height:100%;border-radius:0;z-index:2000}.chat-modal-close[_ngcontent-%COMP%]{top:16px;right:auto;left:16px;width:44px;height:44px}}.notification-badge[_ngcontent-%COMP%]{position:absolute;top:-6px;right:-6px;background:#ef4444;color:#fff;padding:2px 8px;border-radius:12px;font-size:.8rem;font-weight:700;box-shadow:0 4px 6px #0000004d;animation:_ngcontent-%COMP%_badgePop .3s ease-out;display:inline-flex;align-items:center;justify-content:center;min-width:20px;z-index:1001;pointer-events:none;transition:transform .3s ease;border:2px solid white}.chat-toggle-button[_ngcontent-%COMP%]:hover + .notification-badge[_ngcontent-%COMP%]{transform:translateY(-4px) scale(1.05)}@keyframes _ngcontent-%COMP%_badgePop{0%{transform:scale(0)}to{transform:scale(1)}}']})}}return n})();$b(TI,zb).catch(n=>console.error(n));
