import{a as oe}from"./chunk-HCC5ZIAH.js";import{n as ie}from"./chunk-VCVPJN2K.js";import{a as ne}from"./chunk-XLT3BDRA.js";import{a as U,b as Q,e as Y,g as H,h as J,i as K,j as X,k as Z,l as ee,n as te}from"./chunk-IQNO2F6Q.js";import{Aa as c,Ba as k,Mb as R,Nb as q,Pa as _,Pb as $,Qb as G,Ra as p,Rb as L,Sb as j,Ta as I,Va as r,Wa as o,Xa as z,Ya as P,Za as f,_a as d,a as T,aa as F,b as E,db as l,eb as O,f as V,fb as h,gb as N,hb as B,ia as g,ib as C,ja as m,jb as x,kb as y,mb as A,nb as M,pb as w,qb as W,ya as D}from"./chunk-MNIEKAC2.js";function ae(a,u){if(a&1&&(r(0,"option",44),l(1),o()),a&2){let e=u.$implicit;p("value",e.id),c(),h(" ",e.name," ")}}function le(a,u){if(a&1&&(r(0,"option",44),l(1),M(2,"number"),o()),a&2){let e=u.$implicit;p("value",e.id),c(),B(" ",e.name," - \u20B1",w(2,4,e.price,"1.2-2")," (Stock: ",e.quantity,") ")}}function ce(a,u){if(a&1&&(r(0,"div",45),l(1),o()),a&2){let e=d();c(),h("\u26A0\uFE0F ",e.errorMessage,"")}}function se(a,u){if(a&1&&(r(0,"div",50),l(1),o()),a&2){let e=d().$implicit;c(),h(" Disc: -",e.discountType==="percent"?e.discount+"%":"\u20B1"+e.discount," ")}}function de(a,u){if(a&1){let e=P();r(0,"tr")(1,"td")(2,"div",46),l(3),o(),_(4,se,2,1,"div",47),o(),r(5,"td",25),l(6),M(7,"number"),o(),r(8,"td",26),l(9),o(),r(10,"td",48),l(11),M(12,"number"),o(),r(13,"td",26)(14,"button",49),f("click",function(){let t=g(e).index,i=d();return m(i.removeFromCart(t))}),l(15,"\u2715"),o()()()}if(a&2){let e=u.$implicit;c(3),O(e.product.name),c(),p("ngIf",e.discount>0),c(2),h("\u20B1",w(7,5,e.product.price,"1.2-2"),""),c(3),O(e.quantity),c(2),h("\u20B1",w(12,8,e.total,"1.2-2"),"")}}function pe(a,u){a&1&&(r(0,"tr")(1,"td",51),l(2,"Cart is empty. Add items above."),o()())}function ue(a,u){if(a&1){let e=P();r(0,"div",52)(1,"div",53)(2,"h4"),l(3,"\u{1F69A} Delivery Options"),o(),r(4,"div",54)(5,"div",4)(6,"label"),l(7,"Date"),o(),r(8,"input",55),y("ngModelChange",function(t){g(e);let i=d();return x(i.deliveryDate,t)||(i.deliveryDate=t),m(t)}),o()(),r(9,"div",4)(10,"label"),l(11,"Time"),o(),r(12,"input",56),y("ngModelChange",function(t){g(e);let i=d();return x(i.deliveryTime,t)||(i.deliveryTime=t),m(t)}),o()()(),r(13,"div",4)(14,"textarea",57),y("ngModelChange",function(t){g(e);let i=d();return x(i.deliveryNotes,t)||(i.deliveryNotes=t),m(t)}),o()()(),r(15,"div",58)(16,"h4"),l(17,"\u{1F4B0} Payment"),o(),r(18,"div",59)(19,"span"),l(20,"Total Due:"),o(),r(21,"span"),l(22),M(23,"number"),o()(),r(24,"div",60)(25,"label"),l(26,"Cash Received (\u20B1)"),o(),r(27,"input",61),f("ngModelChange",function(t){g(e);let i=d();return m(i.onCashInput(t))})("blur",function(){g(e);let t=d();return m(t.formatCashOnBlur())})("focus",function(){g(e);let t=d();return m(t.unformatCashOnFocus())}),o()(),r(28,"div",62)(29,"span"),l(30,"Change:"),o(),r(31,"span"),l(32),M(33,"number"),o()(),r(34,"button",63),f("click",function(){g(e);let t=d();return m(t.checkout())}),l(35," Complete Order "),o()()()}if(a&2){let e=d();c(8),C("ngModel",e.deliveryDate),p("min",e.minDate),c(4),C("ngModel",e.deliveryTime),c(2),C("ngModel",e.deliveryNotes),c(8),h("\u20B1",w(23,10,e.total,"1.2-2"),""),c(5),p("ngModel",e.cashDisplayValue),c(),I("negative",e.change<0),c(4),h("\u20B1",w(33,13,e.change,"1.2-2"),""),c(2),p("disabled",!e.isValid())}}function ge(a,u){if(a&1){let e=P();r(0,"button",64),f("click",function(){g(e);let t=d();return m(t.deliveryFilterDate="")}),l(1,"\u274C"),o()}}function me(a,u){if(a&1&&(r(0,"span",83),l(1),o()),a&2){let e=d().$implicit;c(),O(e.sales[0].productName)}}function ve(a,u){if(a&1&&(r(0,"span",83),l(1),M(2,"slice"),o()),a&2){let e=d().$implicit;c(),N("Order #",W(2,2,e.orderId,4,12),"... (",e.sales.length," items)")}}function _e(a,u){a&1&&(r(0,"span",84),l(1,"\u26A0\uFE0F RESERVATION"),o())}function fe(a,u){a&1&&(r(0,"span",85),l(1,"\u2705 CONFIRMED"),o())}function he(a,u){if(a&1&&(r(0,"div",88),l(1),r(2,"span",89),l(3),o()()),a&2){let e=u.$implicit;c(),h(" \u2022 ",e.productName," "),c(2),h("(x",e.quantitySold,")")}}function Ce(a,u){if(a&1&&(r(0,"div",86),_(1,he,4,2,"div",87),o()),a&2){let e=d().$implicit;c(),p("ngForOf",e.sales)}}function xe(a,u){if(a&1&&(r(0,"span"),l(1),o()),a&2){let e=d().$implicit;c(),h("Qty: ",e.quantityTotal,"")}}function ye(a,u){if(a&1&&(r(0,"span"),l(1),o()),a&2){let e=d().$implicit;c(),h("Total Qty: ",e.quantityTotal,"")}}function be(a,u){if(a&1&&(r(0,"div",90)(1,"div",91),l(2,"\u{1F464} Customer Details"),o(),r(3,"div",92)(4,"span",93),l(5,"Name:"),o(),r(6,"span",94),l(7),o()(),r(8,"div",92)(9,"span",93),l(10,"Phone:"),o(),r(11,"span",94),l(12),o()(),r(13,"div",92)(14,"span",93),l(15,"Address:"),o(),r(16,"span",94),l(17),o()()()),a&2){let e=d().$implicit;c(7),O(e.customer.name),c(5),O(e.customer.phoneNumber),c(5),O(e.customer.deliveryAddress)}}function Pe(a,u){if(a&1&&(r(0,"span"),l(1),o()),a&2){let e=d(2).$implicit;c(),h("\u{1F4DD} ",e.deliveryNotes,"")}}function Me(a,u){if(a&1&&(r(0,"div",95)(1,"span"),l(2),M(3,"date"),o(),r(4,"span"),l(5),M(6,"date"),o(),_(7,Pe,2,1,"span",28),o()),a&2){let e=d().$implicit;c(2),h("\u{1F4C5} Due: ",w(3,3,e.deliveryDate,"mediumDate"),""),c(3),h("\u{1F4C5} Time: ",w(6,6,e.deliveryDate,"shortTime"),""),c(2),p("ngIf",e.deliveryNotes)}}function we(a,u){if(a&1){let e=P();r(0,"button",96),f("click",function(){g(e);let t=d().$implicit,i=d();return m(i.confirmGroupReservation(t.sales))}),l(1," \u{1F4DD} Confirm "),o()}}function Oe(a,u){if(a&1){let e=P();r(0,"button",97),f("click",function(){g(e);let t=d().$implicit,i=d();return m(i.markGroupAsDelivered(t.sales))}),l(1," \u{1F69A} Mark Delivered "),o()}}function Se(a,u){if(a&1){let e=P();r(0,"div",65)(1,"div",66)(2,"div",67)(3,"div",68),_(4,me,2,1,"span",69)(5,ve,3,6,"span",69),o(),_(6,_e,2,0,"span",70)(7,fe,2,0,"span",71),r(8,"span",72),l(9),M(10,"date"),o()(),_(11,Ce,2,1,"div",73),r(12,"div",74),_(13,xe,2,1,"span",28)(14,ye,2,1,"span",28),r(15,"span",75),l(16),M(17,"number"),o()(),_(18,be,18,3,"div",76)(19,Me,8,9,"div",77),o(),r(20,"div",78)(21,"button",79),f("click",function(){let t=g(e).$implicit,i=d();return m(i.openEditModal(t.sales[0]))}),l(22,"\u270F\uFE0F Edit"),o(),_(23,we,2,0,"button",80),r(24,"button",81),f("click",function(){let t=g(e).$implicit,i=d();return m(i.cancelGroupOrder(t.sales))}),l(25," \u{1F5D1}\uFE0F Cancel "),o(),_(26,Oe,2,0,"button",82),o()()}if(a&2){let e=u.$implicit;c(4),p("ngIf",!e.isGroup),c(),p("ngIf",e.isGroup),c(),p("ngIf",e.status==="pending_confirmation"),c(),p("ngIf",e.status==="confirmed"),c(2),O(w(10,13,e.timestamp,"short")),c(2),p("ngIf",e.isGroup),c(2),p("ngIf",!e.isGroup),c(),p("ngIf",e.isGroup),c(2),h("Due: \u20B1",w(17,16,e.total,"1.2-2"),""),c(2),p("ngIf",e.customer),c(),p("ngIf",e.deliveryDate),c(4),p("ngIf",e.status==="pending_confirmation"),c(3),p("ngIf",e.status!=="pending_confirmation")}}function De(a,u){if(a&1&&(r(0,"option",44),l(1),o()),a&2){let e=u.$implicit;p("value",e),c(),O(e)}}function ke(a,u){if(a&1){let e=P();r(0,"button",107),f("click",function(){let t=g(e).$implicit,i=d(3);return m(i.goToPendingPage(t))}),l(1),o()}if(a&2){let e=u.$implicit,n=d(3);I("active",e===n.pendingPage),c(),h(" ",e," ")}}function Te(a,u){if(a&1){let e=P();r(0,"div",103)(1,"button",104),f("click",function(){g(e);let t=d(2);return m(t.prevPendingPage())}),l(2," \u2190 Prev "),o(),r(3,"div",105),_(4,ke,2,3,"button",106),o(),r(5,"button",104),f("click",function(){g(e);let t=d(2);return m(t.nextPendingPage())}),l(6," Next \u2192 "),o()()}if(a&2){let e=d(2);c(),p("disabled",e.pendingPage===1),c(3),p("ngForOf",e.getPendingPageNumbers()),c(),p("disabled",e.pendingPage===e.pendingTotalPages)}}function Ee(a,u){if(a&1){let e=P();r(0,"div",98)(1,"div",99)(2,"label",100),l(3,"Show:"),o(),r(4,"select",101),y("ngModelChange",function(t){g(e);let i=d();return x(i.pendingPageSize,t)||(i.pendingPageSize=t),m(t)}),f("change",function(){g(e);let t=d();return m(t.pendingPage=1)}),_(5,De,2,2,"option",8),o(),r(6,"span"),l(7,"per page"),o()(),_(8,Te,7,3,"div",102),o()}if(a&2){let e=d();c(4),C("ngModel",e.pendingPageSize),c(),p("ngForOf",e.pendingPageSizeOptions),c(3),p("ngIf",e.pendingTotalPages>1)}}function Ie(a,u){if(a&1){let e=P();r(0,"div",108),f("click",function(){g(e);let t=d();return m(t.closeEditModal())}),r(1,"div",109),f("click",function(t){return g(e),m(t.stopPropagation())}),r(2,"div",110)(3,"h3"),l(4,"Edit Delivery Details"),o(),r(5,"button",111),f("click",function(){g(e);let t=d();return m(t.closeEditModal())}),l(6,"\xD7"),o()(),r(7,"div",112)(8,"div",4)(9,"label",113),l(10,"Delivery Date"),o(),r(11,"input",114),y("ngModelChange",function(t){g(e);let i=d();return x(i.editDeliveryDate,t)||(i.editDeliveryDate=t),m(t)}),o()(),r(12,"div",4)(13,"label",115),l(14,"Delivery Time"),o(),r(15,"input",116),y("ngModelChange",function(t){g(e);let i=d();return x(i.editDeliveryTime,t)||(i.editDeliveryTime=t),m(t)}),o()(),r(16,"div",4)(17,"label",117),l(18,"Notes"),o(),r(19,"textarea",118),y("ngModelChange",function(t){g(e);let i=d();return x(i.editDeliveryNotes,t)||(i.editDeliveryNotes=t),m(t)}),o()()(),r(20,"div",119)(21,"button",120),f("click",function(){g(e);let t=d();return m(t.closeEditModal())}),l(22,"Cancel"),o(),r(23,"button",121),f("click",function(){g(e);let t=d();return m(t.saveEdit())}),l(24,"Save Changes"),o()()()()}if(a&2){let e=d();c(11),C("ngModel",e.editDeliveryDate),p("min",e.minDate),c(4),C("ngModel",e.editDeliveryTime),c(4),C("ngModel",e.editDeliveryNotes)}}var $e=(()=>{class a{onCashInput(e){this.cashDisplayValue=e;let n=e.replace(/[^0-9.]/g,"");this.cashReceived=parseFloat(n),isNaN(this.cashReceived)&&(this.cashReceived=0)}formatCashOnBlur(){this.cashReceived!==0?this.cashDisplayValue=this.cashReceived.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):this.cashDisplayValue=""}unformatCashOnFocus(){this.cashReceived!==0?this.cashDisplayValue=this.cashReceived.toString():this.cashDisplayValue=""}constructor(e,n,t){this.inventoryService=e,this.customerService=n,this.dialogService=t,this.products=[],this.customers=[],this.pendingSales=[],this.subscriptions=new V,this.selectedProductId="",this.selectedCustomerId="",this.quantity=1,this.cashReceived=0,this.discount=0,this.discountType="amount",this.errorMessage="",this.cart=[],this.deliveryDate="",this.deliveryTime="",this.deliveryNotes="",this.minDate="",this.deliveryFilterDate="",this.statusFilter="all",this.isEditModalOpen=!1,this.editingSale=null,this.editDeliveryDate="",this.editDeliveryTime="",this.editDeliveryNotes="",this.pendingPage=1,this.pendingPageSize=5,this.pendingPageSizeOptions=[5,10,20,50],this.alarmInterval=null,this.checkInterval=null,this.audioCtx=null,this.audioUnlocked=!1,this.cashDisplayValue="";let i=new Date,s=i.getFullYear(),v=String(i.getMonth()+1).padStart(2,"0"),b=String(i.getDate()).padStart(2,"0");this.minDate=`${s}-${v}-${b}`,this.deliveryDate=this.minDate,this.deliveryTime="10:00"}ngOnInit(){this.customerService.loadCustomers(),this.subscriptions.add(this.inventoryService.getProducts().subscribe(e=>{this.products=e.filter(n=>n.quantity>0)})),this.subscriptions.add(this.customerService.getCustomers().subscribe(e=>{this.customers=e})),this.subscriptions.add(this.inventoryService.getSales().subscribe(e=>{this.pendingSales=e.filter(n=>n.pending===!0),this.checkInterval||this.startAlarmChecks()})),this.discount=0}ngOnDestroy(){this.subscriptions.unsubscribe(),this.stopAlarm(),this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null),this.audioCtx&&this.audioCtx.close().catch(()=>{})}onUserInteraction(){this.unlockAudioContext()}unlockAudioContext(){if(this.audioUnlocked)return;this.audioCtx||(this.audioCtx=new(window.AudioContext||window.webkitAudioContext));let e=this.audioCtx;if(e){e.state==="suspended"&&e.resume().catch(()=>{});try{let n=e.createBuffer(1,1,22050),t=e.createBufferSource();t.buffer=n,t.connect(e.destination),t.start(0),this.audioUnlocked=!0}catch{}}}startAlarmChecks(){this.checkInterval=setInterval(()=>this.checkPendingDeliveryAlarms(),60*60*1e3),this.checkPendingDeliveryAlarms()}get filteredPendingSales(){let e=this.pendingSales;return this.statusFilter==="reservation"&&(e=e.filter(n=>n.reservationStatus==="pending_confirmation")),this.deliveryFilterDate&&(e=e.filter(n=>{if(!n.deliveryDate)return!1;let t=new Date(n.deliveryDate),i=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),v=String(t.getDate()).padStart(2,"0");return`${i}-${s}-${v}`===this.deliveryFilterDate})),e.slice().sort((n,t)=>{let i=n.reservationStatus==="pending_confirmation",s=t.reservationStatus==="pending_confirmation";if(i&&!s)return-1;if(!i&&s)return 1;let v=n.deliveryDate?new Date(n.deliveryDate).getTime():1/0,b=t.deliveryDate?new Date(t.deliveryDate).getTime():1/0;return v-b})}checkPendingDeliveryAlarms(){let e=new Date,n=[];this.pendingSales.forEach(t=>{if(!t.deliveryDate)return;let s=new Date(t.deliveryDate).getTime()-e.getTime(),v=Math.floor(s/(1e3*60*60*24));(v===1||v===2||v<1)&&n.push({sale:t,days:v})}),n.length>0&&this.triggerBatchAlarm(n)}triggerBatchAlarm(e){if(this.alarmInterval)return;let n="";if(e.length===1){let t=e[0],s=new Date(t.sale.deliveryDate).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"});t.days<0?n=`\u26A0\uFE0F OVERDUE: Delivery for "${t.sale.productName}" was due on ${s}.`:t.days===0?n=`\u26A0\uFE0F TODAY: Delivery for "${t.sale.productName}" is due today!`:n=`\u26A0\uFE0F UPCOMING: Delivery for "${t.sale.productName}" is due in ${t.days} day(s) (${s}).`}else n=`\u26A0\uFE0F There are ${e.length} deliveries due soon or overdue. Please check the Pending Deliveries list.`;this.playLoopingAlarm(),setTimeout(()=>{this.stopAlarm()},2e4),this.dialogService.alert(n,"Delivery Reminder","warning").then(()=>{this.stopAlarm()})}playLoopingAlarm(){this.stopAlarm(),this.playBeep(),this.alarmInterval=setInterval(()=>{this.playBeep()},2e3)}stopAlarm(){this.alarmInterval&&(clearInterval(this.alarmInterval),this.alarmInterval=null)}playBeep(){try{this.audioCtx||(this.audioCtx=new(window.AudioContext||window.webkitAudioContext));let e=this.audioCtx;e.state==="suspended"&&e.resume().catch(()=>{}),this.audioUnlocked||this.unlockAudioContext();let n=e.createOscillator(),t=e.createOscillator(),i=e.createGain();n.type="sine",t.type="sine",n.frequency.setValueAtTime(523.25,e.currentTime),t.frequency.setValueAtTime(659.25,e.currentTime),n.connect(i),t.connect(i),i.connect(e.destination),i.gain.setValueAtTime(0,e.currentTime),i.gain.linearRampToValueAtTime(.15,e.currentTime+.05),i.gain.linearRampToValueAtTime(.15,e.currentTime+.4),i.gain.exponentialRampToValueAtTime(.01,e.currentTime+.8),n.start(e.currentTime),t.start(e.currentTime),n.stop(e.currentTime+.8),t.stop(e.currentTime+.8)}catch(e){console.error("Audio alarm failed",e)}}get selectedProduct(){return this.products.find(e=>e.id===this.selectedProductId)}get selectedCustomer(){return this.customers.find(e=>e.id===this.selectedCustomerId)}getCustomerById(e){if(e)return this.customers.find(n=>n.id===e)}get maxQuantity(){return this.selectedProduct?.quantity||0}onProductChange(){this.quantity=1,this.errorMessage="",this.discount=0}addToCart(){if(this.errorMessage="",!this.selectedProduct){this.errorMessage="Please select a product";return}if(this.quantity<1||this.quantity>this.maxQuantity){this.errorMessage=`Quantity must be between 1 and ${this.maxQuantity}`;return}let e=this.cart.filter(t=>t.product.id===this.selectedProduct.id).reduce((t,i)=>t+i.quantity,0);if(e+this.quantity>this.maxQuantity){this.errorMessage=`Cannot add more. Total in cart (${e}) + new (${this.quantity}) exceeds stock (${this.maxQuantity})`;return}let n=this.selectedProduct.price*this.quantity;this.discount>0&&(this.discountType==="percent"?n=n-n*(this.discount/100):n=n-this.discount),n=Math.max(0,Math.round(n*100)/100),this.cart.push({product:this.selectedProduct,quantity:this.quantity,discount:this.discount,discountType:this.discountType,total:n}),this.quantity=1,this.discount=0,this.discountType="amount",this.selectedProductId=""}removeFromCart(e){this.cart.splice(e,1)}get total(){return this.cart.reduce((e,n)=>e+n.total,0)}get change(){return this.cashReceived-this.total}isValid(){return this.cart.length>0&&this.cashReceived>=this.total}get groupedPendingSales(){let e=new Map,n=[];this.filteredPendingSales.forEach(i=>{i.orderId?(e.has(i.orderId)||e.set(i.orderId,[]),e.get(i.orderId).push(i)):n.push(i)});let t=[];return e.forEach((i,s)=>{let v=i[0];t.push({isGroup:!0,orderId:s,sales:i,total:i.reduce((b,S)=>b+S.total,0),customerName:this.getCustomerById(v.customerId)?.name||"Walk-in",customer:this.getCustomerById(v.customerId),deliveryDate:v.deliveryDate,timestamp:v.timestamp,status:v.reservationStatus,productNames:i.map(b=>b.productName).join(", "),deliveryNotes:v.deliveryNotes,quantityTotal:i.reduce((b,S)=>b+S.quantitySold,0)})}),n.forEach(i=>{t.push({isGroup:!1,id:i.id,sales:[i],total:i.total,customerName:this.getCustomerById(i.customerId)?.name||"Walk-in",customer:this.getCustomerById(i.customerId),deliveryDate:i.deliveryDate,timestamp:i.timestamp,status:i.reservationStatus,productNames:i.productName,deliveryNotes:i.deliveryNotes,quantityTotal:i.quantitySold})}),t.sort((i,s)=>{let v=i.status==="pending_confirmation",b=s.status==="pending_confirmation";if(v&&!b)return-1;if(!v&&b)return 1;let S=i.deliveryDate?new Date(i.deliveryDate).getTime():1/0,re=s.deliveryDate?new Date(s.deliveryDate).getTime():1/0;return S-re})}get paginatedGroupedPendingSales(){let e=(this.pendingPage-1)*this.pendingPageSize;return this.groupedPendingSales.slice(e,e+this.pendingPageSize)}get pendingTotalPages(){return Math.ceil(this.groupedPendingSales.length/this.pendingPageSize)}nextPendingPage(){this.pendingPage<this.pendingTotalPages&&this.pendingPage++}prevPendingPage(){this.pendingPage>1&&this.pendingPage--}goToPendingPage(e){this.pendingPage=e}getPendingPageNumbers(){return Array(this.pendingTotalPages).fill(0).map((e,n)=>n+1)}clearFilter(){this.deliveryFilterDate="",this.statusFilter="all",this.pendingPage=1}checkout(){if(this.errorMessage="",this.cart.length===0){this.errorMessage="Cart is empty";return}if(this.cashReceived<this.total){this.errorMessage="Insufficient cash received";return}let e=this.cashReceived-this.total,n="ORD-"+Date.now()+"-"+Math.floor(Math.random()*1e3);try{this.cart.forEach((t,i)=>{let s=t.total;i===0&&(s+=e);let v;this.deliveryDate&&(this.deliveryTime?v=new Date(`${this.deliveryDate}T${this.deliveryTime}`):v=new Date(this.deliveryDate)),this.inventoryService.recordSale(t.product.id,t.quantity,s,v,this.deliveryNotes||void 0,this.selectedCustomerId||void 0,t.discount,t.discountType,n)}),this.cart=[],this.cashReceived=0,this.deliveryDate=this.minDate,this.deliveryTime="",this.deliveryNotes="",this.selectedCustomerId="",this.errorMessage=""}catch(t){this.errorMessage=t.message||"Error processing sales"}}markAsDelivered(e){this.dialogService.confirm("Are you sure you want to mark this item as delivered?","Mark as Delivered").then(n=>{n&&this.inventoryService.completePendingSale(e)})}confirmReservation(e){this.dialogService.confirm("Confirming this reservation will deduct items from inventory. Continue?","Confirm Reservation").then(n=>{n&&this.inventoryService.confirmReservation(e)})}deleteReservation(e){this.dialogService.confirm("Are you sure you want to remove this reservation?","Remove Reservation").then(n=>{n&&this.inventoryService.deleteSale(e.id)})}openEditModal(e){if(this.editingSale=e,this.isEditModalOpen=!0,e.deliveryDate){let n=new Date(e.deliveryDate),t=n.getFullYear(),i=String(n.getMonth()+1).padStart(2,"0"),s=String(n.getDate()).padStart(2,"0");this.editDeliveryDate=`${t}-${i}-${s}`,this.editDeliveryTime=n.toTimeString().substring(0,5)}else this.editDeliveryDate="",this.editDeliveryTime="";this.editDeliveryNotes=e.deliveryNotes||""}closeEditModal(){this.isEditModalOpen=!1,this.editingSale=null,this.editDeliveryDate="",this.editDeliveryTime="",this.editDeliveryNotes=""}saveEdit(){if(!this.editingSale)return;let e;this.editDeliveryDate&&(this.editDeliveryTime?e=new Date(`${this.editDeliveryDate}T${this.editDeliveryTime}`):e=new Date(this.editDeliveryDate));let n=this.editingSale.orderId;if(n)this.pendingSales.filter(i=>i.orderId===n).forEach(i=>{let s=E(T({},i),{deliveryDate:e,deliveryNotes:this.editDeliveryNotes});this.inventoryService.updateSale(s)});else{let t=E(T({},this.editingSale),{deliveryDate:e,deliveryNotes:this.editDeliveryNotes});this.inventoryService.updateSale(t)}this.closeEditModal()}markGroupAsDelivered(e){this.dialogService.confirm(`Mark ${e.length} items as delivered? This will deduct stock and complete the order.`,"Mark Group as Delivered").then(n=>{n&&e.forEach(t=>this.inventoryService.completePendingSale(t.id))})}confirmGroupReservation(e){this.dialogService.confirm(`Confirm reservation for ${e.length} items? This will deduct stock upon delivery.`,"Confirm Group Reservation").then(n=>{n&&e.forEach(t=>this.inventoryService.confirmReservation(t))})}cancelGroupOrder(e){this.dialogService.confirm(`Cancel order for ${e.length} items? This cannot be undone.`,"Cancel Order").then(n=>{n&&e.forEach(t=>this.inventoryService.deleteSale(t.id))})}static{this.\u0275fac=function(n){return new(n||a)(k(ie),k(ne),k(oe))}}static{this.\u0275cmp=F({type:a,selectors:[["app-pos-calculator"]],hostBindings:function(n,t){n&1&&f("click",function(){return t.onUserInteraction()},!1,D)("touchstart",function(){return t.onUserInteraction()},!1,D)("keydown",function(){return t.onUserInteraction()},!1,D)},standalone:!0,features:[A],decls:77,vars:20,consts:[[1,"card"],[1,"pos-layout"],[1,"selection-panel"],[1,"form-row","full-width"],[1,"form-group"],["for","customer"],["id","customer",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"multi-item-row"],[1,"form-group","product-select-group"],["for","product"],["id","product",3,"ngModelChange","change","ngModel"],[1,"form-group","tiny-width"],["for","qty"],["type","number","id","qty",3,"ngModelChange","ngModel","min","max"],[1,"discount-row"],["type","number","placeholder","0",1,"small-input",3,"ngModelChange","ngModel"],[1,"small-select",3,"ngModelChange","ngModel"],["value","amount"],["value","percent"],[1,"btn-primary","btn-add",3,"click","disabled"],["class","error-message",4,"ngIf"],[1,"cart-container"],[1,"cart-table"],[1,"text-right"],[1,"text-center"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","checkout-panel",4,"ngIf"],[1,"card","pending-deliveries"],[1,"filter-row"],[1,"filter-group"],["for","deliveryFilter"],["type","date","id","deliveryFilter","name","deliveryFilter",3,"ngModelChange","ngModel"],["class","btn-clear","title","Clear Date",3,"click",4,"ngIf"],["for","statusFilter"],["id","statusFilter",1,"status-select",3,"ngModelChange","ngModel"],["value","all"],["value","reservation"],[1,"pending-list"],["class","pending-item",4,"ngFor","ngForOf"],["class","pagination",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[3,"value"],[1,"error-message"],[1,"cart-prod-name"],["class","cart-prod-disc",4,"ngIf"],[1,"text-right","font-bold"],["title","Remove",1,"btn-remove-sm",3,"click"],[1,"cart-prod-disc"],["colspan","5",1,"empty-cart-cell"],[1,"checkout-panel"],[1,"delivery-card"],[1,"form-row"],["type","date",3,"ngModelChange","ngModel","min"],["type","time",3,"ngModelChange","ngModel"],["placeholder","Delivery notes...","rows","2",3,"ngModelChange","ngModel"],[1,"payment-card"],[1,"summary-line","total-line"],[1,"form-group","cash-group"],["type","text","placeholder","0.00",1,"cash-input",3,"ngModelChange","blur","focus","ngModel"],[1,"summary-line","change-line"],[1,"btn-checkout",3,"click","disabled"],["title","Clear Date",1,"btn-clear",3,"click"],[1,"pending-item"],[1,"pending-details"],[1,"pending-header"],[1,"header-left"],["class","product-name",4,"ngIf"],["class","status-badge warning",4,"ngIf"],["class","status-badge success",4,"ngIf"],[1,"sale-date"],["class","multi-item-list",4,"ngIf"],[1,"pending-info"],[1,"total-price"],["class","customer-details",4,"ngIf"],["class","delivery-info",4,"ngIf"],[1,"pending-actions"],["type","button",1,"btn-edit",3,"click"],["class","btn-confirm","type","button","title","Confirm Reservation",3,"click",4,"ngIf"],["type","button","title","Cancel Order",1,"btn-delete",3,"click"],["class","btn-deliver","type","button",3,"click",4,"ngIf"],[1,"product-name"],[1,"status-badge","warning"],[1,"status-badge","success"],[1,"multi-item-list"],["class","sub-item",4,"ngFor","ngForOf"],[1,"sub-item"],[1,"sub-qty"],[1,"customer-details"],[1,"customer-header"],[1,"customer-row"],[1,"customer-label"],[1,"customer-value"],[1,"delivery-info"],["type","button","title","Confirm Reservation",1,"btn-confirm",3,"click"],["type","button",1,"btn-deliver",3,"click"],[1,"pagination"],[1,"pagination-size"],["for","pendingPageSize"],["id","pendingPageSize",1,"page-size-select",3,"ngModelChange","change","ngModel"],["class","pagination-controls",4,"ngIf"],[1,"pagination-controls"],[1,"pagination-btn",3,"click","disabled"],[1,"pagination-pages"],["class","pagination-page",3,"active","click",4,"ngFor","ngForOf"],[1,"pagination-page",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],["type","button",1,"close-btn",3,"click"],[1,"modal-body"],["for","editDate"],["type","date","id","editDate",1,"date-input",3,"ngModelChange","ngModel","min"],["for","editTime"],["type","time","id","editTime",1,"time-input",3,"ngModelChange","ngModel"],["for","editNotes"],["id","editNotes","rows","3",1,"textarea-input",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn-cancel",3,"click"],["type","button",1,"btn-save",3,"click"]],template:function(n,t){n&1&&(r(0,"div",0)(1,"h3"),l(2,"Point of Sale"),o(),r(3,"div",1)(4,"div",2)(5,"div",3)(6,"div",4)(7,"label",5),l(8,"Select Customer"),o(),r(9,"select",6),y("ngModelChange",function(s){return x(t.selectedCustomerId,s)||(t.selectedCustomerId=s),s}),r(10,"option",7),l(11,"-- Walk-in Customer --"),o(),_(12,ae,2,2,"option",8),o()()(),r(13,"div",9)(14,"div",10)(15,"label",11),l(16,"Select Product"),o(),r(17,"select",12),y("ngModelChange",function(s){return x(t.selectedProductId,s)||(t.selectedProductId=s),s}),f("change",function(){return t.onProductChange()}),r(18,"option",7),l(19,"-- Choose a product --"),o(),_(20,le,3,7,"option",8),o()(),r(21,"div",13)(22,"label",14),l(23,"Qty"),o(),r(24,"input",15),y("ngModelChange",function(s){return x(t.quantity,s)||(t.quantity=s),s}),o()(),r(25,"div",4)(26,"label"),l(27,"Discount"),o(),r(28,"div",16)(29,"input",17),y("ngModelChange",function(s){return x(t.discount,s)||(t.discount=s),s}),o(),r(30,"select",18),y("ngModelChange",function(s){return x(t.discountType,s)||(t.discountType=s),s}),r(31,"option",19),l(32,"\u20B1"),o(),r(33,"option",20),l(34,"%"),o()()()(),r(35,"div",4)(36,"button",21),f("click",function(){return t.addToCart()}),l(37," \u2795 Add "),o()()()(),_(38,ce,2,1,"div",22),r(39,"div",23)(40,"table",24)(41,"thead")(42,"tr")(43,"th"),l(44,"Product"),o(),r(45,"th",25),l(46,"Price"),o(),r(47,"th",26),l(48,"Qty"),o(),r(49,"th",25),l(50,"Total"),o(),z(51,"th"),o()(),r(52,"tbody"),_(53,de,16,11,"tr",27)(54,pe,3,0,"tr",28),o()()(),_(55,ue,36,16,"div",29),o()(),r(56,"div",30)(57,"h3"),l(58,"\u{1F69A} Pending Deliveries"),o(),r(59,"div",31)(60,"div",32)(61,"label",33),l(62,"Date:"),o(),r(63,"input",34),y("ngModelChange",function(s){return x(t.deliveryFilterDate,s)||(t.deliveryFilterDate=s),s}),o(),_(64,ge,2,0,"button",35),o(),r(65,"div",32)(66,"label",36),l(67,"Show:"),o(),r(68,"select",37),y("ngModelChange",function(s){return x(t.statusFilter,s)||(t.statusFilter=s),s}),r(69,"option",38),l(70,"All Deliveries"),o(),r(71,"option",39),l(72,"\u26A0\uFE0F Reservations"),o()()()(),r(73,"div",40),_(74,Se,27,19,"div",41),o(),_(75,Ee,9,3,"div",42),o(),_(76,Ie,25,4,"div",43)),n&2&&(c(9),C("ngModel",t.selectedCustomerId),c(3),p("ngForOf",t.customers),c(5),C("ngModel",t.selectedProductId),c(3),p("ngForOf",t.products),c(4),C("ngModel",t.quantity),p("min",1)("max",t.maxQuantity),c(5),C("ngModel",t.discount),c(),C("ngModel",t.discountType),c(6),p("disabled",!t.selectedProductId),c(2),p("ngIf",t.errorMessage),c(15),p("ngForOf",t.cart),c(),p("ngIf",t.cart.length===0),c(),p("ngIf",t.cart.length>0),c(8),C("ngModel",t.deliveryFilterDate),c(),p("ngIf",t.deliveryFilterDate),c(4),C("ngModel",t.statusFilter),c(6),p("ngForOf",t.paginatedGroupedPendingSales),c(),p("ngIf",t.pendingTotalPages>1||t.groupedPendingSales.length>5),c(),p("ngIf",t.isEditModalOpen))},dependencies:[j,R,q,L,G,$,te,K,X,U,H,J,Q,ee,Z,Y],styles:[".form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg);margin-top:var(--space-lg)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--space-lg)}.form-row.full-width[_ngcontent-%COMP%]{grid-template-columns:1fr}.multi-item-row[_ngcontent-%COMP%]{display:flex;align-items:flex-end;gap:var(--space-md);flex-wrap:wrap}.tiny-width[_ngcontent-%COMP%]{width:80px}.product-select-group[_ngcontent-%COMP%]{flex:1;min-width:250px}.delivery-section[_ngcontent-%COMP%]{background:var(--color-bg);padding:var(--space-lg);border-radius:var(--radius-lg);border:2px dashed var(--color-border);margin-top:var(--space-md)}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);font-size:1rem;font-weight:600;color:var(--color-text);margin-bottom:var(--space-lg)}.section-icon[_ngcontent-%COMP%]{font-size:1.25rem}.date-input[_ngcontent-%COMP%], .time-input[_ngcontent-%COMP%]{cursor:pointer}.textarea-input[_ngcontent-%COMP%]{font-family:inherit;font-size:.9375rem;padding:var(--space-sm) var(--space-md);border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-surface);color:var(--color-text);transition:all var(--transition-base);width:100%;resize:vertical;min-height:80px}.textarea-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f61a}.textarea-input[_ngcontent-%COMP%]::placeholder{color:var(--color-text-muted)}.customer-info-display[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f61a,#9333ea1a);border:2px solid var(--color-primary);border-radius:var(--radius-lg);padding:var(--space-lg);margin-bottom:var(--space-lg)}.info-header[_ngcontent-%COMP%]{font-weight:600;font-size:1rem;color:var(--color-primary);margin-bottom:var(--space-md);display:flex;align-items:center;gap:var(--space-sm)}.info-row[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm);padding:var(--space-xs) 0;font-size:.875rem}.info-label[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text-muted);min-width:120px}.info-value[_ngcontent-%COMP%]{color:var(--color-text);flex:1}.transaction-summary[_ngcontent-%COMP%]{background:var(--color-bg);border-radius:var(--radius-md);padding:var(--space-lg);margin-top:var(--space-md)}.summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--space-sm) 0;font-size:1.125rem}.summary-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text-muted)}.summary-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text);font-size:1.25rem}.change-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:var(--color-success)}.change-row.negative[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:var(--color-danger)}.delivery-info[_ngcontent-%COMP%]{border-top:1px solid var(--color-border);margin-top:var(--space-sm);padding-top:var(--space-md)}.delivery-info[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1rem;color:var(--color-primary)}.error-message[_ngcontent-%COMP%]{background:#fee;color:var(--color-danger);padding:var(--space-md);border-radius:var(--radius-md);font-size:.875rem;border:1px solid rgba(239,68,68,.2)}.btn-success[_ngcontent-%COMP%]{background:var(--color-success)}.btn-success[_ngcontent-%COMP%]:hover{background:#059669}@media (max-width: 640px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}.pending-deliveries[_ngcontent-%COMP%]{margin-top:var(--space-xl);border-top:4px solid var(--color-warning)}.pending-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm);margin-top:var(--space-md)}.pending-item[_ngcontent-%COMP%]{background:var(--color-bg);border:1px solid var(--color-border);border-radius:var(--radius-md);padding:var(--space-sm);display:flex;justify-content:space-between;align-items:flex-start;gap:var(--space-md)}.pending-details[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:2px}.pending-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:4px}.header-left[_ngcontent-%COMP%]{display:flex;flex-direction:column}.product-name[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text);font-size:1rem}.sale-date[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted);white-space:nowrap}.multi-item-list[_ngcontent-%COMP%]{background:#00000005;border-radius:4px;padding:4px 8px;margin-bottom:4px;border-left:2px solid var(--color-border)}.sub-item[_ngcontent-%COMP%]{font-size:.85rem;color:var(--color-text);line-height:1.3}.sub-qty[_ngcontent-%COMP%]{color:var(--color-text-muted);font-size:.8rem}.pending-info[_ngcontent-%COMP%]{display:flex;gap:var(--space-md);font-size:.9rem;color:var(--color-text);align-items:center;background:var(--color-surface);padding:4px 8px;border-radius:4px;width:fit-content}.total-price[_ngcontent-%COMP%]{color:var(--color-primary);font-weight:600}.delivery-info[_ngcontent-%COMP%]{margin-top:4px;padding-top:4px;border-top:1px dashed var(--color-border);font-size:.85rem;color:var(--color-primary);display:grid;grid-template-columns:auto auto 1fr;gap:8px}.btn-deliver[_ngcontent-%COMP%]{background:var(--color-success);color:#fff;border:none;padding:6px 12px;border-radius:var(--radius-md);font-weight:500;font-size:.9rem;cursor:pointer;transition:all var(--transition-base);white-space:nowrap;height:fit-content}.btn-deliver[_ngcontent-%COMP%]:hover{background:#059669;transform:translateY(-1px)}@media (max-width: 640px){.pending-item[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.delivery-info[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:2px}.btn-deliver[_ngcontent-%COMP%]{width:100%;margin-top:8px}}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.modal-content[_ngcontent-%COMP%]{background-color:var(--color-surface);padding:2rem;border-radius:12px;width:90%;max-width:500px;box-shadow:0 10px 25px #0003;animation:_ngcontent-%COMP%_slideIn .3s ease-out;color:var(--color-text)}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translateY(-20px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;border-bottom:1px solid var(--color-border);padding-bottom:1rem}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--color-text)}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:var(--color-text-muted)}.modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.modal-footer[_ngcontent-%COMP%]{margin-top:2rem;display:flex;justify-content:flex-end;gap:1rem;padding-top:1rem;border-top:1px solid var(--color-border)}.btn-cancel[_ngcontent-%COMP%]{padding:.5rem 1rem;border:1px solid var(--color-border);background-color:var(--color-surface);color:var(--color-text);border-radius:6px;cursor:pointer;font-weight:500;transition:background-color .2s}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:var(--color-bg)}.btn-save[_ngcontent-%COMP%]{padding:.5rem 1rem;background-color:#4caf50;color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:500}.btn-save[_ngcontent-%COMP%]:hover{background-color:#45a049}.pending-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;margin-left:1rem}.btn-edit[_ngcontent-%COMP%]{padding:.5rem 1rem;background-color:#2196f3;color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:500;transition:background-color .2s}.btn-edit[_ngcontent-%COMP%]:hover{background-color:#1976d2}.customer-details[_ngcontent-%COMP%]{margin-top:4px;padding:4px 8px;background:linear-gradient(135deg,#8b5cf61a,#6366f11a);border-left:3px solid #8b5cf6;border-radius:4px;font-size:.85rem}.customer-header[_ngcontent-%COMP%]{font-weight:600;color:#8b5cf6;margin-bottom:2px;font-size:.85rem;display:inline-block;margin-right:8px}.customer-row[_ngcontent-%COMP%]{display:inline-flex;gap:4px;margin-right:12px;font-size:.85rem}.customer-label[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text-muted);min-width:auto}.customer-value[_ngcontent-%COMP%]{color:var(--color-text);font-weight:400}.radio-group[_ngcontent-%COMP%]{display:flex;background:var(--color-bg);padding:4px;border-radius:8px;border:1px solid var(--color-border);gap:4px}.radio-label[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;padding:8px 12px;cursor:pointer;font-size:.9rem;font-weight:500;color:var(--color-text-muted);border-radius:6px;transition:all .2s ease;text-align:center;-webkit-user-select:none;user-select:none}.radio-label[_ngcontent-%COMP%]:hover{background:var(--color-surface);color:var(--color-text)}.radio-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.radio-label[_ngcontent-%COMP%]:has(input:checked){background:var(--color-primary);color:#fff;box-shadow:0 2px 4px #0000001a}.discount-value[_ngcontent-%COMP%]{color:var(--color-danger);font-weight:600}.total-row[_ngcontent-%COMP%]{border-top:1px solid var(--color-border);margin-top:var(--space-sm);padding-top:var(--space-md)}.status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:.75rem;font-weight:600;text-transform:uppercase}.status-badge.warning[_ngcontent-%COMP%]{background:#fef3c7;color:#d97706;border:1px solid #fcd34d}.btn-confirm[_ngcontent-%COMP%]{padding:.5rem 1rem;background-color:#f59e0b;color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:500;transition:all .2s;white-space:nowrap}.btn-delete[_ngcontent-%COMP%]{padding:.5rem 1rem;background-color:#ef4444;color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:500;transition:all .2s;white-space:nowrap}.btn-delete[_ngcontent-%COMP%]:hover{background-color:#dc2626;transform:translateY(-1px)}.pos-layout[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg)}.selection-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md);padding-bottom:var(--space-md);border-bottom:1px dashed var(--color-border)}.flex-grow[_ngcontent-%COMP%]{flex:1}.align-end[_ngcontent-%COMP%]{align-items:flex-end}.small-width[_ngcontent-%COMP%]{width:80px}.discount-row[_ngcontent-%COMP%]{display:flex;gap:4px}.small-input[_ngcontent-%COMP%]{width:80px;padding:8px;border:1px solid var(--color-border);border-radius:6px}.small-select[_ngcontent-%COMP%]{padding:8px;border:1px solid var(--color-border);border-radius:6px;background:var(--color-surface)}.btn-add[_ngcontent-%COMP%]{padding:10px 20px;background:var(--color-primary);color:#fff;border:none;border-radius:6px;font-weight:600;cursor:pointer;transition:all .2s;height:42px}.btn-add[_ngcontent-%COMP%]:disabled{background:var(--color-border);cursor:not-allowed}.btn-add[_ngcontent-%COMP%]:not(:disabled):hover{filter:brightness(1.1);transform:translateY(-1px)}.cart-container[_ngcontent-%COMP%]{overflow-x:auto;border:1px solid var(--color-border);border-radius:8px;background:var(--color-surface)}.cart-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:.9rem}.cart-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:var(--color-bg);padding:10px;text-align:left;font-weight:600;color:var(--color-text-muted);border-bottom:1px solid var(--color-border)}.cart-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;border-bottom:1px solid var(--color-border);vertical-align:middle}.cart-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.cart-table[_ngcontent-%COMP%]   th.text-right[_ngcontent-%COMP%], .cart-table[_ngcontent-%COMP%]   td.text-right[_ngcontent-%COMP%]{text-align:right}.cart-table[_ngcontent-%COMP%]   th.text-center[_ngcontent-%COMP%], .cart-table[_ngcontent-%COMP%]   td.text-center[_ngcontent-%COMP%]{text-align:center}.font-bold[_ngcontent-%COMP%]{font-weight:600}.cart-prod-name[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text)}.cart-prod-disc[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-danger)}.btn-remove-sm[_ngcontent-%COMP%]{background:none;border:none;color:var(--color-text-muted);cursor:pointer;padding:4px 8px;border-radius:4px}.btn-remove-sm[_ngcontent-%COMP%]:hover{background:#fee;color:var(--color-danger)}.empty-cart-cell[_ngcontent-%COMP%]{padding:2rem;text-align:center;color:var(--color-text-muted);font-style:italic}.checkout-panel[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--space-lg);margin-top:var(--space-md)}@media (max-width: 768px){.checkout-panel[_ngcontent-%COMP%]{grid-template-columns:1fr}}.delivery-card[_ngcontent-%COMP%], .payment-card[_ngcontent-%COMP%]{background:var(--color-surface);border:1px solid var(--color-border);border-radius:8px;padding:var(--space-md);display:flex;flex-direction:column;gap:var(--space-md)}.delivery-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .payment-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:1rem;color:var(--color-primary);border-bottom:1px solid var(--color-border);padding-bottom:8px}.cash-group[_ngcontent-%COMP%]{margin:var(--space-sm) 0}.cash-input[_ngcontent-%COMP%]{font-size:1.2rem;padding:10px;border:2px solid var(--color-border);border-radius:6px;width:100%}.cash-input[_ngcontent-%COMP%]:focus{border-color:var(--color-success);outline:none}.total-line[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:1.2rem;font-weight:700;color:var(--color-text)}.change-line[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:1.1rem;font-weight:600;color:var(--color-success);padding-top:var(--space-sm);border-top:1px dashed var(--color-border)}.change-line.negative[_ngcontent-%COMP%]{color:var(--color-danger)}.btn-checkout[_ngcontent-%COMP%]{margin-top:auto;width:100%;padding:12px;background:var(--color-success);color:#fff;border:none;border-radius:6px;font-size:1.1rem;font-weight:700;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center;gap:8px}.btn-checkout[_ngcontent-%COMP%]:not(:disabled):hover{background:#059669;transform:translateY(-2px);box-shadow:0 4px 6px #0000001a}.btn-checkout[_ngcontent-%COMP%]:disabled{background:var(--color-border);cursor:not-allowed;opacity:.7}.pagination[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;gap:var(--space-md);margin-top:var(--space-lg);padding-top:var(--space-lg);border-top:1px solid var(--color-border)}.pagination-size[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);font-size:.875rem;color:var(--color-text)}.page-size-select[_ngcontent-%COMP%]{padding:4px 8px;border:1px solid var(--color-border);border-radius:6px;background:var(--color-surface)}.pagination-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm)}.pagination-pages[_ngcontent-%COMP%]{display:flex;gap:4px}.pagination-btn[_ngcontent-%COMP%], .pagination-page[_ngcontent-%COMP%]{padding:4px 10px;border:1px solid var(--color-border);border-radius:4px;background:var(--color-surface);cursor:pointer;min-width:32px;height:32px;display:flex;align-items:center;justify-content:center}.pagination-page.active[_ngcontent-%COMP%], .pagination-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--color-primary);color:#fff;border-color:var(--color-primary)}.pagination-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-deliver[_ngcontent-%COMP%], .btn-edit[_ngcontent-%COMP%], .btn-confirm[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%], .btn-add[_ngcontent-%COMP%], .btn-remove-sm[_ngcontent-%COMP%], .btn-checkout[_ngcontent-%COMP%], .btn-cancel[_ngcontent-%COMP%], .btn-save[_ngcontent-%COMP%], .btn-clear[_ngcontent-%COMP%], .close-btn[_ngcontent-%COMP%], .pagination-btn[_ngcontent-%COMP%], .pagination-page[_ngcontent-%COMP%]{-webkit-tap-highlight-color:transparent;touch-action:manipulation;user-select:none;-webkit-user-select:none;cursor:pointer;position:relative;z-index:1}.btn-deliver[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], .btn-edit[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], .btn-confirm[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], .btn-add[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], .btn-checkout[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], .btn-save[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{pointer-events:none}.filter-row[_ngcontent-%COMP%]{display:flex;gap:var(--space-md);margin-bottom:var(--space-md);flex-wrap:wrap;align-items:flex-end}.filter-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm)}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text);font-size:.9rem;white-space:nowrap}.filter-group[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%], .filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:6px 10px;border:1px solid var(--color-border);border-radius:6px;background:var(--color-surface);color:var(--color-text);font-size:.9rem;cursor:pointer;-webkit-tap-highlight-color:transparent;touch-action:manipulation}.btn-clear[_ngcontent-%COMP%]{background:none;border:none;padding:4px 8px;font-size:1.2rem;cursor:pointer;transition:all .2s;-webkit-tap-highlight-color:transparent;touch-action:manipulation;line-height:1}.btn-clear[_ngcontent-%COMP%]:hover{transform:scale(1.2);opacity:.7}.status-select[_ngcontent-%COMP%]{padding:6px 10px;border:1px solid var(--color-border);border-radius:6px;background:var(--color-surface);color:var(--color-text);cursor:pointer;-webkit-tap-highlight-color:transparent;touch-action:manipulation}.modal-overlay[_ngcontent-%COMP%]{-webkit-tap-highlight-color:transparent;touch-action:manipulation}.modal-content[_ngcontent-%COMP%]{position:relative;z-index:1001}.radio-label[_ngcontent-%COMP%]{-webkit-tap-highlight-color:transparent;touch-action:manipulation;-webkit-user-select:none;user-select:none}"]})}}return a})();export{$e as a};
