import{d as T,g as R}from"./chunk-KEF5EMLD.js";import{a as j}from"./chunk-QHVUOWI6.js";import{a as z,b as N,e as L,n as F}from"./chunk-IQNO2F6Q.js";import"./chunk-HTVRMZMJ.js";import{Aa as s,Ba as v,Mb as V,Nb as D,Ob as B,Pa as p,Ra as c,Sa as h,Sb as G,Ta as _,Va as i,Wa as n,Xa as w,Ya as C,Za as u,_a as l,aa as M,db as a,eb as x,fb as b,ia as g,ib as P,ja as f,jb as k,kb as O,mb as S,nb as E,ob as I}from"./chunk-MNIEKAC2.js";function A(r,m){if(r&1&&(i(0,"div",7)(1,"span",8),a(2,"Credits"),n(),i(3,"span",9),a(4),n()()),r&2){let e=l();s(4),x(e.credits)}}function K(r,m){if(r&1&&(i(0,"div",16),a(1),n()),r&2){let e=l(2);s(),b(" ",e.verificationError," ")}}function W(r,m){if(r&1){let e=C();i(0,"div",10)(1,"div",11)(2,"h2"),a(3,"\u{1F512} Customer Verification"),n(),i(4,"p"),a(5,"Only registered customers can play."),n(),i(6,"div",12)(7,"label"),a(8,"Enter your Full Name"),n(),i(9,"input",13),O("ngModelChange",function(o){g(e);let d=l();return k(d.verificationName,o)||(d.verificationName=o),f(o)}),u("keyup.enter",function(){g(e);let o=l();return f(o.verifyCustomer())}),n()(),p(10,K,2,1,"div",14),i(11,"button",15),u("click",function(){g(e);let o=l();return f(o.verifyCustomer())}),a(12),n()()()}if(r&2){let e=l();s(9),P("ngModel",e.verificationName),c("disabled",e.isLoadingCustomers),s(),c("ngIf",e.verificationError),s(),c("disabled",e.isLoadingCustomers),s(),b(" ",e.isLoadingCustomers?"Checking...":"Verify & Play"," ")}}function H(r,m){if(r&1&&(i(0,"div",30),a(1),n()),r&2){let e=l(2);s(),b(" ",e.dailyBonusMessage," ")}}function $(r,m){if(r&1&&w(0,"div",31),r&2){let e=m.$implicit,t=l(2);h("background-color",t.getColorHex(e))("color",e==="white"||e==="yellow"?"black":"white")}}function J(r,m){if(r&1&&(i(0,"span",37),a(1),n()),r&2){let e=l().$implicit,t=l(2);s(),x(t.bets[e])}}function U(r,m){if(r&1){let e=C();i(0,"div",32),u("click",function(){let o=g(e).$implicit,d=l(2);return f(d.placeBet(o,10))}),i(1,"div",33)(2,"span",34),a(3),E(4,"titlecase"),n(),p(5,J,2,1,"span",35),n(),i(6,"div",36),a(7,"Tap to Bet +10"),n()()}if(r&2){let e=m.$implicit,t=l(2);h("background-color",t.getColorHex(e))("border-color",t.getColorHex(e)),s(),h("color",e==="white"||e==="yellow"?"black":"white"),s(2),x(I(4,8,e)),s(2),c("ngIf",t.bets[e]>0)}}function q(r,m){if(r&1){let e=C();i(0,"div"),p(1,H,2,1,"div",17),i(2,"div",18)(3,"div",19),p(4,$,1,4,"div",20),n(),i(5,"div",21),a(6),n(),i(7,"div",22),p(8,U,8,10,"div",23),n(),i(9,"div",24)(10,"div",25),a(11," Total Bet: "),i(12,"strong"),a(13),n()(),i(14,"div",26)(15,"button",27),u("click",function(){g(e);let o=l();return f(o.clearBets())}),a(16,"Clear Bets"),n(),i(17,"button",28),u("click",function(){g(e);let o=l();return f(o.rollDice())}),a(18,"ROLL!"),n()()()(),i(19,"div",29)(20,"h3"),a(21,"How to Play"),n(),i(22,"p"),a(23,"1. You get "),i(24,"strong"),a(25,"100 Free Credits"),n(),a(26," every day!"),n(),i(27,"p"),a(28,"2. Tap a color to bet 10 credits."),n(),i(29,"p"),a(30,"3. If your color appears on the dice:"),n(),i(31,"ul")(32,"li"),a(33,"1 Match = Win 1x (+Stake)"),n(),i(34,"li"),a(35,"2 Matches = Win 2x (+Stake)"),n(),i(36,"li"),a(37,"3 Matches = Win 3x (+Stake)"),n()()()()}if(r&2){let e=l();s(),c("ngIf",e.dailyBonusMessage),s(2),_("shaking",e.isRolling),s(),c("ngForOf",e.result),s(),_("win",e.message.includes("won")),s(),b(" ",e.message||(e.isRolling?"Rolling...":"Place your bets!")," "),s(),_("disabled",e.isRolling),s(),c("ngForOf",e.colors),s(5),x(e.totalBet),s(2),c("disabled",e.isRolling||e.totalBet===0),s(2),c("disabled",e.isRolling||e.totalBet===0)}}var re=(()=>{class r{get storageKeyCredits(){return`color_game_credits_${this.sanitizedName}`}get storageKeyLastDaily(){return`color_game_last_daily_${this.sanitizedName}`}get sanitizedName(){return(this.verificationName||"guest").trim().toLowerCase().replace(/\s+/g,"_")}constructor(e,t){this.router=e,this.customerService=t,this.credits=0,this.bets={red:0,green:0,blue:0,yellow:0,white:0,pink:0},this.colors=["red","green","blue","yellow","white","pink"],this.result=["white","white","white"],this.isRolling=!1,this.message="",this.dailyBonusMessage="",this.isVerified=!1,this.verificationName="",this.verificationError="",this.isLoadingCustomers=!1,this.currentCustomerId="",this.currentCustomer=null}goBack(){this.router.navigate(["/login"])}ngOnInit(){this.checkAutoVerification()}checkAutoVerification(){let e=localStorage.getItem("chatCustomerInfo");if(e)try{let t=JSON.parse(e);t&&t.name&&(this.verificationName=t.name,this.verifyCustomer())}catch(t){console.error("Error parsing auto-verification info",t)}}verifyCustomer(){if(!this.verificationName.trim()){this.verificationError="Please enter your name.";return}this.isLoadingCustomers=!0,this.verificationError="";let e=this.verificationName.trim();this.customerService.getCustomerByName(e).subscribe({next:t=>{this.isLoadingCustomers=!1;let o=t.find(d=>d.name.toLowerCase()===e.toLowerCase());o?(this.isVerified=!0,this.currentCustomerId=o.id,this.currentCustomer=o,this.verificationError="",this.loadGameData(),this.checkDailyBonus()):(this.isVerified=!1,this.verificationError="Access Denied: Customer not found. Please check your spelling.")},error:t=>{console.error("Verification failed",t),this.isLoadingCustomers=!1,this.verificationError="Verification service unavailable."}})}loadGameData(){if(this.isVerified)if(this.currentCustomer&&this.currentCustomer.credits!==void 0&&this.currentCustomer.credits!==null)this.credits=this.currentCustomer.credits,localStorage.setItem(this.storageKeyCredits,this.credits.toString());else{let e=localStorage.getItem(this.storageKeyCredits);this.credits=e?parseInt(e,10):0}}saveGameData(){this.isVerified&&(localStorage.setItem(this.storageKeyCredits,this.credits.toString()),this.currentCustomerId&&this.customerService.updateCustomer(this.currentCustomerId,{credits:this.credits}))}checkDailyBonus(){if(!this.isVerified)return;let e=localStorage.getItem(this.storageKeyLastDaily),t=new Date().toDateString();e!==t&&(this.credits+=100,localStorage.setItem(this.storageKeyLastDaily,t),this.saveGameData(),this.dailyBonusMessage="\u{1F389} You received 100 Daily Free Credits!",setTimeout(()=>this.dailyBonusMessage="",5e3))}placeBet(e,t){this.isRolling||(this.credits>=t?(this.credits-=t,this.bets[e]+=t,this.saveGameData()):(this.message="Not enough credits!",setTimeout(()=>this.message="",2e3)))}clearBets(){if(this.isRolling)return;let e=0;this.colors.forEach(t=>{e+=this.bets[t],this.bets[t]=0}),this.credits+=e,this.saveGameData()}get totalBet(){return Object.values(this.bets).reduce((e,t)=>e+t,0)}rollDice(){if(this.totalBet===0){this.message="Place a bet first!",setTimeout(()=>this.message="",2e3);return}if(this.isRolling)return;this.isRolling=!0,this.message="";let e=0,t=20,o=setInterval(()=>{this.result=[this.getRandomColor(),this.getRandomColor(),this.getRandomColor()],e++,e>=t&&(clearInterval(o),this.finalizeRoll())},100)}getRandomColor(){let e=new Uint32Array(1);window.crypto.getRandomValues(e);let t=e[0]%this.colors.length;return this.colors[t]}finalizeRoll(){this.isRolling=!1;let e=0,t={red:0,green:0,blue:0,yellow:0,white:0,pink:0};this.result.forEach(o=>t[o]++),this.colors.forEach(o=>{let d=this.bets[o],y=t[o];if(d>0&&y>0){let Y=d*y+d;e+=Y}}),e>0?(this.credits+=e,this.message=`You won ${e} credits! \u{1F389}`):this.message="Better luck next time!",this.colors.forEach(o=>this.bets[o]=0),this.saveGameData()}getColorHex(e){return{red:"#ef4444",green:"#22c55e",blue:"#3b82f6",yellow:"#eab308",white:"#ffffff",pink:"#ec4899"}[e]}static{this.\u0275fac=function(t){return new(t||r)(v(T),v(j))}}static{this.\u0275cmp=M({type:r,selectors:[["app-color-game"]],standalone:!0,features:[S],decls:10,vars:3,consts:[[1,"game-container"],[1,"header"],[2,"display","flex","align-items","center","gap","10px"],["title","Back to Login",1,"btn","img-btn",3,"click"],["class","credits-box",4,"ngIf"],["class","verification-container",4,"ngIf"],[4,"ngIf"],[1,"credits-box"],[1,"label"],[1,"value"],[1,"verification-container"],[1,"verification-card"],[1,"form-group"],["type","text","placeholder","e.g. John Doe",1,"verify-input",3,"ngModelChange","keyup.enter","ngModel","disabled"],["class","error-msg",4,"ngIf"],[1,"btn-verify",3,"click","disabled"],[1,"error-msg"],["class","daily-bonus-alert",4,"ngIf"],[1,"game-area"],[1,"dice-container"],["class","die",3,"background-color","color",4,"ngFor","ngForOf"],[1,"message-area"],[1,"betting-board"],["class","bet-tile",3,"background-color","border-color","click",4,"ngFor","ngForOf"],[1,"controls"],[1,"bet-summary"],[1,"buttons"],[1,"btn","btn-clear",3,"click","disabled"],[1,"btn","btn-roll",3,"click","disabled"],[1,"instructions"],[1,"daily-bonus-alert"],[1,"die"],[1,"bet-tile",3,"click"],[1,"bet-overlay"],[1,"bet-name"],["class","bet-amount",4,"ngIf"],[1,"click-hint"],[1,"bet-amount"]],template:function(t,o){t&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),u("click",function(){return o.goBack()}),a(4,"\u21A9\uFE0F"),n(),i(5,"h1"),a(6,"\u{1F3B2} Color Game"),n()(),p(7,A,5,1,"div",4),n(),p(8,W,13,5,"div",5)(9,q,38,13,"div",6),n()),t&2&&(s(7),c("ngIf",o.isVerified),s(),c("ngIf",!o.isVerified),s(),c("ngIf",o.isVerified))},dependencies:[G,V,D,B,F,z,N,L,R],styles:[".game-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;min-height:100vh;background:linear-gradient(135deg,#1e293b,#0f172a);color:#fff;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;box-sizing:border-box}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding-bottom:20px;border-bottom:1px solid rgba(255,255,255,.1)}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.8rem;background:linear-gradient(to right,#fbbf24,#f59e0b);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}.credits-box[_ngcontent-%COMP%]{background:#ffffff1a;padding:10px 20px;border-radius:12px;display:flex;flex-direction:column;align-items:flex-end;border:1px solid rgba(255,255,255,.1)}.credits-box[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.8rem;color:#94a3b8;text-transform:uppercase;letter-spacing:1px}.credits-box[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#fbbf24}.daily-bonus-alert[_ngcontent-%COMP%]{background:linear-gradient(to right,#10b981,#059669);padding:15px;border-radius:12px;text-align:center;margin-bottom:20px;font-weight:700;animation:_ngcontent-%COMP%_slideDown .5s ease-out;box-shadow:0 4px 6px -1px #0000001a}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.game-area[_ngcontent-%COMP%]{background:#1e293b80;border-radius:20px;padding:20px;border:1px solid rgba(255,255,255,.05);box-shadow:0 10px 15px -3px #0000001a}.dice-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:20px;margin-bottom:30px;padding:20px;background:#0003;border-radius:16px;min-height:100px;align-items:center}.dice-container.shaking[_ngcontent-%COMP%]   .die[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shake .1s infinite}@keyframes _ngcontent-%COMP%_shake{0%{transform:translate(1px,1px) rotate(0)}10%{transform:translate(-1px,-2px) rotate(-1deg)}20%{transform:translate(-3px) rotate(1deg)}30%{transform:translate(3px,2px) rotate(0)}40%{transform:translate(1px,-1px) rotate(1deg)}50%{transform:translate(-1px,2px) rotate(-1deg)}60%{transform:translate(-3px,1px) rotate(0)}70%{transform:translate(3px,1px) rotate(-1deg)}80%{transform:translate(-1px,-1px) rotate(1deg)}90%{transform:translate(1px,2px) rotate(0)}to{transform:translate(1px,-2px) rotate(-1deg)}}.die[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:16px;box-shadow:inset 0 0 20px #0003,0 5px 10px #0000004d;transition:background-color .2s;display:flex;align-items:center;justify-content:center;font-size:2rem}.message-area[_ngcontent-%COMP%]{text-align:center;font-size:1.2rem;margin-bottom:20px;min-height:30px;color:#94a3b8;font-weight:500}.message-area.win[_ngcontent-%COMP%]{color:#fbbf24;font-weight:700;animation:_ngcontent-%COMP%_popIn .3s cubic-bezier(.175,.885,.32,1.275)}@keyframes _ngcontent-%COMP%_popIn{0%{transform:scale(.8);opacity:0}to{transform:scale(1);opacity:1}}.betting-board[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:15px;margin-bottom:30px;transition:opacity .3s}.betting-board.disabled[_ngcontent-%COMP%]{opacity:.6;pointer-events:none}.bet-tile[_ngcontent-%COMP%]{aspect-ratio:1;border-radius:16px;position:relative;cursor:pointer;transition:transform .1s,filter .2s;border:4px solid transparent;box-shadow:0 4px 6px -1px #0000001a;overflow:hidden}.bet-tile[_ngcontent-%COMP%]:active{transform:scale(.95)}.bet-tile[_ngcontent-%COMP%]:hover{filter:brightness(1.1)}.bet-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;background:#0000001a;text-shadow:0 2px 4px rgba(0,0,0,.5);font-weight:700}.bet-name[_ngcontent-%COMP%]{font-size:1rem;text-transform:uppercase;margin-bottom:5px}.bet-amount[_ngcontent-%COMP%]{font-size:1.5rem;background:#0009;padding:2px 10px;border-radius:20px;color:#fff}.click-hint[_ngcontent-%COMP%]{position:absolute;bottom:5px;left:0;width:100%;text-align:center;font-size:.7rem;opacity:.7;pointer-events:none}.controls[_ngcontent-%COMP%]{background:#0003;padding:20px;border-radius:16px;display:flex;flex-direction:column;gap:15px}.bet-summary[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:1.1rem;padding:0 10px;color:#cbd5e1}.buttons[_ngcontent-%COMP%]{display:flex;gap:15px}.btn[_ngcontent-%COMP%]{flex:1;padding:15px;border:none;border-radius:12px;font-size:1.1rem;font-weight:700;cursor:pointer;transition:transform .1s,filter .2s;text-transform:uppercase;letter-spacing:1px}.btn[_ngcontent-%COMP%]:active:not(:disabled){transform:scale(.98)}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-clear[_ngcontent-%COMP%]{background:#475569;color:#fff}.btn-roll[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff;box-shadow:0 4px 6px -1px #f59e0b4d}.btn-roll[_ngcontent-%COMP%]:hover:not(:disabled){filter:brightness(1.1)}.instructions[_ngcontent-%COMP%]{margin-top:40px;padding:20px;background:#ffffff0d;border-radius:16px;color:#94a3b8}.instructions[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;margin-top:0}.instructions[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:20px}.instructions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:5px}@media (max-width: 480px){.dice-container[_ngcontent-%COMP%]{gap:10px}.die[_ngcontent-%COMP%]{width:60px;height:60px}}.img-btn[_ngcontent-%COMP%]{background:#ffffff1a;padding:10px;border-radius:50%;border:1px solid rgba(255,255,255,.2);cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center;width:40px;height:40px;font-size:1.2rem;line-height:normal}.img-btn[_ngcontent-%COMP%]:hover{background:#fff3;transform:scale(1.1)}.verification-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:40px 20px;animation:_ngcontent-%COMP%_fadeIn .5s ease-out}.verification-card[_ngcontent-%COMP%]{background:#1e293bcc;border:1px solid rgba(255,255,255,.1);border-radius:20px;padding:30px;max-width:400px;width:100%;text-align:center;box-shadow:0 10px 25px -5px #0000004d;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.verification-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fbbf24;margin-top:0;margin-bottom:10px}.verification-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#94a3b8;margin-bottom:25px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px;text-align:left}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:#e2e8f0;margin-bottom:8px;font-size:.9rem}.verify-input[_ngcontent-%COMP%]{width:100%;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,.2);background:#0003;color:#fff;font-size:1rem;box-sizing:border-box;transition:all .2s}.verify-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#fbbf24;background:#0000004d}.btn-verify[_ngcontent-%COMP%]{width:100%;padding:12px;border:none;border-radius:10px;background:linear-gradient(135deg,#fbbf24,#d97706);color:#fff;font-weight:700;font-size:1rem;cursor:pointer;transition:transform .1s,filter .2s}.btn-verify[_ngcontent-%COMP%]:hover:not(:disabled){filter:brightness(1.1);transform:translateY(-1px)}.btn-verify[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.btn-verify[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed;background:#64748b}.error-msg[_ngcontent-%COMP%]{color:#ef4444;background:#ef44441a;padding:10px;border-radius:8px;margin-bottom:15px;font-size:.9rem;display:flex;align-items:center;justify-content:center;gap:8px}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}"]})}}return r})();export{re as ColorGameComponent};
