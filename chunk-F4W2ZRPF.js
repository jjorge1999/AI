import{a as ee}from"./chunk-KSHKVDE3.js";import{a as ne}from"./chunk-5TFQBXGH.js";import{a as te}from"./chunk-VYKVMX3Y.js";import{a as j,b as G,e as Q,g as Y,h as U,i as H,j as J,k as K,l as X,n as Z}from"./chunk-ZPQL42FH.js";import{$a as W,Ca as f,Ea as p,Ga as I,Ia as r,Ja as i,Ka as V,La as w,Ma as h,Na as s,Sa as a,Ta as S,Ua as _,Va as F,Wa as N,X as k,Xa as y,Ya as x,Za as C,a as T,ab as M,b as E,cb as P,da as u,db as A,ea as g,sa as d,ta as O,tb as B,ub as R,wb as q,xb as z,yb as $,zb as L}from"./chunk-K7VUYT6X.js";function re(l,m){if(l&1&&(r(0,"option",43),a(1),i()),l&2){let e=m.$implicit;p("value",e.id),d(),_(" ",e.name," ")}}function oe(l,m){if(l&1&&(r(0,"option",43),a(1),M(2,"number"),i()),l&2){let e=m.$implicit;p("value",e.id),d(),N(" ",e.name," - $",P(2,4,e.price,"1.2-2")," (Stock: ",e.quantity,") ")}}function ae(l,m){if(l&1&&(r(0,"div",44),a(1),i()),l&2){let e=s();d(),_("\u26A0\uFE0F ",e.errorMessage,"")}}function le(l,m){if(l&1&&(r(0,"div",49),a(1),i()),l&2){let e=s().$implicit;d(),_(" Disc: -",e.discountType==="percent"?e.discount+"%":"$"+e.discount," ")}}function de(l,m){if(l&1){let e=w();r(0,"tr")(1,"td")(2,"div",45),a(3),i(),f(4,le,2,1,"div",46),i(),r(5,"td",25),a(6),M(7,"number"),i(),r(8,"td",26),a(9),i(),r(10,"td",47),a(11),M(12,"number"),i(),r(13,"td",26)(14,"button",48),h("click",function(){let t=u(e).index,n=s();return g(n.removeFromCart(t))}),a(15,"\u2715"),i()()()}if(l&2){let e=m.$implicit;d(3),S(e.product.name),d(),p("ngIf",e.discount>0),d(2),_("$",P(7,5,e.product.price,"1.2-2"),""),d(3),S(e.quantity),d(2),_("$",P(12,8,e.total,"1.2-2"),"")}}function ce(l,m){l&1&&(r(0,"tr")(1,"td",50),a(2,"Cart is empty. Add items above."),i()())}function se(l,m){if(l&1){let e=w();r(0,"div",51)(1,"div",52)(2,"h4"),a(3,"\u{1F69A} Delivery Options"),i(),r(4,"div",3)(5,"div",4)(6,"label"),a(7,"Date"),i(),r(8,"input",53),C("ngModelChange",function(t){u(e);let n=s();return x(n.deliveryDate,t)||(n.deliveryDate=t),g(t)}),i()(),r(9,"div",4)(10,"label"),a(11,"Time"),i(),r(12,"input",54),C("ngModelChange",function(t){u(e);let n=s();return x(n.deliveryTime,t)||(n.deliveryTime=t),g(t)}),i()()(),r(13,"div",4)(14,"textarea",55),C("ngModelChange",function(t){u(e);let n=s();return x(n.deliveryNotes,t)||(n.deliveryNotes=t),g(t)}),i()()(),r(15,"div",56)(16,"h4"),a(17,"\u{1F4B0} Payment"),i(),r(18,"div",57)(19,"span"),a(20,"Total Due:"),i(),r(21,"span"),a(22),M(23,"number"),i()(),r(24,"div",58)(25,"label"),a(26,"Cash Received ($)"),i(),r(27,"input",59),C("ngModelChange",function(t){u(e);let n=s();return x(n.cashReceived,t)||(n.cashReceived=t),g(t)}),i()(),r(28,"div",60)(29,"span"),a(30,"Change:"),i(),r(31,"span"),a(32),M(33,"number"),i()(),r(34,"button",61),h("click",function(){u(e);let t=s();return g(t.checkout())}),a(35," Complete Order "),i()()()}if(l&2){let e=s();d(8),y("ngModel",e.deliveryDate),p("min",e.minDate),d(4),y("ngModel",e.deliveryTime),d(2),y("ngModel",e.deliveryNotes),d(8),_("$",P(23,10,e.total,"1.2-2"),""),d(5),y("ngModel",e.cashReceived),d(),I("negative",e.change<0),d(4),_("$",P(33,13,e.change,"1.2-2"),""),d(2),p("disabled",!e.isValid())}}function pe(l,m){if(l&1){let e=w();r(0,"button",62),h("click",function(){u(e);let t=s();return g(t.deliveryFilterDate="")}),a(1,"\u274C"),i()}}function me(l,m){if(l&1&&(r(0,"span",81),a(1),i()),l&2){let e=s().$implicit;d(),S(e.sales[0].productName)}}function ue(l,m){if(l&1&&(r(0,"span",81),a(1),M(2,"slice"),i()),l&2){let e=s().$implicit;d(),F("Order #",A(2,2,e.orderId,4,12),"... (",e.sales.length," items)")}}function ge(l,m){l&1&&(r(0,"span",82),a(1,"\u26A0\uFE0F RESERVATION"),i())}function ve(l,m){l&1&&(r(0,"span",83),a(1,"\u2705 CONFIRMED"),i())}function fe(l,m){if(l&1&&(r(0,"div",86),a(1),r(2,"span",87),a(3),i()()),l&2){let e=m.$implicit;d(),_(" \u2022 ",e.productName," "),d(2),_("(x",e.quantitySold,")")}}function _e(l,m){if(l&1&&(r(0,"div",84),f(1,fe,4,2,"div",85),i()),l&2){let e=s().$implicit;d(),p("ngForOf",e.sales)}}function he(l,m){if(l&1&&(r(0,"span"),a(1),i()),l&2){let e=s().$implicit;d(),_("Qty: ",e.quantityTotal,"")}}function ye(l,m){if(l&1&&(r(0,"span"),a(1),i()),l&2){let e=s().$implicit;d(),_("Total Qty: ",e.quantityTotal,"")}}function xe(l,m){if(l&1&&(r(0,"div",88)(1,"div",89),a(2,"\u{1F464} Customer Details"),i(),r(3,"div",90)(4,"span",91),a(5,"Name:"),i(),r(6,"span",92),a(7),i()(),r(8,"div",90)(9,"span",91),a(10,"Phone:"),i(),r(11,"span",92),a(12),i()(),r(13,"div",90)(14,"span",91),a(15,"Address:"),i(),r(16,"span",92),a(17),i()()()),l&2){let e=s().$implicit;d(7),S(e.customer.name),d(5),S(e.customer.phoneNumber),d(5),S(e.customer.deliveryAddress)}}function Ce(l,m){if(l&1&&(r(0,"span"),a(1),i()),l&2){let e=s(2).$implicit;d(),_("\u{1F4DD} ",e.deliveryNotes,"")}}function be(l,m){if(l&1&&(r(0,"div",93)(1,"span"),a(2),M(3,"date"),i(),r(4,"span"),a(5),M(6,"date"),i(),f(7,Ce,2,1,"span",28),i()),l&2){let e=s().$implicit;d(2),_("\u{1F4C5} Due: ",P(3,3,e.deliveryDate,"mediumDate"),""),d(3),_("\u{1F4C5} Time: ",P(6,6,e.deliveryDate,"shortTime"),""),d(2),p("ngIf",e.deliveryNotes)}}function Me(l,m){if(l&1){let e=w();r(0,"button",94),h("click",function(){u(e);let t=s().$implicit,n=s();return g(n.confirmGroupReservation(t.sales))}),a(1," \u{1F4DD} Confirm "),i()}}function Pe(l,m){if(l&1){let e=w();r(0,"button",95),h("click",function(){u(e);let t=s().$implicit,n=s();return g(n.markGroupAsDelivered(t.sales))}),a(1," \u{1F69A} Mark Delivered "),i()}}function we(l,m){if(l&1){let e=w();r(0,"div",63)(1,"div",64)(2,"div",65)(3,"div",66),f(4,me,2,1,"span",67)(5,ue,3,6,"span",67),i(),f(6,ge,2,0,"span",68)(7,ve,2,0,"span",69),r(8,"span",70),a(9),M(10,"date"),i()(),f(11,_e,2,1,"div",71),r(12,"div",72),f(13,he,2,1,"span",28)(14,ye,2,1,"span",28),r(15,"span",73),a(16),M(17,"number"),i()(),f(18,xe,18,3,"div",74)(19,be,8,9,"div",75),i(),r(20,"div",76)(21,"button",77),h("click",function(){let t=u(e).$implicit,n=s();return g(n.openEditModal(t.sales[0]))}),a(22,"\u270F\uFE0F Edit"),i(),f(23,Me,2,0,"button",78),r(24,"button",79),h("click",function(){let t=u(e).$implicit,n=s();return g(n.cancelGroupOrder(t.sales))}),a(25," \u{1F5D1}\uFE0F Cancel "),i(),f(26,Pe,2,0,"button",80),i()()}if(l&2){let e=m.$implicit;d(4),p("ngIf",!e.isGroup),d(),p("ngIf",e.isGroup),d(),p("ngIf",e.status==="pending_confirmation"),d(),p("ngIf",e.status==="confirmed"),d(2),S(P(10,13,e.timestamp,"short")),d(2),p("ngIf",e.isGroup),d(2),p("ngIf",!e.isGroup),d(),p("ngIf",e.isGroup),d(2),_("Due: $",P(17,16,e.total,"1.2-2"),""),d(2),p("ngIf",e.customer),d(),p("ngIf",e.deliveryDate),d(4),p("ngIf",e.status==="pending_confirmation"),d(3),p("ngIf",e.status!=="pending_confirmation")}}function Se(l,m){if(l&1){let e=w();r(0,"div",96),h("click",function(){u(e);let t=s();return g(t.closeEditModal())}),r(1,"div",97),h("click",function(t){return u(e),g(t.stopPropagation())}),r(2,"div",98)(3,"h3"),a(4,"Edit Delivery Details"),i(),r(5,"button",99),h("click",function(){u(e);let t=s();return g(t.closeEditModal())}),a(6,"\xD7"),i()(),r(7,"div",100)(8,"div",4)(9,"label",101),a(10,"Delivery Date"),i(),r(11,"input",102),C("ngModelChange",function(t){u(e);let n=s();return x(n.editDeliveryDate,t)||(n.editDeliveryDate=t),g(t)}),i()(),r(12,"div",4)(13,"label",103),a(14,"Delivery Time"),i(),r(15,"input",104),C("ngModelChange",function(t){u(e);let n=s();return x(n.editDeliveryTime,t)||(n.editDeliveryTime=t),g(t)}),i()(),r(16,"div",4)(17,"label",105),a(18,"Notes"),i(),r(19,"textarea",106),C("ngModelChange",function(t){u(e);let n=s();return x(n.editDeliveryNotes,t)||(n.editDeliveryNotes=t),g(t)}),i()()(),r(20,"div",107)(21,"button",108),h("click",function(){u(e);let t=s();return g(t.closeEditModal())}),a(22,"Cancel"),i(),r(23,"button",109),h("click",function(){u(e);let t=s();return g(t.saveEdit())}),a(24,"Save Changes"),i()()()()}if(l&2){let e=s();d(11),y("ngModel",e.editDeliveryDate),p("min",e.minDate),d(4),y("ngModel",e.editDeliveryTime),d(4),y("ngModel",e.editDeliveryNotes)}}var Ne=(()=>{class l{constructor(e,o,t){this.inventoryService=e,this.customerService=o,this.dialogService=t,this.products=[],this.customers=[],this.pendingSales=[],this.selectedProductId="",this.selectedCustomerId="",this.quantity=1,this.cashReceived=0,this.discount=0,this.discountType="amount",this.errorMessage="",this.cart=[],this.deliveryDate="",this.deliveryTime="",this.deliveryNotes="",this.minDate="",this.deliveryFilterDate="",this.statusFilter="all",this.isEditModalOpen=!1,this.editingSale=null,this.editDeliveryDate="",this.editDeliveryTime="",this.editDeliveryNotes="",this.alarmInterval=null;let n=new Date,c=n.getFullYear(),v=String(n.getMonth()+1).padStart(2,"0"),b=String(n.getDate()).padStart(2,"0");this.minDate=`${c}-${v}-${b}`,this.deliveryDate=this.minDate}ngOnInit(){this.inventoryService.getProducts().subscribe(e=>{this.products=e.filter(o=>o.quantity>0)}),this.customerService.getCustomers().subscribe(e=>{this.customers=e}),this.inventoryService.getSales().subscribe(e=>{this.pendingSales=e.filter(o=>o.pending===!0),this.startAlarmChecks()}),this.discount=0}startAlarmChecks(){setInterval(()=>this.checkPendingDeliveryAlarms(),60*60*1e3),this.checkPendingDeliveryAlarms()}get filteredPendingSales(){let e=this.pendingSales;return this.statusFilter==="reservation"&&(e=e.filter(o=>o.reservationStatus==="pending_confirmation")),this.deliveryFilterDate&&(e=e.filter(o=>{if(!o.deliveryDate)return!1;let t=new Date(o.deliveryDate),n=t.getFullYear(),c=String(t.getMonth()+1).padStart(2,"0"),v=String(t.getDate()).padStart(2,"0");return`${n}-${c}-${v}`===this.deliveryFilterDate})),e.slice().sort((o,t)=>{let n=o.reservationStatus==="pending_confirmation",c=t.reservationStatus==="pending_confirmation";if(n&&!c)return-1;if(!n&&c)return 1;let v=o.deliveryDate?new Date(o.deliveryDate).getTime():1/0,b=t.deliveryDate?new Date(t.deliveryDate).getTime():1/0;return v-b})}checkPendingDeliveryAlarms(){let e=new Date;this.pendingSales.forEach(o=>{if(!o.deliveryDate)return;let n=new Date(o.deliveryDate).getTime()-e.getTime(),c=Math.floor(n/(1e3*60*60*24));(c===1||c===2||c<0)&&this.triggerAlarm(o,c)})}triggerAlarm(e,o){let n=new Date(e.deliveryDate).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}),c=`\u26A0\uFE0F Delivery for "${e.productName}" is due in ${o} day(s) (${n}).`;this.playLoopingAlarm(),this.dialogService.alert(c,"Delivery Reminder","warning").then(()=>{this.stopAlarm()})}playLoopingAlarm(){this.stopAlarm(),this.playBeep(),this.alarmInterval=setInterval(()=>{this.playBeep()},2e3)}stopAlarm(){this.alarmInterval&&(clearInterval(this.alarmInterval),this.alarmInterval=null)}playBeep(){try{let e=new(window.AudioContext||window.webkitAudioContext),o=e.createOscillator(),t=e.createOscillator(),n=e.createGain();o.type="sine",t.type="sine",o.frequency.setValueAtTime(523.25,e.currentTime),t.frequency.setValueAtTime(659.25,e.currentTime),o.connect(n),t.connect(n),n.connect(e.destination),n.gain.setValueAtTime(0,e.currentTime),n.gain.linearRampToValueAtTime(.15,e.currentTime+.05),n.gain.linearRampToValueAtTime(.15,e.currentTime+.4),n.gain.exponentialRampToValueAtTime(.01,e.currentTime+.8),o.start(e.currentTime),t.start(e.currentTime),o.stop(e.currentTime+.8),t.stop(e.currentTime+.8)}catch(e){console.error("Audio alarm failed",e)}}get selectedProduct(){return this.products.find(e=>e.id===this.selectedProductId)}get selectedCustomer(){return this.customers.find(e=>e.id===this.selectedCustomerId)}getCustomerById(e){if(e)return this.customers.find(o=>o.id===e)}get maxQuantity(){return this.selectedProduct?.quantity||0}onProductChange(){this.quantity=1,this.errorMessage="",this.discount=0}addToCart(){if(this.errorMessage="",!this.selectedProduct){this.errorMessage="Please select a product";return}if(this.quantity<1||this.quantity>this.maxQuantity){this.errorMessage=`Quantity must be between 1 and ${this.maxQuantity}`;return}let e=this.cart.filter(t=>t.product.id===this.selectedProduct.id).reduce((t,n)=>t+n.quantity,0);if(e+this.quantity>this.maxQuantity){this.errorMessage=`Cannot add more. Total in cart (${e}) + new (${this.quantity}) exceeds stock (${this.maxQuantity})`;return}let o=this.selectedProduct.price*this.quantity;this.discount>0&&(this.discountType==="percent"?o=o-o*(this.discount/100):o=o-this.discount),o=Math.max(0,Math.round(o*100)/100),this.cart.push({product:this.selectedProduct,quantity:this.quantity,discount:this.discount,discountType:this.discountType,total:o}),this.quantity=1,this.discount=0,this.discountType="amount",this.selectedProductId=""}removeFromCart(e){this.cart.splice(e,1)}get total(){return this.cart.reduce((e,o)=>e+o.total,0)}get change(){return this.cashReceived-this.total}isValid(){return this.cart.length>0&&this.cashReceived>=this.total}get groupedPendingSales(){let e=new Map,o=[];this.filteredPendingSales.forEach(n=>{n.orderId?(e.has(n.orderId)||e.set(n.orderId,[]),e.get(n.orderId).push(n)):o.push(n)});let t=[];return e.forEach((n,c)=>{let v=n[0];t.push({isGroup:!0,orderId:c,sales:n,total:n.reduce((b,D)=>b+D.total,0),customerName:this.getCustomerById(v.customerId)?.name||"Walk-in",customer:this.getCustomerById(v.customerId),deliveryDate:v.deliveryDate,timestamp:v.timestamp,status:v.reservationStatus,productNames:n.map(b=>b.productName).join(", "),deliveryNotes:v.deliveryNotes,quantityTotal:n.reduce((b,D)=>b+D.quantitySold,0)})}),o.forEach(n=>{t.push({isGroup:!1,id:n.id,sales:[n],total:n.total,customerName:this.getCustomerById(n.customerId)?.name||"Walk-in",customer:this.getCustomerById(n.customerId),deliveryDate:n.deliveryDate,timestamp:n.timestamp,status:n.reservationStatus,productNames:n.productName,deliveryNotes:n.deliveryNotes,quantityTotal:n.quantitySold})}),t.sort((n,c)=>{let v=n.status==="pending_confirmation",b=c.status==="pending_confirmation";if(v&&!b)return-1;if(!v&&b)return 1;let D=n.deliveryDate?new Date(n.deliveryDate).getTime():1/0,ie=c.deliveryDate?new Date(c.deliveryDate).getTime():1/0;return D-ie})}checkout(){if(this.errorMessage="",this.cart.length===0){this.errorMessage="Cart is empty";return}if(this.cashReceived<this.total){this.errorMessage="Insufficient cash received";return}let e=this.cashReceived-this.total,o="ORD-"+Date.now()+"-"+Math.floor(Math.random()*1e3);try{this.cart.forEach((t,n)=>{let c=t.total;n===0&&(c+=e);let v;this.deliveryDate&&(this.deliveryTime?v=new Date(`${this.deliveryDate}T${this.deliveryTime}`):v=new Date(this.deliveryDate)),this.inventoryService.recordSale(t.product.id,t.quantity,c,v,this.deliveryNotes||void 0,this.selectedCustomerId||void 0,t.discount,t.discountType,o)}),this.cart=[],this.cashReceived=0,this.deliveryDate=this.minDate,this.deliveryTime="",this.deliveryNotes="",this.selectedCustomerId="",this.errorMessage=""}catch(t){this.errorMessage=t.message||"Error processing sales"}}markAsDelivered(e){confirm("Are you sure you want to mark this item as delivered?")&&this.inventoryService.completePendingSale(e)}confirmReservation(e){confirm("Confirming this reservation will deduct items from inventory. Continue?")&&this.inventoryService.confirmReservation(e)}deleteReservation(e){confirm("Are you sure you want to remove this reservation?")&&this.inventoryService.deleteSale(e.id)}openEditModal(e){if(this.editingSale=e,this.isEditModalOpen=!0,e.deliveryDate){let o=new Date(e.deliveryDate),t=o.getFullYear(),n=String(o.getMonth()+1).padStart(2,"0"),c=String(o.getDate()).padStart(2,"0");this.editDeliveryDate=`${t}-${n}-${c}`,this.editDeliveryTime=o.toTimeString().substring(0,5)}else this.editDeliveryDate="",this.editDeliveryTime="";this.editDeliveryNotes=e.deliveryNotes||""}closeEditModal(){this.isEditModalOpen=!1,this.editingSale=null,this.editDeliveryDate="",this.editDeliveryTime="",this.editDeliveryNotes=""}saveEdit(){if(!this.editingSale)return;let e;this.editDeliveryDate&&(this.editDeliveryTime?e=new Date(`${this.editDeliveryDate}T${this.editDeliveryTime}`):e=new Date(this.editDeliveryDate));let o=this.editingSale.orderId;if(o)this.pendingSales.filter(n=>n.orderId===o).forEach(n=>{let c=E(T({},n),{deliveryDate:e,deliveryNotes:this.editDeliveryNotes});this.inventoryService.updateSale(c)});else{let t=E(T({},this.editingSale),{deliveryDate:e,deliveryNotes:this.editDeliveryNotes});this.inventoryService.updateSale(t)}this.closeEditModal()}markGroupAsDelivered(e){confirm(`Mark ${e.length} items as delivered?
This will deduct stock and complete the order.`)&&e.forEach(o=>this.inventoryService.completePendingSale(o.id))}confirmGroupReservation(e){confirm(`Confirm reservation for ${e.length} items? This will deduct stock upon delivery.`)&&e.forEach(o=>this.inventoryService.confirmReservation(o))}cancelGroupOrder(e){confirm(`Cancel order for ${e.length} items? This cannot be undone.`)&&e.forEach(o=>this.inventoryService.deleteSale(o.id))}static{this.\u0275fac=function(o){return new(o||l)(O(ee),O(te),O(ne))}}static{this.\u0275cmp=k({type:l,selectors:[["app-pos-calculator"]],standalone:!0,features:[W],decls:76,vars:19,consts:[[1,"card"],[1,"pos-layout"],[1,"selection-panel"],[1,"form-row"],[1,"form-group"],["for","customer"],["id","customer",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","flex-grow"],["for","product"],["id","product",3,"ngModelChange","change","ngModel"],[1,"form-row","align-end"],[1,"form-group","small-width"],["for","qty"],["type","number","id","qty",3,"ngModelChange","ngModel","min","max"],[1,"discount-row"],["type","number","placeholder","0",1,"small-input",3,"ngModelChange","ngModel"],[1,"small-select",3,"ngModelChange","ngModel"],["value","amount"],["value","percent"],[1,"btn-primary","btn-add",3,"click","disabled"],["class","error-message",4,"ngIf"],[1,"cart-container"],[1,"cart-table"],[1,"text-right"],[1,"text-center"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","checkout-panel",4,"ngIf"],[1,"card","pending-deliveries"],[1,"filter-row"],[1,"filter-group"],["for","deliveryFilter"],["type","date","id","deliveryFilter","name","deliveryFilter",3,"ngModelChange","ngModel"],["class","btn-clear","title","Clear Date",3,"click",4,"ngIf"],["for","statusFilter"],["id","statusFilter",1,"status-select",3,"ngModelChange","ngModel"],["value","all"],["value","reservation"],[1,"pending-list"],["class","pending-item",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],[3,"value"],[1,"error-message"],[1,"cart-prod-name"],["class","cart-prod-disc",4,"ngIf"],[1,"text-right","font-bold"],["title","Remove",1,"btn-remove-sm",3,"click"],[1,"cart-prod-disc"],["colspan","5",1,"empty-cart-cell"],[1,"checkout-panel"],[1,"delivery-card"],["type","date",3,"ngModelChange","ngModel","min"],["type","time",3,"ngModelChange","ngModel"],["placeholder","Delivery notes...","rows","2",3,"ngModelChange","ngModel"],[1,"payment-card"],[1,"summary-line","total-line"],[1,"form-group","cash-group"],["type","number","placeholder","0.00",1,"cash-input",3,"ngModelChange","ngModel"],[1,"summary-line","change-line"],[1,"btn-checkout",3,"click","disabled"],["title","Clear Date",1,"btn-clear",3,"click"],[1,"pending-item"],[1,"pending-details"],[1,"pending-header"],[1,"header-left"],["class","product-name",4,"ngIf"],["class","status-badge warning",4,"ngIf"],["class","status-badge success",4,"ngIf"],[1,"sale-date"],["class","multi-item-list",4,"ngIf"],[1,"pending-info"],[1,"total-price"],["class","customer-details",4,"ngIf"],["class","delivery-info",4,"ngIf"],[1,"pending-actions"],[1,"btn-edit",3,"click"],["class","btn-confirm","title","Confirm Reservation",3,"click",4,"ngIf"],["title","Cancel Order",1,"btn-delete",3,"click"],["class","btn-deliver",3,"click",4,"ngIf"],[1,"product-name"],[1,"status-badge","warning"],[1,"status-badge","success"],[1,"multi-item-list"],["class","sub-item",4,"ngFor","ngForOf"],[1,"sub-item"],[1,"sub-qty"],[1,"customer-details"],[1,"customer-header"],[1,"customer-row"],[1,"customer-label"],[1,"customer-value"],[1,"delivery-info"],["title","Confirm Reservation",1,"btn-confirm",3,"click"],[1,"btn-deliver",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],["for","editDate"],["type","date","id","editDate",1,"date-input",3,"ngModelChange","ngModel","min"],["for","editTime"],["type","time","id","editTime",1,"time-input",3,"ngModelChange","ngModel"],["for","editNotes"],["id","editNotes","rows","3",1,"textarea-input",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn-cancel",3,"click"],[1,"btn-save",3,"click"]],template:function(o,t){o&1&&(r(0,"div",0)(1,"h3"),a(2,"Point of Sale"),i(),r(3,"div",1)(4,"div",2)(5,"div",3)(6,"div",4)(7,"label",5),a(8,"Select Customer"),i(),r(9,"select",6),C("ngModelChange",function(c){return x(t.selectedCustomerId,c)||(t.selectedCustomerId=c),c}),r(10,"option",7),a(11,"-- Walk-in Customer --"),i(),f(12,re,2,2,"option",8),i()(),r(13,"div",9)(14,"label",10),a(15,"Select Product"),i(),r(16,"select",11),C("ngModelChange",function(c){return x(t.selectedProductId,c)||(t.selectedProductId=c),c}),h("change",function(){return t.onProductChange()}),r(17,"option",7),a(18,"-- Choose a product --"),i(),f(19,oe,3,7,"option",8),i()()(),r(20,"div",12)(21,"div",13)(22,"label",14),a(23,"Quantity"),i(),r(24,"input",15),C("ngModelChange",function(c){return x(t.quantity,c)||(t.quantity=c),c}),i()(),r(25,"div",4)(26,"label"),a(27,"Discount"),i(),r(28,"div",16)(29,"input",17),C("ngModelChange",function(c){return x(t.discount,c)||(t.discount=c),c}),i(),r(30,"select",18),C("ngModelChange",function(c){return x(t.discountType,c)||(t.discountType=c),c}),r(31,"option",19),a(32,"$"),i(),r(33,"option",20),a(34,"%"),i()()()(),r(35,"div",4)(36,"button",21),h("click",function(){return t.addToCart()}),a(37," \u2795 Add to Cart "),i()()()(),f(38,ae,2,1,"div",22),r(39,"div",23)(40,"table",24)(41,"thead")(42,"tr")(43,"th"),a(44,"Product"),i(),r(45,"th",25),a(46,"Price"),i(),r(47,"th",26),a(48,"Qty"),i(),r(49,"th",25),a(50,"Total"),i(),V(51,"th"),i()(),r(52,"tbody"),f(53,de,16,11,"tr",27)(54,ce,3,0,"tr",28),i()()(),f(55,se,36,16,"div",29),i()(),r(56,"div",30)(57,"h3"),a(58,"\u{1F69A} Pending Deliveries"),i(),r(59,"div",31)(60,"div",32)(61,"label",33),a(62,"Date:"),i(),r(63,"input",34),C("ngModelChange",function(c){return x(t.deliveryFilterDate,c)||(t.deliveryFilterDate=c),c}),i(),f(64,pe,2,0,"button",35),i(),r(65,"div",32)(66,"label",36),a(67,"Show:"),i(),r(68,"select",37),C("ngModelChange",function(c){return x(t.statusFilter,c)||(t.statusFilter=c),c}),r(69,"option",38),a(70,"All Deliveries"),i(),r(71,"option",39),a(72,"\u26A0\uFE0F Reservations"),i()()()(),r(73,"div",40),f(74,we,27,19,"div",41),i()(),f(75,Se,25,4,"div",42)),o&2&&(d(9),y("ngModel",t.selectedCustomerId),d(3),p("ngForOf",t.customers),d(4),y("ngModel",t.selectedProductId),d(3),p("ngForOf",t.products),d(5),y("ngModel",t.quantity),p("min",1)("max",t.maxQuantity),d(5),y("ngModel",t.discount),d(),y("ngModel",t.discountType),d(6),p("disabled",!t.selectedProductId),d(2),p("ngIf",t.errorMessage),d(15),p("ngForOf",t.cart),d(),p("ngIf",t.cart.length===0),d(),p("ngIf",t.cart.length>0),d(8),y("ngModel",t.deliveryFilterDate),d(),p("ngIf",t.deliveryFilterDate),d(4),y("ngModel",t.statusFilter),d(6),p("ngForOf",t.groupedPendingSales),d(),p("ngIf",t.isEditModalOpen))},dependencies:[L,B,R,$,z,q,Z,H,J,j,Y,U,G,X,K,Q],styles:[".form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg);margin-top:var(--space-lg)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--space-lg)}.delivery-section[_ngcontent-%COMP%]{background:var(--color-bg);padding:var(--space-lg);border-radius:var(--radius-lg);border:2px dashed var(--color-border);margin-top:var(--space-md)}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-sm);font-size:1rem;font-weight:600;color:var(--color-text);margin-bottom:var(--space-lg)}.section-icon[_ngcontent-%COMP%]{font-size:1.25rem}.date-input[_ngcontent-%COMP%], .time-input[_ngcontent-%COMP%]{cursor:pointer}.textarea-input[_ngcontent-%COMP%]{font-family:inherit;font-size:.9375rem;padding:var(--space-sm) var(--space-md);border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-surface);color:var(--color-text);transition:all var(--transition-base);width:100%;resize:vertical;min-height:80px}.textarea-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f61a}.textarea-input[_ngcontent-%COMP%]::placeholder{color:var(--color-text-muted)}.customer-info-display[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f61a,#9333ea1a);border:2px solid var(--color-primary);border-radius:var(--radius-lg);padding:var(--space-lg);margin-bottom:var(--space-lg)}.info-header[_ngcontent-%COMP%]{font-weight:600;font-size:1rem;color:var(--color-primary);margin-bottom:var(--space-md);display:flex;align-items:center;gap:var(--space-sm)}.info-row[_ngcontent-%COMP%]{display:flex;gap:var(--space-sm);padding:var(--space-xs) 0;font-size:.875rem}.info-label[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text-muted);min-width:120px}.info-value[_ngcontent-%COMP%]{color:var(--color-text);flex:1}.transaction-summary[_ngcontent-%COMP%]{background:var(--color-bg);border-radius:var(--radius-md);padding:var(--space-lg);margin-top:var(--space-md)}.summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--space-sm) 0;font-size:1.125rem}.summary-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text-muted)}.summary-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text);font-size:1.25rem}.change-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:var(--color-success)}.change-row.negative[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:var(--color-danger)}.delivery-info[_ngcontent-%COMP%]{border-top:1px solid var(--color-border);margin-top:var(--space-sm);padding-top:var(--space-md)}.delivery-info[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1rem;color:var(--color-primary)}.error-message[_ngcontent-%COMP%]{background:#fee;color:var(--color-danger);padding:var(--space-md);border-radius:var(--radius-md);font-size:.875rem;border:1px solid rgba(239,68,68,.2)}.btn-success[_ngcontent-%COMP%]{background:var(--color-success)}.btn-success[_ngcontent-%COMP%]:hover{background:#059669}@media (max-width: 640px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}.pending-deliveries[_ngcontent-%COMP%]{margin-top:var(--space-xl);border-top:4px solid var(--color-warning)}.pending-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm);margin-top:var(--space-md)}.pending-item[_ngcontent-%COMP%]{background:var(--color-bg);border:1px solid var(--color-border);border-radius:var(--radius-md);padding:var(--space-sm);display:flex;justify-content:space-between;align-items:flex-start;gap:var(--space-md)}.pending-details[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:2px}.pending-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:4px}.header-left[_ngcontent-%COMP%]{display:flex;flex-direction:column}.product-name[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text);font-size:1rem}.sale-date[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted);white-space:nowrap}.multi-item-list[_ngcontent-%COMP%]{background:#00000005;border-radius:4px;padding:4px 8px;margin-bottom:4px;border-left:2px solid var(--color-border)}.sub-item[_ngcontent-%COMP%]{font-size:.85rem;color:var(--color-text);line-height:1.3}.sub-qty[_ngcontent-%COMP%]{color:var(--color-text-muted);font-size:.8rem}.pending-info[_ngcontent-%COMP%]{display:flex;gap:var(--space-md);font-size:.9rem;color:var(--color-text);align-items:center;background:var(--color-surface);padding:4px 8px;border-radius:4px;width:fit-content}.total-price[_ngcontent-%COMP%]{color:var(--color-primary);font-weight:600}.delivery-info[_ngcontent-%COMP%]{margin-top:4px;padding-top:4px;border-top:1px dashed var(--color-border);font-size:.85rem;color:var(--color-primary);display:grid;grid-template-columns:auto auto 1fr;gap:8px}.btn-deliver[_ngcontent-%COMP%]{background:var(--color-success);color:#fff;border:none;padding:6px 12px;border-radius:var(--radius-md);font-weight:500;font-size:.9rem;cursor:pointer;transition:all var(--transition-base);white-space:nowrap;height:fit-content}.btn-deliver[_ngcontent-%COMP%]:hover{background:#059669;transform:translateY(-1px)}@media (max-width: 640px){.pending-item[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.delivery-info[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:2px}.btn-deliver[_ngcontent-%COMP%]{width:100%;margin-top:8px}}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.modal-content[_ngcontent-%COMP%]{background-color:var(--color-surface);padding:2rem;border-radius:12px;width:90%;max-width:500px;box-shadow:0 10px 25px #0003;animation:_ngcontent-%COMP%_slideIn .3s ease-out;color:var(--color-text)}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translateY(-20px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;border-bottom:1px solid var(--color-border);padding-bottom:1rem}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--color-text)}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;color:var(--color-text-muted)}.modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.modal-footer[_ngcontent-%COMP%]{margin-top:2rem;display:flex;justify-content:flex-end;gap:1rem;padding-top:1rem;border-top:1px solid var(--color-border)}.btn-cancel[_ngcontent-%COMP%]{padding:.5rem 1rem;border:1px solid var(--color-border);background-color:var(--color-surface);color:var(--color-text);border-radius:6px;cursor:pointer;font-weight:500;transition:background-color .2s}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:var(--color-bg)}.btn-save[_ngcontent-%COMP%]{padding:.5rem 1rem;background-color:#4caf50;color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:500}.btn-save[_ngcontent-%COMP%]:hover{background-color:#45a049}.pending-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;margin-left:1rem}.btn-edit[_ngcontent-%COMP%]{padding:.5rem 1rem;background-color:#2196f3;color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:500;transition:background-color .2s}.btn-edit[_ngcontent-%COMP%]:hover{background-color:#1976d2}.customer-details[_ngcontent-%COMP%]{margin-top:4px;padding:4px 8px;background:linear-gradient(135deg,#8b5cf61a,#6366f11a);border-left:3px solid #8b5cf6;border-radius:4px;font-size:.85rem}.customer-header[_ngcontent-%COMP%]{font-weight:600;color:#8b5cf6;margin-bottom:2px;font-size:.85rem;display:inline-block;margin-right:8px}.customer-row[_ngcontent-%COMP%]{display:inline-flex;gap:4px;margin-right:12px;font-size:.85rem}.customer-label[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text-muted);min-width:auto}.customer-value[_ngcontent-%COMP%]{color:var(--color-text);font-weight:400}.radio-group[_ngcontent-%COMP%]{display:flex;background:var(--color-bg);padding:4px;border-radius:8px;border:1px solid var(--color-border);gap:4px}.radio-label[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;padding:8px 12px;cursor:pointer;font-size:.9rem;font-weight:500;color:var(--color-text-muted);border-radius:6px;transition:all .2s ease;text-align:center;-webkit-user-select:none;user-select:none}.radio-label[_ngcontent-%COMP%]:hover{background:var(--color-surface);color:var(--color-text)}.radio-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.radio-label[_ngcontent-%COMP%]:has(input:checked){background:var(--color-primary);color:#fff;box-shadow:0 2px 4px #0000001a}.discount-value[_ngcontent-%COMP%]{color:var(--color-danger);font-weight:600}.total-row[_ngcontent-%COMP%]{border-top:1px solid var(--color-border);margin-top:var(--space-sm);padding-top:var(--space-md)}.status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:.75rem;font-weight:600;text-transform:uppercase}.status-badge.warning[_ngcontent-%COMP%]{background:#fef3c7;color:#d97706;border:1px solid #fcd34d}.btn-confirm[_ngcontent-%COMP%]{padding:.5rem 1rem;background-color:#f59e0b;color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:500;transition:all .2s;white-space:nowrap}.btn-delete[_ngcontent-%COMP%]{padding:.5rem 1rem;background-color:#ef4444;color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:500;transition:all .2s;white-space:nowrap}.btn-delete[_ngcontent-%COMP%]:hover{background-color:#dc2626;transform:translateY(-1px)}.pos-layout[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg)}.selection-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-md);padding-bottom:var(--space-md);border-bottom:1px dashed var(--color-border)}.flex-grow[_ngcontent-%COMP%]{flex:1}.align-end[_ngcontent-%COMP%]{align-items:flex-end}.small-width[_ngcontent-%COMP%]{width:80px}.discount-row[_ngcontent-%COMP%]{display:flex;gap:4px}.small-input[_ngcontent-%COMP%]{width:80px;padding:8px;border:1px solid var(--color-border);border-radius:6px}.small-select[_ngcontent-%COMP%]{padding:8px;border:1px solid var(--color-border);border-radius:6px;background:var(--color-surface)}.btn-add[_ngcontent-%COMP%]{padding:10px 20px;background:var(--color-primary);color:#fff;border:none;border-radius:6px;font-weight:600;cursor:pointer;transition:all .2s;height:42px}.btn-add[_ngcontent-%COMP%]:disabled{background:var(--color-border);cursor:not-allowed}.btn-add[_ngcontent-%COMP%]:not(:disabled):hover{filter:brightness(1.1);transform:translateY(-1px)}.cart-container[_ngcontent-%COMP%]{overflow-x:auto;border:1px solid var(--color-border);border-radius:8px;background:var(--color-surface)}.cart-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:.9rem}.cart-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:var(--color-bg);padding:10px;text-align:left;font-weight:600;color:var(--color-text-muted);border-bottom:1px solid var(--color-border)}.cart-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;border-bottom:1px solid var(--color-border);vertical-align:middle}.cart-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.text-right[_ngcontent-%COMP%]{text-align:right}.text-center[_ngcontent-%COMP%]{text-align:center}.font-bold[_ngcontent-%COMP%]{font-weight:600}.cart-prod-name[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text)}.cart-prod-disc[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-danger)}.btn-remove-sm[_ngcontent-%COMP%]{background:none;border:none;color:var(--color-text-muted);cursor:pointer;padding:4px 8px;border-radius:4px}.btn-remove-sm[_ngcontent-%COMP%]:hover{background:#fee;color:var(--color-danger)}.empty-cart-cell[_ngcontent-%COMP%]{padding:2rem;text-align:center;color:var(--color-text-muted);font-style:italic}.checkout-panel[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--space-lg);margin-top:var(--space-md)}@media (max-width: 768px){.checkout-panel[_ngcontent-%COMP%]{grid-template-columns:1fr}}.delivery-card[_ngcontent-%COMP%], .payment-card[_ngcontent-%COMP%]{background:var(--color-surface);border:1px solid var(--color-border);border-radius:8px;padding:var(--space-md);display:flex;flex-direction:column;gap:var(--space-md)}.delivery-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .payment-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:1rem;color:var(--color-primary);border-bottom:1px solid var(--color-border);padding-bottom:8px}.cash-group[_ngcontent-%COMP%]{margin:var(--space-sm) 0}.cash-input[_ngcontent-%COMP%]{font-size:1.2rem;padding:10px;border:2px solid var(--color-border);border-radius:6px;width:100%}.cash-input[_ngcontent-%COMP%]:focus{border-color:var(--color-success);outline:none}.total-line[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:1.2rem;font-weight:700;color:var(--color-text)}.change-line[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:1.1rem;font-weight:600;color:var(--color-success);padding-top:var(--space-sm);border-top:1px dashed var(--color-border)}.change-line.negative[_ngcontent-%COMP%]{color:var(--color-danger)}.btn-checkout[_ngcontent-%COMP%]{margin-top:auto;width:100%;padding:12px;background:var(--color-success);color:#fff;border:none;border-radius:6px;font-size:1.1rem;font-weight:700;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center;gap:8px}.btn-checkout[_ngcontent-%COMP%]:not(:disabled):hover{background:#059669;transform:translateY(-2px);box-shadow:0 4px 6px #0000001a}.btn-checkout[_ngcontent-%COMP%]:disabled{background:var(--color-border);cursor:not-allowed;opacity:.7}"]})}}return l})();export{Ne as a};
