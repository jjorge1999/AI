import{a as Y}from"./chunk-HCC5ZIAH.js";import{n as X}from"./chunk-WJQ35CFF.js";import{a as W,b as A,c as B,d as j,e as L,f as q,g as R,h as G,i as H,j as U,l as J,m as K,n as Q}from"./chunk-IQNO2F6Q.js";import{Aa as a,Ba as S,Mb as I,Nb as T,Pa as _,Pb as k,Qb as D,Ra as g,Sb as F,Ta as O,Va as n,Wa as t,Ya as f,Za as u,_a as m,aa as y,cb as N,db as r,eb as v,fb as P,ia as c,ib as h,ja as d,jb as C,kb as b,mb as V,nb as E,pb as M,rb as z}from"./chunk-MNIEKAC2.js";function Z(o,x){if(o&1){let e=f();n(0,"tr")(1,"td",23),r(2),t(),n(3,"td",24),r(4),t(),n(5,"td",25),r(6),E(7,"date"),t(),n(8,"td",26),r(9),E(10,"number"),t(),n(11,"td",21)(12,"button",27),u("click",function(){let i=c(e).$implicit,l=m(2);return d(l.deleteExpense(i))}),r(13," \u{1F5D1}\uFE0F "),t()()()}if(o&2){let e=x.$implicit;a(2),v(e.productName),a(2),v(e.notes||"\u2014"),a(2),v(M(7,4,e.timestamp,"short")),a(3),P("\u20B1",M(10,7,e.price,"1.2-2"),"")}}function $(o,x){if(o&1&&(n(0,"div",18)(1,"table",19)(2,"thead")(3,"tr")(4,"th"),r(5,"Product/Item"),t(),n(6,"th"),r(7,"Notes"),t(),n(8,"th"),r(9,"Date"),t(),n(10,"th",20),r(11,"Amount"),t(),n(12,"th",21),r(13,"Actions"),t()()(),n(14,"tbody"),_(15,Z,14,10,"tr",22),t()()()),o&2){let e=m();a(15),g("ngForOf",e.paginatedExpenses)}}function ee(o,x){if(o&1&&(n(0,"option",34),r(1),t()),o&2){let e=x.$implicit;g("value",e),a(),v(e)}}function te(o,x){if(o&1){let e=f();n(0,"button",39),u("click",function(){let i=c(e).$implicit,l=m(3);return d(l.goToPage(i))}),r(1),t()}if(o&2){let e=x.$implicit,s=m(3);O("active",e===s.currentPage),a(),P(" ",e," ")}}function ne(o,x){if(o&1){let e=f();n(0,"div",35)(1,"button",36),u("click",function(){c(e);let i=m(2);return d(i.prevPage())}),r(2," \u2190 Prev "),t(),n(3,"div",37),_(4,te,2,3,"button",38),t(),n(5,"button",36),u("click",function(){c(e);let i=m(2);return d(i.nextPage())}),r(6," Next \u2192 "),t()()}if(o&2){let e=m(2);a(),g("disabled",e.currentPage===1),a(3),g("ngForOf",e.getPageNumbers()),a(),g("disabled",e.currentPage===e.totalPages)}}function ie(o,x){if(o&1){let e=f();n(0,"div",28)(1,"div",29)(2,"label",30),r(3,"Show:"),t(),n(4,"select",31),b("ngModelChange",function(i){c(e);let l=m();return C(l.pageSize,i)||(l.pageSize=i),d(i)}),u("change",function(){c(e);let i=m();return d(i.currentPage=1)}),_(5,ee,2,2,"option",32),t(),n(6,"span"),r(7,"per page"),t()(),_(8,ne,7,3,"div",33),t()}if(o&2){let e=m();a(4),h("ngModel",e.pageSize),a(),g("ngForOf",e.pageSizeOptions),a(3),g("ngIf",e.totalPages>1)}}function re(o,x){o&1&&(n(0,"div",40)(1,"p"),r(2,"No expenses recorded yet"),t()())}var ge=(()=>{class o{constructor(e,s){this.inventoryService=e,this.dialogService=s,this.expenses=[],this.productName="",this.price=null,this.notes="",this.currentPage=1,this.pageSize=10,this.pageSizeOptions=[5,10,20,50]}ngOnInit(){this.inventoryService.getExpenses().subscribe(e=>{this.expenses=e})}get totalExpenses(){return this.expenses.reduce((e,s)=>e+s.price,0)}get paginatedExpenses(){let e=(this.currentPage-1)*this.pageSize;return this.expenses.slice(e,e+this.pageSize)}get totalPages(){return Math.ceil(this.expenses.length/this.pageSize)}nextPage(){this.currentPage<this.totalPages&&this.currentPage++}prevPage(){this.currentPage>1&&this.currentPage--}goToPage(e){this.currentPage=e}getPageNumbers(){return Array(this.totalPages).fill(0).map((e,s)=>s+1)}addExpense(){this.productName&&this.price&&this.price>0&&(this.inventoryService.addExpense({productName:this.productName,price:this.price,notes:this.notes}),this.productName="",this.price=null,this.notes="")}deleteExpense(e){this.dialogService.confirm(`Are you sure you want to delete the expense "${e.productName}" (\u20B1${e.price.toFixed(2)})?`,"Delete Expense").then(s=>{s&&this.inventoryService.deleteExpense(e.id)})}static{this.\u0275fac=function(s){return new(s||o)(S(X),S(Y))}}static{this.\u0275cmp=y({type:o,selectors:[["app-expenses"]],standalone:!0,features:[V],decls:38,vars:12,consts:[["noExpenses",""],[1,"expenses-section"],[1,"card"],[1,"icon"],[1,"form",3,"ngSubmit"],[1,"form-group"],["for","productName"],["type","text","id","productName","name","productName","placeholder","e.g., Raw materials, Utilities, etc.","required","",3,"ngModelChange","ngModel"],["for","price"],["type","number","id","price","name","price","min","0","step","0.01","placeholder","0.00","required","",3,"ngModelChange","ngModel"],["for","notes"],["id","notes","name","notes","placeholder","Additional details about this expense...","rows","3",3,"ngModelChange","ngModel"],["type","submit",1,"btn-primary",3,"disabled"],[1,"section-header"],[1,"badge"],[1,"total-badge"],["class","expenses-list",4,"ngIf","ngIfElse"],["class","pagination",4,"ngIf"],[1,"expenses-list"],[1,"expenses-table"],[1,"text-right"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"expense-name"],[1,"expense-notes"],[1,"expense-date"],[1,"expense-price","text-right"],["title","Delete expense",1,"btn-delete",3,"click"],[1,"pagination"],[1,"pagination-size"],["for","pageSize"],["id","pageSize",1,"page-size-select",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","pagination-controls",4,"ngIf"],[3,"value"],[1,"pagination-controls"],[1,"pagination-btn",3,"click","disabled"],[1,"pagination-pages"],["class","pagination-page",3,"active","click",4,"ngFor","ngForOf"],[1,"pagination-page",3,"click"],[1,"empty-state"]],template:function(s,i){if(s&1){let l=f();n(0,"div",1)(1,"div",2)(2,"h3")(3,"span",3),r(4,"\u{1F4B8}"),t(),r(5," Add Expense "),t(),n(6,"form",4),u("ngSubmit",function(){return c(l),d(i.addExpense())}),n(7,"div",5)(8,"label",6),r(9,"Product/Item Name"),t(),n(10,"input",7),b("ngModelChange",function(p){return c(l),C(i.productName,p)||(i.productName=p),d(p)}),t()(),n(11,"div",5)(12,"label",8),r(13,"Price/Amount"),t(),n(14,"input",9),b("ngModelChange",function(p){return c(l),C(i.price,p)||(i.price=p),d(p)}),t()(),n(15,"div",5)(16,"label",10),r(17,"Notes (Optional)"),t(),n(18,"textarea",11),b("ngModelChange",function(p){return c(l),C(i.notes,p)||(i.notes=p),d(p)}),t()(),n(19,"button",12)(20,"span"),r(21,"\u2795"),t(),r(22," Add Expense "),t()()(),n(23,"div",2)(24,"div",13)(25,"h3")(26,"span",3),r(27,"\u{1F4CB}"),t(),r(28," Expense History "),n(29,"span",14),r(30),t()(),n(31,"div",15),r(32),E(33,"number"),t()(),_(34,$,16,1,"div",16)(35,ie,9,3,"div",17)(36,re,3,0,"ng-template",null,0,z),t()()}if(s&2){let l=N(37);a(10),h("ngModel",i.productName),a(4),h("ngModel",i.price),a(4),h("ngModel",i.notes),a(),g("disabled",!i.productName||!i.price||i.price<=0),a(11),v(i.expenses.length),a(2),P(" Total: \u20B1",M(33,9,i.totalExpenses,"1.2-2")," "),a(2),g("ngIf",i.expenses.length>0)("ngIfElse",l),a(),g("ngIf",i.totalPages>1||i.expenses.length>5)}},dependencies:[F,I,T,D,k,Q,q,H,U,W,R,G,A,B,K,J,L,j],styles:[".expenses-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-xl)}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg);margin-top:var(--space-lg)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font-family:inherit;font-size:.9375rem;padding:var(--space-sm) var(--space-md);border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-surface);color:var(--color-text);transition:all var(--transition-base);width:100%;resize:vertical;min-height:80px}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f61a}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:var(--space-md);margin-bottom:var(--space-lg)}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;display:flex;align-items:center;gap:var(--space-sm)}.icon[_ngcontent-%COMP%]{font-size:1.5rem}.badge[_ngcontent-%COMP%]{margin-left:auto;background:var(--color-bg);color:var(--color-primary);padding:var(--space-xs) var(--space-md);border-radius:var(--radius-xl);font-size:.875rem;font-weight:600}.total-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--color-success),#059669);color:#fff;padding:var(--space-sm) var(--space-lg);border-radius:var(--radius-lg);font-size:1.125rem;font-weight:700;box-shadow:var(--shadow-md)}.expenses-list[_ngcontent-%COMP%]{overflow-x:auto}.expenses-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:.9375rem}.expenses-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:var(--color-primary);color:#fff}.expenses-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);text-align:left;font-weight:600;font-size:.875rem;text-transform:uppercase;letter-spacing:.5px;white-space:nowrap}.expenses-table[_ngcontent-%COMP%]   th.text-right[_ngcontent-%COMP%]{text-align:right}.expenses-table[_ngcontent-%COMP%]   th.text-center[_ngcontent-%COMP%]{text-align:center}.expenses-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid var(--color-border);transition:background-color var(--transition-base)}.expenses-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:var(--color-bg)}.expenses-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:var(--space-sm) var(--space-md);vertical-align:middle}.expense-name[_ngcontent-%COMP%]{font-weight:600;color:var(--color-text)}.expense-notes[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-muted);font-style:italic;max-width:300px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.expense-date[_ngcontent-%COMP%]{font-size:.8125rem;color:var(--color-text-muted);white-space:nowrap}.expense-price[_ngcontent-%COMP%]{font-weight:700;font-size:1rem;color:var(--color-danger)}.text-right[_ngcontent-%COMP%]{text-align:right}.text-center[_ngcontent-%COMP%]{text-align:center}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--space-2xl);color:var(--color-text-muted)}.btn-delete[_ngcontent-%COMP%]{background:transparent;border:1px solid var(--color-border);padding:.25rem .5rem;border-radius:var(--radius-md);cursor:pointer;font-size:1rem;transition:all var(--transition-base);display:inline-flex;align-items:center;justify-content:center}.btn-delete[_ngcontent-%COMP%]:hover{background:var(--color-danger);border-color:var(--color-danger);transform:scale(1.15);box-shadow:0 2px 8px #ef44444d}@media (max-width: 640px){.section-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.total-badge[_ngcontent-%COMP%]{width:100%;text-align:center}}"]})}}return o})();export{ge as a};
