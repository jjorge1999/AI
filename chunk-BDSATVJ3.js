import{a as ie,b as Re,f as tv,g as R}from"./chunk-7QOE2ANW.js";function H(n){return typeof n=="function"}function xi(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var ec=xi(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Ar(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var je=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(H(r))try{r()}catch(o){e=o instanceof ec?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{nv(o)}catch(s){e=e??[],s instanceof ec?e=[...e,...s.errors]:e.push(s)}}if(e)throw new ec(e)}}add(e){var t;if(e&&e!==this)if(this.closed)nv(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ar(t,e)}remove(e){let{_finalizers:t}=this;t&&Ar(t,e),e instanceof n&&e._removeParent(this)}};je.EMPTY=(()=>{let n=new je;return n.closed=!0,n})();var rf=je.EMPTY;function tc(n){return n instanceof je||n&&"closed"in n&&H(n.remove)&&H(n.add)&&H(n.unsubscribe)}function nv(n){H(n)?n():n.unsubscribe()}var gn=xi(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var jt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Mi={setTimeout(n,e,...t){let{delegate:r}=Mi;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Mi;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function nc(n){Mi.setTimeout(()=>{let{onUnhandledError:e}=jt;if(e)e(n);else throw n})}function us(){}var rv=of("C",void 0,void 0);function iv(n){return of("E",void 0,n)}function ov(n){return of("N",n,void 0)}function of(n,e,t){return{kind:n,value:e,error:t}}var xr=null;function Ni(n){if(jt.useDeprecatedSynchronousErrorHandling){let e=!xr;if(e&&(xr={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=xr;if(xr=null,t)throw r}}else n()}function sv(n){jt.useDeprecatedSynchronousErrorHandling&&xr&&(xr.errorThrown=!0,xr.error=n)}var Mr=class extends je{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,tc(e)&&e.add(this)):this.destination=XC}static create(e,t,r){return new Bt(e,t,r)}next(e){this.isStopped?af(ov(e),this):this._next(e)}error(e){this.isStopped?af(iv(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?af(rv,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},JC=Function.prototype.bind;function sf(n,e){return JC.call(n,e)}var cf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){rc(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){rc(r)}else rc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){rc(t)}}},Bt=class extends Mr{constructor(e,t,r){super();let i;if(H(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&jt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&sf(e.next,o),error:e.error&&sf(e.error,o),complete:e.complete&&sf(e.complete,o)}):i=e}this.destination=new cf(i)}};function rc(n){jt.useDeprecatedSynchronousErrorHandling?sv(n):nc(n)}function ZC(n){throw n}function af(n,e){let{onStoppedNotification:t}=jt;t&&Mi.setTimeout(()=>t(n,e))}var XC={closed:!0,next:us,error:ZC,complete:us};function eS(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let o=new Bt({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new gn)}});n.subscribe(o)})}function uf(n){return H(n?.lift)}function X(n){return e=>{if(uf(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ee(n,e,t,r,i){return new lf(n,e,t,r,i)}var lf=class extends Mr{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Et(n,e){return X((t,r)=>{let i=0;t.subscribe(ee(r,o=>{r.next(n.call(e,o,i++))}))})}var Ri=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ot(n){return n}function tS(...n){return df(n)}function df(n){return n.length===0?ot:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ne=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=rS(t)?t:new Bt(t,r,i);return Ni(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=av(r),new r((i,o)=>{let s=new Bt({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Ri](){return this}pipe(...t){return df(t)(this)}toPromise(t){return t=av(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function av(n){var e;return(e=n??jt.Promise)!==null&&e!==void 0?e:Promise}function nS(n){return n&&H(n.next)&&H(n.error)&&H(n.complete)}function rS(n){return n&&n instanceof Mr||nS(n)&&tc(n)}var{isArray:iS}=Array,{getPrototypeOf:oS,prototype:sS,keys:aS}=Object;function ic(n){if(n.length===1){let e=n[0];if(iS(e))return{args:e,keys:null};if(cS(e)){let t=aS(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function cS(n){return n&&typeof n=="object"&&oS(n)===sS}function uv(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(f){try{l(r.next(f))}catch(p){s(p)}}function u(f){try{l(r.throw(f))}catch(p){s(p)}}function l(f){f.done?o(f.value):i(f.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function cv(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Nr(n){return this instanceof Nr?(this.v=n,this):new Nr(n)}function lv(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(T){return Promise.resolve(T).then(y,p)}}function a(y,T){r[y]&&(i[y]=function(x){return new Promise(function(N,F){o.push([y,x,N,F])>1||u(y,x)})},T&&(i[y]=T(i[y])))}function u(y,T){try{l(r[y](T))}catch(x){g(o[0][3],x)}}function l(y){y.value instanceof Nr?Promise.resolve(y.value.v).then(f,p):g(o[0][2],y)}function f(y){u("next",y)}function p(y){u("throw",y)}function g(y,T){y(T),o.shift(),o.length&&u(o[0][0],o[0][1])}}function dv(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof cv=="function"?cv(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Pi=n=>n&&typeof n.length=="number"&&typeof n!="function";function oc(n){return H(n?.then)}function sc(n){return H(n[Ri])}function ac(n){return Symbol.asyncIterator&&H(n?.[Symbol.asyncIterator])}function cc(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function uS(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var uc=uS();function lc(n){return H(n?.[uc])}function dc(n){return lv(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Nr(t.read());if(i)return yield Nr(void 0);yield yield Nr(r)}}finally{t.releaseLock()}})}function fc(n){return H(n?.getReader)}function be(n){if(n instanceof ne)return n;if(n!=null){if(sc(n))return lS(n);if(Pi(n))return dS(n);if(oc(n))return fS(n);if(ac(n))return fv(n);if(lc(n))return hS(n);if(fc(n))return pS(n)}throw cc(n)}function lS(n){return new ne(e=>{let t=n[Ri]();if(H(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function dS(n){return new ne(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function fS(n){return new ne(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,nc)})}function hS(n){return new ne(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function fv(n){return new ne(e=>{mS(n,e).catch(t=>e.error(t))})}function pS(n){return fv(dc(n))}function mS(n,e){var t,r,i,o;return uv(this,void 0,void 0,function*(){try{for(t=dv(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function pt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function hc(n,e=0){return X((t,r)=>{t.subscribe(ee(r,i=>pt(r,n,()=>r.next(i),e),()=>pt(r,n,()=>r.complete(),e),i=>pt(r,n,()=>r.error(i),e)))})}function pc(n,e=0){return X((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function hv(n,e){return be(n).pipe(pc(e),hc(e))}function pv(n,e){return be(n).pipe(pc(e),hc(e))}function mv(n,e){return new ne(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function gv(n,e){return new ne(t=>{let r;return pt(t,e,()=>{r=n[uc](),pt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>H(r?.return)&&r.return()})}function mc(n,e){if(!n)throw new Error("Iterable cannot be null");return new ne(t=>{pt(t,e,()=>{let r=n[Symbol.asyncIterator]();pt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function yv(n,e){return mc(dc(n),e)}function _v(n,e){if(n!=null){if(sc(n))return hv(n,e);if(Pi(n))return mv(n,e);if(oc(n))return pv(n,e);if(ac(n))return mc(n,e);if(lc(n))return gv(n,e);if(fc(n))return yv(n,e)}throw cc(n)}function mt(n,e){return e?_v(n,e):be(n)}var{isArray:gS}=Array;function yS(n,e){return gS(e)?n(...e):n(e)}function Oi(n){return Et(e=>yS(n,e))}function vv(n){return n&&H(n.schedule)}function wv(n){return n[n.length-1]}function gc(n){return H(wv(n))?n.pop():void 0}function qn(n){return vv(wv(n))?n.pop():void 0}function yc(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function _S(...n){let e=qn(n),t=gc(n),{args:r,keys:i}=ic(n);if(r.length===0)return mt([],e);let o=new ne(vS(r,e,i?s=>yc(i,s):ot));return t?o.pipe(Oi(t)):o}function vS(n,e,t=ot){return r=>{Iv(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)Iv(e,()=>{let l=mt(n[u],e),f=!1;l.subscribe(ee(r,p=>{o[u]=p,f||(f=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Iv(n,e,t){n?pt(t,n,e):e()}function wS(...n){let e=gc(n),{args:t,keys:r}=ic(n),i=new ne(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let f=0;f<s;f++){let p=!1;be(t[f]).subscribe(ee(o,g=>{p||(p=!0,l--),a[f]=g},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?yc(r,a):a),o.complete())}))}});return e?i.pipe(Oi(e)):i}var ls=new ne(n=>n.complete());function Dt(n){return n<=0?()=>ls:X((e,t)=>{let r=0;e.subscribe(ee(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ff(){return X((n,e)=>{let t=null;n._refCount++;let r=ee(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var hf=class extends ne{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,uf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new je;let t=this.getSubject();e.add(this.source.subscribe(ee(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=je.EMPTY)}return e}refCount(){return ff()(this)}};var Ev=xi(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Nt=(()=>{class n extends ne{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new _c(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Ev}next(t){Ni(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Ni(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ni(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?rf:(this.currentObservers=null,o.push(t),new je(()=>{this.currentObservers=null,Ar(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ne;return t.source=this,t}}return n.create=(e,t)=>new _c(e,t),n})(),_c=class extends Nt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:rf}};var Ut=class extends Nt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ds={now(){return(ds.delegate||Date).now()},delegate:void 0};var vc=class extends Nt{constructor(e=1/0,t=1/0,r=ds){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var wc=class extends je{constructor(e,t){super()}schedule(e,t=0){return this}};var fs={setInterval(n,e,...t){let{delegate:r}=fs;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=fs;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Ic=class extends wc{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return fs.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&fs.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ar(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ki=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};ki.now=ds.now;var Ec=class extends ki{constructor(e,t=ki.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Dv=new Ec(Ic);function hs(...n){let e=qn(n);return mt(n,e)}function yn(n,e){let t=H(n)?n:()=>n,r=i=>i.error(t());return new ne(e?i=>e.schedule(r,0,i):r)}function IS(n){return!!n&&(n instanceof ne||H(n.lift)&&H(n.subscribe))}function bv(n,e,t,r,i,o,s,a){let u=[],l=0,f=0,p=!1,g=()=>{p&&!u.length&&!l&&e.complete()},y=x=>l<r?T(x):u.push(x),T=x=>{o&&e.next(x),l++;let N=!1;be(t(x,f++)).subscribe(ee(e,F=>{i?.(F),o?y(F):e.next(F)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;u.length&&l<r;){let F=u.shift();s?pt(e,s,()=>T(F)):T(F)}g()}catch(F){e.error(F)}}))};return n.subscribe(ee(e,y,()=>{p=!0,g()})),()=>{a?.()}}function _n(n,e,t=1/0){return H(e)?_n((r,i)=>Et((o,s)=>e(r,o,i,s))(be(n(r,i))),t):(typeof e=="number"&&(t=e),X((r,i)=>bv(r,i,n,t)))}function pf(n=1/0){return _n(ot,n)}function Tv(){return pf(1)}function Dc(...n){return Tv()(mt(n,qn(n)))}function ES(n){return new ne(e=>{be(n()).subscribe(e)})}var DS=["addListener","removeListener"],bS=["addEventListener","removeEventListener"],TS=["on","off"];function mf(n,e,t,r){if(H(t)&&(r=t,t=void 0),r)return mf(n,e,t).pipe(Oi(r));let[i,o]=AS(n)?bS.map(s=>a=>n[s](e,a,t)):CS(n)?DS.map(Cv(n,e)):SS(n)?TS.map(Cv(n,e)):[];if(!i&&Pi(n))return _n(s=>mf(s,e,t))(be(n));if(!i)throw new TypeError("Invalid event target");return new ne(s=>{let a=(...u)=>s.next(1<u.length?u:u[0]);return i(a),()=>o(a)})}function Cv(n,e){return t=>r=>n[t](e,r)}function CS(n){return H(n.addListener)&&H(n.removeListener)}function SS(n){return H(n.on)&&H(n.off)}function AS(n){return H(n.addEventListener)&&H(n.removeEventListener)}function ps(n,e){return X((t,r)=>{let i=0;t.subscribe(ee(r,o=>n.call(e,o,i++)&&r.next(o)))})}function $t(n){return X((e,t)=>{let r=null,i=!1,o;r=e.subscribe(ee(t,void 0,void 0,s=>{o=be(n(s,$t(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Sv(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(ee(s,f=>{let p=l++;u=a?n(u,f,p):(a=!0,f),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function xS(n,e){return H(e)?_n(n,e,1):_n(n,1)}function MS(n,e=Dv){return X((t,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function u(){let l=s+n,f=e.now();if(f<l){i=this.schedule(void 0,l-f),r.add(i);return}a()}t.subscribe(ee(r,l=>{o=l,s=e.now(),i||(i=e.schedule(u,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function ms(n){return X((e,t)=>{let r=!1;e.subscribe(ee(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function NS(n){return Et(()=>n)}function RS(n,e=ot){return n=n??PS,X((t,r)=>{let i,o=!0;t.subscribe(ee(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function PS(n,e){return n===e}function bc(n=OS){return X((e,t)=>{let r=!1;e.subscribe(ee(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function OS(){return new gn}function gs(n){return X((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Av(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ps((i,o)=>n(i,o,r)):ot,Dt(1),t?ms(e):bc(()=>new gn))}function gf(n){return n<=0?()=>ls:X((e,t)=>{let r=[];e.subscribe(ee(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function kS(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ps((i,o)=>n(i,o,r)):ot,gf(1),t?ms(e):bc(()=>new gn))}function FS(n,e){return X(Sv(n,e,arguments.length>=2,!0))}function xv(n={}){let{connector:e=()=>new Nt,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,u,l=0,f=!1,p=!1,g=()=>{a?.unsubscribe(),a=void 0},y=()=>{g(),s=u=void 0,f=p=!1},T=()=>{let x=s;y(),x?.unsubscribe()};return X((x,N)=>{l++,!p&&!f&&g();let F=u=u??e();N.add(()=>{l--,l===0&&!p&&!f&&(a=yf(T,i))}),F.subscribe(N),!s&&l>0&&(s=new Bt({next:j=>F.next(j),error:j=>{p=!0,g(),a=yf(y,t,j),F.error(j)},complete:()=>{f=!0,g(),a=yf(y,r),F.complete()}}),be(x).subscribe(s))})(o)}}function yf(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Bt({next:()=>{r.unsubscribe(),n()}});return be(e(...t)).subscribe(r)}function _f(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,xv({connector:()=>new vc(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function VS(...n){let e=qn(n);return X((t,r)=>{(e?Dc(n,t,e):Dc(n,t)).subscribe(r)})}function Fi(n,e){return X((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(ee(r,u=>{i?.unsubscribe();let l=0,f=o++;be(n(u,f)).subscribe(i=ee(r,p=>r.next(e?e(u,p,f,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function LS(n){return X((e,t)=>{be(n).subscribe(ee(t,()=>t.complete(),us)),!t.closed&&e.subscribe(t)})}function Vi(n,e,t){let r=H(n)||e||t?{next:n,error:e,complete:t}:n;return r?X((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ee(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):ot}function Mv(n,e){return Object.is(n,e)}var We=null,ys=!1,Tc=1,rn=Symbol("SIGNAL");function ue(n){let e=We;return We=n,e}function jS(){return ys}var vs={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ef(n){if(ys)throw new Error("");if(We===null)return;We.consumerOnSignalRead(n);let e=We.nextProducerIndex++;if(Li(We),e<We.producerNode.length&&We.producerNode[e]!==n&&_s(We)){let t=We.producerNode[e];Mc(t,We.producerIndexOfThis[e])}We.producerNode[e]!==n&&(We.producerNode[e]=n,We.producerIndexOfThis[e]=_s(We)?kv(n,We,e):0),We.producerLastReadVersion[e]=n.version}function BS(){Tc++}function Nv(n){if(!(_s(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Tc)){if(!n.producerMustRecompute(n)&&!xc(n)){n.dirty=!1,n.lastCleanEpoch=Tc;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Tc}}function Rv(n){if(n.liveConsumerNode===void 0)return;let e=ys;ys=!0;try{for(let t of n.liveConsumerNode)t.dirty||Ov(t)}finally{ys=e}}function Pv(){return We?.consumerAllowSignalWrites!==!1}function Ov(n){n.dirty=!0,Rv(n),n.consumerMarkedDirty?.(n)}function Sc(n){return n&&(n.nextProducerIndex=0),ue(n)}function Ac(n,e){if(ue(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(_s(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Mc(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function xc(n){Li(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Nv(t),r!==t.version))return!0}return!1}function Df(n){if(Li(n),_s(n))for(let e=0;e<n.producerNode.length;e++)Mc(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function kv(n,e,t){if(Fv(n),Li(n),n.liveConsumerNode.length===0)for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=kv(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Mc(n,e){if(Fv(n),Li(n),n.liveConsumerNode.length===1)for(let r=0;r<n.producerNode.length;r++)Mc(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Li(i),i.producerIndexOfThis[r]=e}}function _s(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Li(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Fv(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Vv(n){let e=Object.create(US);e.computation=n;let t=()=>{if(Nv(e),Ef(e),e.value===Cc)throw e.error;return e.value};return t[rn]=e,t}var vf=Symbol("UNSET"),wf=Symbol("COMPUTING"),Cc=Symbol("ERRORED"),US=Re(ie({},vs),{value:vf,dirty:!0,error:null,equal:Mv,producerMustRecompute(n){return n.value===vf||n.value===wf},producerRecomputeValue(n){if(n.value===wf)throw new Error("Detected cycle in computations.");let e=n.value;n.value=wf;let t=Sc(n),r;try{r=n.computation()}catch(i){r=Cc,n.error=i}finally{Ac(n,t)}if(e!==vf&&e!==Cc&&r!==Cc&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function $S(){throw new Error}var Lv=$S;function jv(){Lv()}function Bv(n){Lv=n}var HS=null;function Uv(n){let e=Object.create(Hv);e.value=n;let t=()=>(Ef(e),e.value);return t[rn]=e,t}function bf(n,e){Pv()||jv(),n.equal(n.value,e)||(n.value=e,qS(n))}function $v(n,e){Pv()||jv(),bf(n,e(n.value))}var Hv=Re(ie({},vs),{equal:Mv,value:void 0});function qS(n){n.version++,BS(),Rv(n),HS?.()}function qv(n,e,t){let r=Object.create(zS);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;let i=u=>{r.cleanupFn=u};function o(u){return u.fn===null&&u.schedule===null}function s(u){o(u)||(Df(u),u.cleanupFn(),u.fn=null,u.schedule=null,u.cleanupFn=If)}let a=()=>{if(r.fn===null)return;if(jS())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!xc(r))return;r.hasRun=!0;let u=Sc(r);try{r.cleanupFn(),r.cleanupFn=If,r.fn(i)}finally{Ac(r,u)}};return r.ref={notify:()=>Ov(r),run:a,cleanup:()=>r.cleanupFn(),destroy:()=>s(r),[rn]:r},r.ref}var If=()=>{},zS=Re(ie({},vs),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule!==null&&n.schedule(n.ref)},hasRun:!1,cleanupFn:If});var Rw="https://g.co/ng/security#xss",le=class extends Error{constructor(e,t){super(Pw(e,t)),this.code=e}};function Pw(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Ns(n){return{toString:n}.toString()}var Nc="__parameters__";function GS(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function Ow(n,e,t){return Ns(()=>{let r=GS(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,f){let p=u.hasOwnProperty(Nc)?u[Nc]:Object.defineProperty(u,Nc,{value:[]})[Nc];for(;p.length<=f;)p.push(null);return(p[f]=p[f]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Rt=globalThis;function we(n){for(let e in n)if(n[e]===we)return e;throw Error("Could not find renamed property on target object.")}function WS(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function at(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(at).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function Bf(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var KS=we({__forward_ref__:we});function kw(n){return n.__forward_ref__=kw,n.toString=function(){return at(this())},n}function st(n){return Fw(n)?n():n}function Fw(n){return typeof n=="function"&&n.hasOwnProperty(KS)&&n.__forward_ref__===kw}function fe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Vw(n){return{providers:n.providers||[],imports:n.imports||[]}}function pu(n){return zv(n,Lw)||zv(n,jw)}function E$(n){return pu(n)!==null}function zv(n,e){return n.hasOwnProperty(e)?n[e]:null}function QS(n){let e=n&&(n[Lw]||n[jw]);return e||null}function Gv(n){return n&&(n.hasOwnProperty(Wv)||n.hasOwnProperty(YS))?n[Wv]:null}var Lw=we({\u0275prov:we}),Wv=we({\u0275inj:we}),jw=we({ngInjectableDef:we}),YS=we({ngInjectorDef:we}),ye=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=fe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Bw(n){return n&&!!n.\u0275providers}var JS=we({\u0275cmp:we}),ZS=we({\u0275dir:we}),XS=we({\u0275pipe:we}),eA=we({\u0275mod:we}),qc=we({\u0275fac:we}),ws=we({__NG_ELEMENT_ID__:we}),Kv=we({__NG_ENV_ID__:we});function an(n){return typeof n=="string"?n:n==null?"":String(n)}function tA(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():an(n)}function nA(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new le(-200,n)}function Uh(n,e){throw new le(-201,!1)}var se=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(se||{}),Uf;function Uw(){return Uf}function gt(n){let e=Uf;return Uf=n,e}function $w(n,e,t){let r=pu(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&se.Optional)return null;if(e!==void 0)return e;Uh(n,"Injector")}var rA={},Is=rA,$f="__NG_DI_FLAG__",zc="ngTempTokenPath",iA="ngTokenPath",oA=/\n/gm,sA="\u0275",Qv="__source",Hi;function aA(){return Hi}function zn(n){let e=Hi;return Hi=n,e}function cA(n,e=se.Default){if(Hi===void 0)throw new le(-203,!1);return Hi===null?$w(n,void 0,e):Hi.get(n,e&se.Optional?null:void 0,e)}function Pe(n,e=se.Default){return(Uw()||cA)(st(n),e)}function de(n,e=se.Default){return Pe(n,mu(e))}function mu(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Hf(n){let e=[];for(let t=0;t<n.length;t++){let r=st(n[t]);if(Array.isArray(r)){if(r.length===0)throw new le(900,!1);let i,o=se.Default;for(let s=0;s<r.length;s++){let a=r[s],u=uA(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(Pe(i,o))}else e.push(Pe(r))}return e}function Hw(n,e){return n[$f]=e,n.prototype[$f]=e,n}function uA(n){return n[$f]}function lA(n,e,t,r){let i=n[zc];throw e[Qv]&&i.unshift(e[Qv]),n.message=dA(`
`+n.message,i,t,r),n[iA]=i,n[zc]=null,n}function dA(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==sA?n.slice(2):n;let i=at(e);if(Array.isArray(e))i=e.map(at).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):at(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(oA,`
  `)}`}var fA=Hw(Ow("Optional"),8);var hA=Hw(Ow("SkipSelf"),4);function Fr(n,e){let t=n.hasOwnProperty(qc);return t?n[qc]:null}function pA(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function mA(n){return n.flat(Number.POSITIVE_INFINITY)}function $h(n,e){n.forEach(t=>Array.isArray(t)?$h(t,e):e(t))}function qw(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Gc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function gA(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function gu(n,e,t){let r=Rs(n,e);return r>=0?n[r|1]=t:(r=~r,gA(n,r,e,t)),r}function Tf(n,e){let t=Rs(n,e);if(t>=0)return n[t|1]}function Rs(n,e){return yA(n,e,1)}function yA(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var zi={},yt=[],Wc=new ye(""),zw=new ye("",-1),Gw=new ye(""),Kc=class{get(e,t=Is){if(t===Is){let r=new Error(`NullInjectorError: No provider for ${at(e)}!`);throw r.name="NullInjectorError",r}return t}},Ww=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Ww||{}),Es=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Es||{}),Wn=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Wn||{});function _A(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function qf(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];vA(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function Kw(n){return n===3||n===4||n===6}function vA(n){return n.charCodeAt(0)===64}function Ds(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?Yv(n,t,i,null,e[++r]):Yv(n,t,i,null,null))}}return n}function Yv(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var Qw="ng-template";function wA(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&_A(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Hh(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Hh(n){return n.type===4&&n.value!==Qw}function IA(n,e,t){let r=n.type===4&&!t?Qw:n.value;return e===r}function EA(n,e,t){let r=4,i=n.attrs,o=i!==null?TA(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Ht(r)&&!Ht(u))return!1;if(s&&Ht(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!IA(n,u,t)||u===""&&e.length===1){if(Ht(r))return!1;s=!0}}else if(r&8){if(i===null||!wA(n,i,u,t)){if(Ht(r))return!1;s=!0}}else{let l=e[++a],f=DA(u,i,Hh(n),t);if(f===-1){if(Ht(r))return!1;s=!0;continue}if(l!==""){let p;if(f>o?p="":p=i[f+1].toLowerCase(),r&2&&l!==p){if(Ht(r))return!1;s=!0}}}}return Ht(r)||s}function Ht(n){return(n&1)===0}function DA(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return CA(e,n)}function bA(n,e,t=!1){for(let r=0;r<e.length;r++)if(EA(n,e[r],t))return!0;return!1}function TA(n){for(let e=0;e<n.length;e++){let t=n[e];if(Kw(t))return e}return n.length}function CA(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function Jv(n,e){return n?":not("+e.trim()+")":e}function SA(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Ht(s)&&(e+=Jv(o,i),i=""),r=s,o=o||!Ht(r);t++}return i!==""&&(e+=Jv(o,i)),e}function AA(n){return n.map(SA).join(",")}function xA(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Ht(i))break;i=o}r++}return{attrs:e,classes:t}}function D$(n){return Ns(()=>{let e=eI(n),t=Re(ie({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Ww.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Es.Emulated,styles:n.styles||yt,_:null,schemas:n.schemas||null,tView:null,id:""});tI(t);let r=n.dependencies;return t.directiveDefs=Xv(r,!1),t.pipeDefs=Xv(r,!0),t.id=PA(t),t})}function MA(n){return Kn(n)||Jw(n)}function NA(n){return n!==null}function Yw(n){return Ns(()=>({type:n.type,bootstrap:n.bootstrap||yt,declarations:n.declarations||yt,imports:n.imports||yt,exports:n.exports||yt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Zv(n,e){if(n==null)return zi;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=Wn.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==Wn.None?[r,a]:r,e[o]=s):t[o]=r}return t}function yu(n){return Ns(()=>{let e=eI(n);return tI(e),e})}function zr(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Kn(n){return n[JS]||null}function Jw(n){return n[ZS]||null}function Zw(n){return n[XS]||null}function RA(n){let e=Kn(n)||Jw(n)||Zw(n);return e!==null?e.standalone:!1}function Xw(n,e){let t=n[eA]||null;if(!t&&e===!0)throw new Error(`Type ${at(n)} does not have '\u0275mod' property.`);return t}function eI(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||zi,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||yt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Zv(n.inputs,e),outputs:Zv(n.outputs),debugInfo:null}}function tI(n){n.features?.forEach(e=>e(n))}function Xv(n,e){if(!n)return null;let t=e?Zw:MA;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(NA)}function PA(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function OA(n){return{\u0275providers:n}}function kA(...n){return{\u0275providers:nI(!0,n),\u0275fromNgModule:!0}}function nI(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return $h(e,s=>{let a=s;zf(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&rI(i,o),t}function rI(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];qh(i,o=>{e(o,r)})}}function zf(n,e,t,r){if(n=st(n),!n)return!1;let i=null,o=Gv(n),s=!o&&Kn(n);if(!o&&!s){let u=n.ngModule;if(o=Gv(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)zf(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{$h(o.imports,f=>{zf(f,e,t,r)&&(l||=[],l.push(f))})}finally{}l!==void 0&&rI(l,e)}if(!a){let l=Fr(i)||(()=>new i);e({provide:i,useFactory:l,deps:yt},i),e({provide:Gw,useValue:i,multi:!0},i),e({provide:Wc,useValue:()=>Pe(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;qh(u,f=>{e(f,l)})}}else return!1;return i!==n&&n.providers!==void 0}function qh(n,e){for(let t of n)Bw(t)&&(t=t.\u0275providers),Array.isArray(t)?qh(t,e):e(t)}var FA=we({provide:String,useValue:we});function iI(n){return n!==null&&typeof n=="object"&&FA in n}function VA(n){return!!(n&&n.useExisting)}function LA(n){return!!(n&&n.useFactory)}function Gi(n){return typeof n=="function"}function jA(n){return!!n.useClass}var oI=new ye(""),Vc={},BA={},Cf;function zh(){return Cf===void 0&&(Cf=new Kc),Cf}var Qn=class{},bs=class extends Qn{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Wf(e,s=>this.processProvider(s)),this.records.set(zw,ji(void 0,this)),i.has("environment")&&this.records.set(Qn,ji(void 0,this));let o=this.records.get(oI);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Gw,yt,se.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ue(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ue(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=zn(this),r=gt(void 0),i;try{return e()}finally{zn(t),gt(r)}}get(e,t=Is,r=se.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Kv))return e[Kv](this);r=mu(r);let i,o=zn(this),s=gt(void 0);try{if(!(r&se.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=zA(e)&&pu(e);l&&this.injectableDefInScope(l)?u=ji(Gf(e),Vc):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&se.Self?zh():this.parent;return t=r&se.Optional&&t===Is?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[zc]=a[zc]||[]).unshift(at(e)),o)throw a;return lA(a,e,"R3InjectorError",this.source)}else throw a}finally{gt(s),zn(o)}}resolveInjectorInitializers(){let e=ue(null),t=zn(this),r=gt(void 0),i;try{let o=this.get(Wc,yt,se.Self);for(let s of o)s()}finally{zn(t),gt(r),ue(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(at(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new le(205,!1)}processProvider(e){e=st(e);let t=Gi(e)?e:st(e&&e.provide),r=$A(e);if(!Gi(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ji(void 0,Vc,!0),i.factory=()=>Hf(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=ue(null);try{return t.value===Vc&&(t.value=BA,t.value=t.factory()),typeof t.value=="object"&&t.value&&qA(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ue(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=st(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Gf(n){let e=pu(n),t=e!==null?e.factory:Fr(n);if(t!==null)return t;if(n instanceof ye)throw new le(204,!1);if(n instanceof Function)return UA(n);throw new le(204,!1)}function UA(n){if(n.length>0)throw new le(204,!1);let t=QS(n);return t!==null?()=>t.factory(n):()=>new n}function $A(n){if(iI(n))return ji(void 0,n.useValue);{let e=sI(n);return ji(e,Vc)}}function sI(n,e,t){let r;if(Gi(n)){let i=st(n);return Fr(i)||Gf(i)}else if(iI(n))r=()=>st(n.useValue);else if(LA(n))r=()=>n.useFactory(...Hf(n.deps||[]));else if(VA(n))r=()=>Pe(st(n.useExisting));else{let i=st(n&&(n.useClass||n.provide));if(HA(n))r=()=>new i(...Hf(n.deps));else return Fr(i)||Gf(i)}return r}function ji(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function HA(n){return!!n.deps}function qA(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function zA(n){return typeof n=="function"||typeof n=="object"&&n instanceof ye}function Wf(n,e){for(let t of n)Array.isArray(t)?Wf(t,e):t&&Bw(t)?Wf(t.\u0275providers,e):e(t)}function GA(n,e){n instanceof bs&&n.assertNotDestroyed();let t,r=zn(n),i=gt(void 0);try{return e()}finally{zn(r),gt(i)}}function aI(){return Uw()!==void 0||aA()!=null}function cI(n){if(!aI())throw new le(-203,!1)}function WA(n){return typeof n=="function"}var wn=0,te=1,q=2,Ke=3,zt=4,Kt=5,Qc=6,Ts=7,Gt=8,Wi=9,Wt=10,Me=11,Cs=12,ew=13,Zi=14,cn=15,Ps=16,Bi=17,vn=18,_u=19,uI=20,Gn=21,Lc=22,Vr=23,_t=25,lI=1;var Lr=7,Yc=8,Ki=9,bt=10,Gh=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Gh||{});function Or(n){return Array.isArray(n)&&typeof n[lI]=="object"}function In(n){return Array.isArray(n)&&n[lI]===!0}function Wh(n){return(n.flags&4)!==0}function vu(n){return n.componentOffset>-1}function wu(n){return(n.flags&1)===1}function Yn(n){return!!n.template}function KA(n){return(n[q]&512)!==0}var Kf=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function dI(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function fI(){return hI}function hI(n){return n.type.prototype.ngOnChanges&&(n.setInput=YA),QA}fI.ngInherit=!0;function QA(){let n=mI(this),e=n?.current;if(e){let t=n.previous;if(t===zi)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function YA(n,e,t,r,i){let o=this.declaredInputs[r],s=mI(n)||JA(n,{previous:zi,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Kf(l&&l.currentValue,t,u===zi),dI(n,e,i,t)}var pI="__ngSimpleChanges__";function mI(n){return n[pI]||null}function JA(n,e){return n[pI]=e}var tw=null;var on=function(n,e,t){tw?.(n,e,t)},gI="svg",ZA="math",XA=!1;function ex(){return XA}function un(n){for(;Array.isArray(n);)n=n[wn];return n}function yI(n,e){return un(e[n])}function Ot(n,e){return un(e[n.index])}function _I(n,e){return n.data[e]}function Iu(n,e){return n[e]}function er(n,e){let t=e[n];return Or(t)?t:t[wn]}function tx(n){return(n[q]&4)===4}function Kh(n){return(n[q]&128)===128}function nx(n){return In(n[Ke])}function Qi(n,e){return e==null?null:n[e]}function vI(n){n[Bi]=0}function rx(n){n[q]&1024||(n[q]|=1024,Kh(n)&&Ss(n))}function ix(n,e){for(;n>0;)e=e[Zi],n--;return e}function Qh(n){return!!(n[q]&9216||n[Vr]?.dirty)}function Qf(n){n[Wt].changeDetectionScheduler?.notify(1),Qh(n)?Ss(n):n[q]&64&&(ex()?(n[q]|=1024,Ss(n)):n[Wt].changeDetectionScheduler?.notify())}function Ss(n){n[Wt].changeDetectionScheduler?.notify();let e=As(n);for(;e!==null&&!(e[q]&8192||(e[q]|=8192,!Kh(e)));)e=As(e)}function wI(n,e){if((n[q]&256)===256)throw new le(911,!1);n[Gn]===null&&(n[Gn]=[]),n[Gn].push(e)}function ox(n,e){if(n[Gn]===null)return;let t=n[Gn].indexOf(e);t!==-1&&n[Gn].splice(t,1)}function As(n){let e=n[Ke];return In(e)?e[Ke]:e}var Y={lFrame:AI(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function sx(){return Y.lFrame.elementDepthCount}function ax(){Y.lFrame.elementDepthCount++}function cx(){Y.lFrame.elementDepthCount--}function II(){return Y.bindingsEnabled}function ux(){return Y.skipHydrationRootTNode!==null}function lx(n){return Y.skipHydrationRootTNode===n}function dx(){Y.skipHydrationRootTNode=null}function K(){return Y.lFrame.lView}function Ne(){return Y.lFrame.tView}function b$(n){return Y.lFrame.contextLView=n,n[Gt]}function T$(n){return Y.lFrame.contextLView=null,n}function Ze(){let n=EI();for(;n!==null&&n.type===64;)n=n.parent;return n}function EI(){return Y.lFrame.currentTNode}function fx(){let n=Y.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Gr(n,e){let t=Y.lFrame;t.currentTNode=n,t.isParent=e}function Yh(){return Y.lFrame.isParent}function DI(){Y.lFrame.isParent=!1}function hx(){return Y.lFrame.contextLView}function tr(){let n=Y.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function bI(){return Y.lFrame.bindingIndex}function px(n){return Y.lFrame.bindingIndex=n}function Eu(){return Y.lFrame.bindingIndex++}function Du(n){let e=Y.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function mx(){return Y.lFrame.inI18n}function gx(n,e){let t=Y.lFrame;t.bindingIndex=t.bindingRootIndex=n,Yf(e)}function yx(){return Y.lFrame.currentDirectiveIndex}function Yf(n){Y.lFrame.currentDirectiveIndex=n}function _x(n){let e=Y.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function TI(){return Y.lFrame.currentQueryIndex}function Jh(n){Y.lFrame.currentQueryIndex=n}function vx(n){let e=n[te];return e.type===2?e.declTNode:e.type===1?n[Kt]:null}function CI(n,e,t){if(t&se.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&se.Host);)if(i=vx(o),i===null||(o=o[Zi],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=Y.lFrame=SI();return r.currentTNode=e,r.lView=n,!0}function Zh(n){let e=SI(),t=n[te];Y.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function SI(){let n=Y.lFrame,e=n===null?null:n.child;return e===null?AI(n):e}function AI(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function xI(){let n=Y.lFrame;return Y.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var MI=xI;function Xh(){let n=xI();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function wx(n){return(Y.lFrame.contextLView=ix(n,Y.lFrame.contextLView))[Gt]}function En(){return Y.lFrame.selectedIndex}function jr(n){Y.lFrame.selectedIndex=n}function bu(){let n=Y.lFrame;return _I(n.tView,n.selectedIndex)}function C$(){Y.lFrame.currentNamespace=gI}function S$(){Ix()}function Ix(){Y.lFrame.currentNamespace=null}function Ex(){return Y.lFrame.currentNamespace}var NI=!0;function Tu(){return NI}function Cu(n){NI=n}function Dx(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=hI(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Su(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:f}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),f!=null&&(n.destroyHooks??=[]).push(t,f)}}function jc(n,e,t){RI(n,e,3,t)}function Bc(n,e,t,r){(n[q]&3)===t&&RI(n,e,t,r)}function Sf(n,e){let t=n[q];(t&3)===e&&(t&=16383,t+=1,n[q]=t)}function RI(n,e,t,r){let i=r!==void 0?n[Bi]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Bi]+=65536),(a<o||o==-1)&&(bx(n,t,e,u),n[Bi]=(n[Bi]&4294901760)+u+2),u++}function nw(n,e){on(4,n,e);let t=ue(null);try{e.call(n)}finally{ue(t),on(5,n,e)}}function bx(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[q]>>14<n[Bi]>>16&&(n[q]&3)===e&&(n[q]+=16384,nw(a,o)):nw(a,o)}var qi=-1,Br=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function Tx(n){return n instanceof Br}function Cx(n){return(n.flags&8)!==0}function Sx(n){return(n.flags&16)!==0}function PI(n){return n!==qi}function Jc(n){return n&32767}function Ax(n){return n>>16}function Zc(n,e){let t=Ax(n),r=e;for(;t>0;)r=r[Zi],t--;return r}var Jf=!0;function Xc(n){let e=Jf;return Jf=n,e}var xx=256,OI=xx-1,kI=5,Mx=0,sn={};function Nx(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ws)&&(r=t[ws]),r==null&&(r=t[ws]=Mx++);let i=r&OI,o=1<<i;e.data[n+(i>>kI)]|=o}function eu(n,e){let t=FI(n,e);if(t!==-1)return t;let r=e[te];r.firstCreatePass&&(n.injectorIndex=e.length,Af(r.data,n),Af(e,null),Af(r.blueprint,null));let i=ep(n,e),o=n.injectorIndex;if(PI(i)){let s=Jc(i),a=Zc(i,e),u=a[te].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Af(n,e){n.push(0,0,0,0,0,0,0,0,e)}function FI(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function ep(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=UI(i),r===null)return qi;if(t++,i=i[Zi],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return qi}function Zf(n,e,t){Nx(n,e,t)}function Rx(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(Kw(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function VI(n,e,t){if(t&se.Optional||n!==void 0)return n;Uh(e,"NodeInjector")}function LI(n,e,t,r){if(t&se.Optional&&r===void 0&&(r=null),!(t&(se.Self|se.Host))){let i=n[Wi],o=gt(void 0);try{return i?i.get(e,r,t&se.Optional):$w(e,r,t&se.Optional)}finally{gt(o)}}return VI(r,e,t)}function jI(n,e,t,r=se.Default,i){if(n!==null){if(e[q]&2048&&!(r&se.Self)){let s=Fx(n,e,t,r,sn);if(s!==sn)return s}let o=BI(n,e,t,r,sn);if(o!==sn)return o}return LI(e,t,r,i)}function BI(n,e,t,r,i){let o=Ox(t);if(typeof o=="function"){if(!CI(e,n,r))return r&se.Host?VI(i,t,r):LI(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&se.Optional))Uh(t);else return s}finally{MI()}}else if(typeof o=="number"){let s=null,a=FI(n,e),u=qi,l=r&se.Host?e[cn][Kt]:null;for((a===-1||r&se.SkipSelf)&&(u=a===-1?ep(n,e):e[a+8],u===qi||!iw(r,!1)?a=-1:(s=e[te],a=Jc(u),e=Zc(u,e)));a!==-1;){let f=e[te];if(rw(o,a,f.data)){let p=Px(a,e,t,s,r,l);if(p!==sn)return p}u=e[a+8],u!==qi&&iw(r,e[te].data[a+8]===l)&&rw(o,a,e)?(s=f,a=Jc(u),e=Zc(u,e)):a=-1}}return i}function Px(n,e,t,r,i,o){let s=e[te],a=s.data[n+8],u=r==null?vu(a)&&Jf:r!=s&&(a.type&3)!==0,l=i&se.Host&&o===a,f=Uc(a,s,t,u,l);return f!==null?Ur(e,s,f,a):sn}function Uc(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,f=o>>20,p=r?a:a+f,g=i?a+f:l;for(let y=p;y<g;y++){let T=s[y];if(y<u&&t===T||y>=u&&T.type===t)return y}if(i){let y=s[u];if(y&&Yn(y)&&y.type===t)return u}return null}function Ur(n,e,t,r){let i=n[t],o=e.data;if(Tx(i)){let s=i;s.resolving&&nA(tA(o[t]));let a=Xc(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?gt(s.injectImpl):null,f=CI(n,r,se.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&Dx(t,o[t],e)}finally{l!==null&&gt(l),Xc(a),s.resolving=!1,MI()}}return i}function Ox(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ws)?n[ws]:void 0;return typeof e=="number"?e>=0?e&OI:kx:e}function rw(n,e,t){let r=1<<n;return!!(t[e+(n>>kI)]&r)}function iw(n,e){return!(n&se.Self)&&!(n&se.Host&&e)}var kr=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return jI(this._tNode,this._lView,e,mu(r),t)}};function kx(){return new kr(Ze(),K())}function A$(n){return Ns(()=>{let e=n.prototype.constructor,t=e[qc]||Xf(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[qc]||Xf(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Xf(n){return Fw(n)?()=>{let e=Xf(st(n));return e&&e()}:Fr(n)}function Fx(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[q]&2048&&!(s[q]&512);){let a=BI(o,s,t,r|se.Self,sn);if(a!==sn)return a;let u=o.parent;if(!u){let l=s[uI];if(l){let f=l.get(t,sn,r);if(f!==sn)return f}u=UI(s),s=s[Zi]}o=u}return i}function UI(n){let e=n[te],t=e.type;return t===2?e.declTNode:t===1?n[Kt]:null}function Vx(n){return Rx(Ze(),n)}function ow(n,e=null,t=null,r){let i=$I(n,e,t,r);return i.resolveInjectorInitializers(),i}function $I(n,e=null,t=null,r,i=new Set){let o=[t||yt,kA(n)];return r=r||(typeof n=="object"?void 0:at(n)),new bs(o,e||zh(),r||null,i)}var Xi=(()=>{class n{static{this.THROW_IF_NOT_FOUND=Is}static{this.NULL=new Kc}static create(t,r){if(Array.isArray(t))return ow({name:""},r,t,"");{let i=t.name??"";return ow({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=fe({token:n,providedIn:"any",factory:()=>Pe(zw)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();var Lx="ngOriginalError";function xf(n){return n[Lx]}var Jn=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&xf(e);for(;t&&xf(t);)t=xf(t);return t||null}},HI=new ye("",{providedIn:"root",factory:()=>de(Jn).handleError.bind(void 0)}),Au=(()=>{class n{static{this.__NG_ELEMENT_ID__=jx}static{this.__NG_ENV_ID__=t=>t}}return n})(),eh=class extends Au{constructor(e){super(),this._lView=e}onDestroy(e){return wI(this._lView,e),()=>ox(this._lView,e)}};function jx(){return new eh(K())}function Bx(){return eo(Ze(),K())}function eo(n,e){return new Wr(Ot(n,e))}var Wr=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=Bx}}return n})();function Ux(n){return n instanceof Wr?n.nativeElement:n}var th=class extends Nt{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,aI()&&(this.destroyRef=de(Au,{optional:!0})??void 0)}emit(e){let t=ue(null);try{super.next(e)}finally{ue(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=Mf(o),i&&(i=Mf(i)),s&&(s=Mf(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof je&&e.add(a),a}};function Mf(n){return e=>{setTimeout(n,void 0,e)}}var Pr=th;function $x(){return this._results[Symbol.iterator]()}var nh=class n{get changes(){return this._changes??=new Pr}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=$x)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=mA(e);(this._changesDetected=!pA(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function qI(n){return(n.flags&128)===128}var zI=new Map,Hx=0;function qx(){return Hx++}function zx(n){zI.set(n[_u],n)}function Gx(n){zI.delete(n[_u])}var sw="__ngContext__";function Zn(n,e){Or(e)?(n[sw]=e[_u],zx(e)):n[sw]=e}function GI(n){return KI(n[Cs])}function WI(n){return KI(n[zt])}function KI(n){for(;n!==null&&!In(n);)n=n[zt];return n}var rh;function x$(n){rh=n}function QI(){if(rh!==void 0)return rh;if(typeof document<"u")return document;throw new le(210,!1)}var M$=new ye("",{providedIn:"root",factory:()=>Wx}),Wx="ng",Kx=new ye(""),tp=new ye("",{providedIn:"platform",factory:()=>"unknown"});var N$=new ye(""),R$=new ye("",{providedIn:"root",factory:()=>QI().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Qx="h",Yx="b";var Jx=()=>null;function np(n,e,t=!1){return Jx(n,e,t)}var YI=!1,Zx=new ye("",{providedIn:"root",factory:()=>YI});var Rc;function Xx(){if(Rc===void 0&&(Rc=null,Rt.trustedTypes))try{Rc=Rt.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Rc}function xu(n){return Xx()?.createHTML(n)||n}var Pc;function JI(){if(Pc===void 0&&(Pc=null,Rt.trustedTypes))try{Pc=Rt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Pc}function aw(n){return JI()?.createHTML(n)||n}function cw(n){return JI()?.createScriptURL(n)||n}var tu=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Rw})`}};function to(n){return n instanceof tu?n.changingThisBreaksApplicationSecurity:n}function rp(n,e){let t=eM(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Rw})`)}return t===e}function eM(n){return n instanceof tu&&n.getTypeName()||null}function tM(n){let e=new oh(n);return nM()?new ih(e):e}var ih=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(xu(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}},oh=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=xu(e),t}};function nM(){try{return!!new window.DOMParser().parseFromString(xu(""),"text/html")}catch{return!1}}var rM=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function ZI(n){return n=String(n),n.match(rM)?n:"unsafe:"+n}function Dn(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function Os(...n){let e={};for(let t of n)for(let r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}var XI=Dn("area,br,col,hr,img,wbr"),eE=Dn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),tE=Dn("rp,rt"),iM=Os(tE,eE),oM=Os(eE,Dn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),sM=Os(tE,Dn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),uw=Os(XI,oM,sM,iM),nE=Dn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),aM=Dn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),cM=Dn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),uM=Os(nE,aM,cM),lM=Dn("script,style,template"),sh=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild){i.push(t),t=hM(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=fM(t);if(o){t=o;break}t=i.pop()}}return this.buf.join("")}startElement(e){let t=lw(e).toLowerCase();if(!uw.hasOwnProperty(t))return this.sanitizedSomething=!0,!lM.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let r=e.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),s=o.name,a=s.toLowerCase();if(!uM.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let u=o.value;nE[a]&&(u=ZI(u)),this.buf.push(" ",s,'="',dw(u),'"')}return this.buf.push(">"),!0}endElement(e){let t=lw(e).toLowerCase();uw.hasOwnProperty(t)&&!XI.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(dw(e))}};function dM(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function fM(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw rE(e);return e}function hM(n){let e=n.firstChild;if(e&&dM(n,e))throw rE(e);return e}function lw(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function rE(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var pM=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,mM=/([^\#-~ |!])/g;function dw(n){return n.replace(/&/g,"&amp;").replace(pM,function(e){let t=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(mM,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Oc;function gM(n,e){let t=null;try{Oc=Oc||tM(n);let r=e?String(e):"";t=Oc.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=t.innerHTML,t=Oc.getInertBodyElement(r)}while(r!==o);let a=new sh().sanitizeChildren(fw(t)||t);return xu(a)}finally{if(t){let r=fw(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function fw(n){return"content"in n&&yM(n)?n.content:null}function yM(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var Mu=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Mu||{});function P$(n){let e=ip();return e?aw(e.sanitize(Mu.HTML,n)||""):rp(n,"HTML")?aw(to(n)):gM(QI(),an(n))}function _M(n){let e=ip();return e?e.sanitize(Mu.URL,n)||"":rp(n,"URL")?to(n):ZI(an(n))}function vM(n){let e=ip();if(e)return cw(e.sanitize(Mu.RESOURCE_URL,n)||"");if(rp(n,"ResourceURL"))return cw(to(n));throw new le(904,!1)}function wM(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?vM:_M}function O$(n,e,t){return wM(e,t)(n)}function ip(){let n=K();return n&&n[Wt].sanitizer}var IM=/^>|^->|<!--|-->|--!>|<!-$/g,EM=/(<|>)/g,DM="\u200B$1\u200B";function bM(n){return n.replace(IM,e=>e.replace(EM,DM))}function k$(n){return n.ownerDocument}function iE(n){return n instanceof Function?n():n}function TM(n){return(n??de(Xi)).get(tp)==="browser"}var nu=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(nu||{}),CM;function op(n,e){return CM(n,e)}function Ui(n,e,t,r,i){if(r!=null){let o,s=!1;In(r)?o=r:Or(r)&&(s=!0,r=r[wn]);let a=un(r);n===0&&t!==null?i==null?uE(e,t,a):ru(e,t,a,i||null,!0):n===1&&t!==null?ru(e,t,a,i||null,!0):n===2?qM(e,a,s):n===3&&e.destroyNode(a),o!=null&&GM(e,n,o,t,i)}}function SM(n,e){return n.createText(e)}function AM(n,e,t){n.setValue(e,t)}function xM(n,e){return n.createComment(bM(e))}function oE(n,e,t){return n.createElement(e,t)}function MM(n,e){sE(n,e),e[wn]=null,e[Kt]=null}function NM(n,e,t,r,i,o){r[wn]=i,r[Kt]=e,Ru(n,r,t,1,i,o)}function sE(n,e){e[Wt].changeDetectionScheduler?.notify(1),Ru(n,e,e[Me],2,null,null)}function RM(n){let e=n[Cs];if(!e)return Nf(n[te],n);for(;e;){let t=null;if(Or(e))t=e[Cs];else{let r=e[bt];r&&(t=r)}if(!t){for(;e&&!e[zt]&&e!==n;)Or(e)&&Nf(e[te],e),e=e[Ke];e===null&&(e=n),Or(e)&&Nf(e[te],e),t=e&&e[zt]}e=t}}function PM(n,e,t,r){let i=bt+r,o=t.length;r>0&&(t[i-1][zt]=e),r<o-bt?(e[zt]=t[i],qw(t,bt+r,e)):(t.push(e),e[zt]=null),e[Ke]=t;let s=e[Ps];s!==null&&t!==s&&OM(s,e);let a=e[vn];a!==null&&a.insertView(n),Qf(e),e[q]|=128}function OM(n,e){let t=n[Ki],i=e[Ke][Ke][cn];e[cn]!==i&&(n[q]|=Gh.HasTransplantedViews),t===null?n[Ki]=[e]:t.push(e)}function aE(n,e){let t=n[Ki],r=t.indexOf(e);t.splice(r,1)}function ah(n,e){if(n.length<=bt)return;let t=bt+e,r=n[t];if(r){let i=r[Ps];i!==null&&i!==n&&aE(i,r),e>0&&(n[t-1][zt]=r[zt]);let o=Gc(n,bt+e);MM(r[te],r);let s=o[vn];s!==null&&s.detachView(o[te]),r[Ke]=null,r[zt]=null,r[q]&=-129}return r}function cE(n,e){if(!(e[q]&256)){let t=e[Me];t.destroyNode&&Ru(n,e,t,3,null,null),RM(e)}}function Nf(n,e){if(e[q]&256)return;let t=ue(null);try{e[q]&=-129,e[q]|=256,e[Vr]&&Df(e[Vr]),FM(n,e),kM(n,e),e[te].type===1&&e[Me].destroy();let r=e[Ps];if(r!==null&&In(e[Ke])){r!==e[Ke]&&aE(r,e);let i=e[vn];i!==null&&i.detachView(n)}Gx(e)}finally{ue(t)}}function kM(n,e){let t=n.cleanup,r=e[Ts];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[Ts]=null);let i=e[Gn];if(i!==null){e[Gn]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function FM(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Br)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];on(4,a,u);try{u.call(a)}finally{on(5,a,u)}}else{on(4,i,o);try{o.call(i)}finally{on(5,i,o)}}}}}function VM(n,e,t){return LM(n,e.parent,t)}function LM(n,e,t){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return t[wn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Es.None||o===Es.Emulated)return null}return Ot(r,t)}}function ru(n,e,t,r,i){n.insertBefore(e,t,r,i)}function uE(n,e,t){n.appendChild(e,t)}function hw(n,e,t,r,i){r!==null?ru(n,e,t,r,i):uE(n,e,t)}function jM(n,e,t,r){n.removeChild(e,t,r)}function sp(n,e){return n.parentNode(e)}function BM(n,e){return n.nextSibling(e)}function UM(n,e,t){return HM(n,e,t)}function $M(n,e,t){return n.type&40?Ot(n,t):null}var HM=$M,pw;function Nu(n,e,t,r){let i=VM(n,r,e),o=e[Me],s=r.parent||e[Kt],a=UM(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)hw(o,i,t[u],a,!1);else hw(o,i,t,a,!1);pw!==void 0&&pw(o,r,e,t,i)}function $c(n,e){if(e!==null){let t=e.type;if(t&3)return Ot(e,n);if(t&4)return ch(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return $c(n,r);{let i=n[e.index];return In(i)?ch(-1,i):un(i)}}else{if(t&32)return op(e,n)()||un(n[e.index]);{let r=lE(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=As(n[cn]);return $c(i,r)}else return $c(n,e.next)}}}return null}function lE(n,e){if(e!==null){let r=n[cn][Kt],i=e.projection;return r.projection[i]}return null}function ch(n,e){let t=bt+n+1;if(t<e.length){let r=e[t],i=r[te].firstChild;if(i!==null)return $c(r,i)}return e[Lr]}function qM(n,e,t){let r=sp(n,e);r&&jM(n,r,e,t)}function ap(n,e,t,r,i,o,s){for(;t!=null;){let a=r[t.index],u=t.type;if(s&&e===0&&(a&&Zn(un(a),r),t.flags|=2),(t.flags&32)!==32)if(u&8)ap(n,e,t.child,r,i,o,!1),Ui(e,n,i,a,o);else if(u&32){let l=op(t,r),f;for(;f=l();)Ui(e,n,i,f,o);Ui(e,n,i,a,o)}else u&16?zM(n,e,r,t,i,o):Ui(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Ru(n,e,t,r,i,o){ap(t,r,n.firstChild,e,i,o,!1)}function zM(n,e,t,r,i,o){let s=t[cn],u=s[Kt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let f=u[l];Ui(e,n,i,f,o)}else{let l=u,f=s[Ke];qI(r)&&(l.flags|=128),ap(n,e,l,f,i,o,!0)}}function GM(n,e,t,r,i){let o=t[Lr],s=un(t);o!==s&&Ui(e,n,r,o,i);for(let a=bt;a<t.length;a++){let u=t[a];Ru(u[te],u,n,e,r,o)}}function WM(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:nu.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=nu.Important),n.setStyle(t,r,i,o))}}function KM(n,e,t){n.setAttribute(e,"style",t)}function dE(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function fE(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&qf(n,e,r),i!==null&&dE(n,e,i),o!==null&&KM(n,e,o)}var ct={};function F$(n=1){hE(Ne(),K(),En()+n,!1)}function hE(n,e,t,r){if(!r)if((e[q]&3)===3){let o=n.preOrderCheckHooks;o!==null&&jc(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Bc(e,o,0,t)}jr(t)}function Be(n,e=se.Default){let t=K();if(t===null)return Pe(n,e);let r=Ze();return jI(r,t,st(n),e)}function V$(){let n="invalid";throw new Error(n)}function pE(n,e,t,r,i,o){let s=ue(null);try{let a=null;i&Wn.SignalBased&&(a=e[r][rn]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Wn.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):dI(e,a,r,o)}finally{ue(s)}}function QM(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)jr(~i);else{let o=i,s=t[++r],a=t[++r];gx(s,o);let u=e[o];a(2,u)}}}finally{jr(-1)}}function Pu(n,e,t,r,i,o,s,a,u,l,f){let p=e.blueprint.slice();return p[wn]=i,p[q]=r|4|128|8|64,(l!==null||n&&n[q]&2048)&&(p[q]|=2048),vI(p),p[Ke]=p[Zi]=n,p[Gt]=t,p[Wt]=s||n&&n[Wt],p[Me]=a||n&&n[Me],p[Wi]=u||n&&n[Wi]||null,p[Kt]=o,p[_u]=qx(),p[Qc]=f,p[uI]=l,p[cn]=e.type==2?n[cn]:p,p}function ks(n,e,t,r,i){let o=n.data[e];if(o===null)o=YM(n,e,t,r,i),mx()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=fx();o.injectorIndex=s===null?-1:s.injectorIndex}return Gr(o,!0),o}function YM(n,e,t,r,i){let o=EI(),s=Yh(),a=s?o:o&&o.parent,u=n.data[e]=nN(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function mE(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function gE(n,e,t,r,i){let o=En(),s=r&2;try{jr(-1),s&&e.length>_t&&hE(n,e,_t,!1),on(s?2:0,i),t(r,i)}finally{jr(o),on(s?3:1,i)}}function cp(n,e,t){if(Wh(e)){let r=ue(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{ue(r)}}}function up(n,e,t){II()&&(cN(n,e,t,Ot(t,e)),(t.flags&64)===64&&vE(n,e,t))}function lp(n,e,t=Ot){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function yE(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=dp(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function dp(n,e,t,r,i,o,s,a,u,l,f){let p=_t+r,g=p+i,y=JM(p,g),T=typeof l=="function"?l():l;return y[te]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:T,incompleteFirstPass:!1,ssrId:f}}function JM(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:ct);return t}function ZM(n,e,t,r){let o=r.get(Zx,YI)||t===Es.ShadowDom,s=n.selectRootElement(e,o);return XM(s),s}function XM(n){eN(n)}var eN=()=>null;function tN(n,e,t,r){let i=EE(e);i.push(t),n.firstCreatePass&&DE(n).push(r,i.length-1)}function nN(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return ux()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function mw(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=Wn.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?gw(r,t,l,a,u):gw(r,t,l,a)}return r}function gw(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function rN(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],u=null,l=null;for(let f=r;f<i;f++){let p=o[f],g=t?t.get(p):null,y=g?g.inputs:null,T=g?g.outputs:null;u=mw(0,p.inputs,f,u,y),l=mw(1,p.outputs,f,l,T);let x=u!==null&&s!==null&&!Hh(e)?vN(u,f,s):null;a.push(x)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function iN(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function fp(n,e,t,r,i,o,s,a){let u=Ot(e,t),l=e.inputs,f;!a&&l!=null&&(f=l[r])?(pp(n,t,f,r,i),vu(e)&&oN(t,e.index)):e.type&3?(r=iN(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function oN(n,e){let t=er(e,n);t[q]&16||(t[q]|=64)}function hp(n,e,t,r){if(II()){let i=r===null?null:{"":-1},o=lN(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&_E(n,e,t,s,i,a),i&&dN(t,r,i)}t.mergedAttrs=Ds(t.mergedAttrs,t.attrs)}function _E(n,e,t,r,i,o){for(let l=0;l<r.length;l++)Zf(eu(t,e),n,r[l].type);hN(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let f=r[l];f.providersResolver&&f.providersResolver(f)}let s=!1,a=!1,u=mE(n,e,r.length,null);for(let l=0;l<r.length;l++){let f=r[l];t.mergedAttrs=Ds(t.mergedAttrs,f.hostAttrs),pN(n,t,e,u,f),fN(u,f,i),f.contentQueries!==null&&(t.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(t.flags|=64);let p=f.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}rN(n,t,o)}function sN(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;aN(s)!=a&&s.push(a),s.push(t,r,o)}}function aN(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function cN(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;vu(t)&&mN(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||eu(t,e),Zn(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let u=n.data[a],l=Ur(e,n,a,t);if(Zn(l,e),s!==null&&_N(e,a-i,l,u,t,s),Yn(u)){let f=er(t.index,e);f[Gt]=Ur(e,n,a,t)}}}function vE(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=yx();try{jr(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Yf(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&uN(u,l)}}finally{jr(-1),Yf(s)}}function uN(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function lN(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(bA(e,s.selectors,!1))if(r||(r=[]),Yn(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;uh(n,e,u)}else r.unshift(s),uh(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function uh(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function dN(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new le(-301,!1);r.push(e[i],o)}}}function fN(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Yn(e)&&(t[""]=n)}}function hN(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function pN(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Fr(i.type,!0)),s=new Br(o,Yn(i),Be);n.blueprint[r]=s,t[r]=s,sN(n,e,r,mE(n,t,i.hostVars,ct),i)}function mN(n,e,t){let r=Ot(e,n),i=yE(t),o=n[Wt].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=Ou(n,Pu(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function gN(n,e,t,r,i,o){let s=Ot(n,e);yN(e[Me],s,o,n.value,t,r,i)}function yN(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?an(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function _N(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],f=s[a++],p=s[a++];pE(r,t,u,l,f,p)}}function vN(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function wE(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function IE(n,e){let t=n.contentQueries;if(t!==null){let r=ue(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];Jh(o),a.contentQueries(2,e[s],s)}}}finally{ue(r)}}}function Ou(n,e){return n[Cs]?n[ew][zt]=e:n[Cs]=e,n[ew]=e,e}function lh(n,e,t){Jh(0);let r=ue(null);try{e(n,t)}finally{ue(r)}}function EE(n){return n[Ts]||(n[Ts]=[])}function DE(n){return n.cleanup||(n.cleanup=[])}function bE(n,e){let t=n[Wi],r=t?t.get(Jn,null):null;r&&r.handleError(e)}function pp(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],u=t[o++],l=e[s],f=n.data[s];pE(f,l,r,a,u,i)}}function mp(n,e,t){let r=yI(e,n);AM(n[Me],r,t)}function wN(n,e){let t=er(e,n),r=t[te];IN(r,t);let i=t[wn];i!==null&&t[Qc]===null&&(t[Qc]=np(i,t[Wi])),gp(r,t,t[Gt])}function IN(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function gp(n,e,t){Zh(e);try{let r=n.viewQuery;r!==null&&lh(1,r,t);let i=n.template;i!==null&&gE(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[vn]?.finishViewCreation(n),n.staticContentQueries&&IE(n,e),n.staticViewQueries&&lh(2,n.viewQuery,t);let o=n.components;o!==null&&EN(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[q]&=-5,Xh()}}function EN(n,e){for(let t=0;t<e.length;t++)wN(n,e[t])}function DN(n,e,t,r){let i=ue(null);try{let o=e.tView,a=n[q]&4096?4096:16,u=Pu(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Ps]=l;let f=n[vn];return f!==null&&(u[vn]=f.createEmbeddedView(o)),gp(o,u,t),u}finally{ue(i)}}function yw(n,e){return!e||e.firstChild===null||qI(n)}function bN(n,e,t,r=!0){let i=e[te];if(PM(i,e,n,t),r){let s=ch(t,n),a=e[Me],u=sp(a,n[Lr]);u!==null&&NM(i,n[Kt],a,e,u,s)}let o=e[Qc];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function iu(n,e,t,r,i=!1){for(;t!==null;){let o=e[t.index];o!==null&&r.push(un(o)),In(o)&&TN(o,r);let s=t.type;if(s&8)iu(n,e,t.child,r);else if(s&32){let a=op(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=lE(e,t);if(Array.isArray(a))r.push(...a);else{let u=As(e[cn]);iu(u[te],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function TN(n,e){for(let t=bt;t<n.length;t++){let r=n[t],i=r[te].firstChild;i!==null&&iu(r[te],r,i,e)}n[Lr]!==n[wn]&&e.push(n[Lr])}var TE=[];function CN(n){return n[Vr]??SN(n)}function SN(n){let e=TE.pop()??Object.create(xN);return e.lView=n,e}function AN(n){n.lView[Vr]!==n&&(n.lView=null,TE.push(n))}var xN=Re(ie({},vs),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Ss(n.lView)},consumerOnSignalRead(){this.lView[Vr]=this}}),CE=100;function SE(n,e=!0,t=0){let r=n[Wt],i=r.rendererFactory,o=!1;o||i.begin?.();try{MN(n,t)}catch(s){throw e&&bE(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function MN(n,e){dh(n,e);let t=0;for(;Qh(n);){if(t===CE)throw new le(103,!1);t++,dh(n,1)}}function NN(n,e,t,r){let i=e[q];if((i&256)===256)return;let o=!1;!o&&e[Wt].inlineEffectRunner?.flush(),Zh(e);let s=null,a=null;!o&&RN(n)&&(a=CN(e),s=Sc(a));try{vI(e),px(n.bindingStartIndex),t!==null&&gE(n,e,t,2,r);let u=(i&3)===3;if(!o)if(u){let p=n.preOrderCheckHooks;p!==null&&jc(e,p,null)}else{let p=n.preOrderHooks;p!==null&&Bc(e,p,0,null),Sf(e,0)}if(PN(e),AE(e,0),n.contentQueries!==null&&IE(n,e),!o)if(u){let p=n.contentCheckHooks;p!==null&&jc(e,p)}else{let p=n.contentHooks;p!==null&&Bc(e,p,1),Sf(e,1)}QM(n,e);let l=n.components;l!==null&&ME(e,l,0);let f=n.viewQuery;if(f!==null&&lh(2,f,r),!o)if(u){let p=n.viewCheckHooks;p!==null&&jc(e,p)}else{let p=n.viewHooks;p!==null&&Bc(e,p,2),Sf(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Lc]){for(let p of e[Lc])p();e[Lc]=null}o||(e[q]&=-73)}catch(u){throw Ss(e),u}finally{a!==null&&(Ac(a,s),AN(a)),Xh()}}function RN(n){return n.type!==2}function AE(n,e){for(let t=GI(n);t!==null;t=WI(t))for(let r=bt;r<t.length;r++){let i=t[r];xE(i,e)}}function PN(n){for(let e=GI(n);e!==null;e=WI(e)){if(!(e[q]&Gh.HasTransplantedViews))continue;let t=e[Ki];for(let r=0;r<t.length;r++){let i=t[r],o=i[Ke];rx(i)}}}function ON(n,e,t){let r=er(e,n);xE(r,t)}function xE(n,e){Kh(n)&&dh(n,e)}function dh(n,e){let r=n[te],i=n[q],o=n[Vr],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&xc(o)),o&&(o.dirty=!1),n[q]&=-9217,s)NN(r,n,r.template,n[Gt]);else if(i&8192){AE(n,1);let a=r.components;a!==null&&ME(n,a,1)}}function ME(n,e,t){for(let r=0;r<e.length;r++)ON(n,e[r],t)}function yp(n){for(n[Wt].changeDetectionScheduler?.notify();n;){n[q]|=64;let e=As(n);if(KA(n)&&!e)return n;n=e}return null}var $r=class{get rootNodes(){let e=this._lView,t=e[te];return iu(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Gt]}set context(e){this._lView[Gt]=e}get destroyed(){return(this._lView[q]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ke];if(In(e)){let t=e[Yc],r=t?t.indexOf(this):-1;r>-1&&(ah(e,r),Gc(t,r))}this._attachedToViewContainer=!1}cE(this._lView[te],this._lView)}onDestroy(e){wI(this._lView,e)}markForCheck(){yp(this._cdRefInjectingView||this._lView)}detach(){this._lView[q]&=-129}reattach(){Qf(this._lView),this._lView[q]|=128}detectChanges(){this._lView[q]|=1024,SE(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new le(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,sE(this._lView[te],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new le(902,!1);this._appRef=e,Qf(this._lView)}},Hr=(()=>{class n{static{this.__NG_ELEMENT_ID__=VN}}return n})(),kN=Hr,FN=class extends kN{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=DN(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new $r(i)}};function VN(){return ku(Ze(),K())}function ku(n,e){return n.type&4?new FN(e,n,eo(n,e)):null}var j$=new RegExp(`^(\\d+)*(${Yx}|${Qx})*(.*)`);var LN=()=>null;function _w(n,e){return LN(n,e)}var ou=class{},fh=class{},su=class{};function jN(n){let e=Error(`No component factory found for ${at(n)}.`);return e[BN]=n,e}var BN="ngComponent";var hh=class{resolveComponentFactory(e){throw jN(e)}},Fu=(()=>{class n{static{this.NULL=new hh}}return n})(),ph=class{},_p=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>UN()}}return n})();function UN(){let n=K(),e=Ze(),t=er(e.index,n);return(Or(t)?t:n)[Me]}var $N=(()=>{class n{static{this.\u0275prov=fe({token:n,providedIn:"root",factory:()=>null})}}return n})(),Rf={};var vw=new Set;function no(n){vw.has(n)||(vw.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function ww(...n){}function HN(){let n=typeof Rt.requestAnimationFrame=="function",e=Rt[n?"requestAnimationFrame":"setTimeout"],t=Rt[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}var Pt=class n{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Pr(!1),this.onMicrotaskEmpty=new Pr(!1),this.onStable=new Pr(!1),this.onError=new Pr(!1),typeof Zone>"u")throw new le(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=HN().nativeRequestAnimationFrame,GN(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new le(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new le(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,qN,ww,ww);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},qN={};function vp(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function zN(n){n.isCheckStableRunning||n.lastRequestAnimationFrameId!==-1||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Rt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,mh(n),n.isCheckStableRunning=!0,vp(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),mh(n))}function GN(n){let e=()=>{zN(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,s,a)=>{if(WN(a))return t.invokeTask(i,o,s,a);try{return Iw(n),t.invokeTask(i,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Ew(n)}},onInvoke:(t,r,i,o,s,a,u)=>{try{return Iw(n),t.invoke(i,o,s,a,u)}finally{n.shouldCoalesceRunChangeDetection&&e(),Ew(n)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,mh(n),vp(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function mh(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.lastRequestAnimationFrameId!==-1?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Iw(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Ew(n){n._nesting--,vp(n)}function WN(n){return!Array.isArray(n)||n.length!==1?!1:n[0].data?.__ignore_ng_zone__===!0}var $i=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}($i||{}),KN={destroy(){}};function QN(n,e){!e&&cI(QN);let t=e?.injector??de(Xi);if(!TM(t))return KN;no("NgAfterNextRender");let r=t.get(wp),i=r.handler??=new yh,o=e?.phase??$i.MixedReadWrite,s=()=>{i.unregister(u),a()},a=t.get(Au).onDestroy(s),u=GA(t,()=>new gh(o,()=>{s(),n()}));return i.register(u),{destroy:s}}var gh=class{constructor(e,t){this.phase=e,this.callbackFn=t,this.zone=de(Pt),this.errorHandler=de(Jn,{optional:!0}),de(ou,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},yh=class{constructor(){this.executingCallbacks=!1,this.buckets={[$i.EarlyRead]:new Set,[$i.Write]:new Set,[$i.MixedReadWrite]:new Set,[$i.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let t of e)t.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},wp=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let t=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of t)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=fe({token:n,providedIn:"root",factory:()=>new n})}}return n})();function au(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Bf(i,a);else if(o==2){let u=a,l=e[++s];r=Bf(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var cu=class extends Fu{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Kn(e);return new Yi(t,this.ngModule)}};function Dw(n){let e=[];for(let t in n){if(!n.hasOwnProperty(t))continue;let r=n[t];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:t})}return e}function YN(n){let e=n.toLowerCase();return e==="svg"?gI:e==="math"?ZA:null}var _h=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=mu(r);let i=this.injector.get(e,Rf,r);return i!==Rf||t===Rf?i:this.parentInjector.get(e,t,r)}},Yi=class extends su{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=Dw(e.inputs);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return Dw(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=AA(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=ue(null);try{i=i||this.ngModule;let s=i instanceof Qn?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new _h(e,s):e,u=a.get(ph,null);if(u===null)throw new le(407,!1);let l=a.get($N,null),f=a.get(wp,null),p=a.get(ou,null),g={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:f,changeDetectionScheduler:p},y=u.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",x=r?ZM(y,r,this.componentDef.encapsulation,a):oE(y,T,YN(T)),N=512;this.componentDef.signals?N|=4096:this.componentDef.onPush||(N|=16);let F=null;x!==null&&(F=np(x,a,!0));let j=dp(0,null,null,1,0,null,null,null,null,null,null),L=Pu(null,j,null,N,null,null,g,y,a,null,F);Zh(L);let Q,J;try{let z=this.componentDef,I,_=null;z.findHostDirectiveDefs?(I=[],_=new Map,z.findHostDirectiveDefs(z,I,_),I.push(z)):I=[z];let w=JN(L,x),D=ZN(w,x,z,I,L,g,y);J=_I(j,_t),x&&t1(y,z,x,r),t!==void 0&&n1(J,this.ngContentSelectors,t),Q=e1(D,z,I,_,L,[r1]),gp(j,L,null)}finally{Xh()}return new vh(this.componentType,Q,eo(J,L),L,J)}finally{ue(o)}}},vh=class extends fh{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new $r(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;pp(o[te],o,i,e,t),this.previousInputValues.set(e,t);let s=er(this._tNode.index,o);yp(s)}}get injector(){return new kr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function JN(n,e){let t=n[te],r=_t;return n[r]=e,ks(t,r,2,"#host",null)}function ZN(n,e,t,r,i,o,s){let a=i[te];XN(r,n,e,s);let u=null;e!==null&&(u=np(e,i[Wi]));let l=o.rendererFactory.createRenderer(e,t),f=16;t.signals?f=4096:t.onPush&&(f=64);let p=Pu(i,yE(t),null,f,i[n.index],n,o,l,null,null,u);return a.firstCreatePass&&uh(a,n,r.length-1),Ou(i,p),i[n.index]=p}function XN(n,e,t,r){for(let i of n)e.mergedAttrs=Ds(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(au(e,e.mergedAttrs,!0),t!==null&&fE(r,t,e))}function e1(n,e,t,r,i,o){let s=Ze(),a=i[te],u=Ot(s,i);_E(a,i,s,t,null,r);for(let f=0;f<t.length;f++){let p=s.directiveStart+f,g=Ur(i,a,p,s);Zn(g,i)}vE(a,i,s),u&&Zn(u,i);let l=Ur(i,a,s.directiveStart+s.componentOffset,s);if(n[Gt]=i[Gt]=l,o!==null)for(let f of o)f(l,e);return cp(a,s,i),l}function t1(n,e,t,r){if(r)qf(n,t,["ng-version","17.3.12"]);else{let{attrs:i,classes:o}=xA(e.selectors[0]);i&&qf(n,t,i),o&&o.length>0&&dE(n,t,o.join(" "))}}function n1(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function r1(){let n=Ze();Su(K()[te],n)}var ro=(()=>{class n{static{this.__NG_ELEMENT_ID__=i1}}return n})();function i1(){let n=Ze();return RE(n,K())}var o1=ro,NE=class extends o1{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return eo(this._hostTNode,this._hostLView)}get injector(){return new kr(this._hostTNode,this._hostLView)}get parentInjector(){let e=ep(this._hostTNode,this._hostLView);if(PI(e)){let t=Zc(e,this._hostLView),r=Jc(e),i=t[te].data[r+8];return new kr(i,t)}else return new kr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=bw(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-bt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=_w(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,yw(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!WA(e),a;if(s)a=t;else{let T=t||{};a=T.index,r=T.injector,i=T.projectableNodes,o=T.environmentInjector||T.ngModuleRef}let u=s?e:new Yi(Kn(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let x=(s?l:this.parentInjector).get(Qn,null);x&&(o=x)}let f=Kn(u.componentType??{}),p=_w(this._lContainer,f?.id??null),g=p?.firstChild??null,y=u.create(l,i,g,o);return this.insertImpl(y.hostView,a,yw(this._hostTNode,p)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(nx(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Ke],l=new NE(u,u[Kt],u[Ke]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return bN(s,i,o,r),e.attachToViewContainerRef(),qw(Pf(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=bw(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=ah(this._lContainer,t);r&&(Gc(Pf(this._lContainer),t),cE(r[te],r))}detach(e){let t=this._adjustIndex(e,-1),r=ah(this._lContainer,t);return r&&Gc(Pf(this._lContainer),t)!=null?new $r(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function bw(n){return n[Yc]}function Pf(n){return n[Yc]||(n[Yc]=[])}function RE(n,e){let t,r=e[n.index];return In(r)?t=r:(t=wE(r,e,null,n),e[n.index]=t,Ou(e,t)),a1(t,e,n,r),new NE(t,n,e)}function s1(n,e){let t=n[Me],r=t.createComment(""),i=Ot(e,n),o=sp(t,i);return ru(t,o,r,BM(t,i),!1),r}var a1=l1,c1=()=>!1;function u1(n,e,t){return c1(n,e,t)}function l1(n,e,t,r){if(n[Lr])return;let i;t.type&8?i=un(r):i=s1(e,t),n[Lr]=i}var wh=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Ih=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Ip(e,t).matches!==null&&this.queries[t].setDirty()}},uu=class{constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=_1(e):this.predicate=e}},Eh=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Dh=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,d1(t,o)),this.matchTNodeWithReadOption(e,t,Uc(t,e,o,!1,!1))}else r===Hr?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Uc(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Wr||i===ro||i===Hr&&t.type&4)this.addMatch(t.index,-2);else{let o=Uc(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function d1(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function f1(n,e){return n.type&11?eo(n,e):n.type&4?ku(n,e):null}function h1(n,e,t,r){return t===-1?f1(e,n):t===-2?p1(n,e,r):Ur(n,n[te],t,e)}function p1(n,e,t){if(t===Wr)return eo(e,n);if(t===Hr)return ku(e,n);if(t===ro)return RE(e,n)}function PE(n,e,t,r){let i=e[vn].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let f=o[l];a.push(h1(e,f,s[u+1],t.metadata.read))}}i.matches=a}return i.matches}function bh(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=PE(n,e,i,t);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],f=e[-u];for(let p=bt;p<f.length;p++){let g=f[p];g[Ps]===g[Ke]&&bh(g[te],g,l,r)}if(f[Ki]!==null){let p=f[Ki];for(let g=0;g<p.length;g++){let y=p[g];bh(y[te],y,l,r)}}}}}return r}function m1(n,e){return n[vn].queries[e].queryList}function OE(n,e,t){let r=new nh((t&4)===4);return tN(n,e,r,r.destroy),(e[vn]??=new Ih).queries.push(new wh(r))-1}function g1(n,e,t){let r=Ne();return r.firstCreatePass&&(kE(r,new uu(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),OE(r,K(),e)}function y1(n,e,t,r){let i=Ne();if(i.firstCreatePass){let o=Ze();kE(i,new uu(e,t,r),o.index),v1(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return OE(i,K(),t)}function _1(n){return n.split(",").map(e=>e.trim())}function kE(n,e,t){n.queries===null&&(n.queries=new Eh),n.queries.track(new Dh(e,t))}function v1(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function Ip(n,e){return n.queries.getByIndex(e)}function w1(n,e){let t=n[te],r=Ip(t,e);return r.crossesNgTemplate?bh(t,n,e,[]):PE(t,n,r,e)}function I1(n){return typeof n=="function"&&n[rn]!==void 0}function Ep(n,e){no("NgSignals");let t=Uv(n),r=t[rn];return e?.equal&&(r.equal=e.equal),t.set=i=>bf(r,i),t.update=i=>$v(r,i),t.asReadonly=E1.bind(t),t}function E1(){let n=this[rn];if(n.readonlyFn===void 0){let e=()=>this();e[rn]=n,n.readonlyFn=e}return n.readonlyFn}function FE(n){return I1(n)&&typeof n.set=="function"}function D1(n){return Object.getPrototypeOf(n.prototype).constructor}function b1(n){let e=D1(n.type),t=!0,r=[n];for(;e;){let i;if(Yn(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new le(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=kc(n.inputs),s.inputTransforms=kc(n.inputTransforms),s.declaredInputs=kc(n.declaredInputs),s.outputs=kc(n.outputs);let a=i.hostBindings;a&&x1(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&S1(n,u),l&&A1(n,l),T1(n,i),WS(n.outputs,i.outputs),Yn(i)&&i.data.animation){let f=n.data;f.animation=(f.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===b1&&(t=!1)}}e=Object.getPrototypeOf(e)}C1(r)}function T1(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function C1(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ds(i.hostAttrs,t=Ds(t,i.hostAttrs))}}function kc(n){return n===zi?{}:n===yt?[]:n}function S1(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function A1(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function x1(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function M1(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var Xn=class{},Th=class{};var Ch=class extends Xn{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new cu(this);let i=Xw(e);this._bootstrapComponents=iE(i.bootstrap),this._r3Injector=$I(e,t,[{provide:Xn,useValue:this},{provide:Fu,useValue:this.componentFactoryResolver},...r],at(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Sh=class extends Th{constructor(e){super(),this.moduleType=e}create(e){return new Ch(this.moduleType,e,[])}};var lu=class extends Xn{constructor(e){super(),this.componentFactoryResolver=new cu(this),this.instance=null;let t=new bs([...e.providers,{provide:Xn,useValue:this},{provide:Fu,useValue:this.componentFactoryResolver}],e.parent||zh(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function N1(n,e,t=null){return new lu({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var Dp=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ut(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function VE(n){return P1(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function R1(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function P1(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Fs(n,e,t){return n[e]=t}function O1(n,e){return n[e]}function ln(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function xs(n,e,t,r){let i=ln(n,e,t);return ln(n,e+1,r)||i}function LE(n,e,t,r,i){let o=xs(n,e,t,r);return ln(n,e+2,i)||o}function k1(n,e,t,r,i,o){let s=xs(n,e,t,r);return xs(n,e+2,i,o)||s}function F1(n){return(n.flags&32)===32}function V1(n,e,t,r,i,o,s,a,u){let l=e.consts,f=ks(e,n,4,s||null,Qi(l,a));hp(e,t,f,Qi(l,u)),Su(e,f);let p=f.tView=dp(2,f,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,f),p.queries=e.queries.embeddedTView(f)),f}function L1(n,e,t,r,i,o,s,a){let u=K(),l=Ne(),f=n+_t,p=l.firstCreatePass?V1(f,l,u,e,t,r,i,o,s):l.data[f];Gr(p,!1);let g=j1(l,u,p,n);Tu()&&Nu(l,u,g,p),Zn(g,u);let y=wE(g,u,g,p);return u[f]=y,Ou(u,y),u1(y,p,u),wu(p)&&up(l,u,p),s!=null&&lp(u,p,a),L1}var j1=B1;function B1(n,e,t,r){return Cu(!0),e[Me].createComment("")}function U1(n,e,t,r){let i=K(),o=Eu();if(ln(i,o,e)){let s=Ne(),a=bu();gN(a,i,n,e,t,r)}return U1}function bp(n,e,t,r){return ln(n,Eu(),t)?e+an(t)+r:ct}function $1(n,e,t,r,i,o){let s=bI(),a=xs(n,s,t,i);return Du(2),a?e+an(t)+r+an(i)+o:ct}function H1(n,e,t,r,i,o,s,a){let u=bI(),l=LE(n,u,t,i,s);return Du(3),l?e+an(t)+r+an(i)+o+an(s)+a:ct}function Fc(n,e){return n<<17|e<<2}function qr(n){return n>>17&32767}function q1(n){return(n&2)==2}function z1(n,e){return n&131071|e<<17}function Ah(n){return n|2}function Ji(n){return(n&131068)>>2}function Of(n,e){return n&-131069|e<<2}function G1(n){return(n&1)===1}function xh(n){return n|1}function W1(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=qr(s),u=Ji(s);n[r]=t;let l=!1,f;if(Array.isArray(t)){let p=t;f=p[1],(f===null||Rs(p,f)>0)&&(l=!0)}else f=t;if(i)if(u!==0){let g=qr(n[a+1]);n[r+1]=Fc(g,a),g!==0&&(n[g+1]=Of(n[g+1],r)),n[a+1]=z1(n[a+1],r)}else n[r+1]=Fc(a,0),a!==0&&(n[a+1]=Of(n[a+1],r)),a=r;else n[r+1]=Fc(u,0),a===0?a=r:n[u+1]=Of(n[u+1],r),u=r;l&&(n[r+1]=Ah(n[r+1])),Tw(n,f,r,!0),Tw(n,f,r,!1),K1(e,f,n,r,o),s=Fc(a,u),o?e.classBindings=s:e.styleBindings=s}function K1(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Rs(o,e)>=0&&(t[r+1]=xh(t[r+1]))}function Tw(n,e,t,r){let i=n[t+1],o=e===null,s=r?qr(i):Ji(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];Q1(u,e)&&(a=!0,n[s+1]=r?xh(l):Ah(l)),s=r?qr(l):Ji(l)}a&&(n[t+1]=r?Ah(i):xh(i))}function Q1(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Rs(n,e)>=0:!1}var qt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Y1(n){return n.substring(qt.key,qt.keyEnd)}function J1(n){return Z1(n),jE(n,BE(n,0,qt.textEnd))}function jE(n,e){let t=qt.textEnd;return t===e?-1:(e=qt.keyEnd=X1(n,qt.key=e,t),BE(n,e,t))}function Z1(n){qt.key=0,qt.keyEnd=0,qt.value=0,qt.valueEnd=0,qt.textEnd=n.length}function BE(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function X1(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function eR(n,e,t){let r=K(),i=Eu();if(ln(r,i,e)){let o=Ne(),s=bu();fp(o,s,r,n,e,r[Me],t,!1)}return eR}function Mh(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";pp(n,t,o[s],s,r)}function UE(n,e,t){return HE(n,e,t,!1),UE}function tR(n,e){return HE(n,e,null,!0),tR}function U$(n){qE(aR,$E,n,!0)}function $E(n,e){for(let t=J1(e);t>=0;t=jE(e,t))gu(n,Y1(e),!0)}function HE(n,e,t,r){let i=K(),o=Ne(),s=Du(2);if(o.firstUpdatePass&&GE(o,n,s,r),e!==ct&&ln(i,s,e)){let a=o.data[En()];WE(o,a,i,i[Me],n,i[s+1]=uR(e,t),r,s)}}function qE(n,e,t,r){let i=Ne(),o=Du(2);i.firstUpdatePass&&GE(i,null,o,r);let s=K();if(t!==ct&&ln(s,o,t)){let a=i.data[En()];if(KE(a,r)&&!zE(i,o)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(t=Bf(u,t||"")),Mh(i,a,s,t,r)}else cR(i,a,s,s[Me],s[o+1],s[o+1]=sR(n,e,t),r,o)}}function zE(n,e){return e>=n.expandoStartIndex}function GE(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[En()],s=zE(n,t);KE(o,r)&&e===null&&!s&&(e=!1),e=nR(i,o,e,r),W1(i,o,e,t,s,r)}}function nR(n,e,t,r){let i=_x(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=kf(null,n,e,t,r),t=Ms(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=kf(i,n,e,t,r),o===null){let u=rR(n,e,r);u!==void 0&&Array.isArray(u)&&(u=kf(null,n,e,u[1],r),u=Ms(u,e.attrs,r),iR(n,e,r,u))}else o=oR(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function rR(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Ji(r)!==0)return n[qr(r)]}function iR(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[qr(i)]=r}function oR(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Ms(r,s,t)}return Ms(r,e.attrs,t)}function kf(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Ms(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ms(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),gu(n,s,t?!0:e[++o]))}return n===void 0?null:n}function sR(n,e,t){if(t==null||t==="")return yt;let r=[],i=to(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function aR(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&gu(n,r,t)}function cR(n,e,t,r,i,o,s,a){i===ct&&(i=yt);let u=0,l=0,f=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;f!==null||p!==null;){let g=u<i.length?i[u+1]:void 0,y=l<o.length?o[l+1]:void 0,T=null,x;f===p?(u+=2,l+=2,g!==y&&(T=p,x=y)):p===null||f!==null&&f<p?(u+=2,T=f):(l+=2,T=p,x=y),T!==null&&WE(n,e,t,r,T,x,s,a),f=u<i.length?i[u]:null,p=l<o.length?o[l]:null}}function WE(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],f=G1(l)?Cw(u,e,t,i,Ji(l),s):void 0;if(!du(f)){du(o)||q1(l)&&(o=Cw(u,null,t,i,a,s));let p=yI(En(),t);WM(r,s,p,i,o)}}function Cw(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),f=l?u[1]:u,p=f===null,g=t[i+1];g===ct&&(g=p?yt:void 0);let y=p?Tf(g,r):f===r?g:void 0;if(l&&!du(y)&&(y=Tf(u,r)),du(y)&&(a=y,s))return a;let T=n[i+1];i=s?qr(T):Ji(T)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Tf(u,r))}return a}function du(n){return n!==void 0}function uR(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=at(to(n)))),n}function KE(n,e){return(n.flags&(e?8:16))!==0}function $$(n,e,t){let r=K(),i=bp(r,n,e,t);qE(gu,$E,i,!0)}function lR(n,e,t,r,i,o){let s=e.consts,a=Qi(s,i),u=ks(e,n,2,r,a);return hp(e,t,u,Qi(s,o)),u.attrs!==null&&au(u,u.attrs,!1),u.mergedAttrs!==null&&au(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function QE(n,e,t,r){let i=K(),o=Ne(),s=_t+n,a=i[Me],u=o.firstCreatePass?lR(s,o,i,e,t,r):o.data[s],l=fR(o,i,u,a,e,n);i[s]=l;let f=wu(u);return Gr(u,!0),fE(a,l,u),!F1(u)&&Tu()&&Nu(o,i,l,u),sx()===0&&Zn(l,i),ax(),f&&(up(o,i,u),cp(o,u,i)),r!==null&&lp(i,u),QE}function YE(){let n=Ze();Yh()?DI():(n=n.parent,Gr(n,!1));let e=n;lx(e)&&dx(),cx();let t=Ne();return t.firstCreatePass&&(Su(t,n),Wh(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&Cx(e)&&Mh(t,e,K(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Sx(e)&&Mh(t,e,K(),e.stylesWithoutHost,!1),YE}function dR(n,e,t,r){return QE(n,e,t,r),YE(),dR}var fR=(n,e,t,r,i,o)=>(Cu(!0),oE(r,i,Ex()));function hR(n,e,t,r,i){let o=e.consts,s=Qi(o,r),a=ks(e,n,8,"ng-container",s);s!==null&&au(a,s,!0);let u=Qi(o,i);return hp(e,t,a,u),e.queries!==null&&e.queries.elementStart(e,a),a}function pR(n,e,t){let r=K(),i=Ne(),o=n+_t,s=i.firstCreatePass?hR(o,i,r,e,t):i.data[o];Gr(s,!0);let a=gR(i,r,s,n);return r[o]=a,Tu()&&Nu(i,r,a,s),Zn(a,r),wu(s)&&(up(i,r,s),cp(i,s,r)),t!=null&&lp(r,s),pR}function mR(){let n=Ze(),e=Ne();return Yh()?DI():(n=n.parent,Gr(n,!1)),e.firstCreatePass&&(Su(e,n),Wh(n)&&e.queries.elementEnd(n)),mR}var gR=(n,e,t,r)=>(Cu(!0),xM(e[Me],""));function H$(){return K()}var Rr=void 0;function yR(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var _R=["en",[["a","p"],["AM","PM"],Rr],[["AM","PM"],Rr,Rr],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Rr,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Rr,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Rr,"{1} 'at' {0}",Rr],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",yR],Ff={};function vt(n){let e=vR(n),t=Sw(e);if(t)return t;let r=e.split("-")[0];if(t=Sw(r),t)return t;if(r==="en")return _R;throw new le(701,!1)}function Sw(n){return n in Ff||(Ff[n]=Rt.ng&&Rt.ng.common&&Rt.ng.common.locales&&Rt.ng.common.locales[n]),Ff[n]}var Se=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Se||{});function vR(n){return n.toLowerCase().replace(/_/g,"-")}var fu="en-US",wR="USD";var IR=fu;function ER(n){typeof n=="string"&&(IR=n.toLowerCase().replace(/_/g,"-"))}function DR(n,e,t,r){let i=K(),o=Ne(),s=Ze();return JE(o,i,i[Me],s,n,e,r),DR}function bR(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Ts],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function JE(n,e,t,r,i,o,s){let a=wu(r),l=n.firstCreatePass&&DE(n),f=e[Gt],p=EE(e),g=!0;if(r.type&3||s){let x=Ot(r,e),N=s?s(x):x,F=p.length,j=s?Q=>s(un(Q[r.index])):r.index,L=null;if(!s&&a&&(L=bR(n,e,i,r.index)),L!==null){let Q=L.__ngLastListenerFn__||L;Q.__ngNextListenerFn__=o,L.__ngLastListenerFn__=o,g=!1}else{o=xw(r,e,f,o,!1);let Q=t.listen(N,i,o);p.push(o,Q),l&&l.push(i,j,F,F+1)}}else o=xw(r,e,f,o,!1);let y=r.outputs,T;if(g&&y!==null&&(T=y[i])){let x=T.length;if(x)for(let N=0;N<x;N+=2){let F=T[N],j=T[N+1],J=e[F][j].subscribe(o),z=p.length;p.push(o,J),l&&l.push(i,r.index,z,-(z+1))}}}function Aw(n,e,t,r){let i=ue(null);try{return on(6,e,t),t(r)!==!1}catch(o){return bE(n,o),!1}finally{on(7,e,t),ue(i)}}function xw(n,e,t,r,i){return function o(s){if(s===Function)return r;let a=n.componentOffset>-1?er(n.index,e):e;yp(a);let u=Aw(e,t,r,s),l=o.__ngNextListenerFn__;for(;l;)u=Aw(e,t,l,s)&&u,l=l.__ngNextListenerFn__;return i&&u===!1&&s.preventDefault(),u}}function q$(n=1){return wx(n)}function TR(n,e,t){return ZE(n,"",e,"",t),TR}function ZE(n,e,t,r,i){let o=K(),s=bp(o,e,t,r);if(s!==ct){let a=Ne(),u=bu();fp(a,u,o,n,s,o[Me],i,!1)}return ZE}function z$(n,e,t,r){y1(n,e,t,r)}function G$(n,e,t){g1(n,e,t)}function W$(n){let e=K(),t=Ne(),r=TI();Jh(r+1);let i=Ip(t,r);if(n.dirty&&tx(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=w1(e,r);n.reset(o,Ux),n.notifyOnChanges()}return!0}return!1}function K$(){return m1(K(),TI())}function CR(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Q$(n){let e=hx();return Iu(e,_t+n)}function Y$(n,e=""){let t=K(),r=Ne(),i=n+_t,o=r.firstCreatePass?ks(r,i,1,e,null):r.data[i],s=SR(r,t,o,e,n);t[i]=s,Tu()&&Nu(r,t,s,o),Gr(o,!1)}var SR=(n,e,t,r,i)=>(Cu(!0),SM(e[Me],r));function AR(n){return XE("",n,""),AR}function XE(n,e,t){let r=K(),i=bp(r,n,e,t);return i!==ct&&mp(r,En(),i),XE}function xR(n,e,t,r,i){let o=K(),s=$1(o,n,e,t,r,i);return s!==ct&&mp(o,En(),s),xR}function MR(n,e,t,r,i,o,s){let a=K(),u=H1(a,n,e,t,r,i,o,s);return u!==ct&&mp(a,En(),u),MR}function NR(n,e,t){FE(e)&&(e=e());let r=K(),i=Eu();if(ln(r,i,e)){let o=Ne(),s=bu();fp(o,s,r,n,e,r[Me],t,!1)}return NR}function J$(n,e){let t=FE(n);return t&&n.set(e),t}function RR(n,e){let t=K(),r=Ne(),i=Ze();return JE(r,t,t[Me],i,n,e),RR}function PR(n,e,t){let r=Ne();if(r.firstCreatePass){let i=Yn(n);Nh(t,r.data,r.blueprint,i,!0),Nh(e,r.data,r.blueprint,i,!1)}}function Nh(n,e,t,r,i){if(n=st(n),Array.isArray(n))for(let o=0;o<n.length;o++)Nh(n[o],e,t,r,i);else{let o=Ne(),s=K(),a=Ze(),u=Gi(n)?n:st(n.provide),l=sI(n),f=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(Gi(n)||!n.multi){let y=new Br(l,i,Be),T=Lf(u,e,i?f:f+g,p);T===-1?(Zf(eu(a,s),o,u),Vf(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[T]=y,s[T]=y)}else{let y=Lf(u,e,f+g,p),T=Lf(u,e,f,f+g),x=y>=0&&t[y],N=T>=0&&t[T];if(i&&!N||!i&&!x){Zf(eu(a,s),o,u);let F=FR(i?kR:OR,t.length,i,r,l);!i&&N&&(t[T].providerFactory=F),Vf(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(F),s.push(F)}else{let F=eD(t[i?T:y],l,!i&&r);Vf(o,n,y>-1?y:T,F)}!i&&r&&N&&t[T].componentProviders++}}}function Vf(n,e,t,r){let i=Gi(e),o=jA(e);if(i||o){let u=(o?st(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let f=l.indexOf(t);f===-1?l.push(t,[r,u]):l[f+1].push(r,u)}else l.push(t,u)}}}function eD(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Lf(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function OR(n,e,t,r){return Rh(this.multi,[])}function kR(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Ur(t,t[te],this.providerFactory.index,r);o=a.slice(0,s),Rh(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],Rh(i,o);return o}function Rh(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function FR(n,e,t,r,i){let o=new Br(n,t,Be);return o.multi=[],o.index=e,o.componentProviders=0,eD(o,i,r&&!t),o}function Z$(n,e=[]){return t=>{t.providersResolver=(r,i)=>PR(r,i?i(n):n,e)}}var VR=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=nI(!1,t.type),i=r.length>0?N1([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=fe({token:n,providedIn:"environment",factory:()=>new n(Pe(Qn))})}}return n})();function X$(n){no("NgStandalone"),n.getStandaloneInjector=e=>e.get(VR).getOrCreateStandaloneInjector(n)}function e6(n,e,t){let r=tr()+n,i=K();return i[r]===ct?Fs(i,r,t?e.call(t):e()):O1(i,r)}function t6(n,e,t,r){return tD(K(),tr(),n,e,t,r)}function n6(n,e,t,r,i){return nD(K(),tr(),n,e,t,r,i)}function r6(n,e,t,r,i,o){return rD(K(),tr(),n,e,t,r,i,o)}function i6(n,e,t,r,i,o,s){return LR(K(),tr(),n,e,t,r,i,o,s)}function Vu(n,e){let t=n[e];return t===ct?void 0:t}function tD(n,e,t,r,i,o){let s=e+t;return ln(n,s,i)?Fs(n,s+1,o?r.call(o,i):r(i)):Vu(n,s+1)}function nD(n,e,t,r,i,o,s){let a=e+t;return xs(n,a,i,o)?Fs(n,a+2,s?r.call(s,i,o):r(i,o)):Vu(n,a+2)}function rD(n,e,t,r,i,o,s,a){let u=e+t;return LE(n,u,i,o,s)?Fs(n,u+3,a?r.call(a,i,o,s):r(i,o,s)):Vu(n,u+3)}function LR(n,e,t,r,i,o,s,a,u){let l=e+t;return k1(n,l,i,o,s,a)?Fs(n,l+4,u?r.call(u,i,o,s,a):r(i,o,s,a)):Vu(n,l+4)}function o6(n,e){let t=Ne(),r,i=n+_t;t.firstCreatePass?(r=jR(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Fr(r.type,!0)),s,a=gt(Be);try{let u=Xc(!1),l=o();return Xc(u),CR(t,K(),i,l),l}finally{gt(a)}}function jR(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function s6(n,e,t){let r=n+_t,i=K(),o=Iu(i,r);return Tp(i,r)?tD(i,tr(),e,o.transform,t,o):o.transform(t)}function a6(n,e,t,r){let i=n+_t,o=K(),s=Iu(o,i);return Tp(o,i)?nD(o,tr(),e,s.transform,t,r,s):s.transform(t,r)}function c6(n,e,t,r,i){let o=n+_t,s=K(),a=Iu(s,o);return Tp(s,o)?rD(s,tr(),e,a.transform,t,r,i,a):a.transform(t,r,i)}function Tp(n,e){return n[te].data[e].pure}function u6(n,e){return ku(n,e)}var l6=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var BR=new ye("");function Lu(n){return!!n&&typeof n.then=="function"}function Cp(n){return!!n&&typeof n.subscribe=="function"}var UR=new ye(""),iD=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=de(UR,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(Lu(o))t.push(o);else if(Cp(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),$R=new ye("");function HR(){Bv(()=>{throw new le(600,!1)})}function qR(n){return n.isBoundToModule}function zR(n,e,t){try{let r=t();return Lu(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var oD=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=de(HI),this.afterRenderEffectManager=de(wp),this.externalTestViews=new Set,this.beforeRender=new Nt,this.afterTick=new Nt,this.componentTypes=[],this.components=[],this.isStable=de(Dp).hasPendingTasks.pipe(Et(t=>!t)),this._injector=de(Qn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof su;if(!this._injector.get(iD).done){let g=!i&&RA(t),y=!1;throw new le(405,y)}let s;i?s=t:s=this._injector.get(Fu).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=qR(s)?void 0:this._injector.get(Xn),u=r||s.selector,l=s.create(Xi.NULL,[],u,a),f=l.location.nativeElement,p=l.injector.get(BR,null);return p?.registerApplication(f),l.onDestroy(()=>{this.detachView(l.hostView),jf(this.components,l),p?.unregisterApplication(f)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(t){if(this._runningTick)throw new le(101,!1);let r=ue(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(t)}catch(i){this.internalErrorHandler(i)}finally{this.afterTick.next(),this._runningTick=!1,ue(r)}}detectChangesInAttachedViews(t){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===CE)throw new le(103,!1);if(t){let o=r===0;this.beforeRender.next(o);for(let{_lView:s,notifyErrorHandler:a}of this._views)GR(s,o,a)}if(r++,i.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Ph(o))&&(i.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Ph(o))))break}}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;jf(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get($R,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>jf(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new le(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function jf(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function GR(n,e,t){!e&&!Ph(n)||WR(n,t,e)}function Ph(n){return Qh(n)}function WR(n,e,t){let r;t?(r=0,n[q]|=1024):n[q]&64?r=0:r=1,SE(n,e,r)}var Oh=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},d6=(()=>{class n{compileModuleSync(t){return new Sh(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=Xw(t),o=iE(i.declarations).reduce((s,a)=>{let u=Kn(a);return u&&s.push(new Yi(u)),s},[]);return new Oh(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var KR=(()=>{class n{constructor(){this.zone=de(Pt),this.applicationRef=de(oD)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function QR(n){return[{provide:Pt,useFactory:n},{provide:Wc,multi:!0,useFactory:()=>{let e=de(KR,{optional:!0});return()=>e.initialize()}},{provide:Wc,multi:!0,useFactory:()=>{let e=de(XR);return()=>{e.initialize()}}},{provide:HI,useFactory:YR}]}function YR(){let n=de(Pt),e=de(Jn);return t=>n.runOutsideAngular(()=>e.handleError(t))}function JR(n){let e=QR(()=>new Pt(ZR(n)));return OA([[],e])}function ZR(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var XR=(()=>{class n{constructor(){this.subscription=new je,this.initialized=!1,this.zone=de(Pt),this.pendingTasks=de(Dp)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Pt.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Pt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function eP(){return typeof $localize<"u"&&$localize.locale||fu}var io=new ye("",{providedIn:"root",factory:()=>de(io,se.Optional|se.SkipSelf)||eP()}),sD=new ye("",{providedIn:"root",factory:()=>wR});var aD=new ye("");var Hc=null;function tP(n=[],e){return Xi.create({name:e,providers:[{provide:oI,useValue:"platform"},{provide:aD,useValue:new Set([()=>Hc=null])},...n]})}function nP(n=[]){if(Hc)return Hc;let e=tP(n);return Hc=e,HR(),rP(e),e}function rP(n){n.get(Kx,null)?.forEach(t=>t())}var ju=(()=>{class n{static{this.__NG_ELEMENT_ID__=iP}}return n})();function iP(n){return oP(Ze(),K(),(n&16)===16)}function oP(n,e,t){if(vu(n)&&!t){let r=er(n.index,e);return new $r(r,r)}else if(n.type&47){let r=e[cn];return new $r(r,e)}return null}var kh=class{constructor(){}supports(e){return VE(e)}create(e){return new Fh(e)}},sP=(n,e)=>e,Fh=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||sP}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<Mw(r,i,o)?t:r,a=Mw(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,f=u-i;if(l!=f){for(let g=0;g<l;g++){let y=g<o.length?o[g]:o[g]=0,T=y+g;f<=T&&T<l&&(o[g]=y+1)}let p=s.previousIndex;o[p]=f-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!VE(e))throw new le(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,R1(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Vh(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new hu),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new hu),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Vh=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Lh=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},hu=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Lh,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Mw(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function Nw(){return new Sp([new kh])}var Sp=(()=>{class n{static{this.\u0275prov=fe({token:n,providedIn:"root",factory:Nw})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||Nw()),deps:[[n,new hA,new fA]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new le(901,!1)}}return n})();function f6(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=nP(r),o=[JR(),...t||[]],a=new lu({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,u=a.get(Pt);return u.run(()=>{a.resolveInjectorInitializers();let l=a.get(Jn,null),f;u.runOutsideAngular(()=>{f=u.onError.subscribe({next:y=>{l.handleError(y)}})});let p=()=>a.destroy(),g=i.get(aD);return g.add(p),a.onDestroy(()=>{f.unsubscribe(),g.delete(p)}),zR(l,u,()=>{let y=a.get(iD);return y.runInitializers(),y.donePromise.then(()=>{let T=a.get(io,fu);ER(T||fu);let x=a.get(oD);return e!==void 0&&x.bootstrap(e),x})})})}catch(e){return Promise.reject(e)}}function aP(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function h6(n,e){no("NgSignals");let t=Vv(n);return e?.equal&&(t[rn].equal=e.equal),t}function Ap(n){let e=ue(null);try{return n()}finally{ue(e)}}var cP=new ye("",{providedIn:"root",factory:()=>de(uP)}),uP=(()=>{class n{static{this.\u0275prov=fe({token:n,providedIn:"root",factory:()=>new jh})}}return n})(),jh=class{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=de(Dp),this.taskId=null}scheduleEffect(e){if(this.enqueue(e),this.taskId===null){let t=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(t),this.taskId=null})}}enqueue(e){let t=e.creationZone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}},Bh=class{constructor(e,t,r,i,o,s){this.scheduler=e,this.effectFn=t,this.creationZone=r,this.injector=o,this.watcher=qv(a=>this.runEffect(a),()=>this.schedule(),s),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(t){this.injector.get(Jn,null,{optional:!0})?.handleError(t)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function lP(n,e){no("NgSignals"),!e?.injector&&cI(lP);let t=e?.injector??de(Xi),r=e?.manualCleanup!==!0?t.get(Au):null,i=new Bh(t.get(cP),n,typeof Zone>"u"?null:Zone.current,r,t,e?.allowSignalWrites??!1),o=t.get(ju,null,{optional:!0});return!o||!(o._lView[q]&8)?i.watcher.notify():(o._lView[Lc]??=[]).push(i.watcher.notify),i}function p6(n){let e=Kn(n);if(!e)return null;let t=new Yi(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var _D=null;function xp(){return _D}function k6(n){_D??=n}var cD=class{};var $p=new ye(""),Hp=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=fe({token:n,factory:()=>de(dP),providedIn:"platform"})}}return n})(),F6=new ye(""),dP=(()=>{class n extends Hp{constructor(){super(),this._doc=de($p),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return xp().getBaseHref(this._doc)}onPopState(t){let r=xp().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=xp().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=fe({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function qp(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function uD(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Tn(n){return n&&n[0]!=="?"?"?"+n:n}var Yu=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=fe({token:n,factory:()=>de(fP),providedIn:"root"})}}return n})(),vD=new ye(""),fP=(()=>{class n extends Yu{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??de($p).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return qp(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Tn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Tn(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Tn(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(Pe(Hp),Pe(vD,8))}}static{this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),V6=(()=>{class n extends Yu{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=qp(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Tn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Tn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(Pe(Hp),Pe(vD,8))}}static{this.\u0275prov=fe({token:n,factory:n.\u0275fac})}}return n})(),hP=(()=>{class n{constructor(t){this._subject=new Pr,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=gP(uD(lD(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Tn(r))}normalize(t){return n.stripTrailingSlash(mP(this._basePath,lD(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Tn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Tn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Tn}static{this.joinWithSlash=qp}static{this.stripTrailingSlash=uD}static{this.\u0275fac=function(r){return new(r||n)(Pe(Yu))}}static{this.\u0275prov=fe({token:n,factory:()=>pP(),providedIn:"root"})}}return n})();function pP(){return new hP(Pe(Yu))}function mP(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function lD(n){return n.replace(/\/index.html$/,"")}function gP(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var wD={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},zp=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(zp||{});var ut=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(ut||{}),Ie=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Ie||{}),Tt=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Tt||{}),Xe={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function yP(n){return vt(n)[Se.LocaleId]}function _P(n,e,t){let r=vt(n),i=[r[Se.DayPeriodsFormat],r[Se.DayPeriodsStandalone]],o=kt(i,e);return kt(o,t)}function vP(n,e,t){let r=vt(n),i=[r[Se.DaysFormat],r[Se.DaysStandalone]],o=kt(i,e);return kt(o,t)}function wP(n,e,t){let r=vt(n),i=[r[Se.MonthsFormat],r[Se.MonthsStandalone]],o=kt(i,e);return kt(o,t)}function IP(n,e){let r=vt(n)[Se.Eras];return kt(r,e)}function Bu(n,e){let t=vt(n);return kt(t[Se.DateFormat],e)}function Uu(n,e){let t=vt(n);return kt(t[Se.TimeFormat],e)}function $u(n,e){let r=vt(n)[Se.DateTimeFormat];return kt(r,e)}function dn(n,e){let t=vt(n),r=t[Se.NumberSymbols][e];if(typeof r>"u"){if(e===Xe.CurrencyDecimal)return t[Se.NumberSymbols][Xe.Decimal];if(e===Xe.CurrencyGroup)return t[Se.NumberSymbols][Xe.Group]}return r}function ID(n,e){return vt(n)[Se.NumberFormats][e]}function EP(n){return vt(n)[Se.Currencies]}function ED(n){if(!n[Se.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Se.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function DP(n){let e=vt(n);return ED(e),(e[Se.ExtraData][2]||[]).map(r=>typeof r=="string"?Mp(r):[Mp(r[0]),Mp(r[1])])}function bP(n,e,t){let r=vt(n);ED(r);let i=[r[Se.ExtraData][0],r[Se.ExtraData][1]],o=kt(i,e)||[];return kt(o,t)||[]}function kt(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function Mp(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}function TP(n,e,t="en"){let r=EP(t)[n]||wD[n]||[],i=r[1];return e==="narrow"&&typeof i=="string"?i:r[0]||n}var CP=2;function SP(n){let e,t=wD[n];return t&&(e=t[2]),typeof e=="number"?e:CP}var AP=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Hu={},xP=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,Cn=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(Cn||{}),pe=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(pe||{}),he=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(he||{});function MP(n,e,t,r){let i=jP(n);e=bn(t,e)||e;let s=[],a;for(;e;)if(a=xP.exec(e),a){s=s.concat(a.slice(1));let f=s.pop();if(!f)break;e=f}else{s.push(e);break}let u=i.getTimezoneOffset();r&&(u=bD(r,u),i=LP(i,r,!0));let l="";return s.forEach(f=>{let p=FP(f);l+=p?p(i,t,u):f==="''"?"'":f.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Ku(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function bn(n,e){let t=yP(n);if(Hu[t]??={},Hu[t][e])return Hu[t][e];let r="";switch(e){case"shortDate":r=Bu(n,Tt.Short);break;case"mediumDate":r=Bu(n,Tt.Medium);break;case"longDate":r=Bu(n,Tt.Long);break;case"fullDate":r=Bu(n,Tt.Full);break;case"shortTime":r=Uu(n,Tt.Short);break;case"mediumTime":r=Uu(n,Tt.Medium);break;case"longTime":r=Uu(n,Tt.Long);break;case"fullTime":r=Uu(n,Tt.Full);break;case"short":let i=bn(n,"shortTime"),o=bn(n,"shortDate");r=qu($u(n,Tt.Short),[i,o]);break;case"medium":let s=bn(n,"mediumTime"),a=bn(n,"mediumDate");r=qu($u(n,Tt.Medium),[s,a]);break;case"long":let u=bn(n,"longTime"),l=bn(n,"longDate");r=qu($u(n,Tt.Long),[u,l]);break;case"full":let f=bn(n,"fullTime"),p=bn(n,"fullDate");r=qu($u(n,Tt.Full),[f,p]);break}return r&&(Hu[t][e]=r),r}function qu(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function Qt(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function NP(n,e){return Qt(n,3).substring(0,e)}function Oe(n,e,t=0,r=!1,i=!1){return function(o,s){let a=RP(n,o);if((t>0||a>-t)&&(a+=t),n===pe.Hours)a===0&&t===-12&&(a=12);else if(n===pe.FractionalSeconds)return NP(a,e);let u=dn(s,Xe.MinusSign);return Qt(a,e,u,r,i)}}function RP(n,e){switch(n){case pe.FullYear:return e.getFullYear();case pe.Month:return e.getMonth();case pe.Date:return e.getDate();case pe.Hours:return e.getHours();case pe.Minutes:return e.getMinutes();case pe.Seconds:return e.getSeconds();case pe.FractionalSeconds:return e.getMilliseconds();case pe.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function Ee(n,e,t=ut.Format,r=!1){return function(i,o){return PP(i,o,n,e,t,r)}}function PP(n,e,t,r,i,o){switch(t){case he.Months:return wP(e,i,r)[n.getMonth()];case he.Days:return vP(e,i,r)[n.getDay()];case he.DayPeriods:let s=n.getHours(),a=n.getMinutes();if(o){let l=DP(e),f=bP(e,i,r),p=l.findIndex(g=>{if(Array.isArray(g)){let[y,T]=g,x=s>=y.hours&&a>=y.minutes,N=s<T.hours||s===T.hours&&a<T.minutes;if(y.hours<T.hours){if(x&&N)return!0}else if(x||N)return!0}else if(g.hours===s&&g.minutes===a)return!0;return!1});if(p!==-1)return f[p]}return _P(e,i,r)[s<12?0:1];case he.Eras:return IP(e,r)[n.getFullYear()<=0?0:1];default:let u=t;throw new Error(`unexpected translation type ${u}`)}}function zu(n){return function(e,t,r){let i=-1*r,o=dn(t,Xe.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case Cn.Short:return(i>=0?"+":"")+Qt(s,2,o)+Qt(Math.abs(i%60),2,o);case Cn.ShortGMT:return"GMT"+(i>=0?"+":"")+Qt(s,1,o);case Cn.Long:return"GMT"+(i>=0?"+":"")+Qt(s,2,o)+":"+Qt(Math.abs(i%60),2,o);case Cn.Extended:return r===0?"Z":(i>=0?"+":"")+Qt(s,2,o)+":"+Qt(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var OP=0,Wu=4;function kP(n){let e=Ku(n,OP,1).getDay();return Ku(n,0,1+(e<=Wu?Wu:Wu+7)-e)}function DD(n){let e=n.getDay(),t=e===0?-3:Wu-e;return Ku(n.getFullYear(),n.getMonth(),n.getDate()+t)}function Np(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=DD(t),s=kP(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Qt(i,n,dn(r,Xe.MinusSign))}}function Gu(n,e=!1){return function(t,r){let o=DD(t).getFullYear();return Qt(o,n,dn(r,Xe.MinusSign),e)}}var Rp={};function FP(n){if(Rp[n])return Rp[n];let e;switch(n){case"G":case"GG":case"GGG":e=Ee(he.Eras,Ie.Abbreviated);break;case"GGGG":e=Ee(he.Eras,Ie.Wide);break;case"GGGGG":e=Ee(he.Eras,Ie.Narrow);break;case"y":e=Oe(pe.FullYear,1,0,!1,!0);break;case"yy":e=Oe(pe.FullYear,2,0,!0,!0);break;case"yyy":e=Oe(pe.FullYear,3,0,!1,!0);break;case"yyyy":e=Oe(pe.FullYear,4,0,!1,!0);break;case"Y":e=Gu(1);break;case"YY":e=Gu(2,!0);break;case"YYY":e=Gu(3);break;case"YYYY":e=Gu(4);break;case"M":case"L":e=Oe(pe.Month,1,1);break;case"MM":case"LL":e=Oe(pe.Month,2,1);break;case"MMM":e=Ee(he.Months,Ie.Abbreviated);break;case"MMMM":e=Ee(he.Months,Ie.Wide);break;case"MMMMM":e=Ee(he.Months,Ie.Narrow);break;case"LLL":e=Ee(he.Months,Ie.Abbreviated,ut.Standalone);break;case"LLLL":e=Ee(he.Months,Ie.Wide,ut.Standalone);break;case"LLLLL":e=Ee(he.Months,Ie.Narrow,ut.Standalone);break;case"w":e=Np(1);break;case"ww":e=Np(2);break;case"W":e=Np(1,!0);break;case"d":e=Oe(pe.Date,1);break;case"dd":e=Oe(pe.Date,2);break;case"c":case"cc":e=Oe(pe.Day,1);break;case"ccc":e=Ee(he.Days,Ie.Abbreviated,ut.Standalone);break;case"cccc":e=Ee(he.Days,Ie.Wide,ut.Standalone);break;case"ccccc":e=Ee(he.Days,Ie.Narrow,ut.Standalone);break;case"cccccc":e=Ee(he.Days,Ie.Short,ut.Standalone);break;case"E":case"EE":case"EEE":e=Ee(he.Days,Ie.Abbreviated);break;case"EEEE":e=Ee(he.Days,Ie.Wide);break;case"EEEEE":e=Ee(he.Days,Ie.Narrow);break;case"EEEEEE":e=Ee(he.Days,Ie.Short);break;case"a":case"aa":case"aaa":e=Ee(he.DayPeriods,Ie.Abbreviated);break;case"aaaa":e=Ee(he.DayPeriods,Ie.Wide);break;case"aaaaa":e=Ee(he.DayPeriods,Ie.Narrow);break;case"b":case"bb":case"bbb":e=Ee(he.DayPeriods,Ie.Abbreviated,ut.Standalone,!0);break;case"bbbb":e=Ee(he.DayPeriods,Ie.Wide,ut.Standalone,!0);break;case"bbbbb":e=Ee(he.DayPeriods,Ie.Narrow,ut.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ee(he.DayPeriods,Ie.Abbreviated,ut.Format,!0);break;case"BBBB":e=Ee(he.DayPeriods,Ie.Wide,ut.Format,!0);break;case"BBBBB":e=Ee(he.DayPeriods,Ie.Narrow,ut.Format,!0);break;case"h":e=Oe(pe.Hours,1,-12);break;case"hh":e=Oe(pe.Hours,2,-12);break;case"H":e=Oe(pe.Hours,1);break;case"HH":e=Oe(pe.Hours,2);break;case"m":e=Oe(pe.Minutes,1);break;case"mm":e=Oe(pe.Minutes,2);break;case"s":e=Oe(pe.Seconds,1);break;case"ss":e=Oe(pe.Seconds,2);break;case"S":e=Oe(pe.FractionalSeconds,1);break;case"SS":e=Oe(pe.FractionalSeconds,2);break;case"SSS":e=Oe(pe.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=zu(Cn.Short);break;case"ZZZZZ":e=zu(Cn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=zu(Cn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=zu(Cn.Long);break;default:return null}return Rp[n]=e,e}function bD(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function VP(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function LP(n,e,t){let r=t?-1:1,i=n.getTimezoneOffset(),o=bD(e,i);return VP(n,r*(o-i))}function jP(n){if(dD(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return Ku(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(AP))return BP(r)}let e=new Date(n);if(!dD(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function BP(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,u=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,u,l),e}function dD(n){return n instanceof Date&&!isNaN(n.valueOf())}var UP=/^(\d+)?\.((\d+)(-(\d+))?)?$/,fD=22,Qu=".",Ls="0",$P=";",HP=",",Pp="#",hD="\xA4";function TD(n,e,t,r,i,o,s=!1){let a="",u=!1;if(!isFinite(n))a=dn(t,Xe.Infinity);else{let l=WP(n);s&&(l=GP(l));let f=e.minInt,p=e.minFrac,g=e.maxFrac;if(o){let j=o.match(UP);if(j===null)throw new Error(`${o} is not a valid digit info`);let L=j[1],Q=j[3],J=j[5];L!=null&&(f=Op(L)),Q!=null&&(p=Op(Q)),J!=null?g=Op(J):Q!=null&&p>g&&(g=p)}KP(l,p,g);let y=l.digits,T=l.integerLen,x=l.exponent,N=[];for(u=y.every(j=>!j);T<f;T++)y.unshift(0);for(;T<0;T++)y.unshift(0);T>0?N=y.splice(T,y.length):(N=y,y=[0]);let F=[];for(y.length>=e.lgSize&&F.unshift(y.splice(-e.lgSize,y.length).join(""));y.length>e.gSize;)F.unshift(y.splice(-e.gSize,y.length).join(""));y.length&&F.unshift(y.join("")),a=F.join(dn(t,r)),N.length&&(a+=dn(t,i)+N.join("")),x&&(a+=dn(t,Xe.Exponential)+"+"+x)}return n<0&&!u?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function qP(n,e,t,r,i){let o=ID(e,zp.Currency),s=CD(o,dn(e,Xe.MinusSign));return s.minFrac=SP(r),s.maxFrac=s.minFrac,TD(n,s,e,Xe.CurrencyGroup,Xe.CurrencyDecimal,i).replace(hD,t).replace(hD,"").trim()}function zP(n,e,t){let r=ID(e,zp.Decimal),i=CD(r,dn(e,Xe.MinusSign));return TD(n,i,e,Xe.Group,Xe.Decimal,t)}function CD(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split($P),i=r[0],o=r[1],s=i.indexOf(Qu)!==-1?i.split(Qu):[i.substring(0,i.lastIndexOf(Ls)+1),i.substring(i.lastIndexOf(Ls)+1)],a=s[0],u=s[1]||"";t.posPre=a.substring(0,a.indexOf(Pp));for(let f=0;f<u.length;f++){let p=u.charAt(f);p===Ls?t.minFrac=t.maxFrac=f+1:p===Pp?t.maxFrac=f+1:t.posSuf+=p}let l=a.split(HP);if(t.gSize=l[1]?l[1].length:0,t.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){let f=i.length-t.posPre.length-t.posSuf.length,p=o.indexOf(Pp);t.negPre=o.substring(0,p).replace(/'/g,""),t.negSuf=o.slice(p+f).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function GP(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function WP(n){let e=Math.abs(n)+"",t=0,r,i,o,s,a;for((i=e.indexOf(Qu))>-1&&(e=e.replace(Qu,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===Ls;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===Ls;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>fD&&(r=r.splice(0,fD-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function KP(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen,o=Math.min(Math.max(e,i),t),s=o+n.integerLen,a=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let p=s;p<r.length;p++)r[p]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let p=1;p<s;p++)r[p]=0}if(a>=5)if(s-1<0){for(let p=0;p>s;p--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let u=o!==0,l=e+n.integerLen,f=r.reduceRight(function(p,g,y,T){return g=g+p,T[y]=g<10?g:g-10,u&&(T[y]===0&&y>=l?T.pop():u=!1),g>=10?1:0},0);f&&(r.unshift(f),n.integerLen++)}function Op(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function L6(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var kp=/\s+/,pD=[],j6=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=pD,this.stateMap=new Map}set klass(t){this.initialClasses=t!=null?t.trim().split(kp):pD}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(kp):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(kp).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(Be(Wr),Be(_p))}}static{this.\u0275dir=yu({type:n,selectors:[["","ngClass",""]],inputs:{klass:[Wn.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var Fp=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},B6=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Fp(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),mD(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);mD(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Be(ro),Be(Hr),Be(Sp))}}static{this.\u0275dir=yu({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function mD(n,e){n.context.$implicit=e.item}var U6=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Vp,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){gD("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){gD("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Be(ro),Be(Hr))}}static{this.\u0275dir=yu({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),Vp=class{constructor(){this.$implicit=null,this.ngIf=null}};function gD(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${at(e)}'.`)}function oo(n,e){return new le(2100,!1)}var Lp=class{createSubscription(e,t){return Ap(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){Ap(()=>e.unsubscribe())}},jp=class{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}},QP=new jp,YP=new Lp,$6=(()=>{class n{constructor(t){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(Lu(t))return QP;if(Cp(t))return YP;throw oo(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(r){return new(r||n)(Be(ju,16))}}static{this.\u0275pipe=zr({name:"async",type:n,pure:!1,standalone:!0})}}return n})();var JP=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,H6=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw oo(n,t);return t.replace(JP,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=zr({name:"titlecase",type:n,pure:!0,standalone:!0})}}return n})();var ZP="mediumDate",XP=new ye(""),eO=new ye(""),q6=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??ZP,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return MP(t,s,o||this.locale,a)}catch(s){throw oo(n,s.message)}}static{this.\u0275fac=function(r){return new(r||n)(Be(io,16),Be(XP,24),Be(eO,24))}}static{this.\u0275pipe=zr({name:"date",type:n,pure:!0,standalone:!0})}}return n})();var z6=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!SD(t))return null;i||=this._locale;try{let o=AD(t);return zP(o,i,r)}catch(o){throw oo(n,o.message)}}static{this.\u0275fac=function(r){return new(r||n)(Be(io,16))}}static{this.\u0275pipe=zr({name:"number",type:n,pure:!0,standalone:!0})}}return n})();var G6=(()=>{class n{constructor(t,r="USD"){this._locale=t,this._defaultCurrencyCode=r}transform(t,r=this._defaultCurrencyCode,i="symbol",o,s){if(!SD(t))return null;s||=this._locale,typeof i=="boolean"&&(i=i?"symbol":"code");let a=r||this._defaultCurrencyCode;i!=="code"&&(i==="symbol"||i==="symbol-narrow"?a=TP(a,i==="symbol"?"wide":"narrow",s):a=i);try{let u=AD(t);return qP(u,s,a,r,o)}catch(u){throw oo(n,u.message)}}static{this.\u0275fac=function(r){return new(r||n)(Be(io,16),Be(sD,16))}}static{this.\u0275pipe=zr({name:"currency",type:n,pure:!0,standalone:!0})}}return n})();function SD(n){return!(n==null||n===""||n!==n)}function AD(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var W6=(()=>{class n{transform(t,r,i){if(t==null)return null;if(!this.supports(t))throw oo(n,t);return t.slice(r,i)}supports(t){return typeof t=="string"||Array.isArray(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=zr({name:"slice",type:n,pure:!1,standalone:!0})}}return n})();var K6=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Yw({type:n})}static{this.\u0275inj=Vw({})}}return n})(),tO="browser",nO="server";function rO(n){return n===tO}function Q6(n){return n===nO}var Y6=(()=>{class n{static{this.\u0275prov=fe({token:n,providedIn:"root",factory:()=>rO(de(tp))?new Bp(de($p),window):new Up})}}return n})(),Bp=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=iO(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function iO(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Up=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},yD=class{};var xD=()=>{};var RD=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},oO=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},PD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,f=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(g=64)),r.push(t[f],t[p],t[g],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(RD(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):oO(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new Wp;let g=o<<2|a>>4;if(r.push(g),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let T=l<<6&192|p;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Wp=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},sO=function(n){let e=RD(n);return PD.encodeByteArray(e,!0)},Bs=function(n){return sO(n).replace(/\./g,"")},OD=function(n){try{return PD.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Qp(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var aO=()=>Qp().__FIREBASE_DEFAULTS__,cO=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},uO=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&OD(n[1]);return e&&JSON.parse(e)},Zu=()=>{try{return xD()||aO()||cO()||uO()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},lO=n=>Zu()?.emulatorHosts?.[n],kD=n=>{let e=lO(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Yp=()=>Zu()?.config,t3=n=>Zu()?.[`_${n}`];var Ju=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Xu(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function FD(n){return R(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function VD(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=ie({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Bs(JSON.stringify(t)),Bs(JSON.stringify(s)),""].join(".")}var js={};function dO(){let n={prod:[],emulator:[]};for(let e of Object.keys(js))js[e]?n.emulator.push(e):n.prod.push(e);return n}function fO(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var MD=!1;function LD(n,e){if(typeof window>"u"||typeof document>"u"||!Xu(window.location.host)||js[n]===e||js[n]||MD)return;js[n]=e;function t(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=dO().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{MD=!0,s()},g}function f(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=fO(r),y=t("text"),T=document.getElementById(y)||document.createElement("span"),x=t("learnmore"),N=document.getElementById(x)||document.createElement("a"),F=t("preprendIcon"),j=document.getElementById(F)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let L=g.element;a(L),f(N,x);let Q=l();u(j,F),L.append(j,T,N,Q),document.body.appendChild(L)}o?(T.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Kr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function n3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kr())}function jD(){let n=Zu()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function r3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function i3(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function o3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function s3(){let n=Kr();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Jp(){return!jD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Zp(){return!jD()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function el(){try{return typeof indexedDB=="object"}catch{return!1}}function BD(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}function a3(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var hO="FirebaseError",Sn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=hO,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Us.prototype.create)}},Us=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?pO(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Sn(i,a,r)}};function pO(n,e){return n.replace(mO,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var mO=/\{\$([^}]+)}/g;function c3(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Qr(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(ND(o)&&ND(s)){if(!Qr(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function ND(n){return n!==null&&typeof n=="object"}function u3(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function l3(n,e){let t=new Kp(n,e);return t.subscribe.bind(t)}var Kp=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");gO(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Gp),i.error===void 0&&(i.error=Gp),i.complete===void 0&&(i.complete=Gp);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function gO(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Gp(){}var d3=4*60*60*1e3;function Ct(n){return n&&n._delegate?n._delegate:n}var An=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Yr="[DEFAULT]";var Xp=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Ju;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_O(e))try{this.getOrInitializeService({instanceIdentifier:Yr})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Yr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return R(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Yr){return this.instances.has(e)}getOptions(e=Yr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yO(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Yr){return this.component?this.component.multipleInstances?e:Yr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function yO(n){return n===Yr?void 0:n}function _O(n){return n.instantiationMode==="EAGER"}var tl=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Xp(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var vO=[],ae=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ae||{}),wO={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},IO=ae.INFO,EO={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},DO=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=EO[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},so=class{constructor(e){this.name=e,this._logLevel=IO,this._logHandler=DO,this._userLogHandler=null,vO.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}};var bO=(n,e)=>e.some(t=>n instanceof t),UD,$D;function TO(){return UD||(UD=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CO(){return $D||($D=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var HD=new WeakMap,tm=new WeakMap,qD=new WeakMap,em=new WeakMap,rm=new WeakMap;function SO(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Yt(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&HD.set(t,n)}).catch(()=>{}),rm.set(e,n),e}function AO(n){if(tm.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});tm.set(n,e)}var nm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return tm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||qD.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Yt(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function zD(n){nm=n(nm)}function xO(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(nl(this),e,...t);return qD.set(r,e.sort?e.sort():[e]),Yt(r)}:CO().includes(n)?function(...e){return n.apply(nl(this),e),Yt(HD.get(this))}:function(...e){return Yt(n.apply(nl(this),e))}}function MO(n){return typeof n=="function"?xO(n):(n instanceof IDBTransaction&&AO(n),bO(n,TO())?new Proxy(n,nm):n)}function Yt(n){if(n instanceof IDBRequest)return SO(n);if(em.has(n))return em.get(n);let e=MO(n);return e!==n&&(em.set(n,e),rm.set(e,n)),e}var nl=n=>rm.get(n);function WD(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=Yt(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Yt(s.result),u.oldVersion,u.newVersion,Yt(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}function w3(n,{blocked:e}={}){let t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",r=>e(r.oldVersion,r)),Yt(t).then(()=>{})}var NO=["get","getKey","getAll","getAllKeys","count"],RO=["put","add","delete","clear"],im=new Map;function GD(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(im.get(e))return im.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=RO.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||NO.includes(t)))return;let o=function(s,...a){return R(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&u.done]))[0]})};return im.set(e,o),o}zD(n=>Re(ie({},n),{get:(e,t,r)=>GD(e,t)||n.get(e,t,r),has:(e,t)=>!!GD(e,t)||n.has(e,t)}));var sm=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(PO(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function PO(n){return n.getComponent()?.type==="VERSION"}var am="@firebase/app",KD="0.14.6";var xn=new so("@firebase/app"),OO="@firebase/app-compat",kO="@firebase/analytics-compat",FO="@firebase/analytics",VO="@firebase/app-check-compat",LO="@firebase/app-check",jO="@firebase/auth",BO="@firebase/auth-compat",UO="@firebase/database",$O="@firebase/data-connect",HO="@firebase/database-compat",qO="@firebase/functions",zO="@firebase/functions-compat",GO="@firebase/installations",WO="@firebase/installations-compat",KO="@firebase/messaging",QO="@firebase/messaging-compat",YO="@firebase/performance",JO="@firebase/performance-compat",ZO="@firebase/remote-config",XO="@firebase/remote-config-compat",ek="@firebase/storage",tk="@firebase/storage-compat",nk="@firebase/firestore",rk="@firebase/ai",ik="@firebase/firestore-compat",ok="firebase",sk="12.6.0";var cm="[DEFAULT]",ak={[am]:"fire-core",[OO]:"fire-core-compat",[FO]:"fire-analytics",[kO]:"fire-analytics-compat",[LO]:"fire-app-check",[VO]:"fire-app-check-compat",[jO]:"fire-auth",[BO]:"fire-auth-compat",[UO]:"fire-rtdb",[$O]:"fire-data-connect",[HO]:"fire-rtdb-compat",[qO]:"fire-fn",[zO]:"fire-fn-compat",[GO]:"fire-iid",[WO]:"fire-iid-compat",[KO]:"fire-fcm",[QO]:"fire-fcm-compat",[YO]:"fire-perf",[JO]:"fire-perf-compat",[ZO]:"fire-rc",[XO]:"fire-rc-compat",[ek]:"fire-gcs",[tk]:"fire-gcs-compat",[nk]:"fire-fst",[ik]:"fire-fst-compat",[rk]:"fire-vertex","fire-js":"fire-js",[ok]:"fire-js-all"};var rl=new Map,ck=new Map,um=new Map;function QD(n,e){try{n.container.addComponent(e)}catch(t){xn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function $s(n){let e=n.name;if(um.has(e))return xn.debug(`There were multiple attempts to register component ${e}.`),!1;um.set(e,n);for(let t of rl.values())QD(t,n);for(let t of ck.values())QD(t,n);return!0}function XD(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function eb(n){return n==null?!1:n.settings!==void 0}var uk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},nr=new Us("app","Firebase",uk);var lm=class{constructor(e,t,r){this._isDeleted=!1,this._options=ie({},e),this._config=ie({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new An("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw nr.create("app-deleted",{appName:this._name})}};var tb=sk;function lk(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=ie({name:cm,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw nr.create("bad-app-name",{appName:String(i)});if(t||(t=Yp()),!t)throw nr.create("no-options");let o=rl.get(i);if(o){if(Qr(t,o.options)&&Qr(r,o.config))return o;throw nr.create("duplicate-app",{appName:i})}let s=new tl(i);for(let u of um.values())s.addComponent(u);let a=new lm(t,r,s);return rl.set(i,a),a}function il(n=cm){let e=rl.get(n);if(!e&&n===cm&&Yp())return lk();if(!e)throw nr.create("no-app",{appName:n});return e}function rr(n,e,t){let r=ak[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xn.warn(s.join(" "));return}$s(new An(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var dk="firebase-heartbeat-database",fk=1,Hs="firebase-heartbeat-store",om=null;function nb(){return om||(om=WD(dk,fk,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Hs)}catch(t){console.warn(t)}}}}).catch(n=>{throw nr.create("idb-open",{originalErrorMessage:n.message})})),om}function hk(n){return R(this,null,function*(){try{let t=(yield nb()).transaction(Hs),r=yield t.objectStore(Hs).get(rb(n));return yield t.done,r}catch(e){if(e instanceof Sn)xn.warn(e.message);else{let t=nr.create("idb-get",{originalErrorMessage:e?.message});xn.warn(t.message)}}})}function YD(n,e){return R(this,null,function*(){try{let r=(yield nb()).transaction(Hs,"readwrite");yield r.objectStore(Hs).put(e,rb(n)),yield r.done}catch(t){if(t instanceof Sn)xn.warn(t.message);else{let r=nr.create("idb-set",{originalErrorMessage:t?.message});xn.warn(r.message)}}})}function rb(n){return`${n.name}!${n.options.appId}`}var pk=1024,mk=30,dm=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new fm(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return R(this,null,function*(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=JD();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>mk){let i=yk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){xn.warn(e)}})}getHeartbeatsHeader(){return R(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=JD(),{heartbeatsToSend:t,unsentEntries:r}=gk(this._heartbeatsCache.heartbeats),i=Bs(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return xn.warn(e),""}})}};function JD(){return new Date().toISOString().substring(0,10)}function gk(n,e=pk){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),ZD(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),ZD(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var fm=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return R(this,null,function*(){return el()?BD().then(()=>!0).catch(()=>!1):!1})}read(){return R(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield hk(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return R(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return YD(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return R(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return YD(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function ZD(n){return Bs(JSON.stringify({version:2,heartbeats:n})).length}function yk(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function _k(n){$s(new An("platform-logger",e=>new sm(e),"PRIVATE")),$s(new An("heartbeat",e=>new dm(e),"PRIVATE")),rr(am,KD,n),rr(am,KD,"esm2020"),rr("fire-js","")}_k("");var ib=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ob={};var Mn,hm;(function(){var n;function e(I,_){function w(){}w.prototype=_.prototype,I.F=_.prototype,I.prototype=new w,I.prototype.constructor=I,I.D=function(D,E,C){for(var v=Array(arguments.length-2),ht=2;ht<arguments.length;ht++)v[ht-2]=arguments[ht];return _.prototype[E].apply(D,v)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,_,w){w||(w=0);let D=Array(16);if(typeof _=="string")for(var E=0;E<16;++E)D[E]=_.charCodeAt(w++)|_.charCodeAt(w++)<<8|_.charCodeAt(w++)<<16|_.charCodeAt(w++)<<24;else for(E=0;E<16;++E)D[E]=_[w++]|_[w++]<<8|_[w++]<<16|_[w++]<<24;_=I.g[0],w=I.g[1],E=I.g[2];let C=I.g[3],v;v=_+(C^w&(E^C))+D[0]+3614090360&4294967295,_=w+(v<<7&4294967295|v>>>25),v=C+(E^_&(w^E))+D[1]+3905402710&4294967295,C=_+(v<<12&4294967295|v>>>20),v=E+(w^C&(_^w))+D[2]+606105819&4294967295,E=C+(v<<17&4294967295|v>>>15),v=w+(_^E&(C^_))+D[3]+3250441966&4294967295,w=E+(v<<22&4294967295|v>>>10),v=_+(C^w&(E^C))+D[4]+4118548399&4294967295,_=w+(v<<7&4294967295|v>>>25),v=C+(E^_&(w^E))+D[5]+1200080426&4294967295,C=_+(v<<12&4294967295|v>>>20),v=E+(w^C&(_^w))+D[6]+2821735955&4294967295,E=C+(v<<17&4294967295|v>>>15),v=w+(_^E&(C^_))+D[7]+4249261313&4294967295,w=E+(v<<22&4294967295|v>>>10),v=_+(C^w&(E^C))+D[8]+1770035416&4294967295,_=w+(v<<7&4294967295|v>>>25),v=C+(E^_&(w^E))+D[9]+2336552879&4294967295,C=_+(v<<12&4294967295|v>>>20),v=E+(w^C&(_^w))+D[10]+4294925233&4294967295,E=C+(v<<17&4294967295|v>>>15),v=w+(_^E&(C^_))+D[11]+2304563134&4294967295,w=E+(v<<22&4294967295|v>>>10),v=_+(C^w&(E^C))+D[12]+1804603682&4294967295,_=w+(v<<7&4294967295|v>>>25),v=C+(E^_&(w^E))+D[13]+4254626195&4294967295,C=_+(v<<12&4294967295|v>>>20),v=E+(w^C&(_^w))+D[14]+2792965006&4294967295,E=C+(v<<17&4294967295|v>>>15),v=w+(_^E&(C^_))+D[15]+1236535329&4294967295,w=E+(v<<22&4294967295|v>>>10),v=_+(E^C&(w^E))+D[1]+4129170786&4294967295,_=w+(v<<5&4294967295|v>>>27),v=C+(w^E&(_^w))+D[6]+3225465664&4294967295,C=_+(v<<9&4294967295|v>>>23),v=E+(_^w&(C^_))+D[11]+643717713&4294967295,E=C+(v<<14&4294967295|v>>>18),v=w+(C^_&(E^C))+D[0]+3921069994&4294967295,w=E+(v<<20&4294967295|v>>>12),v=_+(E^C&(w^E))+D[5]+3593408605&4294967295,_=w+(v<<5&4294967295|v>>>27),v=C+(w^E&(_^w))+D[10]+38016083&4294967295,C=_+(v<<9&4294967295|v>>>23),v=E+(_^w&(C^_))+D[15]+3634488961&4294967295,E=C+(v<<14&4294967295|v>>>18),v=w+(C^_&(E^C))+D[4]+3889429448&4294967295,w=E+(v<<20&4294967295|v>>>12),v=_+(E^C&(w^E))+D[9]+568446438&4294967295,_=w+(v<<5&4294967295|v>>>27),v=C+(w^E&(_^w))+D[14]+3275163606&4294967295,C=_+(v<<9&4294967295|v>>>23),v=E+(_^w&(C^_))+D[3]+4107603335&4294967295,E=C+(v<<14&4294967295|v>>>18),v=w+(C^_&(E^C))+D[8]+1163531501&4294967295,w=E+(v<<20&4294967295|v>>>12),v=_+(E^C&(w^E))+D[13]+2850285829&4294967295,_=w+(v<<5&4294967295|v>>>27),v=C+(w^E&(_^w))+D[2]+4243563512&4294967295,C=_+(v<<9&4294967295|v>>>23),v=E+(_^w&(C^_))+D[7]+1735328473&4294967295,E=C+(v<<14&4294967295|v>>>18),v=w+(C^_&(E^C))+D[12]+2368359562&4294967295,w=E+(v<<20&4294967295|v>>>12),v=_+(w^E^C)+D[5]+4294588738&4294967295,_=w+(v<<4&4294967295|v>>>28),v=C+(_^w^E)+D[8]+2272392833&4294967295,C=_+(v<<11&4294967295|v>>>21),v=E+(C^_^w)+D[11]+1839030562&4294967295,E=C+(v<<16&4294967295|v>>>16),v=w+(E^C^_)+D[14]+4259657740&4294967295,w=E+(v<<23&4294967295|v>>>9),v=_+(w^E^C)+D[1]+2763975236&4294967295,_=w+(v<<4&4294967295|v>>>28),v=C+(_^w^E)+D[4]+1272893353&4294967295,C=_+(v<<11&4294967295|v>>>21),v=E+(C^_^w)+D[7]+4139469664&4294967295,E=C+(v<<16&4294967295|v>>>16),v=w+(E^C^_)+D[10]+3200236656&4294967295,w=E+(v<<23&4294967295|v>>>9),v=_+(w^E^C)+D[13]+681279174&4294967295,_=w+(v<<4&4294967295|v>>>28),v=C+(_^w^E)+D[0]+3936430074&4294967295,C=_+(v<<11&4294967295|v>>>21),v=E+(C^_^w)+D[3]+3572445317&4294967295,E=C+(v<<16&4294967295|v>>>16),v=w+(E^C^_)+D[6]+76029189&4294967295,w=E+(v<<23&4294967295|v>>>9),v=_+(w^E^C)+D[9]+3654602809&4294967295,_=w+(v<<4&4294967295|v>>>28),v=C+(_^w^E)+D[12]+3873151461&4294967295,C=_+(v<<11&4294967295|v>>>21),v=E+(C^_^w)+D[15]+530742520&4294967295,E=C+(v<<16&4294967295|v>>>16),v=w+(E^C^_)+D[2]+3299628645&4294967295,w=E+(v<<23&4294967295|v>>>9),v=_+(E^(w|~C))+D[0]+4096336452&4294967295,_=w+(v<<6&4294967295|v>>>26),v=C+(w^(_|~E))+D[7]+1126891415&4294967295,C=_+(v<<10&4294967295|v>>>22),v=E+(_^(C|~w))+D[14]+2878612391&4294967295,E=C+(v<<15&4294967295|v>>>17),v=w+(C^(E|~_))+D[5]+4237533241&4294967295,w=E+(v<<21&4294967295|v>>>11),v=_+(E^(w|~C))+D[12]+1700485571&4294967295,_=w+(v<<6&4294967295|v>>>26),v=C+(w^(_|~E))+D[3]+2399980690&4294967295,C=_+(v<<10&4294967295|v>>>22),v=E+(_^(C|~w))+D[10]+4293915773&4294967295,E=C+(v<<15&4294967295|v>>>17),v=w+(C^(E|~_))+D[1]+2240044497&4294967295,w=E+(v<<21&4294967295|v>>>11),v=_+(E^(w|~C))+D[8]+1873313359&4294967295,_=w+(v<<6&4294967295|v>>>26),v=C+(w^(_|~E))+D[15]+4264355552&4294967295,C=_+(v<<10&4294967295|v>>>22),v=E+(_^(C|~w))+D[6]+2734768916&4294967295,E=C+(v<<15&4294967295|v>>>17),v=w+(C^(E|~_))+D[13]+1309151649&4294967295,w=E+(v<<21&4294967295|v>>>11),v=_+(E^(w|~C))+D[4]+4149444226&4294967295,_=w+(v<<6&4294967295|v>>>26),v=C+(w^(_|~E))+D[11]+3174756917&4294967295,C=_+(v<<10&4294967295|v>>>22),v=E+(_^(C|~w))+D[2]+718787259&4294967295,E=C+(v<<15&4294967295|v>>>17),v=w+(C^(E|~_))+D[9]+3951481745&4294967295,I.g[0]=I.g[0]+_&4294967295,I.g[1]=I.g[1]+(E+(v<<21&4294967295|v>>>11))&4294967295,I.g[2]=I.g[2]+E&4294967295,I.g[3]=I.g[3]+C&4294967295}r.prototype.v=function(I,_){_===void 0&&(_=I.length);let w=_-this.blockSize,D=this.C,E=this.h,C=0;for(;C<_;){if(E==0)for(;C<=w;)i(this,I,C),C+=this.blockSize;if(typeof I=="string"){for(;C<_;)if(D[E++]=I.charCodeAt(C++),E==this.blockSize){i(this,D),E=0;break}}else for(;C<_;)if(D[E++]=I[C++],E==this.blockSize){i(this,D),E=0;break}}this.h=E,this.o+=_},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var _=1;_<I.length-8;++_)I[_]=0;_=this.o*8;for(var w=I.length-8;w<I.length;++w)I[w]=_&255,_/=256;for(this.v(I),I=Array(16),_=0,w=0;w<4;++w)for(let D=0;D<32;D+=8)I[_++]=this.g[w]>>>D&255;return I};function o(I,_){var w=a;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=_(I)}function s(I,_){this.h=_;let w=[],D=!0;for(let E=I.length-1;E>=0;E--){let C=I[E]|0;D&&C==_||(w[E]=C,D=!1)}this.g=w}var a={};function u(I){return-128<=I&&I<128?o(I,function(_){return new s([_|0],_<0?-1:0)}):new s([I|0],I<0?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return p;if(I<0)return N(l(-I));let _=[],w=1;for(let D=0;I>=w;D++)_[D]=I/w|0,w*=4294967296;return new s(_,0)}function f(I,_){if(I.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(I.charAt(0)=="-")return N(f(I.substring(1),_));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');let w=l(Math.pow(_,8)),D=p;for(let C=0;C<I.length;C+=8){var E=Math.min(8,I.length-C);let v=parseInt(I.substring(C,C+E),_);E<8?(E=l(Math.pow(_,E)),D=D.j(E).add(l(v))):(D=D.j(w),D=D.add(l(v)))}return D}var p=u(0),g=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(x(this))return-N(this).m();let I=0,_=1;for(let w=0;w<this.g.length;w++){let D=this.i(w);I+=(D>=0?D:4294967296+D)*_,_*=4294967296}return I},n.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(T(this))return"0";if(x(this))return"-"+N(this).toString(I);let _=l(Math.pow(I,6));var w=this;let D="";for(;;){let E=Q(w,_).g;w=F(w,E.j(_));let C=((w.g.length>0?w.g[0]:w.h)>>>0).toString(I);if(w=E,T(w))return C+D;for(;C.length<6;)C="0"+C;D=C+D}},n.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function T(I){if(I.h!=0)return!1;for(let _=0;_<I.g.length;_++)if(I.g[_]!=0)return!1;return!0}function x(I){return I.h==-1}n.l=function(I){return I=F(this,I),x(I)?-1:T(I)?0:1};function N(I){let _=I.g.length,w=[];for(let D=0;D<_;D++)w[D]=~I.g[D];return new s(w,~I.h).add(g)}n.abs=function(){return x(this)?N(this):this},n.add=function(I){let _=Math.max(this.g.length,I.g.length),w=[],D=0;for(let E=0;E<=_;E++){let C=D+(this.i(E)&65535)+(I.i(E)&65535),v=(C>>>16)+(this.i(E)>>>16)+(I.i(E)>>>16);D=v>>>16,C&=65535,v&=65535,w[E]=v<<16|C}return new s(w,w[w.length-1]&-2147483648?-1:0)};function F(I,_){return I.add(N(_))}n.j=function(I){if(T(this)||T(I))return p;if(x(this))return x(I)?N(this).j(N(I)):N(N(this).j(I));if(x(I))return N(this.j(N(I)));if(this.l(y)<0&&I.l(y)<0)return l(this.m()*I.m());let _=this.g.length+I.g.length,w=[];for(var D=0;D<2*_;D++)w[D]=0;for(D=0;D<this.g.length;D++)for(let E=0;E<I.g.length;E++){let C=this.i(D)>>>16,v=this.i(D)&65535,ht=I.i(E)>>>16,Vn=I.i(E)&65535;w[2*D+2*E]+=v*Vn,j(w,2*D+2*E),w[2*D+2*E+1]+=C*Vn,j(w,2*D+2*E+1),w[2*D+2*E+1]+=v*ht,j(w,2*D+2*E+1),w[2*D+2*E+2]+=C*ht,j(w,2*D+2*E+2)}for(I=0;I<_;I++)w[I]=w[2*I+1]<<16|w[2*I];for(I=_;I<2*_;I++)w[I]=0;return new s(w,0)};function j(I,_){for(;(I[_]&65535)!=I[_];)I[_+1]+=I[_]>>>16,I[_]&=65535,_++}function L(I,_){this.g=I,this.h=_}function Q(I,_){if(T(_))throw Error("division by zero");if(T(I))return new L(p,p);if(x(I))return _=Q(N(I),_),new L(N(_.g),N(_.h));if(x(_))return _=Q(I,N(_)),new L(N(_.g),_.h);if(I.g.length>30){if(x(I)||x(_))throw Error("slowDivide_ only works with positive integers.");for(var w=g,D=_;D.l(I)<=0;)w=J(w),D=J(D);var E=z(w,1),C=z(D,1);for(D=z(D,2),w=z(w,2);!T(D);){var v=C.add(D);v.l(I)<=0&&(E=E.add(w),C=v),D=z(D,1),w=z(w,1)}return _=F(I,E.j(_)),new L(E,_)}for(E=p;I.l(_)>=0;){for(w=Math.max(1,Math.floor(I.m()/_.m())),D=Math.ceil(Math.log(w)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),C=l(w),v=C.j(_);x(v)||v.l(I)>0;)w-=D,C=l(w),v=C.j(_);T(C)&&(C=g),E=E.add(C),I=F(I,v)}return new L(E,I)}n.B=function(I){return Q(this,I).h},n.and=function(I){let _=Math.max(this.g.length,I.g.length),w=[];for(let D=0;D<_;D++)w[D]=this.i(D)&I.i(D);return new s(w,this.h&I.h)},n.or=function(I){let _=Math.max(this.g.length,I.g.length),w=[];for(let D=0;D<_;D++)w[D]=this.i(D)|I.i(D);return new s(w,this.h|I.h)},n.xor=function(I){let _=Math.max(this.g.length,I.g.length),w=[];for(let D=0;D<_;D++)w[D]=this.i(D)^I.i(D);return new s(w,this.h^I.h)};function J(I){let _=I.g.length+1,w=[];for(let D=0;D<_;D++)w[D]=I.i(D)<<1|I.i(D-1)>>>31;return new s(w,I.h)}function z(I,_){let w=_>>5;_%=32;let D=I.g.length-w,E=[];for(let C=0;C<D;C++)E[C]=_>0?I.i(C+w)>>>_|I.i(C+w+1)<<32-_:I.i(C+w);return new s(E,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,hm=ob.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=f,Mn=ob.Integer=s}).apply(typeof ib<"u"?ib:typeof self<"u"?self:typeof window<"u"?window:{});var ol=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Nn={};var pm,vk,ao,mm,qs,sl,gm,ym,_m;(function(){var n,e=Object.defineProperty;function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ol=="object"&&ol];for(var d=0;d<c.length;++d){var h=c[d];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var h=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var b=c[m];if(!(b in h))break e;h=h[b]}c=c[c.length-1],m=h[c],d=d(m),d!=m&&d!=null&&e(h,c,{configurable:!0,writable:!0,value:d})}}i("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(c){return c||function(d){var h=[],m;for(m in d)Object.prototype.hasOwnProperty.call(d,m)&&h.push([m,d[m]]);return h}});var o=o||{},s=this||self;function a(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function u(c,d,h){return c.call.apply(c.bind,arguments)}function l(c,d,h){return l=u,l.apply(null,arguments)}function f(c,d){var h=Array.prototype.slice.call(arguments,1);return function(){var m=h.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function p(c,d){function h(){}h.prototype=d.prototype,c.Z=d.prototype,c.prototype=new h,c.prototype.constructor=c,c.Ob=function(m,b,A){for(var k=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)k[Z-2]=arguments[Z];return d.prototype[b].apply(m,k)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function y(c){let d=c.length;if(d>0){let h=Array(d);for(let m=0;m<d;m++)h[m]=c[m];return h}return[]}function T(c,d){for(let m=1;m<arguments.length;m++){let b=arguments[m];var h=typeof b;if(h=h!="object"?h:b?Array.isArray(b)?"array":h:"null",h=="array"||h=="object"&&typeof b.length=="number"){h=c.length||0;let A=b.length||0;c.length=h+A;for(let k=0;k<A;k++)c[h+k]=b[k]}else c.push(b)}}class x{constructor(d,h){this.i=d,this.j=h,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function N(c){s.setTimeout(()=>{throw c},0)}function F(){var c=I;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class j{constructor(){this.h=this.g=null}add(d,h){let m=L.get();m.set(d,h),this.h?this.h.next=m:this.g=m,this.h=m}}var L=new x(()=>new Q,c=>c.reset());class Q{constructor(){this.next=this.g=this.h=null}set(d,h){this.h=d,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let J,z=!1,I=new j,_=()=>{let c=Promise.resolve(void 0);J=()=>{c.then(w)}};function w(){for(var c;c=F();){try{c.h.call(c.g)}catch(h){N(h)}var d=L;d.j(c),d.h<100&&(d.h++,c.next=d.g,d.g=c)}z=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function E(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}E.prototype.h=function(){this.defaultPrevented=!0};var C=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let h=()=>{};s.addEventListener("test",h,d),s.removeEventListener("test",h,d)}catch{}return c}();function v(c){return/^[\s\xa0]*$/.test(c)}function ht(c,d){E.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,d)}p(ht,E),ht.prototype.init=function(c,d){let h=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget,d||(h=="mouseover"?d=c.fromElement:h=="mouseout"&&(d=c.toElement)),this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&ht.Z.h.call(this)},ht.prototype.h=function(){ht.Z.h.call(this);let c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Vn="closure_listenable_"+(Math.random()*1e6|0),wC=0;function IC(c,d,h,m,b){this.listener=c,this.proxy=null,this.src=d,this.type=h,this.capture=!!m,this.ha=b,this.key=++wC,this.da=this.fa=!1}function La(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ja(c,d,h){for(let m in c)d.call(h,c[m],m,c)}function EC(c,d){for(let h in c)d.call(void 0,c[h],h,c)}function Xy(c){let d={};for(let h in c)d[h]=c[h];return d}let e_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function t_(c,d){let h,m;for(let b=1;b<arguments.length;b++){m=arguments[b];for(h in m)c[h]=m[h];for(let A=0;A<e_.length;A++)h=e_[A],Object.prototype.hasOwnProperty.call(m,h)&&(c[h]=m[h])}}function Ba(c){this.src=c,this.g={},this.h=0}Ba.prototype.add=function(c,d,h,m,b){let A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);let k=Od(c,d,m,b);return k>-1?(d=c[k],h||(d.fa=!1)):(d=new IC(d,this.src,A,!!m,b),d.fa=h,c.push(d)),d};function Pd(c,d){let h=d.type;if(h in c.g){var m=c.g[h],b=Array.prototype.indexOf.call(m,d,void 0),A;(A=b>=0)&&Array.prototype.splice.call(m,b,1),A&&(La(d),c.g[h].length==0&&(delete c.g[h],c.h--))}}function Od(c,d,h,m){for(let b=0;b<c.length;++b){let A=c[b];if(!A.da&&A.listener==d&&A.capture==!!h&&A.ha==m)return b}return-1}var kd="closure_lm_"+(Math.random()*1e6|0),Fd={};function n_(c,d,h,m,b){if(m&&m.once)return i_(c,d,h,m,b);if(Array.isArray(d)){for(let A=0;A<d.length;A++)n_(c,d[A],h,m,b);return null}return h=Bd(h),c&&c[Vn]?c.J(d,h,a(m)?!!m.capture:!!m,b):r_(c,d,h,!1,m,b)}function r_(c,d,h,m,b,A){if(!d)throw Error("Invalid event type");let k=a(b)?!!b.capture:!!b,Z=Ld(c);if(Z||(c[kd]=Z=new Ba(c)),h=Z.add(d,h,m,k,A),h.proxy)return h;if(m=DC(),h.proxy=m,m.src=c,m.listener=h,c.addEventListener)C||(b=k),b===void 0&&(b=!1),c.addEventListener(d.toString(),m,b);else if(c.attachEvent)c.attachEvent(s_(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return h}function DC(){function c(h){return d.call(c.src,c.listener,h)}let d=bC;return c}function i_(c,d,h,m,b){if(Array.isArray(d)){for(let A=0;A<d.length;A++)i_(c,d[A],h,m,b);return null}return h=Bd(h),c&&c[Vn]?c.K(d,h,a(m)?!!m.capture:!!m,b):r_(c,d,h,!0,m,b)}function o_(c,d,h,m,b){if(Array.isArray(d))for(var A=0;A<d.length;A++)o_(c,d[A],h,m,b);else m=a(m)?!!m.capture:!!m,h=Bd(h),c&&c[Vn]?(c=c.i,A=String(d).toString(),A in c.g&&(d=c.g[A],h=Od(d,h,m,b),h>-1&&(La(d[h]),Array.prototype.splice.call(d,h,1),d.length==0&&(delete c.g[A],c.h--)))):c&&(c=Ld(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Od(d,h,m,b)),(h=c>-1?d[c]:null)&&Vd(h))}function Vd(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Vn])Pd(d.i,c);else{var h=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(h,m,c.capture):d.detachEvent?d.detachEvent(s_(h),m):d.addListener&&d.removeListener&&d.removeListener(m),(h=Ld(d))?(Pd(h,c),h.h==0&&(h.src=null,d[kd]=null)):La(c)}}}function s_(c){return c in Fd?Fd[c]:Fd[c]="on"+c}function bC(c,d){if(c.da)c=!0;else{d=new ht(d,this);let h=c.listener,m=c.ha||c.src;c.fa&&Vd(c),c=h.call(m,d)}return c}function Ld(c){return c=c[kd],c instanceof Ba?c:null}var jd="__closure_events_fn_"+(Math.random()*1e9>>>0);function Bd(c){return typeof c=="function"?c:(c[jd]||(c[jd]=function(d){return c.handleEvent(d)}),c[jd])}function Je(){D.call(this),this.i=new Ba(this),this.M=this,this.G=null}p(Je,D),Je.prototype[Vn]=!0,Je.prototype.removeEventListener=function(c,d,h,m){o_(this,c,d,h,m)};function rt(c,d){var h,m=c.G;if(m)for(h=[];m;m=m.G)h.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new E(d,c);else if(d instanceof E)d.target=d.target||c;else{var b=d;d=new E(m,c),t_(d,b)}b=!0;let A,k;if(h)for(k=h.length-1;k>=0;k--)A=d.g=h[k],b=Ua(A,m,!0,d)&&b;if(A=d.g=c,b=Ua(A,m,!0,d)&&b,b=Ua(A,m,!1,d)&&b,h)for(k=0;k<h.length;k++)A=d.g=h[k],b=Ua(A,m,!1,d)&&b}Je.prototype.N=function(){if(Je.Z.N.call(this),this.i){var c=this.i;for(let d in c.g){let h=c.g[d];for(let m=0;m<h.length;m++)La(h[m]);delete c.g[d],c.h--}}this.G=null},Je.prototype.J=function(c,d,h,m){return this.i.add(String(c),d,!1,h,m)},Je.prototype.K=function(c,d,h,m){return this.i.add(String(c),d,!0,h,m)};function Ua(c,d,h,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();let b=!0;for(let A=0;A<d.length;++A){let k=d[A];if(k&&!k.da&&k.capture==h){let Z=k.listener,Le=k.ha||k.src;k.fa&&Pd(c.i,k),b=Z.call(Le,m)!==!1&&b}}return b&&!m.defaultPrevented}function TC(c,d){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=l(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:s.setTimeout(c,d||0)}function a_(c){c.g=TC(()=>{c.g=null,c.i&&(c.i=!1,a_(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class CC extends D{constructor(d,h){super(),this.m=d,this.l=h,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:a_(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wo(c){D.call(this),this.h=c,this.g={}}p(Wo,D);var c_=[];function u_(c){ja(c.g,function(d,h){this.g.hasOwnProperty(h)&&Vd(d)},c),c.g={}}Wo.prototype.N=function(){Wo.Z.N.call(this),u_(this)},Wo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ud=s.JSON.stringify,SC=s.JSON.parse,AC=class{stringify(c){return s.JSON.stringify(c,void 0)}parse(c){return s.JSON.parse(c,void 0)}};function l_(){}function d_(){}var Ko={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function $d(){E.call(this,"d")}p($d,E);function Hd(){E.call(this,"c")}p(Hd,E);var Dr={},f_=null;function $a(){return f_=f_||new Je}Dr.Ia="serverreachability";function h_(c){E.call(this,Dr.Ia,c)}p(h_,E);function Qo(c){let d=$a();rt(d,new h_(d))}Dr.STAT_EVENT="statevent";function p_(c,d){E.call(this,Dr.STAT_EVENT,c),this.stat=d}p(p_,E);function it(c){let d=$a();rt(d,new p_(d,c))}Dr.Ja="timingevent";function m_(c,d){E.call(this,Dr.Ja,c),this.size=d}p(m_,E);function Yo(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){c()},d)}function Jo(){this.g=!0}Jo.prototype.ua=function(){this.g=!1};function xC(c,d,h,m,b,A){c.info(function(){if(c.g)if(A){var k="",Z=A.split("&");for(let ve=0;ve<Z.length;ve++){var Le=Z[ve].split("=");if(Le.length>1){let Ge=Le[0];Le=Le[1];let nn=Ge.split("_");k=nn.length>=2&&nn[1]=="type"?k+(Ge+"="+Le+"&"):k+(Ge+"=redacted&")}}}else k=null;else k=A;return"XMLHTTP REQ ("+m+") [attempt "+b+"]: "+d+`
`+h+`
`+k})}function MC(c,d,h,m,b,A,k){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+b+"]: "+d+`
`+h+`
`+A+" "+k})}function Ci(c,d,h,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+RC(c,h)+(m?" "+m:"")})}function NC(c,d){c.info(function(){return"TIMEOUT: "+d})}Jo.prototype.info=function(){};function RC(c,d){if(!c.g)return d;if(!d)return null;try{let A=JSON.parse(d);if(A){for(c=0;c<A.length;c++)if(Array.isArray(A[c])){var h=A[c];if(!(h.length<2)){var m=h[1];if(Array.isArray(m)&&!(m.length<1)){var b=m[0];if(b!="noop"&&b!="stop"&&b!="close")for(let k=1;k<m.length;k++)m[k]=""}}}}return Ud(A)}catch{return d}}var Ha={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},g_={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},y_;function qd(){}p(qd,l_),qd.prototype.g=function(){return new XMLHttpRequest},y_=new qd;function Zo(c){return encodeURIComponent(String(c))}function PC(c){var d=1;c=c.split(":");let h=[];for(;d>0&&c.length;)h.push(c.shift()),d--;return c.length&&h.push(c.join(":")),h}function Ln(c,d,h,m){this.j=c,this.i=d,this.l=h,this.S=m||1,this.V=new Wo(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new __}function __(){this.i=null,this.g="",this.h=!1}var v_={},zd={};function Gd(c,d,h){c.M=1,c.A=za(tn(d)),c.u=h,c.R=!0,w_(c,null)}function w_(c,d){c.F=Date.now(),qa(c),c.B=tn(c.A);var h=c.B,m=c.S;Array.isArray(m)||(m=[String(m)]),P_(h.i,"t",m),c.C=0,h=c.j.L,c.h=new __,c.g=J_(c.j,h?d:null,!c.u),c.P>0&&(c.O=new CC(l(c.Y,c,c.g),c.P)),d=c.V,h=c.g,m=c.ba;var b="readystatechange";Array.isArray(b)||(b&&(c_[0]=b.toString()),b=c_);for(let A=0;A<b.length;A++){let k=n_(h,b[A],m||d.handleEvent,!1,d.h||d);if(!k)break;d.g[k.key]=k}d=c.J?Xy(c.J):{},c.u?(c.v||(c.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,d)):(c.v="GET",c.g.ea(c.B,c.v,null,d)),Qo(),xC(c.i,c.v,c.B,c.l,c.S,c.u)}Ln.prototype.ba=function(c){c=c.target;let d=this.O;d&&Un(c)==3?d.j():this.Y(c)},Ln.prototype.Y=function(c){try{if(c==this.g)e:{let Z=Un(this.g),Le=this.g.ya(),ve=this.g.ca();if(!(Z<3)&&(Z!=3||this.g&&(this.h.h||this.g.la()||B_(this.g)))){this.K||Z!=4||Le==7||(Le==8||ve<=0?Qo(3):Qo(2)),Wd(this);var d=this.g.ca();this.X=d;var h=OC(this);if(this.o=d==200,MC(this.i,this.v,this.B,this.l,this.S,Z,d),this.o){if(this.U&&!this.L){t:{if(this.g){var m,b=this.g;if((m=b.g?b.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(m)){var A=m;break t}}A=null}if(c=A)Ci(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Kd(this,c);else{this.o=!1,this.m=3,it(12),br(this),Xo(this);break e}}if(this.R){c=!0;let Ge;for(;!this.K&&this.C<h.length;)if(Ge=kC(this,h),Ge==zd){Z==4&&(this.m=4,it(14),c=!1),Ci(this.i,this.l,null,"[Incomplete Response]");break}else if(Ge==v_){this.m=4,it(15),Ci(this.i,this.l,h,"[Invalid Chunk]"),c=!1;break}else Ci(this.i,this.l,Ge,null),Kd(this,Ge);if(I_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Z!=4||h.length!=0||this.h.h||(this.m=1,it(16),c=!1),this.o=this.o&&c,!c)Ci(this.i,this.l,h,"[Invalid Chunked Response]"),br(this),Xo(this);else if(h.length>0&&!this.W){this.W=!0;var k=this.j;k.g==this&&k.aa&&!k.P&&(k.j.info("Great, no buffering proxy detected. Bytes received: "+h.length),tf(k),k.P=!0,it(11))}}else Ci(this.i,this.l,h,null),Kd(this,h);Z==4&&br(this),this.o&&!this.K&&(Z==4?W_(this.j,this):(this.o=!1,qa(this)))}else QC(this.g),d==400&&h.indexOf("Unknown SID")>0?(this.m=3,it(12)):(this.m=0,it(13)),br(this),Xo(this)}}}catch{}finally{}};function OC(c){if(!I_(c))return c.g.la();let d=B_(c.g);if(d==="")return"";let h="",m=d.length,b=Un(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return br(c),Xo(c),"";c.h.i=new s.TextDecoder}for(let A=0;A<m;A++)c.h.h=!0,h+=c.h.i.decode(d[A],{stream:!(b&&A==m-1)});return d.length=0,c.h.g+=h,c.C=0,c.h.g}function I_(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function kC(c,d){var h=c.C,m=d.indexOf(`
`,h);return m==-1?zd:(h=Number(d.substring(h,m)),isNaN(h)?v_:(m+=1,m+h>d.length?zd:(d=d.slice(m,m+h),c.C=m+h,d)))}Ln.prototype.cancel=function(){this.K=!0,br(this)};function qa(c){c.T=Date.now()+c.H,E_(c,c.H)}function E_(c,d){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Yo(l(c.aa,c),d)}function Wd(c){c.D&&(s.clearTimeout(c.D),c.D=null)}Ln.prototype.aa=function(){this.D=null;let c=Date.now();c-this.T>=0?(NC(this.i,this.B),this.M!=2&&(Qo(),it(17)),br(this),this.m=2,Xo(this)):E_(this,this.T-c)};function Xo(c){c.j.I==0||c.K||W_(c.j,c)}function br(c){Wd(c);var d=c.O;d&&typeof d.dispose=="function"&&d.dispose(),c.O=null,u_(c.V),c.g&&(d=c.g,c.g=null,d.abort(),d.dispose())}function Kd(c,d){try{var h=c.j;if(h.I!=0&&(h.g==c||Qd(h.h,c))){if(!c.L&&Qd(h.h,c)&&h.I==3){try{var m=h.Ba.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var b=m;if(b[0]==0){e:if(!h.v){if(h.g)if(h.g.F+3e3<c.F)Ja(h),Qa(h);else break e;ef(h),it(18)}}else h.xa=b[1],0<h.xa-h.K&&b[2]<37500&&h.F&&h.A==0&&!h.C&&(h.C=Yo(l(h.Va,h),6e3));T_(h.h)<=1&&h.ta&&(h.ta=void 0)}else Cr(h,11)}else if((c.L||h.g==c)&&Ja(h),!v(d))for(b=h.Ba.g.parse(d),d=0;d<b.length;d++){let ve=b[d],Ge=ve[0];if(!(Ge<=h.K))if(h.K=Ge,ve=ve[1],h.I==2)if(ve[0]=="c"){h.M=ve[1],h.ba=ve[2];let nn=ve[3];nn!=null&&(h.ka=nn,h.j.info("VER="+h.ka));let Sr=ve[4];Sr!=null&&(h.za=Sr,h.j.info("SVER="+h.za));let $n=ve[5];$n!=null&&typeof $n=="number"&&$n>0&&(m=1.5*$n,h.O=m,h.j.info("backChannelRequestTimeoutMs_="+m)),m=h;let Hn=c.g;if(Hn){let Xa=Hn.g?Hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xa){var A=m.h;A.g||Xa.indexOf("spdy")==-1&&Xa.indexOf("quic")==-1&&Xa.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Yd(A,A.h),A.h=null))}if(m.G){let nf=Hn.g?Hn.g.getResponseHeader("X-HTTP-Session-Id"):null;nf&&(m.wa=nf,De(m.J,m.G,nf))}}h.I=3,h.l&&h.l.ra(),h.aa&&(h.T=Date.now()-c.F,h.j.info("Handshake RTT: "+h.T+"ms")),m=h;var k=c;if(m.na=Y_(m,m.L?m.ba:null,m.W),k.L){C_(m.h,k);var Z=k,Le=m.O;Le&&(Z.H=Le),Z.D&&(Wd(Z),qa(Z)),m.g=k}else z_(m);h.i.length>0&&Ya(h)}else ve[0]!="stop"&&ve[0]!="close"||Cr(h,7);else h.I==3&&(ve[0]=="stop"||ve[0]=="close"?ve[0]=="stop"?Cr(h,7):Xd(h):ve[0]!="noop"&&h.l&&h.l.qa(ve),h.A=0)}}Qo(4)}catch{}}var FC=class{constructor(c,d){this.g=c,this.map=d}};function D_(c){this.l=c||10,s.PerformanceNavigationTiming?(c=s.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function b_(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function T_(c){return c.h?1:c.g?c.g.size:0}function Qd(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Yd(c,d){c.g?c.g.add(d):c.h=d}function C_(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}D_.prototype.cancel=function(){if(this.i=S_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function S_(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let h of c.g.values())d=d.concat(h.G);return d}return y(c.i)}var A_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function VC(c,d){if(c){c=c.split("&");for(let h=0;h<c.length;h++){let m=c[h].indexOf("="),b,A=null;m>=0?(b=c[h].substring(0,m),A=c[h].substring(m+1)):b=c[h],d(b,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function jn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;c instanceof jn?(this.l=c.l,es(this,c.j),this.o=c.o,this.g=c.g,ts(this,c.u),this.h=c.h,Jd(this,O_(c.i)),this.m=c.m):c&&(d=String(c).match(A_))?(this.l=!1,es(this,d[1]||"",!0),this.o=ns(d[2]||""),this.g=ns(d[3]||"",!0),ts(this,d[4]),this.h=ns(d[5]||"",!0),Jd(this,d[6]||"",!0),this.m=ns(d[7]||"")):(this.l=!1,this.i=new is(null,this.l))}jn.prototype.toString=function(){let c=[];var d=this.j;d&&c.push(rs(d,x_,!0),":");var h=this.g;return(h||d=="file")&&(c.push("//"),(d=this.o)&&c.push(rs(d,x_,!0),"@"),c.push(Zo(h).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.u,h!=null&&c.push(":",String(h))),(h=this.h)&&(this.g&&h.charAt(0)!="/"&&c.push("/"),c.push(rs(h,h.charAt(0)=="/"?BC:jC,!0))),(h=this.i.toString())&&c.push("?",h),(h=this.m)&&c.push("#",rs(h,$C)),c.join("")},jn.prototype.resolve=function(c){let d=tn(this),h=!!c.j;h?es(d,c.j):h=!!c.o,h?d.o=c.o:h=!!c.g,h?d.g=c.g:h=c.u!=null;var m=c.h;if(h)ts(d,c.u);else if(h=!!c.h){if(m.charAt(0)!="/")if(this.g&&!this.h)m="/"+m;else{var b=d.h.lastIndexOf("/");b!=-1&&(m=d.h.slice(0,b+1)+m)}if(b=m,b==".."||b==".")m="";else if(b.indexOf("./")!=-1||b.indexOf("/.")!=-1){m=b.lastIndexOf("/",0)==0,b=b.split("/");let A=[];for(let k=0;k<b.length;){let Z=b[k++];Z=="."?m&&k==b.length&&A.push(""):Z==".."?((A.length>1||A.length==1&&A[0]!="")&&A.pop(),m&&k==b.length&&A.push("")):(A.push(Z),m=!0)}m=A.join("/")}else m=b}return h?d.h=m:h=c.i.toString()!=="",h?Jd(d,O_(c.i)):h=!!c.m,h&&(d.m=c.m),d};function tn(c){return new jn(c)}function es(c,d,h){c.j=h?ns(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function ts(c,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);c.u=d}else c.u=null}function Jd(c,d,h){d instanceof is?(c.i=d,HC(c.i,c.l)):(h||(d=rs(d,UC)),c.i=new is(d,c.l))}function De(c,d,h){c.i.set(d,h)}function za(c){return De(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function ns(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function rs(c,d,h){return typeof c=="string"?(c=encodeURI(c).replace(d,LC),h&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function LC(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var x_=/[#\/\?@]/g,jC=/[#\?:]/g,BC=/[#\?]/g,UC=/[#\?@]/g,$C=/#/g;function is(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Tr(c){c.g||(c.g=new Map,c.h=0,c.i&&VC(c.i,function(d,h){c.add(decodeURIComponent(d.replace(/\+/g," ")),h)}))}n=is.prototype,n.add=function(c,d){Tr(this),this.i=null,c=Si(this,c);let h=this.g.get(c);return h||this.g.set(c,h=[]),h.push(d),this.h+=1,this};function M_(c,d){Tr(c),d=Si(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function N_(c,d){return Tr(c),d=Si(c,d),c.g.has(d)}n.forEach=function(c,d){Tr(this),this.g.forEach(function(h,m){h.forEach(function(b){c.call(d,b,m,this)},this)},this)};function R_(c,d){Tr(c);let h=[];if(typeof d=="string")N_(c,d)&&(h=h.concat(c.g.get(Si(c,d))));else for(c=Array.from(c.g.values()),d=0;d<c.length;d++)h=h.concat(c[d]);return h}n.set=function(c,d){return Tr(this),this.i=null,c=Si(this,c),N_(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=R_(this,c),c.length>0?String(c[0]):d):d};function P_(c,d,h){M_(c,d),h.length>0&&(c.i=null,c.g.set(Si(c,d),y(h)),c.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(let m=0;m<d.length;m++){var h=d[m];let b=Zo(h);h=R_(this,h);for(let A=0;A<h.length;A++){let k=b;h[A]!==""&&(k+="="+Zo(h[A])),c.push(k)}}return this.i=c.join("&")};function O_(c){let d=new is;return d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),d}function Si(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function HC(c,d){d&&!c.j&&(Tr(c),c.i=null,c.g.forEach(function(h,m){let b=m.toLowerCase();m!=b&&(M_(this,m),P_(this,b,h))},c)),c.j=d}function qC(c,d){let h=new Jo;if(s.Image){let m=new Image;m.onload=f(Bn,h,"TestLoadImage: loaded",!0,d,m),m.onerror=f(Bn,h,"TestLoadImage: error",!1,d,m),m.onabort=f(Bn,h,"TestLoadImage: abort",!1,d,m),m.ontimeout=f(Bn,h,"TestLoadImage: timeout",!1,d,m),s.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function zC(c,d){let h=new Jo,m=new AbortController,b=setTimeout(()=>{m.abort(),Bn(h,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(A=>{clearTimeout(b),A.ok?Bn(h,"TestPingServer: ok",!0,d):Bn(h,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),Bn(h,"TestPingServer: error",!1,d)})}function Bn(c,d,h,m,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),m(h)}catch{}}function GC(){this.g=new AC}function Ga(c){this.i=c.Sb||null,this.h=c.ab||!1}p(Ga,l_),Ga.prototype.g=function(){return new Wa(this.i,this.h)};function Wa(c,d){Je.call(this),this.H=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Wa,Je),n=Wa.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=d,this.readyState=1,ss(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(d.body=c),(this.H||s).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,os(this)),this.readyState=0},n.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ss(this)),this.g&&(this.readyState=3,ss(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;k_(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function k_(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}n.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?os(this):ss(this),this.readyState==3&&k_(this)}},n.Oa=function(c){this.g&&(this.response=this.responseText=c,os(this))},n.Na=function(c){this.g&&(this.response=c,os(this))},n.ga=function(){this.g&&os(this)};function os(c){c.readyState=4,c.l=null,c.j=null,c.B=null,ss(c)}n.setRequestHeader=function(c,d){this.A.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var h=d.next();!h.done;)h=h.value,c.push(h[0]+": "+h[1]),h=d.next();return c.join(`\r
`)};function ss(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Wa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function F_(c){let d="";return ja(c,function(h,m){d+=m,d+=":",d+=h,d+=`\r
`}),d}function Zd(c,d,h){e:{for(m in h){var m=!1;break e}m=!0}m||(h=F_(h),typeof c=="string"?h!=null&&Zo(h):De(c,d,h))}function xe(c){Je.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(xe,Je);var WC=/^https?$/i,KC=["POST","PUT"];n=xe.prototype,n.Fa=function(c){this.H=c},n.ea=function(c,d,h,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():y_.g(),this.g.onreadystatechange=g(l(this.Ca,this));try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){V_(this,A);return}if(c=h||"",h=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var b in m)h.set(b,m[b]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let A of m.keys())h.set(A,m.get(A));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(h.keys()).find(A=>A.toLowerCase()=="content-type"),b=s.FormData&&c instanceof s.FormData,!(Array.prototype.indexOf.call(KC,d,void 0)>=0)||m||b||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,k]of h)this.g.setRequestHeader(A,k);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(A){V_(this,A)}};function V_(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.o=5,L_(c),Ka(c)}function L_(c){c.A||(c.A=!0,rt(c,"complete"),rt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,rt(this,"complete"),rt(this,"abort"),Ka(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ka(this,!0)),xe.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?j_(this):this.Xa())},n.Xa=function(){j_(this)};function j_(c){if(c.h&&typeof o<"u"){if(c.v&&Un(c)==4)setTimeout(c.Ca.bind(c),0);else if(rt(c,"readystatechange"),Un(c)==4){c.h=!1;try{let A=c.ca();e:switch(A){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var h;if(!(h=d)){var m;if(m=A===0){let k=String(c.D).match(A_)[1]||null;!k&&s.self&&s.self.location&&(k=s.self.location.protocol.slice(0,-1)),m=!WC.test(k?k.toLowerCase():"")}h=m}if(h)rt(c,"complete"),rt(c,"success");else{c.o=6;try{var b=Un(c)>2?c.g.statusText:""}catch{b=""}c.l=b+" ["+c.ca()+"]",L_(c)}}finally{Ka(c)}}}}function Ka(c,d){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);let h=c.g;c.g=null,d||rt(c,"ready");try{h.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Un(c){return c.g?c.g.readyState:0}n.ca=function(){try{return Un(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),SC(d)}};function B_(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function QC(c){let d={};c=(c.g&&Un(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(v(c[m]))continue;var h=PC(c[m]);let b=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let A=d[b]||[];d[b]=A,A.push(h)}EC(d,function(m){return m.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function as(c,d,h){return h&&h.internalChannelParams&&h.internalChannelParams[c]||d}function U_(c){this.za=0,this.i=[],this.j=new Jo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=as("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=as("baseRetryDelayMs",5e3,c),this.Za=as("retryDelaySeedMs",1e4,c),this.Ta=as("forwardChannelMaxRetries",2,c),this.va=as("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new D_(c&&c.concurrentRequestLimit),this.Ba=new GC,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=U_.prototype,n.ka=8,n.I=1,n.connect=function(c,d,h,m){it(0),this.W=c,this.H=d||{},h&&m!==void 0&&(this.H.OSID=h,this.H.OAID=m),this.F=this.X,this.J=Y_(this,null,this.W),Ya(this)};function Xd(c){if($_(c),c.I==3){var d=c.V++,h=tn(c.J);if(De(h,"SID",c.M),De(h,"RID",d),De(h,"TYPE","terminate"),cs(c,h),d=new Ln(c,c.j,d),d.M=2,d.A=za(tn(h)),h=!1,s.navigator&&s.navigator.sendBeacon)try{h=s.navigator.sendBeacon(d.A.toString(),"")}catch{}!h&&s.Image&&(new Image().src=d.A,h=!0),h||(d.g=J_(d.j,null),d.g.ea(d.A)),d.F=Date.now(),qa(d)}Q_(c)}function Qa(c){c.g&&(tf(c),c.g.cancel(),c.g=null)}function $_(c){Qa(c),c.v&&(s.clearTimeout(c.v),c.v=null),Ja(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&s.clearTimeout(c.m),c.m=null)}function Ya(c){if(!b_(c.h)&&!c.m){c.m=!0;var d=c.Ea;J||_(),z||(J(),z=!0),I.add(d,c),c.D=0}}function YC(c,d){return T_(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=d.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Yo(l(c.Ea,c,d),K_(c,c.D)),c.D++,!0)}n.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;let b=new Ln(this,this.j,c),A=this.o;if(this.U&&(A?(A=Xy(A),t_(A,this.U)):A=this.U),this.u!==null||this.R||(b.J=A,A=null),this.S)e:{for(var d=0,h=0;h<this.i.length;h++){t:{var m=this.i[h];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,d>4096){d=h;break e}if(d===4096||h===this.i.length-1){d=h+1;break e}}d=1e3}else d=1e3;d=q_(this,b,d),h=tn(this.J),De(h,"RID",c),De(h,"CVER",22),this.G&&De(h,"X-HTTP-Session-Id",this.G),cs(this,h),A&&(this.R?d="headers="+Zo(F_(A))+"&"+d:this.u&&Zd(h,this.u,A)),Yd(this.h,b),this.Ra&&De(h,"TYPE","init"),this.S?(De(h,"$req",d),De(h,"SID","null"),b.U=!0,Gd(b,h,null)):Gd(b,h,d),this.I=2}}else this.I==3&&(c?H_(this,c):this.i.length==0||b_(this.h)||H_(this))};function H_(c,d){var h;d?h=d.l:h=c.V++;let m=tn(c.J);De(m,"SID",c.M),De(m,"RID",h),De(m,"AID",c.K),cs(c,m),c.u&&c.o&&Zd(m,c.u,c.o),h=new Ln(c,c.j,h,c.D+1),c.u===null&&(h.J=c.o),d&&(c.i=d.G.concat(c.i)),d=q_(c,h,1e3),h.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Yd(c.h,h),Gd(h,m,d)}function cs(c,d){c.H&&ja(c.H,function(h,m){De(d,m,h)}),c.l&&ja({},function(h,m){De(d,m,h)})}function q_(c,d,h){h=Math.min(c.i.length,h);let m=c.l?l(c.l.Ka,c.l,c):null;e:{var b=c.i;let Z=-1;for(;;){let Le=["count="+h];Z==-1?h>0?(Z=b[0].g,Le.push("ofs="+Z)):Z=0:Le.push("ofs="+Z);let ve=!0;for(let Ge=0;Ge<h;Ge++){var A=b[Ge].g;let nn=b[Ge].map;if(A-=Z,A<0)Z=Math.max(0,b[Ge].g-100),ve=!1;else try{A="req"+A+"_"||"";try{var k=nn instanceof Map?nn:Object.entries(nn);for(let[Sr,$n]of k){let Hn=$n;a($n)&&(Hn=Ud($n)),Le.push(A+Sr+"="+encodeURIComponent(Hn))}}catch(Sr){throw Le.push(A+"type="+encodeURIComponent("_badmap")),Sr}}catch{m&&m(nn)}}if(ve){k=Le.join("&");break e}}k=void 0}return c=c.i.splice(0,h),d.G=c,k}function z_(c){if(!c.g&&!c.v){c.Y=1;var d=c.Da;J||_(),z||(J(),z=!0),I.add(d,c),c.A=0}}function ef(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Yo(l(c.Da,c),K_(c,c.A)),c.A++,!0)}n.Da=function(){if(this.v=null,G_(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Yo(l(this.Wa,this),c)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,it(10),Qa(this),G_(this))};function tf(c){c.B!=null&&(s.clearTimeout(c.B),c.B=null)}function G_(c){c.g=new Ln(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var d=tn(c.na);De(d,"RID","rpc"),De(d,"SID",c.M),De(d,"AID",c.K),De(d,"CI",c.F?"0":"1"),!c.F&&c.ia&&De(d,"TO",c.ia),De(d,"TYPE","xmlhttp"),cs(c,d),c.u&&c.o&&Zd(d,c.u,c.o),c.O&&(c.g.H=c.O);var h=c.g;c=c.ba,h.M=1,h.A=za(tn(d)),h.u=null,h.R=!0,w_(h,c)}n.Va=function(){this.C!=null&&(this.C=null,Qa(this),ef(this),it(19))};function Ja(c){c.C!=null&&(s.clearTimeout(c.C),c.C=null)}function W_(c,d){var h=null;if(c.g==d){Ja(c),tf(c),c.g=null;var m=2}else if(Qd(c.h,d))h=d.G,C_(c.h,d),m=1;else return;if(c.I!=0){if(d.o)if(m==1){h=d.u?d.u.length:0,d=Date.now()-d.F;var b=c.D;m=$a(),rt(m,new m_(m,h)),Ya(c)}else z_(c);else if(b=d.m,b==3||b==0&&d.X>0||!(m==1&&YC(c,d)||m==2&&ef(c)))switch(h&&h.length>0&&(d=c.h,d.i=d.i.concat(h)),b){case 1:Cr(c,5);break;case 4:Cr(c,10);break;case 3:Cr(c,6);break;default:Cr(c,2)}}}function K_(c,d){let h=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(h*=2),h*d}function Cr(c,d){if(c.j.info("Error code "+d),d==2){var h=l(c.bb,c),m=c.Ua;let b=!m;m=new jn(m||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||es(m,"https"),za(m),b?qC(m.toString(),h):zC(m.toString(),h)}else it(2);c.I=0,c.l&&c.l.pa(d),Q_(c),$_(c)}n.bb=function(c){c?(this.j.info("Successfully pinged google.com"),it(2)):(this.j.info("Failed to ping google.com"),it(1))};function Q_(c){if(c.I=0,c.ja=[],c.l){let d=S_(c.h);(d.length!=0||c.i.length!=0)&&(T(c.ja,d),T(c.ja,c.i),c.h.i.length=0,y(c.i),c.i.length=0),c.l.oa()}}function Y_(c,d,h){var m=h instanceof jn?tn(h):new jn(h);if(m.g!="")d&&(m.g=d+"."+m.g),ts(m,m.u);else{var b=s.location;m=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;let A=new jn(null);m&&es(A,m),d&&(A.g=d),b&&ts(A,b),h&&(A.h=h),m=A}return h=c.G,d=c.wa,h&&d&&De(m,h,d),De(m,"VER",c.ka),cs(c,m),m}function J_(c,d,h){if(d&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Aa&&!c.ma?new xe(new Ga({ab:h})):new xe(c.ma),d.Fa(c.L),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Z_(){}n=Z_.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Za(){}Za.prototype.g=function(c,d){return new It(c,d)};function It(c,d){Je.call(this),this.g=new U_(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(c?c["X-WebChannel-Client-Profile"]=d.sa:c={"X-WebChannel-Client-Profile":d.sa}),this.g.U=c,(c=d&&d.Qb)&&!v(c)&&(this.g.u=c),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!v(d)&&(this.g.G=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Ai(this)}p(It,Je),It.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},It.prototype.close=function(){Xd(this.g)},It.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var h={};h.__data__=c,c=h}else this.v&&(h={},h.__data__=Ud(c),c=h);d.i.push(new FC(d.Ya++,c)),d.I==3&&Ya(d)},It.prototype.N=function(){this.g.l=null,delete this.j,Xd(this.g),delete this.g,It.Z.N.call(this)};function X_(c){$d.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let h in d){c=h;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}p(X_,$d);function ev(){Hd.call(this),this.status=1}p(ev,Hd);function Ai(c){this.g=c}p(Ai,Z_),Ai.prototype.ra=function(){rt(this.g,"a")},Ai.prototype.qa=function(c){rt(this.g,new X_(c))},Ai.prototype.pa=function(c){rt(this.g,new ev)},Ai.prototype.oa=function(){rt(this.g,"b")},Za.prototype.createWebChannel=Za.prototype.g,It.prototype.send=It.prototype.o,It.prototype.open=It.prototype.m,It.prototype.close=It.prototype.close,_m=Nn.createWebChannelTransport=function(){return new Za},ym=Nn.getStatEventTarget=function(){return $a()},gm=Nn.Event=Dr,sl=Nn.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ha.NO_ERROR=0,Ha.TIMEOUT=8,Ha.HTTP_ERROR=6,qs=Nn.ErrorCode=Ha,g_.COMPLETE="complete",mm=Nn.EventType=g_,d_.EventType=Ko,Ko.OPEN="a",Ko.CLOSE="b",Ko.ERROR="c",Ko.MESSAGE="d",Je.prototype.listen=Je.prototype.J,ao=Nn.WebChannel=d_,vk=Nn.FetchXmlHttpFactory=Ga,xe.prototype.listenOnce=xe.prototype.K,xe.prototype.getLastError=xe.prototype.Ha,xe.prototype.getLastErrorCode=xe.prototype.ya,xe.prototype.getStatus=xe.prototype.ca,xe.prototype.getResponseJson=xe.prototype.La,xe.prototype.getResponseText=xe.prototype.la,xe.prototype.send=xe.prototype.ea,xe.prototype.setWithCredentials=xe.prototype.Fa,pm=Nn.XhrIo=xe}).apply(typeof ol<"u"?ol:typeof self<"u"?self:typeof window<"u"?window:{});var sb="@firebase/firestore",ab="4.9.2";var Ue=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ue.UNAUTHENTICATED=new Ue(null),Ue.GOOGLE_CREDENTIALS=new Ue("google-credentials-uid"),Ue.FIRST_PARTY=new Ue("first-party-uid"),Ue.MOCK_USER=new Ue("mock-user");var Ho="12.3.0";var hi=new so("@firebase/firestore");function mo(){return hi.logLevel}function P(n,...e){if(hi.logLevel<=ae.DEBUG){let t=e.map(Ey);hi.debug(`Firestore (${Ho}): ${n}`,...t)}}function lt(n,...e){if(hi.logLevel<=ae.ERROR){let t=e.map(Ey);hi.error(`Firestore (${Ho}): ${n}`,...t)}}function pi(n,...e){if(hi.logLevel<=ae.WARN){let t=e.map(Ey);hi.warn(`Firestore (${Ho}): ${n}`,...t)}}function Ey(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function B(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,vT(n,r,t)}function vT(n,e,t){let r=`FIRESTORE (${Ho}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw lt(r),new Error(r)}function U(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||vT(e,i,r)}function W(n,e){return n}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},O=class extends Sn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ft=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var wl=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Sm=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ue.UNAUTHENTICATED))}shutdown(){}},Am=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},xm=class{constructor(e){this.t=e,this.currentUser=Ue.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){U(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new Ft;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ft,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>R(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{P("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(P("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ft)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(P("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(U(typeof r.accessToken=="string",31837,{l:r}),new wl(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return U(e===null||typeof e=="string",2055,{h:e}),new Ue(e)}},Mm=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Ue.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},Nm=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Mm(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Ue.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Il=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Rm=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,eb(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){U(this.o===void 0,3512);let r=o=>{o.error!=null&&P("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,P("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{P("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):P("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Il(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(U(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Il(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function wk(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var ia=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=wk(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function G(n,e){return n<e?-1:n>e?1:0}function Pm(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),o=e.charAt(r);if(i!==o)return vm(i)===vm(o)?G(i,o):vm(i)?1:-1}return G(n.length,e.length)}var Ik=55296,Ek=57343;function vm(n){let e=n.charCodeAt(0);return e>=Ik&&e<=Ek}function bo(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function wT(n){return n+"\0"}var cb="__name__",El=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&B(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&B(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return G(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):Pm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Mn.fromString(e.substring(4,e.length-2))}},me=class n extends El{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new O(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Dk=/^[_a-zA-Z][_a-zA-Z0-9]*$/,$e=class n extends El{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Dk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===cb}static keyField(){return new n([cb])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new O(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new O(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new O(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new O(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var V=class n{constructor(e){this.path=e}static fromPath(e){return new n(me.fromString(e))}static fromName(e){return new n(me.fromString(e).popFirst(5))}static empty(){return new n(me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return me.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new me(e.slice()))}};function IT(n,e,t){if(!t)throw new O(M.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function bk(n,e,t,r){if(e===!0&&r===!0)throw new O(M.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ub(n){if(!V.isDocumentKey(n))throw new O(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function lb(n){if(V.isDocumentKey(n))throw new O(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ET(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Ed(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":B(12329,{type:typeof n})}function tt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new O(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Ed(n);throw new O(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Tk(n,e){if(e<=0)throw new O(M.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function Ve(n,e){let t={typeString:n};return e&&(t.value=e),t}function Sa(n,e){if(!ET(n))throw new O(M.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new O(M.INVALID_ARGUMENT,t);return!0}var db=-62135596800,fb=1e6,Ce=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*fb);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new O(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new O(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<db)throw new O(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new O(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/fb}_compareTo(e){return this.seconds===e.seconds?G(this.nanoseconds,e.nanoseconds):G(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Sa(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-db;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Ce._jsonSchemaVersion="firestore/timestamp/1.0",Ce._jsonSchema={type:Ve("string",Ce._jsonSchemaVersion),seconds:Ve("number"),nanoseconds:Ve("number")};var $=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Ce(0,0))}static max(){return new n(new Ce(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var oa=-1,To=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function Om(n){return n.fields.find(e=>e.kind===2)}function Zr(n){return n.fields.filter(e=>e.kind!==2)}To.UNKNOWN_ID=-1;var Io=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var sa=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,Lt.min())}};function Ck(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=$.fromTimestamp(r===1e9?new Ce(t+1,0):new Ce(t,r));return new Lt(i,V.empty(),e)}function DT(n){return new Lt(n.readTime,n.key,oa)}var Lt=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n($.min(),V.empty(),oa)}static max(){return new n($.max(),V.empty(),oa)}};function Dy(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=V.comparator(n.documentKey,e.documentKey),t!==0?t:G(n.largestBatchId,e.largestBatchId))}var bT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Dl=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function bi(n){return R(this,null,function*(){if(n.code!==M.FAILED_PRECONDITION||n.message!==bT)throw n;P("LocalStore","Unexpectedly lost primary lease")})}var S=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&B(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(f=>{s[l]=f,++a,a===o&&r(s)},f=>i(f))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var St="SimpleDb",bl=class n{static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new ai(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Ft,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new ai(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{let i=by(r.target.error);this.S.reject(new ai(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(P(St,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new Fm(t)}},Co=class n{static delete(e){return P(St,"Removing database:",e),ei(Qp().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!el())return!1;if(n.F())return!0;let e=Kr(),t=n.M(e),r=0<t&&t<10,i=TT(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,n.M(Kr())===12.2&&lt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}L(e){return R(this,null,function*(){return this.db||(P(St,"Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new ai(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new O(M.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new O(M.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new ai(e,s))},i.onupgradeneeded=o=>{P(St,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.N.k(s,i.transaction,o.oldVersion,this.version).next(()=>{P(St,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db})}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return R(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.L(e);let a=bl.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.C(),l)).catch(l=>(a.abort(l),S.reject(l))).toPromise();return u.catch(()=>{}),yield a.D,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&s<3;if(P(St,"Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function TT(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var km=class{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return ei(this.U.delete())}},ai=class extends O{constructor(e,t){super(M.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Ir(n){return n.name==="IndexedDbTransactionError"}var Fm=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(P(St,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(P(St,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ei(r)}add(e){return P(St,"ADD",this.store.name,e,e),ei(this.store.add(e))}get(e){return ei(this.store.get(e)).next(t=>(t===void 0&&(t=null),P(St,"GET",this.store.name,e,t),t))}delete(e){return P(St,"DELETE",this.store.name,e),ei(this.store.delete(e))}count(){return P(St,"COUNT",this.store.name),ei(this.store.count())}J(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new S((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.H(o,(a,u)=>{s.push(u)}).next(()=>s)}}Y(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new S((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}Z(e,t){P(St,"DELETE ALL",this.store.name);let r=this.options(e,t);r.X=!1;let i=this.cursor(r);return this.H(i,(o,s,a)=>a.delete())}ee(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.H(i,t)}te(e){let t=this.cursor({});return new S((r,i)=>{t.onerror=o=>{let s=by(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}H(e,t){let r=[];return new S((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new km(a),l=t(a.primaryKey,a.value,u);if(l instanceof S){let f=l.catch(p=>(u.done(),S.reject(p)));r.push(f)}u.isDone?i():u.G===null?a.continue():a.continue(u.G)}}).next(()=>S.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function ei(n){return new S((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=by(r.target.error);t(i)}})}var hb=!1;function by(n){let e=Co.M(Kr());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new O("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return hb||(hb=!0,setTimeout(()=>{throw r},0)),r}}return n}var Js="IndexBackfiller",Vm=class{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){P(Js,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>R(this,null,function*(){this.task=null;try{let t=yield this.ne.ie();P(Js,`Documents written: ${t}`)}catch(t){Ir(t)?P(Js,"Ignoring IndexedDB error during index backfill: ",t):yield bi(t)}yield this.re(6e4)}))}},Lm=class{constructor(e,t){this.localStore=e,this.persistence=t}ie(e=50){return R(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.se(t,e))})}se(e,t){let r=new Set,i=t,o=!0;return S.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return P(Js,`Processing collection: ${s}`),this.oe(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this._e(i,o)).next(a=>(P(Js,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}_e(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=DT(o);Dy(s,r)>0&&(r=s)}),new Lt(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Zt=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),ci=-1;function Dd(n){return n==null}function aa(n){return n===0&&1/n==-1/0}function Sk(n){return typeof n=="number"&&Number.isInteger(n)&&!aa(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Tl="";function nt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=pb(e)),e=Ak(n.get(t),e);return pb(e)}function Ak(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case Tl:t+="";break;default:t+=o}}return t}function pb(n){return n+Tl+""}function fn(n){let e=n.length;if(U(e>=2,64408,{path:n}),e===2)return U(n.charAt(0)===Tl&&n.charAt(1)==="",56145,{path:n}),me.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf(Tl,o);switch((s<0||s>t)&&B(50515,{path:n}),n.charAt(s+1)){case"":let a=n.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:B(61167,{path:n})}o=s+2}return new me(r)}var Xr="remoteDocuments",Aa="owner",co="owner",ca="mutationQueues",xk="userId",Jt="mutations",mb="batchId",ii="userMutationsIndex",gb=["userId","batchId"];function fl(n,e){return[n,nt(e)]}function CT(n,e,t){return[n,nt(e),t]}var Mk={},So="documentMutations",Cl="remoteDocumentsV14",Nk=["prefixPath","collectionGroup","readTime","documentId"],hl="documentKeyIndex",Rk=["prefixPath","collectionGroup","documentId"],ST="collectionGroupIndex",Pk=["collectionGroup","readTime","prefixPath","documentId"],ua="remoteDocumentGlobal",jm="remoteDocumentGlobalKey",Ao="targets",AT="queryTargetsIndex",Ok=["canonicalId","targetId"],xo="targetDocuments",kk=["targetId","path"],Ty="documentTargetsIndex",Fk=["path","targetId"],Sl="targetGlobalKey",ui="targetGlobal",la="collectionParents",Vk=["collectionId","parent"],Mo="clientMetadata",Lk="clientId",bd="bundles",jk="bundleId",Td="namedQueries",Bk="name",Cy="indexConfiguration",Uk="indexId",Bm="collectionGroupIndex",$k="collectionGroup",Zs="indexState",Hk=["indexId","uid"],xT="sequenceNumberIndex",qk=["uid","sequenceNumber"],Xs="indexEntries",zk=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],MT="documentKeyIndex",Gk=["indexId","uid","orderedDocumentKey"],Cd="documentOverlays",Wk=["userId","collectionPath","documentId"],Um="collectionPathOverlayIndex",Kk=["userId","collectionPath","largestBatchId"],NT="collectionGroupOverlayIndex",Qk=["userId","collectionGroup","largestBatchId"],Sy="globals",Yk="name",RT=[ca,Jt,So,Xr,Ao,Aa,ui,xo,Mo,ua,la,bd,Td],Jk=[...RT,Cd],PT=[ca,Jt,So,Cl,Ao,Aa,ui,xo,Mo,ua,la,bd,Td,Cd],OT=PT,Ay=[...OT,Cy,Zs,Xs],Zk=Ay,kT=[...Ay,Sy],Xk=kT;var da=class extends Dl{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}};function ze(n,e){let t=W(n);return Co.O(t.le,e)}function yb(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Er(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function FT(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ae=class n{constructor(e,t){this.comparator=e,this.root=t||pn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,pn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wo(this.root,e,this.comparator,!1)}getReverseIterator(){return new wo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wo(this.root,e,this.comparator,!0)}},wo=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},pn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw B(43730,{key:this.key,value:this.value});if(this.right.isRed())throw B(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw B(27949);return e+(this.isRed()?0:1)}};pn.EMPTY=null,pn.RED=!0,pn.BLACK=!1;pn.EMPTY=new class{constructor(){this.size=0}get key(){throw B(57766)}get value(){throw B(16141)}get color(){throw B(16727)}get left(){throw B(29726)}get right(){throw B(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new pn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var _e=class n{constructor(e){this.comparator=e,this.data=new Ae(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Al(this.data.getIterator())}getIteratorFrom(e){return new Al(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Al=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function uo(n){return n.hasNext()?n.getNext():void 0}var At=class n{constructor(e){this.fields=e,e.sort($e.comparator)}static empty(){return new n([])}unionWith(e){let t=new _e($e.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return bo(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var xl=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var qe=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new xl("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return G(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};qe.EMPTY_BYTE_STRING=new qe("");var eF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pn(n){if(U(!!n,39018),typeof n=="string"){let e=0,t=eF.exec(n);if(U(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Te(n.seconds),nanos:Te(n.nanos)}}function Te(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function On(n){return typeof n=="string"?qe.fromBase64String(n):qe.fromUint8Array(n)}var VT="server_timestamp",LT="__type__",jT="__previous_value__",BT="__local_write_time__";function xy(n){return(n?.mapValue?.fields||{})[LT]?.stringValue===VT}function Sd(n){let e=n.mapValue.fields[jT];return xy(e)?Sd(e):e}function fa(n){let e=Pn(n.mapValue.fields[BT].timestampValue);return new Ce(e.seconds,e.nanos)}var $m=class{constructor(e,t,r,i,o,s,a,u,l,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=f}},Ml="(default)",No=class n{constructor(e,t){this.projectId=e,this.database=t||Ml}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Ml}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var My="__type__",UT="__max__",cr={mapValue:{fields:{__type__:{stringValue:UT}}}},Ny="__vector__",Ro="value",pl={nullValue:"NULL_VALUE"};function hr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?xy(n)?4:$T(n)?9007199254740991:Ad(n)?10:11:B(28295,{value:n})}function mn(n,e){if(n===e)return!0;let t=hr(n);if(t!==hr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return fa(n).isEqual(fa(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Pn(i.timestampValue),a=Pn(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return On(i.bytesValue).isEqual(On(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Te(i.geoPointValue.latitude)===Te(o.geoPointValue.latitude)&&Te(i.geoPointValue.longitude)===Te(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Te(i.integerValue)===Te(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Te(i.doubleValue),a=Te(o.doubleValue);return s===a?aa(s)===aa(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return bo(n.arrayValue.values||[],e.arrayValue.values||[],mn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(yb(s)!==yb(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!mn(s[u],a[u])))return!1;return!0}(n,e);default:return B(52216,{left:n})}}function ha(n,e){return(n.values||[]).find(t=>mn(t,e))!==void 0}function pr(n,e){if(n===e)return 0;let t=hr(n),r=hr(e);if(t!==r)return G(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return G(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Te(o.integerValue||o.doubleValue),u=Te(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return _b(n.timestampValue,e.timestampValue);case 4:return _b(fa(n),fa(e));case 5:return Pm(n.stringValue,e.stringValue);case 6:return function(o,s){let a=On(o),u=On(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let f=G(a[l],u[l]);if(f!==0)return f}return G(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=G(Te(o.latitude),Te(s.latitude));return a!==0?a:G(Te(o.longitude),Te(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return vb(n.arrayValue,e.arrayValue);case 10:return function(o,s){let a=o.fields||{},u=s.fields||{},l=a[Ro]?.arrayValue,f=u[Ro]?.arrayValue,p=G(l?.values?.length||0,f?.values?.length||0);return p!==0?p:vb(l,f)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===cr.mapValue&&s===cr.mapValue)return 0;if(o===cr.mapValue)return 1;if(s===cr.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},f=Object.keys(l);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){let g=Pm(u[p],f[p]);if(g!==0)return g;let y=pr(a[u[p]],l[f[p]]);if(y!==0)return y}return G(u.length,f.length)}(n.mapValue,e.mapValue);default:throw B(23264,{he:t})}}function _b(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return G(n,e);let t=Pn(n),r=Pn(e),i=G(t.seconds,r.seconds);return i!==0?i:G(t.nanos,r.nanos)}function vb(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=pr(t[i],r[i]);if(o)return o}return G(t.length,r.length)}function Po(n){return Hm(n)}function Hm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Pn(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return On(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return V.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Hm(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Hm(t.fields[s])}`;return i+"}"}(n.mapValue):B(61005,{value:n})}function ml(n){switch(hr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Sd(n);return e?16+ml(e):16;case 5:return 2*n.stringValue.length;case 6:return On(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+ml(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Er(r.fields,(o,s)=>{i+=o.length+ml(s)}),i}(n.mapValue);default:throw B(13486,{value:n})}}function pa(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function qm(n){return!!n&&"integerValue"in n}function ma(n){return!!n&&"arrayValue"in n}function wb(n){return!!n&&"nullValue"in n}function Ib(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function gl(n){return!!n&&"mapValue"in n}function Ad(n){return(n?.mapValue?.fields||{})[My]?.stringValue===Ny}function ea(n){if(n.geoPointValue)return{geoPointValue:ie({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:ie({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Er(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ea(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ea(n.arrayValue.values[t]);return e}return ie({},n)}function $T(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===UT}var HT={mapValue:{fields:{[My]:{stringValue:Ny},[Ro]:{arrayValue:{}}}}};function tF(n){return"nullValue"in n?pl:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?pa(No.empty(),V.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Ad(n)?HT:{mapValue:{}}:B(35942,{value:n})}function nF(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?pa(No.empty(),V.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?HT:"mapValue"in n?Ad(n)?{mapValue:{}}:cr:B(61959,{value:n})}function Eb(n,e){let t=pr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Db(n,e){let t=pr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var dt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!gl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ea(t)}setAll(e){let t=$e.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=ea(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());gl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return mn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];gl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Er(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(ea(this.value))}};function qT(n){let e=[];return Er(n.fields,(t,r)=>{let i=new $e([t]);if(gl(r)){let o=qT(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new At(e)}var Ye=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,$.min(),$.min(),$.min(),dt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,$.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,$.min(),$.min(),dt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,$.min(),$.min(),dt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual($.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var mr=class{constructor(e,t){this.position=e,this.inclusive=t}};function bb(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=V.comparator(V.fromName(s.referenceValue),t.key):r=pr(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Tb(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!mn(n.position[t],e.position[t]))return!1;return!0}var mi=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function rF(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Nl=class{},oe=class n extends Nl{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Wm(e,t,r):t==="array-contains"?new Ym(e,r):t==="in"?new Rl(e,r):t==="not-in"?new Jm(e,r):t==="array-contains-any"?new Zm(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Km(e,r):new Qm(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(pr(t,this.value)):t!==null&&hr(this.value)===hr(t)&&this.matchesComparison(pr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return B(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ge=class n extends Nl{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return Oo(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function Oo(n){return n.op==="and"}function zm(n){return n.op==="or"}function Ry(n){return zT(n)&&Oo(n)}function zT(n){for(let e of n.filters)if(e instanceof ge)return!1;return!0}function Gm(n){if(n instanceof oe)return n.field.canonicalString()+n.op.toString()+Po(n.value);if(Ry(n))return n.filters.map(e=>Gm(e)).join(",");{let e=n.filters.map(t=>Gm(t)).join(",");return`${n.op}(${e})`}}function GT(n,e){return n instanceof oe?function(r,i){return i instanceof oe&&r.op===i.op&&r.field.isEqual(i.field)&&mn(r.value,i.value)}(n,e):n instanceof ge?function(r,i){return i instanceof ge&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&GT(s,i.filters[a]),!0):!1}(n,e):void B(19439)}function WT(n,e){let t=n.filters.concat(e);return ge.create(t,n.op)}function KT(n){return n instanceof oe?function(t){return`${t.field.canonicalString()} ${t.op} ${Po(t.value)}`}(n):n instanceof ge?function(t){return t.op.toString()+" {"+t.getFilters().map(KT).join(" ,")+"}"}(n):"Filter"}var Wm=class extends oe{constructor(e,t,r){super(e,t,r),this.key=V.fromName(r.referenceValue)}matches(e){let t=V.comparator(e.key,this.key);return this.matchesComparison(t)}},Km=class extends oe{constructor(e,t){super(e,"in",t),this.keys=QT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Qm=class extends oe{constructor(e,t){super(e,"not-in",t),this.keys=QT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function QT(n,e){return(e.arrayValue?.values||[]).map(t=>V.fromName(t.referenceValue))}var Ym=class extends oe{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return ma(t)&&ha(t.arrayValue,this.value)}},Rl=class extends oe{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&ha(this.value.arrayValue,t)}},Jm=class extends oe{constructor(e,t){super(e,"not-in",t)}matches(e){if(ha(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ha(this.value.arrayValue,t)}},Zm=class extends oe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!ma(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ha(this.value.arrayValue,r))}};var Xm=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Te=null}};function eg(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Xm(n,e,t,r,i,o,s)}function gi(n){let e=W(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Gm(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Dd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Po(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Po(r)).join(",")),e.Te=t}return e.Te}function xa(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!rF(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!GT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Tb(n.startAt,e.startAt)&&Tb(n.endAt,e.endAt)}function Pl(n){return V.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Ol(n,e){return n.filters.filter(t=>t instanceof oe&&t.field.isEqual(e))}function Cb(n,e,t){let r=pl,i=!0;for(let o of Ol(n,e)){let s=pl,a=!0;switch(o.op){case"<":case"<=":s=tF(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=pl}Eb({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];Eb({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function Sb(n,e,t){let r=cr,i=!0;for(let o of Ol(n,e)){let s=cr,a=!0;switch(o.op){case">=":case">":s=nF(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=cr}Db({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];Db({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var gr=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function iF(n,e,t,r,i,o,s,a){return new gr(n,e,t,r,i,o,s,a)}function Ma(n){return new gr(n)}function Ab(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function YT(n){return n.collectionGroup!==null}function ta(n){let e=W(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new _e($e.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new mi(o,r))}),t.has($e.keyField().canonicalString())||e.Ie.push(new mi($e.keyField(),r))}return e.Ie}function Vt(n){let e=W(n);return e.Ee||(e.Ee=oF(e,ta(n))),e.Ee}function oF(n,e){if(n.limitType==="F")return eg(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new mi(i.field,o)});let t=n.endAt?new mr(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new mr(n.startAt.position,n.startAt.inclusive):null;return eg(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function tg(n,e){let t=n.filters.concat([e]);return new gr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function kl(n,e,t){return new gr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function xd(n,e){return xa(Vt(n),Vt(e))&&n.limitType===e.limitType}function JT(n){return`${gi(Vt(n))}|lt:${n.limitType}`}function go(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>KT(i)).join(", ")}]`),Dd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Po(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Po(i)).join(",")),`Target(${r})`}(Vt(n))}; limitType=${n.limitType})`}function Na(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):V.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of ta(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=bb(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,ta(r),i)||r.endAt&&!function(s,a,u){let l=bb(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,ta(r),i))}(n,e)}function sF(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ZT(n){return(e,t)=>{let r=!1;for(let i of ta(n)){let o=aF(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function aF(n,e,t){let r=n.field.isKeyField()?V.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?pr(u,l):B(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return B(19790,{direction:n.dir})}}var Xt=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Er(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return FT(this.inner)}size(){return this.innerSize}};var cF=new Ae(V.comparator);function xt(){return cF}var XT=new Ae(V.comparator);function Qs(...n){let e=XT;for(let t of n)e=e.insert(t.key,t);return e}function e0(n){let e=XT;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function hn(){return na()}function t0(){return na()}function na(){return new Xt(n=>n.toString(),(n,e)=>n.isEqual(e))}var uF=new Ae(V.comparator),lF=new _e(V.comparator);function re(...n){let e=lF;for(let t of n)e=e.add(t);return e}var dF=new _e(G);function fF(){return dF}function Py(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:aa(e)?"-0":e}}function n0(n){return{integerValue:""+n}}function hF(n,e){return Sk(e)?n0(e):Py(n,e)}var ko=class{constructor(){this._=void 0}};function pF(n,e,t){return n instanceof yi?function(i,o){let s={fields:{[LT]:{stringValue:VT},[BT]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&xy(o)&&(o=Sd(o)),o&&(s.fields[jT]=o),{mapValue:s}}(t,e):n instanceof kn?i0(n,e):n instanceof yr?o0(n,e):function(i,o){let s=r0(i,o),a=xb(s)+xb(i.Ae);return qm(s)&&qm(i.Ae)?n0(a):Py(i.serializer,a)}(n,e)}function mF(n,e,t){return n instanceof kn?i0(n,e):n instanceof yr?o0(n,e):t}function r0(n,e){return n instanceof _i?function(r){return qm(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var yi=class extends ko{},kn=class extends ko{constructor(e){super(),this.elements=e}};function i0(n,e){let t=s0(e);for(let r of n.elements)t.some(i=>mn(i,r))||t.push(r);return{arrayValue:{values:t}}}var yr=class extends ko{constructor(e){super(),this.elements=e}};function o0(n,e){let t=s0(e);for(let r of n.elements)t=t.filter(i=>!mn(i,r));return{arrayValue:{values:t}}}var _i=class extends ko{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function xb(n){return Te(n.integerValue||n.doubleValue)}function s0(n){return ma(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Fl=class{constructor(e,t){this.field=e,this.transform=t}};function gF(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof kn&&i instanceof kn||r instanceof yr&&i instanceof yr?bo(r.elements,i.elements,mn):r instanceof _i&&i instanceof _i?mn(r.Ae,i.Ae):r instanceof yi&&i instanceof yi}(n.transform,e.transform)}var ng=class{constructor(e,t){this.version=e,this.transformResults=t}},Qe=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function yl(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Fo=class{};function a0(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new vi(n.key,Qe.none()):new _r(n.key,n.data,Qe.none());{let t=n.data,r=dt.empty(),i=new _e($e.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new en(n.key,r,new At(i.toArray()),Qe.none())}}function yF(n,e,t){n instanceof _r?function(i,o,s){let a=i.value.clone(),u=Nb(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof en?function(i,o,s){if(!yl(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=Nb(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(c0(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function ra(n,e,t,r){return n instanceof _r?function(o,s,a,u){if(!yl(o.precondition,s))return a;let l=o.value.clone(),f=Rb(o.fieldTransforms,u,s);return l.setAll(f),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof en?function(o,s,a,u){if(!yl(o.precondition,s))return a;let l=Rb(o.fieldTransforms,u,s),f=s.data;return f.setAll(c0(o)),f.setAll(l),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return yl(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function _F(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=r0(r.transform,i||null);o!=null&&(t===null&&(t=dt.empty()),t.set(r.field,o))}return t||null}function Mb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&bo(r,i,(o,s)=>gF(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var _r=class extends Fo{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},en=class extends Fo{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function c0(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function Nb(n,e,t){let r=new Map;U(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,mF(s,a,t[i]))}return r}function Rb(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,pF(o,s,e))}return r}var vi=class extends Fo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Vl=class extends Fo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var ga=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&yF(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=ra(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=ra(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=t0();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=a0(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument($.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),re())}isEqual(e){return this.batchId===e.batchId&&bo(this.mutations,e.mutations,(t,r)=>Mb(t,r))&&bo(this.baseMutations,e.baseMutations,(t,r)=>Mb(t,r))}},rg=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){U(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return uF}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var ya=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var ig=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var ke,ce;function vF(n){switch(n){case M.OK:return B(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return B(15467,{code:n})}}function u0(n){if(n===void 0)return lt("GRPC error has no .code"),M.UNKNOWN;switch(n){case ke.OK:return M.OK;case ke.CANCELLED:return M.CANCELLED;case ke.UNKNOWN:return M.UNKNOWN;case ke.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case ke.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case ke.INTERNAL:return M.INTERNAL;case ke.UNAVAILABLE:return M.UNAVAILABLE;case ke.UNAUTHENTICATED:return M.UNAUTHENTICATED;case ke.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case ke.NOT_FOUND:return M.NOT_FOUND;case ke.ALREADY_EXISTS:return M.ALREADY_EXISTS;case ke.PERMISSION_DENIED:return M.PERMISSION_DENIED;case ke.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case ke.ABORTED:return M.ABORTED;case ke.OUT_OF_RANGE:return M.OUT_OF_RANGE;case ke.UNIMPLEMENTED:return M.UNIMPLEMENTED;case ke.DATA_LOSS:return M.DATA_LOSS;default:return B(39323,{code:n})}}(ce=ke||(ke={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";var wF=null;function IF(){return new TextEncoder}var EF=new Mn([4294967295,4294967295],0);function Pb(n){let e=IF().encode(n),t=new hm;return t.update(e),new Uint8Array(t.digest())}function Ob(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Mn([t,r],0),new Mn([i,o],0)]}var og=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new oi(`Invalid padding: ${t}`);if(r<0)throw new oi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new oi(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new oi(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Mn.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Mn.fromNumber(r)));return i.compare(EF)===1&&(i=new Mn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=Pb(e),[r,i]=Ob(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.ge===0)return;let t=Pb(e),[r,i]=Ob(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.Se(s)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},oi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ll=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,_a.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n($.min(),i,new Ae(G),xt(),re())}},_a=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,re(),re(),re())}};var Eo=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},jl=class{constructor(e,t){this.targetId=e,this.Ce=t}},Bl=class{constructor(e,t,r=qe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Ul=class{constructor(){this.ve=0,this.Fe=kb(),this.Me=qe.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=re(),t=re(),r=re();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:B(38017,{changeType:o})}}),new _a(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=kb()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,U(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},sg=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=xt(),this.Je=al(),this.He=al(),this.Ye=new Ae(G)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:B(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let o=i.target;if(Pl(o))if(r===0){let s=new V(o.path);this.et(t,s,Ye.newNoDocument(s,$.min()))}else U(r===1,20013,{expectedCount:r});else{let s=this._t(t);if(s!==r){let a=this.ut(e),u=a?this.ct(a,e,s):1;if(u!==0){this.it(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,l)}wF?.lt(function(f,p,g,y,T){let x={localCacheCount:f,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},N=p.unchangedNames;return N&&(x.bloomFilter={applied:T===0,hashCount:N?.hashCount??0,bitmapLength:N?.bits?.bitmap?.length??0,padding:N?.bits?.padding??0,mightContain:F=>y?.mightContain(F)??!1}),x}(s,e.Ce,this.Ge.ht(),a,u))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=On(r).toUint8Array()}catch(u){if(u instanceof xl)return pi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new og(s,i,o)}catch(u){return pi(u instanceof oi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Ge.ht(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.et(t,o,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((o,s)=>{let a=this.ot(s);if(a){if(o.current&&Pl(a.target)){let u=new V(a.target.path);this.It(u).has(s)||this.Et(s,u)||this.et(s,u,Ye.newNoDocument(u,e))}o.Be&&(t.set(s,o.ke()),o.qe())}});let r=re();this.He.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.ot(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new Ll(e,t,this.Ye,this.je,r);return this.je=xt(),this.Je=al(),this.He=al(),this.Ye=new Ae(G),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Ul,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new _e(G),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new _e(G),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||P("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ul),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function al(){return new Ae(V.comparator)}function kb(){return new Ae(V.comparator)}var DF={asc:"ASCENDING",desc:"DESCENDING"},bF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TF={and:"AND",or:"OR"},ag=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function cg(n,e){return n.useProto3Json||Dd(e)?e:{value:e}}function Vo(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function l0(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function CF(n,e){return Vo(n,e.toTimestamp())}function ft(n){return U(!!n,49232),$.fromTimestamp(function(t){let r=Pn(t);return new Ce(r.seconds,r.nanos)}(n))}function Oy(n,e){return ug(n,e).canonicalString()}function ug(n,e){let t=function(i){return new me(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function d0(n){let e=me.fromString(n);return U(w0(e),10190,{key:e.toString()}),e}function $l(n,e){return Oy(n.databaseId,e.path)}function li(n,e){let t=d0(e);if(t.get(1)!==n.databaseId.projectId)throw new O(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new O(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new V(p0(t))}function f0(n,e){return Oy(n.databaseId,e)}function h0(n){let e=d0(n);return e.length===4?me.emptyPath():p0(e)}function lg(n){return new me(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function p0(n){return U(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Fb(n,e,t){return{name:$l(n,e),fields:t.value.mapValue.fields}}function SF(n,e,t){let r=li(n,e.name),i=ft(e.updateTime),o=e.createTime?ft(e.createTime):$.min(),s=new dt({mapValue:{fields:e.fields}}),a=Ye.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function AF(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:B(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,f){return l.useProto3Json?(U(f===void 0||typeof f=="string",58123),qe.fromBase64String(f||"")):(U(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),qe.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let f=l.code===void 0?M.UNKNOWN:u0(l.code);return new O(f,l.message||"")}(s);t=new Bl(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=li(n,r.document.name),o=ft(r.document.updateTime),s=r.document.createTime?ft(r.document.createTime):$.min(),a=new dt({mapValue:{fields:r.document.fields}}),u=Ye.newFoundDocument(i,o,s,a),l=r.targetIds||[],f=r.removedTargetIds||[];t=new Eo(l,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=li(n,r.document),o=r.readTime?ft(r.readTime):$.min(),s=Ye.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Eo([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=li(n,r.document),o=r.removedTargetIds||[];t=new Eo([],o,i,null)}else{if(!("filter"in e))return B(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new ig(i,o),a=r.targetId;t=new jl(a,s)}}return t}function Hl(n,e){let t;if(e instanceof _r)t={update:Fb(n,e.key,e.value)};else if(e instanceof vi)t={delete:$l(n,e.key)};else if(e instanceof en)t={update:Fb(n,e.key,e.data),updateMask:OF(e.fieldMask)};else{if(!(e instanceof Vl))return B(16599,{Vt:e.type});t={verify:$l(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof yi)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof kn)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof yr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof _i)return{fieldPath:s.field.canonicalString(),increment:a.Ae};throw B(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:CF(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:B(27497)}(n,e.precondition)),t}function dg(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?Qe.updateTime(ft(o.updateTime)):o.exists!==void 0?Qe.exists(o.exists):Qe.none()}(e.currentDocument):Qe.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)U(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),u=new yi;else if("appendMissingElements"in a){let f=a.appendMissingElements.values||[];u=new kn(f)}else if("removeAllFromArray"in a){let f=a.removeAllFromArray.values||[];u=new yr(f)}else"increment"in a?u=new _i(s,a.increment):B(16584,{proto:a});let l=$e.fromServerFormat(a.fieldPath);return new Fl(l,u)}(n,i)):[];if(e.update){e.update.name;let i=li(n,e.update.name),o=new dt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let l=u.fieldPaths||[];return new At(l.map(f=>$e.fromServerFormat(f)))}(e.updateMask);return new en(i,o,s,t,r)}return new _r(i,o,t,r)}if(e.delete){let i=li(n,e.delete);return new vi(i,t)}if(e.verify){let i=li(n,e.verify);return new Vl(i,t)}return B(1463,{proto:e})}function xF(n,e){return n&&n.length>0?(U(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?ft(i.updateTime):ft(o);return s.isEqual($.min())&&(s=ft(o)),new ng(s,i.transformResults||[])}(t,e))):[]}function m0(n,e){return{documents:[f0(n,e.path)]}}function g0(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=f0(n,i);let o=function(l){if(l.length!==0)return v0(ge.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(f=>function(g){return{field:yo(g.field),direction:NF(g.dir)}}(f))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=cg(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ft:t,parent:i}}function y0(n){let e=h0(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){U(r===1,65062);let f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];t.where&&(o=function(p){let g=_0(p);return g instanceof ge&&Ry(g)?g.getFilters():[g]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(g=>function(T){return new mi(_o(T.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(p){let g;return g=typeof p=="object"?p.value:p,Dd(g)?null:g}(t.limit));let u=null;t.startAt&&(u=function(p){let g=!!p.before,y=p.values||[];return new mr(y,g)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let g=!p.before,y=p.values||[];return new mr(y,g)}(t.endAt)),iF(e,i,s,o,a,"F",u,l)}function MF(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return B(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function _0(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=_o(t.unaryFilter.field);return oe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=_o(t.unaryFilter.field);return oe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=_o(t.unaryFilter.field);return oe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=_o(t.unaryFilter.field);return oe.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return B(61313);default:return B(60726)}}(n):n.fieldFilter!==void 0?function(t){return oe.create(_o(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return B(58110);default:return B(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ge.create(t.compositeFilter.filters.map(r=>_0(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return B(1026)}}(t.compositeFilter.op))}(n):B(30097,{filter:n})}function NF(n){return DF[n]}function RF(n){return bF[n]}function PF(n){return TF[n]}function yo(n){return{fieldPath:n.canonicalString()}}function _o(n){return $e.fromServerFormat(n.fieldPath)}function v0(n){return n instanceof oe?function(t){if(t.op==="=="){if(Ib(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NAN"}};if(wb(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ib(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NOT_NAN"}};if(wb(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yo(t.field),op:RF(t.op),value:t.value}}}(n):n instanceof ge?function(t){let r=t.getFilters().map(i=>v0(i));return r.length===1?r[0]:{compositeFilter:{op:PF(t.op),filters:r}}}(n):B(54877,{filter:n})}function OF(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function w0(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Lo=class n{constructor(e,t,r,i,o=$.min(),s=$.min(),a=qe.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var ql=class{constructor(e){this.yt=e}};function kF(n,e){let t;if(e.document)t=SF(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=V.fromSegments(e.noDocument.path),i=Ii(e.noDocument.readTime);t=Ye.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return B(56709);{let r=V.fromSegments(e.unknownDocument.path),i=Ii(e.unknownDocument.version);t=Ye.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new Ce(i[0],i[1]);return $.fromTimestamp(o)}(e.readTime)),t}function Vb(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:zl(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:$l(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Vo(o,s.version.toTimestamp()),createTime:Vo(o,s.createTime.toTimestamp())}}(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:wi(e.version)};else{if(!e.isUnknownDocument())return B(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:wi(e.version)}}return r}function zl(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function wi(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ii(n){let e=new Ce(n.seconds,n.nanoseconds);return $.fromTimestamp(e)}function ti(n,e){let t=(e.baseMutations||[]).map(o=>dg(n.yt,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>dg(n.yt,o)),i=Ce.fromMillis(e.localWriteTimeMs);return new ga(e.batchId,i,t,r)}function Ys(n){let e=Ii(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Ii(n.lastLimboFreeSnapshotVersion):$.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){let s=o.documents.length;return U(s===1,1966,{count:s}),Vt(Ma(h0(o.documents[0])))}(n.query):function(o){return Vt(y0(o))}(n.query),new Lo(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,qe.fromBase64String(n.resumeToken))}function I0(n,e){let t=wi(e.snapshotVersion),r=wi(e.lastLimboFreeSnapshotVersion),i;i=Pl(e.target)?m0(n.yt,e.target):g0(n.yt,e.target).ft;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:gi(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function E0(n){let e=y0({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?kl(e,e.limit,"L"):e}function wm(n,e){return new ya(e.largestBatchId,dg(n.yt,e.overlayMutation))}function Lb(n,e){let t=e.path.lastSegment();return[n,nt(e.path.popLast()),t]}function jb(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:wi(r.readTime),documentKey:nt(r.documentKey.path),largestBatchId:r.largestBatchId}}var fg=class{getBundleMetadata(e,t){return Bb(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Ii(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return Bb(e).put(function(i){return{bundleId:i.id,createTime:wi(ft(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return Ub(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:E0(o.bundledQuery),readTime:Ii(o.readTime)}}(r)})}saveNamedQuery(e,t){return Ub(e).put(function(i){return{name:i.name,readTime:wi(ft(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function Bb(n){return ze(n,bd)}function Ub(n){return ze(n,Td)}var Gl=class n{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return zs(e).get(Lb(this.userId,t)).next(r=>r?wm(this.serializer,r):null)}getOverlays(e,t){let r=hn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new ya(t,s);i.push(this.St(e,a))}),S.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(nt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(zs(e).Z(Um,a))}),S.waitFor(o)}getOverlaysForCollection(e,t,r){let i=hn(),o=nt(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return zs(e).J(Um,s).next(a=>{for(let u of a){let l=wm(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=hn(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return zs(e).ee({index:NT,range:a},(u,l,f)=>{let p=wm(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):f.done()}).next(()=>o)}St(e,t){return zs(e).put(function(i,o,s){let[a,u,l]=Lb(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Hl(i.yt,s.mutation)}}(this.serializer,this.userId,t))}};function zs(n){return ze(n,Cd)}var hg=class{bt(e){return ze(e,Sy)}getSessionToken(e){return this.bt(e).get("sessionToken").next(t=>{let r=t?.value;return r?qe.fromUint8Array(r):qe.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var Rn=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Te(e.integerValue));else if("doubleValue"in e){let r=Te(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),aa(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Pn(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(On(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?$T(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Ad(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):B(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=Ro,o=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Te(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),V.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};Rn.Kt=new Rn;var lo=255;function FF(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function $b(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=FF(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var pg=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{let i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{let i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){let t=this.en(e),r=$b(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){let t=this.en(e),r=$b(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(lo),this.sn(255)}_n(){this.an(lo),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Gt(e){let t=255&e;t===0?(this.sn(0),this.sn(255)):t===lo?(this.sn(lo),this.sn(0)):this.sn(t)}Jt(e){let t=255&e;t===0?(this.an(0),this.an(255)):t===lo?(this.an(lo),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},mg=class{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}},gg=class{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}},ni=class{constructor(){this.cn=new pg,this.ln=new mg(this.cn),this.hn=new gg(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}};var ri=class n{constructor(e,t,r,i){this.Tn=e,this.In=t,this.En=r,this.dn=i}An(){let e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new n(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:_l(this.En),directionalValue:_l(this.dn),orderedDocumentKey:_l(t),documentKey:r.path.toArray()}}Vn(e,t,r){let i=this.Rn(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}};function ir(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=Hb(n.En,e.En),t!==0?t:(t=Hb(n.dn,e.dn),t!==0?t:V.comparator(n.In,e.In)))}function Hb(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function _l(n){return Zp()?function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r}(n):n}function qb(n){return typeof n!="string"?n:function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(n)}var Wl=class{constructor(e){this.mn=new _e((t,r)=>$e.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(let t of e.filters){let r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(U(e.collectionGroup===this.collectionId,49279),this.pn)return!1;let t=Om(e);if(t!==void 0&&!this.wn(t))return!1;let r=Zr(e),i=new Set,o=0,s=0;for(;o<r.length&&this.wn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.mn.size>0){let a=this.mn.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.Sn(a,u)||!this.bn(this.fn[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.fn.length||!this.bn(this.fn[s++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new _e($e.comparator),t=[];for(let r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Io(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Io(r.field,0))}for(let r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Io(r.field,r.dir==="asc"?0:1)));return new To(To.UNKNOWN_ID,this.collectionId,t,sa.empty())}wn(e){for(let t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function D0(n){if(U(n instanceof oe||n instanceof ge,20012),n instanceof oe){if(n instanceof Rl){let t=n.value.arrayValue?.values?.map(r=>oe.create(n.field,"==",r))||[];return ge.create(t,"or")}return n}let e=n.filters.map(t=>D0(t));return ge.create(e,n.op)}function VF(n){if(n.getFilters().length===0)return[];let e=vg(D0(n));return U(b0(e),7391),yg(e)||_g(e)?[e]:e.getFilters()}function yg(n){return n instanceof oe}function _g(n){return n instanceof ge&&Ry(n)}function b0(n){return yg(n)||_g(n)||function(t){if(t instanceof ge&&zm(t)){for(let r of t.getFilters())if(!yg(r)&&!_g(r))return!1;return!0}return!1}(n)}function vg(n){if(U(n instanceof oe||n instanceof ge,34018),n instanceof oe)return n;if(n.filters.length===1)return vg(n.filters[0]);let e=n.filters.map(r=>vg(r)),t=ge.create(e,n.op);return t=Kl(t),b0(t)?t:(U(t instanceof ge,64498),U(Oo(t),40251),U(t.filters.length>1,57927),t.filters.reduce((r,i)=>ky(r,i)))}function ky(n,e){let t;return U(n instanceof oe||n instanceof ge,38388),U(e instanceof oe||e instanceof ge,25473),t=n instanceof oe?e instanceof oe?function(i,o){return ge.create([i,o],"and")}(n,e):zb(n,e):e instanceof oe?zb(e,n):function(i,o){if(U(i.filters.length>0&&o.filters.length>0,48005),Oo(i)&&Oo(o))return WT(i,o.getFilters());let s=zm(i)?i:o,a=zm(i)?o:i,u=s.filters.map(l=>ky(l,a));return ge.create(u,"or")}(n,e),Kl(t)}function zb(n,e){if(Oo(e))return WT(e,n.getFilters());{let t=e.filters.map(r=>ky(n,r));return ge.create(t,"or")}}function Kl(n){if(U(n instanceof oe||n instanceof ge,11850),n instanceof oe)return n;let e=n.getFilters();if(e.length===1)return Kl(e[0]);if(zT(n))return n;let t=e.map(i=>Kl(i)),r=[];return t.forEach(i=>{i instanceof oe?r.push(i):i instanceof ge&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:ge.create(r,n.op)}var wg=class{constructor(){this.Cn=new va}addToCollectionParentIndex(e,t){return this.Cn.add(t),S.resolve()}getCollectionParents(e,t){return S.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return S.resolve()}deleteFieldIndex(e,t){return S.resolve()}deleteAllFieldIndexes(e){return S.resolve()}createTargetIndexes(e,t){return S.resolve()}getDocumentsMatchingTarget(e,t){return S.resolve(null)}getIndexType(e,t){return S.resolve(0)}getFieldIndexes(e,t){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,t){return S.resolve(Lt.min())}getMinOffsetFromCollectionGroup(e,t){return S.resolve(Lt.min())}updateCollectionGroup(e,t,r){return S.resolve()}updateIndexEntries(e,t){return S.resolve()}},va=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new _e(me.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new _e(me.comparator)).toArray()}};var Gb="IndexedDbIndexManager",cl=new Uint8Array(0),Ig=class{constructor(e,t){this.databaseId=t,this.vn=new va,this.Fn=new Xt(r=>gi(r),(r,i)=>xa(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.vn.add(t)});let o={collectionId:r,parent:nt(i)};return Wb(e).put(o)}return S.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[wT(t),""],!1,!0);return Wb(e).J(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(fn(s.parent))}return r})}addFieldIndex(e,t){let r=Gs(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=ho(e);return o.next(a=>{s.put(jb(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=Gs(e),i=ho(e),o=fo(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=Gs(e),r=fo(e),i=ho(e);return t.Z().next(()=>r.Z()).next(()=>i.Z())}createTargetIndexes(e,t){return S.forEach(this.Mn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new Wl(r).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=fo(e),i=!0,o=new Map;return S.forEach(this.Mn(t),s=>this.xn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=re(),a=[];return S.forEach(o,(u,l)=>{P(Gb,`Using index ${function(L){return`id=${L.indexId}|cg=${L.collectionGroup}|f=${L.fields.map(Q=>`${Q.fieldPath}:${Q.kind}`).join(",")}`}(u)} to execute ${gi(t)}`);let f=function(L,Q){let J=Om(Q);if(J===void 0)return null;for(let z of Ol(L,J.fieldPath))switch(z.op){case"array-contains-any":return z.value.arrayValue.values||[];case"array-contains":return[z.value]}return null}(l,u),p=function(L,Q){let J=new Map;for(let z of Zr(Q))for(let I of Ol(L,z.fieldPath))switch(I.op){case"==":case"in":J.set(z.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return J.set(z.fieldPath.canonicalString(),I.value),Array.from(J.values())}return null}(l,u),g=function(L,Q){let J=[],z=!0;for(let I of Zr(Q)){let _=I.kind===0?Cb(L,I.fieldPath,L.startAt):Sb(L,I.fieldPath,L.startAt);J.push(_.value),z&&(z=_.inclusive)}return new mr(J,z)}(l,u),y=function(L,Q){let J=[],z=!0;for(let I of Zr(Q)){let _=I.kind===0?Sb(L,I.fieldPath,L.endAt):Cb(L,I.fieldPath,L.endAt);J.push(_.value),z&&(z=_.inclusive)}return new mr(J,z)}(l,u),T=this.On(u,l,g),x=this.On(u,l,y),N=this.Nn(u,l,p),F=this.Bn(u.indexId,f,T,g.inclusive,x,y.inclusive,N);return S.forEach(F,j=>r.Y(j,t.limit).next(L=>{L.forEach(Q=>{let J=V.fromSegments(Q.documentKey);s.has(J)||(s=s.add(J),a.push(J))})}))}).next(()=>a)}return S.resolve(null)})}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=VF(ge.create(e.filters,"and")).map(r=>eg(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,t),t)}Bn(e,t,r,i,o,s,a){let u=(t!=null?t.length:1)*Math.max(r.length,o.length),l=u/(t!=null?t.length:1),f=[];for(let p=0;p<u;++p){let g=t?this.Ln(t[p/l]):cl,y=this.kn(e,g,r[p%l],i),T=this.qn(e,g,o[p%l],s),x=a.map(N=>this.kn(e,g,N,!0));f.push(...this.createRange(y,T,x))}return f}kn(e,t,r,i){let o=new ri(e,V.empty(),t,r);return i?o:o.An()}qn(e,t,r,i){let o=new ri(e,V.empty(),t,r);return i?o.An():o}xn(e,t){let r=new Wl(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.yn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.Mn(t);return S.forEach(i,o=>this.xn(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let l=new _e($e.comparator),f=!1;for(let p of u.filters)for(let g of p.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?f=!0:l=l.add(g.field));for(let p of u.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(f?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Qn(e,t){let r=new ni;for(let i of Zr(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Pn(i.kind);Rn.Kt.Dt(o,s)}return r.un()}Ln(e){let t=new ni;return Rn.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){let r=new ni;return Rn.Kt.Dt(pa(this.databaseId,t),r.Pn(function(o){let s=Zr(o);return s.length===0?0:s[s.length-1].kind}(e))),r.un()}Nn(e,t,r){if(r===null)return[];let i=[];i.push(new ni);let o=0;for(let s of Zr(e)){let a=r[o++];for(let u of i)if(this.Un(t,s.fieldPath)&&ma(a))i=this.Kn(i,s,a);else{let l=u.Pn(s.kind);Rn.Kt.Dt(a,l)}}return this.Wn(i)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new ni;u.seed(a.un()),Rn.Kt.Dt(s,u.Pn(t.kind)),o.push(u)}return o}Un(e,t){return!!e.filters.find(r=>r instanceof oe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=Gs(e),i=ho(e);return(t?r.J(Bm,IDBKeyRange.bound(t,t)):r.J()).next(o=>{let s=[];return S.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(f,p){let g=p?new sa(p.sequenceNumber,new Lt(Ii(p.readTime),new V(fn(p.documentKey)),p.largestBatchId)):sa.empty(),y=f.fields.map(([T,x])=>new Io($e.fromServerFormat(T),x));return new To(f.indexId,f.collectionGroup,y,g)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:G(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=Gs(e),o=ho(e);return this.Gn(e).next(s=>i.J(Bm,IDBKeyRange.bound(t,t)).next(a=>S.forEach(a,u=>o.put(jb(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return S.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?S.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),S.forEach(a,u=>this.zn(e,i,u).next(l=>{let f=this.jn(o,u);return l.isEqual(f)?S.resolve():this.Jn(e,o,u,l,f)}))))})}Hn(e,t,r,i){return fo(e).put(i.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,i){return fo(e).delete(i.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){let i=fo(e),o=new _e(ir);return i.ee({index:MT,range:IDBKeyRange.only([r.indexId,this.uid,_l(this.$n(r,t))])},(s,a)=>{o=o.add(new ri(r.indexId,t,qb(a.arrayValue),qb(a.directionalValue)))}).next(()=>o)}jn(e,t){let r=new _e(ir),i=this.Qn(t,e);if(i==null)return r;let o=Om(t);if(o!=null){let s=e.data.field(o.fieldPath);if(ma(s))for(let a of s.arrayValue.values||[])r=r.add(new ri(t.indexId,e.key,this.Ln(a),i))}else r=r.add(new ri(t.indexId,e.key,cl,i));return r}Jn(e,t,r,i,o){P(Gb,"Updating index entries for document '%s'",t.key);let s=[];return function(u,l,f,p,g){let y=u.getIterator(),T=l.getIterator(),x=uo(y),N=uo(T);for(;x||N;){let F=!1,j=!1;if(x&&N){let L=f(x,N);L<0?j=!0:L>0&&(F=!0)}else x!=null?j=!0:F=!0;F?(p(N),N=uo(T)):j?(g(x),x=uo(y)):(x=uo(y),N=uo(T))}}(i,o,ir,a=>{s.push(this.Hn(e,t,r,a))},a=>{s.push(this.Yn(e,t,r,a))}),S.waitFor(s)}Gn(e){let t=1;return ho(e).ee({index:xT,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>ir(s,a)).filter((s,a,u)=>!a||ir(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=ir(s,e),u=ir(s,t);if(a===0)i[0]=e.An();else if(a>0&&u<0)i.push(s),i.push(s.An());else if(u>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Zn(i[s],i[s+1]))return[];let a=i[s].Vn(this.uid,cl,V.empty()),u=i[s+1].Vn(this.uid,cl,V.empty());o.push(IDBKeyRange.bound(a,u))}return o}Zn(e,t){return ir(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Kb)}getMinOffset(e,t){return S.mapArray(this.Mn(t),r=>this.xn(e,r).next(i=>i||B(44426))).next(Kb)}};function Wb(n){return ze(n,la)}function fo(n){return ze(n,Xs)}function Gs(n){return ze(n,Cy)}function ho(n){return ze(n,Zs)}function Kb(n){U(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;Dy(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Lt(e.readTime,e.documentKey,t)}var Qb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},T0=41943040,wt=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};function C0(n,e,t){let r=n.store(Jt),i=n.store(So),o=[],s=IDBKeyRange.only(t.batchId),a=0,u=r.ee({range:s},(f,p,g)=>(a++,g.delete()));o.push(u.next(()=>{U(a===1,47070,{batchId:t.batchId})}));let l=[];for(let f of t.mutations){let p=CT(e,f.key.path,t.batchId);o.push(i.delete(p)),l.push(f.key)}return S.waitFor(o).next(()=>l)}function Ql(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw B(14731);e=n.noDocument}return JSON.stringify(e).length}wt.DEFAULT_COLLECTION_PERCENTILE=10,wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wt.DEFAULT=new wt(T0,wt.DEFAULT_COLLECTION_PERCENTILE,wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wt.DISABLED=new wt(-1,0,0);var Yl=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,t,r,i){U(e.uid!=="",64387);let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return or(e).ee({index:ii,range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=vo(e),s=or(e);return s.add({}).next(a=>{U(typeof a=="number",49019);let u=new ga(a,t,r,i),l=function(y,T,x){let N=x.baseMutations.map(j=>Hl(y.yt,j)),F=x.mutations.map(j=>Hl(y.yt,j));return{userId:T,batchId:x.batchId,localWriteTimeMs:x.localWriteTime.toMillis(),baseMutations:N,mutations:F}}(this.serializer,this.userId,u),f=[],p=new _e((g,y)=>G(g.canonicalString(),y.canonicalString()));for(let g of i){let y=CT(this.userId,g.key.path,a);p=p.add(g.key.path.popLast()),f.push(s.put(l)),f.push(o.put(y,Mk))}return p.forEach(g=>{f.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Xn[a]=u.keys()}),S.waitFor(f).next(()=>u)})}lookupMutationBatch(e,t){return or(e).get(t).next(r=>r?(U(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),ti(this.serializer,r)):null)}er(e,t){return this.Xn[t]?S.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Xn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return or(e).ee({index:ii,range:i},(s,a,u)=>{a.userId===this.userId&&(U(a.batchId>=r,47524,{tr:r}),o=ti(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=ci;return or(e).ee({index:ii,range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,ci],[this.userId,Number.POSITIVE_INFINITY]);return or(e).J(ii,t).next(r=>r.map(i=>ti(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=fl(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return vo(e).ee({range:i},(s,a,u)=>{let[l,f,p]=s,g=fn(f);if(l===this.userId&&t.path.isEqual(g))return or(e).get(p).next(y=>{if(!y)throw B(61480,{nr:s,batchId:p});U(y.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:y.userId,batchId:p}),o.push(ti(this.serializer,y))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _e(G),i=[];return t.forEach(o=>{let s=fl(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=vo(e).ee({range:a},(l,f,p)=>{let[g,y,T]=l,x=fn(y);g===this.userId&&o.path.isEqual(x)?r=r.add(T):p.done()});i.push(u)}),S.waitFor(i).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=fl(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new _e(G);return vo(e).ee({range:s},(u,l,f)=>{let[p,g,y]=u,T=fn(g);p===this.userId&&r.isPrefixOf(T)?T.length===i&&(a=a.add(y)):f.done()}).next(()=>this.rr(e,a))}rr(e,t){let r=[],i=[];return t.forEach(o=>{i.push(or(e).get(o).next(s=>{if(s===null)throw B(35274,{batchId:o});U(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:o}),r.push(ti(this.serializer,s))}))}),S.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return C0(e.le,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.ir(t.batchId)}),S.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return S.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return vo(e).ee({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=fn(o[1]);i.push(u)}else a.done()}).next(()=>{U(i.length===0,56720,{sr:i.map(o=>o.canonicalString())})})})}containsKey(e,t){return S0(e,this.userId,t)}_r(e){return A0(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:ci,lastStreamToken:""})}};function S0(n,e,t){let r=fl(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return vo(n).ee({range:o,X:!0},(a,u,l)=>{let[f,p,g]=a;f===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function or(n){return ze(n,Jt)}function vo(n){return ze(n,So)}function A0(n){return ze(n,ca)}var jo=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var Eg=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next(t=>{let r=new jo(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(t=>$.fromTimestamp(new Ce(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.lr(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i)))}addTargetData(e,t){return this.Pr(e,t).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>po(e).delete(t.targetId)).next(()=>this.lr(e)).next(r=>(U(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,t,r){let i=0,o=[];return po(e).ee((s,a)=>{let u=Ys(a);u.sequenceNumber<=t&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>S.waitFor(o)).next(()=>i)}forEachTarget(e,t){return po(e).ee((r,i)=>{let o=Ys(i);t(o)})}lr(e){return Yb(e).get(Sl).next(t=>(U(t!==null,2888),t))}hr(e,t){return Yb(e).put(Sl,t)}Pr(e,t){return po(e).put(I0(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(t=>t.targetCount)}getTargetData(e,t){let r=gi(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return po(e).ee({range:i,index:AT},(s,a,u)=>{let l=Ys(a);xa(t,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=ar(e);return t.forEach(s=>{let a=nt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),S.waitFor(i)}removeMatchingKeys(e,t,r){let i=ar(e);return S.forEach(t,o=>{let s=nt(o.path);return S.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=ar(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=ar(e),o=re();return i.ee({range:r,X:!0},(s,a,u)=>{let l=fn(s[1]),f=new V(l);o=o.add(f)}).next(()=>o)}containsKey(e,t){let r=nt(t.path),i=IDBKeyRange.bound([r],[wT(r)],!1,!0),o=0;return ar(e).ee({index:Ty,X:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}At(e,t){return po(e).get(t).next(r=>r?Ys(r):null)}};function po(n){return ze(n,Ao)}function Yb(n){return ze(n,ui)}function ar(n){return ze(n,xo)}var Jb="LruGarbageCollector",LF=1048576;function Zb([n,e],[t,r]){let i=G(n,t);return i===0?G(e,r):i}var Dg=class{constructor(e){this.Ir=e,this.buffer=new _e(Zb),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();Zb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Jl=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){P(Jb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>R(this,null,function*(){this.Rr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ir(t)?P(Jb,"Ignoring IndexedDB error during garbage collection: ",t):yield bi(t)}yield this.Vr(3e5)}))}},bg=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return S.resolve(Zt.ce);let r=new Dg(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(P("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(Qb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(P("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Qb):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,s,a,u,l,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(P("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),mo()<=ae.DEBUG&&P("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-f}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function x0(n,e){return new bg(n,e)}var Tg=class{constructor(e,t){this.db=e,this.garbageCollector=x0(this,t)}gr(e){let t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,(r,i)=>t(i))}addReference(e,t,r){return ul(e,r)}removeReference(e,t,r){return ul(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return ul(e,t)}br(e,t){return function(i,o){let s=!1;return A0(i).te(a=>S0(i,a,o).next(u=>(u&&(s=!0),S.resolve(!u)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.Sr(e,(s,a)=>{if(a<=t){let u=this.br(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,$.min()),ar(e).delete(function(p){return[0,nt(p.path)]}(s))))});i.push(u)}}).next(()=>S.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return ul(e,t)}Sr(e,t){let r=ar(e),i,o=Zt.ce;return r.ee({index:Ty},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==Zt.ce&&t(new V(fn(i)),o),o=l,i=u):o=Zt.ce}).next(()=>{o!==Zt.ce&&t(new V(fn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function ul(n,e){return ar(n).put(function(r,i){return{targetId:0,path:nt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var Zl=class{constructor(){this.changes=new Xt(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ye.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?S.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Cg=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Jr(e).put(r)}removeEntry(e,t,r){return Jr(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],zl(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Dr(e,r)))}getEntry(e,t){let r=Ye.newInvalidDocument(t);return Jr(e).ee({index:hl,range:IDBKeyRange.only(Ws(t))},(i,o)=>{r=this.Cr(t,o)}).next(()=>r)}vr(e,t){let r={size:0,document:Ye.newInvalidDocument(t)};return Jr(e).ee({index:hl,range:IDBKeyRange.only(Ws(t))},(i,o)=>{r={document:this.Cr(t,o),size:Ql(o)}}).next(()=>r)}getEntries(e,t){let r=xt();return this.Fr(e,t,(i,o)=>{let s=this.Cr(i,o);r=r.insert(i,s)}).next(()=>r)}Mr(e,t){let r=xt(),i=new Ae(V.comparator);return this.Fr(e,t,(o,s)=>{let a=this.Cr(o,s);r=r.insert(o,a),i=i.insert(o,Ql(s))}).next(()=>({documents:r,Or:i}))}Fr(e,t,r){if(t.isEmpty())return S.resolve();let i=new _e(tT);t.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(Ws(i.first()),Ws(i.last())),s=i.getIterator(),a=s.getNext();return Jr(e).ee({index:hl,range:o},(u,l,f)=>{let p=V.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&tT(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?f.j(Ws(a)):f.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),zl(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Jr(e).J(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let f=xt();for(let p of l){let g=this.Cr(V.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);g.isFoundDocument()&&(Na(t,g)||i.has(g.key))&&(f=f.insert(g.key,g))}return f})}getAllFromCollectionGroup(e,t,r,i){let o=xt(),s=eT(t,r),a=eT(t,Lt.max());return Jr(e).ee({index:ST,range:IDBKeyRange.bound(s,a,!0)},(u,l,f)=>{let p=this.Cr(V.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&f.done()}).next(()=>o)}newChangeBuffer(e){return new Sg(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Xb(e).get(jm).next(t=>(U(!!t,20021),t))}Dr(e,t){return Xb(e).put(jm,t)}Cr(e,t){if(t){let r=kF(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual($.min())))return r}return Ye.newInvalidDocument(e)}};function M0(n){return new Cg(n)}var Sg=class extends Zl{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Xt(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new _e((o,s)=>G(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.Br.get(o);if(t.push(this.Nr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=Vb(this.Nr.serializer,s);i=i.add(o.path.popLast());let l=Ql(u);r+=l-a.size,t.push(this.Nr.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=Vb(this.Nr.serializer,s.convertToNoDocument($.min()));t.push(this.Nr.addEntry(e,o,u))}}),i.forEach(o=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Nr.updateMetadata(e,r)),S.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next(r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next(({documents:r,Or:i})=>(i.forEach((o,s)=>{this.Br.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function Xb(n){return ze(n,ua)}function Jr(n){return ze(n,Cl)}function Ws(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function eT(n,e){let t=e.documentKey.path.toArray();return[n,zl(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function tT(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=G(t[o],r[o]),i)return i;return i=G(t.length,r.length),i||(i=G(t[t.length-2],r[r.length-2]),i||G(t[t.length-1],r[r.length-1]))}var Ag=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Xl=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&ra(r.mutation,i,At.empty(),Ce.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,re()).next(()=>r))}getLocalViewOfDocuments(e,t,r=re()){let i=hn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Qs();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=hn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,re()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=xt(),s=na(),a=function(){return na()}();return t.forEach((u,l)=>{let f=r.get(l.key);i.has(l.key)&&(f===void 0||f.mutation instanceof en)?o=o.insert(l.key,l):f!==void 0?(s.set(l.key,f.mutation.getFieldMask()),ra(f.mutation,l,f.mutation.getFieldMask(),Ce.now())):s.set(l.key,At.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,f)=>s.set(l,f)),t.forEach((l,f)=>a.set(l,new Ag(f,s.get(l)??null))),a))}recalculateAndSaveOverlays(e,t){let r=na(),i=new Ae((s,a)=>s-a),o=re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let f=r.get(u)||At.empty();f=a.applyToLocalView(l,f),r.set(u,f);let p=(i.get(a.batchId)||re()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,f=u.value,p=t0();f.forEach(g=>{if(!o.has(g)){let y=a0(t.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return S.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return V.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):YT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):S.resolve(hn()),a=oa,u=o;return s.next(l=>S.forEach(l,(f,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(f)?S.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,re())).next(f=>({batchId:a,changes:e0(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new V(t)).next(r=>{let i=Qs();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Qs();return this.indexManager.getCollectionParents(e,o).next(a=>S.forEach(a,u=>{let l=function(p,g){return new gr(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(f=>{f.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let f=l.getKey();s.get(f)===null&&(s=s.insert(f,Ye.newInvalidDocument(f)))});let a=Qs();return s.forEach((u,l)=>{let f=o.get(u);f!==void 0&&ra(f.mutation,l,At.empty(),Ce.now()),Na(t,l)&&(a=a.insert(u,l))}),a})}};var xg=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return S.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ft(i.createTime)}}(t)),S.resolve()}getNamedQuery(e,t){return S.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(i){return{name:i.name,query:E0(i.bundledQuery),readTime:ft(i.readTime)}}(t)),S.resolve()}};var Mg=class{constructor(){this.overlays=new Ae(V.comparator),this.qr=new Map}getOverlay(e,t){return S.resolve(this.overlays.get(t))}getOverlays(e,t){let r=hn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),S.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),S.resolve()}getOverlaysForCollection(e,t,r){let i=hn(),o=t.length+1,s=new V(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return S.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ae((l,f)=>l-f),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let f=o.get(l.largestBatchId);f===null&&(f=hn(),o=o.insert(l.largestBatchId,f)),f.set(l.getKey(),l)}}let a=hn(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,f)=>a.set(l,f)),!(a.size()>=i)););return S.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new ya(t,r));let o=this.qr.get(t);o===void 0&&(o=re(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}};var Ng=class{constructor(){this.sessionToken=qe.EMPTY_BYTE_STRING}getSessionToken(e){return S.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,S.resolve()}};var wa=class{constructor(){this.Qr=new _e(Fe.$r),this.Ur=new _e(Fe.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new Fe(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new Fe(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new V(new me([])),r=new Fe(t,e),i=new Fe(t,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new V(new me([])),r=new Fe(t,e),i=new Fe(t,e+1),o=re();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Fe(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Fe=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return V.comparator(e.key,t.key)||G(e.Yr,t.Yr)}static Kr(e,t){return G(e.Yr,t.Yr)||V.comparator(e.key,t.key)}};var Rg=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new _e(Fe.$r)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new ga(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Zr=this.Zr.add(new Fe(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(s)}lookupMutationBatch(e,t){return S.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),o=i<0?0:i;return S.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?ci:this.tr-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Fe(t,0),i=new Fe(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{let a=this.Xr(s.Yr);o.push(a)}),S.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _e(G);return t.forEach(i=>{let o=new Fe(i,0),s=new Fe(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],a=>{r=r.add(a.Yr)})}),S.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;V.isDocumentKey(o)||(o=o.child(""));let s=new Fe(new V(o),0),a=new _e(G);return this.Zr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Yr)),!0)},s),S.resolve(this.ti(a))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){U(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return S.forEach(t.mutations,i=>{let o=new Fe(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new Fe(t,0),i=this.Zr.firstAfterOrEqual(r);return S.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Pg=class{constructor(e){this.ri=e,this.docs=function(){return new Ae(V.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return S.resolve(r?r.document.mutableCopy():Ye.newInvalidDocument(t))}getEntries(e,t){let r=xt();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Ye.newInvalidDocument(i))}),S.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=xt(),s=t.path,a=new V(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:f}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||Dy(DT(f),r)<=0||(i.has(f.key)||Na(t,f))&&(o=o.insert(f.key,f.mutableCopy()))}return S.resolve(o)}getAllFromCollectionGroup(e,t,r,i){B(9500)}ii(e,t){return S.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Og(this)}getSize(e){return S.resolve(this.size)}},Og=class extends Zl{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),S.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var kg=class{constructor(e){this.persistence=e,this.si=new Xt(t=>gi(t),xa),this.lastRemoteSnapshotVersion=$.min(),this.highestTargetId=0,this.oi=0,this._i=new wa,this.targetCount=0,this.ai=jo.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),S.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new jo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,S.resolve()}updateTargetData(e,t){return this.Pr(t),S.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),S.waitFor(o).next(()=>i)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return S.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),S.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),S.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),S.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return S.resolve(r)}containsKey(e,t){return S.resolve(this._i.containsKey(t))}};var Ia=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new Zt(0),this.li=!1,this.li=!0,this.hi=new Ng,this.referenceDelegate=e(this),this.Pi=new kg(this),this.indexManager=new wg,this.remoteDocumentCache=function(i){return new Pg(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new ql(t),this.Ii=new xg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Mg,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new Rg(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){P("MemoryPersistence","Starting transaction:",e);let i=new Fg(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,t){return S.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},Fg=class extends Dl{constructor(e){super(),this.currentSequenceNumber=e}},ed=class n{constructor(e){this.persistence=e,this.Ri=new wa,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw B(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),S.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),S.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),S.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.fi,r=>{let i=V.fromPath(r);return this.gi(e,i).next(o=>{o||t.removeEntry(i,$.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return S.or([()=>S.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},td=class n{constructor(e,t){this.persistence=e,this.pi=new Xt(r=>nt(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=x0(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return S.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return S.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?S.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,t).next(a=>{a||(r++,o.removeEntry(s,$.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),S.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),S.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),S.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),S.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ml(e.data.value)),t}br(e,t,r){return S.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return S.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Vg=class{constructor(e){this.serializer=e}k(e,t,r,i){let o=new bl("createOrUpgrade",t);r<1&&i>=1&&(function(u){u.createObjectStore(Aa)}(e),function(u){u.createObjectStore(ca,{keyPath:xk}),u.createObjectStore(Jt,{keyPath:mb,autoIncrement:!0}).createIndex(ii,gb,{unique:!0}),u.createObjectStore(So)}(e),nT(e),function(u){u.createObjectStore(Xr)}(e));let s=S.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore(xo),u.deleteObjectStore(Ao),u.deleteObjectStore(ui)}(e),nT(e)),s=s.next(()=>function(u){let l=u.store(ui),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:$.min().toTimestamp(),targetCount:0};return l.put(Sl,f)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,l){return l.store(Jt).J().next(p=>{u.deleteObjectStore(Jt),u.createObjectStore(Jt,{keyPath:mb,autoIncrement:!0}).createIndex(ii,gb,{unique:!0});let g=l.store(Jt),y=p.map(T=>g.put(T));return S.waitFor(y)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore(Mo,{keyPath:Lk})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.yi(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore(ua)}(e),this.wi(o)))),r<7&&i>=7&&(s=s.next(()=>this.Si(o))),r<8&&i>=8&&(s=s.next(()=>this.bi(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.Di(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore(bd,{keyPath:jk})})(e),function(u){u.createObjectStore(Td,{keyPath:Bk})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let l=u.createObjectStore(Cd,{keyPath:Wk});l.createIndex(Um,Kk,{unique:!1}),l.createIndex(NT,Qk,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let l=u.createObjectStore(Cl,{keyPath:Nk});l.createIndex(hl,Rk),l.createIndex(ST,Pk)}(e)).next(()=>this.Ci(e,o)).next(()=>e.deleteObjectStore(Xr))),r<14&&i>=14&&(s=s.next(()=>this.Fi(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore(Cy,{keyPath:Uk,autoIncrement:!0}).createIndex(Bm,$k,{unique:!1}),u.createObjectStore(Zs,{keyPath:Hk}).createIndex(xT,qk,{unique:!1}),u.createObjectStore(Xs,{keyPath:zk}).createIndex(MT,Gk,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore(Zs).clear()}).next(()=>{t.objectStore(Xs).clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(u){u.createObjectStore(Sy,{keyPath:Yk})})(e)})),r<18&&i>=18&&Zp()&&(s=s.next(()=>{t.objectStore(Zs).clear()}).next(()=>{t.objectStore(Xs).clear()})),s}wi(e){let t=0;return e.store(Xr).ee((r,i)=>{t+=Ql(i)}).next(()=>{let r={byteSize:t};return e.store(ua).put(jm,r)})}yi(e){let t=e.store(ca),r=e.store(Jt);return t.J().next(i=>S.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,ci],[o.userId,o.lastAcknowledgedBatchId]);return r.J(ii,s).next(a=>S.forEach(a,u=>{U(u.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:u.batchId});let l=ti(this.serializer,u);return C0(e,o.userId,l).next(()=>{})}))}))}Si(e){let t=e.store(xo),r=e.store(Xr);return e.store(ui).get(Sl).next(i=>{let o=[];return r.ee((s,a)=>{let u=new me(s),l=function(p){return[0,nt(p)]}(u);o.push(t.get(l).next(f=>f?S.resolve():(p=>t.put({targetId:0,path:nt(p),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>S.waitFor(o))})}bi(e,t){e.createObjectStore(la,{keyPath:Vk});let r=t.store(la),i=new va,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:nt(u)})}};return t.store(Xr).ee({X:!0},(s,a)=>{let u=new me(s);return o(u.popLast())}).next(()=>t.store(So).ee({X:!0},([s,a,u],l)=>{let f=fn(a);return o(f.popLast())}))}Di(e){let t=e.store(Ao);return t.ee((r,i)=>{let o=Ys(i),s=I0(this.serializer,o);return t.put(s)})}Ci(e,t){let r=t.store(Xr),i=[];return r.ee((o,s)=>{let a=t.store(Cl),u=function(p){return p.document?new V(me.fromString(p.document.name).popFirst(5)):p.noDocument?V.fromSegments(p.noDocument.path):p.unknownDocument?V.fromSegments(p.unknownDocument.path):B(36783)}(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>S.waitFor(i))}Fi(e,t){let r=t.store(Jt),i=M0(this.serializer),o=new Ia(ed.mi,this.serializer.yt);return r.J().next(s=>{let a=new Map;return s.forEach(u=>{let l=a.get(u.userId)??re();ti(this.serializer,u).keys().forEach(f=>l=l.add(f)),a.set(u.userId,l)}),S.forEach(a,(u,l)=>{let f=new Ue(l),p=Gl.wt(this.serializer,f),g=o.getIndexManager(f),y=Yl.wt(f,this.serializer,g,o.referenceDelegate);return new Xl(i,y,p,g).recalculateAndSaveOverlaysForDocumentKeys(new da(t,Zt.ce),u).next()})})}};function nT(n){n.createObjectStore(xo,{keyPath:kk}).createIndex(Ty,Fk,{unique:!0}),n.createObjectStore(Ao,{keyPath:"targetId"}).createIndex(AT,Ok,{unique:!0}),n.createObjectStore(ui)}var sr="IndexedDbPersistence",Im=18e5,Em=5e3,Dm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",jF="main",Lg=class n{constructor(e,t,r,i,o,s,a,u,l,f,p=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=o,this.window=s,this.document=a,this.xi=l,this.Oi=f,this.Ni=p,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=g=>Promise.resolve(),!n.v())throw new O(M.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Tg(this,i),this.$i=t+jF,this.serializer=new ql(u),this.Ui=new Co(this.$i,this.Ni,new Vg(this.serializer)),this.hi=new hg,this.Pi=new Eg(this.referenceDelegate,this.serializer),this.remoteDocumentCache=M0(this.serializer),this.Ii=new fg,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,f===!1&&lt(sr,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new O(M.FAILED_PRECONDITION,Dm);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new Zt(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=t=>R(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(t=>R(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(()=>R(this,null,function*(){this.started&&(yield this.Wi())})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ll(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(t=>this.isPrimary&&!t?this.Zi(e).next(()=>!1):!!t&&this.Xi(e).next(()=>!0))).catch(e=>{if(Ir(e))return P(sr,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return P(sr,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Ks(e).get(co).next(t=>S.resolve(this.es(t)))}ts(e){return ll(e).delete(this.clientId)}ns(){return R(this,null,function*(){if(this.isPrimary&&!this.rs(this.qi,Im)){this.qi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=ze(t,Mo);return r.J().next(i=>{let o=this.ss(i,Im),s=i.filter(a=>o.indexOf(a)===-1);return S.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Ki)for(let t of e)this.Ki.removeItem(this._s(t.clientId))}})}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?S.resolve(!0):Ks(e).get(co).next(t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Em)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new O(M.FAILED_PRECONDITION,Dm);return!1}}return!(!this.networkEnabled||!this.inForeground)||ll(e).J().next(r=>this.ss(r,Em).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&P(sr,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return R(this,null,function*(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),yield this.Ui.runTransaction("shutdown","readwrite",[Aa,Mo],e=>{let t=new da(e,Zt.ce);return this.Zi(t).next(()=>this.ts(t))}),this.Ui.close(),this.Ps()})}ss(e,t){return e.filter(r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>ll(e).J().next(t=>this.ss(t,Im).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Yl.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Ig(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Gl.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){P(sr,"Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(u){return u===18?Xk:u===17?kT:u===16?Zk:u===15?Ay:u===14?OT:u===13?PT:u===12?Jk:u===11?RT:void B(60245)}(this.Ni),s;return this.Ui.runTransaction(e,i,o,a=>(s=new da(a,this.ci?this.ci.next():Zt.ce),t==="readwrite-primary"?this.Hi(s).next(u=>!!u||this.Yi(s)).next(u=>{if(!u)throw lt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new O(M.FAILED_PRECONDITION,bT);return r(s)}).next(u=>this.Xi(s).next(()=>u)):this.Is(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Is(e){return Ks(e).get(co).next(t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Em)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new O(M.FAILED_PRECONDITION,Dm)})}Xi(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ks(e).put(co,t)}static v(){return Co.v()}Zi(e){let t=Ks(e);return t.get(co).next(r=>this.es(r)?(P(sr,"Releasing primary lease."),t.delete(co)):S.resolve())}rs(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(lt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();let e=/(?:Version|Mobile)\/1[456]/;Jp()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{let t=this.Ki?.getItem(this._s(e))!==null;return P(sr,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return lt(sr,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){lt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Ks(n){return ze(n,Aa)}function ll(n){return ze(n,Mo)}function BF(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var jg=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=re(),i=re();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Bg=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var nd=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Jp()?8:TT(Kr())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ys(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Bg;return this.Ss(e,t,s).next(a=>{if(o.result=a,this.Vs)return this.bs(e,t,s,a.size)})}).next(()=>o.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(mo()<=ae.DEBUG&&P("QueryEngine","SDK will not create cache indexes for query:",go(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),S.resolve()):(mo()<=ae.DEBUG&&P("QueryEngine","Query:",go(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(mo()<=ae.DEBUG&&P("QueryEngine","The SDK decides to create cache indexes for query:",go(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vt(t))):S.resolve())}ys(e,t){if(Ab(t))return S.resolve(null);let r=Vt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=kl(t,null,"F"),r=Vt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=re(...o);return this.ps.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.Ds(t,a);return this.Cs(t,l,s,u.readTime)?this.ys(e,kl(t,null,"F")):this.vs(e,l,t,u)}))})))}ws(e,t,r,i){return Ab(t)||i.isEqual($.min())?S.resolve(null):this.ps.getDocuments(e,r).next(o=>{let s=this.Ds(t,o);return this.Cs(t,s,r,i)?S.resolve(null):(mo()<=ae.DEBUG&&P("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),go(t)),this.vs(e,s,t,Ck(i,oa)).next(a=>a))})}Ds(e,t){let r=new _e(ZT(e));return t.forEach((i,o)=>{Na(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return mo()<=ae.DEBUG&&P("QueryEngine","Using full collection scan to execute query:",go(t)),this.ps.getDocumentsMatchingQuery(e,t,Lt.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Fy="LocalStore",UF=3e8,Ug=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Ae(G),this.xs=new Xt(o=>gi(o),xa),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Xl(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function N0(n,e,t,r){return new Ug(n,e,t,r)}function R0(n,e){return R(this,null,function*(){let t=W(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=re();for(let l of i){s.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}for(let l of o){a.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Ls:l,removedBatchIds:s,addedBatchIds:a}))})})})}function $F(n,e){let t=W(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return function(a,u,l,f){let p=l.batch,g=p.keys(),y=S.resolve();return g.forEach(T=>{y=y.next(()=>f.getEntry(u,T)).next(x=>{let N=l.docVersions.get(T);U(N!==null,48541),x.version.compareTo(N)<0&&(p.applyToRemoteDocument(x,l),x.isValidDocument()&&(x.setReadTime(l.commitVersion),f.addEntry(x)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=re();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function P0(n){let e=W(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function HF(n,e){let t=W(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let a=[];e.targetChanges.forEach((f,p)=>{let g=i.get(p);if(!g)return;a.push(t.Pi.removeMatchingKeys(o,f.removedDocuments,p).next(()=>t.Pi.addMatchingKeys(o,f.addedDocuments,p)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(qe.EMPTY_BYTE_STRING,$.min()).withLastLimboFreeSnapshotVersion($.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),i=i.insert(p,y),function(x,N,F){return x.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=UF?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(g,y,f)&&a.push(t.Pi.updateTargetData(o,y))});let u=xt(),l=re();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,f))}),a.push(qF(o,s,e.documentUpdates).next(f=>{u=f.ks,l=f.qs})),!r.isEqual($.min())){let f=t.Pi.getLastRemoteSnapshotVersion(o).next(p=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(f)}return S.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Ms=i,o))}function qF(n,e,t){let r=re(),i=re();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=xt();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual($.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):P(Fy,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{ks:s,qs:i}})}function zF(n,e){let t=W(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ci),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function GF(n,e){let t=W(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(o=>o?(i=o,S.resolve(i)):t.Pi.allocateTargetId(r).next(s=>(i=new Lo(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}function $g(n,e,t){return R(this,null,function*(){let r=W(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Ir(s))throw s;P(Fy,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)})}function rT(n,e,t){let r=W(n),i=$.min(),o=re();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,f){let p=W(u),g=p.xs.get(f);return g!==void 0?S.resolve(p.Ms.get(g)):p.Pi.getTargetData(l,f)}(r,s,Vt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,t?i:$.min(),t?o:re())).next(a=>(WF(r,sF(e),a),{documents:a,Qs:o})))}function WF(n,e,t){let r=n.Os.get(e)||$.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Os.set(e,r)}var rd=class{constructor(){this.activeTargetIds=fF()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var id=class{constructor(){this.Mo=new rd,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new rd,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Hg=class{Oo(e){}shutdown(){}};var iT="ConnectivityMonitor",od=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){P(iT,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){P(iT,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var dl=null;function qg(){return dl===null?dl=function(){return 268435456+Math.round(2147483648*Math.random())}():dl++,"0x"+dl.toString(16)}var bm="RestConnection",KF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},zg=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Ml?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){let s=qg(),a=this.zo(e,t.toUriEncodedString());P(bm,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,o);let{host:l}=new URL(a),f=Xu(l);return this.Jo(e,a,u,r,f).then(p=>(P(bm,`Received RPC '${e}' ${s}: `,p),p),p=>{throw pi(bm,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Ho(e,t,r,i,o,s){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ho}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,t){let r=KF[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var Gg=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var et="WebChannelConnection",Wg=class extends zg{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){let s=qg();return new Promise((a,u)=>{let l=new pm;l.setWithCredentials(!0),l.listenOnce(mm.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case qs.NO_ERROR:let p=l.getResponseJson();P(et,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case qs.TIMEOUT:P(et,`RPC '${e}' ${s} timed out`),u(new O(M.DEADLINE_EXCEEDED,"Request time out"));break;case qs.HTTP_ERROR:let g=l.getStatus();if(P(et,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let T=y?.error;if(T&&T.status&&T.message){let x=function(F){let j=F.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(j)>=0?j:M.UNKNOWN}(T.status);u(new O(x,T.message))}else u(new O(M.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new O(M.UNAVAILABLE,"Connection failed."));break;default:B(9055,{l_:e,streamId:s,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{P(et,`RPC '${e}' ${s} completed.`)}});let f=JSON.stringify(i);P(et,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",f,r,15)})}T_(e,t,r){let i=qg(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=_m(),a=ym(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let f=o.join("");P(et,`Creating RPC '${e}' stream ${i}: ${f}`,u);let p=s.createWebChannel(f,u);this.I_(p);let g=!1,y=!1,T=new Gg({Yo:N=>{y?P(et,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(g||(P(et,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),P(et,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},Zo:()=>p.close()}),x=(N,F,j)=>{N.listen(F,L=>{try{j(L)}catch(Q){setTimeout(()=>{throw Q},0)}})};return x(p,ao.EventType.OPEN,()=>{y||(P(et,`RPC '${e}' stream ${i} transport opened.`),T.o_())}),x(p,ao.EventType.CLOSE,()=>{y||(y=!0,P(et,`RPC '${e}' stream ${i} transport closed`),T.a_(),this.E_(p))}),x(p,ao.EventType.ERROR,N=>{y||(y=!0,pi(et,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),T.a_(new O(M.UNAVAILABLE,"The operation could not be completed")))}),x(p,ao.EventType.MESSAGE,N=>{if(!y){let F=N.data[0];U(!!F,16349);let j=F,L=j?.error||j[0]?.error;if(L){P(et,`RPC '${e}' stream ${i} received error:`,L);let Q=L.status,J=function(_){let w=ke[_];if(w!==void 0)return u0(w)}(Q),z=L.message;J===void 0&&(J=M.INTERNAL,z="Unknown error status: "+Q+" with message "+L.message),y=!0,T.a_(new O(J,z)),p.close()}else P(et,`RPC '${e}' stream ${i} received:`,F),T.u_(F)}}),x(a,gm.STAT_EVENT,N=>{N.stat===sl.PROXY?P(et,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===sl.NOPROXY&&P(et,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.__()},0),T}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function QF(){return typeof window<"u"?window:null}function vl(){return typeof document<"u"?document:null}function Md(n){return new ag(n,!0)}var sd=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&P("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var oT="PersistentStream",ad=class{constructor(e,t,r,i,o,s,a,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new sd(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}stop(){return R(this,null,function*(){this.x_()&&(yield this.close(0))})}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}k_(){return R(this,null,function*(){if(this.O_())return this.close(0)})}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return R(this,null,function*(){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===M.RESOURCE_EXHAUSTED?(lt(t.toString()),lt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.r_(t)})}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new O(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(()=>R(this,null,function*(){this.state=0,this.start()}))}z_(e){return P(oT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(P(oT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Kg=class extends ad{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=AF(this.serializer,e),r=function(o){if(!("targetChange"in o))return $.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?$.min():s.readTime?ft(s.readTime):$.min()}(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=lg(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=Pl(u)?{documents:m0(o,u)}:{query:g0(o,u).ft},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=l0(o,s.resumeToken);let l=cg(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo($.min())>0){a.readTime=Vo(o,s.snapshotVersion.toTimestamp());let l=cg(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=MF(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=lg(this.serializer),t.removeTarget=e,this.q_(t)}},Qg=class extends ad{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return U(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,U(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){U(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=xF(e.writeResults,e.commitTime),r=ft(e.commitTime);return this.listener.na(r,t)}ra(){let e={};e.database=lg(this.serializer),this.q_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Hl(this.serializer,r))};this.q_(t)}};var Yg=class{},Jg=class extends Yg{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new O(M.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,ug(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new O(M.UNKNOWN,o.toString())})}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Ho(e,ug(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new O(M.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},Zg=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(lt(t),this.aa=!1):P("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Ei="RemoteStore",Xg=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(()=>R(this,null,function*(){Ti(this)&&(P(Ei,"Restarting streams for network reachability change."),yield function(u){return R(this,null,function*(){let l=W(u);l.Ea.add(4),yield Ra(l),l.Ra.set("Unknown"),l.Ea.delete(4),yield Nd(l)})}(this))}))}),this.Ra=new Zg(r,i)}};function Nd(n){return R(this,null,function*(){if(Ti(n))for(let e of n.da)yield e(!0)})}function Ra(n){return R(this,null,function*(){for(let e of n.da)yield e(!1)})}function O0(n,e){let t=W(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),By(t)?jy(t):qo(t).O_()&&Ly(t,e))}function Vy(n,e){let t=W(n),r=qo(t);t.Ia.delete(e),r.O_()&&k0(t,e),t.Ia.size===0&&(r.O_()?r.L_():Ti(t)&&t.Ra.set("Unknown"))}function Ly(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo($.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}qo(n).Y_(e)}function k0(n,e){n.Va.Ue(e),qo(n).Z_(e)}function jy(n){n.Va=new sg({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),qo(n).start(),n.Ra.ua()}function By(n){return Ti(n)&&!qo(n).x_()&&n.Ia.size>0}function Ti(n){return W(n).Ea.size===0}function F0(n){n.Va=void 0}function YF(n){return R(this,null,function*(){n.Ra.set("Online")})}function JF(n){return R(this,null,function*(){n.Ia.forEach((e,t)=>{Ly(n,e)})})}function ZF(n,e){return R(this,null,function*(){F0(n),By(n)?(n.Ra.ha(e),jy(n)):n.Ra.set("Unknown")})}function XF(n,e,t){return R(this,null,function*(){if(n.Ra.set("Online"),e instanceof Bl&&e.state===2&&e.cause)try{yield function(i,o){return R(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ia.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ia.delete(a),i.Va.removeTarget(a))})}(n,e)}catch(r){P(Ei,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield cd(n,r)}else if(e instanceof Eo?n.Va.Ze(e):e instanceof jl?n.Va.st(e):n.Va.tt(e),!t.isEqual($.min()))try{let r=yield P0(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Va.Tt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let f=o.Ia.get(l);f&&o.Ia.set(l,f.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let f=o.Ia.get(u);if(!f)return;o.Ia.set(u,f.withResumeToken(qe.EMPTY_BYTE_STRING,f.snapshotVersion)),k0(o,u);let p=new Lo(f.target,u,l,f.sequenceNumber);Ly(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){P(Ei,"Failed to raise snapshot:",r),yield cd(n,r)}})}function cd(n,e,t){return R(this,null,function*(){if(!Ir(e))throw e;n.Ea.add(1),yield Ra(n),n.Ra.set("Offline"),t||(t=()=>P0(n.localStore)),n.asyncQueue.enqueueRetryable(()=>R(this,null,function*(){P(Ei,"Retrying IndexedDB access"),yield t(),n.Ea.delete(1),yield Nd(n)}))})}function V0(n,e){return e().catch(t=>cd(n,t,e))}function Pa(n){return R(this,null,function*(){let e=W(n),t=vr(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ci;for(;eV(e);)try{let i=yield zF(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,tV(e,i)}catch(i){yield cd(e,i)}L0(e)&&j0(e)})}function eV(n){return Ti(n)&&n.Ta.length<10}function tV(n,e){n.Ta.push(e);let t=vr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function L0(n){return Ti(n)&&!vr(n).x_()&&n.Ta.length>0}function j0(n){vr(n).start()}function nV(n){return R(this,null,function*(){vr(n).ra()})}function rV(n){return R(this,null,function*(){let e=vr(n);for(let t of n.Ta)e.ea(t.mutations)})}function iV(n,e,t){return R(this,null,function*(){let r=n.Ta.shift(),i=rg.from(r,e,t);yield V0(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Pa(n)})}function oV(n,e){return R(this,null,function*(){e&&vr(n).X_&&(yield function(r,i){return R(this,null,function*(){if(function(s){return vF(s)&&s!==M.ABORTED}(i.code)){let o=r.Ta.shift();vr(r).B_(),yield V0(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Pa(r)}})}(n,e)),L0(n)&&j0(n)})}function sT(n,e){return R(this,null,function*(){let t=W(n);t.asyncQueue.verifyOperationInProgress(),P(Ei,"RemoteStore received new credentials");let r=Ti(t);t.Ea.add(3),yield Ra(t),r&&t.Ra.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),yield Nd(t)})}function sV(n,e){return R(this,null,function*(){let t=W(n);e?(t.Ea.delete(2),yield Nd(t)):e||(t.Ea.add(2),yield Ra(t),t.Ra.set("Unknown"))})}function qo(n){return n.ma||(n.ma=function(t,r,i){let o=W(t);return o.sa(),new Kg(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Xo:YF.bind(null,n),t_:JF.bind(null,n),r_:ZF.bind(null,n),H_:XF.bind(null,n)}),n.da.push(e=>R(this,null,function*(){e?(n.ma.B_(),By(n)?jy(n):n.Ra.set("Unknown")):(yield n.ma.stop(),F0(n))}))),n.ma}function vr(n){return n.fa||(n.fa=function(t,r,i){let o=W(t);return o.sa(),new Qg(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:nV.bind(null,n),r_:oV.bind(null,n),ta:rV.bind(null,n),na:iV.bind(null,n)}),n.da.push(e=>R(this,null,function*(){e?(n.fa.B_(),yield Pa(n)):(yield n.fa.stop(),n.Ta.length>0&&(P(Ei,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}var ey=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Ft,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new O(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Uy(n,e){if(lt("AsyncQueue",`${e}: ${n}`),Ir(n))return new O(M.UNAVAILABLE,`${e}: ${n}`);throw n}var ud=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||V.comparator(t.key,r.key):(t,r)=>V.comparator(t.key,r.key),this.keyedMap=Qs(),this.sortedSet=new Ae(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var ld=class{constructor(){this.ga=new Ae(V.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):B(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},Bo=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,ud.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var ty=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},ny=class{constructor(){this.queries=aT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=W(t),o=i.queries;i.queries=aT(),o.forEach((s,a)=>{for(let u of a.Sa)u.onError(r)})})(this,new O(M.ABORTED,"Firestore shutting down"))}};function aT(){return new Xt(n=>JT(n),xd)}function $y(n,e){return R(this,null,function*(){let t=W(n),r=3,i=e.query,o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new ty,r=e.Da()?0:1);try{switch(r){case 0:o.wa=yield t.onListen(i,!0);break;case 1:o.wa=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Uy(s,`Initialization of query '${go(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&qy(t)})}function Hy(n,e){return R(this,null,function*(){let t=W(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function aV(n,e){let t=W(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.Sa)a.Fa(i)&&(r=!0);s.wa=i}}r&&qy(t)}function cV(n,e,t){let r=W(n),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(t);r.queries.delete(e)}function qy(n){n.Ca.forEach(e=>{e.next()})}var ry,cT;(cT=ry||(ry={})).Ma="default",cT.Cache="cache";var Ea=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Bo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Bo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ry.Cache}};var dd=class{constructor(e){this.key=e}},fd=class{constructor(e){this.key=e}},iy=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=re(),this.mutatedKeys=re(),this.eu=ZT(e),this.tu=new ud(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new ld,i=t?t.tu:this.tu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{let g=i.get(f),y=Na(this.query,p)?p:null,T=!!g&&this.mutatedKeys.has(g.key),x=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),N=!1;g&&y?g.data.isEqual(y.data)?T!==x&&(r.track({type:3,doc:y}),N=!0):this.su(g,y)||(r.track({type:2,doc:y}),N=!0,(u&&this.eu(y,u)>0||l&&this.eu(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),N=!0):g&&!y&&(r.track({type:1,doc:g}),N=!0,(u||l)&&(a=!0)),N&&(y?(s=s.add(y),o=x?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{tu:s,iu:r,Cs:a,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((f,p)=>function(y,T){let x=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return B(20277,{Rt:N})}};return x(y)-x(T)}(f.type,p.type)||this.eu(f.doc,p.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,l=u!==this.Za;return this.Za=u,s.length!==0||l?{snapshot:new Bo(this.query,e.tu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ld,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=re(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new fd(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new dd(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=re();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Bo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},zy="SyncEngine",oy=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},sy=class{constructor(e){this.key=e,this.hu=!1}},ay=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Xt(a=>JT(a),xd),this.Iu=new Map,this.Eu=new Set,this.du=new Ae(V.comparator),this.Au=new Map,this.Ru=new wa,this.Vu={},this.mu=new Map,this.fu=jo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};function uV(n,e,t=!0){return R(this,null,function*(){let r=z0(n),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=yield B0(r,e,t,!0),i})}function lV(n,e){return R(this,null,function*(){let t=z0(n);yield B0(t,e,!0,!1)})}function B0(n,e,t,r){return R(this,null,function*(){let i=yield GF(n.localStore,Vt(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield dV(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&O0(n.remoteStore,i),a})}function dV(n,e,t,r,i){return R(this,null,function*(){n.pu=(p,g,y)=>function(x,N,F,j){return R(this,null,function*(){let L=N.view.ru(F);L.Cs&&(L=yield rT(x.localStore,N.query,!1).then(({documents:I})=>N.view.ru(I,L)));let Q=j&&j.targetChanges.get(N.targetId),J=j&&j.targetMismatches.get(N.targetId)!=null,z=N.view.applyChanges(L,x.isPrimaryClient,Q,J);return lT(x,N.targetId,z.au),z.snapshot})}(n,p,g,y);let o=yield rT(n.localStore,e,!0),s=new iy(e,o.Qs),a=s.ru(o.documents),u=_a.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);lT(n,t,l.au);let f=new oy(e,t,s);return n.Tu.set(e,f),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),l.snapshot})}function fV(n,e,t){return R(this,null,function*(){let r=W(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!xd(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield $g(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Vy(r.remoteStore,i.targetId),cy(r,i.targetId)}).catch(bi))):(cy(r,i.targetId),yield $g(r.localStore,i.targetId,!0))})}function hV(n,e){return R(this,null,function*(){let t=W(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Vy(t.remoteStore,r.targetId))})}function pV(n,e,t){return R(this,null,function*(){let r=G0(n);try{let i=yield function(s,a){let u=W(s),l=Ce.now(),f=a.reduce((y,T)=>y.add(T.key),re()),p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let T=xt(),x=re();return u.Ns.getEntries(y,f).next(N=>{T=N,T.forEach((F,j)=>{j.isValidDocument()||(x=x.add(F))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,T)).next(N=>{p=N;let F=[];for(let j of a){let L=_F(j,p.get(j.key).overlayedDocument);L!=null&&F.push(new en(j.key,L,qT(L.value.mapValue),Qe.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,F,a)}).next(N=>{g=N;let F=N.applyToLocalDocumentSet(p,x);return u.documentOverlayCache.saveOverlays(y,N.batchId,F)})}).then(()=>({batchId:g.batchId,changes:e0(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Vu[s.currentUser.toKey()];l||(l=new Ae(G)),l=l.insert(a,u),s.Vu[s.currentUser.toKey()]=l}(r,i.batchId,t),yield Oa(r,i.changes),yield Pa(r.remoteStore)}catch(i){let o=Uy(i,"Failed to persist write");t.reject(o)}})}function U0(n,e){return R(this,null,function*(){let t=W(n);try{let r=yield HF(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Au.get(o);s&&(U(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?U(s.hu,14607):i.removedDocuments.size>0&&(U(s.hu,42227),s.hu=!1))}),yield Oa(t,r,e)}catch(r){yield bi(r)}})}function uT(n,e,t){let r=W(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=W(s);u.onlineState=a;let l=!1;u.queries.forEach((f,p)=>{for(let g of p.Sa)g.va(a)&&(l=!0)}),l&&qy(u)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function mV(n,e,t){return R(this,null,function*(){let r=W(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new Ae(V.comparator);s=s.insert(o,Ye.newNoDocument(o,$.min()));let a=re().add(o),u=new Ll($.min(),new Map,new Ae(G),s,a);yield U0(r,u),r.du=r.du.remove(o),r.Au.delete(e),Gy(r)}else yield $g(r.localStore,e,!1).then(()=>cy(r,e,t)).catch(bi)})}function gV(n,e){return R(this,null,function*(){let t=W(n),r=e.batch.batchId;try{let i=yield $F(t.localStore,e);H0(t,r,null),$0(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Oa(t,i)}catch(i){yield bi(i)}})}function yV(n,e,t){return R(this,null,function*(){let r=W(n);try{let i=yield function(s,a){let u=W(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let f;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(U(p!==null,37113),f=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,f,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,f)).next(()=>u.localDocuments.getDocuments(l,f))})}(r.localStore,e);H0(r,e,t),$0(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Oa(r,i)}catch(i){yield bi(i)}})}function $0(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function H0(n,e,t){let r=W(n),i=r.Vu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function cy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||q0(n,r)})}function q0(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(Vy(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Gy(n))}function lT(n,e,t){for(let r of t)r instanceof dd?(n.Ru.addReference(r.key,e),_V(n,r)):r instanceof fd?(P(zy,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||q0(n,r.key)):B(19791,{wu:r})}function _V(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(P(zy,"New document in limbo: "+t),n.Eu.add(r),Gy(n))}function Gy(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new V(me.fromString(e)),r=n.fu.next();n.Au.set(r,new sy(t)),n.du=n.du.insert(t,r),O0(n.remoteStore,new Lo(Vt(Ma(t.path)),r,"TargetPurposeLimboResolution",Zt.ce))}}function Oa(n,e,t){return R(this,null,function*(){let r=W(n),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((a,u)=>{s.push(r.pu(u,e,t).then(l=>{if((l||t)&&r.isPrimaryClient){let f=l?!l.fromCache:t?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);let f=jg.As(u.targetId,l);o.push(f)}}))}),yield Promise.all(s),r.Pu.H_(i),yield function(u,l){return R(this,null,function*(){let f=W(u);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>S.forEach(l,g=>S.forEach(g.Es,y=>f.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>S.forEach(g.ds,y=>f.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!Ir(p))throw p;P(Fy,"Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=f.Ms.get(g),T=y.snapshotVersion,x=y.withLastLimboFreeSnapshotVersion(T);f.Ms=f.Ms.insert(g,x)}}})}(r.localStore,o))})}function vV(n,e){return R(this,null,function*(){let t=W(n);if(!t.currentUser.isEqual(e)){P(zy,"User change. New user:",e.toKey());let r=yield R0(t.localStore,e);t.currentUser=e,function(o,s){o.mu.forEach(a=>{a.forEach(u=>{u.reject(new O(M.CANCELLED,s))})}),o.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Oa(t,r.Ls)}})}function wV(n,e){let t=W(n),r=t.Au.get(e);if(r&&r.hu)return re().add(r.key);{let i=re(),o=t.Iu.get(e);if(!o)return i;for(let s of o){let a=t.Tu.get(s);i=i.unionWith(a.view.nu)}return i}}function z0(n){let e=W(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=U0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mV.bind(null,e),e.Pu.H_=aV.bind(null,e.eventManager),e.Pu.yu=cV.bind(null,e.eventManager),e}function G0(n){let e=W(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yV.bind(null,e),e}var Wy=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return R(this,null,function*(){this.serializer=Md(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)})}Fu(t,r){return null}Mu(t,r){return null}vu(t){return N0(this.persistence,new nd,t.initialUser,this.serializer)}Cu(t){return new Ia(ed.mi,this.serializer)}Du(t){return new id}terminate(){return R(this,null,function*(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),uy=class extends Wy{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){U(this.persistence.referenceDelegate instanceof td,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Jl(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?wt.withCacheSize(this.cacheSizeBytes):wt.DEFAULT;return new Ia(r=>td.mi(r,t),this.serializer)}},ly=class n extends Wy{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return R(this,null,function*(){yield tv(n.prototype,this,"initialize").call(this,e),yield this.xu.initialize(this,e),yield G0(this.xu.syncEngine),yield Pa(this.xu.remoteStore),yield this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}vu(e){return N0(this.persistence,new nd,e.initialUser,this.serializer)}Fu(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new Jl(r,e.asyncQueue,t)}Mu(e,t){let r=new Lm(t,this.persistence);return new Vm(e.asyncQueue,r)}Cu(e){let t=BF(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?wt.withCacheSize(this.cacheSizeBytes):wt.DEFAULT;return new Lg(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,QF(),vl(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new id}};var W0=(()=>{class n{initialize(t,r){return R(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>uT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=vV.bind(null,this.syncEngine),yield sV(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new ny}()}createDatastore(t){let r=Md(t.databaseInfo.databaseId),i=function(s){return new Wg(s)}(t.databaseInfo);return function(s,a,u,l){return new Jg(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new Xg(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>uT(this.syncEngine,r,0),function(){return od.v()?new od:new Hg}())}createSyncEngine(t,r){return function(o,s,a,u,l,f,p){let g=new ay(o,s,a,u,l,f);return p&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return R(this,null,function*(){yield function(r){return R(this,null,function*(){let i=W(r);P(Ei,"RemoteStore shutting down."),i.Ea.add(5),yield Ra(i),i.Aa.shutdown(),i.Ra.set("Unknown")})}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()})}}return n.provider={build:()=>new n},n})();var Da=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):lt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var wr="FirestoreClient",dy=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ue.UNAUTHENTICATED,this.clientId=ia.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>R(this,null,function*(){P(wr,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(P(wr,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ft;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>R(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Uy(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Tm(n,e){return R(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),P(wr,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>R(this,null,function*(){r.isEqual(i)||(yield R0(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function dT(n,e){return R(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield IV(n);P(wr,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>sT(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>sT(e.remoteStore,i)),n._onlineComponents=e})}function IV(n){return R(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){P(wr,"Using user provided OfflineComponentProvider");try{yield Tm(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;pi("Error using user provided cache. Falling back to memory cache: "+t),yield Tm(n,new Wy)}}else P(wr,"Using default OfflineComponentProvider"),yield Tm(n,new uy(void 0));return n._offlineComponents})}function K0(n){return R(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(P(wr,"Using user provided OnlineComponentProvider"),yield dT(n,n._uninitializedComponentsProvider._online)):(P(wr,"Using default OnlineComponentProvider"),yield dT(n,new W0))),n._onlineComponents})}function EV(n){return K0(n).then(e=>e.syncEngine)}function hd(n){return R(this,null,function*(){let e=yield K0(n),t=e.eventManager;return t.onListen=uV.bind(null,e.syncEngine),t.onUnlisten=fV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=lV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=hV.bind(null,e.syncEngine),t})}function DV(n,e,t={}){let r=new Ft;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(o,s,a,u,l){let f=new Da({next:g=>{f.Nu(),s.enqueueAndForget(()=>Hy(o,p));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new O(M.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?l.reject(new O(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new Ea(Ma(a.path),f,{includeMetadataChanges:!0,qa:!0});return $y(o,p)}(yield hd(n),n.asyncQueue,e,t,r)})),r.promise}function bV(n,e,t={}){let r=new Ft;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(o,s,a,u,l){let f=new Da({next:g=>{f.Nu(),s.enqueueAndForget(()=>Hy(o,p)),g.fromCache&&u.source==="server"?l.reject(new O(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new Ea(a,f,{includeMetadataChanges:!0,qa:!0});return $y(o,p)}(yield hd(n),n.asyncQueue,e,t,r)})),r.promise}function Q0(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var fT=new Map;var Y0="firestore.googleapis.com",hT=!0,pd=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new O(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Y0,this.ssl=hT}else this.host=e.host,this.ssl=e.ssl??hT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=T0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<LF)throw new O(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Q0(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new O(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new O(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new O(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Uo=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pd({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new O(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new O(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pd(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Sm;switch(r.type){case"firstParty":return new Nm(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new O(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return R(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=fT.get(t);r&&(P("ComponentProvider","Removing Datastore"),fT.delete(t),r.terminate())}(this),Promise.resolve()}};function TV(n,e,t,r={}){n=tt(n,Uo);let i=Xu(e),o=n._getSettings(),s=Re(ie({},o),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;i&&(FD(`https://${a}`),LD("Firestore",!0)),o.host!==Y0&&o.host!==a&&pi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Re(ie({},o),{host:a,ssl:i,emulatorOptions:r});if(!Qr(u,s)&&(n._setSettings(u),r.mockUserToken)){let l,f;if(typeof r.mockUserToken=="string")l=r.mockUserToken,f=Ue.MOCK_USER;else{l=VD(r.mockUserToken,n._app?.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new O(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ue(p)}n._authCredentials=new Am(new wl(l,f))}}var Fn=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},He=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ur(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Sa(t,n._jsonSchema))return new n(e,r||null,new V(me.fromString(t.referencePath)))}};He._jsonSchemaVersion="firestore/documentReference/1.0",He._jsonSchema={type:Ve("string",He._jsonSchemaVersion),referencePath:Ve("string")};var ur=class n extends Fn{constructor(e,t,r){super(e,t,Ma(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new He(this.firestore,null,new V(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function J0(n,e,...t){if(n=Ct(n),IT("collection","path",e),n instanceof Uo){let r=me.fromString(e,...t);return lb(r),new ur(n,null,r)}{if(!(n instanceof He||n instanceof ur))throw new O(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(me.fromString(e,...t));return lb(r),new ur(n.firestore,null,r)}}function zo(n,e,...t){if(n=Ct(n),arguments.length===1&&(e=ia.newId()),IT("doc","path",e),n instanceof Uo){let r=me.fromString(e,...t);return ub(r),new He(n,null,new V(r))}{if(!(n instanceof He||n instanceof ur))throw new O(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(me.fromString(e,...t));return ub(r),new He(n.firestore,n instanceof ur?n.converter:null,new V(r))}}var pT="AsyncQueue",md=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new sd(this,"async_queue_retry"),this._c=()=>{let r=vl();r&&P(pT,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=vl();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=vl();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new Ft;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}lc(){return R(this,null,function*(){if(this.Xu.length!==0){try{yield this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ir(e))throw e;P(pT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}})}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,lt("INTERNAL UNHANDLED ERROR: ",mT(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=ey.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&B(47125,{Pc:mT(this.nc)})}verifyOperationInProgress(){}Tc(){return R(this,null,function*(){let e;do e=this.ac,yield e;while(e!==this.ac)})}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function mT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function gT(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Mt=class extends Uo{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new md,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return R(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new md(e),this._firestoreClient=void 0,yield e}})}};function Z0(n,e){let t=typeof n=="object"?n:il(),r=typeof n=="string"?n:e||Ml,i=XD(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=kD("firestore");o&&TV(i,...o)}return i}function ka(n){if(n._terminated)throw new O(M.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||X0(n),n._firestoreClient}function X0(n){let e=n._freezeSettings(),t=function(i,o,s,a){return new $m(i,o,s,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,Q0(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)}(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new dy(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}}(n._componentsProvider))}function eC(n,e){pi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return CV(n,W0.provider,{build:r=>new ly(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function CV(n,e,t){if((n=tt(n,Mt))._firestoreClient||n._terminated)throw new O(M.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new O(M.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},X0(n)}var lr=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(qe.fromBase64String(e))}catch(t){throw new O(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(qe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Sa(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};lr._jsonSchemaVersion="firestore/bytes/1.0",lr._jsonSchema={type:Ve("string",lr._jsonSchemaVersion),bytes:Ve("string")};var Di=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new O(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $e(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var $o=class{constructor(e){this._methodName=e}};var dr=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new O(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new O(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return G(this._lat,e._lat)||G(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Sa(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};dr._jsonSchemaVersion="firestore/geoPoint/1.0",dr._jsonSchema={type:Ve("string",dr._jsonSchemaVersion),latitude:Ve("number"),longitude:Ve("number")};var fr=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Sa(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new O(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};fr._jsonSchemaVersion="firestore/vectorValue/1.0",fr._jsonSchema={type:Ve("string",fr._jsonSchemaVersion),vectorValues:Ve("object")};var SV=/^__.*__$/,fy=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new en(e,this.data,this.fieldMask,t,this.fieldTransforms):new _r(e,this.data,t,this.fieldTransforms)}},gd=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new en(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function tC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw B(40011,{Ac:n})}}var yd=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new n(ie(ie({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return vd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(tC(this.Ac)&&SV.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},hy=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Md(e)}Cc(e,t,r,i=!1){return new yd({Ac:e,methodName:t,Dc:r,path:$e.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Fa(n){let e=n._freezeSettings(),t=Md(n._databaseId);return new hy(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ky(n,e,t,r,i,o={}){let s=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);Qy("Data must be an object, but it was:",s,r);let a=iC(r,s),u,l;if(o.merge)u=new At(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let f=[];for(let p of o.mergeFields){let g=my(e,p,t);if(!s.contains(g))throw new O(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);sC(f,g)||f.push(g)}u=new At(f),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new fy(new dt(a),u,l)}var _d=class n extends $o{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function AV(n,e,t){return new yd({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var py=class n extends $o{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){let t=AV(this,e,!0),r=this.vc.map(o=>Go(o,t)),i=new kn(r);return new Fl(e.path,i)}isEqual(e){return e instanceof n&&Qr(this.vc,e.vc)}};function nC(n,e,t,r){let i=n.Cc(1,e,t);Qy("Data must be an object, but it was:",i,r);let o=[],s=dt.empty();Er(r,(u,l)=>{let f=Yy(e,u,t);l=Ct(l);let p=i.yc(f);if(l instanceof _d)o.push(f);else{let g=Go(l,p);g!=null&&(o.push(f),s.set(f,g))}});let a=new At(o);return new gd(s,a,i.fieldTransforms)}function rC(n,e,t,r,i,o){let s=n.Cc(1,e,t),a=[my(e,r,t)],u=[i];if(o.length%2!=0)throw new O(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(my(e,o[g])),u.push(o[g+1]);let l=[],f=dt.empty();for(let g=a.length-1;g>=0;--g)if(!sC(l,a[g])){let y=a[g],T=u[g];T=Ct(T);let x=s.yc(y);if(T instanceof _d)l.push(y);else{let N=Go(T,x);N!=null&&(l.push(y),f.set(y,N))}}let p=new At(l);return new gd(f,p,s.fieldTransforms)}function xV(n,e,t,r=!1){return Go(t,n.Cc(r?4:3,e))}function Go(n,e){if(oC(n=Ct(n)))return Qy("Unsupported field value:",e,n),iC(n,e);if(n instanceof $o)return function(r,i){if(!tC(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=Go(a,i.wc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Ct(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return hF(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ce.fromDate(r);return{timestampValue:Vo(i.serializer,o)}}if(r instanceof Ce){let o=new Ce(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Vo(i.serializer,o)}}if(r instanceof dr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof lr)return{bytesValue:l0(i.serializer,r._byteString)};if(r instanceof He){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Oy(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof fr)return function(s,a){return{mapValue:{fields:{[My]:{stringValue:Ny},[Ro]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Sc("VectorValues must only contain numeric values.");return Py(a.serializer,l)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Ed(r)}`)}(n,e)}function iC(n,e){let t={};return FT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Er(n,(r,i)=>{let o=Go(i,e.mc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function oC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ce||n instanceof dr||n instanceof lr||n instanceof He||n instanceof $o||n instanceof fr)}function Qy(n,e,t){if(!oC(t)||!ET(t)){let r=Ed(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function my(n,e,t){if((e=Ct(e))instanceof Di)return e._internalPath;if(typeof e=="string")return Yy(n,e);throw vd("Field path arguments must be of type string or ",n,!1,void 0,t)}var MV=new RegExp("[~\\*/\\[\\]]");function Yy(n,e,t){if(e.search(MV)>=0)throw vd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Di(...e.split("."))._internalPath}catch{throw vd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function vd(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new O(M.INVALID_ARGUMENT,a+n+u)}function sC(n,e){return n.some(t=>t.isEqual(e))}var wd=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new He(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new gy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Rd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},gy=class extends wd{data(){return super.data()}};function Rd(n,e){return typeof e=="string"?Yy(n,e):e instanceof Di?e._internalPath:e._delegate._internalPath}function aC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new O(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ba=class{},Ta=class extends ba{};function Jy(n,e,...t){let r=[];e instanceof ba&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof yy).length,a=o.filter(u=>u instanceof Id).length;if(s>1||s>0&&a>0)throw new O(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Id=class n extends Ta{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return lC(e._query,t),new Fn(e.firestore,e.converter,tg(e._query,t))}_parse(e){let t=Fa(e.firestore);return function(o,s,a,u,l,f,p){let g;if(l.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new O(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){_T(p,f);let T=[];for(let x of p)T.push(yT(u,o,x));g={arrayValue:{values:T}}}else g=yT(u,o,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||_T(p,f),g=xV(a,s,p,f==="in"||f==="not-in");return oe.create(l,f,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function cC(n,e,t){let r=e,i=Rd("where",n);return Id._create(i,r,t)}var yy=class n extends ba{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:ge.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)lC(s,u),s=tg(s,u)}(e._query,t),new Fn(e.firestore,e.converter,tg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var _y=class n extends Ta{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new O(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new O(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new mi(o,s)}(e._query,this._field,this._direction);return new Fn(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new gr(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function uC(n,e="asc"){let t=e,r=Rd("orderBy",n);return _y._create(r,t)}var vy=class n extends Ta{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Fn(e.firestore,e.converter,kl(e._query,this._limit,this._limitType))}};function W3(n){return Tk("limit",n),vy._create("limit",n,"F")}function yT(n,e,t){if(typeof(t=Ct(t))=="string"){if(t==="")throw new O(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!YT(e)&&t.indexOf("/")!==-1)throw new O(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(me.fromString(t));if(!V.isDocumentKey(r))throw new O(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return pa(n,new V(r))}if(t instanceof He)return pa(n,t._key);throw new O(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ed(t)}.`)}function _T(n,e){if(!Array.isArray(n)||n.length===0)throw new O(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function lC(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new O(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new O(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var wy=class{convertValue(e,t="none"){switch(hr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Te(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(On(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw B(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Er(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){let t=e.fields?.[Ro].arrayValue?.values?.map(r=>Te(r.doubleValue));return new fr(t)}convertGeoPoint(e){return new dr(Te(e.latitude),Te(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Sd(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(fa(e));default:return null}}convertTimestamp(e){let t=Pn(e);return new Ce(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=me.fromString(e);U(w0(r),9688,{name:e});let i=new No(r.get(1),r.get(3)),o=new V(r.popFirst(5));return i.isEqual(t)||lt(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Zy(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var si=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},di=class n extends wd{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Do(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Rd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new O(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};di._jsonSchemaVersion="firestore/documentSnapshot/1.0",di._jsonSchema={type:Ve("string",di._jsonSchemaVersion),bundleSource:Ve("string","DocumentSnapshot"),bundleName:Ve("string"),bundle:Ve("string")};var Do=class extends di{data(e={}){return super.data(e)}},fi=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new si(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Do(this._firestore,this._userDataWriter,r.key,r,new si(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new O(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Do(i._firestore,i._userDataWriter,a.doc.key,a.doc,new si(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Do(i._firestore,i._userDataWriter,a.doc.key,a.doc,new si(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,f=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),f=s.indexOf(a.doc.key)),{type:NV(a.type),doc:u,oldIndex:l,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new O(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ia.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function NV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return B(61501,{type:n})}}function dC(n){n=tt(n,He);let e=tt(n.firestore,Mt);return DV(ka(e),n._key).then(t=>gC(e,n,t))}fi._jsonSchemaVersion="firestore/querySnapshot/1.0",fi._jsonSchema={type:Ve("string",fi._jsonSchemaVersion),bundleSource:Ve("string","QuerySnapshot"),bundleName:Ve("string"),bundle:Ve("string")};var Ca=class extends wy{constructor(e){super(),this.firestore=e}convertBytes(e){return new lr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new He(this.firestore,null,t)}};function fC(n){n=tt(n,Fn);let e=tt(n.firestore,Mt),t=ka(e),r=new Ca(e);return aC(n._query),bV(t,n._query).then(i=>new fi(e,r,n,i))}function hC(n,e,t){n=tt(n,He);let r=tt(n.firestore,Mt),i=Zy(n.converter,e,t);return Va(r,[Ky(Fa(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Qe.none())])}function pC(n,e,t,...r){n=tt(n,He);let i=tt(n.firestore,Mt),o=Fa(i),s;return s=typeof(e=Ct(e))=="string"||e instanceof Di?rC(o,"updateDoc",n._key,e,t,r):nC(o,"updateDoc",n._key,e),Va(i,[s.toMutation(n._key,Qe.exists(!0))])}function mC(n){return Va(tt(n.firestore,Mt),[new vi(n._key,Qe.none())])}function K3(n,e){let t=tt(n.firestore,Mt),r=zo(n),i=Zy(n.converter,e);return Va(t,[Ky(Fa(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Qe.exists(!1))]).then(()=>r)}function Q3(n,...e){n=Ct(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||gT(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(gT(e[r])){let u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let o,s,a;if(n instanceof He)s=tt(n.firestore,Mt),a=Ma(n._key.path),o={next:u=>{e[r]&&e[r](gC(s,n,u))},error:e[r+1],complete:e[r+2]};else{let u=tt(n,Fn);s=tt(u.firestore,Mt),a=u._query;let l=new Ca(s);o={next:f=>{e[r]&&e[r](new fi(s,l,u,f))},error:e[r+1],complete:e[r+2]},aC(n._query)}return function(l,f,p,g){let y=new Da(g),T=new Ea(f,y,p);return l.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return $y(yield hd(l),T)})),()=>{y.Nu(),l.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return Hy(yield hd(l),T)}))}}(ka(s),a,i,o)}function Va(n,e){return function(r,i){let o=new Ft;return r.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return pV(yield EV(r),i,o)})),o.promise}(ka(n),e)}function gC(n,e,t){let r=t.docs.get(e._key),i=new Ca(n);return new di(n,i,e._key,r,new si(t.hasPendingWrites,t.fromCache),e.converter)}var Iy=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Fa(e)}set(e,t,r){this._verifyNotCommitted();let i=Cm(e,this._firestore),o=Zy(i.converter,t,r),s=Ky(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Qe.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Cm(e,this._firestore),s;return s=typeof(t=Ct(t))=="string"||t instanceof Di?rC(this._dataReader,"WriteBatch.update",o._key,t,r,i):nC(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Qe.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Cm(e,this._firestore);return this._mutations=this._mutations.concat(new vi(t._key,Qe.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new O(M.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Cm(n,e){if((n=Ct(n)).firestore!==e)throw new O(M.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function Y3(...n){return new py("arrayUnion",n)}function J3(n){return ka(n=tt(n,Mt)),new Iy(n,e=>Va(n,e))}(function(e,t=!0){(function(i){Ho=i})(tb),$s(new An("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Mt(new xm(r.getProvider("auth-internal")),new Rm(s,r.getProvider("app-check-internal")),function(l,f){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new O(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new No(l.options.projectId,f)}(s,i),s);return o=ie({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),rr(sb,ab,e),rr(sb,ab,"esm2020")})();var RV="firebase",PV="12.6.0";rr(RV,PV,"app");var yC=(()=>{class n{constructor(){this.app=il(),this.db=Z0(this.app),eC(this.db).catch(t=>{console.warn("Firebase Persistence Error:",t.code),t.code=="failed-precondition"?console.warn("Multiple tabs open, persistence can only be enabled in one tab at a time."):t.code=="unimplemented"&&console.warn("The current browser does not support all of the features required to enable persistence")})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var _C=(()=>{class n{constructor(){this.dbName="jjm_inventory_db",this.storeName="cache",this.db$=this.initDB().pipe(_f(1))}initDB(){return new ne(t=>{let r=indexedDB.open(this.dbName,1);r.onupgradeneeded=i=>{let o=i.target.result;o.objectStoreNames.contains(this.storeName)||o.createObjectStore(this.storeName)},r.onsuccess=i=>{t.next(i.target.result),t.complete()},r.onerror=i=>{console.error("IndexedDB error:",i.target.error),t.error(i.target.error)}})}get(t){return this.db$.pipe(Dt(1),Fi(r=>new ne(i=>{try{let a=r.transaction(this.storeName,"readonly").objectStore(this.storeName).get(t);a.onsuccess=()=>{i.next(a.result),i.complete()},a.onerror=u=>{i.error(a.error)}}catch(o){i.error(o)}})),$t(r=>(console.warn("IndexedDbService: Failed to get key",t,r),hs(null))))}set(t,r){return this.db$.pipe(Dt(1),Fi(i=>new ne(o=>{try{let u=i.transaction(this.storeName,"readwrite").objectStore(this.storeName).put(r,t);u.onsuccess=()=>{o.next(),o.complete()},u.onerror=l=>{o.error(u.error)}}catch(s){o.error(s)}})),$t(i=>(console.error("IndexedDbService: Failed to set key",t,i),yn(()=>i))))}delete(t){return this.db$.pipe(Dt(1),Fi(r=>new ne(i=>{try{let a=r.transaction(this.storeName,"readwrite").objectStore(this.storeName).delete(t);a.onsuccess=()=>{i.next(),i.complete()},a.onerror=u=>{i.error(a.error)}}catch(o){i.error(o)}})),$t(r=>(console.error("IndexedDbService: Failed to delete key",t,r),yn(()=>r))))}clear(){return this.db$.pipe(Dt(1),Fi(t=>new ne(r=>{try{let s=t.transaction(this.storeName,"readwrite").objectStore(this.storeName).clear();s.onsuccess=()=>{r.next(),r.complete()},s.onerror=a=>{r.error(s.error)}}catch(i){r.error(i)}})),$t(t=>(console.error("IndexedDbService: Failed to clear cache",t),yn(()=>t))))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var vC=(()=>{class n{constructor(){this.loadingSubject=new Ut(!1),this.loading$=this.loadingSubject.asObservable(),this.messageSubject=new Ut("Loading..."),this.message$=this.messageSubject.asObservable()}show(t="Loading..."){this.messageSubject.next(t),this.loadingSubject.next(!0)}hide(){this.loadingSubject.next(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var m9=(()=>{class n{get db(){return this.firebaseService.db}constructor(t,r,i){this.firebaseService=t,this.indexedDbService=r,this.loadingService=i,this._stores=Ep([]),this.stores=this._stores.asReadonly(),this.storesSubject=new Ut([]),this.stores$=this.storesSubject.asObservable(),this.activeStoreIdSubject=new Ut(localStorage.getItem("jjm_active_store_id")),this.activeStoreId$=this.activeStoreIdSubject.asObservable(),this.activeStoreId=Ep(localStorage.getItem("jjm_active_store_id")),this.hydrateFromCache()}hydrateFromCache(){this.indexedDbService.get("jjm_cached_stores").pipe(Dt(1)).subscribe({next:t=>{if(t)try{this._stores.set(t),this.storesSubject.next(t)}catch(r){console.warn("Failed to parse cached stores",r)}},error:t=>console.warn("Failed to hydrate stores from IndexedDB",t)})}saveToCache(t){this.indexedDbService.set("jjm_cached_stores",t).pipe(Dt(1)).subscribe({error:r=>console.error("Failed to save stores to cache",r)})}reset(){this._stores.set([]),this.storesSubject.next([]),this.activeStoreIdSubject.next(null),this.activeStoreId.set(null),this.indexedDbService.delete("jjm_cached_stores").pipe(Dt(1)).subscribe()}loadStores(t=!1){if(!t&&this._stores().length>0){console.log("Stores already loaded in Signal. Skipping fetch.");return}let r=localStorage.getItem("jjm_role"),i=localStorage.getItem("jjm_store_id"),o=J0(this.db,"stores"),s=Jy(o,uC("createdAt","desc"));r==="admin"&&i&&(s=Jy(o,cC("id","==",i))),mt(fC(s)).subscribe({next:a=>{let u=a.docs.map(l=>{let f=l.data();return Re(ie({},f),{id:l.id,createdAt:f.createdAt?.toDate?f.createdAt.toDate():f.createdAt})});this._stores.set(u),this.storesSubject.next(u),this.saveToCache(u),!this.activeStoreId()&&u.length>0&&this.setActiveStore(u[0].id)},error:a=>console.error("Error fetching stores:",a)})}getStoreById(t){let r=zo(this.db,"stores",t);return mt(dC(r)).pipe(Et(i=>{if(!i.exists())throw new Error("Store not found");let o=i.data();return Re(ie({},o),{id:i.id,createdAt:o.createdAt?.toDate?o.createdAt.toDate():o.createdAt})}))}createStore(t){let r=crypto.randomUUID(),i=Re(ie({},t),{id:r,createdAt:new Date}),o=this.sanitizeData(i),s=zo(this.db,"stores",r);return this.loadingService.show("Creating store..."),mt(hC(s,o)).pipe(Et(()=>o),Vi(a=>{let l=[...this._stores(),a];this._stores.set(l),this.storesSubject.next(l),this.saveToCache(l),this.activeStoreId()||this.setActiveStore(a.id)}),$t(a=>(console.error("Error creating store:",a),yn(()=>a))),gs(()=>this.loadingService.hide()))}updateStore(t,r){let i=this.sanitizeData(r),o=zo(this.db,"stores",t);return this.loadingService.show("Updating store..."),mt(pC(o,i)).pipe(Et(()=>{let a=this._stores().find(u=>u.id===t);return ie(ie({},a),r)}),Vi(s=>{let u=this._stores().map(l=>l.id===t?ie(ie({},l),s):l);this._stores.set(u),this.storesSubject.next(u),this.saveToCache(u)}),$t(s=>(console.error("Error updating store:",s),yn(()=>s))),gs(()=>this.loadingService.hide()))}deleteStore(t){let r=zo(this.db,"stores",t);return this.loadingService.show("Deleting store..."),mt(mC(r)).pipe(Vi(()=>{let o=this._stores().filter(s=>s.id!==t);if(this._stores.set(o),this.storesSubject.next(o),this.saveToCache(o),this.activeStoreId()===t){let s=o[0];this.setActiveStore(s?s.id:null)}}),$t(i=>(console.error("Error deleting store:",i),yn(()=>i))),gs(()=>this.loadingService.hide()))}migrateData(t){return console.warn("migrateData is deprecated - no backend to migrate to"),hs({success:!0,message:"Migration deprecated"})}setActiveStore(t){t?localStorage.setItem("jjm_active_store_id",t):localStorage.removeItem("jjm_active_store_id"),this.activeStoreId.set(t),this.activeStoreIdSubject.next(t)}getActiveStoreId(){return this.activeStoreId()}hasAiResponseCredits(t){let r=this.storesSubject.value.find(o=>o.id===t);if(!r)return!1;let i=r.subscriptionPlan||"Free";return i==="Pro"||i.includes("Pro")||i.includes("Enterprise")?!0:i==="Starter"||i.includes("Starter")?(r.credits?.aiResponse??0)>0:!1}deductAiResponseCredit(t){let r=this.storesSubject.value.find(o=>o.id===t);if(!r)return;let i=r.subscriptionPlan||"Free";if(i==="Starter"||i.includes("Starter")){let o=r.credits?.aiResponse??0;if(o>0){let s=Re(ie({},r.credits||{ai:0,callMinutes:0,lastResetDate:new Date}),{aiResponse:o-1});this.updateStore(t,{credits:s}).subscribe()}}}hasTransactionCredits(t){let r=this.storesSubject.value.find(o=>o.id===t);if(!r)return!1;let i=r.subscriptionPlan||"Free";return i==="Pro"||i.includes("Pro")||i.includes("Enterprise")?!0:(r.credits?.transactions??0)>0}deductTransactionCredit(t){let r=this.storesSubject.value.find(s=>s.id===t);if(!r)return;let i=r.subscriptionPlan||"Free";if(i==="Pro"||i.includes("Pro")||i.includes("Enterprise"))return;let o=r.credits?.transactions??0;if(o>0){let s=Re(ie({},r.credits||{ai:0,callMinutes:0,lastResetDate:new Date}),{transactions:o-1});this.updateStore(t,{credits:s}).subscribe()}}hasAiCredits(t){let r=this.storesSubject.value.find(o=>o.id===t);if(!r)return!1;let i=r.subscriptionPlan||"Free";return i==="Pro"||i.includes("Pro")||i.includes("Enterprise")?!0:i==="Starter"||i.includes("Starter")?(r.credits?.ai??0)>0:!1}deductAiCredit(t){let r=this.storesSubject.value.find(o=>o.id===t);if(!r)return;let i=r.subscriptionPlan||"Free";if(i==="Starter"||i.includes("Starter")){let o=r.credits?.ai??0;if(o>0){let s=Re(ie({},r.credits||{ai:0,callMinutes:0,lastResetDate:new Date}),{ai:o-1});this.updateStore(t,{credits:s}).subscribe()}}}hasVoiceCallAccess(t){let r=this.storesSubject.value.find(o=>o.id===t);if(!r)return!1;let i=r.subscriptionPlan||"Free";return i==="Pro"||i.includes("Pro")||i.includes("Enterprise")}sanitizeData(t){if(t===null||typeof t!="object"||t instanceof Date)return t;if(Array.isArray(t))return t.map(i=>this.sanitizeData(i));let r={};return Object.keys(t).forEach(i=>{let o=t[i];o!==void 0&&(r[i]=this.sanitizeData(o))}),r}static{this.\u0275fac=function(r){return new(r||n)(Pe(yC),Pe(_C),Pe(vC))}}static{this.\u0275prov=fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();export{je as a,tS as b,ne as c,ff as d,hf as e,Nt as f,Ut as g,ls as h,mt as i,hs as j,yn as k,IS as l,gn as m,eS as n,Et as o,_S as p,_n as q,pf as r,Dc as s,ES as t,wS as u,mf as v,ps as w,$t as x,xS as y,MS as z,ms as A,Dt as B,NS as C,RS as D,gs as E,Av as F,gf as G,kS as H,FS as I,VS as J,Fi as K,LS as L,Vi as M,le as N,kw as O,fe as P,Vw as Q,E$ as R,ye as S,se as T,Pe as U,de as V,fA as W,hA as X,Es as Y,Wn as Z,D$ as _,Yw as $,yu as aa,OA as ba,oI as ca,Qn as da,GA as ea,fI as fa,b$ as ga,T$ as ha,C$ as ia,S$ as ja,A$ as ka,Vx as la,Xi as ma,Jn as na,Wr as oa,Pr as pa,x$ as qa,M$ as ra,Kx as sa,tp as ta,N$ as ua,R$ as va,P$ as wa,_M as xa,O$ as ya,k$ as za,nu as Aa,F$ as Ba,Be as Ca,V$ as Da,ou as Ea,ph as Fa,_p as Ga,no as Ha,Pt as Ia,QN as Ja,ro as Ka,Ep as La,b1 as Ma,M1 as Na,Th as Oa,N1 as Pa,Dp as Qa,L1 as Ra,U1 as Sa,eR as Ta,UE as Ua,tR as Va,U$ as Wa,$$ as Xa,QE as Ya,YE as Za,dR as _a,pR as $a,mR as ab,H$ as bb,DR as cb,q$ as db,TR as eb,ZE as fb,z$ as gb,G$ as hb,W$ as ib,K$ as jb,Q$ as kb,Y$ as lb,AR as mb,XE as nb,xR as ob,MR as pb,NR as qb,J$ as rb,RR as sb,Z$ as tb,X$ as ub,e6 as vb,t6 as wb,n6 as xb,r6 as yb,i6 as zb,o6 as Ab,s6 as Bb,a6 as Cb,c6 as Db,u6 as Eb,l6 as Fb,Lu as Gb,UR as Hb,$R as Ib,oD as Jb,d6 as Kb,ju as Lb,f6 as Mb,aP as Nb,h6 as Ob,lP as Pb,p6 as Qb,xp as Rb,k6 as Sb,cD as Tb,$p as Ub,F6 as Vb,Yu as Wb,fP as Xb,V6 as Yb,hP as Zb,L6 as _b,j6 as $b,B6 as ac,U6 as bc,$6 as cc,H6 as dc,q6 as ec,z6 as fc,G6 as gc,W6 as hc,K6 as ic,tO as jc,Q6 as kc,Y6 as lc,yD as mc,vC as nc,OD as oc,lO as pc,t3 as qc,Xu as rc,FD as sc,LD as tc,Kr as uc,n3 as vc,r3 as wc,i3 as xc,o3 as yc,s3 as zc,el as Ac,BD as Bc,a3 as Cc,Sn as Dc,Us as Ec,c3 as Fc,Qr as Gc,u3 as Hc,l3 as Ic,Ct as Jc,An as Kc,ae as Lc,so as Mc,WD as Nc,w3 as Oc,$s as Pc,XD as Qc,eb as Rc,tb as Sc,lk as Tc,il as Uc,rr as Vc,Ce as Wc,J0 as Xc,zo as Yc,Jy as Zc,cC as _c,uC as $c,W3 as ad,dC as bd,fC as cd,hC as dd,pC as ed,mC as fd,K3 as gd,Q3 as hd,Y3 as id,J3 as jd,yC as kd,_C as ld,m9 as md};
