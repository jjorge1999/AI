import{a as J}from"./chunk-UQZUUH4X.js";import{a as W,b as k,c as T,d as U,e as z,f as D,g as L,h as A,i as B,j as G,l as j,m as R,n as H}from"./chunk-2DPKSQCW.js";import{Ma as F,Nb as N,Oa as s,Sa as e,Sb as V,Ta as t,Ua as I,X as S,Xa as P,Ya as _,Za as C,cb as n,da as w,ea as b,hb as f,ib as v,jb as h,lb as q,sa as E,wa as c,xa as O}from"./chunk-AAFZVE2M.js";function K(l,Q){if(l&1){let r=P();e(0,"div",23),I(1,"img",24),e(2,"button",25),_("click",function(){w(r);let i=C();return b(i.removeImage())}),n(3," \u2715 "),t()()}if(l&2){let r=C();c(),s("src",r.imagePreview,E)}}function X(l,Q){if(l&1){let r=P();e(0,"div",26)(1,"input",27),_("change",function(i){w(r);let d=C();return b(d.onImageChange(i))}),t(),e(2,"label",28)(3,"span",29),n(4,"\u{1F4F7}"),t(),e(5,"span",30),n(6,"Click to upload image"),t(),e(7,"span",31),n(8,"PNG, JPG, GIF up to 5MB"),t()()()}}var ne=(()=>{class l{constructor(r){this.inventoryService=r,this.product={name:"",category:"",price:0,quantity:0,imageUrl:""},this.imagePreview=null}onImageChange(r){let a=r.target;if(a.files&&a.files[0]){let i=a.files[0];if(i.size>10*1024*1024){alert("File is too large. Please select an image under 10MB.");return}let d=new FileReader;d.onload=o=>{let g=new Image;g.src=o.target?.result,g.onload=()=>{let y=document.createElement("canvas"),m=g.width,p=g.height,u=800;(m>u||p>u)&&(m>p?(p=Math.round(p*u/m),m=u):(m=Math.round(m*u/p),p=u)),y.width=m,y.height=p;let M=y.getContext("2d");if(M){M.drawImage(g,0,0,m,p);let x=y.toDataURL("image/jpeg",.7);this.imagePreview=x,this.product.imageUrl=x}}},d.readAsDataURL(i)}}removeImage(){this.imagePreview=null,this.product.imageUrl=""}onSubmit(){this.isValid()&&(this.inventoryService.addProduct({name:this.product.name,category:this.product.category,price:this.product.price,quantity:this.product.quantity,imageUrl:this.product.imageUrl}),this.product={name:"",category:"",price:0,quantity:0,imageUrl:""},this.imagePreview=null)}isValid(){return!!(this.product.name&&this.product.category&&this.product.price>0&&this.product.quantity>0)}static{this.\u0275fac=function(a){return new(a||l)(O(J))}}static{this.\u0275cmp=S({type:l,selectors:[["app-product-form"]],standalone:!0,features:[q],decls:42,vars:7,consts:[[1,"card"],[1,"form",3,"ngSubmit"],[1,"image-upload-section"],[1,"image-upload-label"],["class","image-preview-container",4,"ngIf"],["class","image-upload-area",4,"ngIf"],[1,"form-group"],["for","productName"],["type","text","id","productName","name","name","placeholder","Enter product name","required","",3,"ngModelChange","ngModel"],["for","category"],["id","category","name","category","required","",3,"ngModelChange","ngModel"],["value",""],["value","Lechon"],["value","Hollow blocks"],["value","Sand and Gravel"],["value","Copra"],["value","Others"],[1,"form-row"],["for","price"],["type","number","id","price","name","price","placeholder","0.00","min","0","step","0.01","required","",3,"ngModelChange","ngModel"],["for","quantity"],["type","number","id","quantity","name","quantity","placeholder","0","min","1","required","",3,"ngModelChange","ngModel"],["type","submit",1,"btn-primary",3,"disabled"],[1,"image-preview-container"],["alt","Product preview","loading","lazy",1,"image-preview",3,"src"],["type","button",1,"remove-image-btn",3,"click"],[1,"image-upload-area"],["type","file","id","productImage","accept","image/*",1,"file-input",3,"change"],["for","productImage",1,"file-input-label"],[1,"upload-icon"],[1,"upload-text"],[1,"upload-hint"]],template:function(a,i){a&1&&(e(0,"div",0)(1,"h3"),n(2,"Add New Product"),t(),e(3,"form",1),_("ngSubmit",function(){return i.onSubmit()}),e(4,"div",2)(5,"label",3),n(6,"Product Image (Optional)"),t(),F(7,K,4,1,"div",4)(8,X,9,0,"div",5),t(),e(9,"div",6)(10,"label",7),n(11,"Product Name"),t(),e(12,"input",8),h("ngModelChange",function(o){return v(i.product.name,o)||(i.product.name=o),o}),t()(),e(13,"div",6)(14,"label",9),n(15,"Category"),t(),e(16,"select",10),h("ngModelChange",function(o){return v(i.product.category,o)||(i.product.category=o),o}),e(17,"option",11),n(18,"-- Select Category --"),t(),e(19,"option",12),n(20,"Lechon"),t(),e(21,"option",13),n(22,"Hollow blocks"),t(),e(23,"option",14),n(24,"Sand and Gravel"),t(),e(25,"option",15),n(26,"Copra"),t(),e(27,"option",16),n(28,"Others"),t()()(),e(29,"div",17)(30,"div",6)(31,"label",18),n(32,"Price"),t(),e(33,"input",19),h("ngModelChange",function(o){return v(i.product.price,o)||(i.product.price=o),o}),t()(),e(34,"div",6)(35,"label",20),n(36,"Quantity"),t(),e(37,"input",21),h("ngModelChange",function(o){return v(i.product.quantity,o)||(i.product.quantity=o),o}),t()()(),e(38,"button",22)(39,"span"),n(40,"\u2795"),t(),n(41," Add Product "),t()()()),a&2&&(c(7),s("ngIf",i.imagePreview),c(),s("ngIf",!i.imagePreview),c(4),f("ngModel",i.product.name),c(4),f("ngModel",i.product.category),c(17),f("ngModel",i.product.price),c(4),f("ngModel",i.product.quantity),c(),s("disabled",!i.isValid()))},dependencies:[V,N,H,D,B,G,W,L,A,k,T,R,j,z,U],styles:[".form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-lg);margin-top:var(--space-lg)}.image-upload-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.image-upload-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.image-preview-container[_ngcontent-%COMP%]{position:relative;width:100%;max-width:300px;margin:0 auto}.image-preview[_ngcontent-%COMP%]{width:100%;height:200px;object-fit:cover;border-radius:var(--radius-lg);border:2px solid var(--color-border)}.remove-image-btn[_ngcontent-%COMP%]{position:absolute;top:var(--space-sm);right:var(--space-sm);width:32px;height:32px;padding:0;background:var(--color-danger);color:#fff;border:none;border-radius:50%;font-size:1.25rem;cursor:pointer;display:flex;align-items:center;justify-content:center;box-shadow:var(--shadow-md)}.remove-image-btn[_ngcontent-%COMP%]:hover{background:#dc2626;transform:scale(1.1)}.image-upload-area[_ngcontent-%COMP%]{width:100%}.file-input[_ngcontent-%COMP%]{display:none}.file-input-label[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:var(--space-sm);padding:var(--space-2xl);border:2px dashed var(--color-border);border-radius:var(--radius-lg);background:var(--color-bg);cursor:pointer;transition:all var(--transition-base)}.file-input-label[_ngcontent-%COMP%]:hover{border-color:var(--color-primary);background:#1e40af0d}.upload-icon[_ngcontent-%COMP%]{font-size:3rem}.upload-text[_ngcontent-%COMP%]{font-weight:500;color:var(--color-text)}.upload-hint[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-muted)}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--space-sm)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text)}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--space-lg)}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:var(--space-md) var(--space-lg);font-size:1rem;margin-top:var(--space-sm)}@media (max-width: 640px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return l})();export{ne as a};
